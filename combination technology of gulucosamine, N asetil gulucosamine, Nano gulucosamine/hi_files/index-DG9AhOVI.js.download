const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AppDownloadQR-Ci3CHQSY.js","assets/vendors-zQBRGsiS.js","assets/vite-D9Bl2idj.js","assets/index-C3FxZ4wa.js","assets/WatchlistSelections-DlHfd66R.js","assets/i18n-DP750uYl.js","assets/icons-BqG2G0mn.js","assets/platform-bU5jYM9r.js","assets/emoji-picker-react.esm-DT3RrM2T.js","assets/FileUploadModal-DFsHPCxy.js","assets/SourcesTable-DPN63YnQ.js","assets/FilesTableHeader-DA2iOWQ9.js","assets/CometDownloadInstructionsModal-DtoBv7E_.js","assets/CollectionCreateEditModal-hEanxRQM.js","assets/getMaybeTranslatedCollectionTitle-DLh07ZPz.js","assets/CollectionSelectModal-C99C1v2h.js","assets/OnboardingModal-C1-ZoNj2.js","assets/MarkdownRenderer-BNF-oSax.js","assets/index-BDNTbGU-.js","assets/MarkdownStreamer-DSYAnBp6.js","assets/PlatformOptions-DxWUy2WP.js","assets/CombinedPaywall-D15gPuKr.js","assets/StudentReferralsContent-DhdE1Y6z.js","assets/CanonicalPattern-D0fWcp7o.js","assets/useStudentReferralRewards-Cp6XlZkm.js","assets/PurchaseConfirmationToast-CpDCx5ES.js","assets/use-unmount-effect-C7IAfMQM.js","assets/CompanyDataPrivacyModal-vpY0ejQe.js","assets/SpaceVideoModal-CYrK_Vbd.js","assets/PricingTableModal-C0_AwxtJ.js","assets/FreeTrialModal-BmnK4a0l.js","assets/MapModal-CVCnFzcR.js","assets/PerplexityMap-Bo1nBdMd.js","assets/InputPaymentModal-I5H69ZAW.js","assets/useStripePromise-Cz6MyXpy.js","assets/ShoppingPaymentModal-4aMecxh9.js","assets/ShoppingDetailsModal-DL18410X.js","assets/EntityItemImageCarousel-DTPf24wR.js","assets/Carousel-BBqMARja.js","assets/embla-carousel-react.esm-B3zEv5Xn.js","assets/ShoppingWidget-pwTfHHn_.js","assets/EntityItemSourcePile-Cw4enPoo.js","assets/EntityItemReviewSummary-BhqDtdfU.js","assets/ThreadEntryVideo-DzqHttb2.js","assets/useSponsoredImpressionTracking-CJQLhmsM.js","assets/useViewportDwellObserver-DpW2r1Gg.js","assets/CitationTrendingList-DPEDrJUB.js","assets/useNewFileViewer-gxMPJgyg.js","assets/useIsShoppingtryOnEnabled-CS5z2fmO.js","assets/ShoppingOptionRow-DeKZGoPz.js","assets/useStripeAppearance-DoHeNoy_.js","assets/useCreateSetupIntentAndCheckoutSession-hCLB5xIX.js","assets/ShoppingPaymentBillingBox-DJkOjr3E.js","assets/ShoppingOnboardingModal-DJMWAAHD.js","assets/PurchaseDetailsModal-Cb1W5iDi.js","assets/PurchaseStatus-DohkPwnV.js","assets/ReservationDetailsModal-DHu-dIsk.js","assets/StatusIcon-C540X0Dy.js","assets/util-TkwrISu2.js","assets/SpaceSettingsModal-CQHMnKn8.js","assets/UsernameModal-BE04mvP9.js","assets/FullNameModal-CTWDdtvH.js","assets/KeyboardShortcutEditorModal-INrp25HW.js","assets/VoiceToVoiceModal-ht83EKur.js","assets/constants-jE8WQ9hr.js","assets/MemoryListModal-aYCax0zx.js","assets/MemoryList-cyb1y33j.js","assets/MemoryDetailModal-D3dw7W9k.js","assets/HotelRoomDetailsModal-C9bHkAl2.js","assets/MaybeAdjustedPrice-Dt_9Y5j6.js","assets/PaymentModal-DhpQWjTD.js","assets/ProReferralModal-Dc7vxYhi.js","assets/MeetingDefaultsModal-D20JM4id.js","assets/AvailabilityModal-C1bgmg8H.js","assets/ProMessageModal-UT3LSxoK.js","assets/MemorySearchHistoryIntroModal-DXkpievf.js","assets/SubSuccessModal-CRhNJYYq.js","assets/PerksList-DKftKfn2.js","assets/ReferralErrorModal-d1zB06it.js","assets/ReferralSuccessModal-CBSE0M5O.js","assets/IncentiveProModal-jQ_8iHSu.js","assets/StudentReferralsModal-UxLyFT0z.js","assets/SheerIDModal-DFlc-m7P.js","assets/BraintreeSubscriptionModal-COH-6oe9.js","assets/RestaurantBookingModal-2PKvjiRZ.js","assets/PlaceModal-Dqyn-B__.js","assets/SheerIdRedirectModal-Dtw9M9B7.js","assets/EnterprisePremiumSecureUpgradeModal-dd0e1DYg.js","assets/useOrgPremiumSecureFeatures-BCTz4rcR.js","assets/ShortcutModal-CKbed51p.js","assets/PlatformOptionsModal-CoQvOjZo.js","assets/SharepointSiteModal-CQtJlt6n.js","assets/MCPServerModal-CeLCL2Lp.js","assets/MemberSetTierModal-B3CekSDX.js","assets/MCPServiceToolsModal-WO-_otHe.js","assets/DebugStreamSideEffects-CTZ7QwUR.js","assets/DebugDisplay-DONd_w5r.js","assets/_restricted/restricted-feature-debug-D3x5lJcJ.js","assets/RenderToolbar-CCD5dedH.js","assets/DebugModeActivator-Bxb4cmbj.js","assets/LexicalHistoryPlugin.prod-c33G8aYm.js","assets/LexicalOnChangePlugin.prod-j4Vp7IAI.js","assets/LexicalEditorRefPlugin.prod-C6gqf45O.js","assets/AutoLinkPlugin-B2vBdTb_.js","assets/LinkPlugin-BZ0VZS0h.js","assets/LexicalMarkdownShortcutPlugin.prod-BUh32tjx.js","assets/WelcomeOverlay-D6IPxdxT.js","assets/SideCanvasViewer-CgMox4lS.js","assets/AssetsMode-BmFzpc52.js","assets/PDFViewerCore-CDpAbZFk.js","assets/useVersioningChain-BMkrp8vI.js","assets/ShopifyPurchaseModal-CSLUn4gO.js","assets/ShopifyPurchaseModalMobile-BMQxuq5g.js","assets/ShoppingViewMoreModal-CUzNfmGy.js","assets/useSearchForAdditionalProducts-DilqtXJ5.js","assets/ShoppingOverviewItem-C-RI9oHj.js","assets/SplitModal-BC-hTs90.js","assets/qrcode-DzQwd33t.js","assets/index-uyfhB3Dg.js","assets/CharityWidget-DEvVc70K.js","assets/BrandPopoverContent-C7qqz9mq.js","assets/abap-xXO2ZNBr.js","assets/abnf-Cpr-RfZc.js","assets/actionscript-7IoedjRX.js","assets/ada-DvJpapMr.js","assets/agda-CXQhj6q_.js","assets/al-Dn94UNn4.js","assets/antlr4-D_WJe1oO.js","assets/apacheconf-BxdI37fF.js","assets/apex-DSxd3UGl.js","assets/sql-CJATM1Qp.js","assets/apl-BhX0_fkh.js","assets/applescript-mDtPbSw7.js","assets/aql-CCmuoNOQ.js","assets/arduino-BOTCtVXt.js","assets/cpp-PR_WB-PF.js","assets/c-kgVuzdLE.js","assets/arff-LHIGEhob.js","assets/asciidoc-DUL3t6uM.js","assets/asm6502-B_69y3yN.js","assets/asmatmel-LW8Eoafy.js","assets/aspnet-3TSffHQD.js","assets/csharp-Cd5Udg29.js","assets/autohotkey-DDP9Pz17.js","assets/autoit-B6rX58wf.js","assets/avisynth-Dm_4mu0N.js","assets/avro-idl-UlEGCRi0.js","assets/bash-BDr8_71o.js","assets/bash-CefCgV5_.js","assets/basic-BBt5kyDw.js","assets/basic-DBS9NaGG.js","assets/batch-Cj3BSbMY.js","assets/bbcode-DpxtQw0_.js","assets/bicep-CmgEE0U9.js","assets/birb-Dars3CuK.js","assets/bison-DX1VDlfk.js","assets/bnf-B6-zmMw4.js","assets/brainfuck-EZxQTWZ8.js","assets/brightscript-MwC7Espe.js","assets/bro-JV1z53-B.js","assets/bsl-Cd53xDCy.js","assets/c-CxGDiPNH.js","assets/cfscript-B9mkrBpQ.js","assets/chaiscript-Dof1nfTW.js","assets/cil-Bn3Q2E1W.js","assets/clike-DDqLwGhR.js","assets/clike-B5tY_8Hg.js","assets/clojure-C8Cgr9xq.js","assets/cmake-BO229LM_.js","assets/cobol-ncmGEesi.js","assets/coffeescript-D_XUmKs0.js","assets/concurnas-TfeVZMOZ.js","assets/coq-B5z9RsQ6.js","assets/cpp-Chcfrze0.js","assets/crystal-Dynhbd61.js","assets/ruby-DYsn9XfW.js","assets/csharp-BhqpJkpq.js","assets/cshtml-BWGfxKn4.js","assets/csp-BoPMW3Ei.js","assets/css-extras-Hsmrym8x.js","assets/css-DY8FYVYE.js","assets/css-CF9HHZb0.js","assets/csv-C7m4DnSA.js","assets/cypher-l75AB8hd.js","assets/d-CDO8utOJ.js","assets/dart-PPmz7K9W.js","assets/dataweave-DSq9Bs2g.js","assets/dax-Ql7iF31E.js","assets/dhall-D8AlcFmH.js","assets/diff-DxjKD27r.js","assets/django-DdNzo2Lw.js","assets/markup-templating-BxAVv-bL.js","assets/dns-zone-file-CPg1_KvB.js","assets/docker-CVuCFm8y.js","assets/dot-Cv30q0-0.js","assets/ebnf-D4d3p3sx.js","assets/editorconfig-svCLfWhT.js","assets/eiffel-DhOhlUP9.js","assets/ejs-CuszUXEo.js","assets/elixir-CZtOXY6s.js","assets/elm-BcYqZUmH.js","assets/erb-D4Jx3m2Q.js","assets/erlang-Bs9TEZ3l.js","assets/etlua-C0lc7-1S.js","assets/lua-DER4jxlW.js","assets/excel-formula-CzIhBLjN.js","assets/factor-WaebLdn4.js","assets/false-ShlVddT_.js","assets/firestore-security-rules-4moqVYWI.js","assets/flow-CXLXbYk5.js","assets/fortran-BND3_knE.js","assets/fsharp-BFha84XY.js","assets/ftl-GB7jbcGS.js","assets/gap-Dpz_lRLC.js","assets/gcode-C7ldqsmu.js","assets/gdscript-B9Bfhib1.js","assets/gedcom-btzlAVde.js","assets/gherkin-DXkOYSMV.js","assets/git-Bi1kQND6.js","assets/glsl-BYO0fWe4.js","assets/gml-Dcj75dEM.js","assets/gn-C5jCMEGg.js","assets/go-module-DS88Hgar.js","assets/go-Bb8GlO4U.js","assets/graphql-BqELzFSN.js","assets/groovy-CZHQRD2T.js","assets/haml-D4Cu9GWy.js","assets/handlebars-C4Zm0IB3.js","assets/haskell-qrj8ifSK.js","assets/haskell-Ds42Eazu.js","assets/haxe-ChRoPNLt.js","assets/hcl-DW5WNCe3.js","assets/hlsl-BedTSN1F.js","assets/hoon-BwAkIC7V.js","assets/hpkp-KfxxGNng.js","assets/hsts-BSN3uVd1.js","assets/http-FRE2So_Y.js","assets/ichigojam-68yjR9qP.js","assets/icon-DMVM2VVb.js","assets/icu-message-format-D6wK9nFS.js","assets/idris-DVPeRJob.js","assets/iecst-CVU0L1v2.js","assets/ignore-CWbAeMHy.js","assets/inform7-D7YCc5AS.js","assets/ini-DTjpb4oT.js","assets/io-DyJVvRKM.js","assets/j-B1KsJ8Lh.js","assets/java-C8KDVoMm.js","assets/java-BxMbkJZ_.js","assets/javadoc-Be5z3uxJ.js","assets/javadoclike-myFApC35.js","assets/javadoclike-AcPh5e5A.js","assets/javascript-C1hWj-gL.js","assets/javascript-D8vYUPHd.js","assets/javastacktrace-l5DDWqnd.js","assets/jexl-CPewgw8R.js","assets/jolie-oDW4xHAj.js","assets/jq-DCybKO55.js","assets/js-extras-Dt3p3jFp.js","assets/js-templates-C36cwUgG.js","assets/jsdoc-D9b2eQCX.js","assets/typescript-CVO-8GEc.js","assets/json-DxuiKECE.js","assets/json-BESjz4hO.js","assets/json5-xjq_y-Ab.js","assets/jsonp-O-R2QEUD.js","assets/jsstacktrace-AwxS9N4y.js","assets/jsx-oDQJXXbV.js","assets/jsx-CWP8P1mH.js","assets/julia-CSbapaXD.js","assets/keepalived-QNLh4sKY.js","assets/keyman-Dekq-H3g.js","assets/kotlin-luLWldVW.js","assets/kumir-gJ2eR1Bt.js","assets/kusto-B8-0f2WS.js","assets/latex-naZEwrIf.js","assets/latte-CuYvwG6d.js","assets/php-DWsP2mkx.js","assets/less-IPZUooSX.js","assets/lilypond-Ca27w2l1.js","assets/scheme-Cscf027c.js","assets/liquid-CqfwnlE8.js","assets/lisp-DS6a9sOI.js","assets/livescript-BtvwBPLA.js","assets/llvm-DJuz_f_4.js","assets/log-vpDuJ6s7.js","assets/lolcode-D7zlseNY.js","assets/lua-CrdnDpZs.js","assets/magma-CXc54FID.js","assets/makefile-TgER5D3-.js","assets/markdown-BBUfvsG3.js","assets/markup-templating-DkjQpHey.js","assets/markup-DvUfpNsN.js","assets/markup-BONeskWm.js","assets/matlab-D8KyOrZZ.js","assets/maxscript-BLMZLNdj.js","assets/mel-Ck2zZU6-.js","assets/mermaid-BbVwv4sI.js","assets/mizar-C5pIb6PU.js","assets/mongodb-BP-_FLZQ.js","assets/monkey-CJMClX9N.js","assets/moonscript-B3F4_gd_.js","assets/n1ql-DEwy8oY_.js","assets/n4js-DosTxUWO.js","assets/nand2tetris-hdl-BaEjoK_-.js","assets/naniscript-CwUM2gJ6.js","assets/nasm-BBm4hQNa.js","assets/neon-D7ky2QYE.js","assets/nevod-ytlw2XDY.js","assets/nginx-BAoSqL21.js","assets/nim-vhNCNa0d.js","assets/nix-UkDV490L.js","assets/nsis-CB_gSgbd.js","assets/objectivec-COnIeXKs.js","assets/ocaml-p7XlZdCt.js","assets/opencl-DpkpHOKT.js","assets/openqasm-BUO-RrFI.js","assets/oz-BKi7Vu9u.js","assets/parigp-Q2v1bPZv.js","assets/parser-CuIfV_M8.js","assets/pascal-BiB8a1yc.js","assets/pascaligo-Bbe6k1sN.js","assets/pcaxis-Cjwjh94y.js","assets/peoplecode-hzUErX2R.js","assets/perl-B1D9cLJK.js","assets/php-extras-CZ7KxjqE.js","assets/php-Dk7MEIvs.js","assets/phpdoc-FxciP3cA.js","assets/plsql-DvVXY7wu.js","assets/powerquery-Btcc8rhQ.js","assets/powershell-AWIxkKNB.js","assets/processing-B76ABtt6.js","assets/prolog-BkajrflI.js","assets/promql-NkmAc1R6.js","assets/properties-Xjh-xSf6.js","assets/protobuf-BI4CAp9r.js","assets/psl-aZe3ORrd.js","assets/pug-CoMAP1Jj.js","assets/puppet-D22HavK3.js","assets/pure-BCQxrhr5.js","assets/purebasic-CS3SBoo5.js","assets/purescript-kPZQhZXw.js","assets/python-dI9O2OOO.js","assets/q-BM_OsTRZ.js","assets/qml-6uNzUUZ_.js","assets/qore-CT2dtVvu.js","assets/qsharp-CUW6Vzvu.js","assets/r-CxoAQyfy.js","assets/racket-Ce6iEwSg.js","assets/reason-C3OtRNQn.js","assets/regex-24inC6Mm.js","assets/rego-DIGNi3rm.js","assets/renpy-2_7A_zWP.js","assets/rest-DhkPHUyy.js","assets/rip-NrUmeF-B.js","assets/roboconf-BemhCpww.js","assets/robotframework-53wxIqzy.js","assets/ruby-C6pGL11I.js","assets/rust-BHPZBpz7.js","assets/sas-yB8mv_pf.js","assets/sass-DgOtzGEh.js","assets/scala-c85IbDKx.js","assets/scheme-DujsssZ_.js","assets/scss-N9CyGJ1A.js","assets/shell-session-CfJU-2jh.js","assets/smali-7KK8MopY.js","assets/smalltalk-DJTW1rgy.js","assets/smarty-CswuHGTf.js","assets/sml-4a7AgiKJ.js","assets/solidity-DEN_xXGX.js","assets/solution-file-DWy8oS52.js","assets/soy-BX0S4Ybl.js","assets/sparql-B-dncyn2.js","assets/turtle-Ro1R6Je7.js","assets/splunk-spl-BL9M6RFD.js","assets/sqf-B-w3EaXj.js","assets/sql-CSwhl0T2.js","assets/squirrel-C5_0fEts.js","assets/stan-BkKsrDj5.js","assets/stylus-2Q_1bI5O.js","assets/swift-d0VCk99T.js","assets/systemd-B69haCtV.js","assets/t4-cs-CLTzhrWu.js","assets/t4-templating-B5EzSFYT.js","assets/t4-templating-CInlPI0-.js","assets/t4-vb-CEKPTSWr.js","assets/vbnet-BhrUc4aD.js","assets/tap-3j2EobdJ.js","assets/yaml-pHjxJgpq.js","assets/tcl-zimK4Rb-.js","assets/textile-7onSDWIs.js","assets/toml-B0WKHIUt.js","assets/tremor-DTcir1gV.js","assets/tsx-C2pKQQQ0.js","assets/tt2-C4s6UOud.js","assets/turtle-BYwbX2lo.js","assets/twig-DALNrbqc.js","assets/typescript-hEHsyI9-.js","assets/typoscript-C_RZnLUi.js","assets/unrealscript-DO0UKSEs.js","assets/uorazor-Cw2oyUim.js","assets/uri-Cla3Mizl.js","assets/v-BsukdtQB.js","assets/vala-C185s0T4.js","assets/vbnet-CJSJpYVN.js","assets/velocity-CyQirldx.js","assets/verilog-DM4rVBaH.js","assets/vhdl-B2ul-nke.js","assets/vim-D2bsD5Qn.js","assets/visual-basic-DNYvyv_b.js","assets/warpscript-DjoJn5rp.js","assets/wasm-BbdpnjqR.js","assets/web-idl-BniNXYF8.js","assets/wiki-mlk-5nnD.js","assets/wolfram-qZAo5rwv.js","assets/wren-BqEZDn1c.js","assets/xeora-Cnf6lXKg.js","assets/xml-doc-Bt7GfDs3.js","assets/xojo-DJ-XOrAn.js","assets/xquery-DijxsTGH.js","assets/yaml-uyIc--AI.js","assets/yang-BSK0EYb5.js","assets/zig-C5U7OOzb.js","assets/core-Ce8M0wN-.js","assets/SidePDFViewer-CapHtCh8.js","assets/ConnectorAuthorizationPrompt-y2Ew-Dfv.js","assets/AgentWorkflow-CCAIMyPW.js","assets/MarkdownResponse-CLaUCxL4.js","assets/ThreadEntryFooter-DyM9ek3q.js","assets/CopyOutputButton-svpLOfPu.js","assets/StructuredAnswerInlineBlock-DG0IcNdQ.js","assets/CardCarouselV2-DA24hwoH.js","assets/useGenerateShoppingReviewSummary-ABd8eHK7.js","assets/ImagesModePreview-BT9lP5ng.js","assets/utils-KV9uyvyl.js","assets/CanonicalContainer-B23ypS9P.js","assets/CanonicalPatternBackground-Dl68lXVk.js","assets/WithSidebar-DcFTsff9.js","assets/QueryComponents-EO5rIJzW.js","assets/NotFound-pvCrU9yc.js","assets/BigNumber-WhTO1AMP.js","assets/TimeAgoTooltip-DsPNvfRE.js","assets/ReportModal-C5fwo-_v.js","assets/Related-d2Q-3iyw.js","assets/RelatedPrompts-DUV71Kyn.js","assets/RelatedQueryList-BkYNdwHx.js","assets/index-fWpiFCPc.js","assets/StudyModeRelated-BD_Pfrad.js","assets/MapsPreview-B90YdoaX.js","assets/ThreadContentResponse-X168Xfmg.js","assets/transform-DfIENUed.js","assets/SourcesModePreview-Cw2C7Dff.js","assets/AnswerComparisonModal-CijcNFFL.js","assets/MobileCitationList-Dibo4DHF.js","assets/ThreadEntryDebugTiming-CMNNst1X.js","assets/ShoppingMode-CeJuPJvA.js","assets/ShoppingFeaturedWidget-ajZS52NW.js","assets/ModesNullState-DsOeEuGt.js","assets/HotelsMode-h67ZB1Eu.js","assets/GuestInput-C0rqt-PX.js","assets/SharedAnswerModeMap-4sIeqZ6H.js","assets/JobsMode-DV1q_iVX.js","assets/VideosMode-BP8Sds7L.js","assets/useMediaSearch-Blyg-Rvm.js","assets/ImagesMode-CihnzpWf.js","assets/ImageGeneratorLoader-Bflrg85C.js","assets/MapsMode-CdcRki6O.js","assets/TasksMode-DnvVWzkA.js","assets/index-CIYEdcTm.js","assets/search-loading-component-6pr8Dwqm.js","assets/CometZenMode-sVhn1U4x.js","assets/index.module-CNXMG8Wf.js","assets/TryAssistantPage-B5NqaTyh.js","assets/library-3jdAAAxr.js","assets/useScrollPositionPersistence-mReqWFBk.js","assets/ArticleListItem-Bcezwyov.js","assets/index-BhgbGDyt.js","assets/useSpacesBookmarking-eo-AYHOn.js","assets/templates-B2yX1cjP.js","assets/slug--Q15X1qe.js","assets/useOrgUsers-Dtm3xtr2.js","assets/slug-Yc9Crlz5.js","assets/slug-CQApcoy1.js","assets/DiscoverTrending--1GAu7ot.js","assets/loading-CuIDoako.js","assets/academic-Zlgo4PFO.js","assets/VerticalSearchContainer-cKwJ6dSR.js","assets/VerticalLandingWrapper-DvpD5869.js","assets/shopping-Y08zNr09.js","assets/hotels-DO56c2Ex.js","assets/not-found-BigxpWDY.js","assets/perplexify_me-DQpsid6v.js","assets/travel-C5i4Rt17.js","assets/discover-CeXLP7xh.js","assets/TaskStarterCards-BxyQTVZk.js","assets/index-C3lNpHOh.js","assets/F1Header-CWLeNklN.js","assets/MonthTabs-VJC7MCSB.js","assets/SportsTournamentOdds-DEDf-noZ.js","assets/SportsCanonicalContainer-CA8SuTAi.js","assets/events-CMGMPQ_b.js","assets/index-BSlH6CbK.js","assets/common-C6azguvL.js","assets/MultiTeamSchedule-KXViV5Wc.js","assets/SportsConferenceList-C7RMqD39.js","assets/SingleTeamEventRow-DpPWP-ur.js","assets/TeamPicker-DSeOGdUS.js","assets/BaseSportsBracket-CtiDUenz.js","assets/SportsBracket-B-Tezuc0.js","assets/SportsTeamStandings-BP_p8LZt.js","assets/stats-CKKNinx8.js","assets/events-Bkugt6Zs.js","assets/EventLiveOdds-L_dWsYDa.js","assets/utils-DtWq8rO_.js","assets/NBAGameLeadersStats-Bue1BqbC.js","assets/SportsGameRelatedGames-BumBjR_B.js","assets/SportsInjuryReport-DaeEo9Z4.js","assets/player-C8EgX8V7.js","assets/SportsMultiTeamSeasonLeadersStats-DWweucsq.js","assets/NBASportsTeamSeasonComparison-BNJyyLgG.js","assets/SportsTeamSeasonComparison-EqcbzOs-.js","assets/SportsDataTableComparison-BZT63WTs.js","assets/SportsTeamGameComparison-r5Cxd85W.js","assets/teams-Dtu_NCuq.js","assets/SportsBlazeVideoHighlights-BzYoVLKf.js","assets/players-B05J8EfN.js","assets/RelatedPlayers-DiF8CYz_.js","assets/index-KDMBlRW7.js","assets/events-yB5FlBEn.js","assets/teams-znFGlqR1.js","assets/players-vgLVMuws.js","assets/index-DjQec2iL.js","assets/useSoccerRelaunch2025Variation-Ds_DhHK3.js","assets/events-lDrZbD9e.js","assets/EventV2LiveOdds-DJuVWEVN.js","assets/index-RjcD49um.js","assets/MLBEventSchedule-D0QbSTSe.js","assets/DailyScheduleHeader-S2iYydrL.js","assets/scheduleUtils-j1MlWtWo.js","assets/events-Dx8veoMP.js","assets/CricketMatchStats-COeQcCDT.js","assets/events-Dh1pYEAZ.js","assets/useShowIccCricketVariation-6qYPkJIV.js","assets/index-D0_XkK2U.js","assets/index-DLAG_ek1.js","assets/index-Cu-JmS1D.js","assets/GolfHeader-DpuQSumn.js","assets/TennisLeagueSchedule-BUEXzjaZ.js","assets/events-CLGYyUK_.js","assets/index-DCVweGaE.js","assets/events-3XB9kS9a.js","assets/events-DgxTS12G.js","assets/index-DdWRldqg.js","assets/index-CCsAD03G.js","assets/TennisHeader-CPi_iPAw.js","assets/useTennis2025Variation-_79P7aG5.js","assets/events-BkZQiPEU.js","assets/TennisTournamentBracket-zF2Os6gD.js","assets/tournaments-qrHYH-DY.js","assets/sub-router-Drlqvnd8.js","assets/WhatsHappeningHorizontal-UR9w1fto.js","assets/index-BqauwM8x.js","assets/details-CnJVoSEg.js","assets/group-qZ0OFbuU.js","assets/settingsAccess-DTR6c9vp.js","assets/ProtectedSettingsPageGate-DRtaXTvv.js","assets/useAPIAdmin-Cpha6A6w.js","assets/apiPortalQueries-YNEI8OsC.js","assets/APIPortalBillingBanner-C66uNQk8.js","assets/constants-aHElxBZT.js","assets/CreateAPIGroupModal-CQvdSkuY.js","assets/members-AOphpHi4.js","assets/MembersTablePagination-B_ULvXbN.js","assets/billing-fh_HnJ52.js","assets/keys-CkQ12rnF.js","assets/limits-BS1MNPry.js","assets/files-16jTOkCP.js","assets/files-repo-B3b7_Bnh.js","assets/index-DhQUxRUr.js","assets/pro-perks-Cadazzyl.js","assets/utils-DSWriqrm.js","assets/pro-perks-detail-C0soH-TR.js","assets/index-kz3DL8XS.js","assets/access-B4fNK7Sz.js","assets/index-BOUhy9-x.js","assets/useOrgMutations-DlO4b4ep.js","assets/useEnterprisePremiumSecureEnabled-BU0ww2aQ.js","assets/useIsThreadRetentionEnabled-D4cuo9yj.js","assets/members-C6iKUXDp.js","assets/insights-B5LkrVsN.js","assets/user-access-1QqolDsk.js","assets/permissions-BN0e7kpL.js","assets/files-DHF87jVn.js","assets/FileData-C_xRGrAI.js","assets/connectors-C1zDgzEK.js","assets/purchases-DYzBjOB8.js","assets/useMutationState-B716_ROC.js","assets/reservations-BG0bXsM5.js","assets/index-Bm4IQcpI.js","assets/TaskListItem-CpusoQg2.js","assets/task-CLjdGrHA.js","assets/shortcuts-C7LBNl4g.js","assets/site-instructions-DGxnkmcz.js","assets/preferences-6Q_K2dTQ.js","assets/personalize-DNlekNyN.js","assets/assistant-BhLQg7Wq.js","assets/EmailConnectorsCard-CWOzAzyJ.js","assets/memories-Bbm0mPRr.js","assets/notifications-BM42L-sn.js","assets/files-DTC3YRZD.js","assets/connectors-Bcc9EeH9.js","assets/index-CW1hJffI.js","assets/ask-input-DvYrcMkJ.js","assets/playground-CB6ADMTP.js"])))=>i.map(i=>d[i]);
import{g as Sn,s as sn,l as ne,S as De,a as Rle,r as Dt,u as Ot,b as Lt,c as vt,L as qe,P as Ob,d as E9e,e as jm,f as cc,h as ou,i as M9e,j as Ple,k as Lle,m as ql,R as hr,n as k9e,o as Ys,p as T9e,q as N9e,t as j9e,v as Mg,w as A9e,$ as Qr,x as I9e,y as R9e,z as Js,F as FR,A as UR,B as wO,C as Ole,D as P9e,E as L9e,G as O9e,H as D9e,I as F9e,J as U9e,K as B9e,M as Ok,N as he,O as $9e,Q as V9e,T as ml,U as c1,V as W9e,W as H9e,X as z9e,Y as G9e,Z as q9e,_ as K9e,a0 as Y9e,a1 as Zz,a2 as Jz,a3 as Q9e,a4 as BR,a5 as eG,a6 as X9e,a7 as Dle,a8 as Dk,a9 as Z9e,aa as J9e,ab as e7e,ac as t7e,ad as ym,ae as Fk,af as CO,ag as SO,ah as n7e,ai as Fle,aj as iu,ak as sN,al as jf}from"./platform-bU5jYM9r.js";import{r as d,e as Dy,k as r7e,l as cs,R as I,j as o,f as B,i as ks,$ as EO,m as Ule,n as vn,o as lp,p as gs,q as Yo,t as Ble,_ as br,b as MO,c as Ze,u as s7e,v as a7e,w as o7e,a as kO,x as $le,y as tG,z as Fy,A as i7e,B as Vle,C as Db,D as v0,E as nG,F as l7e,G as Oo,H as X2,I as c7e}from"./vendors-zQBRGsiS.js";import{I as Wle,T as de,a as dr,b as Wn,c as $R,d as kt,e as u7e,f as d7e,g as Am,h as Br,i as Hle,j as f7e,k as TO,l as Fb,m as Uk,n as m7e,o as p7e,p as Iu,q as h7e,r as Xn,s as g7e,t as zle,u as y7e,v as x7e,w as cp,x as v7e,y as NO,z as Gle,A as jO,B as Ti,C as VR,D as u1,E as ar,F as Uy,G as rG,H as Sc,J as qle,K as d1,L as sG,M as b7e,N as Bk,O as Jh,P as _7e,Q as w7e,R as Kle,S as kg,U as uo,V as By,W as $k,X as b0,Y as C7e,Z as Yle,_ as vu,$ as Vk,a0 as Fd,a1 as Ub,a2 as Ud,a3 as ba,a4 as WR,a5 as Z2,a6 as Qle,a7 as up,a8 as Wk,a9 as S7e,aa as Im,ab as dp,ac as Xle,ad as AO,ae as Zle,af as HR,ag as E7e,ah as zR,ai as Jle,aj as ece,ak as M7e,al as k7e,am as T7e,an as tce,ao as J2,ap as Hk,aq as nce,ar as N7e,as as af,at as f1,au as j7e,av as A7e,aw as Ru,ax as rce,ay as of,az as Tg,aA as Bb,aB as I7e,aC as R7e,aD as P7e,aE as $b,aF as ia,aG as L7e,aH as O7e,aI as sce,aJ as D7e,aK as F7e,aL as ace,aM as U7e,aN as B7e,aO as fp,aP as oce,aQ as Kl,aR as zk,aS as $7e,aT as V7e,aU as Gk,aV as eE,aW as ice,aX as lce,aY as cce,aZ as uce,a_ as W7e,a$ as dce,b0 as bu,b1 as fce,b2 as H7e,b3 as m1,b4 as mce,b5 as _0,b6 as pce,b7 as IO,b8 as z7e,b9 as GR,ba as G7e,bb as hce,bc as q7e,bd as qS,be as K7e,bf as RO,bg as qk,bh as Y7e,bi as Q7e,bj as gce,bk as yce,bl as PO,bm as qR,bn as X7e,bo as xce,bp as Vb,bq as Z7e,br as Wb,bs as J7e,bt as Hb,bu as LO,bv as Ed,bw as eLe,bx as tLe,by as Kk,bz as nLe,bA as vce,bB as bce,bC as rLe,bD as OO,bE as _ce,bF as wce,bG as Cce,bH as Sce,bI as tE,bJ as Ece,bK as sLe,bL as aG,bM as aLe,bN as oLe,bO as iLe,bP as lLe,bQ as cLe,bR as uLe,bS as dLe,bT as fLe,bU as mLe,bV as pLe,bW as hLe,bX as gLe,bY as yLe,bZ as xLe,b_ as vLe,b$ as oG,c0 as iG,c1 as bLe,c2 as zb,c3 as _Le,c4 as Mce,c5 as mp,c6 as DO,c7 as wLe,c8 as Ng,c9 as lG,ca as CLe,cb as Gb,cc as SLe,cd as ELe,ce as kce,cf as MLe,cg as kLe,ch as KR,ci as Tce,cj as TLe,ck as Nce,cl as NLe,cm as jLe,cn as ALe,co as jce,cp as ILe,cq as RLe,cr as PLe,cs as LLe,ct as p1,cu as OLe,cv as DLe,cw as FLe,cx as Ace,cy as ULe,cz as YR,cA as BLe,cB as KS,cC as $Le,cD as VLe,cE as qb,cF as Ice,cG as WLe,cH as HLe,cI as zLe,cJ as Kb,cK as Yk,cL as GLe,cM as qLe,cN as KLe,cO as $y,cP as YLe,cQ as Rce,cR as Fa,cS as QLe,cT as XLe,cU as Pce,cV as Lce,cW as Oce,cX as Dce,cY as FO,cZ as Fce,c_ as Uce,c$ as ZLe,d0 as JLe,d1 as Bce,d2 as eOe,d3 as cG,d4 as tOe,d5 as nOe,d6 as rOe,d7 as sOe,d8 as UO,d9 as aOe,da as oOe,db as iOe,dc as $ce,dd as Vce,de as lOe,df as cOe,dg as uOe,dh as dOe,di as fOe,dj as uG,dk as mOe,dl as pOe,dm as hOe,dn as Wce,dp as gOe,dq as yOe,dr as xOe,ds as vOe,dt as Hce,du as zce,dv as Gce,dw as bOe,dx as _Oe,dy as dG,dz as qce,dA as wOe,dB as COe,dC as SOe,dD as EOe,dE as fG,dF as Gp,dG as aN,dH as mG,dI as YS,dJ as pG,dK as oN,dL as QR,dM as iN,dN as lN,dO as hG,dP as rm,dQ as MOe,dR as kOe,dS as Kce,dT as TOe,dU as Qk,dV as gG,dW as NOe,dX as Yce,dY as BO,dZ as Qce,d_ as jOe,d$ as AOe,e0 as IOe,e1 as ROe,e2 as POe,e3 as LOe,e4 as OOe,e5 as Xce,e6 as DOe,e7 as FOe,e8 as UOe,e9 as yG,ea as BOe,eb as xG,ec as vG,ed as $Oe,ee as VOe,ef as WOe,eg as tC,eh as bG,ei as HOe,ej as zOe,ek as GOe,el as qOe,em as KOe,en as YOe,eo as QOe,ep as XOe,eq as Zce,er as Jce,es as ZOe,et as JOe,eu as eue,ev as eDe,ew as tDe}from"./icons-BqG2G0mn.js";import{u as Z,m as nDe,M as ie,d as Qe,a as J,c as rDe,F as di,I as sDe,b as aDe,e as XR,f as tue,g as cN}from"./i18n-DP750uYl.js";import{_ as X,c as bi,a as Qo,g as Yb}from"./vite-D9Bl2idj.js";function oDe(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const iDe=["grey","teal","brown","maroon","red","orange","gold","yellow","green","blue","purple"],nue=e=>{if(!e)return null;try{const n=JSON.parse(e)?.name;if(n&&iDe.includes(n))return n}catch{}return null};function lDe(){const e=Sn("colorSchemeTheme"),t=Sn("colorScheme"),n=nue(e);n&&(document.documentElement.dataset.theme=n),t&&(document.documentElement.dataset.colorScheme=t)}lDe();var cDe={};const _G="/rest/event/analytics",nE="pplx.visitor-id",ZR="pplx.session-id",h1="pplx.trackingAllowed",uDe="http://default-analytics-service:8000",dDe=()=>cDe.ANALYTICS_SERVICE_URL||uDe,fDe=365;function mDe(){try{Sn(nE)||sn(nE,crypto.randomUUID(),{expires:fDe})}catch{}try{Sn(ZR)||sn(ZR,crypto.randomUUID())}catch{}}mDe();const pDe=["Europe/Vienna","Europe/Brussels","Europe/Sofia","Europe/Zagreb","Asia/Famagusta","Asia/Nicosia","Europe/Prague","Europe/Copenhagen","Europe/Tallinn","Europe/Helsinki","Europe/Paris","Europe/Berlin","Europe/Busingen","Europe/Athens","Europe/Budapest","Europe/Dublin","Europe/Rome","Europe/Riga","Europe/Vilnius","Europe/Luxembourg","Europe/Malta","Europe/Amsterdam","Europe/Warsaw","Atlantic/Azores","Atlantic/Madeira","Europe/Lisbon","Europe/Bucharest","Europe/Bratislava","Europe/Ljubljana","Africa/Ceuta","Atlantic/Canary","Europe/Madrid","Europe/Stockholm"];function wG(){try{const e=Intl.DateTimeFormat().resolvedOptions().timeZone;return pDe.includes(e)||e.includes("Europe")}catch(e){return ne.warn("Error detecting user timezone:",e),!0}}function hDe(){const[e,t]=d.useState(!1),[n,r]=d.useState(!1),[s,a]=d.useState(!1);d.useEffect(()=>{const l=c=>{c?.detail?.consent==="ALLOW"?t(!0):t(!1)};return window.addEventListener("consentChange",l),()=>{window.removeEventListener("consentChange",l)}},[]),d.useEffect(()=>{if(!wG()){t(!0),r(!0);return}Sn(h1)==="true"&&t(!0),r(!0)},[]),d.useEffect(()=>{!Sn(h1)&&wG()&&a(!0)},[]);const i=()=>{a(!1)};return d.useMemo(()=>({hasConsent:e,checkedConsent:n,showCookieConsentPopup:s,closeCookieConsentPopup:i}),[n,e,s])}var uN={},dN={exports:{}},CG;function Xk(){return CG||(CG=1,function(e){function t(n){return n&&n.__esModule?n:{default:n}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(dN)),dN.exports}var fN={exports:{}},SG;function Qb(){return SG||(SG=1,function(e){function t(n){"@babel/helpers - typeof";return e.exports=t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(fN)),fN.exports}var mN={exports:{}},EG;function gDe(){return EG||(EG=1,function(e){var t=Qb().default;function n(){e.exports=n=function(){return s},e.exports.__esModule=!0,e.exports.default=e.exports;var r,s={},a=Object.prototype,i=a.hasOwnProperty,l=Object.defineProperty||function(U,$,V){U[$]=V.value},c=typeof Symbol=="function"?Symbol:{},u=c.iterator||"@@iterator",f=c.asyncIterator||"@@asyncIterator",m=c.toStringTag||"@@toStringTag";function p(U,$,V){return Object.defineProperty(U,$,{value:V,enumerable:!0,configurable:!0,writable:!0}),U[$]}try{p({},"")}catch{p=function(V,W,Q){return V[W]=Q}}function h(U,$,V,W){var Q=$&&$.prototype instanceof w?$:w,q=Object.create(Q.prototype),H=new N(W||[]);return l(q,"_invoke",{value:D(U,V,H)}),q}function g(U,$,V){try{return{type:"normal",arg:U.call($,V)}}catch(W){return{type:"throw",arg:W}}}s.wrap=h;var y="suspendedStart",x="suspendedYield",v="executing",b="completed",_={};function w(){}function C(){}function S(){}var E={};p(E,u,function(){return this});var k=Object.getPrototypeOf,M=k&&k(k(L([])));M&&M!==a&&i.call(M,u)&&(E=M);var j=S.prototype=w.prototype=Object.create(E);function R(U){["next","throw","return"].forEach(function($){p(U,$,function(V){return this._invoke($,V)})})}function O(U,$){function V(Q,q,H,K){var G=g(U[Q],U,q);if(G.type!=="throw"){var ee=G.arg,Y=ee.value;return Y&&t(Y)=="object"&&i.call(Y,"__await")?$.resolve(Y.__await).then(function(te){V("next",te,H,K)},function(te){V("throw",te,H,K)}):$.resolve(Y).then(function(te){ee.value=te,H(ee)},function(te){return V("throw",te,H,K)})}K(G.arg)}var W;l(this,"_invoke",{value:function(q,H){function K(){return new $(function(G,ee){V(q,H,G,ee)})}return W=W?W.then(K,K):K()}})}function D(U,$,V){var W=y;return function(Q,q){if(W===v)throw Error("Generator is already running");if(W===b){if(Q==="throw")throw q;return{value:r,done:!0}}for(V.method=Q,V.arg=q;;){var H=V.delegate;if(H){var K=P(H,V);if(K){if(K===_)continue;return K}}if(V.method==="next")V.sent=V._sent=V.arg;else if(V.method==="throw"){if(W===y)throw W=b,V.arg;V.dispatchException(V.arg)}else V.method==="return"&&V.abrupt("return",V.arg);W=v;var G=g(U,$,V);if(G.type==="normal"){if(W=V.done?b:x,G.arg===_)continue;return{value:G.arg,done:V.done}}G.type==="throw"&&(W=b,V.method="throw",V.arg=G.arg)}}}function P(U,$){var V=$.method,W=U.iterator[V];if(W===r)return $.delegate=null,V==="throw"&&U.iterator.return&&($.method="return",$.arg=r,P(U,$),$.method==="throw")||V!=="return"&&($.method="throw",$.arg=new TypeError("The iterator does not provide a '"+V+"' method")),_;var Q=g(W,U.iterator,$.arg);if(Q.type==="throw")return $.method="throw",$.arg=Q.arg,$.delegate=null,_;var q=Q.arg;return q?q.done?($[U.resultName]=q.value,$.next=U.nextLoc,$.method!=="return"&&($.method="next",$.arg=r),$.delegate=null,_):q:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,_)}function A(U){var $={tryLoc:U[0]};1 in U&&($.catchLoc=U[1]),2 in U&&($.finallyLoc=U[2],$.afterLoc=U[3]),this.tryEntries.push($)}function T(U){var $=U.completion||{};$.type="normal",delete $.arg,U.completion=$}function N(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(A,this),this.reset(!0)}function L(U){if(U||U===""){var $=U[u];if($)return $.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var V=-1,W=function Q(){for(;++V<U.length;)if(i.call(U,V))return Q.value=U[V],Q.done=!1,Q;return Q.value=r,Q.done=!0,Q};return W.next=W}}throw new TypeError(t(U)+" is not iterable")}return C.prototype=S,l(j,"constructor",{value:S,configurable:!0}),l(S,"constructor",{value:C,configurable:!0}),C.displayName=p(S,m,"GeneratorFunction"),s.isGeneratorFunction=function(U){var $=typeof U=="function"&&U.constructor;return!!$&&($===C||($.displayName||$.name)==="GeneratorFunction")},s.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,S):(U.__proto__=S,p(U,m,"GeneratorFunction")),U.prototype=Object.create(j),U},s.awrap=function(U){return{__await:U}},R(O.prototype),p(O.prototype,f,function(){return this}),s.AsyncIterator=O,s.async=function(U,$,V,W,Q){Q===void 0&&(Q=Promise);var q=new O(h(U,$,V,W),Q);return s.isGeneratorFunction($)?q:q.next().then(function(H){return H.done?H.value:q.next()})},R(j),p(j,m,"Generator"),p(j,u,function(){return this}),p(j,"toString",function(){return"[object Generator]"}),s.keys=function(U){var $=Object(U),V=[];for(var W in $)V.push(W);return V.reverse(),function Q(){for(;V.length;){var q=V.pop();if(q in $)return Q.value=q,Q.done=!1,Q}return Q.done=!0,Q}},s.values=L,N.prototype={constructor:N,reset:function($){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(T),!$)for(var V in this)V.charAt(0)==="t"&&i.call(this,V)&&!isNaN(+V.slice(1))&&(this[V]=r)},stop:function(){this.done=!0;var $=this.tryEntries[0].completion;if($.type==="throw")throw $.arg;return this.rval},dispatchException:function($){if(this.done)throw $;var V=this;function W(ee,Y){return H.type="throw",H.arg=$,V.next=ee,Y&&(V.method="next",V.arg=r),!!Y}for(var Q=this.tryEntries.length-1;Q>=0;--Q){var q=this.tryEntries[Q],H=q.completion;if(q.tryLoc==="root")return W("end");if(q.tryLoc<=this.prev){var K=i.call(q,"catchLoc"),G=i.call(q,"finallyLoc");if(K&&G){if(this.prev<q.catchLoc)return W(q.catchLoc,!0);if(this.prev<q.finallyLoc)return W(q.finallyLoc)}else if(K){if(this.prev<q.catchLoc)return W(q.catchLoc,!0)}else{if(!G)throw Error("try statement without catch or finally");if(this.prev<q.finallyLoc)return W(q.finallyLoc)}}}},abrupt:function($,V){for(var W=this.tryEntries.length-1;W>=0;--W){var Q=this.tryEntries[W];if(Q.tryLoc<=this.prev&&i.call(Q,"finallyLoc")&&this.prev<Q.finallyLoc){var q=Q;break}}q&&($==="break"||$==="continue")&&q.tryLoc<=V&&V<=q.finallyLoc&&(q=null);var H=q?q.completion:{};return H.type=$,H.arg=V,q?(this.method="next",this.next=q.finallyLoc,_):this.complete(H)},complete:function($,V){if($.type==="throw")throw $.arg;return $.type==="break"||$.type==="continue"?this.next=$.arg:$.type==="return"?(this.rval=this.arg=$.arg,this.method="return",this.next="end"):$.type==="normal"&&V&&(this.next=V),_},finish:function($){for(var V=this.tryEntries.length-1;V>=0;--V){var W=this.tryEntries[V];if(W.finallyLoc===$)return this.complete(W.completion,W.afterLoc),T(W),_}},catch:function($){for(var V=this.tryEntries.length-1;V>=0;--V){var W=this.tryEntries[V];if(W.tryLoc===$){var Q=W.completion;if(Q.type==="throw"){var q=Q.arg;T(W)}return q}}throw Error("illegal catch attempt")},delegateYield:function($,V,W){return this.delegate={iterator:L($),resultName:V,nextLoc:W},this.method==="next"&&(this.arg=r),_}},s}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(mN)),mN.exports}var pN,MG;function Zk(){if(MG)return pN;MG=1;var e=gDe()();pN=e;try{regeneratorRuntime=e}catch{typeof globalThis=="object"?globalThis.regeneratorRuntime=e:Function("r","regeneratorRuntime = r")(e)}return pN}var hN={exports:{}},gN={exports:{}},yN={exports:{}},kG;function yDe(){return kG||(kG=1,function(e){var t=Qb().default;function n(r,s){if(t(r)!="object"||!r)return r;var a=r[Symbol.toPrimitive];if(a!==void 0){var i=a.call(r,s||"default");if(t(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(s==="string"?String:Number)(r)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(yN)),yN.exports}var TG;function rue(){return TG||(TG=1,function(e){var t=Qb().default,n=yDe();function r(s){var a=n(s,"string");return t(a)=="symbol"?a:a+""}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(gN)),gN.exports}var NG;function Jk(){return NG||(NG=1,function(e){var t=rue();function n(r,s,a){return(s=t(s))in r?Object.defineProperty(r,s,{value:a,enumerable:!0,configurable:!0,writable:!0}):r[s]=a,r}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(hN)),hN.exports}var xN={exports:{}},jG;function e5(){return jG||(jG=1,function(e){function t(r,s,a,i,l,c,u){try{var f=r[c](u),m=f.value}catch(p){return void a(p)}f.done?s(m):Promise.resolve(m).then(i,l)}function n(r){return function(){var s=this,a=arguments;return new Promise(function(i,l){var c=r.apply(s,a);function u(m){t(c,i,l,u,f,"next",m)}function f(m){t(c,i,l,u,f,"throw",m)}u(void 0)})}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(xN)),xN.exports}var vN={exports:{}},bN={exports:{}},AG;function xDe(){return AG||(AG=1,function(e){function t(n){if(Array.isArray(n))return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(bN)),bN.exports}var _N={exports:{}},IG;function vDe(){return IG||(IG=1,function(e){function t(n,r){var s=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(s!=null){var a,i,l,c,u=[],f=!0,m=!1;try{if(l=(s=s.call(n)).next,r===0){if(Object(s)!==s)return;f=!1}else for(;!(f=(a=l.call(s)).done)&&(u.push(a.value),u.length!==r);f=!0);}catch(p){m=!0,i=p}finally{try{if(!f&&s.return!=null&&(c=s.return(),Object(c)!==c))return}finally{if(m)throw i}}return u}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(_N)),_N.exports}var wN={exports:{}},CN={exports:{}},RG;function bDe(){return RG||(RG=1,function(e){function t(n,r){(r==null||r>n.length)&&(r=n.length);for(var s=0,a=Array(r);s<r;s++)a[s]=n[s];return a}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(CN)),CN.exports}var PG;function _De(){return PG||(PG=1,function(e){var t=bDe();function n(r,s){if(r){if(typeof r=="string")return t(r,s);var a={}.toString.call(r).slice(8,-1);return a==="Object"&&r.constructor&&(a=r.constructor.name),a==="Map"||a==="Set"?Array.from(r):a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?t(r,s):void 0}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(wN)),wN.exports}var SN={exports:{}},LG;function wDe(){return LG||(LG=1,function(e){function t(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(SN)),SN.exports}var OG;function CDe(){return OG||(OG=1,function(e){var t=xDe(),n=vDe(),r=_De(),s=wDe();function a(i,l){return t(i)||n(i,l)||r(i,l)||s()}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(vN)),vN.exports}var Af={},er={},EN={exports:{}},DG;function SDe(){return DG||(DG=1,function(e){function t(n,r){if(!(n instanceof r))throw new TypeError("Cannot call a class as a function")}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(EN)),EN.exports}var MN={exports:{}},FG;function EDe(){return FG||(FG=1,function(e){var t=rue();function n(s,a){for(var i=0;i<a.length;i++){var l=a[i];l.enumerable=l.enumerable||!1,l.configurable=!0,"value"in l&&(l.writable=!0),Object.defineProperty(s,t(l.key),l)}}function r(s,a,i){return a&&n(s.prototype,a),i&&n(s,i),Object.defineProperty(s,"prototype",{writable:!1}),s}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(MN)),MN.exports}var kN={exports:{}},TN={exports:{}},UG;function MDe(){return UG||(UG=1,function(e){function t(n){if(n===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return n}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(TN)),TN.exports}var BG;function kDe(){return BG||(BG=1,function(e){var t=Qb().default,n=MDe();function r(s,a){if(a&&(t(a)=="object"||typeof a=="function"))return a;if(a!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return n(s)}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(kN)),kN.exports}var NN={exports:{}},$G;function sue(){return $G||($G=1,function(e){function t(n){return e.exports=t=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(NN)),NN.exports}var jN={exports:{}},AN={exports:{}},VG;function $O(){return VG||(VG=1,function(e){function t(n,r){return e.exports=t=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},e.exports.__esModule=!0,e.exports.default=e.exports,t(n,r)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(AN)),AN.exports}var WG;function TDe(){return WG||(WG=1,function(e){var t=$O();function n(r,s){if(typeof s!="function"&&s!==null)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(s&&s.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),s&&t(r,s)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(jN)),jN.exports}var IN={exports:{}},RN={exports:{}},HG;function NDe(){return HG||(HG=1,function(e){function t(n){try{return Function.toString.call(n).indexOf("[native code]")!==-1}catch{return typeof n=="function"}}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(RN)),RN.exports}var PN={exports:{}},LN={exports:{}},zG;function jDe(){return zG||(zG=1,function(e){function t(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(e.exports=t=function(){return!!n},e.exports.__esModule=!0,e.exports.default=e.exports)()}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports}(LN)),LN.exports}var GG;function ADe(){return GG||(GG=1,function(e){var t=jDe(),n=$O();function r(s,a,i){if(t())return Reflect.construct.apply(null,arguments);var l=[null];l.push.apply(l,a);var c=new(s.bind.apply(s,l));return i&&n(c,i.prototype),c}e.exports=r,e.exports.__esModule=!0,e.exports.default=e.exports}(PN)),PN.exports}var qG;function IDe(){return qG||(qG=1,function(e){var t=sue(),n=$O(),r=NDe(),s=ADe();function a(i){var l=typeof Map=="function"?new Map:void 0;return e.exports=a=function(u){if(u===null||!r(u))return u;if(typeof u!="function")throw new TypeError("Super expression must either be null or a function");if(l!==void 0){if(l.has(u))return l.get(u);l.set(u,f)}function f(){return s(u,arguments,t(this).constructor)}return f.prototype=Object.create(u.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),n(f,u)},e.exports.__esModule=!0,e.exports.default=e.exports,a(i)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}(IN)),IN.exports}var KG;function RDe(){if(KG)return er;KG=1;var e=Xk();Object.defineProperty(er,"__esModule",{value:!0}),er.UnsupportedStrategy=er.UnknownError=er.OAuthCallbackError=er.MissingSecret=er.MissingAuthorize=er.MissingAdapterMethods=er.MissingAdapter=er.MissingAPIRoute=er.InvalidCallbackUrl=er.AccountNotLinkedError=void 0,er.adapterErrorHandler=x,er.capitalize=g,er.eventsErrorHandler=y,er.upperSnake=h;var t=e(Zk()),n=e(e5()),r=e(Jk()),s=e(SDe()),a=e(EDe()),i=e(kDe()),l=e(sue()),c=e(TDe()),u=e(IDe());function f(v,b,_){return b=(0,l.default)(b),(0,i.default)(v,m()?Reflect.construct(b,_||[],(0,l.default)(v).constructor):b.apply(v,_))}function m(){try{var v=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(m=function(){return!!v})()}var p=er.UnknownError=function(v){function b(_){var w,C;return(0,s.default)(this,b),C=f(this,b,[(w=_?.message)!==null&&w!==void 0?w:_]),C.name="UnknownError",C.code=_.code,_ instanceof Error&&(C.stack=_.stack),C}return(0,c.default)(b,v),(0,a.default)(b,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,stack:this.stack}}}])}((0,u.default)(Error));er.OAuthCallbackError=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","OAuthCallbackError"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.AccountNotLinkedError=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","AccountNotLinkedError"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.MissingAPIRoute=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAPIRouteError"),(0,r.default)(_,"code","MISSING_NEXTAUTH_API_ROUTE_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.MissingSecret=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","MissingSecretError"),(0,r.default)(_,"code","NO_SECRET"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.MissingAuthorize=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAuthorizeError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_HANDLER_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.MissingAdapter=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterError"),(0,r.default)(_,"code","EMAIL_REQUIRES_ADAPTER_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.MissingAdapterMethods=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","MissingAdapterMethodsError"),(0,r.default)(_,"code","MISSING_ADAPTER_METHODS_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.UnsupportedStrategy=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","UnsupportedStrategyError"),(0,r.default)(_,"code","CALLBACK_CREDENTIALS_JWT_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p),er.InvalidCallbackUrl=function(v){function b(){var _;(0,s.default)(this,b);for(var w=arguments.length,C=new Array(w),S=0;S<w;S++)C[S]=arguments[S];return _=f(this,b,[].concat(C)),(0,r.default)(_,"name","InvalidCallbackUrl"),(0,r.default)(_,"code","INVALID_CALLBACK_URL_ERROR"),_}return(0,c.default)(b,v),(0,a.default)(b)}(p);function h(v){return v.replace(/([A-Z])/g,"_$1").toUpperCase()}function g(v){return"".concat(v[0].toUpperCase()).concat(v.slice(1))}function y(v,b){return Object.keys(v).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E=arguments;return t.default.wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.prev=0,S=v[w],M.next=4,S.apply(void 0,E);case 4:return M.abrupt("return",M.sent);case 7:M.prev=7,M.t0=M.catch(0),b.error("".concat(h(w),"_EVENT_ERROR"),M.t0);case 10:case"end":return M.stop()}},C,null,[[0,7]])})),_},{})}function x(v,b){if(v)return Object.keys(v).reduce(function(_,w){return _[w]=(0,n.default)(t.default.mark(function C(){var S,E,k,M,j,R=arguments;return t.default.wrap(function(D){for(;;)switch(D.prev=D.next){case 0:for(D.prev=0,S=R.length,E=new Array(S),k=0;k<S;k++)E[k]=R[k];return b.debug("adapter_".concat(w),{args:E}),M=v[w],D.next=6,M.apply(void 0,E);case 6:return D.abrupt("return",D.sent);case 9:throw D.prev=9,D.t0=D.catch(0),b.error("adapter_error_".concat(w),D.t0),j=new p(D.t0),j.name="".concat(g(w),"Error"),j;case 15:case"end":return D.stop()}},C,null,[[0,9]])})),_},{})}return er}var YG;function PDe(){if(YG)return Af;YG=1;var e=Xk();Object.defineProperty(Af,"__esModule",{value:!0}),Af.default=void 0,Af.proxyLogger=m,Af.setLogger=f;var t=e(Zk()),n=e(Jk()),r=e(e5()),s=RDe();function a(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),g.push.apply(g,y)}return g}function i(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?a(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):a(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}function l(p){if(p instanceof Error&&!(p instanceof s.UnknownError))return{message:p.message,stack:p.stack,name:p.name};if(c(p)){var h;p.error=l(p.error),p.message=(h=p.message)!==null&&h!==void 0?h:p.error.message}return p}function c(p){return!!(p!=null&&p.error)}var u={error:function(h,g){g=l(g),console.error("[next-auth][error][".concat(h,"]"),`
https://next-auth.js.org/errors#`.concat(h.toLowerCase()),g.message,g)},warn:function(h){console.warn("[next-auth][warn][".concat(h,"]"),`
https://next-auth.js.org/warnings#`.concat(h.toLowerCase()))},debug:function(h,g){console.log("[next-auth][debug][".concat(h,"]"),g)}};function f(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},h=arguments.length>1?arguments[1]:void 0;h||(u.debug=function(){}),p.error&&(u.error=p.error),p.warn&&(u.warn=p.warn),p.debug&&(u.debug=p.debug)}Af.default=u;function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:u,h=arguments.length>1?arguments[1]:void 0;try{if(typeof window>"u")return p;var g={},y=function(b){g[b]=function(){var _=(0,r.default)(t.default.mark(function w(C,S){var E,k;return t.default.wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(u[b](C,S),b==="error"&&(S=l(S)),S.client=!0,E="".concat(h,"/_log"),k=new URLSearchParams(i({level:b,code:C},S)),!navigator.sendBeacon){j.next=8;break}return j.abrupt("return",navigator.sendBeacon(E,k));case 8:return j.next=10,fetch(E,{method:"POST",body:k,keepalive:!0});case 10:return j.abrupt("return",j.sent);case 11:case"end":return j.stop()}},w)}));return function(w,C){return _.apply(this,arguments)}}()};for(var x in p)y(x);return g}catch{return u}}return Af}var nC={},QG;function LDe(){if(QG)return nC;QG=1,Object.defineProperty(nC,"__esModule",{value:!0}),nC.default=e;function e(t){var n;const r=new URL("http://localhost:3000/api/auth");t&&!t.startsWith("http")&&(t=`https://${t}`);const s=new URL((n=t)!==null&&n!==void 0?n:r),a=(s.pathname==="/"?r.pathname:s.pathname).replace(/\/$/,""),i=`${s.origin}${a}`;return{origin:s.origin,host:s.host,path:a,base:i,toString:()=>i}}return nC}var If={},XG;function ODe(){if(XG)return If;XG=1;var e=Xk();Object.defineProperty(If,"__esModule",{value:!0}),If.BroadcastChannel=m,If.apiBaseUrl=u,If.fetchData=l,If.now=f;var t=e(Zk()),n=e(Jk()),r=e(e5());function s(p,h){var g=Object.keys(p);if(Object.getOwnPropertySymbols){var y=Object.getOwnPropertySymbols(p);h&&(y=y.filter(function(x){return Object.getOwnPropertyDescriptor(p,x).enumerable})),g.push.apply(g,y)}return g}function a(p){for(var h=1;h<arguments.length;h++){var g=arguments[h]!=null?arguments[h]:{};h%2?s(Object(g),!0).forEach(function(y){(0,n.default)(p,y,g[y])}):Object.getOwnPropertyDescriptors?Object.defineProperties(p,Object.getOwnPropertyDescriptors(g)):s(Object(g)).forEach(function(y){Object.defineProperty(p,y,Object.getOwnPropertyDescriptor(g,y))})}return p}var i=3;function l(p,h,g){return c.apply(this,arguments)}function c(){return c=(0,r.default)(t.default.mark(function p(h,g,y){var x,v,b,_,w,C,S,E,k,M,j=arguments;return t.default.wrap(function(O){for(;;)switch(O.prev=O.next){case 0:x=j.length>3&&j[3]!==void 0?j[3]:{},v=x.ctx,b=x.req,_=b===void 0?v?.req:b,w="".concat(u(g),"/").concat(h),C=0;case 3:if(!(C<i)){O.next=28;break}return O.prev=4,E={headers:a({"Content-Type":"application/json"},_!=null&&(S=_.headers)!==null&&S!==void 0&&S.cookie?{cookie:_.headers.cookie}:{})},_!=null&&_.body&&(E.body=JSON.stringify(_.body),E.method="POST"),O.next=9,fetch(w,E);case 9:return k=O.sent,O.next=12,k.json();case 12:if(M=O.sent,k.ok){O.next=15;break}throw M;case 15:return O.abrupt("return",Object.keys(M).length>0?M:null);case 18:if(O.prev=18,O.t0=O.catch(4),C++,C!==i){O.next=24;break}throw y.error("CLIENT_FETCH_ERROR",{error:O.t0,url:w}),O.t0;case 24:return O.next=26,new Promise(function(D){return setTimeout(D,Math.pow(2,C)*100)});case 26:O.next=3;break;case 28:return O.abrupt("return",null);case 29:case"end":return O.stop()}},p,null,[[4,18]])})),c.apply(this,arguments)}function u(p){return typeof window>"u"?"".concat(p.baseUrlServer).concat(p.basePathServer):p.basePath}function f(){return Math.floor(Date.now()/1e3)}function m(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"nextauth.message";return{receive:function(g){var y=function(v){var b;if(v.key===p){var _=JSON.parse((b=v.newValue)!==null&&b!==void 0?b:"{}");_?.event!=="session"||!(_!=null&&_.data)||g(_)}};return window.addEventListener("storage",y),function(){return window.removeEventListener("storage",y)}},post:function(g){if(!(typeof window>"u"))try{localStorage.setItem(p,JSON.stringify(a(a({},g),{},{timestamp:f()})))}catch{}}}}return If}var ON={},ZG;function DDe(){return ZG||(ZG=1,Object.defineProperty(ON,"__esModule",{value:!0})),ON}var JG;function FDe(){return JG||(JG=1,function(e){var t={},n=Xk(),r=Qb();Object.defineProperty(e,"__esModule",{value:!0});var s={SessionContext:!0,useSession:!0,getSession:!0,getCsrfToken:!0,getProviders:!0,signIn:!0,signOut:!0,SessionProvider:!0};e.SessionContext=void 0,e.SessionProvider=q,e.getCsrfToken=T,e.getProviders=L,e.getSession=P,e.signIn=$,e.signOut=W,e.useSession=D;var a=n(Zk()),i=n(Jk()),l=n(e5()),c=n(CDe()),u=C(Dy()),f=C(PDe()),m=n(LDe()),p=ODe(),h=r7e(),g=DDe();Object.keys(g).forEach(function(H){H==="default"||H==="__esModule"||Object.prototype.hasOwnProperty.call(s,H)||H in e&&e[H]===g[H]||Object.defineProperty(e,H,{enumerable:!0,get:function(){return g[H]}})});var y,x,v,b,_;function w(H){if(typeof WeakMap!="function")return null;var K=new WeakMap,G=new WeakMap;return(w=function(Y){return Y?G:K})(H)}function C(H,K){if(H&&H.__esModule)return H;if(H===null||r(H)!="object"&&typeof H!="function")return{default:H};var G=w(K);if(G&&G.has(H))return G.get(H);var ee={__proto__:null},Y=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var te in H)if(te!=="default"&&{}.hasOwnProperty.call(H,te)){var se=Y?Object.getOwnPropertyDescriptor(H,te):null;se&&(se.get||se.set)?Object.defineProperty(ee,te,se):ee[te]=H[te]}return ee.default=H,G&&G.set(H,ee),ee}function S(H,K){var G=Object.keys(H);if(Object.getOwnPropertySymbols){var ee=Object.getOwnPropertySymbols(H);K&&(ee=ee.filter(function(Y){return Object.getOwnPropertyDescriptor(H,Y).enumerable})),G.push.apply(G,ee)}return G}function E(H){for(var K=1;K<arguments.length;K++){var G=arguments[K]!=null?arguments[K]:{};K%2?S(Object(G),!0).forEach(function(ee){(0,i.default)(H,ee,G[ee])}):Object.getOwnPropertyDescriptors?Object.defineProperties(H,Object.getOwnPropertyDescriptors(G)):S(Object(G)).forEach(function(ee){Object.defineProperty(H,ee,Object.getOwnPropertyDescriptor(G,ee))})}return H}var k={baseUrl:(0,m.default)((y=t.NEXTAUTH_URL)!==null&&y!==void 0?y:t.VERCEL_URL).origin,basePath:(0,m.default)(t.NEXTAUTH_URL).path,baseUrlServer:(0,m.default)((x=(v=t.NEXTAUTH_URL_INTERNAL)!==null&&v!==void 0?v:t.NEXTAUTH_URL)!==null&&x!==void 0?x:t.VERCEL_URL).origin,basePathServer:(0,m.default)((b=t.NEXTAUTH_URL_INTERNAL)!==null&&b!==void 0?b:t.NEXTAUTH_URL).path,_lastSync:0,_session:void 0,_getSession:function(){}},M=(0,p.BroadcastChannel)(),j=(0,f.proxyLogger)(f.default,k.basePath);function R(){var H=u.useState(typeof navigator<"u"?navigator.onLine:!1),K=(0,c.default)(H,2),G=K[0],ee=K[1],Y=function(){return ee(!0)},te=function(){return ee(!1)};return u.useEffect(function(){return window.addEventListener("online",Y),window.addEventListener("offline",te),function(){window.removeEventListener("online",Y),window.removeEventListener("offline",te)}},[]),G}var O=e.SessionContext=(_=u.createContext)===null||_===void 0?void 0:_.call(u,void 0);function D(H){if(!O)throw new Error("React Context is unavailable in Server Components");var K=u.useContext(O),G=H??{},ee=G.required,Y=G.onUnauthenticated,te=ee&&K.status==="unauthenticated";return u.useEffect(function(){if(te){var se="/api/auth/signin?".concat(new URLSearchParams({error:"SessionRequired",callbackUrl:window.location.href}));Y?Y():window.location.href=se}},[te,Y]),te?{data:K.data,update:K.update,status:"loading"}:K}function P(H){return A.apply(this,arguments)}function A(){return A=(0,l.default)(a.default.mark(function H(K){var G,ee;return a.default.wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,(0,p.fetchData)("session",k,j,K);case 2:return ee=te.sent,(!((G=K?.broadcast)!==null&&G!==void 0)||G)&&M.post({event:"session",data:{trigger:"getSession"}}),te.abrupt("return",ee);case 5:case"end":return te.stop()}},H)})),A.apply(this,arguments)}function T(H){return N.apply(this,arguments)}function N(){return N=(0,l.default)(a.default.mark(function H(K){var G;return a.default.wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:return Y.next=2,(0,p.fetchData)("csrf",k,j,K);case 2:return G=Y.sent,Y.abrupt("return",G?.csrfToken);case 4:case"end":return Y.stop()}},H)})),N.apply(this,arguments)}function L(){return U.apply(this,arguments)}function U(){return U=(0,l.default)(a.default.mark(function H(){return a.default.wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return G.next=2,(0,p.fetchData)("providers",k,j);case 2:return G.abrupt("return",G.sent);case 3:case"end":return G.stop()}},H)})),U.apply(this,arguments)}function $(H,K,G){return V.apply(this,arguments)}function V(){return V=(0,l.default)(a.default.mark(function H(K,G,ee){var Y,te,se,ae,pe,fe,ge,Se,je,ye,be,Ne,ke,Ie,Ce,Ge,tt;return a.default.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:return Y=G??{},te=Y.callbackUrl,se=te===void 0?window.location.href:te,ae=Y.redirect,pe=ae===void 0?!0:ae,fe=(0,p.apiBaseUrl)(k),Ee.next=4,L();case 4:if(ge=Ee.sent,ge){Ee.next=8;break}return window.location.href="".concat(fe,"/error"),Ee.abrupt("return");case 8:if(!(!K||!(K in ge))){Ee.next=11;break}return window.location.href="".concat(fe,"/signin?").concat(new URLSearchParams({callbackUrl:se})),Ee.abrupt("return");case 11:return Se=ge[K].type==="credentials",je=ge[K].type==="email",ye=Se||je,be="".concat(fe,"/").concat(Se?"callback":"signin","/").concat(K),Ne="".concat(be).concat(ee?"?".concat(new URLSearchParams(ee)):""),Ee.t0=fetch,Ee.t1=Ne,Ee.t2={"Content-Type":"application/x-www-form-urlencoded"},Ee.t3=URLSearchParams,Ee.t4=E,Ee.t5=E({},G),Ee.t6={},Ee.next=25,T();case 25:return Ee.t7=Ee.sent,Ee.t8=se,Ee.t9={csrfToken:Ee.t7,callbackUrl:Ee.t8,json:!0},Ee.t10=(0,Ee.t4)(Ee.t5,Ee.t6,Ee.t9),Ee.t11=new Ee.t3(Ee.t10),Ee.t12={method:"post",headers:Ee.t2,body:Ee.t11},Ee.next=33,(0,Ee.t0)(Ee.t1,Ee.t12);case 33:return ke=Ee.sent,Ee.next=36,ke.json();case 36:if(Ie=Ee.sent,!(pe||!ye)){Ee.next=42;break}return Ge=(Ce=Ie.url)!==null&&Ce!==void 0?Ce:se,window.location.href=Ge,Ge.includes("#")&&window.location.reload(),Ee.abrupt("return");case 42:if(tt=new URL(Ie.url).searchParams.get("error"),!ke.ok){Ee.next=46;break}return Ee.next=46,M.post({event:"session",data:{trigger:"signin"}}),k._getSession({event:"storage"});case 46:return Ee.abrupt("return",{error:tt,status:ke.status,ok:ke.ok,url:tt?null:Ie.url});case 47:case"end":return Ee.stop()}},H)})),V.apply(this,arguments)}function W(H){return Q.apply(this,arguments)}function Q(){return Q=(0,l.default)(a.default.mark(function H(K){var G,ee,Y,te,se,ae,pe,fe,ge,Se;return a.default.wrap(function(ye){for(;;)switch(ye.prev=ye.next){case 0:return ee=K??{},Y=ee.callbackUrl,te=Y===void 0?window.location.href:Y,se=(0,p.apiBaseUrl)(k),ye.t0={"Content-Type":"application/x-www-form-urlencoded"},ye.t1=URLSearchParams,ye.next=6,T();case 6:return ye.t2=ye.sent,ye.t3=te,ye.t4={csrfToken:ye.t2,callbackUrl:ye.t3,json:!0},ye.t5=new ye.t1(ye.t4),ae={method:"post",headers:ye.t0,body:ye.t5},ye.next=13,fetch("".concat(se,"/signout"),ae);case 13:return pe=ye.sent,ye.next=16,pe.json();case 16:if(fe=ye.sent,M.post({event:"session",data:{trigger:"signout"}}),!(!((G=K?.redirect)!==null&&G!==void 0)||G)){ye.next=23;break}return Se=(ge=fe.url)!==null&&ge!==void 0?ge:te,window.location.href=Se,Se.includes("#")&&window.location.reload(),ye.abrupt("return");case 23:return ye.next=25,k._getSession({event:"storage"});case 25:return ye.abrupt("return",fe);case 26:case"end":return ye.stop()}},H)})),Q.apply(this,arguments)}function q(H){if(!O)throw new Error("React Context is unavailable in Server Components");var K=H.children,G=H.basePath,ee=H.refetchInterval,Y=H.refetchWhenOffline;G&&(k.basePath=G);var te=H.session!==void 0;k._lastSync=te?(0,p.now)():0;var se=u.useState(function(){return te&&(k._session=H.session),H.session}),ae=(0,c.default)(se,2),pe=ae[0],fe=ae[1],ge=u.useState(!te),Se=(0,c.default)(ge,2),je=Se[0],ye=Se[1];u.useEffect(function(){return k._getSession=(0,l.default)(a.default.mark(function Ie(){var Ce,Ge,tt,gt=arguments;return a.default.wrap(function(Re){for(;;)switch(Re.prev=Re.next){case 0:if(Ce=gt.length>0&&gt[0]!==void 0?gt[0]:{},Ge=Ce.event,Re.prev=1,tt=Ge==="storage",!(tt||k._session===void 0)){Re.next=10;break}return k._lastSync=(0,p.now)(),Re.next=7,P({broadcast:!tt});case 7:return k._session=Re.sent,fe(k._session),Re.abrupt("return");case 10:if(!(!Ge||k._session===null||(0,p.now)()<k._lastSync)){Re.next=12;break}return Re.abrupt("return");case 12:return k._lastSync=(0,p.now)(),Re.next=15,P();case 15:k._session=Re.sent,fe(k._session),Re.next=22;break;case 19:Re.prev=19,Re.t0=Re.catch(1),j.error("CLIENT_SESSION_ERROR",Re.t0);case 22:return Re.prev=22,ye(!1),Re.finish(22);case 25:case"end":return Re.stop()}},Ie,null,[[1,19,22,25]])})),k._getSession(),function(){k._lastSync=0,k._session=void 0,k._getSession=function(){}}},[]),u.useEffect(function(){var Ie=M.receive(function(){return k._getSession({event:"storage"})});return function(){return Ie()}},[]),u.useEffect(function(){var Ie=H.refetchOnWindowFocus,Ce=Ie===void 0?!0:Ie,Ge=function(){Ce&&document.visibilityState==="visible"&&k._getSession({event:"visibilitychange"})};return document.addEventListener("visibilitychange",Ge,!1),function(){return document.removeEventListener("visibilitychange",Ge,!1)}},[H.refetchOnWindowFocus]);var be=R(),Ne=Y!==!1||be;u.useEffect(function(){if(ee&&Ne){var Ie=setInterval(function(){k._session&&k._getSession({event:"poll"})},ee*1e3);return function(){return clearInterval(Ie)}}},[ee,Ne]);var ke=u.useMemo(function(){return{data:pe,status:je?"loading":pe?"authenticated":"unauthenticated",update:function(Ce){return(0,l.default)(a.default.mark(function Ge(){var tt;return a.default.wrap(function(Ee){for(;;)switch(Ee.prev=Ee.next){case 0:if(!(je||!pe)){Ee.next=2;break}return Ee.abrupt("return");case 2:return ye(!0),Ee.t0=p.fetchData,Ee.t1=k,Ee.t2=j,Ee.next=8,T();case 8:return Ee.t3=Ee.sent,Ee.t4=Ce,Ee.t5={csrfToken:Ee.t3,data:Ee.t4},Ee.t6={body:Ee.t5},Ee.t7={req:Ee.t6},Ee.next=15,(0,Ee.t0)("session",Ee.t1,Ee.t2,Ee.t7);case 15:return tt=Ee.sent,ye(!1),tt&&(fe(tt),M.post({event:"session",data:{trigger:"getSession"}})),Ee.abrupt("return",tt);case 19:case"end":return Ee.stop()}},Ge)}))()}}},[pe,je]);return(0,h.jsx)(O.Provider,{value:ke,children:K})}}(uN)),uN}var Xb=FDe();const VO="pplx-next-auth-session";let rC=null;const UDe=()=>{try{const e=De.getItem(VO);return e?JSON.parse(e):null}catch{return null}},JR=e=>{e&&De.setItem(VO,JSON.stringify(e))},BDe=()=>{De.removeItem(VO)},$De=(e=!1)=>{rC??=Xb.getSession().then(n=>(JR(n),n)).catch(n=>{throw JR(null),n}).finally(()=>{rC=null});const t=UDe();return t&&(e||new Date(t.expires)>new Date)?{cachedSession:t,sessionFetchPromise:rC}:{cachedSession:null,sessionFetchPromise:rC}},mt=()=>{const{data:e,status:t,update:n}=Xb.useSession(),[r,s]=d.useState(e),a=d.useCallback(async()=>{const i=await n();return s(l=>cs(i?.user,l?.user)?l:i),i},[n]);return d.useEffect(()=>{t!=="loading"&&(s(i=>cs(e?.user,i?.user)?i:e),e?JR(e):BDe())},[e,t]),d.useMemo(()=>({session:r,update:a,status:t}),[r,a,t])};function aue(){const{session:e}=mt(),t=["pplx-dev@example.com","pplx-dev-pro@example.com","pplx-dev-enterprise@example.com","fe-test-user@example.com"],n=e?.user?.email??"none";return n.endsWith("@perplexity.ai")||t.includes(n)}function et(){const{status:e}=mt(),t=e==="authenticated";return d.useEffect(()=>{t&&Rle()},[t]),t}function VDe(){if(typeof window>"u")return!1;const e=window;return!!(e?.webkit?.messageHandlers?.pplx?.postMessage||e?.Android?.pplx?.postMessage)}function t5({type:e,data:t}){if(typeof window>"u")return!1;const n=window,r={type:e,data:t};return n?.webkit?.messageHandlers?.pplx?.postMessage?(n.webkit.messageHandlers.pplx.postMessage(r),!0):n?.Android?.pplx?.postMessage?(n.Android.pplx.postMessage(r),!0):!1}function WDe({query:e}){return t5({type:"pplx.ask",data:{query:e}})}function oue(e,t){const n=e.split(".").map(Number),r=t.split(".").map(Number);for(let s=0;s<3;s++){const a=n[s],i=r[s];if(a===void 0||i===void 0)return 0;if(a>i)return 1;if(a<i)return-1}return 0}function HDe(e,t){try{return!e||!t?!0:oue(e,t)===-1}catch(n){return ne.error("Error comparing canonical page semver",{e:n}),!0}}function Prn(e,t,n){try{if(!e||!t)return!1;const r=n[t];return r?oue(e,r)>=0:!0}catch(r){return ne.error("Error comparing canonical page semver",{e:r}),!1}}const iue=Dt("CanonicalPageContext",{inApp:!1,preferredColorScheme:null,deviceId:null,appVersion:null,isIOS:!1,isAndroid:!1,client:null}),zDe=I.memo(({children:e,inApp:t})=>{const n=Ot(),r=Lt(),s=n?.get("mobile.deviceId")||null,a=n?.get("mobile.appVersion")||null,i=n?.get("mobile.preferredColorScheme")||null,l=n?.get("mobile.client")||null,c=l==="ios",u=l==="android";return d.useEffect(()=>{if(!r?.startsWith("/app")||!n)return;const f=["mobile.","version"],m=new URL(window.location.href.replace("/app",""));m.searchParams.forEach((p,h)=>{f.some(g=>h.startsWith(g))&&m.searchParams.delete(h)}),m.searchParams.set("referrer","canonical"),t5({type:"pplx.url.share",data:{url:m.href}})},[r,n]),o.jsx(iue.Provider,{value:{inApp:t,preferredColorScheme:i,deviceId:s,appVersion:a,isIOS:c,isAndroid:u,client:l},children:e})});zDe.displayName="CanonicalPageProvider";function Xo(){return d.useContext(iue)}const g1=d.createContext({});function WO(e){const t=d.useRef(null);return t.current===null&&(t.current=e()),t.current}const HO=typeof window<"u",zO=HO?d.useLayoutEffect:d.useEffect,n5=d.createContext(null);function GO(e,t){e.indexOf(t)===-1&&e.push(t)}function Zb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const _u=(e,t,n)=>n>t?t:n<e?e:n;let qO=()=>{};const wu={},lue=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function cue(e){return typeof e=="object"&&e!==null}const uue=e=>/^0[^.\s]+$/u.test(e);function KO(e){let t;return()=>(t===void 0&&(t=e()),t)}const wi=e=>e,GDe=(e,t)=>n=>t(e(n)),Jb=(...e)=>e.reduce(GDe),jg=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class YO{constructor(){this.subscriptions=[]}add(t){return GO(this.subscriptions,t),()=>Zb(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const i=this.subscriptions[a];i&&i(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zi=e=>e*1e3,Yl=e=>e/1e3;function due(e,t){return t?e*(1e3/t):0}const qDe=(e,t,n)=>{const r=t-e;return((n-e)%r+r)%r+e},fue=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,KDe=1e-7,YDe=12;function QDe(e,t,n,r,s){let a,i,l=0;do i=t+(n-t)/2,a=fue(i,r,s)-e,a>0?n=i:t=i;while(Math.abs(a)>KDe&&++l<YDe);return i}function xo(e,t,n,r){if(e===t&&n===r)return wi;const s=a=>QDe(a,0,1,e,n);return a=>a===0||a===1?a:fue(s(a),t,r)}const mue=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,pue=e=>t=>1-e(1-t),hue=xo(.33,1.53,.69,.99),QO=pue(hue),gue=mue(QO),XO=e=>(e*=2)<1?.5*QO(e):.5*(2-Math.pow(2,-10*(e-1))),ZO=e=>1-Math.sin(Math.acos(e)),yue=pue(ZO),xue=mue(ZO),vue=xo(.42,0,1,1),_a=xo(0,0,.58,1),ha=xo(.42,0,.58,1),bue=e=>Array.isArray(e)&&typeof e[0]!="number";function _ue(e,t){return bue(e)?e[qDe(0,e.length,t)]:e}const wue=e=>Array.isArray(e)&&typeof e[0]=="number",XDe={linear:wi,easeIn:vue,easeInOut:ha,easeOut:_a,circIn:ZO,circInOut:xue,circOut:yue,backIn:QO,backInOut:gue,backOut:hue,anticipate:XO},ZDe=e=>typeof e=="string",eq=e=>{if(wue(e)){qO(e.length===4);const[t,n,r,s]=e;return xo(t,n,r,s)}else if(ZDe(e))return XDe[e];return e},sC=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function JDe(e,t){let n=new Set,r=new Set,s=!1,a=!1;const i=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(f){i.has(f)&&(u.schedule(f),e()),f(l)}const u={schedule:(f,m=!1,p=!1)=>{const g=p&&s?n:r;return m&&i.add(f),g.has(f)||g.add(f),f},cancel:f=>{r.delete(f),i.delete(f)},process:f=>{if(l=f,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(c),n.clear(),s=!1,a&&(a=!1,u.process(f))}};return u}const eFe=40;function Cue(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,i=sC.reduce((_,w)=>(_[w]=JDe(a),_),{}),{setup:l,read:c,resolveKeyframes:u,preUpdate:f,update:m,preRender:p,render:h,postRender:g}=i,y=()=>{const _=wu.useManualTiming?s.timestamp:performance.now();n=!1,wu.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(_-s.timestamp,eFe),1)),s.timestamp=_,s.isProcessing=!0,l.process(s),c.process(s),u.process(s),f.process(s),m.process(s),p.process(s),h.process(s),g.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(y))},x=()=>{n=!0,r=!0,s.isProcessing||e(y)};return{schedule:sC.reduce((_,w)=>{const C=i[w];return _[w]=(S,E=!1,k=!1)=>(n||x(),C.schedule(S,E,k)),_},{}),cancel:_=>{for(let w=0;w<sC.length;w++)i[sC[w]].cancel(_)},state:s,steps:i}}const{schedule:_r,cancel:Bd,state:$s,steps:DN}=Cue(typeof requestAnimationFrame<"u"?requestAnimationFrame:wi,!0);let QS;function tFe(){QS=void 0}const io={now:()=>(QS===void 0&&io.set($s.isProcessing||wu.useManualTiming?$s.timestamp:performance.now()),QS),set:e=>{QS=e,queueMicrotask(tFe)}},Sue=e=>t=>typeof t=="string"&&t.startsWith(e),JO=Sue("--"),nFe=Sue("var(--"),eD=e=>nFe(e)?rFe.test(e.split("/*")[0].trim()):!1,rFe=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Vy={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},y1={...Vy,transform:e=>_u(0,1,e)},aC={...Vy,default:1},w0=e=>Math.round(e*1e5)/1e5,tD=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function sFe(e){return e==null}const aFe=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,nD=(e,t)=>n=>!!(typeof n=="string"&&aFe.test(n)&&n.startsWith(e)||t&&!sFe(n)&&Object.prototype.hasOwnProperty.call(n,t)),Eue=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,i,l]=r.match(tD);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(i),alpha:l!==void 0?parseFloat(l):1}},oFe=e=>_u(0,255,e),FN={...Vy,transform:e=>Math.round(oFe(e))},lm={test:nD("rgb","red"),parse:Eue("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+FN.transform(e)+", "+FN.transform(t)+", "+FN.transform(n)+", "+w0(y1.transform(r))+")"};function iFe(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const eP={test:nD("#"),parse:iFe,transform:lm.transform},e_=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),rd=e_("deg"),Ql=e_("%"),Bt=e_("px"),lFe=e_("vh"),cFe=e_("vw"),tq={...Ql,parse:e=>Ql.parse(e)/100,transform:e=>Ql.transform(e*100)},Rh={test:nD("hsl","hue"),parse:Eue("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ql.transform(w0(t))+", "+Ql.transform(w0(n))+", "+w0(y1.transform(r))+")"},qr={test:e=>lm.test(e)||eP.test(e)||Rh.test(e),parse:e=>lm.test(e)?lm.parse(e):Rh.test(e)?Rh.parse(e):eP.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?lm.transform(e):Rh.transform(e),getAnimatableNone:e=>{const t=qr.parse(e);return t.alpha=0,qr.transform(t)}},uFe=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function dFe(e){return isNaN(e)&&typeof e=="string"&&(e.match(tD)?.length||0)+(e.match(uFe)?.length||0)>0}const Mue="number",kue="color",fFe="var",mFe="var(",nq="${}",pFe=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function x1(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const l=t.replace(pFe,c=>(qr.test(c)?(r.color.push(a),s.push(kue),n.push(qr.parse(c))):c.startsWith(mFe)?(r.var.push(a),s.push(fFe),n.push(c)):(r.number.push(a),s.push(Mue),n.push(parseFloat(c))),++a,nq)).split(nq);return{values:n,split:l,indexes:r,types:s}}function Tue(e){return x1(e).values}function Nue(e){const{split:t,types:n}=x1(e),r=t.length;return s=>{let a="";for(let i=0;i<r;i++)if(a+=t[i],s[i]!==void 0){const l=n[i];l===Mue?a+=w0(s[i]):l===kue?a+=qr.transform(s[i]):a+=s[i]}return a}}const hFe=e=>typeof e=="number"?0:qr.test(e)?qr.getAnimatableNone(e):e;function gFe(e){const t=Tue(e);return Nue(e)(t.map(hFe))}const $d={test:dFe,parse:Tue,createTransformer:Nue,getAnimatableNone:gFe};function UN(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function yFe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,i=0;if(!t)s=a=i=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;s=UN(c,l,e+1/3),a=UN(c,l,e),i=UN(c,l,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(i*255),alpha:r}}function rE(e,t){return n=>n>0?t:e}const Er=(e,t,n)=>e+(t-e)*n,BN=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},xFe=[eP,lm,Rh],vFe=e=>xFe.find(t=>t.test(e));function rq(e){const t=vFe(e);if(!t)return!1;let n=t.parse(e);return t===Rh&&(n=yFe(n)),n}const sq=(e,t)=>{const n=rq(e),r=rq(t);if(!n||!r)return rE(e,t);const s={...n};return a=>(s.red=BN(n.red,r.red,a),s.green=BN(n.green,r.green,a),s.blue=BN(n.blue,r.blue,a),s.alpha=Er(n.alpha,r.alpha,a),lm.transform(s))},tP=new Set(["none","hidden"]);function bFe(e,t){return tP.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function _Fe(e,t){return n=>Er(e,t,n)}function rD(e){return typeof e=="number"?_Fe:typeof e=="string"?eD(e)?rE:qr.test(e)?sq:SFe:Array.isArray(e)?jue:typeof e=="object"?qr.test(e)?sq:wFe:rE}function jue(e,t){const n=[...e],r=n.length,s=e.map((a,i)=>rD(a)(a,t[i]));return a=>{for(let i=0;i<r;i++)n[i]=s[i](a);return n}}function wFe(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=rD(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function CFe(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],i=e.indexes[a][r[a]],l=e.values[i]??0;n[s]=l,r[a]++}return n}const SFe=(e,t)=>{const n=$d.createTransformer(t),r=x1(e),s=x1(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?tP.has(e)&&!s.values.length||tP.has(t)&&!r.values.length?bFe(e,t):Jb(jue(CFe(r,s),s.values),n):rE(e,t)};function Aue(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Er(e,t,n):rD(e)(e,t)}const EFe=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>_r.update(t,n),stop:()=>Bd(t),now:()=>$s.isProcessing?$s.timestamp:io.now()}},Iue=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=Math.round(e(a/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},sE=2e4;function sD(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<sE;)t+=n,r=e.next(t);return t>=sE?1/0:t}function Rue(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(sD(r),sE);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:Yl(s)}}const MFe=5;function Pue(e,t,n){const r=Math.max(t-MFe,0);return due(n-e(r),t-r)}const Rr={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},aq=.001;function kFe({duration:e=Rr.duration,bounce:t=Rr.bounce,velocity:n=Rr.velocity,mass:r=Rr.mass}){let s,a,i=1-t;i=_u(Rr.minDamping,Rr.maxDamping,i),e=_u(Rr.minDuration,Rr.maxDuration,Yl(e)),i<1?(s=u=>{const f=u*i,m=f*e,p=f-n,h=nP(u,i),g=Math.exp(-m);return aq-p/h*g},a=u=>{const m=u*i*e,p=m*n+n,h=Math.pow(i,2)*Math.pow(u,2)*e,g=Math.exp(-m),y=nP(Math.pow(u,2),i);return(-s(u)+aq>0?-1:1)*((p-h)*g)/y}):(s=u=>{const f=Math.exp(-u*e),m=(u-n)*e+1;return-.001+f*m},a=u=>{const f=Math.exp(-u*e),m=(n-u)*(e*e);return f*m});const l=5/e,c=NFe(s,a,l);if(e=Zi(e),isNaN(c))return{stiffness:Rr.stiffness,damping:Rr.damping,duration:e};{const u=Math.pow(c,2)*r;return{stiffness:u,damping:i*2*Math.sqrt(r*u),duration:e}}}const TFe=12;function NFe(e,t,n){let r=n;for(let s=1;s<TFe;s++)r=r-e(r)/t(r);return r}function nP(e,t){return e*Math.sqrt(1-t*t)}const jFe=["duration","bounce"],AFe=["stiffness","damping","mass"];function oq(e,t){return t.some(n=>e[n]!==void 0)}function IFe(e){let t={velocity:Rr.velocity,stiffness:Rr.stiffness,damping:Rr.damping,mass:Rr.mass,isResolvedFromDuration:!1,...e};if(!oq(e,AFe)&&oq(e,jFe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*_u(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Rr.mass,stiffness:s,damping:a}}else{const n=kFe(e);t={...t,...n,mass:Rr.mass},t.isResolvedFromDuration=!0}return t}function v1(e=Rr.visualDuration,t=Rr.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],i=n.keyframes[n.keyframes.length-1],l={done:!1,value:a},{stiffness:c,damping:u,mass:f,duration:m,velocity:p,isResolvedFromDuration:h}=IFe({...n,velocity:-Yl(n.velocity||0)}),g=p||0,y=u/(2*Math.sqrt(c*f)),x=i-a,v=Yl(Math.sqrt(c/f)),b=Math.abs(x)<5;r||(r=b?Rr.restSpeed.granular:Rr.restSpeed.default),s||(s=b?Rr.restDelta.granular:Rr.restDelta.default);let _;if(y<1){const C=nP(v,y);_=S=>{const E=Math.exp(-y*v*S);return i-E*((g+y*v*x)/C*Math.sin(C*S)+x*Math.cos(C*S))}}else if(y===1)_=C=>i-Math.exp(-v*C)*(x+(g+v*x)*C);else{const C=v*Math.sqrt(y*y-1);_=S=>{const E=Math.exp(-y*v*S),k=Math.min(C*S,300);return i-E*((g+y*v*x)*Math.sinh(k)+C*x*Math.cosh(k))/C}}const w={calculatedDuration:h&&m||null,next:C=>{const S=_(C);if(h)l.done=C>=m;else{let E=C===0?g:0;y<1&&(E=C===0?Zi(g):Pue(_,C,S));const k=Math.abs(E)<=r,M=Math.abs(i-S)<=s;l.done=k&&M}return l.value=l.done?i:S,l},toString:()=>{const C=Math.min(sD(w),sE),S=Iue(E=>w.next(C*E).value,C,30);return C+"ms "+S},toTransition:()=>{}};return w}v1.applyToOptions=e=>{const t=Rue(e,100,v1);return e.ease=t.ease,e.duration=Zi(t.duration),e.type="keyframes",e};function rP({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:i,min:l,max:c,restDelta:u=.5,restSpeed:f}){const m=e[0],p={done:!1,value:m},h=k=>l!==void 0&&k<l||c!==void 0&&k>c,g=k=>l===void 0?c:c===void 0||Math.abs(l-k)<Math.abs(c-k)?l:c;let y=n*t;const x=m+y,v=i===void 0?x:i(x);v!==x&&(y=v-m);const b=k=>-y*Math.exp(-k/r),_=k=>v+b(k),w=k=>{const M=b(k),j=_(k);p.done=Math.abs(M)<=u,p.value=p.done?v:j};let C,S;const E=k=>{h(p.value)&&(C=k,S=v1({keyframes:[p.value,g(p.value)],velocity:Pue(_,k,p.value),damping:s,stiffness:a,restDelta:u,restSpeed:f}))};return E(0),{calculatedDuration:null,next:k=>{let M=!1;return!S&&C===void 0&&(M=!0,w(k),E(k)),C!==void 0&&k>=C?S.next(k-C):(!M&&w(k),p)}}}function RFe(e,t,n){const r=[],s=n||wu.mix||Aue,a=e.length-1;for(let i=0;i<a;i++){let l=s(e[i],e[i+1]);if(t){const c=Array.isArray(t)?t[i]||wi:t;l=Jb(c,l)}r.push(l)}return r}function PFe(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(qO(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const i=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=RFe(t,r,s),c=l.length,u=f=>{if(i&&f<e[0])return t[0];let m=0;if(c>1)for(;m<e.length-2&&!(f<e[m+1]);m++);const p=jg(e[m],e[m+1],f);return l[m](p)};return n?f=>u(_u(e[0],e[a-1],f)):u}function Lue(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=jg(0,t,r);e.push(Er(n,1,s))}}function Oue(e){const t=[0];return Lue(t,e.length-1),t}function LFe(e,t){return e.map(n=>n*t)}function OFe(e,t){return e.map(()=>t||ha).splice(0,e.length-1)}function C0({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=bue(r)?r.map(eq):eq(r),a={done:!1,value:t[0]},i=LFe(n&&n.length===t.length?n:Oue(t),e),l=PFe(i,t,{ease:Array.isArray(s)?s:OFe(t,s)});return{calculatedDuration:e,next:c=>(a.value=l(c),a.done=c>=e,a)}}const DFe=e=>e!==null;function aD(e,{repeat:t,repeatType:n="loop"},r,s=1){const a=e.filter(DFe),l=s<0||t&&n!=="loop"&&t%2===1?0:a.length-1;return!l||r===void 0?a[l]:r}const FFe={decay:rP,inertia:rP,tween:C0,keyframes:C0,spring:v1};function Due(e){typeof e.type=="string"&&(e.type=FFe[e.type])}class oD{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const UFe=e=>e/100;class iD extends oD{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==io.now()&&this.tick(io.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Due(t);const{type:n=C0,repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:i=0}=t;let{keyframes:l}=t;const c=n||C0;c!==C0&&typeof l[0]!="number"&&(this.mixKeyframes=Jb(UFe,Aue(l[0],l[1])),l=[0,100]);const u=c({...t,keyframes:l});a==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-i})),u.calculatedDuration===null&&(u.calculatedDuration=sD(u));const{calculatedDuration:f}=u;this.calculatedDuration=f,this.resolvedDuration=f+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=u}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:a,mirroredGenerator:i,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:u=0,keyframes:f,repeat:m,repeatType:p,repeatDelay:h,type:g,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const v=this.currentTime-u*(this.playbackSpeed>=0?1:-1),b=this.playbackSpeed>=0?v<0:v>s;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let _=this.currentTime,w=r;if(m){const k=Math.min(this.currentTime,s)/l;let M=Math.floor(k),j=k%1;!j&&k>=1&&(j=1),j===1&&M--,M=Math.min(M,m+1),!!(M%2)&&(p==="reverse"?(j=1-j,h&&(j-=h/l)):p==="mirror"&&(w=i)),_=_u(0,1,j)*l}const C=b?{done:!1,value:f[0]}:w.next(_);a&&(C.value=a(C.value));let{done:S}=C;!b&&c!==null&&(S=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const E=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&S);return E&&g!==rP&&(C.value=aD(f,this.options,x,this.speed)),y&&y(C.value),E&&this.finish(),C}then(t,n){return this.finished.then(t,n)}get duration(){return Yl(this.calculatedDuration)}get time(){return Yl(this.currentTime)}set time(t){t=Zi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(io.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Yl(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=EFe,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(io.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function BFe(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const cm=e=>e*180/Math.PI,sP=e=>{const t=cm(Math.atan2(e[1],e[0]));return aP(t)},$Fe={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:sP,rotateZ:sP,skewX:e=>cm(Math.atan(e[1])),skewY:e=>cm(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},aP=e=>(e=e%360,e<0&&(e+=360),e),iq=sP,lq=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),cq=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),VFe={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:lq,scaleY:cq,scale:e=>(lq(e)+cq(e))/2,rotateX:e=>aP(cm(Math.atan2(e[6],e[5]))),rotateY:e=>aP(cm(Math.atan2(-e[2],e[0]))),rotateZ:iq,rotate:iq,skewX:e=>cm(Math.atan(e[4])),skewY:e=>cm(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function oP(e){return e.includes("scale")?1:0}function iP(e,t){if(!e||e==="none")return oP(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=VFe,s=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=$Fe,s=l}if(!s)return oP(t);const a=r[t],i=s[1].split(",").map(HFe);return typeof a=="function"?a(i):i[a]}const WFe=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return iP(n,t)};function HFe(e){return parseFloat(e.trim())}const Wy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Hy=new Set(Wy),uq=e=>e===Vy||e===Bt,zFe=new Set(["x","y","z"]),GFe=Wy.filter(e=>!zFe.has(e));function qFe(e){const t=[];return GFe.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const xm={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>iP(t,"x"),y:(e,{transform:t})=>iP(t,"y")};xm.translateX=xm.x;xm.translateY=xm.y;const vm=new Set;let lP=!1,cP=!1,uP=!1;function Fue(){if(cP){const e=Array.from(vm).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=qFe(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,i])=>{r.getValue(a)?.set(i)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}cP=!1,lP=!1,vm.forEach(e=>e.complete(uP)),vm.clear()}function Uue(){vm.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(cP=!0)})}function KFe(){uP=!0,Uue(),Fue(),uP=!1}class lD{constructor(t,n,r,s,a,i=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=i}scheduleResolve(){this.state="scheduled",this.isAsync?(vm.add(this),lP||(lP=!0,_r.read(Uue),_r.resolveKeyframes(Fue))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const a=s?.get(),i=t[t.length-1];if(a!==void 0)t[0]=a;else if(r&&n){const l=r.readValue(n,i);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=i),s&&a===void 0&&s.set(t[0])}BFe(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),vm.delete(this)}cancel(){this.state==="scheduled"&&(vm.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const YFe=e=>e.startsWith("--");function QFe(e,t,n){YFe(t)?e.style.setProperty(t,n):e.style[t]=n}const XFe=KO(()=>window.ScrollTimeline!==void 0),ZFe={};function JFe(e,t){const n=KO(e);return()=>ZFe[t]??n()}const Bue=JFe(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Qv=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,dq={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Qv([0,.65,.55,1]),circOut:Qv([.55,0,1,.45]),backIn:Qv([.31,.01,.66,-.59]),backOut:Qv([.33,1.53,.69,.99])};function $ue(e,t){if(e)return typeof e=="function"?Bue()?Iue(e,t):"ease-out":wue(e)?Qv(e):Array.isArray(e)?e.map(n=>$ue(n,t)||dq.easeOut):dq[e]}function eUe(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:i="loop",ease:l="easeOut",times:c}={},u=void 0){const f={[t]:n};c&&(f.offset=c);const m=$ue(l,s);Array.isArray(m)&&(f.easing=m);const p={delay:r,duration:s,easing:Array.isArray(m)?"linear":m,fill:"both",iterations:a+1,direction:i==="reverse"?"alternate":"normal"};return u&&(p.pseudoElement=u),e.animate(f,p)}function cD(e){return typeof e=="function"&&"applyToOptions"in e}function tUe({type:e,...t}){return cD(e)&&Bue()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class nUe extends oD{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:a,allowFlatten:i=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!a,this.allowFlatten=i,this.options=t,qO(typeof t.type!="string");const u=tUe(t);this.animation=eUe(n,r,s,u,a),u.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!a){const f=aD(s,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(f):QFe(n,r,f),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Yl(Number(t))}get time(){return Yl(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Zi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&XFe()?(this.animation.timeline=t,wi):n(this)}}const Vue={anticipate:XO,backInOut:gue,circInOut:xue};function rUe(e){return e in Vue}function sUe(e){typeof e.ease=="string"&&rUe(e.ease)&&(e.ease=Vue[e.ease])}const fq=10;class aUe extends nUe{constructor(t){sUe(t),Due(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:a,...i}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new iD({...i,autoplay:!1}),c=Zi(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-fq).value,l.sample(c).value,fq),l.stop()}}const mq=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&($d.test(e)||e==="0")&&!e.startsWith("url("));function oUe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function iUe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],i=mq(s,t),l=mq(a,t);return!i||!l?!1:oUe(e)||(n==="spring"||cD(n))&&r}function dP(e){e.duration=0,e.type}const lUe=new Set(["opacity","clipPath","filter","transform"]),cUe=KO(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function uUe(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:a,type:i}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:u}=t.owner.getProps();return cUe()&&n&&lUe.has(n)&&(n!=="transform"||!u)&&!c&&!r&&s!=="mirror"&&a!==0&&i!=="inertia"}const dUe=40;class fUe extends oD{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:i="loop",keyframes:l,name:c,motionValue:u,element:f,...m}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=io.now();const p={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:i,name:c,motionValue:u,element:f,...m},h=f?.KeyframeResolver||lD;this.keyframeResolver=new h(l,(g,y,x)=>this.onKeyframesResolved(g,y,p,!x),c,u,f),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:a,type:i,velocity:l,delay:c,isHandoff:u,onUpdate:f}=r;this.resolvedAt=io.now(),iUe(t,a,i,l)||((wu.instantAnimations||!c)&&f?.(aD(t,r,n)),t[0]=t[t.length-1],dP(r),r.repeat=0);const p={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>dUe?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},h=!u&&uUe(p)?new aUe({...p,element:p.motionValue.owner.current}):new iD(p);h.finished.then(()=>this.notifyFinished()).catch(wi),this.pendingTimeline&&(this.stopTimeline=h.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=h}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),KFe()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}class mUe{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t){const n=this.animations.map(r=>r.attachTimeline(t));return()=>{n.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get state(){return this.getAll("state")}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class pUe extends mUe{then(t,n){return this.finished.finally(t).then(()=>{})}}const hUe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function gUe(e){const t=hUe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function Wue(e,t,n=1){const[r,s]=gUe(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const i=a.trim();return lue(i)?parseFloat(i):i}return eD(s)?Wue(s,t,n+1):s}function uD(e,t){return e?.[t]??e?.default??e}const Hue=new Set(["width","height","top","left","right","bottom",...Wy]),yUe={test:e=>e==="auto",parse:e=>e},zue=e=>t=>t.test(e),Gue=[Vy,Bt,Ql,rd,cFe,lFe,yUe],pq=e=>Gue.find(zue(e));function xUe(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||uue(e):!0}const vUe=new Set(["brightness","contrast","saturate","opacity"]);function bUe(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(tD)||[];if(!r)return e;const s=n.replace(r,"");let a=vUe.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const _Ue=/\b([a-z-]*)\(.*?\)/gu,fP={...$d,getAnimatableNone:e=>{const t=e.match(_Ue);return t?t.map(bUe).join(" "):e}},hq={...Vy,transform:Math.round},wUe={rotate:rd,rotateX:rd,rotateY:rd,rotateZ:rd,scale:aC,scaleX:aC,scaleY:aC,scaleZ:aC,skew:rd,skewX:rd,skewY:rd,distance:Bt,translateX:Bt,translateY:Bt,translateZ:Bt,x:Bt,y:Bt,z:Bt,perspective:Bt,transformPerspective:Bt,opacity:y1,originX:tq,originY:tq,originZ:Bt},dD={borderWidth:Bt,borderTopWidth:Bt,borderRightWidth:Bt,borderBottomWidth:Bt,borderLeftWidth:Bt,borderRadius:Bt,radius:Bt,borderTopLeftRadius:Bt,borderTopRightRadius:Bt,borderBottomRightRadius:Bt,borderBottomLeftRadius:Bt,width:Bt,maxWidth:Bt,height:Bt,maxHeight:Bt,top:Bt,right:Bt,bottom:Bt,left:Bt,padding:Bt,paddingTop:Bt,paddingRight:Bt,paddingBottom:Bt,paddingLeft:Bt,margin:Bt,marginTop:Bt,marginRight:Bt,marginBottom:Bt,marginLeft:Bt,backgroundPositionX:Bt,backgroundPositionY:Bt,...wUe,zIndex:hq,fillOpacity:y1,strokeOpacity:y1,numOctaves:hq},CUe={...dD,color:qr,backgroundColor:qr,outlineColor:qr,fill:qr,stroke:qr,borderColor:qr,borderTopColor:qr,borderRightColor:qr,borderBottomColor:qr,borderLeftColor:qr,filter:fP,WebkitFilter:fP},que=e=>CUe[e];function Kue(e,t){let n=que(e);return n!==fP&&(n=$d),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const SUe=new Set(["auto","none","0"]);function EUe(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!SUe.has(a)&&x1(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=Kue(n,s)}class MUe extends lD{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let u=t[c];if(typeof u=="string"&&(u=u.trim(),eD(u))){const f=Wue(u,n.current);f!==void 0&&(t[c]=f),c===t.length-1&&(this.finalKeyframe=u)}}if(this.resolveNoneKeyframes(),!Hue.has(r)||t.length!==2)return;const[s,a]=t,i=pq(s),l=pq(a);if(i!==l)if(uq(i)&&uq(l))for(let c=0;c<t.length;c++){const u=t[c];typeof u=="string"&&(t[c]=parseFloat(u))}else xm[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||xUe(t[s]))&&r.push(s);r.length&&EUe(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=xm[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,i=r[a];r[a]=xm[n](t.measureViewportBox(),window.getComputedStyle(t.current)),i!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=i),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function fD(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;t&&(r=t.current);const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}const Yue=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function Que(e){return cue(e)&&"offsetHeight"in e}const gq=30,kUe=e=>!isNaN(parseFloat(e)),yq={current:void 0};class TUe{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=io.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const a of this.dependents)a.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=io.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=kUe(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new YO);const r=this.events[t].add(n);return t==="change"?()=>{r(),_r.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return yq.current&&yq.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){const t=io.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>gq)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,gq);return due(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Ag(e,t){return new TUe(e,t)}const{schedule:mD}=Cue(queueMicrotask,!1),$i={x:!1,y:!1};function Xue(){return $i.x||$i.y}function NUe(e){return e==="x"||e==="y"?$i[e]?null:($i[e]=!0,()=>{$i[e]=!1}):$i.x||$i.y?null:($i.x=$i.y=!0,()=>{$i.x=$i.y=!1})}function Zue(e,t){const n=fD(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function xq(e){return!(e.pointerType==="touch"||Xue())}function jUe(e,t,n={}){const[r,s,a]=Zue(e,n),i=l=>{if(!xq(l))return;const{target:c}=l,u=t(c,l);if(typeof u!="function"||!c)return;const f=m=>{xq(m)&&(u(m),c.removeEventListener("pointerleave",f))};c.addEventListener("pointerleave",f,s)};return r.forEach(l=>{l.addEventListener("pointerenter",i,s)}),a}const Jue=(e,t)=>t?e===t?!0:Jue(e,t.parentElement):!1,pD=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,AUe=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function IUe(e){return AUe.has(e.tagName)||e.tabIndex!==-1}const XS=new WeakSet;function vq(e){return t=>{t.key==="Enter"&&e(t)}}function $N(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const RUe=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=vq(()=>{if(XS.has(n))return;$N(n,"down");const s=vq(()=>{$N(n,"up")}),a=()=>$N(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function bq(e){return pD(e)&&!Xue()}function PUe(e,t,n={}){const[r,s,a]=Zue(e,n),i=l=>{const c=l.currentTarget;if(!bq(l))return;XS.add(c);const u=t(c,l),f=(h,g)=>{window.removeEventListener("pointerup",m),window.removeEventListener("pointercancel",p),XS.has(c)&&XS.delete(c),bq(h)&&typeof u=="function"&&u(h,{success:g})},m=h=>{f(h,c===window||c===document||n.useGlobalTarget||Jue(c,h.target))},p=h=>{f(h,!1)};window.addEventListener("pointerup",m,s),window.addEventListener("pointercancel",p,s)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",i,s),Que(l)&&(l.addEventListener("focus",u=>RUe(u,s)),!IUe(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),a}function hD(e){return cue(e)&&"ownerSVGElement"in e}function ede(e){return hD(e)&&e.tagName==="svg"}const Ts=e=>!!(e&&e.getVelocity),LUe=[...Gue,qr,$d],OUe=e=>LUe.find(zue(e)),gD=d.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class DUe extends d.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=Que(r)&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function FUe({children:e,isPresent:t,anchorX:n,root:r}){const s=d.useId(),a=d.useRef(null),i=d.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=d.useContext(gD);return d.useInsertionEffect(()=>{const{width:c,height:u,top:f,left:m,right:p}=i.current;if(t||!a.current||!c||!u)return;const h=n==="left"?`left: ${m}`:`right: ${p}`;a.current.dataset.motionPopId=s;const g=document.createElement("style");l&&(g.nonce=l);const y=r??document.head;return y.appendChild(g),g.sheet&&g.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${u}px !important;
            ${h}px !important;
            top: ${f}px !important;
          }
        `),()=>{y.contains(g)&&y.removeChild(g)}},[t]),o.jsx(DUe,{isPresent:t,childRef:a,sizeRef:i,children:d.cloneElement(e,{ref:a})})}const UUe=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:i,anchorX:l,root:c})=>{const u=WO(BUe),f=d.useId();let m=!0,p=d.useMemo(()=>(m=!1,{id:f,initial:t,isPresent:n,custom:s,onExitComplete:h=>{u.set(h,!0);for(const g of u.values())if(!g)return;r&&r()},register:h=>(u.set(h,!1),()=>u.delete(h))}),[n,u,r]);return a&&m&&(p={...p}),d.useMemo(()=>{u.forEach((h,g)=>u.set(g,!1))},[n]),d.useEffect(()=>{!n&&!u.size&&r&&r()},[n]),i==="popLayout"&&(e=o.jsx(FUe,{isPresent:n,anchorX:l,root:c,children:e})),o.jsx(n5.Provider,{value:p,children:e})};function BUe(){return new Map}function tde(e=!0){const t=d.useContext(n5);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=d.useId();d.useEffect(()=>{if(e)return s(a)},[e]);const i=d.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,i]:[!0]}const oC=e=>e.key||"";function _q(e){const t=[];return d.Children.forEach(e,n=>{d.isValidElement(n)&&t.push(n)}),t}const Ye=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:i=!1,anchorX:l="left",root:c})=>{const[u,f]=tde(i),m=d.useMemo(()=>_q(e),[e]),p=i&&!u?[]:m.map(oC),h=d.useRef(!0),g=d.useRef(m),y=WO(()=>new Map),[x,v]=d.useState(m),[b,_]=d.useState(m);zO(()=>{h.current=!1,g.current=m;for(let S=0;S<b.length;S++){const E=oC(b[S]);p.includes(E)?y.delete(E):y.get(E)!==!0&&y.set(E,!1)}},[b,p.length,p.join("-")]);const w=[];if(m!==x){let S=[...m];for(let E=0;E<b.length;E++){const k=b[E],M=oC(k);p.includes(M)||(S.splice(E,0,k),w.push(k))}return a==="wait"&&w.length&&(S=w),_(_q(S)),v(m),null}const{forceRender:C}=d.useContext(g1);return o.jsx(o.Fragment,{children:b.map(S=>{const E=oC(S),k=i&&!u?!1:m===b||p.includes(E),M=()=>{if(y.has(E))y.set(E,!0);else return;let j=!0;y.forEach(R=>{R||(j=!1)}),j&&(C?.(),_(g.current),i&&f?.(),r&&r())};return o.jsx(UUe,{isPresent:k,initial:!h.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,root:c,onExitComplete:k?void 0:M,anchorX:l,children:S},E)})})},$Ue=d.createContext(null);function VUe(){const e=d.useRef(!1);return zO(()=>(e.current=!0,()=>{e.current=!1}),[]),e}function WUe(){const e=VUe(),[t,n]=d.useState(0),r=d.useCallback(()=>{e.current&&n(t+1)},[t]);return[d.useCallback(()=>_r.postRender(r),[r]),t]}const HUe=e=>!e.isLayoutDirty&&e.willUpdate(!1);function wq(){const e=new Set,t=new WeakMap,n=()=>e.forEach(HUe);return{add:r=>{e.add(r),t.set(r,r.addEventListener("willUpdate",n))},remove:r=>{e.delete(r);const s=t.get(r);s&&(s(),t.delete(r)),n()},dirty:n}}const nde=e=>e===!0,zUe=e=>nde(e===!0)||e==="id",Ec=({children:e,id:t,inherit:n=!0})=>{const r=d.useContext(g1),s=d.useContext($Ue),[a,i]=WUe(),l=d.useRef(null),c=r.id||s;l.current===null&&(zUe(n)&&c&&(t=t?c+"-"+t:c),l.current={id:t,group:nde(n)&&r.group||wq()});const u=d.useMemo(()=>({...l.current,forceRender:a}),[i]);return o.jsx(g1.Provider,{value:u,children:e})},rde=d.createContext({strict:!1}),Cq={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Ig={};for(const e in Cq)Ig[e]={isEnabled:t=>Cq[e].some(n=>!!t[n])};function GUe(e){for(const t in e)Ig[t]={...Ig[t],...e[t]}}const qUe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function aE(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||qUe.has(e)}let sde=e=>!aE(e);function KUe(e){typeof e=="function"&&(sde=t=>t.startsWith("on")?!aE(t):e(t))}try{KUe(require("@emotion/is-prop-valid").default)}catch{}function YUe(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(sde(s)||n===!0&&aE(s)||!t&&!aE(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const r5=d.createContext({});function s5(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function b1(e){return typeof e=="string"||Array.isArray(e)}const yD=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],xD=["initial",...yD];function a5(e){return s5(e.animate)||xD.some(t=>b1(e[t]))}function ade(e){return!!(a5(e)||e.variants)}function QUe(e,t){if(a5(e)){const{initial:n,animate:r}=e;return{initial:n===!1||b1(n)?n:void 0,animate:b1(r)?r:void 0}}return e.inherit!==!1?t:{}}function XUe(e){const{initial:t,animate:n}=QUe(e,d.useContext(r5));return d.useMemo(()=>({initial:t,animate:n}),[Sq(t),Sq(n)])}function Sq(e){return Array.isArray(e)?e.join(" "):e}const _1={};function ZUe(e){for(const t in e)_1[t]=e[t],JO(t)&&(_1[t].isCSSVariable=!0)}function ode(e,{layout:t,layoutId:n}){return Hy.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!_1[e]||e==="opacity")}const JUe={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eBe=Wy.length;function tBe(e,t,n){let r="",s=!0;for(let a=0;a<eBe;a++){const i=Wy[a],l=e[i];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(i.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const u=Yue(l,dD[i]);if(!c){s=!1;const f=JUe[i]||i;r+=`${f}(${u}) `}n&&(t[i]=u)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function vD(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let i=!1,l=!1;for(const c in t){const u=t[c];if(Hy.has(c)){i=!0;continue}else if(JO(c)){s[c]=u;continue}else{const f=Yue(u,dD[c]);c.startsWith("origin")?(l=!0,a[c]=f):r[c]=f}}if(t.transform||(i||n?r.transform=tBe(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:u="50%",originZ:f=0}=a;r.transformOrigin=`${c} ${u} ${f}`}}const bD=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function ide(e,t,n){for(const r in t)!Ts(t[r])&&!ode(r,n)&&(e[r]=t[r])}function nBe({transformTemplate:e},t){return d.useMemo(()=>{const n=bD();return vD(n,t,e),Object.assign({},n.vars,n.style)},[t])}function rBe(e,t){const n=e.style||{},r={};return ide(r,n,e),Object.assign(r,nBe(e,t)),r}function sBe(e,t){const n={},r=rBe(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const aBe={offset:"stroke-dashoffset",array:"stroke-dasharray"},oBe={offset:"strokeDashoffset",array:"strokeDasharray"};function iBe(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?aBe:oBe;e[a.offset]=Bt.transform(-r);const i=Bt.transform(t),l=Bt.transform(n);e[a.array]=`${i} ${l}`}function lde(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:a=1,pathOffset:i=0,...l},c,u,f){if(vD(e,l,u),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:m,style:p}=e;m.transform&&(p.transform=m.transform,delete m.transform),(p.transform||m.transformOrigin)&&(p.transformOrigin=m.transformOrigin??"50% 50%",delete m.transformOrigin),p.transform&&(p.transformBox=f?.transformBox??"fill-box",delete m.transformBox),t!==void 0&&(m.x=t),n!==void 0&&(m.y=n),r!==void 0&&(m.scale=r),s!==void 0&&iBe(m,s,a,i,!1)}const cde=()=>({...bD(),attrs:{}}),ude=e=>typeof e=="string"&&e.toLowerCase()==="svg";function lBe(e,t,n,r){const s=d.useMemo(()=>{const a=cde();return lde(a,t,ude(r),e.transformTemplate,e.style),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};ide(a,e.style,e),s.style={...a,...s.style}}return s}const cBe=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function _D(e){return typeof e!="string"||e.includes("-")?!1:!!(cBe.indexOf(e)>-1||/[A-Z]/u.test(e))}function uBe(e,t,n,{latestValues:r},s,a=!1){const l=(_D(e)?lBe:sBe)(t,r,s,e),c=YUe(t,typeof e=="string",a),u=e!==d.Fragment?{...c,...l,ref:n}:{},{children:f}=t,m=d.useMemo(()=>Ts(f)?f.get():f,[f]);return d.createElement(e,{...u,children:m})}function Eq(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function wD(e,t,n,r){if(typeof t=="function"){const[s,a]=Eq(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=Eq(r);t=t(n!==void 0?n:e.custom,s,a)}return t}function ZS(e){return Ts(e)?e.get():e}function dBe({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:fBe(n,r,s,e),renderState:t()}}function fBe(e,t,n,r){const s={},a=r(e,{});for(const p in a)s[p]=ZS(a[p]);let{initial:i,animate:l}=e;const c=a5(e),u=ade(e);t&&u&&!c&&e.inherit!==!1&&(i===void 0&&(i=t.initial),l===void 0&&(l=t.animate));let f=n?n.initial===!1:!1;f=f||i===!1;const m=f?l:i;if(m&&typeof m!="boolean"&&!s5(m)){const p=Array.isArray(m)?m:[m];for(let h=0;h<p.length;h++){const g=wD(e,p[h]);if(g){const{transitionEnd:y,transition:x,...v}=g;for(const b in v){let _=v[b];if(Array.isArray(_)){const w=f?_.length-1:0;_=_[w]}_!==null&&(s[b]=_)}for(const b in y)s[b]=y[b]}}}return s}const dde=e=>(t,n)=>{const r=d.useContext(r5),s=d.useContext(n5),a=()=>dBe(e,t,r,s);return n?a():WO(a)};function CD(e,t,n){const{style:r}=e,s={};for(const a in r)(Ts(r[a])||t.style&&Ts(t.style[a])||ode(a,e)||n?.getValue(a)?.liveStyle!==void 0)&&(s[a]=r[a]);return s}const mBe=dde({scrapeMotionValuesFromProps:CD,createRenderState:bD});function fde(e,t,n){const r=CD(e,t,n);for(const s in e)if(Ts(e[s])||Ts(t[s])){const a=Wy.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}const pBe=dde({scrapeMotionValuesFromProps:fde,createRenderState:cde}),hBe=Symbol.for("motionComponentSymbol");function Ph(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function gBe(e,t,n){return d.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ph(n)&&(n.current=r))},[t])}const SD=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),yBe="framerAppearId",mde="data-"+SD(yBe),pde=d.createContext({});function xBe(e,t,n,r,s){const{visualElement:a}=d.useContext(r5),i=d.useContext(rde),l=d.useContext(n5),c=d.useContext(gD).reducedMotion,u=d.useRef(null);r=r||i.renderer,!u.current&&r&&(u.current=r(e,{visualState:t,parent:a,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const f=u.current,m=d.useContext(pde);f&&!f.projection&&s&&(f.type==="html"||f.type==="svg")&&vBe(u.current,n,s,m);const p=d.useRef(!1);d.useInsertionEffect(()=>{f&&p.current&&f.update(n,l)});const h=n[mde],g=d.useRef(!!h&&!window.MotionHandoffIsComplete?.(h)&&window.MotionHasOptimisedAnimation?.(h));return zO(()=>{f&&(p.current=!0,window.MotionIsMounted=!0,f.updateFeatures(),f.scheduleRenderMicrotask(),g.current&&f.animationState&&f.animationState.animateChanges())}),d.useEffect(()=>{f&&(!g.current&&f.animationState&&f.animationState.animateChanges(),g.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(h)}),g.current=!1),f.enteringChildren=void 0)}),f}function vBe(e,t,n,r){const{layoutId:s,layout:a,drag:i,dragConstraints:l,layoutScroll:c,layoutRoot:u,layoutCrossfade:f}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:hde(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!i||l&&Ph(l),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,crossfade:f,layoutScroll:c,layoutRoot:u})}function hde(e){if(e)return e.options.allowProjection!==!1?e.projection:hde(e.parent)}function VN(e,{forwardMotionProps:t=!1}={},n,r){n&&GUe(n);const s=_D(e)?pBe:mBe;function a(l,c){let u;const f={...d.useContext(gD),...l,layoutId:bBe(l)},{isStatic:m}=f,p=XUe(l),h=s(l,m);if(!m&&HO){_Be();const g=wBe(f);u=g.MeasureLayout,p.visualElement=xBe(e,h,f,r,g.ProjectionNode)}return o.jsxs(r5.Provider,{value:p,children:[u&&p.visualElement?o.jsx(u,{visualElement:p.visualElement,...f}):null,uBe(e,l,gBe(h,p.visualElement,c),h,m,t)]})}a.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const i=d.forwardRef(a);return i[hBe]=e,i}function bBe({layoutId:e}){const t=d.useContext(g1).id;return t&&e!==void 0?t+"-"+e:e}function _Be(e,t){d.useContext(rde).strict}function wBe(e){const{drag:t,layout:n}=Ig;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function CBe(e,t){if(typeof Proxy>"u")return VN;const n=new Map,r=(a,i)=>VN(a,i,e,t),s=(a,i)=>r(a,i);return new Proxy(s,{get:(a,i)=>i==="create"?r:(n.has(i)||n.set(i,VN(i,void 0,e,t)),n.get(i))})}function gde({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function SBe({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function EBe(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function WN(e){return e===void 0||e===1}function mP({scale:e,scaleX:t,scaleY:n}){return!WN(e)||!WN(t)||!WN(n)}function Xf(e){return mP(e)||yde(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function yde(e){return Mq(e.x)||Mq(e.y)}function Mq(e){return e&&e!=="0%"}function oE(e,t,n){const r=e-n,s=t*r;return n+s}function kq(e,t,n,r,s){return s!==void 0&&(e=oE(e,s,r)),oE(e,n,r)+t}function pP(e,t=0,n=1,r,s){e.min=kq(e.min,t,n,r,s),e.max=kq(e.max,t,n,r,s)}function xde(e,{x:t,y:n}){pP(e.x,t.translate,t.scale,t.originPoint),pP(e.y,n.translate,n.scale,n.originPoint)}const Tq=.999999999999,Nq=1.0000000000001;function MBe(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,i;for(let l=0;l<s;l++){a=n[l],i=a.projectionDelta;const{visualElement:c}=a.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&Oh(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),i&&(t.x*=i.x.scale,t.y*=i.y.scale,xde(e,i)),r&&Xf(a.latestValues)&&Oh(e,a.latestValues))}t.x<Nq&&t.x>Tq&&(t.x=1),t.y<Nq&&t.y>Tq&&(t.y=1)}function Lh(e,t){e.min=e.min+t,e.max=e.max+t}function jq(e,t,n,r,s=.5){const a=Er(e.min,e.max,s);pP(e,t,n,a,r)}function Oh(e,t){jq(e.x,t.x,t.scaleX,t.scale,t.originX),jq(e.y,t.y,t.scaleY,t.scale,t.originY)}function vde(e,t){return gde(EBe(e.getBoundingClientRect(),t))}function kBe(e,t,n){const r=vde(e,n),{scroll:s}=t;return s&&(Lh(r.x,s.offset.x),Lh(r.y,s.offset.y)),r}const Aq=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dh=()=>({x:Aq(),y:Aq()}),Iq=()=>({min:0,max:0}),Ir=()=>({x:Iq(),y:Iq()}),iE={current:null},ED={current:!1};function bde(){if(ED.current=!0,!!HO)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>iE.current=e.matches;e.addEventListener("change",t),t()}else iE.current=!1}const w1=new WeakMap;function TBe(e,t,n){for(const r in t){const s=t[r],a=n[r];if(Ts(s))e.addValue(r,s);else if(Ts(a))e.addValue(r,Ag(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const i=e.getValue(r);i.liveStyle===!0?i.jump(s):i.hasAnimated||i.set(s)}else{const i=e.getStaticValue(r);e.addValue(r,Ag(i!==void 0?i:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const Rq=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class _de{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:i},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=lD,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const p=io.now();this.renderScheduledAt<p&&(this.renderScheduledAt=p,_r.render(this.render,!1,!0))};const{latestValues:c,renderState:u}=i;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=u,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=l,this.blockInitialAnimation=!!a,this.isControllingVariants=a5(n),this.isVariantNode=ade(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(n,{},this);for(const p in m){const h=m[p];c[p]!==void 0&&Ts(h)&&h.set(c[p])}}mount(t){this.current=t,w1.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),ED.current||bde(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:iE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Bd(this.notifyUpdate),Bd(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Hy.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&_r.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let a;window.MotionCheckAppearSync&&(a=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a&&a(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ig){const n=Ig[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ir()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<Rq.length;r++){const s=Rq[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,i=t[a];i&&(this.propEventSubscriptions[s]=this.on(s,i))}this.prevMotionValues=TBe(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=Ag(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(lue(r)||uue(r))?r=parseFloat(r):!OUe(r)&&$d.test(n)&&(r=Kue(t,n)),this.setBaseTarget(t,Ts(r)?r.get():r)),Ts(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const a=wD(this.props,n,this.presenceContext?.custom);a&&(r=a[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Ts(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new YO),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){mD.render(this.render)}}class wde extends _de{constructor(){super(...arguments),this.KeyframeResolver=MUe}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Ts(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function Cde(e,{style:t,vars:n},r,s){const a=e.style;let i;for(i in t)a[i]=t[i];s?.applyProjectionStyles(a,r);for(i in n)a.setProperty(i,n[i])}function NBe(e){return window.getComputedStyle(e)}class Sde extends wde{constructor(){super(...arguments),this.type="html",this.renderInstance=Cde}readValueFromInstance(t,n){if(Hy.has(n))return this.projection?.isProjecting?oP(n):WFe(t,n);{const r=NBe(t),s=(JO(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return vde(t,n)}build(t,n,r){vD(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return CD(t,n,r)}}const Ede=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function jBe(e,t,n,r){Cde(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Ede.has(s)?s:SD(s),t.attrs[s])}class Mde extends wde{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ir}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Hy.has(n)){const r=que(n);return r&&r.default||0}return n=Ede.has(n)?n:SD(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return fde(t,n,r)}build(t,n,r){lde(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){jBe(t,n,r,s)}mount(t){this.isSVGTag=ude(t.tagName),super.mount(t)}}const ABe=(e,t)=>_D(e)?new Mde(t):new Sde(t,{allowProjection:e!==d.Fragment});function eg(e,t,n){const r=e.getProps();return wD(r,t,n!==void 0?n:r.custom,e)}const hP=e=>Array.isArray(e);function IBe(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,Ag(n))}function RBe(e){return hP(e)?e[e.length-1]||0:e}function PBe(e,t){const n=eg(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const i in a){const l=RBe(a[i]);IBe(e,i,l)}}function LBe(e){return!!(Ts(e)&&e.add)}function gP(e,t){const n=e.getValue("willChange");if(LBe(n))return n.add(t);if(!n&&wu.WillChange){const r=new wu.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function kde(e){return e.props[mde]}const OBe=e=>e!==null;function DBe(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(OBe),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[a]}const FBe={type:"spring",stiffness:500,damping:25,restSpeed:10},UBe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),BBe={type:"keyframes",duration:.8},$Be={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},VBe=(e,{keyframes:t})=>t.length>2?BBe:Hy.has(e)?e.startsWith("scale")?UBe(t[1]):FBe:$Be;function WBe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:i,repeatDelay:l,from:c,elapsed:u,...f}){return!!Object.keys(f).length}const MD=(e,t,n,r={},s,a)=>i=>{const l=uD(r,e)||{},c=l.delay||r.delay||0;let{elapsed:u=0}=r;u=u-Zi(c);const f={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-u,onUpdate:p=>{t.set(p),l.onUpdate&&l.onUpdate(p)},onComplete:()=>{i(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:a?void 0:s};WBe(l)||Object.assign(f,VBe(e,f)),f.duration&&(f.duration=Zi(f.duration)),f.repeatDelay&&(f.repeatDelay=Zi(f.repeatDelay)),f.from!==void 0&&(f.keyframes[0]=f.from);let m=!1;if((f.type===!1||f.duration===0&&!f.repeatDelay)&&(dP(f),f.delay===0&&(m=!0)),(wu.instantAnimations||wu.skipAnimations)&&(m=!0,dP(f),f.delay=0),f.allowFlatten=!l.type&&!l.ease,m&&!a&&t.get()!==void 0){const p=DBe(f.keyframes,l);if(p!==void 0){_r.update(()=>{f.onUpdate(p),f.onComplete()});return}}return l.isSync?new iD(f):new fUe(f)};function HBe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function kD(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:i,...l}=t;r&&(a=r);const c=[],u=s&&e.animationState&&e.animationState.getState()[s];for(const f in l){const m=e.getValue(f,e.latestValues[f]??null),p=l[f];if(p===void 0||u&&HBe(u,f))continue;const h={delay:n,...uD(a||{},f)},g=m.get();if(g!==void 0&&!m.isAnimating&&!Array.isArray(p)&&p===g&&!h.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const v=kde(e);if(v){const b=window.MotionHandoffAnimation(v,f,_r);b!==null&&(h.startTime=b,y=!0)}}gP(e,f),m.start(MD(f,m,p,e.shouldReduceMotion&&Hue.has(f)?{type:!1}:h,e,y));const x=m.animation;x&&c.push(x)}return i&&Promise.all(c).then(()=>{_r.update(()=>{i&&PBe(e,i)})}),c}function Tde(e,t,n,r=0,s=1){const a=Array.from(e).sort((u,f)=>u.sortNodePosition(f)).indexOf(t),i=e.size,l=(i-1)*r;return typeof n=="function"?n(a,i):s===1?a*r:l-a*r}function yP(e,t,n={}){const r=eg(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(kD(e,r,n)):()=>Promise.resolve(),i=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:m}=s;return zBe(e,t,c,u,f,m,n)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[a,i]:[i,a];return c().then(()=>u())}else return Promise.all([a(),i(n.delay)])}function zBe(e,t,n=0,r=0,s=0,a=1,i){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(yP(c,t,{...i,delay:n+(typeof r=="function"?0:r)+Tde(e.variantChildren,c,r,s,a)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function GBe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>yP(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=yP(e,t,n);else{const s=typeof t=="function"?eg(e,t,n.custom):t;r=Promise.all(kD(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Nde(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const qBe=xD.length;function jde(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?jde(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<qBe;n++){const r=xD[n],s=e.props[r];(b1(s)||s===!1)&&(t[r]=s)}return t}const KBe=[...yD].reverse(),YBe=yD.length;function QBe(e){return t=>Promise.all(t.map(({animation:n,options:r})=>GBe(e,n,r)))}function XBe(e){let t=QBe(e),n=Pq(),r=!0;const s=c=>(u,f)=>{const m=eg(e,f,c==="exit"?e.presenceContext?.custom:void 0);if(m){const{transition:p,transitionEnd:h,...g}=m;u={...u,...g,...h}}return u};function a(c){t=c(e)}function i(c){const{props:u}=e,f=jde(e.parent)||{},m=[],p=new Set;let h={},g=1/0;for(let x=0;x<YBe;x++){const v=KBe[x],b=n[v],_=u[v]!==void 0?u[v]:f[v],w=b1(_),C=v===c?b.isActive:null;C===!1&&(g=x);let S=_===f[v]&&_!==u[v]&&w;if(S&&r&&e.manuallyAnimateOnMount&&(S=!1),b.protectedKeys={...h},!b.isActive&&C===null||!_&&!b.prevProp||s5(_)||typeof _=="boolean")continue;const E=ZBe(b.prevProp,_);let k=E||v===c&&b.isActive&&!S&&w||x>g&&w,M=!1;const j=Array.isArray(_)?_:[_];let R=j.reduce(s(v),{});C===!1&&(R={});const{prevResolvedValues:O={}}=b,D={...O,...R},P=N=>{k=!0,p.has(N)&&(M=!0,p.delete(N)),b.needsAnimating[N]=!0;const L=e.getValue(N);L&&(L.liveStyle=!1)};for(const N in D){const L=R[N],U=O[N];if(h.hasOwnProperty(N))continue;let $=!1;hP(L)&&hP(U)?$=!Nde(L,U):$=L!==U,$?L!=null?P(N):p.add(N):L!==void 0&&p.has(N)?P(N):b.protectedKeys[N]=!0}b.prevProp=_,b.prevResolvedValues=R,b.isActive&&(h={...h,...R}),r&&e.blockInitialAnimation&&(k=!1);const A=S&&E;k&&(!A||M)&&m.push(...j.map(N=>{const L={type:v};if(typeof N=="string"&&r&&!A&&e.manuallyAnimateOnMount&&e.parent){const{parent:U}=e,$=eg(U,N);if(U.enteringChildren&&$){const{delayChildren:V}=$.transition||{};L.delay=Tde(U.enteringChildren,e,V)}}return{animation:N,options:L}}))}if(p.size){const x={};if(typeof u.initial!="boolean"){const v=eg(e,Array.isArray(u.initial)?u.initial[0]:u.initial);v&&v.transition&&(x.transition=v.transition)}p.forEach(v=>{const b=e.getBaseTarget(v),_=e.getValue(v);_&&(_.liveStyle=!0),x[v]=b??null}),m.push({animation:x})}let y=!!m.length;return r&&(u.initial===!1||u.initial===u.animate)&&!e.manuallyAnimateOnMount&&(y=!1),r=!1,y?t(m):Promise.resolve()}function l(c,u){if(n[c].isActive===u)return Promise.resolve();e.variantChildren?.forEach(m=>m.animationState?.setActive(c,u)),n[c].isActive=u;const f=i(c);for(const m in n)n[m].protectedKeys={};return f}return{animateChanges:i,setActive:l,setAnimateFunction:a,getState:()=>n,reset:()=>{n=Pq(),r=!0}}}function ZBe(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Nde(t,e):!1}function Rf(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Pq(){return{animate:Rf(!0),whileInView:Rf(),whileHover:Rf(),whileTap:Rf(),whileDrag:Rf(),whileFocus:Rf(),exit:Rf()}}class lf{constructor(t){this.isMounted=!1,this.node=t}update(){}}class JBe extends lf{constructor(t){super(t),t.animationState||(t.animationState=XBe(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();s5(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let e$e=0;class t$e extends lf{constructor(){super(...arguments),this.id=e$e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const n$e={animation:{Feature:JBe},exit:{Feature:t$e}};function C1(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function t_(e){return{point:{x:e.pageX,y:e.pageY}}}const r$e=e=>t=>pD(t)&&e(t,t_(t));function S0(e,t,n,r){return C1(e,t,r$e(n),r)}const Ade=1e-4,s$e=1-Ade,a$e=1+Ade,Ide=.01,o$e=0-Ide,i$e=0+Ide;function La(e){return e.max-e.min}function l$e(e,t,n){return Math.abs(e-t)<=n}function Lq(e,t,n,r=.5){e.origin=r,e.originPoint=Er(t.min,t.max,e.origin),e.scale=La(n)/La(t),e.translate=Er(n.min,n.max,e.origin)-e.originPoint,(e.scale>=s$e&&e.scale<=a$e||isNaN(e.scale))&&(e.scale=1),(e.translate>=o$e&&e.translate<=i$e||isNaN(e.translate))&&(e.translate=0)}function E0(e,t,n,r){Lq(e.x,t.x,n.x,r?r.originX:void 0),Lq(e.y,t.y,n.y,r?r.originY:void 0)}function Oq(e,t,n){e.min=n.min+t.min,e.max=e.min+La(t)}function c$e(e,t,n){Oq(e.x,t.x,n.x),Oq(e.y,t.y,n.y)}function Dq(e,t,n){e.min=t.min-n.min,e.max=e.min+La(t)}function M0(e,t,n){Dq(e.x,t.x,n.x),Dq(e.y,t.y,n.y)}function ci(e){return[e("x"),e("y")]}const Rde=({current:e})=>e?e.ownerDocument.defaultView:null,Fq=(e,t)=>Math.abs(e-t);function u$e(e,t){const n=Fq(e.x,t.x),r=Fq(e.y,t.y);return Math.sqrt(n**2+r**2)}class Pde{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:a=!1,distanceThreshold:i=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=zN(this.lastMoveEventInfo,this.history),h=this.startEvent!==null,g=u$e(p.offset,{x:0,y:0})>=this.distanceThreshold;if(!h&&!g)return;const{point:y}=p,{timestamp:x}=$s;this.history.push({...y,timestamp:x});const{onStart:v,onMove:b}=this.handlers;h||(v&&v(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),b&&b(this.lastMoveEvent,p)},this.handlePointerMove=(p,h)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=HN(h,this.transformPagePoint),_r.update(this.updatePoint,!0)},this.handlePointerUp=(p,h)=>{this.end();const{onEnd:g,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const v=zN(p.type==="pointercancel"?this.lastMoveEventInfo:HN(h,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,v),y&&y(p,v)},!pD(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=i,this.contextWindow=s||window;const l=t_(t),c=HN(l,this.transformPagePoint),{point:u}=c,{timestamp:f}=$s;this.history=[{...u,timestamp:f}];const{onSessionStart:m}=n;m&&m(t,zN(c,this.history)),this.removeListeners=Jb(S0(this.contextWindow,"pointermove",this.handlePointerMove),S0(this.contextWindow,"pointerup",this.handlePointerUp),S0(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Bd(this.updatePoint)}}function HN(e,t){return t?{point:t(e.point)}:e}function Uq(e,t){return{x:e.x-t.x,y:e.y-t.y}}function zN({point:e},t){return{point:e,delta:Uq(e,Lde(t)),offset:Uq(e,d$e(t)),velocity:f$e(t,.1)}}function d$e(e){return e[0]}function Lde(e){return e[e.length-1]}function f$e(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Lde(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Zi(t)));)n--;if(!r)return{x:0,y:0};const a=Yl(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const i={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return i.x===1/0&&(i.x=0),i.y===1/0&&(i.y=0),i}function m$e(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Er(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Er(n,e,r.max):Math.min(e,n)),e}function Bq(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function p$e(e,{top:t,left:n,bottom:r,right:s}){return{x:Bq(e.x,n,s),y:Bq(e.y,t,r)}}function $q(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function h$e(e,t){return{x:$q(e.x,t.x),y:$q(e.y,t.y)}}function g$e(e,t){let n=.5;const r=La(e),s=La(t);return s>r?n=jg(t.min,t.max-r,e.min):r>s&&(n=jg(e.min,e.max-s,t.min)),_u(0,1,n)}function y$e(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const xP=.35;function x$e(e=xP){return e===!1?e=0:e===!0&&(e=xP),{x:Vq(e,"left","right"),y:Vq(e,"top","bottom")}}function Vq(e,t,n){return{min:Wq(e,t),max:Wq(e,n)}}function Wq(e,t){return typeof e=="number"?e:e[t]||0}const v$e=new WeakMap;class b$e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ir(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const a=m=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(t_(m).point)},i=(m,p)=>{const{drag:h,dragPropagation:g,onDragStart:y}=this.getProps();if(h&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=NUe(h),!this.openDragLock))return;this.latestPointerEvent=m,this.latestPanInfo=p,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ci(v=>{let b=this.getAxisMotionValue(v).get()||0;if(Ql.test(b)){const{projection:_}=this.visualElement;if(_&&_.layout){const w=_.layout.layoutBox[v];w&&(b=La(w)*(parseFloat(b)/100))}}this.originPoint[v]=b}),y&&_r.postRender(()=>y(m,p)),gP(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p;const{dragPropagation:h,dragDirectionLock:g,onDirectionLock:y,onDrag:x}=this.getProps();if(!h&&!this.openDragLock)return;const{offset:v}=p;if(g&&this.currentDirection===null){this.currentDirection=_$e(v),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",p.point,v),this.updateAxis("y",p.point,v),this.visualElement.render(),x&&x(m,p)},c=(m,p)=>{this.latestPointerEvent=m,this.latestPanInfo=p,this.stop(m,p),this.latestPointerEvent=null,this.latestPanInfo=null},u=()=>ci(m=>this.getAnimationState(m)==="paused"&&this.getAxisMotionValue(m).animation?.play()),{dragSnapToOrigin:f}=this.getProps();this.panSession=new Pde(t,{onSessionStart:a,onStart:i,onMove:l,onSessionEnd:c,resumeAnimation:u},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:f,distanceThreshold:r,contextWindow:Rde(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,a=this.isDragging;if(this.cancel(),!a||!s||!r)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:l}=this.getProps();l&&_r.postRender(()=>l(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!iC(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let i=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(i=m$e(i,this.constraints[t],this.elastic[t])),a.set(i)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Ph(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=p$e(r.layoutBox,t):this.constraints=!1,this.elastic=x$e(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ci(a=>{this.constraints!==!1&&this.getAxisMotionValue(a)&&(this.constraints[a]=y$e(r.layoutBox[a],this.constraints[a]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ph(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=kBe(r,s.root,this.visualElement.getTransformPagePoint());let i=h$e(s.layout.layoutBox,a);if(n){const l=n(SBe(i));this.hasMutatedConstraints=!!l,l&&(i=gde(l))}return i}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:i,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=ci(f=>{if(!iC(f,n,this.currentDirection))return;let m=c&&c[f]||{};i&&(m={min:0,max:0});const p=s?200:1e6,h=s?40:1e7,g={type:"inertia",velocity:r?t[f]:0,bounceStiffness:p,bounceDamping:h,timeConstant:750,restDelta:1,restSpeed:10,...a,...m};return this.startAxisValueAnimation(f,g)});return Promise.all(u).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return gP(this.visualElement,t),r.start(MD(t,r,0,n,this.visualElement,!1))}stopAnimation(){ci(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ci(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ci(n=>{const{drag:r}=this.getProps();if(!iC(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:i,max:l}=s.layout.layoutBox[n];a.set(t[n]-Er(i,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ph(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ci(i=>{const l=this.getAxisMotionValue(i);if(l&&this.constraints!==!1){const c=l.get();s[i]=g$e({min:c,max:c},this.constraints[i])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ci(i=>{if(!iC(i,t,null))return;const l=this.getAxisMotionValue(i),{min:c,max:u}=this.constraints[i];l.set(Er(c,u,s[i]))})}addListeners(){if(!this.visualElement.current)return;v$e.set(this.visualElement,this);const t=this.visualElement.current,n=S0(t,"pointerdown",c=>{const{drag:u,dragListener:f=!0}=this.getProps();u&&f&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();Ph(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),_r.read(r);const i=C1(window,"resize",()=>this.scalePositionWithinConstraints()),l=s.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(ci(f=>{const m=this.getAxisMotionValue(f);m&&(this.originPoint[f]+=c[f].translate,m.set(m.get()+c[f].translate))}),this.visualElement.render())});return()=>{i(),n(),a(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:i=xP,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:i,dragMomentum:l}}}function iC(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function _$e(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class w$e extends lf{constructor(t){super(t),this.removeGroupControls=wi,this.removeListeners=wi,this.controls=new b$e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||wi}unmount(){this.removeGroupControls(),this.removeListeners()}}const Hq=e=>(t,n)=>{e&&_r.postRender(()=>e(t,n))};class C$e extends lf{constructor(){super(...arguments),this.removePointerDownListener=wi}onPointerDown(t){this.session=new Pde(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Rde(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:Hq(t),onStart:Hq(n),onMove:r,onEnd:(a,i)=>{delete this.session,s&&_r.postRender(()=>s(a,i))}}}mount(){this.removePointerDownListener=S0(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const JS={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function zq(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const av={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Bt.test(e))e=parseFloat(e);else return e;const n=zq(e,t.target.x),r=zq(e,t.target.y);return`${n}% ${r}%`}},S$e={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=$d.parse(e);if(s.length>5)return r;const a=$d.createTransformer(e),i=typeof s[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;s[0+i]/=l,s[1+i]/=c;const u=Er(l,c,.5);return typeof s[2+i]=="number"&&(s[2+i]/=u),typeof s[3+i]=="number"&&(s[3+i]/=u),a(s)}};let GN=!1;class E$e extends d.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;ZUe(M$e),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),GN&&a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),JS.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,{projection:i}=r;return i&&(i.isPresent=a,GN=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?i.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?i.promote():i.relegate()||_r.postRender(()=>{const l=i.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),mD.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;GN=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Ode(e){const[t,n]=tde(),r=d.useContext(g1);return o.jsx(E$e,{...e,layoutGroup:r,switchLayoutGroup:d.useContext(pde),isPresent:t,safeToRemove:n})}const M$e={borderRadius:{...av,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:av,borderTopRightRadius:av,borderBottomLeftRadius:av,borderBottomRightRadius:av,boxShadow:S$e};function Dde(e,t,n){const r=Ts(e)?e:Ag(e);return r.start(MD("",r,t,n)),r.animation}const k$e=(e,t)=>e.depth-t.depth;class T$e{constructor(){this.children=[],this.isDirty=!1}add(t){GO(this.children,t),this.isDirty=!0}remove(t){Zb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(k$e),this.isDirty=!1,this.children.forEach(t)}}function N$e(e,t){const n=io.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(Bd(r),e(a-t))};return _r.setup(r,!0),()=>Bd(r)}const Fde=["TopLeft","TopRight","BottomLeft","BottomRight"],j$e=Fde.length,Gq=e=>typeof e=="string"?parseFloat(e):e,qq=e=>typeof e=="number"||Bt.test(e);function A$e(e,t,n,r,s,a){s?(e.opacity=Er(0,n.opacity??1,I$e(r)),e.opacityExit=Er(t.opacity??1,0,R$e(r))):a&&(e.opacity=Er(t.opacity??1,n.opacity??1,r));for(let i=0;i<j$e;i++){const l=`border${Fde[i]}Radius`;let c=Kq(t,l),u=Kq(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||qq(c)===qq(u)?(e[l]=Math.max(Er(Gq(c),Gq(u),r),0),(Ql.test(u)||Ql.test(c))&&(e[l]+="%")):e[l]=u}(t.rotate||n.rotate)&&(e.rotate=Er(t.rotate||0,n.rotate||0,r))}function Kq(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const I$e=Ude(0,.5,yue),R$e=Ude(.5,.95,wi);function Ude(e,t,n){return r=>r<e?0:r>t?1:n(jg(e,t,r))}function Yq(e,t){e.min=t.min,e.max=t.max}function ai(e,t){Yq(e.x,t.x),Yq(e.y,t.y)}function Qq(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function Xq(e,t,n,r,s){return e-=t,e=oE(e,1/n,r),s!==void 0&&(e=oE(e,1/s,r)),e}function P$e(e,t=0,n=1,r=.5,s,a=e,i=e){if(Ql.test(t)&&(t=parseFloat(t),t=Er(i.min,i.max,t/100)-i.min),typeof t!="number")return;let l=Er(a.min,a.max,r);e===a&&(l-=t),e.min=Xq(e.min,t,n,l,s),e.max=Xq(e.max,t,n,l,s)}function Zq(e,t,[n,r,s],a,i){P$e(e,t[n],t[r],t[s],t.scale,a,i)}const L$e=["x","scaleX","originX"],O$e=["y","scaleY","originY"];function Jq(e,t,n,r){Zq(e.x,t,L$e,n?n.x:void 0,r?r.x:void 0),Zq(e.y,t,O$e,n?n.y:void 0,r?r.y:void 0)}function eK(e){return e.translate===0&&e.scale===1}function Bde(e){return eK(e.x)&&eK(e.y)}function tK(e,t){return e.min===t.min&&e.max===t.max}function D$e(e,t){return tK(e.x,t.x)&&tK(e.y,t.y)}function nK(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function $de(e,t){return nK(e.x,t.x)&&nK(e.y,t.y)}function rK(e){return La(e.x)/La(e.y)}function sK(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class F$e{constructor(){this.members=[]}add(t){GO(this.members,t),t.scheduleRender()}remove(t){if(Zb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function U$e(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,i=n?.z||0;if((s||a||i)&&(r=`translate3d(${s}px, ${a}px, ${i}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:u,rotate:f,rotateX:m,rotateY:p,skewX:h,skewY:g}=n;u&&(r=`perspective(${u}px) ${r}`),f&&(r+=`rotate(${f}deg) `),m&&(r+=`rotateX(${m}deg) `),p&&(r+=`rotateY(${p}deg) `),h&&(r+=`skewX(${h}deg) `),g&&(r+=`skewY(${g}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const qN=["","X","Y","Z"],B$e=1e3;let $$e=0;function KN(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Vde(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=kde(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",_r,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Vde(r)}function Wde({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(i={},l=t?.()){this.id=$$e++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(H$e),this.nodes.forEach(K$e),this.nodes.forEach(Y$e),this.nodes.forEach(z$e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=i,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new T$e)}addEventListener(i,l){return this.eventHandlers.has(i)||this.eventHandlers.set(i,new YO),this.eventHandlers.get(i).add(l)}notifyListeners(i,...l){const c=this.eventHandlers.get(i);c&&c.notify(...l)}hasListeners(i){return this.eventHandlers.has(i)}mount(i){if(this.instance)return;this.isSVG=hD(i)&&!ede(i),this.instance=i;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(i),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let f,m=0;const p=()=>this.root.updateBlockedByResize=!1;_r.read(()=>{m=window.innerWidth}),e(i,()=>{const h=window.innerWidth;h!==m&&(m=h,this.root.updateBlockedByResize=!0,f&&f(),f=N$e(p,250),JS.hasAnimatedSinceResize&&(JS.hasAnimatedSinceResize=!1,this.nodes.forEach(iK)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeLayoutChanged:p,layout:h})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const g=this.options.transition||u.getDefaultTransition()||eVe,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=u.getProps(),v=!this.targetLayout||!$de(this.targetLayout,h),b=!m&&p;if(this.options.layoutRoot||this.resumeFrom||b||m&&(v||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const _={...uD(g,"layout"),onPlay:y,onComplete:x};(u.shouldReduceMotion||this.options.layoutRoot)&&(_.delay=0,_.type=!1),this.startAnimation(_),this.setAnimationOrigin(f,b)}else m||iK(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=h})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const i=this.getStack();i&&i.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Bd(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Q$e),this.animationId++)}getTransformTemplate(){const{visualElement:i}=this.options;return i&&i.getProps().transformTemplate}willUpdate(i=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Vde(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let f=0;f<this.path.length;f++){const m=this.path[f];m.shouldResetTransform=!0,m.updateScroll("snapshot"),m.options.layoutRoot&&m.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),i&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(aK);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(oK);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(q$e),this.nodes.forEach(V$e),this.nodes.forEach(W$e)):this.nodes.forEach(oK),this.clearAllSnapshots();const l=io.now();$s.delta=_u(0,1e3/60,l-$s.timestamp),$s.timestamp=l,$s.isProcessing=!0,DN.update.process($s),DN.preRender.process($s),DN.render.process($s),$s.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,mD.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(G$e),this.sharedNodes.forEach(X$e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,_r.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){_r.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!La(this.snapshot.measuredBox.x)&&!La(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const i=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ir(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,i?i.layoutBox:void 0)}updateScroll(i="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===i&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:i,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const i=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Bde(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,f=u!==this.prevTransformTemplateValue;i&&this.instance&&(l||Xf(this.latestValues)||f)&&(s(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(i=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return i&&(c=this.removeTransform(c)),tVe(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:i}=this.options;if(!i)return Ir();const l=i.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(nVe))){const{scroll:u}=this.root;u&&(Lh(l.x,u.offset.x),Lh(l.y,u.offset.y))}return l}removeElementScroll(i){const l=Ir();if(ai(l,i),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:m}=u;u!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&ai(l,i),Lh(l.x,f.offset.x),Lh(l.y,f.offset.y))}return l}applyTransform(i,l=!1){const c=Ir();ai(c,i);for(let u=0;u<this.path.length;u++){const f=this.path[u];!l&&f.options.layoutScroll&&f.scroll&&f!==f.root&&Oh(c,{x:-f.scroll.offset.x,y:-f.scroll.offset.y}),Xf(f.latestValues)&&Oh(c,f.latestValues)}return Xf(this.latestValues)&&Oh(c,this.latestValues),c}removeTransform(i){const l=Ir();ai(l,i);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!Xf(u.latestValues))continue;mP(u.latestValues)&&u.updateSnapshot();const f=Ir(),m=u.measurePageBox();ai(f,m),Jq(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,f)}return Xf(this.latestValues)&&Jq(l,this.latestValues),l}setTargetDelta(i){this.targetDelta=i,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(i){this.options={...this.options,...i,crossfade:i.crossfade!==void 0?i.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$s.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(i=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(i||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=$s.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ir(),this.relativeTargetOrigin=Ir(),M0(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=Ir(),this.targetWithTransforms=Ir()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),c$e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ai(this.target,this.layout.layoutBox),xde(this.target,this.targetDelta)):ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ir(),this.relativeTargetOrigin=Ir(),M0(this.relativeTargetOrigin,this.target,p.target),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||mP(this.parent.latestValues)||yde(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const i=this.getLead(),l=!!this.resumingFrom||this!==i;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===$s.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;ai(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,p=this.treeScale.y;MBe(this.layoutCorrected,this.treeScale,this.path,l),i.layout&&!i.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(i.target=i.layout.layoutBox,i.targetWithTransforms=Ir());const{target:h}=i;if(!h){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Qq(this.prevProjectionDelta.x,this.projectionDelta.x),Qq(this.prevProjectionDelta.y,this.projectionDelta.y)),E0(this.projectionDelta,this.layoutCorrected,h,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==p||!sK(this.projectionDelta.x,this.prevProjectionDelta.x)||!sK(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",h))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(i=!0){if(this.options.visualElement?.scheduleRender(),i){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dh(),this.projectionDelta=Dh(),this.projectionDeltaWithTransform=Dh()}setAnimationOrigin(i,l=!1){const c=this.snapshot,u=c?c.latestValues:{},f={...this.latestValues},m=Dh();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const p=Ir(),h=c?c.source:void 0,g=this.layout?this.layout.source:void 0,y=h!==g,x=this.getStack(),v=!x||x.members.length<=1,b=!!(y&&!v&&this.options.crossfade===!0&&!this.path.some(J$e));this.animationProgress=0;let _;this.mixTargetDelta=w=>{const C=w/1e3;lK(m.x,i.x,C),lK(m.y,i.y,C),this.setTargetDelta(m),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(M0(p,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Z$e(this.relativeTarget,this.relativeTargetOrigin,p,C),_&&D$e(this.relativeTarget,_)&&(this.isProjectionDirty=!1),_||(_=Ir()),ai(_,this.relativeTarget)),y&&(this.animationValues=f,A$e(f,u,this.latestValues,C,b,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(i){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Bd(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=_r.update(()=>{JS.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Ag(0)),this.currentAnimation=Dde(this.motionValue,[0,1e3],{...i,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),i.onUpdate&&i.onUpdate(l)},onStop:()=>{},onComplete:()=>{i.onComplete&&i.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const i=this.getStack();i&&i.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(B$e),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const i=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:f}=i;if(!(!l||!c||!u)){if(this!==i&&this.layout&&u&&Hde(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||Ir();const m=La(this.layout.layoutBox.x);c.x.min=i.target.x.min,c.x.max=c.x.min+m;const p=La(this.layout.layoutBox.y);c.y.min=i.target.y.min,c.y.max=c.y.min+p}ai(l,c),Oh(l,f),E0(this.projectionDeltaWithTransform,this.layoutCorrected,l,f)}}registerSharedNode(i,l){this.sharedNodes.has(i)||this.sharedNodes.set(i,new F$e),this.sharedNodes.get(i).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const i=this.getStack();return i?i.lead===this:!0}getLead(){const{layoutId:i}=this.options;return i?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:i}=this.options;return i?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:i}=this.options;if(i)return this.root.sharedNodes.get(i)}promote({needsReset:i,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),i&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const i=this.getStack();return i?i.relegate(this):!1}resetSkewAndRotation(){const{visualElement:i}=this.options;if(!i)return;let l=!1;const{latestValues:c}=i;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const u={};c.z&&KN("z",i,u,this.animationValues);for(let f=0;f<qN.length;f++)KN(`rotate${qN[f]}`,i,u,this.animationValues),KN(`skew${qN[f]}`,i,u,this.animationValues);i.render();for(const f in u)i.setStaticValue(f,u[f]),this.animationValues&&(this.animationValues[f]=u[f]);i.scheduleRender()}applyProjectionStyles(i,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){i.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,i.visibility="",i.opacity="",i.pointerEvents=ZS(l?.pointerEvents)||"",i.transform=c?c(this.latestValues,""):"none";return}const u=this.getLead();if(!this.projectionDelta||!this.layout||!u.target){this.options.layoutId&&(i.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,i.pointerEvents=ZS(l?.pointerEvents)||""),this.hasProjected&&!Xf(this.latestValues)&&(i.transform=c?c({},""):"none",this.hasProjected=!1);return}i.visibility="";const f=u.animationValues||u.latestValues;this.applyTransformsToTarget();let m=U$e(this.projectionDeltaWithTransform,this.treeScale,f);c&&(m=c(f,m)),i.transform=m;const{x:p,y:h}=this.projectionDelta;i.transformOrigin=`${p.origin*100}% ${h.origin*100}% 0`,u.animationValues?i.opacity=u===this?f.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:i.opacity=u===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const g in _1){if(f[g]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:v}=_1[g],b=m==="none"?f[g]:y(f[g],u);if(x){const _=x.length;for(let w=0;w<_;w++)i[x[w]]=b}else v?this.options.visualElement.renderState.vars[g]=b:i[g]=b}this.options.layoutId&&(i.pointerEvents=u===this?ZS(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(i=>i.currentAnimation?.stop()),this.root.nodes.forEach(aK),this.root.sharedNodes.clear()}}}function V$e(e){e.updateLayout()}function W$e(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,a=t.source!==e.layout.source;s==="size"?ci(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],p=La(m);m.min=n[f].min,m.max=m.min+p}):Hde(s,t.layoutBox,n)&&ci(f=>{const m=a?t.measuredBox[f]:t.layoutBox[f],p=La(n[f]);m.max=m.min+p,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[f].max=e.relativeTarget[f].min+p)});const i=Dh();E0(i,n,t.layoutBox);const l=Dh();a?E0(l,e.applyTransform(r,!0),t.measuredBox):E0(l,n,t.layoutBox);const c=!Bde(i);let u=!1;if(!e.resumeFrom){const f=e.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:p}=f;if(m&&p){const h=Ir();M0(h,t.layoutBox,m.layoutBox);const g=Ir();M0(g,n,p.layoutBox),$de(h,g)||(u=!0),f.options.layoutRoot&&(e.relativeTarget=g,e.relativeTargetOrigin=h,e.relativeParent=f)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:i,hasLayoutChanged:c,hasRelativeLayoutChanged:u})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function H$e(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function z$e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function G$e(e){e.clearSnapshot()}function aK(e){e.clearMeasurements()}function oK(e){e.isLayoutDirty=!1}function q$e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function iK(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function K$e(e){e.resolveTargetDelta()}function Y$e(e){e.calcProjection()}function Q$e(e){e.resetSkewAndRotation()}function X$e(e){e.removeLeadSnapshot()}function lK(e,t,n){e.translate=Er(t.translate,0,n),e.scale=Er(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function cK(e,t,n,r){e.min=Er(t.min,n.min,r),e.max=Er(t.max,n.max,r)}function Z$e(e,t,n,r){cK(e.x,t.x,n.x,r),cK(e.y,t.y,n.y,r)}function J$e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const eVe={duration:.45,ease:[.4,0,.1,1]},uK=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),dK=uK("applewebkit/")&&!uK("chrome/")?Math.round:wi;function fK(e){e.min=dK(e.min),e.max=dK(e.max)}function tVe(e){fK(e.x),fK(e.y)}function Hde(e,t,n){return e==="position"||e==="preserve-aspect"&&!l$e(rK(t),rK(n),.2)}function nVe(e){return e!==e.root&&e.scroll?.wasRoot}const rVe=Wde({attachResizeListener:(e,t)=>C1(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),YN={current:void 0},zde=Wde({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!YN.current){const e=new rVe({});e.mount(window),e.setOptions({layoutScroll:!0}),YN.current=e}return YN.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),sVe={pan:{Feature:C$e},drag:{Feature:w$e,ProjectionNode:zde,MeasureLayout:Ode}};function mK(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&_r.postRender(()=>a(t,t_(t)))}class aVe extends lf{mount(){const{current:t}=this.node;t&&(this.unmount=jUe(t,(n,r)=>(mK(this.node,r,"Start"),s=>mK(this.node,s,"End"))))}unmount(){}}class oVe extends lf{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jb(C1(this.node.current,"focus",()=>this.onFocus()),C1(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function pK(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&_r.postRender(()=>a(t,t_(t)))}class iVe extends lf{mount(){const{current:t}=this.node;t&&(this.unmount=PUe(t,(n,r)=>(pK(this.node,r,"Start"),(s,{success:a})=>pK(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const vP=new WeakMap,QN=new WeakMap,lVe=e=>{const t=vP.get(e.target);t&&t(e)},cVe=e=>{e.forEach(lVe)};function uVe({root:e,...t}){const n=e||document;QN.has(n)||QN.set(n,{});const r=QN.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(cVe,{root:e,...t})),r[s]}function dVe(e,t,n){const r=uVe(t);return vP.set(e,n),r.observe(e),()=>{vP.delete(e),r.unobserve(e)}}const fVe={some:0,all:1};class mVe extends lf{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,i={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:fVe[s]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:f,onViewportLeave:m}=this.node.getProps(),p=u?f:m;p&&p(c)};return dVe(this.node.current,i,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(pVe(t,n))&&this.startObserver()}unmount(){}}function pVe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const hVe={inView:{Feature:mVe},tap:{Feature:iVe},focus:{Feature:oVe},hover:{Feature:aVe}},gVe={layout:{ProjectionNode:zde,MeasureLayout:Ode}},yVe={...n$e,...hVe,...sVe,...gVe},ve=CBe(yVe,ABe);function zy(){!ED.current&&bde();const[e]=d.useState(iE.current);return e}function TD(e){return typeof e=="object"&&!Array.isArray(e)}function Gde(e,t,n,r){return typeof e=="string"&&TD(t)?fD(e,n,r):e instanceof NodeList?Array.from(e):Array.isArray(e)?e:[e]}function xVe(e,t,n){return e*(t+1)}function hK(e,t,n,r){return typeof t=="number"?t:t.startsWith("-")||t.startsWith("+")?Math.max(0,e+parseFloat(t)):t==="<"?n:t.startsWith("<")?Math.max(0,n+parseFloat(t.slice(1))):r.get(t)??e}function vVe(e,t,n){for(let r=0;r<e.length;r++){const s=e[r];s.at>t&&s.at<n&&(Zb(e,s),r--)}}function bVe(e,t,n,r,s,a){vVe(e,s,a);for(let i=0;i<t.length;i++)e.push({value:t[i],at:Er(s,a,r[i]),easing:_ue(n,i)})}function _Ve(e,t){for(let n=0;n<e.length;n++)e[n]=e[n]/(t+1)}function wVe(e,t){return e.at===t.at?e.value===null?1:t.value===null?-1:0:e.at-t.at}const CVe="easeInOut";function SVe(e,{defaultTransition:t={},...n}={},r,s){const a=t.duration||.3,i=new Map,l=new Map,c={},u=new Map;let f=0,m=0,p=0;for(let h=0;h<e.length;h++){const g=e[h];if(typeof g=="string"){u.set(g,m);continue}else if(!Array.isArray(g)){u.set(g.name,hK(m,g.at,f,u));continue}let[y,x,v={}]=g;v.at!==void 0&&(m=hK(m,v.at,f,u));let b=0;const _=(w,C,S,E=0,k=0)=>{const M=EVe(w),{delay:j=0,times:R=Oue(M),type:O="keyframes",repeat:D,repeatType:P,repeatDelay:A=0,...T}=C;let{ease:N=t.ease||"easeOut",duration:L}=C;const U=typeof j=="function"?j(E,k):j,$=M.length,V=cD(O)?O:s?.[O||"keyframes"];if($<=2&&V){let H=100;if($===2&&TVe(M)){const ee=M[1]-M[0];H=Math.abs(ee)}const K={...T};L!==void 0&&(K.duration=Zi(L));const G=Rue(K,H,V);N=G.ease,L=G.duration}L??(L=a);const W=m+U;R.length===1&&R[0]===0&&(R[1]=1);const Q=R.length-M.length;if(Q>0&&Lue(R,Q),M.length===1&&M.unshift(null),D){L=xVe(L,D);const H=[...M],K=[...R];N=Array.isArray(N)?[...N]:[N];const G=[...N];for(let ee=0;ee<D;ee++){M.push(...H);for(let Y=0;Y<H.length;Y++)R.push(K[Y]+(ee+1)),N.push(Y===0?"linear":_ue(G,Y-1))}_Ve(R,D)}const q=W+L;bVe(S,M,N,R,W,q),b=Math.max(U+L,b),p=Math.max(q,p)};if(Ts(y)){const w=gK(y,l);_(x,v,yK("default",w))}else{const w=Gde(y,x,r,c),C=w.length;for(let S=0;S<C;S++){x=x,v=v;const E=w[S],k=gK(E,l);for(const M in x)_(x[M],MVe(v,M),yK(M,k),S,C)}}f=m,m+=b}return l.forEach((h,g)=>{for(const y in h){const x=h[y];x.sort(wVe);const v=[],b=[],_=[];for(let C=0;C<x.length;C++){const{at:S,value:E,easing:k}=x[C];v.push(E),b.push(jg(0,p,S)),_.push(k||"easeOut")}b[0]!==0&&(b.unshift(0),v.unshift(v[0]),_.unshift(CVe)),b[b.length-1]!==1&&(b.push(1),v.push(null)),i.has(g)||i.set(g,{keyframes:{},transition:{}});const w=i.get(g);w.keyframes[y]=v,w.transition[y]={...t,duration:p,ease:_,times:b,...n}}}),i}function gK(e,t){return!t.has(e)&&t.set(e,{}),t.get(e)}function yK(e,t){return t[e]||(t[e]=[]),t[e]}function EVe(e){return Array.isArray(e)?e:[e]}function MVe(e,t){return e&&e[t]?{...e,...e[t]}:{...e}}const kVe=e=>typeof e=="number",TVe=e=>e.every(kVe);function NVe(e,t){return e in t}class jVe extends _de{constructor(){super(...arguments),this.type="object"}readValueFromInstance(t,n){if(NVe(n,t)){const r=t[n];if(typeof r=="string"||typeof r=="number")return r}}getBaseTargetFromProps(){}removeValueFromRenderState(t,n){delete n.output[t]}measureInstanceViewportBox(){return Ir()}build(t,n){Object.assign(t.output,n)}renderInstance(t,{output:n}){Object.assign(t,n)}sortInstanceNodePosition(){return 0}}function AVe(e){const t={presenceContext:null,props:{},visualState:{renderState:{transform:{},transformOrigin:{},style:{},vars:{},attrs:{}},latestValues:{}}},n=hD(e)&&!ede(e)?new Mde(t):new Sde(t);n.mount(e),w1.set(e,n)}function IVe(e){const t={presenceContext:null,props:{},visualState:{renderState:{output:{}},latestValues:{}}},n=new jVe(t);n.mount(e),w1.set(e,n)}function RVe(e,t){return Ts(e)||typeof e=="number"||typeof e=="string"&&!TD(t)}function qde(e,t,n,r){const s=[];if(RVe(e,t))s.push(Dde(e,TD(t)&&t.default||t,n&&(n.default||n)));else{const a=Gde(e,t,r),i=a.length;for(let l=0;l<i;l++){const c=a[l],u=c instanceof Element?AVe:IVe;w1.has(c)||u(c);const f=w1.get(c),m={...n};"delay"in m&&typeof m.delay=="function"&&(m.delay=m.delay(l,i)),s.push(...kD(f,{...t,transition:m},{}))}}return s}function PVe(e,t,n){const r=[];return SVe(e,t,n,{spring:v1}).forEach(({keyframes:a,transition:i},l)=>{r.push(...qde(l,a,i))}),r}function LVe(e){return Array.isArray(e)&&e.some(Array.isArray)}function OVe(e){function t(n,r,s){let a=[];LVe(n)?a=PVe(n,r,e):a=qde(n,r,s,e);const i=new pUe(a);return e&&(e.animations.push(i),i.finished.then(()=>{Zb(e.animations,i)})),i}return t}const xK=OVe(),DVe={some:0,all:1};function FVe(e,t,{root:n,margin:r,amount:s="some"}={}){const a=fD(e),i=new WeakMap,l=u=>{u.forEach(f=>{const m=i.get(f.target);if(f.isIntersecting!==!!m)if(f.isIntersecting){const p=t(f.target,f);typeof p=="function"?i.set(f.target,p):c.unobserve(f.target)}else typeof m=="function"&&(m(f),i.delete(f.target))})},c=new IntersectionObserver(l,{root:n,rootMargin:r,threshold:typeof s=="number"?s:DVe[s]});return a.forEach(u=>c.observe(u)),()=>c.disconnect()}function UVe(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[i,l]=d.useState(a);return d.useEffect(()=>{if(!e.current||s&&i)return;const c=()=>(l(!0),s?void 0:()=>l(!1)),u={root:t&&t.current||void 0,margin:n,amount:r};return FVe(e.current,c,u)},[t,e,n,s,r]),i}const BVe=()=>{const{base:e}=vt(),t=Lt();return t===(e||"/")||t?.startsWith("/search")},$Ve={micro:"font-sans text-2xs font-normal",tiny:"font-sans text-xs font-medium",tinyRegular:"font-sans text-xs font-normal",tinyBold:"font-sans text-xs font-bold",extraSmall:"font-sans text-[13px]",small:"font-sans text-sm",smallBold:"font-sans text-sm font-medium leading-[1.125rem]",smallExtraBold:"font-sans text-sm font-extrabold leading-[1.125rem]",base:"font-sans text-base",baseSemi:"font-sans text-base font-medium",tinyMono:"font-mono text-2xs md:text-xs",smallMono:"font-mono text-sm",smallCaps:"text-2xs md:text-xs tracking-wide font-mono leading-none uppercase","section-title":"font-display text-lg font-medium","page-title":"font-display font-medium text-2xl",display:"font-display text-4xl lg:text-[2.8rem] !leading-[1.2]","entry-title":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-100":"font-display text-pretty text-xl lg:text-3xl font-medium","entry-title-200":"font-display text-lg lg:text-xl font-medium","entry-title-300":"font-sans text-pretty font-medium"},VVe={default:"text-foreground",defaultInverted:"text-inverse",light:"text-quiet ",ultraLight:"text-quietest",red:"text-caution",yellow:"text-yellow-600 dark:text-yellow-400",super:"text-super",white:"text-white",positive:"text-positive",negative:"text-negative",max:"text-max"},WVe=(e,t,n)=>t||(e==="page-title"?"h1":e==="entry-title"?"h2":n?"span":"div"),HVe=(e,t,n,r,s)=>{const a=$Ve[e],i=VVe[t];return B(s,a,i,n?"text-center block":"",r?"hover:text-super":"","selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super")},F=I.memo(({children:e,variant:t="base",color:n="default",textCenter:r,className:s,inline:a,superHover:i,testId:l,as:c,ref:u,...f})=>{const m=d.useMemo(()=>WVe(t,c,a),[t,c,a]),p=d.useMemo(()=>HVe(t,n,r,i,s),[s,n,r,t,i]);return I.createElement(m,{className:p,"data-testid":l,ref:u,...f},e)});F.displayName="TextBlock";const Yt={tiny:"tiny",small:"small",regular:"regular",large:"large",xl:"xl",none:"none"};var Le;(function(e){e.RETRY_BUTTON="retryButton",e.PRO_PAGE="proPage",e.SHARE_DROPDOWN="shareDropdown",e.PRICING_TABLE="pricingTable",e.TRY_COPILOT="tryCopilot",e.TRY_RESEARCH="tryResearch",e.TRY_LABS="tryLabs",e.PRO_HOVER_CARD_BUTTON="proHoverCardButton",e.PRO_REASONING_SELECTOR="proReasoningSelector",e.LIBRARY_PAGE="libraryPage",e.SPACES_PAGE="spacesPage",e.SPACES_LANDING="spacesLanding",e.SPACES_TEMPLATES="spacesTemplates",e.DISCOVER_TOPICS="discoverTopics",e.COLLECTIONS="collections",e.SPACES="spaces",e.THREAD_SOCIAL="threadSocial",e.MOBILE_SIGNUP="mobileSignup",e.RELATED_QUERIES="relatedQueries",e.FILE_UPLOAD="fileUpload",e.SPACES_FILE_UPLOAD="spacesFileUpload",e.TRY_PRO="tryPro",e.HOMEPAGE_FREE_PLAN_UPSELL="homepageFreePlanUpsell",e.LOGIN_BUTTON="loginButton",e.SIGNUP_BUTTON="signupButton",e.LOGIN_BUTTON_HEADER="loginButtonHeader",e.SIGNUP_BUTTON_HEADER="signupButtonHeader",e.FLOATING_SIGNUP="floatingSignup",e.SIDEBAR_LOGIN_AD="sidebarLoginAd",e.SIDEBAR_PRO_UPSELL="sidebarProUpsell",e.SIDE_TEXT_PRO_UPSELL="sideTextProUpsell",e.VISITOR_GATE="visitorGate",e.SHARED_THREAD_LOGIN_GATE="sharedThreadLoginGate",e.SHARED_THREAD_INSTALL_GATE="sharedThreadInstallGate",e.REQUEST_ACCESS_LOGIN_GATE="requestAccessLoginGate",e.GENERATE_IMAGE="generateImage",e.PPLX_API_PAGE="pplxApiPage",e.FILES_PAGE="filesPage",e.PURCHASES_PAGE="purchasesPage",e.GOOGLE_ONETAP_HOME="oneTapHome",e.GOOGLE_ONETAP_THREAD="oneTapThread",e.GOOGLE_ONETAP_PAGE="oneTapPage",e.GOOGLE_ONETAP_DISCOVER="oneTapDiscover",e.GOOGLE_ONETAP_UNKNOWN="oneTap",e.ONBOARDING="onboarding",e.EMAIL_ASSISTANT_ONBOARDING="emailAssistantOnboarding",e.NEXTAUTH_SIGNIN_PAGE="nextauthSignInPage",e.DISCOUNT_CODE_BANNER="discountCodeBanner",e.PARTNER_CODE="partnerCode",e.ARTICLE_NEW="articleNew",e.THREAD_TO_ARTICLE="threadToArticle",e.ORG_CREATE="orgCreate",e.ORG_PANEL="orgPanel",e.LOSS_AVERSION_MODAL="lossAversionModal",e.NEW_THREAD_BUTTON="newThreadButton",e.NEW_THREAD_SHORTCUT="newThreadShortcut",e.DISCOVER_BUTTON="discoverButton",e.THREAD_BOOKMARK_BUTTON="threadBookmarkButton",e.PAGE_BOOKMARK_BUTTON="pageBookmarkButton",e.DISCOVER_FEED_BOOKMARK_BUTTON="discoverFeedBookmarkButton",e.BACK_TO_SCHOOL="backToSchool",e.WELCOME_BACK="welcomeBack",e.LEFT_HAND_NAV="leftHandNav",e.SETTINGS="settings",e.PRO_FEATURE_LIMIT_BANNER="proFeatureLimitBanner",e.BUY_WITH_PRO_BUTTON="buyWithProButton",e.FINANCE_WATCHLIST="financeWatchlist",e.DOWNLOAD_COMET="downloadComet",e.GROW_COMET="growComet",e.GROW_COMET_STUDENTS="growCometStudents",e.GROW_COMET_STUDENTS_COUNTRY="growCometStudentsCountry",e.PARTNER_COMET="partnerComet",e.COMET_ONBOARDING="cometOnboarding",e.PROMO_REDEMPTION="promoRedemption",e.CONNECTORS_PAGE="connectorsPage",e.MARKETING_LANDING_PAGE="marketingLandingPage",e.FINANCE_TRANSCRIPT="financeTranscript",e.FINANCE_RESEARCH="financeResearch",e.LJJ_LANDING_PAGE="ljjLandingPage",e.STUDENT_REFERRAL_LANDING_PAGE="studentReferralLandingPage",e.VOICE_TO_VOICE_BUTTON="voiceToVoiceButton",e.PRO_PERKS="proPerks",e.REFERRAL_PAGE="referralPage",e.HOTEL_BOOKING_PAGE="hotelBookingPage",e.SOURCES_VIEW_MORE="sourcesViewMore",e.SPORTS_WATCHLIST="sportsWatchlist",e.IMAGE_GENERATION_IN_THREAD="imageGenerationInThread",e.AUTO_UPGRADE_TO_PRO="autoUpgradeToPro",e.UNSPECIFIED_GENERALIZED_UPSELL="unspecifiedGeneralizedUpsell",e.MILESTONE_ACHIEVED="milestoneAchieved",e.PRO_PERKS_PARTNER_PAGE="proPerksPartnerPage",e.STUDENT_LANDING_PAGE="studentLandingPage",e.TASKS_PAGE="tasksPage",e.MAX_URL_PAYWALL="maxUrlPaywall",e.MODEL_SELECTOR="modelSelector",e.DISCOVER_FEED_LIKE_BUTTON="discoverFeedLikeButton",e.DISCOVER_FEED_DISLIKE_BUTTON="discoverFeedDislikeButton",e.DISCOVER_FEED_TASK_WIDGET="discoverFeedTaskWidget",e.SIDEBAR_BOTTOM_POPOVER="sidebarBottomPopover",e.HOME_SIDEBAR="homeSidebar",e.WHATSAPP_LINK="whatsappLink",e.UPGRADE_MODAL="upgradeModal",e.MAX_PAGE="maxPage",e.COMET_INVITE="cometInvite",e.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD="loginForCometAgentQueriesInThread",e.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD="cometAgentQueriesRateLimitedInThread",e.PRO_UPGRADE_IN_SIDE_HOMEPAGE="proUpgradeInSideHomepage",e.MISSING_OUT_ON_PRO_IN_THREAD="missingOutOnProInThread",e.VIDEO_GENERATION_IN_THREAD="videoGenerationInThread",e.STUDENT_VERIFICATION_UPSELL="studentVerificationUpsell",e.STUDENT_VERIFICATION_PAGE="studentVerificationPage",e.TRY_ASSISTANT_BUTTON="tryAssistantButton",e.COMET_NTP="cometNTP",e.EMAIL_ASSISTANT_GATE="emailAssistantGate",e.ENTERPRISE_BILLING_BANNER="enterpriseBillingBanner",e.ENTERPRISE_MAX_UPSELL="enterpriseMaxUpsell",e.CANVAS_GENERATION_IN_THREAD="canvasGenerationInThread",e.CLASSROOM_UPLOAD="classroomUpload"})(Le||(Le={}));var Ct;(function(e){e[e.OWNER_ONLY=0]="OWNER_ONLY",e[e.PRIVATE_READ=1]="PRIVATE_READ",e[e.PUBLIC_READ=2]="PUBLIC_READ",e[e.PUBLIC_PUBLISHED=3]="PUBLIC_PUBLISHED",e[e.ORG_READ=4]="ORG_READ",e[e.COLLECTION_READ=5]="COLLECTION_READ"})(Ct||(Ct={}));const zVe={[Yt.tiny]:"xs",[Yt.small]:"sm",[Yt.regular]:"base",[Yt.large]:"lg",[Yt.xl]:"xl",[Yt.none]:"base"},k0=I.memo(({icon:e,showClicked:t=!1,buttonSize:n,iconClassName:r})=>typeof e=="string"?o.jsx(Wle,{name:e,size:"inherit",className:r}):o.jsx(de,{icon:t?dr:e,size:zVe[n]||"base",className:r}));k0.displayName="BaseIcon";const Fr=I.memo(({size:e=16,className:t,...n})=>o.jsx("div",{className:B("p-two aspect-square shrink-0 animate-spin rounded-full",t),style:{width:e,backgroundImage:"conic-gradient(from 270deg, transparent 0%, currentColor 99%)",mask:`radial-gradient(transparent 0%, transparent ${e/2-2}px, black ${e/2-2}px, black) center center`},...n}));Fr.displayName="Spinner";function it(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function vK(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function uc(...e){return t=>{let n=!1;const r=e.map(s=>{const a=vK(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():vK(e[s],null)}}}}function En(...e){return d.useCallback(uc(...e),e)}function GVe(e,t){const n=d.createContext(t),r=a=>{const{children:i,...l}=a,c=d.useMemo(()=>l,Object.values(l));return o.jsx(n.Provider,{value:c,children:i})};r.displayName=e+"Provider";function s(a){const i=d.useContext(n);if(i)return i;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function Ca(e,t=[]){let n=[];function r(a,i){const l=d.createContext(i),c=n.length;n=[...n,i];const u=m=>{const{scope:p,children:h,...g}=m,y=p?.[e]?.[c]||l,x=d.useMemo(()=>g,Object.values(g));return o.jsx(y.Provider,{value:x,children:h})};u.displayName=a+"Provider";function f(m,p){const h=p?.[e]?.[c]||l,g=d.useContext(h);if(g)return g;if(i!==void 0)return i;throw new Error(`\`${m}\` must be used within \`${a}\``)}return[u,f]}const s=()=>{const a=n.map(i=>d.createContext(i));return function(l){const c=l?.[e]||a;return d.useMemo(()=>({[`__scope${e}`]:{...l,[e]:c}}),[l,c])}};return s.scopeName=e,[r,qVe(s,...t)]}function qVe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(a){const i=r.reduce((l,{useScope:c,scopeName:u})=>{const m=c(a)[`__scope${u}`];return{...l,...m}},{});return d.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function Rg(e){const t=KVe(e),n=d.forwardRef((r,s)=>{const{children:a,...i}=r,l=d.Children.toArray(a),c=l.find(QVe);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...i,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function KVe(e){const t=d.forwardRef((n,r)=>{const{children:s,...a}=n;if(d.isValidElement(s)){const i=ZVe(s),l=XVe(a,s.props);return s.type!==d.Fragment&&(l.ref=r?uc(r,i):i),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var Kde=Symbol("radix.slottable");function YVe(e){const t=({children:n})=>o.jsx(o.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=Kde,t}function QVe(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Kde}function XVe(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{const c=a(...l);return s(...l),c}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function ZVe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var JVe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Xt=JVe.reduce((e,t)=>{const n=Rg(`Primitive.${t}`),r=d.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function Yde(e,t){e&&ks.flushSync(()=>e.dispatchEvent(t))}function ma(e){const t=d.useRef(e);return d.useEffect(()=>{t.current=e}),d.useMemo(()=>(...n)=>t.current?.(...n),[])}function eWe(e,t=globalThis?.document){const n=ma(e);d.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var tWe="DismissableLayer",bP="dismissableLayer.update",nWe="dismissableLayer.pointerDownOutside",rWe="dismissableLayer.focusOutside",bK,Qde=d.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Gy=d.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,onDismiss:l,...c}=e,u=d.useContext(Qde),[f,m]=d.useState(null),p=f?.ownerDocument??globalThis?.document,[,h]=d.useState({}),g=En(t,E=>m(E)),y=Array.from(u.layers),[x]=[...u.layersWithOutsidePointerEventsDisabled].slice(-1),v=y.indexOf(x),b=f?y.indexOf(f):-1,_=u.layersWithOutsidePointerEventsDisabled.size>0,w=b>=v,C=oWe(E=>{const k=E.target,M=[...u.branches].some(j=>j.contains(k));!w||M||(s?.(E),i?.(E),E.defaultPrevented||l?.())},p),S=iWe(E=>{const k=E.target;[...u.branches].some(j=>j.contains(k))||(a?.(E),i?.(E),E.defaultPrevented||l?.())},p);return eWe(E=>{b===u.layers.size-1&&(r?.(E),!E.defaultPrevented&&l&&(E.preventDefault(),l()))},p),d.useEffect(()=>{if(f)return n&&(u.layersWithOutsidePointerEventsDisabled.size===0&&(bK=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),u.layersWithOutsidePointerEventsDisabled.add(f)),u.layers.add(f),_K(),()=>{n&&u.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=bK)}},[f,p,n,u]),d.useEffect(()=>()=>{f&&(u.layers.delete(f),u.layersWithOutsidePointerEventsDisabled.delete(f),_K())},[f,u]),d.useEffect(()=>{const E=()=>h({});return document.addEventListener(bP,E),()=>document.removeEventListener(bP,E)},[]),o.jsx(Xt.div,{...c,ref:g,style:{pointerEvents:_?w?"auto":"none":void 0,...e.style},onFocusCapture:it(e.onFocusCapture,S.onFocusCapture),onBlurCapture:it(e.onBlurCapture,S.onBlurCapture),onPointerDownCapture:it(e.onPointerDownCapture,C.onPointerDownCapture)})});Gy.displayName=tWe;var sWe="DismissableLayerBranch",aWe=d.forwardRef((e,t)=>{const n=d.useContext(Qde),r=d.useRef(null),s=En(t,r);return d.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),o.jsx(Xt.div,{...e,ref:s})});aWe.displayName=sWe;function oWe(e,t=globalThis?.document){const n=ma(e),r=d.useRef(!1),s=d.useRef(()=>{});return d.useEffect(()=>{const a=l=>{if(l.target&&!r.current){let c=function(){Xde(nWe,n,u,{discrete:!0})};const u={originalEvent:l};l.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=c,t.addEventListener("click",s.current,{once:!0})):c()}else t.removeEventListener("click",s.current);r.current=!1},i=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(i),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function iWe(e,t=globalThis?.document){const n=ma(e),r=d.useRef(!1);return d.useEffect(()=>{const s=a=>{a.target&&!r.current&&Xde(rWe,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function _K(){const e=new CustomEvent(bP);document.dispatchEvent(e)}function Xde(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?Yde(s,a):s.dispatchEvent(a)}var Cu=globalThis?.document?d.useLayoutEffect:()=>{},lWe=EO[" useId ".trim().toString()]||(()=>{}),cWe=0;function fo(e){const[t,n]=d.useState(lWe());return Cu(()=>{n(r=>r??String(cWe++))},[e]),t?`radix-${t}`:""}const uWe=["top","right","bottom","left"],Ba=Math.min,Lr=Math.max,lE=Math.round,lC=Math.floor,Xl=e=>({x:e,y:e}),dWe={left:"right",right:"left",bottom:"top",top:"bottom"},fWe={start:"end",end:"start"};function Pg(e,t,n){return Lr(e,Ba(t,n))}function Rs(e,t){return typeof e=="function"?e(t):e}function Ps(e){return e.split("-")[0]}function Mc(e){return e.split("-")[1]}function n_(e){return e==="x"?"y":"x"}function r_(e){return e==="y"?"height":"width"}const mWe=new Set(["top","bottom"]);function Ns(e){return mWe.has(Ps(e))?"y":"x"}function s_(e){return n_(Ns(e))}function Zde(e,t,n){n===void 0&&(n=!1);const r=Mc(e),s=s_(e),a=r_(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(i=S1(i)),[i,S1(i)]}function Jde(e){const t=S1(e);return[_P(e),t,_P(t)]}function _P(e){return e.replace(/start|end/g,t=>fWe[t])}const wK=["left","right"],CK=["right","left"],pWe=["top","bottom"],hWe=["bottom","top"];function gWe(e,t,n){switch(e){case"top":case"bottom":return n?t?CK:wK:t?wK:CK;case"left":case"right":return t?pWe:hWe;default:return[]}}function efe(e,t,n,r){const s=Mc(e);let a=gWe(Ps(e),n==="start",r);return s&&(a=a.map(i=>i+"-"+s),t&&(a=a.concat(a.map(_P)))),a}function S1(e){return e.replace(/left|right|bottom|top/g,t=>dWe[t])}function yWe(e){return{top:0,right:0,bottom:0,left:0,...e}}function a_(e){return typeof e!="number"?yWe(e):{top:e,right:e,bottom:e,left:e}}function dc(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function SK(e,t,n){let{reference:r,floating:s}=e;const a=Ns(t),i=s_(t),l=r_(i),c=Ps(t),u=a==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:f,y:r.y-s.height};break;case"bottom":h={x:f,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:m};break;case"left":h={x:r.x-s.width,y:m};break;default:h={x:r.x,y:r.y}}switch(Mc(t)){case"start":h[i]-=p*(n&&u?-1:1);break;case"end":h[i]+=p*(n&&u?-1:1);break}return h}const xWe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=SK(u,r,c),p=r,h={},g=0;for(let y=0;y<l.length;y++){const{name:x,fn:v}=l[y],{x:b,y:_,data:w,reset:C}=await v({x:f,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});f=b??f,m=_??m,h={...h,[x]:{...h[x],...w}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:f,y:m}=SK(u,p,c)),y=-1)}return{x:f,y:m,placement:p,strategy:s,middlewareData:h}};async function E1(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:p=!1,padding:h=0}=Rs(t,e),g=a_(h),x=l[p?m==="floating"?"reference":"floating":m],v=dc(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),b=m==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},C=dc(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:_,strategy:c}):b);return{top:(v.top-C.top+g.top)/w.y,bottom:(C.bottom-v.bottom+g.bottom)/w.y,left:(v.left-C.left+g.left)/w.x,right:(C.right-v.right+g.right)/w.x}}const vWe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Rs(e,t)||{};if(u==null)return{};const m=a_(f),p={x:n,y:r},h=s_(s),g=r_(h),y=await i.getDimensions(u),x=h==="y",v=x?"top":"left",b=x?"bottom":"right",_=x?"clientHeight":"clientWidth",w=a.reference[g]+a.reference[h]-p[h]-a.floating[g],C=p[h]-a.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let E=S?S[_]:0;(!E||!await(i.isElement==null?void 0:i.isElement(S)))&&(E=l.floating[_]||a.floating[g]);const k=w/2-C/2,M=E/2-y[g]/2-1,j=Ba(m[v],M),R=Ba(m[b],M),O=j,D=E-y[g]-R,P=E/2-y[g]/2+k,A=Pg(O,P,D),T=!c.arrow&&Mc(s)!=null&&P!==A&&a.reference[g]/2-(P<O?j:R)-y[g]/2<0,N=T?P<O?P-O:P-D:0;return{[h]:p[h]+N,data:{[h]:A,centerOffset:P-A-N,...T&&{alignmentOffset:N}},reset:T}}}),bWe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...x}=Rs(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=Ps(s),b=Ns(l),_=Ps(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=p||(_||!y?[S1(l)]:Jde(l)),S=g!=="none";!p&&S&&C.push(...efe(l,y,g,w));const E=[l,...C],k=await E1(t,x),M=[];let j=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&M.push(k[v]),m){const P=Zde(s,i,w);M.push(k[P[0]],k[P[1]])}if(j=[...j,{placement:s,overflows:M}],!M.every(P=>P<=0)){var R,O;const P=(((R=a.flip)==null?void 0:R.index)||0)+1,A=E[P];if(A&&(!(m==="alignment"?b!==Ns(A):!1)||j.every(L=>Ns(L.placement)===b?L.overflows[0]>0:!0)))return{data:{index:P,overflows:j},reset:{placement:A}};let T=(O=j.filter(N=>N.overflows[0]<=0).sort((N,L)=>N.overflows[1]-L.overflows[1])[0])==null?void 0:O.placement;if(!T)switch(h){case"bestFit":{var D;const N=(D=j.filter(L=>{if(S){const U=Ns(L.placement);return U===b||U==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(U=>U>0).reduce((U,$)=>U+$,0)]).sort((L,U)=>L[1]-U[1])[0])==null?void 0:D[0];N&&(T=N);break}case"initialPlacement":T=l;break}if(s!==T)return{reset:{placement:T}}}return{}}}};function EK(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function MK(e){return uWe.some(t=>e[t]>=0)}const _We=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n}=t,{strategy:r="referenceHidden",...s}=Rs(e,t);switch(r){case"referenceHidden":{const a=await E1(t,{...s,elementContext:"reference"}),i=EK(a,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:MK(i)}}}case"escaped":{const a=await E1(t,{...s,altBoundary:!0}),i=EK(a,n.floating);return{data:{escapedOffsets:i,escaped:MK(i)}}}default:return{}}}}};function tfe(e){const t=Ba(...e.map(a=>a.left)),n=Ba(...e.map(a=>a.top)),r=Lr(...e.map(a=>a.right)),s=Lr(...e.map(a=>a.bottom));return{x:t,y:n,width:r-t,height:s-n}}function wWe(e){const t=e.slice().sort((s,a)=>s.y-a.y),n=[];let r=null;for(let s=0;s<t.length;s++){const a=t[s];!r||a.y-r.y>r.height/2?n.push([a]):n[n.length-1].push(a),r=a}return n.map(s=>dc(tfe(s)))}const CWe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:s,platform:a,strategy:i}=t,{padding:l=2,x:c,y:u}=Rs(e,t),f=Array.from(await(a.getClientRects==null?void 0:a.getClientRects(r.reference))||[]),m=wWe(f),p=dc(tfe(f)),h=a_(l);function g(){if(m.length===2&&m[0].left>m[1].right&&c!=null&&u!=null)return m.find(x=>c>x.left-h.left&&c<x.right+h.right&&u>x.top-h.top&&u<x.bottom+h.bottom)||p;if(m.length>=2){if(Ns(n)==="y"){const j=m[0],R=m[m.length-1],O=Ps(n)==="top",D=j.top,P=R.bottom,A=O?j.left:R.left,T=O?j.right:R.right,N=T-A,L=P-D;return{top:D,bottom:P,left:A,right:T,width:N,height:L,x:A,y:D}}const x=Ps(n)==="left",v=Lr(...m.map(j=>j.right)),b=Ba(...m.map(j=>j.left)),_=m.filter(j=>x?j.left===b:j.right===v),w=_[0].top,C=_[_.length-1].bottom,S=b,E=v,k=E-S,M=C-w;return{top:w,bottom:C,left:S,right:E,width:k,height:M,x:S,y:w}}return p}const y=await a.getElementRects({reference:{getBoundingClientRect:g},floating:r.floating,strategy:i});return s.reference.x!==y.reference.x||s.reference.y!==y.reference.y||s.reference.width!==y.reference.width||s.reference.height!==y.reference.height?{reset:{rects:y}}:{}}}},nfe=new Set(["left","top"]);async function SWe(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Ps(n),l=Mc(n),c=Ns(n)==="y",u=nfe.has(i)?-1:1,f=a&&c?-1:1,m=Rs(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof g=="number"&&(h=l==="end"?g*-1:g),c?{x:h*f,y:p*u}:{x:p*u,y:h*f}}const EWe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await SWe(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},MWe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:v,y:b}=x;return{x:v,y:b}}},...c}=Rs(e,t),u={x:n,y:r},f=await E1(t,c),m=Ns(Ps(s)),p=n_(m);let h=u[p],g=u[m];if(a){const x=p==="y"?"top":"left",v=p==="y"?"bottom":"right",b=h+f[x],_=h-f[v];h=Pg(b,h,_)}if(i){const x=m==="y"?"top":"left",v=m==="y"?"bottom":"right",b=g+f[x],_=g-f[v];g=Pg(b,g,_)}const y=l.fn({...t,[p]:h,[m]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[m]:i}}}}}},kWe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Rs(e,t),f={x:n,y:r},m=Ns(s),p=n_(m);let h=f[p],g=f[m];const y=Rs(l,t),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=p==="y"?"height":"width",w=a.reference[p]-a.floating[_]+x.mainAxis,C=a.reference[p]+a.reference[_]-x.mainAxis;h<w?h=w:h>C&&(h=C)}if(u){var v,b;const _=p==="y"?"width":"height",w=nfe.has(Ps(s)),C=a.reference[m]-a.floating[_]+(w&&((v=i.offset)==null?void 0:v[m])||0)+(w?0:x.crossAxis),S=a.reference[m]+a.reference[_]+(w?0:((b=i.offset)==null?void 0:b[m])||0)-(w?x.crossAxis:0);g<C?g=C:g>S&&(g=S)}return{[p]:h,[m]:g}}}},TWe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=Rs(e,t),f=await E1(t,u),m=Ps(s),p=Mc(s),h=Ns(s)==="y",{width:g,height:y}=a.floating;let x,v;m==="top"||m==="bottom"?(x=m,v=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(v=m,x=p==="end"?"top":"bottom");const b=y-f.top-f.bottom,_=g-f.left-f.right,w=Ba(y-f[x],b),C=Ba(g-f[v],_),S=!t.middlewareData.shift;let E=w,k=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=b),S&&!p){const j=Lr(f.left,0),R=Lr(f.right,0),O=Lr(f.top,0),D=Lr(f.bottom,0);h?k=g-2*(j!==0||R!==0?j+R:Lr(f.left,f.right)):E=y-2*(O!==0||D!==0?O+D:Lr(f.top,f.bottom))}await c({...t,availableWidth:k,availableHeight:E});const M=await i.getDimensions(l.floating);return g!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}};function o5(){return typeof window<"u"}function qy(e){return rfe(e)?(e.nodeName||"").toLowerCase():"#document"}function Bo(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function kc(e){var t;return(t=(rfe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function rfe(e){return o5()?e instanceof Node||e instanceof Bo(e).Node:!1}function nl(e){return o5()?e instanceof Element||e instanceof Bo(e).Element:!1}function fc(e){return o5()?e instanceof HTMLElement||e instanceof Bo(e).HTMLElement:!1}function kK(e){return!o5()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bo(e).ShadowRoot}const NWe=new Set(["inline","contents"]);function o_(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=rl(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!NWe.has(s)}const jWe=new Set(["table","td","th"]);function AWe(e){return jWe.has(qy(e))}const IWe=[":popover-open",":modal"];function i5(e){return IWe.some(t=>{try{return e.matches(t)}catch{return!1}})}const RWe=["transform","translate","scale","rotate","perspective"],PWe=["transform","translate","scale","rotate","perspective","filter"],LWe=["paint","layout","strict","content"];function ND(e){const t=jD(),n=nl(e)?rl(e):e;return RWe.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||PWe.some(r=>(n.willChange||"").includes(r))||LWe.some(r=>(n.contain||"").includes(r))}function OWe(e){let t=Vd(e);for(;fc(t)&&!Lg(t);){if(ND(t))return t;if(i5(t))return null;t=Vd(t)}return null}function jD(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const DWe=new Set(["html","body","#document"]);function Lg(e){return DWe.has(qy(e))}function rl(e){return Bo(e).getComputedStyle(e)}function l5(e){return nl(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Vd(e){if(qy(e)==="html")return e;const t=e.assignedSlot||e.parentNode||kK(e)&&e.host||kc(e);return kK(t)?t.host:t}function sfe(e){const t=Vd(e);return Lg(t)?e.ownerDocument?e.ownerDocument.body:e.body:fc(t)&&o_(t)?t:sfe(t)}function M1(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=sfe(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=Bo(s);if(a){const l=wP(i);return t.concat(i,i.visualViewport||[],o_(s)?s:[],l&&n?M1(l):[])}return t.concat(s,M1(s,[],n))}function wP(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function afe(e){const t=rl(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=fc(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=lE(n)!==a||lE(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function AD(e){return nl(e)?e:e.contextElement}function tg(e){const t=AD(e);if(!fc(t))return Xl(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=afe(t);let i=(a?lE(n.width):n.width)/r,l=(a?lE(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const FWe=Xl(0);function ofe(e){const t=Bo(e);return!jD()||!t.visualViewport?FWe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function UWe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Bo(e)?!1:t}function Rm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=AD(e);let i=Xl(1);t&&(r?nl(r)&&(i=tg(r)):i=tg(e));const l=UWe(a,n,r)?ofe(a):Xl(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,f=s.width/i.x,m=s.height/i.y;if(a){const p=Bo(a),h=r&&nl(r)?Bo(r):r;let g=p,y=wP(g);for(;y&&r&&h!==g;){const x=tg(y),v=y.getBoundingClientRect(),b=rl(y),_=v.left+(y.clientLeft+parseFloat(b.paddingLeft))*x.x,w=v.top+(y.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,m*=x.y,c+=_,u+=w,g=Bo(y),y=wP(g)}}return dc({width:f,height:m,x:c,y:u})}function c5(e,t){const n=l5(e).scrollLeft;return t?t.left+n:Rm(kc(e)).left+n}function ife(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-c5(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function BWe(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=kc(r),l=t?i5(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Xl(1);const f=Xl(0),m=fc(r);if((m||!m&&!a)&&((qy(r)!=="body"||o_(i))&&(c=l5(r)),fc(r))){const h=Rm(r);u=tg(r),f.x=h.x+r.clientLeft,f.y=h.y+r.clientTop}const p=i&&!m&&!a?ife(i,c):Xl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-c.scrollTop*u.y+f.y+p.y}}function $We(e){return Array.from(e.getClientRects())}function VWe(e){const t=kc(e),n=l5(e),r=e.ownerDocument.body,s=Lr(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Lr(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+c5(e);const l=-n.scrollTop;return rl(r).direction==="rtl"&&(i+=Lr(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}const TK=25;function WWe(e,t){const n=Bo(e),r=kc(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const f=jD();(!f||f&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=c5(r);if(u<=0){const f=r.ownerDocument,m=f.body,p=getComputedStyle(m),h=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,g=Math.abs(r.clientWidth-m.clientWidth-h);g<=TK&&(a-=g)}else u<=TK&&(a+=u);return{width:a,height:i,x:l,y:c}}const HWe=new Set(["absolute","fixed"]);function zWe(e,t){const n=Rm(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=fc(e)?tg(e):Xl(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function NK(e,t,n){let r;if(t==="viewport")r=WWe(e,n);else if(t==="document")r=VWe(kc(e));else if(nl(t))r=zWe(t,n);else{const s=ofe(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return dc(r)}function lfe(e,t){const n=Vd(e);return n===t||!nl(n)||Lg(n)?!1:rl(n).position==="fixed"||lfe(n,t)}function GWe(e,t){const n=t.get(e);if(n)return n;let r=M1(e,[],!1).filter(l=>nl(l)&&qy(l)!=="body"),s=null;const a=rl(e).position==="fixed";let i=a?Vd(e):e;for(;nl(i)&&!Lg(i);){const l=rl(i),c=ND(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&HWe.has(s.position)||o_(i)&&!c&&lfe(e,i))?r=r.filter(f=>f!==i):s=l,i=Vd(i)}return t.set(e,r),r}function qWe(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?i5(t)?[]:GWe(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,f)=>{const m=NK(t,f,s);return u.top=Lr(m.top,u.top),u.right=Ba(m.right,u.right),u.bottom=Ba(m.bottom,u.bottom),u.left=Lr(m.left,u.left),u},NK(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function KWe(e){const{width:t,height:n}=afe(e);return{width:t,height:n}}function YWe(e,t,n){const r=fc(t),s=kc(t),a=n==="fixed",i=Rm(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Xl(0);function u(){c.x=c5(s)}if(r||!r&&!a)if((qy(t)!=="body"||o_(s))&&(l=l5(t)),r){const h=Rm(t,!0,a,t);c.x=h.x+t.clientLeft,c.y=h.y+t.clientTop}else s&&u();a&&!r&&s&&u();const f=s&&!r&&!a?ife(s,l):Xl(0),m=i.left+l.scrollLeft-c.x-f.x,p=i.top+l.scrollTop-c.y-f.y;return{x:m,y:p,width:i.width,height:i.height}}function XN(e){return rl(e).position==="static"}function jK(e,t){if(!fc(e)||rl(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return kc(e)===n&&(n=n.ownerDocument.body),n}function cfe(e,t){const n=Bo(e);if(i5(e))return n;if(!fc(e)){let s=Vd(e);for(;s&&!Lg(s);){if(nl(s)&&!XN(s))return s;s=Vd(s)}return n}let r=jK(e,t);for(;r&&AWe(r)&&XN(r);)r=jK(r,t);return r&&Lg(r)&&XN(r)&&!ND(r)?n:r||OWe(e)||n}const QWe=async function(e){const t=this.getOffsetParent||cfe,n=this.getDimensions,r=await n(e.floating);return{reference:YWe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function XWe(e){return rl(e).direction==="rtl"}const ZWe={convertOffsetParentRelativeRectToViewportRelativeRect:BWe,getDocumentElement:kc,getClippingRect:qWe,getOffsetParent:cfe,getElementRects:QWe,getClientRects:$We,getDimensions:KWe,getScale:tg,isElement:nl,isRTL:XWe};function ufe(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function JWe(e,t){let n=null,r;const s=kc(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:f,top:m,width:p,height:h}=u;if(l||t(),!p||!h)return;const g=lC(m),y=lC(s.clientWidth-(f+p)),x=lC(s.clientHeight-(m+h)),v=lC(f),_={rootMargin:-g+"px "+-y+"px "+-x+"px "+-v+"px",threshold:Lr(0,Ba(1,c))||1};let w=!0;function C(S){const E=S[0].intersectionRatio;if(E!==c){if(!w)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!ufe(u,e.getBoundingClientRect())&&i(),w=!1}try{n=new IntersectionObserver(C,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,_)}n.observe(e)}return i(!0),a}function eHe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=AD(e),f=s||a?[...u?M1(u):[],...M1(t)]:[];f.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const m=u&&l?JWe(u,n):null;let p=-1,h=null;i&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let g,y=c?Rm(e):null;c&&x();function x(){const v=Rm(e);y&&!ufe(y,v)&&n(),y=v,g=requestAnimationFrame(x)}return n(),()=>{var v;f.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),m?.(),(v=h)==null||v.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const tHe=EWe,nHe=MWe,rHe=bWe,sHe=TWe,aHe=_We,AK=vWe,Orn=CWe,oHe=kWe,iHe=(e,t,n)=>{const r=new Map,s={platform:ZWe,...n},a={...s.platform,_c:r};return xWe(e,t,{...s,platform:a})};var lHe=typeof document<"u",cHe=function(){},e2=lHe?d.useLayoutEffect:cHe;function cE(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!cE(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!cE(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function dfe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function IK(e,t){const n=dfe(e);return Math.round(t*n)/n}function ZN(e){const t=d.useRef(e);return e2(()=>{t.current=e}),t}function uHe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,m]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=d.useState(r);cE(p,r)||h(r);const[g,y]=d.useState(null),[x,v]=d.useState(null),b=d.useCallback(L=>{L!==S.current&&(S.current=L,y(L))},[]),_=d.useCallback(L=>{L!==E.current&&(E.current=L,v(L))},[]),w=a||g,C=i||x,S=d.useRef(null),E=d.useRef(null),k=d.useRef(f),M=c!=null,j=ZN(c),R=ZN(s),O=ZN(u),D=d.useCallback(()=>{if(!S.current||!E.current)return;const L={placement:t,strategy:n,middleware:p};R.current&&(L.platform=R.current),iHe(S.current,E.current,L).then(U=>{const $={...U,isPositioned:O.current!==!1};P.current&&!cE(k.current,$)&&(k.current=$,ks.flushSync(()=>{m($)}))})},[p,t,n,R,O]);e2(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[u]);const P=d.useRef(!1);e2(()=>(P.current=!0,()=>{P.current=!1}),[]),e2(()=>{if(w&&(S.current=w),C&&(E.current=C),w&&C){if(j.current)return j.current(w,C,D);D()}},[w,C,D,j,M]);const A=d.useMemo(()=>({reference:S,floating:E,setReference:b,setFloating:_}),[b,_]),T=d.useMemo(()=>({reference:w,floating:C}),[w,C]),N=d.useMemo(()=>{const L={position:n,left:0,top:0};if(!T.floating)return L;const U=IK(T.floating,f.x),$=IK(T.floating,f.y);return l?{...L,transform:"translate("+U+"px, "+$+"px)",...dfe(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:$}},[n,l,T.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:D,refs:A,elements:T,floatingStyles:N}),[f,D,A,T,N])}const dHe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?AK({element:r.current,padding:s}).fn(n):{}:r?AK({element:r,padding:s}).fn(n):{}}}},fHe=(e,t)=>({...tHe(e),options:[e,t]}),mHe=(e,t)=>({...nHe(e),options:[e,t]}),pHe=(e,t)=>({...oHe(e),options:[e,t]}),hHe=(e,t)=>({...rHe(e),options:[e,t]}),gHe=(e,t)=>({...sHe(e),options:[e,t]}),yHe=(e,t)=>({...aHe(e),options:[e,t]}),xHe=(e,t)=>({...dHe(e),options:[e,t]});var vHe="Arrow",ffe=d.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...a}=e;return o.jsx(Xt.svg,{...a,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:o.jsx("polygon",{points:"0,0 30,0 15,10"})})});ffe.displayName=vHe;var bHe=ffe;function u5(e){const[t,n]=d.useState(void 0);return Cu(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const a=s[0];let i,l;if("borderBoxSize"in a){const c=a.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=e.offsetWidth,l=e.offsetHeight;n({width:i,height:l})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var ID="Popper",[mfe,cf]=Ca(ID),[_He,pfe]=mfe(ID),hfe=e=>{const{__scopePopper:t,children:n}=e,[r,s]=d.useState(null);return o.jsx(_He,{scope:t,anchor:r,onAnchorChange:s,children:n})};hfe.displayName=ID;var gfe="PopperAnchor",yfe=d.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,a=pfe(gfe,n),i=d.useRef(null),l=En(t,i),c=d.useRef(null);return d.useEffect(()=>{const u=c.current;c.current=r?.current||i.current,u!==c.current&&a.onAnchorChange(c.current)}),r?null:o.jsx(Xt.div,{...s,ref:l})});yfe.displayName=gfe;var RD="PopperContent",[wHe,CHe]=mfe(RD),xfe=d.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:a="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:m="partial",hideWhenDetached:p=!1,updatePositionStrategy:h="optimized",onPlaced:g,...y}=e,x=pfe(RD,n),[v,b]=d.useState(null),_=En(t,G=>b(G)),[w,C]=d.useState(null),S=u5(w),E=S?.width??0,k=S?.height??0,M=r+(a!=="center"?"-"+a:""),j=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},R=Array.isArray(u)?u:[u],O=R.length>0,D={padding:j,boundary:R.filter(EHe),altBoundary:O},{refs:P,floatingStyles:A,placement:T,isPositioned:N,middlewareData:L}=uHe({strategy:"fixed",placement:M,whileElementsMounted:(...G)=>eHe(...G,{animationFrame:h==="always"}),elements:{reference:x.anchor},middleware:[fHe({mainAxis:s+k,alignmentAxis:i}),c&&mHe({mainAxis:!0,crossAxis:!1,limiter:m==="partial"?pHe():void 0,...D}),c&&hHe({...D}),gHe({...D,apply:({elements:G,rects:ee,availableWidth:Y,availableHeight:te})=>{const{width:se,height:ae}=ee.reference,pe=G.floating.style;pe.setProperty("--radix-popper-available-width",`${Y}px`),pe.setProperty("--radix-popper-available-height",`${te}px`),pe.setProperty("--radix-popper-anchor-width",`${se}px`),pe.setProperty("--radix-popper-anchor-height",`${ae}px`)}}),w&&xHe({element:w,padding:l}),MHe({arrowWidth:E,arrowHeight:k}),p&&yHe({strategy:"referenceHidden",...D})]}),[U,$]=_fe(T),V=ma(g);Cu(()=>{N&&V?.()},[N,V]);const W=L.arrow?.x,Q=L.arrow?.y,q=L.arrow?.centerOffset!==0,[H,K]=d.useState();return Cu(()=>{v&&K(window.getComputedStyle(v).zIndex)},[v]),o.jsx("div",{ref:P.setFloating,"data-radix-popper-content-wrapper":"",style:{...A,transform:N?A.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:H,"--radix-popper-transform-origin":[L.transformOrigin?.x,L.transformOrigin?.y].join(" "),...L.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:o.jsx(wHe,{scope:n,placedSide:U,onArrowChange:C,arrowX:W,arrowY:Q,shouldHideArrow:q,children:o.jsx(Xt.div,{"data-side":U,"data-align":$,...y,ref:_,style:{...y.style,animation:N?void 0:"none"}})})})});xfe.displayName=RD;var vfe="PopperArrow",SHe={top:"bottom",right:"left",bottom:"top",left:"right"},bfe=d.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,a=CHe(vfe,r),i=SHe[a.placedSide];return o.jsx("span",{ref:a.onArrowChange,style:{position:"absolute",left:a.arrowX,top:a.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[a.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[a.placedSide],visibility:a.shouldHideArrow?"hidden":void 0},children:o.jsx(bHe,{...s,ref:n,style:{...s.style,display:"block"}})})});bfe.displayName=vfe;function EHe(e){return e!==null}var MHe=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,i=s.arrow?.centerOffset!==0,l=i?0:e.arrowWidth,c=i?0:e.arrowHeight,[u,f]=_fe(n),m={start:"0%",center:"50%",end:"100%"}[f],p=(s.arrow?.x??0)+l/2,h=(s.arrow?.y??0)+c/2;let g="",y="";return u==="bottom"?(g=i?m:`${p}px`,y=`${-c}px`):u==="top"?(g=i?m:`${p}px`,y=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,y=i?m:`${h}px`):u==="left"&&(g=`${r.floating.width+c}px`,y=i?m:`${h}px`),{data:{x:g,y}}}});function _fe(e){const[t,n="center"]=e.split("-");return[t,n]}var d5=hfe,i_=yfe,f5=xfe,m5=bfe,kHe="Portal",Ky=d.forwardRef((e,t)=>{const{container:n,...r}=e,[s,a]=d.useState(!1);Cu(()=>a(!0),[]);const i=n||s&&globalThis?.document?.body;return i?Ule.createPortal(o.jsx(Xt.div,{...r,ref:t}),i):null});Ky.displayName=kHe;function THe(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var es=e=>{const{present:t,children:n}=e,r=NHe(t),s=typeof n=="function"?n({present:r.isPresent}):d.Children.only(n),a=En(r.ref,jHe(s));return typeof n=="function"||r.isPresent?d.cloneElement(s,{ref:a}):null};es.displayName="Presence";function NHe(e){const[t,n]=d.useState(),r=d.useRef(null),s=d.useRef(e),a=d.useRef("none"),i=e?"mounted":"unmounted",[l,c]=THe(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return d.useEffect(()=>{const u=cC(r.current);a.current=l==="mounted"?u:"none"},[l]),Cu(()=>{const u=r.current,f=s.current;if(f!==e){const p=a.current,h=cC(u);e?c("MOUNT"):h==="none"||u?.display==="none"?c("UNMOUNT"):c(f&&p!==h?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,c]),Cu(()=>{if(t){let u;const f=t.ownerDocument.defaultView??window,m=h=>{const y=cC(r.current).includes(CSS.escape(h.animationName));if(h.target===t&&y&&(c("ANIMATION_END"),!s.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",u=f.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},p=h=>{h.target===t&&(a.current=cC(r.current))};return t.addEventListener("animationstart",p),t.addEventListener("animationcancel",m),t.addEventListener("animationend",m),()=>{f.clearTimeout(u),t.removeEventListener("animationstart",p),t.removeEventListener("animationcancel",m),t.removeEventListener("animationend",m)}}else c("ANIMATION_END")},[t,c]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:d.useCallback(u=>{r.current=u?getComputedStyle(u):null,n(u)},[])}}function cC(e){return e?.animationName||"none"}function jHe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var AHe=EO[" useInsertionEffect ".trim().toString()]||Cu;function Ni({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,a,i]=IHe({defaultProp:t,onChange:n}),l=e!==void 0,c=l?e:s;{const f=d.useRef(e!==void 0);d.useEffect(()=>{const m=f.current;m!==l&&console.warn(`${r} is changing from ${m?"controlled":"uncontrolled"} to ${l?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=l},[l,r])}const u=d.useCallback(f=>{if(l){const m=RHe(f)?f(e):f;m!==e&&i.current?.(m)}else a(f)},[l,e,a,i]);return[c,u]}function IHe({defaultProp:e,onChange:t}){const[n,r]=d.useState(e),s=d.useRef(n),a=d.useRef(t);return AHe(()=>{a.current=t},[t]),d.useEffect(()=>{s.current!==n&&(a.current?.(n),s.current=n)},[n,s]),[n,r,a]}function RHe(e){return typeof e=="function"}var PHe=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),LHe="VisuallyHidden",l_=d.forwardRef((e,t)=>o.jsx(Xt.span,{...e,ref:t,style:{...PHe,...e.style}}));l_.displayName=LHe;var PD=l_,[p5,Drn]=Ca("Tooltip",[cf]),h5=cf(),wfe="TooltipProvider",OHe=700,CP="tooltip.open",[DHe,LD]=p5(wfe),OD=e=>{const{__scopeTooltip:t,delayDuration:n=OHe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:a}=e,i=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),o.jsx(DHe,{scope:t,isOpenDelayedRef:i,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:a})};OD.displayName=wfe;var k1="Tooltip",[FHe,c_]=p5(k1),Cfe=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:a,disableHoverableContent:i,delayDuration:l}=e,c=LD(k1,e.__scopeTooltip),u=h5(t),[f,m]=d.useState(null),p=fo(),h=d.useRef(0),g=i??c.disableHoverableContent,y=l??c.delayDuration,x=d.useRef(!1),[v,b]=Ni({prop:r,defaultProp:s??!1,onChange:E=>{E?(c.onOpen(),document.dispatchEvent(new CustomEvent(CP))):c.onClose(),a?.(E)},caller:k1}),_=d.useMemo(()=>v?x.current?"delayed-open":"instant-open":"closed",[v]),w=d.useCallback(()=>{window.clearTimeout(h.current),h.current=0,x.current=!1,b(!0)},[b]),C=d.useCallback(()=>{window.clearTimeout(h.current),h.current=0,b(!1)},[b]),S=d.useCallback(()=>{window.clearTimeout(h.current),h.current=window.setTimeout(()=>{x.current=!0,b(!0),h.current=0},y)},[y,b]);return d.useEffect(()=>()=>{h.current&&(window.clearTimeout(h.current),h.current=0)},[]),o.jsx(d5,{...u,children:o.jsx(FHe,{scope:t,contentId:p,open:v,stateAttribute:_,trigger:f,onTriggerChange:m,onTriggerEnter:d.useCallback(()=>{c.isOpenDelayedRef.current?S():w()},[c.isOpenDelayedRef,S,w]),onTriggerLeave:d.useCallback(()=>{g?C():(window.clearTimeout(h.current),h.current=0)},[C,g]),onOpen:w,onClose:C,disableHoverableContent:g,children:n})})};Cfe.displayName=k1;var SP="TooltipTrigger",DD=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=c_(SP,n),a=LD(SP,n),i=h5(n),l=d.useRef(null),c=En(t,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),m=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",m),[m]),o.jsx(i_,{asChild:!0,...i,children:o.jsx(Xt.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:it(e.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!a.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:it(e.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:it(e.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",m,{once:!0})}),onFocus:it(e.onFocus,()=>{u.current||s.onOpen()}),onBlur:it(e.onBlur,s.onClose),onClick:it(e.onClick,s.onClose)})})});DD.displayName=SP;var FD="TooltipPortal",[UHe,BHe]=p5(FD,{forceMount:void 0}),UD=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,a=c_(FD,t);return o.jsx(UHe,{scope:t,forceMount:n,children:o.jsx(es,{present:n||a.open,children:o.jsx(Ky,{asChild:!0,container:s,children:r})})})};UD.displayName=FD;var Og="TooltipContent",BD=d.forwardRef((e,t)=>{const n=BHe(Og,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...a}=e,i=c_(Og,e.__scopeTooltip);return o.jsx(es,{present:r||i.open,children:i.disableHoverableContent?o.jsx(Sfe,{side:s,...a,ref:t}):o.jsx($He,{side:s,...a,ref:t})})}),$He=d.forwardRef((e,t)=>{const n=c_(Og,e.__scopeTooltip),r=LD(Og,e.__scopeTooltip),s=d.useRef(null),a=En(t,s),[i,l]=d.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:m}=r,p=d.useCallback(()=>{l(null),m(!1)},[m]),h=d.useCallback((g,y)=>{const x=g.currentTarget,v={x:g.clientX,y:g.clientY},b=zHe(v,x.getBoundingClientRect()),_=GHe(v,b),w=qHe(y.getBoundingClientRect()),C=YHe([..._,...w]);l(C),m(!0)},[m]);return d.useEffect(()=>()=>p(),[p]),d.useEffect(()=>{if(c&&f){const g=x=>h(x,f),y=x=>h(x,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",y),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",y)}}},[c,f,h,p]),d.useEffect(()=>{if(i){const g=y=>{const x=y.target,v={x:y.clientX,y:y.clientY},b=c?.contains(x)||f?.contains(x),_=!KHe(v,i);b?p():_&&(p(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,i,u,p]),o.jsx(Sfe,{...e,ref:a})}),[VHe,WHe]=p5(k1,{isInside:!1}),HHe=YVe("TooltipContent"),Sfe=d.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:a,onPointerDownOutside:i,...l}=e,c=c_(Og,n),u=h5(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(CP,f),()=>document.removeEventListener(CP,f)),[f]),d.useEffect(()=>{if(c.trigger){const m=p=>{p.target?.contains(c.trigger)&&f()};return window.addEventListener("scroll",m,{capture:!0}),()=>window.removeEventListener("scroll",m,{capture:!0})}},[c.trigger,f]),o.jsx(Gy,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:a,onPointerDownOutside:i,onFocusOutside:m=>m.preventDefault(),onDismiss:f,children:o.jsxs(f5,{"data-state":c.stateAttribute,...u,...l,ref:t,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[o.jsx(HHe,{children:r}),o.jsx(VHe,{scope:n,isInside:!0,children:o.jsx(PD,{id:c.contentId,role:"tooltip",children:s||r})})]})})});BD.displayName=Og;var Efe="TooltipArrow",uE=d.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=h5(n);return WHe(Efe,n).isInside?null:o.jsx(m5,{...s,...r,ref:t})});uE.displayName=Efe;function zHe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),a=Math.abs(t.left-e.x);switch(Math.min(n,r,s,a)){case a:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function GHe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function qHe(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function KHe(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,f=l.y,m=c.x,p=c.y;f>r!=p>r&&n<(m-u)*(r-f)/(p-f)+u&&(s=!s)}return s}function YHe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),QHe(t)}function QHe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const a=t[t.length-1],i=t[t.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const a=n[n.length-1],i=n[n.length-2];if((a.x-i.x)*(s.y-i.y)>=(a.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var XHe=OD,$D=Cfe,Mfe=DD,kfe=UD,Tfe=BD,Nfe=uE;const jfe=new Proxy(Object.freeze([]),{set(){throw new Error("Cannot modify default array")}}),ce=jfe,Afe=new Proxy(Object.freeze({}),{set(){throw new Error("Cannot modify default object")}}),Ife=I.memo(({className:e,textClassName:t,text:n,shortcut:r=ce,...s})=>o.jsxs("div",{className:B("gap-x-sm bg-dark dark:border-subtler flex max-w-[280px] items-center rounded-md px-2 py-1.5 shadow-sm dark:border",e),...s,children:[typeof n=="string"?o.jsx(F,{variant:"tiny",color:"white",className:t,children:n}):n,r.length>0&&o.jsx("div",{className:"gap-xs flex",children:r.map(a=>o.jsx(F,{variant:"smallCaps",className:"border-subtlest bg-subtle px-xs py-two min-w-6 rounded border text-center shadow-sm",children:o.jsx("span",{className:"text-light",children:a})},a))})]}));Ife.displayName="TooltipBody";const bn=I.memo(({tooltipText:e,tooltipLayout:t="top",children:n,keyboardShortcut:r,showTooltip:s=!0,className:a="",asChild:i=!1,testId:l,offset:c=8,closeOnClick:u=!0,bodyClassName:f,bodyTextClassName:m,arrowClassName:p,open:h,onClickOutsideTooltip:g,onOpenChange:y,delayDuration:x})=>s?o.jsxs($D,{open:h,onOpenChange:y,delayDuration:x,children:[o.jsx(kfe,{children:o.jsxs(Tfe,{side:t,sideOffset:c,className:B(t==="bottom"&&"data-[state=closed]:animate-slideUpAndFadeOut data-[state=delayed-open]:animate-slideDownAndFadeIn",t==="top"&&"data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn",t==="left"&&"data-[state=closed]:animate-slideRightAndFadeOut data-[state=delayed-open]:animate-slideLeftAndFadeIn",t==="right"&&"data-[state=closed]:animate-slideLeftAndFadeOut data-[state=delayed-open]:animate-slideRightAndFadeIn",a),onPointerDownOutside:u?g:b=>{b.preventDefault()},children:[o.jsx(Ife,{text:e,shortcut:r,"data-test-id":l,className:f,textClassName:m}),p&&o.jsx(Nfe,{width:12,height:6,className:B("overflow-hidden translate-y-[-2px] [clip-path:inset(1px_1px_0px_1px)] fill-[oklch(var(--dark-background-base-color))] dark:stroke-[1.5px] dark:stroke-subtler",p)})]})}),o.jsx(Mfe,{asChild:i,onClick:u?g:b=>{b.preventDefault()},children:n})]}):o.jsx(o.Fragment,{children:n}));bn.displayName="TooltipWrapper";const ZHe=2e3,JHe=1e3,RK={[Yt.tiny]:{height:"h-6",text:"text-xs",padding:"px-2",iconWrapperSize:"size-3.5",baselineShift:"-mb-px"},[Yt.small]:{height:"h-8",text:"text-sm",padding:"px-2.5",iconWrapperSize:"size-4",baselineShift:"-mb-px"},[Yt.regular]:{height:"h-10",text:"text-base",padding:"px-3",iconWrapperSize:"size-5",baselineShift:"mb-[-2px]"},[Yt.large]:{height:"h-14",text:"text-lg",padding:"px-5",iconWrapperSize:"size-7",baselineShift:"mb-[-3px]"}},Rfe=e=>RK[e]||RK[Yt.regular],PK=({children:e,buttonSize:t=Yt.regular})=>o.jsx("div",{className:B("flex shrink-0 items-center justify-center",Rfe(t).iconWrapperSize),children:e}),VD=d.memo(e=>{const{text:t,textClassName:n="",size:r=Yt.regular,disabled:s=!1,fullWidth:a,fullWidthMobile:i,layout:l="center",type:c="button",noWrap:u=!0,onClick:f=vn,onMouseDown:m,href:p,target:h,extraCSS:g,icon:y,iconClassName:x,pill:v=!1,noRounded:b=!1,toolTip:_,keyboardShortcut:w,tooltipLayout:C="top",tooltipProps:S,badge:E,chevron:k,isLoading:M,loadingVariant:j="spin",leadingComponent:R,trailingComponent:O,maxWidth:D,chevronIcon:P=Wn,clickFeedback:A=!1,debounce:T=!1,testId:N,ariaLabel:L,variant:U,autoFocus:$,noPadding:V=!1,ref:W,...Q}=e,[q,H]=d.useState(!1),[K,G]=d.useState(!1),[ee,Y]=d.useState(s),te=d.useMemo(()=>Rfe(r),[r]);d.useEffect(()=>{Y(T&&K||s)},[T,K,s]);const se=Ne=>{(!T||!K)&&(G(!0),setTimeout(()=>G(!1),JHe),f(Ne)),A&&(H(!0),setTimeout(()=>H(!1),ZHe))},ae=!!t,pe=d.useMemo(()=>B(g,"font-sans focus:outline-none outline-none outline-transparent transition duration-300 ease-out select-none items-center relative group/button font-semimedium",{"justify-center text-center items-center":l==="center","justify-start":l==="left","rounded-none":b,"rounded-lg":!v&&!b,"rounded-full":v&&!b,"cursor-default opacity-50":ee,"cursor-pointer active:scale-[0.97] active:duration-150 active:ease-outExpo origin-center":!ee,"whitespace-nowrap":u,"break-words":!u,"flex w-full":a,"inline-flex":!a&&!i,"flex w-full md:inline-flex md:w-auto":i,[te.text]:!0,[te.height]:!0,[te.padding]:ae,[v?"aspect-square":"aspect-[9/8]"]:!ae&&!k&&!E&&!(y&&R)}),[E,te,k,ee,g,a,i,ae,y,l,R,b,u,v]),fe=d.useMemo(()=>B("flex items-center min-w-0 gap-two",{"flex-col":l==="stacked","justify-center":l==="center","justify-left":l==="left","justify-between":l==="split","w-full":a,"gap-sm":l==="stacked"}),[a,l]),ge=d.useMemo(()=>l==="stacked"||r===Yt.regular&&!ae||r===Yt.large&&ae?16:14,[l,r,ae]),Se=o.jsxs("div",{className:fe,style:{maxWidth:D},children:[R&&o.jsx("div",{children:R}),M&&o.jsx(PK,{buttonSize:r,children:j==="spin"?o.jsx(Fr,{size:ge}):j==="pulse"?o.jsx("div",{className:B("relative flex items-center justify-center",U==="primary"?"text-inverse":"text-super"),children:o.jsxs("div",{className:"relative scale-[0.8]",children:[o.jsx(k0,{icon:$R,buttonSize:r}),o.jsx(k0,{icon:$R,buttonSize:r,iconClassName:"duration-1200 absolute inset-0 animate-ping"})]})}):null}),!M&&y&&o.jsx(PK,{buttonSize:r,children:o.jsx(k0,{icon:y,showClicked:q,buttonSize:r,iconClassName:x})}),t&&o.jsx("div",{className:B("relative truncate text-center",{"px-1":!V,"leading-loose":l!=="stacked","leading-none":l==="stacked"},te.baselineShift,n),children:t}),E&&o.jsxs("span",{children:["  ",E]}),k&&o.jsx(de,{size:"xs",icon:P,className:"shrink-0 opacity-50"}),O]});let je;y&&!t&&_&&(je=_);const ye=d.useMemo(()=>({WebkitTapHighlightColor:"transparent"}),[]);let be;return p!==void 0?be=o.jsx(qe,{"data-testid":N,role:"button","aria-label":L??je,href:p,className:pe,target:h,onClick:f,onMouseDown:m,style:ye,...Q,ref:W,children:Se}):be=o.jsx("button",{"data-testid":N,"aria-label":L??je,type:c,disabled:ee,onClick:se,onMouseDown:m,className:pe,...Q,ref:W,children:Se}),w||_?o.jsx(bn,{tooltipText:_??"",keyboardShortcut:w,tooltipLayout:C,...S,asChild:!0,children:be}):be});VD.displayName="ButtonBase";const Me=d.memo(({variant:e="common",noPadding:t,noXPadding:n,extraCSS:r,...s})=>{const a=d.useMemo(()=>B("focus-visible:bg-subtle",{"!p-0 !h-auto hover:!bg-transparent":t},{"!px-0 hover:!bg-transparent":n},{super:"hover:bg-subtle text-super dark:hover:bg-subtle",primary:"hover:bg-subtle text-foreground dark:hover:bg-subtle",common:"hover:bg-subtle text-quiet  hover:text-foreground dark:hover:bg-subtle",positive:"text-quiet  hover:bg-subtle hover:text-super",positiveSelected:"text-super hover:bg-subtle hover:text-super",negative:"text-quiet hover:bg-subtle hover:text-caution",negativeSelected:"text-caution dark:text-caution hover:bg-subtle hover:text-caution",noBackground:"text-quiet hover:text-foreground",noHover:"text-quiet  cursor-default",subtle:"text-foreground bg-subtle"}[e],r),[r,e,t,n]);return o.jsx(VD,{testId:s.testId,extraCSS:a,...s})});Me.displayName="TextButton";const eze=d.createContext(null),JN={didCatch:!1,error:null};let tze=class extends d.Component{constructor(t){super(t),this.resetErrorBoundary=this.resetErrorBoundary.bind(this),this.state=JN}static getDerivedStateFromError(t){return{didCatch:!0,error:t}}resetErrorBoundary(){const{error:t}=this.state;if(t!==null){for(var n,r,s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];(n=(r=this.props).onReset)===null||n===void 0||n.call(r,{args:a,reason:"imperative-api"}),this.setState(JN)}}componentDidCatch(t,n){var r,s;(r=(s=this.props).onError)===null||r===void 0||r.call(s,t,n)}componentDidUpdate(t,n){const{didCatch:r}=this.state,{resetKeys:s}=this.props;if(r&&n.error!==null&&nze(t.resetKeys,s)){var a,i;(a=(i=this.props).onReset)===null||a===void 0||a.call(i,{next:s,prev:t.resetKeys,reason:"keys"}),this.setState(JN)}}render(){const{children:t,fallbackRender:n,FallbackComponent:r,fallback:s}=this.props,{didCatch:a,error:i}=this.state;let l=t;if(a){const c={error:i,resetErrorBoundary:this.resetErrorBoundary};if(d.isValidElement(s))l=s;else if(typeof n=="function")l=n(c);else if(r)l=d.createElement(r,c);else throw i}return d.createElement(eze.Provider,{value:{didCatch:a,error:i,resetErrorBoundary:this.resetErrorBoundary}},l)}};function nze(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return e.length!==t.length||e.some((n,r)=>!Object.is(n,t[r]))}const u_={transparent:"transparent",subtle:"subtle",subtler:"subtler",background:"background"},rze="border-subtlest ring-subtlest divide-subtlest",z=I.memo(({variant:e=u_.transparent,className:t,onClick:n,onMouseOver:r,onMouseLeave:s,children:a,id:i,bgHover:l,style:c,testId:u,as:f="div",ref:m,noBorder:p,...h})=>{const g=I.useMemo(()=>{const y={transparent:"bg-transparent",super:"bg-super",superBorder:"border border-super",superLight:"bg-super/10",subtle:"bg-subtle",subtler:"bg-subtler",red:"bg-caution",background:"bg-base",underlay:"bg-underlay",offsetLoading:"bg-subtlest animate-pulse",textColor:"bg-inverse",orange:"bg-attention",raised:"bg-raised dark:bg-offset",raisedOffset:"bg-raisedOffset",max:"bg-max",maxBorder:"border border-max"},x={subtle:"md:hover:!bg-subtle",subtler:"md:hover:!bg-subtler",raisedOffset:"md:hover:!bg-raisedOffset",transparent:"md:hover:!bg-transparent",super:"md:hover:!bg-super"};return B(t,!p&&e!=="maxBorder"&&e!=="superBorder"&&rze,l?"transition duration-normal":"",y[e]||y.transparent,l&&x[l]||"")},[l,t,e,p]);return I.createElement(f,{id:i,ref:m,className:g,onClick:n,onMouseOver:r,onMouseLeave:s,style:c,"data-testid":u,...h},a)});z.displayName="Box";const me=d.memo(e=>{const{variant:t="common",disabled:n,extraCSS:r,...s}=e,{buttonClass:a}=d.useMemo(()=>{const i={disabled:"bg-inverse/15 text-quiet",primary:"bg-super text-inverse hover:opacity-80",primaryGhost:"border border-super/20 bg-super/10 hover:bg-super/20 hover:border-super/30 text-super",common:"bg-subtle text-foreground md:hover:text-quiet",border:"border border-subtler text-quiet md:hover:border-subtle md:hover:text-quiet hover:bg-subtler bg-base",inverted:"bg-inverse text-inverse hover:opacity-80",rejecter:"border border-subtlest text-caution dark:hover:text-foreground hover:bg-caution/30 hover:border-caution/20 bg-base",rejected:"bg-caution hover:opacity-50 text-white",orange:"bg-attention text-white hover:opacity-50",maxGold:"bg-max dark:text-inverse hover:opacity-80"},l=n?i.disabled:i[t];return{buttonClass:B(l,r)}},[t,n,r]);return o.jsx(VD,{extraCSS:a,disabled:n,variant:t,...s})});me.displayName="Button";class sze extends Ob{name="ReactRenderingError"}function g5(e){ne.info("Reloading window",{reason:e,url:window.location.href}),window.location.reload()}const aze=()=>g5("Error boundary"),oze=({resetErrorBoundary:e})=>{const{$t:t}=Z(),n=d.useCallback(()=>{e()},[e]);return o.jsx(z,{variant:"background",className:"overflow-hidden rounded-xl",children:o.jsxs(z,{variant:"subtler",className:"px-md flex w-full items-center justify-between py-3",children:[o.jsx(F,{variant:"smallBold",children:t({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})}),o.jsx(me,{size:"tiny",text:t({defaultMessage:"Retry",id:"62nsdyMyIO"}),type:"button",onClick:n})]})})},Pfe=I.memo(()=>null);Pfe.displayName="NullFallback";const ize=/load(.*?)chunk/i,Nr=I.memo(({fallback:e=oze,children:t,onError:n,code:r="REACT_RENDERING_ERROR"})=>{const s=d.useCallback((a,i)=>{n?.(a,i);let l;if(a instanceof Ob)l=a;else{let c=r;ize.test(a?.message??"")&&(c="CHUNK_LOADING_ERROR"),l=new sze(c,{message:a.message,cause:a})}l.stack=i.componentStack||void 0,ne.error(l)},[n,r]);return o.jsx(tze,{FallbackComponent:e||Pfe,onError:s,onReset:aze,children:t})});Nr.displayName="ErrorBoundary";const Lfe=({shouldShow:e,imageSrc:t,imageAlt:n,title:r,description:s,primaryAction:a,onDismiss:i,iconXDismiss:l})=>{const c=BVe();return!e||!c?null:o.jsx(Nr,{fallback:null,children:o.jsxs(ve.div,{className:"p-sm m-md ring-subtlest dark:ring-subtler bg-base gap-md fixed bottom-0 right-0 hidden max-w-[320px] grid-cols-1 rounded-xl shadow-md ring-1 md:grid",initial:{opacity:0,y:0},animate:{opacity:1,y:0},transition:{duration:.5},children:[t&&o.jsx("img",{src:t,alt:n,className:"bg-subtle size-full rounded-lg object-cover",style:{aspectRatio:"528/240"}}),l&&o.jsx("div",{className:"right-md top-md absolute",children:o.jsx(Me,{size:"small",icon:kt,onClick:i,noPadding:!0,iconClassName:t?"text-white":void 0,"data-testid":"floating-card-upsell-dismiss"})}),o.jsxs("div",{className:B("px-sm",{"pt-sm":!t}),children:[o.jsx(F,{variant:"smallBold",className:"mb-xs pr-md",children:r}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"whitespace-pre-line leading-snug",children:s})]}),o.jsxs("div",{className:B("px-sm pb-sm gap-xs flex flex-row",t?"ml-auto":"mr-auto"),children:[!l&&o.jsx(Me,{variant:"common",size:"small",onClick:i,text:"Dismiss"}),a]})]})})};var pp=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Pm=typeof window>"u"||"Deno"in globalThis;function mi(){}function lze(e,t){return typeof e=="function"?e(t):e}function EP(e){return typeof e=="number"&&e>=0&&e!==1/0}function Ofe(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ng(e,t){return typeof e=="function"?e(t):e}function zi(e,t){return typeof e=="function"?e(t):e}function LK(e,t){const{type:n="all",exact:r,fetchStatus:s,predicate:a,queryKey:i,stale:l}=e;if(i){if(r){if(t.queryHash!==WD(i,t.options))return!1}else if(!T1(t.queryKey,i))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||s&&s!==t.state.fetchStatus||a&&!a(t))}function OK(e,t){const{exact:n,status:r,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(n){if(Lm(t.options.mutationKey)!==Lm(a))return!1}else if(!T1(t.options.mutationKey,a))return!1}return!(r&&t.state.status!==r||s&&!s(t))}function WD(e,t){return(t?.queryKeyHashFn||Lm)(e)}function Lm(e){return JSON.stringify(e,(t,n)=>MP(n)?Object.keys(n).sort().reduce((r,s)=>(r[s]=n[s],r),{}):n)}function T1(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?!Object.keys(t).some(n=>!T1(e[n],t[n])):!1}function HD(e,t){if(e===t)return e;const n=DK(e)&&DK(t);if(n||MP(e)&&MP(t)){const r=n?e:Object.keys(e),s=r.length,a=n?t:Object.keys(t),i=a.length,l=n?[]:{};let c=0;for(let u=0;u<i;u++){const f=n?u:a[u];(!n&&r.includes(f)||n)&&e[f]===void 0&&t[f]===void 0?(l[f]=void 0,c++):(l[f]=HD(e[f],t[f]),l[f]===e[f]&&e[f]!==void 0&&c++)}return s===i&&c===s?e:l}return t}function dE(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function DK(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function MP(e){if(!FK(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!FK(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function FK(e){return Object.prototype.toString.call(e)==="[object Object]"}function cze(e){return new Promise(t=>{setTimeout(t,e)})}function kP(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?HD(e,t):t}function Pu(e){return e}function uze(e,t,n=0){const r=[...e,t];return n&&r.length>n?r.slice(1):r}function dze(e,t,n=0){const r=[t,...e];return n&&r.length>n?r.slice(0,-1):r}var Dfe=Symbol(),Ffe=(e,t)=>!e.queryFn&&t?.initialPromise?()=>t.initialPromise:!e.queryFn||e.queryFn===Dfe?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn,fze=class extends pp{#e;#t;#r;constructor(){super(),this.#r=e=>{if(!Pm&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(t=>{typeof t=="boolean"?this.setFocused(t):this.onFocus()})}setFocused(e){this.#e!==e&&(this.#e=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return typeof this.#e=="boolean"?this.#e:globalThis.document?.visibilityState!=="hidden"}},zD=new fze,mze=class extends pp{#e=!0;#t;#r;constructor(){super(),this.#r=e=>{if(!Pm&&window.addEventListener){const t=()=>e(!0),n=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",n,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n)}}}}onSubscribe(){this.#t||this.setEventListener(this.#r)}onUnsubscribe(){this.hasListeners()||(this.#t?.(),this.#t=void 0)}setEventListener(e){this.#r=e,this.#t?.(),this.#t=e(this.setOnline.bind(this))}setOnline(e){this.#e!==e&&(this.#e=e,this.listeners.forEach(n=>{n(e)}))}isOnline(){return this.#e}},fE=new mze;function pze(e){return Math.min(1e3*2**e,3e4)}function Ufe(e){return(e??"online")==="online"?fE.isOnline():!0}var Bfe=class{constructor(e){this.revert=e?.revert,this.silent=e?.silent}};function ej(e){return e instanceof Bfe}function $fe(e){let t=!1,n=0,r=!1,s,a,i;const l=new Promise((v,b)=>{a=v,i=b}),c=v=>{r||(g(new Bfe(v)),e.abort?.())},u=()=>{t=!0},f=()=>{t=!1},m=()=>zD.isFocused()&&(e.networkMode==="always"||fE.isOnline())&&e.canRun(),p=()=>Ufe(e.networkMode)&&e.canRun(),h=v=>{r||(r=!0,e.onSuccess?.(v),s?.(),a(v))},g=v=>{r||(r=!0,e.onError?.(v),s?.(),i(v))},y=()=>new Promise(v=>{s=b=>{(r||m())&&v(b)},e.onPause?.()}).then(()=>{s=void 0,r||e.onContinue?.()}),x=()=>{if(r)return;let v;const b=n===0?e.initialPromise:void 0;try{v=b??e.fn()}catch(_){v=Promise.reject(_)}Promise.resolve(v).then(h).catch(_=>{if(r)return;const w=e.retry??(Pm?0:3),C=e.retryDelay??pze,S=typeof C=="function"?C(n,_):C,E=w===!0||typeof w=="number"&&n<w||typeof w=="function"&&w(n,_);if(t||!E){g(_);return}n++,e.onFail?.(n,_),cze(S).then(()=>m()?void 0:y()).then(()=>{t?g(_):x()})})};return{promise:l,cancel:c,continue:()=>(s?.(),l),cancelRetry:u,continueRetry:f,canStart:p,start:()=>(p()?x():y().then(x),l)}}function hze(){let e=[],t=0,n=p=>{p()},r=p=>{p()},s=p=>setTimeout(p,0);const a=p=>{s=p},i=p=>{let h;t++;try{h=p()}finally{t--,t||u()}return h},l=p=>{t?e.push(p):s(()=>{n(p)})},c=p=>(...h)=>{l(()=>{p(...h)})},u=()=>{const p=e;e=[],p.length&&s(()=>{r(()=>{p.forEach(h=>{n(h)})})})};return{batch:i,batchCalls:c,schedule:l,setNotifyFunction:p=>{n=p},setBatchNotifyFunction:p=>{r=p},setScheduler:a}}var Or=hze(),Vfe=class{#e;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),EP(this.gcTime)&&(this.#e=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Pm?1/0:5*60*1e3))}clearGcTimeout(){this.#e&&(clearTimeout(this.#e),this.#e=void 0)}},gze=class extends Vfe{#e;#t;#r;#n;#a;#o;constructor(e){super(),this.#o=!1,this.#a=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#r=e.cache,this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#e=e.state||yze(this.options),this.state=this.#e,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#n?.promise}setOptions(e){this.options={...this.#a,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#r.remove(this)}setData(e,t){const n=kP(this.state.data,e,this.options);return this.#s({data:n,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),n}setState(e,t){this.#s({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#n?.promise;return this.#n?.cancel(e),t?t.then(mi).catch(mi):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#e)}isActive(){return this.observers.some(e=>zi(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0&&!this.isActive()}isStale(){return this.state.isInvalidated?!0:this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0}isStaleByTime(e=0){return this.state.isInvalidated||this.state.data===void 0||!Ofe(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(t=>t.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#n?.continue()}onOnline(){this.observers.find(t=>t.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#n?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#r.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#n&&(this.#o?this.#n.cancel({revert:!0}):this.#n.cancelRetry()),this.scheduleGc()),this.#r.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#s({type:"invalidate"})}fetch(e,t){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#n)return this.#n.continueRetry(),this.#n.promise}if(e&&this.setOptions(e),!this.options.queryFn){const l=this.observers.find(c=>c.options.queryFn);l&&this.setOptions(l.options)}const n=new AbortController,r=l=>{Object.defineProperty(l,"signal",{enumerable:!0,get:()=>(this.#o=!0,n.signal)})},s=()=>{const l=Ffe(this.options,t),c={queryKey:this.queryKey,meta:this.meta};return r(c),this.#o=!1,this.options.persister?this.options.persister(l,c,this):l(c)},a={fetchOptions:t,options:this.options,queryKey:this.queryKey,state:this.state,fetchFn:s};r(a),this.options.behavior?.onFetch(a,this),this.#t=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==a.fetchOptions?.meta)&&this.#s({type:"fetch",meta:a.fetchOptions?.meta});const i=l=>{ej(l)&&l.silent||this.#s({type:"error",error:l}),ej(l)||(this.#r.config.onError?.(l,this),this.#r.config.onSettled?.(this.state.data,l,this)),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1};return this.#n=$fe({initialPromise:t?.initialPromise,fn:a.fetchFn,abort:n.abort.bind(n),onSuccess:l=>{if(l===void 0){i(new Error(`${this.queryHash} data is undefined`));return}this.setData(l),this.#r.config.onSuccess?.(l,this),this.#r.config.onSettled?.(l,this.state.error,this),this.isFetchingOptimistic||this.scheduleGc(),this.isFetchingOptimistic=!1},onError:i,onFail:(l,c)=>{this.#s({type:"failed",failureCount:l,error:c})},onPause:()=>{this.#s({type:"pause"})},onContinue:()=>{this.#s({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0}),this.#n.start()}#s(e){const t=n=>{switch(e.type){case"failed":return{...n,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...n,fetchStatus:"paused"};case"continue":return{...n,fetchStatus:"fetching"};case"fetch":return{...n,...Wfe(n.data,this.options),fetchMeta:e.meta??null};case"success":return{...n,data:e.data,dataUpdateCount:n.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return ej(r)&&r.revert&&this.#t?{...this.#t,fetchStatus:"idle"}:{...n,error:r,errorUpdateCount:n.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:n.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...n,isInvalidated:!0};case"setState":return{...n,...e.state}}};this.state=t(this.state),Or.batch(()=>{this.observers.forEach(n=>{n.onQueryUpdate()}),this.#r.notify({query:this,type:"updated",action:e})})}};function Wfe(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ufe(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function yze(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,r=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var Hfe=class extends pp{constructor(e={}){super(),this.config=e,this.#e=new Map}#e;build(e,t,n){const r=t.queryKey,s=t.queryHash??WD(r,t);let a=this.get(s);return a||(a=new gze({cache:this,queryKey:r,queryHash:s,options:e.defaultQueryOptions(t),state:n,defaultOptions:e.getQueryDefaults(r)}),this.add(a)),a}add(e){this.#e.has(e.queryHash)||(this.#e.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#e.get(e.queryHash);t&&(e.destroy(),t===e&&this.#e.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Or.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#e.get(e)}getAll(){return[...this.#e.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(n=>LK(t,n))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(n=>LK(e,n)):t}notify(e){Or.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Or.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Or.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},xze=class extends Vfe{#e;#t;#r;constructor(e){super(),this.mutationId=e.mutationId,this.#t=e.mutationCache,this.#e=[],this.state=e.state||zfe(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#e.includes(e)||(this.#e.push(e),this.clearGcTimeout(),this.#t.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#e=this.#e.filter(t=>t!==e),this.scheduleGc(),this.#t.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#e.length||(this.state.status==="pending"?this.scheduleGc():this.#t.remove(this))}continue(){return this.#r?.continue()??this.execute(this.state.variables)}async execute(e){this.#r=$fe({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(r,s)=>{this.#n({type:"failed",failureCount:r,error:s})},onPause:()=>{this.#n({type:"pause"})},onContinue:()=>{this.#n({type:"continue"})},retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#t.canRun(this)});const t=this.state.status==="pending",n=!this.#r.canStart();try{if(!t){this.#n({type:"pending",variables:e,isPaused:n}),await this.#t.config.onMutate?.(e,this);const s=await this.options.onMutate?.(e);s!==this.state.context&&this.#n({type:"pending",context:s,variables:e,isPaused:n})}const r=await this.#r.start();return await this.#t.config.onSuccess?.(r,e,this.state.context,this),await this.options.onSuccess?.(r,e,this.state.context),await this.#t.config.onSettled?.(r,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(r,null,e,this.state.context),this.#n({type:"success",data:r}),r}catch(r){try{throw await this.#t.config.onError?.(r,e,this.state.context,this),await this.options.onError?.(r,e,this.state.context),await this.#t.config.onSettled?.(void 0,r,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,r,e,this.state.context),r}finally{this.#n({type:"error",error:r})}}finally{this.#t.runNext(this)}}#n(e){const t=n=>{switch(e.type){case"failed":return{...n,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...n,isPaused:!0};case"continue":return{...n,isPaused:!1};case"pending":return{...n,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...n,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...n,data:void 0,error:e.error,failureCount:n.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=t(this.state),Or.batch(()=>{this.#e.forEach(n=>{n.onMutationUpdate(e)}),this.#t.notify({mutation:this,type:"updated",action:e})})}};function zfe(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var Gfe=class extends pp{constructor(e={}){super(),this.config=e,this.#e=new Map,this.#t=Date.now()}#e;#t;build(e,t,n){const r=new xze({mutationCache:this,mutationId:++this.#t,options:e.defaultMutationOptions(t),state:n});return this.add(r),r}add(e){const t=uC(e),n=this.#e.get(t)??[];n.push(e),this.#e.set(t,n),this.notify({type:"added",mutation:e})}remove(e){const t=uC(e);if(this.#e.has(t)){const n=this.#e.get(t)?.filter(r=>r!==e);n&&(n.length===0?this.#e.delete(t):this.#e.set(t,n))}this.notify({type:"removed",mutation:e})}canRun(e){const t=this.#e.get(uC(e))?.find(n=>n.state.status==="pending");return!t||t===e}runNext(e){return this.#e.get(uC(e))?.find(n=>n!==e&&n.state.isPaused)?.continue()??Promise.resolve()}clear(){Or.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}getAll(){return[...this.#e.values()].flat()}find(e){const t={exact:!0,...e};return this.getAll().find(n=>OK(t,n))}findAll(e={}){return this.getAll().filter(t=>OK(e,t))}notify(e){Or.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(t=>t.state.isPaused);return Or.batch(()=>Promise.all(e.map(t=>t.continue().catch(mi))))}};function uC(e){return e.options.scope?.id??String(e.mutationId)}function TP(e){return{onFetch:(t,n)=>{const r=async()=>{const s=t.options,a=t.fetchOptions?.meta?.fetchMore?.direction,i=t.state.data?.pages||[],l=t.state.data?.pageParams||[],c={pages:[],pageParams:[]};let u=!1;const f=g=>{Object.defineProperty(g,"signal",{enumerable:!0,get:()=>(t.signal.aborted?u=!0:t.signal.addEventListener("abort",()=>{u=!0}),t.signal)})},m=Ffe(t.options,t.fetchOptions),p=async(g,y,x)=>{if(u)return Promise.reject();if(y==null&&g.pages.length)return Promise.resolve(g);const v={queryKey:t.queryKey,pageParam:y,direction:x?"backward":"forward",meta:t.options.meta};f(v);const b=await m(v),{maxPages:_}=t.options,w=x?dze:uze;return{pages:w(g.pages,b,_),pageParams:w(g.pageParams,y,_)}};let h;if(a&&i.length){const g=a==="backward",y=g?qfe:NP,x={pages:i,pageParams:l},v=y(s,x);h=await p(x,v,g)}else{h=await p(c,l[0]??s.initialPageParam);const g=e??i.length;for(let y=1;y<g;y++){const x=NP(s,h);h=await p(h,x)}}return h};t.options.persister?t.fetchFn=()=>t.options.persister?.(r,{queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n):t.fetchFn=r}}}function NP(e,{pages:t,pageParams:n}){const r=t.length-1;return e.getNextPageParam(t[r],t,n[r],n)}function qfe(e,{pages:t,pageParams:n}){return e.getPreviousPageParam?.(t[0],t,n[0],n)}function vze(e,t){return t?NP(e,t)!=null:!1}function bze(e,t){return!t||!e.getPreviousPageParam?!1:qfe(e,t)!=null}var _ze=class{#e;#t;#r;#n;#a;#o;#s;#i;constructor(e={}){this.#e=e.queryCache||new Hfe,this.#t=e.mutationCache||new Gfe,this.#r=e.defaultOptions||{},this.#n=new Map,this.#a=new Map,this.#o=0}mount(){this.#o++,this.#o===1&&(this.#s=zD.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onFocus())}),this.#i=fE.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#e.onOnline())}))}unmount(){this.#o--,this.#o===0&&(this.#s?.(),this.#s=void 0,this.#i?.(),this.#i=void 0)}isFetching(e){return this.#e.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#t.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.getQueryData(e.queryKey);if(t===void 0)return this.fetchQuery(e);{const n=this.defaultQueryOptions(e),r=this.#e.build(this,n);return e.revalidateIfStale&&r.isStaleByTime(ng(n.staleTime,r))&&this.prefetchQuery(n),Promise.resolve(t)}}getQueriesData(e){return this.#e.findAll(e).map(({queryKey:t,state:n})=>{const r=n.data;return[t,r]})}setQueryData(e,t,n){const r=this.defaultQueryOptions({queryKey:e}),a=this.#e.get(r.queryHash)?.state.data,i=lze(t,a);if(i!==void 0)return this.#e.build(this,r).setData(i,{...n,manual:!0})}setQueriesData(e,t,n){return Or.batch(()=>this.#e.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,t,n)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#e.get(t.queryHash)?.state}removeQueries(e){const t=this.#e;Or.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=this.#e,r={type:"active",...e};return Or.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries(r,t)))}cancelQueries(e={},t={}){const n={revert:!0,...t},r=Or.batch(()=>this.#e.findAll(e).map(s=>s.cancel(n)));return Promise.all(r).then(mi).catch(mi)}invalidateQueries(e={},t={}){return Or.batch(()=>{if(this.#e.findAll(e).forEach(r=>{r.invalidate()}),e.refetchType==="none")return Promise.resolve();const n={...e,type:e.refetchType??e.type??"active"};return this.refetchQueries(n,t)})}refetchQueries(e={},t){const n={...t,cancelRefetch:t?.cancelRefetch??!0},r=Or.batch(()=>this.#e.findAll(e).filter(s=>!s.isDisabled()).map(s=>{let a=s.fetch(void 0,n);return n.throwOnError||(a=a.catch(mi)),s.state.fetchStatus==="paused"?Promise.resolve():a}));return Promise.all(r).then(mi)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=this.#e.build(this,t);return n.isStaleByTime(ng(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(mi).catch(mi)}fetchInfiniteQuery(e){return e.behavior=TP(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(mi).catch(mi)}resumePausedMutations(){return fE.isOnline()?this.#t.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#e}getMutationCache(){return this.#t}getDefaultOptions(){return this.#r}setDefaultOptions(e){this.#r=e}setQueryDefaults(e,t){this.#n.set(Lm(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#n.values()];let n={};return t.forEach(r=>{T1(e,r.queryKey)&&(n={...n,...r.defaultOptions})}),n}setMutationDefaults(e,t){this.#a.set(Lm(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#a.values()];let n={};return t.forEach(r=>{T1(e,r.mutationKey)&&(n={...n,...r.defaultOptions})}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#r.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=WD(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.enabled!==!0&&t.queryFn===Dfe&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#r.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#e.clear(),this.#t.clear()}},y5=class extends pp{constructor(e,t){super(),this.options=t,this.#e=e,this.#s=null,this.bindMethods(),this.setOptions(t)}#e;#t=void 0;#r=void 0;#n=void 0;#a;#o;#s;#i;#c;#u;#l;#f;#d;#p=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#t.addObserver(this),UK(this.#t,this.options)?this.#m():this.updateResult(),this.#x())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return jP(this.#t,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return jP(this.#t,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#b(),this.#t.removeObserver(this)}setOptions(e,t){const n=this.options,r=this.#t;if(this.options=this.#e.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof zi(this.options.enabled,this.#t)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#_(),this.#t.setOptions(this.options),n._defaulted&&!dE(this.options,n)&&this.#e.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#t,observer:this});const s=this.hasListeners();s&&BK(this.#t,r,this.options,n)&&this.#m(),this.updateResult(t),s&&(this.#t!==r||zi(this.options.enabled,this.#t)!==zi(n.enabled,this.#t)||ng(this.options.staleTime,this.#t)!==ng(n.staleTime,this.#t))&&this.#h();const a=this.#g();s&&(this.#t!==r||zi(this.options.enabled,this.#t)!==zi(n.enabled,this.#t)||a!==this.#d)&&this.#y(a)}getOptimisticResult(e){const t=this.#e.getQueryCache().build(this.#e,e),n=this.createResult(t,e);return Cze(this,n)&&(this.#n=n,this.#o=this.options,this.#a=this.#t.state),n}getCurrentResult(){return this.#n}trackResult(e,t){const n={};return Object.keys(e).forEach(r=>{Object.defineProperty(n,r,{configurable:!1,enumerable:!0,get:()=>(this.trackProp(r),t?.(r),e[r])})}),n}trackProp(e){this.#p.add(e)}getCurrentQuery(){return this.#t}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#e.defaultQueryOptions(e),n=this.#e.getQueryCache().build(this.#e,t);return n.isFetchingOptimistic=!0,n.fetch().then(()=>this.createResult(n,t))}fetch(e){return this.#m({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#n))}#m(e){this.#_();let t=this.#t.fetch(this.options,e);return e?.throwOnError||(t=t.catch(mi)),t}#h(){this.#v();const e=ng(this.options.staleTime,this.#t);if(Pm||this.#n.isStale||!EP(e))return;const n=Ofe(this.#n.dataUpdatedAt,e)+1;this.#l=setTimeout(()=>{this.#n.isStale||this.updateResult()},n)}#g(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#t):this.options.refetchInterval)??!1}#y(e){this.#b(),this.#d=e,!(Pm||zi(this.options.enabled,this.#t)===!1||!EP(this.#d)||this.#d===0)&&(this.#f=setInterval(()=>{(this.options.refetchIntervalInBackground||zD.isFocused())&&this.#m()},this.#d))}#x(){this.#h(),this.#y(this.#g())}#v(){this.#l&&(clearTimeout(this.#l),this.#l=void 0)}#b(){this.#f&&(clearInterval(this.#f),this.#f=void 0)}createResult(e,t){const n=this.#t,r=this.options,s=this.#n,a=this.#a,i=this.#o,c=e!==n?e.state:this.#r,{state:u}=e;let f={...u},m=!1,p;if(t._optimisticResults){const S=this.hasListeners(),E=!S&&UK(e,t),k=S&&BK(e,n,t,r);(E||k)&&(f={...f,...Wfe(u.data,e.options)}),t._optimisticResults==="isRestoring"&&(f.fetchStatus="idle")}let{error:h,errorUpdatedAt:g,status:y}=f;if(t.select&&f.data!==void 0)if(s&&f.data===a?.data&&t.select===this.#i)p=this.#c;else try{this.#i=t.select,p=t.select(f.data),p=kP(s?.data,p,t),this.#c=p,this.#s=null}catch(S){this.#s=S}else p=f.data;if(t.placeholderData!==void 0&&p===void 0&&y==="pending"){let S;if(s?.isPlaceholderData&&t.placeholderData===i?.placeholderData)S=s.data;else if(S=typeof t.placeholderData=="function"?t.placeholderData(this.#u?.state.data,this.#u):t.placeholderData,t.select&&S!==void 0)try{S=t.select(S),this.#s=null}catch(E){this.#s=E}S!==void 0&&(y="success",p=kP(s?.data,S,t),m=!0)}this.#s&&(h=this.#s,p=this.#c,g=Date.now(),y="error");const x=f.fetchStatus==="fetching",v=y==="pending",b=y==="error",_=v&&x,w=p!==void 0;return{status:y,fetchStatus:f.fetchStatus,isPending:v,isSuccess:y==="success",isError:b,isInitialLoading:_,isLoading:_,data:p,dataUpdatedAt:f.dataUpdatedAt,error:h,errorUpdatedAt:g,failureCount:f.fetchFailureCount,failureReason:f.fetchFailureReason,errorUpdateCount:f.errorUpdateCount,isFetched:f.dataUpdateCount>0||f.errorUpdateCount>0,isFetchedAfterMount:f.dataUpdateCount>c.dataUpdateCount||f.errorUpdateCount>c.errorUpdateCount,isFetching:x,isRefetching:x&&!v,isLoadingError:b&&!w,isPaused:f.fetchStatus==="paused",isPlaceholderData:m,isRefetchError:b&&w,isStale:GD(e,t),refetch:this.refetch}}updateResult(e){const t=this.#n,n=this.createResult(this.#t,this.options);if(this.#a=this.#t.state,this.#o=this.options,this.#a.data!==void 0&&(this.#u=this.#t),dE(n,t))return;this.#n=n;const r={},s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!this.#p.size)return!0;const l=new Set(i??this.#p);return this.options.throwOnError&&l.add("error"),Object.keys(this.#n).some(c=>{const u=c;return this.#n[u]!==t[u]&&l.has(u)})};e?.listeners!==!1&&s()&&(r.listeners=!0),this.#w({...r,...e})}#_(){const e=this.#e.getQueryCache().build(this.#e,this.options);if(e===this.#t)return;const t=this.#t;this.#t=e,this.#r=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#x()}#w(e){Or.batch(()=>{e.listeners&&this.listeners.forEach(t=>{t(this.#n)}),this.#e.getQueryCache().notify({query:this.#t,type:"observerResultsUpdated"})})}};function wze(e,t){return zi(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function UK(e,t){return wze(e,t)||e.state.data!==void 0&&jP(e,t,t.refetchOnMount)}function jP(e,t,n){if(zi(t.enabled,e)!==!1){const r=typeof n=="function"?n(e):n;return r==="always"||r!==!1&&GD(e,t)}return!1}function BK(e,t,n,r){return(e!==t||zi(r.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&GD(e,n)}function GD(e,t){return zi(t.enabled,e)!==!1&&e.isStaleByTime(ng(t.staleTime,e))}function Cze(e,t){return!dE(e.getCurrentResult(),t)}function $K(e,t){return e.filter(n=>!t.includes(n))}function Sze(e,t,n){const r=e.slice(0);return r[t]=n,r}var Eze=class extends pp{#e;#t;#r;#n;#a;#o;#s;constructor(e,t,n){super(),this.#e=e,this.#r=[],this.#n=[],this.#t=[],this.setQueries(t)}onSubscribe(){this.listeners.size===1&&this.#n.forEach(e=>{e.subscribe(t=>{this.#u(e,t)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,this.#n.forEach(e=>{e.destroy()})}setQueries(e,t,n){this.#r=e,Or.batch(()=>{const r=this.#n,s=this.#c(this.#r);s.forEach(c=>c.observer.setOptions(c.defaultedQueryOptions,n));const a=s.map(c=>c.observer),i=a.map(c=>c.getCurrentResult()),l=a.some((c,u)=>c!==r[u]);r.length===a.length&&!l||(this.#n=a,this.#t=i,this.hasListeners()&&($K(r,a).forEach(c=>{c.destroy()}),$K(a,r).forEach(c=>{c.subscribe(u=>{this.#u(c,u)})}),this.#l()))})}getCurrentResult(){return this.#t}getQueries(){return this.#n.map(e=>e.getCurrentQuery())}getObservers(){return this.#n}getOptimisticResult(e,t){const n=this.#c(e),r=n.map(s=>s.observer.getOptimisticResult(s.defaultedQueryOptions));return[r,s=>this.#i(s??r,t),()=>n.map((s,a)=>{const i=r[a];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,l=>{n.forEach(c=>{c.observer.trackProp(l)})})})]}#i(e,t){return t?((!this.#a||this.#t!==this.#s||t!==this.#o)&&(this.#o=t,this.#s=this.#t,this.#a=HD(this.#a,t(e))),this.#a):e}#c(e){const t=this.#n,n=new Map(t.map(f=>[f.options.queryHash,f])),r=e.map(f=>this.#e.defaultQueryOptions(f)),s=r.flatMap(f=>{const m=n.get(f.queryHash);return m!=null?[{defaultedQueryOptions:f,observer:m}]:[]}),a=new Set(s.map(f=>f.defaultedQueryOptions.queryHash)),i=r.filter(f=>!a.has(f.queryHash)),l=f=>{const m=this.#e.defaultQueryOptions(f);return this.#n.find(h=>h.options.queryHash===m.queryHash)??new y5(this.#e,m)},c=i.map(f=>({defaultedQueryOptions:f,observer:l(f)})),u=(f,m)=>r.indexOf(f.defaultedQueryOptions)-r.indexOf(m.defaultedQueryOptions);return s.concat(c).sort(u)}#u(e,t){const n=this.#n.indexOf(e);n!==-1&&(this.#t=Sze(this.#t,n,t),this.#l())}#l(){Or.batch(()=>{this.listeners.forEach(e=>{e(this.#t)})})}},Mze=class extends y5{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e,t){super.setOptions({...e,behavior:TP()},t)}getOptimisticResult(e){return e.behavior=TP(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){const{state:n}=e,r=super.createResult(e,t),{isFetching:s,isRefetching:a,isError:i,isRefetchError:l}=r,c=n.fetchMeta?.fetchMore?.direction,u=i&&c==="forward",f=s&&c==="forward",m=i&&c==="backward",p=s&&c==="backward";return{...r,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:vze(t,n.data),hasPreviousPage:bze(t,n.data),isFetchNextPageError:u,isFetchingNextPage:f,isFetchPreviousPageError:m,isFetchingPreviousPage:p,isRefetchError:l&&!u&&!m,isRefetching:a&&!f&&!p}}},kze=class extends pp{#e;#t=void 0;#r;#n;constructor(t,n){super(),this.#e=t,this.setOptions(n),this.bindMethods(),this.#a()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(t){const n=this.options;this.options=this.#e.defaultMutationOptions(t),dE(this.options,n)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),n?.mutationKey&&this.options.mutationKey&&Lm(n.mutationKey)!==Lm(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(t){this.#a(),this.#o(t)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#a(),this.#o()}mutate(t,n){return this.#n=n,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(t)}#a(){const t=this.#r?.state??zfe();this.#t={...t,isPending:t.status==="pending",isSuccess:t.status==="success",isError:t.status==="error",isIdle:t.status==="idle",mutate:this.mutate,reset:this.reset}}#o(t){Or.batch(()=>{if(this.#n&&this.hasListeners()){const n=this.#t.variables,r=this.#t.context;t?.type==="success"?(this.#n.onSuccess?.(t.data,n,r),this.#n.onSettled?.(t.data,null,n,r)):t?.type==="error"&&(this.#n.onError?.(t.error,n,r),this.#n.onSettled?.(void 0,t.error,n,r))}this.listeners.forEach(n=>{n(this.#t)})})}},Kfe=d.createContext(void 0),ot=e=>{const t=d.useContext(Kfe);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},Tze=({client:e,children:t})=>(d.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),o.jsx(Kfe.Provider,{value:e,children:t})),Yfe=d.createContext(!1),Qfe=()=>d.useContext(Yfe);Yfe.Provider;function Nze(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var jze=d.createContext(Nze()),Xfe=()=>d.useContext(jze);function Zfe(e,t){return typeof e=="function"?e(...t):!!e}function Aze(){}var Jfe=(e,t)=>{(e.suspense||e.throwOnError)&&(t.isReset()||(e.retryOnMount=!1))},eme=e=>{d.useEffect(()=>{e.clearReset()},[e])},tme=({result:e,errorResetBoundary:t,throwOnError:n,query:r})=>e.isError&&!t.isReset()&&!e.isFetching&&r&&Zfe(n,[e.error,r]),nme=e=>{e.suspense&&typeof e.staleTime!="number"&&(e.staleTime=1e3)},Ize=(e,t)=>e.isLoading&&e.isFetching&&!t,AP=(e,t)=>e?.suspense&&t.isPending,IP=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function qD({queries:e,...t},n){const r=ot(),s=Qfe(),a=Xfe(),i=d.useMemo(()=>e.map(g=>{const y=r.defaultQueryOptions(g);return y._optimisticResults=s?"isRestoring":"optimistic",y}),[e,r,s]);i.forEach(g=>{nme(g),Jfe(g,a)}),eme(a);const[l]=d.useState(()=>new Eze(r,i,t)),[c,u,f]=l.getOptimisticResult(i,t.combine);d.useSyncExternalStore(d.useCallback(g=>s?()=>{}:l.subscribe(Or.batchCalls(g)),[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d.useEffect(()=>{l.setQueries(i,t,{listeners:!1})},[i,t,l]);const p=c.some((g,y)=>AP(i[y],g))?c.flatMap((g,y)=>{const x=i[y];if(x){const v=new y5(r,x);if(AP(x,g))return IP(x,v,a);Ize(g,s)&&IP(x,v,a)}return[]}):[];if(p.length>0)throw Promise.all(p);const h=c.find((g,y)=>{const x=i[y];return x&&tme({result:g,errorResetBoundary:a,throwOnError:x.throwOnError,query:r.getQueryCache().get(x.queryHash)})});if(h?.error)throw h.error;return u(f())}function rme(e,t,n){const r=ot(),s=Qfe(),a=Xfe(),i=r.defaultQueryOptions(e);r.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=s?"isRestoring":"optimistic",nme(i),Jfe(i,a),eme(a);const[l]=d.useState(()=>new t(r,i)),c=l.getOptimisticResult(i);if(d.useSyncExternalStore(d.useCallback(u=>{const f=s?()=>{}:l.subscribe(Or.batchCalls(u));return l.updateResult(),f},[l,s]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),d.useEffect(()=>{l.setOptions(i,{listeners:!1})},[i,l]),AP(i,c))throw IP(i,l,a);if(tme({result:c,errorResetBoundary:a,throwOnError:i.throwOnError,query:r.getQueryCache().get(i.queryHash)}))throw c.error;return r.getDefaultOptions().queries?._experimental_afterQuery?.(i,c),i.notifyOnChangeProps?c:l.trackResult(c)}function Ue(e,t){return rme(e,y5)}function dt(e,t){const n=ot(),[r]=d.useState(()=>new kze(n,e));d.useEffect(()=>{r.setOptions(e)},[r,e]);const s=d.useSyncExternalStore(d.useCallback(i=>r.subscribe(Or.batchCalls(i)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),a=d.useCallback((i,l)=>{r.mutate(i,l).catch(Aze)},[r]);if(s.error&&Zfe(r.options.throwOnError,[s.error]))throw s.error;return{...s,mutate:a,mutateAsync:s.mutate}}function Lu(e,t){return rme(e,Mze)}const Rze={pro:"pro",max:"max"},Pze=e=>Object.keys(Rze).includes(e);function St(){const{session:e}=mt(),t=e?.user?.subscription_status??"none",n=t==="active"||t==="trialing"||t==="white_glove_past_due",r=e?.user?.subscription_tier,s=Pze(r)?r:void 0,a=n&&(s==="pro"||!s),i=n&&s==="max",l=a||i,c=n?e?.user?.subscription_source:"none",u=n&&c==="enterprise",f=u&&(s==="pro"||!s),m=u&&s==="max";return d.useMemo(()=>({isPro:a,isMax:i,hasAccessToProFeatures:l,hasActiveSubscription:n,subscriptionSource:c,subscriptionStatus:t,subscriptionTier:s,isEnterprise:u,isEnterprisePro:f,isEnterpriseMax:m}),[l,i,a,n,c,t,s,u,f,m])}let qp;const sme=new URL("/ws",E9e());sme.protocol="wss:";async function ame(){return qp||(qp=new Promise(e=>{const t=new WebSocket(sme);t.addEventListener("error",()=>{try{t.close()}finally{qp=void 0}}),t.addEventListener("close",()=>{qp=void 0}),t.addEventListener("open",()=>{e(t)})}),qp)}const Wd="en-US",x5={"ar-SA":{characterOrder:"rtl",displayName:" (  )",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-ar-SA-DqMZklXQ.js");return{default:e}},[])).default},"bn-BD":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-bn-BD-gC8V0V0w.js");return{default:e}},[])).default},"cs-CZ":{characterOrder:"ltr",displayName:"etina (esko)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-cs-CZ-G2h0TbwV.js");return{default:e}},[])).default},"de-DE":{characterOrder:"ltr",displayName:"Deutsch (Deutschland)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-de-DE-DHvZFfcF.js");return{default:e}},[])).default},"el-GR":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-el-GR-BNIOZgdg.js");return{default:e}},[])).default},"en-US":{characterOrder:"ltr",displayName:"American English",translations:async()=>Promise.resolve({})},"es-ES":{characterOrder:"ltr",displayName:"espaol de Espaa",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-es-ES-CdMNhbro.js");return{default:e}},[])).default},"fr-FR":{characterOrder:"ltr",displayName:"franais (France)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-fr-FR-CM5ifmHV.js");return{default:e}},[])).default},"hi-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-hi-IN-CYoBEiUb.js");return{default:e}},[])).default},"hr-HR":{characterOrder:"ltr",displayName:"hrvatski (Hrvatska)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-hr-HR-CN8FAwDE.js");return{default:e}},[])).default},"hu-HU":{characterOrder:"ltr",displayName:"magyar (Magyarorszg)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-hu-HU-CpF008xG.js");return{default:e}},[])).default},"id-ID":{characterOrder:"ltr",displayName:"Indonesia (Indonesia)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-id-ID-CfMBeQZ3.js");return{default:e}},[])).default},"it-IT":{characterOrder:"ltr",displayName:"italiano (Italia)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-it-IT-DJSNFz7d.js");return{default:e}},[])).default},"ja-JP":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-ja-JP-BbRfzbJG.js");return{default:e}},[])).default},"kn-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-kn-IN-BphhS5wb.js");return{default:e}},[])).default},"ko-KR":{characterOrder:"ltr",displayName:"()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-ko-KR-CYYOfWt4.js");return{default:e}},[])).default},"ml-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-ml-IN-COZhx1l4.js");return{default:e}},[])).default},"mr-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-mr-IN-CPzR6DMm.js");return{default:e}},[])).default},"nl-NL":{characterOrder:"ltr",displayName:"Nederlands (Nederland)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-nl-NL-CIHRQGIn.js");return{default:e}},[])).default},"pl-PL":{characterOrder:"ltr",displayName:"polski (Polska)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-pl-PL-CCbsrXEE.js");return{default:e}},[])).default},"pt-BR":{characterOrder:"ltr",displayName:"portugus (Brasil)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-pt-BR-BERTKT6F.js");return{default:e}},[])).default},"pt-PT":{characterOrder:"ltr",displayName:"portugus europeu",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-pt-PT-D1csA2VT.js");return{default:e}},[])).default},"ro-RO":{characterOrder:"ltr",displayName:"romn (Romnia)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-ro-RO-D8MOaeJB.js");return{default:e}},[])).default},"ru-RU":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-ru-RU-B7S7vF9_.js");return{default:e}},[])).default},"sk-SK":{characterOrder:"ltr",displayName:"slovenina (Slovensko)",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-sk-SK-BvNsJMjs.js");return{default:e}},[])).default},"sr-Cyrl-ME":{characterOrder:"ltr",displayName:" (,  )",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-sr-Cyrl-ME-BodNEJYC.js");return{default:e}},[])).default},"ta-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-ta-IN-CvQcuwe-.js");return{default:e}},[])).default},"te-IN":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-te-IN-Dh9jirRG.js");return{default:e}},[])).default},"uk-UA":{characterOrder:"ltr",displayName:" ()",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-uk-UA-CnIlfC9x.js");return{default:e}},[])).default},"zh-CN":{characterOrder:"ltr",displayName:"",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-zh-CN-BqYwZ2XX.js");return{default:e}},[])).default},"zh-TW":{characterOrder:"ltr",displayName:"",translations:async()=>(await X(async()=>{const{default:e}=await import("./translations-zh-TW-CtkCQoTP.js");return{default:e}},[])).default}},ome="pplx.chosen-locale",KD=new Intl.DateTimeFormat().resolvedOptions().timeZone,t2=Object.keys(x5),Lze=Object.entries(x5).map(([e,t])=>({locale:e,label:t.displayName,characterOrder:t.characterOrder})),ime=(e,t=t2)=>{try{return nDe(e,t,Wd)}catch{return Wd}};async function Oze(e=Wd){const t=ime(Array.isArray(e)?e:[e]);if(t===Wd)return Promise.resolve({matchedLocale:t,translations:{}});const n=await x5[t].translations()??{};return Promise.resolve({matchedLocale:t,translations:n})}function lme(e){return x5[e]?.characterOrder??"ltr"}function Zl(){const t=[new URL(globalThis.location.href).searchParams.get("locale"),Sn(ome),globalThis.navigator.language].filter(n=>!!n);return ime(t)}function Dze(){jm(ome)}var Fze={};function Uze(){return typeof window>"u"||window.location.hostname.includes("localhost")?new URL(_G,dDe()):new URL(_G,window.location.origin)}const Bze=Uze();function cme(e){return navigator.sendBeacon(Bze,new Blob([JSON.stringify(e)],{type:"application/json; charset=UTF-8"}))}function ume(){const e={};try{navigator.hardwareConcurrency&&(e.hardwareConcurrency=navigator.hardwareConcurrency);const t=new Float32Array(1),n=new Uint8Array(t.buffer);t[0]=1/0,t[0]=t[0]-t[0];const r=n[3];r&&(e.architecture=r),globalThis.screen.colorDepth&&(e.colorDepth=globalThis.screen.colorDepth),globalThis.screen.width&&globalThis.screen.height&&(e.screenSize=`${globalThis.screen.width}x${globalThis.screen.height}`)}catch{}return e}const $ze=ume(),Vze=768,Wze=`(max-width: ${Vze}px)`;function Hze(){return typeof window>"u"?!1:window.matchMedia(Wze).matches}function zze(){if(typeof document>"u")return!1;const e=Sn("comet_browser");if(!e)return!1;try{const t=JSON.parse(e);return!!(t?.android_version||t?.ios_version)}catch{return!1}}function Gze(){return zze()?"comet_mobile":Hze()?"mweb":"web"}const qze=(e={},t)=>{const n=Date.now(),r=Gze(),s={...e,isStandaloneApp:!1,timestamp:n,isBrowserExtension:!1,timeZone:KD,isPro:t?.user?.subscription_status&&t?.user?.subscription_status!=="none",userId:t?.user?.id,deviceInfo:$ze,isPerplexityBrowser:Sn("comet_browser")!==void 0,web_platform:r},a=globalThis.location.pathname+globalThis.location.search,i=!!getComputedStyle(document.documentElement).getPropertyValue("--arc-palette-title"),l=ume(),c=Sn(nE),u=Sn(ZR);let f;return s.internalReferrer?f=s.internalReferrer:f=document.referrer,(globalThis.matchMedia("(display-mode: standalone)").matches||globalThis.matchMedia("(display-mode: minimal-ui)").matches||globalThis.navigator?.standalone)&&(s.isStandaloneApp=!0),{eventData:s,pathnameAndParams:a,visitorId:c,isArcBrowser:i,sessionId:u,deviceInfo:l,referrer:f}};function dme(e){const{name:t,data:n,session:r,source:s}=e,{eventData:a,visitorId:i,sessionId:l,pathnameAndParams:c,deviceInfo:u,referrer:f,isArcBrowser:m}=qze(n,r);return c.startsWith("/search/render")?void 0:(Fze.NEXT_PUBLIC_EVENT_DEBUG_PRINT&&ne.log(`[trackEvent] ${t}: `,a),{event_name:t,event_data:a,visitor_id:i??"",session_id:l??"",url:c,referrer:f,language:Zl(),screen:v5(),hostname:globalThis.location.hostname,device_info:u,is_arc_browser:m,source:s})}function Ji(e){const t=dme(e);t&&(cme(t)||(cc("web.browser.analytics.send_event_failed"),ame().then(n=>{n.send(JSON.stringify(t))})))}function Kze(e){const t=e.map(n=>dme(n)).filter(n=>n!==void 0);t.length!==0&&(cme(t)||(cc("web.browser.analytics.send_event_failed"),ame().then(n=>{n.send(JSON.stringify(t))})))}function v5(){return`${globalThis.screen.width}x${globalThis.screen.height}`}const VK=Object.freeze({});function mo(){return typeof window<"u"?window.__PPL_CONFIG__??VK:VK}const fme=Dt("WebPlatformContext",{env:{isPublicDNS:!1,isLocalhost:!1,isPplxDev:!1,isPreview:!1,isStaging:!1,isBeta:!1,isTesting:!1,isAskDev:!1,isDevBox:!1,isNamedDevDomain:!1,isProduction:!1,isSandbox:!1,isDevDeployment:!1,envHasDevLogins:!1,deployName:""},device:{isChrome:!1,isMobile:!1,isAndroid:!1,isIOS:!1,isMacOS:!1,isFirefox:!1,isMobileSafari:!1,isWindowsOS:!1,isWindowsApp:!1,isMetaBrowser:!1,isSamsungBrowser:!1,userAgent:""}}),Pt=()=>{const e=d.useContext(fme);if(!e)throw new Error("useWebPlatform must be used within WebPlatformContext");return e},Ol={default:{termsOfService:"https://www.perplexity.ai/hub/legal/terms-of-service",enterpriseTermsOfService:"https://www.perplexity.ai/hub/legal/enterprise-terms-of-service",privacyPolicy:"https://www.perplexity.ai/hub/legal/privacy-policy"},"ja-JP":{termsOfService:"https://www.perplexity.ai/ja/hub/legal/terms-of-service",privacyPolicy:"https://www.perplexity.ai/ja/hub/legal/privacy-policy"}},um=4e4,mme=2e3,WK=4e3,HK=50,zK=1e3,Brn=1500,$rn=500,Vrn=100,Yze=10,Wrn=10,Qze=5e3,Xze=50,GK=10,qK=1024*1024,pme=3,hme=500,rg="https://ppl-ai-public.s3.amazonaws.com/static/img/pplx-default-preview.png",pl="2.18",gme="default",Hrn="mweb",YD="entropy",Zze="browser_ios",Jze="browser_android",b5="windowsapp",zrn="ios",Grn="android",qrn="autodetect",KK=["audio/midi","audio/x-midi","application/zip","application/x-tar","application/x-bzip","application/vnd.rar"],QD=[".bash",".bat",".c",".coffee",".conf",".config",".cpp",".cs",".css",".csv",".cxx",".dart",".diff",".doc",".docx",".fish",".go",".h",".hpp",".htm",".html",".in",".ini",".ipynb",".java",".js",".json",".jsx",".ksh",".kt",".kts",".latex",".less",".log",".lua",".m",".markdown",".md",".pdf",".php",".pl",".pm",".pptx",".py",".r",".R",".rb",".rmd",".rs",".scala",".sh",".sql",".swift",".t",".tex",".text",".toml",".ts",".tsx",".txt",".xlsx",".xml",".yaml",".yml",".zsh"],eGe=QD.join(","),yme=[".jpeg",".jpg",".jpe",".jp2",".png",".gif",".bmp",".tiff",".tif",".svg",".webp",".ico",".avif",".heic",".heif"],xme=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],tGe=yme.join(","),vme=[...QD,...yme],nGe=vme.join(","),rGe=[...QD,...xme],sGe=rGe.join(","),aGe=[...vme,...xme],oGe=aGe.join(","),Krn="",Yrn=Ct.PUBLIC_READ,bme=Ct.PRIVATE_READ,mE=Ct.PRIVATE_READ,Qrn="https://chrome.google.com/webstore/detail/perplexity-ai-search/bnaffjbjpgiagpondjlnneblepbdchol",Xrn="https://pplx.ai/mac",Zrn="https://www.perplexity.ai/comet",YK="onboarding",QK="uninstall_default_search_extension",iGe="edu_referral_code",lGe="utm_source",cGe="backtoschool",uGe="backtoschool_usc",dGe="backtoschool_cal",fGe="iitm",mGe="krstudents",Ou="login-source",pE="login-new",pGe="model_id",XK="max",XD=5,hGe="/static/images/back-to-school-splash.png",gGe="back-to-school",Jrn="/static/images/search-like-never-before-square.jpg",esn="search-like-never-before",tsn="/static/images/file-search-upsell-demo.png",nsn="file-search-upsell-demo",rsn="Perplexity",ZD="/static/images/data-connectors/factset/factset-avatar.svg",_5="FactSet",ssn="perplexity@factset.com",JD="/static/images/data-connectors/crunchbase/crunchbase-avatar.svg",eF="Crunchbase",Om="/static/images/data-connectors/wiley/wiley-avatar.svg",tF="Wiley",RP="Wiley (MCP)",nF="/static/images/data-connectors/cbinsights/cbinsights-avatar.svg",PP="CB Insights",rF="/static/images/data-connectors/pitchbook/pitchbook-avatar.svg",LP="PitchBook",sF="/static/images/data-connectors/statista/statista-avatar.svg",OP="Statista",_me="Finance",asn="/static/images/data-connectors/finance/finance-avatar.svg",w5="/static/images/data-connectors/google/google-drive-avatar.svg",yGe="/static/images/data-connectors/google/gmail-avatar.svg",xGe="Gmail",C5="Google Drive",S5="/static/images/data-connectors/google/gcal-gmail-avatar.svg",aF="Gmail with Calendar",vGe="Microsoft",E5="/static/images/data-connectors/microsoft/onedrive-avatar.svg",Dg="OneDrive",M5="/static/images/data-connectors/microsoft/sharepoint-avatar.svg",Fg="SharePoint",oF="/static/images/data-connectors/dropbox/dropbox-avatar.svg",Dm="Dropbox",k5="/static/images/data-connectors/box/box-avatar.svg",Ug="Box",T5="/static/images/data-connectors/notion/notion-avatar.svg",N5="Notion",iF="/static/images/data-connectors/linear/linear-avatar.svg",lF="Linear",cF="/static/images/data-connectors/slack/slack-avatar.svg",uF="Slack (deprecated)",dF="Slack",fF="/static/images/data-connectors/github/github-avatar.svg",mF="GitHub",pF="/static/images/data-connectors/asana/asana-avatar.svg",Bg="Asana",hF="/static/images/data-connectors/atlassian/atlassian-avatar.svg",gF="Atlassian",wme="/static/images/data-connectors/jira/jira-avatar.svg",yF="Jira",Cme="/static/images/data-connectors/confluence/confluence-avatar.svg",xF="Confluence",Sme="/static/images/data-connectors/microsoft/teams-avatar.svg",vF="Microsoft Teams",osn="/static/images/data-connectors/whatsapp/whatsapp-avatar.svg",isn="https://r2cdn.perplexity.ai/hotels/hotel-pro-banner.jpg",lsn="Save on hotel bookings with Perplexity Pro",Eme="submit-query",Fh="search-model-change",cd="source-selection-change",hE="windows-app",ZK=hE,bGe="If4YwAeizGHdB3eOhX2JxYcjeCgy0N9c",N1=`${hE}/ask/input`,csn="https://dl.todesktop.com/25020447d4kq915",tj="pplx.windowsApp.microphonePermission",JK={silenceThreshold:30,silenceDuration:5e3},DP="pplx.upload-privacy-accepted",Mme=["answer_modes","media_items","knowledge_cards","inline_entity_cards","place_widgets","finance_widgets","sports_widgets","shopping_widgets","jobs_widgets","search_result_widgets","clarification_responses","inline_images","inline_assets","inline_finance_widgets","placeholder_cards","diff_blocks","inline_knowledge_cards","entity_group_v2","refinement_filters","canvas_mode","maps_preview"],FP=["google_drive","onedrive","sharepoint","dropbox","box","notion"],_Ge=["google_drive","onedrive","sharepoint","dropbox","box"],gE="Outlook",kme="/static/images/data-connectors/microsoft/outlook-avatar.svg",wGe="org-upgrade-in-progress";let eY=0;const bF=1e6;class ov{eventTime=-1;setOnce(){return this.eventTime==-1?(this.eventTime=Date.now(),!0):!1}timeSinceTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime<t?(ne.log(`TimeMarker.timeSinceTimestamp found inconsistency: mytime ${this.eventTime}, old: ${t}`),-1):this.eventTime-t}timeBeforeTimestamp(t){return this.eventTime===-1||t==null?-1:this.eventTime>t?(ne.log(`TimeMarker.timeBeforeTimestamp found inconsistency: mytime ${this.eventTime}, next: ${t}`),-1):t-this.eventTime}wasSet(){return this.eventTime!=-1}}const CGe={firstServerResponseReceived:!1,firstLLMTokenReceived:!1,isPerplexityBrowser:!1},hl=new Map,SGe=(e,{hasLLMToken:t,hasSearchResults:n,hasSources:r},s)=>{EGe(e,s),MGe(e,t,s),kGe(e,n),TGe(e,r)},EGe=(e,t)=>{const n=hl.get(e);if(!n||n.firstServerResponseReceived||!n.submitTimestamp||!n.startFirstServerResponseMarker?.setOnce())return;n.firstServerResponseReceived=!0;const{queryStr:r,isFollowup:s,queryParams:a}=n,i=Nme(e);i>0&&Ji({name:"query first server response",data:{startFirstServerResponseElapsed:i,queryStr:r,isFollowup:s,mode:a?.mode??"unknown",isPerplexityBrowser:n.isPerplexityBrowser},session:t??void 0})},MGe=(e,t,n)=>{const r=hl.get(e);if(!r||r.firstLLMTokenReceived||!t||!r.startLLMTokenMarker?.setOnce())return;r.firstLLMTokenReceived=!0;const{queryStr:s,isFollowup:a,queryParams:i}=r,l=jme(e);l>0&&Ji({name:"query first llm token",data:{startLLMTokenElapsed:l,queryStr:s,isFollowup:a,mode:i?.mode??"unknown",isPerplexityBrowser:r.isPerplexityBrowser},session:n??void 0})},kGe=(e,t)=>{const n=hl.get(e);if(n){if(!t)return}else return;n.firstSearchResultsMarker?.setOnce()},TGe=(e,t)=>{const n=hl.get(e);if(n){if(!t)return}else return;n.firstSourcesMarker?.setOnce()},usn=e=>{const t=hl.get(e);t&&t.firstSourcesRenderMarker?.setOnce()},NGe=(e,t,n,r)=>{r=r??"unknown",ou("web.frontend.start_stream_elapsed",{startTime:e,duration:t*bF,isFollowup:n,mode:r})},jGe=(e,t,n,r)=>{r=r??"unknown",ou("web.frontend.start_llm_token_elapsed",{startTime:e,duration:t*bF,isFollowup:n,mode:r})},AGe=(e,t,n,r)=>{r=r??"unknown",ou("web.frontend.first_search_result_elapsed",{startTime:e,duration:t*bF,isFollowup:n,mode:r})},IGe=({latencies:e,isMobile:t})=>{cc("web.frontend.autosuggest_latency",{latencies:e,isMobile:t})},nj=(e,t)=>e?b5:t??void 0,tY=(e,{session:t,source:n,name:r})=>{const s=hl.get(e);s&&(s.endStreamTimestamp||(s.endStreamTimestamp=Date.now(),Ji({name:r,data:s,session:t??void 0,source:n})))},Tme=(e,t,n,r,s)=>{const a=hl.get(e);if(!a)return;a.finalizedTimestamp=Date.now();let i=-1;a.submitTimestamp&&(i=a.finalizedTimestamp-a.submitTimestamp);const l=Nme(e);l>0&&NGe(a.submitTimestamp??0,l,a.isFollowup??!1,a?.queryParams?.mode);const c=PGe(e);c>0&&AGe(a.submitTimestamp??0,c,a.isFollowup??!1,a?.queryParams?.mode);const u=jme(e);u>0&&jGe(a.submitTimestamp??0,u,a.isFollowup??!1,a?.queryParams?.mode);let f=-1;a.endStreamTimestamp&&a.startFirstServerResponseMarker&&(f=a.startFirstServerResponseMarker.timeBeforeTimestamp(a.endStreamTimestamp));const m={...a,totalElapsed:i,startStreamElapsed:l,startFirstServerResponseElapsed:l,startLLMTokenElapsed:u,totalStreamingElapsed:f,submissionResult:t,entryUUID:n?.backend_uuid,displayModel:n?.display_model,stepType:n?.step_type,isPerplexityBrowser:a.isPerplexityBrowser,source:void 0};Ji({name:`${t} response`,data:m,session:r??void 0,source:void 0})},dsn=(e,t,n,r)=>{Tme(e,"FAILED",t,n)},fsn=(e,t,n,r)=>{Tme(e,"SUCCESSFUL",t,n)},RGe=(e,{name:t,queryStr:n,queryParams:r,isFollowup:s,frontendUUID:a,isPerplexityBrowser:i,session:l,browserVersion:c,source:u,connectors:f,mentions:m})=>{eY+=1;const p={...CGe};p.submissionType=t,p.submitTimestamp=Date.now(),p.queryStr=n,p.queryParams=r,p.frontendUUID=a,p.submissionCount=eY,p.isFollowup=s,p.startFirstServerResponseMarker=new ov,p.startLLMTokenMarker=new ov,p.firstSearchResultsMarker=new ov,p.firstSourcesMarker=new ov,p.firstSourcesRenderMarker=new ov,p.isPerplexityBrowser=i,p.browserVersion=c,p.enabledConnectors=f?.enabled,p.disabledConnectors=f?.disabled,p.referrer=document.referrer;const h=m?.filter(x=>x.type==="tab")??[];p.attachedTabsDomains=[...new Set(h.map(x=>new URL(x.url).host))],p.attachedTabsCount=h.length;const g=m?.filter(x=>x.type==="space")??[];p.mentionedSpacesCount=g.length;const y=m?.filter(x=>x.type==="shortcut")??[];p.mentionedShortcutsCount=y.length,hl.set(e,p),Ji({name:"submit query",data:p,session:l??void 0,source:u})},Nme=e=>{const t=hl.get(e);let n=-1;return t&&(n=t.startFirstServerResponseMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},jme=e=>{const t=hl.get(e);let n=-1;return t&&(n=t.startLLMTokenMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n},PGe=e=>{const t=hl.get(e);let n=-1;return t&&(n=t.firstSearchResultsMarker?.timeSinceTimestamp(t.submitTimestamp)??-1),n};var nY;(function(e){e.FLASHCARD="FLASHCARD",e.QUIZ="QUIZ"})(nY||(nY={}));const Te=()=>{const{session:e}=mt(),{device:{isWindowsApp:t}}=Pt(),n=d.useRef(new Set),r=d.useCallback((l,c={})=>{const u=mo(),f=t?b5:u.erp??void 0;Ji({name:l,data:c,source:f,session:e??void 0})},[t,e]),s=d.useCallback(l=>{const c=l.map(({name:u,data:f})=>({name:u,data:f,session:e??void 0}));Kze(c)},[e]),a=d.useCallback((l,c)=>{Ji({name:l,data:c,session:e??void 0})},[e]),i=d.useCallback((l,c={})=>{n.current.has(l)||(n.current.add(l),Ji({name:l,data:c,session:e??void 0}))},[e]);return d.useMemo(()=>({trackEvent:r,trackEventTyped:a,trackEventOnce:i,trackEventBatch:s}),[r,s,a,i])};class we extends Ob{name="ApiClientsError"}const LGe=/\{[^{}]+\}/g,OGe=()=>typeof process=="object"&&Number.parseInt(process?.versions?.node?.substring(0,2))>=18&&process.versions.undici;function DGe(){return Math.random().toString(36).slice(2,11)}function FGe(e){let{baseUrl:t="",Request:n=globalThis.Request,fetch:r=globalThis.fetch,querySerializer:s,bodySerializer:a,headers:i,requestInitExt:l=void 0,...c}={...e};l=OGe()?l:void 0,t=sY(t);const u=[];async function f(m,p){const{baseUrl:h,fetch:g=r,Request:y=n,headers:x,params:v={},parseAs:b="json",querySerializer:_,bodySerializer:w=a??BGe,body:C,...S}=p||{};h&&(t=sY(h));let E=typeof s=="function"?s:rY(s);_&&(E=typeof _=="function"?_:rY({...typeof s=="object"?s:{},..._}));const k=C===void 0?void 0:w(C),M=k===void 0||k instanceof FormData?{}:{"Content-Type":"application/json"},j={redirect:"follow",...c,...S,body:k,headers:VGe(M,i,x,v.header)};let R,O,D=new n($Ge(m,{baseUrl:t,params:v,querySerializer:E}),j),P;for(const T in S)T in D||(D[T]=S[T]);if(u.length){R=DGe(),O=Object.freeze({baseUrl:t,fetch:g,parseAs:b,querySerializer:E,bodySerializer:w});for(const T of u)if(T&&typeof T=="object"&&typeof T.onRequest=="function"){const N=await T.onRequest({request:D,schemaPath:m,params:v,options:O,id:R});if(N)if(N instanceof n)D=N;else if(N instanceof Response){P=N;break}else throw new Error("onRequest: must return new Request() or Response() when modifying the request")}}if(!P){try{P=await g(D,l)}catch(T){let N=T;if(u.length)for(let L=u.length-1;L>=0;L--){const U=u[L];if(U&&typeof U=="object"&&typeof U.onError=="function"){const $=await U.onError({request:D,error:N,schemaPath:m,params:v,options:O,id:R});if($){if($ instanceof Response){N=void 0,P=$;break}if($ instanceof Error){N=$;continue}throw new Error("onError: must return new Response() or instance of Error")}}}if(N)throw N}if(u.length)for(let T=u.length-1;T>=0;T--){const N=u[T];if(N&&typeof N=="object"&&typeof N.onResponse=="function"){const L=await N.onResponse({request:D,response:P,schemaPath:m,params:v,options:O,id:R});if(L){if(!(L instanceof Response))throw new Error("onResponse: must return new Response() when modifying the response");P=L}}}}if(P.status===204||P.headers.get("Content-Length")==="0")return P.ok?{data:void 0,response:P}:{error:void 0,response:P};if(P.ok)return b==="stream"?{data:P.body,response:P}:{data:await P[b](),response:P};let A=await P.text();try{A=JSON.parse(A)}catch{}return{error:A,response:P}}return{request(m,p,h){return f(p,{...h,method:m.toUpperCase()})},GET(m,p){return f(m,{...p,method:"GET"})},PUT(m,p){return f(m,{...p,method:"PUT"})},POST(m,p){return f(m,{...p,method:"POST"})},DELETE(m,p){return f(m,{...p,method:"DELETE"})},OPTIONS(m,p){return f(m,{...p,method:"OPTIONS"})},HEAD(m,p){return f(m,{...p,method:"HEAD"})},PATCH(m,p){return f(m,{...p,method:"PATCH"})},TRACE(m,p){return f(m,{...p,method:"TRACE"})},use(...m){for(const p of m)if(p){if(typeof p!="object"||!("onRequest"in p||"onResponse"in p||"onError"in p))throw new Error("Middleware must be an object with one of `onRequest()`, `onResponse() or `onError()`");u.push(p)}},eject(...m){for(const p of m){const h=u.indexOf(p);h!==-1&&u.splice(h,1)}}}}function j5(e,t,n){if(t==null)return"";if(typeof t=="object")throw new Error("Deeply-nested arrays/objects arent supported. Provide your own `querySerializer()` to handle these.");return`${e}=${n?.allowReserved===!0?t:encodeURIComponent(t)}`}function Ame(e,t,n){if(!t||typeof t!="object")return"";const r=[],s={simple:",",label:".",matrix:";"}[n.style]||"&";if(n.style!=="deepObject"&&n.explode===!1){for(const l in t)r.push(l,n.allowReserved===!0?t[l]:encodeURIComponent(t[l]));const i=r.join(",");switch(n.style){case"form":return`${e}=${i}`;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return i}}for(const i in t){const l=n.style==="deepObject"?`${e}[${i}]`:i;r.push(j5(l,t[i],n))}const a=r.join(s);return n.style==="label"||n.style==="matrix"?`${s}${a}`:a}function Ime(e,t,n){if(!Array.isArray(t))return"";if(n.explode===!1){const a={form:",",spaceDelimited:"%20",pipeDelimited:"|"}[n.style]||",",i=(n.allowReserved===!0?t:t.map(l=>encodeURIComponent(l))).join(a);switch(n.style){case"simple":return i;case"label":return`.${i}`;case"matrix":return`;${e}=${i}`;default:return`${e}=${i}`}}const r={simple:",",label:".",matrix:";"}[n.style]||"&",s=[];for(const a of t)n.style==="simple"||n.style==="label"?s.push(n.allowReserved===!0?a:encodeURIComponent(a)):s.push(j5(e,a,n));return n.style==="label"||n.style==="matrix"?`${r}${s.join(r)}`:s.join(r)}function rY(e){return function(n){const r=[];if(n&&typeof n=="object")for(const s in n){const a=n[s];if(a!=null){if(Array.isArray(a)){if(a.length===0)continue;r.push(Ime(s,a,{style:"form",explode:!0,...e?.array,allowReserved:e?.allowReserved||!1}));continue}if(typeof a=="object"){r.push(Ame(s,a,{style:"deepObject",explode:!0,...e?.object,allowReserved:e?.allowReserved||!1}));continue}r.push(j5(s,a,e))}}return r.join("&")}}function UGe(e,t){let n=e;for(const r of e.match(LGe)??[]){let s=r.substring(1,r.length-1),a=!1,i="simple";if(s.endsWith("*")&&(a=!0,s=s.substring(0,s.length-1)),s.startsWith(".")?(i="label",s=s.substring(1)):s.startsWith(";")&&(i="matrix",s=s.substring(1)),!t||t[s]===void 0||t[s]===null)continue;const l=t[s];if(Array.isArray(l)){n=n.replace(r,Ime(s,l,{style:i,explode:a}));continue}if(typeof l=="object"){n=n.replace(r,Ame(s,l,{style:i,explode:a}));continue}if(i==="matrix"){n=n.replace(r,`;${j5(s,l)}`);continue}n=n.replace(r,i==="label"?`.${encodeURIComponent(l)}`:encodeURIComponent(l))}return n}function BGe(e){return e instanceof FormData?e:JSON.stringify(e)}function $Ge(e,t){let n=`${t.baseUrl}${e}`;t.params?.path&&(n=UGe(n,t.params.path));let r=t.querySerializer(t.params.query??{});return r.startsWith("?")&&(r=r.substring(1)),r&&(n+=`?${r}`),n}function VGe(...e){const t=new Headers;for(const n of e){if(!n||typeof n!="object")continue;const r=n instanceof Headers?n.entries():Object.entries(n);for(const[s,a]of r)if(a===null)t.delete(s);else if(Array.isArray(a))for(const i of a)t.append(s,i);else a!==void 0&&t.set(s,a)}return t}function sY(e){return e.endsWith("/")?e.substring(0,e.length-1):e}function WGe(e){return FGe(e)}const Pf="X-Perplexity-Request-Reason",HGe=()=>{const e=WGe({baseUrl:`https://${crypto.randomUUID()}.com`,fetch:async t=>{const n=new URL(t.url),r=n.pathname,s=n.searchParams,a=await t.text(),i=t.headers.get(Pf)??"typedRestAsyncClient";return Ple({urlPath:s.size>0?`${r}?${s.toString()}`:r,method:t.method,body:a||void 0,headers:t.headers,timeoutMs:t.timeoutMs,numRetries:t.numRetries,backOffTime:t.backOffTime,reason:i,baseUrlOverride:t.baseUrlOverride,includeCredentials:t.includeCredentials})}});return{...e,GET:(t,n,r)=>e.GET(t,{...r||{},headers:{...r?.headers||{},[Pf]:n}}),POST:(t,n,r)=>e.POST(t,{...r||{},headers:{...r?.headers||{},[Pf]:n}}),PUT:(t,n,r)=>e.PUT(t,{...r||{},headers:{...r?.headers||{},[Pf]:n}}),PATCH:(t,n,r)=>e.PATCH(t,{...r||{},headers:{...r?.headers||{},[Pf]:n}}),DELETE:(t,n,r)=>e.DELETE(t,{...r||{},headers:{...r?.headers||{},[Pf]:n}}),SSE:(t,n,{path:r,...s})=>(r&&Object.entries(r).forEach(([a,i])=>{t=t.replace(`{${a}}`,i)}),M9e({url:t,...s||{},headers:{...s?.headers||{},[Pf]:n}}))}},re=HGe(),Ht={DEFAULT:1200,LOW:2500,MEDIUM:5e3,HIGH:1e4,VERY_HIGH:3e4,EXTREMELY_HIGH:9e4,NONE:0},Du=2,Pe=e=>{const t=e?.productionMs??Ht.DEFAULT;e?.devMs??Ht.HIGH;const n=e?.clientSideMs??Ht.MEDIUM;return typeof window<"u"?n:t},msn=e=>["get_prices",{subscription_tier:e}],A5=()=>["get_user_settings",{}],psn=()=>["get_user_site_instructions",{}],UP=()=>["get_user_profile",{}],zGe=()=>["get_user_promotions",{}],GGe=()=>["get_government_origin",{}],qGe=e=>["get_special_profile",{profile_name:e}],KGe=()=>["get_homepage_upsells",{}],YGe=()=>["get_ntp_upsells",{}],hsn=e=>["get_related_pages",{uuid:e}],qc=(e="you")=>["list_feed",{topic:e}],Rme=()=>["discover_topics",{}],Yy=()=>["userOrgData",{}],yE=()=>["pendingInvitation"],_F=e=>["get_collection",{collection_slug:e.slice(-22)}],gsn=()=>["shoppingOrders",{}],xE=()=>["userTryOnPhoto",{}],Lf=()=>["shoppingTryOnBackgroundGeneration"],rj=e=>["productTryOn",{productImageUrl:e}],vE="getOrganizationUsers",ysn=e=>e?[vE,{query:e}]:[vE],xsn=e=>e?[vE,"members",e]:[vE,"members"],QGe=e=>["get_thread_by_uuid",{uuid:e}],XGe=e=>["get_article_by_uuid",{uuid:e}],vsn=e=>["get_article_by_slug",{slug:e}],sj=()=>["customer_shopping_info",{}],wF=e=>["articleResults",{frontend_context_uuid:e}],aY=e=>["article-slug",e],ZGe=(e,t=!1)=>[t?"list_file_directory_infinite":"list_file_directory",e.file_repository_type,e.owner_id],I5=(e,t,n,r=0,s,a=!1)=>[...ZGe({file_repository_type:e,owner_id:t},a),n,...a?[]:[r],s],Pme="connector-files",Lme="connector-files-infinite",Ome=(e,t=!1)=>[t?Lme:Pme,e],JGe=e=>["get_sharepoint_sites_infinite",e??{}],bsn=()=>["get_filters",{}],CF=e=>e?["memories",e]:["memories"],_sn=(e={})=>["hotelBookings",e],wsn=e=>["pro_perks_codes",e],Csn=()=>["pro_perks"],Ssn=()=>["customer_billing_info",{}],Esn=()=>["travel-tile-data"],SF=(e,t)=>["file_exists",e,...t?[t]:[]],dC=e=>["download-image-url",...e?[e]:[]],Msn=()=>["notifications-preferences"],xh=e=>["entry-feedback",e],EF=e=>["user-task",e],n2=e=>["user-tasks",...e?[e]:[]],eqe=()=>["academic-tile-data"],tqe=()=>["academic-primer-queries"],nqe=()=>["check-edu-institution"],Xv=()=>["list_spaces_mentions"],rqe=()=>["upgrade-subscription-preview"],Dme=()=>["subscription-changes"],sqe=()=>["task_shortcuts_mentions"],ksn=e=>["task_shortcuts_copy",e],aqe=e=>["task_shortcuts_paste",e],dd=()=>["app-notifications"],oqe=()=>[...dd(),"unread-count"],Tsn=()=>["braintree-subscription-details"],Fme="get_repository_upload_states",iqe=e=>[Fme,e],Nsn=()=>["get_seat_info"],Ume="space-file-errors",lqe=e=>[Ume,e],vh=["third-party-personalization-status"];var iv={},oY;function cqe(){if(oY)return iv;oY=1,Object.defineProperty(iv,"__esModule",{value:!0}),iv.parse=i,iv.serialize=u;const e=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,t=/^[\u0021-\u003A\u003C-\u007E]*$/,n=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,r=/^[\u0020-\u003A\u003D-\u007E]*$/,s=Object.prototype.toString,a=(()=>{const p=function(){};return p.prototype=Object.create(null),p})();function i(p,h){const g=new a,y=p.length;if(y<2)return g;const x=h?.decode||f;let v=0;do{const b=p.indexOf("=",v);if(b===-1)break;const _=p.indexOf(";",v),w=_===-1?y:_;if(b>w){v=p.lastIndexOf(";",b-1)+1;continue}const C=l(p,v,b),S=c(p,b,C),E=p.slice(C,S);if(g[E]===void 0){let k=l(p,b+1,w),M=c(p,w,k);const j=x(p.slice(k,M));g[E]=j}v=w+1}while(v<y);return g}function l(p,h,g){do{const y=p.charCodeAt(h);if(y!==32&&y!==9)return h}while(++h<g);return g}function c(p,h,g){for(;h>g;){const y=p.charCodeAt(--h);if(y!==32&&y!==9)return h+1}return g}function u(p,h,g){const y=g?.encode||encodeURIComponent;if(!e.test(p))throw new TypeError(`argument name is invalid: ${p}`);const x=y(h);if(!t.test(x))throw new TypeError(`argument val is invalid: ${h}`);let v=p+"="+x;if(!g)return v;if(g.maxAge!==void 0){if(!Number.isInteger(g.maxAge))throw new TypeError(`option maxAge is invalid: ${g.maxAge}`);v+="; Max-Age="+g.maxAge}if(g.domain){if(!n.test(g.domain))throw new TypeError(`option domain is invalid: ${g.domain}`);v+="; Domain="+g.domain}if(g.path){if(!r.test(g.path))throw new TypeError(`option path is invalid: ${g.path}`);v+="; Path="+g.path}if(g.expires){if(!m(g.expires)||!Number.isFinite(g.expires.valueOf()))throw new TypeError(`option expires is invalid: ${g.expires}`);v+="; Expires="+g.expires.toUTCString()}if(g.httpOnly&&(v+="; HttpOnly"),g.secure&&(v+="; Secure"),g.partitioned&&(v+="; Partitioned"),g.priority)switch(typeof g.priority=="string"?g.priority.toLowerCase():void 0){case"low":v+="; Priority=Low";break;case"medium":v+="; Priority=Medium";break;case"high":v+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${g.priority}`)}if(g.sameSite)switch(typeof g.sameSite=="string"?g.sameSite.toLowerCase():g.sameSite){case!0:case"strict":v+="; SameSite=Strict";break;case"lax":v+="; SameSite=Lax";break;case"none":v+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${g.sameSite}`)}return v}function f(p){if(p.indexOf("%")===-1)return p;try{return decodeURIComponent(p)}catch{return p}}function m(p){return s.call(p)==="[object Date]"}return iv}cqe();var aj={};const uqe=(e,t)=>{try{let n=new URL("https://www.perplexity.ai");return typeof window>"u"?t&&aj.NEXTAUTH_UNSAFE_TRUST_HOST_HEADERS?n=new URL(`https://${t}`):aj.NEXTAUTH_URL&&(n=new URL(aj.NEXTAUTH_URL)):n=new URL(window.location.href),new URL(e,n).hostname===n.hostname}catch(n){return ne.warn(n),!1}},dqe=({redirect:e,hostname:t})=>{const n=typeof e=="string"?e:e?.[0];return!n||typeof n!="string"?"/":uqe(n,t)?n:"/"},MF="pplx.chosen-locale",bE="pplx.is-incognito",Bme="pplx.is-discover-interest-box-dismissed",$me="pplx.is-enterprise-ad-dismissed",BP="pplx.la-status",fqe="pplx.visitor-id",Vme="pplx.mweb-splash-page-dismissed",Wme="pplx.is-autosuggest-disabled",Hme="pplx.homepage-widgets-disabled",zme="pplx.source-selection-v3",Gme="pplx.sports-ios-notification-cta",iY="pplx.prefers-metric",qme="pplx.welcome-back-gate-impressions",Kme="pplx.share-gate-impressions",Yme="pplx.sidebar-connectors-ad-dismissed",Qme="pplx.is-student-referral-banner-dismissed",Xme="pplx.is-student-space-upsell-dismissed",Zme="pplx.student-space-upsell-impressions",Jme="pplx.default-search-session",epe="pplx.utm-source",tpe="pplx.pt",npe="pplx.personal-search-badge-seen",rpe="pplx.tasks-settings-seen",$P="pplx.search-mode",spe="pplx.search-models-v4",ape="pplx.max-assistant-mode-enabled",$r=400,mqe=7;function oj(...e){R5("[email_signin_flow] ",...e)}function R5(...e){const t=new Date().toISOString();ne.log(`[${t}] `,...e)}function ope(...e){const t=new Date().toISOString();ne.warn(`[${t}] `,...e)}const pqe=e=>{sn(MF,e,{expires:$r})},hqe=()=>Sn(MF),gqe=()=>{jm(MF)},yqe=e=>{sn(bE,String(e),{})},xqe=(e,t)=>{sn(Vme,String(e),{expires:t})},vqe=e=>{sn(Bme,String(e),{expires:$r})},bqe=e=>{sn(BP,e,{})},_qe=e=>{sn($me,String(e),{expires:$r})},wqe=e=>{sn(Wme,String(e),{expires:$r})},Cqe=e=>{sn(Hme,String(e),{expires:$r})},Sqe=e=>{sn(qme,String(e),{expires:$r})},Eqe=e=>{sn(Kme,String(e),{expires:$r})},Mqe=e=>{sn(Gme,String(e),{expires:$r})},ij=(e,t)=>{const n=`${zme}-${t}`;sn(n,JSON.stringify(e),{expires:mqe})},kqe=e=>{const t=`${zme}-${e}`,n=Sn(t);return n?JSON.parse(n):null},Tqe=()=>!(Sn(h1)??!0),d_=()=>Sn(fqe)??null,Nqe=e=>{sn(Yme,String(e),{expires:$r})},jqe=()=>Sn("pplx.has-discovered-space-mentions")==="true",Aqe=()=>{sn("pplx.has-discovered-space-mentions","true",{expires:$r})},Iqe=e=>{sn(Qme,String(e),{expires:4})},Rqe=e=>{sn(Xme,String(e),{expires:$r})},Pqe=e=>{sn(Zme,String(e),{expires:$r})},ipe=()=>Lle().queryCount>30,kF=()=>{const e=Sn(npe);if(!e)return{sidebar:!1,settingsSidebar:!1,personalize:!1};try{return JSON.parse(e)}catch{return{sidebar:!1,settingsSidebar:!1,personalize:!1}}},Lqe=(e,t)=>{const r={...kF(),[e]:t};sn(npe,JSON.stringify(r),{expires:$r})},Oqe=()=>Sn(rpe)==="true",Dqe=e=>{sn(rpe,String(e),{expires:$r})},Fqe=e=>{sn(Jme,e)},Uqe=()=>Sn(Jme),Bqe=e=>{sn(epe,e)},$qe=()=>Sn(epe),Vqe=()=>Sn(tpe),Wqe=e=>{sn(tpe,e)},f_=(e,t)=>{const n=t?.detail,r=n&&typeof n=="object"&&"error_code"in n&&n.error_code||e;return new we("API_CLIENTS_ERROR",{message:r,cause:t,details:{errorDetail:n}})},lpe=async({reason:e})=>{try{const{error:t,data:n}=await re.GET("/rest/user/promotions",e,{timeoutMs:Pe({productionMs:2e3})});if(t)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch user promotions",cause:t});return n}catch{return{campaign:null,offer:null,institution:null}}},P5=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/billing/get-customer-portal",t,{headers:e,timeoutMs:3e3});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get customer portal",cause:r});if(n.status!=="success")throw new we("API_CLIENTS_ERROR",{message:"Failed to get customer portal",cause:r});return n.url}catch{return null}};async function cpe({currency:e,reason:t,subscriptionTier:n}){const{error:r,data:s}=await re.GET("/rest/stripe/prices",t,{timeoutMs:Ht.NONE,params:{query:{currency:e,subscription_tier:n}}});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch prices",cause:r});return s}const VP=({currency:e,reason:t,subscriptionTier:n})=>Ue({queryKey:["prices",e,n],queryFn:()=>cpe({currency:e,reason:t,subscriptionTier:n}),gcTime:5*60*1e3,staleTime:2*60*1e3}),_E=async({request:e,reason:t})=>{const n=v5(),r=d_(),s={"content-type":"application/json",...n?{"Screen-Dimensions":n}:{}};try{const{data:a,error:i}=await re.POST("/rest/stripe/checkout-session",t,{body:{referral_code:e.referralCode,discount_code:e.discountCode,origin:e.origin,tier:e.tier,locale:e.locale,visitor_id:r,embedded:e.embedded??!1,subscription_tier:e.subscriptionTier,success_redirect_url:e.success_redirect_url},timeoutMs:5e3,headers:s,reason:t});if(i)throw new we("API_CLIENTS_ERROR",{cause:i,details:{reason:t}});return{subscriptionStatus:a.subscription_status,status:a.status,url:a.url??null,clientSecret:a.client_secret??void 0,errorCode:a.error_code??void 0,subscriptionTier:e.subscriptionTier}}catch{return}},Hqe=async({request:e,headers:t,reason:n})=>{try{const{data:r,error:s}=await re.POST("/rest/stripe/create-setup-intent",n,{body:{is_updating:e.isUpdating},timeoutMs:Pe({productionMs:2500}),headers:t});if(s)throw new we("API_CLIENTS_ERROR",{cause:s,details:{reason:n}});return{clientSecret:r.client_secret}}catch{return}},zqe=async({request:e,headers:t,reason:n})=>{if(e.orgId)try{const{data:r,error:s}=await re.POST("/rest/pplx-api/v2/groups/{api_org_id}/setup-intent",n,{params:{path:{api_org_id:e.orgId}},timeoutMs:Pe({productionMs:2500}),headers:t});if(s)throw new we("API_CLIENTS_ERROR",{cause:s,details:{reason:n}});return{clientSecret:r.client_secret}}catch{return}},Gqe=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await re.POST("/rest/stripe/create-setup-intent-and-customer-session",t,{timeoutMs:Pe({productionMs:3e3}),headers:e});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return{customerId:n.customer_id,clientSecret:n.client_secret,customerSessionClientSecret:n.customer_session_client_secret}}catch{return}};var WP;(function(e){e.WINDOWSAPP="windowsapp",e.MACAPP="macapp",e.COMET="comet"})(WP||(WP={}));const qqe=async({credits:e,apiOrgId:t,reason:n})=>{const{error:r,data:s}=await re.POST("/rest/pplx-api/v2/groups/{api_org_id}/topup",n,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{credits:e}});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to topup customer balance",cause:r});return s},Kqe=async({amount:e,apiOrgId:t,threshold:n=2,enabled:r=!0,reason:s})=>{const{error:a,data:i}=await re.POST("/rest/pplx-api/v2/groups/{api_org_id}/auto-topup",s,{timeoutMs:5e3,headers:{"content-type":"application/json"},params:{path:{api_org_id:t}},body:{amount:e,threshold:n,enabled:r}});if(a)throw new we("API_CLIENTS_ERROR",{message:"Failed to auto topup customer balance",cause:a});return i};async function upe({locale:e,reason:t}){try{const{error:n,data:r}=await re.GET("/rest/billing/get-milestone-progress",t,{timeoutMs:Ht.NONE,params:{header:{"accept-language":e}}});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch milestones",cause:n});return r}catch{return null}}const dpe=async({displayName:e,address:t,description:n,contactInfo:r,reason:s})=>{try{const{error:a,data:i}=await re.POST("/rest/pplx-api/v2/groups",s,{timeoutMs:9e3,headers:{"content-type":"application/json"},body:{display_name:e,address:t,description:n,contact_info:r}});if(a)throw new we("API_CLIENTS_ERROR",{message:"Failed to create API group",cause:a});return i.org}catch(a){return ne.log(a),null}},fpe=async({reason:e})=>{const t="getAPIGroupsV2";try{const{data:n}=await re.GET("/rest/pplx-api/v2/groups",e,{timeoutMs:1e4,numRetries:1,reason:e});return n?.orgs??ce}catch(n){return ne.log(`Error in ${t}:`,n),[]}},mpe=async({orgId:e,reason:t})=>{if(!e)return{};try{const{error:n,data:r}=await re.GET("/rest/pplx-api/v2/groups/{api_org_id}",t,{timeoutMs:1e4,headers:{"content-type":"application/json"},params:{path:{api_org_id:e}}});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch API group customer info",cause:n});return{apiOrganization:r.apiOrganization,customerInfo:r.customerInfo,hasDefaultPaymentMethod:r.hasDefaultPaymentMethod,taxInfo:r.taxInfo}}catch(n){return ne.log(n),{}}},Yqe=async({orgId:e,reason:t})=>{const n="getAPIGroupAPIKeys";if(!e)return{};try{const{data:r}=await re.GET("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",t,{params:{path:{api_org_id:e}},timeoutMs:1e4,numRetries:1});return{apiKeys:r?.apiKeys}}catch(r){return ne.log(`Error in ${n}:`,r),{}}},ppe=async({reason:e})=>{try{const{error:t,data:n}=await re.POST("/rest/billing/create-government-subscription",e,{timeoutMs:6e3});if(t)throw new we("API_CLIENTS_ERROR",{cause:t,details:{reason:e}});return{status:n.status,error_code:n.error_code??void 0,message:n.message??void 0}}catch{return}},Qqe=async({headers:e,reason:t})=>{const{error:n,data:r}=await re.GET("/rest/stripe/upgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ht.HIGH});if(n)throw f_("Failed to fetch upgrade subscription preview",n);return r},Xqe=async({headers:e,reason:t})=>{const{error:n,data:r}=await re.GET("/rest/stripe/downgrade-subscription-preview",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ht.HIGH});if(n)throw f_("Failed to fetch downgrade subscription preview",n);return r},hpe=({reason:e,enabled:t})=>Ue({queryKey:rqe(),queryFn:()=>Qqe({reason:e}),gcTime:0,staleTime:0,enabled:t}),gpe=({reason:e})=>Ue({queryKey:["downgrade-subscription-preview"],queryFn:()=>Xqe({reason:e}),gcTime:0,staleTime:0}),Zqe=async({headers:e,reason:t})=>{const{error:n,data:r}=await re.POST("/rest/stripe/upgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ht.HIGH});if(n)throw f_("Failed to upgrade subscription",n);return r},ype=({reason:e},t)=>{const n="useUpgradeSubscription";return dt({retry:!1,mutationFn:()=>Zqe({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},Jqe=async({headers:e,reason:t})=>{const{error:n,data:r}=await re.POST("/rest/stripe/downgrade-subscription",t,{headers:{"content-type":"application/json",...e},timeoutMs:Ht.HIGH});if(n)throw f_("Failed to downgrade subscription",n);return r},xpe=({reason:e},t)=>{const n="useDowngradeSubscription";return dt({mutationFn:()=>Jqe({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},eKe=async({reason:e})=>{const{error:t,data:n}=await re.GET("/rest/stripe/subscription-changes",e,{headers:{"content-type":"application/json"},timeoutMs:Ht.HIGH});if(t)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch subscription changes",cause:t});return n},vpe=({reason:e,enabled:t})=>Ue({queryKey:Dme(),queryFn:()=>eKe({reason:e}),gcTime:0,staleTime:0,enabled:t}),tKe=async({reason:e})=>{const{error:t,data:n}=await re.POST("/rest/stripe/cancel-downgrade-subscription",e,{headers:{"content-type":"application/json"},timeoutMs:Ht.HIGH});if(t)throw f_("Failed to cancel downgrade",t);return n},bpe=({reason:e},t)=>{const n="useCancelDowngrade";return dt({retry:!1,mutationFn:()=>tKe({reason:e}),onError:r=>{ne.error(`Error in ${n}:`,r)},...t})},_pe=async({paymentMethodUUID:e,optedIn:t})=>{const n="visa-opt-in-submit",{error:r,data:s}=await re.POST("/rest/billing/personalization/update",n,{body:{enabled:t,payment_method_uuid:e}});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to redeem visa",cause:r});return s},nKe=async()=>{const e=await re.GET("/rest/billing/braintree/subscription-details","braintree-modal-fetch-details",{timeoutMs:5e3});if(e.error)throw e.error;return e.data},rKe=async({payment_method_type:e})=>{const t=await re.POST("/rest/billing/braintree/cancel-subscription","braintree-modal-cancel",{timeoutMs:5e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},sKe=async({payment_method_type:e})=>{const t=await re.POST("/rest/billing/braintree/renew-subscription","braintree-modal-renew",{timeoutMs:3e3,body:{payment_method_type:e}});if(t.error)throw t.error;return t.data},lY=Object.freeze(Object.defineProperty({__proto__:null,get PlatformType(){return WP},autoTopupCustomerBalance:Kqe,cancelBraintreeSubscription:rKe,createApiGroupV2:dpe,createCheckoutSession:_E,createGovernmentSubscription:ppe,createSetupIntent:Hqe,createSetupIntentAndCustomerSession:Gqe,createSetupIntentV2:zqe,fetchBraintreeSubscriptionDetails:nKe,getAPIGroupAPIKeys:Yqe,getAPIGroupCustomerInfo:mpe,getAPIGroupsV2:fpe,getCustomerPortal:P5,getMilestoneProgress:upe,getPrices:cpe,getUserPromotions:lpe,handlePersonalizationStatusUpdate:_pe,renewBraintreeSubscription:sKe,topupCustomerBalance:qqe,useCancelDowngrade:bpe,useDowngradeSubscription:xpe,useGetDowngradeSubscriptionPreview:gpe,useGetPrices:VP,useGetSubscriptionChanges:vpe,useGetUpgradeSubscriptionPreview:hpe,useUpgradeSubscription:ype},Symbol.toStringTag,{value:"Module"})),wpe=Dt("ModalStateContext",{currentOpenModals:[],currentOpenedModal:null,openModal:()=>{},openStackedModal:()=>{},updateModal:()=>{},closeModal:()=>{}}),xt=()=>{const e=d.useContext(wpe);if(!e)throw new Error("useModalState must be used within ModalContext");return e},aKe=["/?","/search","/discover"],oKe=["/"],TF=e=>e?!oKe.some(t=>e===t)&&!aKe.some(t=>e.startsWith(t)):!0,iKe=768,Cpe=`(max-width: ${iKe}px)`;function cY(){return typeof window>"u"?!1:window.matchMedia(Cpe).matches}function Ha(e={}){const t=Lt(),{device:{isWindowsApp:n}}=Pt(),r=d.useMemo(()=>!!(n&&t?.includes(N1)),[n,t]),{evaluateOnInit:s=!1}=e,a=Spe(),i=lKe(),[l,c]=d.useState(()=>a||i?!0:s?cY():!1);return d.useEffect(()=>{if(typeof window>"u")return;const u=window.matchMedia(Cpe);function f(){c(u.matches)}return u.addEventListener("change",f),()=>{u.removeEventListener("change",f)}},[a]),d.useEffect(()=>{s||c(cY())},[s]),l&&!r}function Spe(e=!1){const{device:{isMobile:t}}=Pt();return t??e}function lKe(e=!1){const{device:{isAndroid:t}}=Pt();return t??e}function xe(e={}){const t=Lt(),{device:{isWindowsApp:n}}=Pt(),r=Ha(e),s=d.useMemo(()=>!!(n&&t?.includes(N1)),[n,t]),a=d.useMemo(()=>r&&!s,[r,s]),i=Spe();return d.useMemo(()=>({isMobileStyle:a,isMobileUserAgent:i}),[a,i])}function Epe({}){const t=Lt(),n=TF(t),{isMobileUserAgent:r}=xe();return!r&&!n&&!1}var lj={},cj={},fC={},uj={},uY;function m_(){return uY||(uY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.BANDIT_ASSIGNMENT_SHARDS=e.MAX_EVENT_QUEUE_SIZE=e.NULL_SENTINEL=e.SESSION_ASSIGNMENT_CONFIG_LOADED=e.BANDIT_ENDPOINT=e.UFC_ENDPOINT=e.BASE_URL=e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=e.POLL_JITTER_PCT=e.POLL_INTERVAL_MS=e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS=void 0,e.DEFAULT_REQUEST_TIMEOUT_MS=5e3,e.REQUEST_TIMEOUT_MILLIS=e.DEFAULT_REQUEST_TIMEOUT_MS,e.POLL_INTERVAL_MS=3e4,e.POLL_JITTER_PCT=.1,e.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES=1,e.DEFAULT_POLL_CONFIG_REQUEST_RETRIES=7,e.BASE_URL="https://fscdn.eppo.cloud/api",e.UFC_ENDPOINT="/flag-config/v1/config",e.BANDIT_ENDPOINT="/flag-config/v1/bandits",e.SESSION_ASSIGNMENT_CONFIG_LOADED="eppo-session-assignment-config-loaded",e.NULL_SENTINEL="EPPO_NULL",e.MAX_EVENT_QUEUE_SIZE=100,e.BANDIT_ASSIGNMENT_SHARDS=1e4}(uj)),uj}var dY;function Mpe(){if(dY)return fC;dY=1,Object.defineProperty(fC,"__esModule",{value:!0});const e=m_();class t{constructor(r){var s;this.params=r,this.params.baseUrl=(s=r.baseUrl)!==null&&s!==void 0?s:e.BASE_URL}endpoint(r){var s;const a=new URL(this.params.baseUrl+r);return Object.entries((s=this.params.queryParams)!==null&&s!==void 0?s:{}).forEach(([i,l])=>a.searchParams.append(i,l)),a}ufcEndpoint(){return this.endpoint(e.UFC_ENDPOINT)}banditParametersEndpoint(){return this.endpoint(e.BANDIT_ENDPOINT)}}return fC.default=t,fC}var Of={},lv={exports:{}},dj,fY;function cKe(){if(fY)return dj;fY=1;function e(n){try{return JSON.stringify(n)}catch{return'"[Circular]"'}}dj=t;function t(n,r,s){var a=s&&s.stringify||e,i=1;if(typeof n=="object"&&n!==null){var l=r.length+i;if(l===1)return n;var c=new Array(l);c[0]=a(n);for(var u=1;u<l;u++)c[u]=a(r[u]);return c.join(" ")}if(typeof n!="string")return n;var f=r.length;if(f===0)return n;for(var m="",p=1-i,h=-1,g=n&&n.length||0,y=0;y<g;){if(n.charCodeAt(y)===37&&y+1<g){switch(h=h>-1?h:0,n.charCodeAt(y+1)){case 100:case 102:if(p>=f||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Number(r[p]),h=y+2,y++;break;case 105:if(p>=f||r[p]==null)break;h<y&&(m+=n.slice(h,y)),m+=Math.floor(Number(r[p])),h=y+2,y++;break;case 79:case 111:case 106:if(p>=f||r[p]===void 0)break;h<y&&(m+=n.slice(h,y));var x=typeof r[p];if(x==="string"){m+="'"+r[p]+"'",h=y+2,y++;break}if(x==="function"){m+=r[p].name||"<anonymous>",h=y+2,y++;break}m+=a(r[p]),h=y+2,y++;break;case 115:if(p>=f)break;h<y&&(m+=n.slice(h,y)),m+=String(r[p]),h=y+2,y++;break;case 37:h<y&&(m+=n.slice(h,y)),m+="%",h=y+2,y++,p--;break}++p}++y}return h===-1?n:(h<g&&(m+=n.slice(h)),m)}return dj}var mY;function uKe(){if(mY)return lv.exports;mY=1;const e=cKe();lv.exports=f;const t=P().console||{},n={mapHttpRequest:E,mapHttpResponse:E,wrapRequestSerializer:k,wrapResponseSerializer:k,wrapErrorSerializer:k,req:E,res:E,err:C,errWithCause:C};function r(A,T){return A==="silent"?1/0:T.levels.values[A]}const s=Symbol("pino.logFuncs"),a=Symbol("pino.hierarchy"),i={error:"log",fatal:"error",warn:"error",info:"log",debug:"log",trace:"log"};function l(A,T){const N={logger:T,parent:A[a]};T[a]=N}function c(A,T,N){const L={};T.forEach(U=>{L[U]=N[U]?N[U]:t[U]||t[i[U]||"log"]||M}),A[s]=L}function u(A,T){return Array.isArray(A)?A.filter(function(L){return L!=="!stdSerializers.err"}):A===!0?Object.keys(T):!1}function f(A){A=A||{},A.browser=A.browser||{};const T=A.browser.transmit;if(T&&typeof T.send!="function")throw Error("pino: transmit option must have a send function");const N=A.browser.write||t;A.browser.write&&(A.browser.asObject=!0);const L=A.serializers||{},U=u(A.browser.serialize,L);let $=A.browser.serialize;Array.isArray(A.browser.serialize)&&A.browser.serialize.indexOf("!stdSerializers.err")>-1&&($=!1);const V=Object.keys(A.customLevels||{}),W=["error","fatal","warn","info","debug","trace"].concat(V);typeof N=="function"&&W.forEach(function(te){N[te]=N}),(A.enabled===!1||A.browser.disabled)&&(A.level="silent");const Q=A.level||"info",q=Object.create(N);q.log||(q.log=M),c(q,W,N),l({},q),Object.defineProperty(q,"levelVal",{get:K}),Object.defineProperty(q,"level",{get:G,set:ee});const H={transmit:T,serialize:U,asObject:A.browser.asObject,formatters:A.browser.formatters,levels:W,timestamp:S(A)};q.levels=m(A),q.level=Q,q.setMaxListeners=q.getMaxListeners=q.emit=q.addListener=q.on=q.prependListener=q.once=q.prependOnceListener=q.removeListener=q.removeAllListeners=q.listeners=q.listenerCount=q.eventNames=q.write=q.flush=M,q.serializers=L,q._serialize=U,q._stdErrSerialize=$,q.child=Y,T&&(q._logEvent=w());function K(){return r(this.level,this)}function G(){return this._level}function ee(te){if(te!=="silent"&&!this.levels.values[te])throw Error("unknown level "+te);this._level=te,g(this,H,q,"error"),g(this,H,q,"fatal"),g(this,H,q,"warn"),g(this,H,q,"info"),g(this,H,q,"debug"),g(this,H,q,"trace"),V.forEach(se=>{g(this,H,q,se)})}function Y(te,se){if(!te)throw new Error("missing bindings for child Pino");se=se||{},U&&te.serializers&&(se.serializers=te.serializers);const ae=se.serializers;if(U&&ae){var pe=Object.assign({},L,ae),fe=A.browser.serialize===!0?Object.keys(pe):U;delete te.serializers,b([te],fe,pe,this._stdErrSerialize)}function ge(je){this._childLevel=(je._childLevel|0)+1,this.bindings=te,pe&&(this.serializers=pe,this._serialize=fe),T&&(this._logEvent=w([].concat(je._logEvent.bindings,te)))}ge.prototype=this;const Se=new ge(this);return l(this,Se),Se.level=this.level,Se}return q}function m(A){const T=A.customLevels||{},N=Object.assign({},f.levels.values,T),L=Object.assign({},f.levels.labels,p(T));return{values:N,labels:L}}function p(A){const T={};return Object.keys(A).forEach(function(N){T[A[N]]=N}),T}f.levels={values:{fatal:60,error:50,warn:40,info:30,debug:20,trace:10},labels:{10:"trace",20:"debug",30:"info",40:"warn",50:"error",60:"fatal"}},f.stdSerializers=n,f.stdTimeFunctions=Object.assign({},{nullTime:j,epochTime:R,unixTime:O,isoTime:D});function h(A){const T=[];A.bindings&&T.push(A.bindings);let N=A[a];for(;N.parent;)N=N.parent,N.logger.bindings&&T.push(N.logger.bindings);return T.reverse()}function g(A,T,N,L){if(Object.defineProperty(A,L,{value:r(A.level,N)>r(L,N)?M:N[s][L],writable:!0,enumerable:!0,configurable:!0}),!T.transmit&&A[L]===M)return;A[L]=x(A,T,N,L);const U=h(A);U.length!==0&&(A[L]=y(U,A[L]))}function y(A,T){return function(){return T.apply(this,[...A,...arguments])}}function x(A,T,N,L){return function(U){return function(){const V=T.timestamp(),W=new Array(arguments.length),Q=Object.getPrototypeOf&&Object.getPrototypeOf(this)===t?t:this;for(var q=0;q<W.length;q++)W[q]=arguments[q];if(T.serialize&&!T.asObject&&b(W,this._serialize,this.serializers,this._stdErrSerialize),T.asObject||T.formatters?U.call(Q,v(this,L,W,V,T.formatters)):U.apply(Q,W),T.transmit){const H=T.transmit.level||A._level,K=N.levels.values[H],G=N.levels.values[L];if(G<K)return;_(this,{ts:V,methodLevel:L,methodValue:G,transmitValue:N.levels.values[T.transmit.level||A._level],send:T.transmit.send,val:r(A._level,N)},W)}}}(A[s][L])}function v(A,T,N,L,U={}){const{level:$=()=>A.levels.values[T],log:V=G=>G}=U;A._serialize&&b(N,A._serialize,A.serializers,A._stdErrSerialize);const W=N.slice();let Q=W[0];const q={};L&&(q.time=L),q.level=$(T,A.levels.values[T]);let H=(A._childLevel|0)+1;if(H<1&&(H=1),Q!==null&&typeof Q=="object"){for(;H--&&typeof W[0]=="object";)Object.assign(q,W.shift());Q=W.length?e(W.shift(),W):void 0}else typeof Q=="string"&&(Q=e(W.shift(),W));return Q!==void 0&&(q.msg=Q),V(q)}function b(A,T,N,L){for(const U in A)if(L&&A[U]instanceof Error)A[U]=f.stdSerializers.err(A[U]);else if(typeof A[U]=="object"&&!Array.isArray(A[U]))for(const $ in A[U])T&&T.indexOf($)>-1&&$ in N&&(A[U][$]=N[$](A[U][$]))}function _(A,T,N){const L=T.send,U=T.ts,$=T.methodLevel,V=T.methodValue,W=T.val,Q=A._logEvent.bindings;b(N,A._serialize||Object.keys(A.serializers),A.serializers,A._stdErrSerialize===void 0?!0:A._stdErrSerialize),A._logEvent.ts=U,A._logEvent.messages=N.filter(function(q){return Q.indexOf(q)===-1}),A._logEvent.level.label=$,A._logEvent.level.value=V,L($,A._logEvent,W),A._logEvent=w(Q)}function w(A){return{ts:0,messages:[],bindings:A||[],level:{label:"",value:0}}}function C(A){const T={type:A.constructor.name,msg:A.message,stack:A.stack};for(const N in A)T[N]===void 0&&(T[N]=A[N]);return T}function S(A){return typeof A.timestamp=="function"?A.timestamp:A.timestamp===!1?j:R}function E(){return{}}function k(A){return A}function M(){}function j(){return!1}function R(){return Date.now()}function O(){return Math.round(Date.now()/1e3)}function D(){return new Date(Date.now()).toISOString()}function P(){function A(T){return typeof T<"u"&&T}try{return typeof globalThis<"u"||Object.defineProperty(Object.prototype,"globalThis",{get:function(){return delete Object.prototype.globalThis,this.globalThis=this},configurable:!0}),globalThis}catch{return A(self)||A(window)||A(this)||{}}}return lv.exports.default=f,lv.exports.pino=f,lv.exports}var pY;function L5(){if(pY)return Of;pY=1,Object.defineProperty(Of,"__esModule",{value:!0}),Of.logger=Of.loggerPrefix=void 0;const e=uKe();return Of.loggerPrefix="[Eppo SDK]",Of.logger=(0,e.default)({level:"warn",browser:{disabled:!0}}),Of}var Eo={},Fc={},r2={exports:{}},dKe=r2.exports,hY;function fKe(){return hY||(hY=1,function(e,t){(function(n,r){e.exports=r()})(typeof self<"u"?self:typeof window<"u"?window:typeof bi<"u"?bi:dKe,function(){var n="3.7.7",r=n,s=typeof Buffer=="function",a=typeof TextDecoder=="function"?new TextDecoder:void 0,i=typeof TextEncoder=="function"?new TextEncoder:void 0,l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c=Array.prototype.slice.call(l),u=function(H){var K={};return H.forEach(function(G,ee){return K[G]=ee}),K}(c),f=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,m=String.fromCharCode.bind(String),p=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):function(H){return new Uint8Array(Array.prototype.slice.call(H,0))},h=function(H){return H.replace(/=/g,"").replace(/[+\/]/g,function(K){return K=="+"?"-":"_"})},g=function(H){return H.replace(/[^A-Za-z0-9\+\/]/g,"")},y=function(H){for(var K,G,ee,Y,te="",se=H.length%3,ae=0;ae<H.length;){if((G=H.charCodeAt(ae++))>255||(ee=H.charCodeAt(ae++))>255||(Y=H.charCodeAt(ae++))>255)throw new TypeError("invalid character found");K=G<<16|ee<<8|Y,te+=c[K>>18&63]+c[K>>12&63]+c[K>>6&63]+c[K&63]}return se?te.slice(0,se-3)+"===".substring(se):te},x=typeof btoa=="function"?function(H){return btoa(H)}:s?function(H){return Buffer.from(H,"binary").toString("base64")}:y,v=s?function(H){return Buffer.from(H).toString("base64")}:function(H){for(var K=4096,G=[],ee=0,Y=H.length;ee<Y;ee+=K)G.push(m.apply(null,H.subarray(ee,ee+K)));return x(G.join(""))},b=function(H,K){return K===void 0&&(K=!1),K?h(v(H)):v(H)},_=function(H){if(H.length<2){var K=H.charCodeAt(0);return K<128?H:K<2048?m(192|K>>>6)+m(128|K&63):m(224|K>>>12&15)+m(128|K>>>6&63)+m(128|K&63)}else{var K=65536+(H.charCodeAt(0)-55296)*1024+(H.charCodeAt(1)-56320);return m(240|K>>>18&7)+m(128|K>>>12&63)+m(128|K>>>6&63)+m(128|K&63)}},w=/[\uD800-\uDBFF][\uDC00-\uDFFFF]|[^\x00-\x7F]/g,C=function(H){return H.replace(w,_)},S=s?function(H){return Buffer.from(H,"utf8").toString("base64")}:i?function(H){return v(i.encode(H))}:function(H){return x(C(H))},E=function(H,K){return K===void 0&&(K=!1),K?h(S(H)):S(H)},k=function(H){return E(H,!0)},M=/[\xC0-\xDF][\x80-\xBF]|[\xE0-\xEF][\x80-\xBF]{2}|[\xF0-\xF7][\x80-\xBF]{3}/g,j=function(H){switch(H.length){case 4:var K=(7&H.charCodeAt(0))<<18|(63&H.charCodeAt(1))<<12|(63&H.charCodeAt(2))<<6|63&H.charCodeAt(3),G=K-65536;return m((G>>>10)+55296)+m((G&1023)+56320);case 3:return m((15&H.charCodeAt(0))<<12|(63&H.charCodeAt(1))<<6|63&H.charCodeAt(2));default:return m((31&H.charCodeAt(0))<<6|63&H.charCodeAt(1))}},R=function(H){return H.replace(M,j)},O=function(H){if(H=H.replace(/\s+/g,""),!f.test(H))throw new TypeError("malformed base64.");H+="==".slice(2-(H.length&3));for(var K,G="",ee,Y,te=0;te<H.length;)K=u[H.charAt(te++)]<<18|u[H.charAt(te++)]<<12|(ee=u[H.charAt(te++)])<<6|(Y=u[H.charAt(te++)]),G+=ee===64?m(K>>16&255):Y===64?m(K>>16&255,K>>8&255):m(K>>16&255,K>>8&255,K&255);return G},D=typeof atob=="function"?function(H){return atob(g(H))}:s?function(H){return Buffer.from(H,"base64").toString("binary")}:O,P=s?function(H){return p(Buffer.from(H,"base64"))}:function(H){return p(D(H).split("").map(function(K){return K.charCodeAt(0)}))},A=function(H){return P(N(H))},T=s?function(H){return Buffer.from(H,"base64").toString("utf8")}:a?function(H){return a.decode(P(H))}:function(H){return R(D(H))},N=function(H){return g(H.replace(/[-_]/g,function(K){return K=="-"?"+":"/"}))},L=function(H){return T(N(H))},U=function(H){if(typeof H!="string")return!1;var K=H.replace(/\s+/g,"").replace(/={0,2}$/,"");return!/[^\s0-9a-zA-Z\+/]/.test(K)||!/[^\s0-9a-zA-Z\-_]/.test(K)},$=function(H){return{value:H,enumerable:!1,writable:!0,configurable:!0}},V=function(){var H=function(K,G){return Object.defineProperty(String.prototype,K,$(G))};H("fromBase64",function(){return L(this)}),H("toBase64",function(K){return E(this,K)}),H("toBase64URI",function(){return E(this,!0)}),H("toBase64URL",function(){return E(this,!0)}),H("toUint8Array",function(){return A(this)})},W=function(){var H=function(K,G){return Object.defineProperty(Uint8Array.prototype,K,$(G))};H("toBase64",function(K){return b(this,K)}),H("toBase64URI",function(){return b(this,!0)}),H("toBase64URL",function(){return b(this,!0)})},Q=function(){V(),W()},q={version:n,VERSION:r,atob:D,atobPolyfill:O,btoa:x,btoaPolyfill:y,fromBase64:L,toBase64:E,encode:E,encodeURI:k,encodeURL:k,utob:C,btou:R,decode:L,isValid:U,fromUint8Array:b,toUint8Array:A,extendString:V,extendUint8Array:W,extendBuiltins:Q};return q.Base64={},Object.keys(q).forEach(function(H){return q.Base64[H]=q[H]}),q})}(r2)),r2.exports}var fj={exports:{}},mj={exports:{}},gY;function mKe(){return gY||(gY=1,function(){var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",t={rotl:function(n,r){return n<<r|n>>>32-r},rotr:function(n,r){return n<<32-r|n>>>r},endian:function(n){if(n.constructor==Number)return t.rotl(n,8)&16711935|t.rotl(n,24)&4278255360;for(var r=0;r<n.length;r++)n[r]=t.endian(n[r]);return n},randomBytes:function(n){for(var r=[];n>0;n--)r.push(Math.floor(Math.random()*256));return r},bytesToWords:function(n){for(var r=[],s=0,a=0;s<n.length;s++,a+=8)r[a>>>5]|=n[s]<<24-a%32;return r},wordsToBytes:function(n){for(var r=[],s=0;s<n.length*32;s+=8)r.push(n[s>>>5]>>>24-s%32&255);return r},bytesToHex:function(n){for(var r=[],s=0;s<n.length;s++)r.push((n[s]>>>4).toString(16)),r.push((n[s]&15).toString(16));return r.join("")},hexToBytes:function(n){for(var r=[],s=0;s<n.length;s+=2)r.push(parseInt(n.substr(s,2),16));return r},bytesToBase64:function(n){for(var r=[],s=0;s<n.length;s+=3)for(var a=n[s]<<16|n[s+1]<<8|n[s+2],i=0;i<4;i++)s*8+i*6<=n.length*8?r.push(e.charAt(a>>>6*(3-i)&63)):r.push("=");return r.join("")},base64ToBytes:function(n){n=n.replace(/[^A-Z0-9+\/]/ig,"");for(var r=[],s=0,a=0;s<n.length;a=++s%4)a!=0&&r.push((e.indexOf(n.charAt(s-1))&Math.pow(2,-2*a+8)-1)<<a*2|e.indexOf(n.charAt(s))>>>6-a*2);return r}};mj.exports=t}()),mj.exports}var pj,yY;function xY(){if(yY)return pj;yY=1;var e={utf8:{stringToBytes:function(t){return e.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(e.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var n=[],r=0;r<t.length;r++)n.push(t.charCodeAt(r)&255);return n},bytesToString:function(t){for(var n=[],r=0;r<t.length;r++)n.push(String.fromCharCode(t[r]));return n.join("")}}};return pj=e,pj}/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */var hj,vY;function pKe(){if(vY)return hj;vY=1,hj=function(n){return n!=null&&(e(n)||t(n)||!!n._isBuffer)};function e(n){return!!n.constructor&&typeof n.constructor.isBuffer=="function"&&n.constructor.isBuffer(n)}function t(n){return typeof n.readFloatLE=="function"&&typeof n.slice=="function"&&e(n.slice(0,0))}return hj}var bY;function hKe(){return bY||(bY=1,function(){var e=mKe(),t=xY().utf8,n=pKe(),r=xY().bin,s=function(a,i){a.constructor==String?i&&i.encoding==="binary"?a=r.stringToBytes(a):a=t.stringToBytes(a):n(a)?a=Array.prototype.slice.call(a,0):!Array.isArray(a)&&a.constructor!==Uint8Array&&(a=a.toString());for(var l=e.bytesToWords(a),c=a.length*8,u=1732584193,f=-271733879,m=-1732584194,p=271733878,h=0;h<l.length;h++)l[h]=(l[h]<<8|l[h]>>>24)&16711935|(l[h]<<24|l[h]>>>8)&4278255360;l[c>>>5]|=128<<c%32,l[(c+64>>>9<<4)+14]=c;for(var g=s._ff,y=s._gg,x=s._hh,v=s._ii,h=0;h<l.length;h+=16){var b=u,_=f,w=m,C=p;u=g(u,f,m,p,l[h+0],7,-680876936),p=g(p,u,f,m,l[h+1],12,-389564586),m=g(m,p,u,f,l[h+2],17,606105819),f=g(f,m,p,u,l[h+3],22,-1044525330),u=g(u,f,m,p,l[h+4],7,-176418897),p=g(p,u,f,m,l[h+5],12,1200080426),m=g(m,p,u,f,l[h+6],17,-1473231341),f=g(f,m,p,u,l[h+7],22,-45705983),u=g(u,f,m,p,l[h+8],7,1770035416),p=g(p,u,f,m,l[h+9],12,-1958414417),m=g(m,p,u,f,l[h+10],17,-42063),f=g(f,m,p,u,l[h+11],22,-1990404162),u=g(u,f,m,p,l[h+12],7,1804603682),p=g(p,u,f,m,l[h+13],12,-40341101),m=g(m,p,u,f,l[h+14],17,-1502002290),f=g(f,m,p,u,l[h+15],22,1236535329),u=y(u,f,m,p,l[h+1],5,-165796510),p=y(p,u,f,m,l[h+6],9,-1069501632),m=y(m,p,u,f,l[h+11],14,643717713),f=y(f,m,p,u,l[h+0],20,-373897302),u=y(u,f,m,p,l[h+5],5,-701558691),p=y(p,u,f,m,l[h+10],9,38016083),m=y(m,p,u,f,l[h+15],14,-660478335),f=y(f,m,p,u,l[h+4],20,-405537848),u=y(u,f,m,p,l[h+9],5,568446438),p=y(p,u,f,m,l[h+14],9,-1019803690),m=y(m,p,u,f,l[h+3],14,-187363961),f=y(f,m,p,u,l[h+8],20,1163531501),u=y(u,f,m,p,l[h+13],5,-1444681467),p=y(p,u,f,m,l[h+2],9,-51403784),m=y(m,p,u,f,l[h+7],14,1735328473),f=y(f,m,p,u,l[h+12],20,-1926607734),u=x(u,f,m,p,l[h+5],4,-378558),p=x(p,u,f,m,l[h+8],11,-2022574463),m=x(m,p,u,f,l[h+11],16,1839030562),f=x(f,m,p,u,l[h+14],23,-35309556),u=x(u,f,m,p,l[h+1],4,-1530992060),p=x(p,u,f,m,l[h+4],11,1272893353),m=x(m,p,u,f,l[h+7],16,-155497632),f=x(f,m,p,u,l[h+10],23,-1094730640),u=x(u,f,m,p,l[h+13],4,681279174),p=x(p,u,f,m,l[h+0],11,-358537222),m=x(m,p,u,f,l[h+3],16,-722521979),f=x(f,m,p,u,l[h+6],23,76029189),u=x(u,f,m,p,l[h+9],4,-640364487),p=x(p,u,f,m,l[h+12],11,-421815835),m=x(m,p,u,f,l[h+15],16,530742520),f=x(f,m,p,u,l[h+2],23,-995338651),u=v(u,f,m,p,l[h+0],6,-198630844),p=v(p,u,f,m,l[h+7],10,1126891415),m=v(m,p,u,f,l[h+14],15,-1416354905),f=v(f,m,p,u,l[h+5],21,-57434055),u=v(u,f,m,p,l[h+12],6,1700485571),p=v(p,u,f,m,l[h+3],10,-1894986606),m=v(m,p,u,f,l[h+10],15,-1051523),f=v(f,m,p,u,l[h+1],21,-2054922799),u=v(u,f,m,p,l[h+8],6,1873313359),p=v(p,u,f,m,l[h+15],10,-30611744),m=v(m,p,u,f,l[h+6],15,-1560198380),f=v(f,m,p,u,l[h+13],21,1309151649),u=v(u,f,m,p,l[h+4],6,-145523070),p=v(p,u,f,m,l[h+11],10,-1120210379),m=v(m,p,u,f,l[h+2],15,718787259),f=v(f,m,p,u,l[h+9],21,-343485551),u=u+b>>>0,f=f+_>>>0,m=m+w>>>0,p=p+C>>>0}return e.endian([u,f,m,p])};s._ff=function(a,i,l,c,u,f,m){var p=a+(i&l|~i&c)+(u>>>0)+m;return(p<<f|p>>>32-f)+i},s._gg=function(a,i,l,c,u,f,m){var p=a+(i&c|l&~c)+(u>>>0)+m;return(p<<f|p>>>32-f)+i},s._hh=function(a,i,l,c,u,f,m){var p=a+(i^l^c)+(u>>>0)+m;return(p<<f|p>>>32-f)+i},s._ii=function(a,i,l,c,u,f,m){var p=a+(l^(i|~c))+(u>>>0)+m;return(p<<f|p>>>32-f)+i},s._blocksize=16,s._digestsize=16,fj.exports=function(a,i){if(a==null)throw new Error("Illegal argument "+a);var l=e.wordsToBytes(s(a,i));return i&&i.asBytes?l:i&&i.asString?r.bytesToString(l):e.bytesToHex(l)}}()),fj.exports}var _Y;function Qy(){if(_Y)return Fc;_Y=1,Object.defineProperty(Fc,"__esModule",{value:!0}),Fc.decodeBase64=Fc.encodeBase64=Fc.getMD5Hash=void 0;const e=fKe(),t=hKe();function n(a){return t(a)}Fc.getMD5Hash=n;function r(a){return e.btoaPolyfill(a)}Fc.encodeBase64=r;function s(a){return e.atobPolyfill(a)}return Fc.decodeBase64=s,Fc}var cv={},wY;function gKe(){if(wY)return cv;wY=1,Object.defineProperty(cv,"__esModule",{value:!0}),cv.LRUCache=void 0;class e{constructor(n){this.capacity=n,this.cache=new Map,this.size=this.cache.size}[Symbol.iterator](){return this.cache[Symbol.iterator]()}forEach(n,r){this.cache.forEach(n,r)}entries(){return this.cache.entries()}clear(){this.cache.clear()}delete(n){return this.cache.delete(n)}keys(){return this.cache.keys()}values(){return this.cache.values()}has(n){return this.cache.has(n)}get(n){if(!this.has(n))return;const r=this.cache.get(n);return r!==void 0&&(this.delete(n),this.cache.set(n,r)),r}set(n,r){if(this.capacity===0)return this;if(this.cache.has(n))this.cache.delete(n);else if(this.cache.size>=this.capacity){const s=this.cache.keys().next().value;this.delete(s)}return this.cache.set(n,r),this}}return cv.LRUCache=e,cv}var CY;function kpe(){if(CY)return Eo;CY=1,Object.defineProperty(Eo,"__esModule",{value:!0}),Eo.LRUInMemoryAssignmentCache=Eo.NonExpiringInMemoryAssignmentCache=Eo.AbstractAssignmentCache=Eo.assignmentCacheValueToString=Eo.assignmentCacheKeyToString=void 0;const e=Qy(),t=gKe();function n({subjectKey:l,flagKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}Eo.assignmentCacheKeyToString=n;function r({allocationKey:l,variationKey:c}){return(0,e.getMD5Hash)([l,c].join(";"))}Eo.assignmentCacheValueToString=r;class s{constructor(c){this.delegate=c}has(c){return this.get(c)===r(c)}get(c){return this.delegate.get(n(c))}set(c){this.delegate.set(n(c),r(c))}entries(){return this.delegate.entries()}}Eo.AbstractAssignmentCache=s;class a extends s{constructor(c=new Map){super(c)}}Eo.NonExpiringInMemoryAssignmentCache=a;class i extends s{constructor(c){super(new t.LRUCache(c))}}return Eo.LRUInMemoryAssignmentCache=i,Eo}var Ju={},uv={},Uc={},SY;function Tpe(){if(SY)return Uc;SY=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.DeterministicSharder=Uc.MD5Sharder=Uc.Sharder=void 0;const e=Qy();class t{}Uc.Sharder=t;class n extends t{getShard(a,i){const l=(0,e.getMD5Hash)(a);return parseInt(l.slice(0,8),16)%i}}Uc.MD5Sharder=n;class r extends t{constructor(a){super(),this.lookup=a}getShard(a,i){var l;return(l=this.lookup[a])!==null&&l!==void 0?l:0}}return Uc.DeterministicSharder=r,Uc}var EY;function yKe(){if(EY)return uv;EY=1,Object.defineProperty(uv,"__esModule",{value:!0}),uv.BanditEvaluator=void 0;const e=m_(),t=Tpe();class n{constructor(){this.assignmentShards=e.BANDIT_ASSIGNMENT_SHARDS,this.sharder=new t.MD5Sharder}evaluateBandit(s,a,i,l,c){const u=this.scoreActions(i,l,c),f=this.weighActions(u,c.gamma,c.actionProbabilityFloor),m=this.selectAction(s,a,f),h=Object.values(u).reduce((g,y)=>y>g?y:g,-1/0)-u[m];return{flagKey:s,subjectKey:a,subjectAttributes:i,actionKey:m,actionAttributes:l[m],actionScore:u[m],actionWeight:f[m],gamma:c.gamma,optimalityGap:h}}scoreActions(s,a,i){const l={};return Object.entries(a).forEach(([c,u])=>{let f=i.defaultActionScore;const m=i.coefficients[c];m&&(f=m.intercept,f+=this.scoreNumericAttributes(m.subjectNumericCoefficients,s.numericAttributes),f+=this.scoreCategoricalAttributes(m.subjectCategoricalCoefficients,s.categoricalAttributes),f+=this.scoreNumericAttributes(m.actionNumericCoefficients,u.numericAttributes),f+=this.scoreCategoricalAttributes(m.actionCategoricalCoefficients,u.categoricalAttributes)),l[c]=f}),l}scoreNumericAttributes(s,a){return s.reduce((i,l)=>{const c=a[l.attributeKey];return typeof c=="number"&&isFinite(c)?i+=c*l.coefficient:i+=l.missingValueCoefficient,i},0)}scoreCategoricalAttributes(s,a){return s.reduce((i,l)=>{var c;const u=(c=a[l.attributeKey])===null||c===void 0?void 0:c.toString(),f=u&&l.valueCoefficients[u];return i+=typeof f=="number"?f:l.missingValueCoefficient,i},0)}weighActions(s,a,i){const l={},c=Object.entries(s);if(!c.length)return l;let u=null,f=null;if(c.forEach(([x,v])=>{(u===null||v>u)&&(u=v,f=x)}),u===null||f===null)throw new Error("Unable to find top score");const m=u,p=f,h=c.length,g=i/h;let y=0;return c.forEach(([x,v])=>{if(x===p)return;const b=1/(h+a*(m-v)),_=Math.max(b,g);y+=_,l[x]=_}),l[p]=Math.max(1-y,0),l}selectAction(s,a,i){const l=Object.entries(i).sort((p,h)=>{const g=this.sharder.getShard(`${s}-${a}-${p[0]}`,this.assignmentShards),y=this.sharder.getShard(`${s}-${a}-${h[0]}`,this.assignmentShards);let x=g-y;return x===0&&(x=p[0]<h[0]?-1:1),x}),u=this.sharder.getShard(`${s}-${a}`,this.assignmentShards)/this.assignmentShards;let f=0,m=null;for(const p of l)if(f+=p[1],f>u){m=p[0];break}if(m===null)throw new Error(`No bandit action selected for flag "${s}" and subject "${a}"`);return m}}return uv.BanditEvaluator=n,uv}var mC={},MY;function Npe(){if(MY)return mC;MY=1,Object.defineProperty(mC,"__esModule",{value:!0});class e{constructor(n,r,s,a){this.httpClient=n,this.flagConfigurationStore=r,this.banditVariationConfigurationStore=s,this.banditModelConfigurationStore=a}async fetchAndStoreConfigurations(){var n;const r=await this.httpClient.getUniversalFlagConfiguration();if(!r?.flags)return;await this.hydrateConfigurationStore(this.flagConfigurationStore,{entries:r.flags,environment:r.environment,createdAt:r.createdAt});const s=Object.keys((n=r.bandits)!==null&&n!==void 0?n:{}).length>0,a=!!(this.banditVariationConfigurationStore&&this.banditModelConfigurationStore);if(s&&a){const i=this.indexBanditVariationsByFlagKey(r.bandits);await this.hydrateConfigurationStore(this.banditVariationConfigurationStore,{entries:i,environment:r.environment,createdAt:r.createdAt});const l=await this.httpClient.getBanditParameters();if(l?.bandits){if(!this.banditModelConfigurationStore)throw new Error("Bandit parameters fetched but no bandit configuration store provided");await this.hydrateConfigurationStore(this.banditModelConfigurationStore,{entries:l.bandits,environment:r.environment,createdAt:r.createdAt})}}}async hydrateConfigurationStore(n,r){n&&await n.setEntries(r.entries)&&(n.setEnvironment(r.environment),n.setConfigFetchedAt(new Date().toISOString()),n.setConfigPublishedAt(r.createdAt))}indexBanditVariationsByFlagKey(n){const r={};return Object.values(n).forEach(s=>{s.forEach(a=>{let i=r[a.flagKey];i||(i=[],r[a.flagKey]=i),i.push(a)})}),r}}return mC.default=e,mC}var Us={},gj={},kY;function p_(){return kY||(kY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=void 0,function(t){t.STRING="STRING",t.INTEGER="INTEGER",t.NUMERIC="NUMERIC",t.BOOLEAN="BOOLEAN",t.JSON="JSON"}(e.VariationType||(e.VariationType={}))}(gj)),gj}var TY;function xKe(){if(TY)return Us;TY=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.decodeObject=Us.decodeShard=Us.decodeSplit=Us.decodeAllocation=Us.decodeValue=Us.decodeVariations=Us.decodeFlag=void 0;const e=p_(),t=Qy();function n(u){return Object.assign(Object.assign({},u),{variations:r(u.variations,u.variationType),allocations:u.allocations.map(a)})}Us.decodeFlag=n;function r(u,f){return Object.fromEntries(Object.entries(u).map(([,m])=>{const p=(0,t.decodeBase64)(m.key);return[p,{key:p,value:s(m.value,f)}]}))}Us.decodeVariations=r;function s(u,f){switch(f){case e.VariationType.INTEGER:case e.VariationType.NUMERIC:return Number((0,t.decodeBase64)(u));case e.VariationType.BOOLEAN:return(0,t.decodeBase64)(u)==="true";default:return(0,t.decodeBase64)(u)}}Us.decodeValue=s;function a(u){return Object.assign(Object.assign({},u),{key:(0,t.decodeBase64)(u.key),splits:u.splits.map(i),startAt:u.startAt?new Date((0,t.decodeBase64)(u.startAt)).toISOString():void 0,endAt:u.endAt?new Date((0,t.decodeBase64)(u.endAt)).toISOString():void 0})}Us.decodeAllocation=a;function i(u){return{extraLogging:u.extraLogging?c(u.extraLogging):void 0,variationKey:(0,t.decodeBase64)(u.variationKey),shards:u.shards.map(l)}}Us.decodeSplit=i;function l(u){return Object.assign(Object.assign({},u),{salt:(0,t.decodeBase64)(u.salt)})}Us.decodeShard=l;function c(u){return Object.fromEntries(Object.entries(u).map(([f,m])=>[(0,t.decodeBase64)(f),(0,t.decodeBase64)(m)]))}return Us.decodeObject=c,Us}var yj={},NY;function vKe(){return NY||(NY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.EppoValue=e.EppoValueType=void 0;const t=p_(),n=Qy();var r;(function(a){a[a.NullType=0]="NullType",a[a.BoolType=1]="BoolType",a[a.NumericType=2]="NumericType",a[a.StringType=3]="StringType",a[a.JSONType=4]="JSONType"})(r=e.EppoValueType||(e.EppoValueType={}));class s{constructor(i,l,c,u,f){this.valueType=i,this.boolValue=l,this.numericValue=c,this.stringValue=u,this.objectValue=f}static valueOf(i,l){if(i==null)return s.Null();switch(l){case t.VariationType.BOOLEAN:return s.Bool(i);case t.VariationType.NUMERIC:return s.Numeric(i);case t.VariationType.INTEGER:return s.Numeric(i);case t.VariationType.STRING:return s.String(i);case t.VariationType.JSON:return s.JSON(i);default:return s.String(i)}}toString(){var i,l,c;switch(this.valueType){case r.NullType:return"null";case r.BoolType:return this.boolValue?"true":"false";case r.NumericType:return this.numericValue?this.numericValue.toString():"0";case r.StringType:return(i=this.stringValue)!==null&&i!==void 0?i:"";case r.JSONType:try{return(l=JSON.stringify(this.objectValue))!==null&&l!==void 0?l:""}catch{return(c=this.stringValue)!==null&&c!==void 0?c:""}}}toHashedString(){const i=this.toString();return(0,n.getMD5Hash)(i)}static Bool(i){return new s(r.BoolType,i,void 0,void 0,void 0)}static Numeric(i){return new s(r.NumericType,void 0,i,void 0,void 0)}static String(i){return new s(r.StringType,void 0,void 0,i,void 0)}static JSON(i){return new s(r.JSONType,void 0,void 0,void 0,typeof i=="string"?JSON.parse(i):i)}static Null(){return new s(r.NullType,void 0,void 0,void 0,void 0)}}e.EppoValue=s}(yj)),yj}var Mo={},xj={},jY;function jpe(){return jY||(jY=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FlagEvaluationDetailsBuilder=e.AllocationEvaluationCode=e.flagEvaluationCodes=void 0;const t=p_();e.flagEvaluationCodes=["MATCH","FLAG_UNRECOGNIZED_OR_DISABLED","TYPE_MISMATCH","ASSIGNMENT_ERROR","DEFAULT_ALLOCATION_NULL","NO_ACTIONS_SUPPLIED_FOR_BANDIT"];var n;(function(s){s.UNEVALUATED="UNEVALUATED",s.MATCH="MATCH",s.BEFORE_START_TIME="BEFORE_START_TIME",s.TRAFFIC_EXPOSURE_MISS="TRAFFIC_EXPOSURE_MISS",s.AFTER_END_TIME="AFTER_END_TIME",s.FAILING_RULE="FAILING_RULE"})(n=e.AllocationEvaluationCode||(e.AllocationEvaluationCode={}));class r{constructor(a,i,l,c){this.environmentName=a,this.allocations=i,this.configFetchedAt=l,this.configPublishedAt=c,this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=[],this.setNone=()=>(this.variationKey=null,this.variationValue=null,this.matchedRule=null,this.matchedAllocation=null,this.unmatchedAllocations=[],this.unevaluatedAllocations=this.allocations.map((u,f)=>({key:u.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:f+1})),this),this.setNoMatchFound=(u=[])=>(this.variationKey=null,this.variationValue=null,this.matchedAllocation=null,this.matchedRule=null,this.unmatchedAllocations=u,this.unevaluatedAllocations=[],this),this.setMatch=(u,f,m,p,h,g)=>{this.variationKey=f.key,this.variationValue=g===t.VariationType.JSON&&typeof f.value=="string"?JSON.parse(f.value):f.value,this.matchedRule=p,this.matchedAllocation={key:m.key,allocationEvaluationCode:n.MATCH,orderPosition:u+1},this.unmatchedAllocations=h;const y=u+1,x=y+1;return this.unevaluatedAllocations=this.allocations.slice(y).map((v,b)=>({key:v.key,allocationEvaluationCode:n.UNEVALUATED,orderPosition:x+b})),this},this.buildForNoneResult=(u,f)=>this.setNone().build(u,f),this.build=(u,f)=>({environmentName:this.environmentName,flagEvaluationCode:u,flagEvaluationDescription:f,variationKey:this.variationKey,variationValue:this.variationValue,banditKey:null,banditAction:null,configFetchedAt:this.configFetchedAt,configPublishedAt:this.configPublishedAt,matchedRule:this.matchedRule,matchedAllocation:this.matchedAllocation,unmatchedAllocations:this.unmatchedAllocations,unevaluatedAllocations:this.unevaluatedAllocations}),this.setNone()}}e.FlagEvaluationDetailsBuilder=r}(xj)),xj}var vj={},pC={exports:{}},bj,AY;function O5(){if(AY)return bj;AY=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,s=t-6;return bj={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:s,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},bj}var _j,IY;function D5(){if(IY)return _j;IY=1;var e={};return _j=typeof process=="object"&&e&&e.NODE_DEBUG&&/\bsemver\b/i.test(e.NODE_DEBUG)?(...n)=>console.error("SEMVER",...n):()=>{},_j}var RY;function h_(){return RY||(RY=1,function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:s}=O5(),a=D5();t=e.exports={};const i=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],f=t.t={};let m=0;const p="[a-zA-Z0-9-]",h=[["\\s",1],["\\d",s],[p,r]],g=x=>{for(const[v,b]of h)x=x.split(`${v}*`).join(`${v}{0,${b}}`).split(`${v}+`).join(`${v}{1,${b}}`);return x},y=(x,v,b)=>{const _=g(v),w=m++;a(x,w,v),f[x]=w,c[w]=v,u[w]=_,i[w]=new RegExp(v,b?"g":void 0),l[w]=new RegExp(_,b?"g":void 0)};y("NUMERICIDENTIFIER","0|[1-9]\\d*"),y("NUMERICIDENTIFIERLOOSE","\\d+"),y("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),y("MAINVERSION",`(${c[f.NUMERICIDENTIFIER]})\\.(${c[f.NUMERICIDENTIFIER]})\\.(${c[f.NUMERICIDENTIFIER]})`),y("MAINVERSIONLOOSE",`(${c[f.NUMERICIDENTIFIERLOOSE]})\\.(${c[f.NUMERICIDENTIFIERLOOSE]})\\.(${c[f.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASEIDENTIFIER",`(?:${c[f.NONNUMERICIDENTIFIER]}|${c[f.NUMERICIDENTIFIER]})`),y("PRERELEASEIDENTIFIERLOOSE",`(?:${c[f.NONNUMERICIDENTIFIER]}|${c[f.NUMERICIDENTIFIERLOOSE]})`),y("PRERELEASE",`(?:-(${c[f.PRERELEASEIDENTIFIER]}(?:\\.${c[f.PRERELEASEIDENTIFIER]})*))`),y("PRERELEASELOOSE",`(?:-?(${c[f.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[f.PRERELEASEIDENTIFIERLOOSE]})*))`),y("BUILDIDENTIFIER",`${p}+`),y("BUILD",`(?:\\+(${c[f.BUILDIDENTIFIER]}(?:\\.${c[f.BUILDIDENTIFIER]})*))`),y("FULLPLAIN",`v?${c[f.MAINVERSION]}${c[f.PRERELEASE]}?${c[f.BUILD]}?`),y("FULL",`^${c[f.FULLPLAIN]}$`),y("LOOSEPLAIN",`[v=\\s]*${c[f.MAINVERSIONLOOSE]}${c[f.PRERELEASELOOSE]}?${c[f.BUILD]}?`),y("LOOSE",`^${c[f.LOOSEPLAIN]}$`),y("GTLT","((?:<|>)?=?)"),y("XRANGEIDENTIFIERLOOSE",`${c[f.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),y("XRANGEIDENTIFIER",`${c[f.NUMERICIDENTIFIER]}|x|X|\\*`),y("XRANGEPLAIN",`[v=\\s]*(${c[f.XRANGEIDENTIFIER]})(?:\\.(${c[f.XRANGEIDENTIFIER]})(?:\\.(${c[f.XRANGEIDENTIFIER]})(?:${c[f.PRERELEASE]})?${c[f.BUILD]}?)?)?`),y("XRANGEPLAINLOOSE",`[v=\\s]*(${c[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[f.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[f.XRANGEIDENTIFIERLOOSE]})(?:${c[f.PRERELEASELOOSE]})?${c[f.BUILD]}?)?)?`),y("XRANGE",`^${c[f.GTLT]}\\s*${c[f.XRANGEPLAIN]}$`),y("XRANGELOOSE",`^${c[f.GTLT]}\\s*${c[f.XRANGEPLAINLOOSE]}$`),y("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),y("COERCE",`${c[f.COERCEPLAIN]}(?:$|[^\\d])`),y("COERCEFULL",c[f.COERCEPLAIN]+`(?:${c[f.PRERELEASE]})?(?:${c[f.BUILD]})?(?:$|[^\\d])`),y("COERCERTL",c[f.COERCE],!0),y("COERCERTLFULL",c[f.COERCEFULL],!0),y("LONETILDE","(?:~>?)"),y("TILDETRIM",`(\\s*)${c[f.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",y("TILDE",`^${c[f.LONETILDE]}${c[f.XRANGEPLAIN]}$`),y("TILDELOOSE",`^${c[f.LONETILDE]}${c[f.XRANGEPLAINLOOSE]}$`),y("LONECARET","(?:\\^)"),y("CARETTRIM",`(\\s*)${c[f.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",y("CARET",`^${c[f.LONECARET]}${c[f.XRANGEPLAIN]}$`),y("CARETLOOSE",`^${c[f.LONECARET]}${c[f.XRANGEPLAINLOOSE]}$`),y("COMPARATORLOOSE",`^${c[f.GTLT]}\\s*(${c[f.LOOSEPLAIN]})$|^$`),y("COMPARATOR",`^${c[f.GTLT]}\\s*(${c[f.FULLPLAIN]})$|^$`),y("COMPARATORTRIM",`(\\s*)${c[f.GTLT]}\\s*(${c[f.LOOSEPLAIN]}|${c[f.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",y("HYPHENRANGE",`^\\s*(${c[f.XRANGEPLAIN]})\\s+-\\s+(${c[f.XRANGEPLAIN]})\\s*$`),y("HYPHENRANGELOOSE",`^\\s*(${c[f.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[f.XRANGEPLAINLOOSE]})\\s*$`),y("STAR","(<|>)?=?\\s*\\*"),y("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),y("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")}(pC,pC.exports)),pC.exports}var wj,PY;function NF(){if(PY)return wj;PY=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return wj=r=>r?typeof r!="object"?e:r:t,wj}var Cj,LY;function Ape(){if(LY)return Cj;LY=1;const e=/^[0-9]+$/,t=(r,s)=>{const a=e.test(r),i=e.test(s);return a&&i&&(r=+r,s=+s),r===s?0:a&&!i?-1:i&&!a?1:r<s?-1:1};return Cj={compareIdentifiers:t,rcompareIdentifiers:(r,s)=>t(s,r)},Cj}var Sj,OY;function za(){if(OY)return Sj;OY=1;const e=D5(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=O5(),{safeRe:r,t:s}=h_(),a=NF(),{compareIdentifiers:i}=Ape();class l{constructor(u,f){if(f=a(f),u instanceof l){if(u.loose===!!f.loose&&u.includePrerelease===!!f.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,f),this.options=f,this.loose=!!f.loose,this.includePrerelease=!!f.includePrerelease;const m=u.trim().match(f.loose?r[s.LOOSE]:r[s.FULL]);if(!m)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const h=+p;if(h>=0&&h<n)return h}return p}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof l)){if(typeof u=="string"&&u===this.version)return 0;u=new l(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof l||(u=new l(u,this.options)),i(this.major,u.major)||i(this.minor,u.minor)||i(this.patch,u.patch)}comparePre(u){if(u instanceof l||(u=new l(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let f=0;do{const m=this.prerelease[f],p=u.prerelease[f];if(e("prerelease compare",f,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return i(m,p)}while(++f)}compareBuild(u){u instanceof l||(u=new l(u,this.options));let f=0;do{const m=this.build[f],p=u.build[f];if(e("build compare",f,m,p),m===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(m===void 0)return-1;if(m===p)continue;return i(m,p)}while(++f)}inc(u,f,m){if(u.startsWith("pre")){if(!f&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(f){const p=`-${f}`.match(this.options.loose?r[s.PRERELEASELOOSE]:r[s.PRERELEASE]);if(!p||p[1]!==f)throw new Error(`invalid identifier: ${f}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",f,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",f,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",f,m),this.inc("pre",f,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",f,m),this.inc("pre",f,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let h=this.prerelease.length;for(;--h>=0;)typeof this.prerelease[h]=="number"&&(this.prerelease[h]++,h=-2);if(h===-1){if(f===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(f){let h=[f,p];m===!1&&(h=[f]),i(this.prerelease[0],f)===0?isNaN(this.prerelease[1])&&(this.prerelease=h):this.prerelease=h}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Sj=l,Sj}var Ej,DY;function Xy(){if(DY)return Ej;DY=1;const e=za();return Ej=(n,r,s=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(a){if(!s)return null;throw a}},Ej}var Mj,FY;function bKe(){if(FY)return Mj;FY=1;const e=Xy();return Mj=(n,r)=>{const s=e(n,r);return s?s.version:null},Mj}var kj,UY;function _Ke(){if(UY)return kj;UY=1;const e=Xy();return kj=(n,r)=>{const s=e(n.trim().replace(/^[=v]+/,""),r);return s?s.version:null},kj}var Tj,BY;function wKe(){if(BY)return Tj;BY=1;const e=za();return Tj=(n,r,s,a,i)=>{typeof s=="string"&&(i=a,a=s,s=void 0);try{return new e(n instanceof e?n.version:n,s).inc(r,a,i).version}catch{return null}},Tj}var Nj,$Y;function CKe(){if($Y)return Nj;$Y=1;const e=Xy();return Nj=(n,r)=>{const s=e(n,null,!0),a=e(r,null,!0),i=s.compare(a);if(i===0)return null;const l=i>0,c=l?s:a,u=l?a:s,f=!!c.prerelease.length;if(!!u.prerelease.length&&!f){if(!u.patch&&!u.minor)return"major";if(u.compareMain(c)===0)return u.minor&&!u.patch?"minor":"patch"}const p=f?"pre":"";return s.major!==a.major?p+"major":s.minor!==a.minor?p+"minor":s.patch!==a.patch?p+"patch":"prerelease"},Nj}var jj,VY;function SKe(){if(VY)return jj;VY=1;const e=za();return jj=(n,r)=>new e(n,r).major,jj}var Aj,WY;function EKe(){if(WY)return Aj;WY=1;const e=za();return Aj=(n,r)=>new e(n,r).minor,Aj}var Ij,HY;function MKe(){if(HY)return Ij;HY=1;const e=za();return Ij=(n,r)=>new e(n,r).patch,Ij}var Rj,zY;function kKe(){if(zY)return Rj;zY=1;const e=Xy();return Rj=(n,r)=>{const s=e(n,r);return s&&s.prerelease.length?s.prerelease:null},Rj}var Pj,GY;function gl(){if(GY)return Pj;GY=1;const e=za();return Pj=(n,r,s)=>new e(n,s).compare(new e(r,s)),Pj}var Lj,qY;function TKe(){if(qY)return Lj;qY=1;const e=gl();return Lj=(n,r,s)=>e(r,n,s),Lj}var Oj,KY;function NKe(){if(KY)return Oj;KY=1;const e=gl();return Oj=(n,r)=>e(n,r,!0),Oj}var Dj,YY;function jF(){if(YY)return Dj;YY=1;const e=za();return Dj=(n,r,s)=>{const a=new e(n,s),i=new e(r,s);return a.compare(i)||a.compareBuild(i)},Dj}var Fj,QY;function jKe(){if(QY)return Fj;QY=1;const e=jF();return Fj=(n,r)=>n.sort((s,a)=>e(s,a,r)),Fj}var Uj,XY;function AKe(){if(XY)return Uj;XY=1;const e=jF();return Uj=(n,r)=>n.sort((s,a)=>e(a,s,r)),Uj}var Bj,ZY;function F5(){if(ZY)return Bj;ZY=1;const e=gl();return Bj=(n,r,s)=>e(n,r,s)>0,Bj}var $j,JY;function AF(){if(JY)return $j;JY=1;const e=gl();return $j=(n,r,s)=>e(n,r,s)<0,$j}var Vj,eQ;function Ipe(){if(eQ)return Vj;eQ=1;const e=gl();return Vj=(n,r,s)=>e(n,r,s)===0,Vj}var Wj,tQ;function Rpe(){if(tQ)return Wj;tQ=1;const e=gl();return Wj=(n,r,s)=>e(n,r,s)!==0,Wj}var Hj,nQ;function IF(){if(nQ)return Hj;nQ=1;const e=gl();return Hj=(n,r,s)=>e(n,r,s)>=0,Hj}var zj,rQ;function RF(){if(rQ)return zj;rQ=1;const e=gl();return zj=(n,r,s)=>e(n,r,s)<=0,zj}var Gj,sQ;function Ppe(){if(sQ)return Gj;sQ=1;const e=Ipe(),t=Rpe(),n=F5(),r=IF(),s=AF(),a=RF();return Gj=(l,c,u,f)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l===u;case"!==":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l!==u;case"":case"=":case"==":return e(l,u,f);case"!=":return t(l,u,f);case">":return n(l,u,f);case">=":return r(l,u,f);case"<":return s(l,u,f);case"<=":return a(l,u,f);default:throw new TypeError(`Invalid operator: ${c}`)}},Gj}var qj,aQ;function IKe(){if(aQ)return qj;aQ=1;const e=za(),t=Xy(),{safeRe:n,t:r}=h_();return qj=(a,i)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;i=i||{};let l=null;if(!i.rtl)l=a.match(i.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const h=i.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let g;for(;(g=h.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||g.index+g[0].length!==l.index+l[0].length)&&(l=g),h.lastIndex=g.index+g[1].length+g[2].length;h.lastIndex=-1}if(l===null)return null;const c=l[2],u=l[3]||"0",f=l[4]||"0",m=i.includePrerelease&&l[5]?`-${l[5]}`:"",p=i.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${c}.${u}.${f}${m}${p}`,i)},qj}var Kj,oQ;function RKe(){if(oQ)return Kj;oQ=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return Kj=e,Kj}var Yj,iQ;function yl(){if(iQ)return Yj;iQ=1;const e=/\s+/g;class t{constructor(A,T){if(T=s(T),A instanceof t)return A.loose===!!T.loose&&A.includePrerelease===!!T.includePrerelease?A:new t(A.raw,T);if(A instanceof a)return this.raw=A.value,this.set=[[A]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=A.trim().replace(e," "),this.set=this.raw.split("||").map(N=>this.parseRange(N.trim())).filter(N=>N.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const N=this.set[0];if(this.set=this.set.filter(L=>!y(L[0])),this.set.length===0)this.set=[N];else if(this.set.length>1){for(const L of this.set)if(L.length===1&&x(L[0])){this.set=[L];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let A=0;A<this.set.length;A++){A>0&&(this.formatted+="||");const T=this.set[A];for(let N=0;N<T.length;N++)N>0&&(this.formatted+=" "),this.formatted+=T[N].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(A){const N=((this.options.includePrerelease&&h)|(this.options.loose&&g))+":"+A,L=r.get(N);if(L)return L;const U=this.options.loose,$=U?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];A=A.replace($,O(this.options.includePrerelease)),i("hyphen replace",A),A=A.replace(c[u.COMPARATORTRIM],f),i("comparator trim",A),A=A.replace(c[u.TILDETRIM],m),i("tilde trim",A),A=A.replace(c[u.CARETTRIM],p),i("caret trim",A);let V=A.split(" ").map(H=>b(H,this.options)).join(" ").split(/\s+/).map(H=>R(H,this.options));U&&(V=V.filter(H=>(i("loose invalid filter",H,this.options),!!H.match(c[u.COMPARATORLOOSE])))),i("range list",V);const W=new Map,Q=V.map(H=>new a(H,this.options));for(const H of Q){if(y(H))return[H];W.set(H.value,H)}W.size>1&&W.has("")&&W.delete("");const q=[...W.values()];return r.set(N,q),q}intersects(A,T){if(!(A instanceof t))throw new TypeError("a Range is required");return this.set.some(N=>v(N,T)&&A.set.some(L=>v(L,T)&&N.every(U=>L.every($=>U.intersects($,T)))))}test(A){if(!A)return!1;if(typeof A=="string")try{A=new l(A,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(D(this.set[T],A,this.options))return!0;return!1}}Yj=t;const n=RKe(),r=new n,s=NF(),a=U5(),i=D5(),l=za(),{safeRe:c,t:u,comparatorTrimReplace:f,tildeTrimReplace:m,caretTrimReplace:p}=h_(),{FLAG_INCLUDE_PRERELEASE:h,FLAG_LOOSE:g}=O5(),y=P=>P.value==="<0.0.0-0",x=P=>P.value==="",v=(P,A)=>{let T=!0;const N=P.slice();let L=N.pop();for(;T&&N.length;)T=N.every(U=>L.intersects(U,A)),L=N.pop();return T},b=(P,A)=>(i("comp",P,A),P=S(P,A),i("caret",P),P=w(P,A),i("tildes",P),P=k(P,A),i("xrange",P),P=j(P,A),i("stars",P),P),_=P=>!P||P.toLowerCase()==="x"||P==="*",w=(P,A)=>P.trim().split(/\s+/).map(T=>C(T,A)).join(" "),C=(P,A)=>{const T=A.loose?c[u.TILDELOOSE]:c[u.TILDE];return P.replace(T,(N,L,U,$,V)=>{i("tilde",P,N,L,U,$,V);let W;return _(L)?W="":_(U)?W=`>=${L}.0.0 <${+L+1}.0.0-0`:_($)?W=`>=${L}.${U}.0 <${L}.${+U+1}.0-0`:V?(i("replaceTilde pr",V),W=`>=${L}.${U}.${$}-${V} <${L}.${+U+1}.0-0`):W=`>=${L}.${U}.${$} <${L}.${+U+1}.0-0`,i("tilde return",W),W})},S=(P,A)=>P.trim().split(/\s+/).map(T=>E(T,A)).join(" "),E=(P,A)=>{i("caret",P,A);const T=A.loose?c[u.CARETLOOSE]:c[u.CARET],N=A.includePrerelease?"-0":"";return P.replace(T,(L,U,$,V,W)=>{i("caret",P,L,U,$,V,W);let Q;return _(U)?Q="":_($)?Q=`>=${U}.0.0${N} <${+U+1}.0.0-0`:_(V)?U==="0"?Q=`>=${U}.${$}.0${N} <${U}.${+$+1}.0-0`:Q=`>=${U}.${$}.0${N} <${+U+1}.0.0-0`:W?(i("replaceCaret pr",W),U==="0"?$==="0"?Q=`>=${U}.${$}.${V}-${W} <${U}.${$}.${+V+1}-0`:Q=`>=${U}.${$}.${V}-${W} <${U}.${+$+1}.0-0`:Q=`>=${U}.${$}.${V}-${W} <${+U+1}.0.0-0`):(i("no pr"),U==="0"?$==="0"?Q=`>=${U}.${$}.${V}${N} <${U}.${$}.${+V+1}-0`:Q=`>=${U}.${$}.${V}${N} <${U}.${+$+1}.0-0`:Q=`>=${U}.${$}.${V} <${+U+1}.0.0-0`),i("caret return",Q),Q})},k=(P,A)=>(i("replaceXRanges",P,A),P.split(/\s+/).map(T=>M(T,A)).join(" ")),M=(P,A)=>{P=P.trim();const T=A.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return P.replace(T,(N,L,U,$,V,W)=>{i("xRange",P,N,L,U,$,V,W);const Q=_(U),q=Q||_($),H=q||_(V),K=H;return L==="="&&K&&(L=""),W=A.includePrerelease?"-0":"",Q?L===">"||L==="<"?N="<0.0.0-0":N="*":L&&K?(q&&($=0),V=0,L===">"?(L=">=",q?(U=+U+1,$=0,V=0):($=+$+1,V=0)):L==="<="&&(L="<",q?U=+U+1:$=+$+1),L==="<"&&(W="-0"),N=`${L+U}.${$}.${V}${W}`):q?N=`>=${U}.0.0${W} <${+U+1}.0.0-0`:H&&(N=`>=${U}.${$}.0${W} <${U}.${+$+1}.0-0`),i("xRange return",N),N})},j=(P,A)=>(i("replaceStars",P,A),P.trim().replace(c[u.STAR],"")),R=(P,A)=>(i("replaceGTE0",P,A),P.trim().replace(c[A.includePrerelease?u.GTE0PRE:u.GTE0],"")),O=P=>(A,T,N,L,U,$,V,W,Q,q,H,K)=>(_(N)?T="":_(L)?T=`>=${N}.0.0${P?"-0":""}`:_(U)?T=`>=${N}.${L}.0${P?"-0":""}`:$?T=`>=${T}`:T=`>=${T}${P?"-0":""}`,_(Q)?W="":_(q)?W=`<${+Q+1}.0.0-0`:_(H)?W=`<${Q}.${+q+1}.0-0`:K?W=`<=${Q}.${q}.${H}-${K}`:P?W=`<${Q}.${q}.${+H+1}-0`:W=`<=${W}`,`${T} ${W}`.trim()),D=(P,A,T)=>{for(let N=0;N<P.length;N++)if(!P[N].test(A))return!1;if(A.prerelease.length&&!T.includePrerelease){for(let N=0;N<P.length;N++)if(i(P[N].semver),P[N].semver!==a.ANY&&P[N].semver.prerelease.length>0){const L=P[N].semver;if(L.major===A.major&&L.minor===A.minor&&L.patch===A.patch)return!0}return!1}return!0};return Yj}var Qj,lQ;function U5(){if(lQ)return Qj;lQ=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(f,m){if(m=n(m),f instanceof t){if(f.loose===!!m.loose)return f;f=f.value}f=f.trim().split(/\s+/).join(" "),i("comparator",f,m),this.options=m,this.loose=!!m.loose,this.parse(f),this.semver===e?this.value="":this.value=this.operator+this.semver.version,i("comp",this)}parse(f){const m=this.options.loose?r[s.COMPARATORLOOSE]:r[s.COMPARATOR],p=f.match(m);if(!p)throw new TypeError(`Invalid comparator: ${f}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new l(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(f){if(i("Comparator.test",f,this.options.loose),this.semver===e||f===e)return!0;if(typeof f=="string")try{f=new l(f,this.options)}catch{return!1}return a(f,this.operator,this.semver,this.options)}intersects(f,m){if(!(f instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(f.value,m).test(this.value):f.operator===""?f.value===""?!0:new c(this.value,m).test(f.semver):(m=n(m),m.includePrerelease&&(this.value==="<0.0.0-0"||f.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||f.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&f.operator.startsWith(">")||this.operator.startsWith("<")&&f.operator.startsWith("<")||this.semver.version===f.semver.version&&this.operator.includes("=")&&f.operator.includes("=")||a(this.semver,"<",f.semver,m)&&this.operator.startsWith(">")&&f.operator.startsWith("<")||a(this.semver,">",f.semver,m)&&this.operator.startsWith("<")&&f.operator.startsWith(">")))}}Qj=t;const n=NF(),{safeRe:r,t:s}=h_(),a=Ppe(),i=D5(),l=za(),c=yl();return Qj}var Xj,cQ;function B5(){if(cQ)return Xj;cQ=1;const e=yl();return Xj=(n,r,s)=>{try{r=new e(r,s)}catch{return!1}return r.test(n)},Xj}var Zj,uQ;function PKe(){if(uQ)return Zj;uQ=1;const e=yl();return Zj=(n,r)=>new e(n,r).set.map(s=>s.map(a=>a.value).join(" ").trim().split(" ")),Zj}var Jj,dQ;function LKe(){if(dQ)return Jj;dQ=1;const e=za(),t=yl();return Jj=(r,s,a)=>{let i=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!i||l.compare(u)===-1)&&(i=u,l=new e(i,a))}),i},Jj}var e6,fQ;function OKe(){if(fQ)return e6;fQ=1;const e=za(),t=yl();return e6=(r,s,a)=>{let i=null,l=null,c=null;try{c=new t(s,a)}catch{return null}return r.forEach(u=>{c.test(u)&&(!i||l.compare(u)===1)&&(i=u,l=new e(i,a))}),i},e6}var t6,mQ;function DKe(){if(mQ)return t6;mQ=1;const e=za(),t=yl(),n=F5();return t6=(s,a)=>{s=new t(s,a);let i=new e("0.0.0");if(s.test(i)||(i=new e("0.0.0-0"),s.test(i)))return i;i=null;for(let l=0;l<s.set.length;++l){const c=s.set[l];let u=null;c.forEach(f=>{const m=new e(f.semver.version);switch(f.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!u||n(m,u))&&(u=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${f.operator}`)}}),u&&(!i||n(i,u))&&(i=u)}return i&&s.test(i)?i:null},t6}var n6,pQ;function FKe(){if(pQ)return n6;pQ=1;const e=yl();return n6=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},n6}var r6,hQ;function PF(){if(hQ)return r6;hQ=1;const e=za(),t=U5(),{ANY:n}=t,r=yl(),s=B5(),a=F5(),i=AF(),l=RF(),c=IF();return r6=(f,m,p,h)=>{f=new e(f,h),m=new r(m,h);let g,y,x,v,b;switch(p){case">":g=a,y=l,x=i,v=">",b=">=";break;case"<":g=i,y=c,x=a,v="<",b="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(s(f,m,h))return!1;for(let _=0;_<m.set.length;++_){const w=m.set[_];let C=null,S=null;if(w.forEach(E=>{E.semver===n&&(E=new t(">=0.0.0")),C=C||E,S=S||E,g(E.semver,C.semver,h)?C=E:x(E.semver,S.semver,h)&&(S=E)}),C.operator===v||C.operator===b||(!S.operator||S.operator===v)&&y(f,S.semver))return!1;if(S.operator===b&&x(f,S.semver))return!1}return!0},r6}var s6,gQ;function UKe(){if(gQ)return s6;gQ=1;const e=PF();return s6=(n,r,s)=>e(n,r,">",s),s6}var a6,yQ;function BKe(){if(yQ)return a6;yQ=1;const e=PF();return a6=(n,r,s)=>e(n,r,"<",s),a6}var o6,xQ;function $Ke(){if(xQ)return o6;xQ=1;const e=yl();return o6=(n,r,s)=>(n=new e(n,s),r=new e(r,s),n.intersects(r,s)),o6}var i6,vQ;function VKe(){if(vQ)return i6;vQ=1;const e=B5(),t=gl();return i6=(n,r,s)=>{const a=[];let i=null,l=null;const c=n.sort((p,h)=>t(p,h,s));for(const p of c)e(p,r,s)?(l=p,i||(i=p)):(l&&a.push([i,l]),l=null,i=null);i&&a.push([i,null]);const u=[];for(const[p,h]of a)p===h?u.push(p):!h&&p===c[0]?u.push("*"):h?p===c[0]?u.push(`<=${h}`):u.push(`${p} - ${h}`):u.push(`>=${p}`);const f=u.join(" || "),m=typeof r.raw=="string"?r.raw:String(r);return f.length<m.length?f:r},i6}var l6,bQ;function WKe(){if(bQ)return l6;bQ=1;const e=yl(),t=U5(),{ANY:n}=t,r=B5(),s=gl(),a=(m,p,h={})=>{if(m===p)return!0;m=new e(m,h),p=new e(p,h);let g=!1;e:for(const y of m.set){for(const x of p.set){const v=c(y,x,h);if(g=g||v!==null,v)continue e}if(g)return!1}return!0},i=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],c=(m,p,h)=>{if(m===p)return!0;if(m.length===1&&m[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;h.includePrerelease?m=i:m=l}if(p.length===1&&p[0].semver===n){if(h.includePrerelease)return!0;p=l}const g=new Set;let y,x;for(const k of m)k.operator===">"||k.operator===">="?y=u(y,k,h):k.operator==="<"||k.operator==="<="?x=f(x,k,h):g.add(k.semver);if(g.size>1)return null;let v;if(y&&x){if(v=s(y.semver,x.semver,h),v>0)return null;if(v===0&&(y.operator!==">="||x.operator!=="<="))return null}for(const k of g){if(y&&!r(k,String(y),h)||x&&!r(k,String(x),h))return null;for(const M of p)if(!r(k,String(M),h))return!1;return!0}let b,_,w,C,S=x&&!h.includePrerelease&&x.semver.prerelease.length?x.semver:!1,E=y&&!h.includePrerelease&&y.semver.prerelease.length?y.semver:!1;S&&S.prerelease.length===1&&x.operator==="<"&&S.prerelease[0]===0&&(S=!1);for(const k of p){if(C=C||k.operator===">"||k.operator===">=",w=w||k.operator==="<"||k.operator==="<=",y){if(E&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===E.major&&k.semver.minor===E.minor&&k.semver.patch===E.patch&&(E=!1),k.operator===">"||k.operator===">="){if(b=u(y,k,h),b===k&&b!==y)return!1}else if(y.operator===">="&&!r(y.semver,String(k),h))return!1}if(x){if(S&&k.semver.prerelease&&k.semver.prerelease.length&&k.semver.major===S.major&&k.semver.minor===S.minor&&k.semver.patch===S.patch&&(S=!1),k.operator==="<"||k.operator==="<="){if(_=f(x,k,h),_===k&&_!==x)return!1}else if(x.operator==="<="&&!r(x.semver,String(k),h))return!1}if(!k.operator&&(x||y)&&v!==0)return!1}return!(y&&w&&!x&&v!==0||x&&C&&!y&&v!==0||E||S)},u=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g>0?m:g<0||p.operator===">"&&m.operator===">="?p:m},f=(m,p,h)=>{if(!m)return p;const g=s(m.semver,p.semver,h);return g<0?m:g>0||p.operator==="<"&&m.operator==="<="?p:m};return l6=a,l6}var c6,_Q;function HKe(){if(_Q)return c6;_Q=1;const e=h_(),t=O5(),n=za(),r=Ape(),s=Xy(),a=bKe(),i=_Ke(),l=wKe(),c=CKe(),u=SKe(),f=EKe(),m=MKe(),p=kKe(),h=gl(),g=TKe(),y=NKe(),x=jF(),v=jKe(),b=AKe(),_=F5(),w=AF(),C=Ipe(),S=Rpe(),E=IF(),k=RF(),M=Ppe(),j=IKe(),R=U5(),O=yl(),D=B5(),P=PKe(),A=LKe(),T=OKe(),N=DKe(),L=FKe(),U=PF(),$=UKe(),V=BKe(),W=$Ke(),Q=VKe(),q=WKe();return c6={parse:s,valid:a,clean:i,inc:l,diff:c,major:u,minor:f,patch:m,prerelease:p,compare:h,rcompare:g,compareLoose:y,compareBuild:x,sort:v,rsort:b,gt:_,lt:w,eq:C,neq:S,gte:E,lte:k,cmp:M,coerce:j,Comparator:R,Range:O,satisfies:D,toComparators:P,maxSatisfying:A,minSatisfying:T,minVersion:N,validRange:L,outside:U,gtr:$,ltr:V,intersects:W,simplifyRange:Q,subset:q,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},c6}var wQ;function zKe(){return wQ||(wQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.matchesRule=e.ObfuscatedOperatorType=e.OperatorType=void 0;const t=HKe(),n=Qy();var r;(function(x){x.MATCHES="MATCHES",x.NOT_MATCHES="NOT_MATCHES",x.GTE="GTE",x.GT="GT",x.LTE="LTE",x.LT="LT",x.ONE_OF="ONE_OF",x.NOT_ONE_OF="NOT_ONE_OF",x.IS_NULL="IS_NULL"})(r=e.OperatorType||(e.OperatorType={}));var s;(function(x){x.MATCHES="05015086bdd8402218f6aad6528bef08",x.NOT_MATCHES="8323761667755378c3a78e0a6ed37a78",x.GTE="32d35312e8f24bc1669bd2b45c00d47c",x.GT="cd6a9bd2a175104eed40f0d33a8b4020",x.LTE="cc981ecc65ecf63ad1673cbec9c64198",x.LT="c562607189d77eb9dfb707464c1e7b0b",x.ONE_OF="27457ce369f2a74203396a35ef537c0b",x.NOT_ONE_OF="602f5ee0b6e84fe29f43ab48b9e1addf",x.IS_NULL="dbd9c38e0339e6c34bd48cafc59be388"})(s=e.ObfuscatedOperatorType||(e.ObfuscatedOperatorType={}));var a;(function(x){x.PLAIN_STRING="PLAIN_STRING",x.STRING_ARRAY="STRING_ARRAY",x.SEM_VER="SEM_VER",x.NUMERIC="NUMERIC"})(a||(a={}));function i(x,v,b){return!l(v,x.conditions,b).includes(!1)}e.matchesRule=i;function l(x,v,b){return v.map(_=>b?u(Object.entries(x).reduce((w,[C,S])=>Object.assign({[(0,n.getMD5Hash)(C)]:S},w),{}),_):c(x,_))}function c(x,v){const b=x[v.attribute],_=y(v.value);if(v.operator===r.IS_NULL)return v.value?b==null:b!=null;if(b!=null)switch(v.operator){case r.GTE:return _===a.SEM_VER?g(b,v.value,t.gte):h(b,v.value,(w,C)=>w>=C);case r.GT:return _===a.SEM_VER?g(b,v.value,t.gt):h(b,v.value,(w,C)=>w>C);case r.LTE:return _===a.SEM_VER?g(b,v.value,t.lte):h(b,v.value,(w,C)=>w<=C);case r.LT:return _===a.SEM_VER?g(b,v.value,t.lt):h(b,v.value,(w,C)=>w<C);case r.MATCHES:return new RegExp(v.value).test(b);case r.NOT_MATCHES:return!new RegExp(v.value).test(b);case r.ONE_OF:return f(b.toString(),v.value);case r.NOT_ONE_OF:return m(b.toString(),v.value)}return!1}function u(x,v){const b=x[v.attribute],_=y(b);if(v.operator===s.IS_NULL)return v.value===(0,n.getMD5Hash)("true")?b==null:b!=null;if(b!=null)switch(v.operator){case s.GTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.gte):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w>=C);case s.GT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.gt):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w>C);case s.LTE:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.lte):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w<=C);case s.LT:return _===a.SEM_VER?g(b,(0,n.decodeBase64)(v.value),t.lt):h(b,Number((0,n.decodeBase64)(v.value)),(w,C)=>w<C);case s.MATCHES:return new RegExp((0,n.decodeBase64)(v.value)).test(b);case s.NOT_MATCHES:return!new RegExp((0,n.decodeBase64)(v.value)).test(b);case s.ONE_OF:return f((0,n.getMD5Hash)(b.toString()),v.value);case s.NOT_ONE_OF:return m((0,n.getMD5Hash)(b.toString()),v.value)}return!1}function f(x,v){return p(x,v).length>0}function m(x,v){return p(x,v).length===0}function p(x,v){return v.filter(b=>b===x)}function h(x,v,b){return b(Number(x),Number(v))}function g(x,v,b){return!!(0,t.valid)(x)&&!!(0,t.valid)(v)&&b(x,v)}function y(x){return typeof x=="number"?a.NUMERIC:Array.isArray(x)?a.STRING_ARRAY:typeof x=="string"&&(0,t.valid)(x)?a.SEM_VER:isNaN(Number(x))?a.PLAIN_STRING:a.NUMERIC}}(vj)),vj}var CQ;function GKe(){if(CQ)return Mo;CQ=1,Object.defineProperty(Mo,"__esModule",{value:!0}),Mo.matchesRules=Mo.noneResult=Mo.hashKey=Mo.isInShardRange=Mo.Evaluator=void 0;const e=jpe(),t=zKe(),n=Tpe();class r{constructor(u){this.getMatchedEvaluationDetailsMessage=(f,m,p)=>{var h;const g=!!(!((h=f.rules)===null||h===void 0)&&h.length),y=f.splits.length>1,x=m.shards.length>1,v=y||x;return g&&v?`Supplied attributes match rules defined in allocation "${f.key}" and ${p} belongs to the range of traffic assigned to "${m.variationKey}".`:g&&!v?`Supplied attributes match rules defined in allocation "${f.key}".`:`${p} belongs to the range of traffic assigned to "${m.variationKey}" defined in allocation "${f.key}".`},this.sharder=u??new n.MD5Sharder}evaluateFlag(u,f,m,p,h,g){var y,x;const v=new e.FlagEvaluationDetailsBuilder(f.configEnvironment.name,u.allocations,f.configFetchedAt,f.configPublishedAt);if(!u.enabled)return i(u.key,m,p,v.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${u.key}`));const b=new Date,_=[];for(let w=0;w<u.allocations.length;w++){const C=u.allocations[w],S=M=>{_.push({key:C.key,allocationEvaluationCode:M,orderPosition:w+1})};if(C.startAt&&b<new Date(C.startAt)){S(e.AllocationEvaluationCode.BEFORE_START_TIME);continue}if(C.endAt&&b>new Date(C.endAt)){S(e.AllocationEvaluationCode.AFTER_END_TIME);continue}const{matched:E,matchedRule:k}=l((y=C?.rules)!==null&&y!==void 0?y:[],Object.assign({id:m},p),h);if(E){for(const M of C.splits)if(M.shards.every(j=>this.matchesShard(j,m,u.totalShards))){const j=u.variations[M.variationKey],R=v.setMatch(w,j,C,k,_,g).build("MATCH",this.getMatchedEvaluationDetailsMessage(C,M,m));return{flagKey:u.key,subjectKey:m,subjectAttributes:p,allocationKey:C.key,variation:j,extraLogging:(x=M.extraLogging)!==null&&x!==void 0?x:{},doLog:C.doLog,flagEvaluationDetails:R}}S(e.AllocationEvaluationCode.TRAFFIC_EXPOSURE_MISS)}else S(e.AllocationEvaluationCode.FAILING_RULE)}return i(u.key,m,p,v.setNoMatchFound(_).build("DEFAULT_ALLOCATION_NULL",'No allocations matched. Falling back to "Default Allocation", serving NULL'))}matchesShard(u,f,m){const p=this.sharder.getShard(a(u.salt,f),m);return u.ranges.some(h=>s(p,h))}}Mo.Evaluator=r;function s(c,u){return u.start<=c&&c<u.end}Mo.isInShardRange=s;function a(c,u){return`${c}-${u}`}Mo.hashKey=a;function i(c,u,f,m){return{flagKey:c,subjectKey:u,subjectAttributes:f,allocationKey:null,variation:null,extraLogging:{},doLog:!1,flagEvaluationDetails:m}}Mo.noneResult=i;function l(c,u,f){if(!c.length)return{matched:!0,matchedRule:null};let m=null;return c.some(h=>{const g=(0,t.matchesRule)(h,u,f);return g&&(m=h),g})?{matched:!0,matchedRule:m}:{matched:!1,matchedRule:null}}return Mo.matchesRules=l,Mo}var Kp={},SQ;function Lpe(){if(SQ)return Kp;SQ=1,Object.defineProperty(Kp,"__esModule",{value:!0}),Kp.HttpRequestError=void 0;class e extends Error{constructor(r,s,a){super(r),this.message=r,this.status=s,this.cause=a,a&&(this.cause=a)}}Kp.HttpRequestError=e;class t{constructor(r,s){this.apiEndpoints=r,this.timeout=s}async getUniversalFlagConfiguration(){const r=this.apiEndpoints.ufcEndpoint();return await this.rawGet(r)}async getBanditParameters(){const r=this.apiEndpoints.banditParametersEndpoint();return await this.rawGet(r)}async rawGet(r){try{const s=new AbortController,a=s.signal,i=setTimeout(()=>s.abort(),this.timeout),l=await fetch(r.toString(),{signal:a});if(clearTimeout(i),!l?.ok)throw new e("Failed to fetch data",l?.status);return await l.json()}catch(s){throw s.name==="AbortError"?new e("Request timed out",408,s):s instanceof e?s:new e("Network error",0,s)}}}return Kp.default=t,Kp}var hC={},dv={},EQ;function qKe(){if(EQ)return dv;EQ=1,Object.defineProperty(dv,"__esModule",{value:!0}),dv.waitForMs=void 0;async function e(t){await new Promise(n=>setTimeout(n,t))}return dv.waitForMs=e,dv}var MQ;function KKe(){if(MQ)return hC;MQ=1,Object.defineProperty(hC,"__esModule",{value:!0});const e=L5(),t=m_(),n=qKe();function r(a,i,l){let c=!1,u=0,f=a,m=!1,p;const h=async()=>{var x;c=!1;let v=!1,b=l?.skipInitialPoll?0:1+((x=l?.maxStartRetries)!==null&&x!==void 0?x:t.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES),_=null;for(;!v&&b>0;)try{await i(),v=!0,m=!1,e.logger.info("Eppo SDK successfully requested initial configuration")}catch(C){if(m=!0,e.logger.warn(`Eppo SDK encountered an error with initial poll of configurations: ${C.message}`),--b>0){const S=s(a);e.logger.warn(`Eppo SDK will retry the initial poll again in ${S} ms (${b} attempts remaining)`),await(0,n.waitForMs)(S)}else l?.pollAfterFailedStart?e.logger.warn("Eppo SDK initial poll failed; will attempt regular polling"):(e.logger.error("Eppo SDK initial poll failed. Aborting polling"),g()),l?.errorOnFailedStart&&(_=C)}if(!c&&(v&&l?.pollAfterSuccessfulStart||!v&&l?.pollAfterFailedStart)?(e.logger.info(`Eppo SDK starting regularly polling every ${a} ms`),p=setTimeout(y,a)):e.logger.info("Eppo SDK will not poll for configuration updates"),_)throw e.logger.info("Eppo SDK rethrowing start error"),_},g=()=>{c||(c=!0,p&&clearTimeout(p),e.logger.info("Eppo SDK polling stopped"))};async function y(){var x;if(!c){try{await i(),u=0,f=a,m&&(m=!1,e.logger.info("Eppo SDK poll successful; resuming normal polling"))}catch(v){m=!0,e.logger.warn(`Eppo SDK encountered an error polling configurations: ${v.message}`);const b=1+((x=l?.maxPollRetries)!==null&&x!==void 0?x:t.DEFAULT_POLL_CONFIG_REQUEST_RETRIES);if(++u<b){const _=Math.pow(2,u),w=s(a);f=_*a+w,e.logger.warn(`Eppo SDK will try polling again in ${f} ms (${b-u} attempts remaining)`)}else e.logger.error(`Eppo SDK reached maximum of ${u} failed polling attempts. Stopping polling`),g()}setTimeout(y,f)}}return{start:h,stop:g}}hC.default=r;function s(a){const i=a*t.POLL_JITTER_PCT/2,l=Math.max(Math.floor(Math.random()*a*t.POLL_JITTER_PCT/2),1);return i+l}return hC}var Df={},kQ;function Ope(){if(kQ)return Df;kQ=1,Object.defineProperty(Df,"__esModule",{value:!0}),Df.validateNotBlank=Df.InvalidArgumentError=void 0;class e extends Error{}Df.InvalidArgumentError=e;function t(n,r){if(n==null||n.length===0)throw new e(r)}return Df.validateNotBlank=t,Df}var fv={};const YKe="4.0.0",QKe={version:YKe};var TQ;function XKe(){if(TQ)return fv;TQ=1,Object.defineProperty(fv,"__esModule",{value:!0}),fv.LIB_VERSION=void 0;const e=QKe;return fv.LIB_VERSION=e.version,fv}var NQ;function ZKe(){if(NQ)return Ju;NQ=1,Object.defineProperty(Ju,"__esModule",{value:!0}),Ju.checkValueTypeMatch=Ju.checkTypeMatch=void 0;const e=Mpe(),t=L5(),n=yKe(),r=kpe(),s=Npe(),a=m_(),i=xKe(),l=vKe(),c=GKe(),u=jpe(),f=Lpe(),m=p_(),p=Qy(),h=KKe(),g=Ope(),y=XKe();class x{constructor(w,C,S,E,k=!1){this.flagConfigurationStore=w,this.banditVariationConfigurationStore=C,this.banditModelConfigurationStore=S,this.configurationRequestParameters=E,this.isObfuscated=k,this.queuedAssignmentEvents=[],this.queuedBanditEvents=[],this.isGracefulFailureMode=!0,this.evaluator=new c.Evaluator,this.banditEvaluator=new n.BanditEvaluator}setConfigurationRequestParameters(w){this.configurationRequestParameters=w}setFlagConfigurationStore(w){this.flagConfigurationStore=w}setBanditVariationConfigurationStore(w){this.banditVariationConfigurationStore=w}setBanditModelConfigurationStore(w){this.banditModelConfigurationStore=w}setIsObfuscated(w){this.isObfuscated=w}async fetchFlagConfigurations(){var w,C;if(!this.configurationRequestParameters)throw new Error("Eppo SDK unable to fetch flag configurations without configuration request parameters");if(this.requestPoller&&this.requestPoller.stop(),!await this.flagConfigurationStore.isExpired()){t.logger.info("[Eppo SDK] Configuration store is not expired. Skipping fetching flag configurations");return}const{apiKey:E,sdkName:k,sdkVersion:M,baseUrl:j,requestTimeoutMs:R=a.DEFAULT_REQUEST_TIMEOUT_MS,numInitialRequestRetries:O=a.DEFAULT_INITIAL_CONFIG_REQUEST_RETRIES,numPollRequestRetries:D=a.DEFAULT_POLL_CONFIG_REQUEST_RETRIES,pollAfterSuccessfulInitialization:P=!1,pollAfterFailedInitialization:A=!1,throwOnFailedInitialization:T=!1,skipInitialPoll:N=!1}=this.configurationRequestParameters,L=new e.default({baseUrl:j,queryParams:{apiKey:E,sdkName:k,sdkVersion:M}}),U=new f.default(L,R),$=new s.default(U,this.flagConfigurationStore,(w=this.banditVariationConfigurationStore)!==null&&w!==void 0?w:null,(C=this.banditModelConfigurationStore)!==null&&C!==void 0?C:null);this.requestPoller=(0,h.default)(a.POLL_INTERVAL_MS,$.fetchAndStoreConfigurations.bind($),{maxStartRetries:O,maxPollRetries:D,pollAfterSuccessfulStart:P,pollAfterFailedStart:A,errorOnFailedStart:T,skipInitialPoll:N}),await this.requestPoller.start()}stopPolling(){this.requestPoller&&this.requestPoller.stop()}getStringAssignment(w,C,S,E){return this.getStringAssignmentDetails(w,C,S,E).variation}getStringAssignmentDetails(w,C,S,E){var k;const{eppoValue:M,flagEvaluationDetails:j}=this.getAssignmentVariation(w,C,S,l.EppoValue.String(E),m.VariationType.STRING);return{variation:(k=M.stringValue)!==null&&k!==void 0?k:E,action:null,evaluationDetails:j}}getBoolAssignment(w,C,S,E){return this.getBooleanAssignment(w,C,S,E)}getBooleanAssignment(w,C,S,E){return this.getBooleanAssignmentDetails(w,C,S,E).variation}getBooleanAssignmentDetails(w,C,S,E){var k;const{eppoValue:M,flagEvaluationDetails:j}=this.getAssignmentVariation(w,C,S,l.EppoValue.Bool(E),m.VariationType.BOOLEAN);return{variation:(k=M.boolValue)!==null&&k!==void 0?k:E,action:null,evaluationDetails:j}}getIntegerAssignment(w,C,S,E){return this.getIntegerAssignmentDetails(w,C,S,E).variation}getIntegerAssignmentDetails(w,C,S,E){var k;const{eppoValue:M,flagEvaluationDetails:j}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.INTEGER);return{variation:(k=M.numericValue)!==null&&k!==void 0?k:E,action:null,evaluationDetails:j}}getNumericAssignment(w,C,S,E){return this.getNumericAssignmentDetails(w,C,S,E).variation}getNumericAssignmentDetails(w,C,S,E){var k;const{eppoValue:M,flagEvaluationDetails:j}=this.getAssignmentVariation(w,C,S,l.EppoValue.Numeric(E),m.VariationType.NUMERIC);return{variation:(k=M.numericValue)!==null&&k!==void 0?k:E,action:null,evaluationDetails:j}}getJSONAssignment(w,C,S,E){return this.getJSONAssignmentDetails(w,C,S,E).variation}getJSONAssignmentDetails(w,C,S,E){var k;const{eppoValue:M,flagEvaluationDetails:j}=this.getAssignmentVariation(w,C,S,l.EppoValue.JSON(E),m.VariationType.JSON);return{variation:(k=M.objectValue)!==null&&k!==void 0?k:E,action:null,evaluationDetails:j}}getBanditAction(w,C,S,E,k){const{variation:M,action:j}=this.getBanditActionDetails(w,C,S,E,k);return{variation:M,action:j}}getBanditActionDetails(w,C,S,E,k){var M,j,R;const O=this.flagEvaluationDetailsBuilder(w),D={variation:k,action:null};let P=k,A=null;try{const T=(M=this.banditVariationConfigurationStore)===null||M===void 0?void 0:M.get(w);if(T&&!Object.keys(E).length)return Object.assign(Object.assign({},D),{evaluationDetails:O.buildForNoneResult("NO_ACTIONS_SUPPLIED_FOR_BANDIT","No bandit actions passed for a flag known to have an active bandit")});const N=this.ensureNonContextualSubjectAttributes(S),{variation:L,evaluationDetails:U}=this.getStringAssignmentDetails(w,C,N,k);P=L;const $=(j=T?.find(V=>V.variationValue===P))===null||j===void 0?void 0:j.key;if($){const V=(R=this.banditModelConfigurationStore)===null||R===void 0?void 0:R.get($);if(!V)throw new Error("No model parameters for bandit "+$);const W=V.modelData,Q=this.ensureContextualSubjectAttributes(S),q=this.ensureActionsWithContextualAttributes(E),H=this.banditEvaluator.evaluateBandit(w,C,Q,q,W);A=H.actionKey,U.banditAction=A,U.banditKey=$;const K={timestamp:new Date().toISOString(),featureFlag:w,bandit:$,subject:C,action:A,actionProbability:H.actionWeight,optimalityGap:H.optimalityGap,modelVersion:V.modelVersion,subjectNumericAttributes:Q.numericAttributes,subjectCategoricalAttributes:Q.categoricalAttributes,actionNumericAttributes:q[A].numericAttributes,actionCategoricalAttributes:q[A].categoricalAttributes,metaData:this.buildLoggerMetadata(),evaluationDetails:U};this.logBanditAction(K)}return{variation:P,action:A,evaluationDetails:U}}catch(T){if(t.logger.error("Error evaluating bandit action",T),!this.isGracefulFailureMode)throw T;return Object.assign(Object.assign({},D),{evaluationDetails:O.buildForNoneResult("ASSIGNMENT_ERROR",`Error evaluating bandit action: ${T.message}`)})}}ensureNonContextualSubjectAttributes(w){let C;if(this.isInstanceOfContextualAttributes(w)){const S=w;C=Object.assign(Object.assign({},S.numericAttributes),S.categoricalAttributes)}else C=w;return C}ensureContextualSubjectAttributes(w){let C;return this.isInstanceOfContextualAttributes(w)?C=w:C=this.deduceAttributeContext(w),C}ensureActionsWithContextualAttributes(w){let C={};return Array.isArray(w)?w.forEach(S=>{C[S]={numericAttributes:{},categoricalAttributes:{}}}):Object.values(w).every(this.isInstanceOfContextualAttributes)?C=w:Object.entries(w).forEach(([S,E])=>{C[S]=this.deduceAttributeContext(E)}),C}isInstanceOfContextualAttributes(w){return!!(typeof w=="object"&&w&&"numericAttributes"in w&&"categoricalAttributes"in w)}deduceAttributeContext(w){const C={numericAttributes:{},categoricalAttributes:{}};return Object.entries(w).forEach(([S,E])=>{typeof E=="number"&&isFinite(E)?C.numericAttributes[S]=E:C.categoricalAttributes[S]=E}),C}logBanditAction(w){if(!this.banditLogger){this.queuedBanditEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedBanditEvents.push(w);return}try{this.banditLogger.logBanditAction(w)}catch(C){t.logger.warn("Error encountered logging bandit action",C)}}getAssignmentVariation(w,C,S,E,k){try{const M=this.getAssignmentDetail(w,C,S,k);return M.variation?{eppoValue:l.EppoValue.valueOf(M.variation.value,k),flagEvaluationDetails:M.flagEvaluationDetails}:{eppoValue:E,flagEvaluationDetails:M.flagEvaluationDetails}}catch(M){const j=this.rethrowIfNotGraceful(M,E),R=new u.FlagEvaluationDetailsBuilder("",[],"","").buildForNoneResult("ASSIGNMENT_ERROR",`Assignment Error: ${M.message}`);return{eppoValue:j,flagEvaluationDetails:R}}}rethrowIfNotGraceful(w,C){if(this.isGracefulFailureMode)return t.logger.error(`[Eppo SDK] Error getting assignment: ${w.message}`),C??l.EppoValue.Null();throw w}getAssignmentDetail(w,C,S={},E){(0,g.validateNotBlank)(C,"Invalid argument: subjectKey cannot be blank"),(0,g.validateNotBlank)(w,"Invalid argument: flagKey cannot be blank");const k=this.flagEvaluationDetailsBuilder(w),M=this.getConfigDetails(),j=this.getFlag(w);if(j===null){t.logger.warn(`[Eppo SDK] No assigned variation. Flag not found: ${w}`);const O=k.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,O)}if(!v(E,j.variationType))throw new TypeError(`Variation value does not have the correct type. Found: ${j.variationType} != ${E} for flag ${w}`);if(!j.enabled){t.logger.info(`[Eppo SDK] No assigned variation. Flag is disabled: ${w}`);const O=k.buildForNoneResult("FLAG_UNRECOGNIZED_OR_DISABLED",`Unrecognized or disabled flag: ${w}`);return(0,c.noneResult)(w,C,S,O)}const R=this.evaluator.evaluateFlag(j,M,C,S,this.isObfuscated,E);if(this.isObfuscated&&(R.flagKey=w),R?.variation&&!b(E,R.variation.value)){const{key:O,value:D}=R.variation,P=`Expected variation type ${E} does not match for variation '${O}' with value ${D}`,A=k.buildForNoneResult("TYPE_MISMATCH",P);return(0,c.noneResult)(w,C,S,A)}try{R?.doLog&&this.logAssignment(R)}catch(O){t.logger.error(`[Eppo SDK] Error logging assignment event: ${O}`)}return R}flagEvaluationDetailsBuilder(w){var C;const S=this.getFlag(w),E=this.getConfigDetails();return new u.FlagEvaluationDetailsBuilder(E.configEnvironment.name,(C=S?.allocations)!==null&&C!==void 0?C:[],E.configFetchedAt,E.configPublishedAt)}getConfigDetails(){var w,C,S;return{configFetchedAt:(w=this.flagConfigurationStore.getConfigFetchedAt())!==null&&w!==void 0?w:"",configPublishedAt:(C=this.flagConfigurationStore.getConfigPublishedAt())!==null&&C!==void 0?C:"",configEnvironment:(S=this.flagConfigurationStore.getEnvironment())!==null&&S!==void 0?S:{name:""}}}getFlag(w){return this.isObfuscated?this.getObfuscatedFlag(w):this.flagConfigurationStore.get(w)}getObfuscatedFlag(w){const C=this.flagConfigurationStore.get((0,p.getMD5Hash)(w));return C?(0,i.decodeFlag)(C):null}getFlagKeys(){return this.flagConfigurationStore.getKeys()}isInitialized(){return this.flagConfigurationStore.isInitialized()&&(!this.banditVariationConfigurationStore||this.banditVariationConfigurationStore.isInitialized())&&(!this.banditModelConfigurationStore||this.banditModelConfigurationStore.isInitialized())}setLogger(w){this.setAssignmentLogger(w)}setAssignmentLogger(w){var C;this.assignmentLogger=w,this.flushQueuedEvents(this.queuedAssignmentEvents,(C=this.assignmentLogger)===null||C===void 0?void 0:C.logAssignment)}setBanditLogger(w){var C;this.banditLogger=w,this.flushQueuedEvents(this.queuedBanditEvents,(C=this.banditLogger)===null||C===void 0?void 0:C.logBanditAction)}disableAssignmentCache(){this.assignmentCache=void 0}useNonExpiringInMemoryAssignmentCache(){this.assignmentCache=new r.NonExpiringInMemoryAssignmentCache}useLRUInMemoryAssignmentCache(w){this.assignmentCache=new r.LRUInMemoryAssignmentCache(w)}useCustomAssignmentCache(w){this.assignmentCache=w}setIsGracefulFailureMode(w){this.isGracefulFailureMode=w}getFlagConfigurations(){return this.flagConfigurationStore.entries()}flushQueuedEvents(w,C){const S=[...w];w.length=0,C&&S.forEach(E=>{try{C(E)}catch(k){t.logger.error(`[Eppo SDK] Error flushing event to logger: ${k.message}`)}})}logAssignment(w){var C,S,E,k,M;const{flagKey:j,subjectKey:R,allocationKey:O,subjectAttributes:D,variation:P}=w,A=Object.assign(Object.assign({},(C=w.extraLogging)!==null&&C!==void 0?C:{}),{allocation:O??null,experiment:O?`${j}-${O}`:null,featureFlag:j,variation:(S=P?.key)!==null&&S!==void 0?S:null,subject:R,timestamp:new Date().toISOString(),subjectAttributes:D,metaData:this.buildLoggerMetadata(),evaluationDetails:w.flagEvaluationDetails});if(!(P&&O&&(!((E=this.assignmentCache)===null||E===void 0)&&E.has({flagKey:j,subjectKey:R,allocationKey:O,variationKey:P.key})))){if(!this.assignmentLogger){this.queuedAssignmentEvents.length<a.MAX_EVENT_QUEUE_SIZE&&this.queuedAssignmentEvents.push(A);return}try{this.assignmentLogger.logAssignment(A),(k=this.assignmentCache)===null||k===void 0||k.set({flagKey:j,subjectKey:R,allocationKey:O??"__eppo_no_allocation",variationKey:(M=P?.key)!==null&&M!==void 0?M:"__eppo_no_variation"})}catch(T){t.logger.error(`[Eppo SDK] Error logging assignment event: ${T.message}`)}}}buildLoggerMetadata(){return{obfuscated:this.isObfuscated,sdkLanguage:"javascript",sdkLibVersion:y.LIB_VERSION}}}Ju.default=x;function v(_,w){return _===void 0||w===_}Ju.checkTypeMatch=v;function b(_,w){if(_==null)return!0;switch(_){case m.VariationType.STRING:return typeof w=="string";case m.VariationType.BOOLEAN:return typeof w=="boolean";case m.VariationType.INTEGER:return typeof w=="number"&&Number.isInteger(w);case m.VariationType.NUMERIC:return typeof w=="number";case m.VariationType.JSON:return typeof w=="string";default:return!1}}return Ju.checkValueTypeMatch=b,Ju}var mv={},jQ;function JKe(){if(jQ)return mv;jQ=1,Object.defineProperty(mv,"__esModule",{value:!0}),mv.HybridConfigurationStore=void 0;const e=L5();class t{constructor(r,s){this.servingStore=r,this.persistentStore=s,this.environment=null,this.configFetchedAt=null,this.configPublishedAt=null}async init(){if(!this.persistentStore)return;this.persistentStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} Persistent store is not initialized from remote configuration. Serving assignments that may be stale.`);const r=await this.persistentStore.entries();this.servingStore.setEntries(r)}isInitialized(){var r,s;return this.servingStore.isInitialized()&&((s=(r=this.persistentStore)===null||r===void 0?void 0:r.isInitialized())!==null&&s!==void 0?s:!0)}async isExpired(){var r;const s=await((r=this.persistentStore)===null||r===void 0?void 0:r.isExpired());return s??!0}get(r){return this.servingStore.isInitialized()||e.logger.warn(`${e.loggerPrefix} getting a value from a ServingStore that is not initialized.`),this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async setEntries(r){return this.persistentStore&&await this.persistentStore.setEntries(r),this.servingStore.setEntries(r),!0}setEnvironment(r){this.environment=r}getEnvironment(){return this.environment}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return mv.HybridConfigurationStore=t,mv}var Ff={},AQ;function eYe(){if(AQ)return Ff;AQ=1,Object.defineProperty(Ff,"__esModule",{value:!0}),Ff.MemoryOnlyConfigurationStore=Ff.MemoryStore=void 0;class e{constructor(){this.store={},this.initialized=!1}get(r){var s;return(s=this.store[r])!==null&&s!==void 0?s:null}entries(){return this.store}getKeys(){return Object.keys(this.store)}isInitialized(){return this.initialized}setEntries(r){this.store=Object.assign({},r),this.initialized=!0}}Ff.MemoryStore=e;class t{constructor(){this.servingStore=new e,this.initialized=!1,this.configFetchedAt=null,this.configPublishedAt=null,this.environment=null}init(){return this.initialized=!0,Promise.resolve()}get(r){return this.servingStore.get(r)}entries(){return this.servingStore.entries()}getKeys(){return this.servingStore.getKeys()}async isExpired(){return!0}isInitialized(){return this.initialized}async setEntries(r){return this.servingStore.setEntries(r),this.initialized=!0,!0}getEnvironment(){return this.environment}setEnvironment(r){this.environment=r}getConfigFetchedAt(){return this.configFetchedAt}setConfigFetchedAt(r){this.configFetchedAt=r}getConfigPublishedAt(){return this.configPublishedAt}setConfigPublishedAt(r){this.configPublishedAt=r}}return Ff.MemoryOnlyConfigurationStore=t,Ff}var IQ;function Zy(){return IQ||(IQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.VariationType=e.assignmentCacheValueToString=e.assignmentCacheKeyToString=e.LRUInMemoryAssignmentCache=e.NonExpiringInMemoryAssignmentCache=e.MemoryOnlyConfigurationStore=e.HybridConfigurationStore=e.MemoryStore=e.validation=e.HttpClient=e.FlagConfigRequestor=e.ApiEndpoints=e.constants=e.EppoClient=e.AbstractAssignmentCache=e.applicationLogger=void 0;const t=Mpe();e.ApiEndpoints=t.default;const n=L5();Object.defineProperty(e,"applicationLogger",{enumerable:!0,get:function(){return n.logger}});const r=kpe();Object.defineProperty(e,"AbstractAssignmentCache",{enumerable:!0,get:function(){return r.AbstractAssignmentCache}}),Object.defineProperty(e,"NonExpiringInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.NonExpiringInMemoryAssignmentCache}}),Object.defineProperty(e,"LRUInMemoryAssignmentCache",{enumerable:!0,get:function(){return r.LRUInMemoryAssignmentCache}}),Object.defineProperty(e,"assignmentCacheKeyToString",{enumerable:!0,get:function(){return r.assignmentCacheKeyToString}}),Object.defineProperty(e,"assignmentCacheValueToString",{enumerable:!0,get:function(){return r.assignmentCacheValueToString}});const s=ZKe();e.EppoClient=s.default;const a=Npe();e.FlagConfigRequestor=a.default;const i=JKe();Object.defineProperty(e,"HybridConfigurationStore",{enumerable:!0,get:function(){return i.HybridConfigurationStore}});const l=eYe();Object.defineProperty(e,"MemoryStore",{enumerable:!0,get:function(){return l.MemoryStore}}),Object.defineProperty(e,"MemoryOnlyConfigurationStore",{enumerable:!0,get:function(){return l.MemoryOnlyConfigurationStore}});const c=m_();e.constants=c;const u=Lpe();e.HttpClient=u.default;const f=p_();Object.defineProperty(e,"VariationType",{enumerable:!0,get:function(){return f.VariationType}});const m=Ope();e.validation=m}(cj)),cj}var pv={},ko={},gC={},RQ;function Dpe(){if(RQ)return gC;RQ=1,Object.defineProperty(gC,"__esModule",{value:!0});class e{constructor(n){this.storage=n}async has(n){return!!await this.get(n)}async get(n){var r;const s=await this.storage.get(n);return(r=s?.[n])!==null&&r!==void 0?r:void 0}async entries(){return await this.storage.get(null)}async set(n,r){await this.storage.set({[n]:r})}}return gC.default=e,gC}var hv={},Uf={},PQ;function Fpe(){return PQ||(PQ=1,Object.defineProperty(Uf,"__esModule",{value:!0}),Uf.META_KEY=Uf.CONFIGURATION_KEY=void 0,Uf.CONFIGURATION_KEY="eppo-configuration",Uf.META_KEY="eppo-configuration-meta"),Uf}var LQ;function Upe(){if(LQ)return hv;LQ=1,Object.defineProperty(hv,"__esModule",{value:!0}),hv.ChromeStorageEngine=void 0;const e=Fpe();class t{constructor(r,s){this.storageMap=r,this.getContentsJsonString=async()=>{const i=await this.storageMap.get(this.contentsKey);return i??null},this.getMetaJsonString=async()=>{const i=await this.storageMap.get(this.metaKey);return i??null},this.setContentsJsonString=async i=>{await this.storageMap.set(this.contentsKey,i)},this.setMetaJsonString=async i=>{await this.storageMap.set(this.metaKey,i)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return hv.ChromeStorageEngine=t,hv}var gv={},OQ;function tYe(){if(OQ)return gv;OQ=1,Object.defineProperty(gv,"__esModule",{value:!0}),gv.IsolatableHybridConfigurationStore=void 0;const e=Zy();class t extends e.HybridConfigurationStore{constructor(r,s,a="always"){super(r,s),this.servingStoreUpdateStrategy=a}async setEntries(r){var s;this.persistentStore&&await this.persistentStore.setEntries(r);const a=!this.persistentStore||await this.persistentStore.isExpired(),i=!(!((s=this.servingStore.getKeys())===null||s===void 0)&&s.length),l=this.servingStoreUpdateStrategy==="always"||a&&this.servingStoreUpdateStrategy==="expired"||a&&i;return l&&this.servingStore.setEntries(r),l}}return gv.IsolatableHybridConfigurationStore=t,gv}var yv={},DQ;function nYe(){if(DQ)return yv;DQ=1,Object.defineProperty(yv,"__esModule",{value:!0}),yv.LocalStorageEngine=void 0;const e=Fpe();class t{constructor(r,s){this.localStorage=r,this.getContentsJsonString=async()=>this.localStorage.getItem(this.contentsKey),this.getMetaJsonString=async()=>this.localStorage.getItem(this.metaKey),this.setContentsJsonString=async i=>{this.localStorage.setItem(this.contentsKey,i)},this.setMetaJsonString=async i=>{this.localStorage.setItem(this.metaKey,i)};const a=s?`-${s}`:"";this.contentsKey=e.CONFIGURATION_KEY+a,this.metaKey=e.META_KEY+a}}return yv.LocalStorageEngine=t,yv}var xv={},FQ;function rYe(){if(FQ)return xv;FQ=1,Object.defineProperty(xv,"__esModule",{value:!0}),xv.StringValuedAsyncStore=void 0;class e{constructor(n,r=0){this.storageEngine=n,this.cooldownSeconds=r,this.initialized=!1}isInitialized(){return this.initialized}async isExpired(){if(!this.cooldownSeconds)return!0;const n=await this.storageEngine.getMetaJsonString();let r=!0;if(n){const a=JSON.parse(n).lastUpdatedAtMs;r=!a||Date.now()-a>this.cooldownSeconds*1e3}return r}async entries(){const n=await this.storageEngine.getContentsJsonString();return n?JSON.parse(n):{}}async setEntries(n){await this.storageEngine.setContentsJsonString(JSON.stringify(n));const r={lastUpdatedAtMs:new Date().getTime()};await this.storageEngine.setMetaJsonString(JSON.stringify(r)),this.initialized=!0}}return xv.StringValuedAsyncStore=e,xv}var UQ;function LF(){if(UQ)return ko;UQ=1,Object.defineProperty(ko,"__esModule",{value:!0}),ko.localStorageIfAvailable=ko.hasWindowLocalStorage=ko.chromeStorageIfAvailable=ko.hasChromeStorage=ko.configurationStorageFactory=void 0;const e=Zy(),t=Dpe(),n=Upe(),r=tYe(),s=nYe(),a=rYe();function i({maxAgeSeconds:m=0,servingStoreUpdateStrategy:p="always",hasChromeStorage:h=!1,hasWindowLocalStorage:g=!1,persistentStore:y=void 0,forceMemoryOnly:x=!1},{chromeStorage:v,windowLocalStorage:b,storageKeySuffix:_}={}){if(x)return new e.MemoryOnlyConfigurationStore;if(y)return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,y,p);if(h&&v){const w=new n.ChromeStorageEngine(new t.default(v),_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}else if(g&&b){const w=new s.LocalStorageEngine(b,_??"");return new r.IsolatableHybridConfigurationStore(new e.MemoryStore,new a.StringValuedAsyncStore(w,m),p)}return new e.MemoryOnlyConfigurationStore}ko.configurationStorageFactory=i;function l(){return typeof chrome<"u"&&!!chrome.storage}ko.hasChromeStorage=l;function c(){return l()?chrome.storage.local:void 0}ko.chromeStorageIfAvailable=c;function u(){try{return typeof window<"u"&&!!window.localStorage}catch{return!1}}ko.hasWindowLocalStorage=u;function f(){return u()?window.localStorage:void 0}return ko.localStorageIfAvailable=f,ko}var yC={},BQ;function sYe(){if(BQ)return yC;BQ=1,Object.defineProperty(yC,"__esModule",{value:!0});const e=Zy(),t=Dpe();class n{constructor(s){this.storage=new t.default(s)}set(s){this.storage.set((0,e.assignmentCacheKeyToString)(s),(0,e.assignmentCacheValueToString)(s))}has(s){throw new Error("This should never be called for ChromeStorageAssignmentCache, use getEntries() instead.")}async getEntries(){const s=await this.storage.entries();return Object.entries(s).map(([a,i])=>[a,i])}}return yC.default=n,yC}var xC={},$Q;function Bpe(){if($Q)return xC;$Q=1,Object.defineProperty(xC,"__esModule",{value:!0});class e{constructor(n,r){this.servingStore=n,this.persistentStore=r}async init(){const n=await this.persistentStore.getEntries();n&&this.servingStore.setEntries(n)}set(n){this.servingStore.set(n),this.persistentStore.set(n)}has(n){return this.servingStore.has(n)}}return xC.default=e,xC}var vv={},VQ;function aYe(){if(VQ)return vv;VQ=1,Object.defineProperty(vv,"__esModule",{value:!0}),vv.LocalStorageAssignmentCache=void 0;const e=Zy(),t=LF();class n extends e.AbstractAssignmentCache{constructor(a){super(new r(a))}setEntries(a){a.forEach(([i,l])=>{i&&l&&this.delegate.set(i,l)})}getEntries(){return Promise.resolve(Array.from(this.entries()))}}vv.LocalStorageAssignmentCache=n;class r{constructor(a){if(!(0,t.hasWindowLocalStorage)())throw new Error("LocalStorage is not available");const i=a?`-${a}`:"";this.localStorageKey=`eppo-assignment${i}`}clear(){this.getCache().clear()}delete(a){return this.getCache().delete(a)}forEach(a,i){this.getCache().forEach(a,i)}entries(){return this.getCache().entries()}keys(){return this.getCache().keys()}values(){return this.getCache().values()}[Symbol.iterator](){return this.getCache()[Symbol.iterator]()}has(a){return this.getCache().has(a)}get(a){var i;return(i=this.getCache().get(a))!==null&&i!==void 0?i:void 0}set(a,i){return this.setCache(this.getCache().set(a,i))}getCache(){const a=window.localStorage.getItem(this.localStorageKey);return a?new Map(JSON.parse(a)):new Map}setCache(a){return window.localStorage.setItem(this.localStorageKey,JSON.stringify(Array.from(a.entries()))),this}}return vv}var vC={},WQ;function oYe(){if(WQ)return vC;WQ=1,Object.defineProperty(vC,"__esModule",{value:!0});const e=Zy();class t{constructor(){this.store=new Map,this.cache=new e.NonExpiringInMemoryAssignmentCache(this.store)}set(r){this.cache.set(r)}has(r){return this.cache.has(r)}setEntries(r){const{store:s}=this;r.forEach(([a,i])=>s.set(a,i))}getEntries(){return Promise.resolve(Array.from(this.cache.entries()))}}return vC.default=t,vC}var HQ;function iYe(){if(HQ)return pv;HQ=1,Object.defineProperty(pv,"__esModule",{value:!0}),pv.assignmentCacheFactory=void 0;const e=LF(),t=sYe(),n=Bpe(),r=aYe(),s=oYe();function a({forceMemoryOnly:i=!1,chromeStorage:l,storageKeySuffix:c}){const u=new s.default;if(i)return u;if(l){const f=new t.default(l);return new n.default(u,f)}else if((0,e.hasWindowLocalStorage)()){const f=new r.LocalStorageAssignmentCache(c);return new n.default(u,f)}else return u}return pv.assignmentCacheFactory=a,pv}var Bf={};const lYe="3.4.0",cYe={version:lYe};var zQ;function uYe(){if(zQ)return Bf;zQ=1,Object.defineProperty(Bf,"__esModule",{value:!0}),Bf.sdkName=Bf.sdkVersion=void 0;const e=cYe;return Bf.sdkVersion=e.version,Bf.sdkName="js-client-sdk",Bf}var GQ;function dYe(){return GQ||(GQ=1,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.getConfigUrl=e.getInstance=e.init=e.offlineInit=e.buildStorageKeySuffix=e.EppoJSClient=e.ChromeStorageEngine=void 0;const t=Zy(),n=iYe(),r=Bpe(),s=LF(),a=uYe();var i=Upe();Object.defineProperty(e,"ChromeStorageEngine",{enumerable:!0,get:function(){return i.ChromeStorageEngine}});const l=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});class c extends t.EppoClient{getStringAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getStringAssignment(y,x,v,b)}getStringAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getStringAssignmentDetails(y,x,v,b)}getBoolAssignment(y,x,v,b){return this.getBooleanAssignment(y,x,v,b)}getBooleanAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignment(y,x,v,b)}getBooleanAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getBooleanAssignmentDetails(y,x,v,b)}getIntegerAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignment(y,x,v,b)}getIntegerAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getIntegerAssignmentDetails(y,x,v,b)}getNumericAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignment(y,x,v,b)}getNumericAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getNumericAssignmentDetails(y,x,v,b)}getJSONAssignment(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignment(y,x,v,b)}getJSONAssignmentDetails(y,x,v,b){return c.getAssignmentInitializationCheck(),super.getJSONAssignmentDetails(y,x,v,b)}getBanditAction(y,x,v,b,_){return c.getAssignmentInitializationCheck(),super.getBanditAction(y,x,v,b,_)}getBanditActionDetails(y,x,v,b,_){return c.getAssignmentInitializationCheck(),super.getBanditActionDetails(y,x,v,b,_)}static getAssignmentInitializationCheck(){c.initialized||t.applicationLogger.warn("Eppo SDK assignment requested before init() completed")}}e.EppoJSClient=c,c.instance=new c(l,void 0,void 0,void 0,!0),c.initialized=!1;function u(g){return g.replace(/\W/g,"").substring(0,8)}e.buildStorageKeySuffix=u;function f(g){var y,x;const v=(y=g.isObfuscated)!==null&&y!==void 0?y:!1,b=(x=g.throwOnFailedInitialization)!==null&&x!==void 0?x:!0;try{const _=(0,s.configurationStorageFactory)({forceMemoryOnly:!0});_.setEntries(g.flagsConfiguration).catch(S=>t.applicationLogger.warn("Error setting flags for memory-only configuration store",S)),c.instance.setFlagConfigurationStore(_),c.instance.setIsObfuscated(v),g.assignmentLogger&&c.instance.setAssignmentLogger(g.assignmentLogger);const C=(0,n.assignmentCacheFactory)({storageKeySuffix:"offline",forceMemoryOnly:!0});c.instance.useCustomAssignmentCache(C)}catch(_){if(t.applicationLogger.warn("Eppo SDK encountered an error initializing, assignment calls will return the default value and not be logged"),b)throw _}return c.initialized=!0,c.instance}e.offlineInit=f;async function m(g){var y,x,v,b,_,w,C;t.validation.validateNotBlank(g.apiKey,"API key required");let S;const E=c.instance,{apiKey:k,persistentStore:M,baseUrl:j,maxCacheAgeSeconds:R,updateOnFetch:O}=g;try{E.stopPolling(),E.setAssignmentLogger(g.assignmentLogger),E.setIsObfuscated(!0);const D=u(k),P=(0,s.configurationStorageFactory)({maxAgeSeconds:R,servingStoreUpdateStrategy:O,persistentStore:M,hasChromeStorage:(0,s.hasChromeStorage)(),hasWindowLocalStorage:(0,s.hasWindowLocalStorage)()},{chromeStorage:(0,s.chromeStorageIfAvailable)(),windowLocalStorage:(0,s.localStorageIfAvailable)(),storageKeySuffix:D});E.setFlagConfigurationStore(P);const A=(0,n.assignmentCacheFactory)({chromeStorage:(0,s.chromeStorageIfAvailable)(),storageKeySuffix:D});A instanceof r.default&&await A.init(),E.useCustomAssignmentCache(A);const T={apiKey:k,sdkName:a.sdkName,sdkVersion:a.sdkVersion,baseUrl:j,requestTimeoutMs:(y=g.requestTimeoutMs)!==null&&y!==void 0?y:void 0,numInitialRequestRetries:(x=g.numInitialRequestRetries)!==null&&x!==void 0?x:void 0,numPollRequestRetries:(v=g.numPollRequestRetries)!==null&&v!==void 0?v:void 0,pollAfterSuccessfulInitialization:(b=g.pollAfterSuccessfulInitialization)!==null&&b!==void 0?b:!1,pollAfterFailedInitialization:(_=g.pollAfterFailedInitialization)!==null&&_!==void 0?_:!1,throwOnFailedInitialization:!0,skipInitialPoll:(w=g.skipInitialRequest)!==null&&w!==void 0?w:!1};E.setConfigurationRequestParameters(T);let N,L;const U=P.init().then(async()=>P.getKeys().length?await P.isExpired()&&!g.useExpiredCache?(t.applicationLogger.warn("Eppo SDK set not to use expired cached configuration"),N=new Error("Configuration store was expired"),""):"config store":(t.applicationLogger.warn("Eppo SDK cached configuration is empty"),N=new Error("Configuration store was empty"),"")).catch(W=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from the configuration store",W),N=W}),$=E.fetchFlagConfigurations().then(()=>"fetch").catch(W=>{t.applicationLogger.warn("Eppo SDK encountered an error initializing from fetching",W),L=W});let V=await Promise.race([U,$]);V||(N?V=await $:V=await U),V||(S=L)}catch(D){S=D}if(S&&(t.applicationLogger.warn("Eppo SDK was unable to initialize with a configuration, assignment calls will return the default value and not be logged"+(g.pollAfterFailedInitialization?" until an experiment configuration is successfully retrieved":"")),!((C=g.throwOnFailedInitialization)!==null&&C!==void 0)||C))throw S;return c.initialized=!0,E}e.init=m;function p(){return c.instance}e.getInstance=p;function h(g,y){const x={sdkName:a.sdkName,sdkVersion:a.sdkVersion,apiKey:g};return new t.ApiEndpoints({baseUrl:y,queryParams:x}).ufcEndpoint()}e.getConfigUrl=h}(lj)),lj}var $pe=dYe();const fYe=oDe({__proto__:null},[$pe]);class sg extends Ob{name="CometError"}const ag={COPILOT:"COPILOT",ARTICLE:"ARTICLE"},mYe={IN_PROGRESS:"IN_PROGRESS"},bC={SELECTED:"SELECTED",REVIEWED:"REVIEWED",REVIEWING:"REVIEWING",UNSORTED:"UNSORTED"},u6={HISTORY:"HISTORY",OPEN_TABS:"OPEN_TABS",RECENTLY_CLOSED_TABS:"RECENTLY_CLOSED_TABS"},wE={LOGIN:"LOGIN",DOWNLOAD_COMET:"DOWNLOAD_COMET",CREATE_SHORTCUT:"CREATE_SHORTCUT",UPGRADE_TO_ENTERPRISE:"UPGRADE_TO_ENTERPRISE"},Zc={IN_THREAD:"IN_THREAD",SIDEBAR:"SIDEBAR",MODAL:"MODAL",IN_THREAD_BOTTOM:"IN_THREAD_BOTTOM",IN_THREAD_INPUT:"IN_THREAD_INPUT",SIDE_CARD:"SIDE_CARD",COMET_NTP_BANNER:"COMET_NTP_BANNER"},Ja={PRO_UPGRADE:"PRO_UPGRADE",SIGN_UP_OR_LOGIN:"SIGN_UP_OR_LOGIN",REWRITE_ANSWER:"REWRITE_ANSWER",PERMALINK:"PERMALINK",CONNECTOR:"CONNECTOR",THREAD_TO_SPACE:"THREAD_TO_SPACE",SET_DEFAULT_BROWSER:"SET_DEFAULT_BROWSER",COMET_DOWNLOAD:"COMET_DOWNLOAD",IMAGE_ANNOUNCEMENT_MODAL:"IMAGE_ANNOUNCEMENT_MODAL",MERGE_AUTH_CONNECTOR:"MERGE_AUTH_CONNECTOR",SHORTCUT_MODAL:"SHORTCUT_MODAL",OPEN_SHEERID_MODAL:"OPEN_SHEERID_MODAL"},_C={PRIMARY_COLOR:"PRIMARY_COLOR",SECONDARY_COLOR:"SECONDARY_COLOR",MAX_COLOR:"MAX_COLOR",INVERTED:"INVERTED"},yn={CODE_ASSET:"CODE_ASSET",CHART:"CHART",CODE_FILE:"CODE_FILE",APP:"APP",GENERATED_IMAGE:"GENERATED_IMAGE",GENERATED_VIDEO:"GENERATED_VIDEO",PDF_FILE:"PDF_FILE",SLIDES:"SLIDES",DOCX_FILE:"DOCX_FILE",XLSX_FILE:"XLSX_FILE"},pYe={MCP_SERVER_TYPE_LOCAL:"MCP_SERVER_TYPE_LOCAL"},jsn={PENDING:"PENDING"},d6={BROWSER_HISTORY:"BROWSER_HISTORY",OPEN_TAB:"OPEN_TAB",RECENTLY_CLOSED_TAB:"RECENTLY_CLOSED_TAB"},Qn={PENDING:"PENDING",COMPLETED:"COMPLETED",FAILED:"FAILED",STAGED:"STAGED",RESUMING:"RESUMING",BLOCKED:"BLOCKED"},$g={NONE:"NONE",INCOGNITO:"INCOGNITO"},Asn={FULL:"FULL",STREAMING:"STREAMING"},kl={IN_PROGRESS:"IN_PROGRESS",DONE:"DONE"},qQ={FINANCE:"FINANCE"},Isn={CALENDAR_EVENT:"CALENDAR_EVENT",PLACE_CARD:"PLACE_CARD",SHOPPING_CARD:"SHOPPING_CARD",CALENDAR_ACTION:"CALENDAR_ACTION",MOVIE_TV_CARD:"MOVIE_TV_CARD"},Ki={SELECTION_STATUS_UNSPECIFIED:"SELECTION_STATUS_UNSPECIFIED",UNSELECTED:"UNSELECTED",SELECTED:"SELECTED",TIE:"TIE"},hn={HOTELS:"HOTELS",SHOPPING:"SHOPPING",JOBS:"JOBS",IMAGE:"IMAGE",VIDEO:"VIDEO",SOURCES:"SOURCES",MAPS:"MAPS",ASSETS:"ASSETS",APPS:"APPS",TASKS:"TASKS",SEARCH:"SEARCH",CHAT:"CHAT"};var hYe={};const gYe="pplx.comet-device-id",yYe="comet_browser";function Ks(){return!!Zo()}function uf(){const e=Zo();return!!(e?.android_version||e?.ios_version)}const Zo=lp(function(){const t=Sn(yYe);if(t)try{return{device_id:Sn(gYe),...JSON.parse(t)}}catch{return}},()=>Math.floor(Date.now()/(6*1e4))),xYe=(e,t="selected_by_user_text")=>e?`
<${t}>
<selection_timestamp>${new Date(e.timestamp).toLocaleString()}</selection_timestamp>
${e.text}
</${t}>`:"",vYe=(e,t,n,r)=>{if(!e)return[];const s=xYe(t.userSelection),a=[];if(n.status==="fulfilled"){const i=n.value?.contents||(n.value?.content?[n.value.content]:[]);for(const{markdown:l="",url:c="",title:u="",og_meta:f={},id:m}of i)a.push({content:[l.slice(0,r-s.length)+s],url:c,title:u,content_type:"markdown",content_origin:"current_tab",og_title:f?.title,og_description:f?.description,tab_id:String(m)})}else a.push({content:[],url:t.sidecarSourceTab.url,title:t.sidecarSourceTab.title,tab_id:String(t.sidecarSourceTab.tabId),content_type:"markdown",content_origin:"current_tab"}),t.sidecarSourceTab.secondaryTab&&a.push({content:[],url:t.sidecarSourceTab.secondaryTab.url,title:t.sidecarSourceTab.secondaryTab.title,tab_id:String(t.sidecarSourceTab.secondaryTab.tabId),content_type:"markdown",content_origin:"current_tab"});return a},bYe=(e,t,n)=>{const r=[];return e.forEach(s=>{const a=t.status==="fulfilled"&&t.value.contents?.find(i=>i.id===s.id);if(!a){r.push({tab_id:String(s.id),content:[],url:s.url,title:"",content_type:"markdown",content_origin:"open_tab"});return}r.push({tab_id:String(a.id),content:[(a.markdown??"").slice(0,n)],url:a.url??"",title:a.title??"",content_type:"markdown",content_origin:"open_tab",og_title:a.og_meta?.title,og_description:a.og_meta?.description})}),r},_Ye=e=>e.map(({url:t,title:n,snippet:r,site_name:s,sitelinks:a})=>({url:t,title:n,snippet:r,is_navigational:!0,site_name:s??null,sitelinks:a?.map(({title:i,url:l,snippet:c})=>({title:i,url:l,snippet:c??null}))??null})),Vpe=async({clientPayloadCacheKey:e,cometBrowser:t,maxChars:n,includeSidecar:r,attachedTabs:s,reason:a,cometState:i,requestId:l,navigationResults:c=[]})=>{if(!t)return;const u=[],f=Zo(),m={contextType:"runtime",queryContextTimeMs:0,processContextTimeMs:0,getNavigationItemsTimeMs:null,filteredItemsCount:null,version:f.browser_version,mainExtVersion:f.agent_extension_version},p=ql({context_type:m?.contextType,browser_version:m?.version,main_ext_version:m?.mainExtVersion,content_type:m?.contentType});try{ne.info("fetching sidecar context",{request_id:l});const[h,g]=await Promise.allSettled([r?t.GetSidecarContext({key:e,request_id:l}):Promise.resolve(void 0),s.length?t.GetContent({key:e,pages:[...s],request_id:l}):Promise.resolve({contents:[]})]),y=vYe(r,i,h,n);if(u.push(...y),s.length){const v=bYe(s,g,n);u.push(...v)}m.queryContextTimeMs=performance.now()-p.getStartTimeFromTimeOrigin(),ne.info("sending sidecar context",{request_id:l});const{error:x}=await re.POST("/rest/browser/client_payload",a,{backOffTime:100,numRetries:2,timeoutMs:Ht.HIGH,body:{client_payload_cache_key:e,client_context:u||[],...c.length>0&&{client_search_results:_Ye(c)},metadata:m},headers:{[hr]:l}});if(p.addTiming("browser.client_context.overall_time_ms"),x)throw new we("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e},cause:x})}catch(h){ne.error("Error sending client payload for cache key ",e,h,{request_id:l})}},wYe=async({url:e,cometBrowser:t,stepUuid:n,extraHeaders:r,reason:s})=>{const a=t.openTab({url:e});await md(a,n,r,s)},CYe=async({cometBrowser:e,maxUrls:t=20})=>{if(e)try{const n=await e.getTopMostVisitedUrls({maxUrls:t},"get-top-most-urls-for-ntp");return n.is_success?n.mostVisitedUrls:void 0}catch(n){ne.error("Error fetching top most urls browser",n);return}},HP=async(e,t,n)=>{try{const{error:r}=await re.POST("/rest/browser/tool_failure",n,{body:{client_payload_cache_key:e.clientPayloadCacheKey,error_type:e.errorType,error_msg:e.errorMsg},backOffTime:100,numRetries:2,headers:t,timeoutMs:Ht.MEDIUM});if(r)throw new we("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:e.clientPayloadCacheKey},cause:r})}catch(r){ne.error("Error while sending a failure of tool",r,{request_id:t[hr]})}},md=async(e,t,n,r)=>{try{const s=await e,{error:a}=await re.POST("/rest/browser/tool_result",r,{body:{client_payload_cache_key:t,payload:s},backOffTime:100,numRetries:2,headers:n,timeoutMs:Ht.MEDIUM});if(a)throw new we("API_CLIENTS_ERROR",{details:{clientPayloadCacheKey:t},cause:a})}catch(s){const i=s&&s.message||`sendToolResult error: ${s}`,l="errorType"in s?s:{errorType:"unhandled",errorMsg:i};return ne.error("Error while sending tool result",l.errorType,l.errorMsg,{request_id:n[hr]}),HP({clientPayloadCacheKey:t,...l},n,r)}},zP={red:"red",maroon:"blue",orange:"cyan",teal:"green",grey:"grey",brown:"orange",green:"pink",gold:"purple",purple:"red",blue:"yellow"},KQ=Object.fromEntries(Object.entries(zP).map(([e,t])=>[t,e])),Wpe=e=>KQ[e]??KQ.grey;async function SYe(e,t,n,r,s){const a=Promise.allSettled(e.map(async i=>t.groupTabs({tabIds:i.tab_ids,collapsed:i.collapsed,color:zP[i.color]??zP.grey,groupId:i.group_id,title:i.title},n,r[hr]))).then(i=>({groups:i.map(l=>{if(l.status=="fulfilled"&&l.value.is_success)return{...l.value.tabGroup,color:Wpe(l.value.tabGroup.color)}}).filter(l=>l!==void 0)}));await md(a,n,r,s)}async function EYe(e,t,n,r,s){const a=t.closeTabs({tabIds:e.tab_ids},n,r[hr]);await md(a,n,r,s)}async function MYe(e,t,n,r,s){const a={[d6.OPEN_TAB]:u6.OPEN_TABS,[d6.RECENTLY_CLOSED_TAB]:u6.RECENTLY_CLOSED_TABS,[d6.BROWSER_HISTORY]:u6.HISTORY},i=e.browser_content_sources.map(c=>a[c]).filter(Boolean),l=t.SearchBrowser({closed_tabs_max_results:e.max_results,history_max_results:e.max_results,open_tabs_max_results:e.max_results,request_id:r[hr],key:n,queries:Array.isArray(e.queries)?[...e.queries]:[],sources:i,start_time:e.start_time?Date.now()-new Date(e.start_time).getTime():void 0,end_time:e.end_time?Date.now()-new Date(e.end_time).getTime():void 0});await md(l,n,r,s)}async function YQ({result:e,key:t,reason:n}){try{await re.POST("/rest/browser/initial_history_summary",n,{body:{key:t,data:e},backOffTime:100,numRetries:2,timeoutMs:Ht.MEDIUM,headers:{"Content-Type":"application/json"}})}catch(r){ne.error("Error sending client payload for cache key ",r)}}function kYe({entropyBrowser:e,browserHistorySummaryNumDays:t,browserHistorySummaryMaxResults:n,reason:r}){const{addTiming:s}=ql(),a=crypto.randomUUID();return e.getInitialHistorySummary(a,t,n).then(i=>{s("web.frontend.comet_history_summary_v2"),YQ({result:i,key:a,reason:r})}).catch(()=>{YQ({result:{open_tabs_results:[],history_results:[],closed_tabs_results:[]},key:a,reason:r})}),a}const TYe=async({entropyBrowser:e,url:t})=>{const n=await e.getQuickActions("get-quick-actions-for-sidecar-suggests");return n.is_success?n.buttons.map(({prompt:r})=>({query:r,image:j1(t)})):[]},NYe=/^\w+:\/\//;let s2=null;const jYe=()=>{if(!Ks()||s2!==null)return;const e=new Image;e.onerror=()=>{s2=!1,console.warn("[Comet] chrome://favicon/ is not supported. Using our backend as fallback.")},e.onload=()=>{s2=!0},e.src="chrome://favicon/"},j1=(e,t=64,n="3x")=>{if(!s2)return`https://www.perplexity.ai/rest/browser/favicon?url=${k9e(e)}`;const r=NYe.test(e)?e:`https://${e}`;let s;try{s=decodeURIComponent(r)}catch{s=r}const a=s.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/'/g,"\\'").replace(/\s/g,"\\ ");return`chrome://favicon/size/${t}@${n}/${a}`},T0=(e,t)=>t.dxt_name?e?.find(n=>n.name===t.dxt_name)?.manifest:void 0,Vg=(e,t)=>t?[e,t].sort().join("-"):e.toString(),AYe=(e,t)=>t?[Vg(e,t),e.toString(),t.toString()]:[e.toString()],IYe=["homepage_widget","comet_magic_link","comet_quick_action","comet_selection","try-assistant","comet_assistant_popup"],RYe=e=>e?IYe.includes(e):!1,PYe={personal_search:!1,skip_search:!1,widget_type:"GENERAL",hide_nav:!1,image_generation:!1,time_widget:!1,hide_sources:!1,mhe_predictions:{skip_search:!1,image_generation_intent:!1,time_widget:!1,sports_intent:!1,places_search_intent:!1,shopping_intent:!1,movie_lists_intent:!1,image_preview:!1,video_preview:!1,nav_intent:!1,study_intent:!1,personal_search:!1,weather_widget:!1,finance_widget_gating:!1,calculator_widget:!1}},OF=600,LYe=async(e,t=OF)=>{const{data:n}=await re.POST("/rest/browser/classify","mobile_search_injection",{body:{query:e},timeoutMs:t});return n?.results},Hpe=e=>!e.isFetching&&e.data===!1,DF=({adapter:e,url:t,reason:n,event:r,onError:s,onSuccess:a,tabId:i})=>{if(r.ctrlKey||r.metaKey||r.shiftKey||r.altKey||r.button===1)return;if(r.preventDefault(),hYe.NEXT_PUBLIC_IS_SIDECAR_BUILD){const u=e.getStore().getState().sidecarSourceTab.tabId;OYe({adapter:e,url:t,reason:n,tabId:u});return}(async()=>{try{const u=await e.SearchBrowser({queries:[t],sources:["OPEN_TABS"],key:n,history_max_results:0,open_tabs_max_results:1,closed_tabs_max_results:0,request_id:n});let f;u.open_tabs_results?.length?(e.openTab({url:t,tabId:i}),f=await e.moveThreadToSidecar({reason:n,animate:!1,takeFocus:!1})):(f=await e.moveThreadToSidecar({reason:n,waitForNavigation:!0,animate:!1,takeFocus:!1}),window.open(t,f?"_self":"_blank")),a?.(f)}catch{window.open(t,"_blank"),s?.()}})()},OYe=({adapter:e,url:t,reason:n,tabId:r})=>{const s=async()=>{if(r===-1)return!1;try{const i=await e.openTab({tabId:r,request_id:n,url:t});if(!i.is_success)return!1;const{result:l}=i;return!(l.url!==t&&!l.url?.includes(t))}catch{return!1}};(async()=>{await s()||window.open(t,"_blank")})()};function FF(e,t){d.useEffect(()=>{if(typeof window>"u")return;const r=window.cookieStore;if(!r)return;const s=a=>{const i=a.deleted.find(c=>c.name===e),l=a.changed.find(c=>c.name===e);if(i||l){t(l??null);return}};return r.addEventListener("change",s),()=>{r.removeEventListener("change",s)}},[e,t])}let wC=[];class aa{static PREFERRED_COLOR_SCHEME_COOKIE="colorScheme";static get userPreferredColorScheme(){return Sn(this.PREFERRED_COLOR_SCHEME_COOKIE)}static set userPreferredColorScheme(t){sn(this.PREFERRED_COLOR_SCHEME_COOKIE,t,{expires:400}),localStorage.setItem(this.PREFERRED_COLOR_SCHEME_COOKIE,t)}static removeUserPreferredColorScheme(){jm(this.PREFERRED_COLOR_SCHEME_COOKIE),localStorage.removeItem(this.PREFERRED_COLOR_SCHEME_COOKIE)}static get isSystemScheme(){return!this.userPreferredColorScheme}static addOverride(t){const n={scheme:t};return wC.push(n),n}static removeOverride(t){wC=wC.filter(n=>n!==t)}static get colorScheme(){const t=wC.at(-1);return t?t.scheme:this.isSystemScheme?typeof window>"u"?void 0:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":this.userPreferredColorScheme}}function DYe(e){d.useEffect(()=>{if(typeof window>"u")return;const n=window.matchMedia("(prefers-color-scheme: dark)");function r(){e(aa.colorScheme)}return n.addEventListener("change",r),()=>{n.removeEventListener("change",r)}},[e])}function FYe(){return d.useCallback(e=>{if(typeof window>"u")return;const n=document.documentElement.dataset.colorScheme==="dark",r=aa.colorScheme;if(e){document.documentElement.dataset.colorScheme=e;return}n&&r==="light"?document.documentElement.dataset.colorScheme="light":!n&&r==="dark"&&(document.documentElement.dataset.colorScheme="dark")},[])}const zpe=Dt("ColorSchemeContext",null),Gpe=I.memo(function(t){const{children:n,userPreferredColorScheme:r}=t,[s,a]=d.useState(r?!1:aa.isSystemScheme),[i,l]=d.useState(r??aa.colorScheme),c=d.useCallback(y=>{aa.userPreferredColorScheme=y,a(!1),l(y)},[]),u=d.useCallback(()=>{aa.removeUserPreferredColorScheme(),a(!0),l(aa.colorScheme)},[]),f=FYe(),m=d.useCallback(y=>{s&&(l(y),f())},[s,f]);DYe(m);const p=d.useMemo(()=>gs(y=>{const x=!y&&aa.isSystemScheme;a(x),!x&&(l(y?.value??aa.colorScheme),f(y?.value))},100),[f]);FF(aa.PREFERRED_COLOR_SCHEME_COOKIE,p),d.useEffect(()=>{aa.isSystemScheme&&(document.documentElement.dataset.colorScheme=aa.colorScheme),f()},[f]);const h=d.useCallback(y=>{const x=aa.addOverride(y);return l(aa.colorScheme),f(),x},[f]),g=d.useCallback(y=>{aa.removeOverride(y),l(aa.colorScheme),f()},[f]);return typeof document<"u"&&document.documentElement.dataset.colorScheme!==i&&(document.documentElement.dataset.colorScheme=i),o.jsx(zpe.Provider,{value:{colorScheme:i,isSystemColorScheme:s,setSystemColorScheme:u,setUserPreferredColorScheme:c,addOverride:h,removeOverride:g},children:n})});Gpe.displayName="ColorSchemeProvider";function jr(e){const t=d.useContext(zpe);if(!t)throw new Error("Attempted to access ColorSchemeContext from useColorScheme() without adding <ColorSchemeProvider> to the tree.");const[n,r]=d.useState(!t.isSystemColorScheme);d.useEffect(()=>{e?.addSecondPass&&t.isSystemColorScheme&&!n&&r(!0)},[t.isSystemColorScheme,n,e?.addSecondPass]);const s={...t};return e?.addSecondPass&&(s.isColorSchemeReady=n),s}function UYe({flag:e,override:t,defaultValue:n,isServer:r=!1}){if(!t)return{shouldUseOverride:!1,value:null};try{if(typeof n=="boolean")return{shouldUseOverride:!0,value:t==="true"};if(typeof n=="number")return{shouldUseOverride:!0,value:Number(t)};if(typeof n=="object")try{return{shouldUseOverride:!0,value:JSON.parse(t)}}catch(s){return ne.warn(`[Eppo ${r?"Server ":""}Override]`,`Failed to parse JSON override for flag "${e}"`,{override:t,error:s}),{shouldUseOverride:!0,value:n}}return{shouldUseOverride:!0,value:t}}catch(s){return ne.error(`[Eppo ${r?"Server ":""}Override] Error:`,s),{shouldUseOverride:!0,value:n}}}let bv;async function BYe({apiKey:e,logAssignment:t}){if(bv)return bv;const{init:n}=await X(async()=>{const{init:r}=await Promise.resolve().then(()=>fYe);return{init:r}},void 0);try{return bv=n({apiKey:e,assignmentLogger:{logAssignment:t}}),await bv,ne.info("[Eppo Experiments] Primary key initialization successful"),bv}catch(r){throw ne.error("[Eppo Experiments] Primary key failed",r),r}}const qpe="eppo_overrides",Kpe="eppo_overrides",$Ye=e=>e?e.endsWith("@perplexity.ai"):!1,VYe=e=>{const t={};return e.forEach((n,r)=>{if(r.startsWith("eppo_")){const s=r.replace("eppo_","");t[s]=n??""}}),t},WYe=e=>{let t=!0;const n=JSON.stringify(e);try{sn(Kpe,n)}catch{t=!1}return t=Ys.setItem(qpe,n),t},HYe=(e,t,n)=>{if(typeof window>"u"||n&&!$Ye(e))return!1;const r=VYe(t);return Object.keys(r).length===0?!1:WYe(r)};function zYe(){try{const e=Sn(Kpe);if(e)return JSON.parse(e);const t=Ys.getItem(qpe);return t?JSON.parse(t):{}}catch{return{}}}const GYe=(e,t)=>{const n=d.useRef(void 0);cs(n.current,t)||(n.current=t),d.useEffect(e,[n.current])},qYe={getEppoTypedVariation:function(){return Promise.resolve(void 0)},keysRequiringRerender:[],addKeyRequiringRerender:()=>null,removeKeyRequiringRerender:()=>null},UF=Dt("EppoExperimentsContext",qYe),KYe="experiment assignment",a2="failed_open_to_default_value";function YYe(e){if(!e||typeof e!="string")return;const t=e.trim();if(t==="")return;const n=t.split("@");if(!(n.length!==2||!n[0]||!n[1]))return n[1]}const QYe=(e,t,n,r)=>s=>Ji({name:KYe,data:{subjectType:s.subjectAttributes.subjectType,pagePropsHostname:r,colorScheme:n,isPerplexityBrowser:e,...s},session:t});function XYe(e){const t=$pe.buildStorageKeySuffix(e),n=["eppo-configuration-","eppo-configuration-meta-","eppo-assignment-"];De.keys().filter(s=>s.startsWith("eppo-")).forEach(s=>{const a=s.split("-");if(a.length<2)return;const i=a[a.length-1],l=a.slice(0,-1).join("-")+"-";n.includes(l)&&i!==t&&(ne.warn("[Eppo Experiments] Cleaning up old Eppo key",{key:s,keySuffix:i,storageKeySuffix:t}),De.removeItem(s))})}const ZYe=({children:e,hostname:t,session:n,cfCountry:r})=>{const s=!!n?.user,a=T9e(),i=N9e(),l=Ks(),[c,u]=d.useState([]),{env:{isProduction:f,isStaging:m,deployName:p},device:{isWindowsApp:h}}=Pt(),y=f||m?"a2yUBlJ1tebb5g2II8WD1CzbVUszCSk3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc":"KphAz1VUxSQKAZxlw1PwMdZNRia-a4B3.ZWg9bnhqMGc3LmUuZXBwby5jbG91ZCZjcz1ueGowZzc",{colorScheme:x}=jr(),v=d.useRef(void 0),b=Ot(),[_,w]=d.useState(!1),{locale:C}=Z(),{isMobileStyle:S}=xe(),E=d.useCallback(R=>{QYe(l,n,x,t)(R)},[n,l,x,t]);d.useEffect(()=>{if(_||!b)return;HYe(n?.user?.email,b,f)&&w(!0)},[b,n?.user?.email,_,f]);const k=d.useCallback(async function(R,{flag:O,subjectType:D,stableId:P,defaultValue:A,extraAttributes:T}){if(D==="user_nextauth_id"&&!s)return A;const N=Zo()?.device_id??void 0,L=uf(),U=l&&!L;let $;if(P?$=P:D==="user_nextauth_id"?$=n?.user?.id:D==="visitor_id"?$=a??void 0:D==="session_id"?$=i??void 0:D==="context_uuid"?$=T?.context_uuid:D==="comet_device_id"&&($=N),!$)return ne.error("[Eppo Experiments]","No subject key found",{flag:O,subject_type:D,is_user_logged_in:s,has_stable_id:!!P,has_session_user_id:!!n?.user?.id,has_visitor_id:!!a,has_session_id:!!i,has_context_uuid:!!T?.context_uuid,has_comet_device_id:!!N,execution_context:typeof window<"u"?"client":"server",document_ready_state:typeof document<"u"?document.readyState:"unknown",eppo_provider_result:a2}),A;const V=zYe(),{shouldUseOverride:W,value:Q}=UYe({flag:O,override:V[O],defaultValue:A});if(W)return Q??A;if(!y)return ne.error("[Eppo Experiments]","No Eppo API key found",{flag:O,eppo_provider_result:a2}),A;v.current||(XYe(y),v.current=BYe({apiKey:y,logAssignment:E}));const q=await v.current;try{const H=n?.user?.email??void 0,K=YYe(H);return R(q,O,$,{subjectType:D,visitorId:a??void 0,sessionId:i??void 0,userEmail:H,userEmailDomain:K,userId:n?.user?.id??void 0,appApiClient:j9e(S,h),cfCountry:r,locale:C,isComet:l,isCometDesktop:U,isCometMobile:L,deployName:p,cometDeviceId:N,...Lle(),...T??{}},A)}catch{return ne.error("[Eppo Experiments] Error calling eppoFn",{flag:O,subjectKey:$,eppo_provider_result:a2}),A}},[y,n?.user?.id,n?.user?.email,a,i,E,S,h,r,C,l,p,s]),M=d.useCallback(R=>{u(O=>O.includes(R)?O:[...O,R])},[]),j=R=>{u(O=>O.includes(R)?O.filter(D=>D!==R):O)};return o.jsx(UF.Provider,{value:{getEppoTypedVariation:k,keysRequiringRerender:c,addKeyRequiringRerender:M,removeKeyRequiringRerender:j},children:e})};function Jy(e,t){const n=d.useContext(UF);if(!n)throw new Error("useGetEppoJSONVariation must be used within EppoExperimentsContext");const{getEppoTypedVariation:r}=n,[s,a]=d.useState(!0),[i,l]=d.useState(void 0),[c,u]=d.useState(e.defaultValue),f=d.useRef(e),m=d.useCallback(async()=>{const{skip:p,shortCircuitCases:h,...g}=f.current;try{return r(t,g)}catch(y){return ne.error("[Eppo Experiments]","Error calling getEppoTypedVariation",{flag:g.flag,error:y,eppo_provider_result:a2}),g.defaultValue}},[r,t]);return GYe(()=>{f.current=e;const{skip:p,shortCircuitCases:h,...g}=e;if(p){a(!1);return}if(h)for(const{condition:y,result:x}of h)try{if(y()){u(x),a(!1);return}}catch(v){ne.error("[Eppo Experiments] Error evaluating short-circuit case",{flag:g.flag,error:v})}a(!0),r(t,g).then(y=>u(y),l).finally(()=>a(!1))},[r,e]),{value:c,loading:s,error:i,fetchVariation:m}}const Ype=(e,...t)=>e.getJSONAssignment(...t);function Fu(e){return Jy(e,Ype)}function JYe(e,t){const n={...e,subjectType:"context_uuid",extraAttributes:{...e.extraAttributes,context_uuid:t}};return Jy(n,Ype)}const eQe=(e,...t)=>e.getStringAssignment(...t);function BF(e){return Jy(e,eQe)}const tQe=(e,...t)=>e.getBooleanAssignment(...t);function jt(e){return Jy(e,tQe)}const nQe=(e,...t)=>e.getNumericAssignment(...t);function rQe(e){return Jy(e,nQe)}const sQe=(e,...t)=>e.getIntegerAssignment(...t);function Qpe(e){return Jy(e,sQe)}function Xpe(e){return Fu({...e,subjectType:"visitor_id",skip:!1})}function Qs(e){return jt({...e,subjectType:"visitor_id",skip:!1})}const df=()=>{const e=d.useContext(UF);if(!e)throw new Error("useEppoExperiments must be used within EppoExperimentsContext");return e},$f=e=>`milestone-progress-dismissed-${e}`,QQ="milestone-success-modal-dismissed",aQe=({reason:e})=>{const[t,n]=d.useState(!1),r=ot(),{keysRequiringRerender:s,removeKeyRequiringRerender:a}=df(),i=Epe({}),{trackEvent:l,trackEventOnce:c}=Te(),{locale:u,$t:f}=Z(),{hasAccessToProFeatures:m}=St(),{update:p}=mt(),{openModal:h}=xt(),{data:g}=Ue({queryKey:["milestone-progress"],queryFn:()=>upe({locale:u,reason:e}),enabled:i});d.useEffect(()=>{if(g?.progress_display?.length&&g.progress_display.every(Boolean)&&!m){if(De.getItem(QQ))return;h("proMessageModal",{origin:Le.MILESTONE_ACHIEVED,title:g?.promotion_display.success_modal,buttonText:f({defaultMessage:"Get Started",id:"9QXm1EW9qz"})}),De.setItem(QQ,"true"),setTimeout(()=>{p()},1e3)}},[g?.progress_display,g?.promotion_display.success_modal,m,h,p,f]),d.useEffect(()=>{},[s,r,a,i]),d.useEffect(()=>{Ys.getItem($f("session"))||De.getItem($f("lifetime"))||g&&!g.is_eligible&&g.has_incentive},[g,i,c]),d.useEffect(()=>{const x=g?.progress_display.filter(v=>v).length;x&&x>1&&!g.has_incentive&&(Ys.removeItem($f("session")),De.removeItem($f("lifetime")))},[g]);const y=d.useCallback(()=>{if(!g)return;l("milestone progress widget dismissed",{progressCount:g?.progress_display.filter(Boolean).length,requiredCount:g?.progress_display.length,hasIncentive:g?.has_incentive}),n(!1),Ys.setItem($f("session"),"true");const x=g?.progress_display.filter(v=>v).length;x&&x<=1&&De.setItem($f("lifetime"),"true"),g?.has_incentive&&De.setItem($f("lifetime"),"true")},[g,l]);return d.useMemo(()=>({show:t,handleClose:y,data:g}),[g,y,t])},oQe=I.memo(()=>{const e="floating-milestone-progress",t=Z(),{show:n,handleClose:r,data:s}=aQe({reason:e}),{title:a,description:i}=d.useMemo(()=>s?s.has_incentive?{title:s.promotion_display.title_complete,description:s.promotion_display.description_complete}:s.progress_display.includes(!0)?{title:s.promotion_display.title_progress,description:s.promotion_display.description_progress}:{title:s.promotion_display.title_start,description:s.promotion_display.description_start}:{title:"",description:""},[s]);return!n||!s||!s?.is_eligible?null:o.jsx(z,{variant:"background",className:"animate-in fade-in fixed bottom-[20px] right-[20px] w-[216px] overflow-hidden rounded-xl duration-300 ease-out",children:o.jsxs(z,{variant:"subtler",className:"p-sm border-subtlest inset-0 rounded-xl border",children:[o.jsx("img",{src:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",alt:t.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),className:"bg-subtle size-full rounded-lg object-cover",style:{aspectRatio:"600/350"}}),o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Me,{pill:!0,variant:"noBackground",size:"small",icon:kt,extraCSS:"text-light md:hover:text-quiet ",onClick:r})}),o.jsxs("div",{className:"p-xs mt-sm",children:[o.jsx(F,{variant:"baseSemi",children:a}),o.jsx(F,{variant:"small",color:"light",className:"mt-xs",children:i}),o.jsx("div",{className:"mt-sm flex flex-row justify-between",children:s.progress_display.map((l,c)=>o.jsx("div",{className:"gap-xs py-xs flex flex-col items-center",children:l?o.jsx(F,{color:"super",children:o.jsx(de,{size:"lg",icon:u7e})}):o.jsxs(F,{className:"relative opacity-30",children:[o.jsx(de,{size:"lg",icon:d7e}),o.jsx(F,{variant:"tinyMono",color:"defaultInverted",className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2",children:c+1})]})},c))})]})]})})});oQe.displayName="FloatingMilestoneProgress";const iQe=Symbol(),Zpe=Symbol(),Zv="a",Jpe="f",XQ="p",ehe="c",the="t",nhe="h",o2="w",rhe="o",she="k";let lQe=(e,t)=>new Proxy(e,t);const GP=Object.getPrototypeOf,ZQ=new WeakMap,cQe=e=>e&&(ZQ.has(e)?ZQ.get(e):GP(e)===Object.prototype||GP(e)===Array.prototype),JQ=e=>typeof e=="object"&&e!==null,uQe=e=>Object.values(Object.getOwnPropertyDescriptors(e)).some(t=>!t.configurable&&!t.writable),dQe=e=>{if(Array.isArray(e))return Array.from(e);const t=Object.getOwnPropertyDescriptors(e);return Object.values(t).forEach(n=>{n.configurable=!0}),Object.create(GP(e),t)},fQe=(e,t)=>{const n={[Jpe]:t};let r=!1;const s=(l,c)=>{if(!r){let u=n[Zv].get(e);if(u||(u={},n[Zv].set(e,u)),l===o2)u[o2]=!0;else{let f=u[l];f||(f=new Set,u[l]=f),f.add(c)}}},a=()=>{r=!0,n[Zv].delete(e)},i={get(l,c){return c===Zpe?e:(s(she,c),ohe(Reflect.get(l,c),n[Zv],n[ehe],n[the]))},has(l,c){return c===iQe?(a(),!0):(s(nhe,c),Reflect.has(l,c))},getOwnPropertyDescriptor(l,c){return s(rhe,c),Reflect.getOwnPropertyDescriptor(l,c)},ownKeys(l){return s(o2),Reflect.ownKeys(l)}};return t&&(i.set=i.deleteProperty=()=>!1),[i,n]},ahe=e=>e[Zpe]||e,ohe=(e,t,n,r)=>{if(!cQe(e))return e;let s=r&&r.get(e);if(!s){const c=ahe(e);uQe(c)?s=[c,dQe(c)]:s=[c],r?.set(e,s)}const[a,i]=s;let l=n&&n.get(a);return(!l||l[1][Jpe]!==!!i)&&(l=fQe(a,!!i),l[1][XQ]=lQe(i||a,l[0]),n&&n.set(a,l)),l[1][Zv]=t,l[1][ehe]=n,l[1][the]=r,l[1][XQ]},mQe=(e,t)=>{const n=Reflect.ownKeys(e),r=Reflect.ownKeys(t);return n.length!==r.length||n.some((s,a)=>s!==r[a])},qP=(e,t,n,r,s=Object.is)=>{if(s(e,t))return!1;if(!JQ(e)||!JQ(t))return!0;const a=n.get(ahe(e));if(!a)return!0;if(r){if(r.get(e)===t)return!1;r.set(e,t)}let i=null;for(const l of a[nhe]||[])if(i=Reflect.has(e,l)!==Reflect.has(t,l),i)return i;if(a[o2]===!0){if(i=mQe(e,t),i)return i}else for(const l of a[rhe]||[]){const c=!!Reflect.getOwnPropertyDescriptor(e,l),u=!!Reflect.getOwnPropertyDescriptor(t,l);if(i=c!==u,i)return i}for(const l of a[she]||[])if(i=qP(e[l],t[l],n,r,s),i)return i;if(i===null)throw new Error("invalid used");return i},pQe=e=>()=>{const[,n]=d.useReducer(u=>u+1,0),r=d.useMemo(()=>new WeakMap,[]),s=d.useRef(),a=d.useRef();d.useEffect(()=>{s.current!==a.current&&qP(s.current,a.current,r,new WeakMap)&&(s.current=a.current,n())});const i=d.useCallback(u=>(a.current=u,s.current&&s.current!==u&&!qP(s.current,u,r,new WeakMap)?s.current:(s.current=u,u)),[r]),l=e(i),c=d.useMemo(()=>new WeakMap,[]);return ohe(l,r,c)};function g_(e){const t=Dt(e,null),{useSelector:n,useStore:r,useTrackedState:s}=ihe(t,e);return{Context:t,useSelector:n,useStore:r,useTrackedState:s}}function ihe(e,t){const n=()=>{const a=I.useContext(e);if(!a)throw new Error(`This hook must be used within ${t}.Provider`);return a},r=a=>n()(a),s=pQe(r);return{useSelector:r,useStore:n,useTrackedState:s}}const hp=(e,t)=>{const n=Dt(e,null),r=l=>{const[c]=I.useState(()=>l.initialValue?t(l?.initialValue):t(void 0));return o.jsx(n.Provider,{value:c,children:l.children})},{useSelector:s,useStore:a,useTrackedState:i}=ihe(n,e);return{useSelector:s,useStore:a,useTrackedState:i,Context:n,Provider:r}},{Context:hQe,useTrackedState:gQe}=g_("LocalUserSettingsContext"),yQe=({trackEvent:e,initialLocalUserSettings:t})=>Yo()(Ble(n=>({...t,actions:{setIsSplashPageDismissed:(r,s)=>{xqe(r,s),n({isSplashPageDismissed:r})},setColorScheme:r=>{n({colorScheme:r})},setIsSidebarPinned:r=>{n({isSidebarPinned:r}),sn("isSidebarPinned",String(r),{expires:$r})},setSidebarHiddenHubs:r=>{n({sidebarHiddenHubs:r}),sn("sidebarHiddenHubs",JSON.stringify(r),{expires:$r})},setIsCollapsed:r=>{e("sidebar toggled",{is_collapsed:r}),sn("isCollapsed",String(r),{expires:$r}),n({isCollapsed:r})},setIsIncognito:async r=>{const s=await Xb.getSession(),a=s!==null&&typeof s<"u";a&&Rle(),a&&(yqe(r),n({isIncognitoLocal:r}))},setIsDiscoverInterestBoxDismissed:r=>{vqe(r),n({isDiscoverInterestBoxDismissed:r})},setIsEnterpriseAdDismissed:r=>{_qe(r),n({isEnterpriseAdDismissed:r})},setIsSuggestionsDisabled:r=>{e("auto suggestion setting toggled",{isEnabled:!r}),wqe(r),n({isSuggestionsDisabled:r})},setIsHomepageWidgetsDisabled:r=>{e("homepage widgets setting toggled",{isEnabled:!r}),Cqe(r),n({isHomepageWidgetsDisabled:r})},setIsSportsIosCtaDismissed:r=>{Mqe(r),n({isSportsIosCtaDismissed:r})},setPreferredSearchMode(r){r?sn($P,r,{expires:$r}):jm($P),n({preferredSearchMode:r})},setIsMaxAssistantModeEnabled:r=>{e("max assistant mode toggled",{isEnabled:r}),sn(ape,String(r),{expires:$r}),n({isMaxAssistantMode:r})},setPreferredSearchModel(r,s){n(a=>{const{preferredSearchModels:i={}}=a;s?i[r]=s:r&&delete i[r];try{sn(spe,JSON.stringify(i),{expires:$r})}catch{}finally{a.preferredSearchModels=i}return a})},setWelcomeBackGateImpressions:r=>{Sqe(r),n({welcomeBackGateImpressions:r})},setShareGateImpressions:r=>{Eqe(r),n({shareGateImpressions:r})},setIsSidebarConnectorsAdDismissed:r=>{Nqe(r),n({isSidebarConnectorsAdDismissed:r})},setIsStudentReferralBannerDismissed:r=>{Iqe(r),n({isStudentReferralBannerDismissed:r})},setIsStudentSpaceUpsellDismissed:r=>{Rqe(r),n({isStudentSpaceUpsellDismissed:r})},setStudentSpaceUpsellImpressions:r=>{Pqe(r),n({studentSpaceUpsellImpressions:r})}}}))),xQe=({children:e,initialLocalUserSettings:t})=>{const{trackEvent:n}=Te(),[r]=I.useState(()=>yQe({trackEvent:n,initialLocalUserSettings:t}));return FF(bE,s=>{s&&r.setState({isIncognitoLocal:JSON.parse(s.value)})}),o.jsx(hQe.Provider,{value:r,children:e})},In=gQe,eX=e=>`https://plex.it/referrals/${e}`,Rsn=({referralLink:e})=>{const{$t:t}=Z(),[n,r]=d.useState(!1),{trackEvent:s}=Te(),a=d.useCallback(()=>{e&&(navigator.clipboard.writeText(e),s("referral link copied",{referralLink:e}),r(!0),setTimeout(()=>{r(!1)},2e3))},[e,s]),i=d.useCallback(()=>{e&&(navigator.share({url:e,text:t({defaultMessage:"I'm using Perplexity for smarter, faster answers. Sign up using my link and we'll both get 1 month of Pro.",id:"G7gaSddnv5"})}),s("referral link copied",{referralLink:e}))},[t,e,s]);return d.useMemo(()=>({isCopied:n,handleCopyLink:a,handleNativeShare:i,copyButtonProps:{text:t(n?{defaultMessage:"Copied",id:"p556q3uvbn"}:{defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),icon:n?dr:Am,onClick:a}}),[n,a,i,t])},Psn="/static/images/referrals-landing-wide.jpeg",vQe=e=>{const{$t:t}=e;return t({defaultMessage:"Earn 1 month of Pro for each friend you refer",id:"klaFi8fH9N"})},lhe="comet-sidecar-threads-by-id",dn=()=>!!Zo(),$F=()=>{const e=Zo();return!!(e?.android_version||e?.ios_version)},$5=e=>!(e.defaultPrevented||!dn()||e.ctrlKey||e.metaKey),bQe=e=>{const t=De.getItem(lhe);if(t){const n=JSON.parse(t);for(const[r,{url:s,updatedAt:a}]of Object.entries(n))e.getState().actions.setSidecarUrlById(r,s,a)}},tX=e=>{const t=e.getState().sidecarUrlById,n={};t.forEach((r,s)=>{s!=="-1"&&(r.url==="/sidecar/"||r.url==="/sidecar"||(n[s]={url:r.url,updatedAt:r.updatedAt}))}),De.setItem(lhe,JSON.stringify(n))},_Qe=(e,t)=>{const n=e.getState().sidecarSourceTab,r=Vg(n.tabId,n.secondaryTab?.tabId),s=e.getState().sidecarUrlById.get(r)?.url;!s||new URL(window.location.href).pathname===s||t.replace(s,"Sidecar thread restored from cache")},che=()=>{const{openModal:e}=xt(),{isMobileUserAgent:t}=xe(),n=$F(),r=d.useCallback(({origin:s,sheetModalVariant:a,closeCallback:i})=>{!t||n||e("installModal",{origin:s,sheetModalVariant:a,closeCallback:i})},[n,t,e]);return d.useMemo(()=>({openInstallUpsell:r}),[r])};var nX={};const or=({enabled:e})=>{const{openModal:t}=xt(),{keysRequiringRerender:n,removeKeyRequiringRerender:r}=df(),{isMobileUserAgent:s}=xe(),a=et(),{openInstallUpsell:i}=che(),l=d.useCallback(({title:u,description:f,origin:m,image:p,imageAlt:h,closeCallback:g,loginButtonsStyle:y})=>{!e||a||nX.NEXT_PUBLIC_IS_SIDECAR_BUILD||t("loginModal",{pitchMessage:u?{title:u,description:f}:void 0,origin:m,experimentalImageDesign:{image:p,imageAlt:h},closeCallback:g,loginButtonsStyle:y})},[e,t,a]),c=d.useCallback(({title:u,description:f,origin:m,sheetModalVariant:p,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y,overrideMobileVariant:x=!1})=>{if(!e||a||nX.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;let v="full-sheet";(x||!s)&&p&&(v=p),t("loginModal",{pitchMessage:u?{title:u,description:f}:void 0,origin:m,sheetModalDesign:v,closeCallback:h,overrideRedirectUrl:g,disallowedMethods:y})},[e,s,t,a]);return d.useEffect(()=>{e&&(n.includes("visitor-gate")&&(s&&!Mg()?i({origin:Le.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Le.VISITOR_GATE,sheetModalVariant:"bottom-sheet-gradient"}),r("visitor-gate")),n.includes("visitor-gate-ii")&&(s&&!Mg()?i({origin:Le.VISITOR_GATE,sheetModalVariant:"inset-centered-sheet"}):c({origin:Le.VISITOR_GATE}),r("visitor-gate-ii")))},[e,c,n,r,s,i]),d.useMemo(()=>({openVisitorLoginUpsell:c,openVisitorLoginImageUpsell:l}),[l,c])};var rX;(function(e){e.SPRING_2025="SPRING_2025",e.GIVE_1_MONTH_FREE="GIVE_1MO_GET_1MO"})(rX||(rX={}));const wQe={EMAIL_ALREADY_REGISTERED:"Promo not valid for existing users",INVALID_REFERRAL_CODE:"Invalid referral code",UNKNOWN:"An unknown error occurred",EMAIL_RATE_LIMIT_EXCEEDED:"Too many emails sent to this address"},CQe=async({email:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/referrals/validate-email",t,{params:{query:{email:e}},timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to validate referral email",cause:r});return{valid:n.is_valid,error:!1}}catch(n){return ne.error(n),{valid:!1,error:!0}}},Lsn=async({referralCode:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/referrals/get-user-from-referral-code",t,{params:{query:{referral_code:e}}});if(r)throw new Error("Failed to get user from referral code");return n}catch(n){return ne.error("Failed to get user from referral code",n),{email:null,is_student:null,is_active:!1}}},Osn=async({toEmail:e,referralType:t,reason:n})=>{try{const{error:r}=await re.POST("/rest/referrals/send-referral-email",n,{body:{to_email:e,referral_type:t},timeoutMs:8e4});return r?{success:!1,error:r.detail?.[0]?.msg||r.detail}:{success:!0,error:null}}catch(r){return ne.error("Failed to send referral email",r),{success:!1,error:wQe.UNKNOWN}}},Dsn=async({headers:e,email:t,reason:n})=>{const{data:r,error:s}=await re.GET("/rest/referrals/",n,{headers:e,params:{query:{email:t}}});if(s)throw new Error("Failed to get user referral status");return r},SQe=async({verificationId:e,reason:t})=>{try{if(!e)throw new Error("Verification ID is required");const{data:n,error:r}=await re.GET("/rest/referrals/student-reward-details",t,{params:{query:{verification_id:e}},timeoutMs:Pe()});if(r)throw new Error("Failed to get student reward details");return n}catch(n){return ne.error("Failed to get student reward details",n),{months_awarded:1,reward_type:"default",organization:null,country_label:null}}},V5=({email:e,reason:t})=>{const{data:n,isLoading:r}=Ue({queryKey:["user_student",e,t],queryFn:()=>CQe({email:e,reason:t}),enabled:!!e});return d.useMemo(()=>({isStudent:n?.valid??null,loading:r}),[n?.valid,r])},EQe=(e,t)=>{const{value:n,loading:r}=jt({flag:"maybe-student-domains-regex",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},MQe=async({reason:e,headers:t})=>{try{return(await re.GET("/rest/landing-page/academic/tile-data",e,{timeoutMs:Ht.MEDIUM,headers:t})).data}catch(n){return ne.error("Failed to get academic tile data",n),null}},kQe=async({reason:e,headers:t})=>{try{return(await re.GET("/rest/landing-page/academic/primer-queries",e,{timeoutMs:Ht.MEDIUM,headers:t})).data}catch(n){return ne.error("Failed to get academic primer queries",n),null}},Fsn=({reason:e})=>Ue({queryKey:eqe(),queryFn:()=>MQe({reason:e})}),Usn=({reason:e})=>Ue({queryKey:tqe(),queryFn:()=>kQe({reason:e})}),TQe=async({reason:e,headers:t})=>{try{return(await re.GET("/rest/academic/check-edu-institution",e,{timeoutMs:Ht.HIGH,headers:t})).data}catch(n){return ne.error("Failed to check institution",n),null}},NQe=({reason:e})=>Ue({queryKey:nqe(),queryFn:()=>TQe({reason:e})}),uhe=({reason:e})=>{const{session:t}=mt(),n=t?.user?.email??"",{isStudent:r,loading:s}=V5({email:n,reason:e}),{variation:a,loading:i}=EQe(!1),{data:l,isLoading:c}=NQe({reason:e});return d.useMemo(()=>c||i||s?{isLoading:!0,signals:{isVerifiedStudent:null,isPossibleStudentByEmail:null,isPossibleStudentByIP:null}}:{isLoading:!1,signals:{isVerifiedStudent:!!r,isPossibleStudentByEmail:!!a,isPossibleStudentByIP:!!l?.institution}},[c,i,s,a,r,l?.institution])},Bsn=["onboarding-pro","onboarding-mobile"],jQe=({searchParams:e,cleanRedirect:t})=>{if(!e)return null;const r=e.get("redirect");let s=null;try{s=r&&new URL(r).searchParams.get(Ou)}catch{return null}return s?s===Le.GROW_COMET_STUDENTS_COUNTRY?Le.GROW_COMET_STUDENTS_COUNTRY:s===Le.GROW_COMET_STUDENTS?Le.GROW_COMET_STUDENTS:null:null},dhe=()=>{const e=Ot();return d.useMemo(()=>{const t=e?.get(Ou),n=!!jQe({searchParams:e,cleanRedirect:!1}),r=t===Le.STUDENT_REFERRAL_LANDING_PAGE,s=t===Le.STUDENT_LANDING_PAGE,a=t===Le.GROW_COMET_STUDENTS_COUNTRY;return{loginSource:t,isFromStudentCometGrowth:n,isFromStudentCometGrowthCountry:a,isFromStudentReferral:r,isFromStudentLanding:s,isFromStudentFlow:n||r||s||a}},[e])},AQe={currentStep:null,currentIndex:0,steps:[],handleNext:()=>null,handleComplete:()=>null,insertStep:()=>null,insertStepAndNavigate:()=>null,experimentVariationsMeta:{},setCurrentIndex:()=>null},fhe=Dt("MultiStepContext",AQe),IQe=({steps:e,experimentVariationsMeta:t,handleFinish:n,initialIndex:r=0,children:s})=>{const[a,i]=d.useState(r),[l,c]=d.useState(e),[u,f]=d.useState(null),[m,p]=d.useState(t),{trackEventTyped:h}=Te();d.useEffect(()=>{c(e)},[e]),d.useEffect(()=>{p(t)},[t]),d.useEffect(()=>{l[a]!==void 0&&h("step visited",{step:l[a],experimentVariationsMeta:m})},[a,m,l,h]),d.useEffect(()=>{if(u!==null){if(i(u),f(null),l[a]===void 0||l[u]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[u],isFinish:!1,experimentVariationsMeta:m})}},[a,m,u,l,h]);const g=(_,w)=>{const C=[...l];C.splice(w,0,_),c(C)},y=(_,w)=>{g(_,w),f(w)},x=()=>{if(l.length)if(a===l.length-1){if(n?.(),l[a]===void 0)return;h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})}else{if(i(a+1),l[a]===void 0||l[a+1]===void 0)return;h("step transition",{sourceStep:l[a],destinationStep:l[a+1],isFinish:!1,experimentVariationsMeta:m})}},v=()=>{n?.(),l[a]!==void 0&&h("step transition",{sourceStep:l[a],isFinish:!0,experimentVariationsMeta:m})},b=d.useMemo(()=>l[a],[a,l]);return o.jsx(fhe.Provider,{value:{currentStep:b,insertStep:g,insertStepAndNavigate:y,handleNext:x,handleComplete:v,currentIndex:a,steps:l,setCurrentIndex:i,experimentVariationsMeta:m},children:s})};function mhe(){const e=d.useContext(fhe);if(!e)throw new Error("useMultiStep must be used within MultiStepContext");return e}const RQe=(e,t)=>t.isFromStudentCometGrowthCountry?Le.GROW_COMET_STUDENTS_COUNTRY:t.isFromStudentCometGrowth?Le.GROW_COMET_STUDENTS:t.isFromStudentReferral?Le.STUDENT_REFERRAL_LANDING_PAGE:t.isFromStudentLanding?Le.STUDENT_LANDING_PAGE:e,PQe=({origin:e,customCallbacks:t})=>{const{$t:n}=Z(),r=et(),{trackEvent:s}=Te(),{openVisitorLoginUpsell:a}=or({enabled:!r}),{insertStepAndNavigate:i,currentIndex:l,handleComplete:c}=mhe(),{openModal:u}=xt(),f=dhe(),{signals:m,isLoading:p}=uhe({reason:"combined_paywall"}),h=d.useCallback(v=>{if(v){if(f.isFromStudentCometGrowth){c();return}typeof window<"u"&&window.location.pathname==="/onboarding"?(Ys.setItem("student_verification_id",v),i("onboarding-student-referrals",l+1)):setTimeout(()=>{u("studentReferrals",{verificationId:v})},150)}},[i,l,u,f,c]),g=d.useCallback(v=>{s("sheerid form redirect",{verificationLocationSource:RQe(e,f),verificationRoleType:v}),u("sheerIdModal",{type:v,onSuccess:t?.onSuccess??h,onClose:t?.onClose})},[h,e,s,f,u,t]),y=d.useCallback(v=>{if(!r){a({title:n({defaultMessage:"Sign in to unlock Education Pro",id:"UNeU1Y4Zdu"}),origin:e,disallowedMethods:["apple"]});return}g(v)},[r,a,g,n,e]),x=f.isFromStudentFlow||!!m.isVerifiedStudent||!!m.isPossibleStudentByEmail||!!m.isPossibleStudentByIP;return{isLoading:!!p,isVerifiedStudent:!!m.isVerifiedStudent,handleStudentTierClick:y,handleVerificationSuccess:h,shouldDefaultToStudent:x,signals:m}},LQe=e=>{if(!e)return!1;const t=e.indexOf("@"),n=e.lastIndexOf(".");return e.includes("@")&&e.includes(".")&&t<n&&t>0},phe=I.memo(({text:e})=>o.jsx(F,{variant:"tiny",children:o.jsx("span",{className:"text-caution",children:e})}));phe.displayName="FormError";const y_=I.memo(({label:e,subtitle:t,errorText:n,isOptional:r=!1,withMargin:s=!0,optionalLabel:a="optional",testId:i})=>e||n||t?o.jsxs("div",{className:B({"mb-sm":s}),"data-test-id":i,children:[o.jsxs("div",{className:"flex items-center justify-between",children:[(e||t)&&o.jsx("label",{htmlFor:e,children:o.jsx("div",{className:"gap-y-xs flex flex-col",children:e&&o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(F,{variant:"smallBold",className:"select-none",children:e}),r&&o.jsx(F,{variant:"small",color:"light",children:`(${a})`})]})})}),n&&o.jsx(phe,{text:n})]}),t&&o.jsx(F,{variant:"small",color:"light",children:t})]}):null);y_.displayName="FormItemHeader";function ex(e){const t=d.useRef(void 0);return d.useEffect(()=>{t.current=e},[e]),t.current}class ga{static isEnterKey(t){return t.code==="Enter"||t.key==="Enter"||t.keyCode===13}static isEnterKeyWithoutShift(t){return this.isEnterKey(t)&&!t.shiftKey}static isArrowDown(t){return t.key==="ArrowDown"}static isArrowUp(t){return t.key==="ArrowUp"}static isEscapeKey(t){return t.key==="Escape"}static isTabKey(t){return t.key==="Tab"}static isOnlySlashKey(t){return t.key==="/"&&!t.metaKey&&!t.ctrlKey&&!t.altKey}static isCtrlOrCmdJ(t){return(t.metaKey||t.ctrlKey)&&t.key==="j"}}function Qt(e){throw new Error(e)}const A1=(e,t)=>{if(ga.isEnterKeyWithoutShift(e)){if(t.isComposing||e.keyCode===229){e.preventDefault();return}if(t.isMobileUserAgent||t.allowEnterNewlines)return;e.preventDefault()}t.onKeyDown?.(e)},VF=e=>{e(!0)},WF=e=>{setTimeout(()=>{e(!1)},0)};var Md;(function(e){e.INLINE="inline",e.LABEL="label"})(Md||(Md={}));const OQe=({onClear:e})=>o.jsx(Me,{icon:kt,pill:!0,onClick:e,size:Yt.small}),DQe=["email","tel"],Xr=I.memo(({type:e,className:t,wrapperClassName:n,value:r,name:s,maxLength:a,errorText:i,errorPlacement:l=Md.INLINE,disabled:c=!1,required:u=!1,autoFocus:f=!1,placeholder:m="",rightItems:p=ce,onChange:h,onClear:g,onBlur:y,onFocus:x,onPaste:v,onKeyDown:b,isLoading:_,inlineEditBlock:w,label:C,subtitle:S,isOptional:E,isMobileUserAgent:k,labelMargin:M=!0,testId:j,variant:R,pill:O=!0,disable1pass:D,ClearIcon:P=OQe,enterKeyHint:A,size:T,ref:N,colorVariant:L="default",min:U,max:$,spellCheck:V})=>{const W=ex(c),Q=d.useRef(null),[q,H]=d.useState(!1),[K,G]=d.useState(!1),ee=d.useRef(q);ee.current=q,d.useEffect(()=>{!k&&f&&Q.current?.focus()},[k,Q,f]),d.useEffect(()=>{W!==c&&!c&&!k&&f&&setTimeout(()=>{Q.current?.focus()},200)});const Y=d.useMemo(()=>B({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),te=d.useMemo(()=>{const ke=(()=>{switch(L){case"default":return"bg-base dark:bg-subtler";case"subtle":return"bg-subtle";default:Qt(L)}})(),Ie=B("w-full outline-none focus:outline-none focus:ring-subtler font-sans flex items-center","text-foreground caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",ke,"border border-subtler  focus:ring-1 placeholder-quieter","duration-200 transition-all",{"ring-subtler ring-1":q,"rounded-t-[32px] rounded-b-[32px]":O,"rounded-lg":!O},t),Ce=B({"py-xs px-sm text-xs placeholder:text-xs":T==="xs","py-sm px-sm text-sm placeholder:text-sm":T==="sm","py-lg px-xl text-lg placeholder:text-base":T==="lg","pl-[40px]":e==="search","!font-mono md:text-base":R==="monospace","!text-3xl !placeholder:text-3xl !font-medium":R==="page-title","py-sm md:text-sm px-md placeholder:text-sm":!T&&!R}),Ge=B({"pr-xs":p.length===0&&T==="xs","pr-sm":p.length===0&&T==="sm","pr-md":p.length===0&&!T,"pr-lg":p.length===0&&T==="lg","pr-[49px] md:pr-[59px]":p.length===1,"pr-[128px] md:pr-[138px]":p.length===2});return B(Ie,Ce,Ge)},[q,O,t,T,e,R,p.length,L]),se=!!i,ae=!se&&!!a&&!!r&&r.length>a,pe=d.useMemo(()=>e==="search"?o.jsx("div",{className:"absolute left-3 flex items-center rounded-l-lg",children:o.jsx(F,{color:"light",children:o.jsx(de,{icon:Br})})}):null,[e]),fe=d.useMemo(()=>{const ke=l===Md.INLINE&&se;return o.jsxs("div",{className:B("right-sm gap-sm absolute flex items-center rounded-full"),children:[_?o.jsx(F,{color:"light",className:"mr-xs",children:o.jsx(Fr,{})}):null,ke&&o.jsx(z,{className:"mr-sm",children:o.jsx(F,{color:"red",variant:"tiny",children:i})}),ae&&o.jsx(z,{className:"mr-sm",children:a&&r&&o.jsx(F,{color:"red",variant:"tiny",children:a-r.length})}),g&&o.jsx("div",{className:Y,children:o.jsx(P,{onClear:g,inputValue:r})}),p.map((Ie,Ce)=>o.jsx(me,{...Ie.buttonProps,size:Ie.buttonProps.size,disabled:Ie.buttonProps.disabled||se||ae,pill:!0},Ce))]})},[l,se,_,i,ae,a,r,g,Y,P,p]),ge=d.useCallback(()=>{if(Q.current){const ke=Q.current.value.length;Q.current.focus();try{Q.current.setSelectionRange(ke,ke)}catch{}}},[]),Se=d.useCallback(ke=>{x?.(ke.nativeEvent),H(!0)},[x]),je=d.useCallback(ke=>{y?.(ke.nativeEvent),H(!1)},[y]);d.useImperativeHandle(N,()=>{const ke=Q.current;return ke.focusAtEnd=ge,ke.isFocused=()=>ee.current,ke.inLine=()=>!0,ke.append=Ie=>{Q.current&&(Q.current.value+=Ie)},ke.scrollToEnd=()=>{Q.current&&(Q.current.scrollTop=Q.current.scrollHeight)},ke.trim=()=>{Q.current&&(Q.current.value=Q.current.value.trim())},ke.element=()=>Q.current,ke},[ge]),d.useEffect(()=>{f&&!k&&ge()},[f,ge,k]);const ye=d.useCallback(ke=>{h?.(ke.target.value)},[h]),be=d.useCallback(ke=>{A1(ke.nativeEvent,{isMobileUserAgent:k,isComposing:K,onKeyDown:b})},[b,k,K]),Ne=l===Md.LABEL?i:void 0;return o.jsxs("div",{className:n,children:[o.jsx(y_,{label:C,subtitle:S,isOptional:E,errorText:Ne,withMargin:M}),o.jsx("div",{className:"rounded-full",children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("input",{type:e,ref:Q,autoFocus:f,placeholder:m,disabled:c,value:r,required:u,name:s??C,onChange:ye,onKeyDown:be,onCompositionStart:()=>VF(G),onCompositionEnd:()=>WF(G),onBlur:je,onFocus:Se,onPaste:v,className:te,autoComplete:DQe.includes(e??"")?e:"off","data-test-id":j,"data-1p-ignore":D,enterKeyHint:A,min:U,max:$,spellCheck:V,maxLength:a}),pe,fe]})}),w&&o.jsx("div",{className:"mt-sm flex justify-end",children:w})]})});Xr.displayName="Input";function W5(e){const t=new Date;return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function i2(e){return!isNaN(new Date(e).getTime())}function FQe(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function UQe(e){const t=new Date;return t.setDate(t.getDate()-1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function hhe(e){const t=new Date;return t.setDate(t.getDate()+1),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function x_(e,t,n={numeric:"auto",style:"long"},r=1e3*60*60*24){if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return"";const a=s.getTime()-Date.now(),i=Math.abs(a);return i<=1e3?"":i<1e3*60?e.formatRelativeTime(Math.round(a/1e3),"second",n):i<1e3*60*60?e.formatRelativeTime(Math.round(a/(1e3*60)),"minute",n):i<r&&i<1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60)),"hour",n):i<r&&i>=1e3*60*60*24?e.formatRelativeTime(Math.round(a/(1e3*60*60*24)),"day",n):e.formatDate(s,{month:"short",day:"numeric",year:"numeric"})}const BQe=({reason:e})=>{const{session:t}=mt(),n=t?.user?.email??"",{isStudent:r}=V5({email:n??"",reason:e}),{value:s,loading:a}=Qs({flag:"spring-2025-referrals-promo",defaultValue:!0});return{isSpringReferralPromoEnabled:!a&&s,isStudent:r}},ghe=/(\[\d{1,3}\])/,$Qe=/(\[\d{1,3},\s*\{ts:.*\}\])/,H5=new RegExp(ghe.source+"|"+$Qe.source),$sn=(e,t)=>{if(H5.test(e))if(ghe.test(e)){const n=parseInt(e.substring(1,e.length-1))-1,r=t?.[n]??null;return r||void 0}else{const n=e.indexOf(","),r=parseInt(e.substring(1,n))-1,s=t?.[r]??null;if(!s)return;if(!s.url){ne.warn("[parseCitation] web_result has no url",{web_result:s});return}return s.url=VQe(s.url,e),s}},VQe=(e,t)=>{const n=e.split("&")[0],r=t.indexOf(":");if(r===-1)return n;const s=t.indexOf("}"),a=t.substring(r+1,s);return n+`&t=${a}`};function I1(e,t){const n={};for(const r of e){const s=t(r);Object.prototype.hasOwnProperty.call(n,s)?n[s].push(r):Object.defineProperty(n,s,{value:[r],configurable:!0,enumerable:!0,writable:!0})}return n}const Dl={web:"web",scholar:"scholar",social:"social",edgar:"edgar",org:"org",my_files:"my_files",crunchbase:"crunchbase",factset:"factset",google_drive:"google_drive",onedrive:"onedrive",sharepoint:"sharepoint",wiley:"wiley",dropbox:"dropbox",box:"box",notion:"notion",notion_mcp:"notion_mcp",outlook:"outlook",linear:"linear",linear_alt:"linear_alt",slack:"slack",github_mcp_direct:"github_mcp_direct",asana_mcp_direct:"asana_mcp_direct",asana_mcp_merge:"asana_mcp_merge",atlassian_mcp_direct:"atlassian_mcp_direct",slack_direct:"slack_direct",jira_mcp_merge:"jira_mcp_merge",confluence_mcp_merge:"confluence_mcp_merge",microsoft_teams_mcp_merge:"microsoft_teams_mcp_merge",wiley_mcp_cashmere:"wiley_mcp_cashmere",cbinsights_mcp_cashmere:"cbinsights_mcp_cashmere",pitchbook_mcp_cashmere:"pitchbook_mcp_cashmere",statista_mcp_cashmere:"statista_mcp_cashmere",space:"space",gcal:"gcal",sports:"sports",zoom:"zoom"},WQe=Object.values(Dl),HQe=["linear","linear_alt","slack","notion_mcp","github_mcp_direct","asana_mcp_direct","asana_mcp_merge","atlassian_mcp_direct","slack_direct","jira_mcp_merge","confluence_mcp_merge","microsoft_teams_mcp_merge","wiley_mcp_cashmere","cbinsights_mcp_cashmere","pitchbook_mcp_cashmere","statista_mcp_cashmere"],gp=e=>WQe.includes(e),CE=e=>Array.isArray(e)?e.filter(gp):[],zQe=e=>Array.isArray(e)?e.filter(gp).filter(t=>HQe.includes(t)):[],yhe=e=>e?.entity_group_type!=="CALENDAR_ACTION"&&!!e?.entities?.length,xhe=e=>{const t=!!e?.multiple_choice_quiz_card_block?.questions?.length,n=!!e?.flash_card_section_block;return t||n};class cn{static hasAnswer(t,n){const r=!!(t.chunks&&t.chunks.length>0),s=!!(t.answer&&t.answer.length>0),a=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.chunks?.length||u.entity_list_block?.chunks?.length),i=!!t.structured_answer_blocks?.some(u=>xhe(u.inline_entity_block)),l=!!t.structured_answer_blocks?.some(u=>u.markdown_block?.answer?.length||u.entity_list_block?.text?.length||yhe(u.entity_group_block)),c=!!t.structured_answer_blocks?.some(u=>u.inline_entity_block?.media_block?.generated_media_items?.some(f=>f.status==="COMPLETED"))&&n;return r||s||a||l||c||i}static isPerplexityMessage(t){return t?.blocks!==void 0}static isPerplexityArticleSection(t){return t?.message!==void 0}static isArticleSection(t){return t?.article_info!==void 0}static mergePlaceBlocks(t){const n=t.filter(i=>!!i);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(i=>({review_summary:i.review_summary})))}static mergeMediaBlocks(t){const n=t.filter(s=>!!s);return n.length?{media_items:n.flatMap(s=>s?.media_items||[]),generated_media_items:n[n.length-1].generated_media_items||[],progress:n[n.length-1].progress}:void 0}static mergeShoppingBlocks(t){const n=t.filter(i=>!!i);if(!n.length)return;const[r,...s]=n;return Object.assign({},r,...s.map(i=>({review_summary:i.review_summary})))}static mergeEntityListItems(t){const n=I1(t,s=>s.index),r=[];return Object.values(n).forEach(s=>{const a=s[0];r.push({title:a.title,text:s.map(({text:i})=>i).join(""),chunks:s.flatMap(i=>i.chunks),chunk_starting_offset:0,index:a.index,awaiting_backfill:s.reduce((i,l)=>l.awaiting_backfill??i,!1),place_block:cn.mergePlaceBlocks(s.map(i=>i.place_block)),shopping_block:cn.mergeShoppingBlocks(s.map(i=>i.shopping_block))})}),r}static parseStructuredAnswerBlocks(t){if(!this.isPerplexityMessage(t)||!t.structured_answer_block_usages?.length)return null;const n=I1(t.blocks,s=>s.intended_usage),r=[];return t.structured_answer_block_usages.forEach(s=>{const a=n[s];if(!a)return;const{markdownBlocks:i,placeBlocks:l,mediaBlocks:c,shoppingPreviewBlocks:u,entityListBlocks:f,jobsPreviewBlocks:m,hotelsPreviewBlocks:p,placesPreviewBlocks:h,knowledgeCardsBlocks:g,calendarEventBlocks:y,entityGroupBlocks:x,entityGroupV2Blocks:v,assetsPreviewBlocks:b,assetsInlineBlocks:_,shoppingBlocks:w,proPerkOfferBlocks:C,placeholderBlocks:S,financeInlineBlocks:E,multipleChoiceQuizCardBlocks:k,flashCardSectionBlocks:M}=a.reduce((j,R)=>(R.markdown_block?j.markdownBlocks.push(R.markdown_block):R.inline_entity_block?.place_block?j.placeBlocks.push(R.inline_entity_block.place_block):R.inline_entity_block?.media_block?j.mediaBlocks.push(R.inline_entity_block.media_block):R.inline_entity_block?.shopping_preview_block?j.shoppingPreviewBlocks.push(R.inline_entity_block.shopping_preview_block):R.entity_list_block?j.entityListBlocks.push(R.entity_list_block):R.inline_entity_block?.jobs_preview_block?j.jobsPreviewBlocks.push(R.inline_entity_block.jobs_preview_block):R.inline_entity_block?.hotels_preview_block?j.hotelsPreviewBlocks.push(R.inline_entity_block.hotels_preview_block):R.inline_entity_block?.places_preview_block?j.placesPreviewBlocks.push(R.inline_entity_block.places_preview_block):R.inline_entity_block?.knowledge_card_block?j.knowledgeCardsBlocks.push(R.inline_entity_block.knowledge_card_block):R.inline_entity_block?.calendar_event_block?j.calendarEventBlocks.push(R.inline_entity_block.calendar_event_block):R.entity_group_block?j.entityGroupBlocks.push(R.entity_group_block):R.entity_group_v2_block?j.entityGroupV2Blocks.push(R.entity_group_v2_block):R.inline_entity_block?.assets_preview_block?j.assetsPreviewBlocks.push(R.inline_entity_block.assets_preview_block):R.inline_entity_block?.assets_inline_block?j.assetsInlineBlocks.push(R.inline_entity_block.assets_inline_block):R.inline_entity_block?.shopping_block?j.shoppingBlocks.push(R.inline_entity_block?.shopping_block):R.pro_perk_offer_block?j.proPerkOfferBlocks.push(R.pro_perk_offer_block):R.inline_entity_block?.finance_inline_block?j.financeInlineBlocks.push(R.inline_entity_block.finance_inline_block):R.inline_entity_block?.placeholder_block?j.placeholderBlocks.push(R.inline_entity_block?.placeholder_block):R.inline_entity_block?.multiple_choice_quiz_card_block?j.multipleChoiceQuizCardBlocks.push(R.inline_entity_block.multiple_choice_quiz_card_block):R.inline_entity_block?.flash_card_section_block&&j.flashCardSectionBlocks.push(R.inline_entity_block.flash_card_section_block),j),{markdownBlocks:[],placeBlocks:[],mediaBlocks:[],shoppingPreviewBlocks:[],entityListBlocks:[],jobsPreviewBlocks:[],hotelsPreviewBlocks:[],placesPreviewBlocks:[],knowledgeCardsBlocks:[],calendarEventBlocks:[],entityGroupBlocks:[],entityGroupV2Blocks:[],assetsPreviewBlocks:[],assetsInlineBlocks:[],shoppingBlocks:[],proPerkOfferBlocks:[],placeholderBlocks:[],financeInlineBlocks:[],multipleChoiceQuizCardBlocks:[],flashCardSectionBlocks:[]});if(i.length){const j=i[i.length-1];r.push({intended_usage:s,markdown_block:{answer:i.map(R=>R.answer).join(""),chunks:i.flatMap(R=>R.chunks),chunk_starting_offset:0,progress:j.progress,media_items:i.flatMap(R=>R.media_items||[]),inline_token_annotations:i.flatMap(R=>R.inline_token_annotations||[])}})}if(u.length&&r.push({intended_usage:s,inline_entity_block:{shopping_preview_block:u[u.length-1]}}),m.length&&r.push({intended_usage:s,inline_entity_block:{jobs_preview_block:m[m.length-1]}}),p.length&&r.push({intended_usage:s,inline_entity_block:{hotels_preview_block:p[p.length-1]}}),h.length&&r.push({intended_usage:s,inline_entity_block:{places_preview_block:h[h.length-1]}}),l.length&&r.push({intended_usage:s,inline_entity_block:{place_block:cn.mergePlaceBlocks(l)}}),c.length&&r.push({intended_usage:s,inline_entity_block:{media_block:cn.mergeMediaBlocks(c)}}),f.length&&r.push({intended_usage:s,entity_list_block:{text:f.map(({text:j})=>j).join(""),chunks:f.flatMap(j=>j.chunks),chunk_starting_offset:0,entities:cn.mergeEntityListItems(f.flatMap(j=>j.entities))}}),g.length&&r.push({intended_usage:s,inline_entity_block:{knowledge_card_block:g[g.length-1]}}),y.length&&r.push({intended_usage:s,inline_entity_block:{calendar_event_block:y[y.length-1]}}),x.length&&r.push({intended_usage:s,entity_group_block:{entities:x[x.length-1].entities,entity_group_type:x[x.length-1].entity_group_type}}),v.length){const j=v[v.length-1];r.push({intended_usage:s,entity_group_v2_block:j})}b.length&&r.push({intended_usage:s,inline_entity_block:{assets_preview_block:b[b.length-1]}}),_.length&&r.push({intended_usage:s,inline_entity_block:{assets_inline_block:_[_.length-1]}}),w.length&&r.push({intended_usage:s,inline_entity_block:{shopping_block:this.mergeShoppingBlocks(w)}}),C.length&&r.push({intended_usage:s,pro_perk_offer_block:C[C.length-1]}),E.length&&r.push({intended_usage:s,inline_entity_block:{finance_inline_block:E[E.length-1]}}),S.length&&r.push({intended_usage:s,inline_entity_block:{placeholder_block:S[S.length-1]}}),k.length&&r.push({intended_usage:s,inline_entity_block:{multiple_choice_quiz_card_block:k[k.length-1]}}),M.length&&r.push({intended_usage:s,inline_entity_block:{flash_card_section_block:M[M.length-1]}})}),r}static parseAskTextField(t){if(!this.isPerplexityMessage(t))return this.legacyParseBackendOutputStr(t.text);if(!t.blocks?.length)return null;const n={answer:""};n.structured_answer_blocks=cn.parseStructuredAnswerBlocks(t);const r=t.blocks?.filter(a=>a.intended_usage==="ask_text"&&a.markdown_block).map(a=>a.markdown_block);if(r.length>0){const a=r.flatMap(i=>i.chunks);n.chunks=a,n.answer=a.join("")}const s=t.blocks?.filter(a=>a.intended_usage==="web_results"&&a.web_result_block).flatMap(a=>a.web_result_block.web_results);return s.length>0&&(n.web_results=s),n}static legacyParseBackendOutputStr(t){let n=null;try{if(n=JSON.parse(t??""),Array.isArray(n)){const r=n[n.length-1];r.step_type=="FINAL"&&r?.content?.answer!=null&&(n=JSON.parse(r.content.answer))}}catch{return null}return n}static isStatusPending(t){return t.status?.toLowerCase()===Qn.PENDING.toLowerCase()}static isStatusBlocked(t){return t.status?.toLowerCase()===Qn.BLOCKED.toLowerCase()}static isStatusFailed(t){return t.status?.toLowerCase()===Qn.FAILED.toLowerCase()}static isStatusCompleted(t){return t.status?.toLowerCase()===Qn.COMPLETED.toLowerCase()}static isCopilotMode(t){return t.mode?.toLowerCase()===ag.COPILOT.toLowerCase()}static isArticleMode(t){return this.isPerplexityMessage(t)?t?.mode===ag.ARTICLE:this.isPerplexityArticleSection(t)?t?.message?.mode===ag.ARTICLE:t?.mode==="article"}static isSourceListType(t){return Array.isArray(t)&&t.every(n=>Object.values(Dl).includes(n))}static hasUnspecifiedSelectionStatus(t){return t?.selection_status===Ki.SELECTION_STATUS_UNSPECIFIED}static hasMultipleSiblingEntries(t,n){return n?t.filter(s=>s.side_by_side_metadata?.sibling_uuid===n).length>1:!1}static extractClarifyingQuestion(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{if(r.intended_usage==="clarification_responses"&&r?.clarification_responses_block){const s=r.clarification_responses_block?.responses;if(s?.length>0&&s[0]){const a=s[0];a?.input_hint?.hint&&n.push(a.input_hint.hint)}}}),n[0]??null}static extractClarificationResponses(t){if(!t?.length)return null;const n=[];return t.forEach(r=>{r.intended_usage==="pro_search_steps"&&r.plan_block?.steps&&r.plan_block.steps.forEach(s=>{s.clarifying_questions_output_content?.clarification&&n.push(s.clarifying_questions_output_content.clarification)})}),n}}const vhe=e=>{const t=cn.legacyParseBackendOutputStr(e);return t?t.answer.replace(H5,""):null};function GQe(e,t){return e.startsWith("http")?e:t?`/discover/${t}/${e}`:`/page/${e}`}const qQe=e=>{const t=e.mode==="article"?"/page":"/search";return{title:e.title??"",preview:vhe(e.first_answer),threadCount:e.query_count,lastUpdated:e.last_query_datetime,href:`${t}/${e.slug}`,rwToken:e.read_write_token,focus:e.search_focus??"internet",entryUUID:e.uuid,contextUUID:e.context_uuid,copilot:e.mode==="copilot",socialInfo:e.social_info,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,featuredImage:e?.featured_images?.[0]?.image??null,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,threadAccess:e.thread_access,collection:e.collection,mode:e.mode,expiry:e.expiry_time,source:e?.source??null,displayModel:e.display_model,slug:e.slug}},Vsn=(e,t)=>({title:e.title??"",summary:e.summary??"",description:e.description??"",href:GQe(e.slug,t),backendUUID:e.uuid,collectionUUID:e.collection?.uuid??null,authorImage:e.author_image??null,authorUsername:e.author_username??null,featuredImage:e?.featured_images?.[0]?.image??null,collection:e.collection,socialInfo:e.social_info,feedbackState:e.feedback_state,supportedFeedbacks:e.supported_feedbacks,accessLevel:e.access??e.thread_access,preview:e.description.replace(H5,""),offset:e.hero_offset,entryUUID:e.uuid,rwToken:e.read_write_token,lastUpdated:e.last_query_datetime,threadAccess:e.access,thumbnailImage:e?.featured_images?.[0]?.thumbnail??null,contextUUID:e.context_uuid,webResults:e.web_results_preview,feedUUID:e.feed_uuid}),Wsn={gpt4_limit:"gpt4Limit",gpt4_total:"gpt4Total",opus_limit:"opusLimit",pages_limit:"pagesLimit",upload_limit:"uploadLimit",article_image_upload_limit:"articleImageUploadLimit",max_files_per_user:"maxFilesPerUser",max_files_per_repository:"maxFilesPerRepository",default_image_generation_model:"defaultImageGenerationModel",query_count:"queryCount",query_count_copilot:"queryCountCopilot",query_count_mobile:"queryCountMobile",has_ai_profile:"hasAiProfile",referral_code:"referralCode",referral_num_success:"referralNumSuccess",referral_num_coupons:"referralNumCoupons",disable_training:"disableTraining",is_sidebar_collapsed:"isSidebarCollapsed",is_sidebar_pinned:"isSidebarPinned",sidebar_hidden_hubs:"sidebarHiddenHubs",subscription_tier:"subscriptionTier",create_limit:"createLimit",notif_status:"notifStatus",email_status:"emailStatus",allow_article_creation:"allowArticleCreation",is_verified:"isVerified"};function KQe(e){return e||{connectors:[]}}const sX=e=>({hasLoadedSettings:!0,gpt4Limit:e?.gpt4_limit??0,gpt4Total:e?.gpt4_total??0,pplxAlphaLimit:e?.pplx_alpha_limit??0,pplxBetaLimit:e?.pplx_beta_limit??0,pagesLimit:e?.pages_limit??0,uploadLimit:e?.upload_limit,defaultImageGenerationModel:e?.default_image_generation_model??"default",articleImageUploadLimit:e?.article_image_upload_limit??0,maxFilesPerUser:e?.max_files_per_user??0,maxFilesPerRepository:e?.max_files_per_repository??0,queryCount:e?.query_count??0,queryCountCopilot:e?.query_count_copilot??0,queryCountMobile:e?.query_count_mobile??0,hasAiProfile:e?.has_ai_profile??!1,referralCode:e?.referral_code??"",referralNumSuccess:e?.referral_num_success??0,referralNumCoupons:e?.referral_num_coupons??0,disableTraining:e?.disable_training??!1,isSidebarCollapsed:e?.is_sidebar_collapsed??!1,isSidebarPinned:e?.is_sidebar_pinned??!1,sidebarHiddenHubs:e?.sidebar_hidden_hubs??[],subscriptionTier:e?.subscription_tier??e?.subscription_tier??"null",stripeStatus:e?.stripe_status??"none",revenuecatStatus:e?.revenuecat_status??"none",revenuecatSource:e?.revenuecat_source??"none",createLimit:e?.create_limit??0,notifStatus:e?.notif_status??"daily",emailStatus:e?.email_status??"daily",hasDataRetentionWarning:e?.has_data_retention_warning??!1,allowArticleCreation:e?.allow_article_creation??!1,isVerified:e?.is_verified??!1,connectors:KQe(e?.connectors),connectorLimits:e?.connector_limits??{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}});function YQe(e,t){return e?e.place_widget_block&&t.place_widget_block?{...t,place_widget_block:{...e.place_widget_block,review_summary:t.place_widget_block.review_summary}}:e.shopping_widget_block&&t.shopping_widget_block?{...t,shopping_widget_block:{...e.shopping_widget_block,review_summary:t.shopping_widget_block.review_summary}}:t:t}var KP;(function(e){e.SAVE_PROFILE="save_profile",e.DELETE_PROFILE="delete_profile",e.TOGGLE_DISABLED="toggle_disabled"})(KP||(KP={}));const QQe=async({profileName:e,reason:t})=>{try{const{error:n,data:r}=await re.GET("/rest/auth/get_special_profile",t,{params:{query:{profile_name:e}},timeoutMs:1500,numRetries:1});if(n||!r)throw new we("API_CLIENTS_ERROR",{message:`Failed to get special profile ${e}`,cause:n});return{unlimitedProSearch:!!r.unlimited_pro_search,maxModelSelection:!!r.max_model_selection,unlimitedResearch:!!r.unlimited_research,fileUpload:!!r.file_upload}}catch(n){return ne.error(n),{unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1}}},z5=async({reason:e})=>{try{const{error:t,data:n}=await re.GET("/rest/user/subscription/refresh",e,{timeoutMs:Pe(),headers:{"X-Perplexity-CSRF-Protection":"1"}});if(t)throw new we("API_CLIENTS_ERROR",{message:"Failed to refresh subscription status",cause:t});return n}catch(t){return ne.error(t),null}},bhe={has_profile:!1,disabled:!1,bio:"",location:"",response_language:"",location_lng:"",location_lat:"",use_memory:!1,use_search_history:!1,language:""},XQe=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await re.GET("/rest/user/get_user_ai_profile",t,{timeoutMs:1500,numRetries:Du,headers:e});if(n||!r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get user profile",cause:n});return r}catch(n){return ne.error(n),bhe}},ZQe=async({headers:e,reason:t})=>{try{const{error:n,data:r}=await re.GET("/rest/user/settings",t,{timeoutMs:1500,numRetries:Du,headers:e});if(n||!r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get user settings",cause:n});return sX(r)}catch(n){return ne.error(n),sX({})}},Hsn=async({amount:e,headers:t,reason:n})=>{try{const{error:r,data:s}=await re.GET("/rest/shopping/user-discount-offer",n,{params:{query:{amount_micros:e}},headers:t});if(r||!s)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch user discount offer",cause:r});return s}catch(r){return ne.error(r),{}}},zsn=async({action:e,location:t,response_language:n,bio:r,location_lat:s,location_lng:a,use_memory:i,use_search_history:l,reason:c})=>{const u={...t!==void 0&&{location:t},...n!==void 0&&{response_language:n},...r!==void 0&&{bio:r},...s!==void 0&&{location_lat:s},...a!==void 0&&{location_lng:a},...i!==void 0&&{use_memory:i},...l!==void 0&&{use_search_history:l},version:pl},{error:f,data:m}=await re.POST("/rest/user/save_user_ai_profile",c,{body:{action:e,updated_profile:u},timeoutMs:Pe(),numRetries:1});if(f)throw new we("API_CLIENTS_ERROR",{message:"Failed to save user ai profile",cause:f});return m},aX=async({type:e,value:t,reason:n})=>{const r=e==="memory"?{use_memory:t}:{use_search_history:t},{error:s,data:a}=await re.POST("/rest/user/save_user_ai_profile",n,{timeoutMs:Pe(),numRetries:1,headers:{"content-type":"application/json"},body:{action:KP.SAVE_PROFILE,updated_profile:{...r,version:pl}}});if(s)throw new we("API_CLIENTS_ERROR",{message:"Failed to update personal search settings",cause:s});return a},Gsn=async({settings:e,reason:t})=>{const{error:n}=await re.PUT("/rest/user/save-settings",t,{body:{updated_settings:e},timeoutMs:Pe(),numRetries:1});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to save user settings",cause:n});return{status:"success"}},JQe=async({reason:e})=>{const{error:t,data:n}=await re.GET("/rest/user/previous-subscription",e,{timeoutMs:3e3,numRetries:1});if(t)throw new we("API_CLIENTS_ERROR",{message:"Failed to get user previous subscription",cause:t});return n},qsn=async({reason:e})=>{const{error:t,data:n}=await re.GET("/rest/user/carrier-billing-subscription",e,{timeoutMs:Pe({productionMs:2e3})});if(t)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch carrier billing subscription status",cause:t});return n},eXe=async({filters:e,skipToken:t,reason:n})=>{const{error:r,data:s}=await re.POST("/rest/connectors/sharepoint/sites",n,{body:{filters:e,skip_token:t},timeoutMs:Pe({productionMs:500}),numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch sharepoint sites",cause:r});return{sites:s.sites,skipToken:s.skip_token}},Ksn=async({orgId:e,reason:t,tokenName:n})=>{const{error:r,data:s}=await re.POST("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",t,{params:{path:{api_org_id:e}},body:{token_name:n},timeoutMs:5e3});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to generate user api key v2",cause:r});return s},Ysn=async({orgId:e,authToken:t,reason:n})=>{const{error:r,data:s}=await re.DELETE("/rest/pplx-api/v2/groups/{api_org_id}/api-keys",n,{params:{path:{api_org_id:e}},body:{auth_token:t},timeoutMs:5e3});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to delete user api key v2",cause:r});return s},tXe=async({reason:e})=>{try{const{error:t,data:n}=await re.GET("/rest/auth/check_government_request_origin",e,{timeoutMs:1500,numRetries:Du});if(t||!n)throw new we("API_CLIENTS_ERROR",{message:"Failed to check government origin",cause:t});return{isGovernmentRequestOrigin:n.is_government_request_origin}}catch(t){return ne.error(t),{isGovernmentRequestOrigin:!1}}},Qsn=async({reason:e})=>{try{const{error:t,data:n}=await re.GET("/rest/user/site-instructions",e,{timeoutMs:1500,numRetries:Du});if(t||!n)throw new we("API_CLIENTS_ERROR",{message:"Failed to get user site instructions",cause:t});return n}catch(t){return ne.error(t),{site_instructions:{}}}},Xsn=async({siteInstructions:e,reason:t})=>{const{error:n,data:r}=await re.PUT("/rest/user/site-instructions",t,{body:{site_instructions:e},timeoutMs:Pe(),numRetries:1});if(n||!r)throw new we("API_CLIENTS_ERROR",{message:"Failed to save user site instructions",cause:n});return r},Zsn=async({site:e,reason:t})=>{const{error:n,data:r}=await re.POST("/rest/user/site-instructions/{site}/reset",t,{params:{path:{site:e}},timeoutMs:Pe(),numRetries:1});if(n||!r)throw new we("API_CLIENTS_ERROR",{message:`Failed to reset site instruction for ${e}`,cause:n});return r},nXe=()=>{const e=Sn("isCollapsed"),{device:{isWindowsApp:t}}=Pt();return e===null?t:e==="true"},wo=({enabled:e,reason:t,refetchOnMount:n})=>{const{locale:r}=Z(),s=r?{"accept-language":r}:{},a=async()=>ZQe({headers:s,reason:t}),i=et(),l=nXe(),{data:c,refetch:u,isLoading:f,isStale:m}=Ue({enabled:i?typeof e>"u"?!0:e:!1,queryKey:A5(),queryFn:a,networkMode:"always",refetchOnMount:n});return d.useEffect(()=>{c&&A9e({queryCount:c.queryCount,queryCountCopilot:c.queryCountCopilot,queryCountMobile:c.queryCountMobile})},[c]),{...c?{...c,isSidebarCollapsed:l}:{hasLoadedSettings:!1,gpt4Limit:void 0,gpt4Total:void 0,pplxAlphaLimit:void 0,pplxBetaLimit:void 0,pagesLimit:0,uploadLimit:void 0,articleImageUploadLimit:0,defaultImageGenerationModel:"default",queryCount:void 0,queryCountCopilot:void 0,queryCountMobile:void 0,hasAiProfile:!1,referralCode:void 0,referralNumSuccess:void 0,referralNumCoupons:void 0,disableTraining:!1,defaultCopilot:!1,isSidebarCollapsed:l,subscriptionTier:void 0,stripeStatus:"none",revenuecatStatus:"none",revenuecatSource:"none",createLimit:0,notifStatus:void 0,emailStatus:void 0,hasDataRetentionWarning:!1,allowArticleCreation:!1,connectors:{connectors:ce},connectorLimits:{global_file_count:void 0,repo_type_limits:{},max_file_size_mb:void 0,max_attachment_file_size_mb:void 0}},refetch:u,isLoading:f,isStale:m}},Os=()=>{const[e,t]=I.useState(!1);return I.useEffect(()=>{t(!0)},[]),e},_he=({reason:e})=>{const t=In(),n=Os(),r=Lt(),{isSpringReferralPromoEnabled:s,isStudent:a}=BQe({reason:e});return!!(!t.isStudentReferralBannerDismissed&&n&&r==="/"&&s&&a)},whe=I.memo(()=>{const e="floating-referral-invite",t=In(),n=Z(),[r,s]=d.useState(!1),{referralCode:a}=wo({reason:e}),i=_he({reason:e}),{trackEvent:l,trackEventOnce:c}=Te();d.useEffect(()=>{c("referral widget shown",{})},[c]),d.useEffect(()=>{let m;return r&&(l("referral link copied",{referralLink:eX(a)}),m=setTimeout(()=>{s(!1)},2e3)),()=>{clearTimeout(m)}},[r,a,l]);const u=d.useCallback(()=>{t.actions.setIsStudentReferralBannerDismissed(!0),l("referral widget dismissed",{})},[t.actions,l]),f=d.useCallback(()=>{navigator.clipboard.writeText(eX(a)),s(!0)},[a]);return a?o.jsx(Lfe,{shouldShow:!!i,imageSrc:"https://r2cdn.perplexity.ai/academic/student-referrals.jpg",imageAlt:n.formatMessage({id:"Tj0vv4yWUn",defaultMessage:"Student Referral Banner"}),title:n.formatMessage({id:"7vIfWIoBX6",defaultMessage:"Get up to 24 months of free Pro"}),description:vQe(n),primaryAction:o.jsxs("div",{className:"gap-xs flex flex-row",children:[o.jsx(me,{variant:"common",text:n.formatMessage({id:"TdTXXf940t",defaultMessage:"Learn more"}),href:"/referrals",size:"small"}),o.jsx(me,{variant:"primaryGhost",icon:r?Hle:Am,text:r?"Copied":"Copy your link",onClick:f,size:"small"})]}),onDismiss:u,iconXDismiss:!0}):null});whe.displayName="FloatingReferralInvite";var f6="focusScope.autoFocusOnMount",m6="focusScope.autoFocusOnUnmount",oX={bubbles:!1,cancelable:!0},rXe="FocusScope",G5=d.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...i}=e,[l,c]=d.useState(null),u=ma(s),f=ma(a),m=d.useRef(null),p=En(t,y=>c(y)),h=d.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;d.useEffect(()=>{if(r){let y=function(_){if(h.paused||!l)return;const w=_.target;l.contains(w)?m.current=w:sd(m.current,{select:!0})},x=function(_){if(h.paused||!l)return;const w=_.relatedTarget;w!==null&&(l.contains(w)||sd(m.current,{select:!0}))},v=function(_){if(document.activeElement===document.body)for(const C of _)C.removedNodes.length>0&&sd(l)};document.addEventListener("focusin",y),document.addEventListener("focusout",x);const b=new MutationObserver(v);return l&&b.observe(l,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",x),b.disconnect()}}},[r,l,h.paused]),d.useEffect(()=>{if(l){lX.add(h);const y=document.activeElement;if(!l.contains(y)){const v=new CustomEvent(f6,oX);l.addEventListener(f6,u),l.dispatchEvent(v),v.defaultPrevented||(sXe(cXe(Che(l)),{select:!0}),document.activeElement===y&&sd(l))}return()=>{l.removeEventListener(f6,u),setTimeout(()=>{const v=new CustomEvent(m6,oX);l.addEventListener(m6,f),l.dispatchEvent(v),v.defaultPrevented||sd(y??document.body,{select:!0}),l.removeEventListener(m6,f),lX.remove(h)},0)}}},[l,u,f,h]);const g=d.useCallback(y=>{if(!n&&!r||h.paused)return;const x=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,v=document.activeElement;if(x&&v){const b=y.currentTarget,[_,w]=aXe(b);_&&w?!y.shiftKey&&v===w?(y.preventDefault(),n&&sd(_,{select:!0})):y.shiftKey&&v===_&&(y.preventDefault(),n&&sd(w,{select:!0})):v===b&&y.preventDefault()}},[n,r,h.paused]);return o.jsx(Xt.div,{tabIndex:-1,...i,ref:p,onKeyDown:g})});G5.displayName=rXe;function sXe(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(sd(r,{select:t}),document.activeElement!==n)return}function aXe(e){const t=Che(e),n=iX(t,e),r=iX(t.reverse(),e);return[n,r]}function Che(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function iX(e,t){for(const n of e)if(!oXe(n,{upTo:t}))return n}function oXe(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function iXe(e){return e instanceof HTMLInputElement&&"select"in e}function sd(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&iXe(e)&&t&&e.select()}}var lX=lXe();function lXe(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=cX(e,t),e.unshift(t)},remove(t){e=cX(e,t),e[0]?.resume()}}}function cX(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function cXe(e){return e.filter(t=>t.tagName!=="A")}var p6=0;function HF(){d.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??uX()),document.body.insertAdjacentElement("beforeend",e[1]??uX()),p6++,()=>{p6===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),p6--}},[])}function uX(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var N0="right-scroll-bar-position",j0="width-before-scroll-bar",uXe="with-scroll-bars-hidden",dXe="--removed-body-scroll-bar-size";function h6(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function fXe(e,t){var n=d.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var mXe=typeof window<"u"?d.useLayoutEffect:d.useEffect,dX=new WeakMap;function She(e,t){var n=fXe(null,function(r){return e.forEach(function(s){return h6(s,r)})});return mXe(function(){var r=dX.get(n);if(r){var s=new Set(r),a=new Set(e),i=n.current;s.forEach(function(l){a.has(l)||h6(l,null)}),a.forEach(function(l){s.has(l)||h6(l,i)})}dX.set(n,e)},[e]),n}function pXe(e){return e}function hXe(e,t){t===void 0&&(t=pXe);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var i=t(a,r);return n.push(i),function(){n=n.filter(function(l){return l!==i})}},assignSyncMedium:function(a){for(r=!0;n.length;){var i=n;n=[],i.forEach(a)}n={push:function(l){return a(l)},filter:function(){return n}}},assignMedium:function(a){r=!0;var i=[];if(n.length){var l=n;n=[],l.forEach(a),i=n}var c=function(){var f=i;i=[],f.forEach(a)},u=function(){return Promise.resolve().then(c)};u(),n={push:function(f){i.push(f),u()},filter:function(f){return i=i.filter(f),n}}}};return s}function Ehe(e){e===void 0&&(e={});var t=hXe(null);return t.options=br({async:!0,ssr:!1},e),t}var Mhe=function(e){var t=e.sideCar,n=MO(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return d.createElement(r,br({},n))};Mhe.isSideCarExport=!0;function khe(e,t){return e.useMedium(t),Mhe}var The=Ehe(),g6=function(){},q5=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:g6,onWheelCapture:g6,onTouchMoveCapture:g6}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,b=e.gapMode,_=MO(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=She([n,t]),S=br(br({},_),s);return d.createElement(d.Fragment,null,f&&d.createElement(w,{sideCar:The,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?d.cloneElement(d.Children.only(l),br(br({},S),{ref:C})):d.createElement(v,br({},S,{className:c,ref:C}),l))});q5.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};q5.classNames={fullWidth:j0,zeroRight:N0};var gXe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function yXe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=gXe();return t&&e.setAttribute("nonce",t),e}function xXe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function vXe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var bXe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=yXe())&&(xXe(t,n),vXe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},_Xe=function(){var e=bXe();return function(t,n){d.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},zF=function(){var e=_Xe(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},wXe={left:0,top:0,right:0,gap:0},y6=function(e){return parseInt(e||"",10)||0},CXe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[y6(n),y6(r),y6(s)]},SXe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return wXe;var t=CXe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},EXe=zF(),og="data-scroll-locked",MXe=function(e,t,n,r){var s=e.left,a=e.top,i=e.right,l=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(uXe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(l,"px ").concat(r,`;
  }
  body[`).concat(og,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(i,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(l,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(l,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(N0,` {
    right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(j0,` {
    margin-right: `).concat(l,"px ").concat(r,`;
  }
  
  .`).concat(N0," .").concat(N0,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(j0," .").concat(j0,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(og,`] {
    `).concat(dXe,": ").concat(l,`px;
  }
`)},fX=function(){var e=parseInt(document.body.getAttribute(og)||"0",10);return isFinite(e)?e:0},kXe=function(){d.useEffect(function(){return document.body.setAttribute(og,(fX()+1).toString()),function(){var e=fX()-1;e<=0?document.body.removeAttribute(og):document.body.setAttribute(og,e.toString())}},[])},Nhe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;kXe();var a=d.useMemo(function(){return SXe(s)},[s]);return d.createElement(EXe,{styles:MXe(a,!t,s,n?"":"!important")})},YP=!1;if(typeof window<"u")try{var CC=Object.defineProperty({},"passive",{get:function(){return YP=!0,!0}});window.addEventListener("test",CC,CC),window.removeEventListener("test",CC,CC)}catch{YP=!1}var Yp=YP?{passive:!1}:!1,TXe=function(e){return e.tagName==="TEXTAREA"},jhe=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!TXe(e)&&n[t]==="visible")},NXe=function(e){return jhe(e,"overflowY")},jXe=function(e){return jhe(e,"overflowX")},mX=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=Ahe(e,r);if(s){var a=Ihe(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},AXe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},IXe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},Ahe=function(e,t){return e==="v"?NXe(t):jXe(t)},Ihe=function(e,t){return e==="v"?AXe(t):IXe(t)},RXe=function(e,t){return e==="h"&&t==="rtl"?-1:1},PXe=function(e,t,n,r,s){var a=RXe(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,f=i>0,m=0,p=0;do{var h=Ihe(e,l),g=h[0],y=h[1],x=h[2],v=y-x-a*g;(g||v)&&Ahe(e,l)&&(m+=v,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(m)<1||!f&&Math.abs(p)<1)&&(u=!0),u},SC=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},pX=function(e){return[e.deltaX,e.deltaY]},hX=function(e){return e&&"current"in e?e.current:e},LXe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},OXe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},DXe=0,Qp=[];function FXe(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(DXe++)[0],a=d.useState(zF)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Ze([e.lockRef.current],(e.shards||[]).map(hX),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var v=SC(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-v[0],w="deltaY"in y?y.deltaY:b[1]-v[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var k=mX(E,S);if(!k)return!0;if(k?C=E:(C=E==="v"?"h":"v",k=mX(E,S)),!k)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var M=r.current||C;return PXe(M,x,y,M==="h"?_:w)},[]),c=d.useCallback(function(y){var x=y;if(!(!Qp.length||Qp[Qp.length-1]!==a)){var v="deltaY"in x?pX(x):SC(x),b=t.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&LXe(C.delta,v)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var _=(i.current.shards||[]).map(hX).filter(Boolean).filter(function(C){return C.contains(x.target)}),w=_.length>0?l(x,_[0]):!i.current.noIsolation;w&&x.cancelable&&x.preventDefault()}}},[]),u=d.useCallback(function(y,x,v,b){var _={name:y,delta:x,target:v,should:b,shadowParent:UXe(v)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),f=d.useCallback(function(y){n.current=SC(y),r.current=void 0},[]),m=d.useCallback(function(y){u(y.type,pX(y),y.target,l(y,e.lockRef.current))},[]),p=d.useCallback(function(y){u(y.type,SC(y),y.target,l(y,e.lockRef.current))},[]);d.useEffect(function(){return Qp.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Yp),document.addEventListener("touchmove",c,Yp),document.addEventListener("touchstart",f,Yp),function(){Qp=Qp.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Yp),document.removeEventListener("touchmove",c,Yp),document.removeEventListener("touchstart",f,Yp)}},[]);var h=e.removeScrollBar,g=e.inert;return d.createElement(d.Fragment,null,g?d.createElement(a,{styles:OXe(s)}):null,h?d.createElement(Nhe,{gapMode:e.gapMode}):null)}function UXe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const BXe=khe(The,FXe);var K5=d.forwardRef(function(e,t){return d.createElement(q5,br({},e,{ref:t,sideCar:BXe}))});K5.classNames=q5.classNames;var $Xe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},Xp=new WeakMap,EC=new WeakMap,MC={},x6=0,Rhe=function(e){return e&&(e.host||Rhe(e.parentNode))},VXe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=Rhe(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},WXe=function(e,t,n,r){var s=VXe(t,Array.isArray(e)?e:[e]);MC[n]||(MC[n]=new WeakMap);var a=MC[n],i=[],l=new Set,c=new Set(s),u=function(m){!m||l.has(m)||(l.add(m),u(m.parentNode))};s.forEach(u);var f=function(m){!m||c.has(m)||Array.prototype.forEach.call(m.children,function(p){if(l.has(p))f(p);else try{var h=p.getAttribute(r),g=h!==null&&h!=="false",y=(Xp.get(p)||0)+1,x=(a.get(p)||0)+1;Xp.set(p,y),a.set(p,x),i.push(p),y===1&&g&&EC.set(p,!0),x===1&&p.setAttribute(n,"true"),g||p.setAttribute(r,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return f(t),l.clear(),x6++,function(){i.forEach(function(m){var p=Xp.get(m)-1,h=a.get(m)-1;Xp.set(m,p),a.set(m,h),p||(EC.has(m)||m.removeAttribute(r),EC.delete(m)),h||m.removeAttribute(n)}),x6--,x6||(Xp=new WeakMap,Xp=new WeakMap,EC=new WeakMap,MC={})}},GF=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=$Xe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),WXe(r,s,n,"aria-hidden")):function(){return null}},Y5="Dialog",[Phe,Jsn]=Ca(Y5),[HXe,xl]=Phe(Y5),qF=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!0}=e,l=d.useRef(null),c=d.useRef(null),[u,f]=Ni({prop:r,defaultProp:s??!1,onChange:a,caller:Y5});return o.jsx(HXe,{scope:t,triggerRef:l,contentRef:c,contentId:fo(),titleId:fo(),descriptionId:fo(),open:u,onOpenChange:f,onOpenToggle:d.useCallback(()=>f(m=>!m),[f]),modal:i,children:n})};qF.displayName=Y5;var Lhe="DialogTrigger",Ohe=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=xl(Lhe,n),a=En(t,s.triggerRef);return o.jsx(Xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":eU(s.open),...r,ref:a,onClick:it(e.onClick,s.onOpenToggle)})});Ohe.displayName=Lhe;var KF="DialogPortal",[zXe,Dhe]=Phe(KF,{forceMount:void 0}),YF=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,a=xl(KF,t);return o.jsx(zXe,{scope:t,forceMount:n,children:d.Children.map(r,i=>o.jsx(es,{present:n||a.open,children:o.jsx(Ky,{asChild:!0,container:s,children:i})}))})};YF.displayName=KF;var SE="DialogOverlay",QF=d.forwardRef((e,t)=>{const n=Dhe(SE,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=xl(SE,e.__scopeDialog);return a.modal?o.jsx(es,{present:r||a.open,children:o.jsx(qXe,{...s,ref:t})}):null});QF.displayName=SE;var GXe=Rg("DialogOverlay.RemoveScroll"),qXe=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=xl(SE,n);return o.jsx(K5,{as:GXe,allowPinchZoom:!0,shards:[s.contentRef],children:o.jsx(Xt.div,{"data-state":eU(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Fm="DialogContent",XF=d.forwardRef((e,t)=>{const n=Dhe(Fm,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=xl(Fm,e.__scopeDialog);return o.jsx(es,{present:r||a.open,children:a.modal?o.jsx(KXe,{...s,ref:t}):o.jsx(YXe,{...s,ref:t})})});XF.displayName=Fm;var KXe=d.forwardRef((e,t)=>{const n=xl(Fm,e.__scopeDialog),r=d.useRef(null),s=En(t,n.contentRef,r);return d.useEffect(()=>{const a=r.current;if(a)return GF(a)},[]),o.jsx(Fhe,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(e.onCloseAutoFocus,a=>{a.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:it(e.onPointerDownOutside,a=>{const i=a.detail.originalEvent,l=i.button===0&&i.ctrlKey===!0;(i.button===2||l)&&a.preventDefault()}),onFocusOutside:it(e.onFocusOutside,a=>a.preventDefault())})}),YXe=d.forwardRef((e,t)=>{const n=xl(Fm,e.__scopeDialog),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(Fhe,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;n.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),Fhe=d.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...i}=e,l=xl(Fm,n),c=d.useRef(null),u=En(t,c);return HF(),o.jsxs(o.Fragment,{children:[o.jsx(G5,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Gy,{role:"dialog",id:l.contentId,"aria-describedby":l.descriptionId,"aria-labelledby":l.titleId,"data-state":eU(l.open),...i,ref:u,onDismiss:()=>l.onOpenChange(!1)})}),o.jsxs(o.Fragment,{children:[o.jsx(QXe,{titleId:l.titleId}),o.jsx(ZXe,{contentRef:c,descriptionId:l.descriptionId})]})]})}),ZF="DialogTitle",JF=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=xl(ZF,n);return o.jsx(Xt.h2,{id:s.titleId,...r,ref:t})});JF.displayName=ZF;var Uhe="DialogDescription",Bhe=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=xl(Uhe,n);return o.jsx(Xt.p,{id:s.descriptionId,...r,ref:t})});Bhe.displayName=Uhe;var $he="DialogClose",Vhe=d.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=xl($he,n);return o.jsx(Xt.button,{type:"button",...r,ref:t,onClick:it(e.onClick,()=>s.onOpenChange(!1))})});Vhe.displayName=$he;function eU(e){return e?"open":"closed"}var Whe="DialogTitleWarning",[ean,Hhe]=GVe(Whe,{contentName:Fm,titleName:ZF,docsSlug:"dialog"}),QXe=({titleId:e})=>{const t=Hhe(Whe),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return d.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},XXe="DialogDescriptionWarning",ZXe=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${Hhe(XXe).contentName}}.`;return d.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},v_=qF,zhe=Ohe,b_=YF,Q5=QF,tx=XF,X5=JF,tU=Bhe,JXe=Vhe;const Ghe=I.memo(({closeCookieConsentPopup:e})=>{const{$t:t}=Z(),{locale:n}=Z(),r=d.useCallback(()=>{sn(h1,"true",{expires:365}),window.dispatchEvent(new CustomEvent("consentChange",{detail:{consent:"ALLOW"}})),e()},[e]),s=d.useCallback(()=>{sn(h1,"false",{expires:365}),e()},[e]);return o.jsx(v_,{modal:!1,open:!0,children:o.jsxs(b_,{children:[o.jsxs(PD,{children:[o.jsx(X5,{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})}),o.jsx(tU,{children:o.jsx(ie,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our privacy policy.',id:"VCSjJ9FhMu"})})]}),o.jsx(tx,{children:o.jsxs(z,{id:"cookie-consent",variant:"background",className:"bottom-sm inset-x-sm p-md fixed max-w-md rounded-lg border shadow-sm md:left-auto",children:[o.jsxs(F,{variant:"baseSemi",className:"gap-x-sm flex items-center",children:[o.jsx(de,{icon:f7e,size:"md"}),o.jsx("span",{children:t({defaultMessage:"Cookie Policy",id:"cA0kQYQQMJ"})})]}),o.jsx(F,{variant:"small",color:"light",className:"mb-4 text-sm",children:o.jsx(ie,{defaultMessage:'We use cookies to enhance your experience. By clicking "Accept All Cookies" or selecting "Necessary Cookies", you agree to our <link>privacy policy</link>.',id:"ADl1M4/ost",values:{link:a=>o.jsx(qe,{href:Ol[n]?.privacyPolicy||Ol.default.privacyPolicy,className:"underline hover:no-underline",target:"_blank",children:a})}})}),o.jsxs(z,{className:"gap-x-sm flex items-center",children:[o.jsx(me,{size:"small",variant:"primary",onClick:s,text:t({defaultMessage:"Necessary Cookies",id:"Wzr9ADvGqD"})}),o.jsx(me,{size:"small",onClick:r,text:t({defaultMessage:"Accept All Cookies",id:"JyT5uF/dGC"})})]})]})})]})})});Ghe.displayName="CookieConsentPopup";var le;(function(e){e.DEFAULT="turbo",e.PPLX_PRO_UPGRADED="pplx_pro_upgraded",e.PRO="pplx_pro",e.SONAR="experimental",e.GPT_4o="gpt4o",e.GPT_4_1="gpt41",e.GPT_5="gpt5",e.CLAUDE_2="claude2",e.GEMINI_2_FLASH="gemini2flash",e.GROK="grok",e.PPLX_REASONING="pplx_reasoning",e.CLAUDE_3_7_SONNET_THINKING="claude37sonnetthinking",e.O4_MINI="o4mini",e.O3_PRO="o3pro",e.GPT_5_THINKING="gpt5_thinking",e.GPT5_PRO="gpt5_pro",e.CLAUDE_4_0_OPUS="claude40opus",e.CLAUDE_4_1_OPUS="claude41opus",e.CLAUDE_4_0_OPUS_THINKING="claude40opusthinking",e.CLAUDE_4_1_OPUS_THINKING="claude41opusthinking",e.CLAUDE_4_5_SONNET="claude45sonnet",e.CLAUDE_4_5_SONNET_THINKING="claude45sonnetthinking",e.GROK_4="grok4",e.GROK_4_NON_THINKING="grok4nonthinking",e.PPLX_SONAR_INTERNAL_TESTING="pplx_sonar_internal_testing",e.PPLX_SONAR_INTERNAL_TESTING_V2="pplx_sonar_internal_testing_v2",e.ALPHA="pplx_alpha",e.O3_RESEARCH="o3_research",e.O3_PRO_RESEARCH="o3pro_research",e.CLAUDE40SONNET_RESEARCH="claude40sonnet_research",e.CLAUDE40SONNETTHINKING_RESEARCH="claude40sonnetthinking_research",e.CLAUDE40OPUS_RESEARCH="claude40opus_research",e.CLAUDE40OPUSTHINKING_RESEARCH="claude40opusthinking_research",e.BETA="pplx_beta",e.O3_LABS="o3_labs",e.O3_PRO_LABS="o3pro_labs",e.CLAUDE40SONNETTHINKING_LABS="claude40sonnetthinking_labs",e.CLAUDE40OPUSTHINKING_LABS="claude40opusthinking_labs",e.STUDY="pplx_study"})(le||(le={}));var oa;(function(e){e.GPT_4="gpt4",e.CLAUDE_3_OPUS="claude3opus",e.CLAUDE_3_5_HAIKU="claude35haiku",e.GEMINI="gemini",e.LLAMA_X_LARGE="llama_x_large",e.MISTRAL="mistral",e.GROK2="grok2",e.COPILOT="copilot",e.O3_MINI="o3mini",e.CLAUDE_OMBRE_EAP="claude_ombre_eap",e.CLAUDE_LACE_EAP="claude_lace_eap",e.R1="r1",e.GAMMA="pplx_gamma",e.O3="o3"})(oa||(oa={}));var ue;(function(e){e.SEARCH="search",e.RESEARCH="research",e.STUDIO="studio",e.STUDY="study"})(ue||(ue={}));var Ln;(function(e){e.PRO="pro",e.MAX="max"})(Ln||(Ln={}));const vo={[le.DEFAULT]:ue.SEARCH,[le.PPLX_PRO_UPGRADED]:ue.SEARCH,[le.PRO]:ue.SEARCH,[le.SONAR]:ue.SEARCH,[le.CLAUDE_2]:ue.SEARCH,[le.CLAUDE_4_5_SONNET]:ue.SEARCH,[le.CLAUDE_4_5_SONNET_THINKING]:ue.SEARCH,[le.GPT_4o]:ue.SEARCH,[le.GPT_4_1]:ue.SEARCH,[le.GPT_5]:ue.SEARCH,[le.GEMINI_2_FLASH]:ue.SEARCH,[le.GROK]:ue.SEARCH,[le.PPLX_REASONING]:ue.SEARCH,[le.O3_PRO]:ue.SEARCH,[le.CLAUDE_3_7_SONNET_THINKING]:ue.SEARCH,[le.CLAUDE_4_0_OPUS]:ue.SEARCH,[le.CLAUDE_4_0_OPUS_THINKING]:ue.SEARCH,[le.CLAUDE_4_1_OPUS]:ue.SEARCH,[le.CLAUDE_4_1_OPUS_THINKING]:ue.SEARCH,[le.GROK_4]:ue.SEARCH,[le.GROK_4_NON_THINKING]:ue.SEARCH,[le.GPT_5_THINKING]:ue.SEARCH,[le.GPT5_PRO]:ue.SEARCH,[le.PPLX_SONAR_INTERNAL_TESTING]:ue.SEARCH,[le.PPLX_SONAR_INTERNAL_TESTING_V2]:ue.SEARCH,[le.ALPHA]:ue.RESEARCH,[le.O4_MINI]:ue.RESEARCH,[le.O3_RESEARCH]:ue.RESEARCH,[le.O3_PRO_RESEARCH]:ue.RESEARCH,[le.CLAUDE40SONNET_RESEARCH]:ue.RESEARCH,[le.CLAUDE40SONNETTHINKING_RESEARCH]:ue.RESEARCH,[le.CLAUDE40OPUS_RESEARCH]:ue.RESEARCH,[le.CLAUDE40OPUSTHINKING_RESEARCH]:ue.RESEARCH,[le.BETA]:ue.STUDIO,[le.O3_LABS]:ue.STUDIO,[le.O3_PRO_LABS]:ue.STUDIO,[le.CLAUDE40SONNETTHINKING_LABS]:ue.STUDIO,[le.CLAUDE40OPUSTHINKING_LABS]:ue.STUDIO,[le.STUDY]:ue.STUDY},nU=e=>vo[e]||ue.SEARCH,Wg={[ue.SEARCH]:m7e,[ue.RESEARCH]:Uk,[ue.STUDIO]:Fb,[ue.STUDY]:TO},eZe=e=>Wg[e],qhe=e=>eZe(nU(e)),tZe={...Wg,[ue.SEARCH]:Br},nZe={auto:{model:le.DEFAULT,mode:ue.SEARCH},reasoning:{model:le.PPLX_REASONING,mode:ue.SEARCH},deep_research:{model:le.ALPHA,mode:ue.RESEARCH}},Khe=e=>typeof e=="string"&&e in vo,rU=e=>Khe(e)?e:void 0,gX=Object.values(ue),Yhe=[{search_model:le.SONAR,has_new_tag:!1,subscription_tier:Ln.PRO},{search_model:le.CLAUDE_4_5_SONNET,has_new_tag:!0,subscription_tier:Ln.PRO},{search_model:le.CLAUDE_4_5_SONNET_THINKING,has_new_tag:!0,is_reasoning_model:!0,subscription_tier:Ln.PRO},{search_model:le.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Ln.MAX},{search_model:le.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:Ln.PRO},{search_model:le.GPT_5,has_new_tag:!1,subscription_tier:Ln.PRO},{search_model:le.GPT_5_THINKING,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Ln.PRO},{search_model:le.O3_PRO,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Ln.MAX},{search_model:le.GROK_4,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Ln.PRO}],tan=async({reason:e})=>{const{data:t,error:n}=await re.GET("/rest/enterprise/previous-subscription",e,{timeoutMs:Pe({productionMs:2e3})});if(n)throw new we("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t},rZe=async({source:e,locale:t,headers:n,reason:r})=>{try{const{data:s,error:a}=await re.POST("/rest/enterprise/customer-portal",r,{body:{origin:e,locale:t},timeoutMs:7500,headers:{...n,"Content-Type":"application/json"}});if(a)throw new we("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});if(s.status!=="success")throw new we("API_CLIENTS_ERROR",{cause:a,details:{reason:r}});return s.url}catch(s){return ne.error(s),null}},sZe=async({interval:e,subscriptionTier:t,origin:n,locale:r,reason:s})=>{const a=v5(),i=d_();try{const{data:l,error:c}=await re.POST("/rest/enterprise/checkout-session",s,{body:{referral_code:null,discount_code:null,origin:n,tier:e,locale:r,visitor_id:i,subscription_tier:t},timeoutMs:3500,headers:{...a?{"Screen-Dimensions":a}:{}}});if(c)throw new we("API_CLIENTS_ERROR",{cause:c,details:{reason:s}});return l}catch(l){return ne.error(l),null}},aZe=async({interval:e,subscriptionTier:t,origin:n,locale:r,collectionMethod:s,billingAddress:a,reason:i})=>{const l=v5();try{const{data:c,error:u}=await re.POST("/rest/enterprise/subscription",i,{body:{collection_method:s,origin:n,locale:r,subscription_interval:e,subscription_tier:t,billing_address:a},timeoutMs:1e4,headers:{...l?{"Screen-Dimensions":l}:{}}});if(u)throw new we("API_CLIENTS_ERROR",{cause:u,details:{reason:i}});return c}catch(c){return ne.error(c),null}};var R1;(function(e){e.ON_PLATFORM="on_platform",e.OFF_PLATFORM="off_platform"})(R1||(R1={}));const oZe=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/enterprise/user/pending-invitation",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n.pending_invitation??null}catch(n){return ne.error(n),null}},Z5=async({headers:e,reason:t})=>{const n={organization:void 0,org_user:void 0,is_in_organization:!1,pending_invitation:null};try{const{data:r,error:s}=await re.GET("/rest/enterprise/user/organization",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(s)throw new we("API_CLIENTS_ERROR",{cause:s,details:{reason:t}});return r.status!=="success",r}catch(r){return ne.error(r),n}},iZe=async({inviteUUID:e,headers:t,reason:n})=>{try{const{data:r,error:s}=await re.GET("/rest/enterprise/organization/invite/{org_invite_uuid}",n,{params:{path:{org_invite_uuid:e}},headers:t,timeoutMs:Pe({productionMs:2e3}),numRetries:1}),a=s||r,i=a?.detail?{...a.detail}:a;if(i?.status!=="success")return i;const l=i?.invite?.subscription_tier??null;return{status:i?.status??"unknown",userEmail:i?.invite?.user_email??"",uuid:i?.invite?.uuid??"",orgDisplayName:i?.org_display_name??"",tncAcceptanceMethod:i?.tnc_acceptance_method??R1.ON_PLATFORM,tncAccepted:i?.tnc_accepted??!1,subscriptionTier:l}}catch(r){return ne.error(r),null}},Qhe=async({email:e,headers:t,reason:n})=>{if(!e)throw new Error("No email");const r=e.split("@"),s=r.length>=2?r[r.length-1]:null;if(!s)throw new Error(`No domain extracted from ${e}`);return lZe({domain:s,headers:t,reason:n})},lZe=async({domain:e,headers:t,reason:n})=>{try{const{data:r,error:s}=await re.GET("/rest/enterprise/organization/domain/{domain}",n,{headers:t,timeoutMs:3e3,numRetries:1,params:{path:{domain:e}},reason:n});if(s)throw new we("API_CLIENTS_ERROR",{cause:s,details:{reason:n}});if(r?.status!=="success")throw new Error("Failed to get organization from domain");return r?.organization??null}catch(r){return ne.error(`Failed to get organization from domain for ${e}`,r),null}},nan=async({headers:e,query:t,reason:n})=>{try{const r=t?.["user-limit"]??2e4,s=t?.["user-offset"]??0,a=t?.["invite-limit"]??2e4,i=t?.["invite-offset"]??0,{data:l,error:c}=await re.GET("/rest/enterprise/user/organization/users",n,{params:{query:{"user-limit":r,"user-offset":s,"invite-limit":a,"invite-offset":i}},headers:e,timeoutMs:Pe({productionMs:2e3,clientSideMs:1e4}),numRetries:1});if(c)throw new we("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});if(l.status!=="success")throw new we("API_CLIENTS_ERROR",{cause:c,details:{reason:n}});return{userList:l?.user_list??[],hasNextUserPage:l?.has_next_user_page??!1,totalUsers:l?.total_users??0,inviteList:l?.invite_list??[],hasNextInvitePage:l?.has_next_invite_page??!1,totalInvites:l?.total_invites??0}}catch(r){return ne.error("Failed to get organization users",r),null}},cZe=20,uZe=1,ran=async({page:e=uZe,limit:t=cZe,emailFilter:n,reason:r,headers:s})=>{const a=await re.GET("/rest/enterprise/user/organization/members",r,{params:{query:{page:e,limit:t,"email-filter":n??null}},timeoutMs:Pe({productionMs:5e3}),headers:s});if(a.error)throw a.error;return a.data},Xhe=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/enterprise/organization/subscription/refresh",t,{headers:e,timeoutMs:4e3});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return{subscriptionStatus:n?.subscription_status??null}}catch(n){return ne.error(n),null}},san=async({reason:e})=>{try{const{data:t,error:n}=await re.GET("/rest/enterprise/user/organization/seat-info",e,{timeoutMs:2e3});if(n)throw new we("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t}catch(t){return ne.error(t),null}};async function aan({orgUuid:e,headers:t,reason:n,prefersDark:r}){const s=await re.GET("/rest/enterprise/organization/{org_uuid}/insights/embed-url",n,{params:{path:{org_uuid:e},query:{prefersDark:r}},headers:t,timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s.error){ne.error("Failed to fetch Omni insights embed URL",{url:`/rest/enterprise/organization/${e}/insights/embed-url`,error:s.error,status:s.response.status,statusText:s.response.statusText});return}return s.data}const oan=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/enterprise/organization/premium-secure-eligibility",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ne.error(n),null}},ian=async({headers:e,reason:t})=>{try{const{data:n,error:r}=await re.POST("/rest/enterprise/organization/premium-secure-billing-update",t,{headers:{...e,"Content-Type":"application/json"},timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{reason:t}});return n}catch(n){return ne.error(n),null}},lan=async({headers:e,reason:t})=>{try{const n=await re.GET("/rest/enterprise/organization/subscription-info",t,{headers:e,timeoutMs:Pe({productionMs:2e3}),numRetries:1});if(n.error)throw n.error;return n.data}catch(n){return ne.error("Failed to get org subscription info",n),null}},Zhe=async({uuid:e,success:t,reason:n})=>{try{if((await re.POST("/rest/sse/perplexity_connector_auth_response",n,{body:{result:{tool_uuid:e,success:t}},backOffTime:100,numRetries:1,headers:{"Content-Type":"application/json"}})).data?.status!=="success")throw new Error("Failed to post perplexity connector auth response");return!0}catch(r){return ne.error("Failed to post perplexity connector auth response",r),!1}},can=async({domainUuid:e,enabled:t,reason:n})=>{const{data:r,error:s}=await re.PUT("/rest/enterprise/organization/domains/{domain_uuid}/jit-provisioning",n,{params:{path:{domain_uuid:e}},body:{enabled:t},timeoutMs:Pe({productionMs:2e3}),headers:{"Content-Type":"application/json"}});if(s)throw new we("API_CLIENTS_ERROR",{cause:s,details:{reason:n,domainUuid:e,enabled:t}});return r},Jhe=async({orgInviteUUID:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/enterprise/organization/invite/{org_invite_uuid}/accept",t,{params:{path:{org_invite_uuid:e}},timeoutMs:Pe({productionMs:2e3})});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{reason:t,orgInviteUUID:e}});return n},dZe=async({orgInviteUUID:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/enterprise/organization/invite/{org_invite_uuid}/decline",t,{params:{path:{org_invite_uuid:e}},timeoutMs:Pe({productionMs:2e3})});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{reason:t,orgInviteUUID:e}});return n},fZe={orgUser:void 0,organization:void 0,isEnterprise:!1,refetch:vn,isLoading:!1,isInitialLoading:!1,isSuccess:!1};function Hn({shouldRefetchOnMount:e=!0,forceFetch:t=!1,reason:n}){const r=et(),{data:s,refetch:a,fetchStatus:i,isLoading:l,isSuccess:c}=Ue({enabled:t||r,queryKey:Yy(),queryFn:()=>Z5({reason:n}),placeholderData:fZe,refetchOnMount:e});return d.useMemo(()=>({orgUser:s?.org_user,isAdmin:s?.org_user?.role==="ADMIN",organization:s?.organization,isEnterprise:s?.is_in_organization??!1,refetch:a,isLoading:i==="fetching",isInitialLoading:l,isSuccess:c}),[s?.is_in_organization,s?.org_user,s?.organization,i,l,c,a])}function J5({shouldRefetchOnMount:e=!0,reason:t}){const n=et(),{data:r,isFetching:s}=Ue({enabled:n,queryKey:Yy(),queryFn:()=>Z5({reason:t}),refetchOnMount:e});return d.useMemo(()=>({isEnterprise:r?.is_in_organization??!1,isFetching:s}),[r?.is_in_organization,s])}function ege({reason:e}){const t=et(),n=d.useRef(void 0),{data:r,status:s}=Ue({enabled:t,queryKey:Yy(),queryFn:()=>Z5({reason:e})}),a=d.useMemo(()=>s==="success"&&r?.organization?.uuid?(n.current=r.organization.uuid,r.organization.uuid):n.current??void 0,[r,s]);return d.useMemo(()=>({uuid:a}),[a])}function mZe({reason:e}){const{organization:t}=Hn({reason:e}),n=t?.uuid??"",r=Lt(),s=Ot(),{value:a}=jt({flag:"helper-disabled",subjectType:"user_nextauth_id",defaultValue:!1,extraAttributes:{orgUuid:n}}),i=r?.startsWith("/apps/"),l=r?.startsWith("/b/zen"),c=r?.startsWith("/b/try-assistant"),u=r?.startsWith("/b/mission-control")||r?.startsWith("/b/assistants"),f=r?.startsWith("/spaces/"),m=s.get("preview")==="1";return a||i||l||c||f||u||m}const pZe=async()=>{try{return(await re.GET("/rest/homepage-widgets/upsell","get upsells",{timeoutMs:Pe()})).data?.upsell_information??null}catch(e){return ne.error("Error getting homepage upsells",{error:e}),null}},hZe=async()=>{try{return(await re.GET("/rest/ntp/upsell/","get ntp upsells",{timeoutMs:Pe()})).data?.upsell_information??null}catch(e){return ne.error("Error getting NTP upsells",{error:e}),null}},sU=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=Ue({enabled:e,queryKey:KGe(),queryFn:pZe,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}},tge=(e,t)=>{const{value:n,loading:r}=jt({flag:"comet-mcp-enabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},gZe=(e,t)=>{const{value:n,loading:r}=Qpe({flag:"comet-mobile-classifier-timeout",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},yZe=(e,t)=>{const{value:n,loading:r}=jt({flag:"comet-sidecar-thread-per-tab",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},xZe=async({entryUUID:e,params:t,reason:n})=>{try{return(await re.POST("/rest/entry/should-show-feedback/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Pe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_feedback??!1}catch(r){return ne.error("Failed to check if should show feedback",r),!1}},vZe=async({reason:e,lastEventTimestamp:t})=>(await re.GET("/rest/entry/creation-events",e,{params:{query:{last_event_timestamp_us:t}},timeoutMs:Ht.EXTREMELY_HIGH,numRetries:1})).data?.events.map(s=>({contextUUID:s.context_uuid,entryUUID:s.entry_uuid,isPersonalIntent:s.is_personal_intent,cometIsMissionControl:s.comet_is_mission_control,timestamp:s.timestamp_us}))||[],bZe=({callback:e,reason:t})=>{let s,a=!0,i=null;return(async()=>{for(;a;)try{const c=await vZe({reason:t,lastEventTimestamp:s});if(c.length>0&&(s=Math.max(...c.map(u=>u.timestamp)),await e(c)),!a)break;await new Promise(u=>{i=setTimeout(u,500)})}catch(c){if(ne.error("Failed to poll for entry creation events",c),!a)break;await new Promise(u=>{i=setTimeout(u,2e3)})}})(),()=>{a=!1,i&&(clearTimeout(i),i=null)}},P1=async({slugOrUUID:e,headers:t,options:n,numRetries:r=0,reason:s})=>{const a="getThreadByUUID";if(!e||e==="undefined"||e==="new"){ne.log(`Tried to ${a} with bad slugOrUUID: ${e}`);return}const i=n?.withParentInfo??!1,l=n?.version??pl,c=n?.source??gme,u=n?.limit??0,f=n?.offset??0,m=n?.fromFirst??!1,p=n?.supportedBlockUseCases??[],h=n?.cursor??null;try{const g=await re.GET("/rest/thread/{entry_uuid_or_slug}",s,{params:{path:{entry_uuid_or_slug:e},query:{with_parent_info:i,with_schematized_response:!0,version:l,source:c,limit:u,offset:f,from_first:m,supported_block_use_cases:p,cursor:h}},timeoutMs:Ht.HIGH,numRetries:r,headers:t});if(!g.response.ok||!g.data||g.error)throw g.error?new Error(`Failed to ${a} for ${e}`,{cause:g.error.detail}):new Error(`Failed to ${a} for ${e}`);return g.data}catch(g){throw ne.error("Failed to get thread by uuid",g),g}},uan=async({entryUUID:e,selectedText:t,beforeContext:n,afterContext:r,callback:s,reason:a})=>{await re.SSE("/rest/sse/check-sources",a,{params:{entry_uuid_or_slug:e,selected_text:t,before_context:n,after_context:r},handlers:{message:i=>s(i)}})},dan=async({entryUUID:e,answerHelpful:t,detailedFeedback:n,reason:r})=>{try{const{error:s}=await re.POST("/rest/entry/feedback/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{answer_helpful:t??!1,feedback:n},timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s)throw new we("API_CLIENTS_ERROR",{cause:s})}catch(s){ne.error(s)}},fan=async({entryUUID:e,params:t,reason:n})=>{if(e)try{const{error:r}=await re.POST("/rest/entry/label-entry/{entry_uuid}",n,{params:{path:{entry_uuid:e}},body:t,timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{cause:r})}catch(r){ne.error(r)}},man=async({entry_uuid:e,format:t,reason:n})=>{const{data:r,error:s}=await re.POST("/rest/entry/export",n,{body:{entry_uuid:e,format:t},timeoutMs:Pe({productionMs:6e3}),numRetries:1});if(s)throw new we("API_CLIENTS_ERROR",{cause:s});return r},_Ze=async({slugOrUUID:e,reason:t})=>{const{error:n}=await re.POST("/rest/thread/request-access/{entry_uuid_or_slug}",t,{params:{path:{entry_uuid_or_slug:e}}});if(n)throw new we("API_CLIENTS_ERROR",{cause:n})},Su=async({entryUUID:e,reason:t})=>{try{const{error:n}=await re.POST("/rest/sse/perplexity_terminate",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e},timeoutMs:Pe({productionMs:5e3}),numRetries:1});return!n}catch(n){return ne.error("Failed to terminate entry",n),!1}},wZe=async({entryUUID:e,reason:t})=>{try{await re.POST("/rest/sse/perplexity_skip_search",t,{headers:{"content-type":"application/json"},body:{entry_uuid:e}})}catch(n){ne.error("Failed to skip search",n)}},CZe=async({entryUUID:e,clarification:t,reason:n})=>{try{await re.POST("/rest/sse/perplexity_clarifying_answer",n,{headers:{"content-type":"application/json"},body:{entry_uuid:e,clarification:t},timeoutMs:Pe({productionMs:5e3}),numRetries:0})}catch(r){ne.error("Failed to give clarifying answer",r)}},SZe=async({entryUUID:e,reason:t})=>{try{return(await re.POST("/rest/entry/should-show-recruitment-banner/{entry_uuid}",t,{params:{path:{entry_uuid:e}},body:void 0,timeoutMs:Pe({productionMs:500,devMs:1e3,clientSideMs:1e3}),numRetries:0})).data?.should_show_recruitment_banner??!1}catch(n){return ne.error("Failed to check if should show recruitment banner",n),!1}},L1=async({contextUUID:e,stepUUID:t,result:n,reason:r})=>{try{const{data:s,error:a}=await re.POST("/rest/sse/pro_search_step_result",r,{body:{context_uuid:e,step_uuid:t,result:n},timeoutMs:Pe({productionMs:5e3}),numRetries:0});if(a)throw new we("API_CLIENTS_ERROR",{cause:a});return s?.status==="completed"?s.should_resume:!1}catch(s){ne.error(s)}return!1},EZe=async({entryUUID:e,params:t,siblingUUID:n,reason:r})=>{const{error:s}=await re.POST("/rest/entry/set-entry-selection/{entry_uuid}",r,{params:{path:{entry_uuid:e}},body:{selection_status:t,sibling_uuid:n},timeoutMs:Pe({productionMs:5e3}),numRetries:1});if(s)throw new we("API_CLIENTS_ERROR",{cause:s})};let nge=()=>({emit(e,...t){for(let n=this.events[e]||[],r=0,s=n.length;r<s;r++)n[r](...t)},events:{},on(e,t){return(this.events[e]||=[]).push(t),()=>{this.events[e]=this.events[e]?.filter(n=>t!==n)}}});const MZe="npclhjbddhklpbnacpjloidibaggcgon",kZe="entropy-agent-extension-main";function yX({onMessage:e,extensionId:t,name:n}){let r,s;const a=()=>{r&&clearTimeout(r),r=setTimeout(c,1e3)},i=()=>{ne.warn("Disconnected. Attempting to reconnect...",{extensionId:t}),a()},l=()=>{if(s){s.onMessage.removeListener(e),s.onDisconnect.removeListener(i),clearTimeout(r);try{s.disconnect()}catch{}s=void 0}};function c(){if(l(),typeof chrome>"u"||!chrome.runtime){Ks()&&(a(),ne.error("Comet browser is missing chrome.runtime"));return}try{s=chrome.runtime.connect(t,{name:n}),s.onMessage.addListener(e),s.onDisconnect.addListener(i)}catch(u){a(),ne.error("Failed to connect to extension",{err:u,extensionId:t})}}return Ks()&&(c(),ou("web.frontend.comet_extension_connected",{extensionId:t,startTime:performance.timeOrigin,duration:performance.now()})),{sendMessage:u=>(!s&&Ks()&&ne.warn("Attempting to send message while main port is not connected",{extensionId:t}),TZe(t,u)),sendMessageToPort:u=>{if(!Ks())return()=>{};s||ne.warn("Attempting to send message to port while main port is not connected",{extensionId:t});const f=chrome.runtime.connect(t,{name:`${n}_${crypto.randomUUID()}`});return f.postMessage(u),()=>{try{f.disconnect()}catch{}}}}}async function TZe(e,t){return new Promise((n,r)=>{if(!Ks()){r(new sg("INVALID_BROWSER_ERROR"));return}if(typeof chrome>"u"||!chrome.runtime){r(new sg("MISSING_RUNTIME_ERROR",{details:{extensionId:e,messageType:typeof t=="object"&&t!==null&&"type"in t?t.type:void 0,message:t}}));return}chrome.runtime.sendMessage(e,t,s=>{if(chrome.runtime.lastError){r(new sg("RUNTIME_LAST_ERROR",{message:chrome.runtime.lastError.message,cause:chrome.runtime.lastError,details:{extensionId:e,messageType:typeof t=="object"&&t!==null&&"type"in t?t.type:void 0,message:t}}));return}n(s)})})}function xX({base64Image:e}){return new Promise((r,s)=>{const a=new Image;a.onerror=()=>s(new Error("Failed to load screenshot image")),a.onload=()=>{const i=a.width,l=a.height,c=i*l,u=c>115e4?Math.sqrt(115e4/c):i>1568?1568/i:l>1568?1568/l:1,f=Math.round(i*u),m=Math.round(l*u),p=document.createElement("canvas");p.width=f,p.height=m,p.getContext("2d")?.drawImage(a,0,0,p.width,p.height);const g=p.toDataURL("image/png").split(",")[1];r({base64Image:g})},a.src=`data:image/png;base64,${e}`,setTimeout(()=>s(new Error("Screenshot timed out")),5e3)})}function NZe({selector:e,value:t,submit:n}){let r=null;const s=window;if(s.__elementMap&&s.__elementMap[e]&&(r=s.__elementMap[e].deref()||null,r&&document.contains(r)||(delete s.__elementMap[e],r=null)),!r)return{success:!1,reason:`No element found with reference: "${e}". The element may have been removed from the page.`};if(r.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),r instanceof HTMLElement&&r.focus(),r.tagName==="SELECT"){const a=r,i=Array.from(a.options),l=i.find(c=>c.value===t||c.text===t||c.label===t||c.value.toLowerCase()===t.toLowerCase()||c.text.toLowerCase()===t.toLowerCase());if(!l)return{success:!1,reason:`No option found matching "${t}". Available options: ${i.map(c=>c.text||c.value).join(", ")}`};a.value=l.value,l.selected=!0}else if(r.tagName==="INPUT"){const a=r,i=(a.type||"text").toLowerCase();if(i==="checkbox"){const l=t==="true"||t==="1"||t==="yes"||t==="on"||t==="checked";a.checked=l}else if(i==="radio")a.checked=!0;else if(i==="range"||i==="number"){const l=parseFloat(t);if(isNaN(l))return{success:!1,reason:`Invalid number value: "${t}"`};if(i==="range"){const c=parseFloat(a.min)||0,u=parseFloat(a.max)||100;if(l<c||l>u)return{success:!1,reason:`Value ${l} is out of range [${c}, ${u}]`}}a.value=t}else if(i==="date"||i==="time"||i==="datetime-local"||i==="month"||i==="week"){if(a.value=t,!a.value)return{success:!1,reason:`Invalid ${i} format: "${t}"`}}else if(i==="color"){if(!/^#[0-9A-Fa-f]{6}$/.test(t))return{success:!1,reason:`Invalid color format: "${t}". Expected format: #RRGGBB`};a.value=t}else{if(i==="file")return{success:!1,reason:"File inputs cannot be set programmatically for security reasons"};a.value=t}}else if(r.tagName==="TEXTAREA")r.value=t;else if(r instanceof HTMLElement&&r.isContentEditable)r.innerText=t;else return{success:!1,reason:"not editable"};if(r.dispatchEvent(new Event("input",{bubbles:!0})),r.dispatchEvent(new Event("change",{bubbles:!0})),n){let a=null;"closest"in r&&(a=r.closest("form")),!a&&(r instanceof HTMLInputElement||r instanceof HTMLTextAreaElement)&&(a=r.form),a?.requestSubmit?.()??a?.submit?.()}return{success:!0}}function jZe({x:e,y:t}){const n=document.createElement("div");n.style.cssText=`
        position: fixed;
        left: ${e-20}px;
        top: ${t-20}px;
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background-color: rgba(66, 133, 244, 0.6);
        z-index: 2147483647;
        pointer-events: none;
        transform: scale(0);
        transition: transform 0.3s ease-out, opacity 0.3s ease-out;
        opacity: 1;
      `,document.body.appendChild(n),setTimeout(()=>n.style.transform="scale(1)",10),setTimeout(()=>{n.style.opacity="0",setTimeout(()=>n.remove(),300)},400)}function AZe({x:e,y:t,direction:n,amount:r}){const s=(r||3)*40,a=n??"DOWN",i=a==="UP"||a==="LEFT"?-1:1,l=a==="LEFT"||a==="RIGHT"?"x":"y",c=l==="x"?s*i:0,u=l==="y"?s*i:0,f=document.elementFromPoint(e,t),m=f||document.body,p=new WheelEvent("wheel",{bubbles:!0,cancelable:!0,view:window,clientX:e,clientY:t,deltaX:c,deltaY:u,deltaMode:WheelEvent.DOM_DELTA_PIXEL});if(m.dispatchEvent(p)&&!p.defaultPrevented){let g=window;if(f){let y=f;for(;y;){const x=window.getComputedStyle(y);if(l==="y"&&(x.overflowY==="auto"||x.overflowY==="scroll")||l==="x"&&(x.overflowX==="auto"||x.overflowX==="scroll")){const b=y;if(l==="y"&&b.scrollHeight>b.clientHeight||l==="x"&&b.scrollWidth>b.clientWidth){g=y;break}}y=y.parentElement}}g===window?window.scrollBy({left:c,top:u,behavior:"auto"}):g.scrollBy({left:c,top:u,behavior:"auto"})}return{success:!0,message:`Scrolled ${a.toLowerCase()} by ${r??3} ticks at (${e}, ${t})`}}function IZe({url:e}){window.location.href=e}function RZe({x:e,y:t,button:n,clickCount:r}){const s=document.elementFromPoint(e,t);if(!s)return{success:!1,reason:"not found"};if(s instanceof HTMLElement&&s.offsetParent!==null){s.scrollIntoView({behavior:"auto",block:"center",inline:"center"});const a=n==="right"?2:n==="middle"?1:0,i=r??1,l={bubbles:!0,cancelable:!0,view:window,clientX:e,clientY:t,button:a,buttons:a===0?1:a===2?2:4,detail:i};return s.dispatchEvent(new MouseEvent("mousemove",l)),s.dispatchEvent(new MouseEvent("mousedown",l)),s.dispatchEvent(new MouseEvent("mouseup",l)),s.dispatchEvent(new MouseEvent("click",{...l,detail:i})),i>=2&&s.dispatchEvent(new MouseEvent("dblclick",{...l,detail:i})),a===2&&s.dispatchEvent(new MouseEvent("contextmenu",l)),{success:!0,outerHTML:s.outerHTML,text:s.innerText,tag:s.tagName}}return{success:!1,reason:s?"invisible":"not found"}}function PZe({value:e,submit:t}){const n=document.activeElement;if(!n)return{success:!1,reason:"not found"};n.scrollIntoView({behavior:"auto",block:"center",inline:"center"}),n instanceof HTMLElement&&n.focus();const r=n instanceof HTMLInputElement||n instanceof HTMLTextAreaElement,s=n instanceof HTMLElement&&n.isContentEditable;if(!r&&!s)return{success:!1,reason:"not editable"};let a="";r?a=n.value:s&&(a=n.innerText);const i=new InputEvent("beforeinput",{data:e,inputType:a?"insertReplacementText":"insertText",bubbles:!0,cancelable:!0});if(n.dispatchEvent(i),i.defaultPrevented)return{success:!1,reason:"beforeinput event was prevented"};if(r?n.value=e:s&&(n.innerText=e),n.dispatchEvent(new InputEvent("input",{data:e,inputType:a?"insertReplacementText":"insertText",bubbles:!0,cancelable:!1})),n.dispatchEvent(new Event("change",{bubbles:!0})),t){let l=null;"closest"in n&&(l=n.closest("form")),r&&(l=n.form),l?.requestSubmit?.()??l?.submit?.()}return{success:!0}}function LZe({startX:e,startY:t,endX:n,endY:r}){const s=document.elementFromPoint(e,t);if(!s)return{success:!1,reason:"start element not found"};const a=new MouseEvent("mousedown",{bubbles:!0,cancelable:!0,view:window,clientX:e,clientY:t});s.dispatchEvent(a);const i=new MouseEvent("mousemove",{bubbles:!0,cancelable:!0,view:window,clientX:n,clientY:r});document.dispatchEvent(i);const l=document.elementFromPoint(n,r),c=new MouseEvent("mouseup",{bubbles:!0,cancelable:!0,view:window,clientX:n,clientY:r});return(l||document).dispatchEvent(c),{success:!0}}function OZe({key:e}){const t=document.activeElement||document.body;try{const n=e.split("+"),r=n[n.length-1],s=n.slice(0,-1),a={ctrlKey:s.includes("Control")||s.includes("ControlOrMeta"),altKey:s.includes("Alt"),shiftKey:s.includes("Shift"),metaKey:s.includes("Meta")||s.includes("ControlOrMeta")},i={Enter:{key:"Enter",code:"Enter",keyCode:13},Backspace:{key:"Backspace",code:"Backspace",keyCode:8},Delete:{key:"Delete",code:"Delete",keyCode:46},Tab:{key:"Tab",code:"Tab",keyCode:9},Escape:{key:"Escape",code:"Escape",keyCode:27},Space:{key:" ",code:"Space",keyCode:32},ArrowUp:{key:"ArrowUp",code:"ArrowUp",keyCode:38},ArrowDown:{key:"ArrowDown",code:"ArrowDown",keyCode:40},ArrowLeft:{key:"ArrowLeft",code:"ArrowLeft",keyCode:37},ArrowRight:{key:"ArrowRight",code:"ArrowRight",keyCode:39},Home:{key:"Home",code:"Home",keyCode:36},End:{key:"End",code:"End",keyCode:35},PageUp:{key:"PageUp",code:"PageUp",keyCode:33},PageDown:{key:"PageDown",code:"PageDown",keyCode:34},Insert:{key:"Insert",code:"Insert",keyCode:45},Semicolon:{key:";",code:"Semicolon",keyCode:186},Equal:{key:"=",code:"Equal",keyCode:187},Comma:{key:",",code:"Comma",keyCode:188},Minus:{key:"-",code:"Minus",keyCode:189},Period:{key:".",code:"Period",keyCode:190},Slash:{key:"/",code:"Slash",keyCode:191},Backquote:{key:"`",code:"Backquote",keyCode:192},BracketLeft:{key:"[",code:"BracketLeft",keyCode:219},Backslash:{key:"\\",code:"Backslash",keyCode:220},BracketRight:{key:"]",code:"BracketRight",keyCode:221},Quote:{key:"'",code:"Quote",keyCode:222}};let l,c,u;if(!r)return{success:!1,reason:"No key specified"};if(r.startsWith("Key")){const p=r.slice(3);l=a.shiftKey?p.toUpperCase():p.toLowerCase(),c=r,u=p.toUpperCase().charCodeAt(0)}else if(r.startsWith("Digit")){const p=r.slice(5);l=p,c=r,u=48+parseInt(p,10)}else i[r]?(l=i[r].key,c=i[r].code,u=i[r].keyCode):(l=r,c=r);const f=new KeyboardEvent("keydown",{key:l,code:c,keyCode:u,which:u,bubbles:!0,cancelable:!0,...a}),m=new KeyboardEvent("keyup",{key:l,code:c,keyCode:u,which:u,bubbles:!0,cancelable:!0,...a});if(t.dispatchEvent(f),l.length===1&&!a.ctrlKey&&!a.metaKey){const p=new InputEvent("beforeinput",{data:l,inputType:"insertText",bubbles:!0,cancelable:!0});if(t.dispatchEvent(p),!p.defaultPrevented){if(t instanceof HTMLInputElement||t instanceof HTMLTextAreaElement){const g=t.selectionStart??t.value.length,y=t.selectionEnd??t.value.length;t.value=t.value.substring(0,g)+l+t.value.substring(y),t.selectionStart=t.selectionEnd=g+1}const h=new InputEvent("input",{data:l,inputType:"insertText",bubbles:!0,cancelable:!1});t.dispatchEvent(h)}}return t.dispatchEvent(m),{success:!0}}catch(n){return{success:!1,reason:n instanceof Error?n.message:"Unknown error"}}}function DZe(){const e=window;if(e.__elementMap)return;e.__elementMap=e.__elementMap||{},e.__refCounter=e.__refCounter||0;function t(u){const f=u.getAttribute("role");if(f)return f;const m=u.tagName.toLowerCase(),p=u.getAttribute("type");return{a:"link",button:"button",input:p==="submit"||p==="button"?"button":p==="checkbox"?"checkbox":p==="radio"?"radio":p==="file"?"button":"textbox",select:"combobox",textarea:"textbox",h1:"heading",h2:"heading",h3:"heading",h4:"heading",h5:"heading",h6:"heading",img:"image",nav:"navigation",main:"main",header:"banner",footer:"contentinfo",section:"region",article:"article",aside:"complementary",form:"form",table:"table",ul:"list",ol:"list",li:"listitem",label:"label"}[m]||"generic"}function n(u){const f=u.tagName.toLowerCase();if(f==="select"){const x=u,v=x.querySelector("option[selected]")||x.options[x.selectedIndex];if(v&&v.textContent)return v.textContent.trim()}const m=u.getAttribute("aria-label");if(m&&m.trim())return m.trim();const p=u.getAttribute("placeholder");if(p&&p.trim())return p.trim();const h=u.getAttribute("title");if(h&&h.trim())return h.trim();const g=u.getAttribute("alt");if(g&&g.trim())return g.trim();if(u.id)try{const x=CSS.escape(u.id),v=document.querySelector(`label[for="${x}"]`);if(v&&v.textContent&&v.textContent.trim())return v.textContent.trim()}catch{}if(f==="input"){const x=u.getAttribute("type")||"",v=u.getAttribute("value");if(x==="submit"&&v&&v.trim())return v.trim();const b=u;if(b&&b.value.length<50&&b.value.trim())return b.value.trim()}if(["button","a","summary"].includes(f)){let x="";for(let v=0;v<u.childNodes.length;v++){const b=u.childNodes[v];b.nodeType===Node.TEXT_NODE&&(x+=b.textContent)}if(x.trim())return x.trim()}if(f.match(/^h[1-6]$/)){const x=u.textContent;if(x&&x.trim())return x.trim().substring(0,100)}if(f==="img"){const x=u.getAttribute("src");if(x)return"Image: "+x.split("/").pop()?.split("?")[0]}let y="";for(let x=0;x<u.childNodes.length;x++){const v=u.childNodes[x];v.nodeType===Node.TEXT_NODE&&(y+=v.textContent)}if(y&&y.trim()&&y.trim().length>=3){const x=y.trim();return x.length>50?x.substring(0,50)+"...":x}return""}function r(u){const f=window.getComputedStyle(u);return f.display!=="none"&&f.visibility!=="hidden"&&f.opacity!=="0"&&u.offsetWidth>0&&u.offsetHeight>0}function s(u){const f=u.tagName.toLowerCase();return!!(["a","button","input","select","textarea","details","summary"].includes(f)||u.getAttribute("onclick")!==null||u.getAttribute("tabindex")!==null||u.getAttribute("role")==="button"||u.getAttribute("role")==="link"||u.getAttribute("contenteditable")==="true")}function a(u){const f=u.tagName.toLowerCase();return!!(["h1","h2","h3","h4","h5","h6","nav","main","header","footer","section","article","aside"].includes(f)||u.getAttribute("role")!==null)}function i(u){const f=u.getAttribute("role"),m=u.tagName.toLowerCase(),p=u.className||"",h=u.id||"";return["search","form","group","toolbar","navigation"].includes(f??"")||["form","fieldset","nav"].includes(m)?!0:["search","form","menu","nav"].some(y=>h.includes(y)||p.includes(y))}function l(u,f){const m=u.tagName.toLowerCase();if(["script","style","meta","link","title","noscript"].includes(m)||u.getAttribute("aria-hidden")==="true"||!r(u))return!1;if(f.filter!=="all"){const p=u.getBoundingClientRect(),h=document.documentElement.clientWidth||window.innerWidth,g=document.documentElement.clientHeight||window.innerHeight;if(!(p.top<g&&p.bottom>0&&p.left<h&&p.right>0))return!1}if(f.filter==="interactive")return s(u);if(s(u)||a(u)||n(u).length>0)return!0;if(t(u)==="generic"&&(m==="div"||m==="span")){const p=u.id||"",h=u.className||"",g=n(u);if(g&&g.length>=3||["search","dropdown","menu","modal","dialog","popup","toolbar","sidebar","content","text"].some(v=>p.includes(v)||h.includes(v)))return!0}return i(u)}function c(u,f,m,p){if(f>15||!u||!u.tagName)return;const h=l(u,m)||f===0;if(h){const g=t(u),y=n(u);let x=null;const v=window;for(const E in v.__elementMap)if(v.__elementMap[E]?.deref()===u){x=E;break}x||(x="ref_"+ ++v.__refCounter,v.__elementMap[x]=new WeakRef(u));const b=u.getBoundingClientRect(),_=Math.round((b.left+b.width/2)*m.scaleX),w=Math.round((b.top+b.height/2)*m.scaleY);let S="  ".repeat(f)+"- "+g;if(y){let E=y.replace(/\s+/g," ").substring(0,100);E=E.replace(/"/g,'\\"'),S+=' "'+E+'"'}S+=" [ref="+x+"] (x="+_+",y="+w+")",u.id&&(S+=' id="'+u.id+'"'),u.getAttribute("href")&&(S+=' href="'+u.getAttribute("href")+'"'),u.getAttribute("type")&&(S+=' type="'+u.getAttribute("type")+'"'),u.getAttribute("placeholder")&&(S+=' placeholder="'+u.getAttribute("placeholder")+'"'),p.push(S)}if(u.children&&f<15)for(let g=0;g<u.children.length;g++)c(u.children[g],h?f+1:f,m,p)}e.__generateAccessibilityTree=function(u,f=1,m=1){try{const p=[],h={filter:u,scaleX:f,scaleY:m};document.body&&c(document.body,0,h,p);for(const y in e.__elementMap)e.__elementMap[y]?.deref()||delete e.__elementMap[y];return{pageContent:p.filter(y=>!/^\s*- generic \[ref=ref_\d+\]/.test(y)).join(`
`),viewport:{width:document.documentElement.clientWidth||window.innerWidth,height:document.documentElement.clientHeight||window.innerHeight}}}catch(p){return{error:p instanceof Error?p.message:"unhandled error",pageContent:"",viewport:{width:0,height:0}}}}}function FZe(e){return window.__generateAccessibilityTree(e.filter,e.scaleX,e.scaleY)}class UZe{deps;constructor(t){this.deps=t}async Computer(t){const n=t.tab_id;try{let r,s;switch(t.action){case"LEFT_CLICK":case"RIGHT_CLICK":case"DOUBLE_CLICK":case"TRIPLE_CLICK":{const i={x:t.coordinate[0]??0,y:t.coordinate[1]??0},l={DOUBLE_CLICK:2,TRIPLE_CLICK:3},c=await this.executeJs(n,RZe,{x:i.x,y:i.y,button:t.action==="RIGHT_CLICK"?"right":"left",clickCount:l[t.action]??1});if(await this.executeJs(n,jZe,i),!c.success)throw new Error(`Failed to click: ${c.reason}`);r=`${t.action} at (${i.x}, ${i.y})`;break}case"TYPE":{if(!t.text)throw new Error("Text is required for type action");const i=await this.executeJs(n,PZe,{value:t.text,submit:!1});if(!i.success)throw new Error(`Failed to type: ${i.reason}`);r=`Typed: ${t.text}`;break}case"SCROLL":{const i=t.coordinate[0]??0,l=t.coordinate[1]??0,c=await this.executeJs(n,AZe,{x:i,y:l,direction:t.scroll_direction,amount:t.scroll_amount});if(!c.success)throw new Error(`Failed to scroll: ${c.message}`);r=c.message??`Scrolled ${t.scroll_direction??"down"} by ${t.scroll_amount??3} ticks at (${i}, ${l})`,s=await this.deps.mobileBridge.tabs_get_screenshot({id:n}).then(u=>u.base64_image).catch(()=>{}),s&&(s=(await this.executeJs(n,xX,{base64Image:s})).base64Image);break}case"WAIT":{const i=t.duration||1;await new Promise(l=>setTimeout(l,i*1e3)),r=`Waited ${i} seconds`;break}case"SCREENSHOT":{const i=await this.deps.mobileBridge.tabs_get_screenshot({id:n});s&&(s=(await this.executeJs(n,xX,{base64Image:i.base64_image})).base64Image),r="Screenshot captured";break}case"KEY":{if(!t.text)throw new Error("Text is required for key action");const i=await this.executeJs(n,OZe,{key:t.text});if(!i.success)throw new Error(`Failed to press key: ${i.reason}`);r=`Pressed key: ${t.text}`;break}case"LEFT_CLICK_DRAG":{const i=t.start_coordinate[0]??0,l=t.start_coordinate[1]??0,c=t.coordinate[0]??0,u=t.coordinate[1]??0,f=await this.executeJs(n,LZe,{startX:i,startY:l,endX:c,endY:u});if(!f.success)throw new Error(`Failed to drag: ${f.reason}`);r=`Dragged from (${i}, ${l}) to (${c}, ${u})`;break}default:throw new Error(`Unknown action: ${t.action}`)}await new Promise(i=>setTimeout(i,50));const a=await this.getTabContext(n);return{message:r,base64_image:s,tab_context:a}}catch(r){return this.deps.logger.error("[browser_computer_use] Computer action error:",r),{tab_context:await this.getTabContext(n),error:r instanceof Error?r.message:String(r)}}}async FormInput(t){const n=t.tab_id;try{const r=await this.executeJs(n,NZe,{selector:t.ref,value:t.value,submit:!1});if(!r.success)throw new Error(`Failed to set value: ${r.reason}`);return{message:`Set value: ${t.value}`,tab_context:await this.getTabContext(n)}}catch(r){return this.deps.logger.error("[browser_computer_use] FormInput error:",r),{tab_context:await this.getTabContext(n),error:r instanceof Error?r.message:String(r)}}}async GetPageText(t){const n=t.tab_id;try{return{markdown:(await this.deps.mobileBridge.tabs_get_content({id:t.tab_id})).tab_content.markdown?.trim()??"",tab_context:await this.getTabContext(n)}}catch(r){return this.deps.logger.error("[browser_computer_use] GetPageText error:",r),{tab_context:await this.getTabContext(n),error:r instanceof Error?r.message:String(r)}}}async Navigate(t){const n=t.tab_id;try{if(t.url==="forward")return await this.executeJs(n,()=>{window.history.forward()}),{message:"Navigated forward",tab_context:await this.getTabContext(n)};if(t.url==="back")return await this.executeJs(n,()=>{window.history.back()}),{message:"Navigated back",tab_context:await this.getTabContext(n)};const r=t.url.includes("://")?t.url:`https://${t.url}`;return await this.executeJs(n,IZe,{url:r}),{message:`Navigated to ${r}`,tab_context:await this.getTabContext(n)}}catch(r){return this.deps.logger.error("[browser_computer_use] Navigate error:",r),{tab_context:await this.getTabContext(n),error:r instanceof Error?r.message:String(r)}}}async ReadPage(t){const n=t.tab_id;try{const r=t.filter==="interactive"?"interactive":"all";return await this.executeJs(n,DZe),{result:(await this.executeJs(n,FZe,{filter:r,scaleX:1,scaleY:1})).pageContent,tab_context:await this.getTabContext(n)}}catch(r){return this.deps.logger.error("[browser_computer_use] ReadPage error:",r),{tab_context:await this.getTabContext(n),error:r instanceof Error?r.message:String(r)}}}async TabsCreate(t){try{const n=await this.deps.tabsManager.addTabToTask();return{message:`Created new tab ${n.id}`,tab_id:n.id,tab_context:await this.getTabContext(n.id)}}catch(n){return this.deps.logger.error("[browser_computer_use] TabsCreate error:",n),{tab_context:await this.getTabContext(),error:n instanceof Error?n.message:String(n)}}}async TabsContext(t){return{tab_context:await this.getTabContext()}}async getTabContext(t){try{const n=await this.deps.tabsManager.getTaskTabs(),r=n.map(s=>({tab_id:s.id,title:s.title??"",url:s.url}));return{current_tab_id:t??r[0]?.tab_id??-1,executed_on_tab_id:t??r[0]?.tab_id??-1,available_tabs:r,tab_count:n.length}}catch(n){return this.deps.logger.error("[browser_computer_use] Failed to get tab context:",n),{current_tab_id:t??-1,executed_on_tab_id:t??-1,available_tabs:[],tab_count:0}}}async executeJs(t,n,...r){return(await this.deps.mobileBridge.agent_execute_js({id:t,js:`(${n.toString()})(${r.map(a=>JSON.stringify(a)).join(",")})`})).result}}class BZe{deps;tabRegistry=new Set;constructor(t){this.deps=t}async getTaskTabs(){return(await Promise.all([...this.tabRegistry.keys()].map(async t=>{const n=await this.deps.mobileBridge.tabs_get({id:t});return n.tab||this.tabRegistry.delete(t),n.tab}))).filter(t=>t!==void 0)}async addTabToTask(t="about:blank"){const n=(await this.deps.mobileBridge.tabs_create({hidden:!1,agent:!0,url:t})).tab;return this.tabRegistry.add(n.id),n}async init(t){const n=t.tab_id;if(n){const{tab:r}=await this.deps.mobileBridge.tabs_get({id:n});r&&this.tabRegistry.add(r.id)}t.start_url&&await this.addTabToTask(t.start_url)}async destroy(){[...this.tabRegistry.keys()].map(async t=>{this.tabRegistry.delete(t),await this.deps.mobileBridge.tabs_close({id:t})})}}function $Ze(...e){function t(n,...r){ne[n](...r,...e)}return{error:(...n)=>t("error",...n),warn:(...n)=>t("warn",...n),info:(...n)=>t("info",...n),debug:(...n)=>t("debug",...n),log:(...n)=>t("log",...n)}}const VZe=async(e,t)=>{let n={};try{n=JSON.parse(e.extra_headers)}catch{}const r={...n,taskId:e.uuid,uuid:e.uuid},s=$Ze(r),a=new BZe({mobileBridge:t,logger:s}),i=new UZe({mobileBridge:t,tabsManager:a,logger:s});return new WZe({payload:e,tabsManager:a,browserComputerUseToolsService:i,logger:s}).start()};class WZe{deps;socket;isCleanupInProgress=!1;constructor(t){this.deps=t}async start(){this.deps.logger.log("[agent] Starting agent task:",this.deps.payload);const t=performance.now();let n=()=>{},r=()=>{};const s=new Promise((l,c)=>{n=l,r=c}),a=this.deps.payload.base_url+"/agent";this.socket=new WebSocket(a),this.socket.onopen=n,this.socket.onerror=r,this.socket.onmessage=this.handleRpcMessage.bind(this),await s,await this.deps.tabsManager.init(this.deps.payload);const{tab_context:i}=await this.deps.browserComputerUseToolsService.TabsContext({});return this.socket.send(JSON.stringify({start_agent:{task:this.deps.payload.task,task_uuid:this.deps.payload.uuid,extension_version:"0.0.1",url:this.deps.payload.start_url,tabs_context:i,extra_headers:this.deps.payload.extra_headers,client_start_time_ms:Math.round(performance.now()-t)}})),async()=>{await this.cleanup("EXTERNAL_CLEANUP")}}async handleRpcMessage(t){const n=JSON.parse(t.data),r=n.request_id,s=a=>{this.socket?.readyState===WebSocket.OPEN?this.socket.send(JSON.stringify({rpc_response:a})):this.deps.logger.warn("[agent] Socket is not open, cannot send response:",a)};try{if(!n.method)throw new Error("No method specified in RPC request");if(n.method==="ReportTaskComplete"){this.cleanup("AGENT_TASK_COMPLETED");return}const a=n.request?JSON.parse(n.request):void 0,i=performance.now();if(this.deps.logger.log("[agent] Request",{method:n.method,request:a}),n.method in this.deps.browserComputerUseToolsService){const l=n.method,c=await this.deps.browserComputerUseToolsService[l](a);this.deps.logger.log("[agent] Response",{method:n.method,response:c,duration:Math.round(performance.now()-i)}),s({request_id:r,response:JSON.stringify(c)});return}throw this.deps.logger.error("[agent] Unknown method:",n.method),new Error(`Unknown method: ${n.method}`)}catch(a){const i=JSON.stringify({status:"error",error:`${a}`});s({request_id:r,response:i}),this.deps.logger.error("[agent] Error handling RPC message:",a,n)}}async cleanup(t){this.isCleanupInProgress||(this.isCleanupInProgress=!0,this.socket?.close(),this.deps.tabsManager.destroy(),this.deps.logger.info("[task/cleanup] Cleanup",{reason:t}))}}class HZe{requests=new Map;bridge;get isAvailable(){if(!(typeof window>"u"))return window.cometBridge!=null}constructor(){this.bridge=new Proxy({},{get:(t,n)=>r=>{const s=crypto.randomUUID(),a={request_id:s,[n]:r??{}};return new Promise((i,l)=>{this.requests.set(s,c=>{"error"in c?l(new Error(String(c.error))):i(c)}),window.cometBridge?.postMessage(JSON.stringify(a))})}}),this.startListenMessages()}startListenMessages(){window.cometBridge&&(window.cometBridge.onmessage=t=>{const n=t.data;if(n)try{const r=JSON.parse(n),s=this.requests.get(r.request_id);s?(this.requests.delete(r.request_id),s(r)):(console.warn("No callback found for requestId",r.request_id,r),ne.warn("No callback found for requestId",r.request_id,r))}catch(r){console.warn("Failed to parse bridge response",n,r),ne.warn("Failed to parse bridge response",n,r)}})}}class vX{bridge;get isAvailable(){if(!(typeof window>"u"))return window.webkit?.messageHandlers?.cometBridge!=null}constructor(){this.bridge=new Proxy({},{get:(t,n)=>async r=>{const a={request_id:crypto.randomUUID(),[n]:r??{}},i=await window.webkit?.messageHandlers?.cometBridge?.postMessage(JSON.stringify(a));if(!i)throw new Error("No response from cometBridge");return JSON.parse(i)}})}}const l2="mcp_tools_settings_v1";function zZe(){return Yo((e,t)=>({platformInfo:void 0,sidecarSourceTab:{url:"/",title:"",tabId:-1,secondaryTab:null},screenshotToolEnabled:!0,sidecarUrlById:new Map,tasksState:{},navigationResults:{},classifierResults:{},omniboxInput:{},navigationMeta:{},taskScreenshots:{},userSelection:void 0,mcpStdioServers:void 0,mcpTools:void 0,mcpDisabledServers:void 0,installedDxts:void 0,taskTabs:void 0,mcpToolsSettings:void 0,pendingTasks:new Map,actions:{setPlatformInfo:n=>{e({platformInfo:n})},setSidecarUrlById:(n,r,s)=>{const a=t().sidecarUrlById;a.set(n,{url:r,updatedAt:s??Date.now()}),e({sidecarUrlById:a})},deleteSidecarUrlById:n=>{const r=t().sidecarUrlById;r.delete(n),e({sidecarUrlById:r})},setSourceTab:n=>{let r=!0;try{const s=new URL(n.url);r=!((s.protocol==="chrome:"||s.protocol==="comet:")&&s.hostname!=="newtab")}catch{}e({sidecarSourceTab:n,screenshotToolEnabled:r})},setLastOmniboxInput:(n,r)=>{e(s=>({omniboxInput:{...s.omniboxInput,[n]:r}}))},addNavigationResults:(n,{results:r,classifierResult:s,...a})=>{r?.length&&e(i=>{const l={navigationResults:{...i.navigationResults,[n]:r}};return s&&(l.classifierResults={...i.classifierResults,[n]:s}),a&&!i.navigationMeta[n]&&(l.navigationMeta={...i.navigationMeta,[n]:a}),l})},setTaskScreenshot:(n,r)=>{e(s=>({taskScreenshots:{...s.taskScreenshots,[n]:r}}))},setTaskState:(n,r)=>{e(s=>{const a={...s.tasksState};return r===void 0?delete a[n]:a[n]={is_paused:r},{tasksState:a}})},setUserSelection:n=>{e({userSelection:n})},clearUserSelection:()=>{e({userSelection:void 0})},setMcpStdioServers:n=>{e({mcpStdioServers:n})},setMcpTools:(n,r)=>{e(s=>({mcpTools:{...s.mcpTools,[n]:r}}))},removeMcpTools:n=>{e(r=>{const s={...r.mcpTools};return delete s[n],{mcpTools:s}})},setMcpDisabledServers:n=>{e({mcpDisabledServers:n}),De.setItem("mcp_disabled_servers_v1",JSON.stringify(Array.from(n)))},setMcpToolsSettings:n=>{e({mcpToolsSettings:n}),De.setItem(l2,JSON.stringify(n))},setMcpToolEnabled:(n,r,s)=>{e(a=>{const i=a.mcpToolsSettings||{},l={...i[n]||{}},c=l[r]??{enabled:!0},u={...l,[r]:{...c,enabled:s}},f={...i,[n]:u};return De.setItem(l2,JSON.stringify(f)),{mcpToolsSettings:f}})},renameMcpServerInToolsSettings:(n,r)=>{e(s=>{const a=s.mcpToolsSettings||{};if(!a[n]||n===r)return s;const i={...a},l=a[n];return i[r]={...l},delete i[n],De.setItem(l2,JSON.stringify(i)),{mcpToolsSettings:i}})},setInstalledDxts:n=>{e({installedDxts:n})},setTaskTabs:n=>{e({taskTabs:n})},setPendingTask:(n,r)=>{e(s=>{const a=new Map(s.pendingTasks);return a.set(n,r),{pendingTasks:a}})},deletePendingTask:n=>{e(r=>{const s=new Map(r.pendingTasks);return s.delete(n),{pendingTasks:s}})},getPendingTask:n=>t().pendingTasks.get(n)}}))}const GZe="mcjlamohcooanphmebaiigheeeoplihb",qZe="streamId",KZe=Object.freeze([]);class YZe{tools;mobileProxy=new vX;isTestDebugMode=!1;platform="web";store=zZe();mainExtension;agentExtension;taskTeardowns=new Map;emitter=nge();pendingServerRename;classifierApiTimeoutMs=OF;constructor(){const t=Zo();t?.android_version&&(this.platform="android"),t?.ios_version&&(this.platform="ios"),this.mainExtension=yX({onMessage:this.handleMessage,extensionId:GZe,name:"entropy_client_context"}),this.agentExtension=yX({onMessage:this.handleAgentExtensionMessage,extensionId:MZe,name:kZe}),this.tools=QZe(this.agentExtension),this.platform==="web"?this.mainExtension.sendMessage({type:"INIT"}).then(n=>{n&&(this.isTestDebugMode=!!n.isTestDebugMode)},n=>{if(Ks())throw n}):this.mobileProxy=this.platform==="android"?new HZe:new vX,jYe()}getStore(){return this.store}getMobileProxy(){return this.mobileProxy}setClassifierApiTimeoutMs(t){this.classifierApiTimeoutMs=t}async openNewTab(t){const n=new URL(t);n.searchParams.delete("erp"),n.pathname=n.pathname.replace("/sidecar",""),await this.openTab({url:n.toString(),request_id:"openNewTab",key:"openNewTab"})}_getNavigationResults(t){return this.store.getState().navigationResults[t]??KZe}async closeSideCar(){return this.send({type:"HIDE_SIDECAR"})}async openTab(t){if(this.platform!=="web"){const s=(await this.mobileProxy?.bridge.tabs_create({url:t.url,hidden:!1})).tab;return{is_success:!0,_metadata:{time:1},result:{tab_id:s.id,url:s.url,title:s.title,last_accessed:s.last_accessed}}}return{is_success:!0,result:(await this.tools.OpenTab({key:t.key??"unknown",request_id:t.request_id??"unknown",url:t.url,tab_id:t.tabId})).tab}}async fetchMobileSearchResults(t,n){const[r,s]=await Promise.all([this.mobileProxy.bridge.fetch_navigation_search_results({query:t,stream_id:n}),LYe(t,this.classifierApiTimeoutMs).catch(a=>(ne.error("Classifier API call failed, using defaults",{error:a,query:t,streamId:n}),PYe))]);return{...r.nav_search_response,classifierResult:s}}async fetchNavigationResults(t,n){if(this.platform==="web"){const r=await this.send({type:"NAV_SEARCH",payload:{query:t,streamId:n}});if(!r.is_success)throw new Error("Failed to inject search results");return r}else return{...await this.fetchMobileSearchResults(t,n),_metadata:void 0}}async injectSearchResults(t,n,r={}){try{const s=ql(),a={streamId:n,...r};cc("web.frontend.comet_navigation_run_inject",a);const i=await this.fetchNavigationResults(t,n);if(this.store.getState().actions.addNavigationResults(n,i),this.platform!=="web"&&i.results?.length){const m=this.store.getState();Vpe({clientPayloadCacheKey:`nav-${n}`,cometBrowser:this,reason:"mobile_search_injection",navigationResults:i.results,maxChars:5e4,includeSidecar:!1,attachedTabs:[],cometState:m}).catch(p=>{ne.error("Failed to save mobile navigation results",{streamId:n,error:p})})}const c={type:i.type??"unknown",...a};s.addTiming("web.frontend.comet_navigation_search_results",c);const u=s.getAbsoluteStartTime(),f={...c,startTime:u};i.searchTime&&ou("web.frontend.comet_navigation_search_time",{duration:i.searchTime,...f}),i.classifyTime&&ou("web.frontend.comet_navigation_classify_time",{duration:i.classifyTime,...f}),i.networkingTime&&ou("web.frontend.comet_navigation_networking_time",{duration:i.networkingTime,...f}),this.platform==="web"&&i._metadata?.time&&ou("web.frontend.comet_navigation_extension_processing",{duration:i._metadata.time,...f})}catch(s){ne.error(new sg("NAV_RESULTS_INJECTION_FAILED",{details:{streamId:n},cause:s}))}}async getIsCometDefaultBrowser(t){try{const n=await this.send({type:"GET_IS_DEFAULT_BROWSER",key:t});return n.is_success?n.isDefault:null}catch{return null}}async setCometAsDefaultBrowser(t){return this.send({type:"SET_AS_DEFAULT_BROWSER",key:t})}async getDidSkipCookieImportOnboarding(t){const r=(await this.send({type:"GET_ONBOARDING_IMPORT_STATUS",key:t})).importStatus==="NOT_IMPORTED";return ne.info("[getDidSkipCookieImportOnboarding]",r),r}notifyUserStateChanged(t){this.send({type:"USER_STATE_CHANGED",payload:t}).catch(()=>{})}subscribeCometNavigate(t){const n=r=>{const s=new URL(r.detail.url);if(delete window.pplxNavIntentEvent,this.store.getState().actions.clearUserSelection(),cc("comet_navigate"),s.pathname==="/search"&&s.searchParams.has("q")&&(s.pathname="/search/new"),s.pathname==="/search/new"){const a=crypto.randomUUID(),i=r.detail.text||"",l=s.searchParams.get("q")??"";s.searchParams.set(qZe,a),this.injectSearchResults(l,a,{omnisearch:!0}),this.store.getState().actions.setLastOmniboxInput(a,i)}t({url:s})};return window.pplxNavIntentEvent&&n(window.pplxNavIntentEvent),document.addEventListener("comet-navigate",n),()=>{document.removeEventListener("comet-navigate",n)}}subscribeToCometQuery(t){const n=r=>{const s=r.detail.query;delete window.pplxCometQuery,t(s,{source:r.detail.source})};return window.pplxCometQuery&&n(window.pplxCometQuery),document.addEventListener("comet-query",n),()=>{document.removeEventListener("comet-query",n)}}getLastOmniboxInput(t){return this.store.getState().omniboxInput[t]}async searchTabs(t){if(this.platform!=="web"){const{tabs:r}=await this.mobileProxy.bridge.tabs_query();return{is_success:!0,tabs:r.map(s=>({tabId:s.id,title:s.title??"",url:s.url,isCurrent:!1,lastAccess:s.last_accessed??0,snippet:""})),_metadata:{time:1}}}return{is_success:!0,tabs:(await this.tools.SearchBrowser({queries:[],sources:["OPEN_TABS"],key:t,history_max_results:0,open_tabs_max_results:500,closed_tabs_max_results:0,request_id:t})).open_tabs_results.map(r=>({...r,tabId:r.tab_id,lastAccess:r.last_accessed}))}}async ungroupTabs(t,n,r){return{is_success:!0,tabIds:(await this.tools.UngroupTabs({group_ids:t.groupIds,tab_ids:t.tabIds,key:n,request_id:r})).ungrouped_tabs.map(a=>({id:a.tab_id,error:a.error})),groupIds:t.groupIds.map(a=>({id:a}))}}showNotification(){this.send({type:"SHOW_NOTIFICATION"}).catch(()=>{})}sendThreadStatusToMobile(t){const{status:n,streamId:r,text:s}=t;this.mobileProxy.bridge.thread_status({type:n,text:s,stream_id:r}).catch(a=>{ne.error("Failed to send thread status to mobile bridge",a)})}sendVoiceStatusToMobile(t){const{status:n,text:r}=t;this.mobileProxy.bridge.voice_status({type:n,text:r}).catch(s=>{ne.error("Failed to send voice status to mobile bridge",s)})}subscribeToMobileCommands(t){const n=r=>{t?t(r.detail):r.detail.cmd==="stop"&&r.detail.subject==="thread"?this.emitter.emit("BROWSER_TASK_STOP"):ne.warn("[comet-mobile] Unknown mobile command",r.detail.cmd)};return document.addEventListener("comet-mobile-cmd",n),()=>{document.removeEventListener("comet-mobile-cmd",n)}}setTabProgress(t){this.send({type:"SET_TAB_PROGRESS",payload:t}).catch(()=>{})}async searchTabGroups(t,n,r){return{is_success:!0,results:(await this.tools.SearchTabGroups({queries:t.queries,request_id:r,key:n})).tab_groups.map(a=>({...a,color:a.color,tabs:a.tabs.map(i=>({...i,tabId:i.tab_id,isCurrent:i.is_current_tab??!1}))}))}}showFeedbackForm(){this.send({type:"SHOW_FEEDBACK_FORM"}).catch(()=>{})}subscribeScreenshotCaptured(t){return this.emitter.on("SCREENSHOT_CAPTURED",t)}handleAgentExtensionMessage=t=>{try{Qr(t).with({type:"SCREENSHOT_CAPTURED"},async({payload:{screenshot:n}})=>{const s=await(await fetch(n)).blob(),a=new File([s],"screenshot.png",{type:s.type});ne.info("Screenshot captured"),this.emitter.emit("SCREENSHOT_CAPTURED",a)}).with({type:"BROWSER_TASK_PROGRESS_SCREENSHOT"},async({payload:{screenshot:n,taskUuid:r}})=>{this.store.getState().actions.setTaskScreenshot(r,`data:image/png;base64,${n}`)}).with({type:"BROWSER_TASK_PROGRESS"},({payload:{taskUuid:n,progress:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s?.onProgress&&s.onProgress(r),this.emitter.emit("BROWSER_TASK_PROGRESS",n,r)}).with({type:"BROWSER_TASK_COMPLETE"},({payload:{taskUuid:n,result:r}})=>{const s=this.store.getState().actions.getPendingTask(n);s&&(this.store.getState().actions.deletePendingTask(n),s.resolve(r)),this.emitter.emit("BROWSER_TASK_COMPLETE",n,r)}).with({type:"BROWSER_TASK_STOP"},({payload:n})=>{ne.info("Browser task stopped"),this.emitter.emit("BROWSER_TASK_STOP",n.entryId)}).with({type:"BROWSER_TASK_PAUSE_RESUME_FRONTEND"},({payload:n})=>{ne.info("Browser task paused/resumed"),this.store.getState().actions.setTaskState(n.task_uuid,n.is_paused)}).with({type:"AGENT_TASK_FAILURE"},({payload:{taskUuid:n,extraHeaders:r,error:s}})=>{const a=this.store.getState().actions.getPendingTask(n);a&&(this.store.getState().actions.deletePendingTask(n),a.reject(new Error(s))),HP({clientPayloadCacheKey:n,errorType:s,errorMsg:"Agent task failure."},r,"CometAdapter").catch(i=>{ne.error("Error sending tool failure",i)})}).with({type:"USER_SELECTION_CAPTURED"},({payload:{selection:n}})=>{this.store.getState().actions.setUserSelection(n)}).with({type:"MOVE_THREAD_TO_SIDECAR"},({payload:{url:n,task_tab_ids:r,entry_id:s}})=>{let a,i;s?(i=new URL(window.location.href),i.pathname="/sidecar/search/"+s,a=i.toString()):(i=new URL(n),i.pathname="/sidecar"+i.pathname,a=i.toString()),r.forEach(l=>{this.store.getState().actions.setSidecarUrlById(Vg(l,void 0),i.pathname)}),document.dispatchEvent(new CustomEvent("comet-navigate",{detail:{url:a,text:""}}))}).with({type:"GET_TASK_TABS"},({payload:{tabs:n}})=>{this.store.getState().actions.setTaskTabs(n)}).with({type:"MCP_STDIO_SERVER_CHANGED"},({payload:{serverName:n,changes:r,server:s}})=>{this.handleMcpStdioServerChanged(n,r,s)}).otherwise(n=>{ne.log("Unknown message type",n)})}catch(n){ne.error("Error parsing entropy message",n)}};async fetchOpenedTabs(){const t=await this.searchTabs("fetch_opened_tabs");return t.is_success?t.tabs.filter(n=>(n.url.startsWith("https://")||n.url.startsWith("file://"))&&!n.isCurrent).sort((n,r)=>r.lastAccess-n.lastAccess):[]}async getPersonalSuggestions(t,n){return this.send({type:"GET_PERSONAL_SUGGESTIONS",payload:t,key:n})}async getTopMostVisitedUrls(t,n){return this.send({type:"GET_TOP_MOST_VISITED_URLS",payload:t,key:n})}getQuickActions(t){return this.send({type:"GET_QUICK_ACTIONS",key:t})}async getInitialHistorySummary(t,n,r){return this.SearchBrowser({queries:[],sources:["HISTORY"],key:"initial-history-summary",request_id:t,start_time:n*24*60*60*1e3,history_max_results:r,open_tabs_max_results:r,closed_tabs_max_results:r})}async getHistorySummary(t,n=[],r=14,s=20){return this.SearchBrowser({queries:n,sources:["HISTORY"],key:t,request_id:"",start_time:r*24*60*60*1e3,history_max_results:s,open_tabs_max_results:s,closed_tabs_max_results:s})}async GetContent(t){return this.platform!=="web"?{contents:(await Promise.allSettled(t.pages.map(async r=>r.id?(await this.mobileProxy.bridge.tabs_get_content({id:r.id})).tab_content:(await this.mobileProxy.bridge.tabs_get_url_content({url:r.url})).tab_content))).map(r=>r.status==="fulfilled"?r.value:void 0).filter(r=>r!==void 0).map(r=>({html:"",id:r.id,url:r.url,title:r.title??"",og_meta:r.og_meta??{},markdown:r.markdown??""}))}:this.tools.GetContent(t)}async GetVisibleTabScreenshot(t){return this.tools.GetVisibleTabScreenshot(t)}async SearchBrowser(t){if(this.platform!=="web"){const n=t.sources.includes("HISTORY")?Promise.allSettled((t.queries.length?t.queries:[""]).map(async i=>await this.mobileProxy.bridge.history_search({text:i,max_results:t.history_max_results,start_time:t.start_time,end_time:t.end_time}))):[],[{tabs:r},s]=await Promise.all([t.sources.includes("OPEN_TABS")?this.mobileProxy.bridge.tabs_query():{tabs:[]},n]),a=s.map(i=>i.status==="fulfilled"?i.value.history_items:[]).flat().map(i=>({title:i.title??"",url:i.url,last_accessed:i.last_visit_time??Date.now(),visit_count:i.visit_count??1}));return{closed_tabs_results:[],history_results:a,open_tabs_results:r.map(i=>({tab_id:i.id,title:i.title??"",url:i.url,last_accessed:i.last_accessed??0}))}}return this.tools.SearchBrowser(t)}async GetSidecarContext(t){if(this.platform!=="web"){const r=(await this.mobileProxy.bridge.tabs_query()).tabs.sort((i,l)=>(l.last_accessed??-1)-(i.last_accessed??-1))[0];if(!r)return{content:void 0,contents:void 0};const s=(await this.mobileProxy.bridge.tabs_get_content({id:r?.id})).tab_content,a={id:s.id,html:"",markdown:s.markdown,og_meta:s.og_meta,title:s.title,url:s.url};return{content:a,contents:[a]}}return this.tools.GetSidecarContext(t)}async closeTabs(t,n,r){if(this.platform!=="web"){const{tabs:a}=await this.mobileProxy.bridge.tabs_query(),i=t.tabIds??[],l=a.filter(c=>i.includes(c.id));return l.forEach(c=>{this.mobileProxy.bridge.tabs_close({id:c.id})}),{is_success:!0,result:l.map(c=>({id:c.id,url:c.url,title:c.title??""}))}}return{is_success:!0,result:(await this.tools.CloseTabs({tab_ids:t.tabIds??[],key:n,request_id:r})).tabs.map(a=>({id:a.tab_id,...a}))}}async groupTabs(t,n,r){const s=await this.tools.GroupTabs({...t,tab_ids:t.tabIds,group_id:t.groupId,key:n,request_id:r});if(!s.tab_group)throw new Error("[GroupTabs] Tab group not found");return{is_success:!0,tabGroup:{id:s.tab_group.id,title:s.tab_group.title,collapsed:s.tab_group.collapsed??!1,color:s.tab_group.color}}}async maybeSendSearchResult(t,n,r){if(!this.isTestDebugMode||!t)return;const a=[...t.web_results??[],...t.extra_web_results??[]].map(i=>({name:i.name,snippet:i.snippet,url:i.url,isClientContext:!!i.is_client_context}));return this.send({type:"PERPLEXITY_SEARCH_RESULT",payload:{answer:t.answer,webResults:a,isPending:r,steps:n.map(i=>i.step_type)}})}submitTask(t,n){return new Promise((r,s)=>{const a=t.entryId,i=t.uuid;this.store.getState().actions.setPendingTask(i,{entryId:t.entryId,uuid:t.uuid,resolve:r,reject:s,onProgress:n});const l=this.taskTeardowns.get(a)??[];if(this.taskTeardowns.set(a,l),this.platform!=="web"){const c=VZe(t,this.mobileProxy.bridge);l.push(()=>c.then(u=>{u(),this.store.getState().actions.setTaskState(t.uuid,void 0)})),r({message:"Mobile task started",success:!0});return}this.agentExtension.sendMessage(t).then(()=>{l.push(c=>{this.agentExtension.sendMessage({type:"CLEANUP_AGENT_TASKS",payload:{entryId:t.entryId,reason:c}})})}).catch(c=>{let u={};try{u=JSON.parse(t.extra_headers)}catch{}ne.error("[comet] Unhandled error while submitting task",c),HP({clientPayloadCacheKey:i,errorType:c,errorMsg:"Agent task start failure."},u,"CometAdapter").catch(f=>{ne.error("Error sending tool failure",f)})})})}async moveThreadToSidecar({activeTaskUuid:t,entryId:n,isMissionControl:r,reason:s,waitForNavigation:a,animate:i,takeFocus:l}){try{return(await this.agentExtension.sendMessage({type:"MOVE_THREAD_TO_SIDECAR",payload:{active_task_uuid:t,is_mission_control:r,entry_id:n,wait_for_navigation:a,animate:i,takeFocus:l}})).success}catch(c){return ne.error(new sg("MOVE_THREAD_TO_SIDECAR_FAILED",{cause:c,message:`Failed to move thread to sidecar for ${s}`})),!1}}getTaskTabs(){this.agentExtension.sendMessage({type:"GET_TASK_TABS"})}async sendMissionControlStatus(t){await this.agentExtension.sendMessage({type:"MISSION_CONTROL_STATUS",payload:t})}async makeTaskVisible(t){const n=await this.agentExtension.sendMessage({type:"MAKE_TASK_VISIBLE",payload:{task_uuid:t}});if(n.tab_ids){const r=new URL(window.location.href).pathname;n.tab_ids.forEach(s=>{this.store.getState().actions.setSidecarUrlById(Vg(s,void 0),r)})}}cleanupTasks(t,n){if(!t)return;const r=this.taskTeardowns.get(t);r&&(r.forEach(s=>s(n)),this.taskTeardowns.delete(t))}captureSourceTabScreenshotV2({sourceTabUrl:t=""}){this.agentExtension.sendMessage({type:"CAPTURE_SCREENSHOT_V2",payload:{tabId:void 0,sourceTabUrl:t}})}deactivateScreenshotTool(){this.agentExtension.sendMessage({type:"DEACTIVATE_SCREENSHOT_TOOL",payload:{tabId:void 0}})}subscribeToSidecarBrowserTaskStop(t){return this.emitter.on("BROWSER_TASK_STOP",t)}subscribeForceSubmitQuery(t){return this.emitter.on("FORCE_SUBMIT_QUERY",t)}subscribeQuickActionButtonFired(t){return this.emitter.on("QUICK_ACTION_BUTTON_FIRED",t)}getMcpTools(t){return this.sendToAgent({type:"GET_MCP_TOOLS",payload:{serverName:t}})}callMcpTool(t,n){return this.sendToAgent({type:"CALL_MCP_TOOL",payload:t,context:n})}getMcpStdioServers(){const t=this.sendToAgent({type:"GET_STDIO_MCP_SERVERS",payload:void 0});return t.then(n=>{this.getStore().getState().actions.setMcpStdioServers(n)}).catch(()=>{}),t}addMcpStdioServer(t){return this.sendToAgent({type:"ADD_STDIO_MCP_SERVER",payload:t})}async updateMcpStdioServer(t,n){try{return await this.sendToAgent({type:"UPDATE_STDIO_MCP_SERVER",payload:{existingServerName:t,updates:n}})}catch(r){if(!(r instanceof Error)||!r.message.startsWith("Error in invocation of perplexity.mcp.updateStdioServer")&&!r.message.startsWith("chrome.perplexity.mcp.updateStdioServer is not a function"))throw r;return n.name&&n.name!==t?this.pendingServerRename={oldName:t,newName:n.name}:this.pendingServerRename=void 0,await this.removeMcpStdioServer(t,!0),this.addMcpStdioServer(n)}}async removeMcpStdioServer(t,n){await this.sendToAgent({type:"REMOVE_STDIO_MCP_SERVER",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t,n)}installDxt(t){return this.sendToAgent({type:"INSTALL_DXT",payload:{url:t}})}async uninstallDxt(t){await this.sendToAgent({type:"UNINSTALL_DXT",payload:{name:t}}),this.clearStateAfterRemovingMcpServer(t)}getInstalledDxts(){const t=this.sendToAgent({type:"GET_INSTALLED_DXT"});return t.then(n=>{this.getStore().getState().actions.setInstalledDxts(n)}).catch(()=>{}),t}async refreshDxtAndMcpState(){await Promise.all([this.getMcpStdioServers(),this.getInstalledDxts()])}async hasPermission(t){try{return await this.sendToAgent({type:"HAS_PERMISSION",payload:{permission:t}})}catch{return null}}async requestPermission(t){try{return await this.sendToAgent({type:"REQUEST_PERMISSION",payload:{permission:t}})}catch{return null}}handleMcpStdioServerChanged(t,n,r){const s=this.getStore().getState(),a=s.mcpStdioServers??[],i=a.findIndex(c=>c.name===t);if(i===-1)return;const l=[...a];l[i]=r,s.actions.setMcpStdioServers(l)}async send(t){return this.mainExtension.sendMessage(t).then(n=>(n.is_success=!n.errorType,n))}async sendToAgent(t){return this.agentExtension.sendMessage(t).then(n=>{if(!n.success)throw new Error(n.error);return n.response})}handleMessage=t=>{try{Qr(t).with({type:"UPDATE_SOURCE_TAB"},r=>{this.store.getState().actions.setSourceTab(r.payload),r.payload.url!==this.store.getState().sidecarSourceTab.url&&this.store.getState().actions.clearUserSelection()}).with({type:"FORCE_SUBMIT_QUERY"},r=>{this.isTestDebugMode&&this.emitter.emit("FORCE_SUBMIT_QUERY",r.payload)}).with({type:"QUICK_ACTION_BUTTON_FIRED"},()=>{this.emitter.emit("QUICK_ACTION_BUTTON_FIRED")}).with({type:"INIT"},r=>{this.isTestDebugMode=!!r.payload.isTestDebugMode,this.store.getState().actions.setPlatformInfo(r.payload.platform),this.store.getState().actions.setSourceTab({tabId:r.payload.sourceTabId??-1,url:r.payload.sourceTabUrl??"",title:r.payload.sourceTabTitle??"",secondaryTab:r.payload.sourceSecondaryTab??null})}).otherwise(r=>{ne.log("Unknown message type",r)})}catch(n){ne.error("Error parsing entropy message",n)}};clearStateAfterRemovingMcpServer(t,n){const r=this.getStore().getState(),s=r.mcpDisabledServers??new Set;if(s.has(t)){const i=new Set(s);i.delete(t),r.actions.setMcpDisabledServers(i)}if(n&&!this.pendingServerRename)return;if(this.pendingServerRename&&this.pendingServerRename.oldName===t){r.actions.renameMcpServerInToolsSettings(this.pendingServerRename.oldName,this.pendingServerRename.newName),this.pendingServerRename=void 0;return}const a=r.mcpToolsSettings??{};if(a[t]){const i={...a};delete i[t],r.actions.setMcpToolsSettings(i)}}}const QZe=e=>new Proxy({},{get(t,n){return r=>e.sendMessage({type:"CALL_TOOL",method:n,request:r}).then(({success:s,response:a})=>{if(!s)throw a;return a}).catch(s=>{throw ne.error("Error calling tool",s),"errorType"in s?s:{errorType:"unhandled",errorMsg:"Proxy error."}})}});class XZe{mobileProxy;cometAdapter;_shouldUseMobileProxyForMCP=null;constructor(t,n){this.mobileProxy=t,this.cometAdapter=n}get shouldUseMobileProxyForMCP(){if(this._shouldUseMobileProxyForMCP===null)if(uf())this._shouldUseMobileProxyForMCP=!0;else if(Ks())this._shouldUseMobileProxyForMCP=!1;else{const t=this.mobileProxy.isAvailable;t!==void 0&&(this._shouldUseMobileProxyForMCP=t)}return this._shouldUseMobileProxyForMCP??!1}async getMcpTools(t){if(this.shouldUseMobileProxyForMCP){const n=this.mobileProxy.bridge.get_mcp_tools({server_name:t});return n.catch(r=>{ne.error("get_mcp_tools failed:",r)}),n.then(r=>r.tools)}return this.cometAdapter.getMcpTools(t)}async callMcpTool(t,n){if(this.shouldUseMobileProxyForMCP){const r=this.mobileProxy.bridge.call_mcp_tool({params:t});return r.catch(s=>{ne.error("call_mcp_tool failed:",s)}),r.then(s=>({content:s.result}))}return this.cometAdapter.callMcpTool(t,n)}async getMcpStdioServers(){if(this.shouldUseMobileProxyForMCP){const t=this.mobileProxy.bridge.get_mcp_servers();return t.catch(n=>{ne.error("get_mcp_servers failed:",n)}),t.then(n=>(this.cometAdapter.getStore().getState().actions.setMcpStdioServers(n.servers),n.servers))}return this.cometAdapter.getMcpStdioServers()}async getInstalledDxts(){return this.shouldUseMobileProxyForMCP?[]:this.cometAdapter.getInstalledDxts()}async refreshDxtAndMcpState(){await Promise.all([this.getMcpStdioServers(),this.getInstalledDxts()])}initializeFromWindowTools(t){try{if(!t?.servers)return;const n=this.cometAdapter.getStore();Object.entries(t.servers).forEach(([r,s])=>{s&&Array.isArray(s)&&n.getState().actions.setMcpTools(r,s)})}catch(n){ne.error("Failed to initialize MCP tools from window",n)}}}const rge="native_bridge";function ZZe(e){try{const t=JSON.parse(e);return{info_version:typeof t.info_version=="string"?t.info_version:void 0,local_mcp:{call:t.local_mcp?.call===!0,edit:t.local_mcp?.edit===!0}}}catch(t){ne.warn("[NativeClientCapabilities] Invalid JSON",t);return}}const JZe=lp(function(){const t=Sn(rge);if(t)return ZZe(t)},()=>Math.floor(Date.now()/(3600*1e3)));function eJe(){return!!Sn(rge)}const tJe=lp(function(){const t=JZe();if(t)return t;if(!uf()&&Ks())return{info_version:"1",local_mcp:{call:!0,edit:!0}}},()=>Math.floor(Date.now()/(3600*1e3)));var bX={};const fi=new YZe,EE=new XZe(fi.getMobileProxy(),fi),{Provider:nJe,useTrackedState:rJe}=hp("CometContext",()=>fi.getStore()),sge=Dt("EntropyBrowserContext",void 0),age=Dt("McpAdapterContext",void 0),sJe=({children:e})=>{const t=vt(),n=I9e(),r=dn(),{session:s,status:a}=mt(),{variation:i}=yZe(!0),{variation:l,loading:c}=gZe(OF),u=eJe();d.useLayoutEffect(()=>{u&&window.initialMCPTools!=null&&(EE.initializeFromWindowTools(window.initialMCPTools),window.initialMCPTools=void 0)},[u]),d.useEffect(()=>{c||fi.setClassifierApiTimeoutMs(l)},[l,c]);const f=s?.user?.id,m=s?.user?.subscription_tier;d.useEffect(()=>{if(r)switch(a){case"authenticated":return!f||!m?void 0:fi.notifyUserStateChanged({status:a,userId:f,subscriptionTier:m});case"unauthenticated":return fi.notifyUserStateChanged({status:a})}},[a,f,m,r]),d.useLayoutEffect(()=>{const g=mo();g.erp&&(document.documentElement.dataset.erp=g.erp);const y=fi.subscribeCometNavigate(({url:w})=>{if(w.origin===window.location.origin&&w.pathname.startsWith(t.base)&&(w.pathname=w.pathname.replace(t.base,""),n(w.pathname))){const S=w.searchParams.toString(),E=`${w.pathname}${S?`?${S}`:""}`;t.push(E,void 0,"Comet navigate");return}if(bX.NEXT_PUBLIC_IS_SIDECAR_BUILD){ne.error("Invalid soft navigation in Sidecar",{url:w}),fi.openTab({url:w.toString()});return}const C=w.toString();window.location.href=C});if(!bX.NEXT_PUBLIC_IS_SIDECAR_BUILD||i===!1)return y;const x=fi.getStore(),v=setInterval(()=>{x.getState().sidecarUrlById.forEach((C,S)=>{C.updatedAt<Date.now()-1e3*60*60*24*7&&x.getState().actions.deleteSidecarUrlById(S)}),tX(x)},1e3*60*60*6);bQe(x),_Qe(x,t);let b=x.getState().sidecarSourceTab;const _=x.subscribe((w,C)=>{if(w.sidecarSourceTab===C.sidecarSourceTab)return;const S=w.sidecarSourceTab,E=Vg(b.tabId,b.secondaryTab?.tabId),k=Vg(S.tabId,S.secondaryTab?.tabId);if(k===E)return;const M=new URL(window.location.href).pathname;AYe(b.tabId,b.secondaryTab?.tabId).forEach(D=>{x.getState().actions.setSidecarUrlById(D,M)});const O=x.getState().sidecarUrlById.get(k)?.url??"/";b=S,O!==M&&(t.replace(O,"Sidecar source tab changed"),tX(x))});return()=>{clearInterval(v),y(),_()}},[t,n,i]),d.useEffect(()=>fi.subscribeToSidecarBrowserTaskStop(g=>{g&&(Su({entryUUID:g,reason:"terminate-from-comet-adapter"}),fi.cleanupTasks(g,"query_stopped"))}),[]);const{variation:p}=tge(!1),h=r?p:u;return o.jsx(nJe,{children:o.jsx(sge.Provider,{value:fi,children:o.jsxs(age.Provider,{value:EE,children:[e,h&&o.jsx(oJe,{})]})})})};function Nn(e=!0){const t=d.useContext(sge);if(!t&&e)throw new Error("useEntropyBrowser must be used inside EntropyBrowserProvider");return t}function aJe(e=!0){const t=d.useContext(age);if(!t&&e)throw new Error("useMcpAdapter must be used inside EntropyBrowserProvider");return t}const Hr=rJe,oJe=()=>{const e=Hr();return d.useEffect(()=>{EE.refreshDxtAndMcpState().catch(()=>{})},[]),d.useEffect(()=>{if(!e.mcpDisabledServers)try{const t=De.getItem("mcp_disabled_servers_v1"),n=t?JSON.parse(t):[];e.actions.setMcpDisabledServers(new Set(n))}catch{e.actions.setMcpDisabledServers(new Set)}},[e.mcpDisabledServers,e.actions]),d.useEffect(()=>{if(!e.mcpToolsSettings)try{const t=De.getItem(l2),n=t?JSON.parse(t):{};e.actions.setMcpToolsSettings(n)}catch{e.actions.setMcpToolsSettings({})}},[e.mcpToolsSettings,e.actions]),o.jsx(o.Fragment,{children:e.mcpStdioServers?.map(t=>o.jsx(iJe,{server:t},t.name))})},iJe=({server:e})=>{const t=Hr(),{data:n}=Ue({queryKey:["comet/mcp_tools",e.name],queryFn:async()=>(await EE.getMcpTools(e.name).catch(()=>[])).map(s=>({...s,mcp_server:e.name,mcp_server_type:pYe.MCP_SERVER_TYPE_LOCAL,app:e.name})),enabled:!!e.name});return d.useEffect(()=>{if(n)return t.actions.setMcpTools(e.name,n),()=>{t.actions.removeMcpTools(e.name)}},[n,t.actions,e.name]),null},pan=async({backendUUID:e,title:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await re.PUT("/rest/article/section/title/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,title:t},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Error updating article section title",{cause:a});return s},han=async({backendUUID:e,heroOffset:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await re.PUT("/rest/article/section/hero_offset/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,hero_offset:t},timeoutMs:Pe()});if(a)throw new Error("Error updating article section hero offset",{cause:a});return s},gan=async({backendUUID:e,rwToken:t,reason:n})=>{if(!e||!t)return;const{data:r,error:s}=await re.DELETE("/rest/article/section/{section_uuid}",n,{params:{path:{section_uuid:e}},body:{read_write_token:t},timeoutMs:Pe()});if(s)throw new Error("Error deleting article section",{cause:s});return r},yan=async({sections:e,rwToken:t,reason:n})=>{if(!t||e.length===0)return;const{data:r,error:s}=await re.PUT("/rest/article/sections/layout",n,{body:{read_write_token:t,sections:e},timeoutMs:Pe()});if(s)throw new Error("Error updating article sections layout",{cause:s});return r},xan=async({sectionUUID:e,mediaItem:t,targetIndex:n,rwToken:r,isNewMediaItem:s=!1,reason:a})=>{if(!r)return;const{data:i,error:l}=await re.PUT("/rest/article/section/image/{section_uuid}",a,{params:{path:{section_uuid:e}},timeoutMs:5500,body:{read_write_token:r,media_item:t,target_index:n,new_media_item:s}});if(l)throw new Error("Error updating article section image",{cause:l});return i},van=async({sectionUUID:e,mediaItem:t,rwToken:n,isNewMediaItem:r,reason:s})=>{n&&await re.PUT("/rest/page/section/media/add/{section_uuid}",s,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:n,media_item:t,new_media_item:r}})},ban=async({sectionUUID:e,image:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await re.POST("/rest/article/section/upload_image/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"POST",body:{read_write_token:n,content_type:t.type},headers:{"content-type":"application/json"},numRetries:1});if(a)throw new Error("Failed to upload image to section media items",{cause:a});return s},_an=async({sectionUUID:e,mediaItemImageUrl:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await re.PUT("/rest/article/section/media/remove/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),body:{read_write_token:n,media_item_image_url:t}});if(a)throw new Error("Error removing media item from section selected images",{cause:a});return s},wan=async({sectionUUID:e,relativeMove:t,rwToken:n,articleSlug:r,reason:s})=>{if(!n||!r)return;const{data:a,error:i}=await re.PUT("/rest/article/reorder/{article_slug}",s,{params:{path:{article_slug:r}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:n,section_uuid:e,relative_move:t}});if(i)throw new Error("Error reordering article section",{cause:i});return a},Can=async({backendUUID:e,reason:t})=>{if(!e)return;const{data:n,error:r}=await re.POST("/rest/article/section/terminate",t,{body:{entry_uuid:e},timeoutMs:1500,method:"POST",numRetries:1});if(r)throw new Error("Error terminating article section streaming",{cause:r});return n},San=async({sectionUUID:e,mediaItem:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await re.PUT("/rest/article/section/add/media_item/{section_uuid}",r,{params:{path:{section_uuid:e}},body:{read_write_token:n,media_item:t}});if(a)throw new Error("Error adding article section media item",{cause:a});return s},lJe=async({entryUUIDs:e,rwToken:t,reason:n})=>{await re.DELETE("/rest/thread",n,{body:{entry_uuids:e,read_write_token:t??""}})},cJe=async({entryUUID:e,rwToken:t,callback:n,reason:r})=>{n?.(),await re.DELETE("/rest/thread/delete_thread_by_entry_uuid",r,{body:{entry_uuid:e,read_write_token:t??""}})},uJe=async({backendUUID:e,url:t,rwToken:n,reason:r})=>{if(!n)return;const{data:s,error:a}=await re.PUT("/rest/thread/entry/remove_widget",r,{timeoutMs:Pe(),body:{entry_uuid:e,read_write_token:n,url:t}});if(a)throw new Error("Error removing widget from entry",{cause:a});return s},Ean=async({backendUUID:e,rwToken:t,value:n,reason:r})=>{const{data:s,error:a}=await re.PUT("/rest/article/emphasize_sources/{section_uuid}",r,{params:{path:{section_uuid:e}},timeoutMs:Pe(),method:"PUT",body:{read_write_token:t,value:n}});if(a)throw new Error("Error toggling emphasize sources",{cause:a});return s},Man=async({connectorName:e,apiKey:t,reason:n})=>{const{data:r,error:s}=await re.POST("/rest/connectors/store-api-key",n,{body:{api_key:t,connector_id:e}});if(s)throw new Error(`Failed to store ${e} API key`,{cause:s});return r},dJe=async({name:e,referrer:t,referrerId:n,redirectPath:r,unauthedRedirectPath:s,reason:a})=>{try{const{data:i,error:l}=e!=="factset"?await re.GET(`/rest/connectors/${e}/connect`,a,{timeoutMs:Pe(),numRetries:1,reason:a,params:{query:{referrer:t,referrer_id:n,redirect_path:r,unauthed_redirect_path:s}}}):await re.GET("/rest/connectors/factset/connect",a,{timeoutMs:Pe(),numRetries:1,reason:a});if(l)throw new we("API_CLIENTS_ERROR",{message:"Failed to initiate OAuth flow",cause:l});return i.redirect_url??null}catch(i){return ne.error("Error fetching factset OAuth redirect URL:",i),null}},fJe=async({connectorName:e,reason:t})=>{const n=`disconnectConnector:${e}`;try{const{data:r,error:s}=await re.GET("/rest/connectors/{connector_id}/disconnect",t,{timeoutMs:Pe({productionMs:500}),numRetries:1,reason:t,params:{path:{connector_id:e}}});if(s)throw new we("API_CLIENTS_ERROR",{message:"Failed to disconnect connector",cause:s});return r}catch(r){return ne.log(`Error in ${n}:`,r),null}},mJe=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/connections/{uuid}/update",t,{params:{path:{uuid:e}},body:{disconnect:!0}});if(r)throw new Error("Failed to disconnect file connector",{cause:r});return n},pJe=async({connectionUUID:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/connections/{uuid}/delete",t,{params:{path:{uuid:e}}});if(r)throw new Error("Failed to disconnect file connector and delete files",{cause:r});return n},hJe=async({connectorName:e,fileIds:t,fileRepoInfo:n,folder_ids:r=ce,reason:s})=>{const{error:a,data:i}=e==="sharepoint"?await re.POST(`/rest/connectors/${e}/files`,s,{body:{file_ids:t,file_repository_info:n,drive_ids:r}}):await re.POST(`/rest/connectors/${e}/files`,s,{body:{file_ids:t,file_repository_info:n,folder_ids:r}});if(a)throw new we("API_CLIENTS_ERROR",{cause:a});return i},gJe=async({reason:e})=>{const{data:t,error:n}=await re.POST("/rest/connectors/box/picker",e);if(n)throw new Error("Failed to refresh box picker credentials",{cause:n});return t},yJe=async({connectionType:e,content:t,reason:n})=>{const{data:r,error:s}=await re.POST("/rest/connectors/picker/log",n,{body:{connection_type:e,content:t}});if(s)throw new Error("Failed log connector picker",{cause:s});return r},xJe=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/file-repository/delete-files",t,{body:e});if(r)throw new Error("Failed to delete files",{cause:r});return n};class aU extends Error{constructor(){super("Downloads are disabled"),this.name="DownloadsDisabledError"}}class oU extends Error{constructor(){super("PDF downloads are restricted"),this.name="PdfUntrustedOriginError"}}class iU extends Error{constructor(){super("This file belongs to a different organization"),this.name="UserNotInFileOrgError"}}const vJe=async({request:e,reason:t})=>{const n=await re.POST("/rest/file-repository/download",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new aU;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new oU;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new iU}throw new we("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n.error})}return n.data},bJe=async({request:e,reason:t})=>{const n=await re.POST("/rest/file-repository/download-attachment",t,{body:e,timeoutMs:2e3,numRetries:1});if(n.error){if(n.error.detail&&typeof n.error.detail=="object"&&"error_details"in n.error.detail){if(n.error.detail.error_details==="DOWNLOADS_DISABLED")throw new aU;if(n.error.detail.error_details==="PDF_UNTRUSTED_ORIGIN")throw new oU;if(n.error.detail.error_details==="USER_NOT_IN_FILE_ORG")throw new iU}throw new we("API_CLIENTS_ERROR",{message:"Failed to download attachment",cause:n.error})}return n.data},kan=async({seedDirectoryRequest:e,reason:t})=>{const{error:n}=await re.POST("/rest/file-repository/seed-examples",t,{body:e,timeoutMs:Pe(),numRetries:1});if(n)throw new we("API_CLIENTS_ERROR",{cause:n})},oge=e=>{const{accessLevel:t,enableWebByDefault:n,...r}=e;return{...r,access:t,enable_web_by_default:n}},_Je=async({collectionUuid:e,changes:t,reason:n})=>{const r=oge(t),s=await re.POST("/rest/collections/edit_collection/{collection_uuid}",n,{params:{path:{collection_uuid:e}},body:r,timeoutMs:Pe()});if(!s.response.ok||!s.data)throw new Error("Failed to edit collection",{cause:s.error});const a=s.data,{access:i,...l}=a;return i!==void 0?{...l,accessLevel:i}:l},_X=async({params:e,reason:t})=>{const n=oge(e);e.template_id&&(n.template_id=e.template_id);const r=await re.POST("/rest/collections/create_collection",t,{body:n,timeoutMs:Pe()});if(!r.response.ok||!r.data)throw new Error("Failed to create collection",{cause:r.error});return r.data},Tan=async({entryUUID:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/entry/convert-to-report/{entry_uuid}",t,{params:{path:{entry_uuid:e}},timeoutMs:Pe()});if(r)throw new Error("Failed to convert entry to report",{cause:r});return n},Nan=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to subscribe to space",{cause:r});return n},jan=async({spaceUuid:e,reason:t})=>{const{data:n,error:r}=await re.DELETE("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to unsubscribe from space",{cause:r});return n},Aan=async({reason:e})=>{const{error:t}=await re.DELETE("/rest/user/delete-account",e);if(t)throw new Error("Failed to delete account",{cause:t})},wJe=async({collectionUuid:e,reason:t})=>{const{error:n}=await re.DELETE("/rest/collections/delete_collection/{collection_uuid}",t,{params:{path:{collection_uuid:e}},timeoutMs:Pe(),numRetries:1});if(n)throw new Error("Failed to delete collection",{cause:n})},ige=async({contextUUID:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/thread/mark_viewed/{context_uuid}",t,{params:{path:{context_uuid:e}},timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to mark thread as viewed",{cause:r});return n};function CJe({reason:e}){const t=ot(),n=A5();return dt({mutationKey:["publishArticleMutation"],mutationFn:async({connectorName:r,connectionUUID:s,deleteFiles:a})=>{let i;return s&&!a?i=await mJe({connectionUUID:s,reason:e}):s&&a?i=await pJe({connectionUUID:s,reason:e}):i=await fJe({connectorName:r,reason:e}),i},onSettled:async()=>{await t.refetchQueries({queryKey:n})},onMutate:async({connectorName:r,connectionUUID:s})=>{t.setQueryData(n,a=>{if(!a)return a;const i=a.connectors.connectors.map(l=>l.name===r&&(!s||l.connection_uuid===s)?{...l,connected:!1}:l);return{...a,connectors:{connectors:i}}})}})}const lge={keyProp:0,message:null,variant:"success",description:void 0,isVisible:!1,ctaText:void 0,ctaOnClick:void 0,openToast:()=>{},closeToast:()=>{},deprecatedOpenToast:()=>{}},cge=Dt("ToastStateContext",lge),uge=I.memo(({children:e})=>{const[t,n]=d.useState(lge),r=d.useCallback(({message:l,variant:c,timeout:u,description:f,ctaText:m,ctaOnClick:p,iconOverride:h,position:g="top"})=>{n(y=>({...y,message:l,variant:c,timeout:u,description:f,ctaText:m,ctaOnClick:p,iconOverride:h,position:g??"top",isVisible:!0,keyProp:(y.keyProp||0)+1}))},[]),s=d.useCallback((l,c,u,f,m,p,h,g)=>{r({message:l,variant:c,timeout:u,description:f,ctaText:m,ctaOnClick:p,iconOverride:h,position:g??"top"})},[r]),a=d.useCallback(()=>{n(l=>({...l,isVisible:!1}))},[]),i=d.useMemo(()=>({...t,openToast:r,closeToast:a,deprecatedOpenToast:s}),[t,r,a,s]);return o.jsx(cge.Provider,{value:i,children:e})});uge.displayName="ToastStateProvider";const fn=()=>{const e=d.useContext(cge);if(!e)throw new Error("useToastState must be used within ToastContext");return e};function pa(e,t){ne.info("Redirecting window",{reason:t,url:window.location.href,redirect:R9e(e).toString()}),window.location.href=e}const e3=({reason:e})=>{const t=Ot(),n=t?.get("referrer"),r=t?.get("referrerId"),{$t:s}=Z(),{deprecatedOpenToast:a}=fn(),i=d.useCallback(async({connectorName:l,redirectPath:c,customReferrer:u,customReferrerId:f,unauthedRedirectPath:m})=>{const p=await dJe({name:l,referrer:u??n??void 0,referrerId:f??r??void 0,redirectPath:c??void 0,unauthedRedirectPath:m??void 0,reason:e});if(!p){a(s({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3);return}pa(p,"File connector")},[e,n,r,s,a]);return d.useMemo(()=>({handleConnect:i}),[i])},Ian=e=>e?.[0]?.article_info?.is_live;function Ran(e){return e.length==1&&e[0]?.article_info?.is_auto_generated}const lU=e=>e?.toLowerCase(),c2=e=>lU(e.status)==="pending",Pan=e=>lU(e.status)==="staged",Lan=e=>lU(e.status)==="completed",SJe=e=>e.find(t=>c2(t)&&t.backend_uuid),EJe=e=>!!(e&&Js(e)&&"blocks"in e[0]),Oan=e=>{const t=/##\s*([^\n]+)/,n=e.match(t);return n&&n.length>1&&n[1]?n[1].trim():e.trim()},dge="rwTokenStorage",wX=20,O1=e=>{const t=JSON.stringify(e);try{De.setItem(dge,t)}catch(n){ne.warn("Could not put rw token storage"),ne.warn(n)}},cU=()=>{let e=null;try{e=De.getItem(dge)}catch(t){ne.warn("Could not access local storage"),ne.warn(t)}if(!e)return O1({}),{};try{return JSON.parse(e)??{}}catch(t){ne.warn("Could not deserialize rw token storage"),ne.warn(t);const n={};return O1({}),n}},MJe=(e,t)=>{if(!e||!t)return;let n=cU(),r=Object.keys(n);if(r.length>=wX){const s=r[Math.floor(Math.random()*r.length)];s&&delete n[s]}r=Object.keys(n),r.length>wX+5&&(ne.warn("Too many rw tokens stored; resetting"),n={}),n[e]=t,O1(n)},kJe=e=>e?cU()[e]:void 0,fge=e=>{const t=e.context_uuid;if(!t)return;const n=kJe(t);if(n)return n;const r=e?.read_write_token;if(r)return MJe(t,r),r},Dan=e=>{if(!e)return;const t=cU();delete t[e],O1(t)},Fan=()=>{O1({})},TJe=e=>e?.context_uuid??void 0,NJe=e=>e?.frontend_context_uuid??void 0,jJe=e=>e?.thread_title??"",AJe=e=>e?.query_str??void 0,IJe=e=>e?.search_focus??void 0,RJe=e=>e.sources?.sources??void 0,PJe=e=>e?.author_id??void 0,LJe=e=>e?.author_username??void 0,OJe=e=>e?.author_image??void 0,DJe=e=>{if(e.parent_info)return e.parent_info},FJe=e=>e?.mode??null,UJe=e=>e?.personalized??void 0,BJe=e=>e?.collection_info??void 0,$Je=e=>e?.bookmark_state??void 0,VJe=e=>e?.thread_access??void 0,WJe=e=>e?.thread_url_slug??void 0,HJe=e=>e?.updated_datetime??void 0,zJe=e=>e?.expiry_time??null,GJe=e=>e?.privacy_state??void 0;var ME;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(ME||(ME={}));function qJe(e){return e>=ME.WRITER&&e<ME.INVITED_READER}const mge="CLIENT_SEARCH_PLACEHOLDER",KJe=({rawQuery:e,fork:t,existingEntryUUID:n,existingUuid:r,collection:s,isRelatedQuery:a,newFrontendContextUUID:i,existingFrontendContextUUID:l,submitFromArticleOverride:c,isNavSuggestionsDisabled:u,isCopilot:f,newAttachments:m,firstResultFrontendContextUUID:p,isPersonalized:h,forceNew:g,finalSources:y,finalRecency:x,uuid:v,threadMetadataTitle:b,threadMetadataThreadUrlSlug:_,modelPreferenceSubmit:w,querySource:C,side_by_side_metadata:S})=>{const E=e.trim(),k=f?JSON.stringify([{step_type:"INITIAL_QUERY",content:{query:""},uuid:""}]):m.length>0?JSON.stringify({web_results:m.map(R=>({url:R,is_attachment:!0}))}):null,M=t?{title:c?.article_info?.title??b,url_slug:(c&&"thread_url_slug"in c?c.thread_url_slug:void 0)??_,mode:((c&&"mode"in c?c.mode:void 0)??p)?.toUpperCase()}:void 0,j=s&&qJe(s.user_permission)?s:void 0;return{parent_info:void 0,plan:void 0,summary:void 0,form:void 0,reasoning_plan:void 0,status:"PENDING",final:!1,query_str:E,query_source:C,backend_uuid:g?"":n??"",bookmark_state:s?"BOOKMARKED":"NOT_BOOKMARKED",context_uuid:"",frontend_context_uuid:l??i??"",uuid:r??v,frontend_uuid:r??v,...t?{parent_info:M}:{},author_username:void 0,author_image:void 0,search_focus:y.length===0?"writing":"internet",search_recency_filter:x??void 0,sources:{sources:y},num_sources_display:void 0,personalized:h,attachments:m,blocks:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},mode:f?"COPILOT":"CONCISE",text:k??void 0,collection_info:j,is_related_query_result:a??!1,related_queries:[],media_items:[],widget_data:[],widget_intents:[],knowledge_cards:[],sponsored_results:[],expect_sponsored_results:!1,related_query_items:[],sources_list:[],answer_modes:[],is_nav_suggestions_disabled:u,structured_answer_block_usages:[],display_model:w,model_preference:w,side_by_side_metadata:S}},uU="DEFAULT_SEARCH_PLACEHOLDER",YJe=(e={})=>{const t=e.uuid??e.frontend_uuid??crypto.randomUUID();return{status:"PENDING",parent_info:void 0,query_str:"",backend_uuid:uU,author_username:void 0,author_image:void 0,search_focus:"internet",display_model:"turbo",personalized:!1,attachments:[],social_info:{like_count:0,view_count:0,fork_count:0,user_likes:!1},text:void 0,collection_info:void 0,image_completions:[],is_related_query_result:!1,final:!1,sources:{sources:["web"]},should_index:!1,updated_datetime:new Date().toISOString(),thread_access:0,thread_url_slug:"",expiry_time:void 0,privacy_state:void 0,context_uuid:"",related_queries:[],media_items:[],widget_data:[],blocks:[],message_mode:"MESSAGE_MODE_UNSPECIFIED",widget_intents:[],knowledge_cards:[],sponsored_results:[],plan:void 0,reasoning_plan:void 0,summary:void 0,form:void 0,sources_list:[],related_query_items:[],answer_modes:[],structured_answer_block_usages:[],...e,frontend_context_uuid:e.frontend_context_uuid??crypto.randomUUID(),frontend_uuid:t,uuid:t,attachment_processing_progress:[]}};/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var QJe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),XJe=Object.prototype.hasOwnProperty;function QP(e,t){return XJe.call(e,t)}function XP(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var s in e)QP(e,s)&&r.push(s);return r}function Do(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function ZP(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Zf(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function pge(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function JP(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(JP(e[t]))return!0}else if(typeof e=="object"){for(var r=XP(e),s=r.length,a=0;a<s;a++)if(JP(e[r[a]]))return!0}}return!1}function CX(e,t){var n=[e];for(var r in t){var s=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof s<"u"&&n.push(r+": "+s)}return n.join(`
`)}var hge=function(e){QJe(t,e);function t(n,r,s,a,i){var l=this.constructor,c=e.call(this,CX(n,{name:r,index:s,operation:a,tree:i}))||this;return c.name=r,c.index=s,c.operation=a,c.tree=i,Object.setPrototypeOf(c,l.prototype),c.message=CX(n,{name:r,index:s,operation:a,tree:i}),c}return t}(Error),Pr=hge,ZJe=Do,Uh={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=kE(n,this.path);r&&(r=Do(r));var s=bm(n,{op:"remove",path:this.from}).removed;return bm(n,{op:"add",path:this.path,value:s}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=kE(n,this.from);return bm(n,{op:"add",path:this.path,value:Do(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:D1(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},JJe={add:function(e,t,n){return ZP(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Uh.move,copy:Uh.copy,test:Uh.test,_get:Uh._get};function kE(e,t){if(t=="")return e;var n={op:"_get",path:t};return bm(e,n),n.value}function bm(e,t,n,r,s,a){if(n===void 0&&(n=!1),r===void 0&&(r=!0),s===void 0&&(s=!0),a===void 0&&(a=0),n&&(typeof n=="function"?n(t,0,e,t.path):TE(t,0)),t.path===""){var i={newDocument:e};if(t.op==="add")return i.newDocument=t.value,i;if(t.op==="replace")return i.newDocument=t.value,i.removed=e,i;if(t.op==="move"||t.op==="copy")return i.newDocument=kE(e,t.from),t.op==="move"&&(i.removed=e),i;if(t.op==="test"){if(i.test=D1(e,t.value),i.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i.newDocument=e,i}else{if(t.op==="remove")return i.removed=e,i.newDocument=null,i;if(t.op==="_get")return t.value=e,i;if(n)throw new Pr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",a,t,e);return i}}else{r||(e=Do(e));var l=t.path||"",c=l.split("/"),u=e,f=1,m=c.length,p=void 0,h=void 0,g=void 0;for(typeof n=="function"?g=n:g=TE;;){if(h=c[f],h&&h.indexOf("~")!=-1&&(h=pge(h)),s&&(h=="__proto__"||h=="prototype"&&f>0&&c[f-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&p===void 0&&(u[h]===void 0?p=c.slice(0,f).join("/"):f==m-1&&(p=t.path),p!==void 0&&g(t,0,e,p)),f++,Array.isArray(u)){if(h==="-")h=u.length;else{if(n&&!ZP(h))throw new Pr("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",a,t,e);ZP(h)&&(h=~~h)}if(f>=m){if(n&&t.op==="add"&&h>u.length)throw new Pr("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",a,t,e);var i=JJe[t.op].call(t,u,h,e);if(i.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}}else if(f>=m){var i=Uh[t.op].call(t,u,h,e);if(i.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",a,t,e);return i}if(u=u[h],n&&f<m&&(!u||typeof u!="object"))throw new Pr("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",a,t,e)}}}function t3(e,t,n,r,s){if(r===void 0&&(r=!0),s===void 0&&(s=!0),n&&!Array.isArray(t))throw new Pr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Do(e));for(var a=new Array(t.length),i=0,l=t.length;i<l;i++)a[i]=bm(e,t[i],n,!0,s,i),e=a[i].newDocument;return a.newDocument=e,a}function eet(e,t,n){var r=bm(e,t);if(r.test===!1)throw new Pr("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function TE(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Pr("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Uh[e.op]){if(typeof e.path!="string")throw new Pr("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Pr('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Pr("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Pr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&JP(e.value))throw new Pr("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var s=e.path.split("/").length,a=r.split("/").length;if(s!==a+1&&s!==a)throw new Pr("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Pr("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var i={op:"_get",path:e.from,value:void 0},l=gge([i],n);if(l&&l.name==="OPERATION_PATH_UNRESOLVABLE")throw new Pr("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Pr("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function gge(e,t,n){try{if(!Array.isArray(e))throw new Pr("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)t3(Do(t),Do(e),n||!0);else{n=n||TE;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(s){if(s instanceof Pr)return s;throw s}}function D1(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),s,a,i;if(n&&r){if(a=e.length,a!=t.length)return!1;for(s=a;s--!==0;)if(!D1(e[s],t[s]))return!1;return!0}if(n!=r)return!1;var l=Object.keys(e);if(a=l.length,a!==Object.keys(t).length)return!1;for(s=a;s--!==0;)if(!t.hasOwnProperty(l[s]))return!1;for(s=a;s--!==0;)if(i=l[s],!D1(e[i],t[i]))return!1;return!0}return e!==e&&t!==t}const tet=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Pr,_areEquals:D1,applyOperation:bm,applyPatch:t3,applyReducer:eet,deepClone:ZJe,getValueByPointer:kE,validate:gge,validator:TE},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var dU=new WeakMap,net=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),ret=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function set(e){return dU.get(e)}function aet(e,t){return e.observers.get(t)}function oet(e,t){e.observers.delete(t.callback)}function iet(e,t){t.unobserve()}function cet(e,t){var n=[],r,s=set(e);if(!s)s=new net(e),dU.set(e,s);else{var a=aet(s,t);r=a&&a.observer}if(r)return r;if(r={},s.value=Do(e),t){r.callback=t,r.next=null;var i=function(){e8(r)},l=function(){clearTimeout(r.next),r.next=setTimeout(i)};typeof window<"u"&&(window.addEventListener("mouseup",l),window.addEventListener("keyup",l),window.addEventListener("mousedown",l),window.addEventListener("keydown",l),window.addEventListener("change",l))}return r.patches=n,r.object=e,r.unobserve=function(){e8(r),clearTimeout(r.next),oet(s,r),typeof window<"u"&&(window.removeEventListener("mouseup",l),window.removeEventListener("keyup",l),window.removeEventListener("mousedown",l),window.removeEventListener("keydown",l),window.removeEventListener("change",l))},s.observers.set(t,new ret(t,r)),r}function e8(e,t){t===void 0&&(t=!1);var n=dU.get(e.object);fU(n.value,e.object,e.patches,"",t),e.patches.length&&t3(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function fU(e,t,n,r,s){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var a=XP(t),i=XP(e),l=!1,c=i.length-1;c>=0;c--){var u=i[c],f=e[u];if(QP(t,u)&&!(t[u]===void 0&&f!==void 0&&Array.isArray(t)===!1)){var m=t[u];typeof f=="object"&&f!=null&&typeof m=="object"&&m!=null&&Array.isArray(f)===Array.isArray(m)?fU(f,m,n,r+"/"+Zf(u),s):f!==m&&(s&&n.push({op:"test",path:r+"/"+Zf(u),value:Do(f)}),n.push({op:"replace",path:r+"/"+Zf(u),value:Do(m)}))}else Array.isArray(e)===Array.isArray(t)?(s&&n.push({op:"test",path:r+"/"+Zf(u),value:Do(f)}),n.push({op:"remove",path:r+"/"+Zf(u)}),l=!0):(s&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!l&&a.length==i.length))for(var c=0;c<a.length;c++){var u=a[c];!QP(e,u)&&t[u]!==void 0&&n.push({op:"add",path:r+"/"+Zf(u),value:Do(t[u])})}}}function uet(e,t,n){n===void 0&&(n=!1);var r=[];return fU(e,t,r,"",n),r}const det=Object.freeze(Object.defineProperty({__proto__:null,compare:uet,generate:e8,observe:cet,unobserve:iet},Symbol.toStringTag,{value:"Module"}));Object.assign({},tet,det,{JsonPatchError:hge,deepClone:Do,escapePathComponent:Zf,unescapePathComponent:pge});function fet(e,t){const n=new Map(e.map(r=>[r.intended_usage,r]));for(const r of t)if(r.diff_block){const s=r.diff_block.field,a=n.get(r.intended_usage)?.[s]??{},i=t3(a,r.diff_block.patches,!1,!1).newDocument;n.set(r.intended_usage,{intended_usage:r.intended_usage,[s]:i})}else n.set(r.intended_usage,r);return Array.from(n.values())}const is=nge();function met(e,t){return e.reduce((n,r)=>r(n),t)}const pet=e=>e&&s7e(e,t=>t!=null);function u2(e){return e?!e.resume_entry_uuid:!1}function het(e,t){const n={minuteCount:0,hourCount:0,minuteWindow:Math.floor(Date.now()/6e4),hourWindow:Math.floor(Date.now()/36e5)};return async(...r)=>{const s=Date.now(),a=Math.floor(s/(60*1e3)),i=Math.floor(s/(60*60*1e3));return a!==n.minuteWindow&&(n.minuteCount=0,n.minuteWindow=a),i!==n.hourWindow&&(n.hourCount=0,n.hourWindow=i),n.minuteCount>=t.perMinute?{allowed:!1}:n.hourCount>=t.perHour?{allowed:!1}:(n.minuteCount++,n.hourCount++,{allowed:!0,result:await e(...r)})}}const get="2.18",t8=Object.freeze([]);function ig(e,t){return t?e.streams[t]:void 0}function mU(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===t&&e.activeStreams.includes(a.id.description))return a}}function yet(e,t){const n=Object.values(e.streams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.threadId===t&&e.activeStreams.includes(a.id.description))return a}}const yge=50,xet=100,SX=1e3;function v6(e,t,n){const r=met(e.middlewares,n);if(!r)return{newState:e};const s=ig(e,t);if(!s||!e.activeStreams.includes(t))return{newState:e};const a=r.context_uuid,i=r.backend_uuid,l=r.uuid,u=!!!(s.entryId&&s.isReconnect&&e.erroredStreams[s.entryId])&&(!s.threadId||!s.entryId);if(i===uU||i===mge)return{newState:{streams:{...e.streams,[t]:{...s,placeholderChunk:r}}}};if(r.status===Qn.PENDING&&r.blocks?.length===0||r.status===Qn.RESUMING)return{newState:{...n8(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:{...s,threadId:r.context_uuid,entryId:i,extraEntryId:l,placeholderChunk:r}}},ingested:r};if(!a||!i)return{newState:e};let f=s;return u&&(f={...s,threadId:a,entryId:i,extraEntryId:l}),{newState:{...n8(e,r,{isFirstMessage:u,placeholderChunk:s.placeholderChunk,streamId:s.id.description}),streams:{...e.streams,[t]:f}},ingested:r}}function n8(e,t,{isFirstMessage:n,placeholderChunk:r,streamId:s}){const a=t.context_uuid,i=t.backend_uuid,l=Array.from(e.threads),c={...e.entries};if(l.length>=xet){const m=l.shift();if(m)for(const p of m.entryIds)delete c[p]}const u=l.findIndex(m=>m.id===a),f=l[u];if(f?f.entryIds.includes(i)||(l[u]={...f,entryIds:[...f.entryIds,i]}):l.push({id:a,entryIds:[i]}),t.status===Qn.COMPLETED)c[i]=t;else if(t.blocks){let m=c[i];m&&m.uuid!==t.uuid?m=r:m||(m=r);const p=m?.frontend_context_uuid??t.frontend_context_uuid??s,h=m?.frontend_uuid??t.frontend_uuid??s,g=m?.query_str??t.query_str,y=m?.connector_auth_info!=null&&!("connector_auth_info"in t)&&!n,x={...m??{},...t,frontend_context_uuid:p,frontend_uuid:h,query_str:g,...y&&{connector_auth_info:void 0},blocks:fet(n?t8:m?.blocks??t8,t.blocks)};c[i]=x}return{threads:l,entries:c}}function vet(e,t,n){ne.error("Error in reading stream",n);const r=ig(e,t);if(!r)return e;const s=r?.entryId;if(!s)return e;const a={...e.entries[s],status:Qn.FAILED},{promise:i,abortController:l,...c}=r;return{erroredStreams:{...e.erroredStreams,[s]:{...c,code:n instanceof FR?n.code:void 0}},entries:{...e.entries,[s]:a}}}const EX=Object.freeze([pet]);function bet(e,t){const n=ig(e,t);if(!n)return;const r=e.threads.find(s=>s.id===n.threadId);is.emit("completed",{stream:n,thread:(r?.entryIds.map(s=>e.entries[s])??t8).filter(s=>s!=null),message:n.entryId?e.entries[n.entryId]:void 0})}const _et=(e,t)=>({threads:[],entries:{},activeStreams:[],erroredStreams:{},middlewares:EX,streamTimers:{},streams:{},actions:{abortStream:n=>{e(r=>{let s=r.activeStreams;const a=ig(r,n);if(a){try{a.abortController?.abort("Forced abort")}catch(i){ne.error("Failed to abort stream",i)}finally{s=s.filter(i=>i!==n)}return{activeStreams:s,streams:{...r.streams,[n]:{...a,promise:null,abortController:null}}}}return r},void 0,"abortStream")},getEntryById:n=>t().entries[n],createStream:n=>t().actions.createBackwardsCompatibleStream(n,{reason:"create-stream",timer:ql(void 0,{nowFromTimeOrigin:performance.now()})}).id,retryStream:n=>{const r=t().entries[n];if(!r)return;const s=t().erroredStreams[n];if(!s)return;const a=s.placeholderChunk?.query_str;if(a){if(e(i=>{const{entries:l,threads:c}=i,{[n]:u,...f}=l,m=Array.from(c),p=c.findIndex(h=>h.entryIds.includes(n));return p===-1?i:(m.splice(p,1,{id:m[p].id,entryIds:m[p].entryIds}),{threads:m,entries:f})}),!u2(s.params))throw new Error("Stream params are not SubmitParams so cannot retry");return t().actions.createBackwardsCompatibleStream({query_str:a,params:{...s.params,existing_entry_uuid:n,query_source:"retry",frontend_context_uuid:r.frontend_context_uuid}},{placeholderChunk:s.placeholderChunk,timer:ql(void 0,{nowFromTimeOrigin:performance.now()}),reason:"retry-stream"})}},reconnectStream:n=>{const r=mU(t(),n);if(r&&r.promise&&r.abortController&&!r.abortController.signal.aborted)return r.id;const s=t().entries[n],a=s?.cursor,i=t().actions.createBackwardsCompatibleStream({query_str:"",params:{resume_entry_uuid:n,cursor:a}},{isReconnect:!0,timer:ql(void 0,{nowFromTimeOrigin:performance.now()}),reason:"reconnect-stream"});return e(l=>v6(l,i.id.description,{...s,status:Qn.PENDING}).newState,void 0,"ingestPlaceholderChunk"),i.id},createBackwardsCompatibleStream:(n,{isReconnect:r,placeholderChunk:s,onFinalResponse:a,onFirstMessageReceived:i,timer:l,reason:c})=>{const u=Array.from(t().activeStreams),f={...t().streams};if(u.length>=yge)try{const v=u.shift();v&&(f[v]?.abortController?.abort(),f[v]={...f[v],promise:null,abortController:null})}catch(v){ne.error("Failed to abort stream",v)}const m=n.params?.frontend_uuid??crypto.randomUUID(),p=new AbortController,h={id:{description:m},promise:Promise.resolve(),abortController:p,isReconnect:r,entryId:n.params?.resume_entry_uuid,params:n.params,timer:l},g={message:async v=>{const b=ig(t(),m);let _=!1;b?.threadId||(_=!0,i?.(v)),e(w=>{const{newState:C,ingested:S}=v6(w,m,v);if(S?.status===Qn.COMPLETED&&a?.(S),S?.status===Qn.FAILED&&b&&b.entryId){const{promise:E,abortController:k,...M}=b;return{...C,erroredStreams:{...w.erroredStreams,[b.entryId]:M}}}return C},void 0,"ingest"),b&&is.emit("progress",{stream:b,message:t().entries[v.backend_uuid]??v,isFirstMessage:_})}},y=n.params?.query_source==="default_search",x={[hr]:m};return ne.info("Starting stream",{request_id:m}),h.promise=(r?re.SSE("/rest/sse/perplexity_ask/reconnect/{resume_entry_uuid}",c,{path:{resume_entry_uuid:n.params?.resume_entry_uuid??""},params:{cursor:n.params?.cursor},signal:p.signal,handlers:g,headers:x}):re.SSE("/rest/sse/perplexity_ask",c,{params:{...n,params:{...n.params,version:get}},signal:p.signal,handlers:g,metrics:{omnisearch:y},timer:l,headers:x})).then(()=>bet(t(),m),v=>{const b=t(),_=ig(b,m);_&&(e(w=>vet(w,m,v),void 0,"handleStreamError"),is.emit("error",{stream:_,error:v}))}).finally(()=>{e(({activeStreams:v,streams:b})=>({streams:{...b,[m]:{...b[m],promise:null,abortController:null}},activeStreams:v.filter(_=>_!==m)}),void 0,"cleanupBackwardsCompatibleStream")}),u.push(m),e({activeStreams:u,streams:{...f,[m]:h}},void 0,"createBackwardsCompatibleStream"),is.emit("created",{stream:h,query:n.query_str,params:n.params}),h.abortController?.signal.addEventListener("abort",()=>{is.emit("aborted",{stream:h})}),s&&e(v=>v6(v,m,s).newState,void 0,"ingestPlaceholderChunk"),h},setMiddlewares:n=>{e(()=>({middlewares:[...EX,...n]}))}}}),pU=hp("StreamStateContext",()=>Yo()(a7e(Ble(_et),{name:"StreamStore"}))),Um=pU.useSelector,xge=pU.useStore,wet=()=>{const e=xge(),t=d.useMemo(()=>het(e.getState().actions.reconnectStream,{perMinute:20,perHour:120}),[e]);return d.useEffect(()=>{function n(){const i=e.getState(),l=new Set(i.activeStreams),c=new Set(Object.values(i.streams).filter(u=>l.has(u.id.description)).map(u=>u.entryId));Object.values(i.entries).forEach(u=>{u?.reconnectable&&l.size<yge&&!c.has(u?.backend_uuid)&&t(u.backend_uuid)})}n();let r=setInterval(n,SX);function s(){clearInterval(r),n(),r=setInterval(n,SX)}function a(){clearInterval(r)}return window.addEventListener("online",s,!0),window.addEventListener("offline",a,!0),()=>{clearInterval(r),window.removeEventListener("online",s,!0),window.removeEventListener("offline",a,!0)}},[t,e]),null},vge=I.memo(({children:e})=>o.jsxs(pU.Provider,{children:[o.jsx(wet,{}),e]}));vge.displayName="StreamStateProvider";const Uan=()=>Um(e=>e.actions.getEntryById),Cet=()=>Um(e=>e.actions.createBackwardsCompatibleStream),hU=()=>Um(e=>e.actions.reconnectStream),Eet=()=>Um(e=>e.actions.retryStream),Met=()=>{const e=Um(t=>t.entries);return d.useCallback(t=>t?e[t]?.status===Qn.COMPLETED:!1,[e])},bge=e=>{const t=Um(s=>s.activeStreams),n=Um(s=>s.streams),r=Object.values(n).find(s=>s.id.description===e);return!!(r&&t.includes(r?.id.description))},Co=()=>xge(),_ge=()=>{const e=Co();return d.useCallback(n=>{for(const r of n){if(e.getState().entries[r.backend_uuid])continue;const a=!r.reconnectable;e.setState(i=>n8(i,{...r,status:a?r.status===Qn.BLOCKED?Qn.BLOCKED:Qn.COMPLETED:Qn.PENDING,final:a,final_sse_message:a},{streamId:r.frontend_uuid??crypto.randomUUID()}),void 0,"ingestInitialEntries")}},[e])},wge=()=>{const e=Co();return d.useCallback((t,n)=>{t&&e.setState(r=>{const s=r.entries[t],a=mU(r,t);if(a&&a.promise&&a.abortController&&!a.abortController.signal.aborted&&ne.error("Attempting to mutate entries while stream is active"),!s||!n)return r;const i=n(s);return i?{...r,entries:{...r.entries,[t]:i}}:r},void 0,"mutateEntry")},[e])},ket=()=>{const e=Co();return d.useCallback((t,n,{terminateStream:r=!0}={})=>{t&&e.setState(s=>{if(!t)return s;yet(s,t)&&r&&ne.error("Attempting to mutate entries while stream is active");const i=s.threads.findIndex(p=>p.id===t);if(i===-1)return s;const l=s.threads[i];if(!l)return s;const u=l.entryIds.map(p=>s.entries[p]).filter(p=>p!=null),f=n?.(u);if(!f)return s;const m=Array.from(s.threads);return m.splice(i,1,{...l,entryIds:f.map(p=>p.backend_uuid)}),{...s,entries:{...s.entries,...f.reduce((p,h)=>(p[h.backend_uuid]=h,p),{})},threads:m}},void 0,"mutateEntries")},[e])};function Ban(e){const t=Co();return mU(t.getState(),e)}function Tet(e){const t=Co(),n=Object.values(t.getState().erroredStreams),r=n.length;for(let s=r-1;s>=0;s--){const a=n[s];if(a.entryId===e)return a}}const Cge=I.memo(({middlewares:e})=>{const t=Co();return d.useLayoutEffect(()=>{t.getState().actions.setMiddlewares(e)},[e,t]),null});Cge.displayName="MiddlewareRegistry";function Sge(){const e=Co();return d.useCallback(t=>e.getState().streams[t]?.timer,[e])}function Ege(){const e=Co();return d.useCallback(()=>e.getState().activeStreams.length>0,[e])}const d2=e=>e?{author_id:PJe(e),author_image:OJe(e),author_username:LJe(e),bookmarkState:$Je(e),collection:BJe(e),contextUUID:TJe(e),expiry_time:zJe(e)??void 0,first_query:AJe(e),focus:IJe(e),frontendContextUUID:NJe(e),mode:FJe(e)??void 0,parent_info:DJe(e)??void 0,personalized:UJe(e)??void 0,privacy_state:GJe(e)??void 0,rwToken:fge({backend_uuid:e.backend_uuid,read_write_token:e.read_write_token,context_uuid:e.context_uuid}),sources:RJe(e)??void 0,text_completed:!1,thread_access:VJe(e)??void 0,thread_url_slug:WJe(e),title:jJe(e),updated_datetime:HJe(e)}:Afe,r8=e=>({forkCount:e?.fork_count??0,likeCount:e?.like_count??0,viewCount:e?.view_count??0,userLikes:e?.user_likes??!1}),Mge={fork_count:0,like_count:0,view_count:0,user_likes:!1};function _v({entries:e,threads:t,streams:n},r,s){const a=r?n[r]:void 0;if(a&&a.threadId&&(s=a.threadId),s){const i=t.find(l=>l.id===s);if(i){const l=i.entryIds.map(c=>e[c]).filter(c=>c!=null);return a&&!a.entryId&&a.placeholderChunk&&l.push(a.placeholderChunk),{results:l,currentStreamId:r,currentThreadId:s}}}return{results:a?.placeholderChunk?[a.placeholderChunk]:[],currentStreamId:r,currentThreadId:s}}const Net=({streamStore:e})=>{const t=Yo()((r,s)=>({results:[],resultsLength:0,firstResult:void 0,lastResult:void 0,inFlight:!1,inFlightLatest:!1,inFlightEntry:void 0,isReadOnly:!1,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},actions:{setResults:a=>{const i=a[0],l=r8(i?.social_info??Mge),c={inFlight:a.some(u=>cn.isStatusPending(u)),inFlightLatest:a.length>0&&cn.isStatusPending(a[a.length-1]),inFlightEntry:a.find(u=>cn.isStatusPending(u))};r({results:a,firstResult:i,lastResult:a[a.length-1],inFlight:c.inFlight,inFlightLatest:c.inFlightLatest,inFlightEntry:c.inFlightEntry,socialStats:l,resultsLength:a.length},void 0)},setCurrentStreamId:a=>{const i=s(),l=_v(e.getState(),a,i.currentThreadId);i.actions.setResults(l.results),r({currentStreamId:l.currentStreamId,currentThreadId:l.currentThreadId},void 0)},clearCurrentStreamId:()=>{r({currentStreamId:void 0},void 0);const a=s(),i=_v(e.getState(),void 0,a.currentThreadId);a.actions.setResults(i.results),r({currentStreamId:i.currentStreamId,currentThreadId:i.currentThreadId},void 0)},setCurrentThreadId:a=>{r({currentThreadId:a},void 0);const i=s(),l=i.currentStreamId,c=Object.values(e.getState().streams).find(f=>f.threadId===a);c?c.id.description!==l&&i.actions.setCurrentStreamId(c.id.description):i.actions.clearCurrentStreamId();const u=_v(e.getState(),s().currentStreamId,a);i.actions.setResults(u.results),r({currentStreamId:u.currentStreamId,currentThreadId:u.currentThreadId},void 0)},clearCurrentThreadId:()=>{r({currentThreadId:void 0},void 0);const a=s(),i=_v(e.getState(),a.currentStreamId,void 0);a.actions.setResults(i.results),r({currentStreamId:i.currentStreamId,currentThreadId:i.currentThreadId},void 0)}}})),n=e.subscribe(({entries:r,threads:s,streams:a})=>_v({entries:r,threads:s,streams:a},t.getState().currentStreamId,t.getState().currentThreadId),r=>{t.getState().actions.setResults(r.results),t.setState({currentStreamId:r.currentStreamId,currentThreadId:r.currentThreadId},void 0)});return{store:t,clearSubscriptions:()=>{n()}}},{Context:jet,useStore:Aet,useSelector:Iet,useTrackedState:Ret}=g_("ResultsContext"),Pet=Iet,Ft=Ret,Let=({children:e})=>{const t=Co(),[{store:n,clearSubscriptions:r}]=d.useState(()=>Net({streamStore:t}));return d.useEffect(()=>r,[r]),o.jsx(jet.Provider,{value:n,children:e})},Oet=()=>{const{firstResult:e}=Ft();return d.useMemo(()=>d2(e),[e])};function Det(e){return e.results.find(t=>cn.isStatusPending(t))}const Fet=e=>Ue({queryKey:["navigationResults",e],queryFn:()=>Promise.resolve({}),enabled:!1}),n3=()=>{const e=Aet(),t=ket();return d.useCallback(n=>{const r=e.getState().currentThreadId;t(r,n)},[t,e])},Uet=async({slugOrUUID:e,headers:t,reason:n})=>{const{data:r,error:s}=await re.GET("/rest/article/{article_uuid_or_slug}",n,{params:{path:{article_uuid_or_slug:e}},headers:t,timeoutMs:Pe({productionMs:3e3}),numRetries:1});if(s)throw new we("API_CLIENTS_ERROR",{cause:s});if(r.status!=="success")throw new we("API_CLIENTS_ERROR",{cause:r});return r.entries},$an=async({reason:e})=>{try{const{data:t,error:n}=await re.POST("/rest/user/sign-out-all",e,{headers:{"X-Perplexity-CSRF-Protection":"1"},numRetries:1,reason:e});if(n)throw new we("API_CLIENTS_ERROR",{cause:n});return t.status==="success"}catch{return!1}},Van=async({articleUUID:e,reason:t})=>{const{data:n,error:r}=await re.GET("/rest/page/get_related_pages",t,{params:{query:{context_uuid:e}},numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{cause:r});if(n.status!=="success")throw new we("API_CLIENTS_ERROR",{cause:n});return n.related_pages},MX=e=>e[0]?.article_info?{title:e[0].article_info.title||"",summary:e[0].article_info.summary||"",suggested_sections:e[0].article_info.suggested_sections||[],audience:e[0].article_info.audience||"anyone",read_time:e[0].article_info.read_time,emphasize_sources:e[0].article_info.emphasize_sources??!1,num_sections:e.length,should_index:e[0].should_index??!1}:null,Bet={isBlocksApi:!1,article:[],heroSection:void 0,isLoading:!1,isPublished:!1,isOrgInternal:!1,inFlight:!1,inFlightLatest:!1,currentlyStreamingSection:void 0,socialStats:{forkCount:0,likeCount:0,viewCount:0,userLikes:!1},threadMetadata:{rwToken:void 0,contextUUID:void 0,frontendContextUUID:void 0,title:void 0,first_query:void 0,focus:void 0,author_id:void 0,author_username:void 0,author_image:void 0,parent_info:void 0,mode:void 0,personalized:!1,collection:void 0,thread_access:0,thread_url_slug:void 0,updated_datetime:void 0,expiry_time:void 0,privacy_state:$g.NONE},articleMetadata:{title:"",summary:"",suggested_sections:[],audience:"anyone",read_time:0,emphasize_sources:!1,num_sections:0,should_index:!1},articleMedia:[],articleWebResults:[],relatedPages:[],articleLocalState:{isEditModeEnabled:!1,setEditModeEnabled:()=>{},isCreating:!1,setIsCreating:()=>{},isTitleVisible:!0,setTitleVisible:()=>{},clickedImage:null,setClickedImage:()=>{},clickedImageIndex:0,isRewritingSection:!1,setRewritingSection:()=>{}},refetch:()=>{}},kge=Dt("ArticleResultsContext",Bet),$et=I.memo(({relatedPages:e=ce,children:t,slug:n})=>{const r="article-results-provider",[s,a]=d.useState(!1),[i,l]=d.useState(!1),[c,u]=d.useState(null),[f,m]=d.useState(!0),[p,h]=d.useState(!1),{isEnterprise:g}=Hn({reason:r}),y=ot(),v=Ot()?.get("newFrontendContextUUID"),[b,_]=d.useState(y.getQueryData(aY(n||"")));d.useEffect(()=>{if(v){_(v);return}const W=y.getQueryData(aY(n||""));_(W)},[v,y,n]);const{data:w,isLoading:C}=Ue({enabled:!!n&&n!=="new",queryKey:wF(b||""),queryFn:()=>Uet({slugOrUUID:n,reason:r}),refetchOnMount:!0,placeholderData:Pu}),S=EJe(w),E=d.useMemo(()=>{if(!w||S)return;const W=w[w.length-1];return{inFlight:w.some(c2),inFlightLatest:W&&c2(W)}},[w,S]),k=E?.inFlight??!1,M=E?.inFlightLatest??!1,j=d.useMemo(()=>{if(!(!w||S))return SJe(w)},[w,S]),R=d.useMemo(()=>{if(!w||w.length===0)return null;const W=w[0];if(c2(W))return null;const Q=W.social_info;return r8(Q||Mge)},[w]),O=d.useMemo(()=>!w||w.length===0?d2():d2(w[0]),[w]),D=d.useMemo(()=>w?MX(w):null,[w]),P=d.useMemo(()=>{const W=[];return w?.forEach(Q=>{if(Q.article_info.layout==="media-only"){const H=(Q.article_info.user_selected_media_items??[])?.filter(K=>K.medium==="image");W.push(...H)}else{const q=Q?.media_items??[],H=Q?.featured_images??[];Q.article_info.layout!=="text"&&(Js(H)&&H[0].medium==="image"?W.push(H[0]):Js(q)&&q[0].medium==="image"&&W.push(q[0]))}}),W},[w]),A=d.useMemo(()=>{if(!c)return 0;const W=P.findIndex(Q=>Q?.image===c?.image);return W>-1?W:0},[c,P]),T=d.useMemo(()=>{const W=new Map;return!w||w.length===0?[]:(w?.forEach(Q=>{const q=cn.parseAskTextField(Q);q?.web_results&&q.web_results.forEach(H=>{W.has(H.url)?W.get(H.url).count+=1:W.set(H.url,{...H,count:1})})}),Array.from(W.values()).sort((Q,q)=>q.count-Q.count).map(Q=>({...Q,count:void 0})))},[w]),N={isEditModeEnabled:s,setEditModeEnabled:a,isTitleVisible:f,setTitleVisible:m,isCreating:i,setIsCreating:l,clickedImage:c,setClickedImage:u,clickedImageIndex:A,isRewritingSection:p,setRewritingSection:h},L=O??d2(),U=g&&!!L.collection&&L.thread_access===Ct.COLLECTION_READ,$=!!g&&L.thread_access===Ct.ORG_READ,V=U||$||L.thread_access===Ct.PUBLIC_READ;return o.jsx(kge.Provider,{value:{isBlocksApi:S,article:w??[],isLoading:C,heroSection:w?.[0],lastSection:w?.[w.length-1],socialStats:R,isPublished:V,isOrgInternal:$,inFlight:k,inFlightLatest:M,currentlyStreamingSection:j,threadMetadata:L,articleMetadata:D??MX([]),articleLocalState:N,articleMedia:P,articleWebResults:T,relatedPages:e},children:t})});$et.displayName="ArticleResultsProvider";const Tge=()=>{const e=d.useContext(kge);if(!e)throw new Error("useArticleResults must be used within ArticleResultsContext");return e},gn=["list_user_collections",{}],lu="list_collection_threads",Tl="__temp__";function Vet(e,t){return Ue({enabled:!!e,queryKey:qGe(e),queryFn:async()=>QQe({profileName:e,reason:t})})}const Wet=({enabled:e,reason:t})=>{const n=async()=>tXe({reason:t}),{data:r}=Ue({enabled:typeof e>"u"?!0:e,queryKey:GGe(),queryFn:n,networkMode:"always"});return r??{isGovernmentRequestOrigin:void 0}};function ts(){const e=Wet({enabled:!0,reason:"user-capabilities"}),t=e.isGovernmentRequestOrigin?"us_government_or_military":"",{data:n}=Vet(t,"user-capabilities");return d.useMemo(()=>{const s=e.isGovernmentRequestOrigin,a={unlimitedProSearch:!!n?.unlimitedProSearch,maxModelSelection:!!n?.maxModelSelection,unlimitedResearch:!!n?.unlimitedResearch,fileUpload:!!n?.fileUpload};return{isGovernmentRequestOrigin:s,specialCapabilities:a}},[e.isGovernmentRequestOrigin,n])}const Hd={DEFAULT:"DEFAULT",GOVERNMENT:"GOVERNMENT"},Ga=({reason:e})=>{const{organization:t}=Hn({reason:e}),{isGovernmentRequestOrigin:n}=ts(),r=t?.settings?.always_incognito,{isIncognitoLocal:s}=In(),a=r||(s??n??!1),i=n?Hd.GOVERNMENT:Hd.DEFAULT;return{isIncognito:a,incognitoType:i}},Het=async({reason:e})=>{try{const{data:t,error:n}=await re.GET("/rest/collections/list_recent",e);if(n)throw new we("API_CLIENTS_ERROR",{cause:n});return t.map(r=>({...r,link:r.link.replace(/^\/collections\//,"/spaces/")}))}catch(t){return ne.error("Failed to get recent collections.",t),ce}},zet=async({headers:e={},params:t,reason:n})=>{const r=await re.GET("/rest/collections/list_user_collections",n,{params:{query:{limit:t.limit,offset:t.offset,version:pl}},timeoutMs:Pe(),headers:e});if(!r.response.ok||!r.data)throw new we("API_CLIENTS_ERROR",{message:"Failed to list user collections",cause:r.error});return r.data},Get=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await re.GET("/rest/collections/get_collection",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:r});if(!s?.status||s?.status==="failed")throw new we("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:s});return s}catch(r){ne.error(r);return}},Wan=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await re.GET("/rest/collections/get_collection_from_group_member",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get collection",cause:r});return s?{collection:s.collection,group_metadata:s.group_metadata,member_metadata:s.member_metadata}:void 0}catch(r){ne.error(r);return}},qet=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await re.PUT("/rest/collections/{collection_uuid}/access",n,{params:{path:{collection_uuid:t.collection_uuid}},headers:e,body:{updated_access:t.updated_access},timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to update collection access",cause:r})}catch(r){ne.error(r)}},Han=async({headers:e={},params:t,reason:n})=>{try{const{error:r}=await re.POST("/rest/collections/{collection_uuid}/remove_user",n,{params:{path:{collection_uuid:t.collectionUUID}},body:{email:t.email},headers:e,timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to remove user from collection",cause:r})}catch(r){ne.error(r)}},zan=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await re.GET("/rest/collections/list_collection_threads",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:r});if(!s||!Array.isArray(s))throw new we("API_CLIENTS_ERROR",{message:"Failed to list collection threads",cause:s});return s}catch(r){return ne.error(r),[]}},Gan=async({reason:e})=>{try{const{error:t,data:n}=await re.GET("/rest/collections/invitations",e,{});if(t)throw new we("API_CLIENTS_ERROR",{message:"Failed to get invited collections",cause:t});return{collections:n.collections}}catch{return{collections:[]}}},kC=async({params:e,reason:t})=>{try{const{error:n,data:r}=await re.POST("/rest/collections/upsert_thread_collection",t,{body:e});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:n});if(!r)throw new we("API_CLIENTS_ERROR",{message:"Failed to upsert thread collection",cause:r});return r}catch{return}},qan=async({params:e,reason:t})=>{try{const{error:n,data:r}=await re.POST("/rest/collections/invite_to_collection",t,{body:e,timeoutMs:Pe()});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to invite user to collection",cause:n});return r}catch{return}},kX=async({collectionUUID:e,entryUUID:t,reason:n})=>{try{const{error:r}=await re.DELETE("/rest/collections/remove_collection_thread",n,{params:{query:{collection_uuid:e,entry_uuid:t}}});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to remove thread from collection",cause:r})}catch{return}},Kan=async({headers:e={},params:t,reason:n})=>{try{const{error:r,data:s}=await re.GET("/rest/collections/get_canonical_collection_contexts",n,{params:{query:t},headers:e,timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get canonical collection contexts",cause:r});return s}catch(r){ne.error(r);return}},bh="recentCollections",Nge=({reason:e})=>{const{isIncognito:t}=Ga({reason:e}),{inFlightLatest:n}=Ft(),{session:r}=mt(),s=r?.user?.email,{data:a,refetch:i}=Ue({queryKey:[bh,s],queryFn:async()=>s?await Het({reason:e}):ce,enabled:!t&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!1,initialData:null});return d.useEffect(()=>{n||i({cancelRefetch:!1})},[n,i]),d.useMemo(()=>!s||t?{data:ce}:{data:a},[a,s,t])},Yan=async({collectionUUID:e,reason:t})=>{const n=await re.POST("/rest/spaces/bookmarks",t,{body:{collection_uuid:e},timeoutMs:Pe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create space bookmark");return r},Qan=async({query:e,reason:t})=>{const{data:n,error:r}=await re.GET("/rest/spaces/bookmarks",t,{params:{query:e}});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to list bookmarked spaces",cause:r});return n},jge=async({params:e,reason:t})=>{const n=await re.GET("/rest/spaces",t,{params:{query:{limit:e.limit,offset:e.offset,category:e.category,version:pl}},timeoutMs:Pe()});if(n.error)throw new we("API_CLIENTS_ERROR",{message:"Failed to list spaces",cause:n.error});return n.data},Ket=async({reason:e})=>{const t=await re.GET("/rest/spaces/mentions",e,{timeoutMs:Pe()});if(t.error)throw new we("API_CLIENTS_ERROR",{message:"Failed to list at mention spaces",cause:t.error});return t.data},Xan=async({collectionUUID:e,reason:t})=>{const n=await re.POST("/rest/spaces/org/pins",t,{body:{collection_uuid:e},timeoutMs:Pe(),numRetries:0}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to create org pinned space");return r},Zan=async({query:e,reason:t})=>{const{data:n,error:r}=await re.GET("/rest/spaces/org/pins",t,{params:{query:e},timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to list org pinned spaces",cause:r});return n},Jan=async({spaceUuid:e,reason:t})=>{const n=await re.GET("/rest/spaces/{space_uuid}/subscription",t,{params:{path:{space_uuid:e}},timeoutMs:Pe(),numRetries:1}),r=n.data;if(!n.response.ok||!r)throw new Error("Failed to get space subscription status");return r.subscribed},Yet=async({reason:e})=>{const t=await re.GET("/rest/collections/list_space_templates",e,{timeoutMs:Pe(),numRetries:1});if(t.error)throw new we("API_CLIENTS_ERROR",{message:"Failed to list space templates",cause:t.error});return t.data},s8=10,TX=["invited","private","shared","saved","organization"];function _h(e){return["spaces","list",e]}function wh(){return["spaces","list","all"]}const Qet=({reason:e})=>{const t=ot(),{data:n,isLoading:r}=Ue({queryKey:wh(),queryFn:()=>jge({params:{offset:0,limit:s8,category:void 0},reason:e})});return d.useEffect(()=>{n&&(n.private_spaces&&t.setQueryData(_h("private"),s=>({...s,pages:[n.private_spaces||[]],pageParams:[0]})),n.shared_spaces&&t.setQueryData(_h("shared"),s=>({...s,pages:[n.shared_spaces||[]],pageParams:[0]})),n.saved_spaces&&t.setQueryData(_h("saved"),s=>({...s,pages:[n.saved_spaces||[]],pageParams:[0]})),n.organization_spaces&&t.setQueryData(_h("organization"),s=>({...s,pages:[n.organization_spaces||[]],pageParams:[0]})),n.invited_spaces&&t.setQueryData(_h("invited"),s=>({...s,pages:[n.invited_spaces||[]],pageParams:[0]})))},[n,t]),d.useMemo(()=>({data:n,isLoading:r}),[n,r])},Xet=({category:e,reason:t})=>Lu({queryKey:_h(e),queryFn:async({pageParam:n})=>{const r=await jge({params:{offset:n,limit:s8,category:e},reason:t});switch(e){case"private":return r.private_spaces;case"shared":return r.shared_spaces;case"saved":return r.saved_spaces;case"organization":return r.organization_spaces;case"invited":return r.invited_spaces;default:throw new Error("Invalid category")}},enabled:!1,getNextPageParam:(n,r,s)=>(s??0)+s8,initialPageParam:0});function ji(){const{firstResult:{backend_uuid:e,context_uuid:t,read_write_token:n}={}}=Ft();return d.useMemo(()=>fge({context_uuid:t,read_write_token:n}),[t,n,e])}const gU={searchTerm:"",updateUserInput:e=>{}},Age=Dt("UserInputStateContext",gU),Zet=({children:e})=>{const[t,n]=d.useState(gU),r=a=>{n(i=>({...i,...a}))},s=d.useMemo(()=>({...t,updateUserInput:r}),[t.searchTerm]);return o.jsx(Age.Provider,{value:s,children:e})},yU=()=>{const e=d.useContext(Age);return e||gU},Ige=20,Bm="list_ask_threads",Jet=10;var ya;(function(e){e[e.NONE=0]="NONE",e[e.READER=1]="READER",e[e.WRITER=2]="WRITER",e[e.EDITOR=5]="EDITOR",e[e.ADMIN=3]="ADMIN",e[e.OWNER=4]="OWNER",e[e.OWNER_DEFAULT_BOOKMARKS=6]="OWNER_DEFAULT_BOOKMARKS",e[e.INVITED_READER=11]="INVITED_READER",e[e.INVITED_WRITER=12]="INVITED_WRITER",e[e.INVITED_EDITOR=15]="INVITED_EDITOR",e[e.INVITED_ADMIN=13]="INVITED_ADMIN"})(ya||(ya={}));function Rge(){return[ya.INVITED_READER,ya.INVITED_WRITER,ya.INVITED_EDITOR,ya.INVITED_ADMIN]}function ett(e){return e===ya.OWNER||e===ya.OWNER_DEFAULT_BOOKMARKS}function Hg(e){return e===ya.OWNER_DEFAULT_BOOKMARKS}function Pge(e){return e>=ya.WRITER&&e<ya.INVITED_READER}function ttt(e){return e>=ya.READER&&e<ya.INVITED_READER}function ntt(e){return e==ya.READER||e==ya.INVITED_READER}function rtt(e){return Rge().includes(e)}function eon(e){if(e===void 0)return{ownerUser:void 0,contributorUsers:[],invitedUsers:[]};const t=e.owner_user,n=e.contributor_users,r=[],s=[],a=Rge();return n?.forEach(i=>{i.permission&&a.includes(i.permission)?r.push(i):s.push(i)}),{ownerUser:t,contributorUsers:s,invitedUsers:r}}var _m;(function(e){e.PageAccessNotAllowed="pageAccessNotAllowed",e.ThreadAccessNotAllowed="threadAccessNotAllowed",e.InvalidThread="invalidThread",e.ThreadExpired="threadExpired",e.ThreadStreamError="threadStreamError",e.CollectionAccessNotAllowed="collectionAccessNotAllowed",e.SpaceAccessNotAllowed="spaceAccessNotAllowed",e.InvalidCollection="invalidCollection",e.SubscriptionAlreadyActive="subscriptionAlreadyActive",e.UnableToGrantAccess="unableToGrantAccess"})(_m||(_m={}));const stt="ENTRY_EXPIRED",NX="VIEW_THREAD_NOT_ALLOWED",ton=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,att=(e,t)=>e.getQueryData(["results"])?.find(r=>r.frontend_context_uuid===t)?.collection_info,ott=(e,t)=>e.getQueryData(wF(t))?.find(r=>r.frontend_context_uuid===t)?.collection_info,itt=(e,t,n)=>{e.setQueryData(wF(t),r=>r&&r.map(n))},ltt=[Ct.OWNER_ONLY,Ct.PRIVATE_READ,Ct.COLLECTION_READ],jX=(e,t,n,r,s)=>{const{entryUUID:a,frontendContextUUID:i,newCollectionUUID:l,newCollectionTitle:c,newCollectionEmoji:u,newCollectionSlug:f,newCollectionAccess:m,newCollectionUserPermission:p}=t,h={collection_info:{uuid:l,title:c,emoji:u,slug:f,access:m,user_permission:p},bookmark_state:"BOOKMARKED"};i&&(s(g=>g?g.map(y=>y.frontend_context_uuid===i?{...y,...h}:y):[]),e.setQueryData([r,{frontend_context_uuid:i}],g=>g?g.map(y=>y.frontend_context_uuid===i?{...y,...h}:y):[])),e.setQueryData(n,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(x=>x.map(v=>v.uuid===a?{...v,collection:{...v.collection,...h.collection_info}}:v));return{...g,pages:y}})},nx=({reason:e})=>{const{searchTerm:t}=yU(),n=ot(),{isEnterprise:r}=Hn({reason:e}),{threadMetadata:s}=Tge(),a=ji(),i=Lt();let l="results";const c=[Bm,{search_term:t??""}],u=[Bm,{search_term:t??""}];let f=c,m=QGe,p=att;const h=n3();let g=d.useCallback((O,D,P)=>{h(A=>A&&A.map(P))},[h]);(i?.startsWith("/page")||i?.startsWith("/discover"))&&(l="articleResults",f=u,m=XGe,p=ott,g=itt);const y=d.useCallback(O=>{const D=!a&&!s?.rwToken;!r||D||h(P=>{if(P)return P.map(A=>{let T=!1,N=Ct.PRIVATE_READ;return O==="add"?(T=ltt.includes(A.thread_access??null),N=cn.isArticleMode(A)?Ct.PRIVATE_READ:Ct.COLLECTION_READ):(T=A.thread_access!==Ct.COLLECTION_READ,N=Ct.PRIVATE_READ),{...A,thread_access:T?A.thread_access:N}})})},[a,s?.rwToken,r,h]),{mutate:x}=dt({mutationFn:async({title:O,description:D,emoji:P,instructions:A,accessLevel:T,existingCollection:N,enableWebByDefault:L,closeModal:U})=>(U(),_Je({collectionUuid:N.uuid,changes:{title:O,description:D,emoji:P,instructions:A,accessLevel:T,enableWebByDefault:L},reason:e})),onMutate:async O=>{const A=["get_collection",{collection_slug:O.existingCollection.slug.slice(-22)}];await n.cancelQueries({queryKey:A});const T=n.getQueryData(A);return n.setQueryData(A,N=>({...N,title:O.title,description:O.description,emoji:O.emoji,instructions:O.instructions,access:O.accessLevel,enable_web_by_default:O.enableWebByDefault})),{previousCollection:T}},onSettled:(O,D,P,A)=>{const N=["get_collection",{collection_slug:P.existingCollection.slug.slice(-22)}];D?n.setQueryData(N,A?.previousCollection):(n.setQueryData(N,L=>({...L,...O})),n.setQueryData(gn,L=>L?.pages?{...L,pages:L.pages.map(U=>U.map($=>$.uuid===P.existingCollection.uuid?{...$,...O}:$))}:L),n.invalidateQueries({queryKey:wh()}),n.invalidateQueries({queryKey:Xv()}))}}),{mutate:v}=dt({mutationFn:async({accessLevel:O,collectionUuid:D})=>{await qet({params:{collection_uuid:D,updated_access:O},reason:e})},onMutate:async O=>{const A=["get_collection",{collection_slug:O.collectionSlug.slice(-22)}];await n.cancelQueries({queryKey:A});const T=n.getQueryData(A);return n.setQueryData(A,N=>({...N,access:O.accessLevel})),{previousCollection:T}},onSettled:async(O,D,P,A)=>{if(D)n.setQueryData(gn,A?.previousCollection);else{const T=P.collectionSlug.slice(-22);await n.invalidateQueries({queryKey:["org_pinned_spaces_query_key"]}),await n.invalidateQueries({queryKey:["get_collection",{collection_slug:T}]}),n.invalidateQueries({queryKey:wh()})}}}),{mutate:b}=dt({mutationFn:async({entryUUID:O,title:D,description:P,emoji:A,instructions:T,accessLevel:N,callback:L,frontendContextUUID:U})=>{const $=await _X({params:{title:D,description:P,emoji:A,instructions:T,accessLevel:N},reason:e});return await kC({params:{new_collection_uuid:$.uuid,entry_uuid:O,return_collection:!1,return_thread:!1},reason:e}),L($),y("add"),{title:D,description:P,emoji:A,instructions:T,accessLevel:N,newCollection:$}},onMutate:async({entryUUID:O,frontendContextUUID:D,...P})=>{await n.cancelQueries({queryKey:f}),await n.cancelQueries({queryKey:gn});const A=n.getQueryData(f),T=n.getQueryData(gn);n.setQueryData(gn,L=>{L=L||{pages:[],pageParams:[]};const U=(L&&L.pages&&L.pages[0])??[],V={...U?.length>0?U[0]:[],...P,uuid:Tl,thread_count:1};return{...L,pages:[[V,...U]]}}),n.setQueryData(f,L=>{L=L||{pages:[],pageParams:[]};const U=L.pages.map($=>$.map(V=>V.uuid===O?{...V,collection:{...V.collection,description:P.description,uuid:Tl,title:P.title,emoji:P.emoji}}:V));return{...L,pages:U}}),n.setQueryData(m(O),L=>{const U=L?.collection_info??{};return{...L,collection_info:{...U,uuid:Tl,description:P.description,title:P.title,emoji:P.emoji}}});let N=null;return D&&(N=p(n,D)??null,g(n,D,L=>L.frontend_context_uuid===D?{...L,collection_info:{...L.collection_info,uuid:Tl,title:P.title,emoji:P.emoji},bookmark_state:"BOOKMARKED"}:L)),{previousThreads:A,previousCollections:T,previousCollectionInfo:N}},onSettled:(O,D,P,A)=>{D?(n.setQueryData(f,A.previousThreads),n.setQueryData(gn,A.previousCollections),P.frontendContextUUID&&g(n,P.frontendContextUUID,T=>T.frontend_context_uuid===P.frontendContextUUID?{...T,collection_info:A?.previousCollectionInfo??null,bookmark_state:A?.previousCollectionInfo?"BOOKMARKED":"NOT_BOOKMARKED"}:T)):(n.invalidateQueries({queryKey:f}),n.invalidateQueries({queryKey:gn}),n.invalidateQueries({queryKey:[bh]}),n.invalidateQueries({queryKey:Xv()}),n.invalidateQueries({queryKey:wh()}),P.frontendContextUUID&&g(n,P.frontendContextUUID,T=>T.frontend_context_uuid===P.frontendContextUUID?{...T,collection_info:{...T.collection_info,uuid:O?.newCollection?.uuid,title:O?.newCollection?.title,emoji:O?.newCollection?.emoji,slug:O?.newCollection?.slug},bookmark_state:"BOOKMARKED"}:T))}}),{mutate:_}=dt({mutationFn:async({title:O,description:D,emoji:P,instructions:A,accessLevel:T,template_id:N,callback:L})=>{const U=await _X({params:{title:O,description:D,emoji:P,instructions:A,accessLevel:T,template_id:N},reason:e});return L(U),{collection:U}},onMutate:async({...O})=>{n.setQueryData(gn,D=>{D=D||{pages:[],pageParams:[]};const P=D.pages[0]||[],A={...P.length>0?P[0]:{},...O,uuid:Tl,thread_count:0};return{...D,pages:[[A,...P]]}})},onSuccess:async()=>{n.refetchQueries({queryKey:gn}),n.invalidateQueries({queryKey:[bh]}),n.invalidateQueries({queryKey:Xv()}),n.invalidateQueries({queryKey:wh()})}}),{mutate:w}=dt({mutationFn:async({entryUUID:O})=>{const D=await kC({params:{entry_uuid:O,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),D},onMutate:async({entryUUID:O,topic:D})=>{const P=n.getQueryData(qc(D));let A;for(const T of P?.pages??[])for(const N of T.threads)if(N.uuid===O){A=N.collection;break}return n.setQueryData(qc(D),T=>{if(T)return{pageParams:T.pageParams,pages:T.pages.map(N=>({...N,threads:N.threads.map(L=>({...L,collection:L.uuid===O?{uuid:Tl,title:"Bookmarks",emoji:"1f516",slug:Tl}:L.collection}))}))}}),{previousCollection:A}},onSettled:(O,D,P,A)=>{const{entryUUID:T,topic:N}=P;if(D||!O)A?.previousCollection&&n.setQueryData(qc(N),L=>{if(L)return{pageParams:L.pageParams,pages:L.pages.map(U=>({...U,threads:U.threads.map($=>({...$,collection:$.uuid===T?A.previousCollection:$.collection}))}))}});else{const{updated_collection:L}=O,{uuid:U,title:$,emoji:V,slug:W}=L;n.setQueryData(qc(N),Q=>{if(Q)return{pageParams:Q.pageParams,pages:Q.pages.map(q=>({...q,threads:q.threads.map(H=>({...H,collection:H.uuid===T?{uuid:U,title:$,emoji:V,slug:W}:H.collection}))}))}})}}}),{mutate:C}=dt({mutationFn:async({entryUUID:O,topic:D,oldCollectionUUID:P})=>(await kX({collectionUUID:P,entryUUID:O,reason:e}),{topic:D}),onMutate:async({entryUUID:O,topic:D})=>{const P=n.getQueryData(qc(D));let A;for(const T of P?.pages??[])for(const N of T.threads)if(N.uuid===O){A=N.collection;break}return n.setQueryData(qc(D),T=>{if(T)return{pageParams:T.pageParams,pages:T.pages.map(N=>({...N,threads:N.threads.map(L=>({...L,collection:L.uuid===O?void 0:L.collection}))}))}}),{previousCollection:A}},onSettled:(O,D,P,A)=>{const{entryUUID:T,topic:N}=P;D&&A?.previousCollection&&n.setQueryData(qc(N),L=>{if(L)return{pageParams:L.pageParams,pages:L.pages.map(U=>({...U,threads:U.threads.map($=>({...$,collection:$.uuid===T?A.previousCollection:$.collection}))}))}})}}),{mutate:S}=dt({mutationFn:async({entryUUID:O,frontendContextUUID:D})=>{const P=await kC({params:{entry_uuid:O,upsert_type:"bookmark",return_collection:!0,return_thread:!1},reason:e});return y("add"),{response:P,entryUUID:O,frontendContextUUID:D}},onMutate:async({frontendContextUUID:O})=>{await n.cancelQueries({queryKey:f}),await n.cancelQueries({queryKey:gn}),h(D=>D&&D.map(P=>P.frontend_context_uuid===O?{...P,bookmark_state:"BOOKMARKED",collection_info:{uuid:null,title:"Bookmarks",emoji:"1f516",slug:null,access:null,user_permission:ya.OWNER_DEFAULT_BOOKMARKS}}:P))},onSettled:async(O,D)=>{if(!O||!O.response?.updated_collection)return;const P=O.response.updated_collection,A=O.entryUUID,T=O.frontendContextUUID,{uuid:N,title:L,emoji:U=null,slug:$,access:V,user_permission:W}=P;await n.cancelQueries({queryKey:f}),await n.cancelQueries({queryKey:gn}),jX(n,{entryUUID:A,frontendContextUUID:T,newCollectionUUID:N,newCollectionTitle:L,newCollectionEmoji:U,newCollectionSlug:$,newCollectionAccess:V,newCollectionUserPermission:W},f,l,h),n.invalidateQueries({queryKey:gn}),n.invalidateQueries({queryKey:f}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:T}]})}}),{mutate:E}=dt({mutationFn:async({entryUUID:O,currentCollectionUUID:D,newCollectionTitle:P,newCollectionUUID:A,newCollectionSlug:T,newCollectionAccess:N,closeModal:L,callback:U})=>{if(A!==Tl)return L(),await kC({params:{new_collection_uuid:A,entry_uuid:O,return_collection:!1,return_thread:!1},reason:e}),U?.(),y("add"),{entryUUID:O,currentCollectionUUID:D,newCollectionTitle:P,newCollectionUUID:A,newCollectionSlug:T,newCollectionAccess:N,closeModal:L}},onMutate:async({entryUUID:O,frontendContextUUID:D,currentCollectionUUID:P,newCollectionUUID:A,newCollectionTitle:T,newCollectionEmoji:N,newCollectionSlug:L,newCollectionAccess:U,newCollectionUserPermission:$})=>{await n.cancelQueries({queryKey:f}),await n.cancelQueries({queryKey:gn});const V=n.getQueryData(f),W=n.getQueryData(gn);return jX(n,{entryUUID:O,frontendContextUUID:D,newCollectionUUID:A,newCollectionTitle:T,newCollectionEmoji:N,newCollectionSlug:L,newCollectionAccess:U,newCollectionUserPermission:$},f,l,h),n.setQueryData(gn,Q=>{Q=Q||{pages:[],pageParams:[]};const q=Q.pages.map(H=>H.map(K=>K.uuid===P?{...K,thread_count:K.thread_count-1}:K.uuid===A?{...K,thread_count:K.thread_count+1}:K));return{...Q,pages:q}}),{previousThread:V,previousCollections:W}},onSettled:(O,D,P,A)=>{if(D)n.setQueryData(f,A.previousThread),n.setQueryData(gn,A.previousCollections);else{const N={collection_slug:P.existingCollectionSlug?.slice(-22)},L={collection_slug:P.newCollectionSlug.slice(-22)},U=[lu,N],$=[lu,L];n.invalidateQueries({queryKey:["get_collection",L]}),n.invalidateQueries({queryKey:U}),n.refetchQueries({queryKey:$}),n.refetchQueries({queryKey:m(P.entryUUID)}),n.invalidateQueries({queryKey:gn}),n.invalidateQueries({queryKey:f}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:P.frontendContextUUID}]}),n.invalidateQueries({queryKey:[bh]})}}}),{mutate:k}=dt({mutationFn:async({entryUUID:O,oldCollectionUUID:D,callback:P})=>{if(D)return await kX({collectionUUID:D,entryUUID:O,reason:e}),P?.(),y("remove"),{entryUUID:O,oldCollectionUUID:D}},onMutate:async({entryUUID:O,oldCollectionUUID:D,frontendContextUUID:P,collectionSlug:A})=>{await n.cancelQueries({queryKey:f}),await n.cancelQueries({queryKey:gn});const T=n.getQueryData(f),N=n.getQueryData(gn);return P&&(h(L=>L?L.map(U=>U.frontend_context_uuid===P?{...U,collection_info:void 0,bookmark_state:"NOT_BOOKMARKED"}:U):[]),n.setQueryData([l,{frontend_context_uuid:P}],L=>L?L.map(U=>U.frontend_context_uuid===P?{...U,collection_info:null,bookmark_state:"NOT_BOOKMARKED"}:U):[])),n.setQueryData(f,L=>{L=L||{pages:[],pageParams:[]};const U=L.pages.map($=>$.map(V=>O===V.uuid&&V.collection?.uuid===D?{...V,collection:null}:V));return{...L,pages:U}}),n.setQueryData(gn,L=>{L=L||{pages:[],pageParams:[]};const U=L.pages.map($=>$.map(V=>V.uuid===D?{...V,thread_count:V.thread_count-1}:V));return n.setQueryData(m(O),$=>$&&Array.isArray($.pages)?{...$,pages:$.pages.map(V=>V.map(W=>W.uuid===O?{...W,collection_info:null}:W))}:{...$,collection_info:null}),{...L,pages:U}}),A&&n.setQueryData([lu,{collection_slug:A.slice(-22)}],(L={pages:[],pageParams:[]})=>({...L,pages:L.pages.map(U=>U.filter($=>$.uuid!==O))})),{previousThreads:T,previousCollections:N}},onSettled:(O,D,P,A)=>{if(D)n.setQueryData(f,A.previousThreads),n.setQueryData(gn,A.previousCollections);else if(n.invalidateQueries({queryKey:m(P.entryUUID)}),n.invalidateQueries({queryKey:f}),n.invalidateQueries({queryKey:gn}),n.invalidateQueries({queryKey:["results"]}),n.invalidateQueries({queryKey:[bh]}),n.invalidateQueries({queryKey:[l,{frontend_context_uuid:P.frontendContextUUID}]}),P.collectionSlug){const T={collection_slug:P.collectionSlug.slice(-22)},N=[lu,T];n.invalidateQueries({queryKey:N}),n.invalidateQueries({queryKey:["get_collection",T]})}}}),{mutate:M}=dt({mutationFn:async O=>{await wJe({collectionUuid:O,reason:e})},onSuccess:(O,D)=>{n.invalidateQueries({queryKey:gn}),n.invalidateQueries({queryKey:[bh]}),n.invalidateQueries({queryKey:Xv()}),n.invalidateQueries({queryKey:wh()}),n.setQueryData(gn,P=>!P||!P.pages?P:{...P,pages:P.pages.map(A=>A.filter(T=>T.uuid!==D))})}}),{mutate:j}=dt({mutationFn:async({collectionUuid:O,link:D,reason:P})=>{const{data:A,error:T}=await re.POST("/rest/collections/focused_web_config/links",P,{timeoutMs:Pe(),body:{collection_uuid:O,link:D},numRetries:1});if(T)throw new we("API_CLIENTS_ERROR",{cause:T,details:{reason:P}});return A},onSettled:(O,D,P,A)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:P.collectionSlug.slice(-22)}]})}}),{mutate:R}=dt({mutationFn:async({collectionUuid:O,link:D,reason:P})=>{await re.DELETE("/rest/collections/focused_web_config/links",P,{body:{collection_uuid:O,link:D},timeoutMs:Pe(),numRetries:1})},onSettled:(O,D,P,A)=>{n.invalidateQueries({queryKey:["get_collection",{collection_slug:P.collectionSlug.slice(-22)}]})}});return d.useMemo(()=>({updateCollectionInfo:x,updateCollectionAccessLevel:v,createCollectionForThread:b,createCollection:_,bookmarkFromFeed:w,removeBookmarkFromFeed:C,firstTimeBookmark:S,swapThreadCollection:E,removeThreadFromCollection:k,deleteCollection:M,addLink:j,removeLink:R}),[j,w,b,_,M,S,C,R,k,E,v,x])},xU=()=>{const{$t:e}=Z(),t=vt(),{createCollection:n,createCollectionForThread:r}=nx({reason:"create-new-space"}),s=d.useCallback(()=>{const i=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});n({title:i,description:"",emoji:"",instructions:"",accessLevel:mE,enableWebByDefault:!0,callback:l=>{t.push(`/spaces/${l.slug}`)}})},[n,e,t]),a=d.useCallback((i,l)=>{const c=e({defaultMessage:"New Space",id:"t5xj3BH/Ni"});r({title:c,description:"",emoji:"",instructions:"",accessLevel:mE,enableWebByDefault:!0,entryUUID:i,frontendContextUUID:l,callback:u=>{t.push(`/spaces/${u.slug}`)}})},[r,e,t]);return d.useMemo(()=>({handleCreateNewSpace:s,handleCreateNewSpaceForThread:a}),[s,a])};function vU(){const{value:e}=jt({flag:"spaces-creation-redesign",subjectType:"user_nextauth_id",defaultValue:!1});return e}function ctt(e){const t=new Uint8Array(e);return Array.from(t).map(n=>n.toString(16).padStart(2,"0")).join("")}async function utt(e){const n=new TextEncoder().encode(e);return await crypto.subtle.digest("SHA-256",n)}async function dtt(e){const t=await utt(e);return ctt(t)}const ftt=async({reason:e})=>{try{const{data:t,error:n}=await re.POST("/rest/attribution/comet/session",e,{timeoutMs:Pe(),numRetries:1});if(n)throw n;return{success:t.success}}catch(t){return ne.error("Failed to start Comet session",t),{success:!1}}},mtt=async({eventName:e,reason:t})=>{try{const{data:n,error:r}=await re.POST("/rest/attribution/comet/event/{event_name}",t,{timeoutMs:Pe(),params:{path:{event_name:e}}});if(r)throw r;return{success:n?.success??!1}}catch(n){return ne.error("Failed to send Comet event",n),{success:!1}}},Lge=Dt("SingularAttributionContext",{sendQueryEventSingular:()=>Promise.resolve(),maybeSendNthQueryEventSingular:()=>Promise.resolve(),sendSubscribedEventSingular:()=>Promise.resolve(),sendSubscribedPayingEventSingular:()=>Promise.resolve(),sendAppDownloadClickedEventSingular:()=>Promise.resolve(),sendResurrectedActivationEventSingular:()=>Promise.resolve(),sendCometDownloadPageLoadEventSingular:()=>Promise.resolve(),sendCometDownloadPageSignInEventSingular:()=>Promise.resolve(),sendCometDownloadedEventSingular:()=>Promise.resolve(),sendCometDownloadButtonClickedEventSingular:()=>Promise.resolve(),sendCometWaitlistButtonClickedEventSingular:()=>Promise.resolve(),sendCometDownloadLinkEmailEventSingular:()=>Promise.resolve(),sendSubscribedMaxEventSingular:()=>Promise.resolve()}),AX={1:"activated",3:"true activated",5:"quality activated",10:"super activated"},IX={1:"first comet query",3:"third comet query"},ptt="ai.testing.perplexity",htt="ai.perplexity",Oge=async(e,t)=>{if(!e)return null;const n=new Date;n.setMilliseconds(0);const r=`${e}-${n.toISOString()}-${t}`;return await dtt(r)},gtt=async({productId:e,visitorId:t,userId:n})=>{const{SingularConfig:r,singularSdk:s}=await X(async()=>{const{SingularConfig:c,singularSdk:u}=await import("./singular-sdk-CHVvA4e9.js").then(f=>f.s);return{SingularConfig:c,singularSdk:u}},[]),a=new r("perplexity_ai_039eb8fb","1e0179ca95965b57a3e91c1cf3049b64",e);n&&a.withCustomUserId(n),s.init(a);const i="initialized singular",l=await Oge(t,i);return s.event(i,{visitorId:t,eventId:l}),s},ytt=({children:e})=>{const{session:t}=mt(),n=Sn(nE),{env:{isProduction:r,isStaging:s},device:{isMobile:a}}=Pt(),i=d.useRef([]),l=d.useRef([]),c=Ot(),[u,f]=d.useState(void 0);d.useEffect(()=>{const g=t?.user?.id,y=r||s?htt:ptt;n&&gtt({userId:g,productId:y,visitorId:n}).then(x=>{!x||(f({sdk:x}),!g||!Ks())||UR()>1||ftt({reason:"comet attribution"})})},[r,s,t?.user?.id,n]);const m=d.useCallback(async(g,y)=>{if(!u){i.current.push({name:g,extraArguments:y});return}if(!n)return;const x=await Oge(n,g),v={...y,visitorId:n,eventId:x,isMobile:a};l.current.includes(g)||(u.sdk.event(g,v),l.current.push(g))},[u,n,a]),p=d.useCallback(async({isCometBrowser:g})=>{const y=wO(),x=UR(),v=Ole();y&&AX[y]&&await m(AX[y]),x&&IX[x]&&await m(IX[x]),g&&v===1&&mtt({eventName:"activated",reason:"comet attribution"})},[m]),h=d.useCallback(async g=>{await m("user sign in",{isNewUser:g}),t?.user?.id&&u&&u.sdk.login(t.user.id)},[t?.user?.id,u,m]);return d.useEffect(()=>{u&&i.current.length>0&&(i.current.filter((y,x,v)=>x===v.findIndex(b=>b.name===y.name)).forEach(({name:y,extraArguments:x})=>{m(y,x)}),i.current=[])},[u,m]),d.useEffect(()=>{if(c?.get(Ou)&&c?.get(pE)){const g=c?.get(pE)==="true";h(g),g?(m("new user sign in"),t?.user?.id&&u?.sdk.setMatchID(t.user.id)):m("existing user sign in"),Ks()&&m("comet user sign in")}},[c,h,m,t?.user?.id,u?.sdk]),o.jsx(Lge.Provider,{value:d.useMemo(()=>({sendQueryEventSingular:()=>m("query submitted"),maybeSendNthQueryEventSingular:p,sendSubscribedEventSingular:()=>m("user subscribed"),sendSubscribedPayingEventSingular:()=>m("user subscribed paying"),sendAppDownloadClickedEventSingular:g=>m("app download button clicked",{origin:g}),sendResurrectedActivationEventSingular:()=>m("resurrected activated"),sendCometDownloadPageLoadEventSingular:g=>m(`${g} page loaded`),sendCometDownloadPageSignInEventSingular:g=>m(`${g} page signed in`),sendCometDownloadedEventSingular:()=>m("download-comet comet downloaded"),sendCometDownloadButtonClickedEventSingular:g=>m(`${g} download button clicked`),sendCometWaitlistButtonClickedEventSingular:g=>m(`${g} waitlist button clicked`),sendCometDownloadLinkEmailEventSingular:g=>m(`${g} send download link`),sendSubscribedMaxEventSingular:()=>m("user subscribed max")}),[m,p]),children:e})},bU=()=>{const e=d.useContext(Lge);if(!e)throw new Error("useSingularAttribution must be used within SingularAttributionContext");return e};var xtt={};const vtt=e=>{e=e??"mac_arm64";const t={channel:"stable",platform:e};e.includes("win")&&(t.mini="1");const n=new URLSearchParams(t),r=new URL(xtt.NEXT_PUBLIC_COMET_DOWNLOAD_URL??"https://www.perplexity.ai/rest/browser/download");return r.search=n.toString(),r},Dge=({isUnsupportedDevice:e,isWindows:t})=>{const{trackEvent:n}=Te(),{sendCometDownloadedEventSingular:r,sendCometDownloadButtonClickedEventSingular:s}=bU(),{openToast:a}=fn(),{openModal:i}=xt(),{$t:l}=Z(),c=d.useCallback(async(p,h)=>{a({message:l({defaultMessage:"Comet download started. Look for Comet in Downloads.",id:"cWKaRwkkE8"}),variant:"success",timeout:5}),p||i("cometDownloadInstructionsModal",{requestedPlatform:h})},[a,l,i]),u=d.useCallback(async(p,{upsellName:h,partnerCode:g,preventDownloadInstructionsModal:y})=>{c(y,p),P9e(),n("click download comet",{requestedPlatform:p,upsellName:h,installPartner:g}),r(),setTimeout(()=>pa(vtt(p).href,"Comet download"),250)},[n,r,c]),f=d.useCallback(({upsellName:p,partnerCode:h,preventDownloadInstructionsModal:g})=>{if(!e)return t?u("win_x64",{upsellName:p,partnerCode:h,preventDownloadInstructionsModal:g}):u("mac_arm64",{upsellName:p,partnerCode:h,preventDownloadInstructionsModal:g})},[u,t,e]),m=d.useCallback(({upsellName:p,partnerCode:h})=>{s("download-comet"),f({upsellName:p,partnerCode:h})},[s,f]);return{handleDownload:f,handleDownloadClick:m}},Jo=()=>{const e=et(),{isMax:t}=St(),{openModal:n}=xt();return d.useCallback(s=>{if(!e){ne.warn("User is not logged in, skipping paywall upsell",s);return}if(t){ne.warn("User is on Max tier, skipping paywall upsell",s);return}n("pricingModal",s)},[e,n,t])},RX=`__merge-ah-script__${crypto.randomUUID()}`,btt=lp(function(){return new Promise((t,n)=>{if(document.getElementById(RX))return t();const r=document.createElement("script");r.src="https://ah-cdn.merge.dev/initialize.js",r.id=RX,r.onload=()=>t(),r.onerror=n,document.body.appendChild(r)})});function Fge(e){const t=d.useCallback(async()=>{const r=e?.linkToken;if(!r)throw new Error("Link token is required");await btt(),await new Promise(s=>{window.AgentHandlerLink.initialize({...e,linkToken:r,onReady:()=>s()})})},[e]);return d.useCallback(async()=>{await t(),window.AgentHandlerLink&&window.AgentHandlerLink.openLink(e)},[e,t])}const _U=({serverName:e,iconUrl:t,size:n="md",border:r=!1})=>t?o.jsx("img",{src:t,alt:`${e} Logo`,className:B("object-contain",n==="sm"&&"size-5",n==="md"&&"p-xs size-12",r&&"ring-subtlest rounded-md ring-1")}):o.jsx(p7e,{className:B(n==="sm"&&"size-4",n==="md"&&"p-xs size-12",r&&"ring-subtlest rounded-md ring-1")}),_tt=["ppl-ai-file-upload","ppl-ai-sandbox-file-upload","ppl-ai-experimental-file-upload"],Uge=e=>_tt.some(t=>e.url.includes(`${t}.s3.amazonaws.com/web/direct-files`));var a8;(function(e){e.token_limit_exceeded="token_limit_exceeded",e.parsing_error="parsing_error",e.unknown_error="unknown_error",e.unauthorized="unauthorized",e.no_data_received="no_data_received",e.file_type_not_supported="file_type_not_supported",e.image_failed_moderation="image_failed_moderation"})(a8||(a8={}));var A0;(function(e){e.generic_upload_error="generic_upload_error",e.unsupported_type="unsupported_type",e.too_large="too_large",e.too_small="too_small",e.no_name="no_name",e.failed_moderation="failed_moderation",e.rate_limited="rate_limited",e.over_file_count="over_file_count",e.over_image_count="over_image_count"})(A0||(A0={}));const f2=e=>{if(w_(e))return"application/pdf";const n=e.split("?")[0].split("#")[0].split(".").pop()?.toLowerCase();return n&&{png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",jpe:"image/jpeg",jp2:"image/jp2",gif:"image/gif",bmp:"image/bmp",tiff:"image/tiff",tif:"image/tiff",svg:"image/svg+xml",webp:"image/webp",ico:"image/x-icon",avif:"image/avif",heic:"image/heic",heif:"image/heif",pdf:"application/pdf",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",txt:"text/plain",csv:"text/csv",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",md:"text/markdown"}[n]||"application/octet-stream"},wtt=e=>{const t=e.file_metadata?.file_repository_type;return e.is_attachment&&!t&&!e.meta_data?.file_uuid},Ctt=e=>{if(!e)return!1;try{return new URL(e).hostname.includes("s3.amazonaws.com")}catch{return!1}},wl=Qe({token_limit_exceeded:{id:"cnFlyTXVDl",defaultMessage:"File {filename} exceeds the model's token limit."},parsing_error:{id:"RdRRX8+YG/",defaultMessage:"Failed to parse file {filename}."},file_type_not_supported:{id:"IaflMSTTq6",defaultMessage:"File type not supported for {filename}."},unknown_error:{id:"zhy7qBi3Eu",defaultMessage:"Unknown error for file {filename}."},unauthorized:{id:"6bOe+cTUhc",defaultMessage:"User not authorised to access file {filename}."},no_data_received:{id:"34PXW7VvKh",defaultMessage:"No data received for file {filename}."},generic_upload_error:{id:"xVFvYDY5wK",defaultMessage:"File upload failed"},unsupported_type:{id:"VUOyYEDS96",defaultMessage:"The file type you uploaded is not supported."},too_large:{id:"XBcIjOYq8V",defaultMessage:"File too large: {max} maximum."},too_small:{id:"ZUyiNCx0Aw",defaultMessage:"File too small."},no_name:{id:"IkAmckATMw",defaultMessage:"File name is required."},image_failed_moderation:{id:"YCCLnMQDPb",defaultMessage:"File {filename} failed moderation."},failed_moderation:{id:"hnN6c9ExET",defaultMessage:"File upload failed moderation."},rate_limited:{id:"el7NlqcDQZ",defaultMessage:"You have reached the daily upload limit for your plan."},over_file_count:{id:"2+5sg16GUy",defaultMessage:"You are allowed up to {maxNumFiles, plural, one {# file} other {# files}} at once."},over_image_count:{id:"FIudmpgA1s",defaultMessage:"You are allowed up to {maxNumImages, plural, one {# image} other {# images}} at once."}}),r3=e=>{if(e.startsWith("/rest/connectors/wiley/"))return"WILEY";if(e.includes("drive.google.com")||e.includes("connectors/google-drive")||e.includes("docs.google.com"))return"GOOGLE_DRIVE";if(e.includes("onedrive.live.com")||e.includes("1drv.ms")||e.includes("connectors/onedrive"))return"ONEDRIVE";if(e.includes(".sharepoint.com")||e.includes("connectors/sharepoint"))return"SHAREPOINT";if(e.includes("dropbox.com/preview")||e.includes("connectors/dropbox"))return"DROPBOX";if(e.includes("app.box.com/file")||e.includes("connectors/box"))return"BOX"},Bge=e=>!!(e?.meta_data?.connection_type&&e?.meta_data.connection_type!=="LOCAL")||e.is_attachment&&!!r3(e.url),rx=e=>e.is_attachment&&(Uge(e)||wm(e.url)||w_(e.url)),$ge=e=>e.trim().replace(/\/+$/,"").replace(/^(?:https?:\/\/)?(?:www\.)?/,""),non=e=>!!new RegExp("^((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,})(\\/[\\w\\-._~:/@!$&'()*+,;=%.]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e);function Xs(e){const t=/(?:https?:\/\/)?(?:www\.)?([a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*(?:\.[a-zA-Z]{2,})?|localhost|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::\d+)?/,n=e.match(t);return n&&n.length>0?n[1]||n[0]:"unknown"}function wU(e){const t=Xs(e);return t==="unknown"?"unknown":t.replace(/\.[^.]*$/,"")}function __(e){return e.includes("calendar.google.com")||e.includes("google.com/calendar")?"https://calendar.google.com":e.includes("mail.google.com")||e.includes("google.com/mail")?"https://mail.google.com":ktt(e)?"www.perplexity.ai":Xs(e)}function ron(e){return e.startsWith("http://")||e.startsWith("https://")?e:`https://${e}`}function sx(e){const t=["(?:youtube?\\.com\\/","(?:[^/\\n\\s]+\\/\\S+\\/","|(?:v|e(?:mbed)?)\\/","|\\S*?[?&]v=",")","|youtu\\.be\\/",")([a-zA-Z0-9_-]{11})"].join(""),n=new RegExp(t),r=e.match(n);if(r&&r[1].length==11)return r[1]}const son=e=>e.indexOf("unsplash.com")>-1;function wm(e){return e.startsWith("https://pplx-res.cloudinary.com/")||e.startsWith("https://api.cloudinary.com/v1_1/pplx/image/download")}function w_(e){return e.startsWith("https://image-ppubs.uspto.gov/")}function aon(e){return e.includes("code-interpreter-files.s3.amazonaws.com")||e.includes("pplx_code_interpreter")}function oon(e){return e.includes("user-gen-media-assets")}function o8(e){return e.replace(/\/s--[^/]+--\/v\d+\//,"/")}function CU(e){return!rx(e)&&!!e.url&&!sx(e.url)&&!wm(e.url)&&!e.is_memory&&!e.is_conversation_history}const s3=e=>{try{const r=new URL(e).pathname.replace(/^\//,"").split("/"),s=r[r.length-1];return decodeURIComponent(s)}catch{return"File"}},Stt=e=>{const t=e,n=t.indexOf("/"),r=Math.max(23,n+16);return t.length>r?t.substring(0,r-1)+"":t},Ett=(e,t)=>`https://www.google.com/maps/dir/?api=1&destination=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`,Mtt=(e,t)=>`https://www.google.com/maps/search/?api=1&query=${encodeURIComponent([e,t].filter(Boolean).join(", "))}`;function Vge(e,t){let n=e;const r=e.match(/{([^}]+)}/g)||[];for(const s of r){const a=s.slice(1,-1);t[a]!==void 0?n=n.replace(s,t[a]):n=n.replace(s,"")}try{return new URL(n).toString()}catch{return n}}function ion(e){return e.includes("https://openai.com/index/image-generation-api/")}function ktt(e){return e.startsWith("chrome://")||e.startsWith("chrome-extension://")||e.startsWith("browser-extension://")||e.startsWith("browser://")||e.startsWith("comet://")}const lon=e=>e.replace("comet://","chrome://"),Wge=e=>{if(!e)return null;try{return new URL(e)}catch{return null}},Ttt=async e=>{const t=[];return await Promise.all(e.map(async n=>{try{(await fetch(n,{method:"HEAD"})).ok&&t.push(n)}catch(r){console.debug(`URL ${n} is not reachable:`,r)}})),t},SU=e=>{try{const t=new URL(e);return["AWSAccessKeyId","Signature","Expires"].every(n=>t.searchParams.has(n))}catch{return!1}},i8=e=>{if(!e)return"";const t=e.indexOf("?");return(t===-1?e:e.substring(0,t)).replace(/\/+$/,"")},con=e=>{try{return new URL(e).origin===window.location.origin}catch{return!1}},Ntt=()=>typeof window<"u"&&window.location?.origin?window.location.origin:"https://www.perplexity.ai",PX=e=>{const t=Ntt();return Wge(`${t}${e}`)?.href||`${t}${e}`},jtt=()=>[{id:"imessage",icon_url:PX("/static/mcpb/imessage.png"),download_url:PX("/static/mcpb/imessage_v0.0.10.mcpb"),manifest:{$schema:"https://static.modelcontextprotocol.io/schemas/2025-08-26/mcpb.manifest.schema.json",dxt_version:"0.1",name:"imessage",display_name:"Messages",version:"0.0.10",description:"Send and read messages using Apple's Messages app",long_description:`This tool lets Perplexity work with your Mac's Messages app. You can send messages, read messages, and ask Perplexity to help you understand what's important.

It uses Mac system features to connect to Messages. Your Mac will ask for permission before it can access Messages or Contacts. This is not made by Apple.`,license:"MIT",author:{name:"Perplexity Inc",email:"support@perplexity.ai",url:"https://www.perplexity.ai/"},homepage:"https://www.perplexity.ai/",icon:"icon.png",tools:[{name:"list_contacts",description:'List contacts. When query is provided, search for contacts by name. Use it first to get a handle id, phone numbers, or emails. This tool is more preferred to be used first than "list_chats" tool. If this tool returns empty results, try to use "list_chats" tool to find a contact.'},{name:"list_chats",description:"List chats from Messages. When query is provided, search for chats by phone number (preferrable) or chat name (if phone number is not available)."},{name:"create_chat",description:"Create a new chat with a specific contact"},{name:"read_chat",description:"Read Messages from a specific chat"},{name:"send_imessage",description:"Send a Message to specific chat"}],server:{type:"node",entry_point:"server/index.js",mcp_config:{command:"node",args:["${__dirname}/server/index.js"],env:{HOME:"${HOME}"}}},compatibility:{comet:">=139.0.0",platforms:["darwin"],runtimes:{node:">=22.0.0"},permissions:{full_disk_access:!0,contacts:{for_tools:["list_contacts"]}}}}}],EU=()=>{const e=Hr(),t=d.useMemo(()=>{if(!e.platformInfo)return;const{isMac:n,isWindows:r,isLinux:s}=e.platformInfo;if(n)return"darwin";if(r)return"win32";if(s)return"linux"},[e.platformInfo]);return Ue({queryKey:["comet/available_dxts",t],queryFn:async()=>jtt().filter(n=>n.manifest.compatibility?.platforms?t&&n.manifest.compatibility.platforms.includes(t):!0)})},Hge=(e,t)=>t.dxt_name?e?.find(n=>n.id===t.dxt_name)?.icon_url:void 0,Att={tiny:"xs",small:"sm",default:"base",large:"lg"},Itt={tiny:14,small:16,default:20,large:24};function Oa({icon:e,size:t}){return typeof e=="string"?o.jsx(Wle,{name:e,size:Itt[t]}):o.jsx(de,{icon:e,size:Att[t]})}function ax(e){return o7e(e,["aria-checked","aria-describedby","aria-disabled","data-disabled","data-highlighted","data-orientation","data-state","onBlur","onClick","onFocus","onKeyDown","onMouseDown","onPointerDown","onPointerEnter","onPointerLeave","onPointerMove","onPointerUp","onTouchStart","tabIndex"])}const Rtt=8,Ptt=10,Ltt=Iu(["max-w-[280px]","bg-dark dark:border dark:border-subtler","px-2 py-1.5","rounded-md","shadow-sm"],{variants:{side:{top:"data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn",bottom:"data-[state=closed]:animate-slideUpAndFadeOut data-[state=delayed-open]:animate-slideDownAndFadeIn",left:"data-[state=closed]:animate-slideRightAndFadeOut data-[state=delayed-open]:animate-slideLeftAndFadeIn",right:"data-[state=closed]:animate-slideLeftAndFadeOut data-[state=delayed-open]:animate-slideRightAndFadeIn"}},defaultVariants:{side:"top"}});function zge({content:e,side:t="top",align:n="center",open:r,onOpenChange:s,children:a,shouldShowArrow:i=!1,delayDurationMs:l=700,...c}){const u=ax(c);return o.jsxs($D,{open:r,onOpenChange:s,delayDuration:l,children:[o.jsx(Mfe,{asChild:!0,...u,children:a}),o.jsx(kfe,{children:o.jsxs(Tfe,{side:t,align:n,sideOffset:Rtt,avoidCollisions:!0,collisionPadding:Ptt,className:Ltt({side:t}),children:[o.jsx("span",{className:"text-xs font-medium leading-loose text-white",children:e}),i&&o.jsx(Nfe,{width:12,height:6,className:"overflow-hidden -translate-y-two [clip-path:inset(1px_1px_0px_1px)] fill-[oklch(var(--dark-background-base-color))] dark:stroke-[1.5px] dark:stroke-subtler"})]})})]})}function MU(e){const t=d.useRef(null),n=d.useMemo(()=>({getBoundingClientRect:()=>t.current?.getBoundingClientRect()??DOMRect.fromRect({}),focus:()=>{t.current?.focus()},addEventListener:(r,s,a)=>{t.current?.addEventListener(r,s,a)},removeEventListener:(r,s,a)=>{t.current?.removeEventListener(r,s,a)},contains:r=>t.current?.contains(r)??!1}),[]);return d.useImperativeHandle(e,()=>n,[n]),t}function F1({ref:e,className:t,children:n,type:r="button",...s}){return o.jsx("button",{...s,type:r,ref:e,className:B("reset interactable",t),children:n})}const NE=Iu("select-none font-semimedium font-sans text-center items-center justify-center leading-loose whitespace-nowrap",{variants:{variant:{primary:"bg-super border border-transparent text-inverse",secondary:"text-quiet border border-solid border-subtler bg-base",tonal:"bg-subtle border border-transparent text-foreground",text:"text-quiet"},size:{large:"h-14 text-lg",default:"h-10 text-base",small:"h-8 text-sm",tiny:"h-6 text-xs"},disabled:{false:"cursor-pointer origin-center",true:"cursor-default opacity-50"},fullWidth:{true:"flex w-full",false:"inline-flex"},rounded:{true:"rounded-full aspect-square p-0",false:""},pill:{true:"rounded-full",false:""}},compoundVariants:[{variant:["text"],disabled:!1,class:"hover:bg-subtle hover:text-foreground"},{variant:["primary"],disabled:!1,class:"hover:opacity-80"},{variant:["secondary"],disabled:!1,class:"hover:border-subtle hover:bg-subtler"},{variant:["tonal"],disabled:!1,class:"hover:bg-subtle"},{rounded:!1,size:"large",class:"px-6"},{rounded:!1,size:"default",class:"px-4"},{rounded:!1,size:"small",class:"px-3"},{rounded:!1,size:"tiny",class:"px-2"},{rounded:!1,pill:!1,size:"large",class:"rounded-xl"},{rounded:!1,pill:!1,size:"default",class:"rounded-lg"},{rounded:!1,pill:!1,size:"small",class:"rounded-lg"},{rounded:!1,pill:!1,size:"tiny",class:"rounded-md"}],defaultVariants:{variant:"primary",size:"default",disabled:!1,fullWidth:!1,rounded:!1,pill:!1}});function hs({ref:e,children:t,icon:n,"aria-label":r,variant:s="primary",size:a="default",disabled:i=!1,fullWidth:l=!1,onClick:c,leadingIcon:u,trailingIcon:f,pill:m=!1,rounded:p=!1,__dangerousHtmlProps:h={},...g}){const y=MU(e),x=ax(g);if(n){const v=o.jsx(F1,{ref:y,...x,disabled:i,className:NE({variant:s,size:a,disabled:i,fullWidth:!1,rounded:p,pill:!1}),onClick:c,"aria-label":r,...h,children:o.jsx(Oa,{icon:n,size:a})});return i?v:o.jsx(zge,{content:r,children:v})}return o.jsxs(F1,{ref:y,...x,disabled:i,className:NE({variant:s,size:a,disabled:i,fullWidth:l,rounded:!1,pill:m}),onClick:c,"aria-label":r,...h,children:[u&&o.jsx("div",{className:"mr-1",children:o.jsx(Oa,{icon:u,size:a})}),o.jsx("span",{className:B({"pl-1":u,"pr-1":f}),children:t}),f&&o.jsx("div",{className:"ml-1",children:o.jsx(Oa,{icon:f,size:a})})]})}const Ott=({permission:e,connectorName:t})=>{const{$t:n}=Z();return d.useMemo(()=>{if(!e)return null;switch(e){case"full_disk_access":return{title:n({defaultMessage:"Comet needs full disk access",id:"KaK1awrgFQ"}),description:n(t?{defaultMessage:"To use this connector, Comet needs permission to access your disk. Enable it in System Settings.",id:"O9WzUyHg3f"}:{defaultMessage:"To use all your connectors, Comet needs permission to access your disk. Enable it in System Settings.",id:"xusC3M5hQD"}),videoUrl:"https://r2cdn.perplexity.ai/comet/toggle-permission.mp4",tooltipTitle:n({defaultMessage:"Full disk access required",id:"ry8L5i2JdM"}),tooltipDescription:n({defaultMessage:"Turn on disk access in System Settings to use this connector",id:"zQpOIZuVrk"}),buttonText:n({defaultMessage:"Open System Settings",id:"U/a2e7uAwk"})};case"contacts":return{title:n({defaultMessage:"Comet needs access to your contacts",id:"Gh5VRh+h5k"}),description:n(t?{defaultMessage:"To use this connector, Comet needs permission to access your contacts.",id:"lbQ3o1etQa"}:{defaultMessage:"To use all your connectors, Comet needs permission to access your contacts.",id:"WgPxDUwZSj"}),videoUrl:"https://r2cdn.perplexity.ai/comet/toggle-permission.mp4",tooltipTitle:n({defaultMessage:"Contacts permission required",id:"QKFGSziMOF"}),tooltipDescription:n({defaultMessage:"Grant contacts permission to use this connector",id:"uMNpHxa2KQ"}),buttonText:n({defaultMessage:"Grant Access",id:"Xq5/HeHSIt"})};default:return null}},[n,t,e])},Gge=({connectorName:e,permission:t,cometAdapter:n})=>{const r=d.useMemo(()=>["comet/permission",t],[t]),s=Ue({queryKey:r,queryFn:async()=>t?n.hasPermission(t):null}),a=ot(),i=dt({mutationKey:r,mutationFn:async()=>t?n.requestPermission(t):null,onSuccess:c=>{a.setQueryData(r,c)}}),l=Ott({permission:t,connectorName:e});return d.useMemo(()=>({renderData:Hpe(s)?l:null,isRequestingPermission:i.isPending,requestPermission:()=>i.mutateAsync()}),[s,i,l])},l8=e=>{const t=Number(e);return isNaN(t)?(console.log(`formatNumber number failed on: ${e}`),"0"):t.toLocaleString("en-US")},bo=()=>crypto.randomUUID(),uon={status:"PENDING",uuid:bo()},zg=(e,t,n)=>{if(e===t)return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const r=Object.keys(e),s=Object.keys(t);return r.length==s.length&&r.every(a=>n?n(e[a],t[a]):e[a]===t[a])},jE=(e,t)=>{const n=new URL(e);return n.searchParams.delete("source"),n.searchParams.delete("s"),t&&(n.hash=t),n.searchParams.sort(),n.href};function qge(e){return e.charAt(0).toUpperCase()+e.slice(1)}function Dtt(e,t){try{const n=new Date(e.replace(/-/g,"/")).toLocaleString(t,{weekday:"long",hour:"numeric",minute:"numeric",hour12:!0});return qge(n)}catch(n){console.log(n)}return null}function Kge(e,t,n="short"){const s=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].indexOf(e.toLowerCase());if(s===-1)return"";const a=new Date,i=new Date(a.setDate(a.getDate()-a.getDay()+s)),l=Intl.DateTimeFormat(t,{weekday:n}).format(i);return qge(l)}function Ftt(e){return e.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:12})}function a3(e,t,n){const r=new URL(e),s=r.searchParams;return s.set(t,n),r.search=s.toString(),r.toString()}const don=e=>{let t;if(typeof e=="string"){if(t=parseFloat(e),isNaN(t))throw new Error("Invalid input: not a number")}else if(typeof e=="number")t=e;else throw new Error("Invalid input: not a string or number");return t.toLocaleString("en-US")},Utt=/\[(\d{1,3})(,\s*\{ts:\d+\})?\]/g,Btt=/(\n*^(("""+|'''+|```+)[A-Za-z0-9]*|#+ .*)$|^- |\*\*|\$\$|\||`|[-|]{3,})/gm;function $tt(e){return e.replace(Utt,"")}function Vtt(e){return e.replace(Btt,"")}function Gg(e,t){const n=$tt(Vtt(e)).trim();if(n.length<=t)return n;{const r=n.slice(0,t).trim(),s=r.lastIndexOf(" ");return s*2>t&&s<t-1?r.slice(0,s)+"...":r+"..."}}const Yge=({cometAdapter:e,permissions:t})=>{const n=qD({queries:(t??[]).map(i=>({queryKey:["comet/permission",i],queryFn:()=>e.hasPermission(i)}))}).map(i=>({isFetching:i.isFetching,data:i.data})),s=d.useMemo(()=>{let i;return l=>(zg(i,l,zg)||(i=l),i)},[])(n);return d.useMemo(()=>{const i=s.findIndex(l=>Hpe(l));return t?.[i]??null},[t,s])},o3=I.memo(({onClick:e,testId:t="close-button",size:n="small",variant:r="common",className:s="right-sm top-sm absolute",ariaLabel:a="Close"})=>o.jsx("div",{className:s,children:o.jsx(Me,{testId:t,variant:r,pill:!0,size:n,onClick:e,icon:kt,ariaLabel:a})}));o3.displayName="CloseButton";const kU=I.memo(e=>{const{children:t,trigger:n,...r}=e;return o.jsxs(v_,{...r,children:[n&&o.jsx(zhe,{asChild:!0,children:n}),o.jsx(Ye,{children:r.open&&o.jsx(b_,{forceMount:!0,children:t})})]})});kU.displayName="ControlledDialog";function Wtt(e){const[t,n]=d.useState(!1),[r,s]=d.useState(!1),a=d.useMemo(()=>e?.isEnabled??!0,[e?.isEnabled]),i=d.useMemo(()=>a&&!t&&!r,[a,t,r]);return d.useMemo(()=>({canShow:i,handleConfirm(){n(!1),s(!0),e?.onConfirm()},handleCancel(){n(!1),s(!1)},isShowing:t,show(){n(!0)}}),[i,t,e])}const Qge=Dt("ConfirmCloseModalContext",{canShow:!1,handleCancel(){},handleConfirm(){},isShowing:!1,show(){}}),Xge=I.memo(function(t){const{children:n,trigger:r,value:s}=t;return o.jsx(Qge.Provider,{value:s,children:o.jsx(kU,{onOpenChange:s.handleCancel,open:s.isShowing,trigger:r,children:n})})});Xge.displayName="ConfirmCloseModalDialog";function Htt(){const e=d.useContext(Qge);if(!e)throw new Error("useConfirmCloseModalContext() used outside of provider.");return e}var Zge=Ehe(),b6=function(){},i3=d.forwardRef(function(e,t){var n=d.useRef(null),r=d.useState({onScrollCapture:b6,onWheelCapture:b6,onTouchMoveCapture:b6}),s=r[0],a=r[1],i=e.forwardProps,l=e.children,c=e.className,u=e.removeScrollBar,f=e.enabled,m=e.shards,p=e.sideCar,h=e.noIsolation,g=e.inert,y=e.allowPinchZoom,x=e.as,v=x===void 0?"div":x,b=e.gapMode,_=MO(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=p,C=She([n,t]),S=br(br({},_),s);return d.createElement(d.Fragment,null,f&&d.createElement(w,{sideCar:Zge,removeScrollBar:u,shards:m,noIsolation:h,inert:g,setCallbacks:a,allowPinchZoom:!!y,lockRef:n,gapMode:b}),i?d.cloneElement(d.Children.only(l),br(br({},S),{ref:C})):d.createElement(v,br({},S,{className:c,ref:C}),l))});i3.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};i3.classNames={fullWidth:j0,zeroRight:N0};var c8=!1;if(typeof window<"u")try{var TC=Object.defineProperty({},"passive",{get:function(){return c8=!0,!0}});window.addEventListener("test",TC,TC),window.removeEventListener("test",TC,TC)}catch{c8=!1}var Zp=c8?{passive:!1}:!1,ztt=function(e){return e.tagName==="TEXTAREA"},Jge=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!ztt(e)&&n[t]==="visible")},Gtt=function(e){return Jge(e,"overflowY")},qtt=function(e){return Jge(e,"overflowX")},LX=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=eye(e,r);if(s){var a=tye(e,r),i=a[1],l=a[2];if(i>l)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Ktt=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},Ytt=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},eye=function(e,t){return e==="v"?Gtt(t):qtt(t)},tye=function(e,t){return e==="v"?Ktt(t):Ytt(t)},Qtt=function(e,t){return e==="h"&&t==="rtl"?-1:1},Xtt=function(e,t,n,r,s){var a=Qtt(e,window.getComputedStyle(t).direction),i=a*r,l=n.target,c=t.contains(l),u=!1,f=i>0,m=0,p=0;do{var h=tye(e,l),g=h[0],y=h[1],x=h[2],v=y-x-a*g;(g||v)&&eye(e,l)&&(m+=v,p+=g),l instanceof ShadowRoot?l=l.host:l=l.parentNode}while(!c&&l!==document.body||c&&(t.contains(l)||t===l));return(f&&Math.abs(m)<1||!f&&Math.abs(p)<1)&&(u=!0),u},NC=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},OX=function(e){return[e.deltaX,e.deltaY]},DX=function(e){return e&&"current"in e?e.current:e},Ztt=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Jtt=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},ent=0,Jp=[];function tnt(e){var t=d.useRef([]),n=d.useRef([0,0]),r=d.useRef(),s=d.useState(ent++)[0],a=d.useState(zF)[0],i=d.useRef(e);d.useEffect(function(){i.current=e},[e]),d.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var y=Ze([e.lockRef.current],(e.shards||[]).map(DX),!0).filter(Boolean);return y.forEach(function(x){return x.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),y.forEach(function(x){return x.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var l=d.useCallback(function(y,x){if("touches"in y&&y.touches.length===2||y.type==="wheel"&&y.ctrlKey)return!i.current.allowPinchZoom;var v=NC(y),b=n.current,_="deltaX"in y?y.deltaX:b[0]-v[0],w="deltaY"in y?y.deltaY:b[1]-v[1],C,S=y.target,E=Math.abs(_)>Math.abs(w)?"h":"v";if("touches"in y&&E==="h"&&S.type==="range")return!1;var k=LX(E,S);if(!k)return!0;if(k?C=E:(C=E==="v"?"h":"v",k=LX(E,S)),!k)return!1;if(!r.current&&"changedTouches"in y&&(_||w)&&(r.current=C),!C)return!0;var M=r.current||C;return Xtt(M,x,y,M==="h"?_:w)},[]),c=d.useCallback(function(y){var x=y;if(!(!Jp.length||Jp[Jp.length-1]!==a)){var v="deltaY"in x?OX(x):NC(x),b=t.current.filter(function(C){return C.name===x.type&&(C.target===x.target||x.target===C.shadowParent)&&Ztt(C.delta,v)})[0];if(b&&b.should){x.cancelable&&x.preventDefault();return}if(!b){var _=(i.current.shards||[]).map(DX).filter(Boolean).filter(function(C){return C.contains(x.target)}),w=_.length>0?l(x,_[0]):!i.current.noIsolation;w&&x.cancelable&&x.preventDefault()}}},[]),u=d.useCallback(function(y,x,v,b){var _={name:y,delta:x,target:v,should:b,shadowParent:nnt(v)};t.current.push(_),setTimeout(function(){t.current=t.current.filter(function(w){return w!==_})},1)},[]),f=d.useCallback(function(y){n.current=NC(y),r.current=void 0},[]),m=d.useCallback(function(y){u(y.type,OX(y),y.target,l(y,e.lockRef.current))},[]),p=d.useCallback(function(y){u(y.type,NC(y),y.target,l(y,e.lockRef.current))},[]);d.useEffect(function(){return Jp.push(a),e.setCallbacks({onScrollCapture:m,onWheelCapture:m,onTouchMoveCapture:p}),document.addEventListener("wheel",c,Zp),document.addEventListener("touchmove",c,Zp),document.addEventListener("touchstart",f,Zp),function(){Jp=Jp.filter(function(y){return y!==a}),document.removeEventListener("wheel",c,Zp),document.removeEventListener("touchmove",c,Zp),document.removeEventListener("touchstart",f,Zp)}},[]);var h=e.removeScrollBar,g=e.inert;return d.createElement(d.Fragment,null,g?d.createElement(a,{styles:Jtt(s)}):null,h?d.createElement(Nhe,{gapMode:e.gapMode}):null)}function nnt(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const rnt=khe(Zge,tnt);var TU=d.forwardRef(function(e,t){return d.createElement(i3,br({},e,{ref:t,sideCar:rnt}))});TU.classNames=i3.classNames;const ff=I.memo(({children:e,portalTarget:t})=>{const[n,r]=d.useState(!1);return d.useEffect(()=>(r(!0),()=>r(!1)),[]),n?ks.createPortal(e,t||document.body):null});ff.displayName="Portal";const snt=250,ox=I.memo(({animationClassName:e,children:t,isOpen:n=!1,transparent:r=!1,canOutsideClickClose:s=!0,onBeforeClose:a,onClose:i,onIsClosing:l,childVariant:c="default",center:u=!0,shouldClose:f=!1,disableAnimation:m=!1,testId:p,removeScroll:h=!0,shards:g=[],delayClose:y=!0,variant:x="default",portalTarget:v,includeBlur:b=!0,forceColorScheme:_})=>{const w=d.useRef(null),C=d.useRef(null),S=d.useRef(null),[E,k]=d.useState(!1),M=d.useRef(!1),j=d.useCallback(N=>{E||a?.()===!1||(y?(k(!0),l?.(),setTimeout(()=>{i?.(N),k(!1)},snt)):(k(!0),i?.(N),k(!1)))},[E,a,y,l,i]);d.useEffect(()=>{f&&!E&&j("closed")},[f,E,j]);const R=d.useCallback(N=>{r&&!s?N.stopPropagation():N.target===w.current&&j("backdrop")},[r,s,j]),O=d.useCallback(N=>{const L=N.target;if(L instanceof Element){if(C.current===L||C.current?.contains(L))return;const U=L.closest('[data-type="portal"]');if(U&&U!==S.current&&!r)return}k(!1),j("clickaway")},[j,r]);d.useEffect(()=>{if(n&&r&&s)return document.addEventListener("click",O),()=>{document.removeEventListener("click",O)}},[n,r,O,s]);const D=d.useCallback(N=>{N.key==="Escape"&&j("escape")},[j]);d.useEffect(()=>(n&&document.addEventListener("keydown",D),()=>{document.removeEventListener("keydown",D)}),[n,D]);const P=d.useMemo(()=>B("duration-200 fill-mode-both",{"animate-in fade-in zoom-in-[0.98] ease-in":["default","large","small","hide-chrome","full-sheet"].includes(c),"zoom-out-[0.98] fade-out animate-out ease-out":["default","hide-chrome","full-sheet","large","small"].includes(c)&&E,"fixed bottom-0 left-0":c==="bottom-left-sheet","fixed top-0 right-0 left-0":c==="side-sheet","fixed bottom-0 left-0 right-0":c==="bottom-sheet"},e),[e,c,E]),A=B("items-stretch md:items-center",{"fill-mode-both fixed inset-0":!r,"bg-backdrop/70":x==="default"||x==="default-less-blur","bg-lightbox/95":x==="lightbox","animate-in fade-in ease-outExpo duration-200":!E&&!m,"animate-out fade-out ease-inExpo duration-200":E&&!m},{"backdrop-blur-md":b&&x==="lightbox","backdrop-blur-sm":b&&x==="default","backdrop-blur-[0.5px]":b&&x==="default-less-blur"}),T=d.useMemo(()=>n?o.jsxs(TU,{removeScrollBar:!1,enabled:h,allowPinchZoom:!0,shards:g,children:[o.jsx("div",{className:A}),o.jsx("div",{ref:w,onPointerDown:N=>{M.current=N.target===w.current},onPointerUp:N=>{M.current&&R(N),M.current=!1},className:B({"fixed inset-0 overflow-y-auto":!r,"flex items-center justify-center":u}),"data-test-id":p,children:o.jsx("div",{ref:C,className:P,children:t})})]}):null,[n,t,r,u,p,R,P,C,w,h,g,A]);return o.jsx(ff,{portalTarget:v,children:o.jsx("div",{ref:S,"data-type":"portal","data-color-scheme":_,children:T})})});ox.displayName="Overlay";const nye=Dt("ModalInternalContext",{canOutsideClickClose:!0}),qt=I.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=ce,variant:i="default",onClose:l,noPadding:c=!1,onIsClosing:u,titleContent:f,footerContent:m,icon:p,overlayVariant:h,titleLeadingButtonProps:g,confirmOnClose:y,titleTextVariant:x="page-title",headerClassname:v,closeButtonClassname:b="right-0 top-sm absolute",footerClassname:_,renderCloseButton:w=!0,fixedTitle:C,modalClassname:S,modalContentClassname:E,modalElementProps:k,includeBlur:M=!0,isOpen:j,ref:R,wrapperClassname:O,forceColorScheme:D,...P})=>{const A=d.useRef(null),T=d.useRef(null),N=d.useRef(null),L=d.useRef(null),[U,$]=d.useState(!1),[V,W]=d.useState(!1),[Q,q]=d.useState(!1);d.useEffect(()=>{j&&!Q?q(!0):!j&&Q&&!U&&$(!0)},[j,Q,U]);const H=d.useMemo(()=>!!y,[y]),K=Wtt({isEnabled:H,onConfirm(){W(!0),$(!0)}}),G=d.useMemo(()=>B(S,"bg-base shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"md:rounded-xl md:min-w-[600px] max-w-screen-sm shadow-md dark:border dark:border-subtlest relative h-full max-h-[100vh] md:max-h-[95vh] overflow-auto md:w-full":i==="default","min-h-0 max-h-[70vh] rounded-t-xl bottom-0 left-0 right-0 flex flex-col":i==="bottom-left-sheet","w-screen md:h-screen h-[100dvh] flex flex-col":i==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] shadow-overlay max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":i==="bottom-sheet","h-screen w-[40vw] min-w-[500px] shadow-overlay top-0 right-0 fixed flex flex-col":i==="side-sheet","animate-in slide-in-from-right ease-outExpo":i==="side-sheet"&&!V,"animate-out slide-out-to-right ease-inExpo":i==="side-sheet"&&V,"animate-in slide-in-from-bottom ease-in":["bottom-left-sheet","bottom-sheet"].includes(i)&&!V,"animate-out slide-out-to-bottom ease-out":["bottom-left-sheet","bottom-sheet"].includes(i)&&V,"max-h-[100vh] w-[90vw] rounded-l-xl flex flex-col":i==="wide","h-[95vh] w-[95vw] rounded-xl flex flex-col":i==="full","md:rounded-lg md:min-w-[600px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":i==="large","md:rounded-lg md:min-w-[500px] max-w-screen-lg shadow-md relative overflow-auto max-h-[100vh]":i==="medium","md:rounded-lg md:max-w-[440px] shadow-md relative overflow-auto max-h-[100vh]":i==="small","md:rounded-lg md:max-w-[350px] shadow-md relative overflow-auto max-h-[100vh]":i==="thin"}),[i,V,S]),ee=d.useMemo(()=>B("grow flex flex-col justify-center shrink-0",{"md:pt-md":e===void 0&&!f,"md:pb-lg":a?.length===0,"p-sm":!c,"p-0":c},E),[a?.length,c,e,E,f]),Y=d.useMemo(()=>a.map((Se,je)=>d.createElement(rye,{...Se,idx:je,key:je,confirmCloseModal:K})),[a,K]);d.useImperativeHandle(R,()=>({scrollContainerRef:A,headerRef:T,contentRef:N,footerRef:L}),[A,T,L]);const te=d.useCallback(()=>{u?.(),W(!0)},[u]),se=d.useCallback(Se=>{W(!1),$(!1),q(!1),l?.(Se)},[l]),ae=d.useCallback(()=>{if(K?.canShow){K.show();return}$(!0)},[K]),pe=d.useCallback(()=>K?.canShow?(K.show(),!1):!0,[K]),{canOutsideClickClose:fe}=d.useContext(nye),ge=d.useMemo(()=>o.jsxs(o.Fragment,{children:[o.jsx("div",{children:i==="hide-chrome"?o.jsx("div",{children:s}):o.jsxs(ve.div,{animate:{scale:K.isShowing?.955:1},className:G,transition:{duration:.2},ref:A,...k,children:[o.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),o.jsxs(z,{className:B(O,"px-md pb-md flex min-h-0 w-screen grow flex-col md:w-[unset] md:grow-[unset]",{"h-full":!C,"h-auto !grow":C}),children:[o.jsxs(z,{variant:"background",className:B(v,"pt-md sticky top-0 z-[22] w-full shrink-0",{"text-center":r,"h-10":!e&&!f}),ref:T,children:[o.jsxs("div",{className:"p-sm flex items-center gap-1.5",children:[g&&o.jsx(Me,{extraCSS:"-ml-sm",...g,size:"small",variant:"common"}),p&&o.jsx(de,{icon:p,className:"text-foreground -ml-xs shrink-0",size:"xl"}),e&&o.jsx(F,{variant:x,className:B("text-pretty",{"line-clamp-1 leading-none":p,"line-clamp-3":!p,"pt-lg grow":r,"mr-lg":!r}),children:e}),!e&&f,w&&o.jsx(o3,{onClick:ae,testId:"close-modal",className:b})]}),t&&o.jsx(F,{variant:"base",color:"light",className:B("mt-xs p-sm line-clamp-3 text-pretty",n),children:t})]}),s&&o.jsx("div",{className:ee,ref:N,children:s}),(Y?.length>0||m)&&o.jsxs(z,{variant:"background",className:B("gap-x-sm p-sm pt-lg bottom-0 z-10 flex items-center",{"justify-end":!m},{"justify-between":m},{sticky:!0},_),ref:L,children:[m&&o.jsx("div",{className:"flex-1",children:m}),Y]})]})]})}),H&&o.jsx(Xge,{value:K,children:y})]}),[Y,r,s,b,K,y,ee,C,_,m,ae,v,p,H,G,k,w,t,n,e,f,g,x,i,O]);return o.jsx(ox,{forceColorScheme:D,includeBlur:M,childVariant:i,shouldClose:U,onBeforeClose:pe,onIsClosing:te,onClose:se,variant:h,isOpen:Q,canOutsideClickClose:fe,...P,children:ge})});qt.displayName="Modal";const rye=I.memo(({idx:e,text:t,onClick:n,variant:r,disabled:s,isLoading:a,testId:i,icon:l,shouldShowConfirmDialog:c,buttonClassname:u,tooltipText:f,confirmCloseModal:m})=>{const p=d.useCallback(y=>{if(y.stopPropagation(),r&&c&&m.canShow){m.show();return}n?.()},[m,n,c,r]),h={key:e,text:t,disabled:s,isLoading:a,testId:i,chevronIcon:l,extraCSS:u},g=d.createElement(me,{fullWidthMobile:!0,variant:r||void 0,...h,onClick:p,key:h.key});return f?o.jsx(bn,{tooltipText:f,tooltipLayout:"top",children:g}):g});rye.displayName="ButtonFactory";const ant=e=>{const{permission:t,isOpen:n,onPermissionsGranted:r,onClose:s}=e,{$t:a}=Z(),i=Nn(),{renderData:l,requestPermission:c}=Gge({permission:t,cometAdapter:i}),u=d.useCallback(()=>{c().then(f=>{f&&(r?.(),s())}).catch(f=>{ne.error("Error requesting permission",f),s()})},[c,r,s]);return l?o.jsxs(qt,{variant:"thin",isOpen:n,headerClassname:"!h-0",renderCloseButton:!1,footerClassname:"!pt-0",footerContent:o.jsxs("div",{className:"flex justify-end gap-2",children:[o.jsx(hs,{variant:"secondary",onClick:s,children:a({defaultMessage:"Cancel",id:"47FYwba+bI"})}),o.jsx(hs,{variant:"primary",onClick:u,children:l.buttonText})]}),onClose:s,children:[o.jsx("video",{src:l.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,height:160,width:302,className:"mb-6 rounded-lg"}),o.jsx(F,{variant:"baseSemi",as:"h3",className:"mb-1",children:l.title}),o.jsx(F,{variant:"small",color:"light",children:l.description})]}):null},ont=e=>{const{permissions:t}=e,n=Nn(),r=Yge({cometAdapter:n,permissions:t});return r?o.jsx(ant,{permission:r,...e}):null},int=()=>{const{askPermissionsModalState:e,closeAskPermissionsModal:t}=aye();return o.jsx(o.Fragment,{children:e&&o.jsx(ont,{isOpen:!0,serverName:e.serverName,permissions:e.permissions,onPermissionsGranted:e.onPermissionsGranted,onClose:t})})},sye=Dt("CometMcpModalStateContext",{askPermissionsModalState:null,openAskPermissionsModal:()=>{},closeAskPermissionsModal:()=>{}}),lnt=({children:e})=>{const[t,n]=d.useState(null),r=d.useCallback(i=>{n(i)},[]),s=d.useCallback(()=>{n(null)},[]),a=d.useMemo(()=>({askPermissionsModalState:t,openAskPermissionsModal:r,closeAskPermissionsModal:s}),[t,r,s]);return o.jsxs(sye.Provider,{value:a,children:[e,o.jsx(int,{})]})},aye=()=>d.useContext(sye),oye=e=>Object.fromEntries(Object.entries(e.compatibility?.permissions??{}).filter(([t,n])=>!!n).map(([t,n])=>typeof n=="object"?[t,n]:[t,{}])),u8=e=>Object.entries(oye(e)).filter(([,{for_tools:t}])=>!t).map(([t])=>t),cnt=({cometState:e})=>d.useMemo(()=>{if(!e.installedDxts)return[];const t=e.installedDxts.flatMap(({manifest:n})=>u8(n));return Array.from(new Set(t))},[e.installedDxts]),C_=()=>{const e=Hr(),{data:t}=EU(),{openAskPermissionsModal:n}=aye(),r=cnt({cometState:e}),s=Nn(),a=qD({queries:r.map(x=>({queryKey:["comet/permission",x],queryFn:()=>s.hasPermission(x)}))}).map(x=>x.data),l=d.useMemo(()=>{let x;return v=>(zg(x,v)||(x=v),x)},[])(a),c=d.useMemo(()=>new Set(e.mcpStdioServers?.filter(x=>{const v=T0(e.installedDxts,x);return(v?u8(v):[]).some(w=>{const C=r.indexOf(w);return C!==-1&&l[C]===!1})}).map(x=>x.name)),[e.mcpStdioServers,e.installedDxts,r,l]),u=d.useMemo(()=>Object.fromEntries(e.mcpStdioServers?.map(x=>{const v=T0(e.installedDxts,x),b=Hge(t,x),_=v?.display_name??v?.name??x.name,w=c.has(x.name);return[x.name,{icon:void 0,avatar:o.jsx(_U,{serverName:_,iconUrl:b,size:"sm"}),text:_,disabled:x.status!=="running"||!x.tools_count||w,description:"",type:"toggle",iconUrl:b}]})??[]),[e.mcpStdioServers,e.installedDxts,t,c]),f=d.useCallback((x,v)=>{if(!c.has(x)){v();return}const b=e.mcpStdioServers?.find(w=>w.name===x);if(!b)return;const _=T0(e.installedDxts,b);_&&n({serverName:x,permissions:u8(_),onPermissionsGranted:v})},[e.mcpStdioServers,e.installedDxts,c,n]),m=d.useCallback(x=>{f(x,()=>{const b=e.mcpDisabledServers??new Set,_=new Set(b);b.has(x)?_.delete(x):_.add(x),e.actions.setMcpDisabledServers(_)})},[e.actions,e.mcpDisabledServers,f]),p=d.useCallback(x=>{f(x,()=>{const b=e.mcpDisabledServers??new Set,_=new Set(b);_.delete(x),e.actions.setMcpDisabledServers(_)})},[e.actions,e.mcpDisabledServers,f]),h=d.useCallback(x=>{const v=e.mcpDisabledServers??new Set,b=new Set(v);b.add(x),e.actions.setMcpDisabledServers(b)},[e.actions,e.mcpDisabledServers]),g=d.useMemo(()=>new Set([...e.mcpDisabledServers??[],...c]),[e.mcpDisabledServers,c]),y=d.useCallback(x=>x in u&&!g?.has(x),[u,g]);return d.useMemo(()=>({cometMcpSources:u,toggleCometMcpSource:m,addCometMcpSource:p,removeCometMcpSource:h,hasCometMcpSource:y,cometMcpDisabledServers:g}),[u,m,p,h,y,g])};function unt(e){return e.blocks?.some(t=>t.intended_usage==="ask_text")??!1}function dnt(e,t,n=[]){return t===le.DEFAULT||n.length>0&&n[n.length-1]?.step_type==="FINAL"||e?.some(s=>s.markdown_block||s.entity_list_block||yhe(s.entity_group_block)||xhe(s.inline_entity_block))}function Dr(e){const t=e?.toLowerCase();return vo[t]??ue.SEARCH}var fnt={};const iye=()=>{const e=dn(),t=Nn(),n=d.useCallback(r=>{const s=!!r.last_backend_uuid,a=Dr(r.model_preference)===ue.RESEARCH||Dr(r.model_preference)===ue.STUDIO;return(r.sources?.some(l=>l==="web")??!0)&&e&&!s&&!fnt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!a&&!r.override_no_search},[e]);return d.useCallback((r,s,a)=>{!r||!n(s)||t.injectSearchResults(r,a)},[t,n])},mnt=["presentpicker"],lye=e=>e?mnt.includes(e):!1;function pnt(e){const t=Ot(),n=et(),{hasAccessToProFeatures:r}=St(),{trackEvent:s}=Te(),{actions:a,preferredSearchModels:i,preferredSearchMode:l}=In(),{isMaxUpsellEnabled:c}=Uu(),u=t?.get("copilot"),f=t?.get("pro"),m=t?.get("utm_source"),p=u==="false"||f==="false",h=!p&&(u==="true"||f==="true"||lye(m??void 0)),g=i[ue.SEARCH];g&&(vo[g]!==ue.SEARCH?(i[ue.SEARCH]=le.PRO,a.setPreferredSearchModel(ue.SEARCH,le.PRO)):g===le.DEFAULT&&r&&a.setPreferredSearchModel(ue.SEARCH,void 0));const y=t?.get("model_id")==="pplx_alpha"?null:t?.get("model_id");let x;y&&(y==="deep_research"?x=le.ALPHA:Object.values(le).includes(y)&&(x=y));let v;return p?v=le.DEFAULT:x?v=x:h&&(v=le.PRO),v&&x&&x==v&&s("search mode utm",{mode:vo[v]}),d.useMemo(()=>{let b=le.DEFAULT;if(!n)return b;if(v)return v;if(!c)return b=i[ue.SEARCH]??le.PRO,b;switch(l){case ue.RESEARCH:b=i[ue.RESEARCH]??le.ALPHA;break;case ue.STUDIO:b=i[ue.STUDIO]??le.BETA;break;case ue.SEARCH:default:b=i[ue.SEARCH]??le.PRO;break}return b},[n,c,v,l,i])}const cye={isCopilot:!1,sources:["web"],gpt4Limit:0,gpt4Total:0,pplxAlphaLimit:0,pplxBetaLimit:0,uploadRateLimit:void 0,createLimit:0,recency:null,askInputReasoningMode:!1,askInputReasoningModelPreference:null,setAskInputReasoningMode:()=>{},setAskInputReasoningModelPreference:()=>{},setConfiguredModel(){},setSources:()=>{},setIsCopilot:()=>{},decrementCreateLimit:()=>{},setGPT4Limit:()=>{},setPplxAlphaLimit:()=>{},setPplxBetaLimit:()=>{},setRecency:()=>{},setUploadRateLimit:()=>{},configuredModel:le.DEFAULT,configuredSearchMode:ue.SEARCH,setConfiguredSearchMode(){}},uye=Dt("ThreadConfigContext",cye),hnt=({children:e,shouldFetchSettings:t})=>{const r=wo({enabled:t,reason:"thread-settings-provider"}),{organization:s}=Hn({reason:"thread-settings-provider"}),a=In(),{isMax:i,hasAccessToProFeatures:l}=St();let c=a.preferredSearchMode;const u=c?Object.values(ue).includes(c):!1,{isMaxUpsellEnabled:f}=Uu();!f&&c!==ue.SEARCH&&(c=void 0,a.actions.setPreferredSearchMode(void 0));const m=pnt(),[p,h]=d.useState({...cye,gpt4Limit:r.gpt4Limit,gpt4Total:r.gpt4Total,pplxAlphaLimit:r.pplxAlphaLimit,pplxBetaLimit:r.pplxBetaLimit,configuredModel:m,configuredSearchMode:vo[m]??ue.SEARCH}),g=d.useCallback(j=>h(R=>({...R,configuredModel:j,configuredSearchMode:vo[j]??R.configuredSearchMode})),[]),y=d.useCallback(()=>{g(le.DEFAULT),a.actions.setPreferredSearchMode(ue.SEARCH)},[g,a.actions]),x=d.useCallback(j=>{h(R=>({...R,sources:j}))},[]),v=d.useCallback(j=>{h(R=>({...R,recency:j}))},[]),b=d.useCallback(j=>{h(R=>({...R,askInputReasoningModelPreference:j,askInputReasoningMode:!!j}))},[]),_=d.useCallback(j=>{h(R=>({...R,askInputReasoningMode:j}))},[]);d.useEffect(()=>{r.createLimit!==null&&h(j=>({...j,createLimit:r.createLimit}))},[r.createLimit]),d.useEffect(()=>{r.uploadLimit!==null&&r.uploadLimit!==void 0&&h(j=>({...j,uploadRateLimit:r.uploadLimit}))},[r.uploadLimit]),d.useEffect(()=>{r.gpt4Limit!==null&&h(j=>({...j,gpt4Limit:r.gpt4Limit}))},[r.gpt4Limit]),d.useEffect(()=>{r.gpt4Total!==null&&h(j=>({...j,gpt4Total:r.gpt4Total}))},[r.gpt4Total]),d.useEffect(()=>{r.pplxAlphaLimit!==null&&h(j=>({...j,pplxAlphaLimit:r.pplxAlphaLimit}))},[r.pplxAlphaLimit]),d.useEffect(()=>{r.pplxBetaLimit!==null&&h(j=>({...j,pplxBetaLimit:r.pplxBetaLimit}))},[r.pplxBetaLimit]),d.useEffect(()=>{r.hasLoadedSettings&&((p.configuredModel!==le.DEFAULT&&r.gpt4Limit<=0||Dr(p.configuredModel)===ue.RESEARCH&&r.pplxAlphaLimit<=0&&!i||Dr(p.configuredModel)===ue.STUDIO&&r.pplxBetaLimit<=0&&!i)&&y(),(p.askInputReasoningMode||p.askInputReasoningModelPreference)&&r.gpt4Limit<=0&&y())},[y,r.gpt4Limit,r.pplxAlphaLimit,r.pplxBetaLimit,r.hasLoadedSettings,p.askInputReasoningMode,p.askInputReasoningModelPreference,p.configuredModel,i]),d.useEffect(()=>{const j=s?.settings?.disabled_model_preferences??[];u&&c&&j?.includes(c)&&y()},[u,s?.settings?.disabled_model_preferences,c,y,g]),d.useEffect(()=>{l&&p.configuredModel===le.DEFAULT&&Dr(p.configuredModel)===ue.SEARCH&&(g(le.PRO),a.actions.setPreferredSearchModel(ue.SEARCH,le.PRO))},[l,p.configuredModel,g,a.actions]);const w=d.useCallback(()=>{const j=Math.max(p.createLimit-1,0);h(R=>({...R,createLimit:j}))},[p.createLimit]),C=d.useCallback((j=1)=>{if(p.uploadRateLimit==null)return;const R=Math.max(p.uploadRateLimit-j,0);h(O=>({...O,uploadRateLimit:R}))},[p.uploadRateLimit]),M={...p,setConfiguredModel:g,setSources:x,decrementCreateLimit:w,setUploadRateLimit:C,setGPT4Limit:j=>{h(R=>({...R,gpt4Limit:j}))},setPplxAlphaLimit:j=>{h(R=>({...R,pplxAlphaLimit:j}))},setPplxBetaLimit:j=>{h(R=>({...R,pplxBetaLimit:j}))},setRecency:v,askInputReasoningMode:p.askInputReasoningMode,isCopilot:p.configuredModel!==le.DEFAULT,setAskInputReasoningMode:_,setAskInputReasoningModelPreference:b,configuredSearchMode:p.configuredSearchMode,setConfiguredSearchMode:j=>{h(R=>({...R,configuredSearchMode:j}))}};return o.jsx(uye.Provider,{value:M,children:e})},ir=()=>{const e=d.useContext(uye);if(!e)throw new Error("useThreadConfig must be used within ThreadSettingsContext");return e};function ix(){const{isMax:e,isPro:t}=St(),{isMaxUpsellEnabled:n}=Uu(),{gpt4Limit:r,pplxAlphaLimit:s,pplxBetaLimit:a}=ir();return d.useMemo(()=>l=>{let c=!1;return l===ue.RESEARCH?c=Math.min(r,s)<=0:c=Math.min(r,a)<=0,n&&!e&&t&&c&&(l===ue.RESEARCH||l===ue.STUDIO)},[n,e,t,r,s,a])}function Uu(){const{isEnterprise:e}=Hn({reason:"max-tier"}),{value:t,loading:n}=jt({flag:"max-upsell",defaultValue:!1,subjectType:"visitor_id",extraAttributes:{isEnterprise:e??!1}});return d.useMemo(()=>({isMaxUpsellEnabled:e?!0:t,loading:n}),[t,n,e])}var gnt={};function qa(){const{configuredModel:e,configuredSearchMode:t}=ir();return d.useMemo(()=>t||(gnt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e===le.DEFAULT?ue.SEARCH:vo[e]),[t,e])}var FX={};const ynt=e=>{try{return new URL(e),!0}catch{return!1}},xnt=()=>{const e=Zo();return e?.ios_version?Zze:e?.android_version?Jze:YD},vnt=({inPageOverride:e,dslQuery:t,existingEntryUUID:n,existingUuid:r,deletedUrls:s,redoSearch:a,collection:i,isRelatedQuery:l,isSponsored:c,relatedQueryUUID:u,inDomain:f,inPage:m,newFrontendContextUUID:p,promptSource:h,querySource:g,timeFromFirstType:y,utmSource:x,disableWidgets:v,isNavSuggestionsDisabled:b,entropyBrowser:_,clientPayloadUUID:w,isIncognito:C,sessionId:S,modelPreferenceSubmit:E,lastBackendUUID:k,deviceLocation:M,newAttachments:j,threadMetadataRwToken:R,forceNew:O,finalSources:D,finalRecency:P,mode:A,frontendUUID:T,isWindowsApp:N,browserHistorySummaryNumDays:L,mentions:U,reason:$,side_by_side_metadata:V,skipSearchEnabled:W,browserHistorySummaryMaxResults:Q,sidecarTabId:q,sidecarUrl:H,sidecarTitle:K,sidecarSecondaryTabId:G,sidecarSecondaryUrl:ee,sidecarSecondaryTitle:Y,isFirstEntry:te,alwaysSearchOverride:se,overrideNoSearch:ae,cometMaxAssistantEnabled:pe,resumingQuery:fe,resumeFromUuid:ge,cometIsMissionControl:Se,mcpTools:je,refinementFiltersMetadata:ye})=>{const be=M?{location_lat:M.latitude,location_lng:M.longitude,name:""}:null,Ne=d_(),Ie=mo().erp,Ce=dn(),Ge=Ce?{source:xnt(),client_payload_cache_key:w}:{},tt=N?{source:b5}:{};let gt=!1,Ee="",Re="",Vt;const pt=g==="followup"?"followup-sidecar":"sidecar";let Nt;if(Ce){if(Nt=Ie==="sidecar"?{rendering_place:Ie,sidecar_tab_id:q,sidecar_url:H,sidecar_title:K,sidecar_secondary_tab_id:G,sidecar_secondary_url:ee,sidecar_secondary_title:Y}:{rendering_place:Ie??"unknown"},gt=!0,te&&(Ee=kYe({entropyBrowser:_,browserHistorySummaryNumDays:L,browserHistorySummaryMaxResults:Q,reason:$}),Re=_.getLastOmniboxInput(T)??""),g==="default_search"&&(ynt(Re)&&(gt=!1,ne.info("[comet] Local search disabled due to URL input in omnibox",{lastOmniboxInput:Re})),!Re)){const Ke=Wge(document.referrer);(!Ke||Ke.origin!==location.origin||Ke.pathname!=="/.well-known/comet-omnibox-text"&&Ke.pathname!=="/b/try-assistant")&&(gt=!1,ne.info("[comet] Local search disabled due to unsecure referer",{lastOmniboxInput:Re,parsedReferrer:Ke}))}}else g==="default_search"&&(Vt="external_url");return{last_backend_uuid:k??void 0,read_write_token:O?void 0:R,existing_entry_uuid:O?void 0:n,deleted_urls:s??void 0,attachments:j,language:Zl(),timezone:KD,in_page:e??m,in_domain:f,search_focus:D.length===0?"writing":"internet",sources:D,search_recency_filter:P,frontend_uuid:r??T,redo_search:a,mode:A,target_collection_uuid:i?.uuid,model_preference:E??void 0,is_related_query:l??!1,is_sponsored:c??!1,related_query_uuid:u,visitor_id:Ne??void 0,user_nextauth_id:S??void 0,frontend_context_uuid:p??void 0,prompt_source:h??void 0,query_source:FX.NEXT_PUBLIC_IS_SIDECAR_BUILD?pt:g??"",browser_history_summary_key:Ee||void 0,is_incognito:C,time_from_first_type:y??void 0,local_search_enabled:gt,use_schematized_api:!0,send_back_text_in_streaming_api:!1,supported_block_use_cases:Mme,utm_source:x,client_coordinates:be,mentions:U,dsl_query:t,skip_search_enabled:W,is_nav_suggestions_disabled:b||!!FX.NEXT_PUBLIC_IS_SIDECAR_BUILD,...g==="followup"?{followup_source:"link"}:{},...Ge,...tt,...v?{disable_widgets:v}:{},always_search_override:se??!1,override_no_search:ae??!1,comet_info:Nt,...V&&{side_by_side_metadata:V},client_search_results_cache_key:Ce&&T?`nav-${T}`:void 0,comet_max_assistant_enabled:pe,resuming_query:fe,resume_from_uuid:ge,comet_is_mission_control:Se,mcp_tools:je,risky_query_source:Vt,should_ask_for_mcp_tool_confirmation:!0,refinement_filters_metadata:ye}},dye=()=>{const e=Lt();return dn()&&e?.startsWith("/b/home")};let fye=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");function bnt(e,t){const n=UX(e),r=UX(t);return n.major>r.major?!0:n.major<r.major?!1:n.minor>r.minor?!0:n.minor<r.minor?!1:n.patch>r.patch?!0:!(n.patch<r.patch)}function UX(e){const[t,n,r]=e.split(".").map(Number);return{major:t,minor:n,patch:r}}function _nt(e){return bnt(mye(),e)}function I0(e,t){return _nt(t)?!0:(console.warn(`[todesktop-client] ${e} not called. ${e} was introduced in ${t}. You are running version ${mye()}.`),!1)}const mye=()=>typeof window.todesktop=="object"&&window.todesktop.desktopifyVersion,pu=typeof window<"u"&&window.todesktop,wnt=e=>async(t,n)=>{const r=fye(),s=t==="*"?Object.keys(e):[t];for(const i of s){const l=e[i];pu?.on(l,n,r)}const a=pye(e);return async()=>a(t,n,r)},Cnt=e=>async(t,n)=>{const r=fye(),s=t==="*"?Object.keys(e):[t];for(const i of s){const l=e[i];pu?.on(l,n,r)}const a=pye(e);return async()=>a(t,n,r)},pye=e=>(t,n,r)=>{const s=t==="*"?Object.keys(e):[t];for(const a of s){const i=e[a];pu?.off(i,n,r)}};function Snt(e,t){const n={package:{name:e,version:t},invoke:{version:"1.0.0"}};function r(i){const l={metadata:n,payload:{command:i}};return window.todesktop.invoke(l)}function s(i){const l={metadata:n,payload:{command:Object.assign(Object.assign({},i),{method:":new"})}};return window.todesktop.invoke(l)}function a(i){if(I0("releaseMemory","4.6.0")){if(!i?.length){console.log("No memory references to release");return}return window.todesktop.releaseMemory(i)}}return{invoke:r,construct:s,releaseMemory:a}}const{invoke:po,construct:hye}=Snt("client-core","1.0.0-dev"),Ent={openProtocolURL:"open-protocol-url"},Mnt=Cnt(Ent);var _6;const w6=typeof window<"u"&&window.todesktop,knt=(e,t)=>{const n=async(a,i,{ref:l,preventDefault:c}={})=>{if(t&&!I0(`${e} addEventListener`,t))return;const u=await po({instanceRef:l,namespace:e,eventName:a,eventOptions:{preventDefault:c}});return window.todesktop.on(u,(f,...m)=>{if(Int(m[0])){const[,...p]=m;return i(...p)}else return i(...m)}),()=>r(a,{eventId:u,ref:l})},r=async(a,...i)=>{const{eventId:l,ref:c}=i[0]||{};t&&!I0(`${e} removeEventListener`,t)||(await po({instanceRef:c,namespace:e,eventName:a,eventId:l}),window.todesktop.off(l))};return{removeAllListeners:async(a,{ref:i}={})=>{t&&!I0(`${e} removeAllListeners`,t)||(await po({instanceRef:i,namespace:e,method:"removeAllListeners",args:[a]}),window.todesktop.off(a))},on:n}};function Tnt(e){console.warn(`[todesktop-client] ${e} is a legacy event and may be removed in future.
        Contact support or look through our typescript files to find a suitable replacement.`)}function Nnt(e,t){const n=e[0],r=n in t;return r&&Tnt(n),r}const jnt=(e,t)=>Nnt(e,t),Ant=(e,t)=>{const n=knt(t),r=(...s)=>jnt(s,e)?wnt(e)(...s):n.on(...s);return{removeAllListeners:n.removeAllListeners,on:r}};(_6=w6?.env)===null||_6===void 0||_6.NODE_ENV;const Int=e=>Rnt(e)&&"preventDefault"in e&&"sender"in e,Rnt=e=>e===null?!1:typeof e=="function"||typeof e=="object";async function Pnt(e,t){return window.todesktop.shortcut.register(e,t)}async function C6(e){return window.todesktop.shortcut.unregister(e)}async function Lnt(e){return hye({namespace:"BrowserWindow",args:[e]})}async function Ont({ref:e,viewRef:t}){return po({instanceRef:e,namespace:"BrowserWindow",method:"setBrowserView",args:[t]})}async function Dnt({ref:e}={}){return po({instanceRef:e,namespace:"BrowserWindow",method:"getSize",args:[]})}async function NU({ref:e}={}){return po({instanceRef:e,namespace:"BrowserWindow",method:"focus",args:[]})}async function d8({ref:e}={}){return po({instanceRef:e,namespace:"BrowserWindow",method:"isVisible",args:[]})}async function Fnt({ref:e}={}){return po({instanceRef:e,namespace:"BrowserWindow",method:"hide",args:[]})}async function jU({ref:e}={}){return po({instanceRef:e,namespace:"BrowserWindow",method:"show",args:[]})}async function Unt({ref:e}={}){return await po({instanceRef:e,namespace:"BrowserWindow",property:"webContents"})}async function Bnt({ref:e}={},...t){return po({instanceRef:e,namespace:"BrowserWindow",method:"setPosition",args:t})}const $nt={enterFullscreen:"window.enter-full-screen",exitFullscreen:"window.leave-full-screen"},gye=Ant($nt,"BrowserWindow"),Jv=gye.on,f8=gye.removeAllListeners;async function BX({id:e}){if(I0(`${$X}:retrieve`,"4.18.0"))return window.todesktop[$X]({action:"retrieve",payload:{id:e}})}const $X="objectStore";async function AE(e){return window.todesktop.contents.openUrlInBrowser(e)}async function Vnt(){return po({namespace:"screen",method:"getCursorScreenPoint",args:[]})}async function Wnt(e){return po({namespace:"screen",method:"getDisplayNearestPoint",args:[e]})}async function Hnt(e){return hye({namespace:"BrowserView",args:[e]})}async function znt({ref:e},...t){return po({instanceRef:e,namespace:"WebContents",method:"loadURL",args:t})}const Gnt="pkce_verifier",qnt=5/(24*60),Knt=128,Ynt=e=>{const t=Math.ceil(e*.75),n=new Uint8Array(t);return crypto.getRandomValues(n),btoa(String.fromCharCode(...n)).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"").slice(0,e)},Qnt=async e=>{const n=new TextEncoder().encode(e);try{let r;typeof window<"u"&&window.crypto?.subtle?r=await window.crypto.subtle.digest("SHA-256",n):r=new TextEncoder().encode(e);const s=Array.from(new Uint8Array(r)),a=String.fromCharCode(...s);return btoa(a).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}catch(r){throw ne.error("Failed to generate code challenge: "+r),new Error("Failed to generate code challenge: "+r)}},Xnt=e=>{sn(Gnt,e,{secure:!0,sameSite:"Lax",expires:qnt,path:"/"})},VX=async()=>{const e=Ynt(Knt);return Xnt(e),Qnt(e)},S6={cacheName:{prefix:"pplx",suffix:"v2",runtime:"runtime"}},Znt=[S6.cacheName.prefix,S6.cacheName.runtime,S6.cacheName.suffix].join("-");async function WX(){const e=mo();if("serviceWorker"in navigator){const{Workbox:t}=await X(async()=>{const{Workbox:s}=await import("./workbox-window.prod.es5-B9K5rw8f.js");return{Workbox:s}},[]),n=new URL("/service-worker.js",window.location.origin);e.version&&n.searchParams.set("v",e.version);const r=new t(n.toString());try{await r.register()}catch(s){ne.error("Error registering service worker",s)}}}async function Jnt(){"serviceWorker"in navigator&&await navigator.serviceWorker.getRegistrations().then(e=>Promise.all(e.map(t=>t.unregister())))}async function l3(){if("serviceWorker"in navigator){await caches.delete(Znt);return}}const e0=async(...e)=>(await l3(),Xb.signIn(...e)),ert=async({email:e,reason:t})=>{let n=null;try{n=await Qhe({email:e,reason:t})}catch(r){return ne.log(r),null}return n?.workos_org_id??null},trt=async({email:e,reason:t})=>{let n=null;try{n=await Qhe({email:e,reason:t})}catch(r){return ne.log(r),null}return n?.force_sso??!1},nrt=({email:e,onError:t,onClose:n,redirectUrl:r,reason:s})=>{const{$t:a}=Z(),{trackEvent:i}=Te(),{device:{isWindowsApp:l}}=Pt(),c=vt(),{locale:u}=Z(),f=d.useMemo(()=>e.length>0&&e.includes("@")&&e.includes(".")&&e.indexOf("@")<e.lastIndexOf(".")&&e.indexOf("@")>0,[e]),m=d.useCallback(async y=>{i("login with third party clicked",{thirdParty:y});const x=window.location.origin;if(l){const v=await VX(),b=`${x}/auth/${hE}/${y}?code_challenge=${v}&desktopRedirect=${encodeURIComponent(r)}&client_id=${ZK}`;return AE(b),b}return await e0(y,{callbackUrl:r})},[i,r,l]),p=d.useCallback(async()=>{const y=await ert({email:e,reason:s});if(!y){t(`SSO not available for email ${e}`);return}if(n(),l){const x=window.location.origin,v=await VX(),b=`${x}/auth/${hE}/workos?code_challenge=${v}&desktopRedirect=${r}&organization=${y}&login_hint=${e}&client_id=${ZK}`;AE(b);return}await e0("workos",{callbackUrl:r},{organization:y,login_hint:e})},[e,n,t,r,l,s]),h=d.useCallback(async()=>{const y=e?.toLowerCase();if(await trt({email:y,reason:s})){await p();return}const v=dqe({redirect:r});i("login with email clicked",{email:y});let b=`${v}#locale=${u}`;l&&(b=`${v}?windows-app-redirect-token=${bGe}#locale=${u}`);const _=await e0("email",{email:y,callbackUrl:b,redirect:!1,useNumericOtp:!0});if(_?.ok){oj(`email request POST successful for ${y}`);const w=encodeURIComponent(y),C=encodeURIComponent(v),S=`/auth/verify-request?email=${w}&redirectUrl=${C}`;c.push(S)}else if(_?.status===429)oj(`email sign in rate limited for ${y}`),c.push("/auth/email-rate-limited");else{const w=`email sign in generic error: ${y} Response(status=${_?.status}, error=${_?.error}, ok=${_?.ok}, url=${_?.url})`;oj(w),ne.error(new Error(w)),t(a({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"}))}},[e,r,c,i,u,p,t,a,l,s]),g=d.useCallback(async(y,x)=>{const v={callbackUrl:r};switch(y){case"basic":v.pro=!1;break;case"pro":v.pro=!0;break;case"enterpriseMember":v.enterprise_member=!0;break;case"enterpriseAdmin":v.enterprise_admin=!0;break;case"enterpriseBillingAdmin":v.enterprise_billing_admin=!0;break;case"script":v.script=!0;break;case"frontendTest":v.fe_test=!0;break;case"example.com":v.email_handle=x??"pplx-dev";break}return await e0("devlogin",v)},[r]);return d.useMemo(()=>({emailIsValid:f,handleThirdPartySignIn:m,handleMagicLinkEmailSignIn:h,handleSSOSignIn:p,handleDevSignIn:g}),[f,g,h,p,m])},IE=(e,t)=>e==="highlightPrimary"?t?"primary":"common":e==="highlightBackToSchool"?t?"orange":"common":"inverted",rrt=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Z();return o.jsx(me,{fullWidth:!0,leadingComponent:o.jsx(h7e,{className:"left-two relative -top-px",size:18}),extraCSS:"h-11",variant:IE(t,!1),text:n({defaultMessage:"Continue with {apple}",id:"Iy1YQBJ5Tk"},{apple:"Apple"}),onClick:()=>e("apple")})},srt=({onClick:e})=>{const{$t:t}=Z();return o.jsx(Me,{fullWidth:!0,variant:"noBackground",extraCSS:"border-none text-inverse",text:t({defaultMessage:"Close",id:"rbrahOGMC3"}),onClick:e})},art=({autoFocus:e=!1,isSSO:t,email:n,emailInFlight:r,handleEmailClick:s,inputRef:a,handleKeyDown:i,setEmail:l,error:c,setError:u,placeholder:f,loginButtonsStyle:m})=>{const{$t:p}=Z(),{isMobileUserAgent:h}=xe(),g="regular",y="w-full h-11",x=B("h-11 border-none rounded-lg","!bg-subtle");return o.jsxs(z,{className:"space-y-xs",children:[o.jsx(Xr,{autoFocus:e,isMobileUserAgent:h,type:"email",name:"email",className:x,pill:!1,errorText:c,placeholder:f||p(t?{defaultMessage:"Enter your work email",id:"jAgre55Zsn"}:{defaultMessage:"Enter your email",id:"5MDGuMLnEB"}),value:n,onKeyDown:i,onChange:v=>{u(""),l(v)},ref:a,disabled:r,errorPlacement:Md.LABEL}),o.jsx("div",{className:"flex justify-center",children:t?o.jsx(me,{chevron:!0,chevronIcon:Xn,size:g,text:p(t?{defaultMessage:"Continue with SSO",id:"qank7+0V6w"}:{defaultMessage:"Continue with email",id:"l6yCDglZqT"}),extraCSS:B(y,"mt-xs"),variant:IE(m,!0),onClick:s,isLoading:r,disabled:n===""||r}):o.jsx(me,{size:g,text:p({defaultMessage:"Continue with email",id:"l6yCDglZqT"}),onClick:s,isLoading:r,disabled:n===""||r,extraCSS:"w-full h-11 mt-xs",variant:IE(m,!0)})})]})},ort=({handleThirdPartySignIn:e,loginButtonsStyle:t})=>{const{$t:n}=Z();return o.jsx(me,{fullWidth:!0,leadingComponent:o.jsx(g7e,{size:18}),text:n({defaultMessage:"Continue with {google}",id:"Fc2NqN6N7A"},{google:"Google"}),onClick:()=>e("google"),extraCSS:"h-11",variant:IE(t,!0)})},irt=new Set(["super","textColor","max","orange"]),lrt=new Set(["red"]),crt=e=>irt.has(e)?"defaultInverted":lrt.has(e)?"white":e==="maxBorder"?"max":e==="superBorder"?"super":"default",AU=I.memo(({text:e,variant:t="super",boxProps:n,textProps:r})=>{const s=crt(t);return o.jsx(z,{variant:t,...n,className:B("px-xs rounded-badge -mt-px box-border inline-flex",n?.className),children:o.jsx(F,{variant:"tiny",className:"leading-4",color:s,inline:!0,...r,children:e})})});AU.displayName="Badge";function IU(e){const t=d.useRef({value:e,previous:e});return d.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}var c3="Switch",[urt,fon]=Ca(c3),[drt,frt]=urt(c3),yye=d.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c="on",onCheckedChange:u,form:f,...m}=e,[p,h]=d.useState(null),g=En(t,_=>h(_)),y=d.useRef(!1),x=p?f||!!p.closest("form"):!0,[v,b]=Ni({prop:s,defaultProp:a??!1,onChange:u,caller:c3});return o.jsxs(drt,{scope:n,checked:v,disabled:l,children:[o.jsx(Xt.button,{type:"button",role:"switch","aria-checked":v,"aria-required":i,"data-state":_ye(v),"data-disabled":l?"":void 0,disabled:l,value:c,...m,ref:g,onClick:it(e.onClick,_=>{b(w=>!w),x&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),x&&o.jsx(bye,{control:p,bubbles:!y.current,name:r,value:c,checked:v,required:i,disabled:l,form:f,style:{transform:"translateX(-100%)"}})]})});yye.displayName=c3;var xye="SwitchThumb",vye=d.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=frt(xye,n);return o.jsx(Xt.span,{"data-state":_ye(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});vye.displayName=xye;var mrt="SwitchBubbleInput",bye=d.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=d.useRef(null),l=En(i,a),c=IU(n),u=u5(t);return d.useEffect(()=>{const f=i.current;if(!f)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(f,n),f.dispatchEvent(g)}},[c,n,r]),o.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});bye.displayName=mrt;function _ye(e){return e?"checked":"unchecked"}var wye=yye,Cye=vye;const _o=d.memo(({active:e=!1,disabled:t,id:n,text:r,testId:s,onChange:a,size:i="default",switchProps:l,ref:c,...u})=>{const f=B("rounded-full relative bg-base dark:bg-inverse dark:text-foreground",i==="default"?"size-4":"size-2.5","before:content-[''] before:duration-150 dark:before:shadow-md before:absolute before:inset-0 before:rounded-full before:bg-base before:dark:bg-white",{"before:opacity-20":t}),m=B("flex rounded-full duration-150 shadow-inset-xs",i==="default"?"w-9  p-three":"w-5 h-3.5 p-0.5","data-[state=checked]:justify-end","data-[state=checked]:bg-super dark:data-[state=checked]:bg-super/85","data-[state=unchecked]:bg-inverse/45 dark:data-[state=unchecked]:bg-inverse/20",{"opacity-50":t});return o.jsxs("div",{className:B("group/switch gap-sm flex cursor-default items-center",{"cursor-pointer":!t}),"data-testid":s,ref:c,...u,children:[o.jsx(wye,{asChild:!0,checked:e,onCheckedChange:t?void 0:a,id:n,disabled:t,className:"group/switch gap-sm flex items-center","data-testid":s,style:{WebkitTapHighlightColor:"transparent"},...l,children:o.jsx(ve.button,{className:m,layout:!0,layoutRoot:!0,children:o.jsx(Cye,{asChild:!0,children:o.jsx(ve.div,{className:f,layout:"position",transition:{layout:{type:"spring",duration:.2,bounce:.3}}})})})}),r&&o.jsx(F,{variant:"smallBold",className:B("mr-sm whitespace-nowrap duration-150",{"cursor-pointer":!t},{"group-hover/switch:text-foreground":!e&&!t}),htmlFor:n,as:"label",color:e?"super":"light",children:r})]})});_o.displayName="Switch";const lx=I.memo(({children:e,className:t,disabled:n,onClick:r,onMouseDown:s,onMouseEnter:a,onMouseMove:i,testId:l,rounded:c,href:u,focused:f,disableHoverStyles:m=!1,target:p="_blank",tooltipText:h,tooltipLayout:g="right",tooltipDelayDuration:y,active:x=!1,role:v="menuitem"})=>{const b=d.useRef(null),_=Ha(),w=o.jsx("div",{className:B("duration-quick relative select-none rounded-lg transition-all","px-sm py-1.5 md:h-full",{"hover:bg-subtler cursor-pointer":!n&&!m,"cursor-pointer":!n&&m,rounded:c,"bg-subtler":f}),children:e}),C=B("group/item md:h-full",t);d.useEffect(()=>{b.current&&f&&b.current.scrollIntoView({behavior:"instant",block:"nearest"})},[f]);const S=v==="menuitemradio"||v==="menuitemcheckbox"?x?"true":"false":void 0;return u&&!n?o.jsx(qe,{href:u,target:p,className:C,onClick:r,"data-testid":l,children:w}):o.jsx(bn,{tooltipText:h,showTooltip:!_&&!!h,tooltipLayout:g,delayDuration:y,offset:12,asChild:!0,children:o.jsx("div",{role:v,"aria-checked":S,ref:b,"data-testid":l,className:C,onClick:n?void 0:r,onMouseDown:n?void 0:s,onMouseEnter:n?void 0:a,onMouseMove:n?void 0:i,children:w})})});lx.displayName="MenuItemWrapper";const prt=({icon:e,avatar:t,destructive:n})=>{if(t)return t;if(!e)return null;const r=B({"!text-caution":n},"opacity-90");return o.jsx(de,{icon:e,className:r,size:"sm"})},hrt=/\bgap(-[xy])?-/,grt={[Yt.small]:"extraSmall",[Yt.tiny]:"tiny"},cx=I.memo(({customDescriptionNode:e,customTextNode:t,text:n,description:r,icon:s,avatar:a,label:i,badge:l,link:c,onLinkClick:u,size:f=Yt.small,color:m="default",badgeVariant:p="super",destructive:h,leftElement:g,rightElement:y,bottomElement:x,textTrailingElement:v,className:b="",preserveLeftIconSpace:_=!1,textClassName:w})=>{const C=s||a;return o.jsxs("div",{className:B("flex",b,hrt.test(b)?"":"gap-sm"),children:[(C||_)&&o.jsx("div",{className:"flex",children:o.jsx(F,{color:m,className:B("flex size-5 justify-center leading-none",{"-mt-one":a}),children:!_||C?o.jsx(prt,{icon:s,avatar:a,destructive:h}):null})}),g,o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"flex flex-col gap-y-0.5",children:[t||o.jsxs(F,{variant:grt[f]??"baseSemi",color:m,className:B("flex items-center gap-x-1.5",{"!text-caution":h}),children:[o.jsx("span",{className:w,children:n}),v,l&&o.jsx(AU,{text:l,variant:p})]}),e||r&&o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:r}),c&&o.jsx(F,{variant:"tinyRegular",color:"super",onClick:u,children:c}),x]}),i&&o.jsx(F,{className:"mt-one whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:i})]}),y]})});cx.displayName="BaseMenuItem";const RU=I.memo(e=>{const{active:t,show:n=!0,className:r,rounded:s,color:a="default",badgeVariant:i="super",disabled:l,href:c,onClick:u,onMouseDown:f,onMouseEnter:m,onMouseMove:p,testId:h,rightElement:g,focused:y,preserveRightElementSpace:x=!0,disableHoverStyles:v=!1,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S}=e;if(!n)return null;let E=a;l?E="ultraLight":t&&(E="super");const k=g??o.jsx(F,{color:t?"super":E,className:"size-5",children:o.jsx(de,{icon:dr,size:"sm",className:t?"opacity-100":"opacity-0","aria-hidden":!t})});return o.jsx(lx,{className:r,disabled:l,onClick:u,onMouseDown:f,onMouseEnter:m,onMouseMove:p,testId:h,rounded:s,href:c,focused:y,disableHoverStyles:v,target:b,tooltipText:_,tooltipLayout:w,tooltipDelayDuration:C,role:S,active:t,children:o.jsx(cx,{...e,color:E,badgeVariant:i,rightElement:x?k:g})})});RU.displayName="DefaultMenuItem";const Sye=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:f,active:m,disableHoverStyles:p=!1,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,iconVariant:x="checkbox",disableActiveStyles:v=!1}=e;let b=r;s?b="ultraLight":(m||f)&&!v&&(b="super");const _=d.useMemo(()=>x==="check"?o.jsx(F,{color:f&&!v?"super":b,className:"size-5",children:o.jsx(de,{icon:dr,size:"sm",className:f?"opacity-100":"opacity-0","aria-hidden":!f})}):o.jsx(F,{color:f&&!v?"super":b,children:o.jsx(de,{icon:f?zle:y7e,size:"sm"})}),[b,f,x,v]);return o.jsx(lx,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:p,tooltipText:h,tooltipLayout:g,tooltipDelayDuration:y,children:o.jsx(cx,{...e,color:b,rightElement:_})})});Sye.displayName="MultiSelectMenuItem";const PU=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:f,active:m,rightElement:p,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x}=e;let v=r;s?v="ultraLight":(m||f)&&(v="super");const b=d.useMemo(()=>o.jsxs("div",{className:"gap-x-sm flex items-start pt-0.5",children:[p,o.jsx(_o,{active:f,disabled:s,size:"small"})]}),[s,p,f]);return o.jsx(lx,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x,children:o.jsx(cx,{...e,color:v,rightElement:b})})});PU.displayName="ToggleMenuItem";const Eye=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,selected:f,active:m,showIconLeft:p=!1,disableHoverStyles:h=!1,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x}=e;let v=r;(m||f)&&(v="super");const b=o.jsx(F,{color:f?v:"ultraLight",className:B("flex pt-0.5 leading-none",{"opacity-50":s}),children:o.jsx(de,{icon:f?$R:x7e,size:"sm"})});return o.jsx(lx,{className:t,disabled:s,onClick:a,onMouseDown:i,onMouseEnter:l,onMouseMove:c,testId:u,rounded:n,disableHoverStyles:h,tooltipText:g,tooltipLayout:y,tooltipDelayDuration:x,children:o.jsx(cx,{...e,rightElement:p?void 0:b,leftElement:p?b:void 0})})});Eye.displayName="RadioMenuItem";const Mye=I.memo(e=>{const{text:t,show:n,className:r}=e;return n?o.jsxs(o.Fragment,{children:[o.jsx(z,{className:B("sm:mx-sm my-sm border-b first:hidden",r)}),t&&o.jsx(z,{variant:"background",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:o.jsx(F,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Mye.displayName="MenuItemSeparator";const kye=I.memo(e=>{const{className:t,rounded:n,color:r="default",disabled:s,onMouseDown:a,onMouseEnter:i,onMouseMove:l,testId:c,submenu:u,active:f,disableHoverStyles:m=!1,isSubmenuOpen:p,onSubmenuOpen:h,onSubmenuClose:g,menuWidth:y="200px"}=e;let x=r;s?x="ultraLight":f&&(x="super");const v=d.useMemo(()=>o.jsx(F,{color:"light",children:o.jsx(de,{icon:Xn,size:"sm"})}),[]),b=d.useMemo(()=>({className:"min-w-0",style:{width:y}}),[y]),_=d.useMemo(()=>({hasInteractiveContent:!0}),[]);return o.jsx(nn,{isOpen:p,items:u,placement:"right-end",onOpen:h,onClose:g,isMobileStyle:!1,hoverOpen:!0,boxProps:b,popoverProps:_,children:o.jsx(lx,{className:t,disabled:s,onMouseDown:a,onMouseEnter:i,onMouseMove:l,testId:c,rounded:n,disableHoverStyles:m,children:o.jsx(cx,{...e,color:x,rightElement:v})})})});kye.displayName="NestedMenuItem";const hu=I.memo(e=>{switch(e.type){case"default":{const{type:t,...n}=e;return o.jsx(RU,{...n,role:n.role||"menuitem"})}case"multiSelect":{const{type:t,...n}=e;return o.jsx(Sye,{...n,role:"menuitemcheckbox"})}case"toggle":{const{type:t,...n}=e;return o.jsx(PU,{...n,role:"menuitemcheckbox"})}case"radio":{const{type:t,...n}=e;return o.jsx(Eye,{...n,role:"menuitemradio"})}case"separator":{const{type:t,...n}=e;return o.jsx(Mye,{...n})}case"nested":{const{type:t,...n}=e;return o.jsx(kye,{...n})}case"custom":return o.jsx(o.Fragment,{children:e.children})}});hu.displayName="MenuItem";var yrt=d.createContext(void 0);function S_(e){const t=d.useContext(yrt);return e||t||"ltr"}function xrt(e,[t,n]){return Math.min(n,Math.max(t,e))}function vrt(e,t){return d.useReducer((n,r)=>t[n][r]??n,e)}var LU="ScrollArea",[Tye,mon]=Ca(LU),[brt,Ai]=Tye(LU),Nye=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,type:r="hover",dir:s,scrollHideDelay:a=600,...i}=e,[l,c]=d.useState(null),[u,f]=d.useState(null),[m,p]=d.useState(null),[h,g]=d.useState(null),[y,x]=d.useState(null),[v,b]=d.useState(0),[_,w]=d.useState(0),[C,S]=d.useState(!1),[E,k]=d.useState(!1),M=En(t,R=>c(R)),j=S_(s);return o.jsx(brt,{scope:n,type:r,dir:j,scrollHideDelay:a,scrollArea:l,viewport:u,onViewportChange:f,content:m,onContentChange:p,scrollbarX:h,onScrollbarXChange:g,scrollbarXEnabled:C,onScrollbarXEnabledChange:S,scrollbarY:y,onScrollbarYChange:x,scrollbarYEnabled:E,onScrollbarYEnabledChange:k,onCornerWidthChange:b,onCornerHeightChange:w,children:o.jsx(Xt.div,{dir:j,...i,ref:M,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":_+"px",...e.style}})})});Nye.displayName=LU;var jye="ScrollAreaViewport",Aye=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,children:r,nonce:s,...a}=e,i=Ai(jye,n),l=d.useRef(null),c=En(t,l,i.onViewportChange);return o.jsxs(o.Fragment,{children:[o.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),o.jsx(Xt.div,{"data-radix-scroll-area-viewport":"",...a,ref:c,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...e.style},children:o.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:r})})]})});Aye.displayName=jye;var Tc="ScrollAreaScrollbar",Iye=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ai(Tc,e.__scopeScrollArea),{onScrollbarXEnabledChange:a,onScrollbarYEnabledChange:i}=s,l=e.orientation==="horizontal";return d.useEffect(()=>(l?a(!0):i(!0),()=>{l?a(!1):i(!1)}),[l,a,i]),s.type==="hover"?o.jsx(_rt,{...r,ref:t,forceMount:n}):s.type==="scroll"?o.jsx(wrt,{...r,ref:t,forceMount:n}):s.type==="auto"?o.jsx(Rye,{...r,ref:t,forceMount:n}):s.type==="always"?o.jsx(OU,{...r,ref:t}):null});Iye.displayName=Tc;var _rt=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ai(Tc,e.__scopeScrollArea),[a,i]=d.useState(!1);return d.useEffect(()=>{const l=s.scrollArea;let c=0;if(l){const u=()=>{window.clearTimeout(c),i(!0)},f=()=>{c=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return l.addEventListener("pointerenter",u),l.addEventListener("pointerleave",f),()=>{window.clearTimeout(c),l.removeEventListener("pointerenter",u),l.removeEventListener("pointerleave",f)}}},[s.scrollArea,s.scrollHideDelay]),o.jsx(es,{present:n||a,children:o.jsx(Rye,{"data-state":a?"visible":"hidden",...r,ref:t})})}),wrt=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Ai(Tc,e.__scopeScrollArea),a=e.orientation==="horizontal",i=d3(()=>c("SCROLL_END"),100),[l,c]=vrt("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return d.useEffect(()=>{if(l==="idle"){const u=window.setTimeout(()=>c("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(u)}},[l,s.scrollHideDelay,c]),d.useEffect(()=>{const u=s.viewport,f=a?"scrollLeft":"scrollTop";if(u){let m=u[f];const p=()=>{const h=u[f];m!==h&&(c("SCROLL"),i()),m=h};return u.addEventListener("scroll",p),()=>u.removeEventListener("scroll",p)}},[s.viewport,a,c,i]),o.jsx(es,{present:n||l!=="hidden",children:o.jsx(OU,{"data-state":l==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:it(e.onPointerEnter,()=>c("POINTER_ENTER")),onPointerLeave:it(e.onPointerLeave,()=>c("POINTER_LEAVE"))})})}),Rye=d.forwardRef((e,t)=>{const n=Ai(Tc,e.__scopeScrollArea),{forceMount:r,...s}=e,[a,i]=d.useState(!1),l=e.orientation==="horizontal",c=d3(()=>{if(n.viewport){const u=n.viewport.offsetWidth<n.viewport.scrollWidth,f=n.viewport.offsetHeight<n.viewport.scrollHeight;i(l?u:f)}},10);return qg(n.viewport,c),qg(n.content,c),o.jsx(es,{present:r||a,children:o.jsx(OU,{"data-state":a?"visible":"hidden",...s,ref:t})})}),OU=d.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,s=Ai(Tc,e.__scopeScrollArea),a=d.useRef(null),i=d.useRef(0),[l,c]=d.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),u=Dye(l.viewport,l.content),f={...r,sizes:l,onSizesChange:c,hasThumb:u>0&&u<1,onThumbChange:p=>a.current=p,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:p=>i.current=p};function m(p,h){return Nrt(p,i.current,l,h)}return n==="horizontal"?o.jsx(Crt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollLeft,h=HX(p,l,s.dir);a.current.style.transform=`translate3d(${h}px, 0, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollLeft=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollLeft=m(p,s.dir))}}):n==="vertical"?o.jsx(Srt,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&a.current){const p=s.viewport.scrollTop,h=HX(p,l);a.current.style.transform=`translate3d(0, ${h}px, 0)`}},onWheelScroll:p=>{s.viewport&&(s.viewport.scrollTop=p)},onDragScroll:p=>{s.viewport&&(s.viewport.scrollTop=m(p))}}):null}),Crt=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Ai(Tc,e.__scopeScrollArea),[i,l]=d.useState(),c=d.useRef(null),u=En(t,c,a.onScrollbarXChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Lye,{"data-orientation":"horizontal",...s,ref:u,sizes:n,style:{bottom:0,left:a.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:a.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":u3(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,m)=>{if(a.viewport){const p=a.viewport.scrollLeft+f.deltaX;e.onWheelScroll(p),Uye(p,m)&&f.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollWidth,viewport:a.viewport.offsetWidth,scrollbar:{size:c.current.clientWidth,paddingStart:PE(i.paddingLeft),paddingEnd:PE(i.paddingRight)}})}})}),Srt=d.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,...s}=e,a=Ai(Tc,e.__scopeScrollArea),[i,l]=d.useState(),c=d.useRef(null),u=En(t,c,a.onScrollbarYChange);return d.useEffect(()=>{c.current&&l(getComputedStyle(c.current))},[c]),o.jsx(Lye,{"data-orientation":"vertical",...s,ref:u,sizes:n,style:{top:0,right:a.dir==="ltr"?0:void 0,left:a.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":u3(n)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,m)=>{if(a.viewport){const p=a.viewport.scrollTop+f.deltaY;e.onWheelScroll(p),Uye(p,m)&&f.preventDefault()}},onResize:()=>{c.current&&a.viewport&&i&&r({content:a.viewport.scrollHeight,viewport:a.viewport.offsetHeight,scrollbar:{size:c.current.clientHeight,paddingStart:PE(i.paddingTop),paddingEnd:PE(i.paddingBottom)}})}})}),[Ert,Pye]=Tye(Tc),Lye=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,sizes:r,hasThumb:s,onThumbChange:a,onThumbPointerUp:i,onThumbPointerDown:l,onThumbPositionChange:c,onDragScroll:u,onWheelScroll:f,onResize:m,...p}=e,h=Ai(Tc,n),[g,y]=d.useState(null),x=En(t,M=>y(M)),v=d.useRef(null),b=d.useRef(""),_=h.viewport,w=r.content-r.viewport,C=ma(f),S=ma(c),E=d3(m,10);function k(M){if(v.current){const j=M.clientX-v.current.left,R=M.clientY-v.current.top;u({x:j,y:R})}}return d.useEffect(()=>{const M=j=>{const R=j.target;g?.contains(R)&&C(j,w)};return document.addEventListener("wheel",M,{passive:!1}),()=>document.removeEventListener("wheel",M,{passive:!1})},[_,g,w,C]),d.useEffect(S,[r,S]),qg(g,E),qg(h.content,E),o.jsx(Ert,{scope:n,scrollbar:g,hasThumb:s,onThumbChange:ma(a),onThumbPointerUp:ma(i),onThumbPositionChange:S,onThumbPointerDown:ma(l),children:o.jsx(Xt.div,{...p,ref:x,style:{position:"absolute",...p.style},onPointerDown:it(e.onPointerDown,M=>{M.button===0&&(M.target.setPointerCapture(M.pointerId),v.current=g.getBoundingClientRect(),b.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",h.viewport&&(h.viewport.style.scrollBehavior="auto"),k(M))}),onPointerMove:it(e.onPointerMove,k),onPointerUp:it(e.onPointerUp,M=>{const j=M.target;j.hasPointerCapture(M.pointerId)&&j.releasePointerCapture(M.pointerId),document.body.style.webkitUserSelect=b.current,h.viewport&&(h.viewport.style.scrollBehavior=""),v.current=null})})})}),RE="ScrollAreaThumb",Oye=d.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Pye(RE,e.__scopeScrollArea);return o.jsx(es,{present:n||s.hasThumb,children:o.jsx(Mrt,{ref:t,...r})})}),Mrt=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,style:r,...s}=e,a=Ai(RE,n),i=Pye(RE,n),{onThumbPositionChange:l}=i,c=En(t,m=>i.onThumbChange(m)),u=d.useRef(void 0),f=d3(()=>{u.current&&(u.current(),u.current=void 0)},100);return d.useEffect(()=>{const m=a.viewport;if(m){const p=()=>{if(f(),!u.current){const h=jrt(m,l);u.current=h,l()}};return l(),m.addEventListener("scroll",p),()=>m.removeEventListener("scroll",p)}},[a.viewport,f,l]),o.jsx(Xt.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:c,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...r},onPointerDownCapture:it(e.onPointerDownCapture,m=>{const h=m.target.getBoundingClientRect(),g=m.clientX-h.left,y=m.clientY-h.top;i.onThumbPointerDown({x:g,y})}),onPointerUp:it(e.onPointerUp,i.onThumbPointerUp)})});Oye.displayName=RE;var DU="ScrollAreaCorner",krt=d.forwardRef((e,t)=>{const n=Ai(DU,e.__scopeScrollArea),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?o.jsx(Trt,{...e,ref:t}):null});krt.displayName=DU;var Trt=d.forwardRef((e,t)=>{const{__scopeScrollArea:n,...r}=e,s=Ai(DU,n),[a,i]=d.useState(0),[l,c]=d.useState(0),u=!!(a&&l);return qg(s.scrollbarX,()=>{const f=s.scrollbarX?.offsetHeight||0;s.onCornerHeightChange(f),c(f)}),qg(s.scrollbarY,()=>{const f=s.scrollbarY?.offsetWidth||0;s.onCornerWidthChange(f),i(f)}),u?o.jsx(Xt.div,{...r,ref:t,style:{width:a,height:l,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function PE(e){return e?parseInt(e,10):0}function Dye(e,t){const n=e/t;return isNaN(n)?0:n}function u3(e){const t=Dye(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function Nrt(e,t,n,r="ltr"){const s=u3(n),a=s/2,i=t||a,l=s-i,c=n.scrollbar.paddingStart+i,u=n.scrollbar.size-n.scrollbar.paddingEnd-l,f=n.content-n.viewport,m=r==="ltr"?[0,f]:[f*-1,0];return Fye([c,u],m)(e)}function HX(e,t,n="ltr"){const r=u3(t),s=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,a=t.scrollbar.size-s,i=t.content-t.viewport,l=a-r,c=n==="ltr"?[0,i]:[i*-1,0],u=xrt(e,c);return Fye([0,i],[0,l])(u)}function Fye(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Uye(e,t){return e>0&&e<t}var jrt=(e,t=()=>{})=>{let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function s(){const a={left:e.scrollLeft,top:e.scrollTop},i=n.left!==a.left,l=n.top!==a.top;(i||l)&&t(),n=a,r=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(r)};function d3(e,t){const n=ma(e),r=d.useRef(0);return d.useEffect(()=>()=>window.clearTimeout(r.current),[]),d.useCallback(()=>{window.clearTimeout(r.current),r.current=window.setTimeout(n,t)},[n,t])}function qg(e,t){const n=ma(t);Cu(()=>{let r=0;if(e){const s=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return s.observe(e),()=>{window.cancelAnimationFrame(r),s.unobserve(e)}}},[e,n])}var Art=Nye,Irt=Aye,zX=Iye,GX=Oye;const sl=I.memo(({children:e,orientation:t="vertical",showScrollIndicator:n=!0,thumbClassName:r="",className:s,viewportRef:a,viewportClassName:i,showIndicatorOnHover:l=!0,onScroll:c})=>{const f="before:content-[''] before:absolute before:top-[50%] before:left-[50%] before:translate-x-[-50%] before:translate-y-[-50%] before:w-[100%] before:h-[100%] before:min-w-[10px] before:min-h-[10px]"+" rounded-full bg-subtle duration-quick relative",m=B("flex flex-col p-px duration-150",{"data-[state=visible]:opacity-100":n,"pointer-events-none":!n,"opacity-0":l,"opacity-100":!l});return o.jsxs(Art,{className:B("w-full overflow-hidden",s),children:[o.jsx(Irt,{className:B("size-full",i),ref:a,onScroll:c,children:e}),["vertical","both"].includes(t)&&o.jsx(zX,{forceMount:!0,orientation:"vertical",className:m,children:o.jsx(GX,{className:`!w-[5px] ${f} ${r}`})}),["horizontal","both"].includes(t)&&o.jsx(zX,{forceMount:!0,orientation:"horizontal",className:m,children:o.jsx(GX,{className:`!h-[5px] ${f} ${r}`})})]})}),pon=(e,t=10,n=250)=>{const[r,s]=d.useState(!0),[a,i]=d.useState(!1);return d.useEffect(()=>{const l=gs(()=>{if(e.current){const u=e.current.scrollLeft,f=e.current.scrollWidth,m=e.current.clientWidth,p=f-m;s(u<=t),i(u>=p-t)}},n,{leading:!0}),c=e.current;return c?.addEventListener("scroll",l),l(),()=>{c?.removeEventListener("scroll",l)}},[e,t,n]),d.useMemo(()=>({isScrolledToLeft:r,isScrolledToRight:a}),[r,a])},Rrt=I.memo(({scrollRef:e,buttonProps:t,children:n,className:r})=>{const s=d.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft-e.current?.scrollWidth/3,behavior:"smooth"})},[e]),a=d.useCallback(()=>{e.current?.scrollTo({left:e.current?.scrollLeft+e.current?.scrollWidth/3,behavior:"smooth"})},[e]);return o.jsxs(z,{className:r,children:[o.jsx(Me,{pill:!0,icon:cp,onClick:s,...t}),n,o.jsx(Me,{pill:!0,icon:Xn,onClick:a,...t})]})});Rrt.displayName="ScrollAreaArrows";sl.displayName="ScrollArea";const zd=I.memo(({items:e,grid:t,cols:n=1,disableScrollArea:r=!1,disableHoverStyles:s=!1})=>{const a=d.useMemo(()=>t&&n>1?{display:"grid",gridTemplateColumns:`repeat(${n}, minmax(0, 1fr))`,gap:"1px"}:void 0,[t,n]),i=({children:l})=>a?o.jsx("div",{role:"menu",style:a,children:l}):r?o.jsx("div",{role:"menu",className:"p-xs flex flex-col gap-px",children:l}):o.jsx(sl,{showIndicatorOnHover:!1,className:"p-xs",children:o.jsx("div",{role:"menu",className:"flex flex-col gap-px",children:l})});return o.jsx(i,{children:e.map((l,c)=>l.type==="separator"?o.jsx(hu,{...l},c):o.jsx(hu,{disableHoverStyles:s,...l},c))})});zd.displayName="Menu";function f3(){return typeof window<"u"}function ux(e){return Bye(e)?(e.nodeName||"").toLowerCase():"#document"}function $o(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Nc(e){var t;return(t=(Bye(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function Bye(e){return f3()?e instanceof Node||e instanceof $o(e).Node:!1}function xa(e){return f3()?e instanceof Element||e instanceof $o(e).Element:!1}function mc(e){return f3()?e instanceof HTMLElement||e instanceof $o(e).HTMLElement:!1}function m8(e){return!f3()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof $o(e).ShadowRoot}function E_(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Ei(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function Prt(e){return["table","td","th"].includes(ux(e))}function m3(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function FU(e){const t=UU(),n=xa(e)?Ei(e):e;return["transform","translate","scale","rotate","perspective"].some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function Lrt(e){let t=Gd(e);for(;mc(t)&&!Kg(t);){if(FU(t))return t;if(m3(t))return null;t=Gd(t)}return null}function UU(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Kg(e){return["html","body","#document"].includes(ux(e))}function Ei(e){return $o(e).getComputedStyle(e)}function p3(e){return xa(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Gd(e){if(ux(e)==="html")return e;const t=e.assignedSlot||e.parentNode||m8(e)&&e.host||Nc(e);return m8(t)?t.host:t}function $ye(e){const t=Gd(e);return Kg(t)?e.ownerDocument?e.ownerDocument.body:e.body:mc(t)&&E_(t)?t:$ye(t)}function U1(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=$ye(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),i=$o(s);if(a){const l=p8(i);return t.concat(i,i.visualViewport||[],E_(s)?s:[],l&&n?U1(l):[])}return t.concat(s,U1(s,[],n))}function p8(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function Ort(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Drt(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&m8(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Frt(){return/apple/i.test(navigator.vendor)}function Urt(e){return e?.ownerDocument||document}const h8=Math.min,lg=Math.max,LE=Math.round,jC=Math.floor,Jl=e=>({x:e,y:e});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Brt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],g8=Brt.join(","),Vye=typeof Element>"u",B1=Vye?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,OE=!Vye&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e?.ownerDocument},DE=function e(t,n){var r;n===void 0&&(n=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),a=s===""||s==="true",i=a||n&&t&&e(t.parentNode);return i},$rt=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},Vrt=function(t,n,r){if(DE(t))return[];var s=Array.prototype.slice.apply(t.querySelectorAll(g8));return n&&B1.call(t,g8)&&s.unshift(t),s=s.filter(r),s},Wrt=function e(t,n,r){for(var s=[],a=Array.from(t);a.length;){var i=a.shift();if(!DE(i,!1))if(i.tagName==="SLOT"){var l=i.assignedElements(),c=l.length?l:i.children,u=e(c,!0,r);r.flatten?s.push.apply(s,u):s.push({scopeParent:i,candidates:u})}else{var f=B1.call(i,g8);f&&r.filter(i)&&(n||!t.includes(i))&&s.push(i);var m=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),p=!DE(m,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(m&&p){var h=e(m===!0?i.children:m.children,!0,r);r.flatten?s.push.apply(s,h):s.push({scopeParent:i,candidates:h})}else a.unshift.apply(a,i.children)}}return s},Wye=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Hye=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||$rt(t))&&!Wye(t)?0:t.tabIndex},Hrt=function(t,n){var r=Hye(t);return r<0&&n&&!Wye(t)?0:r},zrt=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},zye=function(t){return t.tagName==="INPUT"},Grt=function(t){return zye(t)&&t.type==="hidden"},qrt=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},Krt=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},Yrt=function(t){if(!t.name)return!0;var n=t.form||OE(t),r=function(l){return n.querySelectorAll('input[type="radio"][name="'+l+'"]')},s;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")s=r(window.CSS.escape(t.name));else try{s=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var a=Krt(s,t.form);return!a||a===t},Qrt=function(t){return zye(t)&&t.type==="radio"},Xrt=function(t){return Qrt(t)&&!Yrt(t)},Zrt=function(t){var n,r=t&&OE(t),s=(n=r)===null||n===void 0?void 0:n.host,a=!1;if(r&&r!==t){var i,l,c;for(a=!!((i=s)!==null&&i!==void 0&&(l=i.ownerDocument)!==null&&l!==void 0&&l.contains(s)||t!=null&&(c=t.ownerDocument)!==null&&c!==void 0&&c.contains(t));!a&&s;){var u,f,m;r=OE(s),s=(u=r)===null||u===void 0?void 0:u.host,a=!!((f=s)!==null&&f!==void 0&&(m=f.ownerDocument)!==null&&m!==void 0&&m.contains(s))}}return a},qX=function(t){var n=t.getBoundingClientRect(),r=n.width,s=n.height;return r===0&&s===0},Jrt=function(t,n){var r=n.displayCheck,s=n.getShadowRoot;if(getComputedStyle(t).visibility==="hidden")return!0;var a=B1.call(t,"details>summary:first-of-type"),i=a?t.parentElement:t;if(B1.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof s=="function"){for(var l=t;t;){var c=t.parentElement,u=OE(t);if(c&&!c.shadowRoot&&s(c)===!0)return qX(t);t.assignedSlot?t=t.assignedSlot:!c&&u!==t.ownerDocument?t=u.host:t=c}t=l}if(Zrt(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return qX(t);return!1},est=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var s=n.children.item(r);if(s.tagName==="LEGEND")return B1.call(n,"fieldset[disabled] *")?!0:!s.contains(t)}return!0}n=n.parentElement}return!1},tst=function(t,n){return!(n.disabled||DE(n)||Grt(n)||Jrt(n,t)||qrt(n)||est(n))},KX=function(t,n){return!(Xrt(n)||Hye(n)<0||!tst(t,n))},nst=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},rst=function e(t){var n=[],r=[];return t.forEach(function(s,a){var i=!!s.scopeParent,l=i?s.scopeParent:s,c=Hrt(l,i),u=i?e(s.candidates):l;c===0?i?n.push.apply(n,u):n.push(l):r.push({documentOrder:a,tabIndex:c,item:s,isScope:i,content:u})}),r.sort(zrt).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},Gye=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Wrt([t],n.includeContainer,{filter:KX.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:nst}):r=Vrt(t,n.includeContainer,KX.bind(null,n)),rst(r)};function YX(e,t,n){let{reference:r,floating:s}=e;const a=Ns(t),i=s_(t),l=r_(i),c=Ps(t),u=a==="y",f=r.x+r.width/2-s.width/2,m=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let h;switch(c){case"top":h={x:f,y:r.y-s.height};break;case"bottom":h={x:f,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:m};break;case"left":h={x:r.x-s.width,y:m};break;default:h={x:r.x,y:r.y}}switch(Mc(t)){case"start":h[i]-=p*(n&&u?-1:1);break;case"end":h[i]+=p*(n&&u?-1:1);break}return h}const sst=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:i}=n,l=a.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(t));let u=await i.getElementRects({reference:e,floating:t,strategy:s}),{x:f,y:m}=YX(u,r,c),p=r,h={},g=0;for(let y=0;y<l.length;y++){const{name:x,fn:v}=l[y],{x:b,y:_,data:w,reset:C}=await v({x:f,y:m,initialPlacement:r,placement:p,strategy:s,middlewareData:h,rects:u,platform:i,elements:{reference:e,floating:t}});f=b??f,m=_??m,h={...h,[x]:{...h[x],...w}},C&&g<=50&&(g++,typeof C=="object"&&(C.placement&&(p=C.placement),C.rects&&(u=C.rects===!0?await i.getElementRects({reference:e,floating:t,strategy:s}):C.rects),{x:f,y:m}=YX(u,p,c)),y=-1)}return{x:f,y:m,placement:p,strategy:s,middlewareData:h}};async function BU(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:i,elements:l,strategy:c}=e,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:m="floating",altBoundary:p=!1,padding:h=0}=Rs(t,e),g=a_(h),x=l[p?m==="floating"?"reference":"floating":m],v=dc(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(x)))==null||n?x:x.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),b=m==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,_=await(a.getOffsetParent==null?void 0:a.getOffsetParent(l.floating)),w=await(a.isElement==null?void 0:a.isElement(_))?await(a.getScale==null?void 0:a.getScale(_))||{x:1,y:1}:{x:1,y:1},C=dc(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:b,offsetParent:_,strategy:c}):b);return{top:(v.top-C.top+g.top)/w.y,bottom:(C.bottom-v.bottom+g.bottom)/w.y,left:(v.left-C.left+g.left)/w.x,right:(C.right-v.right+g.right)/w.x}}const ast=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:a,platform:i,elements:l,middlewareData:c}=t,{element:u,padding:f=0}=Rs(e,t)||{};if(u==null)return{};const m=a_(f),p={x:n,y:r},h=s_(s),g=r_(h),y=await i.getDimensions(u),x=h==="y",v=x?"top":"left",b=x?"bottom":"right",_=x?"clientHeight":"clientWidth",w=a.reference[g]+a.reference[h]-p[h]-a.floating[g],C=p[h]-a.reference[h],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let E=S?S[_]:0;(!E||!await(i.isElement==null?void 0:i.isElement(S)))&&(E=l.floating[_]||a.floating[g]);const k=w/2-C/2,M=E/2-y[g]/2-1,j=Ba(m[v],M),R=Ba(m[b],M),O=j,D=E-y[g]-R,P=E/2-y[g]/2+k,A=Pg(O,P,D),T=!c.arrow&&Mc(s)!=null&&P!==A&&a.reference[g]/2-(P<O?j:R)-y[g]/2<0,N=T?P<O?P-O:P-D:0;return{[h]:p[h]+N,data:{[h]:A,centerOffset:P-A-N,...T&&{alignmentOffset:N}},reset:T}}}),ost=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:a,rects:i,initialPlacement:l,platform:c,elements:u}=t,{mainAxis:f=!0,crossAxis:m=!0,fallbackPlacements:p,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:y=!0,...x}=Rs(e,t);if((n=a.arrow)!=null&&n.alignmentOffset)return{};const v=Ps(s),b=Ns(l),_=Ps(l)===l,w=await(c.isRTL==null?void 0:c.isRTL(u.floating)),C=p||(_||!y?[S1(l)]:Jde(l)),S=g!=="none";!p&&S&&C.push(...efe(l,y,g,w));const E=[l,...C],k=await BU(t,x),M=[];let j=((r=a.flip)==null?void 0:r.overflows)||[];if(f&&M.push(k[v]),m){const P=Zde(s,i,w);M.push(k[P[0]],k[P[1]])}if(j=[...j,{placement:s,overflows:M}],!M.every(P=>P<=0)){var R,O;const P=(((R=a.flip)==null?void 0:R.index)||0)+1,A=E[P];if(A)return{data:{index:P,overflows:j},reset:{placement:A}};let T=(O=j.filter(N=>N.overflows[0]<=0).sort((N,L)=>N.overflows[1]-L.overflows[1])[0])==null?void 0:O.placement;if(!T)switch(h){case"bestFit":{var D;const N=(D=j.filter(L=>{if(S){const U=Ns(L.placement);return U===b||U==="y"}return!0}).map(L=>[L.placement,L.overflows.filter(U=>U>0).reduce((U,$)=>U+$,0)]).sort((L,U)=>L[1]-U[1])[0])==null?void 0:D[0];N&&(T=N);break}case"initialPlacement":T=l;break}if(s!==T)return{reset:{placement:T}}}return{}}}};async function ist(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Ps(n),l=Mc(n),c=Ns(n)==="y",u=["left","top"].includes(i)?-1:1,f=a&&c?-1:1,m=Rs(t,e);let{mainAxis:p,crossAxis:h,alignmentAxis:g}=typeof m=="number"?{mainAxis:m,crossAxis:0,alignmentAxis:null}:{mainAxis:m.mainAxis||0,crossAxis:m.crossAxis||0,alignmentAxis:m.alignmentAxis};return l&&typeof g=="number"&&(h=l==="end"?g*-1:g),c?{x:h*f,y:p*u}:{x:p*u,y:h*f}}const lst=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:i,middlewareData:l}=t,c=await ist(t,e);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:a+c.y,data:{...c,placement:i}}}}},cst=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:i=!1,limiter:l={fn:x=>{let{x:v,y:b}=x;return{x:v,y:b}}},...c}=Rs(e,t),u={x:n,y:r},f=await BU(t,c),m=Ns(Ps(s)),p=n_(m);let h=u[p],g=u[m];if(a){const x=p==="y"?"top":"left",v=p==="y"?"bottom":"right",b=h+f[x],_=h-f[v];h=Pg(b,h,_)}if(i){const x=m==="y"?"top":"left",v=m==="y"?"bottom":"right",b=g+f[x],_=g-f[v];g=Pg(b,g,_)}const y=l.fn({...t,[p]:h,[m]:g});return{...y,data:{x:y.x-n,y:y.y-r,enabled:{[p]:a,[m]:i}}}}}},ust=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:a,middlewareData:i}=t,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=Rs(e,t),f={x:n,y:r},m=Ns(s),p=n_(m);let h=f[p],g=f[m];const y=Rs(l,t),x=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(c){const _=p==="y"?"height":"width",w=a.reference[p]-a.floating[_]+x.mainAxis,C=a.reference[p]+a.reference[_]-x.mainAxis;h<w?h=w:h>C&&(h=C)}if(u){var v,b;const _=p==="y"?"width":"height",w=["top","left"].includes(Ps(s)),C=a.reference[m]-a.floating[_]+(w&&((v=i.offset)==null?void 0:v[m])||0)+(w?0:x.crossAxis),S=a.reference[m]+a.reference[_]+(w?0:((b=i.offset)==null?void 0:b[m])||0)-(w?x.crossAxis:0);g<C?g=C:g>S&&(g=S)}return{[p]:h,[m]:g}}}},dst=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:i,elements:l}=t,{apply:c=()=>{},...u}=Rs(e,t),f=await BU(t,u),m=Ps(s),p=Mc(s),h=Ns(s)==="y",{width:g,height:y}=a.floating;let x,v;m==="top"||m==="bottom"?(x=m,v=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(v=m,x=p==="end"?"top":"bottom");const b=y-f.top-f.bottom,_=g-f.left-f.right,w=Ba(y-f[x],b),C=Ba(g-f[v],_),S=!t.middlewareData.shift;let E=w,k=C;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(k=_),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(E=b),S&&!p){const j=Lr(f.left,0),R=Lr(f.right,0),O=Lr(f.top,0),D=Lr(f.bottom,0);h?k=g-2*(j!==0||R!==0?j+R:Lr(f.left,f.right)):E=y-2*(O!==0||D!==0?O+D:Lr(f.top,f.bottom))}await c({...t,availableWidth:k,availableHeight:E});const M=await i.getDimensions(l.floating);return g!==M.width||y!==M.height?{reset:{rects:!0}}:{}}}};function qye(e){const t=Ei(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=mc(e),a=s?e.offsetWidth:n,i=s?e.offsetHeight:r,l=LE(n)!==a||LE(r)!==i;return l&&(n=a,r=i),{width:n,height:r,$:l}}function $U(e){return xa(e)?e:e.contextElement}function cg(e){const t=$U(e);if(!mc(t))return Jl(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=qye(t);let i=(a?LE(n.width):n.width)/r,l=(a?LE(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const fst=Jl(0);function Kye(e){const t=$o(e);return!UU()||!t.visualViewport?fst:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function mst(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==$o(e)?!1:t}function $m(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=$U(e);let i=Jl(1);t&&(r?xa(r)&&(i=cg(r)):i=cg(e));const l=mst(a,n,r)?Kye(a):Jl(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,f=s.width/i.x,m=s.height/i.y;if(a){const p=$o(a),h=r&&xa(r)?$o(r):r;let g=p,y=p8(g);for(;y&&r&&h!==g;){const x=cg(y),v=y.getBoundingClientRect(),b=Ei(y),_=v.left+(y.clientLeft+parseFloat(b.paddingLeft))*x.x,w=v.top+(y.clientTop+parseFloat(b.paddingTop))*x.y;c*=x.x,u*=x.y,f*=x.x,m*=x.y,c+=_,u+=w,g=$o(y),y=p8(g)}}return dc({width:f,height:m,x:c,y:u})}function VU(e,t){const n=p3(e).scrollLeft;return t?t.left+n:$m(Nc(e)).left+n}function Yye(e,t,n){n===void 0&&(n=!1);const r=e.getBoundingClientRect(),s=r.left+t.scrollLeft-(n?0:VU(e,r)),a=r.top+t.scrollTop;return{x:s,y:a}}function pst(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",i=Nc(r),l=t?m3(t.floating):!1;if(r===i||l&&a)return n;let c={scrollLeft:0,scrollTop:0},u=Jl(1);const f=Jl(0),m=mc(r);if((m||!m&&!a)&&((ux(r)!=="body"||E_(i))&&(c=p3(r)),mc(r))){const h=$m(r);u=cg(r),f.x=h.x+r.clientLeft,f.y=h.y+r.clientTop}const p=i&&!m&&!a?Yye(i,c,!0):Jl(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-c.scrollTop*u.y+f.y+p.y}}function hst(e){return Array.from(e.getClientRects())}function gst(e){const t=Nc(e),n=p3(e),r=e.ownerDocument.body,s=lg(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=lg(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+VU(e);const l=-n.scrollTop;return Ei(r).direction==="rtl"&&(i+=lg(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:i,y:l}}function yst(e,t){const n=$o(e),r=Nc(e),s=n.visualViewport;let a=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){a=s.width,i=s.height;const u=UU();(!u||u&&t==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}return{width:a,height:i,x:l,y:c}}function xst(e,t){const n=$m(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=mc(e)?cg(e):Jl(1),i=e.clientWidth*a.x,l=e.clientHeight*a.y,c=s*a.x,u=r*a.y;return{width:i,height:l,x:c,y:u}}function QX(e,t,n){let r;if(t==="viewport")r=yst(e,n);else if(t==="document")r=gst(Nc(e));else if(xa(t))r=xst(t,n);else{const s=Kye(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return dc(r)}function Qye(e,t){const n=Gd(e);return n===t||!xa(n)||Kg(n)?!1:Ei(n).position==="fixed"||Qye(n,t)}function vst(e,t){const n=t.get(e);if(n)return n;let r=U1(e,[],!1).filter(l=>xa(l)&&ux(l)!=="body"),s=null;const a=Ei(e).position==="fixed";let i=a?Gd(e):e;for(;xa(i)&&!Kg(i);){const l=Ei(i),c=FU(i);!c&&l.position==="fixed"&&(s=null),(a?!c&&!s:!c&&l.position==="static"&&!!s&&["absolute","fixed"].includes(s.position)||E_(i)&&!c&&Qye(e,i))?r=r.filter(f=>f!==i):s=l,i=Gd(i)}return t.set(e,r),r}function bst(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const i=[...n==="clippingAncestors"?m3(t)?[]:vst(t,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,f)=>{const m=QX(t,f,s);return u.top=lg(m.top,u.top),u.right=h8(m.right,u.right),u.bottom=h8(m.bottom,u.bottom),u.left=lg(m.left,u.left),u},QX(t,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function _st(e){const{width:t,height:n}=qye(e);return{width:t,height:n}}function wst(e,t,n){const r=mc(t),s=Nc(t),a=n==="fixed",i=$m(e,!0,a,t);let l={scrollLeft:0,scrollTop:0};const c=Jl(0);if(r||!r&&!a)if((ux(t)!=="body"||E_(s))&&(l=p3(t)),r){const p=$m(t,!0,a,t);c.x=p.x+t.clientLeft,c.y=p.y+t.clientTop}else s&&(c.x=VU(s));const u=s&&!r&&!a?Yye(s,l):Jl(0),f=i.left+l.scrollLeft-c.x-u.x,m=i.top+l.scrollTop-c.y-u.y;return{x:f,y:m,width:i.width,height:i.height}}function E6(e){return Ei(e).position==="static"}function XX(e,t){if(!mc(e)||Ei(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return Nc(e)===n&&(n=n.ownerDocument.body),n}function Xye(e,t){const n=$o(e);if(m3(e))return n;if(!mc(e)){let s=Gd(e);for(;s&&!Kg(s);){if(xa(s)&&!E6(s))return s;s=Gd(s)}return n}let r=XX(e,t);for(;r&&Prt(r)&&E6(r);)r=XX(r,t);return r&&Kg(r)&&E6(r)&&!FU(r)?n:r||Lrt(e)||n}const Cst=async function(e){const t=this.getOffsetParent||Xye,n=this.getDimensions,r=await n(e.floating);return{reference:wst(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Sst(e){return Ei(e).direction==="rtl"}const Est={convertOffsetParentRelativeRectToViewportRelativeRect:pst,getDocumentElement:Nc,getClippingRect:bst,getOffsetParent:Xye,getElementRects:Cst,getClientRects:hst,getDimensions:_st,getScale:cg,isElement:xa,isRTL:Sst};function Zye(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function Mst(e,t){let n=null,r;const s=Nc(e);function a(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),a();const u=e.getBoundingClientRect(),{left:f,top:m,width:p,height:h}=u;if(l||t(),!p||!h)return;const g=jC(m),y=jC(s.clientWidth-(f+p)),x=jC(s.clientHeight-(m+h)),v=jC(f),_={rootMargin:-g+"px "+-y+"px "+-x+"px "+-v+"px",threshold:lg(0,h8(1,c))||1};let w=!0;function C(S){const E=S[0].intersectionRatio;if(E!==c){if(!w)return i();E?i(!1,E):r=setTimeout(()=>{i(!1,1e-7)},1e3)}E===1&&!Zye(u,e.getBoundingClientRect())&&i(),w=!1}try{n=new IntersectionObserver(C,{..._,root:s.ownerDocument})}catch{n=new IntersectionObserver(C,_)}n.observe(e)}return i(!0),a}function Jye(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=$U(e),f=s||a?[...u?U1(u):[],...U1(t)]:[];f.forEach(v=>{s&&v.addEventListener("scroll",n,{passive:!0}),a&&v.addEventListener("resize",n)});const m=u&&l?Mst(u,n):null;let p=-1,h=null;i&&(h=new ResizeObserver(v=>{let[b]=v;b&&b.target===u&&h&&(h.unobserve(t),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var _;(_=h)==null||_.observe(t)})),n()}),u&&!c&&h.observe(u),h.observe(t));let g,y=c?$m(e):null;c&&x();function x(){const v=$m(e);y&&!Zye(y,v)&&n(),y=v,g=requestAnimationFrame(x)}return n(),()=>{var v;f.forEach(b=>{s&&b.removeEventListener("scroll",n),a&&b.removeEventListener("resize",n)}),m?.(),(v=h)==null||v.disconnect(),h=null,c&&cancelAnimationFrame(g)}}const kst=lst,Tst=cst,Nst=ost,jst=dst,ZX=ast,Ast=ust,Ist=(e,t,n)=>{const r=new Map,s={platform:Est,...n},a={...s.platform,_c:r};return sst(e,t,{...s,platform:a})};var m2=typeof document<"u"?d.useLayoutEffect:d.useEffect;function FE(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!FE(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!FE(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function exe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function JX(e,t){const n=exe(e);return Math.round(t*n)/n}function M6(e){const t=d.useRef(e);return m2(()=>{t.current=e}),t}function Rst(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=e,[f,m]=d.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[p,h]=d.useState(r);FE(p,r)||h(r);const[g,y]=d.useState(null),[x,v]=d.useState(null),b=d.useCallback(L=>{L!==S.current&&(S.current=L,y(L))},[]),_=d.useCallback(L=>{L!==E.current&&(E.current=L,v(L))},[]),w=a||g,C=i||x,S=d.useRef(null),E=d.useRef(null),k=d.useRef(f),M=c!=null,j=M6(c),R=M6(s),O=M6(u),D=d.useCallback(()=>{if(!S.current||!E.current)return;const L={placement:t,strategy:n,middleware:p};R.current&&(L.platform=R.current),Ist(S.current,E.current,L).then(U=>{const $={...U,isPositioned:O.current!==!1};P.current&&!FE(k.current,$)&&(k.current=$,ks.flushSync(()=>{m($)}))})},[p,t,n,R,O]);m2(()=>{u===!1&&k.current.isPositioned&&(k.current.isPositioned=!1,m(L=>({...L,isPositioned:!1})))},[u]);const P=d.useRef(!1);m2(()=>(P.current=!0,()=>{P.current=!1}),[]),m2(()=>{if(w&&(S.current=w),C&&(E.current=C),w&&C){if(j.current)return j.current(w,C,D);D()}},[w,C,D,j,M]);const A=d.useMemo(()=>({reference:S,floating:E,setReference:b,setFloating:_}),[b,_]),T=d.useMemo(()=>({reference:w,floating:C}),[w,C]),N=d.useMemo(()=>{const L={position:n,left:0,top:0};if(!T.floating)return L;const U=JX(T.floating,f.x),$=JX(T.floating,f.y);return l?{...L,transform:"translate("+U+"px, "+$+"px)",...exe(T.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:$}},[n,l,T.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:D,refs:A,elements:T,floatingStyles:N}),[f,D,A,T,N])}const Pst=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?ZX({element:r.current,padding:s}).fn(n):{}:r?ZX({element:r,padding:s}).fn(n):{}}}},WU=(e,t)=>({...kst(e),options:[e,t]}),txe=(e,t)=>({...Tst(e),options:[e,t]}),Lst=(e,t)=>({...Ast(e),options:[e,t]}),nxe=(e,t)=>({...Nst(e),options:[e,t]}),rxe=(e,t)=>({...jst(e),options:[e,t]}),Ost=(e,t)=>({...Pst(e),options:[e,t]}),sxe={...EO},Dst=sxe.useInsertionEffect,Fst=Dst||(e=>e());function Ust(e){const t=d.useRef(()=>{});return Fst(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}var kd=typeof document<"u"?d.useLayoutEffect:d.useEffect;function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UE.apply(this,arguments)}let eZ=!1,Bst=0;const tZ=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Bst++;function $st(){const[e,t]=d.useState(()=>eZ?tZ():void 0);return kd(()=>{e==null&&t(tZ())},[]),d.useEffect(()=>{eZ=!0},[]),e}const Vst=sxe.useId,HU=Vst||$st,Wst=d.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:s},middlewareData:{arrow:a,shift:i}},width:l=14,height:c=7,tipRadius:u=0,strokeWidth:f=0,staticOffset:m,stroke:p,d:h,style:{transform:g,...y}={},...x}=t,v=HU(),[b,_]=d.useState(!1);if(kd(()=>{if(!s)return;Ei(s).direction==="rtl"&&_(!0)},[s]),!s)return null;const[w,C]=r.split("-"),S=w==="top"||w==="bottom";let E=m;(S&&i!=null&&i.x||!S&&i!=null&&i.y)&&(E=null);const k=f*2,M=k/2,j=l/2*(u/-8+1),R=c/2*u/4,O=!!h,D=E&&C==="end"?"bottom":"top";let P=E&&C==="end"?"right":"left";E&&b&&(P=C==="end"?"left":"right");const A=a?.x!=null?E||a.x:"",T=a?.y!=null?E||a.y:"",N=h||"M0,0"+(" H"+l)+(" L"+(l-j)+","+(c-R))+(" Q"+l/2+","+c+" "+j+","+(c-R))+" Z",L={top:O?"rotate(180deg)":"",left:O?"rotate(90deg)":"rotate(-90deg)",bottom:O?"":"rotate(180deg)",right:O?"rotate(-90deg)":"rotate(90deg)"}[w];return d.createElement("svg",UE({},x,{"aria-hidden":!0,ref:n,width:O?l:l+k,height:l,viewBox:"0 0 "+l+" "+(c>l?c:l),style:{position:"absolute",pointerEvents:"none",[P]:A,[D]:T,[w]:S||O?"100%":"calc(100% - "+k/2+"px)",transform:[L,g].filter(U=>!!U).join(" "),...y}}),k>0&&d.createElement("path",{clipPath:"url(#"+v+")",fill:"none",stroke:p,strokeWidth:k+(h?0:1),d:N}),d.createElement("path",{stroke:k&&!h?x.fill:"none",d:N}),d.createElement("clipPath",{id:v},d.createElement("rect",{x:-M,y:M*(O?-1:1),width:l+k,height:l})))});function Hst(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const zst=d.createContext(null),Gst=d.createContext(null),qst=()=>{var e;return((e=d.useContext(zst))==null?void 0:e.id)||null},Kst=()=>d.useContext(Gst);function axe(e){return"data-floating-ui-"+e}const oxe=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function ixe(e,t){const n=Gye(e,oxe());t==="prev"&&n.reverse();const r=n.indexOf(Ort(Urt(e)));return n.slice(r+1)[0]}function Yst(){return ixe(document.body,"next")}function Qst(){return ixe(document.body,"prev")}function k6(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!Drt(n,r)}function Xst(e){Gye(e,oxe()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function nZ(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const lxe={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let Zst;function rZ(e){e.key==="Tab"&&(e.target,clearTimeout(Zst))}const sZ=d.forwardRef(function(t,n){const[r,s]=d.useState();kd(()=>(Frt()&&s("button"),document.addEventListener("keydown",rZ),()=>{document.removeEventListener("keydown",rZ)}),[]);const a={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[axe("focus-guard")]:"",style:lxe};return d.createElement("span",UE({},t,a))}),cxe=d.createContext(null),aZ=axe("portal");function Jst(e){e===void 0&&(e={});const{id:t,root:n}=e,r=HU(),s=tat(),[a,i]=d.useState(null),l=d.useRef(null);return kd(()=>()=>{a?.remove(),queueMicrotask(()=>{l.current=null})},[a]),kd(()=>{if(!r||l.current)return;const c=t?document.getElementById(t):null;if(!c)return;const u=document.createElement("div");u.id=r,u.setAttribute(aZ,""),c.appendChild(u),l.current=u,i(u)},[t,r]),kd(()=>{if(n===null||!r||l.current)return;let c=n||s?.portalNode;c&&!xa(c)&&(c=c.current),c=c||document.body;let u=null;t&&(u=document.createElement("div"),u.id=t,c.appendChild(u));const f=document.createElement("div");f.id=r,f.setAttribute(aZ,""),c=u||c,c.appendChild(f),l.current=f,i(f)},[t,n,r,s]),a}function eat(e){const{children:t,id:n,root:r,preserveTabOrder:s=!0}=e,a=Jst({id:n,root:r}),[i,l]=d.useState(null),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),m=d.useRef(null),p=i?.modal,h=i?.open,g=!!i&&!i.modal&&i.open&&s&&!!(r||a);return d.useEffect(()=>{if(!a||!s||p)return;function y(x){a&&k6(x)&&(x.type==="focusin"?nZ:Xst)(a)}return a.addEventListener("focusin",y,!0),a.addEventListener("focusout",y,!0),()=>{a.removeEventListener("focusin",y,!0),a.removeEventListener("focusout",y,!0)}},[a,s,p]),d.useEffect(()=>{a&&(h||nZ(a))},[h,a]),d.createElement(cxe.Provider,{value:d.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:c,afterOutsideRef:u,beforeInsideRef:f,afterInsideRef:m,portalNode:a,setFocusManagerState:l}),[s,a])},g&&a&&d.createElement(sZ,{"data-type":"outside",ref:c,onFocus:y=>{if(k6(y,a)){var x;(x=f.current)==null||x.focus()}else{const v=Qst()||i?.refs.domReference.current;v?.focus()}}}),g&&a&&d.createElement("span",{"aria-owns":a.id,style:lxe}),a&&ks.createPortal(t,a),g&&a&&d.createElement(sZ,{"data-type":"outside",ref:u,onFocus:y=>{if(k6(y,a)){var x;(x=m.current)==null||x.focus()}else{const v=Yst()||i?.refs.domReference.current;v?.focus(),i?.closeOnFocusOut&&i?.onOpenChange(!1,y.nativeEvent,"focus-out")}}}))}const tat=()=>d.useContext(cxe);function nat(e){const{open:t=!1,onOpenChange:n,elements:r}=e,s=HU(),a=d.useRef({}),[i]=d.useState(()=>Hst()),l=qst()!=null,[c,u]=d.useState(r.reference),f=Ust((h,g,y)=>{a.current.openEvent=h?g:void 0,i.emit("openchange",{open:h,event:g,reason:y,nested:l}),n?.(h,g,y)}),m=d.useMemo(()=>({setPositionReference:u}),[]),p=d.useMemo(()=>({reference:c||r.reference||null,floating:r.floating||null,domReference:r.reference}),[c,r.reference,r.floating]);return d.useMemo(()=>({dataRef:a,open:t,onOpenChange:f,elements:p,events:i,floatingId:s,refs:m}),[t,f,p,i,s,m])}function uxe(e){e===void 0&&(e={});const{nodeId:t}=e,n=nat({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,s=r.elements,[a,i]=d.useState(null),[l,c]=d.useState(null),f=s?.domReference||a,m=d.useRef(null),p=Kst();kd(()=>{f&&(m.current=f)},[f]);const h=Rst({...e,elements:{...s,...l&&{reference:l}}}),g=d.useCallback(_=>{const w=xa(_)?{getBoundingClientRect:()=>_.getBoundingClientRect(),contextElement:_}:_;c(w),h.refs.setReference(w)},[h.refs]),y=d.useCallback(_=>{(xa(_)||_===null)&&(m.current=_,i(_)),(xa(h.refs.reference.current)||h.refs.reference.current===null||_!==null&&!xa(_))&&h.refs.setReference(_)},[h.refs]),x=d.useMemo(()=>({...h.refs,setReference:y,setPositionReference:g,domReference:m}),[h.refs,y,g]),v=d.useMemo(()=>({...h.elements,domReference:f}),[h.elements,f]),b=d.useMemo(()=>({...h,...r,refs:x,elements:v,nodeId:t}),[h,x,v,t,r]);return kd(()=>{r.dataRef.current.floatingContext=b;const _=p?.nodesRef.current.find(w=>w.id===t);_&&(_.context=b)}),d.useMemo(()=>({...h,context:b,refs:x,elements:v}),[h,x,v,b])}class rat{static detectOverflowOptions={padding:8};static offsetMiddleware=WU({mainAxis:4,crossAxis:0});static shiftMiddleware=txe({limiter:Lst(),...this.detectOverflowOptions});static flipMiddleware=nxe(this.detectOverflowOptions);static sizeMiddleware(t={matchTargetWidth:!1},n=!0){return rxe({...this.detectOverflowOptions,apply({availableHeight:r,rects:s,elements:a}){n&&(a.floating.style.maxHeight=`${r}px`),(t.matchTargetWidth??!0)&&(a.floating.style.width=`${s.reference.width}px`)}})}static defaultMiddleWare(t={avoidCollisions:!0,matchTargetWidth:!1}){const n=t.avoidCollisions??!0,r=t.avoidPositionCollisions!==void 0?t.avoidPositionCollisions:n,s=t.avoidSizeCollisions!==void 0?t.avoidSizeCollisions:n;return[this.offsetMiddleware,r&&this.shiftMiddleware,r&&this.flipMiddleware,this.sizeMiddleware({matchTargetWidth:t.matchTargetWidth},s)].filter(Boolean)}}const sat=130,ei=I.memo(({content:e,contentClassName:t="",children:n,delayTime:r=200,isOpen:s,hoverOpen:a,placement:i="bottom-end",matchTargetWidth:l=!1,childrenClassName:c,testId:u,overlayProps:f,onOpen:m,onClose:p,disableAnimation:h,hasInteractiveContent:g=!1,avoidCollisions:y=!0,avoidPositionCollisions:x,avoidSizeCollisions:v,customFloatingUIOptions:b,disableShadow:_,floatingElementProps:w,arrowClassName:C,borderRadius:S="rounded-xl",sideOffset:E=4,forceDarkMode:k=!1})=>{const M=d.useRef(null),j=d.useMemo(()=>{const be=rat.defaultMiddleWare({avoidCollisions:y,avoidPositionCollisions:x,avoidSizeCollisions:v,matchTargetWidth:l});return E!==4&&(be[0]=WU({mainAxis:E,crossAxis:0})),C&&be.push(Ost({element:M})),be},[y,x,v,l,C,E]),{refs:R,floatingStyles:O,placement:D,context:P}=uxe({strategy:"fixed",placement:i,middleware:j,whileElementsMounted:(...be)=>Jye(...be),...b}),[A,T]=d.useState(!1),N=d.useRef(A),[L,U]=d.useState(!1),$=d.useRef(L),[V,W]=d.useState(!1),Q=s!==void 0,[q,H]=d.useState(!1),K=d.useMemo(()=>Q?s:q,[Q,s,q]),G=d.useCallback(be=>{be.stopPropagation()},[]),ee=d.useCallback(()=>{K||(m?.(),Q||H(!0))},[Q,K,m]),Y=d.useCallback(()=>{W(be=>K&&!be?(p?.(),Q||H(!1),h?!1:(setTimeout(()=>{W(!1)},sat),!0)):be)},[Q,K,p,h]),te=d.useCallback(()=>{K?Y():ee()},[Y,ee,K]),se=d.useCallback(()=>{setTimeout(()=>{!$.current&&!N.current&&Y()},r)},[r,Y,$,N]);d.useEffect(()=>{if(!a||!K||V)return;const be=setInterval(()=>{const Ne=R.reference.current,ke=R.floating.current,Ie=Ne.matches(":hover"),Ce=ke.matches(":hover");!Ie&&N.current&&fe(),!Ce&&$.current&&Se(),!Ie&&!Ce&&se()},250);return()=>clearInterval(be)},[V,K,se,a]);const ae=d.useCallback(()=>{setTimeout(()=>{if(Q&&p){p();return}Y()},0)},[Q,p,Y]),pe=d.useCallback(()=>{N.current=!0,T(!0),ee()},[ee]),fe=d.useCallback(()=>{N.current=!1,T(!1),se()},[se]),ge=()=>{$.current=!0,U(!0)},Se=d.useCallback(()=>{$.current=!1,U(!1),se()},[se]),je=d.useCallback(be=>{be.stopPropagation(),te()},[te]),ye=d.useMemo(()=>({transform:"translateY(-1px)"}),[]);return o.jsxs(o.Fragment,{children:[o.jsx("span",{onMouseEnter:a?pe:void 0,onMouseLeave:a?fe:void 0,ref:R.setReference,onMouseDown:G,onClick:a?void 0:je,className:c,"data-test-id":u,children:n}),e?o.jsx(ox,{isOpen:K||V,onClose:ae,transparent:!0,childVariant:"clean",disableAnimation:h,delayClose:!1,...f,children:o.jsx("div",{className:"absolute inset-x-0 top-0","data-color-scheme":k?"dark":void 0,children:o.jsx("div",{className:"flex",ref:R.setFloating,onMouseEnter:a?ge:void 0,onMouseLeave:a?Se:void 0,onClick:be=>{g&&be.stopPropagation()},style:O,...w,children:o.jsxs(z,{variant:"background",className:B({"shadow-overlay":!_},"flex min-h-0 min-w-0","data-[placement=bottom-end]:origin-top-right data-[placement=bottom-start]:origin-top-left data-[placement=top-end]:origin-bottom-right data-[placement=top-start]:origin-bottom-left",{"duration-150":!h,"animate-out fade-out zoom-out-[0.97] ease-in":V&&!h,"p-xs animate-in fade-in zoom-in-[0.97] ease-out":!h},t,S),"data-placement":D,children:[e,C&&o.jsx(Wst,{ref:M,context:P,className:C,style:ye})]})})})}):null]})});ei.displayName="Popover";const nn=I.memo(({isOpen:e,hoverOpen:t=!1,children:n,items:r,placement:s,disabled:a=!1,grid:i,onOpen:l,title:c,onClose:u,isMobileStyle:f,boxProps:m,modalProps:p,popoverProps:h,cols:g=1,footer:y=null,contentClassName:x="",wrapperClassName:v,header:b,preMenuContent:_,alwaysShowChildren:w,size:C,showFooterOnMobile:S=!1})=>{const[E,k]=d.useState(!1),M=e!==void 0,j=M?e:E,R=d.useCallback(()=>{if(!j&&!a){const T=l?.()??!0;!M&&T&&k(!0)}},[a,M,l,j]),O=d.useCallback(()=>{j&&!a&&(u?.(),M||k(!1))},[a,M,u,j]),D=d.useMemo(()=>r.map(T=>({...T,size:C??(f?Yt.regular:void 0),onClick:N=>{!a&&"onClick"in T&&(T.onClick?.(N),T.type==="toggle"||T.type==="multiSelect"||O())}})),[a,O,r,C,f]),P=d.useMemo(()=>o.jsx(z,{className:B("flex max-h-[80vh] min-h-0 min-w-[160px] flex-col",{"max-w-[250px]":!i,"gap-two grid max-w-lg":i}),...m,children:o.jsxs("div",{className:"flex h-full flex-col",children:[b&&o.jsx(z,{className:"mb-sm mx-sm flex-shrink-0 border-b",children:b}),c&&o.jsx(z,{className:"mb-sm mx-sm flex-shrink-0 border-b",children:o.jsx(F,{variant:"smallBold",className:"py-sm mb-1",children:c})}),o.jsxs(sl,{orientation:"vertical",showIndicatorOnHover:!1,className:"min-h-0 flex-1 overflow-auto",children:[_,o.jsx(zd,{items:D,grid:i,cols:g,disableScrollArea:!0}),y]})]})}),[m,g,y,i,b,D,c,_]);return r.every(T=>T.show===!1)?w?n:null:f?o.jsxs(o.Fragment,{children:[o.jsx(qt,{variant:"bottom-left-sheet",actionList:ce,isOpen:j,onClose:O,footerContent:S&&y?y:void 0,footerClassname:S&&y?"!pt-0 pb-5 sticky bottom-0":void 0,wrapperClassname:S&&y?"!pb-0":void 0,...p,children:o.jsx(z,{className:"divide-y",children:o.jsx(zd,{items:D,grid:i})})}),o.jsx("span",{className:v,onClick:t?void 0:T=>{T.stopPropagation(),R()},children:n})]}):o.jsx(ei,{...h,hoverOpen:t,isOpen:j,placement:s,onClose:O,onOpen:R,contentClassName:x,childrenClassName:v,content:P,hasInteractiveContent:!0,children:n})});nn.displayName="DropDownMenu";const aat=({internalItems:e,isMobileStyle:t})=>{const{$t:n}=Z();return o.jsx(z,{children:o.jsx(nn,{items:e.map(r=>({type:"default",...r})),isMobileStyle:t,children:o.jsx(me,{icon:v7e,text:n({defaultMessage:"Internal Login",id:"waIOTqSbxu"}),chevron:!0,fullWidth:!0,variant:"rejected"})})})},oat=({onClick:e})=>{const{$t:t}=Z();return o.jsx(Me,{size:"tiny",variant:"noBackground",text:t({defaultMessage:"Single sign-on (SSO)",id:"TI79WvQ5kU"}),onClick:e})},dxe={SIDEBAR:"sidebar",LOGIN_MODAL:"login-modal"},Ma={ANSWER_MODE_TABS_ROOT:"answer-mode-tabs",ANSWER_MODE_TABS:{ANSWER:e=>`answer-mode-tabs-tab-${e}`,SEARCH:"answer-mode-tabs-tab-search",RESEARCH:"answer-mode-tabs-tab-research",SHOPPING:"answer-mode-tabs-tab-shopping",ASSETS:"answer-mode-tabs-tab-assets",JOBS:"answer-mode-tabs-tab-jobs",HOTELS:"answer-mode-tabs-tab-hotels",PLACES:"answer-mode-tabs-tab-places",IMAGES:"answer-mode-tabs-tab-images",VIDEOS:"answer-mode-tabs-tab-videos",SOURCES:"answer-mode-tabs-tab-sources",APPS:"answer-mode-tabs-tab-apps",TASKS:"answer-mode-tabs-tab-tasks",CHAT:"answer-mode-tabs-tab-chat"},ANSWER_MODE_JOBS:{FILTERS_ROOT:"jobs-filters"},ANSWER_MODE_VIDEO:{VIDEO_PREVIEW:"jobs-video-preview"},ANSWER_MODE_IMAGE:{IMAGE_PREVIEW:"jobs-image-preview"},ANSWER_MODE_SHOPPING:{SHOPPING_ITEM:"shopping-item"},ANSWER_MODE_PLACES:{PLACE_ITEM:"place-item"},ANSWER_MODE_HOTELS:{HOTEL_ITEM:"hotel-item"}},iat=e=>e?.includes("Chrome")??!1,fxe=e=>(e?.includes("Mobile")&&!e?.includes("iPad"))??!1,lat=e=>e?.includes("Android")??!1,cat=e=>(e?.includes("iPhone")||e?.includes("iPad"))??!1,uat=e=>(e?.includes("Macintosh")||e?.includes("iPad"))??!1,dat=e=>e?.includes("Mobile Safari")??!1,fat=e=>e?.includes("Firefox")??!1,M_=e=>e?.includes("WindowsApp")??!1,mat=e=>e?.includes("Windows")??!1,pat=e=>e?.includes("FBAN")||e?.includes("FBAV")||e?.includes("Instagram"),hat=e=>e?.includes("SamsungBrowser")??!1,gat=e=>(e.includes("wv")||e.includes("version/"))??!1,yat=e=>/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)/i.test(e),xat=e=>gat(e)||yat(e),vat=({autoFocus:e,showInternal:t,disallowedMethods:n,className:r,email:s,setEmail:a,error:i,onClose:l,setError:c,handleEmailClick:u,handleKeyDown:f,emailInFlight:m,handleThirdPartySignIn:p,isSSO:h,setIsSSO:g,internalItems:y,envHasDevLogins:x,isMobileStyle:v,placeholder:b,showCloseButton:_,loginButtonsStyle:w})=>{const C=I.useRef(null),S=navigator.userAgent,E=!n?.includes("google")&&!xat(S),k=!n?.includes("apple"),M=!h&&!n?.includes("sso"),j=d.useMemo(()=>[...E?["google"]:[],...k?["apple"]:[],...t&&x?["internal"]:[]],[E,k,t,x]),R=d.useMemo(()=>({google:o.jsx(ort,{handleThirdPartySignIn:p,loginButtonsStyle:w}),apple:o.jsx(rrt,{handleThirdPartySignIn:p,loginButtonsStyle:w}),internal:o.jsx(aat,{internalItems:y,isMobileStyle:v})}),[p,y,v,w]),O=d.useCallback(()=>{c(""),g(!0)},[c,g]);return o.jsxs("div",{className:r,"data-testid":dxe.LOGIN_MODAL,children:[h&&o.jsx("div",{className:"absolute left-0 top-0 z-40",children:o.jsx(Me,{size:"small",icon:NO,onClick:()=>{g(!1),c(void 0)}})}),o.jsxs("div",{className:"mx-auto max-w-sm",children:[!h&&o.jsxs(o.Fragment,{children:[j.length>0&&o.jsx("div",{className:"space-y-sm mx-auto w-[90%]",children:j.map(D=>o.jsx(I.Fragment,{children:R[D]},D))}),j.length>0&&o.jsx(z,{className:"mx-auto my-4 h-0 w-[90%] shrink-0 border-t"})]}),o.jsxs("div",{children:[o.jsx("div",{className:"mx-auto w-[90%]",children:o.jsx(art,{autoFocus:e||h,isSSO:h,email:s,emailInFlight:m,handleEmailClick:u,inputRef:C,handleKeyDown:f,setError:c,setEmail:a,error:i,placeholder:b,loginButtonsStyle:w})}),M&&o.jsx("div",{className:"mt-md flex justify-center",children:o.jsx(oat,{onClick:O})}),_&&o.jsxs(o.Fragment,{children:[o.jsx(z,{className:"my-4 h-0 w-full shrink-0"}),o.jsx(srt,{onClick:l})]})]})]})]})},$1=({autoFocus:e=!1,onClose:t=vn,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,preEnteredEmail:i,placeholder:l,showCloseButton:c=!0,loginButtonsStyle:u="allInverted"})=>{const f="login-modal-inner",[m,p]=I.useState(i??""),[h,g]=I.useState(),[y,x]=I.useState(!1),{emailIsValid:v,handleThirdPartySignIn:b,handleMagicLinkEmailSignIn:_,handleSSOSignIn:w,handleDevSignIn:C}=nrt({email:m,onClose:t,redirectUrl:n??"/",onError:g,reason:f}),{env:{envHasDevLogins:S}}=Pt(),{isMobileStyle:E}=xe(),{$t:k}=Z(),{getEppoTypedVariation:M}=df(),[j,R]=I.useState(!1),{closeModal:O}=xt(),D=d.useCallback(async()=>{if(!dn())return!1;try{const N=m.includes("@")?m.split("@")[1]:void 0;if(await M((U,...$)=>U.getBooleanAssignment(...$),{flag:"comet-enterprise-login-block",defaultValue:!1,extraAttributes:{email:m,...N&&{emailDomain:N}},subjectType:"visitor_id"}))return g(k({defaultMessage:"Your organization has not approved you to use Comet with this account.",id:"Jz4Ffdr9RN"})),!0}catch(N){ne.warn("Failed to check comet enterprise login block:",N)}return!1},[m,M,k]),P=d.useCallback(async()=>{if(!v){g(k({defaultMessage:"Please enter a valid email address",id:"oLpv295HWX"}));return}if(!(y||await D())){if(x(!0),m.endsWith("@example.com")&&S&&!j){t(),await C("example.com",m.split("@")[0]),x(!1);return}j?await w():(await _(),await O()),x(!1)}},[v,y,m,S,j,D,k,t,C,w,_,O]),A=d.useCallback(N=>{ga.isEnterKeyWithoutShift(N)&&P()},[P]),T=[{icon:Gle,text:"Basic",onClick:()=>C("basic")},{icon:jO,text:"Pro",onClick:()=>C("pro")},{icon:Ti,text:"Enterprise Member",onMouseDown:N=>N.preventDefault(),onClick:()=>C("enterpriseMember")},{icon:VR,text:"Enterprise Admin",onMouseDown:N=>N.preventDefault(),onClick:()=>C("enterpriseAdmin")},{icon:VR,text:"Enterprise Billing Admin",onMouseDown:N=>N.preventDefault(),onClick:()=>C("enterpriseBillingAdmin")},{icon:u1,text:"Script Default User",onClick:()=>C("script")},{icon:u1,text:"FE Test User",onClick:()=>C("frontendTest")}];return o.jsx(vat,{autoFocus:e,onClose:t,redirectUrl:n,showInternal:r,disallowedMethods:s,className:a,email:m,setEmail:p,handleEmailClick:P,handleKeyDown:A,error:h,setError:g,emailInFlight:y,setEmailInFlight:x,emailIsValid:v,handleThirdPartySignIn:b,isSSO:j,setIsSSO:R,handleDevSignIn:C,internalItems:T,envHasDevLogins:S,isMobileStyle:E,placeholder:l,showCloseButton:c,loginButtonsStyle:u})},mxe=I.memo(({lineColor:e,width:t,fillColor:n,...r})=>{const s=B("h-auto group",t),a=B(e,"transition-all duration-300");return o.jsx("div",{className:s,...r,children:o.jsxs("svg",{viewBox:"0 0 400 91",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M196.978 27.8931H200.033V34.1872H196.079C192.979 34.1872 190.669 34.9333 189.14 36.4254C187.615 37.9176 186.85 40.3662 186.85 43.7711V64.401H180.606V28.0333H186.85V33.8367C186.85 34.1622 187.014 34.3274 187.337 34.3274C187.52 34.3274 187.659 34.2823 187.754 34.1872C187.848 34.0921 187.938 33.9068 188.032 33.6264C189.234 29.8058 192.219 27.8931 196.983 27.8931H196.978ZM237.763 35.6894C239.402 38.6036 240.227 42.1137 240.227 46.2146C240.227 50.3156 239.407 53.8257 237.763 56.7399C236.119 59.6541 233.993 61.8323 231.38 63.2794C228.767 64.7265 225.956 65.4476 222.951 65.4476C217.03 65.4476 212.868 63.0691 210.464 58.3122C210.28 57.9417 210.046 57.7514 209.768 57.7514C209.49 57.7514 209.351 57.8916 209.351 58.172V77.6853H203.107V28.0333H209.351V34.2573C209.351 34.5377 209.49 34.6779 209.768 34.6779C210.046 34.6779 210.275 34.4926 210.464 34.1171C212.868 29.3602 217.03 26.9817 222.951 26.9817C225.956 26.9817 228.767 27.7028 231.38 29.1499C233.993 30.597 236.119 32.7751 237.763 35.6894ZM233.983 46.2146C233.983 41.9234 232.841 38.5786 230.551 36.1801C228.261 33.7816 225.246 32.5799 221.496 32.5799C217.745 32.5799 214.73 33.7816 212.44 36.1801C210.151 38.5836 209.311 41.9284 209.311 46.2146C209.311 50.5009 210.151 53.8507 212.44 56.2492C214.73 58.6527 217.75 59.8494 221.496 59.8494C225.241 59.8494 228.261 58.6477 230.551 56.2492C232.841 53.8507 233.983 50.5009 233.983 46.2146ZM134.595 35.7445C136.235 38.6587 137.059 42.1688 137.059 46.2697C137.059 50.3707 136.24 53.8808 134.595 56.795C132.951 59.7092 130.825 61.8874 128.213 63.3345C125.6 64.7816 122.788 65.5026 119.783 65.5026C113.863 65.5026 109.7 63.1242 107.296 58.3673C107.112 57.9967 106.879 57.8065 106.601 57.8065C106.322 57.8065 106.183 57.9467 106.183 58.2271V77.7404H99.9446V28.0883H106.188V34.3124C106.188 34.5928 106.327 34.733 106.606 34.733C106.884 34.733 107.112 34.5477 107.301 34.1722C109.705 29.4153 113.867 27.0368 119.788 27.0368C122.793 27.0368 125.605 27.7579 128.218 29.205C130.83 30.6521 132.956 32.8302 134.6 35.7445H134.595ZM130.815 46.2697C130.815 41.9785 129.673 38.6336 127.383 36.2352C125.093 33.8367 122.078 32.6349 118.328 32.6349C114.578 32.6349 111.563 33.8367 109.273 36.2352C106.983 38.6387 106.144 41.9835 106.144 46.2697C106.144 50.5559 106.983 53.9058 109.273 56.3043C111.563 58.7078 114.578 59.9045 118.328 59.9045C122.078 59.9045 125.093 58.7028 127.383 56.3043C129.673 53.9058 130.815 50.5559 130.815 46.2697ZM169.112 52.8543H175.703C174.824 56.2592 173.031 59.2085 170.329 61.7021C167.622 64.1957 163.748 65.4425 158.706 65.4425C154.911 65.4425 151.573 64.6614 148.682 63.0991C145.791 61.5369 143.561 59.3137 141.986 56.4195C140.412 53.5303 139.627 50.1253 139.627 46.2096C139.627 42.294 140.392 38.889 141.917 35.9998C143.442 33.1106 145.583 30.8824 148.335 29.3201C151.086 27.7579 154.31 26.9767 158.011 26.9767C161.711 26.9767 164.776 27.7479 167.344 29.2851C169.912 30.8223 171.829 32.8653 173.101 35.404C174.372 37.9477 175.008 40.7317 175.008 43.7611V47.9572H146.219C146.447 51.5925 147.664 54.4867 149.859 56.6298C152.055 58.7729 155.005 59.8494 158.706 59.8494C161.711 59.8494 164.016 59.2335 165.61 57.9967C167.205 56.7599 168.372 55.0475 169.112 52.8543ZM146.288 42.7146H168.074C168.074 39.545 167.264 37.0614 165.645 35.2638C164.026 33.4712 161.483 32.5699 158.015 32.5699C154.777 32.5699 152.129 33.4461 150.073 35.1937C148.017 36.9412 146.755 39.4498 146.293 42.7096L146.288 42.7146ZM245.169 64.396H251.413V14.043H245.169V64.401V64.396ZM331.801 24.0625H339.093V16.1911H331.801V24.0625ZM357.526 58.9782C356.393 59.0933 355.708 59.1534 355.479 59.1534C355.156 59.1534 354.898 59.0583 354.714 58.873C354.531 58.6877 354.436 58.4324 354.436 58.1019C354.436 57.8716 354.496 57.1806 354.61 56.0389C354.724 54.8972 354.784 53.1347 354.784 50.7612V33.361H363.69L361.937 28.0333H354.789V18.2391H348.545V28.0283H341.755V33.356H348.545V52.5038C348.545 56.5146 349.519 59.4989 351.461 61.4568C353.403 63.4146 356.363 64.396 360.342 64.396H365.2V58.8029H362.771C360.412 58.8029 358.663 58.863 357.531 58.9782H357.526ZM394.059 28.0283L383.723 58.5425C383.583 58.9181 383.365 59.4088 382.655 59.4088C381.944 59.4088 381.726 58.9181 381.587 58.5425L371.25 28.0283H364.882L376.853 64.396H381.085C381.363 64.396 381.572 64.4211 381.711 64.4661C381.85 64.5112 381.964 64.6264 382.059 64.8166C382.242 65.097 382.217 65.5177 381.989 66.0735L380.047 71.3862C379.769 72.0872 379.237 72.4377 378.452 72.4377C378.174 72.4377 377.529 72.3776 376.51 72.2624C375.492 72.1473 374.176 72.0872 372.556 72.0872H367.49V77.6803H374.151C378.035 77.6803 380.375 77.0143 382.386 75.6874C384.398 74.3605 385.958 72.0171 387.07 68.6572L400 29.4203V28.0233H394.059V28.0283ZM311.406 41.5979L301.626 28.0283H294.756V29.4253L306.478 45.1631L292.188 62.999V64.396H299.197L310.576 49.7798L321.191 64.396H327.922V62.999L315.504 46.2146L328.965 29.5004V28.0333H321.956L311.411 41.603L311.406 41.5979ZM332.467 64.396H338.71V28.0333H332.467V64.401V64.396ZM292.471 52.8543C291.592 56.2592 289.799 59.2085 287.097 61.7021C284.39 64.1957 280.515 65.4425 275.474 65.4425C271.679 65.4425 268.341 64.6614 265.45 63.0991C262.559 61.5369 260.329 59.3137 258.754 56.4195C257.18 53.5303 256.395 50.1253 256.395 46.2096C256.395 42.294 257.16 38.889 258.685 35.9998C260.21 33.1106 262.35 30.8824 265.102 29.3201C267.854 27.7579 271.078 26.9767 274.778 26.9767C278.479 26.9767 281.543 27.7479 284.111 29.2851C286.679 30.8223 288.597 32.8653 289.868 35.404C291.14 37.9477 291.776 40.7317 291.776 43.7611V47.9572H262.986C263.215 51.5925 264.432 54.4867 266.627 56.6298C268.823 58.7729 271.773 59.8494 275.474 59.8494C278.479 59.8494 280.783 59.2335 282.378 57.9967C283.972 56.7599 285.14 55.0475 285.88 52.8543H292.471ZM263.056 42.7146H284.842C284.842 39.545 284.032 37.0614 282.413 35.2638C280.793 33.4712 278.25 32.5699 274.783 32.5699C271.545 32.5699 268.897 33.4461 266.841 35.1937C264.784 36.9412 263.523 39.4498 263.061 42.7096L263.056 42.7146Z",className:n}),o.jsx("path",{d:"M38.6936 29.9832L12.8633 5.88983V29.9832H38.6936Z M39.5005 29.9832L65.3308 5.88983V29.9832H39.5005Z M38.7227 2L38.7227 90.2534 M64.5246 53.7584L38.6943 30.0068V62.9404L64.5246 85.9724V53.7584Z M12.8924 53.7584L38.7227 30.0068V62.9404L12.8924 85.9724V53.7584Z M2.28711 29.9832V64.4236H12.8863V53.7348L38.7226 29.9832H2.28711Z M38.6943 30.3L64.5246 54.0515V64.7403H75.2872V30.3L38.6943 30.3Z",className:a,strokeWidth:"4.30504",strokeMiterlimit:"10"})]})})});mxe.displayName="Full";const pxe=I.memo(({width:e,fillColor:t,...n})=>{const r=B("h-auto group",e,{});return o.jsx("div",{className:r,...n,children:o.jsxs("svg",{viewBox:"0 0 1456 187",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M311.555 34.9571C330.01 34.9571 344.672 45.7532 344.672 65.084C344.672 84.4148 330.01 95.3568 311.555 95.3568H279.094V140H265.817V34.9571H311.555ZM279.094 84.0501H309.585C322.643 84.0501 331.396 77.1931 331.396 65.157C331.396 53.0478 322.643 46.2638 309.585 46.2638H279.094V84.0501ZM353.444 102.797C353.444 77.7037 367.669 63.9169 390.209 63.9169C412.823 63.9169 425.151 77.8496 425.151 99.5877V105.934H365.918C366.137 121.399 375.255 131.465 390.209 131.465C404.434 131.465 410.926 123.587 412.093 116.73H423.619V118.918C421.868 128.037 413.187 141.751 390.355 141.751C367.815 141.751 353.444 127.964 353.444 102.797ZM366.064 95.8674H412.896C412.75 83.2477 405.09 74.1294 390.136 74.1294C375.474 74.1294 367.085 83.3936 366.064 95.8674ZM447.732 65.6676H460.133V76.1719H461.3C464.218 69.8985 469.908 65.4487 483.257 65.4487H500.691V76.3907H483.549C467.501 76.3907 460.571 84.7795 460.571 101.849V140H447.732V65.6676ZM517.092 169.179V65.6676H529.638V75.8801H530.805C536.349 67.3453 545.322 63.9898 555.826 63.9898C575.157 63.9898 589.965 77.1202 589.965 102.87C589.965 128.547 575.157 141.678 555.826 141.678C545.541 141.678 536.641 138.395 531.097 130.152H529.93V169.179H517.092ZM529.492 102.87C529.492 120.888 539.121 131.028 553.2 131.028C567.425 131.028 576.981 120.888 576.981 102.87C576.981 84.7795 567.425 74.64 553.2 74.64C539.121 74.64 529.492 84.7795 529.492 102.87ZM637.266 34.9571V129.642H651.272V140H605.899V129.642H624.428V45.2426H610.276V34.9571H637.266ZM665.9 102.797C665.9 77.7037 680.125 63.9169 702.665 63.9169C725.278 63.9169 737.606 77.8496 737.606 99.5877V105.934H678.374C678.593 121.399 687.711 131.465 702.665 131.465C716.89 131.465 723.382 123.587 724.549 116.73H736.074V118.918C734.324 128.037 725.643 141.751 702.811 141.751C680.27 141.751 665.9 127.964 665.9 102.797ZM678.52 95.8674H725.351C725.205 83.2477 717.546 74.1294 702.592 74.1294C687.93 74.1294 679.541 83.3936 678.52 95.8674ZM752.566 65.6676H765.696L786.851 93.3143H788.018L810.85 65.6676H823.762V67.856L795.313 102.36L822.522 137.812V140H809.391L787.289 111.186H786.121L762.414 140H749.502V137.812L778.827 102.214L752.566 67.856V65.6676ZM871.43 65.6676V129.642H885.436V140H840.063V129.642H858.591V75.953H844.44V65.6676H871.43ZM857.205 52.9749V38.8962H872.087V52.9749H857.205ZM896.344 65.6676H919.613V43.8566H932.452V65.6676H962.068V76.0989H932.452V127.745L933.619 128.912H961.849V140H938.725C926.543 140 919.613 133.945 919.613 121.836V76.0989H896.344V65.6676ZM973.245 65.6676H986.302L1010.01 124.681H1011.18L1034.81 65.6676H1047.5V67.856L1004.76 169.179H991.992V166.99L1003.66 139.927L973.245 67.856V65.6676ZM1116.67 34.9571H1130.09V128.256H1189.03V140H1116.67V34.9571ZM1205.12 86.3114C1206.66 72.5245 1218.55 63.9169 1237.95 63.9169C1257.21 63.9169 1268.59 72.5245 1268.59 91.0529V140H1256.62V129.787H1255.46C1252.25 135.477 1244.66 141.605 1229.05 141.605C1212.78 141.605 1201.55 133.508 1201.55 119.648C1201.55 104.913 1212.78 98.4205 1227.96 96.5239L1256.19 93.0225V90.3235C1256.19 78.725 1249.84 74.1294 1237.66 74.1294C1225.4 74.1294 1218.18 78.725 1217.16 88.4998H1205.12V86.3114ZM1214.31 119.064C1214.31 126.797 1220.88 131.246 1231.17 131.246C1244.88 131.246 1256.19 123.952 1256.19 107.539V102.943L1230.51 106.299C1220.52 107.612 1214.31 111.259 1214.31 119.064ZM1291.61 34.9571H1304.44V75.5153H1305.61C1311.16 67.1995 1320.06 63.9898 1330.34 63.9898C1349.67 63.9898 1364.48 77.1202 1364.48 102.87C1364.48 128.547 1349.67 141.678 1330.34 141.678C1319.84 141.678 1310.86 138.322 1305.32 129.787H1304.15V140H1291.61V34.9571ZM1304.01 102.87C1304.01 120.888 1313.64 131.028 1327.71 131.028C1341.94 131.028 1351.49 120.888 1351.49 102.87C1351.49 84.7795 1341.94 74.64 1327.71 74.64C1313.64 74.64 1304.01 84.7795 1304.01 102.87ZM1381.07 85.1443C1381.07 71.941 1392.52 63.9898 1411.78 63.9898C1431.18 63.9898 1443 71.941 1444.17 86.0926V88.281H1432.42C1431.91 77.9955 1423.74 74.1294 1411.85 74.1294C1400.04 74.1294 1393.4 77.9226 1393.4 84.8525C1393.4 91.7824 1399.09 94.4085 1407.19 95.3568L1419.95 96.9616C1434.98 98.7853 1445.41 105.132 1445.41 118.773C1445.41 132.487 1434.54 141.678 1413.9 141.678C1393.25 141.678 1380.34 132.559 1379.39 119.064V116.876H1391.36C1392.09 126.943 1401.28 131.538 1413.9 131.538C1426.59 131.538 1433.01 126.87 1433.01 119.429C1433.01 112.134 1426.95 108.852 1417.18 107.612L1404.41 106.007C1390.41 104.329 1381.07 98.2017 1381.07 85.1443Z",className:t}),o.jsx("path",{d:"M59.4967 39.8367C30.9654 39.8367 7.83624 62.9671 7.83624 91.5C7.83624 120.033 30.9654 143.163 59.4967 143.163C83.9985 143.163 104.516 126.105 109.823 103.216H117.84C112.399 130.466 88.3457 151 59.4967 151C26.6376 151 0 124.361 0 91.5C0 58.639 26.6376 32 59.4967 32C91.0393 32 116.849 56.5473 118.866 87.5817H155.879L123.292 54.9276L128.838 49.3918L161.428 82.0483L161.387 35.9218L169.223 35.9149L169.264 82.0641L201.87 49.3918L207.416 54.9276L174.829 87.5817H221V95.4183H174.771L207.416 128.131L201.87 133.667L169.281 101.011L169.321 147.157L161.485 147.163L161.444 100.993L128.838 133.667L123.292 128.131L155.937 95.4183H129.748V95.3791H84.6892V95.4183H59.495V87.5817H111.011C109.008 60.8792 86.7098 39.8367 59.4967 39.8367Z",className:t})]})})});pxe.displayName="Labs";const hxe=I.memo(({lineColor:e,width:t,...n})=>{const r=B("h-auto group ",t);return o.jsx("div",{className:r,...n,children:o.jsx("svg",{viewBox:"0 0 101 116",stroke:"none",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{className:e,d:"M86.4325 6.53418L50.4634 36.9696H86.4325V6.53418Z M50.4625 36.9696L17.2603 6.53418V36.9696H50.4625Z M50.4634 1L50.4634 114.441 M83.6656 70.172L50.4634 36.9697V79.3026L83.6656 108.908V70.172Z M17.2603 70.172L50.4625 36.9697V78.4497L17.2603 108.908V70.172Z M3.42627 36.9697V81.2394H17.2605V70.172L50.4628 36.9697H3.42627Z M50.4634 36.9697L83.6656 70.172V81.2394H97.4999V36.9697L50.4634 36.9697Z",strokeWidth:"5.53371",strokeMiterlimit:"10"})})})});hxe.displayName="Mark";const h3=I.memo(({width:e="w-10",sizeVariant:t="regular",fillColor:n="fill-super",svgClassName:r,...s})=>{const a=B("h-auto group",e);return o.jsx("div",{className:a,...s,children:t==="small"?o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 1102.02 529.46",className:r,children:[o.jsx("path",{className:n,d:"M1068.23,126.49c-23.5-41.68-58.35-75.11-100.77-96.67C928.5,10.04,884.37,0,836.29,0H66.16C29.56,0-.08,29.71,0,66.3l1,463.16h109.72V107.9h78.16v24.37c0,2.66,3.19,3.99,5.1,2.13,20.89-20.25,50.62-30.5,88.64-30.5,26.8,0,51.2,6.11,72.52,18.17,21.44,12.13,38.59,30.51,50.96,54.66h0c12.27,23.95,18.49,53.6,18.49,88.14s-6.22,63.91-18.49,87.85c-12.37,24.14-29.52,42.53-50.96,54.66-21.33,12.06-45.73,18.17-72.52,18.17-16.55,0-55.7-2.68-87.27-25.54-1.98-1.43-4.75-.01-4.75,2.43v127.02h645.68c48.09,0,92.22-10.03,131.18-29.83,42.41-21.55,77.26-54.98,100.78-96.69,22.41-39.76,33.78-86.22,33.78-138.07s-11.37-98.6-33.79-138.39ZM650.3,177.46h-33.53c-23.25,0-40.37,6.1-50.86,18.14-10.7,12.27-16.12,32.09-16.12,58.91v164.71h-79.89V107.9h77.01v20.91c0,2.68,3.28,4.04,5.13,2.11,4.56-4.76,9.87-8.79,15.89-12.06,11.94-6.49,28.27-9.77,48.55-9.77h33.81v68.37ZM967.21,352.21c-13.66,24.23-33.03,42.83-57.56,55.29-24.32,12.36-52.71,18.62-84.38,18.62s-60.35-6.27-84.67-18.62c-24.54-12.46-43.9-31.07-57.56-55.29-13.58-24.09-20.47-53.47-20.47-87.34s6.89-63.54,20.47-87.63c13.65-24.22,33.02-42.82,57.56-55.29,24.33-12.36,52.81-18.62,84.67-18.62s60.06,6.27,84.38,18.62c24.53,12.47,43.9,31.07,57.56,55.29,13.58,24.1,20.47,53.58,20.47,87.63s-6.89,63.25-20.47,87.34Z"}),o.jsx("path",{className:n,d:"M868.46,179.51c-12.16-7.28-26.7-10.97-43.2-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28,12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.07-28.22-32.29Z"}),o.jsx("path",{className:n,d:"M221.1,351.54c12.26,7.29,26.85,10.98,43.36,10.98s31.04-3.69,43.2-10.97c12.07-7.23,21.56-18.09,28.22-32.29,6.79-14.5,10.24-32.35,10.24-53.07s-3.45-38.57-10.24-53.07c-6.66-14.2-16.15-25.06-28.22-32.29-12.16-7.28-26.7-10.97-43.19-10.97s-31.32,3.69-43.48,10.97c-12.07,7.23-21.57,18.05-28.23,32.16-6.79,14.4-10.23,32.3-10.23,53.2s3.45,38.57,10.24,53.07c6.66,14.2,16.19,25.06,28.35,32.28Z"})]}):o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 804.75 382.36",children:[o.jsx("path",{className:n,d:"M558.95,126.72c-27.44,27.72-27.17,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04Z"}),o.jsx("path",{className:n,d:"M780.18,91.05l-.13-.24c-16.48-29.44-40.65-53.13-69.89-68.52l-.17-.09c-27.73-14.73-58.76-22.2-92.21-22.2H30.68C14.13,0,.71,13.4.68,29.94l-.68,352.42h61.16V69.44h51.68v20.46c0,2.11,2.57,3.13,4.03,1.6,47.58-52.18,144.58-36.94,178.65,27.45,11.54,19.66,17.39,43.96,17.39,72.23,1.63,73.04-48.06,131.68-120.25,131.21-32.37,0-57.81-12.59-75.79-31.52-1.45-1.53-4.03-.51-4.03,1.6v89.9h504.93c33.45,0,64.43-7.45,92.09-22.14l.17-.09c29.33-15.43,53.53-39.13,69.99-68.53l.14-.25c16.31-28.74,24.58-62.44,24.58-100.17s-8.27-71.4-24.57-100.13ZM479.99,118.23c-23.81.5-56.08-3.74-72.26,13-8.74,8.61-13.17,23.4-13.17,43.96v140.34h-51.67V69.44h51.67v20.46c0,2.35,3.08,3.22,4.32,1.22,5.01-8.06,10.34-13.58,16.12-16.74,9.81-5.62,23.28-8.48,40.05-8.48h24.94v52.31ZM613.77,322.39c-75.99.52-128.52-54.09-127-131.21,0-27.33,5.53-51.14,16.45-70.78,43.24-80.65,177.73-80.74,220.65-.03,11.22,19.65,16.91,43.48,16.91,70.8,1.27,76.58-51.1,131.74-127,131.21Z"}),o.jsx("path",{className:n,d:"M240.29,256.1h0c13.9-14.68,20.94-38.51,20.94-64.92,0-26.44-7.04-50.1-20.98-64.5-25.23-29.51-83.73-29.21-109.17.04-27.44,27.72-27.18,101.45,0,129.38,25.44,28.65,83.99,28.94,109.2,0Z"})]})})});h3.displayName="Pro";const gxe=I.memo(({width:e,fillColor:t,isPro:n,isMax:r,isEnterprise:s,...a})=>{const i=B("h-auto group",e,{"":n});return s&&n?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[o.jsx("path",{className:"fill-super",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),o.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):s&&r?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 797 82",children:[o.jsx("path",{className:"fill-max",d:"M602.964 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM684.483 18.07h3.899v8.053h-5.047c-3.955 0-6.904.953-8.86 2.866-1.944 1.906-2.92 5.044-2.92 9.404V64.8h-7.967V18.253h7.967v7.427c0 .42.21.626.619.626.233 0 .409-.058.534-.178.125-.122.232-.356.357-.719 1.534-4.889 5.348-7.336 11.423-7.336h-.005v-.005.001ZM655.961 28.046c-2.103-3.728-4.814-6.52-8.15-8.37-3.336-1.85-6.922-2.774-10.757-2.774-7.558 0-12.872 3.044-15.94 9.134-.239.482-.529.718-.887.718-.357 0-.534-.184-.534-.54v-7.968h-7.968v63.552h7.968V56.82c0-.363.182-.54.534-.54.352 0 .653.24.887.718 3.068 6.089 8.382 9.134 15.94 9.134 3.835 0 7.421-.925 10.757-2.775 3.336-1.85 6.052-4.64 8.15-8.369 2.096-3.728 3.142-8.221 3.142-13.471s-1.051-9.743-3.142-13.471Zm-9.202 26.315c-2.92 3.068-6.773 4.608-11.558 4.608-4.784 0-8.637-1.527-11.559-4.608-2.921-3.073-3.994-7.358-3.994-12.844s1.068-9.772 3.994-12.845c2.922-3.067 6.768-4.607 11.559-4.607 4.791 0 8.638 1.534 11.558 4.607 2.922 3.073 4.382 7.353 4.382 12.845 0 5.491-1.46 9.776-4.382 12.844ZM567.986 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.035 1.585-4.978 2.372-8.815 2.372-4.722 0-8.49-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.068-5.859-7.347-7.83-3.274-1.964-7.189-2.953-11.911-2.953-4.721 0-8.836 1-12.349 3-3.511 1.998-6.244 4.847-8.188 8.547-1.944 3.7-2.921 8.053-2.921 13.069 0 5.015 1 9.369 3.012 13.069 2.013 3.704 4.86 6.549 8.548 8.548 3.688 2 7.95 2.998 12.791 2.998 6.438 0 11.383-1.59 14.837-4.785 3.45-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.626-2.24 6.007-3.36 10.138-3.36 4.427 0 7.672 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.591-4.176 2.199-7.388 4.824-9.622ZM443.533 50.015l-.005-.012c-.949 2.81-2.438 4.998-4.472 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.293-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.807-7.44-2.431-10.697-1.626-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953-4.722 0-8.837 1-12.349 3-3.512 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015.999 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.791 2.998 6.439 0 11.383-1.59 14.838-4.785 3.449-3.188 5.739-6.962 6.858-11.322h-8.41l-.002.002Zm-24.572-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.74 3.447 2.069 2.297 3.103 5.48 3.103 9.536h-27.806c.591-4.176 2.2-7.388 4.825-9.622ZM788.588 50.015l-.005-.012c-.95 2.81-2.438 4.998-4.473 6.583-2.034 1.585-4.978 2.372-8.814 2.372-4.723 0-8.491-1.372-11.292-4.119-2.802-2.74-4.359-6.444-4.648-11.099h36.745V38.37c0-3.878-.808-7.44-2.432-10.697-1.625-3.245-4.069-5.859-7.348-7.83-3.274-1.964-7.189-2.953-11.91-2.953s-8.836 1-12.349 3c-3.511 1.998-6.245 4.847-8.189 8.547s-2.92 8.053-2.92 13.069c0 5.015 1 9.369 3.012 13.069 2.012 3.704 4.859 6.549 8.547 8.548 3.688 2 7.95 2.998 12.792 2.998 6.438 0 11.382-1.59 14.837-4.785 3.449-3.188 5.739-6.962 6.859-11.322h-8.411l-.001.002Zm-24.573-22.6c2.625-2.24 6.006-3.36 10.138-3.36 4.427 0 7.671 1.155 9.741 3.447 2.069 2.297 3.102 5.48 3.102 9.536h-27.805c.59-4.176 2.199-7.388 4.824-9.622ZM520.476 57.857c-1.447.15-2.323.224-2.61.224-.411 0-.747-.12-.978-.362-.235-.236-.358-.563-.358-.988 0-.293.076-1.178.227-2.642.141-1.459.221-3.716.221-6.756V25.062h11.099v-6.819h-11.095V5.708h-7.964v12.53h-8.669v6.819h8.669v24.505c0 5.136 1.244 8.957 3.719 11.46 2.478 2.506 6.257 3.763 11.34 3.763h6.198v-7.158h-3.102c-3.011 0-5.242.075-6.689.225l-.008.006v-.001ZM701.809 3.087H692.5v10.076h9.309V3.087ZM701.319 18.245h-7.972v46.543h7.972V18.245ZM498.872 36.41V64.8h-7.861V37.72c0-8.299-4.281-12.665-12.229-12.665-8.997 0-13.976 5.415-13.976 16.16V64.8h-7.861V19.379h7.861v5.065c0 .438.174.612.611.612.438 0 .874-.7.962-.786 3.057-4.104 7.773-6.202 14.15-6.202 11.443 0 18.344 6.726 18.344 18.343h-.001ZM747.71 33.002h-8.503c-.448-5.997-4.654-8.95-12.531-8.95-6.803 0-10.742 2.953-10.742 6.98 0 3.491 2.328 4.566 8.504 5.909l8.503 1.79c9.22 1.88 14.322 4.834 14.322 12.621 0 8.593-7.886 14.77-19.701 14.77-14.232 0-19.979-6.982-21.501-17.455h8.504c1.163 6.892 4.526 10.294 13.387 10.294 7.787 0 11.255-3.223 11.255-7.161 0-2.595-1.432-3.85-3.849-4.565-1.164-.359-3.223-.806-5.998-1.432l-8.503-1.79c-8.235-1.7-12.978-5.282-12.978-12.801 0-4.386 1.79-7.877 5.37-10.473 3.581-2.596 8.235-3.85 13.873-3.85 11.637 0 20.23 6.356 20.588 16.112v.002Z"}),o.jsx("path",{className:t,d:"M125.928 17.801h3.916v8.087h-5.069c-3.971 0-6.932.957-8.896 2.878-1.952 1.914-2.932 5.064-2.932 9.442v26.516h-8V17.985h8v7.458c0 .421.211.628.622.628.234 0 .41-.058.536-.178.126-.122.233-.358.359-.722 1.54-4.909 5.37-7.366 11.469-7.366h-.005V17.8v.001Zm53.217 10.02c2.099 3.742 3.155 8.254 3.155 13.526 0 5.271-1.051 9.783-3.155 13.526-2.106 3.744-4.834 6.547-8.184 8.404-3.35 1.858-6.95 2.786-10.801 2.786-7.589 0-12.925-3.057-16.006-9.172-.234-.479-.536-.721-.89-.721-.353 0-.536.179-.536.543v25.08h-8.001V17.98h8.001v8c0 .358.176.543.536.543.36 0 .65-.236.89-.721 3.081-6.114 8.417-9.172 16.006-9.172 3.851 0 7.451.929 10.801 2.786 3.35 1.858 6.072 4.66 8.184 8.404Zm-4.84 13.526c0-5.514-1.466-9.812-4.4-12.897-2.932-3.087-6.795-4.627-11.605-4.627-4.811 0-8.673 1.545-11.607 4.627-2.938 3.085-4.01 7.388-4.01 12.897 0 5.508 1.077 9.811 4.01 12.897 2.934 3.092 6.801 4.627 11.607 4.627 4.805 0 8.673-1.546 11.605-4.627 2.934-3.08 4.4-7.389 4.4-12.897ZM44.411 27.889c2.1 3.743 3.155 8.255 3.155 13.526 0 5.272-1.05 9.784-3.155 13.527-2.106 3.743-4.833 6.548-8.182 8.404-3.35 1.857-6.95 2.786-10.801 2.786-7.59 0-12.925-3.057-16.006-9.172-.233-.48-.536-.721-.89-.721s-.536.178-.536.541v25.08H0V18.05h8v8c0 .357.176.542.536.542.36 0 .65-.237.89-.722 3.081-6.113 8.416-9.171 16.005-9.171 3.853 0 7.452.928 10.802 2.786 3.35 1.857 6.07 4.66 8.182 8.403h-.006l.002.002Zm-4.846 13.526c0-5.514-1.466-9.811-4.398-12.897-2.934-3.08-6.802-4.627-11.607-4.627-4.806 0-8.673 1.546-11.606 4.627-2.932 3.092-4.011 7.39-4.011 12.897 0 5.508 1.079 9.812 4.011 12.899 2.933 3.092 6.796 4.625 11.606 4.625s8.673-1.545 11.607-4.625c2.932-3.08 4.398-7.39 4.398-12.899Zm51.243 8.462h8.445c-1.124 4.378-3.423 8.167-6.887 11.37-3.47 3.206-8.433 4.805-14.898 4.805-4.861 0-9.14-1.004-12.844-3.012-3.703-2.008-6.562-4.862-8.582-8.582-2.02-3.715-3.025-8.087-3.025-13.123s.982-9.408 2.932-13.123c1.953-3.714 4.697-6.576 8.223-8.582 3.527-2.008 7.658-3.011 12.4-3.011s8.673.992 11.959 2.964c3.292 1.978 5.746 4.604 7.378 7.863 1.632 3.27 2.441 6.847 2.441 10.74v5.394H61.454c.29 4.672 1.855 8.393 4.667 11.144 2.814 2.758 6.596 4.136 11.34 4.136 3.85 0 6.806-.79 8.85-2.382 2.042-1.592 3.537-3.79 4.49-6.61l.006.012.001-.003ZM61.29 36.847h27.92c0-4.072-1.04-7.268-3.115-9.575-2.077-2.302-5.336-3.46-9.781-3.46-4.149 0-7.544 1.123-10.18 3.373-2.636 2.244-4.25 5.47-4.844 9.662Zm127.463 27.867h8.006V0h-8.006v64.719-.005Zm112.513-51.839h9.348V2.758h-9.348v10.117Zm34.515 44.876c-1.453.15-2.333.226-2.621.226-.412 0-.75-.12-.982-.364-.236-.237-.359-.565-.359-.992 0-.294.076-1.183.228-2.653.141-1.465.221-3.732.221-6.784V24.823h11.412l-2.249-6.847h-9.159V5.387h-7.997v12.581h-8.704v6.847h8.704v24.607c0 5.156 1.25 8.993 3.735 11.507 2.488 2.515 6.283 3.778 11.386 3.778h6.224V57.52h-3.115c-3.023 0-5.263.075-6.716.225l-.008.006Zm48.361-39.783-13.25 39.224c-.175.484-.457 1.114-1.361 1.114-.904 0-1.193-.628-1.373-1.114l-13.249-39.217h-8.159l15.344 46.74h5.427c.352 0 .623.035.805.092.177.058.324.207.445.45.232.357.203.9-.092 1.614l-2.489 6.83c-.358.9-1.038 1.35-2.041 1.35-.359 0-1.186-.075-2.489-.225-1.306-.15-2.989-.224-5.065-.224h-6.494v7.186h8.535c4.981 0 7.977-.854 10.557-2.56 2.58-1.708 4.576-4.72 6.001-9.033l16.572-50.425v-1.8l-7.614.006-.01-.007ZM274.187 35.41l-12.538-17.437h-8.803v1.794l15.023 20.223-18.318 22.923v1.794h8.982l14.584-18.787 13.604 18.787h8.628v-1.794L279.428 41.34l17.258-21.48v-1.887h-8.983L274.191 35.41h-.004Zm27.93 29.304h8.005V17.98h-8.005v46.739-.005Zm-52.675-14.837c-1.13 4.378-3.421 8.167-6.884 11.37-3.472 3.206-8.435 4.805-14.901 4.805-4.86 0-9.141-1.004-12.844-3.012-3.71-2.008-6.561-4.862-8.582-8.582-2.014-3.715-3.019-8.087-3.019-13.123s.982-9.408 2.934-13.123c1.958-3.714 4.697-6.576 8.224-8.582 3.523-2.008 7.655-3.011 12.403-3.011 4.749 0 8.673.992 11.965 2.964 3.287 1.978 5.748 4.604 7.378 7.863 1.633 3.27 2.443 6.847 2.443 10.74v5.394h-36.9c.296 4.672 1.852 8.393 4.668 11.144 2.812 2.758 6.595 4.136 11.337 4.136 3.851 0 6.808-.79 8.85-2.382 2.041-1.592 3.537-3.79 4.484-6.61h8.45l-.006.012v-.003Zm-37.761-13.03H239.6c0-4.072-1.038-7.268-3.108-9.575-2.08-2.302-5.335-3.46-9.782-3.46-4.15 0-7.543 1.123-10.18 3.373-2.636 2.244-4.255 5.47-4.843 9.662h-.006Z"})]})}):n?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 3913.07 632",children:[o.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),o.jsxs("g",{children:[o.jsx("path",{className:"fill-super",d:"M3355.84,188.2c-34.07-64.39-131.07-79.63-178.65-27.45-1.45,1.53-4.03.51-4.03-1.6v-20.46s-51.68,0-51.68,0v360.92h51.68v-137.9c0-2.11,2.57-3.13,4.03-1.6,17.98,18.93,43.42,31.52,75.79,31.52,72.2.47,121.88-58.16,120.25-131.21,0-28.27-5.85-52.57-17.39-72.23ZM3321.56,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.18-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),o.jsx("path",{className:"fill-super",d:"M3678.1,499.61h-438.05v-48.22h438.05c33.41,0,64.39-7.45,92.07-22.16,29.4-15.46,53.58-39.15,70.02-68.56l.08-.14c16.31-28.72,24.58-62.4,24.58-100.11s-8.26-71.36-24.56-100.07l-.08-.13c-16.46-29.43-40.64-53.13-69.93-68.54-27.79-14.76-58.78-22.22-92.19-22.22h-555.91V21.24h555.91c41.39,0,79.99,9.36,114.73,27.81,37.45,19.7,68.41,49.99,89.43,87.55,20.45,36.05,30.82,77.7,30.82,123.82s-10.38,87.81-30.84,123.86c-21,37.53-51.96,67.81-89.53,87.57-34.63,18.4-73.22,27.75-114.61,27.75Z"}),o.jsx("path",{className:"fill-super",d:"M3784.19,189.62c-42.92-80.72-177.41-80.62-220.65.03-10.91,19.63-16.45,43.44-16.45,70.78-1.52,77.12,51.01,131.73,127,131.21,75.9.53,128.27-54.63,127-131.21,0-27.33-5.69-51.15-16.91-70.8ZM3749.42,260.43c0,26.4-7.05,50.24-20.94,64.92h0c-25.21,28.94-83.76,28.65-109.2,0-27.17-27.93-27.44-101.65,0-129.38,25.44-29.25,83.94-29.55,109.17-.04,13.94,14.4,20.97,38.06,20.98,64.5Z"}),o.jsx("path",{className:"fill-super",d:"M3515.38,135.16c-16.77,0-30.24,2.85-40.05,8.48-5.78,3.15-11.11,8.68-16.12,16.74-1.24,2-4.32,1.13-4.32-1.22v-20.46s-51.67,0-51.67,0v246.1h51.67v-140.34c0-20.57,4.43-35.36,13.17-43.97,16.17-16.75,48.45-12.5,72.26-13v-52.31h-24.94Z"})]})]})}):r?o.jsx("div",{className:i,...a,children:o.jsxs("svg",{viewBox:"0 0 485 74",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{className:t,d:"M972.21,137.43h30.23v62.43h-39.13c-30.66,0-53.52,7.39-68.68,22.22-15.07,14.78-22.64,39.1-22.64,72.9v204.71h-61.76V138.85h61.76v57.58c0,3.25,1.63,4.85,4.8,4.85,1.81,0,3.17-.45,4.14-1.38.97-.94,1.8-2.76,2.77-5.57,11.89-37.9,41.46-56.87,88.55-56.87h-.04v-.04ZM1383.06,214.78c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.32,50.54-63.18,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.81-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.19v193.63h-61.77V138.81h61.77v61.77c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.73,0,57.53,7.17,83.39,21.51,25.86,14.34,46.88,35.98,63.18,64.88ZM1345.7,319.21c0-42.57-11.32-75.75-33.97-99.57-22.64-23.83-52.46-35.72-89.6-35.72s-66.96,11.93-89.61,35.72c-22.68,23.82-30.96,57.04-30.96,99.57s8.32,75.75,30.96,99.57c22.65,23.87,52.51,35.72,89.61,35.72s66.96-11.93,89.6-35.72c22.65-23.78,33.97-57.04,33.97-99.57ZM342.87,215.31c16.21,28.9,24.36,63.73,24.36,104.43s-8.11,75.53-24.36,104.43c-16.26,28.9-37.31,50.55-63.17,64.88-25.86,14.34-53.66,21.51-83.39,21.51-58.59,0-99.78-23.6-123.57-70.81-1.8-3.7-4.14-5.57-6.87-5.57s-4.14,1.38-4.14,4.18v193.63H0V139.34h61.76v61.76c0,2.76,1.36,4.19,4.14,4.19s5.02-1.83,6.87-5.57c23.79-47.2,64.98-70.81,123.57-70.81,29.74,0,57.53,7.17,83.39,21.51,25.86,14.34,46.87,35.98,63.17,64.88h-.05ZM305.46,319.74c0-42.57-11.32-75.75-33.96-99.57-22.65-23.78-52.51-35.72-89.61-35.72s-66.96,11.93-89.6,35.72c-22.64,23.87-30.97,57.05-30.97,99.57s8.33,75.75,30.97,99.58c22.64,23.87,52.47,35.71,89.6,35.71s66.96-11.93,89.61-35.71c22.64-23.78,33.96-57.05,33.96-99.58ZM701.07,385.07h65.2c-8.68,33.8-26.43,63.05-53.17,87.77-26.79,24.76-65.11,37.1-115.02,37.1-37.53,0-70.57-7.75-99.16-23.25-28.59-15.5-50.66-37.54-66.26-66.26-15.59-28.68-23.35-62.43-23.35-101.31s7.58-72.63,22.64-101.31c15.07-28.68,36.26-50.77,63.48-66.26,27.23-15.5,59.12-23.25,95.73-23.25s66.96,7.66,92.33,22.89c25.42,15.27,44.36,35.54,56.96,60.7,12.6,25.25,18.85,52.86,18.85,82.92v41.64h-284.85c2.24,36.07,14.32,64.8,36.03,86.04,21.72,21.29,50.92,31.93,87.54,31.93,29.73,0,52.55-6.1,68.33-18.39,15.77-12.29,27.31-29.26,34.67-51.03l.04.09ZM473.18,284.47h215.55c0-31.44-8.02-56.11-24.05-73.92-16.03-17.77-41.19-26.72-75.51-26.72-32.03,0-58.24,8.68-78.59,26.05-20.35,17.32-32.82,42.22-37.4,74.59ZM1457.24,499.61h61.81V0h-61.81v499.65-.04ZM2325.88,99.4h72.17V21.24h-72.17v78.15ZM2592.35,445.86c-11.22,1.16-18.01,1.74-20.24,1.74-3.18,0-5.79-.93-7.58-2.81-1.82-1.83-2.77-4.36-2.77-7.66,0-2.27.59-9.13,1.76-20.48,1.09-11.31,1.71-28.81,1.71-52.37v-172.65h88.1l-17.36-52.86h-70.71V41.59h-61.74v97.13h-67.2v52.86h67.2v189.97c0,39.81,9.65,69.43,28.83,88.84,19.21,19.42,48.51,29.17,87.91,29.17h48.05v-55.49h-24.05c-23.34,0-40.63.58-51.85,1.74l-.06.05ZM2965.71,138.76l-102.29,302.77c-1.35,3.74-3.53,8.6-10.51,8.6s-9.21-4.85-10.6-8.6l-102.29-302.77h-62.99l118.46,360.85h41.9c2.72,0,4.81.27,6.22.71,1.36.45,2.5,1.6,3.43,3.47,1.79,2.76,1.57,6.95-.71,12.47l-19.21,52.73c-2.77,6.95-8.02,10.42-15.76,10.42-2.77,0-9.16-.58-19.22-1.74-10.08-1.16-23.07-1.73-39.1-1.73h-50.14v55.48h65.9c38.45,0,61.58-6.59,81.5-19.77,19.92-13.18,35.33-36.43,46.33-69.73l127.94-389.3v-13.85h-58.86ZM2116.82,273.38l-96.8-134.62h-67.96v13.85l115.98,156.13-141.42,176.97v13.85h69.35l112.59-145.04,105.03,145.04h66.61v-13.85l-122.92-166.55,133.24-165.84v-14.56h-69.35l-104.32,134.62h-.03ZM2332.45,499.61h61.8V138.81h-61.8v360.84-.04ZM1925.78,385.07c-8.72,33.8-26.41,63.05-53.15,87.77-26.8,24.76-65.12,37.1-115.04,37.1-37.52,0-70.57-7.75-99.16-23.25-28.64-15.5-50.65-37.54-66.25-66.26-15.55-28.68-23.31-62.43-23.31-101.31s7.58-72.63,22.65-101.31c15.12-28.68,36.26-50.77,63.49-66.26,27.2-15.5,59.1-23.25,95.76-23.25s66.96,7.66,92.37,22.89c25.38,15.27,44.38,35.54,56.96,60.7,12.61,25.25,18.86,52.86,18.86,82.92v41.64h-284.88c2.29,36.07,14.3,64.8,36.04,86.04,21.71,21.29,50.92,31.93,87.53,31.93,29.73,0,52.56-6.1,68.32-18.39,15.76-12.29,27.31-29.26,34.62-51.03h65.24l-.05.09ZM1634.25,284.47h215.55c0-31.44-8.02-56.11-24-73.92-16.06-17.77-41.19-26.72-75.52-26.72-32.04,0-58.23,8.68-78.59,26.05-20.35,17.32-32.85,42.22-37.39,74.59h-.05Z"}),o.jsx("path",{d:"M113.78 16.0915H117.318V23.4013H112.739C109.15 23.4013 106.475 24.2666 104.701 26.003C102.937 27.7336 102.051 30.5812 102.051 34.5388V58.508H94.8233V16.2578H102.051V22.9997C102.051 23.3803 102.242 23.5676 102.613 23.5676C102.825 23.5676 102.984 23.5149 103.098 23.406C103.211 23.2959 103.308 23.0828 103.422 22.7538C104.813 18.3162 108.274 16.095 113.785 16.095H113.78V16.0903V16.0915ZM161.863 25.1483C163.76 28.5322 164.714 32.6103 164.714 37.3759C164.714 42.1414 163.765 46.2196 161.863 49.6034C159.96 52.9873 157.495 55.5211 154.469 57.2001C151.443 58.8792 148.189 59.7187 144.71 59.7187C137.853 59.7187 133.032 56.9554 130.248 51.4277C130.036 50.9944 129.763 50.7755 129.444 50.7755C129.124 50.7755 128.959 50.9371 128.959 51.2661V73.9379H121.73V16.2531H128.959V23.4856C128.959 23.8088 129.119 23.9762 129.444 23.9762C129.769 23.9762 130.031 23.762 130.248 23.324C133.032 17.7975 137.853 15.033 144.71 15.033C148.189 15.033 151.443 15.8725 154.469 17.5516C157.495 19.2306 159.955 21.7644 161.863 25.1483ZM157.491 37.3759C157.491 32.3914 156.166 28.5064 153.515 25.7173C150.866 22.9271 147.376 21.5349 143.029 21.5349C138.682 21.5349 135.193 22.9318 132.542 25.7173C129.887 28.5064 128.918 32.3961 128.918 37.3759C128.918 42.3556 129.892 46.2453 132.542 49.0344C135.193 51.8293 138.687 53.2168 143.029 53.2168C147.371 53.2168 150.866 51.8199 153.515 49.0344C156.166 46.25 157.491 42.3556 157.491 37.3759ZM40.127 25.2103C42.0241 28.5942 42.9779 32.6724 42.9779 37.4379C42.9779 42.2034 42.0287 46.2816 40.127 49.6655C38.224 53.0493 35.7605 55.5843 32.734 57.2622C29.7076 58.9412 26.454 59.7808 22.9747 59.7808C16.1177 59.7808 11.2972 57.0175 8.51295 51.4897C8.30229 51.0565 8.02844 50.8375 7.70894 50.8375C7.38944 50.8375 7.22442 50.9991 7.22442 51.327V73.9988H0V16.3151H7.22793V23.5465C7.22793 23.8697 7.3871 24.0371 7.71245 24.0371C8.0378 24.0371 8.29995 23.8228 8.51646 23.3849C11.3007 17.8584 16.1212 15.0939 22.9782 15.0939C26.4587 15.0939 29.7111 15.9334 32.7375 17.6125C35.764 19.2915 38.2228 21.8253 40.1305 25.2092H40.1246L40.127 25.2103ZM35.7488 37.4379C35.7488 32.4534 34.424 28.5684 31.7743 25.7794C29.1236 22.995 25.629 21.597 21.2871 21.597C16.9451 21.597 13.4506 22.9939 10.8009 25.7794C8.15132 28.5743 7.17644 32.4593 7.17644 37.4379C7.17644 42.4165 8.15132 46.3074 10.8009 49.0976C13.4506 51.8925 16.9416 53.2788 21.2871 53.2788C25.6325 53.2788 29.1236 51.882 31.7743 49.0976C34.424 46.3132 35.7488 42.4177 35.7488 37.4379ZM82.048 45.0873H89.6786C88.6627 49.0449 86.5854 52.4697 83.4559 55.3642C80.3206 58.2633 75.8359 59.7082 69.9949 59.7082C65.6026 59.7082 61.7359 58.8007 58.3899 56.9859C55.0439 55.171 52.461 52.5903 50.6353 49.2276C48.8108 45.8695 47.9026 41.9177 47.9026 37.3653C47.9026 32.8129 48.7897 28.8612 50.5522 25.5031C52.3159 22.145 54.7958 19.5585 57.9815 17.7448C61.1683 15.9299 64.9004 15.0225 69.185 15.0225C73.4695 15.0225 77.0215 15.9194 79.9906 17.7026C82.9656 19.4906 85.1822 21.864 86.6568 24.8099C88.1314 27.7664 88.8628 30.9992 88.8628 34.5189V39.3945H55.5261C55.7883 43.6178 57.202 46.9818 59.7428 49.4688C62.2847 51.9616 65.7021 53.2074 69.9878 53.2074C73.4672 53.2074 76.1379 52.4932 77.9847 51.0541C79.8303 49.6151 81.1808 47.6281 82.0422 45.0791L82.0469 45.0896L82.048 45.0873ZM55.3775 33.3082H80.6039C80.6039 29.6269 79.6653 26.7384 77.7892 24.653C75.9132 22.5723 72.9686 21.5244 68.9521 21.5244C65.2035 21.5244 62.1361 22.5407 59.7545 24.5746C57.3729 26.6025 55.9135 29.518 55.3775 33.3082ZM170.545 58.4986H177.778V0H170.545V58.5033V58.4986ZM272.204 11.6386H280.65V2.49282H272.204V11.6386ZM303.389 52.2051C302.076 52.3409 301.282 52.4089 301.021 52.4089C300.649 52.4089 300.343 52.3 300.134 52.0798C299.921 51.8656 299.809 51.5693 299.809 51.1829C299.809 50.9171 299.878 50.1139 300.015 48.785C300.143 47.4607 300.216 45.4116 300.216 42.653V22.4377H310.526L308.494 16.2484H300.219V4.86971H292.993V16.2425H285.129V22.4318H292.993V44.6752C292.993 49.3365 294.123 52.8046 296.367 55.0773C298.616 57.3512 302.045 58.4928 306.656 58.4928H312.279V51.9955H309.465C306.733 51.9955 304.71 52.0634 303.396 52.1993L303.389 52.2051ZM347.085 16.2425L335.113 51.6993C334.955 52.1372 334.7 52.7063 333.883 52.7063C333.067 52.7063 332.806 52.1384 332.643 51.6993L320.672 16.2484H313.3L327.163 58.4998H332.067C332.385 58.4998 332.63 58.5314 332.795 58.5829C332.954 58.6356 333.088 58.7703 333.196 58.9892C333.406 59.3124 333.38 59.803 333.113 60.4493L330.865 66.6234C330.541 67.4372 329.927 67.8435 329.021 67.8435C328.697 67.8435 327.949 67.7756 326.771 67.6397C325.592 67.5039 324.071 67.4372 322.195 67.4372H316.327V73.9333H324.04C328.54 73.9333 331.247 73.1616 333.578 71.6184C335.909 70.0752 337.713 67.3529 339 63.4538L353.973 17.8712V16.2437L347.094 16.2496L347.085 16.2437V16.2425ZM247.737 32.0097L236.408 16.2472H228.455V17.8689L242.028 36.1499L225.477 56.8711V58.4928H233.594L246.77 41.5103L259.062 58.4928H266.858V56.8711L252.472 37.37L268.065 17.952V16.2472H259.949L247.74 32.0097H247.737ZM272.973 58.4986H280.205V16.2531H272.973V58.5033V58.4986ZM225.379 45.0873C224.358 49.0449 222.288 52.4697 219.159 55.3642C216.022 58.2633 211.538 59.7082 205.695 59.7082C201.304 59.7082 197.436 58.8007 194.09 56.9859C190.739 55.171 188.163 52.5903 186.337 49.2276C184.517 45.8695 183.609 41.9177 183.609 37.3653C183.609 32.8129 184.496 28.8612 186.26 25.5031C188.029 22.145 190.503 19.5585 193.69 17.7448C196.873 15.9299 200.607 15.0225 204.897 15.0225C209.188 15.0225 212.734 15.9194 215.707 17.7026C218.678 19.4906 220.901 21.864 222.374 24.8099C223.849 27.7664 224.581 30.9992 224.581 34.5189V39.3945H191.241C191.509 43.6178 192.914 46.9818 195.458 49.4688C197.999 51.9616 201.418 53.2074 205.702 53.2074C209.182 53.2074 211.854 52.4932 213.698 51.0541C215.542 49.6151 216.894 47.6281 217.75 45.0791H225.385L225.379 45.0896V45.0873ZM191.261 33.3082H216.487C216.487 29.6269 215.548 26.7384 213.678 24.653C211.799 22.5723 208.858 21.5244 204.84 21.5244C201.09 21.5244 198.025 22.5407 195.642 24.5746C193.261 26.6025 191.798 29.518 191.266 33.3082H191.261Z",className:t}),o.jsxs("g",{children:[o.jsx("path",{d:"M369.705 16.0751V19.7517H370.279C371.485 17.7413 373.552 15.3866 379.007 15.3866C384.461 15.3866 386.93 18.2588 387.906 20.7282H388.48C389.915 18.1429 392.499 15.3866 398.241 15.3866C403.982 15.3866 408.345 18.5457 408.345 25.2666V45.3133H403.293V25.612C403.293 21.7633 401.169 19.4086 397.035 19.4086C392.385 19.4086 389.112 22.2234 389.112 28.0825V45.3145H384.06V25.6131C384.06 21.7644 381.936 19.4098 377.802 19.4098C373.151 19.4098 369.879 22.2246 369.879 28.0837V45.3156H364.827V16.0786H369.707L369.705 16.0751Z",className:"fill-max"}),o.jsx("path",{d:"M412.837 24.5758C413.813 19.1194 418.693 15.3855 425.985 15.3855C433.276 15.3855 438.328 19.1194 438.328 26.2419V45.3121H433.448V41.0045H432.873C431.61 43.0722 428.797 45.9444 422.711 45.9444C416.626 45.9444 412.032 42.7854 412.032 37.5585C412.032 32.3317 416.452 29.5169 422.423 28.9432L433.332 27.9093V26.1283C433.332 21.3605 430.518 19.178 425.869 19.178C421.219 19.178 418.232 21.3605 417.716 25.4387H412.836V24.5769L412.837 24.5758ZM423.573 42.1519C428.912 42.1519 433.333 39.0502 433.333 32.4441V31.6397L423.114 32.6162C419.324 32.9605 417.085 34.3971 417.085 37.3267C417.085 40.2563 419.612 42.1519 423.573 42.1519Z",className:"fill-max"}),o.jsx("path",{d:"M456.8 2.49283C461.595 2.49283 466.06 3.61337 470.071 5.74672C474.452 8.0522 477.928 11.4606 480.394 15.8725C482.786 20.0889 483.999 24.9855 483.999 30.4255C483.999 35.8654 482.786 40.7632 480.394 44.9796C479.086 47.319 477.492 49.3739 475.629 51.1349C474.431 52.2672 473.125 53.2788 471.71 54.1617L468.776 50.4617L455.493 33.7133H455.001L445.815 45.3156H440.418V44.4539L451.985 30.3037L440.418 16.1536V15.2918H445.815L455.001 26.8941H455.493L464.679 15.2918H470.075V16.1536L458.509 30.3037L472.647 47.5052C474.071 46.1142 475.295 44.5054 476.312 42.6858L476.32 42.6718C478.31 39.1685 479.319 35.0481 479.319 30.4255C479.319 25.8028 478.31 21.6837 476.321 18.1792L476.313 18.1651C474.297 14.5541 471.46 11.7686 467.883 9.88697C464.547 8.11308 460.821 7.21618 456.8 7.21618H364.861V2.49283H456.8Z",className:"fill-max"}),o.jsx("path",{d:"M462.359 55.5562L460.611 53.3526C459.374 53.5399 458.103 53.6348 456.8 53.6348H364.861V58.3183H456.8C459.252 58.3183 461.616 58.0326 463.877 57.4706L462.358 55.5562H462.359Z",className:"fill-max"})]})]})}):o.jsx("div",{className:i,...a,children:o.jsx("svg",{viewBox:"0 0 962 202",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M310.846 43.922H320.632V63.8822H307.966C298.037 63.8822 290.638 66.2483 285.737 70.9803C280.852 75.7123 278.401 83.4772 278.401 94.2751V159.698H258.4V44.3666H278.401V62.7707C278.401 63.8028 278.926 64.3269 279.961 64.3269C280.549 64.3269 280.995 64.1839 281.297 63.8822C281.6 63.5805 281.886 62.993 282.188 62.1038C286.039 49.9879 295.602 43.922 310.862 43.922H310.846ZM441.502 68.646C446.753 77.8877 449.395 89.0191 449.395 102.024C449.395 115.029 446.769 126.161 441.502 135.402C436.235 144.644 429.425 151.552 421.055 156.141C412.685 160.73 403.679 163.016 394.052 163.016C375.084 163.016 361.75 155.474 354.048 140.388C353.459 139.213 352.712 138.61 351.82 138.61C350.929 138.61 350.484 139.055 350.484 139.944V201.825H330.482V44.3666H350.484V64.1045C350.484 64.9938 350.929 65.4384 351.82 65.4384C352.712 65.4384 353.444 64.8509 354.048 63.6599C361.75 48.5746 375.084 41.032 394.052 41.032C403.679 41.032 412.685 43.3186 421.055 47.9077C429.425 52.4968 436.235 59.4043 441.502 68.646ZM429.393 102.024C429.393 88.4157 425.733 77.8083 418.397 70.2022C411.062 62.596 401.403 58.785 389.389 58.785C377.376 58.785 367.717 62.596 360.381 70.2022C353.046 77.8242 350.357 88.4316 350.357 102.024C350.357 115.617 353.046 126.24 360.381 133.846C367.717 141.468 377.392 145.263 389.389 145.263C401.387 145.263 411.062 141.452 418.397 133.846C425.733 126.24 429.393 115.617 429.393 102.024ZM111.004 68.8207C116.255 78.0624 118.897 89.1938 118.897 102.199C118.897 115.204 116.271 126.335 111.004 135.577C105.737 144.819 98.9266 151.726 90.5568 156.315C82.1869 160.904 73.1806 163.191 63.5536 163.191C44.5862 163.191 31.2517 155.648 23.5502 140.563C22.9614 139.388 22.2135 138.785 21.3225 138.785C20.4314 138.785 19.9858 139.229 19.9858 140.119V202H0V44.5413H20.0017V64.2792C20.0017 65.1685 20.4473 65.6131 21.3384 65.6131C22.2295 65.6131 22.9614 65.0256 23.5661 63.8346C31.2676 48.7493 44.6021 41.2067 63.5696 41.2067C73.1965 41.2067 82.2028 43.4933 90.5727 48.0824C98.9426 52.6715 105.753 59.579 111.02 68.8207H111.004ZM98.8948 102.199C98.8948 88.5904 95.235 77.983 87.8994 70.3769C80.5639 62.7707 70.9051 58.9597 58.8913 58.9597C46.8776 58.9597 37.2188 62.7707 29.8833 70.3769C22.5477 77.9989 19.8585 88.6062 19.8585 102.199C19.8585 115.792 22.5477 126.415 29.8833 134.021C37.2188 141.643 46.8776 145.438 58.8913 145.438C70.9051 145.438 80.5639 141.627 87.8994 134.021C95.235 126.415 98.8948 115.792 98.8948 102.199ZM221.578 123.08H242.694C239.878 133.878 234.133 143.231 225.477 151.139C216.805 159.047 204.393 163.001 188.242 163.001C176.085 163.001 165.392 160.523 156.131 155.569C146.87 150.615 139.726 143.564 134.682 134.386C129.637 125.224 127.123 114.426 127.123 102.008C127.123 89.5908 129.574 78.7929 134.459 69.6305C139.344 60.4682 146.202 53.4019 155.017 48.4476C163.833 43.4933 174.16 41.0161 186.015 41.0161C197.869 41.0161 207.687 43.4615 215.914 48.3365C224.14 53.2114 230.283 59.6901 234.356 67.7409C238.43 75.8076 240.466 84.6364 240.466 94.2434V107.55H148.239C148.971 119.079 152.869 128.257 159.902 135.053C166.936 141.849 176.388 145.263 188.242 145.263C197.869 145.263 205.252 143.31 210.36 139.388C215.468 135.466 219.208 130.035 221.578 123.08ZM148.462 90.9246H218.253C218.253 80.873 215.659 72.9969 210.472 67.2963C205.284 61.6115 197.137 58.7532 186.03 58.7532C175.656 58.7532 167.174 61.5321 160.587 67.074C153.999 72.6158 149.957 80.5713 148.477 90.9087L148.462 90.9246ZM465.227 159.682H485.229V0H465.227V159.698V159.682ZM742.753 31.7744H766.113V6.8122H742.753V31.7744ZM825.163 142.5C821.535 142.866 819.339 143.056 818.607 143.056C817.573 143.056 816.745 142.755 816.157 142.167C815.568 141.579 815.266 140.77 815.266 139.722C815.266 138.991 815.457 136.8 815.823 133.179C816.189 129.559 816.379 123.969 816.379 116.443V61.2622H844.91L839.293 44.3666H816.395V13.3068H796.394V44.3508H774.642V61.2463H796.394V121.969C796.394 134.688 799.512 144.152 805.734 150.361C811.956 156.569 821.44 159.682 834.185 159.682H849.748V141.945H841.966C834.408 141.945 828.807 142.135 825.179 142.5H825.163ZM942.198 44.3508L909.084 141.119C908.639 142.31 907.939 143.866 905.663 143.866C903.388 143.866 902.688 142.31 902.242 141.119L869.129 44.3508H848.729L887.078 159.682H900.635C901.526 159.682 902.194 159.761 902.64 159.904C903.086 160.047 903.451 160.412 903.754 161.016C904.343 161.905 904.263 163.239 903.531 165.001L897.309 181.849C896.418 184.072 894.716 185.184 892.201 185.184C891.31 185.184 889.242 184.993 885.98 184.628C882.718 184.263 878.501 184.072 873.314 184.072H857.083V201.809H878.421C890.865 201.809 898.359 199.698 904.804 195.49C911.248 191.281 916.245 183.85 919.809 173.195L961.229 48.7652V44.3349H942.198V44.3508ZM677.418 87.3835L646.086 44.3508H624.08V48.7811L661.633 98.6896L615.853 155.251V159.682H638.305L674.76 113.33L708.765 159.682H730.326V155.251L690.545 102.024L733.667 49.0193V44.3666H711.215L677.433 87.3994L677.418 87.3835ZM744.886 159.682H764.887V44.3666H744.886V159.698V159.682ZM616.76 123.08C613.943 133.878 608.199 143.231 599.543 151.139C590.871 159.047 578.459 163.001 562.308 163.001C550.151 163.001 539.458 160.523 530.197 155.569C520.936 150.615 513.792 143.564 508.747 134.386C503.703 125.224 501.189 114.426 501.189 102.008C501.189 89.5908 503.64 78.7929 508.525 69.6305C513.41 60.4682 520.268 53.4019 529.083 48.4476C537.899 43.4933 548.226 41.0161 560.08 41.0161C571.935 41.0161 581.753 43.4615 589.98 48.3365C598.206 53.2114 604.348 59.6901 608.422 67.7409C612.495 75.8076 614.532 84.6364 614.532 94.2434V107.55H522.305C523.037 119.079 526.935 128.257 533.968 135.053C541.002 141.849 550.453 145.263 562.308 145.263C571.935 145.263 579.318 143.31 584.426 139.388C589.534 135.466 593.273 130.035 595.644 123.08H616.76ZM522.527 90.9246H592.319C592.319 80.873 589.725 72.9969 584.538 67.2963C579.35 61.6115 571.203 58.7532 560.096 58.7532C549.721 58.7532 541.24 61.5321 534.653 67.074C528.065 72.6158 524.023 80.5713 522.543 90.9087L522.527 90.9246Z",className:t})})})});gxe.displayName="Word";const bat={tiny:"w-4 md:w-6",small:"",md:"w-10","md-large":"w-20",large:"w-24",xl:"w-36"},_at="w-6 md:w-8",$a=I.memo(({size:e="large",includeEffects:t=!1,isPro:n=!1,isMax:r=!1,isEnterprise:s=!1,variant:a="full",color:i="foreground",...l})=>{let c="w-28 md:w-[140px]";e==="tiny"?c="w-14 md:w-16":e==="small"?c="w-24":e==="large"?c="w-40 md:w-52":e==="xl"&&(c=s?"w-72":"w-64");const u=bat?.[e]||_at;let f="w-6";e==="large"?f="w-12":e==="md-large"?f="w-8":e==="xl"&&(f="w-36");const m=B("",{"stroke-foreground":i==="foreground","stroke-quiet":i==="quiet","stroke-super":i==="super"||i==="mixed","stroke-caution":i==="caution","stroke-light":i==="white","stroke-inverse":i==="background","group-hover:stroke-super transition-colors duration-300":t}),p=B(" block",{"fill-foreground":i==="foreground"||i==="mixed","fill-quiet":i==="quiet","fill-super":i==="super","fill-caution":i==="caution","fill-light":i==="white","fill-inverse":i==="background","group-hover:fill-super transition-colors duration-300":t});return a==="pro"?o.jsx(h3,{width:f,fillColor:p,...l}):a==="mark"?o.jsx("div",{className:B({"transition-all duration-300 ease-in-out hover:scale-105":t}),children:o.jsx(hxe,{lineColor:m,width:u,...l})}):a==="text"?o.jsx(gxe,{fillColor:p,width:c,isPro:n,isMax:r,isEnterprise:s,...l}):a==="full"?o.jsx(mxe,{fillColor:p,lineColor:m,width:c,...l}):a==="labs"?o.jsx(pxe,{width:c,fillColor:p,...l}):null});$a.displayName="Logo";const y8=()=>Ys.getItem("signUpBannerDismissed")!=="true",wat=()=>Ys.setItem("signUpBannerDismissed","true"),Cat=()=>Ys.setItem("signUpBannerDismissed","reset"),yxe=I.memo(({portalTarget:e})=>{const{$t:t}=Z(),[n,r]=d.useState(!1),s=Lt(),{trackEvent:a}=Te(),{keysRequiringRerender:i,removeKeyRequiringRerender:l,addKeyRequiringRerender:c}=df(),u=dye(),[f,m]=d.useState(""),p=d.useCallback(()=>{m(a3(window.location.href,Ou,Le.FLOATING_SIGNUP))},[]);if(d.useEffect(()=>{p()},[p]),d.useEffect(()=>{r(y8())},[]),d.useEffect(()=>{i.includes("floating-signup")&&(r(y8()),p()),l("floating-signup")},[l,i]),d.useEffect(()=>{n&&a("floating sign up shown",{})},[n,a]),TF(s)&&!u||!n)return null;const h=()=>{r(!1),wat(),a("floating sign up dismissed",{}),c("sidebar-sign-in-button")};return o.jsx(ff,{portalTarget:e??void 0,children:o.jsx("div",{className:"bottom-md right-md fixed hidden w-[300px] md:block",children:o.jsx(z,{variant:"background",className:B("px-md py-lg animate-in fade-in ring-subtle rounded-xl shadow-md ring-1 duration-300 ease-out"),children:o.jsxs("div",{children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Me,{pill:!0,size:"small",icon:kt,onClick:h,testId:"floating-signup-close-button"})}),o.jsx("div",{className:"pb-md flex justify-center",children:o.jsx($a,{variant:"mark",color:"super",size:"small"})}),o.jsx(F,{variant:"baseSemi",className:"mb-xs text-center",children:t({defaultMessage:"Sign in or create an account",id:"eN8MTJfuKA"})}),o.jsx(F,{variant:"small",color:"light",className:"text-center",children:t({defaultMessage:"Unlock {proSearch} and History",id:"azC54WXvtr"},{proSearch:"Pro Search"})}),o.jsx("div",{className:"mt-md",children:o.jsx($1,{onClose:h,redirectUrl:f,showCloseButton:!1,autoFocus:!1,loginButtonsStyle:"highlightPrimary"})})]})})})})});yxe.displayName="FloatingSignUp";const Sat=async({reason:e})=>{try{const{data:t,error:n}=await re.POST("/rest/incentives/comet-activation",e,{timeoutMs:Pe()});if(n)throw n;return t}catch(t){return ne.error("Failed to handle comet activation incentive",t),null}},Eat=async({eventName:e,isDeferred:t,clickId:n,nextauthUserId:r,reason:s})=>{try{const{data:a,error:i}=await re.POST("/rest/attribution/dub/lead",s,{timeoutMs:Pe(),body:{event_name:e,is_deferred:t,click_id:n,nextauth_user_id:r}});if(i)throw i;return{success:a?.success??!1}}catch(a){return ne.error("Failed to save post install redirect",a),{success:!1}}},Mat=2,kat=10,Tat=({response:e,isUserLoggedIn:t,submissionCount:n,session:r,queryCountMobile:s,isWindowsApp:a,addKeyRequiringRerender:i,setSubmissionCount:l,trackEvent:c,setShouldShowProductFeedback:u,setFeedbackEntryUUID:f,setShouldShowRecruitmentBanner:m,sendQueryEventSingular:p,maybeSendNthQueryEventSingular:h,recruitmentBannerEnabled:g,reason:y})=>{const x=dn();if(x&&L9e(t),e?.backend_uuid){const b=e.backend_uuid;xZe({entryUUID:e.backend_uuid,params:{query:e.query_str||"",sources:e.sources?.sources??[]},reason:y}).then(_=>{u(_),_&&c("query feedback shown",{entry_uuid:b})}),g&&SZe({entryUUID:b,reason:y}).then(_=>{m(_),_&&c("power user recruitment banner shown",{})}),f(b)}!t&&n===Mat-1&&(Cat(),i("floating-signup")),t&&r?.user?.id&&s===0&&n===kat-1&&i("floating-mobile-download"),a?i("floating-milestone-refetch-legacy"):t&&i("floating-milestone-refetch"),l(n+1),p(),h({isCometBrowser:x});const v=Ole();x&&v===1?(Eat({eventName:"activated",isDeferred:!1,clickId:null,nextauthUserId:r?.user?.id??null,reason:"comet attribution"}),Sat({reason:"comet activation incentive"}),c("first comet query finished",{})):x&&v===3&&c("third comet query finished",{})},AC={startTime:-1,timer:ql()},eh={startTime:-1,modules:new Set},dx=Dt("PerformanceContext",{markTTV:()=>{},addPageTiming:()=>{},getPageStartTime:()=>0,getPageTimer:()=>ql(),addPageTimingOnce:()=>{}});function Nat({children:e}){const{startTimeFromTimeOriginRef:t}=vt(),{markTTV:n}=O9e(),r=d.useCallback(()=>(AC.startTime!==t.current&&(AC.startTime=t.current,AC.timer=ql(void 0,{nowFromTimeOrigin:t.current})),AC.timer),[t]),s=d.useMemo(()=>({markTTV:()=>n(t.current),addPageTiming:(a,i={})=>r().addTiming(a,i),addPageTimingOnce:(a,i={})=>r().addTimingOnce(a,i),getPageStartTime:()=>t.current,getPageTimer:r}),[n,t,r]);return o.jsx(dx.Provider,{value:s,children:e})}function jat(){const{markTTV:e}=d.useContext(dx);return e}function Aat(){const{addPageTiming:e}=d.useContext(dx);return e}function xxe(){const{getPageStartTime:e}=d.useContext(dx);return e}function Iat(){const{getPageTimer:e}=d.useContext(dx);return e}const vxe=Dt("PagePerformanceContext",{markTTV:()=>{}});function IC({children:e,modules:t}){const{markTTV:n,addPageTimingOnce:r,getPageStartTime:s}=d.useContext(dx),a=s(),i=d.useCallback(c=>{t.includes(c)&&(eh.startTime!==a&&(eh.startTime=a,eh.modules=new Set),!eh.modules.has(c)&&(r(`web.ttv.${c}`),eh.modules.add(c),t.every(u=>eh.modules.has(u))&&n()))},[r,a,t,n]),l=d.useMemo(()=>({markTTV:i}),[i]);return o.jsx(vxe.Provider,{value:l,children:e})}function Rat(){const{markTTV:e}=d.useContext(vxe);return e}function hon(e={}){const t=jat();d.useEffect(()=>{e.skip||t()},[e.skip,t])}function yp(e,t={}){const n=Rat();d.useEffect(()=>{t.skip||n(e)},[n,e,t.skip])}const Pat=({inPage:e})=>e?window.getSelection()?.toString():void 0;function Lat(){const{value:e}=rQe({flag:"client-context-max-chars",subjectType:"visitor_id",defaultValue:5e4});return e}const Oat=(e,t,n)=>{const{value:r,loading:s}=Qpe({flag:"max-file-upload-count",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])};function zU(){const{variation:e}=Oat(10);return e}const Dat=({isFollowup:e,isInSameThread:t,sourcesOverride:n,firstResultSources:r,firstResultRecency:s,defaultSources:a,defaultRecency:i})=>n?{finalSources:n,finalRecency:i}:!e||!t?{finalSources:a,finalRecency:i}:{finalSources:Array.isArray(r)?r:[],finalRecency:s};var T6,oZ;function Fat(){if(oZ)return T6;oZ=1;var e="Expected a function",t=NaN,n="[object Symbol]",r=/^\s+|\s+$/g,s=/^[-+]0x[0-9a-f]+$/i,a=/^0b[01]+$/i,i=/^0o[0-7]+$/i,l=parseInt,c=typeof bi=="object"&&bi&&bi.Object===Object&&bi,u=typeof self=="object"&&self&&self.Object===Object&&self,f=c||u||Function("return this")(),m=Object.prototype,p=m.toString,h=Math.max,g=Math.min,y=function(){return f.Date.now()};function x(C,S,E){var k,M,j,R,O,D,P=0,A=!1,T=!1,N=!0;if(typeof C!="function")throw new TypeError(e);S=w(S)||0,v(E)&&(A=!!E.leading,T="maxWait"in E,j=T?h(w(E.maxWait)||0,S):j,N="trailing"in E?!!E.trailing:N);function L(G){var ee=k,Y=M;return k=M=void 0,P=G,R=C.apply(Y,ee),R}function U(G){return P=G,O=setTimeout(W,S),A?L(G):R}function $(G){var ee=G-D,Y=G-P,te=S-ee;return T?g(te,j-Y):te}function V(G){var ee=G-D,Y=G-P;return D===void 0||ee>=S||ee<0||T&&Y>=j}function W(){var G=y();if(V(G))return Q(G);O=setTimeout(W,$(G))}function Q(G){return O=void 0,N&&k?L(G):(k=M=void 0,R)}function q(){O!==void 0&&clearTimeout(O),P=0,k=D=M=O=void 0}function H(){return O===void 0?R:Q(y())}function K(){var G=y(),ee=V(G);if(k=arguments,M=this,D=G,ee){if(O===void 0)return U(D);if(T)return O=setTimeout(W,S),L(D)}return O===void 0&&(O=setTimeout(W,S)),R}return K.cancel=q,K.flush=H,K}function v(C){var S=typeof C;return!!C&&(S=="object"||S=="function")}function b(C){return!!C&&typeof C=="object"}function _(C){return typeof C=="symbol"||b(C)&&p.call(C)==n}function w(C){if(typeof C=="number")return C;if(_(C))return t;if(v(C)){var S=typeof C.valueOf=="function"?C.valueOf():C;C=v(S)?S+"":S}if(typeof C!="string")return C===0?C:+C;C=C.replace(r,"");var E=a.test(C);return E||i.test(C)?l(C.slice(2),E?2:8):s.test(C)?t:+C}return T6=x,T6}var Uat=Fat();const iZ=Qo(Uat);var GU=typeof window<"u"?d.useLayoutEffect:d.useEffect;function V1(e,t,n,r){const s=d.useRef(t);GU(()=>{s.current=t},[t]),d.useEffect(()=>{const a=window;if(!(a&&a.addEventListener))return;const i=l=>{s.current(l)};return a.addEventListener(e,i,r),()=>{a.removeEventListener(e,i,r)}},[e,n,r])}function BE(e){const t=d.useRef(()=>{throw new Error("Cannot call an event handler while rendering.")});return GU(()=>{t.current=e},[e]),d.useCallback((...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[t])}var N6=typeof window>"u";function xp(e,t,n={}){const{initializeWithValue:r=!0}=n,s=d.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=d.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),i=d.useCallback(()=>{const p=t instanceof Function?t():t;if(N6)return p;try{const h=window.localStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading localStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=d.useState(()=>r?i():t instanceof Function?t():t),u=BE(p=>{N6&&console.warn(`Tried setting localStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(i()):p;window.localStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))}catch(h){console.warn(`Error setting localStorage key ${e}:`,h)}}),f=BE(()=>{N6&&console.warn(`Tried removing localStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.localStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("local-storage",{key:e}))});d.useEffect(()=>{c(i())},[e]);const m=d.useCallback(p=>{p.key&&p.key!==e||c(i())},[e,i]);return V1("storage",m),V1("local-storage",m),[l,u,f]}function vp(e){const t=d.useRef(e);t.current=e,d.useEffect(()=>()=>{t.current()},[])}function Bat(e,t=500,n){const r=d.useRef();vp(()=>{r.current&&r.current.cancel()});const s=d.useMemo(()=>{const a=iZ(e,t,n),i=(...l)=>a(...l);return i.cancel=()=>{a.cancel()},i.isPending=()=>!!r.current,i.flush=()=>a.flush(),i},[e,t,n]);return d.useEffect(()=>{r.current=iZ(e,t,n)},[e,t,n]),s}function bxe({threshold:e=0,root:t=null,rootMargin:n="0%",freezeOnceVisible:r=!1,initialIsIntersecting:s=!1,onChange:a}={}){var i;const[l,c]=d.useState(null),[u,f]=d.useState(()=>({isIntersecting:s,entry:void 0})),m=d.useRef();m.current=a;const p=((i=u.entry)==null?void 0:i.isIntersecting)&&r;d.useEffect(()=>{if(!l||!("IntersectionObserver"in window)||p)return;const y=new IntersectionObserver(x=>{const v=Array.isArray(y.thresholds)?y.thresholds:[y.thresholds];x.forEach(b=>{const _=b.isIntersecting&&v.some(w=>b.intersectionRatio>=w);f({isIntersecting:_,entry:b}),m.current&&m.current(_,b)})},{threshold:e,root:t,rootMargin:n});return y.observe(l),()=>{y.disconnect()}},[l,JSON.stringify(e),t,n,p,r]);const h=d.useRef(null);d.useEffect(()=>{var y;!l&&((y=u.entry)!=null&&y.target)&&!r&&!p&&h.current!==u.entry.target&&(h.current=u.entry.target,f({isIntersecting:s,entry:void 0}))},[l,u.entry,r,p,s]);const g=[c,!!u.isIntersecting,u.entry];return g.ref=g[0],g.isIntersecting=g[1],g.entry=g[2],g}function _xe(){const[e,t]=d.useState(!1);return d.useEffect(()=>{t(!0)},[]),e}function $at(){const e=d.useRef(!1);return d.useEffect(()=>(e.current=!0,()=>{e.current=!1}),[]),d.useCallback(()=>e.current,[])}var lZ={width:void 0,height:void 0};function Vat(e){const{ref:t,box:n="content-box"}=e,[{width:r,height:s},a]=d.useState(lZ),i=$at(),l=d.useRef({...lZ}),c=d.useRef(void 0);return c.current=e.onResize,d.useEffect(()=>{if(!t.current||typeof window>"u"||!("ResizeObserver"in window))return;const u=new ResizeObserver(([f])=>{const m=n==="border-box"?"borderBoxSize":n==="device-pixel-content-box"?"devicePixelContentBoxSize":"contentBoxSize",p=cZ(f,m,"inlineSize"),h=cZ(f,m,"blockSize");if(l.current.width!==p||l.current.height!==h){const y={width:p,height:h};l.current.width=p,l.current.height=h,c.current?c.current(y):i()&&a(y)}});return u.observe(t.current,{box:n}),()=>{u.disconnect()}},[n,t,i]),{width:r,height:s}}function cZ(e,t,n){return e[t]?Array.isArray(e[t])?e[t][0][n]:e[t][n]:t==="contentBoxSize"?e.contentRect[n==="inlineSize"?"width":"height"]:void 0}var j6=typeof window>"u";function qU(e,t,n={}){const{initializeWithValue:r=!0}=n,s=d.useCallback(p=>n.serializer?n.serializer(p):JSON.stringify(p),[n]),a=d.useCallback(p=>{if(n.deserializer)return n.deserializer(p);if(p==="undefined")return;const h=t instanceof Function?t():t;let g;try{g=JSON.parse(p)}catch(y){return console.error("Error parsing JSON:",y),h}return g},[n,t]),i=d.useCallback(()=>{const p=t instanceof Function?t():t;if(j6)return p;try{const h=window.sessionStorage.getItem(e);return h?a(h):p}catch(h){return console.warn(`Error reading sessionStorage key ${e}:`,h),p}},[t,e,a]),[l,c]=d.useState(()=>r?i():t instanceof Function?t():t),u=BE(p=>{j6&&console.warn(`Tried setting sessionStorage key ${e} even though environment is not a client`);try{const h=p instanceof Function?p(i()):p;window.sessionStorage.setItem(e,s(h)),c(h),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))}catch(h){console.warn(`Error setting sessionStorage key ${e}:`,h)}}),f=BE(()=>{j6&&console.warn(`Tried removing sessionStorage key ${e} even though environment is not a client`);const p=t instanceof Function?t():t;window.sessionStorage.removeItem(e),c(p),window.dispatchEvent(new StorageEvent("session-storage",{key:e}))});d.useEffect(()=>{c(i())},[e]);const m=d.useCallback(p=>{p.key&&p.key!==e||c(i())},[e,i]);return V1("storage",m),V1("session-storage",m),[l,u,f]}var Wat=typeof window>"u";function Hat(e={}){let{initializeWithValue:t=!0}=e;Wat&&(t=!1);const[n,r]=d.useState(()=>t?{width:window.innerWidth,height:window.innerHeight}:{width:void 0,height:void 0}),s=Bat(r,e.debounceDelay);function a(){(e.debounceDelay?s:r)({width:window.innerWidth,height:window.innerHeight})}return V1("resize",a),GU(()=>{a()},[]),n}const fx=()=>{const[e,t]=xp("deviceLocation",void 0),n=d.useCallback(a=>{t(a),a?(sn("lat",a.latitude.toString()),sn("long",a.longitude.toString())):(jm("lat"),jm("long"))},[t]),[r,s]=d.useState(void 0);return d.useEffect(()=>{if(!navigator.geolocation||!("permissions"in navigator))return;const a=()=>{navigator.geolocation.getCurrentPosition(i=>{n({latitude:i.coords.latitude,longitude:i.coords.longitude})},null,{enableHighAccuracy:!0,timeout:1e4,maximumAge:0})};navigator.permissions.query({name:"geolocation"}).then(i=>{s(i.state),i.state==="granted"?a():n(void 0),i.addEventListener("change",()=>{s(i.state),i.state==="denied"?n(void 0):i.state==="granted"&&a()})}).catch(()=>{})},[n]),d.useMemo(()=>({location:e,permissionStatus:r,isPreciseLocationEnabled:r==="granted"&&!isNaN(e?.latitude??0)&&!isNaN(e?.longitude??0)}),[e,r])},R0=/<q>(.*?)<\/q>/s,uZ=(e,t)=>{if(!e||!t)return e;const n=e.trim(),r=n[n.length-1];return r&&!["!","?",".",":",";"].includes(r)?`${n}. ${t}`:`${n} ${t}`};function qd(e,t){if(!e)return{quote:null,actualQuery:null};if(!R0.test(e)){const l=t?.join(" ").trim();return{quote:null,actualQuery:l?uZ(e,l):e}}const s=e.match(R0)?.[1]||null;let a=e.replace(R0,"").trim();const i=t?.join(" ").trim();return i&&(a=uZ(a,i)),{quote:s,actualQuery:a}}function zat(e,t){const n=t.trim();return n?R0.test(e)?e.replace(R0,`<q>${n}</q>`):e.length===0?n:`<q>${n}</q> ${e}`:e}class KU extends Ob{name="PplxStreamError"}var A6={};const Gat={submitQuery:()=>{ne.error("submitQuery must be used within PerplexityQueryStateProvider")},handleBotStep:()=>{ne.error("handleBotStep must be used within PerplexityQueryStateProvider")},deleteLastResult:()=>{ne.error("deleteLastResult must be used within PerplexityQueryStateProvider")},shouldShowProductFeedback:!1,shouldShowRecruitmentBanner:!1,feedbackEntryUUID:null,quote:null,setQuote:()=>{},updateLocalStatePostStream:()=>{}},qat=3,Kat=6,Yat=2,wxe=Dt("PplxQueryStateContext",Gat),Qat=(e,t,n,r,s)=>{if(!(n&&!r)&&!(e&&!t))return r?r.backend_uuid:s},Xat=({children:e,shouldFetchSettings:t})=>{const n="perplexity-query-state-provider",r=vt(),{trackEvent:s}=Te(),{session:a}=mt(),i=Nn(),{location:l}=fx(),[c,u]=d.useState(null),{device:{isWindowsApp:f,isMobile:m,isSamsungBrowser:p}}=Pt(),h=qa(),g=Iat(),{isMaxAssistantMode:y}=In(),{sources:x,recency:v,isCopilot:b,setAskInputReasoningMode:_,setAskInputReasoningModelPreference:w,configuredModel:C}=ir(),{specialCapabilities:S}=ts(),E=ji(),{firstResult:k,lastResult:M,actions:{setCurrentStreamId:j}}=Ft(),{hasAiProfile:R,queryCountMobile:O}=wo({enabled:t,reason:n}),[D,P]=d.useState(!1),[A,T]=d.useState(!1),[N,L]=d.useState(null),U=et(),{addKeyRequiringRerender:$}=df(),{value:V}=jt({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),W=Lat(),{isIncognito:Q}=Ga({reason:n}),[q,H]=d.useState(0),{sendQueryEventSingular:K,maybeSendNthQueryEventSingular:G,sendResurrectedActivationEventSingular:ee}=bU(),Y=Hr(),{cometMcpDisabledServers:te}=C_(),se=Cet(),{value:ae}=Qs({flag:"power-user-recruitment-banner",defaultValue:!1}),{isMaxUpsellEnabled:pe}=Uu(),{isMax:fe}=St(),{value:{max_results:ge,num_days:Se}}=Xpe({flag:"browser-history-summary-settings",defaultValue:{max_results:500,num_days:7}}),je=zU(),ye=iye(),be=d.useCallback(({rawQuery:Ce,dslQuery:Ge,fork:tt,inPageOverride:gt,copilotOverride:Ee,existingEntryUUID:Re,existingUuid:Vt,deletedUrls:pt,redoSearch:Nt,attachments:Ke,collection:He,modelPreferenceOverride:Tt,isRelatedQuery:We,isSponsored:_t,relatedQueryUUID:Kt,inDomain:en,inPage:Rt,newFrontendContextUUID:Ut,existingFrontendContextUUID:Rn,promptSource:rn,querySource:at,sourcesOverride:yt,submitFromArticleOverride:wt,timeFromFirstType:Mt,utmSource:bt,disableWidgets:_e,isNavSuggestionsDisabled:ze,deviceLocation:Oe,shouldRedirectToBackendUUID:nt,onThreadSlugReceived:Xe,incognitoOverride:It,mentions:_n=[],shouldUsePageStartTime:zn,side_by_side_metadata:Mn,frontendUUID:Cr=crypto.randomUUID(),alwaysSearchOverride:Xa,overrideNoSearch:ri,resumingQuery:Yu,resumeFromUuid:Bp,resumeFromPlaceholder:Qu,cometIsMissionControl:$p,maxAssistantEnabled:Mf,refinementFiltersMetadata:kf})=>{if(Ce.trim().length===0&&!c){ne.error("Submit failed: empty query");return}const Za=_n.filter(fr=>fr.type==="tab").map(fr=>({id:Number(fr.id),url:fr.url}));if(!U&&!p&&!S.unlimitedProSearch){const fr=q+1;m&&!Mg()?fr%Yat===1&&$("visitor-gate"):fr%Kat===0?$("visitor-gate-ii"):fr%qat===0&&$("visitor-gate")}const Xu=!!Ut,si=[...new Set([...Ke??[]])].slice(0,je).filter(fr=>!pt?.includes(fr)),ht=dn()&&(!!A6.NEXT_PUBLIC_IS_SIDECAR_BUILD||!!Za?.length),Ur=ht?bo():void 0,_l=(Ee??b)||!!A6.NEXT_PUBLIC_IS_SIDECAR_BUILD||S.unlimitedProSearch,Zu=_l?"copilot":"concise";let Fs=C??le.DEFAULT;Fs===le.DEFAULT&&S.unlimitedProSearch&&(Fs=le.PRO),(h===ue.RESEARCH||h===ue.STUDIO||h===ue.STUDY)&&(Fs=h===ue.RESEARCH?le.ALPHA:h===ue.STUDIO?le.BETA:le.STUDY,pe&&fe&&(Fs=C));const Pc=Yhe.some(fr=>fr.is_reasoning_model&&fr.search_model===Fs);Tt?Fs=Tt:(_(Pc),Pc||w(null));const Vp=Qat(Xu,tt??!1,k?.backend_uuid===Re,wt??null,M?.backend_uuid??null);D9e(),F9e(()=>{s("resurrected activated"),ee()}),Dr(Fs)===ue.RESEARCH?U9e():Dr(Fs)===ue.STUDIO&&B9e();const Lc=!!Vp,Tf=k?.frontend_context_uuid===Rn,tv=Dat({isFollowup:Lc,isInSameThread:Tf,sourcesOverride:yt,firstResultSources:k?.sources?.sources,firstResultRecency:k?.search_recency_filter,defaultSources:x??[],defaultRecency:v??null}),{finalRecency:Wp,finalSources:Yw}=tv;let Qw;Y.mcpTools&&(Qw=Object.entries(Y.mcpTools).filter(([fr])=>!te?.has(fr)).flatMap(([fr,Jw])=>{const Dc=Y.mcpToolsSettings?.[fr]??{};return Jw.filter(Nf=>{const eC=Nf.tool?.name??Nf.id??"",sv=Dc[eC];return sv?sv.enabled!==!1:!0})}));const nv=Pat({inPage:gt??Rt})||c,Hp=(nv?zat(Ce,nv):Ce).trim();if(!Hp){ne.error("Submit failed: empty query");return}const rN=Re==k?.backend_uuid||!Vp,Oc=KJe({rawQuery:Hp,fork:tt,existingEntryUUID:Re,existingUuid:Vt,collection:He,isRelatedQuery:We,newFrontendContextUUID:Ut,existingFrontendContextUUID:Rn,submitFromArticleOverride:wt,isNavSuggestionsDisabled:ze,isCopilot:_l,modelPreferenceSubmit:Fs,newAttachments:si,firstResultFrontendContextUUID:k?.frontend_context_uuid,isPersonalized:R,forceNew:Xu,querySource:at,lastResultBackendUUID:M?.backend_uuid,finalSources:Yw,finalRecency:Wp??void 0,uuid:Cr,threadMetadataTitle:k?.thread_title,threadMetadataThreadUrlSlug:k?.thread_url_slug,side_by_side_metadata:Mn}),zp=vnt({redoSearch:Nt,collection:He,dslQuery:Ge,isRelatedQuery:We,isSponsored:_t,relatedQueryUUID:Kt,inDomain:en,inPage:Rt,newFrontendContextUUID:Ut,promptSource:rn,querySource:at,timeFromFirstType:Mt,utmSource:bt,disableWidgets:_e,isNavSuggestionsDisabled:ze,isWindowsApp:f,isIncognito:It??Q,sessionId:a?.user?.id,modelPreferenceSubmit:Fs,clientPayloadUUID:Ur,lastBackendUUID:Vp,deviceLocation:Oe=Oe??l,newAttachments:si,threadMetadataRwToken:E,forceNew:Xu,finalSources:Yw,finalRecency:Wp,mode:Zu,frontendUUID:Cr,entropyBrowser:i,existingEntryUUID:Re,deletedUrls:pt,browserHistorySummaryNumDays:Se,mentions:_n,side_by_side_metadata:Mn,reason:n,skipSearchEnabled:V,browserHistorySummaryMaxResults:ge,sidecarTabId:Y.sidecarSourceTab.tabId,sidecarTitle:Y.sidecarSourceTab.title,sidecarUrl:Y.sidecarSourceTab.url,sidecarSecondaryTabId:Y.sidecarSourceTab.secondaryTab?.tabId,sidecarSecondaryUrl:Y.sidecarSourceTab.secondaryTab?.url,sidecarSecondaryTitle:Y.sidecarSourceTab.secondaryTab?.title,isFirstEntry:rN,alwaysSearchOverride:Xa,overrideNoSearch:ri,cometMaxAssistantEnabled:Mf||y,resumingQuery:Yu,resumeFromUuid:Bp,cometIsMissionControl:$p,mcpTools:Qw,refinementFiltersMetadata:kf});Ut&&ye(Hp,zp,zp.frontend_uuid),u(null);const Xw={params:{...zp,version:pl},query_str:Hp};function Zw(fr){if(Xe){if(cn.isStatusFailed(fr))throw new KU("STREAM_FAILED_CHUNK_ERROR",{message:"failed status on first message"});if(!fr.thread_url_slug)throw new Error("thread_url_slug is required on first message");Xe(fr.thread_url_slug)}nt&&r.push(`/search/${fr.thread_url_slug}`)}const rv=se(Xw,{onFirstMessageReceived:Zw,placeholderChunk:Qu||{...Oc,backend_uuid:Re||mge},timer:zn?g():ql(void 0,{nowFromTimeOrigin:performance.now()}),reason:n});ht&&Ur&&Vpe({clientPayloadCacheKey:Ur,cometBrowser:i,maxChars:W,attachedTabs:Za,includeSidecar:!!A6.NEXT_PUBLIC_IS_SIDECAR_BUILD,reason:n,cometState:Y,requestId:rv.id.description}),j(rv.id.description)},[c,U,je,b,C,h,M?.backend_uuid,k?.frontend_context_uuid,k?.sources?.sources,k?.search_recency_filter,k?.thread_title,k?.thread_url_slug,k?.backend_uuid,x,v,R,f,Q,a?.user,l,E,i,Se,V,ge,Y,se,g,j,q,m,p,$,pe,fe,_,w,s,ee,ye,W,r,y,S,te]),Ne=d.useCallback(Ce=>{Tat({response:Ce,isUserLoggedIn:U,submissionCount:q,session:a??void 0,queryCountMobile:O,isWindowsApp:f,addKeyRequiringRerender:$,setSubmissionCount:H,setShouldShowProductFeedback:P,setShouldShowRecruitmentBanner:T,setFeedbackEntryUUID:L,trackEvent:s,sendQueryEventSingular:K,maybeSendNthQueryEventSingular:G,recruitmentBannerEnabled:ae,reason:n})},[$,U,f,O,K,G,a,q,s,ae]),ke=n3(),Ie=d.useCallback(async()=>{const Ce=M?.backend_uuid;!Ce||!E||(s("delete last result",{entryUUID:Ce}),await re.DELETE("/rest/entry/delete-ask-entry/{entry_uuid}",n,{params:{path:{entry_uuid:Ce}},body:{read_write_token:E}}),ke(Ge=>{if(!Ge)return;const tt=Ge??[];if(tt.length<1){r.push("/",void 0,"Delete last result");return}return tt.slice(0,-1)}))},[M?.backend_uuid,E,s,ke,r]);return o.jsx(wxe.Provider,{value:{submitQuery:be,deleteLastResult:Ie,shouldShowProductFeedback:D,feedbackEntryUUID:N,quote:c,setQuote:u,shouldShowRecruitmentBanner:A,updateLocalStatePostStream:Ne},children:e})},Sa=()=>{const e=d.useContext(wxe);if(!e)throw new Error("usePerplexityQueryState must be used within PerplexityQueryStateContext");return e},Zat="/account/connectors",dZ={GCAL_CONNECT:"gcal_connect",CONNECTOR_COMPLETE:"connector_complete"},Jat={UPSELL_CONNECTOR:"upsell-connector-channel"},gon="18334363285",g3=async(e,t)=>{try{const{error:n}=await re.POST("/rest/homepage-widgets/upsell/interacted","homepage upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Pe(),numRetries:1});n&&ne.error("Failed to mark upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ne.error("Error marking upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},eot=async(e,t)=>{try{const{error:n}=await re.POST("/rest/ntp/upsell/interacted","comet ntp upsell interaction tracking",{body:{upsell_name:e,upsell_instance_identifier:t||null},timeoutMs:Pe(),numRetries:1});n&&ne.error("Failed to mark NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}catch(n){ne.error("Error marking NTP upsell as interacted",{upsellName:e,upsellInstanceIdentifier:t,error:n})}},tot=(e,t)=>e.filter(n=>n.name===t).map(n=>n.connection_uuid).filter(n=>n!=null),not=e=>e==="LINEAR"||e==="NOTION_MCP"||e==="LINEAR_ALT"||e==="SLACK"||e==="GITHUB_MCP_DIRECT"||e==="ASANA_MCP_DIRECT"||e==="ASANA_MCP_MERGE"||e==="ATLASSIAN_MCP_DIRECT"||e==="SLACK_DIRECT"||e==="JIRA_MCP_MERGE"||e==="CONFLUENCE_MCP_MERGE"||e==="MICROSOFT_TEAMS_MCP_MERGE",yon=e=>!FP.includes(e);var wv={};const rot={logged_out_image_generation:Le.IMAGE_GENERATION_IN_THREAD,logged_out_video_generation:Le.VIDEO_GENERATION_IN_THREAD,subscription_upgrade_video_generation:Le.VIDEO_GENERATION_IN_THREAD,missing_out_on_pro:Le.MISSING_OUT_ON_PRO_IN_THREAD,auto_upgrade_to_pro:Le.AUTO_UPGRADE_TO_PRO,pro_feature_limit_queries:Le.PRO_FEATURE_LIMIT_BANNER,pro_feature_limit_files:Le.PRO_FEATURE_LIMIT_BANNER,login_for_comet_agent_queries:Le.LOGIN_FOR_COMET_AGENT_QUERIES_IN_THREAD,comet_agent_queries_rate_limited:Le.COMET_AGENT_QUERIES_RATE_LIMITED_IN_THREAD,pro_upgrade:Le.PRO_UPGRADE_IN_SIDE_HOMEPAGE,max_feature_limit_labs_queries:Le.PRO_FEATURE_LIMIT_BANNER,enterprise_max_side:Le.ENTERPRISE_MAX_UPSELL,logged_out_canvas_generation:Le.CANVAS_GENERATION_IN_THREAD,max_feature_canvas_generation:Le.CANVAS_GENERATION_IN_THREAD},k_=(e,t,n)=>{const r=et(),{openVisitorLoginUpsell:s}=or({enabled:!r}),{trackEvent:a}=Te(),{lastResult:i}=Ft(),{openModal:l}=xt(),c=dn(),u="?handle_upsell=true",{submitQuery:f}=Sa(),m=Nn(),{handleVerificationSuccess:p}=PQe({origin:Le.STUDENT_VERIFICATION_UPSELL}),h=wv.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":c?"search_results_page":void 0,{subscriptionTier:g}=St(),{device:{isWindowsOS:y,isMacOS:x}}=Pt(),v=vt(),{handleConnect:b}=e3({reason:"upsell"}),{mutateAsync:_}=CJe({reason:"upsell"}),w=vU(),{handleCreateNewSpaceForThread:C}=xU(),{connectors:S}=wo({reason:"upsell"}),{handleDownloadClick:E}=Dge({isWindows:y,isUnsupportedDevice:!x&&!y}),k=Jo(),M=e?.cta_information?.merge_auth_token,j=e?.cta_information?.merge_auth_callback_uuid,O=Fge({linkToken:(L=>{if(L)try{return JSON.parse(L)}catch{return L}})(M),onSuccess:()=>{j&&Zhe({uuid:j,success:!0,reason:"Account successfully connected"}),v.push(window.location.pathname+u)}}),D=d.useCallback(async()=>{try{await m.setCometAsDefaultBrowser("set_default_browser")}catch{}},[m]);d.useEffect(()=>{if(!wv.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const L=new BroadcastChannel(Jat.UPSELL_CONNECTOR);return L.onmessage=U=>{U.data.type===dZ.CONNECTOR_COMPLETE&&(window.focus(),window.location.href=window.location.pathname+u)},()=>{L.close()}},[u]);const P=d.useCallback(()=>{if(e)switch(e.app_location){case Zc.MODAL:a("upsell modal opened",{entryUUID:i?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case Zc.IN_THREAD:case Zc.IN_THREAD_BOTTOM:case Zc.IN_THREAD_INPUT:a("thread upsell banner clicked",{entryUUID:i?.backend_uuid,upsellType:e.upsell_type,upsellName:e.name,cometSurface:h,subscriptionTier:g});break;case Zc.SIDEBAR:case Zc.SIDE_CARD:a("side upsell clicked",{upsellType:e.upsell_type,upsellName:e.name,cometSurface:h});break}},[i,a,e,h,g]),A=d.useCallback(()=>{i?.query_str&&f({rawQuery:i.query_str,existingEntryUUID:i.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:i.frontend_context_uuid,promptSource:"user",querySource:"rewrite-upsell",attachments:[],modelPreferenceOverride:e?.cta_information?.model_preference??"pplx_pro"})},[i,f,e]),T=d.useCallback(()=>{if(!e)return;const{permalink_new_tab:L,permalink:U}=e.cta_information??{};U&&(L?window.open(U,"_blank"):window.location.href=U)},[e]);return d.useCallback(()=>{if(!e)return;const L=e.cta===Ja.SHORTCUT_MODAL?e.cta_information?.recommended_shortcut?.name:void 0;g3(e.name,L),P();const U=rot[e.name]??Le.UNSPECIFIED_GENERALIZED_UPSELL;let $=i?.thread_url_slug?`/search/${i.thread_url_slug}${u}`:void 0;(window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants"))&&($=`/b/assistants${u}`);const W=i?.thread_url_slug?`/search/${i.thread_url_slug}`:void 0;switch(e.cta){case Ja.SIGN_UP_OR_LOGIN:if(wv.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;s({title:e.title,description:e.description,origin:U});break;case Ja.PRO_UPGRADE:k({pitchMessage:e.cta_information?.upgrade_paywall_title?{title:e.cta_information.upgrade_paywall_title}:void 0,origin:U,defaultSegment:e.upsell_type===wE.UPGRADE_TO_ENTERPRISE?"business":void 0});break;case Ja.THREAD_TO_SPACE:{if(!i?.backend_uuid)return;w?C(i?.backend_uuid,i?.frontend_context_uuid):l("spaceCreateForThread",{entryUUID:i?.backend_uuid,frontendContextUUID:i?.frontend_context_uuid});break}case Ja.CONNECTOR:if(!wv.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"){const Q="gcal",q=tot(S?.connectors??[],Q);for(const H of q)_({connectorName:Q,connectionUUID:H});b({connectorName:Q,redirectPath:$,unauthedRedirectPath:W})}else wv.NEXT_PUBLIC_IS_SIDECAR_BUILD&&e.cta_information?.connector_type==="gcal"?window.open(`${window.location.origin}${Zat}?connector_type=${dZ.GCAL_CONNECT}`,"_blank"):ne.error("Unhandled upsell connector type",{connectorType:e.cta_information?.connector_type});break;case Ja.REWRITE_ANSWER:t&&i?.backend_uuid?Su({entryUUID:i?.backend_uuid,reason:"rewrite-upsell"}).catch(()=>{ne.error("Error terminating entry")}).finally(A):A();break;case Ja.PERMALINK:{T();break}case Ja.SET_DEFAULT_BROWSER:{D();break}case Ja.IMAGE_ANNOUNCEMENT_MODAL:{if(!e.image_asset||!e.image_asset_low_res||!e.button_text)return;let Q=e.cta;e.upsell_type===wE.DOWNLOAD_COMET&&(Q=Ja.COMET_DOWNLOAD),l("announcementImageModal",{imageUrlHd:e.image_asset,imageUrlLowRes:e.image_asset_low_res,title:e.title??"",description:e.description??"",upsellInformation:{...e,cta:Q}});break}case Ja.COMET_DOWNLOAD:{E({upsellName:e.name});break}case Ja.MERGE_AUTH_CONNECTOR:{M&&O();break}case Ja.SHORTCUT_MODAL:{const Q=e.cta_information?.recommended_shortcut;l("taskShortcutModal",{source:"thread_upsell_create",onCreated:n?.hideUpsell,shortcut:Q?{title:Q.name,prompt:Q.prompt}:void 0});break}case Ja.OPEN_SHEERID_MODAL:{a("sheerid form redirect",{verificationLocationSource:Le.STUDENT_VERIFICATION_UPSELL,verificationRoleType:"student"}),l("sheerIdModal",{onSuccess:p,type:"student"});break}}},[e,P,i?.thread_url_slug,i?.backend_uuid,i?.frontend_context_uuid,u,s,k,l,t,w,C,S?.connectors,b,_,A,T,D,E,p,M,O,n?.hideUpsell,a])},y3=I.memo(({upsellInformation:e,inFlight:t,position:n,onButtonClick:r,isLoading:s,textButtonIfSecondary:a=!1,hideUpsell:i,verticalLayout:l=!1})=>{const{$t:c}=Z(),u=k_(e,t,{hideUpsell:i}),f=d.useCallback(()=>{r?.(),u()},[r,u]),m=d.useMemo(()=>{if(n==="router_steps")return"inverted";switch(e?.button_color){case _C.MAX_COLOR:return"maxGold";case _C.PRIMARY_COLOR:return"primary";case _C.INVERTED:return"inverted";default:return"common"}},[e?.button_color,n]),p=d.useCallback(h=>{let g;e?.icon_reference==="labs"?g=o.jsx(de,{icon:ar,size:"sm"}):e?.icon_reference==="comet_download"&&(g=o.jsx(Uy,{size:16}));const y={size:h?"regular":"small",onClick:f,text:e?.button_text,leadingComponent:g,textClassName:h?"!text-sm":void 0,fullWidth:!0,isLoading:s};return a&&e?.button_color===_C.SECONDARY_COLOR?o.jsx(Me,{...y,variant:"super",noPadding:!0}):o.jsx(me,{...y,variant:m})},[m,f,e?.button_color,e?.button_text,e?.icon_reference,a,s]);if(e?.cta_information?.secondary_permalink){const h=e.cta_information.secondary_permalink,g=e.cta_information.secondary_permalink_new_tab,y=o.jsx(Me,{text:c({defaultMessage:"Learn more",id:"TdTXXf940t"}),fullWidth:!0,variant:"super",textClassName:"!text-sm",noPadding:!0,onClick:()=>{g?window.open(h,"_blank"):pa(h,"Learn more from upsell")}});return o.jsx("div",{className:`gap-md flex ${l?"flex-col":"flex-row"}`,children:l?o.jsxs(o.Fragment,{children:[p(!0),y]}):o.jsxs(o.Fragment,{children:[y,p(!0)]})})}return p(!1)});y3.displayName="UpsellButton";const sot=()=>{const{data:e}=sU(),{trackEvent:t,trackEventOnce:n}=Te(),[r,s]=d.useState(!1);d.useEffect(()=>{e&&e.app_location==="SIDE_CARD"&&(s(!0),n("side upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const a=d.useCallback(()=>{e&&(t("side upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),s(!1),g3(e.name))},[e,t]),i=d.useMemo(()=>e?o.jsx(y3,{upsellInformation:e,textButtonIfSecondary:!0}):null,[e]);return d.useMemo(()=>({show:r&&!!e,title:e?.title,description:e?.description,image:e?.image_asset,button:i,onDismiss:a}),[i,a,r,e])},Cxe=({userIntercomHash:e,appId:t,data:n,reason:r})=>{const s=!!Zo(),a=et(),{session:i}=mt(),{isPro:l,isMax:c,subscriptionTier:u}=St(),{orgUser:f,isEnterprise:m}=Hn({reason:r}),p=d.useMemo(()=>{const y=s?{comet:!0}:{};return{l2wyozh0:{api_base:"https://api-iam.intercom.io",app_id:"l2wyozh0",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:f?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},fl4pfvft:{api_base:"https://api-iam.intercom.io",app_id:"fl4pfvft",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:f?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y},cajnwzjn:{api_base:"https://api-iam.intercom.io",app_id:"cajnwzjn",name:i?.user?.name,email:i?.user?.email,user_hash:e??void 0,is_signed_in:a,is_pro_user:l,is_max_user:c,is_enterprise_user:m,account_type:f?.role,payment_tier:i?.user?.payment_tier||"free",subscription_tier:u||"none",hide_default_launcher:!0,...n,...y}}},[i,e,n,s,l,c,m,f?.role,a,u]),h=d.useRef(void 0),g=d.useCallback(async()=>{h.current||(h.current=X(async()=>{const{show:y,Intercom:x,shutdown:v,update:b}=await import("./index-5FFPV-FM.js").then(_=>_.i);return{show:y,Intercom:x,shutdown:v,update:b}},[]).then(({show:y,Intercom:x,shutdown:v,update:b})=>(x(p[t]),{show:y,update:b,shutdown:v}))),h.current.then(({show:y,update:x})=>{x(p[t]),y()})},[t,p]);return vp(()=>{h.current?.then(({shutdown:y})=>{y()})}),d.useMemo(()=>({show:g}),[g])};Cxe.displayName="useIntercom";function Sxe(e){const t=e+"CollectionProvider",[n,r]=Ca(t),[s,a]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=y=>{const{scope:x,children:v}=y,b=I.useRef(null),_=I.useRef(new Map).current;return o.jsx(s,{scope:x,itemMap:_,collectionRef:b,children:v})};i.displayName=t;const l=e+"CollectionSlot",c=Rg(l),u=I.forwardRef((y,x)=>{const{scope:v,children:b}=y,_=a(l,v),w=En(x,_.collectionRef);return o.jsx(c,{ref:w,children:b})});u.displayName=l;const f=e+"CollectionItemSlot",m="data-radix-collection-item",p=Rg(f),h=I.forwardRef((y,x)=>{const{scope:v,children:b,..._}=y,w=I.useRef(null),C=En(x,w),S=a(f,v);return I.useEffect(()=>(S.itemMap.set(w,{ref:w,..._}),()=>void S.itemMap.delete(w))),o.jsx(p,{[m]:"",ref:C,children:b})});h.displayName=f;function g(y){const x=a(e+"CollectionConsumer",y);return I.useCallback(()=>{const b=x.collectionRef.current;if(!b)return[];const _=Array.from(b.querySelectorAll(`[${m}]`));return Array.from(x.itemMap.values()).sort((S,E)=>_.indexOf(S.ref.current)-_.indexOf(E.ref.current))},[x.collectionRef,x.itemMap])}return[{Provider:i,Slot:u,ItemSlot:h},g,r]}var I6="rovingFocusGroup.onEntryFocus",aot={bubbles:!1,cancelable:!0},T_="RovingFocusGroup",[x8,Exe,oot]=Sxe(T_),[iot,mx]=Ca(T_,[oot]),[lot,cot]=iot(T_),Mxe=d.forwardRef((e,t)=>o.jsx(x8.Provider,{scope:e.__scopeRovingFocusGroup,children:o.jsx(x8.Slot,{scope:e.__scopeRovingFocusGroup,children:o.jsx(uot,{...e,ref:t})})}));Mxe.displayName=T_;var uot=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:a,currentTabStopId:i,defaultCurrentTabStopId:l,onCurrentTabStopIdChange:c,onEntryFocus:u,preventScrollOnEntryFocus:f=!1,...m}=e,p=d.useRef(null),h=En(t,p),g=S_(a),[y,x]=Ni({prop:i,defaultProp:l??null,onChange:c,caller:T_}),[v,b]=d.useState(!1),_=ma(u),w=Exe(n),C=d.useRef(!1),[S,E]=d.useState(0);return d.useEffect(()=>{const k=p.current;if(k)return k.addEventListener(I6,_),()=>k.removeEventListener(I6,_)},[_]),o.jsx(lot,{scope:n,orientation:r,dir:g,loop:s,currentTabStopId:y,onItemFocus:d.useCallback(k=>x(k),[x]),onItemShiftTab:d.useCallback(()=>b(!0),[]),onFocusableItemAdd:d.useCallback(()=>E(k=>k+1),[]),onFocusableItemRemove:d.useCallback(()=>E(k=>k-1),[]),children:o.jsx(Xt.div,{tabIndex:v||S===0?-1:0,"data-orientation":r,...m,ref:h,style:{outline:"none",...e.style},onMouseDown:it(e.onMouseDown,()=>{C.current=!0}),onFocus:it(e.onFocus,k=>{const M=!C.current;if(k.target===k.currentTarget&&M&&!v){const j=new CustomEvent(I6,aot);if(k.currentTarget.dispatchEvent(j),!j.defaultPrevented){const R=w().filter(T=>T.focusable),O=R.find(T=>T.active),D=R.find(T=>T.id===y),A=[O,D,...R].filter(Boolean).map(T=>T.ref.current);Nxe(A,f)}}C.current=!1}),onBlur:it(e.onBlur,()=>b(!1))})})}),kxe="RovingFocusGroupItem",Txe=d.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:a,children:i,...l}=e,c=fo(),u=a||c,f=cot(kxe,n),m=f.currentTabStopId===u,p=Exe(n),{onFocusableItemAdd:h,onFocusableItemRemove:g,currentTabStopId:y}=f;return d.useEffect(()=>{if(r)return h(),()=>g()},[r,h,g]),o.jsx(x8.ItemSlot,{scope:n,id:u,focusable:r,active:s,children:o.jsx(Xt.span,{tabIndex:m?0:-1,"data-orientation":f.orientation,...l,ref:t,onMouseDown:it(e.onMouseDown,x=>{r?f.onItemFocus(u):x.preventDefault()}),onFocus:it(e.onFocus,()=>f.onItemFocus(u)),onKeyDown:it(e.onKeyDown,x=>{if(x.key==="Tab"&&x.shiftKey){f.onItemShiftTab();return}if(x.target!==x.currentTarget)return;const v=mot(x,f.orientation,f.dir);if(v!==void 0){if(x.metaKey||x.ctrlKey||x.altKey||x.shiftKey)return;x.preventDefault();let _=p().filter(w=>w.focusable).map(w=>w.ref.current);if(v==="last")_.reverse();else if(v==="prev"||v==="next"){v==="prev"&&_.reverse();const w=_.indexOf(x.currentTarget);_=f.loop?pot(_,w+1):_.slice(w+1)}setTimeout(()=>Nxe(_))}}),children:typeof i=="function"?i({isCurrentTabStop:m,hasTabStop:y!=null}):i})})});Txe.displayName=kxe;var dot={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function fot(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function mot(e,t,n){const r=fot(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return dot[r]}function Nxe(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function pot(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var YU=Mxe,QU=Txe,v8=["Enter"," "],hot=["ArrowDown","PageUp","Home"],jxe=["ArrowUp","PageDown","End"],got=[...hot,...jxe],yot={ltr:[...v8,"ArrowRight"],rtl:[...v8,"ArrowLeft"]},xot={ltr:["ArrowLeft"],rtl:["ArrowRight"]},N_="Menu",[W1,vot,bot]=Sxe(N_),[bp,Axe]=Ca(N_,[bot,cf,mx]),x3=cf(),Ixe=mx(),[_ot,_p]=bp(N_),[wot,j_]=bp(N_),Rxe=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:a,modal:i=!0}=e,l=x3(t),[c,u]=d.useState(null),f=d.useRef(!1),m=ma(a),p=S_(s);return d.useEffect(()=>{const h=()=>{f.current=!0,document.addEventListener("pointerdown",g,{capture:!0,once:!0}),document.addEventListener("pointermove",g,{capture:!0,once:!0})},g=()=>f.current=!1;return document.addEventListener("keydown",h,{capture:!0}),()=>{document.removeEventListener("keydown",h,{capture:!0}),document.removeEventListener("pointerdown",g,{capture:!0}),document.removeEventListener("pointermove",g,{capture:!0})}},[]),o.jsx(d5,{...l,children:o.jsx(_ot,{scope:t,open:n,onOpenChange:m,content:c,onContentChange:u,children:o.jsx(wot,{scope:t,onClose:d.useCallback(()=>m(!1),[m]),isUsingKeyboardRef:f,dir:p,modal:i,children:r})})})};Rxe.displayName=N_;var Cot="MenuAnchor",XU=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=x3(n);return o.jsx(i_,{...s,...r,ref:t})});XU.displayName=Cot;var ZU="MenuPortal",[Sot,Pxe]=bp(ZU,{forceMount:void 0}),Lxe=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,a=_p(ZU,t);return o.jsx(Sot,{scope:t,forceMount:n,children:o.jsx(es,{present:n||a.open,children:o.jsx(Ky,{asChild:!0,container:s,children:r})})})};Lxe.displayName=ZU;var Ci="MenuContent",[Eot,JU]=bp(Ci),Oxe=d.forwardRef((e,t)=>{const n=Pxe(Ci,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=_p(Ci,e.__scopeMenu),i=j_(Ci,e.__scopeMenu);return o.jsx(W1.Provider,{scope:e.__scopeMenu,children:o.jsx(es,{present:r||a.open,children:o.jsx(W1.Slot,{scope:e.__scopeMenu,children:i.modal?o.jsx(Mot,{...s,ref:t}):o.jsx(kot,{...s,ref:t})})})})}),Mot=d.forwardRef((e,t)=>{const n=_p(Ci,e.__scopeMenu),r=d.useRef(null),s=En(t,r);return d.useEffect(()=>{const a=r.current;if(a)return GF(a)},[]),o.jsx(eB,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:it(e.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),kot=d.forwardRef((e,t)=>{const n=_p(Ci,e.__scopeMenu);return o.jsx(eB,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),Tot=Rg("MenuContent.ScrollLock"),eB=d.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEntryFocus:c,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:h,disableOutsideScroll:g,...y}=e,x=_p(Ci,n),v=j_(Ci,n),b=x3(n),_=Ixe(n),w=vot(n),[C,S]=d.useState(null),E=d.useRef(null),k=En(t,E,x.onContentChange),M=d.useRef(0),j=d.useRef(""),R=d.useRef(0),O=d.useRef(null),D=d.useRef("right"),P=d.useRef(0),A=g?K5:d.Fragment,T=g?{as:Tot,allowPinchZoom:!0}:void 0,N=U=>{const $=j.current+U,V=w().filter(G=>!G.disabled),W=document.activeElement,Q=V.find(G=>G.ref.current===W)?.textValue,q=V.map(G=>G.textValue),H=Bot(q,$,Q),K=V.find(G=>G.textValue===H)?.ref.current;(function G(ee){j.current=ee,window.clearTimeout(M.current),ee!==""&&(M.current=window.setTimeout(()=>G(""),1e3))})($),K&&setTimeout(()=>K.focus())};d.useEffect(()=>()=>window.clearTimeout(M.current),[]),HF();const L=d.useCallback(U=>D.current===O.current?.side&&Vot(U,O.current?.area),[]);return o.jsx(Eot,{scope:n,searchRef:j,onItemEnter:d.useCallback(U=>{L(U)&&U.preventDefault()},[L]),onItemLeave:d.useCallback(U=>{L(U)||(E.current?.focus(),S(null))},[L]),onTriggerLeave:d.useCallback(U=>{L(U)&&U.preventDefault()},[L]),pointerGraceTimerRef:R,onPointerGraceIntentChange:d.useCallback(U=>{O.current=U},[]),children:o.jsx(A,{...T,children:o.jsx(G5,{asChild:!0,trapped:s,onMountAutoFocus:it(a,U=>{U.preventDefault(),E.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:i,children:o.jsx(Gy,{asChild:!0,disableOutsidePointerEvents:l,onEscapeKeyDown:u,onPointerDownOutside:f,onFocusOutside:m,onInteractOutside:p,onDismiss:h,children:o.jsx(YU,{asChild:!0,..._,dir:v.dir,orientation:"vertical",loop:r,currentTabStopId:C,onCurrentTabStopIdChange:S,onEntryFocus:it(c,U=>{v.isUsingKeyboardRef.current||U.preventDefault()}),preventScrollOnEntryFocus:!0,children:o.jsx(f5,{role:"menu","aria-orientation":"vertical","data-state":Zxe(x.open),"data-radix-menu-content":"",dir:v.dir,...b,...y,ref:k,style:{outline:"none",...y.style},onKeyDown:it(y.onKeyDown,U=>{const V=U.target.closest("[data-radix-menu-content]")===U.currentTarget,W=U.ctrlKey||U.altKey||U.metaKey,Q=U.key.length===1;V&&(U.key==="Tab"&&U.preventDefault(),!W&&Q&&N(U.key));const q=E.current;if(U.target!==q||!got.includes(U.key))return;U.preventDefault();const K=w().filter(G=>!G.disabled).map(G=>G.ref.current);jxe.includes(U.key)&&K.reverse(),Fot(K)}),onBlur:it(e.onBlur,U=>{U.currentTarget.contains(U.target)||(window.clearTimeout(M.current),j.current="")}),onPointerMove:it(e.onPointerMove,H1(U=>{const $=U.target,V=P.current!==U.clientX;if(U.currentTarget.contains($)&&V){const W=U.clientX>P.current?"right":"left";D.current=W,P.current=U.clientX}}))})})})})})})});Oxe.displayName=Ci;var Not="MenuGroup",tB=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Xt.div,{role:"group",...r,ref:t})});tB.displayName=Not;var jot="MenuLabel",Dxe=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Xt.div,{...r,ref:t})});Dxe.displayName=jot;var $E="MenuItem",fZ="menu.itemSelect",v3=d.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,a=d.useRef(null),i=j_($E,e.__scopeMenu),l=JU($E,e.__scopeMenu),c=En(t,a),u=d.useRef(!1),f=()=>{const m=a.current;if(!n&&m){const p=new CustomEvent(fZ,{bubbles:!0,cancelable:!0});m.addEventListener(fZ,h=>r?.(h),{once:!0}),Yde(m,p),p.defaultPrevented?u.current=!1:i.onClose()}};return o.jsx(Fxe,{...s,ref:c,disabled:n,onClick:it(e.onClick,f),onPointerDown:m=>{e.onPointerDown?.(m),u.current=!0},onPointerUp:it(e.onPointerUp,m=>{u.current||m.currentTarget?.click()}),onKeyDown:it(e.onKeyDown,m=>{const p=l.searchRef.current!=="";n||p&&m.key===" "||v8.includes(m.key)&&(m.currentTarget.click(),m.preventDefault())})})});v3.displayName=$E;var Fxe=d.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...a}=e,i=JU($E,n),l=Ixe(n),c=d.useRef(null),u=En(t,c),[f,m]=d.useState(!1),[p,h]=d.useState("");return d.useEffect(()=>{const g=c.current;g&&h((g.textContent??"").trim())},[a.children]),o.jsx(W1.ItemSlot,{scope:n,disabled:r,textValue:s??p,children:o.jsx(QU,{asChild:!0,...l,focusable:!r,children:o.jsx(Xt.div,{role:"menuitem","data-highlighted":f?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...a,ref:u,onPointerMove:it(e.onPointerMove,H1(g=>{r?i.onItemLeave(g):(i.onItemEnter(g),g.defaultPrevented||g.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:it(e.onPointerLeave,H1(g=>i.onItemLeave(g))),onFocus:it(e.onFocus,()=>m(!0)),onBlur:it(e.onBlur,()=>m(!1))})})})}),Aot="MenuCheckboxItem",Uxe=d.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return o.jsx(Hxe,{scope:e.__scopeMenu,checked:n,children:o.jsx(v3,{role:"menuitemcheckbox","aria-checked":VE(n)?"mixed":n,...s,ref:t,"data-state":rB(n),onSelect:it(s.onSelect,()=>r?.(VE(n)?!0:!n),{checkForDefaultPrevented:!1})})})});Uxe.displayName=Aot;var Bxe="MenuRadioGroup",[Iot,Rot]=bp(Bxe,{value:void 0,onValueChange:()=>{}}),$xe=d.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,a=ma(r);return o.jsx(Iot,{scope:e.__scopeMenu,value:n,onValueChange:a,children:o.jsx(tB,{...s,ref:t})})});$xe.displayName=Bxe;var Vxe="MenuRadioItem",Wxe=d.forwardRef((e,t)=>{const{value:n,...r}=e,s=Rot(Vxe,e.__scopeMenu),a=n===s.value;return o.jsx(Hxe,{scope:e.__scopeMenu,checked:a,children:o.jsx(v3,{role:"menuitemradio","aria-checked":a,...r,ref:t,"data-state":rB(a),onSelect:it(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});Wxe.displayName=Vxe;var nB="MenuItemIndicator",[Hxe,Pot]=bp(nB,{checked:!1}),zxe=d.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,a=Pot(nB,n);return o.jsx(es,{present:r||VE(a.checked)||a.checked===!0,children:o.jsx(Xt.span,{...s,ref:t,"data-state":rB(a.checked)})})});zxe.displayName=nB;var Lot="MenuSeparator",Gxe=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return o.jsx(Xt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});Gxe.displayName=Lot;var Oot="MenuArrow",qxe=d.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=x3(n);return o.jsx(m5,{...s,...r,ref:t})});qxe.displayName=Oot;var Dot="MenuSub",[xon,Kxe]=bp(Dot),t0="MenuSubTrigger",Yxe=d.forwardRef((e,t)=>{const n=_p(t0,e.__scopeMenu),r=j_(t0,e.__scopeMenu),s=Kxe(t0,e.__scopeMenu),a=JU(t0,e.__scopeMenu),i=d.useRef(null),{pointerGraceTimerRef:l,onPointerGraceIntentChange:c}=a,u={__scopeMenu:e.__scopeMenu},f=d.useCallback(()=>{i.current&&window.clearTimeout(i.current),i.current=null},[]);return d.useEffect(()=>f,[f]),d.useEffect(()=>{const m=l.current;return()=>{window.clearTimeout(m),c(null)}},[l,c]),o.jsx(XU,{asChild:!0,...u,children:o.jsx(Fxe,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":Zxe(n.open),...e,ref:uc(t,s.onTriggerChange),onClick:m=>{e.onClick?.(m),!(e.disabled||m.defaultPrevented)&&(m.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:it(e.onPointerMove,H1(m=>{a.onItemEnter(m),!m.defaultPrevented&&!e.disabled&&!n.open&&!i.current&&(a.onPointerGraceIntentChange(null),i.current=window.setTimeout(()=>{n.onOpenChange(!0),f()},100))})),onPointerLeave:it(e.onPointerLeave,H1(m=>{f();const p=n.content?.getBoundingClientRect();if(p){const h=n.content?.dataset.side,g=h==="right",y=g?-5:5,x=p[g?"left":"right"],v=p[g?"right":"left"];a.onPointerGraceIntentChange({area:[{x:m.clientX+y,y:m.clientY},{x,y:p.top},{x:v,y:p.top},{x:v,y:p.bottom},{x,y:p.bottom}],side:h}),window.clearTimeout(l.current),l.current=window.setTimeout(()=>a.onPointerGraceIntentChange(null),300)}else{if(a.onTriggerLeave(m),m.defaultPrevented)return;a.onPointerGraceIntentChange(null)}})),onKeyDown:it(e.onKeyDown,m=>{const p=a.searchRef.current!=="";e.disabled||p&&m.key===" "||yot[r.dir].includes(m.key)&&(n.onOpenChange(!0),n.content?.focus(),m.preventDefault())})})})});Yxe.displayName=t0;var Qxe="MenuSubContent",Xxe=d.forwardRef((e,t)=>{const n=Pxe(Ci,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,a=_p(Ci,e.__scopeMenu),i=j_(Ci,e.__scopeMenu),l=Kxe(Qxe,e.__scopeMenu),c=d.useRef(null),u=En(t,c);return o.jsx(W1.Provider,{scope:e.__scopeMenu,children:o.jsx(es,{present:r||a.open,children:o.jsx(W1.Slot,{scope:e.__scopeMenu,children:o.jsx(eB,{id:l.contentId,"aria-labelledby":l.triggerId,...s,ref:u,align:"start",side:i.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:f=>{i.isUsingKeyboardRef.current&&c.current?.focus(),f.preventDefault()},onCloseAutoFocus:f=>f.preventDefault(),onFocusOutside:it(e.onFocusOutside,f=>{f.target!==l.trigger&&a.onOpenChange(!1)}),onEscapeKeyDown:it(e.onEscapeKeyDown,f=>{i.onClose(),f.preventDefault()}),onKeyDown:it(e.onKeyDown,f=>{const m=f.currentTarget.contains(f.target),p=xot[i.dir].includes(f.key);m&&p&&(a.onOpenChange(!1),l.trigger?.focus(),f.preventDefault())})})})})})});Xxe.displayName=Qxe;function Zxe(e){return e?"open":"closed"}function VE(e){return e==="indeterminate"}function rB(e){return VE(e)?"indeterminate":e?"checked":"unchecked"}function Fot(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function Uot(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function Bot(e,t,n){const s=t.length>1&&Array.from(t).every(u=>u===t[0])?t[0]:t,a=n?e.indexOf(n):-1;let i=Uot(e,Math.max(a,0));s.length===1&&(i=i.filter(u=>u!==n));const c=i.find(u=>u.toLowerCase().startsWith(s.toLowerCase()));return c!==n?c:void 0}function $ot(e,t){const{x:n,y:r}=e;let s=!1;for(let a=0,i=t.length-1;a<t.length;i=a++){const l=t[a],c=t[i],u=l.x,f=l.y,m=c.x,p=c.y;f>r!=p>r&&n<(m-u)*(r-f)/(p-f)+u&&(s=!s)}return s}function Vot(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return $ot(n,t)}function H1(e){return t=>t.pointerType==="mouse"?e(t):void 0}var Wot=Rxe,Hot=XU,zot=Lxe,Got=Oxe,qot=tB,Kot=Dxe,Yot=v3,Qot=Uxe,Xot=$xe,Zot=Wxe,Jot=zxe,eit=Gxe,tit=qxe,nit=Yxe,rit=Xxe,b3="DropdownMenu",[sit,von]=Ca(b3,[Axe]),Ka=Axe(),[ait,Jxe]=sit(b3),eve=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:a,onOpenChange:i,modal:l=!0}=e,c=Ka(t),u=d.useRef(null),[f,m]=Ni({prop:s,defaultProp:a??!1,onChange:i,caller:b3});return o.jsx(ait,{scope:t,triggerId:fo(),triggerRef:u,contentId:fo(),open:f,onOpenChange:m,onOpenToggle:d.useCallback(()=>m(p=>!p),[m]),modal:l,children:o.jsx(Wot,{...c,open:f,onOpenChange:m,dir:r,modal:l,children:n})})};eve.displayName=b3;var tve="DropdownMenuTrigger",nve=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,a=Jxe(tve,n),i=Ka(n);return o.jsx(Hot,{asChild:!0,...i,children:o.jsx(Xt.button,{type:"button",id:a.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":a.open?a.contentId:void 0,"data-state":a.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:uc(t,a.triggerRef),onPointerDown:it(e.onPointerDown,l=>{!r&&l.button===0&&l.ctrlKey===!1&&(a.onOpenToggle(),a.open||l.preventDefault())}),onKeyDown:it(e.onKeyDown,l=>{r||(["Enter"," "].includes(l.key)&&a.onOpenToggle(),l.key==="ArrowDown"&&a.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(l.key)&&l.preventDefault())})})})});nve.displayName=tve;var oit="DropdownMenuPortal",rve=e=>{const{__scopeDropdownMenu:t,...n}=e,r=Ka(t);return o.jsx(zot,{...r,...n})};rve.displayName=oit;var sve="DropdownMenuContent",ave=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Jxe(sve,n),a=Ka(n),i=d.useRef(!1);return o.jsx(Got,{id:s.contentId,"aria-labelledby":s.triggerId,...a,...r,ref:t,onCloseAutoFocus:it(e.onCloseAutoFocus,l=>{i.current||s.triggerRef.current?.focus(),i.current=!1,l.preventDefault()}),onInteractOutside:it(e.onInteractOutside,l=>{const c=l.detail.originalEvent,u=c.button===0&&c.ctrlKey===!0,f=c.button===2||u;(!s.modal||f)&&(i.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});ave.displayName=sve;var iit="DropdownMenuGroup",lit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(qot,{...s,...r,ref:t})});lit.displayName=iit;var cit="DropdownMenuLabel",uit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(Kot,{...s,...r,ref:t})});uit.displayName=cit;var dit="DropdownMenuItem",ove=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(Yot,{...s,...r,ref:t})});ove.displayName=dit;var fit="DropdownMenuCheckboxItem",ive=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(Qot,{...s,...r,ref:t})});ive.displayName=fit;var mit="DropdownMenuRadioGroup",pit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(Xot,{...s,...r,ref:t})});pit.displayName=mit;var hit="DropdownMenuRadioItem",git=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(Zot,{...s,...r,ref:t})});git.displayName=hit;var yit="DropdownMenuItemIndicator",xit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(Jot,{...s,...r,ref:t})});xit.displayName=yit;var vit="DropdownMenuSeparator",bit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(eit,{...s,...r,ref:t})});bit.displayName=vit;var _it="DropdownMenuArrow",wit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(tit,{...s,...r,ref:t})});wit.displayName=_it;var Cit="DropdownMenuSubTrigger",Sit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(nit,{...s,...r,ref:t})});Sit.displayName=Cit;var Eit="DropdownMenuSubContent",Mit=d.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=Ka(n);return o.jsx(rit,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});Mit.displayName=Eit;var kit=eve,Tit=nve,Nit=rve,jit=ave,lve=ove,cve=ive;const uve=Dt("AetherContext",{isMobileStyle:!1,isMobileUserAgent:!1}),dve=d.memo(({children:e,isMobileStyle:t=!1,isMobileUserAgent:n=!1})=>o.jsx(uve.Provider,{value:{isMobileStyle:t,isMobileUserAgent:n},children:o.jsx(XHe,{children:e})}));function A_(){return d.useContext(uve)}dve.displayName="AetherProvider";const mZ=e=>{const t=NE(e);return B(t,"justify-between")};function Ait({ref:e,children:t,icon:n,"aria-label":r,"aria-expanded":s,"aria-haspopup":a,"aria-controls":i,variant:l="primary",size:c="default",disabled:u=!1,onClick:f,leadingIcon:m,rounded:p=!1,__dangerousHtmlProps:h={},...g}){const y=MU(e),x=ax(g);return n?o.jsxs(F1,{ref:y,...x,disabled:u,className:mZ({variant:l,size:c,disabled:u,fullWidth:!1,rounded:p}),onClick:f,"aria-label":r,"aria-expanded":s,"aria-haspopup":a,"aria-controls":i,...h,children:[o.jsx(Oa,{icon:n,size:c}),o.jsx("div",{className:"ml-1 shrink-0",children:o.jsx(Oa,{icon:rG,size:c})})]}):o.jsxs(F1,{ref:y,...x,disabled:u,className:mZ({variant:l,size:c,disabled:u,fullWidth:!0}),onClick:f,"aria-label":r,"aria-expanded":s,"aria-haspopup":a,"aria-controls":i,...h,children:[o.jsxs("div",{className:"flex min-w-0 flex-1 items-center",children:[m&&o.jsx("div",{className:"mr-1 shrink-0",children:o.jsx(Oa,{icon:m,size:c})}),o.jsx("span",{className:B("truncate",{"pl-1":m,"pr-1":!0,"min-w-0":!0}),children:t})]}),o.jsx("div",{className:"ml-1 shrink-0",children:o.jsx(Oa,{icon:rG,size:c})})]})}var _3="Checkbox",[Iit,bon]=Ca(_3),[Rit,sB]=Iit(_3);function Pit(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:a,form:i,name:l,onCheckedChange:c,required:u,value:f="on",internal_do_not_use_render:m}=e,[p,h]=Ni({prop:n,defaultProp:s??!1,onChange:c,caller:_3}),[g,y]=d.useState(null),[x,v]=d.useState(null),b=d.useRef(!1),_=g?!!i||!!g.closest("form"):!0,w={checked:p,disabled:a,setChecked:h,control:g,setControl:y,name:l,form:i,value:f,hasConsumerStoppedPropagationRef:b,required:u,defaultChecked:Td(s)?!1:s,isFormControl:_,bubbleInput:x,setBubbleInput:v};return o.jsx(Rit,{scope:t,...w,children:Lit(m)?m(w):r})}var fve="CheckboxTrigger",mve=d.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:a,value:i,disabled:l,checked:c,required:u,setControl:f,setChecked:m,hasConsumerStoppedPropagationRef:p,isFormControl:h,bubbleInput:g}=sB(fve,e),y=En(s,f),x=d.useRef(c);return d.useEffect(()=>{const v=a?.form;if(v){const b=()=>m(x.current);return v.addEventListener("reset",b),()=>v.removeEventListener("reset",b)}},[a,m]),o.jsx(Xt.button,{type:"button",role:"checkbox","aria-checked":Td(c)?"mixed":c,"aria-required":u,"data-state":yve(c),"data-disabled":l?"":void 0,disabled:l,value:i,...r,ref:y,onKeyDown:it(t,v=>{v.key==="Enter"&&v.preventDefault()}),onClick:it(n,v=>{m(b=>Td(b)?!0:!b),g&&h&&(p.current=v.isPropagationStopped(),p.current||v.stopPropagation())})})});mve.displayName=fve;var aB=d.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:a,required:i,disabled:l,value:c,onCheckedChange:u,form:f,...m}=e;return o.jsx(Pit,{__scopeCheckbox:n,checked:s,defaultChecked:a,disabled:l,required:i,onCheckedChange:u,name:r,form:f,value:c,internal_do_not_use_render:({isFormControl:p})=>o.jsxs(o.Fragment,{children:[o.jsx(mve,{...m,ref:t,__scopeCheckbox:n}),p&&o.jsx(gve,{__scopeCheckbox:n})]})})});aB.displayName=_3;var pve="CheckboxIndicator",oB=d.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,a=sB(pve,n);return o.jsx(es,{present:r||Td(a.checked)||a.checked===!0,children:o.jsx(Xt.span,{"data-state":yve(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});oB.displayName=pve;var hve="CheckboxBubbleInput",gve=d.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:a,defaultChecked:i,required:l,disabled:c,name:u,value:f,form:m,bubbleInput:p,setBubbleInput:h}=sB(hve,e),g=En(n,h),y=IU(a),x=u5(r);d.useEffect(()=>{const b=p;if(!b)return;const _=window.HTMLInputElement.prototype,C=Object.getOwnPropertyDescriptor(_,"checked").set,S=!s.current;if(y!==a&&C){const E=new Event("click",{bubbles:S});b.indeterminate=Td(a),C.call(b,Td(a)?!1:a),b.dispatchEvent(E)}},[p,y,a,s]);const v=d.useRef(Td(a)?!1:a);return o.jsx(Xt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:i??v.current,required:l,disabled:c,name:u,value:f,form:m,...t,tabIndex:-1,ref:g,style:{...t.style,...x,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});gve.displayName=hve;function Lit(e){return typeof e=="function"}function Td(e){return e==="indeterminate"}function yve(e){return Td(e)?"indeterminate":e?"checked":"unchecked"}const Oit=Iu("reset interactable flex select-none items-center justify-center rounded border border-solid transition-colors duration-150",{variants:{size:{large:"size-6",default:"size-[18px]",small:"size-[14px]"},disabled:{false:"cursor-pointer",true:"cursor-default opacity-50"},checked:{false:"border-subtle bg-background",true:"border-super bg-super"}},compoundVariants:[{checked:!1,disabled:!1,class:"hover:border-subtle hover:bg-subtle"},{checked:!0,disabled:!1,class:"hover:opacity-80"}],defaultVariants:{size:"default",disabled:!1,checked:!1}});function xve({checked:e=!1,onCheckedChange:t,"aria-label":n,size:r="default",disabled:s=!1,tabIndex:a=0}){return o.jsx(aB,{checked:e,onCheckedChange:t,disabled:s,"aria-label":n,className:Oit({size:r,disabled:s,checked:e}),tabIndex:a,children:o.jsx(oB,{className:"text-inverse flex items-center justify-center",children:o.jsx(de,{icon:dr,size:r==="small"?"xs":"sm"})})})}const Dit=new Set(["menuitem","menuitemcheckbox","menuitemradio"]),Fit=Iu(B("reset flex gap-sm items-center font-sans rounded-lg px-sm py-1.5 select-none text-[13px] leading-loose","min-w-[calc(var(--radix-dropdown-menu-trigger-width)-theme(spacing.sm))]"),{variants:{disabled:{false:"text-foreground hover:bg-subtler cursor-pointer",true:"text-quiet"},highlighted:{false:"",true:"bg-subtle"},shouldShowFocusRing:{false:"",true:"reset interactable"}},defaultVariants:{disabled:!1,highlighted:!1,shouldShowFocusRing:!1}});function Yg({ref:e,children:t,leadingAccessory:n,trailingAccessory:r,subtitle:s,role:a="menuitem",...i}){const l=ax(i),c=l["data-disabled"]===""||l["data-disabled"]==="true"||i["aria-disabled"]===!0||i["aria-disabled"]==="true",u=l["data-highlighted"]===""||l["data-highlighted"]==="true",f=!Dit.has(a);return o.jsxs("div",{ref:e,role:a,className:Fit({disabled:c,highlighted:u,shouldShowFocusRing:f}),...l,children:[n&&o.jsx("div",{className:"shrink-0 self-start pt-[0.275rem]",children:o.jsx(Oa,{icon:n,size:"small"})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex flex-col gap-y-0.5",children:[t,s&&o.jsx("span",{className:"text-quiet whitespace-pre-wrap pb-1 text-[11px] leading-tight",children:s})]})}),r&&o.jsx("div",{className:"ml-auto flex self-start pt-[0.275rem]",children:r})]})}function Uit({children:e,checked:t,onCheckedChange:n,textValue:r,disabled:s,leadingAccessory:a,subtitle:i,...l}){const{isMobileStyle:c}=A_(),u=d.useCallback(h=>{h.preventDefault()},[]),f=d.useCallback(()=>{s||n(!t)},[t,s,n]),m=d.useCallback(h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),f())},[f]),p=d.useMemo(()=>o.jsx(xve,{checked:t,onCheckedChange:n,disabled:s,"aria-label":"",size:"small",tabIndex:c?-1:0}),[t,s,c,n]);return c?o.jsx(Yg,{leadingAccessory:a,trailingAccessory:p,subtitle:i,role:"checkbox","aria-checked":t,tabIndex:s?-1:0,onClick:f,onKeyDown:m,"aria-disabled":s,...l,children:e}):o.jsx(cve,{asChild:!0,disabled:s,checked:t,onCheckedChange:n,onSelect:u,textValue:r,...l,children:o.jsx(Yg,{leadingAccessory:a,trailingAccessory:p,subtitle:i,children:e})})}function Bit({children:e,textValue:t,disabled:n,onSelect:r,leadingAccessory:s,trailingAccessory:a,subtitle:i,...l}){const{isMobileStyle:c}=A_(),u=d.useCallback(()=>{n||r()},[n,r]),f=d.useCallback(m=>{(m.key==="Enter"||m.key===" ")&&(m.preventDefault(),u())},[u]);return c?o.jsx(Yg,{leadingAccessory:s,trailingAccessory:a,subtitle:i,role:"button",tabIndex:n?-1:0,onClick:u,onKeyDown:f,"aria-disabled":n,...l,children:e}):o.jsx(lve,{asChild:!0,disabled:n,onSelect:u,textValue:t,...l,children:o.jsx(Yg,{leadingAccessory:s,trailingAccessory:a,subtitle:i,children:e})})}const $it=new Set(["menuitem","menuitemcheckbox","menuitemradio"]),pZ=Iu(B("reset flex gap-sm items-center font-sans rounded-lg px-sm py-1.5 select-none text-[13px] leading-loose","min-w-[calc(var(--radix-dropdown-menu-trigger-width)-theme(spacing.sm))]"),{variants:{disabled:{false:"text-foreground hover:bg-subtler cursor-pointer",true:"text-quiet"},highlighted:{false:"",true:"bg-subtle"},shouldShowFocusRing:{false:"",true:"reset interactable"}},defaultVariants:{disabled:!1,highlighted:!1,shouldShowFocusRing:!1}});function hZ({ref:e,href:t,target:n,rel:r,children:s,leadingAccessory:a,trailingAccessory:i,subtitle:l,role:c="menuitem",...u}){const f=ax(u),m=f["data-disabled"]===""||f["data-disabled"]==="true"||u["aria-disabled"]===!0||u["aria-disabled"]==="true",p=f["data-highlighted"]===""||f["data-highlighted"]==="true";if(m)return o.jsx("span",{ref:e,role:c,className:pZ({disabled:m,highlighted:p}),...f,children:s});const h=!$it.has(c);return o.jsxs("a",{ref:e,role:c,href:t,target:n,rel:r,className:pZ({disabled:m,highlighted:p,shouldShowFocusRing:h}),...f,children:[a&&o.jsx("div",{className:"shrink-0 self-start pt-[0.275rem]",children:o.jsx(Oa,{icon:a,size:"small"})}),o.jsx("div",{className:"flex-1",children:o.jsxs("div",{className:"flex flex-col gap-y-0.5",children:[s,l&&o.jsx("span",{className:"text-quiet whitespace-pre-wrap pb-1 text-[11px] leading-tight",children:l})]})}),i&&o.jsx("div",{className:"ml-auto flex self-start pt-[0.275rem]",children:i})]})}function Vit({children:e,disabled:t,href:n,...r}){const{isMobileStyle:s}=A_();return s?o.jsx(hZ,{href:n,"aria-disabled":t,role:"link",...r,children:e}):o.jsx(lve,{asChild:!0,disabled:t,children:o.jsx(hZ,{href:n,...r,children:e})})}const Wit=Iu(B("reset interactable relative inline-block shrink-0 rounded-full shadow-inset-xs","transition-colors duration-150"),{variants:{size:{large:"h-[26px] w-11",default:"h-[22px] w-9",small:"h-[14px] w-6"},disabled:{false:"cursor-pointer",true:"cursor-default opacity-50"},checked:{false:"bg-inverse/45 dark:bg-inverse/20",true:"bg-super dark:bg-super/85"}},compoundVariants:[],defaultVariants:{size:"default",disabled:!1,checked:!1}}),Hit=Iu(B("pointer-events-none absolute block rounded-full","bg-base dark:bg-inverse","before:content-[''] before:absolute before:inset-0 before:rounded-full before:bg-base dark:before:bg-white dark:before:shadow-md","transition-transform before:transition-opacity duration-150 before:duration-150"),{variants:{size:{large:"size-5 data-[state=checked]:translate-x-[18px] left-three top-three",default:"size-4 data-[state=checked]:translate-x-[14px] left-three top-three",small:"size-2.5 data-[state=checked]:translate-x-[10px] left-two top-two"},disabled:{false:"",true:"before:opacity-20"},checked:{false:"",true:""}},compoundVariants:[],defaultVariants:{size:"default",disabled:!1,checked:!1}});function zit({checked:e=!1,onCheckedChange:t,"aria-label":n,size:r="default",disabled:s=!1,tabIndex:a=0}){return o.jsx(wye,{checked:e,onCheckedChange:t,disabled:s,"aria-label":n,className:Wit({size:r,disabled:s,checked:e}),tabIndex:a,children:o.jsx(Cye,{className:Hit({size:r,disabled:s,checked:e})})})}function Git({children:e,checked:t,onCheckedChange:n,textValue:r,disabled:s,leadingAccessory:a,subtitle:i,...l}){const{isMobileStyle:c}=A_(),u=d.useCallback(h=>{h.preventDefault()},[]),f=d.useCallback(()=>{s||n(!t)},[t,s,n]),m=d.useCallback(h=>{(h.key==="Enter"||h.key===" ")&&(h.preventDefault(),f())},[f]),p=d.useMemo(()=>o.jsx(zit,{checked:t,onCheckedChange:n,disabled:s,"aria-label":"",size:"small",tabIndex:c?-1:0}),[t,s,c,n]);return c?o.jsx(Yg,{leadingAccessory:a,trailingAccessory:p,subtitle:i,role:"switch","aria-checked":t,tabIndex:s?-1:0,onClick:f,onKeyDown:m,"aria-disabled":s,...l,children:e}):o.jsx(cve,{asChild:!0,disabled:s,checked:t,onCheckedChange:n,onSelect:u,textValue:r,...l,children:o.jsx(Yg,{leadingAccessory:a,trailingAccessory:p,subtitle:i,children:e})})}const qit=4;function Kit({isOpen:e,onToggle:t,triggerElement:n,children:r}){const{isMobileStyle:s}=A_();return s?o.jsxs(v_,{open:e,onOpenChange:t,children:[o.jsx(zhe,{asChild:!0,children:n}),o.jsxs(b_,{children:[o.jsx(Q5,{className:"fixed inset-0 bg-black/50"}),o.jsx(tx,{className:"bg-base fixed inset-x-0 bottom-0 flex max-h-[90vh] flex-col shadow-lg","aria-describedby":void 0,children:o.jsx("div",{className:"p-md flex-1 overflow-y-auto",children:r})})]})]}):o.jsxs(kit,{open:e,onOpenChange:t,modal:!1,children:[o.jsx(Tit,{asChild:!0,children:n}),o.jsx(Nit,{children:o.jsx(jit,{align:"start",sideOffset:qit,children:o.jsx(Yit,{children:r})})})]})}function Yit({children:e}){return o.jsx("div",{className:"bg-base shadow-overlay border-subtlest p-xs rounded-xl",children:e})}const Qit=Object.assign(Kit,{Button:Ait,Item:Bit,CheckboxItem:Uit,LinkItem:Vit,SwitchItem:Git});function vve(){const{trackEvent:e}=Te(),{locale:t}=Z(),[n,r]=d.useState(t2.includes(t)?t:Wd),s=hqe();return s?t2.includes(s)?n!==s&&r(s):gqe():n!==t&&t2.includes(t)&&r(t),d.useMemo(()=>({locale:n,hasChosenLocale:!!s,saveLocale(a){r(a),pqe(a),e("set locale cookie",{locale:a})}}),[n,s,e])}const Xit=e=>{};function Zit(e){const{$t:t}=Z(),{onLanguageChange:n=Xit,button:r}=e,s=vt(),{locale:a,saveLocale:i,hasChosenLocale:l}=vve(),{isMobileStyle:c}=xe(),u=d.useCallback(async h=>{i(h),n(h),await l3(),s.refresh("Interface language select")},[i,n,s]),f=d.useMemo(()=>({text:t({defaultMessage:"Default",id:"lKv8exH0MR"}),value:"default",type:"default",onClick:()=>{Dze(),s.refresh("Interface language reset")}}),[t,s]),m=d.useMemo(()=>[f,...Lze.map(h=>({text:h.label,value:h.locale,type:"default",onClick:()=>{u(h.locale)}}))],[f,u]),p=d.useMemo(()=>l?m.find(h=>h.value===a)?.text??f.text:f.text,[m,a,l,f]);return o.jsx("span",{"data-testid":"interface-language-select",children:o.jsx(nn,{isMobileStyle:c,items:m,children:r??o.jsx(Qit.Button,{size:"small",variant:"secondary",children:p})})})}async function bve(){const e=await fetch("/api/version",{method:"GET",headers:{"Content-Type":"application/json"}}),{version:t}=await e.json();return t}const Jit=({hideOnNarrowScreens:e=!1,userIntercomHash:t})=>{const{$t:n}=Z(),{show:r}=Cxe({appId:"l2wyozh0",userIntercomHash:t,reason:"helper-contact-support"}),{isMobileStyle:s}=xe(),{device:{isWindowsApp:a}}=Pt(),{openModal:i}=xt(),{locale:l}=Z(),{trackEvent:c}=Te(),u=Nn(),f=dye(),m=Zo(),p=aue(),{isEnterprise:h}=J5({reason:"helper"}),[g,y]=d.useState(),[x,v]=d.useState(!1);d.useEffect(()=>{p&&async function(){try{y(await bve()??"")}catch{}}()},[p]);const b=l in Ol?Ol[l]:Ol.default,_=d.useMemo(()=>p?[{type:"nested",text:"",label:"Internal (PPLX only)",isSubmenuOpen:x,onSubmenuOpen:()=>v(!0),onSubmenuClose:()=>v(!1),submenu:[{type:"default",text:"",label:g===void 0?"Loading current commit...":"Current commit: "+g,show:!0,href:g&&"https://github.com/ppl-ai/agi/commit/"+g,target:"_blank"},{type:"default",text:"",label:m?`Browser: ${m.browser_version}
Extension: ${m.extension_version}
Agent Extension: ${m.agent_extension_version}`:"Browser info is not defined",show:!!m}]}]:[],[p,g,x,m]),w=d.useMemo(()=>f?"https://www.perplexity.ai/comet/gettingstarted":h?"https://www.perplexity.ai/enterprise/resources":"https://www.perplexity.ai/hub/getting-started#what-is-perplexity",[h,f]),C=d.useMemo(()=>h?"https://www.perplexity.ai/help-center/en/collections/11312901-enterprise-pro":"https://www.perplexity.ai/hub/helpcenter",[h]),S=d.useCallback(()=>{u.showFeedbackForm()},[u]),E=d.useMemo(()=>[{icon:f?Sc:qle,text:n({defaultMessage:"Get started",id:"/aBLH2Kytu"}),show:!0,href:w,target:"_blank",onClick(){c("help menu item clicked",{href:w,isCometHome:f})}},{icon:d1,text:n({defaultMessage:"FAQ",id:"W8nHSdskn0"}),show:f,href:"http://comet-help.perplexity.ai/en",target:"_blank",onClick(){c("help menu item clicked",{href:"http://comet-help.perplexity.ai/en",isCometHome:f})}},{icon:sG,text:n({defaultMessage:"Report an Issue",id:"C8l3hRgoLu"}),show:f,onClick:S},{icon:d1,text:n({defaultMessage:"Help center",id:"BYkLO/XERT"}),show:!f||h,href:C,target:"_blank",onClick(){c("help menu item clicked",{href:C,isCometHome:f})}},{icon:b7e,text:n({defaultMessage:"Changelog",id:"MQcAqlXZ5R"}),show:!f,href:"https://www.perplexity.ai/changelog",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/changelog",isCometHome:f})}},{icon:Bk,text:n({defaultMessage:"Blog",id:"tv5FG3fVPd"}),show:!f,href:"/blog",target:"_blank",onClick(){c("help menu item clicked",{href:"/blog",isCometHome:f})}},{icon:Jh,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:!a,onClick(){i("keyboardShortcutHelperModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:f})}},{icon:Jh,text:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),show:a,onClick(){i("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal",isCometHome:f})}},{icon:jO,text:n({defaultMessage:"{pplx} {pro}",id:"QDSn6QIReR"},{pplx:"Perplexity",pro:"Pro"}),show:!0,href:"/pro",target:"_blank",onClick(){c("help menu item clicked",{href:"/pro",isCometHome:f})}},{icon:Ti,text:n({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),show:!0,href:"https://www.perplexity.ai/enterprise?utm_source=helper",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/enterprise?utm_source=helper",isCometHome:f})}},{icon:u1,text:n({defaultMessage:"Sonar API",id:"m21oy6OJo7"}),show:!0,href:"https://sonar.perplexity.ai/",target:"_blank",onClick(){c("help menu item clicked",{href:"https://sonar.perplexity.ai/",isCometHome:f})}},{icon:_7e,text:n({defaultMessage:"Contact Support",id:"YdQxfwJ5wQ"}),show:!0,onClick(){r()}},{type:"separator",show:!0},{text:"",label:n({defaultMessage:"Careers",id:"yJ1ORHjbX8"}),show:!0,href:"https://www.perplexity.ai/careers",target:"_blank",onClick(){c("help menu item clicked",{href:"https://www.perplexity.ai/careers",isCometHome:f})}},{text:"",label:n({defaultMessage:"Terms of service",id:"FqgDIVw4jF"}),show:!0,href:b.termsOfService,target:"_blank",onClick(){c("help menu item clicked",{href:b.termsOfService,isCometHome:f})}},{text:"",label:n({defaultMessage:"Privacy policy",id:"cPwv2cbzf2"}),show:!0,href:b.privacyPolicy,target:"_blank",onClick(){c("help menu item clicked",{href:b.privacyPolicy,isCometHome:f})}},..._],[f,n,w,S,h,C,a,b.termsOfService,b.privacyPolicy,_,c,i,r]),k=d.useCallback(()=>{i("keyboardShortcutEditorModal",null),c("help menu item clicked",{action:"shortcut modal"})},[i,c]),M=d.useCallback(()=>{p&&i("bugReportModal",null)},[i,p]),j=d.useMemo(()=>E.map(R=>({type:"default",...R})),[E]);return o.jsx("div",{className:B("bottom-md right-md m-sm fixed hidden",!e&&"md:block",e&&"lg:block"),children:o.jsxs("div",{className:"gap-sm flex items-center",children:[p&&o.jsx(me,{toolTip:"Report a bug",ariaLabel:n({defaultMessage:"Internal: Report a bug",id:"mD23B8Qy5J"}),size:"small",pill:!0,variant:"rejecter",icon:sG,onClick:M}),o.jsx("div",{className:"group relative",children:o.jsx(Zit,{button:o.jsx(me,{toolTip:n({defaultMessage:"Change language",id:"jOuyTp+O9P"}),icon:w7e,ariaLabel:n({defaultMessage:"Language",id:"y1Z3orIe9Z"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle"})})}),a&&o.jsx("div",{className:"hidden lg:block",children:o.jsx(me,{toolTip:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),ariaLabel:n({defaultMessage:"Keyboard shortcuts",id:"vzYPVXl4by"}),size:"small",pill:!0,variant:"border",extraCSS:"shadow-subtle",icon:Jh,onClick:k})}),o.jsx(nn,{popoverProps:{childrenClassName:"block"},placement:"top-end",isMobileStyle:s,onOpen:()=>c("help menu opened",{}),items:j,children:o.jsx(me,{toolTip:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),ariaLabel:n({defaultMessage:"Help menu",id:"HzUkaMxHjy"}),variant:"border",extraCSS:"shadow-subtle ",size:"small",pill:!0,icon:Kle})})]})})};function R6({ref:e,className:t,children:n,onTrackEvent:r,__dangerousDoNotUseOnClick:s,...a}){const i=d.useCallback(l=>{s?.(l),r?.()},[s,r]);return o.jsx(qe,{...a,ref:e,onClick:i,className:B("reset interactable",t),children:n})}function elt({muted:e,bold:t}){return Iu("cursor-pointer decoration-1 underline-offset-1",{variants:{muted:{false:"text-super hover:underline",true:"underline hover:no-underline"},bold:{false:"",true:"font-semibold"}}})({muted:e,bold:t})}const RC=({variant:e,muted:t,bold:n,...r})=>e==="inline"?elt({muted:t,bold:n}):NE({variant:e,...r});function P0({ref:e,href:t,children:n,icon:r,"aria-label":s,variant:a="inline",size:i="default",disabled:l=!1,target:c,rel:u,title:f,fullWidth:m=!1,leadingIcon:p,trailingIcon:h,rounded:g=!1,pill:y=!1,muted:x=!1,bold:v=!1,onTrackEvent:b,__dangerousHtmlProps:_={},...w}){const C=MU(e),S=ax(w),E=d.useMemo(()=>r?o.jsx(Oa,{icon:r,size:i}):o.jsxs(o.Fragment,{children:[p&&o.jsx("div",{className:"mr-1",children:o.jsx(Oa,{icon:p,size:i})}),n,h&&o.jsx("div",{className:"ml-1",children:o.jsx(Oa,{icon:h,size:i})})]}),[r,p,i,n,h]);if(a==="inline")return o.jsx(R6,{ref:C,...S,href:t,target:c,rel:u,title:f,className:RC({variant:"inline",muted:x,bold:v}),onTrackEvent:b,..._,children:E});if(l)return o.jsx("span",{ref:C,...S,role:"link",className:RC({variant:a,size:i,disabled:l,fullWidth:m,rounded:g,pill:y,bold:!1}),"aria-disabled":"true","aria-label":s,children:E});if(r){const k=o.jsx(R6,{ref:C,...S,href:t,target:c,rel:u,className:RC({variant:a,size:i,disabled:l,fullWidth:!1,rounded:g,pill:!1,bold:!1}),onTrackEvent:b,"aria-label":s,..._,children:E});return l?k:o.jsx(zge,{content:f||s,children:k})}return o.jsx(R6,{ref:C,...S,href:t,target:c,rel:u,title:f,className:RC({variant:a,size:i,disabled:l,fullWidth:m,pill:y,bold:!1}),onTrackEvent:b,..._,children:E})}async function _on({notification_type:e,reason:t}){try{const n=await re.POST("/rest/notifications/subscribe/{notification_type}",t,{params:{path:{notification_type:e}}});if(!n.response.ok||n.error)throw new Error(`Failed to subscribe to notification: ${e}`);return n??null}catch(n){return ne.error("Failed to subscribe to notification",n),null}}async function won({notification_type:e,reason:t}){try{const n=await re.DELETE("/rest/notifications/unsubscribe/{notification_type}",t,{params:{path:{notification_type:e}}});if(!n.response.ok||n.error)throw new Error(`Failed to unsubscribe from notification: ${e}`);return n??null}catch(n){return ne.error("Failed to unsubscribe from notification",n),null}}async function tlt({phone_number:e,permalink:t,reason:n}){try{const r=await re.POST("/rest/notifications/sms/send-app-download-link",n,{body:{phone_number:e,permalink:t}});if(!r.response.ok||r.error)throw new Error(`Failed to send app download link: ${e}`);return r??null}catch(r){return ne.error("Failed to send app download link",r),null}}const nlt=({reason:e})=>{const{$t:t}=Z(),{trackEvent:n}=Te(),{openToast:r}=fn();return dt({mutationFn:async s=>tlt({phone_number:s.phone_number,permalink:s.permalink,reason:e}),onSuccess:()=>{r({message:t({defaultMessage:"Text message sent!",id:"OZMs2DeT7X"}),variant:"success",timeout:3}),n("floating mobile download text sent",{})},onError:()=>{r({message:t({defaultMessage:"Failed to send text, please try again",id:"n/T6jrPSYY"}),variant:"error",timeout:3}),n("floating mobile download text send failed",{})}})},rlt="https://perplexity.sng.link/A6awk/ppas?_smtype=3&pvid=",slt="https://perplexity.sng.link/A6awk/rcv6y?_smtype=3&pvid=",mf=(e,t=rlt)=>{const n=d_(),[r,s]=d.useState(t),{sendAppDownloadClickedEventSingular:a}=bU(),i=Lt(),l=d.useMemo(()=>{const u=new URLSearchParams;return u.set("origin",e),n&&u.set("pvid",n),i&&u.set("pathname",i),u.toString()},[n,e,i]);d.useEffect(()=>{(async()=>{const{singularSdk:f}=await X(async()=>{const{singularSdk:h}=await import("./singular-sdk-CHVvA4e9.js").then(g=>g.s);return{singularSdk:h}},[]);for(;!f._isInitialized;)await new Promise(h=>setTimeout(h,100));let m=null;i&&(m=`perplexity-app://${i.startsWith("/")?i.slice(1):i}`);const p=f.buildWebToAppLink(`${t}${n}&_ios_dl=${m}&_android_dl=${m}`,m,l,m);s(p)})()},[n,i,l,t]);const c=d.useCallback(()=>{Ok(),a(e),window.location.href=r},[r,e,a]);return d.useMemo(()=>({downloadAppLink:r,handleAppDownloadClicked:c}),[r,c])};var px=[["Afghanistan","af","93"],["Albania","al","355"],["Algeria","dz","213"],["Andorra","ad","376"],["Angola","ao","244"],["Antigua and Barbuda","ag","1268"],["Argentina","ar","54","(..) ........",0],["Armenia","am","374",".. ......"],["Aruba","aw","297"],["Australia","au","61",{default:". .... ....","/^4/":"... ... ...","/^5(?!50)/":"... ... ...","/^1(3|8)00/":".... ... ...","/^13/":".. .. ..","/^180/":"... ...."},0,[]],["Austria","at","43"],["Azerbaijan","az","994","(..) ... .. .."],["Bahamas","bs","1242"],["Bahrain","bh","973"],["Bangladesh","bd","880"],["Barbados","bb","1246"],["Belarus","by","375","(..) ... .. .."],["Belgium","be","32","... .. .. .."],["Belize","bz","501"],["Benin","bj","229"],["Bhutan","bt","975"],["Bolivia","bo","591"],["Bosnia and Herzegovina","ba","387"],["Botswana","bw","267"],["Brazil","br","55","(..) .....-...."],["British Indian Ocean Territory","io","246"],["Brunei","bn","673"],["Bulgaria","bg","359"],["Burkina Faso","bf","226"],["Burundi","bi","257"],["Cambodia","kh","855"],["Cameroon","cm","237"],["Canada","ca","1","(...) ...-....",1,["204","226","236","249","250","289","306","343","365","387","403","416","418","431","437","438","450","506","514","519","548","579","581","587","604","613","639","647","672","705","709","742","778","780","782","807","819","825","867","873","902","905"]],["Cape Verde","cv","238"],["Caribbean Netherlands","bq","599","",1],["Cayman Islands","ky","1","... ... ....",4,["345"]],["Central African Republic","cf","236"],["Chad","td","235"],["Chile","cl","56"],["China","cn","86","... .... ...."],["Colombia","co","57","... ... ...."],["Comoros","km","269"],["Congo","cd","243"],["Congo","cg","242"],["Costa Rica","cr","506","....-...."],["Cte d'Ivoire","ci","225",".. .. .. .. .."],["Croatia","hr","385"],["Cuba","cu","53"],["Curaao","cw","599","",0],["Cyprus","cy","357",".. ......"],["Czech Republic","cz","420","... ... ..."],["Denmark","dk","45",".. .. .. .."],["Djibouti","dj","253",".. .. ...."],["Dominica","dm","1767"],["Dominican Republic","do","1","(...) ...-....",2,["809","829","849"]],["Ecuador","ec","593"],["Egypt","eg","20"],["El Salvador","sv","503","....-...."],["Equatorial Guinea","gq","240"],["Eritrea","er","291"],["Estonia","ee","372",".... ......"],["Ethiopia","et","251",".. ... ...."],["Fiji","fj","679"],["Finland","fi","358",".. ... .. .."],["France","fr","33",". .. .. .. .."],["French Guiana","gf","594"],["French Polynesia","pf","689"],["Gabon","ga","241"],["Gambia","gm","220"],["Georgia","ge","995"],["Germany","de","49","... ........."],["Ghana","gh","233"],["Greece","gr","30"],["Greenland","gl","299",".. .. .."],["Grenada","gd","1473"],["Guadeloupe","gp","590","",0],["Guam","gu","1671"],["Guatemala","gt","502","....-...."],["Guinea","gn","224"],["Guinea-Bissau","gw","245"],["Guyana","gy","592"],["Haiti","ht","509","....-...."],["Honduras","hn","504"],["Hong Kong","hk","852",".... ...."],["Hungary","hu","36"],["Iceland","is","354","... ...."],["India","in","91",".....-....."],["Indonesia","id","62"],["Iran","ir","98","... ... ...."],["Iraq","iq","964"],["Ireland","ie","353",".. ......."],["Israel","il","972","... ... ...."],["Italy","it","39","... .......",0],["Jamaica","jm","1876"],["Japan","jp","81",".. .... ...."],["Jordan","jo","962"],["Kazakhstan","kz","7","... ...-..-..",0],["Kenya","ke","254"],["Kiribati","ki","686"],["Kosovo","xk","383"],["Kuwait","kw","965"],["Kyrgyzstan","kg","996","... ... ..."],["Laos","la","856"],["Latvia","lv","371",".. ... ..."],["Lebanon","lb","961"],["Lesotho","ls","266"],["Liberia","lr","231"],["Libya","ly","218"],["Liechtenstein","li","423"],["Lithuania","lt","370"],["Luxembourg","lu","352"],["Macau","mo","853"],["Macedonia","mk","389"],["Madagascar","mg","261"],["Malawi","mw","265"],["Malaysia","my","60","..-....-...."],["Maldives","mv","960"],["Mali","ml","223"],["Malta","mt","356"],["Marshall Islands","mh","692"],["Martinique","mq","596"],["Mauritania","mr","222"],["Mauritius","mu","230"],["Mayotte","yt","262","",1,["269","639"]],["Mexico","mx","52","... ... ....",0],["Micronesia","fm","691"],["Moldova","md","373","(..) ..-..-.."],["Monaco","mc","377"],["Mongolia","mn","976"],["Montenegro","me","382"],["Morocco","ma","212"],["Mozambique","mz","258"],["Myanmar","mm","95"],["Namibia","na","264"],["Nauru","nr","674"],["Nepal","np","977"],["Netherlands","nl","31",{"/^06/":"(.). .........","/^6/":". .........","/^0(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":"(.).. ........","/^(10|13|14|15|20|23|24|26|30|33|35|36|38|40|43|44|45|46|50|53|55|58|70|71|72|73|74|75|76|77|78|79|82|84|85|87|88|91)/":".. ........","/^0/":"(.)... .......",default:"... ......."}],["New Caledonia","nc","687"],["New Zealand","nz","64","...-...-...."],["Nicaragua","ni","505"],["Niger","ne","227"],["Nigeria","ng","234"],["North Korea","kp","850"],["Norway","no","47","... .. ..."],["Oman","om","968"],["Pakistan","pk","92","...-......."],["Palau","pw","680"],["Palestine","ps","970"],["Panama","pa","507"],["Papua New Guinea","pg","675"],["Paraguay","py","595"],["Peru","pe","51"],["Philippines","ph","63","... ... ...."],["Poland","pl","48","...-...-..."],["Portugal","pt","351"],["Puerto Rico","pr","1","(...) ...-....",3,["787","939"]],["Qatar","qa","974"],["Runion","re","262","",0],["Romania","ro","40"],["Russia","ru","7","(...) ...-..-..",1],["Rwanda","rw","250"],["Saint Kitts and Nevis","kn","1869"],["Saint Lucia","lc","1758"],["Saint Vincent and the Grenadines","vc","1784"],["Samoa","ws","685"],["San Marino","sm","378"],["So Tom and Prncipe","st","239"],["Saudi Arabia","sa","966"],["Senegal","sn","221"],["Serbia","rs","381"],["Seychelles","sc","248"],["Sierra Leone","sl","232"],["Singapore","sg","65","....-...."],["Slovakia","sk","421"],["Slovenia","si","386"],["Solomon Islands","sb","677"],["Somalia","so","252"],["South Africa","za","27"],["South Korea","kr","82","... .... ...."],["South Sudan","ss","211"],["Spain","es","34","... ... ..."],["Sri Lanka","lk","94"],["Sudan","sd","249"],["Suriname","sr","597"],["Swaziland","sz","268"],["Sweden","se","46","... ... ..."],["Switzerland","ch","41",".. ... .. .."],["Syria","sy","963"],["Taiwan","tw","886"],["Tajikistan","tj","992"],["Tanzania","tz","255"],["Thailand","th","66"],["Timor-Leste","tl","670"],["Togo","tg","228"],["Tonga","to","676"],["Trinidad and Tobago","tt","1868"],["Tunisia","tn","216"],["Turkey","tr","90","... ... .. .."],["Turkmenistan","tm","993"],["Tuvalu","tv","688"],["Uganda","ug","256"],["Ukraine","ua","380","(..) ... .. .."],["United Arab Emirates","ae","971"],["United Kingdom","gb","44",".... ......"],["United States","us","1","(...) ...-....",0],["Uruguay","uy","598"],["Uzbekistan","uz","998",".. ... .. .."],["Vanuatu","vu","678"],["Vatican City","va","39",".. .... ....",1],["Venezuela","ve","58"],["Vietnam","vn","84"],["Yemen","ye","967"],["Zambia","zm","260"],["Zimbabwe","zw","263"]],alt="react-international-phone-",_ve=(...e)=>e.filter(t=>!!t).join(" ").trim(),olt=(...e)=>_ve(...e).split(" ").map(t=>`${alt}${t}`).join(" "),fa=({addPrefix:e,rawClassNames:t})=>_ve(olt(...e),...t),ilt=({value:e,mask:t,maskSymbol:n,offset:r=0,trimNonMaskCharsLeftover:s=!1})=>{if(e.length<r)return e;let a=e.slice(0,r),i=e.slice(r),l=a,c=0;for(let u of t.split("")){if(c>=i.length){if(!s&&u!==n){l+=u;continue}break}u===n?(l+=i[c],c+=1):l+=u}return l},Ch=e=>e?/^\d+$/.test(e):!1,w3=e=>e.replace(/\D/g,""),llt=(e,t)=>{let n=e.style.display;n!=="block"&&(e.style.display="block");let r=e.getBoundingClientRect(),s=t.getBoundingClientRect(),a=s.top-r.top,i=r.bottom-s.bottom;a>=0&&i>=0||(Math.abs(a)<Math.abs(i)?e.scrollTop+=a:e.scrollTop-=i),e.style.display=n},clt=()=>typeof window>"u"?!1:window.navigator.userAgent.toLowerCase().includes("macintosh"),ult=(e,t)=>{let n=t.disableDialCodeAndPrefix?!1:t.forceDialCode,r=t.disableDialCodeAndPrefix?!1:t.insertDialCodeOnEmpty,s=e,a=u=>t.trimNonDigitsEnd?u.trim():u;if(!s)return r&&!s.length||n?a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`):a(s);if(s=w3(s),s===t.dialCode&&!t.disableDialCodeAndPrefix)return a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(t.dialCode.startsWith(s)&&!t.disableDialCodeAndPrefix)return a(n?`${t.prefix}${t.dialCode}${t.charAfterDialCode}`:`${t.prefix}${s}`);if(!s.startsWith(t.dialCode)&&!t.disableDialCodeAndPrefix){if(n)return a(`${t.prefix}${t.dialCode}${t.charAfterDialCode}`);if(s.length<t.dialCode.length)return a(`${t.prefix}${s}`)}let i=()=>{let u=t.dialCode.length,f=s.slice(0,u),m=s.slice(u);return{phoneLeftSide:f,phoneRightSide:m}},{phoneLeftSide:l,phoneRightSide:c}=i();return l=`${t.prefix}${l}${t.charAfterDialCode}`,c=ilt({value:c,mask:t.mask,maskSymbol:t.maskChar,trimNonMaskCharsLeftover:t.trimNonDigitsEnd||t.disableDialCodeAndPrefix&&c.length===0}),t.disableDialCodeAndPrefix&&(l=""),a(`${l}${c}`)},dlt=({phoneBeforeInput:e,phoneAfterInput:t,phoneAfterFormatted:n,cursorPositionAfterInput:r,leftOffset:s=0,deletion:a})=>{if(r<s)return s;if(!e)return n.length;let i=null;for(let f=r-1;f>=0;f-=1)if(Ch(t[f])){i=f;break}if(i===null){for(let f=0;f<t.length;f+=1)if(Ch(n[f]))return f;return t.length}let l=0;for(let f=0;f<i;f+=1)Ch(t[f])&&(l+=1);let c=0,u=0;for(let f=0;f<n.length&&(c+=1,Ch(n[f])&&(u+=1),!(u>=l+1));f+=1);if(a!=="backward")for(;!Ch(n[c])&&c<n.length;)c+=1;return c},p2=({phone:e,prefix:t})=>e?`${t}${w3(e)}`:"";function b8({value:e,country:t,insertDialCodeOnEmpty:n,trimNonDigitsEnd:r,countries:s,prefix:a,charAfterDialCode:i,forceDialCode:l,disableDialCodeAndPrefix:c,defaultMask:u,countryGuessingEnabled:f,disableFormatting:m}){let p=e;c&&(p=p.startsWith(`${a}`)?p:`${a}${t.dialCode}${p}`);let h=f?_lt({phone:p,countries:s,currentCountryIso2:t?.iso2}):void 0,g=h?.country??t,y=ult(p,{prefix:a,mask:vlt({phone:p,country:g,defaultMask:u,disableFormatting:m}),maskChar:wve,dialCode:g.dialCode,trimNonDigitsEnd:r,charAfterDialCode:i,forceDialCode:l,insertDialCodeOnEmpty:n,disableDialCodeAndPrefix:c}),x=f&&!h?.fullDialCodeMatch?t:g;return{phone:p2({phone:c?`${x.dialCode}${y}`:y,prefix:a}),inputValue:y,country:x}}var flt=e=>{if(e?.toLocaleLowerCase().includes("delete")??!1)return e?.toLocaleLowerCase().includes("forward")?"forward":"backward"},mlt=(e,{country:t,insertDialCodeOnEmpty:n,phoneBeforeInput:r,prefix:s,charAfterDialCode:a,forceDialCode:i,disableDialCodeAndPrefix:l,countryGuessingEnabled:c,defaultMask:u,disableFormatting:f,countries:m})=>{let p=e.nativeEvent,h=p.inputType,g=flt(h),y=!!h?.startsWith("insertFrom"),x=h==="insertText",v=p?.data||void 0,b=e.target.value,_=e.target.selectionStart??0;if(h?.includes("history"))return{inputValue:r,phone:p2({phone:r,prefix:s}),cursorPosition:r.length,country:t};if(x&&!Ch(v)&&b!==s)return{inputValue:r,phone:p2({phone:l?`${t.dialCode}${r}`:r,prefix:s}),cursorPosition:_-(v?.length??0),country:t};if(i&&!b.startsWith(`${s}${t.dialCode}`)&&!y){let k=b?r:`${s}${t.dialCode}${a}`;return{inputValue:k,phone:p2({phone:k,prefix:s}),cursorPosition:s.length+t.dialCode.length+a.length,country:t}}let{phone:w,inputValue:C,country:S}=b8({value:b,country:t,trimNonDigitsEnd:g==="backward",insertDialCodeOnEmpty:n,countryGuessingEnabled:c,countries:m,prefix:s,charAfterDialCode:a,forceDialCode:i,disableDialCodeAndPrefix:l,disableFormatting:f,defaultMask:u}),E=dlt({cursorPositionAfterInput:_,phoneBeforeInput:r,phoneAfterInput:b,phoneAfterFormatted:C,leftOffset:i?s.length+t.dialCode.length+a.length:0,deletion:g});return{phone:w,inputValue:C,cursorPosition:E,country:S}},plt=(e,t)=>{let n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(let s of n)if(e[s]!==t[s])return!1;return!0},hlt=()=>{let e=d.useRef(),t=d.useRef(Date.now());return{check:()=>{let n=Date.now(),r=e.current?n-t.current:void 0;return e.current=t.current,t.current=n,r}}},glt={size:20,overrideLastItemDebounceMS:-1};function ylt(e,t){let{size:n,overrideLastItemDebounceMS:r,onChange:s}={...glt,...t},[a,i]=d.useState(e),[l,c]=d.useState([a]),[u,f]=d.useState(0),m=hlt();return[a,(p,h)=>{if(typeof p=="object"&&typeof a=="object"&&plt(p,a)||p===a)return;let g=r>0,y=m.check(),x=g&&y!==void 0?y>r:!0;if(h?.overrideLastItem!==void 0?h.overrideLastItem:!x)c(v=>[...v.slice(0,u),p]);else{let v=l.length>=n;c(b=>[...b.slice(v?1:0,u+1),p]),v||f(b=>b+1)}i(p),s?.(p)},()=>{if(u<=0)return{success:!1};let p=l[u-1];return i(p),f(h=>h-1),s?.(p),{success:!0,value:p}},()=>{if(u+1>=l.length)return{success:!1};let p=l[u+1];return i(p),f(h=>h+1),s?.(p),{success:!0,value:p}}]}var wve=".",oi={defaultCountry:"us",value:"",prefix:"+",defaultMask:"............",charAfterDialCode:" ",historySaveDebounceMS:200,disableCountryGuess:!1,disableDialCodePrefill:!1,forceDialCode:!1,disableDialCodeAndPrefix:!1,disableFormatting:!1,countries:px},xlt=({defaultCountry:e=oi.defaultCountry,value:t=oi.value,countries:n=oi.countries,prefix:r=oi.prefix,defaultMask:s=oi.defaultMask,charAfterDialCode:a=oi.charAfterDialCode,historySaveDebounceMS:i=oi.historySaveDebounceMS,disableCountryGuess:l=oi.disableCountryGuess,disableDialCodePrefill:c=oi.disableDialCodePrefill,forceDialCode:u=oi.forceDialCode,disableDialCodeAndPrefix:f=oi.disableDialCodeAndPrefix,disableFormatting:m=oi.disableFormatting,onChange:p,inputRef:h})=>{let g={countries:n,prefix:r,charAfterDialCode:a,forceDialCode:f?!1:u,disableDialCodeAndPrefix:f,defaultMask:s,countryGuessingEnabled:!l,disableFormatting:m},y=d.useRef(null),x=h||y,v=P=>{Promise.resolve().then(()=>{typeof window>"u"||x.current!==document?.activeElement||x.current?.setSelectionRange(P,P)})},[{phone:b,inputValue:_,country:w},C,S,E]=ylt(()=>{let P=Bh({value:e,field:"iso2",countries:n});P||console.error(`[react-international-phone]: can not find a country with "${e}" iso2 code`);let A=P||Bh({value:"us",field:"iso2",countries:n}),{phone:T,inputValue:N,country:L}=b8({value:t,country:A,insertDialCodeOnEmpty:!c,...g});return v(N.length),{phone:T,inputValue:N,country:L.iso2}},{overrideLastItemDebounceMS:i,onChange:({inputValue:P,phone:A,country:T})=>{if(!p)return;let N=k(T);p({phone:A,inputValue:P,country:N})}}),k=d.useCallback(P=>Bh({value:P,field:"iso2",countries:n}),[n]),M=d.useMemo(()=>k(w),[w,k]);d.useEffect(()=>{let P=x.current;if(!P)return;let A=T=>{if(!T.key)return;let N=T.ctrlKey,L=T.metaKey,U=T.shiftKey;if(T.key.toLowerCase()==="z"){if(clt()){if(!L)return}else if(!N)return;U?E():S()}};return P.addEventListener("keydown",A),()=>{P.removeEventListener("keydown",A)}},[x,S,E]);let j=P=>{P.preventDefault();let{phone:A,inputValue:T,country:N,cursorPosition:L}=mlt(P,{country:M,phoneBeforeInput:_,insertDialCodeOnEmpty:!1,...g});return C({inputValue:T,phone:A,country:N.iso2}),v(L),t},R=(P,A={focusOnInput:!1})=>{let T=Bh({value:P,field:"iso2",countries:n});if(!T){console.error(`[react-international-phone]: can not find a country with "${P}" iso2 code`);return}let N=f?"":`${r}${T.dialCode}${a}`;C({inputValue:N,phone:`${r}${T.dialCode}`,country:T.iso2}),A.focusOnInput&&Promise.resolve().then(()=>{x.current?.focus()})},[O,D]=d.useState(!1);return d.useEffect(()=>{if(!O){D(!0),t!==b&&p?.({inputValue:_,phone:b,country:M});return}if(t===b)return;let{phone:P,inputValue:A,country:T}=b8({value:t,country:M,insertDialCodeOnEmpty:!c,...g});C({phone:P,inputValue:A,country:T.iso2})},[t]),{phone:b,inputValue:_,country:M,setCountry:R,handlePhoneValueChange:j,inputRef:x}},vlt=({phone:e,country:t,defaultMask:n="............",disableFormatting:r=!1})=>{let s=t.format,a=l=>r?l.replace(new RegExp(`[^${wve}]`,"g"),""):l;if(!s)return a(n);if(typeof s=="string")return a(s);if(!s.default)return console.error(`[react-international-phone]: default mask for ${t.iso2} is not provided`),a(n);let i=Object.keys(s).find(l=>{if(l==="default")return!1;if(!(l.charAt(0)==="/"&&l.charAt(l.length-1)==="/"))return console.error(`[react-international-phone]: format regex "${l}" for ${t.iso2} is not valid`),!1;let c=new RegExp(l.substring(1,l.length-1)),u=e.replace(t.dialCode,"");return c.test(w3(u))});return a(i?s[i]:s.default)},Il=e=>{let[t,n,r,s,a,i]=e;return{name:t,iso2:n,dialCode:r,format:s,priority:a,areaCodes:i}},blt=e=>`Field "${e}" is not supported`,Bh=({field:e,value:t,countries:n=px})=>{if(["priority"].includes(e))throw new Error(blt(e));let r=n.find(s=>{let a=Il(s);return t===a[e]});if(r)return Il(r)},_lt=({phone:e,countries:t=px,currentCountryIso2:n})=>{let r={country:void 0,fullDialCodeMatch:!1};if(!e)return r;let s=w3(e);if(!s)return r;let a=r,i=({country:l,fullDialCodeMatch:c})=>{let u=l.dialCode===a.country?.dialCode,f=(l.priority??0)<(a.country?.priority??0);(!u||f)&&(a={country:l,fullDialCodeMatch:c})};for(let l of t){let c=Il(l),{dialCode:u,areaCodes:f}=c;if(s.startsWith(u)){let m=a.country?Number(u)>=Number(a.country.dialCode):!0;if(f){let p=s.substring(u.length);for(let h of f)if(p.startsWith(h))return{country:c,fullDialCodeMatch:!0}}(m||u===s||!a.fullDialCodeMatch)&&i({country:c,fullDialCodeMatch:!0})}a.fullDialCodeMatch||s.length<u.length&&u.startsWith(s)&&(!a.country||Number(u)<=Number(a.country.dialCode))&&i({country:c,fullDialCodeMatch:!1})}if(n){let l=Bh({value:n,field:"iso2",countries:t});if(!l)return a;let c=l?(u=>{if(!u?.areaCodes)return!1;let f=s.substring(u.dialCode.length);return u.areaCodes.some(m=>m.startsWith(f))})(l):!1;a&&a.country?.dialCode===l.dialCode&&a.country!==l&&a.fullDialCodeMatch&&(!l.areaCodes||c)&&(a={country:l,fullDialCodeMatch:!0})}return a},wlt=(e,t)=>{let n=parseInt(e,16);return Number(n+t).toString(16)},Clt="abcdefghijklmnopqrstuvwxyz",Slt="1f1e6",gZ=Clt.split("").reduce((e,t,n)=>({...e,[t]:wlt(Slt,n)}),{}),Elt=e=>[gZ[e[0]],gZ[e[1]]].join("-"),Cve=({iso2:e,size:t,src:n,protocol:r="https",disableLazyLoading:s,className:a,style:i,...l})=>{if(!e)return I.createElement("img",{className:fa({addPrefix:["flag-emoji"],rawClassNames:[a]}),width:t,height:t,...l});let c=()=>{if(n)return n;let u=Elt(e);return`${r}://cdnjs.cloudflare.com/ajax/libs/twemoji/14.0.2/svg/${u}.svg`};return I.createElement("img",{className:fa({addPrefix:["flag-emoji"],rawClassNames:[a]}),src:c(),width:t,height:t,draggable:!1,"data-country":e,loading:s?void 0:"lazy",style:{width:t,height:t,...i},alt:"",...l})},Mlt=1e3,klt=({show:e,dialCodePrefix:t="+",selectedCountry:n,countries:r=px,preferredCountries:s=[],flags:a,onSelect:i,onClose:l,...c})=>{let u=d.useRef(null),f=d.useRef(),m=d.useMemo(()=>{if(!s||!s.length)return r;let S=[],E=[...r];for(let k of s){let M=E.findIndex(j=>Il(j).iso2===k);if(M!==-1){let j=E.splice(M,1)[0];S.push(j)}}return S.concat(E)},[r,s]),p=d.useRef({updatedAt:void 0,value:""}),h=S=>{let E=p.current.updatedAt&&new Date().getTime()-p.current.updatedAt.getTime()>Mlt;p.current={value:E?S:`${p.current.value}${S}`,updatedAt:new Date};let k=m.findIndex(M=>Il(M).name.toLowerCase().startsWith(p.current.value));k!==-1&&x(k)},g=d.useCallback(S=>m.findIndex(E=>Il(E).iso2===S),[m]),[y,x]=d.useState(g(n)),v=()=>{f.current!==n&&x(g(n))},b=d.useCallback(S=>{x(g(S.iso2)),i?.(S)},[i,g]),_=S=>{let E=m.length-1,k=M=>S==="prev"?M-1:S==="next"?M+1:S==="last"?E:0;x(M=>{let j=k(M);return j<0?0:j>E?E:j})},w=S=>{if(S.stopPropagation(),S.key==="Enter"){S.preventDefault();let E=Il(m[y]);b(E);return}if(S.key==="Escape"){l?.();return}if(S.key==="ArrowUp"){S.preventDefault(),_("prev");return}if(S.key==="ArrowDown"){S.preventDefault(),_("next");return}if(S.key==="PageUp"){S.preventDefault(),_("first");return}if(S.key==="PageDown"){S.preventDefault(),_("last");return}S.key===" "&&S.preventDefault(),S.key.length===1&&!S.altKey&&!S.ctrlKey&&!S.metaKey&&h(S.key.toLocaleLowerCase())},C=d.useCallback(()=>{if(!u.current||y===void 0)return;let S=Il(m[y]).iso2;if(S===f.current)return;let E=u.current.querySelector(`[data-country="${S}"]`);E&&(llt(u.current,E),f.current=S)},[y,m]);return d.useEffect(()=>{C()},[y,C]),d.useEffect(()=>{u.current&&(e?u.current.focus():v())},[e]),d.useEffect(()=>{v()},[n]),I.createElement("ul",{ref:u,role:"listbox",className:fa({addPrefix:["country-selector-dropdown"],rawClassNames:[c.className]}),style:{display:e?"block":"none",...c.style},onKeyDown:w,onBlur:l,tabIndex:-1,"aria-activedescendant":`react-international-phone__${Il(m[y]).iso2}-option`},m.map((S,E)=>{let k=Il(S),M=k.iso2===n,j=E===y,R=s.includes(k.iso2),O=E===s.length-1,D=a?.find(P=>P.iso2===k.iso2);return I.createElement(I.Fragment,{key:k.iso2},I.createElement("li",{"data-country":k.iso2,role:"option","aria-selected":M,"aria-label":`${k.name} ${t}${k.dialCode}`,id:`react-international-phone__${k.iso2}-option`,className:fa({addPrefix:["country-selector-dropdown__list-item",R&&"country-selector-dropdown__list-item--preferred",M&&"country-selector-dropdown__list-item--selected",j&&"country-selector-dropdown__list-item--focused"],rawClassNames:[c.listItemClassName]}),onClick:()=>b(k),style:c.listItemStyle,title:k.name},I.createElement(Cve,{iso2:k.iso2,src:D?.src,className:fa({addPrefix:["country-selector-dropdown__list-item-flag-emoji"],rawClassNames:[c.listItemFlagClassName]}),style:c.listItemFlagStyle}),I.createElement("span",{className:fa({addPrefix:["country-selector-dropdown__list-item-country-name"],rawClassNames:[c.listItemCountryNameClassName]}),style:c.listItemCountryNameStyle},k.name),I.createElement("span",{className:fa({addPrefix:["country-selector-dropdown__list-item-dial-code"],rawClassNames:[c.listItemDialCodeClassName]}),style:c.listItemDialCodeStyle},t,k.dialCode)),O?I.createElement("hr",{className:fa({addPrefix:["country-selector-dropdown__preferred-list-divider"],rawClassNames:[c.preferredListDividerClassName]}),style:c.preferredListDividerStyle}):null)}))},Tlt=({selectedCountry:e,onSelect:t,disabled:n,hideDropdown:r,countries:s=px,preferredCountries:a=[],flags:i,renderButtonWrapper:l,...c})=>{let[u,f]=d.useState(!1),m=d.useMemo(()=>{if(e)return Bh({value:e,field:"iso2",countries:s})},[s,e]),p=d.useRef(null),h=y=>{y.key&&["ArrowUp","ArrowDown"].includes(y.key)&&(y.preventDefault(),f(!0))},g=()=>{let y={title:m?.name,onClick:()=>f(v=>!v),onMouseDown:v=>v.preventDefault(),onKeyDown:h,disabled:r||n,role:"combobox","aria-label":"Country selector","aria-haspopup":"listbox","aria-expanded":u},x=I.createElement("div",{className:fa({addPrefix:["country-selector-button__button-content"],rawClassNames:[c.buttonContentWrapperClassName]}),style:c.buttonContentWrapperStyle},I.createElement(Cve,{iso2:e,src:i?.find(v=>v.iso2===e)?.src,className:fa({addPrefix:["country-selector-button__flag-emoji",n&&"country-selector-button__flag-emoji--disabled"],rawClassNames:[c.flagClassName]}),style:{visibility:e?"visible":"hidden",...c.flagStyle}}),!r&&I.createElement("div",{className:fa({addPrefix:["country-selector-button__dropdown-arrow",n&&"country-selector-button__dropdown-arrow--disabled",u&&"country-selector-button__dropdown-arrow--active"],rawClassNames:[c.dropdownArrowClassName]}),style:c.dropdownArrowStyle}));return l?l({children:x,rootProps:y}):I.createElement("button",{...y,type:"button",className:fa({addPrefix:["country-selector-button",u&&"country-selector-button--active",n&&"country-selector-button--disabled",r&&"country-selector-button--hide-dropdown"],rawClassNames:[c.buttonClassName]}),"data-country":e,style:c.buttonStyle},x)};return I.createElement("div",{className:fa({addPrefix:["country-selector"],rawClassNames:[c.className]}),style:c.style,ref:p},g(),I.createElement(klt,{show:u,countries:s,preferredCountries:a,flags:i,onSelect:y=>{f(!1),t?.(y)},selectedCountry:e,onClose:()=>{f(!1)},...c.dropdownStyleProps}))},Nlt=({dialCode:e,prefix:t,disabled:n,style:r,className:s})=>I.createElement("div",{className:fa({addPrefix:["dial-code-preview",n&&"dial-code-preview--disabled"],rawClassNames:[s]}),style:r},`${t}${e}`),jlt=d.forwardRef(({value:e,onChange:t,countries:n=px,preferredCountries:r=[],hideDropdown:s,showDisabledDialCodeAndPrefix:a,disableFocusAfterCountrySelect:i,flags:l,style:c,className:u,inputStyle:f,inputClassName:m,countrySelectorStyleProps:p,dialCodePreviewStyleProps:h,inputProps:g,placeholder:y,disabled:x,name:v,onFocus:b,onBlur:_,required:w,autoFocus:C,...S},E)=>{let{phone:k,inputValue:M,inputRef:j,country:R,setCountry:O,handlePhoneValueChange:D}=xlt({value:e,countries:n,...S,onChange:A=>{t?.(A.phone,{country:A.country,inputValue:A.inputValue})}}),P=S.disableDialCodeAndPrefix&&a&&R?.dialCode;return d.useImperativeHandle(E,()=>j.current?Object.assign(j.current,{setCountry:O,state:{phone:k,inputValue:M,country:R}}):null,[j,O,k,M,R]),I.createElement("div",{ref:E,className:fa({addPrefix:["input-container"],rawClassNames:[u]}),style:c},I.createElement(Tlt,{onSelect:A=>O(A.iso2,{focusOnInput:!i}),flags:l,selectedCountry:R.iso2,countries:n,preferredCountries:r,disabled:x,hideDropdown:s,...p}),P&&I.createElement(Nlt,{dialCode:R.dialCode,prefix:S.prefix??"+",disabled:x,...h}),I.createElement("input",{onChange:D,value:M,type:"tel",ref:j,className:fa({addPrefix:["input",x&&"input--disabled"],rawClassNames:[m]}),placeholder:y,disabled:x,style:f,name:v,onFocus:b,onBlur:_,autoFocus:C,required:w,...g}))});const yZ={height:"38px"},iB=I.memo(({required:e,number:t,defaultCountry:n,errorText:r,onChange:s,label:a})=>{const{locale:i,$t:l}=Z(),c=n?.toLowerCase()||i.split("-")[1]?.toLowerCase()||"us",u=d.useCallback((m,p)=>{s({number:m,countryCode:p.country.iso2.toUpperCase()})},[s]),f=d.useMemo(()=>({dropdownStyleProps:{className:"rounded-md !text-foreground !bg-base dark:bg-gradient-to-r dark:from-subtler via-subtle dark:to-subtler dark:ring-subtle scrollbar-none focus:outline-none",listItemClassName:"my-xs mx-sm rounded-md aria-selected:dark:bg-subtle aria-selected:dark:text-foreground dark:hover:bg-subtle"},buttonContentWrapperClassName:"px-md",buttonClassName:"bg-base dark:bg-subtler dark:border-subtle",buttonStyle:yZ}),[]);return o.jsxs("div",{children:[o.jsx(y_,{label:a??l({defaultMessage:"Phone number",id:"jdJhOLwFfi"}),isOptional:!1,errorText:r}),o.jsx(jlt,{required:e,countrySelectorStyleProps:f,inputClassName:B("w-full outline-none !bg-base dark:!bg-subtler caret-super focus:ring-1 focus:ring-subtler","dark:border-subtle dark:text-foreground","selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super"),inputStyle:yZ,defaultCountry:c,value:t,onChange:u})]})});iB.displayName="IntlPhoneInput";const Con=Object.freeze(Object.defineProperty({__proto__:null,IntlPhoneInput:iB},Symbol.toStringTag,{value:"Module"})),Sve=({extraCss:e="",variant:t="subtler"})=>o.jsx(z,{variant:t,className:B("shimmer aspect-square w-[144px] rounded-lg",e)});function Alt(e){if(!e)return!1;const t=e.replace(/[^\d+]/g,"");return!t.startsWith("+")||t.length<8||t.length>18||t.length===1?!1:/^\+\d{7,17}$/.test(t)}function Ilt(e){return/^(\+?1?\s?)?\(?\d{3}\)?[-.\s]?\d{3}[-.\s]?\d{4}$/.test(e)}const Rlt=()=>Ys.getItem("mobilePopupDismissed")!=="true",Plt=()=>Ys.setItem("mobilePopupDismissed","true"),Llt=he(()=>X(()=>import("./AppDownloadQR-Ci3CHQSY.js"),__vite__mapDeps([0,1,2])),{loading:()=>o.jsx(Sve,{})}),Eve=I.memo(({})=>{const{$t:e}=Z(),t=Lt(),{trackEvent:n}=Te(),{keysRequiringRerender:r,removeKeyRequiringRerender:s}=df(),{openToast:a}=fn(),[i,l]=d.useState(!1),[c,u]=d.useState(""),[f,m]=d.useState("US"),p=nlt({reason:"floating-app-download"}),{downloadAppLink:h}=mf("floating-app-download",slt),g=TF(t);d.useEffect(()=>{r.includes("floating-mobile-download")&&l(Rlt()&&!g),s("floating-mobile-download")},[r,g,s]),d.useEffect(()=>{i&&n("floating mobile download shown",{})},[i,n]);const y=d.useCallback(_=>{u(_.number),m(_.countryCode)},[]),x=d.useCallback(()=>{if(!c){a({message:e({defaultMessage:"Please enter a phone number",id:"MbYoP1/2Qh"}),variant:"error",timeout:3});return}if(!Ilt(c)&&!Alt(c)){a({message:e({defaultMessage:"Please enter a valid phone number",id:"FPcbu0KFMJ"}),variant:"error",timeout:3});return}p.mutate({phone_number:c,permalink:h})},[c,h,p,a,e]),v=()=>{l(!1),Plt(),n("floating mobile download dismissed",{})};if(!i)return null;const b=p.isPending;return o.jsx(z,{variant:"background",className:"bottom-md right-md p-lg animate-in fade-in fixed z-30 hidden w-[340px] rounded-lg border shadow-lg duration-300 ease-out md:block",children:o.jsxs("div",{children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Me,{pill:!0,size:"small",icon:kt,onClick:v})}),o.jsx(F,{variant:"section-title",className:"mb-md text-center",children:o.jsx(ie,{defaultMessage:"Download the Perplexity app",id:"1sBOM+cndS"})}),o.jsxs("div",{className:"mb-md gap-sm flex flex-col",children:[o.jsx(iB,{label:"",number:c,defaultCountry:f,onChange:y}),o.jsx(me,{text:e({defaultMessage:"Text me the link",id:"wkEpU7ZihM"}),fullWidth:!0,variant:"primary",disabled:b,isLoading:b,onClick:x})]}),o.jsxs("div",{className:"my-md pt-sm relative flex items-center",children:[o.jsx("div",{className:"border-subtler flex-1 border-t"}),o.jsx(F,{variant:"small",color:"light",className:"mx-sm bg-base px-sm text-center",children:o.jsx(ie,{defaultMessage:"Scan QR code",id:"aA2Fwg7hc1"})}),o.jsx("div",{className:"border-subtler flex-1 border-t"})]}),o.jsx(z,{className:"mb-md mx-auto flex items-center justify-center",children:o.jsx(Llt,{className:"p-xs overflow-hidden rounded-lg shadow-md"})}),o.jsxs(F,{variant:"tiny",color:"ultraLight",className:"text-center",children:[o.jsx(ie,{defaultMessage:"Enter your phone number to get the app link and occasional updates from Perplexity. See our ",id:"l6RMC+6Lgp"}),o.jsx(P0,{href:"https://www.perplexity.ai/hub/legal/privacy-policy",children:o.jsx(F,{variant:"tiny",color:"ultraLight",className:"underline",as:"span",children:o.jsx(ie,{defaultMessage:"Privacy Policy",id:"vx0nkZ8xpy"})})}),o.jsx(ie,{defaultMessage:" for more details. Opt out anytime.",id:"BPjqn8RV0y"})]})]})})});Eve.displayName="FloatingAppDownload";const Mve=()=>{const{isGovernmentRequestOrigin:e}=ts();return e===void 0},Olt=()=>Uqe()==="firefox"?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("pc")==="firefox",xZ="partnerships",Dlt=()=>$qe()===xZ?!0:typeof window>"u"?!1:new URL(window.location.href).searchParams.get("utm_source")===xZ,ho=d.memo(({isSamsungBrowser:e,isWindowsApp:t,isComet:n,isFirefoxDefaultSearch:r,isPartnershipCampaign:s,isGovernment:a,children:i})=>{const l=dn(),c=Olt(),u=Dlt(),{isGovernmentRequestOrigin:f}=ts(),{device:{isWindowsApp:m,isSamsungBrowser:p}}=Pt(),h=Mve();return d.useMemo(()=>!!(n&&l||t&&m||e&&p||r&&c||s&&u||a&&(h||f)),[l,m,p,n,e,t,r,c,s,u,a,f,h])?null:i});ho.displayName="OmitUpsellIf";function Flt({useCase:e}){return Ue({queryKey:["userIntercomHash",e],queryFn:()=>{const t=new URLSearchParams;return t.set("useCase",e),fetch(`/api/intercom?${t.toString()}`).then(n=>n.json())}})}var vZ={};const Ult=()=>{const e="floating-components",t=et(),n=Epe({});or({enabled:!t});const r=sot(),{showCookieConsentPopup:s,closeCookieConsentPopup:a}=hDe(),i=mZe({reason:e}),l=d.useRef(null),{inApp:c}=Xo(),u=_he({reason:e}),{currentOpenedModal:f}=xt(),m=Lt(),{data:p}=Flt({useCase:"default"});if(c)return null;if(r.show&&r.title&&r.description&&r.button&&r.onDismiss)return o.jsx(ho,{isFirefoxDefaultSearch:!0,children:o.jsx(Lfe,{shouldShow:r.show,imageSrc:r.image,imageAlt:"Side card upsell",title:r.title,description:r.description,primaryAction:r.button,onDismiss:r.onDismiss,iconXDismiss:!0})});if(!s&&u)return o.jsx(whe,{});const h=p?.userIntercomHash??null,g=!f&&!t&&!s&&!vZ.NEXT_PUBLIC_IS_SIDECAR_BUILD;return o.jsxs(o.Fragment,{children:[!i&&h&&o.jsx(Jit,{hideOnNarrowScreens:m?.includes("/search"),userIntercomHash:h}),g&&o.jsx("div",{ref:l,children:o.jsx(ho,{isWindowsApp:!0,isGovernment:!0,children:o.jsx(yxe,{portalTarget:l.current??void 0},"floating-signup")})}),t&&!vZ.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(ho,{isWindowsApp:!0,isFirefoxDefaultSearch:!0,children:o.jsx(Eve,{})}),s&&o.jsx(Ghe,{closeCookieConsentPopup:a}),t&&n]})},kve=Dt("WindowsAppPanelContext",null),Blt=({children:e})=>{const t=d.useRef(null),n=d.useRef(!1),r=Lt(),{device:{isWindowsApp:s}}=Pt(),[a,i]=d.useState(!1),l=!!(s&&r?.includes(N1)),c=d.useCallback(async()=>{const h=await d8({ref:t.current});i(h);const g=()=>i(!0),y=()=>i(!1);return Jv("show",g,{ref:t.current}),Jv("hide",y,{ref:t.current}),()=>{try{t.current&&(f8("show",{ref:t.current}),f8("hide",{ref:t.current}))}catch(x){ne.warn("Error removing window listeners during cleanup",x)}}},[t]),u=d.useCallback(async()=>{if(n.current)return ne.info("Already creating window, skipping"),!1;if(t.current)try{return await d8({ref:t.current}),ne.info("Existing window is still valid, skipping creation"),!0}catch{ne.warn("Existing window reference is invalid, will create new window"),t.current=null}try{ne.info("Starting panel window creation"),n.current=!0;const h=await Lnt({width:720,height:350,transparent:!0,show:!1,frame:!1,alwaysOnTop:!0,type:"panel"});if(!h)throw new Error("Failed to create window - no window reference returned");const g=await Unt({ref:h});if(!g)throw new Error("Failed to get web contents");const y=await Hnt({webPreferences:{nodeIntegration:!0,contextIsolation:!1}});if(!y)throw new Error("Failed to create view");await Ont({ref:h,viewRef:y});const x=new URL(N1,window.location.origin).toString();await znt({ref:g},x),t.current=h;const v=await c();if(v){const b=t.current;Jv("close",v,{ref:b})}return Jv("close",()=>{},{ref:h,preventDefault:!0}),!0}catch(h){return ne.error("Error creating panel window: ",h),t.current=null,!1}finally{n.current=!1}},[c]),f=d.useCallback(async()=>{try{if(!t.current)return ne.info("No panel window to hide"),!1;try{return await Fnt({ref:t.current}),!0}catch(h){return ne.warn("Error hiding panel, window may be invalid",h),t.current=null,!1}}catch(h){return ne.warn("Error in hidePanel: ",h),!1}},[]),m=d.useCallback(async()=>{try{if(t.current){if(a){ne.info("Panel window is already visible, skipping centering");return}}else if(!await u())return;const h=await Vnt(),g=(await Wnt(h)).bounds,[y=0,x]=await Dnt({ref:t.current});await Bnt({ref:t.current},Math.round(g.x+(g.width-y)/2),Math.round(g.y+g.height*.3)),await jU({ref:t.current}),await NU({ref:t.current})}catch(h){ne.warn("Error showing panel: ",h)}},[u,a]),p={isVisible:a,isWindowsAppPanelView:l,handleShowPanel:m,handleHidePanel:f,createPanelWindow:u};return o.jsx(kve.Provider,{value:p,children:e})},wp=()=>{const e=d.useContext(kve);if(!e)throw new Error("useWindowsAppPanel must be used within a WindowsAppPanelProvider");return e},Tve=hp("VoiceSessionStoreContext",()=>Yo(e=>({isActive:!1,setIsActive:t=>e({isActive:t})}))),$lt=Tve.Provider,Vlt=()=>Tve.useStore();function Nve(){const e=Vlt();return d.useCallback(()=>e.getState().isActive,[e])}var bZ={};const Wlt="pplx.hasUpdated",Hlt=Math.random()*1e3*60*30,zlt=0,Glt=1e3*60*30,qlt=1e3*60,_Z=1e3*60*60,wZ=1e3*30,jve=I.memo(({version:e})=>{const{session:t}=mt(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=d.useRef(e),{deprecatedOpenToast:s}=fn(),{isWindowsAppPanelView:a}=wp(),{inApp:i}=Xo(),{$t:l}=Z(),c=dn(),[u,f]=qU(Wlt,!1),m=d.useRef(!1),p=Ege(),h=Nve(),g=d.useRef(Date.now());r.current=e;const y=n?zlt:Hlt,x=n?qlt:Glt,v=d.useCallback(async()=>{try{if(!m.current){const S=await bve();cc("idle_refresh_check_version",{isCometSidecarClient:!!bZ.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:S}),m.current=!!(r.current&&S&&r.current!==S)}if(document.hidden||p()||h()||Date.now()-g.current<wZ)return;m.current&&(!c&&f(!0),await l3(),cc("idle_refresh"),g5("Idle refresh"))}catch{ne.log("Error getting build version")}},[c,f,p,h]),b=d.useMemo(()=>gs(v,y,{maxWait:_Z,leading:!1,trailing:!0}),[v,y]),_=d.useCallback(()=>{m.current?v():b()},[v,b]),w=d.useMemo(()=>gs(_,wZ,{maxWait:_Z,leading:!1,trailing:!0}),[_]),C=d.useCallback(()=>{g.current=Date.now(),w()},[w]);return d.useEffect(()=>{u&&!a&&!i&&(f(!1),s(l({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]),d.useEffect(()=>{const S=bZ.NEXT_PUBLIC_IS_SIDECAR_BUILD?setInterval(_,x):null;return document.addEventListener("visibilitychange",C),window.addEventListener("focus",C),window.addEventListener("keydown",C),window.addEventListener("mousedown",C),()=>{S&&clearInterval(S),document.removeEventListener("visibilitychange",C),window.removeEventListener("focus",C),window.removeEventListener("keydown",C),window.removeEventListener("mousedown",C)}},[_,x,C]),null});jve.displayName="IdleRefresh";const Ave=I.memo(function(){const{session:t}=mt(),n=d.useMemo(()=>{if(t)return{id:t.user.id,name:t.user.name,email:t.user.email,isPro:!!t.user.subscription_status&&t.user.subscription_status!=="none"}},[t]);if(!n)return null;const r=M_(globalThis.navigator?.userAgent??"");return o.jsxs(o.Fragment,{children:[o.jsx($9e,{session:n,isWindowsApp:r}),o.jsx(V9e,{session:n,isWindowsApp:r})]})});Ave.displayName="Instrumentation";async function Klt(){const e=await fetch("https://pplx-next-static-public.perplexity.ai/version/min-version.json",{method:"GET",headers:{"Content-Type":"application/json"}}),{minVersion:t,jitter:n}=await e.json();return{minVersion:t,jitter:n}}var Ylt={};const CZ=30,Qlt=0,Xlt=1e3*60*60,P6=1e3*30,Zlt="pplx.hasUpdated",Ive=I.memo(({minVersion:e})=>{const{session:t}=mt(),n=t?.user?.email?.endsWith("@perplexity.ai"),r=d.useRef(e),s=d.useRef(0),a=d.useRef(!1),{deprecatedOpenToast:i}=fn(),{isWindowsAppPanelView:l}=wp(),{inApp:c}=Xo(),{$t:u}=Z(),f=dn(),[m,p]=qU(Zlt,!1),h=Ege(),g=Nve(),{env:{isLocalhost:y}}=Pt(),x=d.useRef(Date.now()),v=d.useRef(null);r.current=e;const b=d.useCallback(async()=>{try{if(y)return;if(!a.current){const{minVersion:C,jitter:S}=await Klt();if(cc("min_version_refresh_check_version",{isCometSidecarClient:!!Ylt.NEXT_PUBLIC_IS_SIDECAR_BUILD,currentVersion:r.current,latestVersion:C}),s.current=n?Qlt:Math.max(S||CZ,CZ),!r.current&&C){r.current=C;return}a.current=!!(C&&r.current&&C>r.current)}if(document.hidden||h()||g()||Date.now()-x.current<P6)return;a.current&&!v.current&&(v.current=setTimeout(async()=>{if(v.current=null,document.hidden||h()||g()||Date.now()-x.current<P6){s.current=0;return}!f&&p(!0),await l3(),cc("min_version_refresh"),g5("Min version refresh")},Math.random()*s.current*1e3*60))}catch{ne.log("Error getting min version")}},[y,h,g,f,p,n]);d.useEffect(()=>{m&&!l&&!c&&(p(!1),i(u({defaultMessage:"Updated to latest version",id:"5SFf7ytcaw"}),"success",4))},[]);const _=d.useMemo(()=>gs(b,P6,{maxWait:Xlt,leading:!1,trailing:!0}),[b]),w=d.useCallback(()=>{x.current=Date.now(),_()},[_]);return d.useEffect(()=>(document.addEventListener("visibilitychange",w),window.addEventListener("focus",w),window.addEventListener("keydown",w),window.addEventListener("mousedown",w),()=>{document.removeEventListener("visibilitychange",w),window.removeEventListener("focus",w),window.removeEventListener("keydown",w),window.removeEventListener("mousedown",w)}),[w]),null});Ive.displayName="MinVersionRefresh";async function Jlt(){try{return(await(await fetch("/cdn-cgi/trace")).text()).split(`
`).reduce((n,r)=>{const[s,a]=r.split("=");return n[s]=a??"",n},{loc:"US"})}catch(e){return ne.error("Error getting Cloudflare trace",e),{loc:"US"}}}function Bu(){const{data:e}=Ue({queryKey:["cloudflare-trace"],queryFn:Jlt});return d.useMemo(()=>e?.loc??"US",[e])}const ect=({children:e,hostname:t})=>{const{session:n}=mt(),r=Bu();return o.jsx(ZYe,{hostname:t,session:n??void 0,cfCountry:r,children:e})};class L6{static cancelOneTap(t=!1){if(typeof window>"u"||!window)return!0;const n=window.location.pathname;return!![{match:"/",condition:()=>t},{match:"/welcome",condition:()=>t},{match:"/search/new"},{match:"/join/",startsWith:!0},{match:"/onboarding",startsWith:!0},{match:"/search/render",startsWith:!0},{match:"/auth/windows-app",startsWith:!0},{match:"/auth/sso",startsWith:!0},{match:"/auth/error",startsWith:!0}].some(({match:s,startsWith:a,condition:i})=>(a?n.startsWith(s):n===s)&&(!i||i()))}static getLoginSource(){if(!window)return Le.GOOGLE_ONETAP_UNKNOWN;const t=window.location.pathname;return t?t==="/"?Le.GOOGLE_ONETAP_HOME:t.startsWith("/search/")?Le.GOOGLE_ONETAP_THREAD:t.startsWith("/page/")?Le.GOOGLE_ONETAP_PAGE:t.startsWith("/discover")?Le.GOOGLE_ONETAP_DISCOVER:Le.GOOGLE_ONETAP_UNKNOWN:Le.GOOGLE_ONETAP_UNKNOWN}}const SZ="google-drive-picker-gapi-script",EZ="google-identity-services-script",Rve=lp(async function(){if(!document.getElementById(EZ))return new Promise((t,n)=>{const r=document.createElement("script");r.src="https://accounts.google.com/gsi/client",r.id=EZ,r.onload=()=>t(),r.onerror=n,document.body.appendChild(r)})}),tct=lp(async function(){if(!document.getElementById(SZ))return new Promise((t,n)=>{const r=document.createElement("script");r.src="https://apis.google.com/js/api.js",r.id=SZ,r.onload=()=>{window.gapi.load("picker",{callback:t,onerror:n})},r.onerror=n,document.body.appendChild(r)})}),MZ=500,nct=4,Pve=Dt("GoogleOneTapContext",{promptSkipped:!1});function rct(e){const{children:t}=e,n=d.useRef(0),r=d.useRef(!1),[s,a]=d.useState(!1),{status:i}=mt(),{isMobileUserAgent:l}=xe(),u=mo().erp,f=d.useCallback(async m=>{if(!m||L6.cancelOneTap())return;const p=L6.getLoginSource(),h=typeof window<"u"?new URL(window.location.href):new URL("/","https://www.perplexity.ai"),g=new URLSearchParams({[Ou]:p});h.search=g.toString();const y={credential:m.credential,callbackUrl:h.toString()};await e0("googleonetap",y)},[]);return d.useEffect(()=>{if(typeof window>"u"||i==="authenticated"||i==="loading"||l||["new_tab","sidecar"].includes(u??""))return;async function m(){if(!r.current&&(n.current+=1,!(n.current>nct))){if(await Rve(),!window.google?.accounts?.id){setTimeout(m,MZ);return}r.current=!0,!L6.cancelOneTap()&&(window.google.accounts.id.initialize({client_id:"60244564555-30175ip7vg79fobh0rk1sur3pdutj9l1.apps.googleusercontent.com",callback:f,auto_select:!0,use_fedcm_for_prompt:!0}),dn()?a(!0):window.google.accounts.id.prompt(h=>{a(h.isSkippedMoment())}))}}const p=setTimeout(m,MZ);return()=>{clearTimeout(p)}},[f,l,i,u]),o.jsx(Pve.Provider,{value:{promptSkipped:s},children:t})}function sct(){return d.useContext(Pve)}const lB=hp("LocalPropsContext",()=>Yo(e=>({tasksModeFocusStepUUID:void 0,actions:{setTasksModeFocusStepUUID:t=>{e({tasksModeFocusStepUUID:t})}}}))),act=lB.Provider,oct=lB.useSelector,ict=lB.useTrackedState,Son=()=>oct(e=>e.actions),Eon=ict,Lve=I.memo(({isOpen:e,onClose:t,uuidOrSlug:n})=>{const r="request-access-modal",{$t:s}=Z(),{deprecatedOpenToast:a}=fn(),{trackEvent:i}=Te();d.useEffect(()=>{i("thread access modal viewed",{uuidOrSlug:n})},[i,n]);const l=d.useCallback(u=>{i("thread access modal requested",{uuidOrSlug:n}),_Ze({slugOrUUID:n,reason:r}).then(()=>{t(),a(s({defaultMessage:"Access request sent",id:"STvLV+qKiH"}),"success",3)})},[n,s,t,a,i]),c=d.useCallback(()=>l(n),[l,n]);return o.jsx(qt,{isOpen:e,onClose:t,variant:"thin",children:o.jsx(z,{className:"px-md mx-auto text-center",children:o.jsxs("div",{className:"gap-y-md flex flex-col",children:[o.jsx("div",{className:"mb-lg flex justify-center",children:o.jsx($a,{variant:"full",size:"large",color:"foreground"})}),o.jsxs("div",{className:"mx-auto max-w-sm",children:[o.jsx(F,{variant:"section-title",className:"-mt-md",children:s({defaultMessage:"This answer is private",id:"cA+GFbHP/s"})}),o.jsx(F,{variant:"base",color:"light",className:"-mb-md",children:s({defaultMessage:"You can access this page if the owner accepts your request.",id:"SOJ/6nzOoc"})})]}),o.jsxs("div",{className:"mt-lg mb-md mx-auto flex w-full max-w-sm flex-col gap-y-2",children:[o.jsx(me,{variant:"primary",text:s({defaultMessage:"Request access",id:"vkHRp5q6Wi"}),onClick:c}),o.jsx(me,{variant:"common",text:s({defaultMessage:"Back to Perplexity",id:"r89PhWwooe"}),onClick:t,textClassName:"font-normal"})]})]})})})});Lve.displayName="RequestAccessModal";var lt;(function(e){e.SCHEDULED="scheduled",e.PRICE_ALERT="priceAlert",e.SHORTCUT="shortcut"})(lt||(lt={}));var Wr;(function(e){e.TARGET_PRICE="targetPrice",e.MOVEMENT_AMOUNT="movementAmount"})(Wr||(Wr={}));const _8=1e9,Ove=Qe({STOCK_PRICE_TARGET:{defaultMessage:"Price Target",id:"GkDb3edsv4"},STOCK_PRICE_MOVEMENT:{defaultMessage:"Price Movement",id:"nccbHgYn+f"}});function Mon(e){return e in Ove}function lct(e,t){return t.formatMessage(Ove[e])}function cct(e,t){const{event_entity:n,event_type:r,value_upper_bound:s,value_lower_bound:a}=e;let i="";return r==="STOCK_PRICE_TARGET"?a!=null?i=t.formatMessage({defaultMessage:"goes below ${value}",id:"RKgpKR3E99"},{value:a}):s!=null?i=t.formatMessage({defaultMessage:"goes above ${value}",id:"8eV5ClXcpi"},{value:s}):i=t.formatMessage({defaultMessage:"price target",id:"vnTdzDaohg"}):r==="STOCK_PRICE_MOVEMENT"?a!=null?i=t.formatMessage({defaultMessage:"drops {percent}%+",id:"Vl3IJiE9mt"},{percent:Math.abs(a)}):s!=null?i=t.formatMessage({defaultMessage:"rises {percent}%+",id:"EK4T00JAfI"},{percent:s}):i=t.formatMessage({defaultMessage:"price movement",id:"Pcu8sUjesQ"}):i=t.formatMessage({defaultMessage:"event triggers",id:"LpIhmla5ty"}),{kind:n,friendly:i,isRecurring:!1}}function Va(e){"@babel/helpers - typeof";return Va=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Va(e)}function xr(e){if(e===null||e===!0||e===!1)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function ct(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function At(e){ct(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||Va(e)==="object"&&t==="[object Date]"?new Date(e.getTime()):typeof e=="number"||t==="[object Number]"?new Date(e):((typeof e=="string"||t==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function Gs(e,t){ct(2,arguments);var n=At(e),r=xr(t);return isNaN(r)?new Date(NaN):(r&&n.setDate(n.getDate()+r),n)}function al(e,t){ct(2,arguments);var n=At(e),r=xr(t);if(isNaN(r))return new Date(NaN);if(!r)return n;var s=n.getDate(),a=new Date(n.getTime());a.setMonth(n.getMonth()+r+1,0);var i=a.getDate();return s>=i?a:(n.setFullYear(a.getFullYear(),a.getMonth(),s),n)}function Cv(e,t){if(ct(2,arguments),!t||Va(t)!=="object")return new Date(NaN);var n=t.years?xr(t.years):0,r=t.months?xr(t.months):0,s=t.weeks?xr(t.weeks):0,a=t.days?xr(t.days):0,i=t.hours?xr(t.hours):0,l=t.minutes?xr(t.minutes):0,c=t.seconds?xr(t.seconds):0,u=At(e),f=r||n?al(u,r+n*12):u,m=a||s?Gs(f,a+s*7):f,p=l+i*60,h=c+p*60,g=h*1e3,y=new Date(m.getTime()+g);return y}function uct(e,t){ct(2,arguments);var n=At(e).getTime(),r=xr(t);return new Date(n+r)}var dct={};function pf(){return dct}function pc(e,t){var n,r,s,a,i,l,c,u;ct(1,arguments);var f=pf(),m=xr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:f.weekStartsOn)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=At(e),h=p.getDay(),g=(h<m?7:0)+h-m;return p.setDate(p.getDate()-g),p.setHours(0,0,0,0),p}function Vm(e){return ct(1,arguments),pc(e,{weekStartsOn:1})}function fct(e){ct(1,arguments);var t=At(e),n=t.getFullYear(),r=new Date(0);r.setFullYear(n+1,0,4),r.setHours(0,0,0,0);var s=Vm(r),a=new Date(0);a.setFullYear(n,0,4),a.setHours(0,0,0,0);var i=Vm(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function mct(e){ct(1,arguments);var t=fct(e),n=new Date(0);n.setFullYear(t,0,4),n.setHours(0,0,0,0);var r=Vm(n);return r}function z1(e){var t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),e.getTime()-t.getTime()}function Kd(e){ct(1,arguments);var t=At(e);return t.setHours(0,0,0,0),t}var pct=864e5;function $l(e,t){ct(2,arguments);var n=Kd(e),r=Kd(t),s=n.getTime()-z1(n),a=r.getTime()-z1(r);return Math.round((s-a)/pct)}function WE(e,t){ct(2,arguments);var n=xr(t),r=n*7;return Gs(e,r)}function hct(e,t){ct(2,arguments);var n=xr(t);return al(e,n*12)}function gct(e){ct(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Va(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=At(r);(n===void 0||n<s||isNaN(Number(s)))&&(n=s)}),n||new Date(NaN)}function yct(e){ct(1,arguments);var t;if(e&&typeof e.forEach=="function")t=e;else if(Va(e)==="object"&&e!==null)t=Array.prototype.slice.call(e);else return new Date(NaN);var n;return t.forEach(function(r){var s=At(r);(n===void 0||n>s||isNaN(s.getDate()))&&(n=s)}),n||new Date(NaN)}function ug(e,t){ct(2,arguments);var n=At(e),r=At(t),s=n.getTime()-r.getTime();return s<0?-1:s>0?1:s}var Dve=6e4,xct=36e5,vct=1e3;function qs(e,t){ct(2,arguments);var n=Kd(e),r=Kd(t);return n.getTime()===r.getTime()}function cB(e){return ct(1,arguments),e instanceof Date||Va(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function bct(e){if(ct(1,arguments),!cB(e)&&typeof e!="number")return!1;var t=At(e);return!isNaN(Number(t))}function Qg(e,t){ct(2,arguments);var n=At(e),r=At(t),s=n.getFullYear()-r.getFullYear(),a=n.getMonth()-r.getMonth();return s*12+a}var _ct=6048e5;function wct(e,t,n){ct(2,arguments);var r=pc(e,n),s=pc(t,n),a=r.getTime()-z1(r),i=s.getTime()-z1(s);return Math.round((a-i)/_ct)}function Cct(e,t){ct(2,arguments);var n=At(e),r=At(t);return n.getFullYear()-r.getFullYear()}function kZ(e,t){var n=e.getFullYear()-t.getFullYear()||e.getMonth()-t.getMonth()||e.getDate()-t.getDate()||e.getHours()-t.getHours()||e.getMinutes()-t.getMinutes()||e.getSeconds()-t.getSeconds()||e.getMilliseconds()-t.getMilliseconds();return n<0?-1:n>0?1:n}function Sct(e,t){ct(2,arguments);var n=At(e),r=At(t),s=kZ(n,r),a=Math.abs($l(n,r));n.setDate(n.getDate()-s*a);var i=+(kZ(n,r)===-s),l=s*(a-i);return l===0?0:l}function uB(e,t){return ct(2,arguments),At(e).getTime()-At(t).getTime()}var Ect={ceil:Math.ceil,round:Math.round,floor:Math.floor,trunc:function(t){return t<0?Math.ceil(t):Math.floor(t)}},Mct="trunc";function dB(e){return Ect[Mct]}function kct(e,t,n){ct(2,arguments);var r=uB(e,t)/xct;return dB()(r)}function Tct(e,t,n){ct(2,arguments);var r=uB(e,t)/Dve;return dB()(r)}function Nct(e){ct(1,arguments);var t=At(e);return t.setHours(23,59,59,999),t}function C3(e){ct(1,arguments);var t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(23,59,59,999),t}function jct(e){ct(1,arguments);var t=At(e);return Nct(t).getTime()===C3(t).getTime()}function Act(e,t){ct(2,arguments);var n=At(e),r=At(t),s=ug(n,r),a=Math.abs(Qg(n,r)),i;if(a<1)i=0;else{n.getMonth()===1&&n.getDate()>27&&n.setDate(30),n.setMonth(n.getMonth()-s*a);var l=ug(n,r)===-s;jct(At(e))&&a===1&&ug(e,r)===1&&(l=!1),i=s*(a-Number(l))}return i===0?0:i}function Ict(e,t,n){ct(2,arguments);var r=uB(e,t)/1e3;return dB()(r)}function Rct(e,t){ct(2,arguments);var n=At(e),r=At(t),s=ug(n,r),a=Math.abs(Cct(n,r));n.setFullYear(1584),r.setFullYear(1584);var i=ug(n,r)===-s,l=s*(a-Number(i));return l===0?0:l}function go(e){ct(1,arguments);var t=At(e);return t.setDate(1),t.setHours(0,0,0,0),t}function Pct(e){ct(1,arguments);var t=At(e),n=new Date(0);return n.setFullYear(t.getFullYear(),0,1),n.setHours(0,0,0,0),n}function fB(e,t){var n,r,s,a,i,l,c,u;ct(1,arguments);var f=pf(),m=xr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:f.weekStartsOn)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=At(e),h=p.getDay(),g=(h<m?-7:0)+6-(h-m);return p.setDate(p.getDate()+g),p.setHours(23,59,59,999),p}function Fve(e){return ct(1,arguments),fB(e,{weekStartsOn:1})}function Lct(e,t){ct(2,arguments);var n=xr(t);return uct(e,-n)}var Oct=864e5;function Dct(e){ct(1,arguments);var t=At(e),n=t.getTime();t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0);var r=t.getTime(),s=n-r;return Math.floor(s/Oct)+1}function HE(e){ct(1,arguments);var t=1,n=At(e),r=n.getUTCDay(),s=(r<t?7:0)+r-t;return n.setUTCDate(n.getUTCDate()-s),n.setUTCHours(0,0,0,0),n}function Uve(e){ct(1,arguments);var t=At(e),n=t.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(n+1,0,4),r.setUTCHours(0,0,0,0);var s=HE(r),a=new Date(0);a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0);var i=HE(a);return t.getTime()>=s.getTime()?n+1:t.getTime()>=i.getTime()?n:n-1}function Fct(e){ct(1,arguments);var t=Uve(e),n=new Date(0);n.setUTCFullYear(t,0,4),n.setUTCHours(0,0,0,0);var r=HE(n);return r}var Uct=6048e5;function Bct(e){ct(1,arguments);var t=At(e),n=HE(t).getTime()-Fct(t).getTime();return Math.round(n/Uct)+1}function zE(e,t){var n,r,s,a,i,l,c,u;ct(1,arguments);var f=pf(),m=xr((n=(r=(s=(a=t?.weekStartsOn)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&s!==void 0?s:f.weekStartsOn)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&n!==void 0?n:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var p=At(e),h=p.getUTCDay(),g=(h<m?7:0)+h-m;return p.setUTCDate(p.getUTCDate()-g),p.setUTCHours(0,0,0,0),p}function Bve(e,t){var n,r,s,a,i,l,c,u;ct(1,arguments);var f=At(e),m=f.getUTCFullYear(),p=pf(),h=xr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,h),g.setUTCHours(0,0,0,0);var y=zE(g,t),x=new Date(0);x.setUTCFullYear(m,0,h),x.setUTCHours(0,0,0,0);var v=zE(x,t);return f.getTime()>=y.getTime()?m+1:f.getTime()>=v.getTime()?m:m-1}function $ct(e,t){var n,r,s,a,i,l,c,u;ct(1,arguments);var f=pf(),m=xr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=Bve(e,t),h=new Date(0);h.setUTCFullYear(p,0,m),h.setUTCHours(0,0,0,0);var g=zE(h,t);return g}var Vct=6048e5;function Wct(e,t){ct(1,arguments);var n=At(e),r=zE(n,t).getTime()-$ct(n,t).getTime();return Math.round(r/Vct)+1}function Yn(e,t){for(var n=e<0?"-":"",r=Math.abs(e).toString();r.length<t;)r="0"+r;return n+r}var ed={y:function(t,n){var r=t.getUTCFullYear(),s=r>0?r:1-r;return Yn(n==="yy"?s%100:s,n.length)},M:function(t,n){var r=t.getUTCMonth();return n==="M"?String(r+1):Yn(r+1,2)},d:function(t,n){return Yn(t.getUTCDate(),n.length)},a:function(t,n){var r=t.getUTCHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(t,n){return Yn(t.getUTCHours()%12||12,n.length)},H:function(t,n){return Yn(t.getUTCHours(),n.length)},m:function(t,n){return Yn(t.getUTCMinutes(),n.length)},s:function(t,n){return Yn(t.getUTCSeconds(),n.length)},S:function(t,n){var r=n.length,s=t.getUTCMilliseconds(),a=Math.floor(s*Math.pow(10,r-3));return Yn(a,n.length)}},th={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},Hct={G:function(t,n,r){var s=t.getUTCFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return r.era(s,{width:"abbreviated"});case"GGGGG":return r.era(s,{width:"narrow"});case"GGGG":default:return r.era(s,{width:"wide"})}},y:function(t,n,r){if(n==="yo"){var s=t.getUTCFullYear(),a=s>0?s:1-s;return r.ordinalNumber(a,{unit:"year"})}return ed.y(t,n)},Y:function(t,n,r,s){var a=Bve(t,s),i=a>0?a:1-a;if(n==="YY"){var l=i%100;return Yn(l,2)}return n==="Yo"?r.ordinalNumber(i,{unit:"year"}):Yn(i,n.length)},R:function(t,n){var r=Uve(t);return Yn(r,n.length)},u:function(t,n){var r=t.getUTCFullYear();return Yn(r,n.length)},Q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"Q":return String(s);case"QQ":return Yn(s,2);case"Qo":return r.ordinalNumber(s,{unit:"quarter"});case"QQQ":return r.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(s,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(s,{width:"wide",context:"formatting"})}},q:function(t,n,r){var s=Math.ceil((t.getUTCMonth()+1)/3);switch(n){case"q":return String(s);case"qq":return Yn(s,2);case"qo":return r.ordinalNumber(s,{unit:"quarter"});case"qqq":return r.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(s,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(s,{width:"wide",context:"standalone"})}},M:function(t,n,r){var s=t.getUTCMonth();switch(n){case"M":case"MM":return ed.M(t,n);case"Mo":return r.ordinalNumber(s+1,{unit:"month"});case"MMM":return r.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(s,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(s,{width:"wide",context:"formatting"})}},L:function(t,n,r){var s=t.getUTCMonth();switch(n){case"L":return String(s+1);case"LL":return Yn(s+1,2);case"Lo":return r.ordinalNumber(s+1,{unit:"month"});case"LLL":return r.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(s,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(s,{width:"wide",context:"standalone"})}},w:function(t,n,r,s){var a=Wct(t,s);return n==="wo"?r.ordinalNumber(a,{unit:"week"}):Yn(a,n.length)},I:function(t,n,r){var s=Bct(t);return n==="Io"?r.ordinalNumber(s,{unit:"week"}):Yn(s,n.length)},d:function(t,n,r){return n==="do"?r.ordinalNumber(t.getUTCDate(),{unit:"date"}):ed.d(t,n)},D:function(t,n,r){var s=Dct(t);return n==="Do"?r.ordinalNumber(s,{unit:"dayOfYear"}):Yn(s,n.length)},E:function(t,n,r){var s=t.getUTCDay();switch(n){case"E":case"EE":case"EEE":return r.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(s,{width:"short",context:"formatting"});case"EEEE":default:return r.day(s,{width:"wide",context:"formatting"})}},e:function(t,n,r,s){var a=t.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(n){case"e":return String(i);case"ee":return Yn(i,2);case"eo":return r.ordinalNumber(i,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(t,n,r,s){var a=t.getUTCDay(),i=(a-s.weekStartsOn+8)%7||7;switch(n){case"c":return String(i);case"cc":return Yn(i,n.length);case"co":return r.ordinalNumber(i,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(t,n,r){var s=t.getUTCDay(),a=s===0?7:s;switch(n){case"i":return String(a);case"ii":return Yn(a,n.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(s,{width:"short",context:"formatting"});case"iiii":default:return r.day(s,{width:"wide",context:"formatting"})}},a:function(t,n,r){var s=t.getUTCHours(),a=s/12>=1?"pm":"am";switch(n){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(t,n,r){var s=t.getUTCHours(),a;switch(s===12?a=th.noon:s===0?a=th.midnight:a=s/12>=1?"pm":"am",n){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(t,n,r){var s=t.getUTCHours(),a;switch(s>=17?a=th.evening:s>=12?a=th.afternoon:s>=4?a=th.morning:a=th.night,n){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(t,n,r){if(n==="ho"){var s=t.getUTCHours()%12;return s===0&&(s=12),r.ordinalNumber(s,{unit:"hour"})}return ed.h(t,n)},H:function(t,n,r){return n==="Ho"?r.ordinalNumber(t.getUTCHours(),{unit:"hour"}):ed.H(t,n)},K:function(t,n,r){var s=t.getUTCHours()%12;return n==="Ko"?r.ordinalNumber(s,{unit:"hour"}):Yn(s,n.length)},k:function(t,n,r){var s=t.getUTCHours();return s===0&&(s=24),n==="ko"?r.ordinalNumber(s,{unit:"hour"}):Yn(s,n.length)},m:function(t,n,r){return n==="mo"?r.ordinalNumber(t.getUTCMinutes(),{unit:"minute"}):ed.m(t,n)},s:function(t,n,r){return n==="so"?r.ordinalNumber(t.getUTCSeconds(),{unit:"second"}):ed.s(t,n)},S:function(t,n){return ed.S(t,n)},X:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();if(i===0)return"Z";switch(n){case"X":return NZ(i);case"XXXX":case"XX":return Jf(i);case"XXXXX":case"XXX":default:return Jf(i,":")}},x:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"x":return NZ(i);case"xxxx":case"xx":return Jf(i);case"xxxxx":case"xxx":default:return Jf(i,":")}},O:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+TZ(i,":");case"OOOO":default:return"GMT"+Jf(i,":")}},z:function(t,n,r,s){var a=s._originalDate||t,i=a.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+TZ(i,":");case"zzzz":default:return"GMT"+Jf(i,":")}},t:function(t,n,r,s){var a=s._originalDate||t,i=Math.floor(a.getTime()/1e3);return Yn(i,n.length)},T:function(t,n,r,s){var a=s._originalDate||t,i=a.getTime();return Yn(i,n.length)}};function TZ(e,t){var n=e>0?"-":"+",r=Math.abs(e),s=Math.floor(r/60),a=r%60;if(a===0)return n+String(s);var i=t;return n+String(s)+i+Yn(a,2)}function NZ(e,t){if(e%60===0){var n=e>0?"-":"+";return n+Yn(Math.abs(e)/60,2)}return Jf(e,t)}function Jf(e,t){var n=t||"",r=e>0?"-":"+",s=Math.abs(e),a=Yn(Math.floor(s/60),2),i=Yn(s%60,2);return r+a+n+i}var jZ=function(t,n){switch(t){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},$ve=function(t,n){switch(t){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},zct=function(t,n){var r=t.match(/(P+)(p+)?/)||[],s=r[1],a=r[2];if(!a)return jZ(t,n);var i;switch(s){case"P":i=n.dateTime({width:"short"});break;case"PP":i=n.dateTime({width:"medium"});break;case"PPP":i=n.dateTime({width:"long"});break;case"PPPP":default:i=n.dateTime({width:"full"});break}return i.replace("{{date}}",jZ(s,n)).replace("{{time}}",$ve(a,n))},Gct={p:$ve,P:zct},qct=["D","DD"],Kct=["YY","YYYY"];function Yct(e){return qct.indexOf(e)!==-1}function Qct(e){return Kct.indexOf(e)!==-1}function AZ(e,t,n){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(t,"`) for formatting years to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(t,"`) for formatting days of the month to the input `").concat(n,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Xct={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},Zct=function(t,n,r){var s,a=Xct[t];return typeof a=="string"?s=a:n===1?s=a.one:s=a.other.replace("{{count}}",n.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+s:s+" ago":s};function O6(e){return function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.width?String(t.width):e.defaultWidth,r=e.formats[n]||e.formats[e.defaultWidth];return r}}var Jct={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},eut={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},tut={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},nut={date:O6({formats:Jct,defaultWidth:"full"}),time:O6({formats:eut,defaultWidth:"full"}),dateTime:O6({formats:tut,defaultWidth:"full"})},rut={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},sut=function(t,n,r,s){return rut[t]};function Sv(e){return function(t,n){var r=n!=null&&n.context?String(n.context):"standalone",s;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,i=n!=null&&n.width?String(n.width):a;s=e.formattingValues[i]||e.formattingValues[a]}else{var l=e.defaultWidth,c=n!=null&&n.width?String(n.width):e.defaultWidth;s=e.values[c]||e.values[l]}var u=e.argumentCallback?e.argumentCallback(t):t;return s[u]}}var aut={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},out={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},iut={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},lut={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},cut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},uut={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},dut=function(t,n){var r=Number(t),s=r%100;if(s>20||s<10)switch(s%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},fut={ordinalNumber:dut,era:Sv({values:aut,defaultWidth:"wide"}),quarter:Sv({values:out,defaultWidth:"wide",argumentCallback:function(t){return t-1}}),month:Sv({values:iut,defaultWidth:"wide"}),day:Sv({values:lut,defaultWidth:"wide"}),dayPeriod:Sv({values:cut,defaultWidth:"wide",formattingValues:uut,defaultFormattingWidth:"wide"})};function Ev(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.width,s=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=t.match(s);if(!a)return null;var i=a[0],l=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],c=Array.isArray(l)?put(l,function(m){return m.test(i)}):mut(l,function(m){return m.test(i)}),u;u=e.valueCallback?e.valueCallback(c):c,u=n.valueCallback?n.valueCallback(u):u;var f=t.slice(i.length);return{value:u,rest:f}}}function mut(e,t){for(var n in e)if(e.hasOwnProperty(n)&&t(e[n]))return n}function put(e,t){for(var n=0;n<e.length;n++)if(t(e[n]))return n}function hut(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.match(e.matchPattern);if(!r)return null;var s=r[0],a=t.match(e.parsePattern);if(!a)return null;var i=e.valueCallback?e.valueCallback(a[0]):a[0];i=n.valueCallback?n.valueCallback(i):i;var l=t.slice(s.length);return{value:i,rest:l}}}var gut=/^(\d+)(th|st|nd|rd)?/i,yut=/\d+/i,xut={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},vut={any:[/^b/i,/^(a|c)/i]},but={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},_ut={any:[/1/i,/2/i,/3/i,/4/i]},wut={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},Cut={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},Sut={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},Eut={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},Mut={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},kut={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},Tut={ordinalNumber:hut({matchPattern:gut,parsePattern:yut,valueCallback:function(t){return parseInt(t,10)}}),era:Ev({matchPatterns:xut,defaultMatchWidth:"wide",parsePatterns:vut,defaultParseWidth:"any"}),quarter:Ev({matchPatterns:but,defaultMatchWidth:"wide",parsePatterns:_ut,defaultParseWidth:"any",valueCallback:function(t){return t+1}}),month:Ev({matchPatterns:wut,defaultMatchWidth:"wide",parsePatterns:Cut,defaultParseWidth:"any"}),day:Ev({matchPatterns:Sut,defaultMatchWidth:"wide",parsePatterns:Eut,defaultParseWidth:"any"}),dayPeriod:Ev({matchPatterns:Mut,defaultMatchWidth:"any",parsePatterns:kut,defaultParseWidth:"any"})},Vve={code:"en-US",formatDistance:Zct,formatLong:nut,formatRelative:sut,localize:fut,match:Tut,options:{weekStartsOn:0,firstWeekContainsDate:1}},Nut=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,jut=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Aut=/^'([^]*?)'?$/,Iut=/''/g,Rut=/[a-zA-Z]/;function $u(e,t,n){var r,s,a,i,l,c,u,f,m,p,h,g,y,x,v,b,_,w;ct(2,arguments);var C=String(t),S=pf(),E=(r=(s=n?.locale)!==null&&s!==void 0?s:S.locale)!==null&&r!==void 0?r:Vve,k=xr((a=(i=(l=(c=n?.firstWeekContainsDate)!==null&&c!==void 0?c:n==null||(u=n.locale)===null||u===void 0||(f=u.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&l!==void 0?l:S.firstWeekContainsDate)!==null&&i!==void 0?i:(m=S.locale)===null||m===void 0||(p=m.options)===null||p===void 0?void 0:p.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(k>=1&&k<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var M=xr((h=(g=(y=(x=n?.weekStartsOn)!==null&&x!==void 0?x:n==null||(v=n.locale)===null||v===void 0||(b=v.options)===null||b===void 0?void 0:b.weekStartsOn)!==null&&y!==void 0?y:S.weekStartsOn)!==null&&g!==void 0?g:(_=S.locale)===null||_===void 0||(w=_.options)===null||w===void 0?void 0:w.weekStartsOn)!==null&&h!==void 0?h:0);if(!(M>=0&&M<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!E.localize)throw new RangeError("locale must contain localize property");if(!E.formatLong)throw new RangeError("locale must contain formatLong property");var j=At(e);if(!bct(j))throw new RangeError("Invalid time value");var R=z1(j),O=Lct(j,R),D={firstWeekContainsDate:k,weekStartsOn:M,locale:E,_originalDate:j},P=C.match(jut).map(function(A){var T=A[0];if(T==="p"||T==="P"){var N=Gct[T];return N(A,E.formatLong)}return A}).join("").match(Nut).map(function(A){if(A==="''")return"'";var T=A[0];if(T==="'")return Put(A);var N=Hct[T];if(N)return!(n!=null&&n.useAdditionalWeekYearTokens)&&Qct(A)&&AZ(A,t,String(e)),!(n!=null&&n.useAdditionalDayOfYearTokens)&&Yct(A)&&AZ(A,t,String(e)),N(O,A,E.localize,D);if(T.match(Rut))throw new RangeError("Format string contains an unescaped latin alphabet character `"+T+"`");return A}).join("");return P}function Put(e){var t=e.match(Aut);return t?t[1].replace(Iut,"'"):e}function Lut(e){ct(1,arguments);var t=At(e),n=t.getFullYear(),r=t.getMonth(),s=new Date(0);return s.setFullYear(n,r+1,0),s.setHours(0,0,0,0),s.getDate()}var Out=6048e5;function Dut(e){ct(1,arguments);var t=At(e),n=Vm(t).getTime()-mct(t).getTime();return Math.round(n/Out)+1}function Fut(e){ct(1,arguments);var t=At(e),n=t.getTime();return n}function Uut(e){return ct(1,arguments),Math.floor(Fut(e)/1e3)}function But(e,t){var n,r,s,a,i,l,c,u;ct(1,arguments);var f=At(e),m=f.getFullYear(),p=pf(),h=xr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:p.firstWeekContainsDate)!==null&&r!==void 0?r:(c=p.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1);if(!(h>=1&&h<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setFullYear(m+1,0,h),g.setHours(0,0,0,0);var y=pc(g,t),x=new Date(0);x.setFullYear(m,0,h),x.setHours(0,0,0,0);var v=pc(x,t);return f.getTime()>=y.getTime()?m+1:f.getTime()>=v.getTime()?m:m-1}function $ut(e,t){var n,r,s,a,i,l,c,u;ct(1,arguments);var f=pf(),m=xr((n=(r=(s=(a=t?.firstWeekContainsDate)!==null&&a!==void 0?a:t==null||(i=t.locale)===null||i===void 0||(l=i.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&s!==void 0?s:f.firstWeekContainsDate)!==null&&r!==void 0?r:(c=f.locale)===null||c===void 0||(u=c.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&n!==void 0?n:1),p=But(e,t),h=new Date(0);h.setFullYear(p,0,m),h.setHours(0,0,0,0);var g=pc(h,t);return g}var Vut=6048e5;function Wut(e,t){ct(1,arguments);var n=At(e),r=pc(n,t).getTime()-$ut(n,t).getTime();return Math.round(r/Vut)+1}function Hut(e){ct(1,arguments);var t=At(e),n=t.getMonth();return t.setFullYear(t.getFullYear(),n+1,0),t.setHours(0,0,0,0),t}function zut(e,t){return ct(1,arguments),wct(Hut(e),go(e),t)+1}function Gut(e){ct(1,arguments);var t=At(e.start),n=At(e.end);if(isNaN(t.getTime()))throw new RangeError("Start Date is invalid");if(isNaN(n.getTime()))throw new RangeError("End Date is invalid");var r={};r.years=Math.abs(Rct(n,t));var s=ug(n,t),a=Cv(t,{years:s*r.years});r.months=Math.abs(Act(n,a));var i=Cv(a,{months:s*r.months});r.days=Math.abs(Sct(n,i));var l=Cv(i,{days:s*r.days});r.hours=Math.abs(kct(n,l));var c=Cv(l,{hours:s*r.hours});r.minutes=Math.abs(Tct(n,c));var u=Cv(c,{minutes:s*r.minutes});return r.seconds=Math.abs(Ict(n,u)),r}function Wve(e,t){ct(2,arguments);var n=At(e),r=At(t);return n.getTime()>r.getTime()}function Hve(e,t){ct(2,arguments);var n=At(e),r=At(t);return n.getTime()<r.getTime()}function w8(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function qut(e,t){if(e){if(typeof e=="string")return w8(e,t);var n={}.toString.call(e).slice(8,-1);return n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set"?Array.from(e):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w8(e,t):void 0}}function Kut(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C8(e,t){return C8=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},C8(e,t)}function Yut(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C8(e,t)}function GE(e){return GE=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},GE(e)}function Qut(e,t){if(t&&(Va(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Kut(e)}function Xut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Zut(e,t){if(Va(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Va(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zve(e){var t=Zut(e,"string");return Va(t)=="symbol"?t:t+""}function IZ(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zve(r.key),r)}}function Jut(e,t,n){return t&&IZ(e.prototype,t),n&&IZ(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kc(e,t,n){return(t=zve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mB(e,t){ct(2,arguments);var n=At(e),r=At(t);return n.getFullYear()===r.getFullYear()&&n.getMonth()===r.getMonth()}function Gve(e,t){ct(2,arguments);var n=At(e),r=At(t);return n.getFullYear()===r.getFullYear()}function edt(e){return ct(1,arguments),Gve(e,Date.now())}function pB(e){return ct(1,arguments),qs(e,Date.now())}function tdt(e){return ct(1,arguments),qs(e,Gs(Date.now(),1))}function S8(e,t){ct(2,arguments);var n=xr(t);return Gs(e,-n)}function ndt(e){return ct(1,arguments),qs(e,S8(Date.now(),1))}function rdt(e){return ct(1,arguments),Math.floor(e*Dve)}function sdt(e){return ct(1,arguments),e*vct}function D6(e,t){ct(2,arguments);var n=At(e),r=xr(t),s=n.getFullYear(),a=n.getDate(),i=new Date(0);i.setFullYear(s,r,15),i.setHours(0,0,0,0);var l=Lut(i);return n.setMonth(r,Math.min(a,l)),n}function RZ(e,t){ct(2,arguments);var n=At(e),r=xr(t);return isNaN(n.getTime())?new Date(NaN):(n.setFullYear(r),n)}var E8=["MO","TU","WE","TH","FR","SA","SU"],Aa=function(){function e(t,n){if(n===0)throw new Error("Can't create weekday with n == 0");this.weekday=t,this.n=n}return e.fromStr=function(t){return new e(E8.indexOf(t))},e.prototype.nth=function(t){return this.n===t?this:new e(this.weekday,t)},e.prototype.equals=function(t){return this.weekday===t.weekday&&this.n===t.n},e.prototype.toString=function(){var t=E8[this.weekday];return this.n&&(t=(this.n>0?"+":"")+String(this.n)+t),t},e.prototype.getJsWeekday=function(){return this.weekday===6?0:this.weekday+1},e}(),Gr=function(e){return e!=null},Nl=function(e){return typeof e=="number"},PZ=function(e){return typeof e=="string"&&E8.includes(e)},Fo=Array.isArray,jc=function(e,t){t===void 0&&(t=e),arguments.length===1&&(t=e,e=0);for(var n=[],r=e;r<t;r++)n.push(r);return n},Pn=function(e,t){var n=0,r=[];if(Fo(e))for(;n<t;n++)r[n]=[].concat(e);else for(;n<t;n++)r[n]=e;return r},adt=function(e){return Fo(e)?e:[e]};function nh(e,t,n){n===void 0&&(n=" ");var r=String(e);return t=t>>0,r.length>t?String(r):(t=t-r.length,t>n.length&&(n+=Pn(n,t/n.length)),n.slice(0,t)+String(r))}var odt=function(e,t,n){var r=e.split(t);return n?r.slice(0,n).concat([r.slice(n).join(t)]):r},gi=function(e,t){var n=e%t;return n*t<0?n+t:n},F6=function(e,t){return{div:Math.floor(e/t),mod:gi(e,t)}},Pl=function(e){return!Gr(e)||e.length===0},ws=function(e){return!Pl(e)},rr=function(e,t){return ws(e)&&e.indexOf(t)!==-1},Wm=function(e,t,n,r,s,a){return r===void 0&&(r=0),s===void 0&&(s=0),a===void 0&&(a=0),new Date(Date.UTC(e,t-1,n,r,s,a))},idt=[31,28,31,30,31,30,31,31,30,31,30,31],qve=1e3*60*60*24,Kve=9999,Yve=Wm(1970,1,1),ldt=[6,0,1,2,3,4,5],L0=function(e){return e%4===0&&e%100!==0||e%400===0},Qve=function(e){return e instanceof Date},n0=function(e){return Qve(e)&&!isNaN(e.getTime())},cdt=function(e,t){var n=e.getTime(),r=t.getTime(),s=n-r;return Math.round(s/qve)},M8=function(e){return cdt(e,Yve)},Xve=function(e){return new Date(Yve.getTime()+e*qve)},udt=function(e){var t=e.getUTCMonth();return t===1&&L0(e.getUTCFullYear())?29:idt[t]},Xg=function(e){return ldt[e.getUTCDay()]},LZ=function(e,t){var n=Wm(e,t+1,1);return[Xg(n),udt(n)]},Zve=function(e,t){return t=t||e,new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()))},k8=function(e){var t=new Date(e.getTime());return t},OZ=function(e){for(var t=[],n=0;n<e.length;n++)t.push(k8(e[n]));return t},G1=function(e){e.sort(function(t,n){return t.getTime()-n.getTime()})},hB=function(e,t){t===void 0&&(t=!0);var n=new Date(e);return[nh(n.getUTCFullYear().toString(),4,"0"),nh(n.getUTCMonth()+1,2,"0"),nh(n.getUTCDate(),2,"0"),"T",nh(n.getUTCHours(),2,"0"),nh(n.getUTCMinutes(),2,"0"),nh(n.getUTCSeconds(),2,"0"),t?"Z":""].join("")},gB=function(e){var t=/^(\d{4})(\d{2})(\d{2})(T(\d{2})(\d{2})(\d{2})Z?)?$/,n=t.exec(e);if(!n)throw new Error("Invalid UNTIL value: ".concat(e));return new Date(Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[5],10)||0,parseInt(n[6],10)||0,parseInt(n[7],10)||0))},DZ=function(e,t){var n=e.toLocaleString("sv-SE",{timeZone:t});return n.replace(" ","T")+"Z"},ddt=function(e,t){var n=Intl.DateTimeFormat().resolvedOptions().timeZone,r=new Date(DZ(e,n)),s=new Date(DZ(e,t??"UTC")),a=s.getTime()-r.getTime();return new Date(e.getTime()-a)},$h=function(){function e(t,n){this.minDate=null,this.maxDate=null,this._result=[],this.total=0,this.method=t,this.args=n,t==="between"?(this.maxDate=n.inc?n.before:new Date(n.before.getTime()-1),this.minDate=n.inc?n.after:new Date(n.after.getTime()+1)):t==="before"?this.maxDate=n.inc?n.dt:new Date(n.dt.getTime()-1):t==="after"&&(this.minDate=n.inc?n.dt:new Date(n.dt.getTime()+1))}return e.prototype.accept=function(t){++this.total;var n=this.minDate&&t<this.minDate,r=this.maxDate&&t>this.maxDate;if(this.method==="between"){if(n)return!0;if(r)return!1}else if(this.method==="before"){if(r)return!1}else if(this.method==="after")return n?!0:(this.add(t),!1);return this.add(t)},e.prototype.add=function(t){return this._result.push(t),!0},e.prototype.getValue=function(){var t=this._result;switch(this.method){case"all":case"between":return t;case"before":case"after":default:return t.length?t[t.length-1]:null}},e.prototype.clone=function(){return new e(this.method,this.args)},e}(),FZ=function(e){kO(t,e);function t(n,r,s){var a=e.call(this,n,r)||this;return a.iterator=s,a}return t.prototype.add=function(n){return this.iterator(n,this._result.length)?(this._result.push(n),!0):!1},t}($h),qE={dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],tokens:{SKIP:/^[ \r\n\t]+|^\.$/,number:/^[1-9][0-9]*/,numberAsText:/^(one|two|three)/i,every:/^every/i,"day(s)":/^days?/i,"weekday(s)":/^weekdays?/i,"week(s)":/^weeks?/i,"hour(s)":/^hours?/i,"minute(s)":/^minutes?/i,"month(s)":/^months?/i,"year(s)":/^years?/i,on:/^(on|in)/i,at:/^(at)/i,the:/^the/i,first:/^first/i,second:/^second/i,third:/^third/i,nth:/^([1-9][0-9]*)(\.|th|nd|rd|st)/i,last:/^last/i,for:/^for/i,"time(s)":/^times?/i,until:/^(un)?til/i,monday:/^mo(n(day)?)?/i,tuesday:/^tu(e(s(day)?)?)?/i,wednesday:/^we(d(n(esday)?)?)?/i,thursday:/^th(u(r(sday)?)?)?/i,friday:/^fr(i(day)?)?/i,saturday:/^sa(t(urday)?)?/i,sunday:/^su(n(day)?)?/i,january:/^jan(uary)?/i,february:/^feb(ruary)?/i,march:/^mar(ch)?/i,april:/^apr(il)?/i,may:/^may/i,june:/^june?/i,july:/^july?/i,august:/^aug(ust)?/i,september:/^sep(t(ember)?)?/i,october:/^oct(ober)?/i,november:/^nov(ember)?/i,december:/^dec(ember)?/i,comma:/^(,\s*|(and|or)\s*)+/i}},UZ=function(e,t){return e.indexOf(t)!==-1},fdt=function(e){return e.toString()},mdt=function(e,t,n){return"".concat(t," ").concat(n,", ").concat(e)},Vu=function(){function e(t,n,r,s){if(n===void 0&&(n=fdt),r===void 0&&(r=qE),s===void 0&&(s=mdt),this.text=[],this.language=r||qE,this.gettext=n,this.dateFormatter=s,this.rrule=t,this.options=t.options,this.origOptions=t.origOptions,this.origOptions.bymonthday){var a=[].concat(this.options.bymonthday),i=[].concat(this.options.bynmonthday);a.sort(function(f,m){return f-m}),i.sort(function(f,m){return m-f}),this.bymonthday=a.concat(i),this.bymonthday.length||(this.bymonthday=null)}if(Gr(this.origOptions.byweekday)){var l=Fo(this.origOptions.byweekday)?this.origOptions.byweekday:[this.origOptions.byweekday],c=String(l);this.byweekday={allWeeks:l.filter(function(f){return!f.n}),someWeeks:l.filter(function(f){return!!f.n}),isWeekdays:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")===-1&&c.indexOf("SU")===-1,isEveryDay:c.indexOf("MO")!==-1&&c.indexOf("TU")!==-1&&c.indexOf("WE")!==-1&&c.indexOf("TH")!==-1&&c.indexOf("FR")!==-1&&c.indexOf("SA")!==-1&&c.indexOf("SU")!==-1};var u=function(f,m){return f.weekday-m.weekday};this.byweekday.allWeeks.sort(u),this.byweekday.someWeeks.sort(u),this.byweekday.allWeeks.length||(this.byweekday.allWeeks=null),this.byweekday.someWeeks.length||(this.byweekday.someWeeks=null)}else this.byweekday=null}return e.isFullyConvertible=function(t){var n=!0;if(!(t.options.freq in e.IMPLEMENTED)||t.origOptions.until&&t.origOptions.count)return!1;for(var r in t.origOptions){if(UZ(["dtstart","tzid","wkst","freq"],r))return!0;if(!UZ(e.IMPLEMENTED[t.options.freq],r))return!1}return n},e.prototype.isFullyConvertible=function(){return e.isFullyConvertible(this.rrule)},e.prototype.toString=function(){var t=this.gettext;if(!(this.options.freq in e.IMPLEMENTED))return t("RRule error: Unable to fully convert this rrule to text");if(this.text=[t("every")],this[ft.FREQUENCIES[this.options.freq]](),this.options.until){this.add(t("until"));var n=this.options.until;this.add(this.dateFormatter(n.getUTCFullYear(),this.language.monthNames[n.getUTCMonth()],n.getUTCDate()))}else this.options.count&&this.add(t("for")).add(this.options.count.toString()).add(this.plural(this.options.count)?t("times"):t("time"));return this.isFullyConvertible()||this.add(t("(~ approximate)")),this.text.join("")},e.prototype.HOURLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("hours"):t("hour"))},e.prototype.MINUTELY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("minutes"):t("minute"))},e.prototype.DAILY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()),this.byweekday&&this.byweekday.isWeekdays?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(this.plural(this.options.interval)?t("days"):t("day")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday?this._byweekday():this.origOptions.byhour&&this._byhour()},e.prototype.WEEKLY=function(){var t=this.gettext;this.options.interval!==1&&this.add(this.options.interval.toString()).add(this.plural(this.options.interval)?t("weeks"):t("week")),this.byweekday&&this.byweekday.isWeekdays?this.options.interval===1?this.add(this.plural(this.options.interval)?t("weekdays"):t("weekday")):this.add(t("on")).add(t("weekdays")):this.byweekday&&this.byweekday.isEveryDay?this.add(this.plural(this.options.interval)?t("days"):t("day")):(this.options.interval===1&&this.add(t("week")),this.origOptions.bymonth&&(this.add(t("in")),this._bymonth()),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.origOptions.byhour&&this._byhour())},e.prototype.MONTHLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()).add(t("months")),this.plural(this.options.interval)&&this.add(t("in"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("months"):t("month"))),this.bymonthday?this._bymonthday():this.byweekday&&this.byweekday.isWeekdays?this.add(t("on")).add(t("weekdays")):this.byweekday&&this._byweekday()},e.prototype.YEARLY=function(){var t=this.gettext;this.origOptions.bymonth?(this.options.interval!==1&&(this.add(this.options.interval.toString()),this.add(t("years"))),this._bymonth()):(this.options.interval!==1&&this.add(this.options.interval.toString()),this.add(this.plural(this.options.interval)?t("years"):t("year"))),this.bymonthday?this._bymonthday():this.byweekday&&this._byweekday(),this.options.byyearday&&this.add(t("on the")).add(this.list(this.options.byyearday,this.nth,t("and"))).add(t("day")),this.options.byweekno&&this.add(t("in")).add(this.plural(this.options.byweekno.length)?t("weeks"):t("week")).add(this.list(this.options.byweekno,void 0,t("and")))},e.prototype._bymonthday=function(){var t=this.gettext;this.byweekday&&this.byweekday.allWeeks?this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext,t("or"))).add(t("the")).add(this.list(this.bymonthday,this.nth,t("or"))):this.add(t("on the")).add(this.list(this.bymonthday,this.nth,t("and")))},e.prototype._byweekday=function(){var t=this.gettext;this.byweekday.allWeeks&&!this.byweekday.isWeekdays&&this.add(t("on")).add(this.list(this.byweekday.allWeeks,this.weekdaytext)),this.byweekday.someWeeks&&(this.byweekday.allWeeks&&this.add(t("and")),this.add(t("on the")).add(this.list(this.byweekday.someWeeks,this.weekdaytext,t("and"))))},e.prototype._byhour=function(){var t=this.gettext;this.add(t("at")).add(this.list(this.origOptions.byhour,void 0,t("and")))},e.prototype._bymonth=function(){this.add(this.list(this.options.bymonth,this.monthtext,this.gettext("and")))},e.prototype.nth=function(t){t=parseInt(t.toString(),10);var n,r=this.gettext;if(t===-1)return r("last");var s=Math.abs(t);switch(s){case 1:case 21:case 31:n=s+r("st");break;case 2:case 22:n=s+r("nd");break;case 3:case 23:n=s+r("rd");break;default:n=s+r("th")}return t<0?n+" "+r("last"):n},e.prototype.monthtext=function(t){return this.language.monthNames[t-1]},e.prototype.weekdaytext=function(t){var n=Nl(t)?(t+1)%7:t.getJsWeekday();return(t.n?this.nth(t.n)+" ":"")+this.language.dayNames[n]},e.prototype.plural=function(t){return t%100!==1},e.prototype.add=function(t){return this.text.push(" "),this.text.push(t),this},e.prototype.list=function(t,n,r,s){var a=this;s===void 0&&(s=","),Fo(t)||(t=[t]);var i=function(c,u,f){for(var m="",p=0;p<c.length;p++)p!==0&&(p===c.length-1?m+=" "+f+" ":m+=u+" "),m+=c[p];return m};n=n||function(c){return c.toString()};var l=function(c){return n&&n.call(a,c)};return r?i(t.map(l),s,r):t.map(l).join(s+" ")},e}(),pdt=function(){function e(t){this.done=!0,this.rules=t}return e.prototype.start=function(t){return this.text=t,this.done=!1,this.nextSymbol()},e.prototype.isDone=function(){return this.done&&this.symbol===null},e.prototype.nextSymbol=function(){var t,n;this.symbol=null,this.value=null;do{if(this.done)return!1;var r=void 0;t=null;for(var s in this.rules){r=this.rules[s];var a=r.exec(this.text);a&&(t===null||a[0].length>t[0].length)&&(t=a,n=s)}if(t!=null&&(this.text=this.text.substr(t[0].length),this.text===""&&(this.done=!0)),t==null){this.done=!0,this.symbol=null,this.value=null;return}}while(n==="SKIP");return this.symbol=n,this.value=t,!0},e.prototype.accept=function(t){if(this.symbol===t){if(this.value){var n=this.value;return this.nextSymbol(),n}return this.nextSymbol(),!0}return!1},e.prototype.acceptNumber=function(){return this.accept("number")},e.prototype.expect=function(t){if(this.accept(t))return!0;throw new Error("expected "+t+" but found "+this.symbol)},e}();function Jve(e,t){t===void 0&&(t=qE);var n={},r=new pdt(t.tokens);if(!r.start(e))return null;return s(),n;function s(){r.expect("every");var p=r.acceptNumber();if(p&&(n.interval=parseInt(p[0],10)),r.isDone())throw new Error("Unexpected end");switch(r.symbol){case"day(s)":n.freq=ft.DAILY,r.nextSymbol()&&(i(),m());break;case"weekday(s)":n.freq=ft.WEEKLY,n.byweekday=[ft.MO,ft.TU,ft.WE,ft.TH,ft.FR],r.nextSymbol(),i(),m();break;case"week(s)":n.freq=ft.WEEKLY,r.nextSymbol()&&(a(),i(),m());break;case"hour(s)":n.freq=ft.HOURLY,r.nextSymbol()&&(a(),m());break;case"minute(s)":n.freq=ft.MINUTELY,r.nextSymbol()&&(a(),m());break;case"month(s)":n.freq=ft.MONTHLY,r.nextSymbol()&&(a(),m());break;case"year(s)":n.freq=ft.YEARLY,r.nextSymbol()&&(a(),m());break;case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":n.freq=ft.WEEKLY;var h=r.symbol.substr(0,2).toUpperCase();if(n.byweekday=[ft[h]],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var g=c();if(!g)throw new Error("Unexpected symbol "+r.symbol+", expected weekday");n.byweekday.push(ft[g]),r.nextSymbol()}i(),f(),m();break;case"january":case"february":case"march":case"april":case"may":case"june":case"july":case"august":case"september":case"october":case"november":case"december":if(n.freq=ft.YEARLY,n.bymonth=[l()],!r.nextSymbol())return;for(;r.accept("comma");){if(r.isDone())throw new Error("Unexpected end");var y=l();if(!y)throw new Error("Unexpected symbol "+r.symbol+", expected month");n.bymonth.push(y),r.nextSymbol()}a(),m();break;default:throw new Error("Unknown symbol")}}function a(){var p=r.accept("on"),h=r.accept("the");if(p||h)do{var g=u(),y=c(),x=l();if(g)y?(r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(ft[y].nth(g))):(n.bymonthday||(n.bymonthday=[]),n.bymonthday.push(g),r.accept("day(s)"));else if(y)r.nextSymbol(),n.byweekday||(n.byweekday=[]),n.byweekday.push(ft[y]);else if(r.symbol==="weekday(s)")r.nextSymbol(),n.byweekday||(n.byweekday=[ft.MO,ft.TU,ft.WE,ft.TH,ft.FR]);else if(r.symbol==="week(s)"){r.nextSymbol();var v=r.acceptNumber();if(!v)throw new Error("Unexpected symbol "+r.symbol+", expected week number");for(n.byweekno=[parseInt(v[0],10)];r.accept("comma");){if(v=r.acceptNumber(),!v)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.byweekno.push(parseInt(v[0],10))}}else if(x)r.nextSymbol(),n.bymonth||(n.bymonth=[]),n.bymonth.push(x);else return}while(r.accept("comma")||r.accept("the")||r.accept("on"))}function i(){var p=r.accept("at");if(p)do{var h=r.acceptNumber();if(!h)throw new Error("Unexpected symbol "+r.symbol+", expected hour");for(n.byhour=[parseInt(h[0],10)];r.accept("comma");){if(h=r.acceptNumber(),!h)throw new Error("Unexpected symbol "+r.symbol+"; expected hour");n.byhour.push(parseInt(h[0],10))}}while(r.accept("comma")||r.accept("at"))}function l(){switch(r.symbol){case"january":return 1;case"february":return 2;case"march":return 3;case"april":return 4;case"may":return 5;case"june":return 6;case"july":return 7;case"august":return 8;case"september":return 9;case"october":return 10;case"november":return 11;case"december":return 12;default:return!1}}function c(){switch(r.symbol){case"monday":case"tuesday":case"wednesday":case"thursday":case"friday":case"saturday":case"sunday":return r.symbol.substr(0,2).toUpperCase();default:return!1}}function u(){switch(r.symbol){case"last":return r.nextSymbol(),-1;case"first":return r.nextSymbol(),1;case"second":return r.nextSymbol(),r.accept("last")?-2:2;case"third":return r.nextSymbol(),r.accept("last")?-3:3;case"nth":var p=parseInt(r.value[1],10);if(p<-366||p>366)throw new Error("Nth out of range: "+p);return r.nextSymbol(),r.accept("last")?-p:p;default:return!1}}function f(){r.accept("on"),r.accept("the");var p=u();if(p)for(n.bymonthday=[p],r.nextSymbol();r.accept("comma");){if(p=u(),!p)throw new Error("Unexpected symbol "+r.symbol+"; expected monthday");n.bymonthday.push(p),r.nextSymbol()}}function m(){if(r.symbol==="until"){var p=Date.parse(r.text);if(!p)throw new Error("Cannot parse until date:"+r.text);n.until=new Date(p)}else r.accept("for")&&(n.count=parseInt(r.value[0],10),r.expect("number"))}}var On;(function(e){e[e.YEARLY=0]="YEARLY",e[e.MONTHLY=1]="MONTHLY",e[e.WEEKLY=2]="WEEKLY",e[e.DAILY=3]="DAILY",e[e.HOURLY=4]="HOURLY",e[e.MINUTELY=5]="MINUTELY",e[e.SECONDLY=6]="SECONDLY"})(On||(On={}));function yB(e){return e<On.HOURLY}var hdt=function(e,t){return t===void 0&&(t=qE),new ft(Jve(e,t)||void 0)},hx=["count","until","interval","byweekday","bymonthday","bymonth"];Vu.IMPLEMENTED=[];Vu.IMPLEMENTED[On.HOURLY]=hx;Vu.IMPLEMENTED[On.MINUTELY]=hx;Vu.IMPLEMENTED[On.DAILY]=["byhour"].concat(hx);Vu.IMPLEMENTED[On.WEEKLY]=hx;Vu.IMPLEMENTED[On.MONTHLY]=hx;Vu.IMPLEMENTED[On.YEARLY]=["byweekno","byyearday"].concat(hx);var gdt=function(e,t,n,r){return new Vu(e,t,n,r).toString()},ydt=Vu.isFullyConvertible,KE=function(){function e(t,n,r,s){this.hour=t,this.minute=n,this.second=r,this.millisecond=s||0}return e.prototype.getHours=function(){return this.hour},e.prototype.getMinutes=function(){return this.minute},e.prototype.getSeconds=function(){return this.second},e.prototype.getMilliseconds=function(){return this.millisecond},e.prototype.getTime=function(){return(this.hour*60*60+this.minute*60+this.second)*1e3+this.millisecond},e}(),xdt=function(e){kO(t,e);function t(n,r,s,a,i,l,c){var u=e.call(this,a,i,l,c)||this;return u.year=n,u.month=r,u.day=s,u}return t.fromDate=function(n){return new this(n.getUTCFullYear(),n.getUTCMonth()+1,n.getUTCDate(),n.getUTCHours(),n.getUTCMinutes(),n.getUTCSeconds(),n.valueOf()%1e3)},t.prototype.getWeekday=function(){return Xg(new Date(this.getTime()))},t.prototype.getTime=function(){return new Date(Date.UTC(this.year,this.month-1,this.day,this.hour,this.minute,this.second,this.millisecond)).getTime()},t.prototype.getDay=function(){return this.day},t.prototype.getMonth=function(){return this.month},t.prototype.getYear=function(){return this.year},t.prototype.addYears=function(n){this.year+=n},t.prototype.addMonths=function(n){if(this.month+=n,this.month>12){var r=Math.floor(this.month/12),s=gi(this.month,12);this.month=s,this.year+=r,this.month===0&&(this.month=12,--this.year)}},t.prototype.addWeekly=function(n,r){r>this.getWeekday()?this.day+=-(this.getWeekday()+1+(6-r))+n*7:this.day+=-(this.getWeekday()-r)+n*7,this.fixDay()},t.prototype.addDaily=function(n){this.day+=n,this.fixDay()},t.prototype.addHours=function(n,r,s){for(r&&(this.hour+=Math.floor((23-this.hour)/n)*n);;){this.hour+=n;var a=F6(this.hour,24),i=a.div,l=a.mod;if(i&&(this.hour=l,this.addDaily(i)),Pl(s)||rr(s,this.hour))break}},t.prototype.addMinutes=function(n,r,s,a){for(r&&(this.minute+=Math.floor((1439-(this.hour*60+this.minute))/n)*n);;){this.minute+=n;var i=F6(this.minute,60),l=i.div,c=i.mod;if(l&&(this.minute=c,this.addHours(l,!1,s)),(Pl(s)||rr(s,this.hour))&&(Pl(a)||rr(a,this.minute)))break}},t.prototype.addSeconds=function(n,r,s,a,i){for(r&&(this.second+=Math.floor((86399-(this.hour*3600+this.minute*60+this.second))/n)*n);;){this.second+=n;var l=F6(this.second,60),c=l.div,u=l.mod;if(c&&(this.second=u,this.addMinutes(c,!1,s,a)),(Pl(s)||rr(s,this.hour))&&(Pl(a)||rr(a,this.minute))&&(Pl(i)||rr(i,this.second)))break}},t.prototype.fixDay=function(){if(!(this.day<=28)){var n=LZ(this.year,this.month-1)[1];if(!(this.day<=n))for(;this.day>n;){if(this.day-=n,++this.month,this.month===13&&(this.month=1,++this.year,this.year>Kve))return;n=LZ(this.year,this.month-1)[1]}}},t.prototype.add=function(n,r){var s=n.freq,a=n.interval,i=n.wkst,l=n.byhour,c=n.byminute,u=n.bysecond;switch(s){case On.YEARLY:return this.addYears(a);case On.MONTHLY:return this.addMonths(a);case On.WEEKLY:return this.addWeekly(a,i);case On.DAILY:return this.addDaily(a);case On.HOURLY:return this.addHours(a,r,l);case On.MINUTELY:return this.addMinutes(a,r,l,c);case On.SECONDLY:return this.addSeconds(a,r,l,c,u)}},t}(KE);function e0e(e){for(var t=[],n=Object.keys(e),r=0,s=n;r<s.length;r++){var a=s[r];rr(Kdt,a)||t.push(a),Qve(e[a])&&!n0(e[a])&&t.push(a)}if(t.length)throw new Error("Invalid options: "+t.join(", "));return br({},e)}function vdt(e){var t=br(br({},xB),e0e(e));if(Gr(t.byeaster)&&(t.freq=ft.YEARLY),!(Gr(t.freq)&&ft.FREQUENCIES[t.freq]))throw new Error("Invalid frequency: ".concat(t.freq," ").concat(e.freq));if(t.dtstart||(t.dtstart=new Date(new Date().setMilliseconds(0))),Gr(t.wkst)?Nl(t.wkst)||(t.wkst=t.wkst.weekday):t.wkst=ft.MO.weekday,Gr(t.bysetpos)){Nl(t.bysetpos)&&(t.bysetpos=[t.bysetpos]);for(var n=0;n<t.bysetpos.length;n++){var r=t.bysetpos[n];if(r===0||!(r>=-366&&r<=366))throw new Error("bysetpos must be between 1 and 366, or between -366 and -1")}}if(!(t.byweekno||ws(t.byweekno)||ws(t.byyearday)||t.bymonthday||ws(t.bymonthday)||Gr(t.byweekday)||Gr(t.byeaster)))switch(t.freq){case ft.YEARLY:t.bymonth||(t.bymonth=t.dtstart.getUTCMonth()+1),t.bymonthday=t.dtstart.getUTCDate();break;case ft.MONTHLY:t.bymonthday=t.dtstart.getUTCDate();break;case ft.WEEKLY:t.byweekday=[Xg(t.dtstart)];break}if(Gr(t.bymonth)&&!Fo(t.bymonth)&&(t.bymonth=[t.bymonth]),Gr(t.byyearday)&&!Fo(t.byyearday)&&Nl(t.byyearday)&&(t.byyearday=[t.byyearday]),!Gr(t.bymonthday))t.bymonthday=[],t.bynmonthday=[];else if(Fo(t.bymonthday)){for(var s=[],a=[],n=0;n<t.bymonthday.length;n++){var r=t.bymonthday[n];r>0?s.push(r):r<0&&a.push(r)}t.bymonthday=s,t.bynmonthday=a}else t.bymonthday<0?(t.bynmonthday=[t.bymonthday],t.bymonthday=[]):(t.bynmonthday=[],t.bymonthday=[t.bymonthday]);if(Gr(t.byweekno)&&!Fo(t.byweekno)&&(t.byweekno=[t.byweekno]),!Gr(t.byweekday))t.bynweekday=null;else if(Nl(t.byweekday))t.byweekday=[t.byweekday],t.bynweekday=null;else if(PZ(t.byweekday))t.byweekday=[Aa.fromStr(t.byweekday).weekday],t.bynweekday=null;else if(t.byweekday instanceof Aa)!t.byweekday.n||t.freq>ft.MONTHLY?(t.byweekday=[t.byweekday.weekday],t.bynweekday=null):(t.bynweekday=[[t.byweekday.weekday,t.byweekday.n]],t.byweekday=null);else{for(var i=[],l=[],n=0;n<t.byweekday.length;n++){var c=t.byweekday[n];if(Nl(c)){i.push(c);continue}else if(PZ(c)){i.push(Aa.fromStr(c).weekday);continue}!c.n||t.freq>ft.MONTHLY?i.push(c.weekday):l.push([c.weekday,c.n])}t.byweekday=ws(i)?i:null,t.bynweekday=ws(l)?l:null}return Gr(t.byhour)?Nl(t.byhour)&&(t.byhour=[t.byhour]):t.byhour=t.freq<ft.HOURLY?[t.dtstart.getUTCHours()]:null,Gr(t.byminute)?Nl(t.byminute)&&(t.byminute=[t.byminute]):t.byminute=t.freq<ft.MINUTELY?[t.dtstart.getUTCMinutes()]:null,Gr(t.bysecond)?Nl(t.bysecond)&&(t.bysecond=[t.bysecond]):t.bysecond=t.freq<ft.SECONDLY?[t.dtstart.getUTCSeconds()]:null,{parsedOptions:t}}function bdt(e){var t=e.dtstart.getTime()%1e3;if(!yB(e.freq))return[];var n=[];return e.byhour.forEach(function(r){e.byminute.forEach(function(s){e.bysecond.forEach(function(a){n.push(new KE(r,s,a,t))})})}),n}function T8(e){var t=e.split(`
`).map(_dt).filter(function(n){return n!==null});return br(br({},t[0]),t[1])}function YE(e){var t={},n=/DTSTART(?:;TZID=([^:=]+?))?(?::|=)([^;\s]+)/i.exec(e);if(!n)return t;var r=n[1],s=n[2];return r&&(t.tzid=r),t.dtstart=gB(s),t}function _dt(e){if(e=e.replace(/^\s+|\s+$/,""),!e.length)return null;var t=/^([A-Z]+?)[:;]/.exec(e.toUpperCase());if(!t)return BZ(e);var n=t[1];switch(n.toUpperCase()){case"RRULE":case"EXRULE":return BZ(e);case"DTSTART":return YE(e);default:throw new Error("Unsupported RFC prop ".concat(n," in ").concat(e))}}function BZ(e){var t=e.replace(/^RRULE:/i,""),n=YE(t),r=e.replace(/^(?:RRULE|EXRULE):/i,"").split(";");return r.forEach(function(s){var a=s.split("="),i=a[0],l=a[1];switch(i.toUpperCase()){case"FREQ":n.freq=On[l.toUpperCase()];break;case"WKST":n.wkst=Wi[l.toUpperCase()];break;case"COUNT":case"INTERVAL":case"BYSETPOS":case"BYMONTH":case"BYMONTHDAY":case"BYYEARDAY":case"BYWEEKNO":case"BYHOUR":case"BYMINUTE":case"BYSECOND":var c=wdt(l),u=i.toLowerCase();n[u]=c;break;case"BYWEEKDAY":case"BYDAY":n.byweekday=Cdt(l);break;case"DTSTART":case"TZID":var f=YE(e);n.tzid=f.tzid,n.dtstart=f.dtstart;break;case"UNTIL":n.until=gB(l);break;case"BYEASTER":n.byeaster=Number(l);break;default:throw new Error("Unknown RRULE property '"+i+"'")}}),n}function wdt(e){if(e.indexOf(",")!==-1){var t=e.split(",");return t.map($Z)}return $Z(e)}function $Z(e){return/^[+-]?\d+$/.test(e)?Number(e):e}function Cdt(e){var t=e.split(",");return t.map(function(n){if(n.length===2)return Wi[n];var r=n.match(/^([+-]?\d{1,2})([A-Z]{2})$/);if(!r||r.length<3)throw new SyntaxError("Invalid weekday string: ".concat(n));var s=Number(r[1]),a=r[2],i=Wi[a].weekday;return new Aa(i,s)})}var QE=function(){function e(t,n){if(isNaN(t.getTime()))throw new RangeError("Invalid date passed to DateWithZone");this.date=t,this.tzid=n}return Object.defineProperty(e.prototype,"isUTC",{get:function(){return!this.tzid||this.tzid.toUpperCase()==="UTC"},enumerable:!1,configurable:!0}),e.prototype.toString=function(){var t=hB(this.date.getTime(),this.isUTC);return this.isUTC?":".concat(t):";TZID=".concat(this.tzid,":").concat(t)},e.prototype.getTime=function(){return this.date.getTime()},e.prototype.rezonedDate=function(){return this.isUTC?this.date:ddt(this.date,this.tzid)},e}();function N8(e){for(var t=[],n="",r=Object.keys(e),s=Object.keys(xB),a=0;a<r.length;a++)if(r[a]!=="tzid"&&rr(s,r[a])){var i=r[a].toUpperCase(),l=e[r[a]],c="";if(!(!Gr(l)||Fo(l)&&!l.length)){switch(i){case"FREQ":c=ft.FREQUENCIES[e.freq];break;case"WKST":Nl(l)?c=new Aa(l).toString():c=l.toString();break;case"BYWEEKDAY":i="BYDAY",c=adt(l).map(function(h){return h instanceof Aa?h:Fo(h)?new Aa(h[0],h[1]):new Aa(h)}).toString();break;case"DTSTART":n=Sdt(l,e.tzid);break;case"UNTIL":c=hB(l,!e.tzid);break;default:if(Fo(l)){for(var u=[],f=0;f<l.length;f++)u[f]=String(l[f]);c=u.toString()}else c=String(l)}c&&t.push([i,c])}}var m=t.map(function(h){var g=h[0],y=h[1];return"".concat(g,"=").concat(y.toString())}).join(";"),p="";return m!==""&&(p="RRULE:".concat(m)),[n,p].filter(function(h){return!!h}).join(`
`)}function Sdt(e,t){return e?"DTSTART"+new QE(new Date(e),t).toString():""}function Edt(e,t){return Array.isArray(e)?!Array.isArray(t)||e.length!==t.length?!1:e.every(function(n,r){return n.getTime()===t[r].getTime()}):e instanceof Date?t instanceof Date&&e.getTime()===t.getTime():e===t}var Mdt=function(){function e(){this.all=!1,this.before=[],this.after=[],this.between=[]}return e.prototype._cacheAdd=function(t,n,r){n&&(n=n instanceof Date?k8(n):OZ(n)),t==="all"?this.all=n:(r._value=n,this[t].push(r))},e.prototype._cacheGet=function(t,n){var r=!1,s=n?Object.keys(n):[],a=function(f){for(var m=0;m<s.length;m++){var p=s[m];if(!Edt(n[p],f[p]))return!0}return!1},i=this[t];if(t==="all")r=this.all;else if(Fo(i))for(var l=0;l<i.length;l++){var c=i[l];if(!(s.length&&a(c))){r=c._value;break}}if(!r&&this.all){for(var u=new $h(t,n),l=0;l<this.all.length&&u.accept(this.all[l]);l++);r=u.getValue(),this._cacheAdd(t,r,n)}return Fo(r)?OZ(r):r instanceof Date?k8(r):r},e}(),kdt=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],Pn(1,31),!0),Pn(2,28),!0),Pn(3,31),!0),Pn(4,30),!0),Pn(5,31),!0),Pn(6,30),!0),Pn(7,31),!0),Pn(8,31),!0),Pn(9,30),!0),Pn(10,31),!0),Pn(11,30),!0),Pn(12,31),!0),Pn(1,7),!0),Tdt=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],Pn(1,31),!0),Pn(2,29),!0),Pn(3,31),!0),Pn(4,30),!0),Pn(5,31),!0),Pn(6,30),!0),Pn(7,31),!0),Pn(8,31),!0),Pn(9,30),!0),Pn(10,31),!0),Pn(11,30),!0),Pn(12,31),!0),Pn(1,7),!0),Ndt=jc(1,29),jdt=jc(1,30),pd=jc(1,31),la=jc(1,32),Adt=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],la,!0),jdt,!0),la,!0),pd,!0),la,!0),pd,!0),la,!0),la,!0),pd,!0),la,!0),pd,!0),la,!0),la.slice(0,7),!0),Idt=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],la,!0),Ndt,!0),la,!0),pd,!0),la,!0),pd,!0),la,!0),la,!0),pd,!0),la,!0),pd,!0),la,!0),la.slice(0,7),!0),Rdt=jc(-28,0),Pdt=jc(-29,0),hd=jc(-30,0),ca=jc(-31,0),Ldt=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],ca,!0),Pdt,!0),ca,!0),hd,!0),ca,!0),hd,!0),ca,!0),ca,!0),hd,!0),ca,!0),hd,!0),ca,!0),ca.slice(0,7),!0),Odt=Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze(Ze([],ca,!0),Rdt,!0),ca,!0),hd,!0),ca,!0),hd,!0),ca,!0),ca,!0),hd,!0),ca,!0),hd,!0),ca,!0),ca.slice(0,7),!0),Ddt=[0,31,60,91,121,152,182,213,244,274,305,335,366],Fdt=[0,31,59,90,120,151,181,212,243,273,304,334,365],VZ=function(){for(var e=[],t=0;t<55;t++)e=e.concat(jc(7));return e}();function Udt(e,t){var n=Wm(e,1,1),r=L0(e)?366:365,s=L0(e+1)?366:365,a=M8(n),i=Xg(n),l=br(br({yearlen:r,nextyearlen:s,yearordinal:a,yearweekday:i},Bdt(e)),{wnomask:null});if(Pl(t.byweekno))return l;l.wnomask=Pn(0,r+7);var c,u,f=c=gi(7-i+t.wkst,7);f>=4?(f=0,u=l.yearlen+gi(i-t.wkst,7)):u=r-f;for(var m=Math.floor(u/7),p=gi(u,7),h=Math.floor(m+p/4),g=0;g<t.byweekno.length;g++){var y=t.byweekno[g];if(y<0&&(y+=h+1),y>0&&y<=h){var x=void 0;y>1?(x=f+(y-1)*7,f!==c&&(x-=7-c)):x=f;for(var v=0;v<7&&(l.wnomask[x]=1,x++,l.wdaymask[x]!==t.wkst);v++);}}if(rr(t.byweekno,1)){var x=f+h*7;if(f!==c&&(x-=7-c),x<r)for(var g=0;g<7&&(l.wnomask[x]=1,x+=1,l.wdaymask[x]!==t.wkst);g++);}if(f){var b=void 0;if(rr(t.byweekno,-1))b=-1;else{var _=Xg(Wm(e-1,1,1)),w=gi(7-_.valueOf()+t.wkst,7),C=L0(e-1)?366:365,S=void 0;w>=4?(w=0,S=C+gi(_-t.wkst,7)):S=r-f,b=Math.floor(52+gi(S,7)/4)}if(rr(t.byweekno,b))for(var x=0;x<f;x++)l.wnomask[x]=1}return l}function Bdt(e){var t=L0(e)?366:365,n=Wm(e,1,1),r=Xg(n);return t===365?{mmask:kdt,mdaymask:Idt,nmdaymask:Odt,wdaymask:VZ.slice(r),mrange:Fdt}:{mmask:Tdt,mdaymask:Adt,nmdaymask:Ldt,wdaymask:VZ.slice(r),mrange:Ddt}}function $dt(e,t,n,r,s,a){var i={lastyear:e,lastmonth:t,nwdaymask:[]},l=[];if(a.freq===ft.YEARLY)if(Pl(a.bymonth))l=[[0,n]];else for(var c=0;c<a.bymonth.length;c++)t=a.bymonth[c],l.push(r.slice(t-1,t+1));else a.freq===ft.MONTHLY&&(l=[r.slice(t-1,t+1)]);if(Pl(l))return i;i.nwdaymask=Pn(0,n);for(var c=0;c<l.length;c++)for(var u=l[c],f=u[0],m=u[1]-1,p=0;p<a.bynweekday.length;p++){var h=void 0,g=a.bynweekday[p],y=g[0],x=g[1];x<0?(h=m+(x+1)*7,h-=gi(s[h]-y,7)):(h=f+(x-1)*7,h+=gi(7-s[h]+y,7)),f<=h&&h<=m&&(i.nwdaymask[h]=1)}return i}function Vdt(e,t){t===void 0&&(t=0);var n=e%19,r=Math.floor(e/100),s=e%100,a=Math.floor(r/4),i=r%4,l=Math.floor((r+8)/25),c=Math.floor((r-l+1)/3),u=Math.floor(19*n+r-a-c+15)%30,f=Math.floor(s/4),m=s%4,p=Math.floor(32+2*i+2*f-u-m)%7,h=Math.floor((n+11*u+22*p)/451),g=Math.floor((u+p-7*h+114)/31),y=(u+p-7*h+114)%31+1,x=Date.UTC(e,g-1,y+t),v=Date.UTC(e,0,1);return[Math.ceil((x-v)/(1e3*60*60*24))]}var Wdt=function(){function e(t){this.options=t}return e.prototype.rebuild=function(t,n){var r=this.options;if(t!==this.lastyear&&(this.yearinfo=Udt(t,r)),ws(r.bynweekday)&&(n!==this.lastmonth||t!==this.lastyear)){var s=this.yearinfo,a=s.yearlen,i=s.mrange,l=s.wdaymask;this.monthinfo=$dt(t,n,a,i,l,r)}Gr(r.byeaster)&&(this.eastermask=Vdt(t,r.byeaster))},Object.defineProperty(e.prototype,"lastyear",{get:function(){return this.monthinfo?this.monthinfo.lastyear:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastmonth",{get:function(){return this.monthinfo?this.monthinfo.lastmonth:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearlen",{get:function(){return this.yearinfo.yearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"yearordinal",{get:function(){return this.yearinfo.yearordinal},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mrange",{get:function(){return this.yearinfo.mrange},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wdaymask",{get:function(){return this.yearinfo.wdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mmask",{get:function(){return this.yearinfo.mmask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"wnomask",{get:function(){return this.yearinfo.wnomask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nwdaymask",{get:function(){return this.monthinfo?this.monthinfo.nwdaymask:[]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextyearlen",{get:function(){return this.yearinfo.nextyearlen},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mdaymask",{get:function(){return this.yearinfo.mdaymask},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nmdaymask",{get:function(){return this.yearinfo.nmdaymask},enumerable:!1,configurable:!0}),e.prototype.ydayset=function(){return[jc(this.yearlen),0,this.yearlen]},e.prototype.mdayset=function(t,n){for(var r=this.mrange[n-1],s=this.mrange[n],a=Pn(null,this.yearlen),i=r;i<s;i++)a[i]=i;return[a,r,s]},e.prototype.wdayset=function(t,n,r){for(var s=Pn(null,this.yearlen+7),a=M8(Wm(t,n,r))-this.yearordinal,i=a,l=0;l<7&&(s[a]=a,++a,this.wdaymask[a]!==this.options.wkst);l++);return[s,i,a]},e.prototype.ddayset=function(t,n,r){var s=Pn(null,this.yearlen),a=M8(Wm(t,n,r))-this.yearordinal;return s[a]=a,[s,a,a+1]},e.prototype.htimeset=function(t,n,r,s){var a=this,i=[];return this.options.byminute.forEach(function(l){i=i.concat(a.mtimeset(t,l,r,s))}),G1(i),i},e.prototype.mtimeset=function(t,n,r,s){var a=this.options.bysecond.map(function(i){return new KE(t,n,i,s)});return G1(a),a},e.prototype.stimeset=function(t,n,r,s){return[new KE(t,n,r,s)]},e.prototype.getdayset=function(t){switch(t){case On.YEARLY:return this.ydayset.bind(this);case On.MONTHLY:return this.mdayset.bind(this);case On.WEEKLY:return this.wdayset.bind(this);case On.DAILY:return this.ddayset.bind(this);default:return this.ddayset.bind(this)}},e.prototype.gettimeset=function(t){switch(t){case On.HOURLY:return this.htimeset.bind(this);case On.MINUTELY:return this.mtimeset.bind(this);case On.SECONDLY:return this.stimeset.bind(this)}},e}();function Hdt(e,t,n,r,s,a){for(var i=[],l=0;l<e.length;l++){var c=void 0,u=void 0,f=e[l];f<0?(c=Math.floor(f/t.length),u=gi(f,t.length)):(c=Math.floor((f-1)/t.length),u=gi(f-1,t.length));for(var m=[],p=n;p<r;p++){var h=a[p];Gr(h)&&m.push(h)}var g=void 0;c<0?g=m.slice(c)[0]:g=m[c];var y=t[u],x=Xve(s.yearordinal+g),v=Zve(x,y);rr(i,v)||i.push(v)}return G1(i),i}function t0e(e,t){var n=t.dtstart,r=t.freq,s=t.interval,a=t.until,i=t.bysetpos,l=t.count;if(l===0||s===0)return Bc(e);var c=xdt.fromDate(n),u=new Wdt(t);u.rebuild(c.year,c.month);for(var f=qdt(u,c,t);;){var m=u.getdayset(r)(c.year,c.month,c.day),p=m[0],h=m[1],g=m[2],y=Gdt(p,h,g,u,t);if(ws(i))for(var x=Hdt(i,f,h,g,u,p),v=0;v<x.length;v++){var b=x[v];if(a&&b>a)return Bc(e);if(b>=n){var _=WZ(b,t);if(!e.accept(_)||l&&(--l,!l))return Bc(e)}}else for(var v=h;v<g;v++){var w=p[v];if(Gr(w))for(var C=Xve(u.yearordinal+w),S=0;S<f.length;S++){var E=f[S],b=Zve(C,E);if(a&&b>a)return Bc(e);if(b>=n){var _=WZ(b,t);if(!e.accept(_)||l&&(--l,!l))return Bc(e)}}}if(t.interval===0||(c.add(t,y),c.year>Kve))return Bc(e);yB(r)||(f=u.gettimeset(r)(c.hour,c.minute,c.second,0)),u.rebuild(c.year,c.month)}}function zdt(e,t,n){var r=n.bymonth,s=n.byweekno,a=n.byweekday,i=n.byeaster,l=n.bymonthday,c=n.bynmonthday,u=n.byyearday;return ws(r)&&!rr(r,e.mmask[t])||ws(s)&&!e.wnomask[t]||ws(a)&&!rr(a,e.wdaymask[t])||ws(e.nwdaymask)&&!e.nwdaymask[t]||i!==null&&!rr(e.eastermask,t)||(ws(l)||ws(c))&&!rr(l,e.mdaymask[t])&&!rr(c,e.nmdaymask[t])||ws(u)&&(t<e.yearlen&&!rr(u,t+1)&&!rr(u,-e.yearlen+t)||t>=e.yearlen&&!rr(u,t+1-e.yearlen)&&!rr(u,-e.nextyearlen+t-e.yearlen))}function WZ(e,t){return new QE(e,t.tzid).rezonedDate()}function Bc(e){return e.getValue()}function Gdt(e,t,n,r,s){for(var a=!1,i=t;i<n;i++){var l=e[i];a=zdt(r,l,s),a&&(e[l]=null)}return a}function qdt(e,t,n){var r=n.freq,s=n.byhour,a=n.byminute,i=n.bysecond;return yB(r)?bdt(n):r>=ft.HOURLY&&ws(s)&&!rr(s,t.hour)||r>=ft.MINUTELY&&ws(a)&&!rr(a,t.minute)||r>=ft.SECONDLY&&ws(i)&&!rr(i,t.second)?[]:e.gettimeset(r)(t.hour,t.minute,t.second,t.millisecond)}var Wi={MO:new Aa(0),TU:new Aa(1),WE:new Aa(2),TH:new Aa(3),FR:new Aa(4),SA:new Aa(5),SU:new Aa(6)},xB={freq:On.YEARLY,dtstart:null,interval:1,wkst:Wi.MO,count:null,until:null,tzid:null,bysetpos:null,bymonth:null,bymonthday:null,bynmonthday:null,byyearday:null,byweekno:null,byweekday:null,bynweekday:null,byhour:null,byminute:null,bysecond:null,byeaster:null},Kdt=Object.keys(xB),ft=function(){function e(t,n){t===void 0&&(t={}),n===void 0&&(n=!1),this._cache=n?null:new Mdt,this.origOptions=e0e(t);var r=vdt(t).parsedOptions;this.options=r}return e.parseText=function(t,n){return Jve(t,n)},e.fromText=function(t,n){return hdt(t,n)},e.fromString=function(t){return new e(e.parseString(t)||void 0)},e.prototype._iter=function(t){return t0e(t,this.options)},e.prototype._cacheGet=function(t,n){return this._cache?this._cache._cacheGet(t,n):!1},e.prototype._cacheAdd=function(t,n,r){if(this._cache)return this._cache._cacheAdd(t,n,r)},e.prototype.all=function(t){if(t)return this._iter(new FZ("all",{},t));var n=this._cacheGet("all");return n===!1&&(n=this._iter(new $h("all",{})),this._cacheAdd("all",n)),n},e.prototype.between=function(t,n,r,s){if(r===void 0&&(r=!1),!n0(t)||!n0(n))throw new Error("Invalid date passed in to RRule.between");var a={before:n,after:t,inc:r};if(s)return this._iter(new FZ("between",a,s));var i=this._cacheGet("between",a);return i===!1&&(i=this._iter(new $h("between",a)),this._cacheAdd("between",i,a)),i},e.prototype.before=function(t,n){if(n===void 0&&(n=!1),!n0(t))throw new Error("Invalid date passed in to RRule.before");var r={dt:t,inc:n},s=this._cacheGet("before",r);return s===!1&&(s=this._iter(new $h("before",r)),this._cacheAdd("before",s,r)),s},e.prototype.after=function(t,n){if(n===void 0&&(n=!1),!n0(t))throw new Error("Invalid date passed in to RRule.after");var r={dt:t,inc:n},s=this._cacheGet("after",r);return s===!1&&(s=this._iter(new $h("after",r)),this._cacheAdd("after",s,r)),s},e.prototype.count=function(){return this.all().length},e.prototype.toString=function(){return N8(this.origOptions)},e.prototype.toText=function(t,n,r){return gdt(this,t,n,r)},e.prototype.isFullyConvertibleToText=function(){return ydt(this)},e.prototype.clone=function(){return new e(this.origOptions)},e.FREQUENCIES=["YEARLY","MONTHLY","WEEKLY","DAILY","HOURLY","MINUTELY","SECONDLY"],e.YEARLY=On.YEARLY,e.MONTHLY=On.MONTHLY,e.WEEKLY=On.WEEKLY,e.DAILY=On.DAILY,e.HOURLY=On.HOURLY,e.MINUTELY=On.MINUTELY,e.SECONDLY=On.SECONDLY,e.MO=Wi.MO,e.TU=Wi.TU,e.WE=Wi.WE,e.TH=Wi.TH,e.FR=Wi.FR,e.SA=Wi.SA,e.SU=Wi.SU,e.parseString=T8,e.optionsToString=N8,e}();function Ydt(e,t,n,r,s,a){var i={},l=e.accept;function c(p,h){n.forEach(function(g){g.between(p,h,!0).forEach(function(y){i[Number(y)]=!0})})}s.forEach(function(p){var h=new QE(p,a).rezonedDate();i[Number(h)]=!0}),e.accept=function(p){var h=Number(p);return isNaN(h)?l.call(this,p):!i[h]&&(c(new Date(h-1),new Date(h+1)),!i[h])?(i[h]=!0,l.call(this,p)):!0},e.method==="between"&&(c(e.args.after,e.args.before),e.accept=function(p){var h=Number(p);return i[h]?!0:(i[h]=!0,l.call(this,p))});for(var u=0;u<r.length;u++){var f=new QE(r[u],a).rezonedDate();if(!e.accept(new Date(f.getTime())))break}t.forEach(function(p){t0e(e,p.options)});var m=e._result;switch(G1(m),e.method){case"all":case"between":return m;case"before":return m.length&&m[m.length-1]||null;case"after":default:return m.length&&m[0]||null}}var HZ={dtstart:null,cache:!1,unfold:!1,forceset:!1,compatible:!1,tzid:null};function Qdt(e,t){var n=[],r=[],s=[],a=[],i=YE(e),l=i.dtstart,c=i.tzid,u=tft(e,t.unfold);return u.forEach(function(f){var m;if(f){var p=eft(f),h=p.name,g=p.parms,y=p.value;switch(h.toUpperCase()){case"RRULE":if(g.length)throw new Error("unsupported RRULE parm: ".concat(g.join(",")));n.push(T8(f));break;case"RDATE":var x=(m=/RDATE(?:;TZID=([^:=]+))?/i.exec(f))!==null&&m!==void 0?m:[],v=x[1];v&&!c&&(c=v),r=r.concat(GZ(y,g));break;case"EXRULE":if(g.length)throw new Error("unsupported EXRULE parm: ".concat(g.join(",")));s.push(T8(y));break;case"EXDATE":a=a.concat(GZ(y,g));break;case"DTSTART":break;default:throw new Error("unsupported property: "+h)}}}),{dtstart:l,tzid:c,rrulevals:n,rdatevals:r,exrulevals:s,exdatevals:a}}function Xdt(e,t){var n=Qdt(e,t),r=n.rrulevals,s=n.rdatevals,a=n.exrulevals,i=n.exdatevals,l=n.dtstart,c=n.tzid,u=t.cache===!1;if(t.compatible&&(t.forceset=!0,t.unfold=!0),t.forceset||r.length>1||s.length||a.length||i.length){var f=new rft(u);return f.dtstart(l),f.tzid(c||void 0),r.forEach(function(p){f.rrule(new ft(U6(p,l,c),u))}),s.forEach(function(p){f.rdate(p)}),a.forEach(function(p){f.exrule(new ft(U6(p,l,c),u))}),i.forEach(function(p){f.exdate(p)}),t.compatible&&t.dtstart&&f.rdate(l),f}var m=r[0]||{};return new ft(U6(m,m.dtstart||t.dtstart||l,m.tzid||t.tzid||c),u)}function zZ(e,t){return t===void 0&&(t={}),Xdt(e,Zdt(t))}function U6(e,t,n){return br(br({},e),{dtstart:t,tzid:n})}function Zdt(e){var t=[],n=Object.keys(e),r=Object.keys(HZ);if(n.forEach(function(s){rr(r,s)||t.push(s)}),t.length)throw new Error("Invalid options: "+t.join(", "));return br(br({},HZ),e)}function Jdt(e){if(e.indexOf(":")===-1)return{name:"RRULE",value:e};var t=odt(e,":",1),n=t[0],r=t[1];return{name:n,value:r}}function eft(e){var t=Jdt(e),n=t.name,r=t.value,s=n.split(";");if(!s)throw new Error("empty property name");return{name:s[0].toUpperCase(),parms:s.slice(1),value:r}}function tft(e,t){if(t===void 0&&(t=!1),e=e&&e.trim(),!e)throw new Error("Invalid empty string");if(!t)return e.split(/\s/);for(var n=e.split(`
`),r=0;r<n.length;){var s=n[r]=n[r].replace(/\s+$/g,"");s?r>0&&s[0]===" "?(n[r-1]+=s.slice(1),n.splice(r,1)):r+=1:n.splice(r,1)}return n}function nft(e){e.forEach(function(t){if(!/(VALUE=DATE(-TIME)?)|(TZID=)/.test(t))throw new Error("unsupported RDATE/EXDATE parm: "+t)})}function GZ(e,t){return nft(t),e.split(",").map(function(n){return gB(n)})}function qZ(e){var t=this;return function(n){if(n!==void 0&&(t["_".concat(e)]=n),t["_".concat(e)]!==void 0)return t["_".concat(e)];for(var r=0;r<t._rrule.length;r++){var s=t._rrule[r].origOptions[e];if(s)return s}}}var rft=function(e){kO(t,e);function t(n){n===void 0&&(n=!1);var r=e.call(this,{},n)||this;return r.dtstart=qZ.apply(r,["dtstart"]),r.tzid=qZ.apply(r,["tzid"]),r._rrule=[],r._rdate=[],r._exrule=[],r._exdate=[],r}return t.prototype._iter=function(n){return Ydt(n,this._rrule,this._exrule,this._rdate,this._exdate,this.tzid())},t.prototype.rrule=function(n){KZ(n,this._rrule)},t.prototype.exrule=function(n){KZ(n,this._exrule)},t.prototype.rdate=function(n){YZ(n,this._rdate)},t.prototype.exdate=function(n){YZ(n,this._exdate)},t.prototype.rrules=function(){return this._rrule.map(function(n){return zZ(n.toString())})},t.prototype.exrules=function(){return this._exrule.map(function(n){return zZ(n.toString())})},t.prototype.rdates=function(){return this._rdate.map(function(n){return new Date(n.getTime())})},t.prototype.exdates=function(){return this._exdate.map(function(n){return new Date(n.getTime())})},t.prototype.valueOf=function(){var n=[];return!this._rrule.length&&this._dtstart&&(n=n.concat(N8({dtstart:this._dtstart}))),this._rrule.forEach(function(r){n=n.concat(r.toString().split(`
`))}),this._exrule.forEach(function(r){n=n.concat(r.toString().split(`
`).map(function(s){return s.replace(/^RRULE:/,"EXRULE:")}).filter(function(s){return!/^DTSTART/.test(s)}))}),this._rdate.length&&n.push(QZ("RDATE",this._rdate,this.tzid())),this._exdate.length&&n.push(QZ("EXDATE",this._exdate,this.tzid())),n},t.prototype.toString=function(){return this.valueOf().join(`
`)},t.prototype.clone=function(){var n=new t(!!this._cache);return this._rrule.forEach(function(r){return n.rrule(r.clone())}),this._exrule.forEach(function(r){return n.exrule(r.clone())}),this._rdate.forEach(function(r){return n.rdate(new Date(r.getTime()))}),this._exdate.forEach(function(r){return n.exdate(new Date(r.getTime()))}),n},t}(ft);function KZ(e,t){if(!(e instanceof ft))throw new TypeError(String(e)+" is not RRule instance");rr(t.map(String),String(e))||t.push(e)}function YZ(e,t){if(!(e instanceof Date))throw new TypeError(String(e)+" is not Date instance");rr(t.map(Number),Number(e))||(t.push(e),G1(t))}function QZ(e,t,n){var r=!n||n.toUpperCase()==="UTC",s=r?"".concat(e,":"):"".concat(e,";TZID=").concat(n,":"),a=t.map(function(i){return hB(i.valueOf(),r)}).join(",");return"".concat(s).concat(a)}const sft=e=>{switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);case"DAILY":return new Date(2e3,0,1,e.hour,e.minute);case"WEEKLY":return new Date(2e3,0,2+e.dayOfWeek,e.hour,e.minute);case"MONTHLY":return new Date(2e3,0,e.day,e.hour,e.minute);case"YEARLY":return new Date(2e3,e.month,e.day,e.hour,e.minute);case"WEEKDAYS":return new Date(2e3,0,1,e.hour,e.minute)}};function vB(e,t){const n=new Date;switch(e.kind){case"ONCE":{const r=new Date(e.year,e.month,e.day,e.hour,e.minute);return r>n?r:n}case"DAILY":return new ft({freq:ft.DAILY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKLY":{const r=e.dayOfWeek===0?ft.SU:e.dayOfWeek-1;return new ft({freq:ft.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:r,byhour:e.hour,byminute:e.minute}).after(n)||n}case"MONTHLY":return new ft({freq:ft.MONTHLY,dtstart:new Date(n.getFullYear(),n.getMonth(),1,e.hour,e.minute),bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"YEARLY":return new ft({freq:ft.YEARLY,dtstart:new Date(n.getFullYear(),0,1,e.hour,e.minute),bymonth:e.month+1,bymonthday:e.day,byhour:e.hour,byminute:e.minute}).after(n)||n;case"WEEKDAYS":return new ft({freq:ft.WEEKLY,dtstart:new Date(n.getFullYear(),n.getMonth(),n.getDate(),e.hour,e.minute),byweekday:[ft.MO,ft.TU,ft.WE,ft.TH,ft.FR],byhour:e.hour,byminute:e.minute}).after(n)||n;default:return n}}function aft(e,t){const n=sft(e);switch(e.kind){case"ONCE":return t.formatDate(n,{dateStyle:"medium",timeStyle:"short"});case"DAILY":return t.formatTime(n,{timeStyle:"short"});case"WEEKLY":return t.formatDate(n,{weekday:"short",hour:"numeric",minute:"numeric"});case"MONTHLY":return t.formatMessage({defaultMessage:"Day {day}, {time}",id:"grA/MDsLjr"},{day:n.getDate().toString(),time:t.formatTime(n,{timeStyle:"short"})});case"YEARLY":return t.formatDate(n,{hour:"numeric",minute:"numeric",day:"numeric",month:"short"});case"WEEKDAYS":return t.formatTime(n,{timeStyle:"short"})}}const rh=Qe({kindOnce:{defaultMessage:"Once",id:"DqTQOpG2Me"},kindDaily:{defaultMessage:"Daily",id:"zxvhnETmn2"},kindWeekly:{defaultMessage:"Weekly",id:"/clOBUs/wZ"},kindWeekdays:{defaultMessage:"Every weekday",id:"8Hjql2wdJG"},kindMonthly:{defaultMessage:"Monthly",id:"wYsv4ZHu+B"},kindYearly:{defaultMessage:"Yearly",id:"dqD39hnoA/"}}),oft={ONCE:rh.kindOnce,DAILY:rh.kindDaily,WEEKLY:rh.kindWeekly,MONTHLY:rh.kindMonthly,YEARLY:rh.kindYearly,WEEKDAYS:rh.kindWeekdays};function Bs(){const e=new Date;return e.setHours(e.getHours()+1,e.getMinutes(),0,0),{kind:"ONCE",minute:e.getMinutes(),hour:e.getHours(),day:e.getDate(),month:e.getMonth(),year:e.getFullYear(),dayOfWeek:e.getDay()}}function ift(e="",t=le.PRO,n=["web"]){return{title:"",prompt:e,schedule:Bs(),searchModel:t,sources:n,expiryDate:void 0,defaultExpiryDate:r0e(t)}}function lft(e,t){return t.formatMessage(oft[e])}const cft=()=>Intl.DateTimeFormat().resolvedOptions().timeZone;function uft(e){switch(e.kind){case"ONCE":return new Date(e.year,e.month,e.day,e.hour,e.minute);default:return new Date}}function dft(e){switch(e.kind){case"ONCE":return"FREQ=DAILY;COUNT=1";case"DAILY":return`FREQ=DAILY;BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKLY":return`FREQ=WEEKLY;BYDAY=${["SU","MO","TU","WE","TH","FR","SA"][e.dayOfWeek]};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"MONTHLY":return`FREQ=MONTHLY;BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"YEARLY":return`FREQ=YEARLY;BYMONTH=${e.month+1};BYMONTHDAY=${e.day};BYHOUR=${e.hour};BYMINUTE=${e.minute}`;case"WEEKDAYS":return`FREQ=WEEKLY;BYDAY=MO,TU,WE,TH,FR;BYHOUR=${e.hour};BYMINUTE=${e.minute}`}}function O0(e){const t=uft(e);return{start_at:$u(t,"yyyy-MM-dd'T'HH:mm:ss"),rrule:dft(e),tzid:cft()}}function n0e(e){if(!(e===null||!e))return $u(e,"yyyy-MM-dd'T'HH:mm:ss")}function XE(e){const t=new Date(e.start_at),n={kind:"ONCE",minute:t.getMinutes(),hour:t.getHours(),day:t.getDate(),month:t.getMonth(),year:t.getFullYear(),dayOfWeek:t.getDay()};if(e.rrule.includes("FREQ=DAILY;COUNT=1"))return n;const r=ft.parseString(e.rrule),s=f=>Array.isArray(f)?f[0]:f,a=s(r.byhour),i=s(r.byminute),l=s(r.bymonth),c=s(r.bymonthday),u=s(r.byweekday);switch(r.freq){case ft.DAILY:return a===void 0||i===void 0?(ne.error("DAILY schedule missing required BYHOUR or BYMINUTE parameter"),{...n}):{...n,kind:"DAILY",hour:a,minute:i};case ft.WEEKLY:{if(u===void 0||a===void 0||i===void 0)return ne.error("WEEKLY schedule missing required parameters"),{...n};if(Array.isArray(r.byweekday)&&r.byweekday.length===5)return{...n,kind:"WEEKDAYS",hour:a,minute:i};const f=u.weekday===6?0:u.weekday+1;return{...n,kind:"WEEKLY",dayOfWeek:f,hour:a,minute:i}}case ft.MONTHLY:return c===void 0||a===void 0||i===void 0?(ne.error("MONTHLY schedule missing required BYMONTHDAY parameter"),{...n}):{...n,kind:"MONTHLY",day:c,hour:a,minute:i};case ft.YEARLY:return l===void 0||c===void 0||a===void 0||i===void 0?(ne.error("YEARLY schedule missing required BYMONTH parameter"),{...n}):{...n,kind:"YEARLY",month:l-1,day:c,hour:a,minute:i}}return ne.error("Invalid task schedule"),{...n}}function fft({expiryDate:e,schedule:t,defaultExpiryDate:n}){return e===null||!e||!t?e:vB(t)>e?n??null:e}function mft(e,t){return(e===le.BETA||e===le.ALPHA)&&(t.kind==="DAILY"||t.kind==="WEEKLY"||t.kind==="WEEKDAYS")}function r0e(e,t){if(!(!t||!mft(e,t))&&(e===le.BETA||e===le.ALPHA)){const n=vB(t);return(s=>{switch(s){case"DAILY":return Gs(n,14);case"WEEKLY":return WE(n,14);case"WEEKDAYS":return Gs(n,21);case"ONCE":case"MONTHLY":case"YEARLY":return;default:Qt(s)}})(t.kind)}}const hf={should_send_email:!0,should_send_in_app:!0,should_send_push:!0},s0e=e=>({id:e.task_id,type:pft(e),createdAt:new Date(e.created_at),updatedAt:new Date(e.updated_at),expiryDate:e.end_at?new Date(e.end_at):void 0,title:e.task_name,prompt:e.task_data.task_prompt,status:e.status,nextRun:new Date(e.next_trigger_intended_time),scheduleInfo:{start_at:e.start_at,rrule:e.trigger_condition_schedule,tzid:e.tzid},subscription:e.event_subscription,searchModel:e.task_data?.task_params?.model_preference||"pplx_pro",sources:e.task_data?.task_params?.sources||["web"],notificationSettings:e.notification_settings||hf,collectionUuid:e.collection_uuid}),pft=e=>{switch(e.scheduler_type){case"EVENT_PUSH":return"ALERT";case"POLL":return"SCHEDULE";case"SHORTCUT":return"SHORTCUT";default:return null}};function hft({intl:e,triggerType:t}){switch(t){case lt.SCHEDULED:return e.formatMessage({defaultMessage:"Scheduled task",id:"dG8VrMkuAT"});case lt.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert",id:"XMapyUiPpV"});case lt.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut",id:"tceWOrncgz"});default:Qt(t)}}function gft({intl:e,triggerType:t,actionPerformed:n}){const r=yft({intl:e,actionPerformed:n});switch(t){case lt.SCHEDULED:return e.formatMessage({defaultMessage:"Task has been {actionDisplayName}",id:"dztI4FIBBf"},{actionDisplayName:r});case lt.PRICE_ALERT:return e.formatMessage({defaultMessage:"Price alert has been {actionDisplayName}",id:"ApBHuTxt1D"},{actionDisplayName:r});case lt.SHORTCUT:return e.formatMessage({defaultMessage:"Shortcut has been {actionDisplayName}",id:"oprPa0O7KY"},{actionDisplayName:r});default:Qt(t)}}function yft({intl:e,actionPerformed:t}){switch(t){case"created":return e.formatMessage({defaultMessage:"created",id:"lr7wlbGcN2"});case"updated":return e.formatMessage({defaultMessage:"updated",id:"fM7xZh2bri"});case"paused":return e.formatMessage({defaultMessage:"paused",id:"onIpArq3j6"});case"resumed":return e.formatMessage({defaultMessage:"resumed",id:"NUz1enNtoA"});case"deleted":return e.formatMessage({defaultMessage:"deleted",id:"GBLHN+CxXe"});case"copied":return e.formatMessage({defaultMessage:"copied",id:"JZWZSAD5l1"});case"skipped":return e.formatMessage({defaultMessage:"skipped",id:"yrhXAwV22L"});default:Qt(t)}}const xft=1e9,XZ=-1e9;function a0e(e){return{trigger:{type:lt.SCHEDULED,schedule:e.schedule},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources??I_()},status:"ACTIVE",notificationSettings:hf}}function o0e({selectedTask:e}){if(!e||e.type===null)return null;switch(e.type){case"SCHEDULE":return{id:e.id,trigger:{type:lt.SCHEDULED,schedule:XE(e.scheduleInfo),expiryDate:e.expiryDate},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status,notificationSettings:e.notificationSettings??hf};case"ALERT":switch(e.subscription?.event_type){case"STOCK_PRICE_TARGET":return{id:e.id,trigger:{type:lt.PRICE_ALERT,alertType:Wr.TARGET_PRICE,price:(e.subscription.value_lower_bound??XZ)<0?e.subscription.value_upper_bound??xft:e.subscription.value_lower_bound??XZ,currency:"usd",symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};case"STOCK_PRICE_MOVEMENT":return{id:e.id,trigger:{type:lt.PRICE_ALERT,alertType:Wr.MOVEMENT_AMOUNT,percentageDecimalLowerBound:(e.subscription.value_lower_bound??0)/100,percentageDecimalUpperBound:(e.subscription.value_upper_bound??0)/100,symbol:e.subscription.event_entity??""},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:throw new Error("Unhandled subscription.event_type: "+e.subscription?.event_type)}case"SHORTCUT":return{id:e.id,trigger:{type:lt.SHORTCUT,shortcut:e.title},query:{prompt:e.prompt,searchModel:e.searchModel,sources:e.sources},status:e.status};default:Qt(e.type)}}function S3(e=!0){return{trigger:{type:lt.SCHEDULED,schedule:Bs()},query:{searchModel:e?le.PRO:le.DEFAULT,prompt:"",sources:I_()},status:"ACTIVE",notificationSettings:hf}}function i0e({symbol:e=""}={symbol:""}){return{trigger:{type:lt.PRICE_ALERT,alertType:Wr.TARGET_PRICE,price:0,currency:"usd",symbol:e},query:{prompt:"",searchModel:le.PRO,sources:I_()},status:"ACTIVE"}}function bB(e){if(e.trigger.type!==lt.SCHEDULED)return e;const t=r0e(e.query.searchModel,e.trigger.schedule),n=fft({expiryDate:e.trigger.expiryDate,schedule:e.trigger.schedule,defaultExpiryDate:t});return e.id?{...e,trigger:{...e.trigger,expiryDate:n}}:{...e,trigger:{...e.trigger,schedule:{...e.trigger.schedule},expiryDate:n,defaultExpiryDate:t}}}function I_(){return["web"]}function kon({intl:e,type:t,symbol:n}){return`${n}  ${lct(t,e)}`}function Ton({intl:e,type:t,upperBound:n,lowerBound:r,currency:s="USD"}){const{$t:a}=e,i=l=>l!=null&&l!==-1&&Math.abs(l)!==_8;switch(t){case"STOCK_PRICE_TARGET":{if(i(r))return a({defaultMessage:"Price below {price}",id:"a0pUAk88Od"},{price:r.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});if(i(n))return a({defaultMessage:"Price above {price}",id:"t+Mcn2lglF"},{price:n.toLocaleString(e.locale,{style:"currency",currency:s,trailingZeroDisplay:"stripIfInteger"})});break}case"STOCK_PRICE_MOVEMENT":{const l=i(r),c=i(n);if(l&&c)return a({defaultMessage:"Price moves {percentage}%+",id:"RevB4+v84e"},{percentage:Math.abs(n)});if(c)return a({defaultMessage:"Price rises {percentage}%+",id:"9reloFrZNr"},{percentage:n});if(l)return a({defaultMessage:"Price drops {percentage}%+",id:"RWgd7UywB3"},{percentage:Math.abs(r)});break}default:Qt(t)}return""}const vft=async(e,t,n,r)=>await bft({headers:{},reason:"Report Bug",bugText:e,url:t,email:n,category:r}),bft=async({headers:e,reason:t,bugText:n,url:r,email:s,category:a})=>{try{const i=await re.POST("/webhooks/slack-web-debugger/web",t,{body:{bug_text:n,url:r,email:s??"",category:a??""},headers:e,timeoutMs:1e4});return i.data?i.data:null}catch(i){return ne.error("Failed to make bug report request",i),null}},_ft=e=>{if(!e.includes("/sidecar/"))return e;const t=new URL(e);return t.searchParams.delete("erp"),t.pathname=t.pathname.replace("/sidecar",""),t.toString()},l0e=async({paginationParams:e,timeoutMs:t,ascending:n=!1,reason:r})=>{const s=await re.POST("/rest/thread/list_ask_threads",r,{timeoutMs:t,body:{limit:Ige,ascending:n,...e}});if(s.error||!s.data)throw new Error(s.error?.detail?.toString()||"Failed to get user threads");return s.data},c0e=async({thread_uuid:e,format:t,filename:n,reason:r})=>{const s=await re.POST("/rest/thread/export",r,{body:{thread_uuid:e,format:t,filename:n},timeoutMs:Pe({productionMs:Ht.VERY_HIGH,clientSideMs:Ht.VERY_HIGH,devMs:Ht.VERY_HIGH})});if(s.error)throw new Error(s.error.detail?.toString()||"Failed to export thread");return s.data},E3=async(e,t)=>{try{await re.PUT("/rest/thread/{entry_uuid_or_slug}","remove-thread-expiry",{params:{path:{entry_uuid_or_slug:e}},body:{expired:!1}}),t?.()}catch{throw new Error("Failed to remove thread expiry")}},wft=({slugOrUUID:e})=>{const t=d.useCallback(async()=>{e&&await E3(e)},[e]);return d.useMemo(()=>({handleRemoveExpiry:t}),[t])};async function Cft({contextUUID:e,updatedAccess:t,rwToken:n,callback:r,reason:s}){try{const i=await(await re.POST("/rest/thread/update_thread_access",s,{body:{context_uuid:e??"",updated_access:t,read_write_token:n??""}}))?.data;r?.(i?.access)}catch(a){ne.error(a),r?.(a)}}const u0e=({currentAccessLevel:e,onClick:t,isCollection:n,isPage:r,spaceIsOrgPinned:s=!1,addOrgPinnedSpace:a,deleteOrgPinnedSpace:i,reason:l,hideLabels:c=!1,isCollectionOwner:u=!1})=>{const{$t:f}=Z(),m=Z(),{device:{isIOS:p,isAndroid:h}}=Pt(),{isEnterprise:g,organization:y}=Hn({reason:l}),{firstResult:{collection_info:x,sources:{sources:v}={}}={}}=Ft(),b=n?y?.settings?.public_collection_sharing_allowed??!0:r?y?.settings?.public_page_sharing_allowed??!0:y?.settings?.public_thread_sharing_allowed??!0,_=v?.includes(Dl.factset),w=d.useMemo(()=>n&&u?[{label:m.formatMessage({defaultMessage:"Share via link",id:"oJFaPCNcIw"}),text:m.formatMessage({defaultMessage:"Link share",id:"5CBpesC8V9"}),onClick:()=>i?.(),active:!s},{label:m.formatMessage({defaultMessage:"Pinned for everyone in org",id:"BCLJqQMHbj"}),text:m.formatMessage({defaultMessage:"Pinned",id:"fWZYP5U4xZ"}),onClick:()=>a?.(),active:s}]:void 0,[a,i,m,n,u,s]),C=d.useMemo(()=>[{label:c?void 0:"",text:f({defaultMessage:"Owner Only",id:"RUPRkBML7X"}),icon:kg,show:!1,accessLevel:Ct.OWNER_ONLY},{label:c?void 0:f({defaultMessage:"Only the author can view",id:"ZKx/MMPXAk"}),text:f(n?{defaultMessage:"Only invited members",id:"mm5vL8ueCo"}:{defaultMessage:"Private",id:"viXE3205/2"}),icon:kg,show:!r,onClick:()=>t(Ct.PRIVATE_READ),active:e===Ct.PRIVATE_READ,accessLevel:Ct.PRIVATE_READ,testId:"access-level-private"},{label:c?void 0:f({defaultMessage:"Anyone in your Space can view",id:"8i8H9TisQU"}),text:f({defaultMessage:"Space",id:"0ah2udCSKF"}),icon:uo,onClick:()=>t(Ct.COLLECTION_READ),active:e===Ct.COLLECTION_READ,show:!n&&!r&&!!x?.uuid,accessLevel:Ct.COLLECTION_READ,testId:"access-level-space"},{label:c?void 0:f({defaultMessage:"Anyone in your organization can view",id:"T2yBpbP3mu"}),text:f({defaultMessage:"Anyone in my org with the link",id:"ah50gEdYbM"}),icon:Ti,onClick:()=>t(Ct.ORG_READ),active:e===Ct.ORG_READ,show:g&&(!r||b),accessLevel:Ct.ORG_READ,testId:"access-level-org",subMenu:w},{label:c?void 0:f({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),text:f({defaultMessage:"Anyone with the link",id:"KL1VgUyLuG"}),icon:p?By:h?$k:b0,onClick:()=>t(Ct.PUBLIC_READ),active:e===Ct.PUBLIC_READ,show:b&&!_,accessLevel:Ct.PUBLIC_READ,testId:"access-level-public"}],[f,x?.uuid,e,_,c,h,n,g,p,r,t,b,w]),S=C.find(E=>E.accessLevel===e)||null;return d.useMemo(()=>({accessLevelMenuItems:C,selectedAccessMenuItem:S}),[C,S])},Non=e=>e?[Ct.ORG_READ,Ct.PUBLIC_READ,Ct.PUBLIC_PUBLISHED].includes(e):!1,Sft=e=>e?[Ct.OWNER_ONLY,Ct.PRIVATE_READ].includes(e):!0,d0e=e=>e?[Ct.PUBLIC_READ,Ct.PUBLIC_PUBLISHED,Ct.ORG_READ,Ct.COLLECTION_READ].includes(e):!1,Eft=e=>e?[Ct.PUBLIC_READ,Ct.PUBLIC_PUBLISHED].includes(e):!1,Mft=e=>{switch(e){case Ct.PUBLIC_PUBLISHED:case Ct.PUBLIC_READ:return b0;case Ct.COLLECTION_READ:return uo;case Ct.ORG_READ:return Ti;case Ct.PRIVATE_READ:case Ct.OWNER_ONLY:return kg;default:return null}},ZZ=e=>{switch(e){case Ct.PUBLIC_READ:case Ct.PUBLIC_PUBLISHED:return"public";case Ct.ORG_READ:return"organization";case Ct.COLLECTION_READ:return"collection";case Ct.PRIVATE_READ:case Ct.OWNER_ONLY:return"private";default:return"private"}};function _B({threadAccess:e,contextUUID:t,rwToken:n,collectionSlug:r,reason:s}){const{trackEvent:a}=Te(),i=et(),l=ot(),c=n3(),u=d0e(e),f=d.useCallback((h,g)=>{!t||!n||!i||e===h||Cft({contextUUID:t,updatedAccess:h,rwToken:n,reason:s,callback:y=>{if(y===h){if(c(x=>{if(x)return x.map(v=>({...v,thread_access:y}))}),e&&a("thread privacy changed",{oldPrivacy:ZZ(e),newPrivacy:ZZ(y),contextUUID:t}),r){const x=[lu,{collection_slug:r.slice(-22)}];l.invalidateQueries({queryKey:x})}g?.(y)}}})},[t,n,e,i,c,a,r,l,s]),m=d.useCallback(h=>{!i||u||(a("click share thread to space"),f(Ct.COLLECTION_READ,h))},[i,u,f,a]),p=d.useCallback(h=>{!i||!u||(a("click make thread private"),f(Ct.PRIVATE_READ,h))},[i,u,f,a]);return d.useMemo(()=>({isShareable:u,currentAccess:e,onShareThreadToSpace:m,onMakeThreadPrivate:p,handleAccessChange:f}),[u,f,p,m,e])}function q1(){return q1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q1.apply(null,arguments)}function f0e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)!==-1)continue;n[r]=e[r]}return n}var kft=d.useLayoutEffect,Tft=function(t){var n=I.useRef(t);return kft(function(){n.current=t}),n},JZ=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},Nft=function(t,n){var r=I.useRef();return I.useCallback(function(s){t.current=s,r.current&&JZ(r.current,null),r.current=n,n&&JZ(n,s)},[n])},eJ={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},jft=function(t){Object.keys(eJ).forEach(function(n){t.style.setProperty(n,eJ[n],"important")})},tJ=jft,Ea=null,nJ=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function Aft(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Ea||(Ea=document.createElement("textarea"),Ea.setAttribute("tabindex","-1"),Ea.setAttribute("aria-hidden","true"),tJ(Ea)),Ea.parentNode===null&&document.body.appendChild(Ea);var s=e.paddingSize,a=e.borderSize,i=e.sizingStyle,l=i.boxSizing;Object.keys(i).forEach(function(p){var h=p;Ea.style[h]=i[h]}),tJ(Ea),Ea.value=t;var c=nJ(Ea,e);Ea.value=t,c=nJ(Ea,e),Ea.value="x";var u=Ea.scrollHeight-s,f=u*n;l==="border-box"&&(f=f+s+a),c=Math.max(f,c);var m=u*r;return l==="border-box"&&(m=m+s+a),c=Math.min(m,c),[c,u]}var rJ=function(){},Ift=function(t,n){return t.reduce(function(r,s){return r[s]=n[s],r},{})},Rft=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak","wordSpacing","scrollbarGutter"],Pft=!!document.documentElement.currentStyle,Lft=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=Ift(Rft,n),s=r.boxSizing;if(s==="")return null;Pft&&s==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var a=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),i=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:a,borderSize:i}},Oft=Lft;function wB(e,t,n){var r=Tft(n);d.useLayoutEffect(function(){var s=function(i){return r.current(i)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var Dft=function(t,n){wB(document.body,"reset",function(r){t.current.form===r.target&&n(r)})},Fft=function(t){wB(window,"resize",t)},Uft=function(t){wB(document.fonts,"loadingdone",t)},Bft=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],$ft=function(t,n){var r=t.cacheMeasurements,s=t.maxRows,a=t.minRows,i=t.onChange,l=i===void 0?rJ:i,c=t.onHeightChange,u=c===void 0?rJ:c,f=f0e(t,Bft),m=f.value!==void 0,p=d.useRef(null),h=Nft(p,n),g=d.useRef(0),y=d.useRef(),x=function(){var _=p.current,w=r&&y.current?y.current:Oft(_);if(w){y.current=w;var C=Aft(w,_.value||_.placeholder||"x",a,s),S=C[0],E=C[1];g.current!==S&&(g.current=S,_.style.setProperty("height",S+"px","important"),u(S,{rowHeight:E}))}},v=function(_){m||x(),l(_)};return d.useLayoutEffect(x),Dft(p,function(){if(!m){var b=p.current,_=b.value;requestAnimationFrame(function(){_!==b.value&&x()})}}),Fft(x),Uft(x),d.createElement("textarea",q1({},f,{onChange:v,ref:h}))},m0e=d.forwardRef($ft);const Vft=({wrapperClassName:e,variant:t="default",size:n="default",errorText:r,className:s,value:a,maxLength:i,errorMessage:l,disabled:c=!1,hasShadow:u=!1,autoFocus:f=!1,placeholder:m="",rightItems:p=ce,onChange:h,onClear:g,onClick:y,onBlur:x,onFocus:v,onKeyDown:b,onPaste:_,isLoading:w,inlineEditBlock:C,label:S,subtitle:E,isOptional:k,minRows:M,isMobileUserAgent:j,allowEnterNewlines:R=!1,testId:O,textAreaClassname:D,ref:P})=>{const A=ex(c),T=d.useRef(null),[N,L]=d.useState(!1),[U,$]=d.useState(!1),V=d.useRef(N);V.current=N,d.useEffect(()=>{!j&&f&&T.current?.focus()},[j,T,f]),d.useEffect(()=>{A!==c&&!c&&!j&&f&&setTimeout(()=>{T.current?.focus()},200)});const W=d.useMemo(()=>B({"border-r mr-sm pr-xs border-subtler":p.length!=0}),[p.length]),Q=B("overflow-auto max-h-[50vh] outline-none w-full flex items-center","text-foreground font-sans resize-none","bg-transparent placeholder-quieter","caret-super selection:bg-super/50 dark:selection:bg-super/10 dark:selection:text-super",D),q=d.useMemo(()=>{const ye=(()=>{switch(t){case"subtle":return"bg-subtle";case"default":return"bg-base dark:bg-subtler";default:Qt(t)}})(),be=B("w-full focus:ring-subtler flex items-center",ye,"border border-subtler  focus:ring-1 rounded-md","duration-200 transition-all",{"ring-subtler ring-1":N,"shadow-sm":u},s),Ne=B({"py-sm text-sm px-md":n==="default","text-base p-md pb-xl":n==="large"}),ke=B({"pr-md":p.length===0});return B(be,Ne,ke)},[N,u,s,n,p.length,t]),H=l!==void 0,K=!H&&!!i&&!!a&&a.length>i,G=d.useMemo(()=>o.jsxs("div",{className:"right-sm gap-sm mb-xs pb-xs absolute bottom-0 flex items-center rounded-full",children:[w?o.jsx(F,{color:"light",children:o.jsx(de,{icon:C7e,className:"aspect-square animate-spin"})}):null,H&&o.jsx(z,{className:"mr-sm",children:o.jsx(F,{color:"red",variant:"tiny",children:l})}),K&&o.jsx(z,{className:"mr-sm",children:i&&a&&o.jsx(F,{color:"red",variant:"tiny",children:i-a.length})}),g!==void o.jsx("div",{className:W,children:o.jsx(Me,{icon:kt,pill:!0,onClick:g,size:Yt.small})}),p.map((ye,be)=>ye.type=="toggleButton"?o.jsx(_o,{...ye.buttonProps,disabled:ye.buttonProps.disableOverride?!1:ye.buttonProps.disabled||H||K},be):o.jsx(me,{...ye.buttonProps,size:Yt.small,disabled:ye.buttonProps.disabled||H||K,pill:!0},be))]}),[l,w,i,g,p,a,W,H,K]),ee=d.useCallback(()=>{if(T.current){const ye=T.current.value.length;T.current.focus(),T.current.setSelectionRange(ye,ye)}},[]),Y=d.useCallback(ye=>{if(!T?.current)return!0;const be=T.current,{selectionStart:Ne,selectionEnd:ke,value:Ie}=be;if(Ne!==ke)return!1;const Ce=document.createElement("div"),Ge=window.getComputedStyle(be);Ce.style.position="absolute",Ce.style.visibility="hidden",Ce.style.whiteSpace=Ge.whiteSpace,Ce.style.wordWrap=Ge.wordWrap,Ce.style.font=Ge.font,Ce.style.padding=Ge.padding,Ce.style.border=Ge.border,Ce.style.width=be.offsetWidth+"px",Ce.style.lineHeight=Ge.lineHeight,document.body.appendChild(Ce);try{const tt=parseInt(Ge.lineHeight)||24,gt=Ie.substring(0,Ne);Ce.textContent=gt;const Ee=Ce.offsetHeight;return ye==="first"?Ee<=tt:(Ce.textContent=Ie,Ce.offsetHeight-Ee<tt)}finally{document.body.removeChild(Ce)}},[]),te=d.useCallback(ye=>{v?.(ye.nativeEvent),L(!0)},[v]),se=d.useCallback(ye=>{x?.(ye.nativeEvent),L(!1)},[x]),ae=d.useCallback(ye=>{y?.(ye.nativeEvent)},[y]),pe=d.useCallback(ye=>{h?.(ye.target.value)},[h]),fe=d.useCallback(ye=>{A1(ye.nativeEvent,{isMobileUserAgent:j,isComposing:U,allowEnterNewlines:R,onKeyDown:b})},[b,U,j,R]),ge=d.useCallback(()=>VF($),[$]),Se=d.useCallback(()=>WF($),[$]),je=d.useCallback(ye=>{_?.(ye.nativeEvent)},[_]);return d.useImperativeHandle(P,()=>{const ye=T.current;return ye.focusAtEnd=ee,ye.inLine=Y,ye.isFocused=()=>V.current,ye.append=be=>{T.current&&(T.current.value+=be)},ye.scrollToEnd=()=>{T.current&&(T.current.scrollTop=T.current.scrollHeight)},ye.trim=()=>{T.current&&(T.current.value=T.current.value.trim())},ye},[ee,Y]),d.useEffect(()=>{f&&!j&&ee()},[f,ee,j]),o.jsxs("div",{"data-test-id":O,children:[o.jsx(y_,{label:S,subtitle:E,isOptional:k,errorText:r}),o.jsx("div",{className:B("rounded-3xl",e),children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("div",{className:q,children:o.jsx(m0e,{ref:T,autoFocus:f,placeholder:m,disabled:c,minRows:M,value:a,onClick:ae,onChange:pe,name:S,onKeyDown:fe,onBlur:se,onCompositionStart:ge,onCompositionEnd:Se,onFocus:te,onPaste:je,className:Q,autoComplete:"off","data-testid":O})}),o.jsx("div",{className:"absolute bottom-0 m-px flex justify-between rounded-b-md px-[6px]",style:{width:"calc(100% - 2px)"},children:G})]})}),C&&o.jsx("div",{className:"mt-sm flex justify-end",children:C})]})},Wa=I.memo(Vft),Wft=[{label:"Comet Assistant",value:"AGENT",description:"Use cases where Comet Assistant is acting on your behalf and does the wrong thing. For general Comet issues please use Comet Browser instead."},{label:"Comet Browser",value:"BROWSER",description:"General Comet UI/UX issues. For general Perplexity web issues please use Web instead."},{label:"Product",value:"PRODUCT",description:"General product features, UI/UX issues, or user experience problems"},{label:"AI",value:"AI",description:"Core AI model issues, accuracy problems, or response quality"},{label:"Enterprise",value:"ENTERPRISE",description:"Enterprise-specific features"},{label:"Platform",value:"PLATFORM",description:"Infrastructure, performance, or system-level issues"},{label:"Mobile",value:"MOBILE",description:"Mobile app functionality or design issues"},{label:"Search",value:"SEARCH",description:"Search functionality, results quality, or indexing problems"},{label:"Web",value:"WEB",description:"General Web UI/UX issues."}],Hft=({value:e,onSelect:t,options:n,placeholder:r="Select a category..."})=>{const a=n.find(c=>c.value===e)?.label||r,i=n.map(c=>({type:"default",text:c.label,tooltipText:c.description,onClick:()=>t(c.value),show:!0})),l={text:a,variant:"common",size:"small",trailingComponent:o.jsx(de,{icon:Wn,size:"xs"}),extraCSS:"w-full justify-between border-subtler bg-base p-sm dark:border-subtle dark:bg-subtler"};return o.jsx(nn,{items:i,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(Me,{...l})})},zft=({isOpen:e,onClose:t})=>{const[n,r]=d.useState(""),[s,a]=d.useState(""),[i,l]=d.useState(""),[c,u]=d.useState(!1),[f,m]=d.useState(null),{firstResult:{context_uuid:p,backend_uuid:h,expiry_time:g,collection_info:{slug:y}={}}={}}=Ft(),x=ji(),{handleAccessChange:v}=_B({contextUUID:p,rwToken:x,collectionSlug:y,reason:"Bug Report"}),{handleRemoveExpiry:b}=wft({slugOrUUID:h}),_=async()=>{if(!n.trim()){m("Please describe the bug");return}u(!0),m(null);try{const C=_ft(window.location.href),S=await vft(n,C,s,i);t(),S?.status==="success"&&S.linear_url&&window.open(S.linear_url,"_blank"),v(Ct.PUBLIC_READ),g&&await b(),r(""),l("")}catch(C){ne.error("Failed to submit bug report",C),m("Failed to submit bug report. Please try again.")}finally{u(!1)}},w=()=>{r(""),l(""),a(""),m(null),t()};return o.jsx(qt,{isOpen:e,onClose:w,title:"Report a Bug",variant:"large",actionList:[{text:"Cancel",onClick:w,variant:"common"},{text:c?"Submitting...":"Submit Bug Report",onClick:_,variant:"primary",disabled:c||!n.trim(),isLoading:c}],children:o.jsxs("div",{className:"space-y-md",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"base",className:"mb-sm",children:"Category (optional)"}),o.jsx(Hft,{value:i,onSelect:l,options:Wft,placeholder:"Select a category..."})]}),o.jsxs("div",{children:[o.jsx(F,{variant:"base",className:"mb-sm",children:"Who should we assign this bug to? (optional)"}),o.jsx(Wa,{value:s,onChange:C=>a(C),placeholder:"Please provide the email address. E.g. johnny@perplexity.ai",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),o.jsxs("div",{children:[o.jsx(F,{variant:"base",className:"mb-sm",children:"Please describe the bug you encountered:"}),o.jsx(Wa,{value:n,onChange:C=>r(C),placeholder:"Describe what happened, steps to reproduce, and any other relevant details...",className:"w-full",isMobileUserAgent:!1,isMobileStyle:!1,minRows:1})]}),f&&o.jsx(F,{variant:"smallMono",color:"red",className:"text-sm",children:f})]})})};var Kn;(function(e){e.MACOS="macos",e.WINDOWS="windows"})(Kn||(Kn={}));var Sr;(function(e){e.NEW_THREAD="NEW_THREAD",e.STOP_GENERATING="STOP_GENERATING",e.TOGGLE_INCOGNITO="TOGGLE_INCOGNITO",e.SHOW_SHORTCUTS="SHOW_SHORTCUTS",e.FOCUS_ASK_INPUT="FOCUS_ASK_INPUT",e.TOGGLE_DICTATION="TOGGLE_DICTATION",e.TOGGLE_V2V="TOGGLE_V2V"})(Sr||(Sr={}));const jon="keyboard-shortcuts",p0e=(e,t,n=!1)=>[{type:Sr.NEW_THREAD,label:e.formatMessage({defaultMessage:"New Thread",id:"76XSxT3hV8"}),macos:["","K"],windows:t?["Ctrl","Shift","P"]:["Ctrl","I"],editable:!0,global:!0},{type:Sr.TOGGLE_V2V,label:e.formatMessage({defaultMessage:"Toggle Voice Mode",id:"ulahVrf1h4"}),macos:["","Shift","B"],windows:["Ctrl","Shift","B"],editable:!0,global:!0,requiresAuth:!0,windowsAppOnly:!0},{type:Sr.TOGGLE_DICTATION,label:e.formatMessage({defaultMessage:"Toggle Voice Dictation",id:"tWip/8rlIv"}),macos:["","D"],windows:["Ctrl","D"],editable:!1,windowsAppOnly:!0},{type:Sr.TOGGLE_INCOGNITO,label:e.formatMessage({defaultMessage:"Toggle Incognito",id:"YNMg3vd9IG"}),macos:["",";"],windows:["Ctrl",";"],editable:!1},{type:Sr.SHOW_SHORTCUTS,label:e.formatMessage({defaultMessage:"Show Shortcuts",id:"8o6rUVckYq"}),macos:["","/"],windows:["Ctrl","/"],editable:!1},{type:Sr.FOCUS_ASK_INPUT,label:e.formatMessage({defaultMessage:"Focus Ask Input",id:"RP5ybIk9wM"}),macos:["","J"],windows:["Ctrl","J"],editable:!1}].filter(s=>(!s.requiresAuth||n)&&(!s.windowsAppOnly||t)),Gft={Meta:"",Shift:"",ArrowUp:"",ArrowDown:"",ArrowLeft:"",ArrowRight:"",Enter:"",Period:".",Semicolon:";",Slash:"/",Escape:"Esc"},qft={"":"Meta","":"Shift","":"ArrowUp","":"ArrowDown","":"ArrowLeft","":"ArrowRight","":"Enter"},Kft=(e,t=Kn.MACOS)=>e==="Meta"?t===Kn.WINDOWS?"Win":"":Gft[e]||e,sJ=e=>e==="Win"?"Meta":qft[e]||e,Yft=({label:e,keys:t})=>o.jsxs(F,{color:"light",className:"py-md flex place-content-between items-center",children:[o.jsx(F,{as:"dd",variant:"small",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:e}),o.jsx(z,{as:"dl",className:"space-x-two flex items-center",children:t.map(n=>o.jsx(z,{className:"px-xs flex h-5 min-w-5 items-center justify-center rounded border font-mono",children:n},n))})]}),h0e=I.memo(({closeModal:e,isOpen:t})=>{const n=Z(),{device:{isMacOS:r,isWindowsApp:s}}=Pt(),a=et(),i=r?Kn.MACOS:Kn.WINDOWS,l=d.useMemo(()=>p0e(n,s,a),[n,s,a]);return o.jsx(ox,{childVariant:"hide-chrome",isOpen:t,canOutsideClickClose:!0,onClose:e,children:o.jsx(z,{variant:"background",className:"relative w-[90vw] max-w-screen-sm overflow-hidden rounded-xl",children:o.jsxs(z,{variant:"subtler",className:"p-md inset-0",children:[o.jsx(F,{className:"mb-2",variant:"section-title",as:"h2",children:n.formatMessage({defaultMessage:"Keyboard Shortcuts",id:"nFkLBjIGMy"})}),o.jsx(z,{as:"dl",className:"divide-y",children:l.map(c=>o.jsx(Yft,{label:c.label,keys:c[i]},c.type))})]})})})});h0e.displayName="KeyboardShortcutHelperModal";const Ac=({collectionSlug:e,reason:t,enabled:n=!!e})=>{const r=async()=>e?await Get({params:{collection_slug:e,version:pl},reason:t})??null:null,{data:s,isLoading:a}=Ue({enabled:n,queryKey:["get_collection",{collection_slug:e?.slice(-22)}],queryFn:r,placeholderData:Pu});return d.useMemo(()=>({collection:s??void 0,isLoading:a}),[s,a])},j8=async({request:e,reason:t})=>{const{fileRepositoryInfo:n,limit:r,offset:s,searchTerm:a,fileStates:i,email:l}=e;try{let c;i.includes("COMPLETE")?c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:i}:c={file_repository_info:n,limit:r,offset:s??0,search_term:a,file_states_in_filter:i,email_in_filter:[l]};const{data:u,error:f}=await re.POST("/rest/file-repository/list-files",t,{headers:{"content-type":"application/json"},body:c,timeoutMs:Pe(),numRetries:1});if(f)throw new we("API_CLIENTS_ERROR",{cause:f});return{files:u?.files??[],numTotalFiles:u?.num_total_files??0}}catch(c){return ne.error(c),null}},Qft=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/file-repository/get-file-upload-urls",t,{body:e,timeoutMs:5e3,numRetries:1});if(r)throw new Error("Failed to get fileUploadUrl",{cause:r});return n},CB=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/files/list",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to get connector files",{cause:r});return n},Xft=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/files/delete",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to delete connector files",{cause:r});return n},Zft=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/files/resync",t,{body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new Error("Failed to resync connector files",{cause:r});return n},Jft=async({request:e,reason:t})=>{try{const{data:n,error:r}=await re.POST("/rest/file-repository/uploads",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:Pe(),numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{cause:r});return n??null}catch(n){return ne.error(n),null}};async function SB({request:e,reason:t}){return new Promise((n,r)=>{re.SSE("/rest/sse/index_files",t,{params:e,headers:{"content-type":"application/json",accept:"text/event-stream"},handlers:{message:s=>{s.status==="success"?n():r(new Error("Indexing failed"))}}}).catch(r)})}const g0e=({reason:e})=>{const t=ot();return dt({mutationFn:({fileUuids:n,fileRepoInfo:r})=>Xft({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},emt=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,cursor:i,pollingEnabled:l=!1,pageSize:c,fileTypes:u,reason:f})=>{const[m,p]=d.useState(!1),h=d.useMemo(()=>({file_repository_info:e,filters:{connection_types:t??ce,status:n??ce,search_keyword:r,parent_uuids:s??ce,root_files_only:a??!1,file_types:u??ce,connection_ids:ce,ids:ce,remote_file_ids:ce,uuids:ce,upload_ids:ce},pagination:{cursor:i,page_size:c??100},order_by:"updated",order_dir:"desc"}),[e,t,n,r,s,a,i,c,u]),g=Ue({queryKey:Ome(h),queryFn:()=>CB({request:h,reason:f}),refetchInterval:()=>l&&m?5e3:!1,staleTime:0,gcTime:0,enabled:e.file_repository_type!=="COLLECTION"||e.file_repository_type==="COLLECTION"&&!!e.owner_id&&e.owner_id!==Tl});return d.useEffect(()=>{const y=g.data?.files.some(x=>x.status==="SYNCING"||x.status==="QUEUED")||!1;p(y)},[g.data]),g},tmt=({fileRepoInfo:e,connectionTypes:t,status:n,searchKeyword:r,parentUuids:s,rootFilesOnly:a,pageSize:i,fileTypes:l,reason:c})=>{const u={file_repository_info:e,filters:{connection_types:t??ce,status:n??ce,search_keyword:r,parent_uuids:s??ce,root_files_only:a??!1,file_types:l??ce,connection_ids:ce,ids:ce,remote_file_ids:ce,uuids:ce,upload_ids:ce},pagination:{page_size:i},order_by:"updated",order_dir:"desc"};return Lu({enabled:e.file_repository_type==="USER"||e.file_repository_type==="COLLECTION"&&!!e.owner_id,initialPageParam:void 0,queryKey:Ome(u,!0),queryFn:({pageParam:f})=>CB({request:{...u,pagination:{cursor:f,page_size:i}},reason:c}),getNextPageParam:f=>f.next_cursor??void 0})},nmt=({reason:e})=>{const t=ot();return dt({mutationFn:({fileUuids:n,fileRepoInfo:r})=>Zft({request:{file_repository_info:r,filters:{uuids:n,connection_ids:[],connection_types:[],file_types:[],ids:[],parent_uuids:[],remote_file_ids:[],root_files_only:!1,status:[],upload_ids:[]}},reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["connector-files"]})}})},ZE=e=>{switch(e){case"GOOGLE_DRIVE":return C5;case"ONEDRIVE":return Dg;case"SHAREPOINT":return Fg;case"DROPBOX":return Dm;case"BOX":return Ug;case"WILEY":return tF;case"GCAL":return aF;case"NOTION":case"NOTION_MCP":return N5;case"LINEAR":case"LINEAR_ALT":return lF;case"SLACK":return uF;case"SLACK_DIRECT":return dF;case"GITHUB_MCP_DIRECT":return mF;case"ASANA_MCP_DIRECT":return Bg;case"ASANA_MCP_MERGE":return Bg;case"ATLASSIAN_MCP_DIRECT":return gF;case"JIRA_MCP_MERGE":return yF;case"CONFLUENCE_MCP_MERGE":return xF;case"MICROSOFT_TEAMS_MCP_MERGE":return vF;case"OUTLOOK":return gE;case"FACTSET":return _5;default:return""}};function Aon(e){if(e===0)return"0 bytes";const t=1024,n=["bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(e)/Math.log(t));return Math.ceil(e/Math.pow(t,r))+" "+n[r]}const rmt=e=>{const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"||t==="PAGE"};function smt(e){const t=e.file_metadata.file_type;return t==="FOLDER"||t==="DATABASE"||t==="WORKSPACE"?Yle:vu}const dm=e=>{switch(e){case"GOOGLE_DRIVE":return w5;case"ONEDRIVE":return E5;case"SHAREPOINT":return M5;case"DROPBOX":return oF;case"BOX":return k5;case"GCAL":return S5;case"NOTION":case"NOTION_MCP":return T5;case"OUTLOOK":return kme;case"LINEAR":case"LINEAR_ALT":return iF;case"SLACK":case"SLACK_DIRECT":return cF;case"GITHUB_MCP_DIRECT":return fF;case"ASANA_MCP_DIRECT":case"ASANA_MCP_MERGE":return pF;case"ATLASSIAN_MCP_DIRECT":return hF;case"JIRA_MCP_MERGE":return wme;case"CONFLUENCE_MCP_MERGE":return Cme;case"MICROSOFT_TEAMS_MCP_MERGE":return Sme;default:return null}},Vl=e=>{switch(e){case"crunchbase":return JD;case"factset":return ZD;case"wiley":return Om;case"google_drive":return w5;case"onedrive":return E5;case"sharepoint":return M5;case"gcal":return S5;case"dropbox":return oF;case"box":return k5;case"gmail":return yGe;case"notion":case"notion_mcp":return T5;case"outlook":return kme;case"linear":case"linear_alt":return iF;case"slack":case"slack_direct":return cF;case"github_mcp_direct":return fF;case"asana_mcp_direct":case"asana_mcp_merge":return pF;case"atlassian_mcp_direct":return hF;case"jira_mcp_merge":return wme;case"confluence_mcp_merge":return Cme;case"microsoft_teams_mcp_merge":return Sme;case"wiley_mcp_cashmere":return Om;case"cbinsights_mcp_cashmere":return nF;case"pitchbook_mcp_cashmere":return rF;case"statista_mcp_cashmere":return sF;default:return null}},ja=e=>{switch(e){case"crunchbase":return eF;case"factset":return _5;case"google_drive":return C5;case"onedrive":return Dg;case"sharepoint":return Fg;case"gcal":return aF;case"dropbox":return Dm;case"box":return Ug;case"gmail":return xGe;case"notion":case"notion_mcp":return N5;case"outlook":return gE;case"linear":case"linear_alt":return lF;case"slack":return uF;case"slack_direct":return dF;case"github_mcp_direct":return mF;case"asana_mcp_direct":return Bg;case"asana_mcp_merge":return Bg;case"atlassian_mcp_direct":return gF;case"jira_mcp_merge":return yF;case"confluence_mcp_merge":return xF;case"microsoft_teams_mcp_merge":return vF;case"wiley_mcp_cashmere":return RP;case"cbinsights_mcp_cashmere":return PP;case"pitchbook_mcp_cashmere":return LP;case"statista_mcp_cashmere":return OP;default:return e}},amt=e=>{switch(e){case"GOOGLE_DRIVE":return C5;case"ONEDRIVE":return Dg;case"SHAREPOINT":return Fg;case"DROPBOX":return Dm;case"BOX":return Ug;case"NOTION":case"NOTION_MCP":return N5;case"LINEAR":case"LINEAR_ALT":return lF;case"SLACK":return uF;case"SLACK_DIRECT":return dF;case"GITHUB_MCP_DIRECT":return mF;case"ASANA_MCP_DIRECT":return Bg;case"ASANA_MCP_MERGE":return Bg;case"ATLASSIAN_MCP_DIRECT":return gF;case"JIRA_MCP_MERGE":return yF;case"CONFLUENCE_MCP_MERGE":return xF;case"MICROSOFT_TEAMS_MCP_MERGE":return vF;default:return""}},omt=(e,t)=>new Date(e+"Z").toLocaleString(t,{month:"numeric",day:"numeric",year:"numeric",hour:"numeric",minute:"2-digit",hour12:!0,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}),imt=(e,t)=>{switch(e){case"RECEIVED":case"QUEUED":case"RATE_LIMITED":return t.formatMessage({id:"Cnm0QAkWnp",defaultMessage:"Queued"});case"SYNCING":return t.formatMessage({id:"eOnwqs6QFY",defaultMessage:"Syncing"});case"SYNC_ERROR":return t.formatMessage({id:"N1cqoEe4CZ",defaultMessage:"Sync error"});case"EVALUATING_RESYNC":case"READY":return t.formatMessage({id:"IZFEUgrg25",defaultMessage:"Ready"})}},y0e=(e,t)=>{if(t==="WILEY")return ZE(t);if(t||e.is_memory||e.is_conversation_history)return e.name&&e.name.trim()?e.name:void 0},x0e=e=>e.isFile,v0e=e=>e.isDirectory,lmt=async(e,t=Yze)=>{const n=[e],r=[];for(;n.length>0;){const s=n.pop();if(s){if(x0e(s)){const a=await new Promise(i=>{s.file(i)});if(r.push(a),r.length>t)return r}else if(v0e(s)){const a=s.createReader(),i=await new Promise(l=>a.readEntries(l));n.push(...i)}}}return r},Si=I.memo(({blockCount:e,size:t=Yt.large,animateLines:n=!0,divider:r,noLines:s,noHeight:a,variant:i="subtler",className:l,...c})=>{const u="h-1 bg-inverse/70  rounded-full",f=d.useMemo(()=>{const m=[];for(let p=0;p<(e??1);p++)m.push(o.jsx(z,{variant:i,className:B("animate-pulse rounded-md",{"h-8":t===Yt.small,"h-10":t===Yt.regular,"h-[72px]":t===Yt.large,"h-32":t===Yt.xl,"h-6":t===Yt.tiny,"h-full":a}),children:o.jsx("div",{className:"gap-y-sm p-md flex h-full flex-col",children:!s&&o.jsxs(o.Fragment,{children:[o.jsx(ve.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ve.div,{initial:{width:n?0:"100%"},animate:{width:"100%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ve.div,{initial:{width:n?0:"80%"},animate:{width:"80%"},transition:{duration:.8,delay:.2},className:u}),o.jsx(ve.div,{initial:{width:n?0:"20%"},animate:{width:"20%"},transition:{duration:.8,delay:.2},className:u})]})})},p));return m},[n,e,t,s,a,i]);return o.jsx(z,{className:B("h-full",{"divider gap-y-sm flex flex-col":r,"absolute top-0 w-full":a},l),...c,children:f})});Si.displayName="TextBlockThrobber";var Cn;(function(e){e.GOOGLE_DRIVE="GOOGLE_DRIVE",e.ONEDRIVE="ONEDRIVE",e.SHAREPOINT="SHAREPOINT",e.DROPBOX="DROPBOX",e.BOX="BOX",e.WILEY="WILEY",e.GCAL="GCAL",e.GENERATED_IMAGE="GENERATED_IMAGE",e.GENERATED_VIDEO="GENERATED_VIDEO",e.NOTION="NOTION",e.NOTION_MCP="NOTION_MCP",e.OUTLOOK="OUTLOOK",e.LINEAR="LINEAR",e.LINEAR_ALT="LINEAR_ALT",e.SLACK="SLACK",e.GITHUB_MCP_DIRECT="GITHUB_MCP_DIRECT",e.ASANA_MCP_DIRECT="ASANA_MCP_DIRECT",e.ASANA_MCP_MERGE="ASANA_MCP_MERGE",e.ATLASSIAN_MCP_DIRECT="ATLASSIAN_MCP_DIRECT",e.LOCAL="LOCAL",e.SLACK_DIRECT="SLACK_DIRECT",e.JIRA_MCP_MERGE="JIRA_MCP_MERGE",e.CONFLUENCE_MCP_MERGE="CONFLUENCE_MCP_MERGE",e.MICROSOFT_TEAMS_MCP_MERGE="MICROSOFT_TEAMS_MCP_MERGE",e.FACTSET="FACTSET"})(Cn||(Cn={}));const b0e=I.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,onFolderClick:s})=>{const a="connectors-table-files",i=Z(),{locale:l}=Z(),{isMobileStyle:c}=xe(),{mutate:u}=g0e({reason:a}),{mutate:f}=nmt({reason:a}),m=d.useCallback(h=>{rmt(h)?s(h.uuid,h.name):h.connection_file_url&&window.open(h.connection_file_url,"_blank")},[s]),p=d.useCallback(h=>[{type:"default",text:i.formatMessage({defaultMessage:"View",id:"FgydNeoT78"}),icon:Vk,onClick:g=>{g.stopPropagation(),h.connection_file_url&&window.open(h.connection_file_url,"_blank")},show:!!h.connection_file_url},{type:"default",text:i.formatMessage({defaultMessage:"Remove",id:"G/yZLul6P1"}),icon:Fd,onClick:g=>{g.stopPropagation(),u({fileUuids:[h.uuid],fileRepoInfo:t})},show:r},{type:"default",text:i.formatMessage({defaultMessage:"Resync",id:"yr3UuWC6qt"}),icon:Ub,onClick:g=>{g.stopPropagation(),f({fileUuids:[h.uuid],fileRepoInfo:t})},show:r&&h.connection_type!==Cn.LOCAL}],[i,r,u,f,t]);return n?o.jsx("tr",{children:o.jsx("td",{colSpan:5,className:"py-sm",children:o.jsx("div",{className:"w-full",children:o.jsx(Si,{variant:"subtle",size:"regular",blockCount:8,noLines:!0,divider:!0,className:"w-full"})})})}):o.jsx(o.Fragment,{children:e.map((h,g)=>o.jsx(I.Fragment,{children:o.jsxs("tr",{className:"border-subtler animate-in fade-in border-b align-middle duration-500",onClick:()=>m(h),children:[o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(z,{className:"shrink-0",children:h.connection_type===Cn.LOCAL?o.jsx(de,{icon:By,size:"lg"}):o.jsx("img",{src:dm(h.connection_type)??"",alt:h.name,width:24,height:24})})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(F,{children:o.jsx(de,{icon:smt(h)})}),o.jsx(F,{variant:"small",color:"light",className:"truncate",children:h.name})]})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(F,{variant:"small",color:"light",className:"truncate",children:omt(h.updated,l)})}),o.jsx("td",{className:"py-sm cursor-pointer overflow-hidden whitespace-nowrap",children:o.jsx(F,{variant:"small",color:h.status==="SYNC_ERROR"?"red":"light",className:"truncate",children:imt(h.status,i)})}),o.jsx("td",{className:"py-sm",children:o.jsx("span",{className:"flex justify-end",children:o.jsx(nn,{isMobileStyle:c,placement:"bottom-end",items:p(h),children:o.jsx(Me,{noPadding:!0,size:"small",icon:Ud})})})})]})},g))})});b0e.displayName="ConnectorsTableFiles";const Ao=10,aJ=20,cmt=Ao*41+46,_0e=I.memo(({files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,allowEditSources:r,selectedFiles:s,currentPath:a,setSelectedFiles:i,setCurrentPath:l,handleFolderClick:c,handleResetSearch:u})=>{const f=Z(),m=d.useMemo(()=>I.memo(()=>{const p=d.useCallback(()=>{l([]),u()},[]);return a.length===0?null:o.jsxs("div",{className:"mb-md gap-x-xs flex items-center",children:[o.jsx(F,{variant:"tiny",color:a.length===0?void 0:"light",className:"cursor-pointer hover:underline",onClick:p,children:f.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"})}),a.map((h,g)=>o.jsx(w0e,{item:h,index:g,currentPathLength:a.length,handleResetSearch:u,setCurrentPath:l},h.uuid))]})}),[a,u,f,l]);return o.jsxs("div",{style:{minHeight:cmt},className:"px-sm pt-md flex flex-col",children:[o.jsx(m,{}),o.jsx("div",{className:"grow-0",children:o.jsxs("table",{className:"w-full table-fixed",children:[o.jsx("thead",{className:"border-subtler border-b",children:o.jsxs("tr",{children:[o.jsx("th",{className:"pb-sm w-[10%] text-left",children:o.jsx(F,{variant:"smallBold",children:f.formatMessage({defaultMessage:"Source",id:"aH4De2Y20k"})})}),o.jsx("th",{className:"pb-sm w-[45%] text-left",children:o.jsx(F,{variant:"smallBold",children:f.formatMessage({defaultMessage:"Name",id:"HAlOn1ZsuY"})})}),o.jsx("th",{className:"pb-sm w-1/4 text-left",children:o.jsx(F,{variant:"smallBold",children:f.formatMessage({defaultMessage:"Date",id:"P7PLVjLe4f"})})}),o.jsx("th",{className:"pb-sm w-1/5 text-left",children:o.jsx(F,{variant:"smallBold",children:f.formatMessage({defaultMessage:"Status",id:"tzMNF3jWoU"})})})]})}),o.jsx("tbody",{children:o.jsx(b0e,{allowEditSources:r,files:e,fileRepoInfo:t,isLoadingConnectorFiles:n,selectedFiles:s,setSelectedFiles:i,onFolderClick:c})})]})}),!n&&e.length===0&&o.jsx("div",{className:"flex grow items-center justify-center",children:o.jsx(F,{color:"light",variant:"small",className:"text-center",children:f.formatMessage({defaultMessage:"Files that you sync will be found here",id:"uT32Xg01/F"})})})]})});_0e.displayName="ConnectorsTableContent";const w0e=I.memo(({item:e,index:t,currentPathLength:n,handleResetSearch:r,setCurrentPath:s})=>{const a=d.useCallback(()=>{s(i=>i.slice(0,t+1)),r()},[r,t,s]);return o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(F,{variant:"small",color:"light",children:"/"}),o.jsx(de,{icon:Yle}),o.jsx(F,{variant:"tiny",color:t===n-1?void 0:"light",className:"cursor-pointer hover:underline",onClick:a,children:e.name})]},e.uuid)});w0e.displayName="PathBlockFactory";function umt(e,t,n=2){if(e==null)return"";const r=e.includes(".")?e.slice(e.lastIndexOf(".")):"",s=e.substring(0,e.length-r.length);return s.length>t?s.substring(0,t-r.length-3)+".".repeat(n)+r:s+r}const R_=e=>{try{return(new URL(e).pathname.split("/").pop()||"").split(".").pop()?.toLowerCase()}catch{return e.split(".").pop()?.toLowerCase()}},C0e=e=>e.file.type.includes("image"),dmt=e=>e.file.type==="application/pdf",fmt=e=>e.file.type==="text/csv"||e.file.type=="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",mmt=e=>e.file.type==="text/plain"||e.file.type==="application/msword"||e.file.type==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"||e.file.type==="text/markdown",A8={txt:"text/plain",pdf:"application/pdf",jpeg:"image/jpeg",jpg:"image/jpeg",doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",md:"text/markdown",png:"image/png",csv:"text/csv"},pmt=e=>{if(e<0)throw new Error("Number of bytes cannot be negative");const t=["B","KB","MB","GB"];let n=0,r=e;for(;r>=1e3&&n<t.length-1;)r/=1e3,n++;return`${r%1===0?r.toString():r.toFixed(1)} ${t[n]}`},EB=[".txt",".pdf",".docx",".pptx",".xlsx",".md",".csv"],MB=[".txt",".pdf",".jpg",".jpeg",".png",".docx",".pptx",".xlsx",".md",".csv"],kB=[".mp3",".wav",".aiff",".ogg",".flac",".mp4",".mpeg",".mov",".avi",".flv",".mpg",".webm",".wmv",".3gp"],oJ=27,hmt=2e4;let B6=!1,$c=null;const gmt=()=>{const e=d.useRef(null),t=d.useRef(null);let n="";typeof window<"u"&&(window.location.hostname==="localhost"?n=`${window.location.protocol}//${window.location.hostname}:${window.location.port}/account/connectors`:n=`${window.location.protocol}//${window.location.hostname}/account/connectors`);const r=d.useCallback(u=>!!u&&u.length===36&&u.split("-").length===5,[]),s=d.useCallback((u,f,m,p,h)=>{if(!f&&u==="sharepoint"&&m){const g=m.match(/^https?:\/\/([^.]+)\.sharepoint\.com/i);if(g)return g[1]}if(!f&&u==="onedrive"&&r(h)&&p){const g=p.match(/@([^.]+)\./);if(g)return g[1]+"-my"}return f?u==="sharepoint"?f:f+"-my":null},[r]),a=d.useCallback(async(u,f)=>{f.success=!1;const m=s(u.connector,u.tenantName,u.webUrl,u.loginHint,u.accountIdentifier);f.tenant=m,$c||($c=await(await X(()=>import("./index-C3FxZ4wa.js"),__vite__mapDeps([3,2]))).PublicClientApplication.createPublicClientApplication({auth:{authority:m?"https://login.microsoftonline.com/common":"https://login.microsoftonline.com/consumers",clientId:u.clientId,redirectUri:n},cache:{cacheLocation:"sessionStorage",storeAuthStateInCookie:!0}}));const p=m?[`https://${m}.sharepoint.com/.default`]:["OneDrive.ReadWrite"];f.scopes=p;const h={scopes:p,login_hint:u.loginHint,prompt:"select_account"};let g=null,y=$c.getActiveAccount();if(y||(y=$c.getAllAccounts().find(v=>v.username===u.loginHint)??null),f.hasActiveAccount=!!y?.username,y)try{$c.setActiveAccount(y),g=(await $c.acquireTokenSilent(h)).accessToken}catch(x){f.silentAcquisitionError=x instanceof Error?x.toString():x}if(!g&&!B6)try{B6=!0;const x=await $c.loginPopup(h);$c.setActiveAccount(x.account),g=(await $c.acquireTokenSilent(h)).accessToken}catch(x){f.interactiveAcquisitionError=x instanceof Error?x.toString():x}finally{B6=!1}else g||(f.interactiveAuthenticationSkipped=!0);if(g)return f.success=!0,f.accessTokenLength=g.length,g;throw Error("Access token not acquired")},[n,s]),i=d.useCallback(u=>{const f=s(u.connector,u.tenantName,u.webUrl,u.loginHint,u.accountIdentifier);let m=u.mode==="source"?EB:MB;m=u.isAudioVideoFilesEnabled?m.concat(kB):m;const p=u.connector==="sharepoint"?{recent:!0,oneDrive:!1,sharedLibraries:!0}:{recent:!0,oneDrive:!0,sharedLibraries:!1},h={sdk:"8.0",messaging:{origin:n,channelId:oJ},authentication:{},entry:u.connector==="sharepoint"?{sharePoint:{}}:{oneDrive:{}},typesAndSources:{mode:u.mode==="attachment"?"files":"all",filters:m,pivots:p},selection:{mode:"multiple"}},g=new URLSearchParams({filePicker:JSON.stringify(h)});return u.webUrl?`${u.webUrl}/_layouts/15/FilePicker.aspx?${g}`:f?`https://${f}.sharepoint.com/_layouts/15/FilePicker.aspx?${g}`:`https://onedrive.live.com/picker?${g}`},[n,s]),l=d.useCallback(async u=>{const f=_=>{window.removeEventListener("message",h),t.current?.removeEventListener("message",p),t.current?.close(),e.current?.close(),_?u.onError?.(_):u.onCancel?.()},m=async(_,w)=>await new Promise((C,S)=>{const E=setTimeout(()=>{S(new Error("Request timed out"))},hmt);a(_,w).then(k=>{clearTimeout(E),C(k)}).catch(k=>{clearTimeout(E),S(k)})}),p=async _=>{const w={};switch(_.data.type){case"command":t.current?.postMessage({type:"acknowledge",id:_.data.id});const C=_.data.data;switch(C.command){case"authenticate":try{const S=await m(u,w);t.current?.postMessage({type:"result",id:_.data.id,data:{result:"token",token:S}})}catch(S){w.errorStep="authenticateCommand",w.error=S instanceof Error?S.toString():S,f(S)}finally{u.log?.(u.connectionType??u.connector.toUpperCase(),w)}break;case"pick":t.current?.postMessage({type:"result",id:_.data.id,data:{result:"success"}}),u.onPicked?.(C.items),f();break;case"close":f();break;default:f();break}break}},h=async _=>{if(_.source&&_.source===e.current){const w=_.data;w.type==="initialize"&&w.channelId===oJ&&(t.current=_.ports[0],t.current.addEventListener("message",p),t.current.start(),t.current.postMessage({type:"activate"}))}};let g;const y={};try{g=await a(u,y)}catch(_){y.errorStep="initialization",y.error=_ instanceof Error?_.toString():_,f(_);return}finally{u.log?.(u.connectionType??u.connector.toUpperCase(),y)}const x=document.getElementById("microsoft-file-picker");if(!x){f();return}if(e.current=x.contentWindow,!e?.current){f();return}const v=e.current.document.createElement("form");v.setAttribute("action",i(u)),v.setAttribute("method","POST"),e.current.document.body.append(v);const b=e.current.document.createElement("input");b.setAttribute("type","hidden"),b.setAttribute("name","access_token"),b.setAttribute("value",g),v.appendChild(b),e.current.document.body.appendChild(v),v.submit(),window.addEventListener("message",h)},[a,i]),c=d.useCallback((u,f)=>{let m;if(u.parentReference.sharepointIds?.siteId&&f==="sharepoint"){const h={item_id:u.id,drive_id:u.parentReference.driveId,site_id:u.parentReference.sharepointIds.siteId};m=JSON.stringify(h)}else m=u.id;const p=R_(u.name);return p?{id:m,name:u.name,sizeBytes:u.size,mimeType:A8[p]}:null},[]);return d.useMemo(()=>({openPicker:l,toPickerDocument:c}),[l,c])},I8="box-file-picker",ymt="0";let PC=null,iJ=!1;const xmt=()=>PC||(PC=new Promise((e,t)=>{const n=document.createElement("link");n.rel="stylesheet",n.href="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.css";const r=document.createElement("script");r.src="https://cdn01.boxcdn.net/platform/elements/17.1.0/en-US/picker.js",r.onload=()=>{if(!iJ){const s=document.createElement("style");s.textContent=`
                .be .be-header input[type="search"] {
                    background: white;
                }

                .btn-content {
                    display: flex;
                    justify-content: center;
                    align-items: center;
                }
            `,document.head.appendChild(s),iJ=!0}e()},r.onerror=t,n.onload=()=>document.body.appendChild(r),document.head.appendChild(n)}),PC),S0e=({apiKey:e,mode:t,isAudioVideoFilesEnabled:n,onPicked:r,onCancel:s,onError:a})=>{const i=d.useRef(null),l=d.useCallback(async(u="file")=>{try{if(await xmt(),!document.getElementById(I8)){a?.("Attempted to open picker when container isn't ready");return}let m=t==="source"?EB:MB;m=n?m.concat(kB):m;const p=[...m,".gdocs",".gsheets",".gslides"];i.current&&(i.current.removeListener("choose",r),i.current.removeListener("cancel",s),i.current.hide(),i.current=null);let h;u==="folder"?h=new window.Box.FolderPicker:h=new window.Box.FilePicker,i.current=h,h.addListener("choose",r),h.addListener("cancel",s),h.show(ymt,e,{container:`#${I8}`,logoUrl:k5,extensions:p.join(","),canUpload:!1,canSetShareAccess:!1,canCreateNewFolder:!1,chooseButtonLabel:"Select",cancelButtonLabel:"Cancel"})}catch(f){a?.(f);return}},[e,a,t,s,r,n]),c=d.useCallback(()=>{i.current&&(i.current.removeListener("choose",r),i.current.removeListener("cancel",s),i.current.hide(),i.current=null)},[r,s]);return d.useMemo(()=>({openPicker:l,cleanupPicker:c}),[l,c])},TB=I.memo(({isOpen:e,onClose:t,cleanupPicker:n})=>(d.useEffect(()=>()=>{n()},[n]),o.jsx(qt,{variant:"wide",isOpen:e,onClose:t,renderCloseButton:!0,children:o.jsx("div",{id:I8,style:{height:"800px"}})})));TB.displayName="BoxFilePickerModal";function E0e({reason:e}){const t=ot();return dt({mutationFn:()=>gJe({reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:["get_user_settings"]})}})}function NB({reason:e,onConnectorFileUploadSuccess:t}){const n=ot(),{openToast:r}=fn(),s=Z(),a=d.useRef(null),i=d.useRef(null);return d.useEffect(()=>()=>{a.current&&clearTimeout(a.current),i.current&&clearTimeout(i.current)},[]),dt({mutationFn:async({connectorName:l,fileIds:c,fileRepoInfo:u,folder_ids:f})=>await hJe({connectorName:l,fileIds:c,fileRepoInfo:u,folder_ids:f,reason:e}),onSuccess:()=>{const l=()=>{n.invalidateQueries({predicate:c=>c.queryKey[0]===Pme||c.queryKey[0]===Lme||c.queryKey[0]===Fme||c.queryKey[0]===Ume})};a.current=setTimeout(l,1e3),i.current=setTimeout(l,5e3),r({message:s.formatMessage({defaultMessage:"You'll receive an email when the sync is complete",id:"in8zoTTNmN"}),variant:"success",timeout:5}),t?.()}})}const vmt=({initialApiKey:e,expiresAtString:t,mode:n,isSpace:r=!1,fileRepoInfo:s,isAudioVideoFilesEnabled:a,reason:i})=>{const l=vt(),c=Z(),{deprecatedOpenToast:u}=fn(),{mutateAsync:f}=NB({reason:i}),{mutateAsync:m}=E0e({reason:i}),[p,h]=d.useState(!1),[g,y]=d.useState(""),[x,v]=d.useState("file"),b=d.useCallback(()=>h(!1),[]),_=d.useCallback(k=>{ne.error(`${Ug} file picker failed to open: ${k}`),u(c.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:Ug}),"error",5)},[c,u]),w=d.useCallback(k=>{const M=k.map(j=>j.id);f({connectorName:"box",fileIds:x=="file"?M:[],fileRepoInfo:r?s:void 0,folder_ids:x=="folder"?M:[]}),r||l.push(`/account/files?connector=box&uploadCount=${M.length}`),b()},[l,f,r,s,b,x]),{openPicker:C,cleanupPicker:S}=S0e({apiKey:g||e,mode:n,onPicked:w,onCancel:b,onError:_,isAudioVideoFilesEnabled:a}),E=d.useCallback(async(k="file")=>{if(t){const M=new Date(t);if(isNaN(M.getTime())){ne.error("Unparsable expiration timestamp from Box connector"),h(!0);return}if(M<new Date){const R=await m();y(R.api_key)}}h(!0),v(k)},[t,m]);return d.useEffect(()=>{p&&setTimeout(()=>{C(x)},100)},[p,C,x]),d.useMemo(()=>({isOpen:p,onOpen:E,onClose:b,cleanupPicker:S}),[S,p,b,E])},jn="/account",Vf="/org",M0e=()=>o.jsx("div",{className:"flex flex-1 items-center justify-end opacity-50",children:o.jsx(de,{icon:ba,size:"sm"})}),tn={Account:{show:!0,icon:WR,href:`${jn}/details`},ProPerks:{show:!0,icon:Zle,href:`${jn}/pro-perks`},Preferences:{show:!0,icon:Z2,href:`${jn}/preferences`},Personalize:{show:!0,icon:Qle,href:`${jn}/personalize`},Assistant:{show:!0,icon:up,href:`${jn}/assistant`},Connectors:{show:!0,icon:Xle,href:`${jn}/connectors`},Imports:{show:!0,icon:AO,href:`${jn}/files`},Products:{show:!0,icon:HR,href:`${jn}/purchases`},API:{show:!0,icon:tce,href:`${jn}/api`},Enterprise:{show:!0,icon:Ti,trailingComponent:o.jsx(M0e,{})},Reservations:{show:!0,icon:E7e,href:`${jn}/reservations`},Notifications:{show:!0,icon:dp,href:`${jn}/notifications`},Tasks:{show:!0,icon:Im,href:`${jn}/tasks`},Shortcuts:{show:!0,icon:Wk,href:`${jn}/shortcuts`},SiteInstructions:{show:!0,icon:S7e,href:`${jn}/site-instructions`}},eo={Organization:{show:!0,icon:Ti,href:`${jn}${Vf}/details`},Members:{show:!0,icon:k7e,href:`${jn}${Vf}/members`},"User access":{show:!0,icon:T7e,href:`${jn}${Vf}/user-access`},Permissions:{show:!0,icon:kg,href:`${jn}${Vf}/permissions`},Insights:{show:!0,icon:ece,href:`${jn}${Vf}/insights`},"Org Connectors":{show:!0,icon:Xle,href:`${jn}${Vf}/connectors`},"Org Imports":{show:!0,icon:AO,href:`${jn}${Vf}/files`}},ra={APIGroup:{show:!0,icon:Ti,href:`${jn}/api/group`},APIMembers:{show:!0,icon:zR,href:`${jn}/api/members`},APIBilling:{show:!0,icon:Jle,href:`${jn}/api/billing`},UsageMetrics:{show:!0,icon:ece,trailingComponent:o.jsx(M0e,{})},AccountLimits:{show:!0,icon:M7e,href:`${jn}/api/limits`},APIKeys:{show:!0,icon:Gle,href:`${jn}/api/keys`},APIFiles:{show:!0,icon:AO,href:`${jn}/api/files`},APIPlayground:{show:!0,icon:u1,href:`${jn}/api/playground/search`}},bmt=()=>`${jn}/details`,gx=()=>jn,k0e=({clientId:e})=>{const[t,n]=d.useState(!1);d.useEffect(()=>{if(!e)return;const s=document.createElement("script");return s.src="https://www.dropbox.com/static/api/2/dropins.js",s.id="dropboxjs",s.setAttribute("data-app-key",e),s.onload=()=>n(!0),s.onerror=()=>n(!1),document.body.appendChild(s),()=>{const a=document.getElementById("dropboxjs");a&&document.body.removeChild(a)}},[e]);const r=d.useCallback(s=>{if(!t)return;let a=s.mode==="source"?EB:MB;a=s.isAudioVideoFilesEnabled?a.concat(kB):a,window.Dropbox.choose({success:s.onPicked,error:i=>s.onError?.(i),multiselect:!0,extensions:a,folderselect:s.mode==="source"})},[t]);return d.useMemo(()=>({isReady:t,openPicker:r}),[t,r])},_mt=({clientId:e,isSpace:t=!1,fileRepoInfo:n,isAudioVideoFilesEnabled:r,reason:s})=>{const a=vt(),i=Z(),{deprecatedOpenToast:l}=fn(),{mutateAsync:c}=NB({reason:s}),{openPicker:u}=k0e({clientId:e}),f=gx(),m=d.useCallback(g=>{const y=g.map(x=>x.id);c({connectorName:"dropbox",fileIds:y,fileRepoInfo:t?n:void 0}),t||a.push(`${f}/files?connector=dropbox&uploadCount=${y.length}`)},[a,c,t,n,f]),p=d.useCallback(g=>{ne.error("A Dropbox file picker error occured:",g),l(i.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:Dm}),"error",5)},[i,l]),h=d.useCallback(g=>{u({mode:g,onPicked:m,onError:p,isAudioVideoFilesEnabled:r})},[u,m,p,r]);return d.useMemo(()=>({openPicker:h}),[h])};function wmt({reason:e}){return dt({mutationFn:async({connectionType:t,content:n})=>{await yJe({connectionType:t,content:n,reason:e})}})}const T0e=({reason:e,mode:t})=>{const n=Z(),[r,s]=d.useState(!1),[a,i]=d.useState(null),{deprecatedOpenToast:l}=fn(),{openModal:c,closeModal:u}=xt(),{openPicker:f,toPickerDocument:m}=gmt(),{mutateAsync:p}=wmt({reason:e}),h=d.useCallback(b=>{b.connector==="sharepoint"&&t==="attachment"?c("sharepointSiteModal",{onSelectSite:_=>{u(),b&&(s(!0),i({...b,webUrl:_}),f({...b,webUrl:_}))}}):(s(!0),i(b),b.connector==="onedrive"&&f(b))},[u,t,c,f]),g=d.useCallback(()=>{s(!1),i(null)},[s,i]),y=d.useCallback(b=>{ne.error("A Microsoft file picker error occured:",b),g(),l(n.formatMessage({defaultMessage:"{formattedName} is not responding. Please try again later.",id:"oF/tZmXBik"},{formattedName:vGe}),"error",5)},[g,l,n]),x=d.useCallback((b,_)=>{p({connectionType:b,content:_})},[p]),v=d.useCallback(b=>{a&&(i({...a,webUrl:b}),f({...a,webUrl:b}))},[a,f]);return d.useMemo(()=>({onOpen:h,onClose:g,onError:y,onSelectSite:v,toPickerDocument:m,log:x,isOpen:r,options:a}),[r,x,g,y,h,v,a,m])},yx=({reason:e,enabled:t=!0})=>{const{connectors:n}=wo({reason:e,enabled:t}),r=d.useMemo(()=>(n?.connectors??[]).reduce((s,a)=>(s[a.name]=a,s),{}),[n]);return d.useMemo(()=>({connectorsMap:r}),[r])},jB=({reason:e})=>{const{connectors:t}=wo({reason:e}),{connectorsMap:n}=yx({reason:e}),r=d.useMemo(()=>(t?.connectors??[]).filter(a=>(a.name==="google_drive"||a.name==="onedrive"||a.name==="sharepoint"||a.name==="dropbox"||a.name==="box")&&!n[a.name]?.connected),[n,t]),s=d.useMemo(()=>(t?.connectors??[]).filter(a=>!n[a.name]?.connected),[n,t]);return d.useMemo(()=>({disabledFileConnectors:r,disabledConnectors:s}),[s,r])},AB=({mode:e})=>{const t=Lt(),n=ml(),{currentOpenedModal:r}=xt(),s=d.useMemo(()=>t?.startsWith("/collections")||t?.startsWith("/spaces")?r==="uploadFilesModal"?"space_sources":"space":t?.startsWith("/search")?"thread":t?.startsWith("/settings")?null:"ask",[t,r]),a=d.useMemo(()=>n===null?null:t?.startsWith("/collections")||t?.startsWith("/spaces")?n.slug?typeof n.slug=="string"?n.slug:n.slug[0]??null:null:t?.startsWith("/search")?t.split("/").pop()??null:t?.startsWith("/settings")?null:e??null,[t,n,e]),i=gx(),l=d.useMemo(()=>{const c=`${i}/connectors`,u=new URLSearchParams;if(s){const f=Array.isArray(a)?a[0]:a;u.append("referrer",s),f&&u.append("referrerId",f)}return c+"?"+u.toString()},[s,a,i]);return d.useMemo(()=>({referrer:s,referrerId:a,redirectPath:l}),[l,s,a])},Ic=({reason:e,collectionSlugOverride:t})=>{const n=Lt(),r=ml(),{firstResult:{collection_info:{uuid:s}={}}={}}=Ft(),a=n?.includes("/search/")&&!!s,i=t??(Array.isArray(r?.slug)?r.slug[0]:r?.slug),{collection:l}=Ac({collectionSlug:i,reason:e}),c=d.useMemo(()=>{let u,f;return a?(u="COLLECTION",f=s??""):n?.includes("/collections")||n?.includes("/spaces")||n?.includes("/classroom")?(u="COLLECTION",f=l?.uuid||""):(u="ORG",f=""),{file_repository_type:u,owner_id:f}},[a,n,s,l?.uuid]);return d.useMemo(()=>({fileRepoInfo:c}),[c])},N0e=({fileRepositoryType:e,offset:t,searchTerm:n,ownerId:r,reason:s})=>{const{$t:a}=Z(),i=ot(),l=ml(),{deprecatedOpenToast:c}=fn(),{isEnterprise:u}=Hn({reason:s}),f=Yy(),m=I5(e,r,Ao,t,n),p=SF(r),h=Array.isArray(l?.slug)?l.slug[0]:l?.slug,g=h?_F(h):void 0,y=e==="USER"||e==="ORG"||e==="COLLECTION"&&!!r;return{...dt({mutationFn:async v=>{if(!y){c(a({defaultMessage:"Unable to delete files.",id:"QYfmPDehhb"}),"error",3);return}return xJe({request:{file_uuids:v,file_repository_info:{file_repository_type:e,owner_id:r}},reason:s})},onMutate:async v=>{await i.cancelQueries({queryKey:m});const b=i.getQueryData(m);return b&&i.setQueryData(m,_=>({..._,completedFiles:_.completedFiles.filter(w=>!v.includes(w.file_uuid)),processingFiles:_.processingFiles.filter(w=>!v.includes(w.file_uuid)),failedFiles:_.failedFiles.filter(w=>!v.includes(w.file_uuid)),numTotalFiles:Math.max((_.numTotalFiles||0)-v.length,0)})),{previousData:b}},onSuccess:()=>{u&&i.invalidateQueries({queryKey:f}),i.invalidateQueries({queryKey:m}),h&&i.invalidateQueries({queryKey:g}),i.invalidateQueries({queryKey:p})},onError:(v,b,_)=>{_?.previousData&&i.setQueryData(m,_.previousData),c(a({defaultMessage:"Failed to delete file",id:"aJlra1/tgY"}),"error",3)}}),isDeleteEnabled:y}},Cmt=({fileRepoInfo:e,reason:t})=>{const n=ot(),r=ml(),s=Yy(),a=Array.isArray(r?.slug)?r.slug[0]:r?.slug,i=a?_F(a):void 0,l=I5(e.file_repository_type,e.owner_id,Ao,0,""),c=["list_file_directory",e.file_repository_type,e.owner_id];return dt({mutationFn:async u=>{await SB({request:{file_repository_info:e,file_index_params:[{file_s3_url:u.file_s3_url,file_size:u.size,filename:u.name,file_uuid:u.file_uuid,replace_existing:!0}]},reason:t})},onMutate:async u=>{await n.cancelQueries({queryKey:l});const f={...u,state:"PROCESSING",error:void 0};return n.setQueriesData({queryKey:l},m=>{if(!m)return m;const p=m.completedFiles.filter(y=>y.name!==f.name),h=m.failedFiles.filter(y=>y.file_uuid!==f.file_uuid),g=[...m.processingFiles||[],f];return{...m,completedFiles:p,processingFiles:g,failedFiles:h}}),f},onSettled:()=>{n.invalidateQueries({queryKey:c}),e.file_repository_type==="ORG"&&n.invalidateQueries({queryKey:s}),a&&n.invalidateQueries({queryKey:i})}})},lJ=10,Smt=async(e,t)=>{const s=new FormData;Object.entries(t.fields).forEach(([i,l])=>{s.append(i,l)}),s.append("file",e);let a=null;for(let i=0;i<1;i++)try{i>0&&await new Promise(c=>setTimeout(c,2e3));const l=await fetch(t.s3_bucket_url,{method:"POST",body:s});if(!l.ok)throw new Error(`HTTP error ${l.status}: ${l.statusText}`);return}catch(l){a=l instanceof Error?l:new Error(String(l))}throw new Error(`UPLOAD_FAILED after 1 attempts: ${a?.message||"Unknown error"}`)},j0e=({fileRepoInfo:e,setTotalFilesUploading:t,replaceExisting:n,reason:r,onLocalFileUploadSuccess:s})=>{const{$t:a}=Z(),i=ot(),l=Yy(),c=ml(),u=Array.isArray(c?.slug)?c.slug[0]:c?.slug,f=u?_F(u):void 0,{deprecatedOpenToast:m}=fn(),{session:p}=mt(),h=p?.user?.email??"",g=wo({reason:r}),y=["list_file_directory",e.file_repository_type,e.owner_id],x=["list_file_directory_infinite",e.file_repository_type,e.owner_id],v=e.file_repository_type==="USER"||e.file_repository_type==="ORG"||e.file_repository_type==="COLLECTION"&&!!e.owner_id&&e.owner_id!==Tl;return{...dt({mutationFn:async _=>{if(!v){m(a({defaultMessage:"Unable to upload files.",id:"GrtfijFWiu"}),"error",3);return}t(_.length);for(let w=0;w<_.length;w+=lJ){const C=_.slice(w,w+lJ),S=await Qft({request:{file_upload_params:C.map(j=>({filename:j.name,content_type:j.type,file_size:j.size})),file_repository_info:e},reason:r}),E=S.limits_reached[0];if(E==="FILE_REPOSITORY_LIMIT_EXCEEDED"){const j=g.maxFilesPerRepository;m(a({defaultMessage:"You have reached the file limit of {limit} files per repository.",id:"J0uyf2gB1u"},{limit:j}),"error",3);break}else if(E==="USER_FILE_LIMIT_EXCEEDED"){const j=g.maxFilesPerUser;m(a({defaultMessage:"You've reached your total file limit of {limit} files across My Files and all Spaces. Delete some files or upgrade your plan to add more",id:"3CuAQ4xs/C"},{limit:j}),"error",3);break}const M=(await Promise.allSettled(S.file_url_params.map((j,R)=>j&&C[R]?{fileUploadUrlInfo:j,file:C[R]}:null).filter(j=>j!==null).map(async({fileUploadUrlInfo:j,file:R})=>{try{return await Smt(R,j),{file_s3_url:j.s3_object_url,filename:R.name,file_size:R.size,file_uuid:j.file_uuid,replace_existing:n}}catch(O){throw m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),O}}))).filter(j=>j.status==="fulfilled").map(j=>j.value);if(M.length>0&&await SB({request:{file_repository_info:e,file_index_params:M},reason:r}),S.limits_reached.length>0)break}},onMutate:async _=>{await i.cancelQueries({queryKey:y});const w=i.getQueryData(y),C=_.map(S=>({name:S.name,file_s3_url:"",file_title:null,file_description:null,file_uuid:crypto.randomUUID(),uploadedBy:h,state:"PROCESSING",size:S.size,date:new Date().toLocaleString(),isOptimistic:!0}));return i.setQueriesData({queryKey:y},S=>S&&{...S,processingFiles:[...S.processingFiles||[],...C]}),{previousData:w,optimisticFiles:C,uploadedFilesCount:_.length}},onError:(_,w,C)=>{m(a({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),C?.previousData&&i.setQueriesData({queryKey:y},C.previousData)},onSettled:()=>{i.invalidateQueries({queryKey:y}),i.invalidateQueries({queryKey:x}),i.invalidateQueries({queryKey:["connector-files"]}),i.invalidateQueries({queryKey:["connector-files-infinite"]}),e.file_repository_type==="ORG"&&i.invalidateQueries({queryKey:l}),u&&i.invalidateQueries({queryKey:f})},onSuccess:()=>{s?.()}}),isUploadEnabled:v}},A0e=({reason:e,onLocalFileUploadSuccess:t,collectionSlugOverride:n})=>{const r=ot(),{fileRepoInfo:s}=Ic({reason:e,collectionSlugOverride:n}),[a,i]=d.useState(0),[l,c]=d.useState(""),[u,f]=d.useState(0),{mutate:m}=j0e({fileRepoInfo:s,setTotalFilesUploading:f,reason:e,onLocalFileUploadSuccess:t}),{mutate:p}=N0e({fileRepositoryType:s.file_repository_type,offset:a,searchTerm:l,ownerId:s.owner_id,reason:e}),{mutate:h}=Cmt({fileRepoInfo:s,reason:e}),g=d.useCallback(b=>{p(b),u>0&&f(u-b.length)},[p,u]),y=d.useCallback(b=>{f(_=>_+1),h(b)},[h]),x=d.useCallback(b=>{r.setQueryData(["list_file_directory",s.file_repository_type,s.owner_id,Ao,a,l],_=>({..._,processingFiles:[],failedFiles:[],numTotalFiles:Math.max(0,(_?.numTotalFiles??0)-b.length)})),p(b.map(_=>_.file_uuid))},[s.file_repository_type,s.owner_id,a,l,r,p]),v=d.useCallback(async b=>{const _=[],w=async C=>{if(C.isFile){const S=await new Promise(E=>C.file(E));S.type!==""&&_.push(S)}else if(C.isDirectory){const S=C.createReader(),E=await new Promise(k=>S.readEntries(k));await Promise.all(E.map(w))}};b instanceof FileList?Array.from(b).forEach(C=>_.push(C)):await Promise.all(Array.from(b).map(async C=>{if(C.kind==="file"){const S=C.webkitGetAsEntry();S&&await w(S)}})),_.length>0&&m(_)},[m]);return d.useMemo(()=>({offset:a,setOffset:i,searchTerm:l,setSearchTerm:c,totalFilesUploading:u,setTotalFilesUploading:f,handleRemoveFiles:g,handleReplaceExistingFile:y,handleClearAllFiles:x,handleFileSelect:v}),[x,v,g,y,a,l,u])},I0e=I.memo(({children:e,uploadSources:t,placement:n,isMobileStyle:r,isOpen:s=!1,onOpen:a,onClose:i})=>{const{$t:l}=Z(),c=d.useCallback(()=>{a?.()},[a]),u=d.useCallback(()=>{i?.()},[i]),f=d.useMemo(()=>o.jsx(z,{className:"w-[200px]",children:o.jsx(zd,{items:t})}),[t]);return r?o.jsxs(o.Fragment,{children:[o.jsx(qt,{subtitle:l({defaultMessage:"Attach",id:"Ye0Clmvfec"}),subtitleClassname:"ml-sm mt-sm font-medium",variant:"bottom-left-sheet",isOpen:s,onClose:u,children:o.jsx(z,{className:"p-xs w-full",children:o.jsx(zd,{textColor:"light",items:t})})}),o.jsx("span",{onClick:c,children:e})]}):o.jsx(ei,{isOpen:s,placement:n,onOpen:c,onClose:u,content:f,children:e})});I0e.displayName="AttachDropdown";const Emt=({skip:e,filters:t,reason:n})=>{const r=Lu({enabled:!0,initialPageParam:null,queryKey:JGe(t),queryFn:({pageParam:a})=>eXe({filters:t,skipToken:a,reason:n}),getNextPageParam:a=>a&&a.sites.length?a.skipToken:void 0}),s=r.data?.pages.map(a=>a?.sites??[]).flat()??ce;return d.useMemo(()=>({...r,sites:s}),[r,s])},M3=(e,t,n)=>{d.useEffect(()=>{const r=new IntersectionObserver(a=>{a.forEach(i=>{i.isIntersecting&&t()})},n),s=e.current;return s&&r.observe(s),()=>{s&&r.unobserve(s)}},[e,t,n])},Mmt=11,R0e=I.memo(({onNext:e,onCancel:t})=>{const n="sharepoint-site-selector",r=d.useRef(null),{$t:s}=Z(),a=s({defaultMessage:"Next",id:"9+DdtuCqLw"}),i=s({defaultMessage:"Cancel",id:"47FYwba+bI"}),[l,c]=d.useState(null),u=d.useCallback(M=>c(M.name!==l?.name?M:null),[l]),{isMobileUserAgent:f}=xe(),[m,p]=d.useState(!1),[h,g]=d.useState(""),[y,x]=d.useState(h),v=d.useCallback(M=>{c(null),g(M)},[g]),{fetchNextPage:b,hasNextPage:_,isFetchingNextPage:w,sites:C,isLoading:S}=Emt({skip:!1,filters:{search_term:y},reason:n}),E=d.useMemo(()=>gs(()=>{_&&!w&&b()},500),[_,w,b]);M3(r,E,{threshold:.5}),d.useEffect(()=>{!S&&y===""&&p(C.length>Mmt)},[S,y,C]),d.useEffect(()=>{const M=setTimeout(()=>x(h),250);return()=>clearTimeout(M)},[h]);const k=d.useCallback(()=>e(l?.webUrl??""),[e,l?.webUrl]);return o.jsxs(z,{variant:"transparent",className:"px-md gap-y-sm grid sm:w-full md:w-[515px]",children:[m&&o.jsx(Xr,{type:"text",isMobileUserAgent:f,placeholder:s({defaultMessage:"Search sites",id:"Nxbc+cXNbW"}),value:h,className:"bg-subtle rounded-md border-none",onChange:v,pill:!1}),o.jsxs(z,{variant:"subtler",className:"gap-y-sm scrollbar-subtle p-sm mb-md h-56 flex-col overflow-y-scroll rounded-lg",children:[S&&o.jsx(Si,{className:"gap-y-sm grid",blockCount:5,size:"small",noLines:!0}),C.length>0&&C.map((M,j)=>o.jsx(P0e,{site:M,index:j,handleSelectSite:u,selectedSiteName:l?.name,sitesLength:C.length,lastSiteRef:r},j)),!S&&!w&&C.length===0&&o.jsx(F,{variant:"small",color:"light",textCenter:!0,children:s({defaultMessage:"No results",id:"jHJmjfxD4s"})}),w&&o.jsx(Si,{blockCount:1,size:"small"})]}),o.jsxs(z,{className:"gap-x-md flex justify-end",children:[o.jsx(me,{variant:"common",text:i,onClick:t}),o.jsx(me,{variant:"primary",text:a,textClassName:"",disabled:l===null,onClick:k})]})]})});R0e.displayName="SharepointSiteSelector";const P0e=I.memo(({site:e,index:t,handleSelectSite:n,selectedSiteName:r,sitesLength:s,lastSiteRef:a})=>{const i=d.useCallback(()=>n(e),[n,e]),l=d.useMemo(()=>o.jsx(de,{icon:dr,className:"text-super"}),[]);return o.jsx(Me,{ref:t===s-1?a:null,variant:"common",layout:"split",text:e.name,size:"small",onClick:i,extraCSS:"pl-sm",trailingComponent:r===e.name?l:null,textClassName:"!text-left w-5/6 text-foreground",fullWidth:!0})});P0e.displayName="TextButtonFactory";const IB=I.memo(({isOpen:e,options:t,onClose:n,onSelectSite:r})=>{const{$t:s}=Z(),a=d.useMemo(()=>t?.connector==="sharepoint"&&!t.webUrl,[t?.connector,t?.webUrl]),i=d.useMemo(()=>{if(a)return o.jsx(F,{variant:"entry-title-200",className:"ml-md line-clamp-3 text-pretty",children:s({defaultMessage:"Select a site",id:"NLmDBthOaZ"})})},[s,a]);return o.jsxs(qt,{variant:a?"medium":"wide",isOpen:e,onClose:n,renderCloseButton:!a,titleContent:i,children:[a&&o.jsx(R0e,{onNext:r,onCancel:n}),!a&&o.jsx("iframe",{id:"microsoft-file-picker",height:"800px"})]})});IB.displayName="MicrosoftFilePickerModal";const P_=({reason:e,enabled:t=!0})=>{const{connectors:n,isLoading:r,isStale:s,refetch:a}=wo({reason:e,enabled:t}),{connectorsMap:i}=yx({reason:e,enabled:t}),l=d.useMemo(()=>(n?.connectors??[]).filter(f=>FP.includes(f.name)&&i[f.name]&&i[f.name].connected),[i,n]),c=d.useMemo(()=>(n?.connectors??[]).filter(f=>!FP.includes(f.name)&&i[f.name]&&i[f.name].connected),[i,n]),u=d.useMemo(()=>(n?.connectors??[]).filter(f=>i[f.name]&&i[f.name].connected),[i,n]);return d.useMemo(()=>({enabledFileConnectors:l,enabledNonFileConnectors:c,enabledConnectors:u,isConnectorsLoading:r,isConnectorsStale:s,refetchConnectors:a}),[u,l,c,r,s,a])};var Nd;(function(e){e.MY_FILES="my-files",e.SOURCES="sources",e.MY_CONNECTORS="my-connectors",e.SPACES="spaces"})(Nd||(Nd={}));function RB({feature:e}){const{session:t}=mt(),r=(t?.user?.org_uuid??"none")!=="none",{hasAccessToProFeatures:s}=St(),{value:a}=Qs({flag:"connectors-space-access-for-pro",defaultValue:!1});return r?!0:s?e===Nd.MY_FILES?!1:e===Nd.SPACES?a:e!==Nd.SOURCES:!1}const L0e=({reason:e,fileRepoInfo:t,enablePolling:n=!1,activePollingIntervalMs:r=5e3,passivePollingIntervalMs:s=6e4})=>{const a=iqe(t),{data:i}=Ue({queryKey:a,queryFn:()=>Jft({request:{file_repository_info:t},reason:e}),refetchInterval:l=>{if(!n)return!1;const{pending_files:c=0}=l.state.data?.summary??{};return c>0?r:s},staleTime:sdt(30)});return{total:i?.summary?.total_files??0,pending:i?.summary?.pending_files??0,errors:i?.summary?.error_files??0,uploads:i?.summary?.total_uploads??0}},Is={type:"spring",stiffness:700,damping:50},hc=I.memo(({keyProp:e=0,message:t,variant:n,description:r,ctaText:s,ctaOnClick:a,closeOnCtaClick:i=!0,isVisible:l=!1,timeout:c,handleClick:u,handleClose:f,onTimeout:m=vn,position:p="top",iconOverride:h,...g})=>{const[y,x]=d.useState(l);d.useEffect(()=>{x(l)},[l]),d.useEffect(()=>{let w;return l&&c&&(w=setTimeout(()=>{x(!1),m()},c*1e3)),()=>{clearTimeout(w)}},[y,c,l,m]);const v=d.useCallback(()=>{x(!1),f?.()},[f]),b=d.useCallback(()=>{a?.(),i&&v()},[a,v,i]),_=d.useMemo(()=>{if(h)return h;switch(n){case"success":return Hk;case"error":return J2;case"refresh":return Ub;case"warning":return J2}},[h,n]);return o.jsx(Ye,{children:y&&o.jsx(ff,{children:o.jsx(ve.div,{className:B(`right-toastHMargin erp-sidecar:top-[114px] fixed ${p==="top"?"top-toastVMargin":"bottom-toastVMargin"} z-30 flex items-center justify-center ${u?"cursor-pointer":""}`),initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:Is,...g,children:o.jsxs(z,{variant:"raised",className:B("gap-x-sm p-md shadow-overlay flex items-center rounded-lg",{"cursor-pointer":n==="refresh"}),onClick:u??vn,children:[o.jsx(z,{variant:"subtler",className:"p-sm dark:bg-subtle rounded-md",children:o.jsx(F,{variant:"smallBold",color:n==="error"?"red":n==="warning"?"yellow":"super",children:o.jsx(de,{icon:_,size:"sm"})})}),o.jsxs(z,{className:"flex-1",children:[o.jsx(F,{variant:"small",color:"default",children:t}),r&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"mt-1 whitespace-pre-line",children:r})]}),s&&a&&o.jsx(Me,{text:s,variant:"subtle",onClick:b,size:"small",extraCSS:"ml-xl"}),c===void 0&&o.jsx(Me,{variant:"primary",size:"tiny",icon:kt,onClick:v,extraCSS:"ml-sm",noPadding:!0})]})},e)})})});hc.displayName="Toast";const O0e=Dt("UploadProgressContext",null),D0e=()=>{const e=d.useContext(O0e);if(!e)throw new Error("useUploadProgress must be used within an UploadProgressProvider");return e},F0e=I.memo(({children:e})=>{const[t,n]=d.useState([]),[r,s]=d.useState(!1),a=d.useCallback(({fileRepoInfo:m,collectionSlug:p,isFileManagerUiRedesignEnabled:h})=>{h&&n(g=>[...g,{id:g.length+1,fileRepoInfo:m,collectionSlug:p}])},[]),i=d.useCallback(m=>{n(p=>p.filter(h=>h.id!==m))},[]),l=d.useMemo(()=>({startMonitoring:a,setModalOpen:s}),[a,s]),c=t.at(-1),u=!r&&c,f=d.useCallback(()=>{c?.id&&i(c.id)},[c?.id,i]);return o.jsxs(O0e.Provider,{value:l,children:[e,u&&c&&o.jsx(kmt,{fileRepoInfo:c.fileRepoInfo,collectionSlug:c.collectionSlug,onClose:f})]})});F0e.displayName="UploadProgressProvider";const kmt=({fileRepoInfo:e,collectionSlug:t,onClose:n})=>{const r="upload-progress-toast",{$t:s}=Z(),a=vt(),i=ot(),[l,c]=d.useState(!1),[u,f]=d.useState(0),[m,p]=d.useState(0),{total:h,errors:g,pending:y}=L0e({enablePolling:!l,activePollingIntervalMs:5e3,passivePollingIntervalMs:5e3,fileRepoInfo:e,reason:r});d.useEffect(()=>{h>u&&f(h),g>m&&p(g),h===0&&u>0&&(c(!0),i.invalidateQueries({queryKey:["connector-files"]}),i.invalidateQueries({queryKey:["connector-files-infinite"]}))},[h,g,y,u,m,i]);const x=s({defaultMessage:"See files",id:"p+DFrrlLh2"}),v=d.useCallback(()=>{switch(e.file_repository_type){case"USER":a.push("/account/files");break;case"ORG":a.push("/account/org/files");break;case"COLLECTION":if(!t){c1.error("Collection slug is not set",{fileRepoInfo:e});return}a.push(`/spaces/${t}?showUploadModal`);break;default:c1.warn("Unsupported file repository type",{fileRepoInfo:e})}},[e,a,t]);if(!u)return null;if(l){const C=s({defaultMessage:"{totalFiles, number} files synced",id:"9MS85urDwN"},{totalFiles:u}),S=s({defaultMessage:"Ready to search",id:"n813XUWD4Q"});return o.jsx(hc,{message:C,description:S,variant:"success",iconOverride:Hk,ctaText:x,ctaOnClick:v,isVisible:!0,handleClose:n})}const b=Math.round((u-y)/u*100),_=s({defaultMessage:"Syncing {totalFiles, number} files",id:"ho+SHGkjiL"},{totalFiles:u}),w=isNaN(b)?"":s({defaultMessage:"{percentage, number}% complete with {errors, number} errors",id:"EbZcfC1rW4"},{percentage:b,errors:g});return o.jsx(hc,{message:_,description:w,variant:"success",iconOverride:Ub,ctaText:x,ctaOnClick:v,closeOnCtaClick:!1,isVisible:!0,handleClose:n})},k3=(e,t)=>{const{value:n,loading:r}=jt({flag:"file-manager-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},Tmt=[".pdf",".txt",".csv",".xlsx",".docx",".pptx",".md",".json"].join(",");function Nmt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.addEventListener&&e.addEventListener.apply(e,t)}function jmt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];e&&e.removeEventListener&&e.removeEventListener.apply(e,t)}var Amt=typeof window<"u";function R8(e){if(e){if(e.tagName==="BODY")return e;if(e.tagName==="IFRAME"){var t=e.contentDocument;return t?t.body:null}else if(!e.offsetParent)return null}else return null;return R8(e.offsetParent)}function cJ(e){var t=e||window.event;return t.touches.length>1?!0:(t.preventDefault&&t.preventDefault(),!1)}var uJ=Amt&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),sh=new Map,dJ=typeof document=="object"?document:void 0,LC=!1;const Imt=dJ?function(t,n){t===void 0&&(t=!0);var r=d.useRef(dJ.body);n=n||r;var s=function(i){var l=sh.get(i);l?sh.set(i,{counter:l.counter+1,initialOverflow:l.initialOverflow}):(sh.set(i,{counter:1,initialOverflow:i.style.overflow}),uJ?LC||(Nmt(document,"touchmove",cJ,{passive:!1}),LC=!0):i.style.overflow="hidden")},a=function(i){var l=sh.get(i);l&&(l.counter===1?(sh.delete(i),uJ?(i.ontouchmove=null,LC&&(jmt(document,"touchmove",cJ),LC=!1)):i.style.overflow=l.initialOverflow):sh.set(i,{counter:l.counter-1,initialOverflow:l.initialOverflow}))};d.useEffect(function(){var i=R8(n.current);i&&(t?s(i):a(i))},[t,n.current]),d.useEffect(function(){var i=R8(n.current);if(i)return function(){a(i)}},[])}:function(t,n){},Rmt=["https://www.googleapis.com/auth/userinfo.profile","https://www.googleapis.com/auth/userinfo.email","https://www.googleapis.com/auth/drive.readonly","https://www.googleapis.com/auth/drive.metadata.readonly"].join(" "),Pmt=["application/vnd.google-apps.file","application/vnd.google-apps.folder","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","text/plain","application/pdf","text/csv","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/markdown"],Lmt=["text/plain","application/pdf","text/csv","text/markdown","image/png","image/jpeg","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.google-apps.document","application/vnd.google-apps.presentation","application/vnd.google-apps.spreadsheet"],Omt=["audio/mpeg","audio/wav","audio/aiff","audio/ogg","audio/flac","audio/mp3","video/mp4","video/mpeg","video/mov","video/avi","video/x-flv","video/mpg","video/webm","video/wmv","video/3gpp","video/quicktime"],U0e=({clientId:e,loginHint:t,isAudioVideoFilesEnabled:n,onError:r})=>{const[s,a]=d.useState(!1);Imt(s);const i=d.useCallback((c,u)=>{const f=window.google?.picker,m=p=>{p.action===f.Action.PICKED?u.onPicked&&u.onPicked(p.docs??ce):(p.action===f.Action.CANCEL||p.action===f.Action.ERROR)&&(p.action===f.Action.CANCEL&&u.onCancel&&u.onCancel(),a(!1))};if(f)try{const p=new f.DocsView().setIncludeFolders(!0).setSelectFolderEnabled(!0).setMode(f.DocsViewMode.LIST),h=new f.ViewGroup(p);let g=u.mode==="source"?Pmt:Lmt;g=n?g.concat(Omt):g,new f.PickerBuilder().setSize(1051,650).addViewGroup(h).setSelectableMimeTypes(g.join(",")).enableFeature(f.Feature.MULTISELECT_ENABLED).setOAuthToken(c).setCallback(m).build().setVisible(!0),a(!0)}catch{r?.()}},[n,r]),l=d.useCallback(async c=>{try{await Promise.all([tct(),Rve()])}catch{r?.();return}window.google.accounts.oauth2.initTokenClient({client_id:e,login_hint:t,scope:Rmt,prompt:"none",callback:f=>{if(f.error!==void 0)throw new Error(f.error);try{i(f.access_token,c)}catch(m){console.log(m)}}}).requestAccessToken()},[i,e,t,r]);return d.useMemo(()=>({openPicker:l}),[l])};function Dmt(e){return e!==void 0&&"onClick"in e}function fJ(e,t){return!!(e.connection_type&&t.includes(e.connection_type))}const B0e=I.memo(({repoFileLimitReached:e,addFilesTooltipMessage:t,isAudioVideoFilesEnabled:n,handleSourcesEdit:r,variant:s="primary",collectionSlugOverride:a,connectionTypes:i=DB})=>{const l="file-upload-selector",c=Z(),{variation:u}=k3(!1),{$t:f}=Z(),{startMonitoring:m}=D0e(),{isMobileStyle:p}=xe(),[h,g]=d.useState(!1),{fileRepoInfo:y}=Ic({reason:l,collectionSlugOverride:a}),x=y.file_repository_type==="COLLECTION",{mutateAsync:v}=NB({reason:l,onConnectorFileUploadSuccess:()=>{r?.(u?"files":"connectors")}}),b=d.useCallback((...be)=>{m({fileRepoInfo:y,collectionSlug:a,isFileManagerUiRedesignEnabled:u}),v(...be)},[m,y,v,a,u]),_=d.useRef(null),{handleFileSelect:w}=A0e({reason:l,onLocalFileUploadSuccess:()=>{r?.(u?"files":"localFiles")}}),{referrer:C,referrerId:S}=AB({}),{connectorsMap:E}=yx({reason:l}),{enabledFileConnectors:k}=P_({reason:l}),{disabledFileConnectors:M}=jB({reason:l}),{trackEvent:j}=Te(),[R,O]=d.useState(!1),[D,P]=d.useState(!1),A=RB({feature:Nd.SPACES}),T=d.useCallback(be=>be.preventDefault(),[]),{onOpen:N,onClose:L,onError:U,options:$,onSelectSite:V,isOpen:W,log:Q}=T0e({reason:l,mode:"persistent"}),{openPicker:q}=U0e({clientId:E?.google_drive?.picker_credentials?.client_id??"",loginHint:E?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:n}),H=d.useCallback((be,Ne)=>{if(Ne==="onedrive"){const ke=be.map(Ie=>Ie.id);b({connectorName:"onedrive",fileIds:ke,fileRepoInfo:x?y:void 0})}else if(Ne==="sharepoint"){const ke=be.map(Ie=>({item_id:Ie.id??"",drive_id:Ie.parentReference.driveId??"",site_id:Ie.parentReference.sharepointIds?.siteId??""}));b({connectorName:"sharepoint",fileIds:ke,fileRepoInfo:x?y:void 0})}L()},[b,L,x,y]),{openPicker:K}=_mt({clientId:E?.dropbox?.picker_credentials?.client_id??"",isSpace:x,fileRepoInfo:y,isAudioVideoFilesEnabled:n,reason:l}),{onOpen:G,isOpen:ee,onClose:Y,cleanupPicker:te}=vmt({initialApiKey:E?.box?.picker_credentials?.api_key??"",expiresAtString:E?.box?.picker_credentials?.expires_at??"",mode:"source",isSpace:x,fileRepoInfo:y,isAudioVideoFilesEnabled:n,reason:l}),se=d.useCallback((be,Ne="file")=>{if(j("attempt connector file upload",{connectorName:be}),be==="google_drive")q({mode:"source",onPicked:async ke=>{const Ie=ke.map(Ce=>Ce.id);await b({connectorName:"google_drive",fileIds:Ie,fileRepoInfo:x?y:void 0})}});else if(be==="onedrive"||be==="sharepoint"){const ke=E?.[be];N({mode:"source",connector:be,clientId:ke?.picker_credentials?.client_id??"",tenantName:ke?.picker_credentials?.tenant_name??"",loginHint:ke?.connection_display_name??"",accountIdentifier:ke?.picker_credentials?.account_identifier,onPicked:Ie=>H(Ie,be),onError:U,onCancel:L,log:Q,isAudioVideoFilesEnabled:n})}else be==="dropbox"?K("source"):be==="box"&&G(Ne)},[j,q,N,E,y,x,L,U,H,b,K,G,Q,n]),{handleConnect:ae}=e3({reason:l}),pe=d.useCallback(be=>{be==="notion"&&(j("attempt connector authentication",{connectorName:be}),ae({connectorName:be}))},[j,ae]),fe=(()=>{const be=[],Ne={type:"default",text:f({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),icon:nce,onMouseDown:T,onClick:()=>{_.current?.click()}};if(i.includes(Cn.LOCAL)&&be.push(Ne),A){const ke=k.filter(Ie=>fJ(Ie,i)).map(Ie=>{const Ce=Ie.name;return Ce==="box"?{type:"nested",text:ja(Ce)??"",avatar:o.jsx("img",{src:Vl(Ce)??"",alt:ja(Ce),width:20,height:20}),isSubmenuOpen:R,onSubmenuOpen:()=>O(!0),onSubmenuClose:()=>O(!1),onMouseDown:T,submenu:[{type:"default",text:c.formatMessage({defaultMessage:"Upload files",id:"2jjdVzJX0c"}),onMouseDown:T,onClick:()=>se("box","file")},{type:"default",text:c.formatMessage({defaultMessage:"Upload folders",id:"qMKglS/Epo"}),onMouseDown:T,onClick:()=>se("box","folder")}]}:Ce==="notion"&&!x?{type:"default",text:ja(Ce)??"",avatar:o.jsx("img",{src:Vl(Ce)??"",alt:ja(Ce),width:20,height:20}),onMouseDown:T,onClick:()=>pe(Ce)}:{type:"default",text:ja(Ce)??"",avatar:o.jsx("img",{src:Vl(Ce)??"",alt:ja(Ce),width:20,height:20}),onMouseDown:T,onClick:()=>se(Ce)}}).filter(Ie=>Ie!==null);if(be.push(...ke),M.length>0&&!p){const Ie=M.filter(Ge=>fJ(Ge,i)),Ce={type:"nested",submenu:Ie.map(Ge=>({type:"default",size:"small",text:ja(Ge.name),avatar:o.jsx("img",{src:Vl(Ge.name)??"",alt:ja(Ge.name),width:20,height:20}),rightElement:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(de,{icon:ba,size:"sm"})}),onClick:()=>ae({connectorName:Ge.name,customReferrer:C??void 0,customReferrerId:S??void 0})})),isSubmenuOpen:D,onSubmenuOpen:()=>P(!0),onSubmenuClose:()=>P(!1),text:f({defaultMessage:"Add connectors",id:"2dXigF1Pil"}),icon:$k,onMouseDown:T};Ie.length>0&&be.push(Ce)}}return be})(),ge=d.useCallback(()=>g(!1),[]),Se=d.useCallback(()=>{const be=fe.at(0);if(fe.length===1&&Dmt(be)){be.onClick();return}g(!0)},[fe]),je=d.useMemo(()=>o.jsx(F,{color:"light",children:o.jsx(de,{icon:By,size:"sm"})}),[]),ye=d.useMemo(()=>o.jsx(F,{variant:"tiny",color:"light",children:c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}),[c]);return o.jsxs(o.Fragment,{children:[o.jsx(I0e,{uploadSources:fe,placement:"bottom-start",isMobileStyle:p,isOpen:h,onOpen:Se,onClose:ge,children:s==="primary"?o.jsx(me,{variant:"primary",size:"small",extraCSS:"py-[18px]",text:`+ ${c.formatMessage({defaultMessage:"Add files",id:"xrAjmQ72mN"})}`,disabled:e,toolTip:t}):o.jsx(Me,{size:"small",leadingComponent:je,text:ye,toolTip:t,testId:"add-files-button"})}),(E?.onedrive?.connected||E?.sharepoint?.connected)&&o.jsx(IB,{options:$,isOpen:W,onClose:L,onSelectSite:V}),E?.box?.connected&&o.jsx(TB,{isOpen:ee,onClose:Y,cleanupPicker:te}),o.jsx("input",{type:"file",ref:_,className:"hidden",onChange:be=>{be.target.files&&w(be.target.files)},onClick:be=>{be.target instanceof HTMLInputElement&&(be.target.value="")},multiple:!0,accept:Tmt})]})});B0e.displayName="FileUploadSelector";const $0e=I.memo(({statusToFilter:e,handleSelectStatus:t})=>{const{isMobileStyle:n}=xe(),r=Z(),s={ALL:r.formatMessage({defaultMessage:"All",id:"zQvVDJ+j59"}),QUEUED:r.formatMessage({defaultMessage:"Queued",id:"Cnm0QAkWnp"}),SYNCING:r.formatMessage({defaultMessage:"Syncing",id:"eOnwqs6QFY"}),SYNC_ERROR:r.formatMessage({defaultMessage:"Sync error",id:"N1cqoEe4CZ"}),READY:r.formatMessage({defaultMessage:"Ready",id:"IZFEUgrg25"})},a=Object.entries(s).map(([i,l])=>({text:l,type:"default",selected:e===i,onClick:()=>t(i==="ALL"?null:i)}));return o.jsx(nn,{isMobileStyle:n,placement:"bottom",items:a,children:o.jsx(me,{variant:"border",size:"small",extraCSS:"py-[18px]",text:e?s[e]:"Status",chevron:!0,chevronIcon:Wn})})});$0e.displayName="StatusDropdown";const V0e=I.memo(({allowEditSources:e,searchTerm:t,statusToFilter:n,selectedFiles:r,handleDeleteFiles:s,handleOnSearchValueChange:a,handleSelectStatus:i,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})=>{const{$t:f}=Z(),{isMobileUserAgent:m}=xe();return o.jsxs("div",{className:"mx-sm pt-md gap-sm flex flex-wrap items-center justify-between",children:[o.jsx(Xr,{type:"search",isMobileUserAgent:m,placeholder:f({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:t,className:"bg-subtle rounded-md border-none",onChange:a,pill:!1}),o.jsxs("div",{className:"gap-x-sm flex",children:[r.length!==0&&o.jsx(Me,{variant:"primary",onClick:s,icon:Fd,extraCSS:"h-[36px]"}),o.jsx($0e,{statusToFilter:n,handleSelectStatus:i}),e&&o.jsx(B0e,{repoFileLimitReached:!1,isAudioVideoFilesEnabled:l,collectionSlugOverride:c,connectionTypes:u})]})]})});V0e.displayName="ConnectorsTableHeader";var PB="Progress",LB=100,[Fmt,Ion]=Ca(PB),[Umt,Bmt]=Fmt(PB),W0e=d.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:a=$mt,...i}=e;(s||s===0)&&!mJ(s)&&console.error(Vmt(`${s}`,"Progress"));const l=mJ(s)?s:LB;r!==null&&!pJ(r,l)&&console.error(Wmt(`${r}`,"Progress"));const c=pJ(r,l)?r:null,u=JE(c)?a(c,l):void 0;return o.jsx(Umt,{scope:n,value:c,max:l,children:o.jsx(Xt.div,{"aria-valuemax":l,"aria-valuemin":0,"aria-valuenow":JE(c)?c:void 0,"aria-valuetext":u,role:"progressbar","data-state":G0e(c,l),"data-value":c??void 0,"data-max":l,...i,ref:t})})});W0e.displayName=PB;var H0e="ProgressIndicator",z0e=d.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=Bmt(H0e,n);return o.jsx(Xt.div,{"data-state":G0e(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});z0e.displayName=H0e;function $mt(e,t){return`${Math.round(e/t*100)}%`}function G0e(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function JE(e){return typeof e=="number"}function mJ(e){return JE(e)&&!isNaN(e)&&e>0}function pJ(e,t){return JE(e)&&!isNaN(e)&&e<=t&&e>=0}function Vmt(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${LB}\`.`}function Wmt(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${LB} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var Hmt=W0e,zmt=z0e;const hJ=(...e)=>e.filter(Boolean).join(" "),Gmt={default:"default"},q0e=I.memo(e=>{const{indicatorClassName:t,indeterminate:n,className:r,value:s=0,max:a=100,variant:i=Gmt.default,ref:l,...c}=e,u=I.useMemo(()=>{const f={default:"bg-inverse",super:"bg-super"};return hJ("size-full transition-transform duration-300 ease-in-out",f[i]||f.default,n&&"animate-indeterminate",t)},[i,n,t]);return o.jsx(Hmt,{ref:l,className:hJ("bg-subtle relative h-1 w-full overflow-hidden rounded-[1px]",r),...c,children:o.jsx(zmt,{className:u,style:{transform:`translateX(-${100-(s??0)/a*100}%)`}})})});q0e.displayName="Progress";const K0e=I.memo(({hasPreviousPage:e,hasNextPage:t,handlePrevPage:n,handleNextPage:r,shouldShowPlaceholder:s,fileRepoInfo:a})=>{const{$t:i}=Z(),l="border-subtler pt-md mx-sm flex translate-y-[1px] items-center justify-between";return s?o.jsx("div",{className:`${l} h-[42px]`}):o.jsx("div",{className:`${l} border-t`,children:o.jsxs("div",{className:"flex w-full justify-between",children:[o.jsx(qmt,{fileRepoInfo:a}),o.jsxs("div",{className:"gap-x-md flex",children:[o.jsx(Me,{text:i({defaultMessage:"Prev",id:"LYaNlLTdL2"}),size:"small",noPadding:!0,disabled:!e,onClick:n,icon:cp}),o.jsx(Me,{text:i({defaultMessage:"Next",id:"9+DdtuCqLw"}),size:"small",noPadding:!0,disabled:!t,onClick:r,icon:Xn})]})]})})});K0e.displayName="SourcesTableCursorPagination";const qmt=({fileRepoInfo:e})=>{const t="upload-progress",{$t:n}=Z(),r=ot(),{variation:s}=k3(!1),{pending:a,total:i}=L0e({enablePolling:!0,fileRepoInfo:e,reason:t}),l=i-a,c=d.useRef(0),u=n({defaultMessage:"Uploading {uploaded, number} of {total, number} files...",id:"XRDZYoRWzL"},{uploaded:l,total:i});return d.useEffect(()=>{c.current>0&&a===0&&i===0&&(r.invalidateQueries({queryKey:["connector-files"]}),r.invalidateQueries({queryKey:["connector-files-infinite"]})),c.current=i},[a,i,r]),!s||a<=0?o.jsx("div",{}):o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(q0e,{variant:"super",value:l,max:i,className:"h-2 w-48 rounded-full"}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{color:"super",children:o.jsx(Fr,{size:14})}),o.jsx(F,{variant:"tiny",color:"default",children:u})]})]})};let Mv=0;function Kmt(e,t,n=!1){const[r,s]=d.useState(!1),[a,i]=d.useState(!1),l=d.useCallback(g=>{g.preventDefault()},[]),c=d.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),s(!0),Mv++)},[]),u=d.useCallback(g=>{g.preventDefault(),Mv=Math.max(0,Mv-1),Mv===0&&s(!1)},[]),f=d.useCallback(g=>{g.preventDefault(),s(!1),i(!1),Mv=0,!t&&n&&g.dataTransfer?.items.length&&e(g.dataTransfer.items)},[t,e,n]),m=d.useCallback(g=>{g?.dataTransfer?.types.includes("Files")&&(g.preventDefault(),i(!0))},[]),p=d.useCallback(g=>{g.preventDefault(),i(!1)},[]),h=d.useCallback(g=>{g.preventDefault(),s(!1),i(!1),!t&&!n&&g?.dataTransfer?.items.length>0&&e(g.dataTransfer.items)},[t,e,n]);return d.useEffect(()=>(document.addEventListener("dragover",l),document.addEventListener("dragenter",c),document.addEventListener("dragleave",u),document.addEventListener("drop",f),()=>{document.removeEventListener("dragover",l),document.removeEventListener("dragenter",c),document.removeEventListener("dragleave",u),document.removeEventListener("drop",f)}),[l,c,u,f]),d.useMemo(()=>({isDraggingFile:r,isFileOver:a,rootProps:{onDragOver:m,onDragLeave:p,onDrop:h}}),[p,m,h,r,a])}const OB=I.memo(({onDrop:e,disabled:t=!1,children:n,dropZoneClassName:r,dropLabel:s,dropIcon:a=N7e,allowDropAnywhere:i=!1,hideContent:l=!1,...c})=>{const{$t:u}=Z(),{isDraggingFile:f,isFileOver:m,rootProps:p}=Kmt(e,t,i),h=s??u(i?{defaultMessage:"Dropped files appear here.",id:"9WR4elgZix"}:{defaultMessage:"Drop your files here.",id:"llIM82nPs+"});return o.jsxs("div",{className:"relative",...p,...c,children:[f&&t?o.jsx(z,{className:B("border-subtler bg-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed",{"!border-caution":m},r?.(f,m)),children:o.jsxs(F,{color:"red",children:[o.jsx(de,{icon:a,className:"mr-2"}),"Drop zone disabled"]})}):f?o.jsxs(o.Fragment,{children:[o.jsx(z,{variant:"background",className:"absolute inset-0 z-20 rounded-2xl opacity-80"}),o.jsx(z,{className:B("gap-x-sm animate-in fade-in border-subtler absolute inset-0 z-20 flex items-center justify-center rounded-2xl border-2 border-dashed transition-all duration-200",{"!border-super":m},r?.(f,m)),children:!l&&o.jsxs(F,{color:"super",children:[o.jsx(de,{icon:a,className:"mr-2"}),h]})})]}):null,n]})});OB.displayName="DropZone";const DB=[Cn.GOOGLE_DRIVE,Cn.ONEDRIVE,Cn.SHAREPOINT,Cn.DROPBOX,Cn.BOX,Cn.NOTION],Ymt=e=>[...DB,...e],Qmt=I.memo(({fileRepoInfo:e,collectionSlugOverride:t,connectionTypes:n=DB})=>{const r="connectors-source-section",s=ml(),a=t??(Array.isArray(s?.slug)?s.slug[0]:s?.slug),{collection:i}=Ac({collectionSlug:a,reason:r}),l=i?Pge(i.user_permission):!1,c=e.file_repository_type==="COLLECTION",u=d.useMemo(()=>({file_repository_type:"USER",owner_id:""}),[]),f=c?e:u,[m,p]=d.useState(""),[h,g]=d.useState(null),[y,x]=d.useState([]),[v,b]=d.useState(!1),[_,w]=d.useState([]),[C,S]=d.useState(null),[E,k]=d.useState([]),M=_.length>0?_[_.length-1]?.uuid:void 0,{mutate:j}=g0e({reason:r}),R=!1,D=m.trim().length>0?{parentUuids:[],rootFilesOnly:!1}:{parentUuids:M?[M]:[],rootFilesOnly:!M},{data:P,isLoading:A}=emt({connectionTypes:n,status:h?[h]:[],pageSize:Ao,searchKeyword:m,...D,cursor:C,pollingEnabled:!0,fileRepoInfo:f,reason:r}),{files:T,nextCursor:N}=d.useMemo(()=>({files:P?.files||[],nextCursor:P?.next_cursor}),[P]),L=!!N,U=E.length>0,$=c?l:!0,V=d.useCallback(()=>{p(""),g(null)},[]),W=d.useCallback(Y=>{g(Y)},[]),Q=d.useCallback(Y=>{p(Y)},[p]),q=d.useCallback(()=>{j({fileUuids:y,fileRepoInfo:f}),x([]),b(!1)},[j,y,f]),H=d.useCallback(Y=>{b(Y),x(Y?T.map(te=>te.uuid):[])},[T,x]),K=d.useCallback((Y,te)=>{V(),w(se=>[...se,{uuid:Y,name:te}])},[V]),G=d.useCallback(()=>{N&&(k(Y=>[...Y,C??""]),S(N))},[N,C]),ee=d.useCallback(()=>{E.length>0&&k(Y=>{const te=[...Y],se=te.pop()??null;return S(se),te})},[E.length]);return d.useEffect(()=>{S(null),k([])},[m,h,M]),o.jsxs(OB,{onDrop:vn,disabled:!$,children:[o.jsx(V0e,{allowEditSources:$,searchTerm:m,statusToFilter:h,selectedFiles:y,handleDeleteFiles:q,handleOnSearchValueChange:Q,handleSelectStatus:W,isAudioVideoFilesEnabled:R,collectionSlugOverride:t,connectionTypes:n}),o.jsx(_0e,{files:T,fileRepoInfo:f,isLoadingConnectorFiles:A,allowEditSources:$,selectedFiles:y,currentPath:_,isHeaderCheckboxChecked:v,setSelectedFiles:x,setCurrentPath:w,handleSelectAll:H,handleFolderClick:K,handleResetSearch:V}),o.jsx(K0e,{fileRepoInfo:f,hasPreviousPage:U,hasNextPage:L,handlePrevPage:ee,handleNextPage:G,shouldShowPlaceholder:A||!T.length})]})});Qmt.displayName="ConnectorsSourceSection";function xx({reason:e,collectionSlugOverride:t}){const n=ml(),r=t??(Array.isArray(n?.slug)?n.slug[0]:n?.slug),{collection:s}=Ac({collectionSlug:r,reason:e}),a=s?ett(s.user_permission):!1,i=s?rtt(s.user_permission):!1,l=s?ntt(s.user_permission):!1,c=s?ttt(s.user_permission):!1,u=s?Pge(s.user_permission):!1;return d.useMemo(()=>({isUserOwner:a,isUserInvited:i,isUserReader:l,isUserAtLeastReader:c,isUserAtLeastWriter:u}),[c,u,i,a,l])}const Xmt=({reason:e})=>Ue({queryKey:["list_space_templates"],queryFn:()=>Yet({reason:e})}),Y0e=({collectionSlug:e,reason:t})=>{const{data:n,isLoading:r}=Xmt({reason:t});return d.useMemo(()=>!n?.templates||!e?{templateSpace:void 0,isLoading:r}:{templateSpace:n.templates.find(s=>s.collection.slug===e),isLoading:r},[e,n?.templates,r])},Ron=({template:e,reason:t})=>{const n=vt(),{$t:r}=Z(),{trackEvent:s}=Te(),{deprecatedOpenToast:a}=fn(),{createCollection:i,addLink:l}=nx({reason:t}),{collection:c,tags:u}=e,f=d.useCallback(()=>{c&&(s("space template copied",{collectionSlug:c.slug??"",templateTitle:c?.title??"",tags:Array.from(u)}),i({...c,title:c.title??"",description:c.description??"",instructions:c.instructions??"",emoji:c.emoji??"",accessLevel:Ct.PRIVATE_READ,callback:async m=>{c.focused_web_config?.link_configs&&await Promise.all(c.focused_web_config.link_configs.map(p=>l({collectionUuid:m.uuid,link:p.link??"",collectionSlug:m.slug,reason:t}))),n.push(`/spaces/${m.slug}`),a(r({defaultMessage:"Space is ready to customize",id:"AWqOucIdz5"}),"success",3)}}))},[n,c,u,i,a,r,s,l,t]);return d.useMemo(()=>({handleCopyTemplate:f}),[f])},Q0e=({reason:e,onSuccess:t})=>{const{$t:n}=Z(),{deprecatedOpenToast:r}=fn();return dt({mutationFn:async({file_url:s})=>(await vJe({request:{file_url:s,view_mode:!1},reason:e})).file_url,onSuccess:(s,{tab_id:a})=>{t?t(s,a):window.open(s,"_blank"),r(n({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)},onError:s=>{s instanceof aU?r(n({defaultMessage:"Downloads are disabled for files in this organization.",id:"NfM+Ayxvc6"}),"error",8):s instanceof oU?r(n({defaultMessage:"PDF downloads are restricted",id:"aJYvzl3Lq5"}),"error",8):s instanceof iU?r(n({defaultMessage:"This file belongs to a different organization",id:"lo7Bg402Jd"}),"error",8):r(n({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}})},eM=async({fileRepositoryType:e,ownerId:t,limit:n,offset:r,searchTerm:s,email:a,reason:i})=>{const[l,c]=await Promise.all([j8({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:n,offset:r,searchTerm:s,fileStates:["COMPLETE"],email:a},reason:i}),j8({request:{fileRepositoryInfo:{file_repository_type:e,owner_id:t},limit:100,offset:0,searchTerm:"",fileStates:["PROCESSING","FAILED"],email:a},reason:i})]),u=f=>({name:f.filename,file_uuid:f.file_uuid,file_s3_url:f.file_s3_url??"",file_title:f.file_title,file_description:f.file_description,uploadedBy:f.uploaded_by,state:f.file_state,size:f.file_size??0,date:new Date(f.time_created).toLocaleString(void 0,{dateStyle:"short",timeStyle:"short"}),error:f.error??void 0,isOptimistic:!1});if(l||c){const f=l?.files?.map(u)||[],m=c?.files?.map(u)||[];return{completedFiles:f,processingFiles:m.filter(p=>p.state==="PROCESSING"),failedFiles:m.filter(p=>p.state==="FAILED"),numTotalFiles:l?.numTotalFiles||0}}return{completedFiles:[],processingFiles:[],failedFiles:[],numTotalFiles:0}},Zmt=({fileRepositoryType:e,limit:t,offset:n,searchTerm:r,ownerId:s,reason:a})=>{const i=ot(),{session:l}=mt(),c=l?.user?.email??"",{isEnterprise:u}=Hn({reason:a}),f=!!(e==="COLLECTION"&&s||e==="ORG"&&u),m=I5(e,s,t,n,r),p=Ue({queryKey:m,queryFn:()=>f?eM({fileRepositoryType:e,ownerId:s,limit:t,offset:n,searchTerm:r,email:c,reason:a}):Promise.reject(),enabled:f,placeholderData:Pu,staleTime:5*60*1e3,gcTime:10*60*1e3});return d.useEffect(()=>{f&&(p.data?.numTotalFiles??0)>n+t&&i.prefetchQuery({queryKey:m,queryFn:()=>eM({fileRepositoryType:e,ownerId:s,limit:t,offset:n+t,searchTerm:r,email:c,reason:a}),staleTime:5*60*1e3,gcTime:10*60*1e3})},[m,f,i,e,t,n,r,p.data?.numTotalFiles,c,s,a]),p},Jmt=({fileRepositoryType:e,limit:t,searchTerm:n,ownerId:r,reason:s})=>{const{session:a}=mt(),i=a?.user?.email??"",{isEnterprise:l}=Hn({reason:s}),c=!!(e==="COLLECTION"&&r||e==="ORG"&&l),u=I5(e,r,t,void 0,n,!0);return Lu({enabled:c,initialPageParam:0,queryKey:u,queryFn:({pageParam:m})=>!c||m===void 0?Promise.reject():eM({fileRepositoryType:e,ownerId:r,limit:t,offset:m,searchTerm:n,email:i,reason:s}),getNextPageParam:(m,p)=>{const g=p.length*t+t;if(!(g>=m.numTotalFiles))return g}})},Pon=({fileRepoInfo:e,offset:t,setOffset:n,searchTerm:r,reason:s})=>{const a=e.file_repository_type,i=e.owner_id,{data:l,isLoading:c}=Zmt({fileRepositoryType:a,limit:Ao,offset:t,searchTerm:r,ownerId:i,reason:s}),{completedFiles:u,processingFiles:f,failedFiles:m,totalFiles:p}=d.useMemo(()=>({completedFiles:l?.completedFiles||[],processingFiles:l?.processingFiles||[],failedFiles:l?.failedFiles||[],totalFiles:l?.numTotalFiles??0}),[l]),h=t>0,g=p>t+Ao,y=Math.floor(t/Ao)+1,x=Math.max(1,Math.ceil(p/Ao)),v=d.useCallback(()=>{h&&n(Math.max(0,t-Ao))},[h,t,n]),b=d.useCallback(()=>{g&&n(t+Ao)},[g,t,n]);return d.useMemo(()=>({completedFiles:u,processingFiles:f,failedFiles:m,totalFiles:p,isLoadingFileDirectory:c,hasPreviousPage:h,hasNextPage:g,searchTerm:r,offset:t,currentPage:y,totalPages:x,setOffset:n,handlePrevPage:v,handleNextPage:b}),[u,y,m,b,v,g,h,c,t,f,r,n,p,x])},ept=({fileRepoInfo:e,searchTerm:t,limit:n=Ao,reason:r})=>{const s=e.file_repository_type,a=e.owner_id,{data:i,isLoading:l,hasNextPage:c,fetchNextPage:u}=Jmt({fileRepositoryType:s,limit:n,searchTerm:t,ownerId:a,reason:r}),{completedFiles:f,processingFiles:m,failedFiles:p,totalFiles:h}=d.useMemo(()=>{const g=i?i.pages[i.pages.length-1]:null;return{completedFiles:i?.pages.map(y=>y.completedFiles).flat()||[],processingFiles:i?.pages.map(y=>y.processingFiles).flat()||[],failedFiles:i?.pages.map(y=>y.failedFiles).flat()||[],totalFiles:g?.numTotalFiles??0}},[i]);return d.useMemo(()=>({completedFiles:f,processingFiles:m,failedFiles:p,totalFiles:h,isLoading:l,hasNextPage:c,searchTerm:t,fetchNextPage:u}),[f,p,u,c,l,m,t,h])},FB=({title:e,actionIcon:t=ar,onAction:n,testId:r,children:s})=>o.jsxs(z,{children:[o.jsxs("div",{className:"my-xs py-xs pl-sm flex items-center justify-between",children:[o.jsx(F,{variant:"smallBold",children:e}),n&&o.jsx(Me,{variant:"common",size:"small",icon:t,pill:!0,onClick:n,"data-testid":r})]}),s]}),tpt=({reason:e,collectionSlug:t})=>{const{variation:n}=k3(!1),{openModal:r}=xt(),{fileRepoInfo:s}=Ic({reason:e,collectionSlugOverride:t}),{data:a}=Ue({queryKey:lqe(s),queryFn:()=>CB({reason:e,request:{file_repository_info:s,filters:{connection_ids:[],connection_types:[],parent_uuids:[],remote_file_ids:[],uuids:[],ids:[],file_types:[],upload_ids:[],status:["SYNC_ERROR"],root_files_only:!1,search_keyword:""},order_by:"created",order_dir:"asc",pagination:{page_size:0}}})}),i=d.useCallback(()=>{r("spaceUploadFilesModal",{initialTab:n?"files":"connectors",collectionSlug:t})},[t,r,n]),l=a?.total??0;return d.useMemo(()=>({errorCount:l,handleSeeDetails:i}),[l,i])},gJ=Qe({errorCount:{defaultMessage:"{errorCount, plural, one {# file failed to upload} other {# files failed to upload}}",id:"5s+s5GJuN7"},seeDetails:{defaultMessage:"See details",id:"RQfEXO7ZCr"}}),npt=({collectionSlug:e})=>{const t="upload-error-banner",{$t:n}=Z(),{errorCount:r,handleSeeDetails:s}=tpt({reason:t,collectionSlug:e});return r<=0?null:o.jsxs(z,{variant:"subtle",className:"px-sm py-xs flex items-baseline gap-2 rounded-md",children:[o.jsx(F,{color:"red",className:"self-center",children:o.jsx(de,{icon:af,size:"md"})}),o.jsx(F,{variant:"small",color:"default",children:o.jsx(ie,{...gJ.errorCount,values:{errorCount:r}})}),o.jsx("div",{className:"ml-auto",children:o.jsx(Me,{variant:"noBackground",size:"small",text:n(gJ.seeDetails),onClick:s})})]})},tM=(e,t)=>{const n=t?.isOverlapping??!1,r=t?.stackDirection??"left";if(!e.length)return o.jsx(de,{icon:f1,size:"sm"});const s=Math.max(1,t?.maxVisuals??3),a=f=>{if(!(!n||f))switch(t?.size){case"sm":return"-0.25rem";case"md":return"-0.375rem";case"lg":return"-0.5rem";case"xl":return"-0.625rem";default:return}},i=()=>{const f=B("relative flex items-center justify-center",{"rounded-full":t?.shape==="circle"||!t?.shape,"rounded-none":t?.shape==="square","size-4":t?.size==="sm","size-5":t?.size==="md","size-6":t?.size==="lg","size-7":t?.size==="xl"});return!n||!e||e.length<=1?f:B(f,t?.overlappingClassName??"bg-base ring-subtlest",{"ring-1":t?.size==="sm"||t?.size==="md","ring-2":t?.size==="lg"||t?.size==="xl"})},l=(t?.showRemainderCount??!0)&&e.length>s,c=s===1&&e.length>1&&l?0:l?s-1:Math.min(s,e.length),u=e.slice(0,c).map((f,m)=>o.jsx("div",{className:i(),style:{zIndex:r==="left"?e.length-m-1:e.length+m,marginLeft:a(m===0)},children:f},m));return o.jsxs("div",{className:B("isolate",t?.containerClass??"my-xs flex items-center"),children:[o.jsxs("div",{className:t?.innerClassName??B("flex items-center",{"gap-2":!n}),children:[u,l&&o.jsx("div",{className:B(i(),{"mx-1":c===0}),style:{zIndex:r==="left"?-1:e.length+s,marginLeft:a(c===0)},children:o.jsxs(F,{variant:"tinyMono",color:"light",inline:!0,children:["+",e.length-c]})})]}),t?.rightText&&o.jsx("div",{className:"ml-2",children:t.rightText})]})},UB=I.memo(({width:e="w-14",fillColor:t="fill-max",svgClassName:n,...r})=>{const s=B("h-auto group",e);return o.jsx("div",{className:s,...r,children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 99 36",className:n,children:[o.jsx("path",{className:t,d:"M50.0858 22.3525C50.0858 23.9034 51.4144 24.8675 53.5527 24.8675C55.1684 24.8675 56.5468 24.3911 57.5393 23.4903C58.5991 22.5277 59.1595 21.1074 59.1595 19.3821V19.3262L53.1962 19.956C51.1311 20.147 50.0858 20.9534 50.0858 22.3525Z"}),o.jsx("path",{className:t,d:"M96.7015 8.60077C95.1033 5.76707 92.7331 3.49361 89.8477 2.02806C87.198 0.682565 84.1956 0 80.925 0H4.46551C1.9767 0.000755049 -0.00527674 2.02051 1.0554e-05 4.5084V36H80.925C83.8489 36 86.556 35.4503 88.9904 34.3736L78.7837 21.1444H78.5571L72.8105 28.5922H67.2136V27.4883L75.0795 17.6697L67.2136 7.851V6.74712H72.8105L78.5571 14.1949H78.7837L84.5302 6.74712H90.1264V7.851L82.2612 17.6697L93.3728 31.5407C94.6878 30.3568 95.8171 28.9675 96.7023 27.3977C98.2266 24.6946 99 21.5355 99 18.0102C99 14.4849 98.2266 11.3054 96.7015 8.60077ZM40.5936 28.593H35.122V14.6268C35.122 13.5886 34.8214 12.7392 34.2518 12.1699C33.6612 11.5794 32.8009 11.2804 31.6951 11.2804C30.0009 11.2804 27.1586 11.926 27.1586 16.2517V28.593H21.687V14.6268C21.687 13.5886 21.3863 12.7392 20.8168 12.1699C20.2262 11.5794 19.3658 11.2804 18.26 11.2804C16.5658 11.2804 13.7228 11.926 13.7228 16.2517V28.593H8.29124V7.35569H13.5649V9.06814C13.5649 9.20934 13.7402 9.27276 13.8308 9.16479C14.25 8.66721 14.7236 8.2693 15.2788 7.94236C16.3883 7.29 17.8182 6.96005 19.5275 6.96005C21.2368 6.96005 22.8419 7.38212 24.0602 8.21418C24.9538 8.82426 25.5248 9.54835 25.8828 10.1554C25.938 10.2498 26.0739 10.2543 26.1358 10.1645C27.5997 8.0375 29.88 6.9608 32.9232 6.9608C35.1363 6.9608 37.0239 7.60184 38.3812 8.81445C39.8277 10.1063 40.5928 11.9932 40.5928 14.2704L40.5936 28.593ZM64.5518 28.593H59.2781V26.5407C59.2781 26.4033 59.1074 26.3361 59.016 26.4388C57.5076 28.1316 55.3406 28.9894 52.5625 28.9894C47.7344 28.9894 44.6149 26.5083 44.6149 22.6696C44.6149 20.7261 45.3718 19.1699 46.8658 18.0449C48.1733 17.0596 49.9838 16.4503 52.249 16.2321L59.1603 15.5148V14.8647C59.1603 12.2658 57.806 11.0033 55.0203 11.0033C53.1093 11.0033 50.6885 11.6119 50.366 14.5105L50.3282 14.8458H45.1097C45.1097 14.8458 45.0863 14.4154 45.1746 13.8129C45.7978 9.61102 49.7542 6.91927 55.0989 6.91927C60.93 6.91927 64.5525 10.0852 64.5525 15.181L64.5518 28.593Z"})]})})});UB.displayName="Max";const Un=I.memo(({size:e="medium",user:t,showEdit:n,onChange:r,anon:s,altText:a,defaultIcon:i=A7e,rounded:l=!0,showBackground:c=!0,showProBadge:u,showMaxBadge:f,className:m,badgeProps:p})=>{const h=s?j7e:i,g="65%",y=d.useCallback(()=>{const x=document.createElement("input");x.type="file",x.accept="image/*",x.onchange=v=>{const b=v.target.files?.[0];if(b){const _=new FileReader;_.onload=w=>{r&&r(w.target?.result)},_.readAsDataURL(b)}},x.click()},[r]);return o.jsx("div",{className:B("text-inverse relative",m),children:o.jsxs("div",{className:B("relative flex aspect-square shrink-0 items-center justify-center",c?"bg-subtler":"bg-transparent",{"rounded-full":l,"size-3":e==="tiny","size-4":e==="mini","size-5":e==="small","size-6":e==="base","size-8":e==="medium","size-10":e==="large","size-20":e==="xlarge","ring-super border-inverse border-2 ring-[1.5px]":u,"ring-max border-inverse border-2 ring-[1.5px]":f}),children:[p?.show&&o.jsx("div",{className:B("absolute right-0 top-0 size-3 -translate-y-1/4 translate-x-1/4 select-none rounded-full border-2",p?.className)}),t&&!s?o.jsx("img",{alt:a??"User avatar",className:B("size-full object-cover",{"rounded-full":l}),src:t}):o.jsx(F,{color:"light",className:"flex items-center justify-center",children:o.jsx(h,{width:g,height:g})}),n&&e!=="small"&&o.jsx("div",{className:"bg-base absolute -bottom-1 -right-2 rounded-full",children:o.jsx(me,{ariaLabel:"Edit avatar",variant:t?"common":"primary",size:e!=="xlarge"?"tiny":"small",pill:!0,icon:t?Ru:ar,onClick:y})}),u&&o.jsx("div",{className:B("absolute top-full mt-[-6px] w-[24px] rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-lg mt-[-10px]":e==="xlarge"}),children:o.jsx(h3,{fillColor:"fill-super",width:"w-full",sizeVariant:"small"})}),f&&o.jsx("div",{className:B("absolute left-1/2 top-full mt-[-6px] flex w-[28px] -translate-x-1/2 items-center justify-center rounded-r-full bg-current p-[1.5px]",{"opacity-0":e==="small"},{"w-xl mt-[-10px]":e==="xlarge"}),children:o.jsx(UB,{width:"w-full"})})]})})});Un.displayName="Avatar";const rpt=({totalLocalFiles:e,totalRepoFiles:t,isFileManagerUiRedesignEnabled:n})=>{const r=t-e;return n?"files":e===0&&r>0?"connectors":(e>0&&r===0||e>0&&r>0,"localFiles")},BB=I.memo(({icon:e,badge:t})=>{const n=d.useMemo(()=>t&&o.jsx(Un,{size:"tiny",showBackground:!1,rounded:!1,user:t}),[t]);return o.jsx(de,{icon:e,size:18,stroke:2,color:"#64645F",badge:n})});BB.displayName="BadgedIconFactory";const X0e=({collection:e,onSourcesEdit:t})=>{const n=Z(),r="files-section",{isUserInvited:s,isUserAtLeastWriter:a}=xx({collectionSlugOverride:e.slug,reason:r}),{variation:i}=k3(!1),l=d.useRef(null),{fileRepoInfo:c}=Ic({reason:r,collectionSlugOverride:e.slug}),{searchTerm:u}=A0e({reason:r}),{completedFiles:f,totalFiles:m,hasNextPage:p,fetchNextPage:h}=ept({fileRepoInfo:c,searchTerm:u,limit:aJ,reason:r}),{data:g,hasNextPage:y,fetchNextPage:x}=tmt({connectionTypes:[Cn.GOOGLE_DRIVE,Cn.ONEDRIVE,Cn.SHAREPOINT,Cn.DROPBOX,Cn.BOX],status:["READY"],fileRepoInfo:c,pageSize:aJ,fileTypes:["FILE"],reason:r}),{connectorFiles:v,totalRepoFiles:b}=d.useMemo(()=>{const j=g?g.pages[g.pages.length-1]:null;return{connectorFiles:g?.pages.map(R=>R.files).flat()||[],totalRepoFiles:j?.files_in_repo??0}},[g]),_=d.useMemo(()=>gs(()=>{p?h():y&&x()},500),[p,h,y,x]);M3(l,_,{threshold:.5});const w=d.useCallback(()=>{if(!t)return;const j=rpt({totalLocalFiles:m,totalRepoFiles:b,isFileManagerUiRedesignEnabled:i});t(j)},[t,m,b,i]),C=p||y,S=d.useCallback(()=>{const j=a?n.formatMessage({defaultMessage:"Upload or sync files to be used as sources in every search.",id:"yF+cGexY2F"}):n.formatMessage({defaultMessage:"No files included.",id:"wZ9qntul+a"});let R=null;if(a){const O=[o.jsx(Un,{user:w5,showBackground:!1,size:"small"},"gdrive"),o.jsx(Un,{user:E5,showBackground:!1,size:"small"},"onedrive"),o.jsx(Un,{user:M5,showBackground:!1,size:"small"},"sharepoint"),o.jsx(de,{icon:By,size:"sm"},"upload")];R=tM(O,{isOverlapping:!0,maxVisuals:4,size:"xl",stackDirection:"right"})}return o.jsxs(z,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:[R&&o.jsx(z,{className:"mb-xs",children:R}),o.jsx(F,{variant:"small",color:"light",className:"text-center",children:j})]})},[n,a]),E=b===0,k=!s&&a,M=n.formatMessage({defaultMessage:"Files",id:"m4vqJl0/FT"});return o.jsx(FB,{title:b?`${M} (${b})`:M,onAction:k?w:void 0,testId:"space-context-files-add-button",children:E?S():o.jsxs("div",{className:"gap-y-sm flex flex-col",children:[o.jsx(npt,{collectionSlug:e.slug}),o.jsxs("div",{children:[o.jsx(Z0e,{localFiles:f}),o.jsx(J0e,{connectorFiles:v}),C&&o.jsx(Si,{ref:l,size:"small",className:"my-xs"})]})]})})};X0e.displayName="FilesSection";const Z0e=({localFiles:e})=>{const t="local-files-list",{mutate:n}=Q0e({reason:t}),r=d.useCallback(s=>s.file_s3_url?()=>n({file_url:s.file_s3_url}):null,[n]);return e.map((s,a)=>{const i=o.jsx(z,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx(BB,{icon:vu,badge:null})}),l=r(s);return o.jsx(z,{children:l?o.jsx(Me,{variant:"positive",text:s.name,leadingComponent:i,onClick:l,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0}):o.jsxs(z,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:[i,o.jsx(F,{variant:"small",color:"light",className:"line-clamp-1 pl-px",children:s.name})]})},`local-${a}`)})};Z0e.displayName="LocalFilesList";const J0e=({connectorFiles:e})=>{const t=d.useCallback(n=>()=>{n.connection_file_url&&window.open(n.connection_file_url,"_blank")},[]);return e.map((n,r)=>{const s=o.jsx(z,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx(BB,{icon:rce,badge:dm(n.connection_type)})}),a=t(n);return o.jsx(z,{children:o.jsx(Me,{variant:"positive",text:n.name,leadingComponent:s,onClick:a,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},`connector-${r}`)})};J0e.displayName="ConnectorFilesList";const spt=({collection:e,onEdit:t})=>{const n=Z(),r="instructions-section",{isUserInvited:s,isUserAtLeastWriter:a}=xx({collectionSlugOverride:e.slug,reason:r}),i=!s&&a,l=!e.instructions,c=d.useMemo(()=>{const u=n.formatMessage({defaultMessage:"Add instructions to format, scope, and add relevance to your search results.",id:"JnYU6ctsCn"});return o.jsx(z,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:o.jsx(F,{variant:"small",color:"light",className:"text-center",children:u})})},[n]);return o.jsx(FB,{title:n.formatMessage({defaultMessage:"Instructions",id:"sV2v5LjRpX"}),actionIcon:Ru,onAction:i?t:void 0,testId:"space-context-instructions-edit-button",children:l?c:o.jsx(z,{className:"pl-sm gap-x-xs flex w-full items-center py-[10px]",children:o.jsx(F,{variant:"small",color:"light",className:"line-clamp-4 pl-px",children:e.instructions})})})},apt=({collection:e,onSourcesEdit:t})=>{const n=Z(),r="links-section",{isUserInvited:s,isUserAtLeastWriter:a}=xx({collectionSlugOverride:e.slug,reason:r}),{focusedWebLinks:i,totalFocusedWebLinks:l}=d.useMemo(()=>{const h=e.focused_web_config?.link_configs??[];return{focusedWebLinks:h,totalFocusedWebLinks:h.length}},[e.focused_web_config?.link_configs]),c=d.useCallback(h=>()=>window.open(`https://${h.link}`,"_blank"),[]),u=d.useCallback(()=>{t&&t("links")},[t]),f=d.useCallback(()=>{const h=a?n.formatMessage({defaultMessage:"Add URLs to be used as sources in every search.",id:"FTItpgdarF"}):n.formatMessage({defaultMessage:"No links included.",id:"Qid6Kgk2jz"});return o.jsx(z,{className:"px-sm py-md gap-y-xs flex flex-col items-center",children:o.jsx(F,{variant:"small",color:"light",className:"text-center",children:h})})},[n,a]),m=l===0,p=!s&&a;return o.jsx(FB,{title:n.formatMessage({defaultMessage:"Links",id:"qCcwo3DU78"}),onAction:p?u:void 0,testId:"space-context-links-add-button",children:m?f():o.jsx(o.Fragment,{children:i.map((h,g)=>{const y=o.jsx(z,{className:"flex size-6 flex-none items-center justify-center",children:o.jsx(de,{icon:Am,size:18,stroke:2,color:"#64645F"})}),x=c(h);return o.jsx(z,{children:o.jsx(Me,{variant:"positive",text:h.link,leadingComponent:y,onClick:x,textClassName:"font-sans font-normal text-sm",layout:"left",fullWidth:!0})},g)})})})},e1e=I.memo(({collectionSlug:e,handleSpaceEdit:t,handleSourcesEdit:n})=>{const r="space-context",{collection:s}=Ac({collectionSlug:e,reason:r}),{isUserAtLeastWriter:a,isUserInvited:i,isUserReader:l}=xx({collectionSlugOverride:e,reason:r}),{templateSpace:c}=Y0e({collectionSlug:e??"",reason:r}),f=!i&&a||l&&!!c;return s?o.jsxs(z,{className:"hideScroll h-full flex-col overflow-y-auto",children:[f&&o.jsxs(o.Fragment,{children:[o.jsx(spt,{collection:s,onEdit:t}),o.jsx("hr",{className:"my-sm"})]}),o.jsx(X0e,{collection:s,onSourcesEdit:n}),o.jsx("hr",{className:"my-sm"}),o.jsx(apt,{collection:s,onSourcesEdit:n})]}):null});e1e.displayName="SpaceContext";const t1e=I.memo(({closeModal:e,isOpen:t,collectionSlug:n})=>{const r="space-context-modal",s=Z(),{openModal:a}=xt(),{collection:i}=Ac({collectionSlug:n,reason:r}),{isUserAtLeastWriter:l,isUserAtLeastReader:c}=xx({reason:r,collectionSlugOverride:n}),u=ot(),f=d.useCallback(()=>{if(n){const g=["get_collection",{collection_slug:n.slice(-22)}];u.invalidateQueries({queryKey:g})}e()},[e,n,u]),m=d.useCallback(()=>{i&&a("spaceSettings",{existingSpace:i})},[i,a]),p=d.useCallback(g=>{i&&a("spaceUploadFilesModal",{initialTab:g,collectionSlug:n})},[i,n,a]),h=d.useMemo(()=>o.jsx(F,{variant:"section-title",className:"px-sm",children:s.formatMessage({defaultMessage:"Context",id:"V2qutIKrxy"})}),[s]);return o.jsx(qt,{variant:"side-sheet",isOpen:t,onClose:f,includeBlur:!1,titleContent:h,modalClassname:"!min-w-[365px] !w-[25vw]",closeButtonClassname:"right-sm absolute",fixedTitle:!0,children:o.jsx(e1e,{collectionSlug:n,handleSpaceEdit:l?m:void 0,handleSourcesEdit:c?p:void 0})})});t1e.displayName="SpaceContextModal";const opt=({children:e,title:t,handleClose:n,experimentalImageDesign:r})=>{const{image:s,imageAlt:a}=r;return o.jsx(z,{variant:"background",className:"max-w-[400px] overflow-hidden rounded-xl md:flex md:max-w-[960px]",children:o.jsxs(z,{variant:"subtler",className:"inset-0 md:flex",children:[o.jsx("div",{className:"md:w-[55%]",children:o.jsx("img",{src:s,alt:a,className:"md:object-cover"})}),o.jsxs("div",{className:"p-lg md:p-xl relative flex flex-col md:w-[45%]",children:[o.jsx(o3,{testId:"close-modal",variant:"common",size:"small",onClick:n}),o.jsx("div",{className:"mb-lg grow",children:o.jsx(F,{color:"default",variant:"page-title",className:"font-editorial my-sm text-center text-[2rem] font-light leading-none tracking-tight",children:t})}),e]})]})})},$B=I.memo(({title:e,subtitle:t,subtitleClassname:n,centerTitle:r,children:s,actionList:a=ce,variant:i="centered-sheet",onClose:l,noPadding:c,onIsClosing:u,footerContent:f,overlayVariant:m,titleLeadingButtonProps:p,showCloseButton:h=!0,...g})=>{const[y,x]=d.useState(!1),[v,b]=d.useState(!1),_=d.useMemo(()=>B("shadow-md overflow-y-auto scrollbar-subtle fill-mode-both",{"bg-none dark:bg-none bg-backdrop/25 backdrop-blur-sm":i==="full-sheet-blurred","bg-gradient-to-t from-base from-45% to-transparent":i==="bottom-sheet-gradient","w-screen md:h-screen h-[100dvh] flex flex-col":i==="full-sheet-blurred"||i==="full-sheet","w-screen min-h-[60dvh] md:min-h-[60vh] max-h-[96dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0 bg-none dark:bg-none bg-backdrop/70 backdrop-blur-md":i==="bottom-sheet-blurred","flex items-center justify-end w-screen h-[100dvh] md:max-h-[96vh] flex flex-col fixed bottom-0 left-0 right-0":i==="bottom-sheet-gradient","animate-in slide-in-from-bottom ease-in":i==="bottom-sheet-blurred"&&!v,"animate-out slide-out-to-bottom ease-out":i==="bottom-sheet-blurred"&&v,"animate-in fade-in ease-in duration-300":i==="bottom-sheet-gradient"&&!v,"animate-out fade-out ease-out duration-300":i==="bottom-sheet-gradient"&&v,"bg-base":i==="full-sheet","bg-base rounded-lg md:min-w-[600px] max-w-screen-lg max-h-[100vh]":i==="centered-sheet","bg-base rounded-2xl max-w-[90dvw] max-h-[90dvh]":i==="inset-centered-sheet"}),[i,v]),w=d.useMemo(()=>B("p-md grow flex flex-col",{"justify-center":i!=="bottom-sheet-gradient","justify-end":i==="bottom-sheet-gradient","md:pt-lg":e===void 0,"md:pb-lg":a?.length===0,"px-0":c,"py-0":c}),[a?.length,c,e,i]),C=d.useMemo(()=>a.map(({text:R,onClick:O,variant:D,disabled:P,isLoading:A,testId:T,icon:N},L)=>{const U={key:L,text:R,chevron:N!==void 0,disabled:P,isLoading:A,onClick:O,testId:T,chevronIcon:N};return D?d.createElement(me,{fullWidthMobile:!0,variant:D,...U,key:U.key}):d.createElement(me,{fullWidthMobile:!0,...U,key:U.key})}),[a]),S=d.useCallback(()=>{u?.(),b(!0)},[b,u]),E=d.useCallback(()=>{b(!1),x(!1),l?.()},[b,x,l]),k=d.useCallback(()=>{b(!1),x(!1),l?.()},[x,b,l]),M=d.useMemo(()=>{switch(i){case"full-sheet-blurred":return"full-sheet";case"full-sheet":return"full-sheet";case"bottom-sheet-blurred":case"bottom-sheet-gradient":return"bottom-sheet";default:return"default"}},[i]),j=d.useMemo(()=>i==="bottom-sheet-blurred"||i==="bottom-sheet-gradient",[i]);return o.jsx(ox,{transparent:j,canOutsideClickClose:!0,childVariant:M,shouldClose:y,onIsClosing:S,onClose:E,variant:m,...g,children:o.jsx("div",{children:o.jsxs("div",{className:_,children:[o.jsx("div",{className:"right-sm top-sm fixed z-[23] md:absolute"}),o.jsxs(z,{className:B("flex h-full grow flex-col rounded-none md:w-[unset] md:grow-[unset]",i==="inset-centered-sheet"?"w-[90dvw]":"w-screen",{"border-t":i!=="bottom-sheet-gradient"}),children:[o.jsxs(z,{variant:"transparent",className:B("px-md py-sm md:py-md sticky top-0 z-[22] w-full shrink-0",{"border-b":e&&!r,"text-center":r,"h-8":!e&&h}),children:[o.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[p&&o.jsx(Me,{extraCSS:"-ml-sm",...p,size:"small",variant:"common"}),e&&o.jsx(F,{variant:"page-title",className:B("line-clamp-1 md:line-clamp-2",{"pt-lg grow":r,"mr-lg":!r}),children:e}),!j&&i!=="full-sheet-blurred"&&h&&o.jsx(o3,{onClick:k,testId:"close-modal"})]}),t&&o.jsx(F,{variant:"base",color:"light",className:B("mt-xs line-clamp-3",n),children:t})]}),o.jsx("div",{className:w,children:s}),(C?.length>0||f)&&o.jsxs(z,{variant:"background",className:B("gap-x-sm p-sm pb-md md:pb-sm sticky bottom-0 z-10 flex items-center border-t",{"justify-end":!f},{"justify-between":f}),children:[f,C]})]})]})})})});$B.displayName="SheetModal";const n1e=I.memo(({pitchMessage:e,origin:t,isOpen:n,closeModal:r,closeCallback:s,experimentalImageDesign:a,sheetModalDesign:i,overrideRedirectUrl:l,disallowedMethods:c,loginButtonsStyle:u,renderCloseButton:f,preEnteredEmail:m,autoFocus:p=!0})=>{const{$t:h}=Z(),g=et(),[y,x]=d.useState(""),{trackEvent:v}=Te(),{isMobileStyle:b}=xe(),_=e?.title??h({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),[w]=d.useState(!1),C=d.useCallback(()=>{r(),s?.()},[r,s]);return d.useEffect(()=>{n&&v("login modal opened",{origin:t})},[n,t,v]),d.useEffect(()=>{!g&&t&&x(a3(l??window.location.href,Ou,t))},[g,t,l]),o.jsx(o.Fragment,{children:a?o.jsx(qt,{isOpen:n,onClose:C,centerTitle:!!e,actionList:ce,variant:"hide-chrome",renderCloseButton:f,children:o.jsx(opt,{title:_,handleClose:C,experimentalImageDesign:a,children:o.jsx($1,{autoFocus:p,onClose:C,redirectUrl:y,disallowedMethods:c,loginButtonsStyle:u,showCloseButton:!1,preEnteredEmail:m})})}):o.jsx($B,{isOpen:n,onClose:C,shouldClose:w,centerTitle:!!e,actionList:ce,variant:i,showCloseButton:f,children:o.jsxs("div",{onClick:S=>S.stopPropagation(),children:[o.jsxs("div",{className:"px-lg mx-auto max-w-sm md:max-w-lg",children:[o.jsx(F,{variant:"page-title",className:"font-editorial text-pretty text-center !font-light !leading-snug tracking-tight md:text-4xl",children:e?.title??o.jsx(ie,{defaultMessage:"Sign up below to <italic>unlock</italic> the full {br} potential of Perplexity",id:"exZDTeIaG0",values:{italic:S=>o.jsx("span",{className:"italic",children:S}),br:o.jsx("br",{})}})}),e?.subtitle&&o.jsx(F,{className:"mt-xs text-pretty text-center",children:e.subtitle}),o.jsx(F,{className:"mt-md text-pretty text-center",children:e?.description?e.description:o.jsx(ie,{defaultMessage:"By continuing, you agree to our {privacyPolicyLink}.",id:"cE5rUKm7fb",values:{privacyPolicyLink:o.jsx(qe,{className:"underline",target:"_blank",href:"https://www.perplexity.ai/hub/legal/privacy-policy",children:o.jsx(ie,{defaultMessage:"privacy policy",id:"LIDXd2UwSl"})})}})}),o.jsx("div",{className:"mt-lg"})]}),o.jsx($1,{autoFocus:p&&!b,onClose:C,redirectUrl:y,showInternal:!0,disallowedMethods:c,loginButtonsStyle:u,preEnteredEmail:m})]})})})});n1e.displayName="LoginModal";function ipt({onClose:e,announcementImageModal:t}){const{imageUrlHd:n,imageUrlLowRes:r,title:s,description:a,upsellInformation:i}=t,[l,c]=d.useState(!1),[u,f]=d.useState(!1);return d.useEffect(()=>{const m=new Image;m.src=r,m.onload=()=>f(!0);const p=new Image;return p.src=n,p.onload=()=>c(!0),()=>{m.onload=null,p.onload=null}},[r,n]),o.jsx(qt,{isOpen:!0,onClose:e,variant:"hide-chrome",actionList:ce,children:o.jsxs(z,{variant:"background",className:B("p-sm mx-auto flex w-[32rem] max-w-lg flex-col overflow-hidden rounded-xl transition-opacity duration-150 ease-in",{"opacity-100":u,"opacity-0":!u}),children:[o.jsxs("div",{className:"relative w-full overflow-hidden rounded-lg",children:[o.jsx("img",{src:r,alt:s,className:"w-full scale-[1.01] blur-[0.5px]"}),o.jsx("img",{src:n,alt:s,className:B("absolute inset-0 w-full transition-opacity duration-200 ease-out",{"opacity-100":l,"opacity-0":!l})})]}),o.jsxs("div",{className:"p-md gap-sm flex flex-col items-center text-center",children:[s&&o.jsx(F,{variant:"entry-title-200",children:s}),a&&o.jsx(F,{variant:"small",color:"light",className:"mb-sm px-1",children:a}),o.jsx("div",{className:"w-1/2",children:o.jsx(y3,{upsellInformation:i,hideUpsell:e,verticalLayout:!0})})]})]})})}function r1e(e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}const lpt=({children:e,className:t,delimiter:n="",...r})=>{const s=I.Children.toArray(e),a=s.map((i,l)=>{if(I.isValidElement(i)&&i.type===s1e){const c=i.props.id;return o.jsxs(I.Fragment,{children:[i,l!==s.length-1&&o.jsxs(F,{className:"inline-flex !text-inherit",children:[" ",n," "]})]},c)}return null});return o.jsx("div",{className:`gap-sm flex items-center ${t}`,...r,children:a})},s1e=({children:e})=>o.jsx(o.Fragment,{children:e}),Vo=lpt,An=s1e,cpt=1080;function lo(e){return typeof e=="string"?f2(e).startsWith("image/"):e.type.startsWith("image/")}const a1e=(e,t=32)=>`https://www.google.com/s2/favicons?sz=${t}&domain=${e}`,upt=(e,t,n)=>{const r=Math.min(e,t);if(r<=n)return{width:e,height:t};const s=n/r;return{width:Math.round(e*s),height:Math.round(t*s)}},dpt=(e,t=cpt,n=.98)=>new Promise((r,s)=>{if(!lo(e)){s(new Error("File is not an image."));return}const a=document.createElement("canvas"),i=a.getContext("2d",{alpha:!0,colorSpace:"srgb"}),l=new Image,c=URL.createObjectURL(e);if(!i){s(new Error("Could not get canvas context"));return}i.imageSmoothingEnabled=!0,i.imageSmoothingQuality="high",l.onload=()=>{const u=upt(l.width,l.height,t);a.width=u.width,a.height=u.height;const f="image/jpeg",m=n;i.fillStyle="#fff",i.fillRect(0,0,a.width,a.height),i.drawImage(l,0,0,u.width,u.height),a.toBlob(p=>{if(!p){s(new Error("Failed to create blob from canvas"));return}const g=e.name.replace(/\.[^/.]+$/,"")+".jpg",y=new File([p],g,{type:f});URL.revokeObjectURL(c),r(y)},f,m)},l.onerror=()=>{URL.revokeObjectURL(c),s(new Error("Failed to load image."))},l.src=c}),fpt={"my.apps.factset.com":"www.factset.com"},ol=I.memo(({domain:e,overrideIconUrl:t,size:n=16,hideBorder:r=!1,className:s,...a})=>{const i=fpt[e]||e,l=a1e(i,128),c=d.useMemo(()=>t||l,[t,l]),[u,f]=d.useState(!0);d.useEffect(()=>{f(!0)},[c]);const m=d.useMemo(()=>({width:n,height:n}),[n]),p=d.useMemo(()=>({width:n*.7,height:n*.7}),[n]);return o.jsxs("div",{style:{width:n,height:n},className:B("relative shrink-0 overflow-hidden rounded-full",s),...a,children:[u?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:B("rounded-inherit absolute inset-0",!r&&"bg-white")}),o.jsx("img",{className:"relative block",src:c,alt:`${e} favicon`,width:n,height:n,onLoad:h=>{const g=h.target,y=t!==void 0||g.naturalWidth!==16||g.naturalHeight!==16;f(y||e!==i)},onError:()=>{f(!1)},style:{width:n,height:n}})]}):o.jsx(z,{variant:"subtler",style:m,className:"flex items-center justify-center",children:o.jsx(F,{color:"ultraLight",children:o.jsx(de,{icon:of,className:"relative block",style:p})})}),!r&&o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})});ol.displayName="CitationFavicon";const ui={PDF:"pdf",TXT:"txt",CSV:"csv",XLSX:"xlsx",DOCX:"docx",PPTX:"pptx",MARKDOWN:"md",JSON:"json",JPG:"jpg",JPEG:"jpeg",PNG:"png"},Lon=e=>!!(R_(e)===ui.PDF||w_(e)),mpt=e=>{const t=R_(e);if(w_(e))return Tg;switch(t){case ui.TXT:return ia;case ui.MARKDOWN:return ia;case ui.PDF:return Tg;case ui.XLSX:return $b;case ui.CSV:return P7e;case ui.DOCX:return R7e;case ui.PPTX:return I7e;case ui.JPG:case ui.JPEG:case ui.PNG:return Bb;default:return vu}},ppt={[Cn.GOOGLE_DRIVE]:B7e,[Cn.ONEDRIVE]:U7e,[Cn.SHAREPOINT]:ace,[Cn.DROPBOX]:F7e,[Cn.BOX]:D7e,[Cn.GENERATED_IMAGE]:Bb,[Cn.GENERATED_VIDEO]:sce,[Cn.NOTION]:O7e,[Cn.WILEY]:L7e,[Cn.LOCAL]:vu},VB=I.memo(({url:e,isConversationHistory:t,isMemory:n,isInlineAttachment:r,connectionType:s,isAttachment:a,isPatent:i,isClientContext:l})=>{const c=d.useMemo(()=>{const u=__(e),f=a?mpt(e):null;if(t)return o.jsx(de,{icon:fp,size:"xs"});if(i)return o.jsx(de,{icon:oce,size:"xs"});if(n)return o.jsx(de,{icon:Kl,size:"xs"});if(r)return o.jsx(de,{icon:zk,size:"xs"});if(s){const m=ppt[s];return m?o.jsx(de,{icon:m}):o.jsx(ol,{domain:u})}else return a?o.jsx(de,{icon:f||vu,size:"xs"}):l?o.jsx(de,{icon:$7e,size:"xs"}):o.jsx(ol,{domain:u})},[e,t,n,r,s,a,i,l]);return o.jsx("div",{className:"flex size-4 items-center justify-center",children:c})});VB.displayName="Icon";const WB=I.memo(({url:e,source:t,isAttachment:n,connectionType:r,isConversationHistory:s})=>{const a=Z(),i=d.useMemo(()=>{if(s)return a.formatMessage({defaultMessage:"library",id:"B7J+pmy9R5"});if(t!=null)return t;let l;return n?l=s3(e):r?l=ZE(r):l=Xs(e),l.replace(/\.[^.]*$/,"")},[e,t,n,r,s,a]);return o.jsx(o.Fragment,{children:i})});WB.displayName="Source";const o1e=I.memo(({url:e,source:t,isAttachment:n,isClientContext:r,variant:s="small",color:a="default",truncate:i=!0,className:l,connectionType:c,isInlineAttachment:u,isMemory:f,isPatent:m,isConversationHistory:p,name:h,snippet:g,...y})=>o.jsxs(z,{className:"flex items-center gap-x-1.5",children:[o.jsx(F,{variant:s,className:"relative -mt-px flex-none",color:f||p?"light":a,children:o.jsx(VB,{url:e,isConversationHistory:p,isMemory:f,isInlineAttachment:u,connectionType:c,isAttachment:n,isPatent:m,isClientContext:r})}),h&&o.jsx(F,{variant:s,color:a,...y,className:B(l,"min-w-0 truncate"),children:h}),o.jsx(F,{variant:s,color:h?"light":a,className:B("line-clamp-1 min-w-0 grow break-all leading-none transition-all duration-300",{"max-w-[150px]":t!=null&&i},l),...y,children:o.jsx(WB,{url:e,source:t,isAttachment:n,connectionType:c,isMemory:f,isConversationHistory:p})})]}));o1e.displayName="CitationDomainRoot";const Wo=Object.assign(o1e,{Icon:VB,Source:WB}),L_=I.memo(({isOpen:e,onClose:t,imgProps:n,alt:r,width:s,height:a,origin:i,onDownload:l,footer:c})=>{const{url:u,name:f,showCitation:m=!0}=i||{},p=Ha(),h=d.useCallback(g=>{g.stopPropagation(),l?.()},[l]);return o.jsxs(qt,{onClose:t,isOpen:e,variant:"hide-chrome",disableAnimation:!1,removeScroll:!p,modalClassname:"z-[100]",children:[o.jsx("div",{className:"flex h-screen w-screen place-content-center",onClick:t,children:o.jsxs("div",{className:B("gap-md p-md md:p-lg flex w-full flex-col",{"md:pb-md":m&&(u||l)}),children:[o.jsx("div",{className:"relative grow",children:o.jsx("div",{className:"absolute inset-0 size-full",children:o.jsx("img",{width:s,height:a,...n,alt:r,className:"size-full object-contain"})})}),m&&(u||l)?o.jsxs("div",{className:"gap-sm flex w-full flex-row justify-center",children:[u&&o.jsx(qe,{href:u,target:"_blank",children:o.jsxs(z,{variant:"subtle",className:"gap-x-xs p-sm flex items-center rounded-full",children:[o.jsx(Wo,{url:u,source:f,isAttachment:!1}),o.jsx(F,{variant:"small",className:"pr-xs",children:o.jsx(de,{icon:ba,size:"xs"})})]})}),l&&o.jsx(z,{as:"button",onClick:h,variant:"subtle",className:"gap-x-xs p-sm flex !aspect-square w-9 items-center justify-center rounded-full",children:o.jsx(de,{icon:Uy,size:"sm"})})]}):null,c]})}),o.jsx(me,{onClick:t,icon:kt,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});L_.displayName="LightboxImage";const ns=I.memo(({src:e,lightboxSrc:t,alt:n,fadeIn:r,fallbackSrc:s,fallback:a,hasShadow:i=!1,includeLightBoxModal:l=!0,lightboxFooter:c,origin:u,draggable:f=!0,imageClassName:m,maskClassName:p,containerClassName:h,rounded:g="md",onClick:y,AIProps:x,authorName:v,authorUrl:b,onLoad:_,onFail:w,softBlockSaveImage:C=!1,imageRef:S,imageProps:E,testId:k,onDownload:M,...j})=>{const[R,O]=d.useState(!1),[D,P]=d.useState(!1),[A,T]=d.useState(!1),N=d.useRef(null),{isAI:L,AILabel:U}=x||{isAI:!1,AILabel:""},$=d.useCallback(()=>{O(!0),w?.()},[]),V=d.useCallback(()=>{P(!0),_?.()},[P,_]);d.useEffect(()=>{if(N.current){if(N.current.complete){V();return}N.current.src||(N.current.src=e)}},[e,V,N]);const W=B(m,"transition-all ease-in-out",{"opacity-100 duration-200 scale-100":D&&r,"opacity-0 scale-[0.98]":!D&&r,"hidden opacity-0":R&&!s,"max-h-[90vh]":l,"cursor-zoom-in hover:shadow-lg duration-200 ":l&&!A}),Q=d.useMemo(()=>({className:W,src:e,alt:n,onError:$,onClick:()=>T(!0),...E}),[n,W,E,$,e]),q=d.useMemo(()=>({ref:N,onLoad:V,...Q}),[V,Q]),H=d.useMemo(()=>({...Q,src:t??e}),[t,Q,e]),K=d.useCallback(Y=>{Y.stopPropagation()},[]),G=o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"tiny",color:"white",className:"px-xs py-two h-5 rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:o.jsxs(Vo,{className:"gap-xs",children:[o.jsx(An,{id:"authorName",children:v}),b?o.jsx(An,{id:"authorDomain",children:Xs(b)}):null]})}),o.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"})]}),ee=d.useCallback(()=>T(!1),[]);if(R){if(s&&N.current)N.current.src=s;else if(a!==void 0)return a}return o.jsxs(o.Fragment,{children:[o.jsx("div",{onClick:y,className:h,"data-testid":k,children:o.jsxs("div",{className:B("bg-subtler group relative size-full overflow-hidden",p,{"shadow-md":i&&D,"transition-all duration-200 ease-in-out hover:scale-[1.02] hover:shadow-lg":i,"rounded-sm":g==="sm","rounded-md":g==="md",rounded:g===!0}),children:[L&&o.jsxs("div",{className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:[o.jsx("div",{children:o.jsx(F,{variant:"tiny",color:"white",className:"gap-x-two px-xs py-two flex h-5 items-center rounded-md bg-black/60 opacity-0 transition-all group-hover:opacity-100",children:o.jsx("span",{children:U})})}),o.jsx("div",{className:"size-xs bg-black/60 opacity-0 transition-all group-hover:opacity-100"}),o.jsx("div",{children:o.jsx(F,{variant:"tiny",color:"white",className:"gap-x-two p-two flex h-5 items-center rounded-md bg-black/60",children:o.jsx(de,{icon:V7e,size:"xs"})})})]}),v&&(b?o.jsx(qe,{href:b??"",target:"_blank",onClick:K,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:G}):o.jsx("div",{onClick:K,className:"bottom-xs right-xs absolute z-10 flex items-center justify-center",children:G})),C&&!L&&o.jsx("div",{className:"absolute inset-0",onClick:l?()=>T(!0):void 0}),o.jsx("img",{width:j.width,height:j.height,alt:n,...q,ref:r1e([S,N]),draggable:f})]})}),l&&o.jsx(L_,{onClose:ee,isOpen:A,imgProps:H,origin:u,width:j.width,height:j.height,alt:n,onDownload:M,footer:c})]})});ns.displayName="Image";const i1e=I.memo(({isOpen:e,onClose:t,onCapture:n})=>{const r=d.useRef(null),s=d.useRef(null),a=d.useRef(null),[i,l]=d.useState(!1),[c,u]=d.useState(null),[f,m]=d.useState(null),p=d.useCallback(async()=>{try{a.current&&a.current.getTracks().forEach(w=>w.stop());const _=await navigator.mediaDevices.getUserMedia({video:{width:{ideal:1280},height:{ideal:720},facingMode:"user"}});a.current=_,r.current&&(r.current.srcObject=_,l(!0),m(null))}catch{m("Unable to access camera. Please check your permissions."),l(!1)}},[]),h=d.useCallback(()=>{a.current&&(a.current.getTracks().forEach(_=>_.stop()),a.current=null,l(!1)),r.current&&(r.current.srcObject=null)},[]),g=d.useCallback(()=>{if(r.current&&s.current){const _=r.current,w=s.current,C=w.getContext("2d");if(C){w.width=_.videoWidth,w.height=_.videoHeight,C.drawImage(_,0,0,w.width,w.height);const S=w.toDataURL("image/jpeg",.95);u(S),h()}}},[h]),y=d.useCallback(()=>{u(null),p()},[p]),x=d.useCallback(()=>{m(null),p()},[p]),v=d.useCallback(()=>{h(),u(null),m(null),t()},[h,t]),b=d.useCallback(async()=>{if(c)try{const w=await(await fetch(c)).blob(),C=new File([w],"selfie.jpg",{type:"image/jpeg"});n(C),v()}catch{m("Failed to process the image. Please try again.")}},[c,n,v,m]);return d.useEffect(()=>(e&&!c&&!f&&p(),()=>{h()}),[e,c,f,p,h]),o.jsxs(qt,{isOpen:e,onClose:v,title:"Take a Selfie",children:[o.jsx("div",{className:"p-lg",children:f?o.jsxs("div",{className:"gap-md flex h-[400px] flex-col items-center justify-center",children:[o.jsx(F,{variant:"base",color:"red",children:f}),o.jsx(me,{text:"Try again",variant:"primary",onClick:x})]}):c?o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:o.jsx(ns,{src:c,alt:"Captured selfie",className:"size-full object-contain"})}),o.jsxs("div",{className:"mt-lg gap-sm flex justify-center",children:[o.jsx(me,{text:"Retake",variant:"border",onClick:y}),o.jsx(me,{text:"Use this photo",variant:"primary",onClick:b})]})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"bg-subtler relative aspect-video overflow-hidden rounded-lg",children:[o.jsx("video",{ref:r,autoPlay:!0,playsInline:!0,muted:!0,className:"size-full object-contain"}),!i&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:o.jsx(F,{variant:"small",color:"light",children:"Starting camera..."})})]}),o.jsxs("div",{className:"mt-md gap-xs flex flex-col items-center",children:[o.jsx(F,{variant:"small",color:"light",className:"text-center",children:"Position your face in the center of the frame"}),o.jsx(F,{variant:"tiny",color:"ultraLight",className:"text-center",children:"Make sure your face is well-lit and clearly visible"})]}),o.jsx("div",{className:"mt-lg flex justify-center",children:o.jsx(me,{text:"Take photo",icon:Gk,variant:"primary",onClick:g,disabled:!i})})]})}),o.jsx("canvas",{ref:s,className:"hidden"})]})});i1e.displayName="CameraCaptureModal";function yJ(e,t){let n;return(...r)=>{window.clearTimeout(n),n=window.setTimeout(()=>e(...r),t)}}function Ho({debounce:e,scroll:t,polyfill:n,offsetSize:r}={debounce:0,scroll:!1,offsetSize:!1}){const s=n||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[a,i]=d.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=d.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:a,orientationHandler:null}),c=e?typeof e=="number"?e:e.scroll:null,u=e?typeof e=="number"?e:e.resize:null,f=d.useRef(!1);d.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[m,p,h]=d.useMemo(()=>{const v=()=>{if(!l.current.element)return;const{left:b,top:_,width:w,height:C,bottom:S,right:E,x:k,y:M}=l.current.element.getBoundingClientRect(),j={left:b,top:_,width:w,height:C,bottom:S,right:E,x:k,y:M};l.current.element instanceof HTMLElement&&r&&(j.height=l.current.element.offsetHeight,j.width=l.current.element.offsetWidth),Object.freeze(j),f.current&&!xpt(l.current.lastBounds,j)&&i(l.current.lastBounds=j)};return[v,u?yJ(v,u):v,c?yJ(v,c):v]},[i,r,c,u]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",h,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function y(){l.current.element&&(l.current.resizeObserver=new s(h),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(v=>v.addEventListener("scroll",h,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{h()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const x=v=>{!v||v===l.current.element||(g(),l.current.element=v,l.current.scrollContainers=l1e(v),y())};return gpt(h,!!t),hpt(p),d.useEffect(()=>{g(),y()},[t,h,p]),d.useEffect(()=>g,[]),[x,a,m]}function hpt(e){d.useEffect(()=>{const t=e;return window.addEventListener("resize",t),()=>void window.removeEventListener("resize",t)},[e])}function gpt(e,t){d.useEffect(()=>{if(t){const n=e;return window.addEventListener("scroll",n,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",n,!0)}},[e,t])}function l1e(e){const t=[];if(!e||e===document.body)return t;const{overflow:n,overflowX:r,overflowY:s}=window.getComputedStyle(e);return[n,r,s].some(a=>a==="auto"||a==="scroll")&&t.push(e),[...t,...l1e(e.parentElement)]}const ypt=["x","y","top","bottom","left","right","width","height"],xpt=(e,t)=>ypt.every(n=>e[n]===t[n]),Wt=I.memo(({children:e,header:t,fullBleed:n,roundedClass:r,shadow:s,fullBleedBorderClassname:a,...i})=>o.jsxs(o.Fragment,{children:[t,o.jsxs(z,{...i,variant:i.variant??"raised",className:B("relative",{border:!n&&!i.variant,[r||"rounded-xl"]:!i.variant,"shadow-[0_1px_2px_0_rgba(0,0,0,0.03)]":s},i.className),children:[n&&o.jsx("div",{className:B("rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5",a)}),e]})]}));Wt.displayName="CanonicalCard";const Sh=async({request:e,reason:t})=>{const{error:n,data:r}=await re.POST("/rest/deeper-research/download-asset",t,{body:e,timeoutMs:2e3,numRetries:1});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to download file",cause:n});return r.file_url},vpt=async({request:e,reason:t})=>{const{error:n,data:r}=await re.POST("/rest/deeper-research/export-all-assets",t,{body:e,timeoutMs:6e4,numRetries:1,parseAs:"blob"});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to export all assets",cause:n});return r},c1e=({reason:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=fn(),r=d.useCallback(async i=>{try{const l=await Sh({request:i,reason:e}),c=document.createElement("a");c.href=l,c.download=i.filename,document.body.appendChild(c),c.click(),document.body.removeChild(c),n(t({defaultMessage:"Downloading file...",id:"/vA9NyIeJh"}),"success",3)}catch(l){ne.error("Failed to download S3 asset",{error:l,request:i,errorMessage:l instanceof Error?l.message:"Unknown error"}),n(t({defaultMessage:"Failed to download file",id:"RIWlU8NdpC"}),"error",3)}},[e,t,n]),s=d.useCallback(async(i,l="media",c=document.body)=>{try{const u=await fetch(i,{mode:"cors",cache:"no-cache"});if(!u.ok)throw new Error(`HTTP error! status: ${u.status}`);const f=await u.blob(),m=URL.createObjectURL(f),p=document.createElement("a");p.href=m,p.download=l,c.appendChild(p),p.click(),c.removeChild(p),URL.revokeObjectURL(m);const h=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi")||f.type.startsWith("video/"),g=t(h?{defaultMessage:"Video downloaded",id:"WHvofOjBQO"}:{defaultMessage:"Image downloaded",id:"nS5vxnEXaW"});n(g,"success",3)}catch(u){const f=l.toLowerCase().includes(".mp4")||l.toLowerCase().includes(".mov")||l.toLowerCase().includes(".avi");ne.error("Failed to download media asset",{error:u,mediaUrl:i,errorMessage:u instanceof Error?u.message:"Unknown error",errorType:u instanceof TypeError&&u.message.includes("Failed to fetch")?"CORS":"Unknown"});const m=t(f?{defaultMessage:"Failed to download video",id:"g8uGrbPLMV"}:{defaultMessage:"Failed to download image",id:"YPAbL/7UuZ"});n(m,"error",3)}},[t,n]),a=d.useCallback(async(i,l="image.jpg",c=document.body)=>s(i,l,c),[s]);return d.useMemo(()=>({downloadS3Asset:r,downloadImageAsset:a,downloadMediaAsset:s}),[a,r,s])},bpt=({assetType:e,entryUUID:t,answerMode:n,reason:r,skip:s})=>{const{trackEventOnce:a}=Te();d.useEffect(()=>{s||a("generated asset viewed",{assetType:e,entryUUID:t,answerMode:n,reason:r})},[a,e,t,n,r,s])},u1e=I.memo(({videoUrl:e,hideTimeline:t=!0,aspectRatio:n=16/9,className:r,onLoadedData:s,isGenerated:a=!1,entryUUID:i,autoPlay:l=!1,muted:c=!0})=>{const u=d.useRef(null),[f,m]=d.useState(!1),[p,h]=d.useState(c),[g,y]=d.useState(0),[x,v]=d.useState(!1),[b,_]=d.useState(!1),[w,C]=d.useState(!0),{trackEvent:S}=Te();bpt({assetType:yn.GENERATED_VIDEO,entryUUID:i??"",answerMode:"search",reason:"video-player",skip:!a||!b}),d.useEffect(()=>{if(b&&u.current){const q=u.current,H=q.mozHasAudio||!!q.webkitAudioDecodedByteCount||!!(q.audioTracks&&q.audioTracks.length);C(H)}},[b,u]);const E=d.useCallback(q=>{q.stopPropagation(),u.current&&(u.current.paused?u.current.play():u.current.pause(),m(!f))},[f]),k=d.useCallback(q=>{q.stopPropagation(),u.current&&(u.current.muted=!p,h(!p))},[p]),M=d.useCallback(q=>{if(q.stopPropagation(),u.current){const H=q.currentTarget.getBoundingClientRect(),ee=(q.clientX-H.left)/H.width*u.current.duration;u.current.currentTime=ee}},[]);d.useEffect(()=>{const q=setInterval(()=>{if(!u.current)return;const H=u.current.currentTime,K=u.current.duration;y(H/K)},16);return()=>clearInterval(q)},[]);const{$t:j}=Z(),[R,O]=d.useState(!1),D=d.useCallback(()=>O(!0),[]),P=d.useCallback(()=>O(!1),[]),{trackEventOnce:A}=Te(),{deprecatedOpenToast:T}=fn(),{isMobileStyle:N}=xe(),{downloadMediaAsset:L}=c1e({reason:"GeneratedVideoCard"}),U=d.useCallback(()=>{e&&(A("generated video reported",{video_url:e}),T(j({defaultMessage:"Video reported",id:"Ir50ThCD/C"}),"success",3))},[j,e,T,A]),$=d.useCallback(async q=>{q.stopPropagation(),e&&(await L(e,"video.mp4",document.body),a&&S("generated asset downloaded",{assetType:yn.GENERATED_VIDEO,answerMode:"search",entryUUID:i??"",reason:"video-player"}))},[e,L,a,i,S]),V=d.useMemo(()=>[{type:"default",text:j({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:eE,onClick:U}],[j,U]),W=d.useCallback(q=>{q.stopPropagation(),u.current&&(u.current.requestFullscreen?u.current.requestFullscreen():u.current.webkitEnterFullscreen?u.current.webkitEnterFullscreen():u.current.mozRequestFullScreen?u.current.mozRequestFullScreen():u.current.msRequestFullscreen&&u.current.msRequestFullscreen())},[]),Q=d.useMemo(()=>({aspectRatio:n}),[n]);return o.jsx(Wt,{fullBleed:!0,className:B("group relative w-full overflow-hidden",r),style:Q,children:o.jsxs("div",{className:"relative size-full overflow-hidden",onMouseEnter:()=>v(!0),onMouseLeave:()=>v(!1),children:[o.jsx("video",{ref:u,loop:!0,autoPlay:l,playsInline:!0,muted:p,className:B("size-full object-cover",{"opacity-0":!b}),onPlay:()=>m(!0),onPause:()=>m(!1),onClick:E,onLoadedData:()=>{_(!0),s?.()},src:e+"#t=0.001"}),o.jsx("div",{className:B("absolute inset-0 flex flex-col justify-end transition-opacity duration-200",x||R||!f?"opacity-100":"opacity-0",b?"":"pointer-events-none opacity-0"),onClick:E,children:o.jsxs("div",{className:B("p-md flex w-full flex-col bg-gradient-to-t from-black/60 to-transparent pb-0",t?"pb-md":"pb-0"),children:[o.jsxs("div",{className:"gap-md flex",children:[o.jsx(z,{as:"button",onClick:E,children:o.jsx(F,{color:"white",children:o.jsx(de,{icon:f?ice:lce})})}),o.jsx(bn,{showTooltip:a&&!w,tooltipLayout:"right",tooltipText:j({defaultMessage:"This video does not have audio.",id:"V7VF0Hgi7t"}),asChild:!0,children:o.jsx(z,{as:"button",onClick:w?k:q=>q.stopPropagation(),className:B({"opacity-50":!w}),children:o.jsx(F,{color:"white",children:o.jsx(de,{icon:p?cce:uce})})})}),o.jsx(z,{as:"button",className:"ml-auto",onClick:$,children:o.jsx(F,{color:"white",children:o.jsx(de,{icon:Uy})})}),o.jsx(z,{as:"button",onClick:W,children:o.jsx(F,{color:"white",children:o.jsx(de,{icon:W7e})})}),o.jsx(nn,{isMobileStyle:N,items:V,onOpen:D,onClose:P,wrapperClassName:"flex",children:o.jsx(z,{as:"button",className:"size-[20px]",children:o.jsx(F,{color:"white",children:o.jsx(de,{icon:dce})})})})]}),!t&&o.jsx("div",{className:"py-md cursor-pointer",onClick:M,children:o.jsx("div",{className:"relative h-0.5 flex-1 shrink-0 cursor-pointer overflow-hidden rounded-full bg-white/30",children:o.jsx("div",{className:"absolute left-0 top-0 size-full bg-white",style:{transformOrigin:"left",transform:`scaleX(${g})`}})})})]})})]})})});u1e.displayName="VideoPlayer";const d1e=I.memo(({loading:e,size:t=30})=>{const[n,{width:r,height:s}]=Ho(),[a,i]=d.useState(0),[l,c]=d.useState(0),u=xo(0,0,.58,1),f=xo(.19,1,.22,1);d.useEffect(()=>{if(r&&s){const g=Math.ceil(r/t),y=Math.ceil(s/t);i(g),c(y)}},[r,s,t]);function m(g,y){const x=Math.ceil(g),v=Math.floor(y);return Math.floor(Math.random()*(v-x)+x)}const h=r?((g,y)=>{let x=Math.floor(y/g);return x%2!==0&&(x=x-1),x=Math.max(2,x),y/x})(t,r):t;return o.jsx("div",{ref:n,style:{gridTemplateColumns:`repeat(auto-fill, ${h}px)`,gridTemplateRows:`repeat(auto-fill, ${h}px)`},className:B("pointer-events-none absolute inset-0 z-[5] grid size-full gap-0",{"bg-raised":a===0||l===0}),children:o.jsx(Ye,{children:[...Array(a*l)].map((g,y)=>e?o.jsx(ve.div,{animate:{opacity:[.9,0],transition:{repeat:1/0,duration:.5,delay:m(0,10)/10,repeatType:"mirror",ease:u}},exit:{opacity:0,transition:{duration:1,ease:f}},className:"bg-base relative",children:o.jsx("div",{className:"bg-raised inset-0 size-full"})},y):null)})})});d1e.displayName="BlinkingGrid";const _pt="IMAGE_GEN_PLACEHOLDER",wpt="VIDEO_GEN_PLACEHOLDER",f1e=I.memo(({sourceImage:e,media:t,generating:n,square:r=!1,type:s="image",onMediaLoad:a,entryUUID:i})=>{const l=xo(.19,1,.22,1),[c,u]=d.useState(void 0),[f,m]=d.useState(!1),[p,h]=d.useState(!n),[g,y]=d.useState(!0),[x,{width:v}]=Ho();d.useEffect(()=>{const S=s==="video"?wpt:_pt;t&&t.name!==S&&u(t)},[t,s]),d.useEffect(()=>{g&&y(!1)},[g]),d.useEffect(()=>{n&&(m(!1),h(!1))},[n]),d.useEffect(()=>{if(f&&!n){const S=setTimeout(()=>{h(!0)},1e3);return()=>clearTimeout(S)}},[f,n]);const _=((S,E)=>{let k=Math.floor(E/S);return k%2!==0&&(k=k-1),k=Math.max(2,k),E/k})(30,v),w=d.useCallback(()=>{m(!0),a?.()},[a]),C=d.useMemo(()=>({url:c?.url,name:c?.name,showCitation:!1}),[c?.url,c?.name]);return o.jsx("div",{ref:x,className:"relative size-full shrink-0",children:_!==0?o.jsxs(o.Fragment,{children:[o.jsx(d1e,{loading:!p,size:_}),o.jsx(ve.div,{className:"relative size-full",style:{maskSize:`${_}px ${_}px`,maskPosition:"top left",maskRepeat:"repeat"},initial:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},animate:{maskImage:p?`radial-gradient(black ${_/5*4}px, transparent 0px)`:`radial-gradient(black ${_/5}px, transparent 0px)`},transition:{duration:1,ease:l},children:o.jsx(Wt,{className:B(`relative size-full overflow-hidden !rounded-md ${p?"cursor-pointer":""}`,{"!rounded-none":r}),fullBleed:!0,children:o.jsx(ve.div,{animate:{filter:!p&&e?"blur(20px) saturate(2)":"none"},transition:{duration:1,ease:l},className:"grid size-full",children:o.jsx("div",{className:"relative w-full bg-black/40 dark:bg-white/40",children:o.jsxs(Ye,{children:[(e?.startsWith("http")||e?.startsWith("blob"))&&!p&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:o.jsx("img",{src:e,alt:"Source",className:"block size-full object-cover"})},"source"),c?.image?.startsWith("http")&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:p?1:0},exit:{opacity:0},transition:{duration:1,ease:l},className:"absolute inset-0 size-full",children:s==="image"?o.jsxs(o.Fragment,{children:[o.jsx(ns,{src:c.image||c.thumbnail,alt:c.name||"Generated Image",origin:C,includeLightBoxModal:!!p,maskClassName:B("!bg-transparent",{"!rounded-none":r}),imageClassName:"block w-full h-full max-h-[100%] object-contain !bg-transparent",containerClassName:"w-full h-full absolute inset-0 z-10 !bg-transparent",onLoad:w}),o.jsx("img",{src:c.image||c.thumbnail,alt:c.name||"Generated Image",className:"absolute inset-0 block size-full object-cover blur-[20px] saturate-150"})]}):o.jsx(u1e,{videoUrl:c.image,isGenerated:!0,aspectRatio:11/6,onLoadedData:w,className:"absolute inset-0 block size-full !rounded-none object-cover",entryUUID:i})},"generated")]})})})})})]}):null})});f1e.displayName="GeneratedMediaLoader";const m1e=I.memo(({setViewState:e})=>{const{$t:t}=Z(),n=d.useCallback(()=>e("create_avatar"),[e]);return o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"mb-lg relative -mx-6 h-[600px] overflow-hidden rounded-lg",children:[o.jsx(ns,{src:"https://r2cdn.perplexity.ai/virtual-tryon-intro-avatars.png",alt:"Avatar preview",imageClassName:"h-full w-full object-cover object-top pointer-events-none bg-base",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),o.jsxs("div",{className:"from-base gap-md p-lg absolute inset-x-0 bottom-0 flex h-1/2 flex-col items-center justify-end bg-gradient-to-t from-35% to-transparent",children:[o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(ie,{defaultMessage:"Skip the guesswork",id:"xUwopw2/ud"})}),o.jsx(F,{variant:"small",className:"max-w-[350px] text-pretty text-center",color:"light",children:o.jsx(ie,{defaultMessage:"Upload a photo, create your avatar, and explore how outfits look on your digital self.",id:"Mtc6VpYStx"})})]})]}),o.jsx("div",{className:"-mt-md flex justify-center",children:o.jsx(me,{text:t({defaultMessage:"Create your avatar",id:"pkptzIeNWN"}),variant:"primary",onClick:n})})]})});m1e.displayName="IntroView";const p1e=I.memo(({setViewState:e,uploadSelfie:t,setLocalPreviewUrl:n,isSelfieUploading:r})=>{const{$t:s}=Z(),[a,i]=d.useState(!1),l=d.useCallback(async m=>{const p=m.target.files?.[0];if(p){const h=URL.createObjectURL(p);n(h),await t(p)&&e("choose_body")}m.target.value=""},[t,n,e]),c=d.useCallback(async m=>{const p=URL.createObjectURL(m);n(p),await t(m)&&e("choose_body")},[t,n,e]),u=d.useCallback(()=>{i(!0)},[]),f=d.useCallback(()=>{i(!1)},[]);return o.jsxs("div",{className:"gap-lg -mb-sm -mt-md flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(h1e,{step:2,totalSteps:4}),o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(ie,{defaultMessage:"Take a selfie",id:"0H3vV1IwP1"})}),o.jsx(F,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:o.jsx(ie,{defaultMessage:"To create a personalized avatar, please upload a well lit, front-facing selfie.",id:"2hp5WUjFRc"})})]}),o.jsxs("div",{className:"gap-sm grid grid-cols-2 grid-rows-4",children:[o.jsx(v1e,{image:"https://r2cdn.perplexity.ai/virtual-tryon-selfie.png",title:s({defaultMessage:"Front facing selfie",id:"v5qKOPNOwM"}),description:s({defaultMessage:"Simple front facing photo is all we need.",id:"7sBIYn49Jb"}),className:"!col-start-1 !row-span-4 !row-start-1"}),o.jsx(r0,{title:s({defaultMessage:"Face fully visible",id:"I+I2q2Gn3a"}),icon:bu}),o.jsx(r0,{title:s({defaultMessage:"Looking Forward",id:"79tlG9DGSR"}),icon:Vk}),o.jsx(r0,{title:s({defaultMessage:"Even natural light",id:"2OWeBoZV0d"}),icon:fce}),o.jsx(r0,{title:s({defaultMessage:"No harsh shadows",id:"vXaeUswXsx"}),icon:H7e})]}),o.jsx("div",{className:"gap-sm flex justify-center",children:r?o.jsxs("div",{className:"px-md py-sm gap-sm bg-subtle flex items-center rounded-lg",children:[o.jsx(Fr,{}),o.jsx(F,{variant:"baseSemi",children:o.jsx(ie,{defaultMessage:"Uploading...",id:"JEsxDwhXPG"})})]}):o.jsxs(o.Fragment,{children:[o.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"shopping-try-on-file-input",onChange:l}),o.jsx(me,{text:s({defaultMessage:"Take a selfie",id:"0H3vV1IwP1"}),icon:Gk,variant:"common",onClick:u}),o.jsxs("label",{htmlFor:"shopping-try-on-file-input",className:"px-md py-sm gap-sm bg-super active:ease-outExpo group flex origin-center transform-gpu cursor-pointer select-none flex-row items-center whitespace-nowrap rounded-lg duration-300 hover:opacity-80 active:scale-[0.97] active:duration-150",children:[o.jsx(F,{children:o.jsx(de,{icon:By,size:"md",className:"text-white dark:text-black"})}),o.jsx(F,{variant:"baseSemi",color:"defaultInverted",children:o.jsx(ie,{defaultMessage:"Upload a selfie",id:"bODqv8TA31"})})]})]})}),o.jsx(i1e,{isOpen:a,onClose:f,onCapture:c})]})});p1e.displayName="CreateAvatarView";const h1e=({step:e,totalSteps:t})=>{const n=e/t*100;return o.jsx(z,{className:"py-xs flex flex-row items-center justify-center rounded",children:o.jsx("div",{className:"bg-subtle w-xl h-xs relative overflow-hidden rounded-full",children:o.jsx("div",{className:"bg-dark h-full transition-all duration-300",style:{width:`${n}%`}})})})},g1e=I.memo(({setViewState:e,generateDefaultAvatar:t,selfieUrl:n,uploadPhoto:r,generateCustomAvatar:s,setLocalPreviewUrl:a})=>{const{$t:i}=Z(),{trackEvent:l}=Te(),[c,u]=d.useState("default"),[f,m]=d.useState(!1),p=d.useCallback(()=>{n&&(l("selfie provided"),e("generating_avatar"),t(n),l("avatar generated"))},[e,t,n,l]),h=d.useCallback(()=>{const b=document.getElementById("choose-body-file-input");b&&b.click()},[]),g=d.useCallback(()=>{c==="default"?p():h()},[c,p,h]),y=d.useCallback(()=>{u("default")},[]),x=d.useCallback(()=>{u("your")},[]),v=d.useCallback(async b=>{const _=b.target.files?.[0];if(_){if(!n)return;l("full body provided");const w=URL.createObjectURL(_);a(w);try{m(!0);const C=await r(_);C&&(e("generating_avatar"),s(n,C),l("avatar generated"))}finally{m(!1)}}b.target.value=""},[r,s,n,a,e,l]);return o.jsxs("div",{className:"gap-xl flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(h1e,{step:4,totalSteps:4}),o.jsx("span",{className:"font-editorial text-3xl font-light",children:o.jsx(ie,{defaultMessage:"Choose your avatar body",id:"+VyjlR/lAC"})}),o.jsx(F,{variant:"small",className:"max-w-[400px] text-pretty text-center",color:"light",children:o.jsx(ie,{defaultMessage:"You can continue with a default body or create a more personalized avatar with your body.",id:"cWLZ08Ydju"})})]}),o.jsxs("div",{className:"gap-md grid grid-cols-2",children:[o.jsx(xJ,{onClick:y,title:i({defaultMessage:"Default body",id:"vO54ZADRPV"}),description:i({defaultMessage:"Uses a generic body shape, no photo needed",id:"ZuGM1SxB8y"}),selected:c==="default"}),o.jsx(xJ,{onClick:x,title:i({defaultMessage:"Your body",id:"7ZKFrdUySm"}),description:i({defaultMessage:"Uses a full body photo to create a custom body",id:"ddPGzyfCV3"}),selected:c==="your"})]}),o.jsxs("div",{className:"flex justify-center",children:[o.jsx("input",{type:"file",accept:"image/*",className:"absolute hidden",id:"choose-body-file-input",onChange:v}),o.jsx(me,{text:i(f?{defaultMessage:"Uploading full body photo...",id:"Xg5+S5kxLh"}:c==="default"?{defaultMessage:"Continue with default",id:"zlYIh9m2kM"}:{defaultMessage:"Upload full body photo",id:"VD13bqnxFO"}),icon:c==="default"?bu:By,isLoading:f,disabled:f,variant:"primary",onClick:g})]})]})});g1e.displayName="ChooseBodyView";const xJ=({onClick:e,title:t,description:n,selected:r})=>o.jsxs(z,{className:B("gap-xs p-md !ring-super relative flex cursor-pointer flex-col rounded-xl border duration-150",r?"!border-transparent ring-2":"ring-0"),onClick:e,children:[o.jsx("div",{className:"mb-sm aspect-square overflow-hidden rounded-md",children:o.jsx(ns,{src:"/static/images/tryon/avatar_body.png",alt:"Default body",imageClassName:"size-full object-contain invert opacity-10",containerClassName:"size-full",maskClassName:"bg-transparent",includeLightBoxModal:!1,draggable:!1})}),o.jsx(F,{variant:"baseSemi",className:"text-center",children:t}),o.jsx(F,{variant:"small",className:"px-md text-pretty text-center",color:"light",children:n})]}),y1e=I.memo(({status:e,onClose:t,onBack:n,resultUrl:r,saveAvatar:s,onSuccessfulOnboarding:a})=>{const{$t:i}=Z(),[l,c]=d.useState(!1),{trackEvent:u}=Te(),f=d.useCallback(async()=>{u("avatar retry clicked"),n()},[u,n]),m=d.useCallback(async()=>{if(r&&e==="success"&&!l){c(!0);const p=await s(r);t(),c(!1),a(p)}else c(!1),t()},[t,r,e,s,a,l]);return o.jsxs("div",{className:"gap-lg flex flex-col",children:[o.jsx("div",{className:"flex justify-center",children:o.jsx(z,{className:B("gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border"),children:r&&o.jsx(ns,{src:r,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"page-title",className:"text-center",children:o.jsx(ie,{defaultMessage:"Your new virtual you",id:"LoEf9iMkXR"})}),o.jsx(F,{variant:"small",className:"text-center",color:"light",children:o.jsx(ie,{defaultMessage:"Your personalized avatar is ready",id:"MLiXNgEouW"})})]}),o.jsxs("div",{className:"gap-sm flex justify-center",children:[o.jsx(me,{text:i({defaultMessage:"Retry",id:"62nsdyMyIO"}),variant:"border",onClick:f,disabled:l}),o.jsx(me,{text:i({defaultMessage:"Start Shopping",id:"BRgXJINE++"}),variant:"primary",onClick:m,disabled:e!=="success"||l,isLoading:l})]})]})});y1e.displayName="ConfirmAvatarView";const x1e=I.memo(({localPreviewUrl:e,onClose:t})=>{const{$t:n}=Z(),r=d.useMemo(()=>{if(e)return{image:e,name:"Avatar Preview",status:mYe.IN_PROGRESS,type:"image",medium:"image",author_name:"PPLX",author_url:"https://pplx.ai",image_width:100,image_height:100,url:e,source:"pplx",thumbnail:e,dark_image_url:e,locations:[],thumbnail_height:100,thumbnail_width:100,sponsored_uuid:"",ad_content_uuid:"",modal_url:"",low_res_image:"",generated_media_metadata:void 0}},[e]);return o.jsxs("div",{className:"gap-lg flex flex-col",children:[o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"page-title",className:"text-center",children:o.jsx(ie,{defaultMessage:"Working on your avatar",id:"9nXG80mtI6"})}),o.jsx(F,{variant:"small",className:"text-center",color:"light",children:o.jsx(ie,{defaultMessage:"You can continue shopping while we create your virtual you. It shouldn't be long.",id:"Z5TNVvv3SP"})})]}),o.jsxs("div",{className:"gap-lg flex flex-col items-center",children:[o.jsx(z,{className:"gap-sm relative isolate flex aspect-[252/336] w-full max-w-[400px] flex-col overflow-hidden rounded-lg border",children:o.jsx(f1e,{generating:!0,media:r})}),o.jsx(me,{text:n({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"}),variant:"primary",onClick:t})]})]})});x1e.displayName="GeneratingAvatarView";const r0=I.memo(({title:e,icon:t})=>o.jsx(z,{className:"gap-sm p-sm flex flex-col items-center justify-center rounded-lg border",children:o.jsxs(F,{variant:"smallBold",className:"gap-xs flex flex-row items-center",children:[o.jsx(de,{icon:t,size:"md"}),e]})}));r0.displayName="InfoCell";const v1e=I.memo(({image:e,title:t,className:n,description:r})=>o.jsxs(z,{className:B("gap-sm relative col-start-2 row-start-2 flex flex-col overflow-hidden rounded-lg border",n),children:[e&&o.jsx(ns,{src:e,alt:"Intro",imageClassName:"w-full object-cover object-top pointer-events-none max-h-[175px]",containerClassName:"flex-shrink-0",includeLightBoxModal:!1,className:"pointer-events-none"}),o.jsxs("div",{className:"from-base gap-xs p-md absolute inset-0 flex flex-col items-center justify-end bg-gradient-to-t from-5% to-transparent",children:[o.jsx(F,{variant:"smallBold",className:"flex items-end justify-center text-center",children:t}),r&&o.jsx(F,{variant:"tinyRegular",className:"text-pretty text-center leading-tight",color:"light",children:r})]})]}));v1e.displayName="InstructionCell";async function Cpt({request:e,reason:t}){const{data:n,error:r}=await re.POST("/rest/shopping/generate-shopping-try-on",t,{body:e,timeoutMs:35e3,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}async function vJ({request:e,reason:t}){const{data:n,error:r}=await re.POST("/rest/shopping/try-on-photo/generate-avatar",t,{body:e,timeoutMs:4e4,headers:{"content-type":"application/json"}});return r?{status:"error",image_url:""}:n}const Spt=async({reason:e,try_on_photo_url:t})=>{try{const n=await re.PUT("/rest/shopping/try-on-photo/save",e,{body:{try_on_photo_url:t},timeoutMs:Pe()});return n.data?n.data:{status:"error",user_try_on_photo_url:""}}catch(n){return ne.error("Failed to save user try on photo",n),{status:"error",user_try_on_photo_url:""}}},Ept=async({reason:e})=>{try{const t=await re.DELETE("/rest/shopping/try-on-photo/delete",e,{timeoutMs:Pe()});return t.data?t.data:{status:"error"}}catch(t){return ne.error("Failed to delete user try on photo",t),{status:"error"}}},HB=async({file:e,fileSource:t,forceImage:n,reason:r})=>{const s=await re.POST("/rest/uploads/create_upload_url",r,{body:{filename:e.name,content_type:e.type,source:t??"default",file_size:e.size,force_image:n??!1},timeoutMs:Ht.MEDIUM,retries:2});return s.data?s.data:null},Mpt=async({remote_file_id:e,connection_type:t,source:n,reason:r})=>{const s=await re.POST("/rest/connectors/attachments/upload",r,{body:{remote_file_id:e,connection_type:t,source:n??"default"},timeoutMs:Ht.VERY_HIGH,retries:2});return s.data?s.data:null};async function kpt({request:e,reason:t}){return new Promise((n,r)=>{re.SSE("/rest/sse/attachment_processing/subscribe",t,{params:e,handlers:{message:s=>{n(s)}}}).catch(r)})}const b1e=({reason:e,productImageUrl:t})=>{const{$t:n}=Z(),{deprecatedOpenToast:r}=fn(),{openModal:s,closeModal:a}=xt(),i=ot(),[l,c]=d.useState({status:"idle",error:null,resultUrl:null,selfieUrl:null});d.useEffect(()=>{if(t){const E=i.getQueryData(rj(t));E&&c(k=>({...k,resultUrl:E}))}},[t,i]);const u=d.useRef(!1),f=d.useCallback(()=>{c({status:"idle",error:null,resultUrl:null,selfieUrl:null})},[]),m=d.useCallback(E=>{c(k=>({...k,status:"error",error:E}))},[]),p=d.useCallback(async E=>{if(!E.type.startsWith("image/"))return m(n({defaultMessage:"Only image files are supported.",id:"f4sVsu2Ean"})),null;const k=10*1024*1024;if(E.size>k)return m(n({defaultMessage:"Image size exceeds 10MB limit.",id:"/lVoGk8eeX"})),null;try{c(D=>({...D,status:"uploading"}));const M=await HB({file:E,fileSource:"shopping_try_on",forceImage:!0,reason:e});if(!M?.fields||!M?.s3_bucket_url)throw M?.rate_limited?new Error("File upload failed due to rate limit."):new Error("Failed to get upload URL");const j=new FormData;Object.entries(M.fields).forEach(([D,P])=>{j.append(D,P)}),j.append("file",E);const R=await fetch(M.s3_bucket_url,{method:"POST",body:j});if(!R.ok)throw new Error("Failed to upload file");let O=null;try{const D=await R.json();D?.secure_url?O=D.secure_url:D?.eager?.[0]?.secure_url&&(O=D.eager[0].secure_url),O&&wm(O)&&(O=o8(O))}catch{M.s3_object_url&&(O=M.s3_object_url)}if(!O)throw new Error("Failed to get image URL from upload response");return c(D=>({...D,status:"idle"})),O}catch(M){return m(M instanceof Error?M.message:n({defaultMessage:"Failed to upload image.",id:"+eCvtPyOJg"})),null}},[n,e,m]),h=d.useCallback(async E=>{const k=await p(E);return k&&c(M=>({...M,selfieUrl:k})),k},[p]),g=d.useCallback(()=>{s("shoppingTryOnOnboardingModal",{onSuccessfulOnboarding:E=>{i.setQueryData(xE(),{try_on_photo_url:E}),i.setQueryData(Lf(),!1),r(n({defaultMessage:"Avatar updated successfully!",id:"tjpCN5PY48"}),"success",3)},onClose:()=>{a()}})},[s,a,i,r,n]),y=d.useCallback(async E=>{try{const{user_try_on_photo_url:k}=await Spt({reason:e,try_on_photo_url:E});return k}catch(k){return r(n({defaultMessage:"Failed to save avatar. Please try again.",id:"Z5lnZQ5t8Q"}),"error",5),ne.error("Failed to save avatar",k),""}},[e,n,r]),x=d.useCallback(async()=>{try{await Ept({reason:e})}catch(E){ne.error("Failed to delete avatar",E)}},[e]),v=d.useCallback(E=>{u.current=E},[]),b=d.useCallback(async E=>{const k=await y(E);i.setQueryData(xE(),{try_on_photo_url:k}),r(n({defaultMessage:"Your avatar has been generated! You can now try on clothes.",id:"moiCrokdKs"}),"success",10,"",n({defaultMessage:"Check it out",id:"IjqWGw+QT1"}),()=>{s("avatarManagementModal",{source:"toast",onRetry:g})})},[y,n,r,i,s,g]),_=d.useCallback(async E=>{try{c(M=>({...M,status:"processing",resultUrl:null,error:null})),i.setQueryData(Lf(),!0);const k=await vJ({request:{user_image_url:E},reason:e});if(k.status==="failed")throw i.setQueryData(Lf(),!1),new Error("Failed to generate avatar");c(M=>({...M,status:"success",resultUrl:k.image_url})),u.current&&await b(k.image_url),i.setQueryData(Lf(),!1)}catch(k){m(k instanceof Error?k.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,i]),w=d.useCallback(async(E,k)=>{try{c(j=>({...j,status:"processing",resultUrl:null,error:null})),i.setQueryData(Lf(),!0);const M=await vJ({request:{user_image_url:k,selfie_image_url:E},reason:e});if(M.status==="failed")throw i.setQueryData(Lf(),!1),new Error("Failed to generate avatar");c(j=>({...j,status:"success",resultUrl:M.image_url})),u.current&&await b(M.image_url),i.setQueryData(Lf(),!1)}catch(M){m(M instanceof Error?M.message:n({defaultMessage:"Failed to generate avatar.",id:"anPmJ/DLsx"}))}},[e,n,m,b,u,i]),C=d.useCallback(async(E,k)=>{try{c(j=>({...j,status:"processing",resultUrl:null,error:null}));const M=await Cpt({request:{image_url:E,product_image_url:k},reason:e});if(M.status==="error")throw new Error("Failed to generate try-on");c(j=>({...j,status:"success",resultUrl:M.image_url})),k&&i.setQueryData(rj(k),M.image_url)}catch(M){m(M instanceof Error?M.message:n({defaultMessage:"Failed to generate try-on.",id:"ptEP5MGDf6"}))}},[e,n,m,i]),S=d.useCallback(()=>{t&&i.removeQueries({queryKey:rj(t)}),c(E=>({...E,resultUrl:null}))},[t,i]);return d.useMemo(()=>({status:l.status,error:l.error,resultUrl:l.resultUrl,selfieUrl:l.selfieUrl,uploadPhoto:p,uploadSelfie:h,generateDefaultAvatar:_,generateCustomAvatar:w,tryOnProduct:C,saveAvatar:y,resetState:f,deleteAvatar:x,setShouldAutoSaveAvatar:v,clearCachedTryOn:S,handleRetry:g}),[l.status,l.error,l.resultUrl,l.selfieUrl,p,h,_,w,C,y,f,x,v,S,g])},_1e=I.memo(({isOpen:e,onClose:t,onSuccessfulOnboarding:n})=>{const r="shopping-try-on-onboarding",{status:s,resultUrl:a,selfieUrl:i,uploadSelfie:l,generateDefaultAvatar:c,generateCustomAvatar:u,uploadPhoto:f,saveAvatar:m,resetState:p,setShouldAutoSaveAvatar:h}=b1e({reason:r}),[g,y]=d.useState("intro"),[x,v]=d.useState(null),[b,_]=d.useState(null),w=d.useCallback(M=>{v(j=>(j&&j!==M&&URL.revokeObjectURL(j),M))},[]),C=d.useCallback(()=>{s==="processing"&&g==="generating_avatar"?h(!0):p(),y("intro"),_(null),t()},[t,p,s,g,h]);d.useEffect(()=>{!e&&x&&(URL.revokeObjectURL(x),v(null))},[e,x]),d.useEffect(()=>{g==="generating_avatar"&&(s==="success"&&a?y("confirm_avatar"):s==="error"&&(y("choose_body"),_(null)))},[g,s,a]);const S=d.useCallback(()=>y("create_avatar"),[]),E=d.useCallback(M=>(_("selfie"),l(M)),[l]),k=d.useCallback(M=>(_("body"),f(M)),[f]);return o.jsx(qt,{isOpen:e,onClose:C,modalClassname:"light",children:o.jsxs("div",{className:"size-full",children:[g==="intro"&&o.jsx(m1e,{setViewState:y}),g==="create_avatar"&&o.jsx(p1e,{setViewState:y,uploadSelfie:E,setLocalPreviewUrl:w,isSelfieUploading:s==="uploading"&&b==="selfie"}),g==="choose_body"&&o.jsx(g1e,{setViewState:y,generateDefaultAvatar:c,selfieUrl:i,uploadPhoto:k,generateCustomAvatar:u,setLocalPreviewUrl:w}),g==="generating_avatar"&&o.jsx(x1e,{localPreviewUrl:x,onClose:C}),g==="confirm_avatar"&&o.jsx(y1e,{status:s,onClose:C,onBack:S,resultUrl:a,saveAvatar:m,onSuccessfulOnboarding:n})]})})});_1e.displayName="ShoppingTryOnOnboardingModal";const zB=hp("AskInputContext",()=>Yo((e,t)=>({activeMenu:null,fileUploadUpsellTooltipOpen:!1,suggestions:ce,blankStateSuggestions:{[ue.SEARCH]:null,[ue.RESEARCH]:null,[ue.STUDIO]:null,[ue.STUDY]:null},showSuggestDropdown:!1,actions:{onActiveMenuChange:n=>{e({activeMenu:n})},setFileUploadUpsellTooltipOpen:n=>{e({fileUploadUpsellTooltipOpen:n})},setSuggestions:n=>{e({suggestions:n})},setBlankStateSuggestions:(n,r)=>{const s=t().blankStateSuggestions;e({blankStateSuggestions:{...s,[r]:n}})},setShowSuggestDropdown:n=>{e({showSuggestDropdown:n})}},inputRef:d.createRef()}))),gc=zB.Provider,Tpt=zB.useSelector,Npt=zB.useTrackedState,zo=()=>Tpt(e=>e.actions),ea=Npt,GB=I.memo(()=>o.jsx("div",{className:"bg-base fixed inset-0 z-[999] flex h-screen w-screen items-center justify-center opacity-50"}));GB.displayName="VoiceToVoiceModalLoader";const qB=I.memo(function(t){const{className:n,children:r,result:s,trackEvent:a,...i}=t,l=B("group flex size-full cursor-pointer items-stretch",n);return CU(s)?o.jsx(qe,{target:"_blank",rel:"noopener",className:l,href:s.url,...i,children:o.jsx("div",{className:"w-full",children:r})}):o.jsx(o.Fragment,{children:r})});qB.displayName="CitationCardLink";const KB=I.memo(({variant:e="medium",searchType:t})=>{const n=t==="memory",s=B("flex items-center justify-between w-full",e==="small"?"mb-0":"mb-2");return o.jsxs("div",{className:s,children:[o.jsxs(F,{className:"flex items-center gap-2",variant:"tiny",color:"light",children:[o.jsx(de,{icon:n?Kl:fp,size:"sm"}),n?o.jsx(ie,{defaultMessage:"Memory",id:"dVx3yznM2C"}):o.jsx(ie,{defaultMessage:"Library",id:"StcK672jB9"})]}),o.jsx(F,{variant:"tiny",color:"ultraLight",children:o.jsx(de,{icon:m1,size:"sm"})})]})});KB.displayName="MemorySearchCitationCardTitle";const w1e=e=>e.is_scrubbed??!1,jpt=e=>T3(e)?w1e(e):!1,T3=e=>e.is_memory||e.is_conversation_history,Apt=e=>e.is_memory,O_=e=>{const t=e.is_client_context,n=jpt(e);return t||n},C1e=I.memo(function(t){const{$t:n}=Z(),{result:r,additionalMetadata:s,variant:a}=t,i=r.url,l=r.meta_data?.generated_file_description??r.snippet,c=r.meta_data?.generated_file_title??r.name,u=r?.is_client_context,f=!!r.meta_data?.connection_type,m=typeof r.meta_data?.quoteBeforeContext=="string"?r.meta_data?.quoteBeforeContext:"",p=typeof r.meta_data?.quoteEmphasisText=="string"?r.meta_data?.quoteEmphasisText:"",h=typeof r.meta_data?.quoteAfterContext=="string"?r.meta_data?.quoteAfterContext:"",g=m.length>0||p.length>0||h.length>0,y=a!=="grid"&&l&&g,x=r.file_metadata?.file_repository_type,v=typeof r.meta_data?.wiley_book_uuid=="string",b=typeof r.meta_data?.domain_name=="string"?r.meta_data?.domain_name:void 0,_=wtt(r),w=()=>{if(f&&r.meta_data?.connection_type!==Cn.WILEY)return ZE(r.meta_data?.connection_type);if(r.is_attachment){if(r?.meta_data?.patent_name)return r.meta_data.patent_name;if(!r?.meta_data?.file_uuid){const k=r?.file_metadata?.connector_type??r3(r.url),M=k?ZE(k):void 0;if(M)return M}return x=="USER"?n({defaultMessage:"Local Files",id:"FBnEWaGOHR"}):x=="ORG"?n({defaultMessage:"Org Files",id:"DaFSYzpM1Q"}):x=="COLLECTION"?n({defaultMessage:"Space Files",id:"Thy4/SbBwD"}):n({defaultMessage:"Attachment",id:"eLCAEP8LHj"})}return b},C=T3(r),S=r.is_memory,E=O_(r);return o.jsxs("div",{className:B("gap-xs pointer-events-none relative flex h-full max-w-full select-none flex-col",{"px-sm pb-sm pt-sm w-full":a==="grid"},{"p-md":a!=="grid"}),children:[o.jsxs("div",{className:"flex w-full items-center justify-between",children:[C&&!E?o.jsx(KB,{variant:"small",searchType:S?"memory":"conversation-history"}):o.jsxs("div",{className:"space-x-xs flex",children:[s||null,o.jsx(Wo,{variant:"tiny",color:"light",url:i,isAttachment:r.is_attachment,connectionType:r.meta_data?.connection_type,source:w(),isInlineAttachment:_,isPatent:!!r?.meta_data?.patent_name,truncate:!1})]}),o.jsxs("div",{children:[v&&o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(de,{size:"sm",icon:mce})}),u&&a==="grid"?o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(de,{size:"sm",icon:_0})}):null]})]}),o.jsx(F,{variant:a==="grid"?"tiny":a==="list"?"small":"base",className:B("",{"":a==="grid","pr-1":a==="list"}),children:S&&!E?o.jsx(F,{variant:"tiny",className:"line-clamp-2 h-8",children:r?.snippet}):o.jsx("span",{className:"line-clamp-1 text-left md:line-clamp-2",children:c||o.jsx("div",{children:""})})}),c!==r.name?o.jsx(F,{variant:"small",color:"light",className:"line-clamp-1",children:r.name}):null,y&&o.jsxs(F,{variant:a==="list"?"tiny":"small",className:"mt-two border-super line-clamp-[8] border-l-4 pl-2 font-normal",children:[o.jsx("span",{children:m}),o.jsx("span",{className:"bg-super/30",children:p}),o.jsx("span",{children:h})]}),a!=="grid"&&l&&!g&&o.jsx(F,{variant:a==="list"?"tiny":"small",className:"mt-two line-clamp-1 font-normal md:line-clamp-4",children:l}),E&&a!=="grid"?o.jsxs(z,{className:"gap-xs pt-sm mt-xs flex items-center border-t",children:[o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(de,{size:"sm",icon:m1})}),o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(ie,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})});C1e.displayName="CitationDefaultCard";const S1e=I.memo(function(t){const{result:n,imageURL:r,citationNumber:s,useLightBoxModal:a=!0}=t,i=B(" w-full relative max-h-[76px]");return o.jsxs("div",{className:i,children:[o.jsx(ns,{includeLightBoxModal:a,alt:n.name,containerClassName:"w-full h-full p-xs",imageClassName:"object-cover object-center w-full h-full rounded-md",src:r}),s&&o.jsx(F,{className:"bottom-sm left-sm px-xs absolute z-[1] inline-flex rounded-sm bg-black/50",variant:"tiny",color:"white",children:s})]})});S1e.displayName="CitationImageCard";const N3=I.memo(e=>{const{children:t,timestamp:n,timestampProps:r,includeIcon:s=!0}=e,a=Z();if(!n)return null;const i=n?.endsWith("Z")?n:`${n}Z`;return o.jsxs(z,{className:"gap-x-xs flex",children:[s?o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(de,{icon:pce,size:"xs"})}):null,o.jsxs(F,{variant:"tinyRegular",color:"light",...r,children:[t&&o.jsxs(o.Fragment,{children:[t," "]}),x_(a,i)]})]})});N3.displayName="CitationUpdatedAt";class Ipt extends Date{constructor(t){const n=t?new Date(t):new Date,r=Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds());super(r)}getTimezoneOffset(){return 0}}class j3{static isRecentlyTrending(t,n=432e5){return t.meta_data?.client!=="trending"?!1:new Date().getTime()-new Ipt(t.meta_data?.published_date).getTime()<n}static normalizeUrl(t){return t.replace(/\/$/,"")}static dedupWebResults(t,n,r=!1){if(!t)return[];if(r)return t.filter(a=>a.is_attachment);if(!n)return t;const s=new Set(n.map(a=>this.normalizeUrl(a.url)));return t.filter(a=>!s.has(this.normalizeUrl(a.url)))}}const E1e=I.memo(e=>{const{result:t,imageURL:n}=e,r=t.url,s=Z(),a=d.useMemo(()=>({color:"white"}),[]),i=d.useMemo(()=>o.jsx(N3,{recentlyUpdatedLabel:s.$t({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:t.meta_data?.published_date,timestampProps:a,includeIcon:!1,children:s.$t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),[s,t.meta_data?.published_date,a]);return o.jsxs("div",{className:B("p-sm gap-sm flex h-full max-h-[190px]"),children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"space-x-xs flex justify-between",children:[o.jsx(Wo,{variant:"tiny",color:"light",url:r,isAttachment:t.is_attachment}),j3.isRecentlyTrending(t)?o.jsx(bn,{tooltipText:i,children:o.jsx(pce,{className:"text-super size-3.5"})}):null]}),o.jsx("div",{children:o.jsx(F,{variant:"tiny",className:"line-clamp-2",children:t.name})})]}),n?o.jsx("div",{className:"relative -my-1 -mr-1 size-[60px] shrink-0",children:o.jsx(ns,{includeLightBoxModal:!1,alt:t.name,containerClassName:"w-full h-full",imageClassName:"object-cover object-center w-full h-full  rounded-md",src:n})}):null]})});E1e.displayName="CitationTrendingCard";var $6={exports:{}},V6,bJ;function Rpt(){if(bJ)return V6;bJ=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return V6=e,V6}var W6,_J;function Ppt(){if(_J)return W6;_J=1;var e=Rpt();function t(){}function n(){}return n.resetWarningCache=t,W6=function(){function r(i,l,c,u,f,m){if(m!==e){var p=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw p.name="Invariant Violation",p}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},W6}var wJ;function YB(){return wJ||(wJ=1,$6.exports=Ppt()()),$6.exports}var Lpt=YB();const Fe=Qo(Lpt);var H6,CJ;function Opt(){return CJ||(CJ=1,H6=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,s,a;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(s=r;s--!==0;)if(!e(t[s],n[s]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),r=a.length,r!==Object.keys(n).length)return!1;for(s=r;s--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[s]))return!1;for(s=r;s--!==0;){var i=a[s];if(!e(t[i],n[i]))return!1}return!0}return t!==t&&n!==n}),H6}var Dpt=Opt();const Fpt=Qo(Dpt);var OC={exports:{}},z6,SJ;function Upt(){if(SJ)return z6;SJ=1;var e;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/return e=function(){var t={},n={};return t.on=function(r,s){var a={name:r,handler:s};return n[r]=n[r]||[],n[r].unshift(a),a},t.off=function(r){var s=n[r.name].indexOf(r);s!==-1&&n[r.name].splice(s,1)},t.trigger=function(r,s){var a=n[r],i;if(a)for(i=a.length;i--;)a[i].handler(s)},t},z6=e,z6}var DC={exports:{}},G6,EJ;function Bpt(){if(EJ)return G6;EJ=1,G6=function(s,a,i){var l=document.head||document.getElementsByTagName("head")[0],c=document.createElement("script");typeof a=="function"&&(i=a,a={}),a=a||{},i=i||function(){},c.type=a.type||"text/javascript",c.charset=a.charset||"utf8",c.async="async"in a?!!a.async:!0,c.src=s,a.attrs&&e(c,a.attrs),a.text&&(c.text=""+a.text);var u="onload"in c?t:n;u(c,i),c.onload||t(c,i),l.appendChild(c)};function e(r,s){for(var a in s)r.setAttribute(a,s[a])}function t(r,s){r.onload=function(){this.onerror=this.onload=null,s(null,r)},r.onerror=function(){this.onerror=this.onload=null,s(new Error("Failed to load "+this.src),r)}}function n(r,s){r.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,s(null,r))}}return G6}var MJ;function $pt(){return MJ||(MJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Bpt(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default=function(a){var i=new Promise(function(l){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){l(window.YT);return}else{var c=window.location.protocol==="http:"?"http:":"https:";(0,r.default)(c+"//www.youtube.com/iframe_api",function(f){f&&a.trigger("error",f)})}var u=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){u&&u(),l(window.YT)}});return i},e.exports=t.default}(DC,DC.exports)),DC.exports}var FC={exports:{}},UC={exports:{}},BC={exports:{}},q6,kJ;function Vpt(){if(kJ)return q6;kJ=1;var e=1e3,t=e*60,n=t*60,r=n*24,s=r*365.25;q6=function(u,f){f=f||{};var m=typeof u;if(m==="string"&&u.length>0)return a(u);if(m==="number"&&isNaN(u)===!1)return f.long?l(u):i(u);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(u))};function a(u){if(u=String(u),!(u.length>100)){var f=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(u);if(f){var m=parseFloat(f[1]),p=(f[2]||"ms").toLowerCase();switch(p){case"years":case"year":case"yrs":case"yr":case"y":return m*s;case"days":case"day":case"d":return m*r;case"hours":case"hour":case"hrs":case"hr":case"h":return m*n;case"minutes":case"minute":case"mins":case"min":case"m":return m*t;case"seconds":case"second":case"secs":case"sec":case"s":return m*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return m;default:return}}}}function i(u){return u>=r?Math.round(u/r)+"d":u>=n?Math.round(u/n)+"h":u>=t?Math.round(u/t)+"m":u>=e?Math.round(u/e)+"s":u+"ms"}function l(u){return c(u,r,"day")||c(u,n,"hour")||c(u,t,"minute")||c(u,e,"second")||u+" ms"}function c(u,f,m){if(!(u<f))return u<f*1.5?Math.floor(u/f)+" "+m:Math.ceil(u/f)+" "+m+"s"}return q6}var TJ;function Wpt(){return TJ||(TJ=1,function(e,t){t=e.exports=s.debug=s.default=s,t.coerce=c,t.disable=i,t.enable=a,t.enabled=l,t.humanize=Vpt(),t.names=[],t.skips=[],t.formatters={};var n;function r(u){var f=0,m;for(m in u)f=(f<<5)-f+u.charCodeAt(m),f|=0;return t.colors[Math.abs(f)%t.colors.length]}function s(u){function f(){if(f.enabled){var m=f,p=+new Date,h=p-(n||p);m.diff=h,m.prev=n,m.curr=p,n=p;for(var g=new Array(arguments.length),y=0;y<g.length;y++)g[y]=arguments[y];g[0]=t.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var x=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(b,_){if(b==="%%")return b;x++;var w=t.formatters[_];if(typeof w=="function"){var C=g[x];b=w.call(m,C),g.splice(x,1),x--}return b}),t.formatArgs.call(m,g);var v=f.log||t.log||console.log.bind(console);v.apply(m,g)}}return f.namespace=u,f.enabled=t.enabled(u),f.useColors=t.useColors(),f.color=r(u),typeof t.init=="function"&&t.init(f),f}function a(u){t.save(u),t.names=[],t.skips=[];for(var f=(typeof u=="string"?u:"").split(/[\s,]+/),m=f.length,p=0;p<m;p++)f[p]&&(u=f[p].replace(/\*/g,".*?"),u[0]==="-"?t.skips.push(new RegExp("^"+u.substr(1)+"$")):t.names.push(new RegExp("^"+u+"$")))}function i(){t.enable("")}function l(u){var f,m;for(f=0,m=t.skips.length;f<m;f++)if(t.skips[f].test(u))return!1;for(f=0,m=t.names.length;f<m;f++)if(t.names[f].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}}(BC,BC.exports)),BC.exports}var NJ;function Hpt(){return NJ||(NJ=1,function(e,t){var n={};t=e.exports=Wpt(),t.log=a,t.formatArgs=s,t.save=i,t.load=l,t.useColors=r,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:c(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function r(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(u){try{return JSON.stringify(u)}catch(f){return"[UnexpectedJSONParseError]: "+f.message}};function s(u){var f=this.useColors;if(u[0]=(f?"%c":"")+this.namespace+(f?" %c":" ")+u[0]+(f?"%c ":" ")+"+"+t.humanize(this.diff),!!f){var m="color: "+this.color;u.splice(1,0,m,"color: inherit");var p=0,h=0;u[0].replace(/%[a-zA-Z%]/g,function(g){g!=="%%"&&(p++,g==="%c"&&(h=p))}),u.splice(h,0,m)}}function a(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(u){try{u==null?t.storage.removeItem("debug"):t.storage.debug=u}catch{}}function l(){var u;try{u=t.storage.debug}catch{}return!u&&typeof process<"u"&&"env"in process&&(u=n.DEBUG),u}t.enable(l());function c(){try{return window.localStorage}catch{}}}(UC,UC.exports)),UC.exports}var $C={exports:{}},jJ;function zpt(){return jJ||(jJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default}($C,$C.exports)),$C.exports}var VC={exports:{}},AJ;function Gpt(){return AJ||(AJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default}(VC,VC.exports)),VC.exports}var WC={exports:{}},HC={exports:{}},IJ;function qpt(){return IJ||(IJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default}(HC,HC.exports)),HC.exports}var RJ;function Kpt(){return RJ||(RJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=qpt(),r=s(n);function s(a){return a&&a.__esModule?a:{default:a}}t.default={pauseVideo:{acceptableStates:[r.default.ENDED,r.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[r.default.ENDED,r.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[r.default.ENDED,r.default.PLAYING,r.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default}(WC,WC.exports)),WC.exports}var PJ;function Ypt(){return PJ||(PJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=Hpt(),r=f(n),s=zpt(),a=f(s),i=Gpt(),l=f(i),c=Kpt(),u=f(c);function f(h){return h&&h.__esModule?h:{default:h}}var m=(0,r.default)("youtube-player"),p={};p.proxyEvents=function(h){var g={},y=function(E){var k="on"+E.slice(0,1).toUpperCase()+E.slice(1);g[k]=function(M){m('event "%s"',k,M),h.trigger(E,M)}},x=!0,v=!1,b=void 0;try{for(var _=l.default[Symbol.iterator](),w;!(x=(w=_.next()).done);x=!0){var C=w.value;y(C)}}catch(S){v=!0,b=S}finally{try{!x&&_.return&&_.return()}finally{if(v)throw b}}return g},p.promisifyPlayer=function(h){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,y={},x=function(k){g&&u.default[k]?y[k]=function(){for(var M=arguments.length,j=Array(M),R=0;R<M;R++)j[R]=arguments[R];return h.then(function(O){var D=u.default[k],P=O.getPlayerState(),A=O[k].apply(O,j);return D.stateChangeRequired||Array.isArray(D.acceptableStates)&&D.acceptableStates.indexOf(P)===-1?new Promise(function(T){var N=function L(){var U=O.getPlayerState(),$=void 0;typeof D.timeout=="number"&&($=setTimeout(function(){O.removeEventListener("onStateChange",L),T()},D.timeout)),Array.isArray(D.acceptableStates)&&D.acceptableStates.indexOf(U)!==-1&&(O.removeEventListener("onStateChange",L),clearTimeout($),T())};O.addEventListener("onStateChange",N)}).then(function(){return A}):A})}:y[k]=function(){for(var M=arguments.length,j=Array(M),R=0;R<M;R++)j[R]=arguments[R];return h.then(function(O){return O[k].apply(O,j)})}},v=!0,b=!1,_=void 0;try{for(var w=a.default[Symbol.iterator](),C;!(v=(C=w.next()).done);v=!0){var S=C.value;x(S)}}catch(E){b=!0,_=E}finally{try{!v&&w.return&&w.return()}finally{if(b)throw _}}return y},t.default=p,e.exports=t.default}(FC,FC.exports)),FC.exports}var LJ;function Qpt(){return LJ||(LJ=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},r=Upt(),s=u(r),a=$pt(),i=u(a),l=Ypt(),c=u(l);function u(m){return m&&m.__esModule?m:{default:m}}var f=void 0;t.default=function(m){var p=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,g=(0,s.default)();if(f||(f=(0,i.default)(g)),p.events)throw new Error("Event handlers cannot be overwritten.");if(typeof m=="string"&&!document.getElementById(m))throw new Error('Element "'+m+'" does not exist.');p.events=c.default.proxyEvents(g);var y=new Promise(function(v){if((typeof m>"u"?"undefined":n(m))==="object"&&m.playVideo instanceof Function){var b=m;v(b)}else f.then(function(_){var w=new _.Player(m,p);return g.on("ready",function(){v(w)}),null})}),x=c.default.promisifyPlayer(y,h);return x.on=g.on,x.off=g.off,x},e.exports=t.default}(OC,OC.exports)),OC.exports}var Xpt=Qpt();const Zpt=Qo(Xpt);var Jpt=Object.defineProperty,eht=Object.defineProperties,tht=Object.getOwnPropertyDescriptors,OJ=Object.getOwnPropertySymbols,nht=Object.prototype.hasOwnProperty,rht=Object.prototype.propertyIsEnumerable,DJ=(e,t,n)=>t in e?Jpt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,P8=(e,t)=>{for(var n in t||(t={}))nht.call(t,n)&&DJ(e,n,t[n]);if(OJ)for(var n of OJ(t))rht.call(t,n)&&DJ(e,n,t[n]);return e},L8=(e,t)=>eht(e,tht(t)),sht=(e,t,n)=>new Promise((r,s)=>{var a=c=>{try{l(n.next(c))}catch(u){s(u)}},i=c=>{try{l(n.throw(c))}catch(u){s(u)}},l=c=>c.done?r(c.value):Promise.resolve(c.value).then(a,i);l((n=n.apply(e,t)).next())});function aht(e,t){var n,r;if(e.videoId!==t.videoId)return!0;const s=((n=e.opts)==null?void 0:n.playerVars)||{},a=((r=t.opts)==null?void 0:r.playerVars)||{};return s.start!==a.start||s.end!==a.end}function FJ(e={}){return L8(P8({},e),{height:0,width:0,playerVars:L8(P8({},e.playerVars),{autoplay:0,start:0,end:0})})}function oht(e,t){return e.videoId!==t.videoId||!Fpt(FJ(e.opts),FJ(t.opts))}function iht(e,t){var n,r,s,a;return e.id!==t.id||e.className!==t.className||((n=e.opts)==null?void 0:n.width)!==((r=t.opts)==null?void 0:r.width)||((s=e.opts)==null?void 0:s.height)!==((a=t.opts)==null?void 0:a.height)||e.iframeClassName!==t.iframeClassName||e.title!==t.title}var lht={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},cht={videoId:Fe.string,id:Fe.string,className:Fe.string,iframeClassName:Fe.string,style:Fe.object,title:Fe.string,loading:Fe.oneOf(["lazy","eager"]),opts:Fe.objectOf(Fe.any),onReady:Fe.func,onError:Fe.func,onPlay:Fe.func,onPause:Fe.func,onEnd:Fe.func,onStateChange:Fe.func,onPlaybackRateChange:Fe.func,onPlaybackQualityChange:Fe.func},h2=class extends I.Component{constructor(e){super(e),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var n,r;return(r=(n=this.props).onReady)==null?void 0:r.call(n,t)},this.onPlayerError=t=>{var n,r;return(r=(n=this.props).onError)==null?void 0:r.call(n,t)},this.onPlayerStateChange=t=>{var n,r,s,a,i,l,c,u;switch((r=(n=this.props).onStateChange)==null||r.call(n,t),t.data){case h2.PlayerState.ENDED:(a=(s=this.props).onEnd)==null||a.call(s,t);break;case h2.PlayerState.PLAYING:(l=(i=this.props).onPlay)==null||l.call(i,t);break;case h2.PlayerState.PAUSED:(u=(c=this.props).onPause)==null||u.call(c,t);break}},this.onPlayerPlaybackRateChange=t=>{var n,r;return(r=(n=this.props).onPlaybackRateChange)==null?void 0:r.call(n,t)},this.onPlayerPlaybackQualityChange=t=>{var n,r;return(r=(n=this.props).onPlaybackQualityChange)==null?void 0:r.call(n,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=L8(P8({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=Zpt(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(n=>{this.props.title&&n.setAttribute("title",this.props.title),this.props.loading&&n.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(n=>{this.props.id?n.setAttribute("id",this.props.id):n.removeAttribute("id"),this.props.iframeClassName?n.setAttribute("class",this.props.iframeClassName):n.removeAttribute("class"),this.props.opts&&this.props.opts.width?n.setAttribute("width",this.props.opts.width.toString()):n.removeAttribute("width"),this.props.opts&&this.props.opts.height?n.setAttribute("height",this.props.opts.height.toString()):n.removeAttribute("height"),this.props.title?n.setAttribute("title",this.props.title):n.setAttribute("title","YouTube video player"),this.props.loading?n.setAttribute("loading",this.props.loading):n.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,n,r,s;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let a=!1;const i={videoId:this.props.videoId};if((n=this.props.opts)!=null&&n.playerVars&&(a=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(i.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(i.endSeconds=this.props.opts.playerVars.end)),a){(r=this.internalPlayer)==null||r.loadVideoById(i);return}(s=this.internalPlayer)==null||s.cueVideoById(i)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(e){return sht(this,null,function*(){iht(e,this.props)&&this.updatePlayer(),oht(e,this.props)&&(yield this.resetPlayer()),aht(e,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return I.createElement("div",{className:this.props.className,style:this.props.style},I.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},A3=h2;A3.propTypes=cht;A3.defaultProps=lht;A3.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var UJ=A3;const BJ={fadeIn:{opacity:1},fadeOut:{opacity:0}},uht={width:"100%",height:"100%",playerVars:{autoplay:1,color:"white",playsinline:1}},D_=I.memo(e=>{const{isOpen:t,name:n,setisOpen:r,url:s}=e,a=s?sx(s):void 0,i=d.useRef(void 0),[l,c]=d.useState(!1),u=d.useCallback(p=>{i.current=p.target,c(!0)},[i]),f=d.useCallback(p=>{if(i.current)switch(p.key){case" ":{i.current.getPlayerState()===UJ.PlayerState.PLAYING?i.current.pauseVideo():i.current.playVideo();break}case"ArrowRight":{i.current.seekTo(i.current.getCurrentTime()+5,!0);break}case"ArrowLeft":{i.current.seekTo(i.current.getCurrentTime()-5,!0);break}}},[i]);d.useEffect(()=>(t?window.addEventListener("keydown",f):window.removeEventListener("keydown",f),()=>{window.removeEventListener("keydown",f)}),[f,t]);const m=d.useCallback(p=>{r(p)},[r]);return a?o.jsx(kU,{open:t,onOpenChange:m,children:o.jsx(Q5,{className:"z-10",asChild:!0,children:o.jsxs(ve.div,{className:"bg-backdrop dark fixed inset-0 flex items-center justify-center backdrop-blur-md",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",variants:BJ,transition:{duration:.2},children:[o.jsx(JXe,{asChild:!0,children:o.jsx(me,{extraCSS:"!fixed top-md right-md shadow-sm",icon:kt,pill:!0,size:"small",variant:"common"})}),o.jsxs(tx,{className:"grid outline-none","aria-describedby":void 0,children:[o.jsx(l_,{children:o.jsx(X5,{children:n})}),o.jsxs(Ye,{children:[!l&&o.jsx(ve.div,{className:"grid place-items-center [grid-area:1/-1]",initial:"fadeOut",animate:"fadeIn",exit:"fadeOut",transition:{duration:.2},variants:BJ,children:o.jsx(Fr,{size:24})},"youtube-player-loading"),o.jsx(ve.div,{className:B("aspect-video overflow-hidden rounded-2xl shadow-lg [grid-area:1/-1] *:size-full","w-[calc(100dvw-(2*var(--size-md)))] sm:w-[75vw]"),initial:{opacity:0},animate:{opacity:l?1:0},transition:{duration:.2},children:o.jsx(UJ,{onReady:u,opts:uht,title:n,videoId:a})},"youtube-player-content")]})]})]},"youtube-player-overlay")})}):null});D_.displayName="YoutubeVideoPlayer";const QB=I.memo(({result:e,idx:t,isSelected:n,testId:r,additionalMetadata:s,isTrendingLayout:a=!1,trackEvent:i,downloadCitation:l,getImageUrl:c,variant:u,isSidecar:f,onClick:m,useLightBoxModal:p=!0})=>{const h=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":"sourceCard";d.useEffect(()=>{const D=setTimeout(()=>i?.("source card viewed",{citation_url:e.url,position:t,title:e.name,source:h}),100);return()=>clearTimeout(D)},[i,e.name,e.url,t,h]);const g=e.url,[y,x]=d.useState(()=>!e.is_memory&&SU(e.url)?e.url:null),[v,b]=d.useState(!1),_=d.useMemo(()=>g&&!f&&sx(g),[g,f]),[w,C]=d.useState(!1),S=Bge(e),E=lo(e.url),k=!_&&!e.is_attachment&&!E,M=a&&e.meta_data?.client==="trending",j=d.useMemo(()=>M?o.jsx(E1e,{result:e,authors:e.meta_data?.authors,imageURL:e.meta_data?.images?.[0]}):E&&y?o.jsx(S1e,{result:e,imageURL:y,useLightBoxModal:p}):E&&!y?o.jsx(Si,{blockCount:1,size:"large"}):o.jsx(C1e,{result:e,variant:u,additionalMetadata:s,isSelected:n}),[M,E,y,e,p,u,s,n]),R=d.useCallback((D,P)=>{b(P),x(D)},[]),O=d.useRef(null);return d.useEffect(()=>{const D=new IntersectionObserver(A=>{A.forEach(T=>{T.isIntersecting&&E&&y===null&&!v&&c?.(e,R)})},{threshold:.1}),P=O.current;return P&&E&&D.observe(P),()=>{P&&E&&D.unobserve(P)}},[O,g,c,e,y,R,v,E]),o.jsxs(qB,{result:e,trackEvent:i,children:[o.jsx("div",{ref:O,onClick:D=>{const P=typeof e.meta_data?.quoteBeforeContext=="string"?e.meta_data?.quoteBeforeContext:"",A=typeof e.meta_data?.quoteEmphasisText=="string"?e.meta_data?.quoteEmphasisText:"",T=typeof e.meta_data?.quoteAfterContext=="string"?e.meta_data?.quoteAfterContext:"",N=P.length>0||A.length>0||T.length>0;_&&!w?C(!0):l&&!E&&!S?(D.preventDefault(),l(e)):m?.(D),i?.("click citation",{source:h,citation_url:g}),N&&i?.("click check sources citation",{source:h,citation_url:g,quoteBeforeContext:P,quoteEmphasisText:A,quoteAfterContext:T})},className:B("group relative flex w-full items-stretch",{"h-full":u==="grid","cursor-pointer":!!l||!!_||!!m}),"data-test-id":r,children:o.jsx(z,{variant:"subtler",bgHover:k||_?"subtle":void 0,className:B("flex w-full rounded-lg",{"bg-super/10 ring-super/80 hover:!bg-super/10 dark:bg-super/20 dark:ring-super/80 dark:hover:!bg-super/20 ring-1":n}),children:j},e.name)}),_&&g&&e.name&&o.jsx(D_,{isOpen:w,name:e.name,url:g,setisOpen:C})]})});QB.displayName="CitationCard";const dht=he(async()=>{const{MarkSpinner:e}=await X(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>jTe);return{MarkSpinner:t}},void 0);return{default:e}}),M1e=I.memo(({entryUUID:e,frontendContextUUID:t,contextUUID:n,webResults:r,isOpen:s,onClose:a,extendedBeforeContext:i,beforeContext:l,selectedText:c,afterContext:u,state:f})=>{const{$t:m}=Z(),{isMobileStyle:p}=xe(),{trackEvent:h}=Te(),g=d.useCallback((b,_)=>{h(b,{entryUUID:e,frontendContextUUID:t,contextUUID:n,selectedTextExtendedBeforeContext:i,selectedTextBeforeContext:l,selectedText:c,selectedTextAfterContext:u,..._})},[e,t,n,i,l,c,u,h]),y=r?.length??0,x=f==="completed"?y===0?m({defaultMessage:"No sources",id:"tN3HZvczgp"}):m({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:y}):m(f==="loading"?{defaultMessage:"Checking...",id:"1SvspNS1us"}:{defaultMessage:"Error",id:"KN7zKn8z4F"}),v=d.useMemo(()=>o.jsxs("div",{className:"gap-sm md:gap-md flex items-center",children:[o.jsx(dht,{size:32,shouldAnimate:f==="loading"}),o.jsx(F,{variant:"page-title",className:B("mr-lg line-clamp-1 md:line-clamp-2"),children:x})]}),[f,x]);return o.jsxs(qt,{isOpen:s,variant:p?"bottom-left-sheet":"side-sheet",onClose:a,titleContent:v,children:[o.jsxs(F,{children:[o.jsx("span",{children:l}),o.jsx("span",{className:"bg-super/30 font-bold",children:c}),o.jsx("span",{children:u})]}),o.jsx("hr",{className:"border-subtlest my-4 w-full border-t"}),o.jsx(z,{className:"gap-md flex h-full flex-col items-start",children:r?.map((b,_)=>o.jsx("div",{className:"gap-sm flex w-full min-w-0 flex-row-reverse",children:o.jsx(QB,{result:b,idx:_,isSelected:!1,variant:"modal",trackEvent:g})},_))})]})});M1e.displayName="CheckSourcesModal";const Oon=3,fht=120,mht=1.5,Don=2,Fon=4;function k1e(e){return"article_info"in e}const Uon=(e,t)=>({backend_uuid:"",context_uuid:"",frontend_context_uuid:"",knowledge_cards:void 0,widget_data:void 0,query_str:e,status:Qn.STAGED.toLowerCase(),uuid:t,article_info:{title:e,summary:"",has_changed_title:!1,layout:"text",format:"paragraph",length:"concise",suggested_sections:[],user_selected_media_items:[],audience:"anyone",read_time:0,hero_offset:-1,emphasize_sources:!1,is_live:!1,is_auto_generated:!1},prompt_source:"page_suggestion",final:!1,mode:ag.ARTICLE.toLowerCase(),sources:{sources:[]},should_index:!1,updated_datetime:void 0,thread_url_slug:void 0,expiry_time:null,thread_access:0,privacy_state:$g.NONE}),Bon=e=>e?e.image_width&&e.image_height?e.image_width<fht?!1:e.image_width>=mht*e.image_height:!0:!1,$on=(e,t,n,r)=>{const s=[...e],a=t.find(i=>i.image===n);return a&&r<s.length&&s.splice(r,1,a),s},Von=(e,t,n)=>{const r=[...e],s=r.findIndex(a=>a.image===t);if(s!==-1&&n<r.length){const a=r[n],i=r[s];a&&i&&(r[n]=i,r[s]=a)}return r},vx=()=>{const{session:e}=mt(),t=dn(),{firstResult:{backend_uuid:n,context_uuid:r}={}}=Ft(),s=d.useCallback((a,i)=>{Ji({name:a,data:{entryUUID:n,threadUUID:r,...i,isPerplexityBrowser:t},session:e??void 0})},[n,r,t,e]);return d.useMemo(()=>({trackEvent:s}),[s])},F_=I.memo(({checked:e,toggleChecked:t,className:n="",variant:r="default",unselectedCheckboxClassName:s,...a})=>o.jsx(aB,{className:B("inline-flex cursor-pointer items-center justify-center duration-150",{"size-[24px]":r==="large","size-[18px]":r==="default","size-[14px]":r==="small"},n),checked:e,onCheckedChange:t,...a,children:o.jsx(z,{variant:e?"super":"background",noBorder:!0,className:B("border-subtle inline-flex size-full items-center justify-center rounded border",{"!border-super bg-super":e},!e&&s),children:o.jsx(oB,{children:o.jsx(Ye,{children:e&&o.jsx(ve.div,{initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.6},transition:{type:"spring",bounce:.2,duration:.2},children:o.jsx(de,{icon:dr,size:r==="small"?"xs":"sm",className:"text-inverse"})})})})})}));F_.displayName="Checkbox";const T1e=I.memo(({onSelect:e,isSelected:t,result:n,idx:r})=>{const s=i=>{e?.(i)},{trackEvent:a}=Te();return o.jsxs("div",{className:"gap-sm flex w-full flex-row-reverse",children:[o.jsx("div",{className:"w-full min-w-0",children:o.jsx(QB,{result:n,idx:r,isSelected:t,variant:"modal",trackEvent:a})}),e&&o.jsx("div",{className:"mt-[6px] shrink-0",children:o.jsx(F_,{checked:t,toggleChecked:s.bind(null,n.url)})})]})});T1e.displayName="ManageCitationRow";const XB=I.memo(({webResults:e,isOpen:t,submit:n,onClose:r,entry:s})=>{const{$t:a}=Z(),{isMobileStyle:i}=xe(),[l,c]=d.useState([]),{trackEvent:u}=vx(),f=b=>{c(_=>_.includes(b)?_.filter(w=>w!==b):_.concat(b))},m=d.useCallback(()=>{c([]),r()},[c,r]),p=d.useCallback(b=>{u("click apply curation",{toDelete:b,entryUUID:s?.backend_uuid??void 0}),n?.(b)},[u,s,n]),h=d.useCallback(()=>{l.length>0&&p([...l]),m()},[l,m,p]),g=d.useMemo(()=>l.length>0?[{text:l.length===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {Remove # source} other {Remove # sources}}",id:"aRfiMe0V3R"},{sources:l.length}),disabled:l.length===0,onClick:h}]:[],[l.length,a,h]),y=s?.query_str??"";let x=y?qd(y).actualQuery:"";s&&k1e(s)&&s.article_info?.title&&(x=s.article_info.title);const v=e?.length??0;return o.jsx(qt,{actionList:g,title:v===0?a({defaultMessage:"No sources",id:"tN3HZvczgp"}):a({defaultMessage:"{sources, plural, one {# source} other {# sources}}",id:"oWRBjE1HK2"},{sources:v}),subtitle:x??void 0,isOpen:t,variant:i?"bottom-left-sheet":"side-sheet",onClose:m,icon:f1,children:o.jsx(z,{className:"gap-md flex h-full flex-col items-start",children:e?.map((b,_)=>o.jsx(T1e,{onSelect:s&&n?f:void 0,isSelected:l.includes(b.url),idx:_,result:b},b.url))})})});XB.displayName="CitationListModal";const pht=({children:e,initial:t=!1,mode:n="wait",className:r,transition:s,supportZeroHeight:a=!0,...i})=>{const[l,{height:c}]=Ho(),u=Os(),f=a||c>0?c:"auto";return o.jsx(ve.div,{animate:{height:u?f:"auto"},className:r,transition:s,...i,children:o.jsx("div",{ref:l,children:o.jsx(Ye,{mode:n,initial:t,children:e})})})},an=xo(.16,1,.3,1),Won=xo(.7,0,.84,0),hht=({children:e,initial:t={opacity:0},animate:n={opacity:1},exit:r,transition:s,className:a,style:i,ref:l})=>o.jsx(ve.div,{initial:t,animate:n,exit:r??t,transition:s,ref:l,className:a,style:i,children:e}),na=pht,Zr=hht,Wl={outOfDate:J({defaultMessage:"Out of date",id:"osuyeDna3D"}),inaccurate:J({defaultMessage:"Inaccurate",id:"nzRZzFiqUd"}),irrelevant:J({defaultMessage:"Irrelevant",id:"yi63oZJMHr"}),upToDate:J({defaultMessage:"Up to date",id:"aOfyGCCmT0"}),accurate:J({defaultMessage:"Accurate",id:"wrxp13nnhA"}),relevant:J({defaultMessage:"Relevant",id:"XpZsjM22T8"}),successToast:J({defaultMessage:"Thank you for your detailed feedback!",id:"ZrHT928df5"}),positivePrompt:J({defaultMessage:"What did you like about this memory? (optional)",id:"xNH2PHiuYB"}),negativePrompt:J({defaultMessage:"What didn't you like about this memory? (optional)",id:"gEOv/lEKfP"}),placeholder:J({defaultMessage:"Add specific details",id:"HY/Q6ifj24"})},ght={out_of_date:Wl.outOfDate,inaccurate:Wl.inaccurate,irrelevant:Wl.irrelevant},yht={up_to_date:Wl.upToDate,accurate:Wl.accurate,relevant:Wl.relevant},N1e=I.memo(({type:e,message:t,onFeedbackClick:n})=>{const s=Z().formatMessage,a=d.useCallback(()=>{n(e)},[e,n]);return o.jsx(me,{size:"small",variant:"common",text:s(t),onClick:a,extraCSS:"w-full justify-start text-left"})});N1e.displayName="FeedbackOption";const j1e=I.memo(({isPositive:e,onFeedbackClick:t,onFreeformVisible:n})=>{const r=e?yht:ght,s=d.useMemo(()=>Object.entries(r).map(([a,i])=>o.jsx(N1e,{type:a,message:i,onFeedbackClick:t},a)),[r,t]);return o.jsxs("div",{className:"gap-sm flex flex-col",children:[s,o.jsx(me,{size:"small",variant:"common",text:"Other...",onClick:n,extraCSS:"w-full justify-start text-left"})]})});j1e.displayName="FeedbackOptions";const A1e=I.memo(({onSubmit:e,feedbackState:t,setFeedbackState:n,onDismiss:r,isPositive:s})=>{const{deprecatedOpenToast:a}=fn(),l=Z().formatMessage,{isMobileStyle:c,isMobileUserAgent:u}=xe(),[f,m]=d.useState(!1),p=d.useCallback(()=>{a(l(Wl.successToast),"success",2)},[a,l]),h=d.useCallback(C=>{p(),e(C)},[p,e]),g=d.useCallback(()=>{t&&h(t)},[t,h]),y=d.useCallback(C=>{const S={type:C};n(S),h(S)},[n,h]),x=d.useCallback(()=>{m(!1)},[m]),v=d.useCallback(()=>{m(!0)},[m]),b=d.useCallback(C=>{n({type:"comment",comment:C})},[n]),_=d.useCallback(C=>{ga.isEnterKeyWithoutShift(C)&&g()},[g]),w=d.useMemo(()=>[{type:"button",buttonProps:{variant:"primary",size:"small",icon:IO,onClick:g,disabled:!t?.comment,extraCSS:"aspect-square min-h-md h-md w-md",pill:!0}}],[g,t?.comment]);return o.jsx("div",{className:"mt-lg animate-in fade-in w-full duration-500",children:o.jsxs(z,{className:"gap-sm p-md pt-sm relative flex w-full flex-col rounded-md border",children:[o.jsx("div",{className:B("absolute bottom-full flex size-0 items-end",s?"left-2":"left-10"),children:o.jsx(z,{variant:"background",className:"size-3 shrink-0 origin-bottom-left rotate-45 border border-b-0 border-r-0"})}),o.jsxs("div",{className:B("ease-outExpo flex items-center pr-8 duration-150",{"pl-4":f}),children:[o.jsx(Me,{size:"tiny",onClick:x,pill:!0,icon:NO,extraCSS:B("!absolute duration-150",{"opacity-0 pointer-events-none":!f,"top-xs left-xs":f})}),o.jsx(F,{variant:"small",color:"light",children:l(s?Wl.positivePrompt:Wl.negativePrompt)})]}),o.jsx(na,{mode:"popLayout",transition:{duration:.2,ease:an},children:o.jsx(Zr,{initial:{opacity:0,x:f?10:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:f?-10:10},transition:{duration:.2,ease:an},children:f?o.jsx("div",{className:"gap-x-sm flex items-end",children:o.jsx("div",{className:"flex-1",children:o.jsx(Wa,{className:"pr-md w-full",placeholder:l(Wl.placeholder),value:t?.comment||"",minRows:3,isOptional:!0,onChange:b,onKeyDown:_,autoFocus:!0,isMobileStyle:c,isMobileUserAgent:u,rightItems:w})})}):o.jsx(j1e,{isPositive:s,onFeedbackClick:y,onFreeformVisible:v})},f?"visible":"hidden")}),o.jsx(Me,{size:"tiny",onClick:r,pill:!0,icon:kt,extraCSS:"!absolute top-xs right-xs"})]})})});A1e.displayName="MemoryFeedbackInput";const xht=20,vht=async({queryParams:e,headers:t={},reason:n})=>{const r="getMemories";try{const s=await re.GET("/rest/memories/list",n,{params:{query:{limit:e.limit,offset:e.offset,query:e.query},timeoutMs:Ht.MEDIUM},headers:t});return s.data?{memories:s.data.memories,totalCount:s.data.total_memory_count}:{memories:[],totalCount:0}}catch(s){return ne.log(`Error in ${r}:`,s),{memories:[],totalCount:0}}},bht=(e,t)=>{const n=t.reduce((r,s)=>r+s.memories.length,0);if(n<e.totalCount)return n},Hon=({initialPageParam:e=0,searchQuery:t,reason:n})=>Lu({queryKey:CF(t),queryFn:async({pageParam:r})=>vht({queryParams:{limit:xht,offset:r??0,query:t},reason:n}),getNextPageParam:bht,initialPageParam:e,refetchOnMount:"always",placeholderData:r=>r}),_ht=async({memoryKey:e,reason:t})=>{try{return(await re.DELETE("/rest/memories/delete",t,{params:{query:{memory_key:e}}})).data}catch(n){ne.log("Error in deleteMemory:",n);return}},wht=({reason:e})=>{const t=ot();return dt({mutationFn:n=>_ht({memoryKey:n,reason:e}),onMutate:async n=>{await t.cancelQueries({queryKey:["memories"]});const r=t.getQueryData(["memories"]);try{t.setQueryData(["memories"],s=>{if(!s)return s;const a=s.pages.map(i=>({totalCount:i.totalCount-1,memories:i.memories.filter(l=>l.memory_key!==n)}));return{...s,pages:a}})}catch(s){ne.log(`Error in onMutate deleteMemories (${CF()}):`,s)}return{previousData:r}},onError:(n,r,s)=>{s?.previousData&&t.setQueryData(["memories"],s.previousData)},onSettled:()=>{t.invalidateQueries({queryKey:["memories"]})}})},Cht=async({reason:e})=>{try{return(await re.DELETE("/rest/memories/delete-all",e)).data}catch(t){ne.log("Error in deleteAllMemories:",t);return}},Sht=()=>{const e=ot();return dt({mutationFn:Cht,onMutate:async()=>{await e.cancelQueries({queryKey:["memories"]});const t=e.getQueryData(["memories"]);try{e.setQueryData(["memories"],()=>({pages:[{memories:[],totalCount:0}],pageParams:[0]}))}catch(n){ne.log(`Error in onMutate deleteAllMemories (${CF()}):`,n)}return{previousData:t}},onError:(t,n,r)=>{r?.previousData&&e.setQueryData(["memories"],r.previousData)},onSuccess:()=>{e.invalidateQueries({queryKey:["memories"]})}})},Eht=async({entryUuid:e,shouldForget:t,feedback:n,feedbackEntryUuid:r,reason:s})=>{try{return(await re.POST("/rest/memories/toggle_entry_feedback",s,{params:{query:{entry_uuid:e,should_forget:t===null?void 0:t,feedback:n,feedback_entry_uuid:r}}})).data}catch(a){ne.log("Error in forgetEntry:",a);return}},Mht=({entryUuid:e,reason:t})=>{const n=ot();return dt({mutationFn:({shouldForget:r,feedback:s,feedbackEntryUuid:a})=>Eht({entryUuid:e,shouldForget:r,feedback:s,feedbackEntryUuid:a,reason:t}),onMutate:async({shouldForget:r})=>{await n.cancelQueries({queryKey:xh(e)});const s=n.getQueryData(xh(e));return n.setQueryData(xh(e),r),{previousFeedback:s}},onError:(r,s,a)=>{a?.previousFeedback!==void 0&&n.setQueryData(xh(e),a.previousFeedback)},onSuccess:()=>{n.invalidateQueries({queryKey:xh(e)})}})},kht=async({entryUuid:e,reason:t})=>{try{return(await re.GET("/rest/memories/get_entries",t,{params:{query:{entry_uuid:e}}})).data?.entries?.[0]?.is_thumbs_down}catch(n){ne.log("Error in getEntry:",n);return}},Tht=({entryUuid:e,enabled:t,reason:n})=>Ue({queryKey:xh(e??""),queryFn:()=>e?kht({entryUuid:e,reason:n}):null,enabled:!!e&&t}),Nht=async({memoryKey:e,reason:t})=>{try{return(await re.GET("/rest/memories/get",t,{params:{query:{memory_key:e}}})).data?.memories?.[0]}catch(n){ne.log("Error in getMemoryDetail:",n);return}},zon=({memoryKey:e,enabled:t,reason:n})=>Ue({queryKey:["memory-detail",e],queryFn:()=>e?Nht({memoryKey:e,reason:n}):null,enabled:!!e&&t,retry:2}),I1e=e=>{if(!e)return;const t=e.split("/").filter(Boolean);return t.length>0?t[t.length-1]:void 0},R1e=e=>{const t=e.is_memory?"memory":"conversation_history",n=e.is_memory?e.url:void 0,r=e.is_conversation_history?I1e(e.url):void 0;return{snippet:e.snippet,url:e.url??"",title:e.name,type:t,memoryKey:n,entryUuid:r,timestamp:e.timestamp??""}},P1e=I.memo(({isOpen:e,onClose:t,snippet:n,type:r,url:s,memoryKey:a,entryUuid:i,title:l,timestamp:c})=>{const{formatDate:u}=Z(),f=Ha(),m=r==="conversation_history",p=r==="memory",{trackEvent:h}=Te(),{openStackedModal:g}=xt(),y=d.useCallback(()=>{h("navigated to manage memory",{memory_key:a}),g("memoryListModal",{isMemoryEnabled:!0})},[a,h,g]),x=d.useMemo(()=>o.jsx(F,{variant:"small",children:o.jsx(ie,{defaultMessage:"Manage",id:"0AzlrbMWV9"})}),[]),v=d.useMemo(()=>o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(de,{icon:m?fp:Kl}),o.jsx(F,{variant:"baseSemi",children:m?o.jsx(ie,{defaultMessage:"Library",id:"StcK672jB9"}):o.jsx(ie,{defaultMessage:"Memory",id:"dVx3yznM2C"})})]}),[m]);return o.jsxs(qt,{variant:f?"bottom-sheet":"side-sheet",isOpen:e,onClose:t,modalClassname:"md:!max-w-[400px] md:!min-w-[400px]",modalContentClassname:"justify-between",titleContent:v,children:[o.jsxs(z,{className:"flex size-full flex-col items-start",children:[l&&c&&o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"baseSemi",children:l}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"pb-sm",children:u(c,{dateStyle:"long"})})]}),o.jsxs("div",{className:"inline",children:[o.jsx(F,{variant:"small",className:"inline",children:n}),o.jsx(F,{variant:"smallBold",className:"ml-1 inline",color:"super",children:m&&o.jsx(qe,{href:s,target:"_blank",rel:"noopener",className:"whitespace-nowrap",children:o.jsx(ie,{defaultMessage:"See more",id:"yoLwRWw99S"})})})]}),m&&o.jsx(L1e,{entryUuid:i??"",memoryKey:a??"",type:r})]}),p&&o.jsxs(z,{className:"flex w-full items-center justify-center gap-1",children:[o.jsx(F,{variant:"small",className:"inline",color:"light",children:o.jsx(ie,{defaultMessage:"See all your memories.",id:"h0JAuR900y"})}),o.jsx(Me,{onClick:y,size:"small",variant:"common",noPadding:!0,text:x})]})]})});P1e.displayName="MemorySearchHistoryModal";const L1e=I.memo(({entryUuid:e,memoryKey:t,type:n})=>{const r="feedback-container",{$t:s}=Z(),a=d.useMemo(()=>{if(typeof window>"u")return;const S=I1e(window.location.pathname);if(S)return S.split("-").pop()},[]),{mutate:i}=Mht({entryUuid:e??"",reason:r}),{trackEvent:l}=Te(),{data:c}=Tht({entryUuid:e??"",enabled:!!e&&n==="conversation_history",reason:r}),[u,f]=d.useState(!1),[m,p]=d.useState(!1),[h,g]=d.useState(null),y=d.useMemo(()=>n==="conversation_history"?c:void 0,[n,c]),x=d.useCallback((S,E)=>{n==="conversation_history"&&e&&i({shouldForget:S,feedback:E,feedbackEntryUuid:a})},[n,e,i,a]),v=d.useCallback(S=>{l("memory search history feedback",{type:n,isHelpful:!S,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),x(S),p(!S),f(!0)},[n,e,t,l,x]),b=d.useCallback(()=>{if(y===!1){x(null),f(!1);return}v(!1)},[y,x,v]),_=d.useCallback(()=>{if(y===!0){x(null),f(!1);return}v(!0)},[y,x,v]),w=d.useCallback(S=>{const E=S.type==="comment"?S.comment:S.type;x(!m,E),l("memory search history feedback",{type:n,isHelpful:m,...n==="conversation_history"&&{entry_uuid:e},...n==="memory"&&{memory_key:t}}),f(!1),g(null)},[n,e,t,l,m,x]),C=d.useCallback(()=>{f(!1),g(null)},[]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(Me,{size:"small",icon:Aht(y??null),onClick:b,toolTip:s({defaultMessage:"Helpful",id:"5vwKkgYwrE"}),pill:!0}),o.jsx(Me,{size:"small",icon:jht(y??null),onClick:_,toolTip:s({defaultMessage:"Not helpful",id:"04tuTF23S7"}),pill:!0})]}),y===!0&&o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(ie,{defaultMessage:"This {type} will not be referenced in future searches.",id:"167AKZjMm1",values:{type:n==="memory"?"memory":"entry"}})}),u&&o.jsx(A1e,{onSubmit:w,feedbackState:h,setFeedbackState:g,onDismiss:C,isPositive:m})]})});L1e.displayName="FeedbackContainer";const jht=e=>e===null?eE:e===!0?z7e:eE,Aht=e=>e===null?GR:e===!1?G7e:GR,O1e={linear_alt:{name:"Linear",tagline:J({defaultMessage:"Plan and track projects, issues, and team workflows in Linear",id:"6u9Zf65BGW"}),bullets:[J({defaultMessage:"Search across Linear issues, projects, and teams",id:"MicGE6HssU"}),J({defaultMessage:"Create and update Linear issues and projects",id:"scUqB1LbKr"}),J({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),J({defaultMessage:"Data is retrieved from and written back to Linear whenever you query in Perplexity",id:"b/8mLQxIqE"})],developer:J({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.linear.app",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",footnote:{link:"https://www.perplexity.ai/help-center/en/articles/12167711-linear-connector-for-enterprise-pro",text:J({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},google_drive:{name:"Google Drive",tagline:J({defaultMessage:"Get in-depth answers from your Google Drive content",id:"CDmY5AQsRD"}),bullets:[J({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),J({defaultMessage:"Updates to your Google Drive files are automatically synced to Perplexity",id:"k0B4qzv3NH"}),J({defaultMessage:"File and folder selection is based on your existing Google Drive permissions",id:"J1Fu/3n3pb"})],consumerBullets:[J({defaultMessage:"Attach files from Google Drive to your query",id:"aUk7jts0tb"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://drive.google.com",supportUrl:null,documentationUrl:null,footnote:null},sharepoint:{name:"SharePoint",tagline:J({defaultMessage:"Get in-depth answers from your SharePoint content",id:"H/XGo2cLQi"}),bullets:[J({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),J({defaultMessage:"Updates to your SharePoint files are automatically synced to Perplexity",id:"3asA6JKlOn"}),J({defaultMessage:"File and folder selection is based on your existing SharePoint permissions",id:"m2/iFnRhkg"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://microsoft.sharepoint.com/",supportUrl:null,documentationUrl:null,footnote:null},onedrive:{name:"OneDrive",tagline:J({defaultMessage:"Get in-depth answers from your OneDrive content",id:"6HI2ZlxJGV"}),bullets:[J({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),J({defaultMessage:"Updates to your OneDrive files are automatically synced to Perplexity",id:"gCHhNKes4R"}),J({defaultMessage:"File and folder selection is based on your existing OneDrive permissions",id:"YCVPoXax40"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/onedrive/online-cloud-storage",documentationUrl:null,supportUrl:null,footnote:null},box:{name:"Box",tagline:J({defaultMessage:"Get in-depth answers from your Box content",id:"vj5W7AIDE6"}),bullets:[J({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),J({defaultMessage:"Updates to your Box files are automatically synced to Perplexity",id:"tkl3HRlwOf"}),J({defaultMessage:"File and folder selection is based on your existing Box permissions",id:"LuX1iT7lFa"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.box.com/",documentationUrl:null,supportUrl:null,footnote:null},dropbox:{name:"Dropbox",tagline:J({defaultMessage:"Get in-depth answers from your Dropbox content",id:"+RPvqEE51/"}),bullets:[J({defaultMessage:"Selected files and folders are catalogued for higher accuracy search results",id:"zU56hsbCOC"}),J({defaultMessage:"Updates to your Dropbox files are automatically synced to Perplexity",id:"Qnsbs8527p"}),J({defaultMessage:"File and folder selection is based on your existing Dropbox permissions",id:"kzOZ3ZFcW4"})],consumerBullets:[J({defaultMessage:"Attach files from Dropbox to your query",id:"E/rzAALT5B"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.dropbox.com/",documentationUrl:null,supportUrl:null,footnote:null},notion_mcp:{name:"Notion",tagline:J({defaultMessage:"Search and create content on your Notion pages",id:"rXdfDrSVlj"}),bullets:[J({defaultMessage:"Search across your pages and data ",id:"Ib2j2yH5wv"}),J({defaultMessage:"Create new pages in your teamspace from Perplexity",id:"Ltbp+B60OB"}),J({defaultMessage:"Update your data on existing pages directly from Perplexity",id:"ldpNlZAKLQ"}),J({defaultMessage:"Data is retrieved from and written back to Notion whenever you query in Perplexity",id:"nbLEAiWYzT"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"http://www.notion.so/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167654-notion-connector-for-enterprise-pro",footnote:null},github_mcp_direct:{name:"GitHub",tagline:J({defaultMessage:"Search and manage your GitHub repositories ",id:"4miSrKjLad"}),bullets:[J({defaultMessage:"Search, analyze, and summarize your repositories and issues",id:"hi8CvW/ld8"}),J({defaultMessage:"Create, update, and manage issues and pull requests ",id:"6eZgVvjZEw"}),J({defaultMessage:"Monitor workflows ",id:"EduR5immBI"}),J({defaultMessage:"Search and manage notifications to streamline communication",id:"+zOuCOpAH8"}),J({defaultMessage:"Data is retrieved from and written back to GitHub whenever you query in Perplexity",id:"9EQO9mj0sd"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://github.com/",supportUrl:"https://www.perplexity.ai/help-center/en/articles/12275669-github-connector-for-enterprise",documentationUrl:null,footnote:null},asana_mcp_direct:{name:"Asana",tagline:J({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[J({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),J({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),J({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),J({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12524801-connecting-perplexity-with-asana",footnote:null},asana_mcp_merge:{name:"Asana",tagline:J({defaultMessage:"Plan and track projects, tasks, and team workflows in Asana",id:"9AhVP0Y+6c"}),bullets:[J({defaultMessage:"Search across Asana tasks, projects, and teams",id:"GKC+Sx/2dm"}),J({defaultMessage:"Create and update Asana tasks and projects",id:"TnQ0Far/ZY"}),J({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),J({defaultMessage:"Data is retrieved from and written back to Asana whenever you query in Perplexity",id:"9NNVAEg7U3"})],developer:J({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://asana.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12524801-connecting-perplexity-with-asana",footnote:{link:"https://www.perplexity.ai/help-center/en/articles/12524801-connecting-perplexity-with-asana",text:J({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},atlassian_mcp_direct:{name:"Atlassian",tagline:J({defaultMessage:"Plan and track projects, tasks, and team workflows in Atlassian",id:"OKCrVfJwqD"}),bullets:[J({defaultMessage:"Search across Atlassian tasks, projects, and teams",id:"3UDuuWRtR5"}),J({defaultMessage:"Create and update Atlassian tasks and projects",id:"u+44P4c8w+"}),J({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),J({defaultMessage:"Data is retrieved from and written back to Atlassian whenever you query in Perplexity",id:"7gmOJCXim3"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:null},jira_mcp_merge:{name:"Jira",tagline:J({defaultMessage:"Plan and track projects, tasks, and team workflows in Jira",id:"DBNOet3M55"}),bullets:[J({defaultMessage:"Search across Jira tasks, projects, and teams",id:"nWIt8qYQz1"}),J({defaultMessage:"Create and update Jira tasks and projects",id:"mUCQ5Z26EF"}),J({defaultMessage:"Track progress, plan cycles, and manage workflows",id:"n+QsTyX68H"}),J({defaultMessage:"Data is retrieved from and written back to Jira whenever you query in Perplexity",id:"CfzDXfmKKD"})],developer:J({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12524825-connecting-perplexity-with-jira",footnote:{link:"https://www.perplexity.ai/help-center/en/articles/12524825-connecting-perplexity-with-jira",text:J({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},confluence_mcp_merge:{name:"Confluence",tagline:J({defaultMessage:"Search and create content on your Confluence pages",id:"7maYua4COa"}),bullets:[J({defaultMessage:"Search across your pages and data ",id:"Ib2j2yH5wv"}),J({defaultMessage:"Create new pages in your teamspace from Perplexity",id:"Ltbp+B60OB"}),J({defaultMessage:"Update your data on existing pages directly from Perplexity",id:"ldpNlZAKLQ"}),J({defaultMessage:"Data is retrieved from and written back to Confluence whenever you query in Perplexity",id:"Ifp49Im16y"})],developer:J({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://www.atlassian.com/",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/articles/12524852-connecting-perplexity-with-confluence",footnote:{link:"https://www.perplexity.ai/help-center/en/articles/12524852-connecting-perplexity-with-confluence",text:J({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},microsoft_teams_mcp_merge:{name:"Microsoft Teams",tagline:J({defaultMessage:"Search and send messages in Microsoft Teams",id:"Rfl+yanh+2"}),bullets:[J({defaultMessage:"Search across Microsoft Teams messages and channels",id:"LF+Ow88sFq"}),J({defaultMessage:"Send and receive messages in Microsoft Teams",id:"1t8qQ+bxf2"}),J({defaultMessage:"Data is retrieved from and written back to Microsoft Teams whenever you query in Perplexity",id:"+bTrwFjG66"})],developer:J({defaultMessage:"Merge",id:"NLSvjhxxpO"}),websiteUrl:"https://teams.microsoft.com",documentationUrl:null,supportUrl:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",footnote:{link:"https://www.perplexity.ai/help-center/en/collections/15347354-app-connectors",text:J({defaultMessage:"This connector is available through Merge API, Inc. By adding this connector, you agree that Merge will be a data sub-processor.",id:"Hoyn19HgZg"})}},slack_direct:{name:"Slack",tagline:J({defaultMessage:"Search and post messages across your Slack workspace",id:"eGJ5wb/MzJ"}),bullets:[J({defaultMessage:"Search messages across DMs, private channels, and public channels you have access to in Slack",id:"Om6FOnY7N3"}),J({defaultMessage:"Post messages directly to Slack",id:"UOgLjThccO"}),J({defaultMessage:"Data is retrieved from and written back to Slack whenever you run a query in Perplexity",id:"Fy/OA6Fd79"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://slack.com",supportUrl:"https://www.perplexity.ai/help-center/en/articles/12167980-using-the-connector-for-slack",documentationUrl:null,footnote:null},gcal:{name:"Gmail with Calendar",tagline:J({defaultMessage:"Search, create, and manage your emails and calendar events",id:"R3VofVJjT+"}),bullets:[J({defaultMessage:"Search your Gmail and calendar",id:"GCr38D/MA3"}),J({defaultMessage:"Draft and send emails",id:"rMtvi6WyKE"}),J({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),J({defaultMessage:"Create and update calendar events",id:"ZLhGXocN5/"}),J({defaultMessage:"Data is retrieved from and written back to Gmail and Gcal whenever you query in Perplexity",id:"HsjdaQ7NYa"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://accounts.google.com/InteractiveLogin?emr=1&ltmpl=default&nojavascript=1&rm=false&service=mail&ss=1",documentationUrl:null,supportUrl:null,footnote:null},outlook:{name:"Outlook",tagline:J({defaultMessage:"Search your emails and calendar events",id:"zNVRcAj90b"}),bullets:[J({defaultMessage:"Search your Outlook e-mail and calendar",id:"z5Tw6ljNsF"}),J({defaultMessage:"Manage and monitor emails and events",id:"p70DVe/3eQ"}),J({defaultMessage:"Data is retrieved from and written back to Outlook whenever you query in Perplexity",id:"xX8KEtSv2M"})],developer:J({defaultMessage:"Perplexity",id:"KCWNcPqV2E"}),websiteUrl:"https://www.microsoft.com/en-us/microsoft-365/outlook/log-in",documentationUrl:null,supportUrl:null,footnote:null}},Iht=e=>e in O1e,Rht=e=>{const{$t:t}=Z(),{isEnterprise:n}=J5({reason:"connectors-enable-modal"}),{data:r}=EU(),s=d.useMemo(()=>r?.find(a=>a.id===e),[r,e]);return d.useMemo(()=>{if(Iht(e)){const{websiteUrl:a,documentationUrl:i,tagline:l,supportUrl:c="https://www.perplexity.ai/help-center/en/articles/10672063-introduction-to-file-connectors-for-enterprise-organizations",footnote:u,consumerBullets:f,bullets:m}=O1e[e],p=[{label:"Website",url:a,icon:Am}];return i&&p.push({label:"Documentation",url:i,icon:d1}),c&&p.push({label:"Support",url:c,icon:hce}),{name:ja(e),tagline:l?t(l):null,footnote:u?{link:u.link,text:t(u.text)}:null,bullets:(!n&&f?f:m).map(h=>t(h)),links:p}}if(s){const{name:a,display_name:i,description:l,long_description:c,homepage:u}=s.manifest,f=[];return u&&f.push({label:"Website",url:u,icon:Am}),{name:i??a,tagline:l,footnote:null,bullets:c?.split(`
`).map(m=>m.trim()).filter(Boolean)??[],links:f}}return{name:e,tagline:null,footnote:null,bullets:[],links:[]}},[t,e,n,s])},Pht=async({connectionType:e,reason:t,referrer:n,referrerId:r})=>{try{const s={connection_type:e};n&&(s.referrer=n),r&&(s.referrer_id=r);const{data:a,error:i}=await re.GET("/rest/connections/connect",t,{params:{query:s},timeoutMs:Pe()});if(i)throw new Error(`Failed to get ${e} connection url`,{cause:i});return a}catch(s){throw ne.error(`Error fetching ${e} connection url:`,s),s}},Lht=async({connectionType:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/connections/oauth_callback_merge",t,{params:{query:{connection_type:e}},timeoutMs:Pe()});if(r)throw new Error(`Failed to handle OAuth callback for ${e}`,{cause:r});return n}catch(n){throw ne.error(`Error handling OAuth callback for ${e}:`,n),n}},D1e=Dt("MergeAgentHandlerContext",null),Oht=()=>{const e=d.useContext(D1e);if(!e)throw new Error("useMergeAgentHandler must be used within a MergeAgentHandlerProvider");return e},Dht=({children:e})=>{const t=ot(),[n,r]=d.useState(null),s=d.useCallback(async()=>{const{connectionType:f,onError:m,onSuccess:p}=n??{};if(!f){const h=new Error("Connection type is not defined for OAuth callback");c1.error("Connection type is not defined for OAuth callback"),m?.(h);return}try{await Lht({reason:"merge_oauth_success",connectionType:f}),t.invalidateQueries({queryKey:A5()}),p?.()}catch(h){c1.error("Failed to handle OAuth callback:",h),m?.(h)}finally{r(null)}},[n,t]),a=d.useCallback(()=>{const{onExit:f}=n??{};r(null),f?.()},[n]),i=Fge({linkToken:n?.token||"",onSuccess:s,onExit:a});d.useEffect(()=>{n?.token&&i()},[n?.token,i]);const l=d.useCallback(f=>{r(f)},[]),c=d.useCallback(()=>{r(null)},[]),u=d.useMemo(()=>({startMergeAuth:l,clearActiveAuth:c}),[l,c]);return o.jsx(D1e.Provider,{value:u,children:e})};class $J extends Error{constructor(){super("Merge auth cancelled")}}const Fht=({reason:e})=>{const{trackEvent:t}=Te(),{deprecatedOpenToast:n}=fn(),{$t:r}=Z(),s=Lt(),{startMergeAuth:a}=Oht(),{handleConnect:i}=e3({reason:e}),l=d.useCallback(async(c,u,f)=>{if(!u){ne.error("Connection type is not defined for OAuth callback",{connectorId:c});return}if(not(u)){try{const{redirect_url:m,token:p}=await Pht({connectionType:u,reason:e,referrer:f?.referrer,referrerId:f?.referrerId});if(m)pa(m,"Enabling connector");else if(p)await new Promise((h,g)=>{a({token:p,connectionType:u,connectorName:c,onSuccess:h,onExit:()=>g(new $J)})});else throw new Error("No redirect URL or token received")}catch(m){if(m instanceof $J)throw m;n(r({defaultMessage:"Unable to start connection.",id:"SPIzcd/Xa2"}),"error",3)}return}if(u==="GCAL"){await i({connectorName:c,redirectPath:s||void 0,unauthedRedirectPath:s||void 0});return}await i({connectorName:c}),t("attempt connector authentication",{connectorName:c})},[r,s,e,i,n,t,a]);return d.useMemo(()=>({enableConnection:l}),[l])},Uht=e=>o.jsx(Dht,{children:o.jsx(Bht,{...e})}),Bht=({connectorName:e,connectorAvatar:t,showModal:n,setShowModal:r,connectionType:s,reason:a,referrer:i,referrerId:l,badge:c,handleEnable:u})=>{const{$t:f}=Z(),{name:m,tagline:p,footnote:h,bullets:g,links:y}=Rht(e),{enableConnection:x}=Fht({reason:a}),{mutate:v,isPending:b}=dt({mutationFn:async()=>{u?await u():await x(e,s,{referrer:i,referrerId:l})},onSuccess:()=>{r(!1)}}),_=d.useCallback(()=>{v()},[v]);return o.jsx(qt,{isOpen:n,onClose:()=>r(!1),variant:"large",modalContentClassname:"!py-0 w-full",modalClassname:"!max-w-2xl !w-screen",wrapperClassname:"w-full",noPadding:!0,children:o.jsxs(z,{className:"flex flex-col gap-6 px-3 pb-6 pt-2",children:[o.jsxs(z,{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[t&&o.jsx(_U,{serverName:m,iconUrl:t,border:!0}),o.jsxs("div",{className:"flex flex-col",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:"section-title",children:m}),c]}),p&&o.jsx(F,{variant:"small",color:"light",className:"text-pretty",children:p})]})]}),o.jsx(me,{text:f(b?{defaultMessage:"Adding...",id:"Nvr5CeqKuU"}:{defaultMessage:"Add connector",id:"QDa8Q+GNMs"}),size:"small",variant:"primary",isLoading:b,disabled:b,onClick:_,extraCSS:"rounded-full sm:ml-auto"})]}),g?.length>0&&o.jsxs("section",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"baseSemi",children:f({defaultMessage:"Overview:",id:"75gRjsa29W"})}),o.jsx("ul",{children:g.map((w,C)=>o.jsx(F,{variant:"small",as:"li",className:"mb-xs ml-4 list-disc text-pretty last:mb-0",children:w},C))})]}),y.length>0&&o.jsxs("section",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"baseSemi",children:f({defaultMessage:"Links",id:"qCcwo3DU78"})}),o.jsx("ul",{className:"flex flex-col gap-2",children:y.map((w,C)=>{if(!w.url)return null;const S=w.icon;return o.jsx("li",{className:"text-super group w-fit",children:o.jsxs(qe,{href:w.url,target:"_blank",className:"flex items-center gap-1",children:[o.jsx(de,{icon:S,size:14}),o.jsx(F,{variant:"small",className:"text-inherit group-hover:underline",children:w.label})]})},C)})})]}),h&&o.jsx("section",{className:"border-t py-2",children:o.jsxs(F,{variant:"tinyRegular",className:"text-pretty",children:[o.jsx(F,{as:"span",variant:"tinyRegular",color:"light",children:h.text}),o.jsx(qe,{href:h.link,target:"_blank",className:"text-super ml-1",children:f({defaultMessage:"Learn more",id:"TdTXXf940t"})})]})})]})})};function $ht({isOpen:e,onContinue:t,onClose:n}){return o.jsx(qt,{isOpen:e,onClose:n,title:"",variant:"small",children:o.jsxs(z,{className:"mx-auto w-full rounded-2xl px-4 py-0",children:[o.jsx(F,{variant:"section-title",className:"mb-2",children:o.jsx(ie,{defaultMessage:"We need more access to help with your Google calendar and email",id:"qfQz160ySM"})}),o.jsx(F,{variant:"small",color:"light",className:"mb-6",children:o.jsx(ie,{defaultMessage:"These permissions let us help you schedule meetings, find important messages, manage your inbox, and provide personalized assistance based on your real schedule and communication needs.",id:"yN/31P429t"})}),o.jsx(F,{variant:"small",color:"light",className:"mb-6",children:o.jsx(ie,{defaultMessage:"Important: Please select <b>all permission boxes</b> on the next screen to enable these features.",id:"sr/jqAmxMK",values:{b:r=>o.jsx("span",{className:"font-semibold",children:r})}})}),o.jsx(me,{text:o.jsx(ie,{defaultMessage:"Grant access to calendar and email",id:"SLN8GewG3+"}),variant:"primary",size:"regular",onClick:t,extraCSS:"w-full rounded-xl mb-4"})]})})}const Vht=({isOpen:e,onClose:t})=>{const n="delete-all-memories-modal",r=Z(),{mutate:s}=Sht(),{trackEvent:a}=Te(),i=d.useMemo(()=>[{text:r.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common"},{text:r.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{a("cleared all memories",{}),s({reason:n}),t()},variant:"rejected"}],[s,r,t,a]);return o.jsx(qt,{isOpen:e,onClose:t,actionList:i,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 max-w-[324px] p-0",headerClassname:"pt-6 px-6  md:px-6 border-b-0 !pb-0",modalContentClassname:"pt-0",footerClassname:"border-t-0 pt-2 px-6 !pb-6 md:pt-2 md:px-6 md:pb-6",title:r.formatMessage({defaultMessage:"Delete all memories",id:"wViT4HVZZG"}),children:o.jsx("div",{className:"w-full justify-start px-2 py-1",children:o.jsx(F,{variant:"tinyRegular",children:r.formatMessage({defaultMessage:"Are you sure you want to delete all of your memories? Memories cannot be recovered once deleted.",id:"2xMxdqIgTQ"})})})})},Wht=({isOpen:e,onClose:t,memoryId:n,onDeleteSuccess:r})=>{const s="delete-memory-modal",a=Z(),{mutate:i}=wht({reason:s}),{trackEvent:l}=Te(),{isMobileStyle:c}=xe(),u=d.useMemo(()=>[{text:a.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common",shouldShowConfirmDialog:!0},{text:a.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>{n&&(l("delete memory",{memoryId:n}),i(n,{onSuccess:()=>{r?.(),t()}}))},variant:"rejected"}],[i,a,n,t,r,l]);return o.jsx(qt,{isOpen:e,onClose:t,actionList:u,titleTextVariant:"smallBold",renderCloseButton:!1,modalClassname:"!min-w-0 p-0",variant:c?"bottom-sheet":"default",title:a.formatMessage({defaultMessage:"Delete memory",id:"767lMfHCVm"}),children:o.jsx("div",{className:"w-full",children:o.jsx(F,{variant:"small",children:a.formatMessage({defaultMessage:"Are you sure you want to delete this memory? Memories cannot be recovered once deleted.",id:"bJP46nmx6X"})})})})},F1e=I.memo(({backgroundVariant:e="subtler"})=>o.jsx(z,{variant:e,className:"inline-flex h-5 items-center rounded px-[6px] py-px",children:o.jsx(F,{color:"light",variant:"micro",className:"translate-y-half uppercase tracking-wider",children:o.jsx(ie,{defaultMessage:"Beta",id:"riw/yc06Nq"})})}));F1e.displayName="BetaBadge";const U1e=I.memo(()=>o.jsx("div",{className:"bg-super dark inline-flex h-5 items-center justify-center rounded px-[6px] py-px",children:o.jsx(F,{color:"white",variant:"tinyRegular",children:o.jsx(ie,{defaultMessage:"New",id:"bW7B87wFFp"})})}));U1e.displayName="NewBadge";const B1e=({enabled:e,reason:t})=>{const{locale:n}=Z(),r=n?{"accept-language":n}:{},s=async()=>XQe({headers:r,reason:t}),a=et(),{data:i}=Ue({enabled:a?typeof e>"u"?!0:e:!1,queryKey:UP(),queryFn:s,networkMode:"always"});return i??bhe},Hht=(e,t)=>{const{value:n,loading:r}=jt({flag:"new-memory-v2-overview-page",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},Gon=({children:e,card:t=!0,title:n,id:r})=>o.jsxs("div",{id:r,children:[n&&o.jsx(F,{variant:"baseSemi",className:"pl-sm",children:n}),o.jsx(z,{variant:t?"subtler":void 0,className:B("mb-lg mt-sm divide-y",{"px-md py-sm rounded-lg":t}),children:e})]}),zht=({children:e,title:t,noPadding:n=!1,subTitle:r,cta:s,titleAccessory:a})=>o.jsxs("div",{className:"pb-md flex flex-col",children:[o.jsx(z,{className:"pb-md flex flex-col gap-1 border-b",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:"baseSemi",children:t}),a]}),r&&o.jsx(F,{variant:"tinyRegular",color:"light",children:r})]}),s&&s]})}),o.jsx("div",{className:B("gap-md flex flex-col",{"py-md":!n}),children:e})]}),zC=({label:e,value:t,valueColor:n="light",cta:r,shouldWrapInMobile:s=!0})=>o.jsxs("div",{className:B("gap-md flex justify-between sm:flex-row sm:flex-nowrap sm:items-center",s&&"flex-col flex-wrap"),children:[o.jsxs("div",{children:[e&&o.jsx(F,{variant:"small",children:e}),t&&o.jsx(F,{variant:"tinyRegular",color:n,children:t})]}),o.jsx("div",{children:r})]}),Ght={memory_enabled:!1,conversation_history_enabled:!1,citations_enabled:!1},qht=()=>{const{value:e}=jt({flag:"memory-search-beta",defaultValue:!1,subjectType:"user_nextauth_id"});return e},$1e=({reason:e})=>{const{isEnterprise:t}=Hn({reason:e}),{value:n,loading:r}=jt({flag:"memory-experiment",defaultValue:!1,extraAttributes:{isEnterprise:t??!1},subjectType:"user_nextauth_id"}),{value:s,loading:a}=Fu({flag:"memory-search-history",defaultValue:Ght,extraAttributes:{isEnterprise:t??!1,dependent_flag:"memory-experiment",variation_served:n},subjectType:"user_nextauth_id"});return a||r?!1:"memory_enabled"in s&&"conversation_history_enabled"in s&&"citations_enabled"in s?s?.memory_enabled&&s?.conversation_history_enabled&&s?.citations_enabled:!1},qon=()=>{const e="personal-search-settings-main",t=qht(),{$t:n}=Z(),r=ot(),s=B1e({reason:e}),{openModal:a}=xt(),{trackEvent:i}=Te(),l=Ot(),c=vt(),{session:u}=mt(),{variation:f}=Hht(!1,{userEmail:u?.user?.email??""}),{value:m,loading:p}=Fu({flag:"visa-config",defaultValue:{enabled:!1},subjectType:"user_nextauth_id"});d.useEffect(()=>{l?.get("modal")==="memory"&&a("memoryListModal",{isMemoryEnabled:!0})},[]);const{data:h}=Ue({queryKey:vh,queryFn:async()=>{const k=await re.GET("/rest/billing/personalization/status",e);if(k.error)throw new Error("Failed to fetch third party personalization status.",{cause:k.error});return k.data}}),g=d.useMemo(()=>h?.payment_methods.filter(k=>k.payment_method_source==="visa"),[h?.payment_methods]),{mutate:y,isPending:x}=dt({mutationFn:k=>aX({type:"memory",value:k,reason:e}),onSuccess:k=>{k&&r.setQueryData(UP(),k)}}),{mutate:v,isPending:b}=dt({mutationFn:k=>aX({type:"searchHistory",value:k,reason:e}),onSuccess:k=>{k&&r.setQueryData(UP(),k)}}),_=d.useCallback(k=>{y(k),i("toggle memory",{memoryToggleState:k?"on":"off"})},[y,i]),w=d.useCallback(k=>{v(k),i("toggle search history",{searchHistoryToggleState:k?"on":"off"})},[v,i]),C=d.useCallback(()=>{f?c.push("/account/personalize/memories"):(i("viewed memory list modal"),a("memoryListModal",{isMemoryEnabled:!0}))},[f,a,c,i]),S=d.useCallback(()=>{g&&(i("third party personalization modal viewed"),a("thirdPartyPersonalizationModal",{personalizationStatusItems:g}))},[a,i,g]),E=m.enabled&&!p&&g;return o.jsxs(zht,{title:n({defaultMessage:"Memory",id:"dVx3yznM2C"}),titleAccessory:t?o.jsx(F1e,{}):o.jsx(U1e,{}),children:[o.jsx(zC,{label:n({defaultMessage:"Reference search library",id:"SwsY8rd34h"}),value:n({defaultMessage:"Let Perplexity use previous searches when answering.",id:"ex3azVKEwb"}),cta:o.jsx(_o,{active:s.use_search_history===null?!0:s.use_search_history??!1,onChange:w,disabled:b})}),o.jsx(zC,{label:n({defaultMessage:"Reference saved memories",id:"jT78QtuUtA"}),value:o.jsx("div",{className:"flex flex-col",children:o.jsx(F,{className:"inline",variant:"tinyRegular",color:"light",children:o.jsx(ie,{defaultMessage:"Let Perplexity save and use memories when answering. Incognito searches are never stored. ",id:"B53ddA1KtU"})})}),cta:o.jsx(_o,{active:s.use_memory??!1,onChange:_,disabled:x})}),o.jsx(zC,{label:o.jsx("div",{className:"gap-sm flex items-center",children:o.jsx(F,{variant:"small",children:n({defaultMessage:"Edit your saved memories",id:"xuzqKrNHGC"})})}),cta:o.jsx(me,{extraCSS:"w-fit",variant:"border",size:"small",text:n({defaultMessage:"Manage",id:"0AzlrbMWV9"}),trailingComponent:o.jsx(Xn,{size:16}),onClick:C})}),E&&o.jsx(zC,{label:o.jsx("div",{className:"gap-sm flex items-center",children:o.jsx(F,{variant:"small",children:n({defaultMessage:"Edit third party personalization",id:"/qHxGt44fE"})})}),cta:o.jsx(me,{extraCSS:"w-fit",variant:"border",size:"small",text:n({defaultMessage:"Manage",id:"0AzlrbMWV9"}),trailingComponent:o.jsx(Xn,{size:16}),onClick:S})})]})},Kht=({isOpen:e,onClose:t,personalizationStatusItems:n})=>{const{$t:r}=Z(),s=ot(),{openToast:a}=fn(),i=d.useMemo(()=>[{text:r({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,variant:"common"},{text:r({defaultMessage:"Done",id:"JXdbo8Vnlw"}),onClick:t,variant:"inverted"}],[r,t]),l=dt({mutationFn:_pe,onMutate:async c=>{await s.cancelQueries({queryKey:vh});const u=s.getQueryData(vh);if(u){const f={...u,payment_methods:u.payment_methods.map(m=>m.payment_method_uuid===c.paymentMethodUUID?{...m,personalization_status:c.optedIn}:m)};s.setQueryData(vh,f)}return{previousData:u}},onError:(c,u,f)=>{a({variant:"error",message:r({defaultMessage:"Failed to update setting",id:"N1E0Ht/+Mu"}),description:r({defaultMessage:"Please try again.",id:"VjB59sDdPt"})}),f?.previousData&&s.setQueryData(vh,f.previousData)},onSettled:()=>{s.invalidateQueries({queryKey:vh})}});return o.jsx(qt,{isOpen:e,onClose:t,modalClassname:"h-[600px] md:max-w-lg md:!min-w-0",modalContentClassname:B("grow overflow-hidden py-0 !px-0 md:!pb-0"),title:r({defaultMessage:"Third Party Personalization",id:"ymBdPtFQKe"}),titleTextVariant:"baseSemi",actionList:i,children:o.jsxs("div",{className:"flex flex-col gap-4 pt-1",children:[o.jsxs("div",{className:"text-quiet flex items-center gap-2",children:[o.jsx(Ub,{size:16,className:"shrink-0"}),o.jsx(F,{variant:"tinyRegular",color:"light",children:r({defaultMessage:"Perplexity will automatically sync personalization tokens from the following providers when you enable them. Disable each provider to remove the data.",id:"ECjwvYNI+3"})})]}),n?.map(c=>o.jsx(Yht,{item:c,onUpdate:u=>{l.mutate({paymentMethodUUID:u.id,optedIn:u.isEnabled})}},c.payment_method_uuid))]})})},Yht=({item:e,onUpdate:t})=>{const n=d.useMemo(()=>{switch(e.payment_method_source){case"visa":return"/static/images/partners/visa/visa-logo.png";default:return null}},[e.payment_method_source]),r=d.useCallback(s=>{t({id:e.payment_method_uuid,isEnabled:s})},[e.payment_method_uuid,t]);return o.jsxs("label",{className:"pr-sm flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"bg-subtler relative flex size-8 items-center justify-center rounded-md",children:n&&o.jsx("img",{src:n,alt:"Visa Logo",className:"absolute size-6 object-contain"})}),o.jsx("div",{className:"flex flex-col gap-1",children:o.jsx(F,{variant:"small",className:"capitalize",children:e.payment_method_source})})]}),o.jsx(_o,{active:e.personalization_status==="enabled",onChange:r})]})},VJ=50,D0={title:J({defaultMessage:"Watchlist",id:"b+DoOaU7zT"}),saveWatchlist:J({defaultMessage:"Save",id:"jvo0vs3nF0"}),cancel:J({defaultMessage:"Cancel",id:"47FYwba+bI"}),settingsTitle:J({defaultMessage:"Categories",id:"VKb1MSJZP+"}),sports:Qe({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add teams",id:"kapmPqUzuB"},searchPlaceholder:{defaultMessage:"Search for a team",id:"yve+fFGCVl"},widgetDescription:{defaultMessage:"Choose your teams",id:"6ZVPGK17cb"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}}),finance:Qe({title:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},settingsCtaText:{defaultMessage:"Add stocks",id:"IrqguKbukF"},searchPlaceholder:{defaultMessage:"Search...",id:"0BUTMvePvK"},widgetDescription:{defaultMessage:"Set your watchlist",id:"Uh4Ex766Qm"},settingsDescription:{defaultMessage:"Set your watchlist for daily updates and summaries",id:"7SMcHmFldb"},modalDescription:{defaultMessage:"Updates and news about stocks and more",id:"uJAhXQDitL"}}),f1:Qe({title:{defaultMessage:"Sports",id:"qEuXjx1B4z"},settingsCtaText:{defaultMessage:"Add drivers",id:"R9U03Vy8bO"},searchPlaceholder:{defaultMessage:"Search for a driver",id:"lE7oUWeeV1"},widgetDescription:{defaultMessage:"Choose your drivers",id:"sCVGGM0Ka3"},settingsDescription:{defaultMessage:"Event updates, breaking news, and live scores",id:"yBBV27kmkn"},modalDescription:{defaultMessage:"Get event updates, breaking news, and live scores",id:"VLVunZTFAF"}})},Qht=({symbol:e})=>o.jsx(F,{color:"light",children:o.jsx("span",{className:"font-mono opacity-70",children:e.slice(0,1)})}),I3=({image:e,imageDark:t,alt:n,watchlistType:r,className:s,imageClassName:a})=>{const i=r==="FINANCE",{colorScheme:l}=jr(),c=i&&l==="dark"&&t?t:e,[u,f]=d.useState(()=>{if(!c)return!1;const g=new Image;return g.src=c,g.complete&&g.naturalWidth>0}),[m,p]=d.useState(!1),h=!u||m;return o.jsxs("div",{className:B("relative flex size-6 items-center justify-center",{"bg-subtler":h},s),children:[h&&o.jsx(Qht,{symbol:n??""}),!m&&o.jsx("div",{className:B("absolute",a),children:o.jsx("img",{src:c,alt:n,width:32,height:32,className:B("inset-0 size-full object-contain",{"opacity-0":!u}),onLoad:()=>f(!0),onError:()=>p(!0)})})]})},V1e=async({query:e,watchlistType:t,limit:n,category:r,cometRenderPlace:s,reason:a})=>{const i=encodeURIComponent(e),{data:l,error:c}=await re.GET("/rest/homepage-widgets/watchlist/list-autosuggest",a,{params:{query:{type:t,query:i,limit:n,category:r,entropy_render_place:s}},timeoutMs:1500,numRetries:1});if(c)throw new we("API_CLIENTS_ERROR",{message:"Failed to get watchlist autosuggestions",cause:c});return l.results??ce},Xht=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await re.GET("/rest/homepage-widgets/watchlist/subscription",t,{params:{query:{type:e}},headers:{"content-type":"application/json"},numRetries:1});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to get watchlist subscriptions",cause:n});return r.results??[]}catch(n){return ne.error(n),[]}},Zht=async({watchlistType:e,reason:t})=>{try{const{error:n,data:r}=await re.GET("/rest/homepage-widgets/watchlist/categories",t,{params:{query:{type:e}},numRetries:1});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to get watchlist categories",cause:n});return r?.results??[]}catch(n){return ne.error(n),[]}},Jht=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await re.PUT("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t??"",category:n}},headers:{"content-type":"application/json"}});if(s)throw new we("API_CLIENTS_ERROR",{message:"Failed to add watchlist subscription",cause:s});return!0}catch(s){return ne.error(s),!1}},egt=async({watchlistType:e,identifier:t,category:n,reason:r})=>{try{const{error:s}=await re.DELETE("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t,category:n}},headers:{"content-type":"application/json"}});if(s)throw new we("API_CLIENTS_ERROR",{message:"Failed to remove watchlist subscription",cause:s});return!0}catch(s){return ne.error(s),!1}},tgt=async({watchlistType:e,identifier:t,order:n,reason:r})=>{try{const{error:s}=await re.PATCH("/rest/homepage-widgets/watchlist/subscription",r,{params:{query:{type:e,identifier:t}},body:{order:n},headers:{"content-type":"application/json"}});if(s)throw new we("API_CLIENTS_ERROR",{message:"Failed to update watchlist subscription order",cause:s});return!0}catch(s){return ne.error(s),!1}},R3=e=>["watchlist",e,"subscriptions"],ngt=e=>["watchlist",e,"addSubscription"],rgt=e=>["watchlist",e,"removeSubscription"],sgt=e=>["watchlist",e,"updateSubscription"],ZB=({watchlistType:e,reason:t})=>{const n=et(),r=R3(e);return Ue({queryKey:r,queryFn:()=>Xht({watchlistType:e,reason:t}),staleTime:0,enabled:n})},W1e=({watchlistType:e,queryClient:t,reason:n})=>{const r=R3(e);return dt({mutationKey:ngt(e),mutationFn:async s=>Jht({watchlistType:e,reason:n,...s}),onMutate:async({identifier:s,category:a,description:i,image:l,title:c})=>{await t.cancelQueries({queryKey:r});const u=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(f=[])=>{const m={identifier:s??"",category:a,description:i??"",image_url:l??"",title:c??"",subscribed:!0,order:Date.now()},p=f.filter(h=>h.identifier!==s);return[m,...p]}),{previousSubscriptions:u}},onError:(s,a,i)=>{ne.error("Error adding watchlist subscription",s),t.setQueryData(r,i?.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},H1e=({watchlistType:e,queryClient:t,reason:n})=>{const r=R3(e);return dt({mutationKey:rgt(e),mutationFn:async s=>egt({watchlistType:e,reason:n,...s}),onSuccess:()=>{t.invalidateQueries({queryKey:r})},onMutate:async({identifier:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(["watchlist",e]);return t.setQueryData(r,(i=[])=>i.filter(l=>l.identifier!==s)),{previousSubscriptions:a}},onError:(s,a,i)=>{ne.error("Error removing watchlist subscription",s),t.setQueryData(r,i?.previousSubscriptions)}})},agt=({watchlistType:e,queryClient:t,reason:n})=>{const r=R3(e);return dt({mutationKey:sgt(e),mutationFn:async s=>tgt({watchlistType:e,reason:n,...s}),onMutate:async({newOrderedList:s})=>{await t.cancelQueries({queryKey:r});const a=t.getQueryData(r);return t.setQueryData(r,s),{previousSubscriptions:a}},onError:(s,a,i)=>{ne.error("Error updating watchlist subscription order",s),i?.previousSubscriptions&&t.setQueryData(r,i.previousSubscriptions)},onSuccess:()=>{t.invalidateQueries({queryKey:r})}})},WJ={nba:qS,nfl:RO,cricket:K7e,ncaam:qS,ncaaw:qS},K6=q7e,ogt=({watchlistType:e,selectedCategory:t,setSelectedCategory:n})=>{const r="watchlist-category-dropdown",{isMobileStyle:s}=xe(),{$t:a}=Z(),[i,l]=d.useState([]);d.useEffect(()=>{(async()=>{const m=await Zht({watchlistType:e,reason:r});l(m)})()},[e]);const c=a({defaultMessage:"All Categories",id:"1X6HtI/EN/"}),u=d.useMemo(()=>[{text:c,icon:K6,onClick:()=>n(void 0),type:"default",active:t===void 0,size:Yt.tiny},...i.map(m=>({text:m.display_name,icon:WJ[m.category]||K6,onClick:()=>n(m),type:"default",active:t?.category===m.category,size:Yt.tiny}))],[i,n,t,c]);return i.length===0?null:o.jsx(nn,{isMobileStyle:s,items:u,placement:"bottom-end",children:o.jsx(me,{icon:WJ[t?.category]||K6,size:Yt.tiny,text:t?.display_name??c})})},un=({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:i="default"})=>{const[l,c]=d.useState(!1),u=a?l:r;return I.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:B({shimmer:u&&i==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&i==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)},z1e=e=>e?.includes("perplexity.ai/finance")??!1,G1e=e=>e==="https://www.perplexity.ai/finance",q1e=I.memo(({query:e,completion:t,inputsAndCompletions:n,description:r,highlightPrefix:s,url:a,title:i,shouldShowTitle:l})=>{const c=z1e(a),u=G1e(a),f=l&&i?i:e,m=c?f.toUpperCase():f,{$t:p}=Z(),h=c?t?.toUpperCase():t;return u?o.jsx(F,{variant:"small",inline:!0,children:p({defaultMessage:"{perplexity} Finance",id:"LnL5Kdg1cp"},{perplexity:"Perplexity"})},"perplexity-finance"):o.jsxs(o.Fragment,{children:[!r&&n?.length&&s?n.map(([g,y],x)=>g?o.jsx(F,{color:"light",variant:"small",className:"inline",as:"div",children:g},`${x}-${g}`):o.jsx(F,{className:"inline whitespace-pre",variant:"small",as:"div",children:y},`${x}-${y}`)):r?o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"small",inline:!0,children:m}),o.jsx(F,{variant:"tinyRegular",className:"!text-quiet opacity-70",inline:!0,children:r})]}):o.jsx(F,{inline:!0,color:"light",variant:"small",children:m}),t&&s&&!n?.length&&o.jsx(F,{className:"whitespace-pre",inline:!0,variant:"small",children:h}),t&&!s&&o.jsx(F,{color:"light",inline:!0,variant:"small",children:h})]})});q1e.displayName="DefaultQueryContentComponent";const K1e=I.memo(({onClick:e,query:t,completion:n,inputsAndCompletions:r,url:s,suggestionIndex:a,keyboardFocusedIndex:i,setKeyboardFocusedIndex:l,leftIcon:c,rightIcon:u,className:f,description:m,title:p,shouldShowTitle:h,highlightPrefix:g=!0,category:y,QueryContentComponent:x=q1e,metadata:v,actionHandler:b})=>{const{isMobileUserAgent:_}=xe(),w="group-hover:opacity-100 group-data-[focused=self]:opacity-100",C="opacity-0 group-data-[focused=other]:opacity-0",S=d.useCallback(()=>{l?.(-1)},[l]),E=d.useCallback(k=>h&&p&&t?o.jsx(bn,{tooltipText:t,bodyClassName:"max-w-[300px]",showTooltip:!0,asChild:!0,tooltipLayout:"right",children:k}):k,[h,p,t]);return o.jsx(Ye,{children:E(o.jsx("div",{"data-focused":i===void 0||i===-1?"none":i===a?"self":"other","data-testid":`auto-suggestion-${(a??0)+1}`,className:B("group flex cursor-pointer flex-row items-center rounded-lg p-[8px]",f),onPointerDown:()=>{b?b():e(n?t+n:t)},onPointerLeave:S,children:o.jsxs("div",{className:"flex w-full min-w-0 flex-row whitespace-pre leading-tight",children:[o.jsx(F,{className:"-mr-three",color:"light",inline:!0,variant:"small",children:c}),o.jsx(F,{variant:"small",className:_?"truncate":"line-clamp-2 text-wrap",children:s?o.jsx(qe,{href:s,target:"_blank",rel:"noopener",children:o.jsx(x,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:v,title:p,shouldShowTitle:h})}):o.jsx(x,{query:t,url:s,completion:n,inputsAndCompletions:r,description:m,category:y,highlightPrefix:g,metadata:v,title:p,shouldShowTitle:h})}),u&&o.jsx(F,{variant:"smallBold",color:"super",inline:!0,className:B("pr-xs ml-auto",w,{[C]:!s}),children:u})]})}))})});K1e.displayName="SuggestionCard";const O8={ticker:{order:0,showHeader:!1,highlightPrefix:!1},suggestion:{order:1,showHeader:!1,highlightPrefix:!0},news:{displayName:"Latest News",order:2,showHeader:!0,highlightPrefix:!1},related_question:{displayName:"Related Questions",order:3,showHeader:!0,highlightPrefix:!1},shortcuts:{displayName:"Shortcuts",order:4,showHeader:!0,highlightPrefix:!0}},igt=e=>{const t={};return e.forEach(n=>{const r=n.category||"suggestion";t[r]||(t[r]=[]),t[r].push(n)}),t},lgt=e=>Object.keys(e).sort((t,n)=>{const r=O8[t]?.order??Number.MAX_SAFE_INTEGER,s=O8[n]?.order??Number.MAX_SAFE_INTEGER;return r-s}),HJ=e=>{const{metadata:t}=e;return!!t&&t.type==="price"&&!!t.price_info&&typeof t.price_info.currentPrice=="number"&&!!t.price_info.change&&!!t.price_info.changePercentage},cgt=e=>[...e].sort((t,n)=>{const r=HJ(t),s=HJ(n);return r&&!s?-1:!r&&s?1:0}),Y1e=I.memo(e=>{const{text:t,show:n,className:r}=e;return n?o.jsxs(o.Fragment,{children:[o.jsx(z,{className:B("my-sm sm:mx-sm border-b first:hidden",r)}),t&&o.jsx(z,{variant:"transparent",className:"sm:mx-sm mt-xs mb-sm pr-sm",children:o.jsx(F,{className:"w-max",variant:"tinyMono",color:"light",children:t})})]}):null});Y1e.displayName="GroupItemSeparator";const Q1e=I.memo(({category:e,suggestions:t,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:i,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,QueryContentComponent:f,onFillButtonClick:m,titleClassName:p})=>{const h=d.useMemo(()=>e==="ticker"?cgt(t):t,[e,t]);return t.length?o.jsxs(o.Fragment,{children:[o.jsx(Y1e,{show:n.showHeader,text:n.displayName,className:p}),h.map((g,y)=>o.jsx(X1e,{suggestion:g,index:y,category:e,categoryConfig:n,value:r,focusedIndex:s,setFocusedIndex:a,handleSubmit:i,indexOffset:l,LeftIconComponent:c,RightIconComponent:u,onFillButtonClick:m,QueryContentComponent:f,highlightPrefix:n.highlightPrefix??!0},`${e}-${g.input+g.completion+g.description||g.query_uuid}`))]}):null});Q1e.displayName="SuggestionGroup";const X1e=I.memo(({suggestion:{input:e,completion:t,query_uuid:n,image:r,imageDark:s,url:a="",description:i,identifier:l="",category:c,title:u="",subscribed:f=!1,metadata:m,submission_query:p,inputs_and_completions:h,icon_name:g,shouldShowTitle:y,actionHandler:x,isPersonalized:v},index:b,LeftIconComponent:_,QueryContentComponent:w,RightIconComponent:C,highlightPrefix:S,focusedIndex:E,handleSubmit:k,indexOffset:M,onFillButtonClick:j,setFocusedIndex:R,value:O})=>{const D=d.useCallback(N=>k({query:N,query_uuid:n,url:a,identifier:l,category:c,description:i,image:r,imageDark:s,title:u,subscribed:f,submission_query:p,isPersonalized:v},b+M),[c,i,k,l,r,s,b,M,n,p,f,u,a,v]),P=d.useCallback(()=>{j(e+t,a)},[t,e,j,a]),A=d.useMemo(()=>o.jsx(_,{image:r,imageDark:s,alt:e+O,url:a,category:c,iconName:g,value:O}),[_,c,g,r,s,e,a,O]),T=d.useMemo(()=>o.jsx(C,{onClick:P,url:a,isSelected:f,metadata:m,category:c}),[C,P,a,f,m,c]);return o.jsx(K1e,{onClick:D,query:e,completion:t,inputsAndCompletions:h,url:a,suggestionIndex:b+M,keyboardFocusedIndex:E,setKeyboardFocusedIndex:R,description:i,title:u,shouldShowTitle:y,highlightPrefix:S,className:B("hover:bg-subtler","data-[focused=self]:bg-subtler","dark:data-[focused=self]:bg-subtler","hover:data-[focused=other]:bg-raised","dark:hover:data-[focused=other]:bg-subtler"),category:c,QueryContentComponent:w,metadata:m,leftIcon:A,rightIcon:T,actionHandler:x})});X1e.displayName="SuggestionCardFactory";var ugt={};const dgt=60,fgt=2e3,mgt=6,pgt=4,hgt=5,dg=(e,t)=>e?pgt:t?hgt:mgt,ggt=e=>!(e.length===0||e.includes(`
`)),ygt=e=>e.map(t=>({query:t.text,image:t.image_url,url:t.url,title:t.title})),xgt=e=>e.sort((t,n)=>t.url?-1:n.url?1:t.image?-1:n.image?1:0),D8=(e,t,n)=>{let r=e;(t||ugt.NEXT_PUBLIC_IS_SIDECAR_BUILD)&&(r=e.filter(i=>!i.url));const s=$le(r,"query");if(n){const i=s.findIndex(l=>l.query===n);if(~i){const l=s[i];s.splice(i,1),s.unshift(l)}}const a=xgt(s);return[a,a.slice(0,dg(t))]},Z1e=(e,t,n)=>{const r=n?e.replace(/\s+/g,"").toLocaleLowerCase():e,s=t.query;let a=0,i=0;for(;a<r.length&&i<s.length;)r[a]===s[i]?.toLocaleLowerCase()&&a++,i++;return[a===r.length,i]},vgt=(e,t)=>{const n=e.replace(/\s+/g,""),r=[];let s="",a="",i=0,l=0;for(;i<n.length&&l<t.length;)n[i]?.toLocaleLowerCase()===t[l]?.toLocaleLowerCase()?(a&&(r.push(["",a]),a=""),s+=t[l],i++,l++):(s&&(r.push([s,""]),s=""),a+=t[l],l++);return s&&r.push([s,""]),a&&r.push(["",a]),l<t.length&&r.push(["",t.slice(l)]),r},bgt={calendar:Vb,"report-search":xce,browser:X7e,mail:up,"shopping-bag":qR,message:PO,"user-heart":yce,play:gce,globe:Q7e,music:Y7e,book:d1,plane:qk,plus:ar};var _gt={};const J1e=I.memo(({image:e,alt:t,url:n,iconName:r,value:s,category:a})=>{const i=s.length===0,[l,c]=d.useState(!1),{sidecarSourceTab:{url:u}}=Hr(),f=qa(),m=d.useMemo(()=>{if(_gt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&u&&i)return j1(u);if(e)return e;if(n)return a1e(n)},[e,n,u,i]),p=r?bgt[r]:null,h=i?tZe[f]??Br:Br;return a==="shortcuts"&&!r?o.jsx(de,{icon:Z7e,size:"sm",className:"mt-two mr-2 w-5 shrink-0"}):G1e(n)?o.jsx("div",{className:"mr-2 flex size-5 shrink-0 items-center justify-center",children:o.jsx(de,{icon:Wb,size:"sm",className:"text-foreground"})}):m&&!l?o.jsx("div",{className:"relative mr-2 size-5 shrink-0 overflow-hidden rounded-sm",children:o.jsx("img",{src:m,alt:t??"suggestion",className:"object-cover",sizes:"24px",onError:()=>c(!0)})}):o.jsx(de,{icon:l&&n?of:p??h,size:"sm",className:"mt-two mr-2 w-5 shrink-0"})});J1e.displayName="LeftIcon";const ebe=I.memo(({onClick:e,url:t,category:n})=>n==="shortcuts"?null:z1e(t)?o.jsx("div",{className:"flex h-full items-center",children:o.jsx(de,{icon:Xn,size:"sm",className:"text-quiet"})}):o.jsx("button",{className:"appearance-none",onPointerDown:r=>{r.stopPropagation(),r.preventDefault(),e(r)},type:"button",children:o.jsx(de,{icon:t?J7e:ba,size:"sm",className:"-mb-xs"})}));ebe.displayName="RightIcon";const tbe=I.memo(()=>{const{$t:e}=Z();return o.jsxs("div",{className:"flex w-full min-w-0 flex-row items-center whitespace-pre p-[8px] leading-tight",children:[o.jsx(F,{className:"-mr-three px-three shrink-0",color:"super",inline:!0,variant:"small",children:o.jsx(de,{size:"xs",icon:Sc})}),o.jsx(F,{variant:"tinyMono",color:"super",className:"ml-2",children:e({defaultMessage:"Comet Assistant",id:"ML678gEBQ1"})})]})});tbe.displayName="CometAssistantRow";const bx=I.memo(({isOpen:e,suggestedQueries:t,focusedIndex:n,setFocusedIndex:r,handlePasteQuery:s,handleSubmit:a,dropdownClassName:i,dropdownType:l="query",components:c,value:u,children:f,popoverClassName:m,categoryTitleClassName:p,userInputQuery:h,portalTarget:g,placement:y="bottom",allowNonSequentialMatch:x=!1,isCometHome:v,scrollableShards:b=[],floatingStrategy:_,shouldEnableStacking:w=!1})=>{const{trackEvent:C}=Te(),{RightIconComponent:S=ebe,LeftIconComponent:E=J1e,QueryContentComponent:k}=c??{},M=d.useMemo(()=>t.map(({query:q,query_uuid:H,image:K,imageDark:G,url:ee,title:Y,description:te="",identifier:se="",category:ae,subscribed:pe=!1,metadata:fe,submission_query:ge,icon:Se,is_comet_assistant:je,shouldShowTitle:ye,actionHandler:be,isPersonalized:Ne},ke,Ie)=>{if(l==="select")return{input:q,completion:"",query_uuid:H,title:Y,image:K,imageDark:G,url:ee,description:te,identifier:se,category:ae,subscribed:pe,submission_query:ge,icon_name:Se,is_comet_assistant:je,shouldShowTitle:ye,actionHandler:be,isPersonalized:Ne};const Ce=h?n===-1?u:h:u;return Ce.length>0&&q.startsWith(Ce)?{input:Ce,completion:q.slice(Ce.length),query_uuid:H,title:Y,image:K,imageDark:G,url:ee,category:ae,metadata:fe,...(ae==="ticker"||ae==="news")&&{description:te},submission_query:ge,icon_name:Se,is_comet_assistant:je,shouldShowTitle:ye,actionHandler:be,isPersonalized:Ne}:x&&!te&&Ce.length>0&&Ce.length<=q.length&&Ie[ke]&&Z1e(Ce,Ie[ke],!0)[0]?{input:"",completion:q,inputs_and_completions:vgt(Ce,q),query_uuid:H,title:Y,image:K,url:ee,category:ae,metadata:fe,...(ae==="ticker"||ae==="news")&&{description:te},submission_query:ge,icon_name:Se,is_comet_assistant:je,shouldShowTitle:ye,actionHandler:be,isPersonalized:Ne}:{input:q,completion:"",query_uuid:H,title:Y,image:K,imageDark:G,url:ee,category:ae,metadata:fe,...(ae==="ticker"||ae==="news")&&{description:te},submission_query:ge,icon_name:Se,is_comet_assistant:je,shouldShowTitle:ye,actionHandler:be,isPersonalized:Ne}}),[t,u,l,h,n,x]),j=d.useMemo(()=>igt(M),[M]),R=d.useMemo(()=>lgt(j),[j]),O=d.useMemo(()=>R.some(q=>j[q]?.some(H=>H.is_comet_assistant)),[R,j]),D=d.useCallback((q,H)=>{if(H){window.open(H,"_blank");return}C("auto suggestion filled",{}),s(q)},[s,C]),P=B("!block w-full",y==="bottom"?"mt-[-5px]":"mb-[-5px]",m),A=y==="bottom"?"rounded-b-2xl":"rounded-t-2xl",T=d.useRef(null),[N,L]=d.useState(null),U=!e||t.length===0;Vat({ref:T,onResize:q=>{L(q?.height??null)}});const $=d.useMemo(()=>({portalTarget:g??void 0,removeScroll:!0,shards:b}),[g,b]),V=d.useMemo(()=>o.jsx("div",{className:B(y==="bottom"?"!border-t-subtlest shadow-super/10 rounded-b-2xl shadow-md dark:shadow-lg dark:shadow-black/10":"!border-b-subtler rounded-t-2xl","border-subtle border","bg-raised p-3",i),children:o.jsx(ve.div,{animate:{height:U?0:N??"auto"},initial:{height:0},transition:{height:{type:"spring",bounce:.1,duration:.05}},style:{overflow:"hidden"},children:o.jsxs("div",{ref:T,className:"flex flex-col items-stretch","data-testid":"autosuggestion-container",children:[v&&O?o.jsx(tbe,{}):null,R.map((q,H)=>{const K=j[q],G=O8[q]||{order:999,showHeader:!1};let ee=0;for(let Y=0;Y<H;Y++){const te=R[Y]??"";ee+=j[te]?.length||0}return K?.length?o.jsx(Q1e,{category:q,suggestions:K||[],categoryConfig:G,value:u,focusedIndex:n,setFocusedIndex:r,handleSubmit:a,indexOffset:ee,LeftIconComponent:E,RightIconComponent:S,QueryContentComponent:k,onFillButtonClick:D,titleClassName:p},q):null})]})})}),[E,k,S,p,N,i,n,j,a,O,v,D,y,U,r,R,u]),W=d.useMemo(()=>_?{strategy:_}:void 0,[_]),Q=d.useMemo(()=>w?{className:"flex z-[1]"}:void 0,[w]);return o.jsx(ei,{isOpen:e,matchTargetWidth:!0,disableAnimation:!0,placement:y,childrenClassName:"grow block",contentClassName:P,borderRadius:A,avoidCollisions:!1,disableShadow:!0,overlayProps:$,content:V,floatingElementProps:Q,...W&&{customFloatingUIOptions:W},children:f})});bx.displayName="SuggestDropdown";const Zg="homepage-widgets",JB="homepage/weather",wgt="homepage-widgets/dismiss",Cgt=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),Sgt=e=>{let t="existing";return e<3?t="new":e<10&&(t="activated"),t},Egt=async({searchMode:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/homepage-widgets",t,{params:{query:{searchMode:e===ue.STUDY?"search":e}},timeoutMs:Ht.LOW,numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{message:"Homepage widget fetch failed",cause:r});return n.widgets}catch(n){return ne.error("Failed to get homepage widgets",n),[]}},Mgt=async({params:e,reason:t})=>{try{const{data:n,error:r}=await re.GET("/rest/homepage-widgets/public",t,{params:{query:e},timeoutMs:Ht.LOW,numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{message:"Homepage widget fetch failed",cause:r});return n.widgets}catch(n){return ne.error("Failed to get homepage widgets",n),[]}},kgt=async({widgetUuid:e,reason:t})=>{try{return(await re.POST("/rest/homepage-widgets/dismiss/{widget_uuid}",t,{params:{path:{widget_uuid:e}},numRetries:1})).data}catch(n){return ne.error("Failed to dismiss homepage widget",n),null}},Tgt=({widget:e,reason:t})=>{const n=ot();return dt({mutationKey:[wgt],mutationFn:()=>kgt({widgetUuid:e.uuid??"",reason:t}),onMutate:async()=>{e.size==="ROW"&&n.setQueryData([Zg],r=>r.filter(s=>s.uuid!==e.uuid))}})},nbe=async({location:e,locale:t,reason:n})=>{const r={...e?Cgt(e):{},"accept-language":t},s=await re.GET("/rest/homepage-widgets/weather",n,{headers:r});if(!s.response.ok||!s.data)throw new Error("Failed to get weather");return s.data.data[0]},Ngt=he(async()=>{const{WatchlistSelections:e}=await X(async()=>{const{WatchlistSelections:t}=await import("./WatchlistSelections-DlHfd66R.js");return{WatchlistSelections:t}},__vite__mapDeps([4,1,2,5,6,7]));return{default:e}},{loading:()=>o.jsx(rbe,{})}),jgt=5,Agt=e=>{const{isSelected:t}=e;return o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Me,{icon:t?dr:ar,size:"small",pill:!0})})},Igt=({onClear:e})=>o.jsx(Me,{icon:kt,size:"tiny",pill:!0,onClick:e}),Rgt=({isOpen:e,onClose:t,watchlistType:n,origin:r})=>{const{isMobileStyle:s,isMobileUserAgent:a}=xe(),i="watchlist-modal",{$t:l}=Z(),c=ot(),{trackEvent:u}=Te(),{deprecatedOpenToast:f}=fn(),m=d.useRef(null),[p,h]=d.useState(""),[g,y]=d.useState(ce),[x,v]=d.useState(-1),[b,_]=d.useState(!1),[w,C]=d.useState(!1),[S,E]=d.useState();d.useEffect(()=>{u("watchlist modal viewed",{origin:r,watchlistType:n})},[r,n,u]);const M=(se=>se==="sports"||se==="finance"||se==="f1")(S?.category)?S.category:n.toLowerCase(),j=d.useCallback(()=>{b&&c.invalidateQueries({queryKey:[Zg]}),t()},[b,c,t]),{data:R,isLoading:O}=ZB({watchlistType:n,reason:i}),{mutate:D}=W1e({watchlistType:n,queryClient:c,reason:i}),{mutate:P}=H1e({watchlistType:n,queryClient:c,reason:i}),{mutate:A}=agt({watchlistType:n,queryClient:c,reason:"watchlist-reorder"}),T=n==="FINANCE",N=[{text:l({defaultMessage:"Done",id:"JXdbo8Vnlw"}),variant:"inverted",onClick:j}],L=d.useCallback(async(se,ae)=>{const fe=mo().erp,Se=(await c.fetchQuery({queryKey:["watchlist",n,se,ae?.category],queryFn:()=>V1e({query:se,watchlistType:n,limit:jgt,category:ae?.category,cometRenderPlace:fe,reason:i}),staleTime:0})).map(je=>({query:je.title,title:je.title,image:je.image_url??void 0,imageDark:je.image_url_dark??void 0,description:je.description,identifier:je.identifier,category:je.category??void 0,subscribed:je.subscribed}));y(Se)},[c,n]),U=gs(L,100,{leading:!0,trailing:!0}),$=d.useCallback((se,ae)=>{U(se,ae)},[U]),V=()=>{C(!0),$(p,S)},W=()=>{C(!1)},Q=d.useCallback(se=>{const ae=se;h(ae),$(ae,S)},[$,S]),q=()=>{h(""),y([])},H=(se,ae)=>{G(se),h(""),y([]),C(!1)},K=B("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-subtle p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&g.length>0}),G=d.useCallback(se=>{if(_(!0),y(ce),h(""),(R?.length??0)>=VJ){f(l({defaultMessage:"Watchlist full (max {maxItems} items).",id:"mdbFzAw6E5"},{maxItems:VJ}),"error",2);return}se.subscribed||D(se)},[D,R?.length,f,l]),ee=d.useCallback((se,ae)=>{P({identifier:se,category:ae}),_(!0)},[P]),Y=d.useCallback((...se)=>{A(...se),_(!0)},[A]),te=d.useMemo(()=>({image:se,imageDark:ae,alt:pe})=>o.jsx(I3,{image:se,imageDark:ae,alt:pe,watchlistType:n,className:"mr-sm bg-subtler !size-8 overflow-hidden rounded",imageClassName:"inset-xs"}),[n]);return o.jsx(qt,{isOpen:e,onClose:j,title:l(D0[M].title),titleTextVariant:"baseSemi",subtitle:l(D0[M].settingsDescription),subtitleClassname:"text-sm",actionList:N,variant:s?"bottom-sheet":"medium",renderCloseButton:!1,delayClose:!1,noPadding:!0,children:o.jsxs("div",{className:"pt-md flex h-[50vh] min-h-0 shrink-0 flex-col",children:[o.jsx("div",{className:"px-md flex flex-row items-center justify-between",children:o.jsx(ogt,{watchlistType:n,selectedCategory:S,setSelectedCategory:E})}),o.jsxs("div",{className:"h-full",children:[o.jsx("div",{className:"px-md",children:o.jsx(bx,{isOpen:w&&g.length>0,suggestedQueries:g,focusedIndex:x,setFocusedIndex:v,handlePasteQuery:vn,handleSubmit:H,value:p,components:{RightIconComponent:Agt,LeftIconComponent:te},dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Xr,{onFocus:V,onBlur:W,className:K,pill:!1,ref:m,isMobileUserAgent:a,placeholder:l(D0[M].searchPlaceholder),value:p,onChange:Q,ClearIcon:Igt,...p.length>0?{onClear:q}:{}})})}),O?o.jsx(rbe,{}):o.jsx(Ngt,{subscriptions:R??ce,onRemove:ee,onUpdateOrder:Y,watchlistType:n,selectedCategory:S,isReorderingEnabled:T,isMobile:s})]})]})})},rbe=()=>o.jsx(un,{children:o.jsx("div",{style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},className:"flex flex-col items-center",children:Array.from({length:4}).map((e,t)=>o.jsx(Pgt,{},t))})}),Pgt=()=>o.jsx(z,{className:"gap-sm mt-2 flex w-full flex-col px-6 py-2",children:o.jsx(z,{variant:"subtle",className:"h-10 w-full rounded-md"})});async function Kon({headers:e,reason:t}){const n=await re.GET("/rest/shopping/user-orders",t,{timeoutMs:Pe({productionMs:5e3}),headers:e});if(n.error)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch shopping orders",cause:n.error});return n.data?.orders??ce}const Yon=async({shipping_address:e,amount:t,reason:n})=>{const{data:r,error:s}=await re.POST("/rest/shopping/calculate-tax-and-shipping",n,{body:{shipping_address:e,amount:t},timeoutMs:Pe(),numRetries:1});if(s)throw new we("API_CLIENTS_ERROR",{message:"Failed to calculate tax and shipping",cause:s});return r},Lgt=async({reason:e})=>{const{data:t,error:n}=await re.GET("/rest/shopping/retrieve-customer-shopping-info",e,{timeoutMs:Pe({productionMs:5e3})});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to get customer shopping info",cause:n});return t};async function Qon({body:e,reason:t}){const n="createShoppingOrder";try{const r=await re.POST("/rest/shopping/create-shopping-order",t,{headers:{"content-type":"application/json"},body:e,timeoutMs:1e4,numRetries:0});if(r.error)throw new we("API_CLIENTS_ERROR",{message:"Failed to create shopping order",cause:r.error});return r.data}catch(r){throw ne.log(`Error in ${n}:`,r),r}}const Xon=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/shopping/create-shopping-payment-intent",t,{body:e,timeoutMs:6e3,numRetries:0});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to create shopping payment intent",cause:r});if(n.status!=="success")throw new we("API_CLIENTS_ERROR",{message:"Failed to create payment intent",cause:n});return n},Zon=async({orderId:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/shopping/update-shopping-order",t,{body:{order_id:e,order_status:"cancelled"},timeoutMs:2e4});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to cancel shopping order",cause:r});return n},Jon=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/shopping/create-firmly-cart",t,{body:e,timeoutMs:Pe({clientSideMs:5e3})});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to create firmly cart",cause:r});return n},ein=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/shopping/set-firmly-shipping-info",t,{body:e,timeoutMs:Pe({clientSideMs:7e3})});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to set firmly shipping info",cause:r});return n},Ogt=async({reason:e})=>{const{data:t,error:n}=await re.GET("/rest/shopping/create-firmly-session",e,{timeoutMs:Pe()});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to create firmly session",cause:n});return t},tin=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/stripe/update-customer-shipping-address",t,{body:e,timeoutMs:Pe()});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to update customer shipping address",cause:r});return n},nin=async({optionKey:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/shopping/fetch-product-details",t,{body:{option_key:e},timeoutMs:4e3});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch product details",cause:r});return n},rin=async({query:e,reason:t})=>{try{const{error:n,data:r}=await re.GET("/rest/autosuggest/shopping/list-autosuggest",t,{timeoutMs:Ht.MEDIUM,params:{query:{query:e}}});if(n)throw new we("API_CLIENTS_ERROR",{message:"Failed to get shopping suggestions",cause:n});return r.results??ce}catch(n){return ne.error("Failed to get shopping suggestions",n),[]}},sin=async({page:e,reason:t})=>{const{data:n,error:r}=await re.GET("/rest/shopping/landing-page/tile-data",t,{timeoutMs:Ht.MEDIUM,params:e!==void 0?{query:{page:e}}:void 0});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get shopping tile data",cause:r});return n.shopping_tile_data.length===0&&ne.error("Empty shopping tile data"),n.shopping_tile_data},ain=async({request:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/shopping/search-shopping-for-entry",t,{body:{query:e.query,read_write_token:e.read_write_token,entry_uuid:e.entry_uuid},timeoutMs:Ht.HIGH});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to search for additional products",cause:r});return!n||n.status==="failure"?[]:[...n.shopping_widgets]},Dgt=async({reason:e})=>{const{error:t,data:n}=await re.GET("/rest/shopping/try-on-photo/get",e,{timeoutMs:Pe()});return t?{status:"error",try_on_photo_url:null}:n},Fgt=({reason:e})=>{const{data:t,isLoading:n,refetch:r}=Ue({queryKey:xE(),queryFn:()=>Dgt({reason:e})});return d.useMemo(()=>({userTryOnPhotoUrl:t?.try_on_photo_url??null,isUserTryOnPhotoLoading:n,refetchUserTryOnPhoto:r}),[t,n,r])},e$=I.memo(({message:e,subtitle:t,...n})=>o.jsx(qt,{title:e,subtitle:t,closeButtonClassname:"right-sm top-md flex self-start justify-end grow",...n}));e$.displayName="ConfirmationModal";const Ugt=({isOpen:e,onClose:t,config:n})=>{const{$t:r}=Z(),s=ot(),[a,i]=d.useState(!1),{userTryOnPhotoUrl:l,isUserTryOnPhotoLoading:c}=Fgt({reason:"avatar_management"}),{deleteAvatar:u}=b1e({reason:"avatar_management"}),f=async()=>{await u(),s.setQueryData(xE(),{try_on_photo_url:null}),i(!1),t()},m=()=>{t(),n?.onRetry&&n.onRetry()},p=()=>{t()},h=n?.source==="toast";return o.jsxs(o.Fragment,{children:[o.jsx(qt,{isOpen:e,onClose:t,title:r({defaultMessage:"Your avatar photo",id:"fXPKMrv34o"}),centerTitle:!0,modalClassname:"max-w-lg mx-auto",children:o.jsxs("div",{className:"flex flex-col items-center gap-6 p-6",children:[c?o.jsx(Fr,{}):l?o.jsx(z,{className:"gap-sm relative isolate flex flex-col overflow-hidden rounded-lg border",children:l&&o.jsx(ns,{src:l,alt:"Your Avatar",imageClassName:"max-h-[500px] max-w-full object-contain",containerClassName:"flex justify-center",includeLightBoxModal:!1})}):o.jsx(F,{variant:"smallMono",children:r({defaultMessage:"No avatar uploaded",id:"RDTTX4AfZg"})}),o.jsx("div",{className:"flex gap-3",children:h?o.jsxs(o.Fragment,{children:[o.jsx(me,{variant:"border",onClick:m,text:r({defaultMessage:"Retry",id:"62nsdyMyIO"})}),o.jsx(me,{variant:"primary",onClick:p,text:r({defaultMessage:"Continue shopping",id:"Yywm0pqtZa"})})]}):l&&o.jsx(me,{variant:"common",onClick:()=>i(!0),text:r({defaultMessage:"Delete",id:"K3r6DQW7h+"})})})]})}),o.jsx(e$,{isOpen:a,onClose:()=>i(!1),message:r({defaultMessage:"Are you sure you want to delete?",id:"y7o4RnAvXG"}),subtitle:r({defaultMessage:"Once deleted, your avatar cannot be recovered.",id:"CtPvgMBMh3"}),children:o.jsxs("div",{className:"-mb-lg flex justify-center gap-3 p-6",children:[o.jsx(me,{variant:"common",onClick:()=>i(!1),text:r({defaultMessage:"No",id:"oUWADlOjJt"})}),o.jsx(me,{variant:"primary",onClick:f,text:r({defaultMessage:"Yes",id:"a5msuh5ORp"})})]})})]})},Bgt=()=>{const e=Ot();return d.useMemo(()=>{const n=e?.get("pt")||Vqe();if(n)try{const r=atob(n);return JSON.parse(r).title}catch{return}},[e])},$gt="https://api.whatsapp.com/send/?phone=18334363285&text&type=phone_number&app_absent=0",U_=({origin:e})=>{const{trackEvent:t}=Te();return d.useCallback(()=>{Ok(),t("whatsapp button clicked",{origin:e}),window.open($gt,"_blank")},[t,e])},Vgt=["sso"],P3=I.memo(()=>o.jsxs("div",{className:"flex flex-row items-center",children:[o.jsx($a,{variant:"mark",color:"foreground",size:"small"}),o.jsx("div",{className:"ml-2",children:o.jsx($a,{variant:"text",color:"foreground",size:"small"})})]}));P3.displayName="PerplexityLogo";const Wgt=I.memo(({headerTextLineOne:e="Get answers, not links.",headerTextLineTwo:t="Search smarter today.",modalOrigin:n=Le.MARKETING_LANDING_PAGE})=>{const{isMobileStyle:r}=xe(),[s,a]=d.useState("");return d.useEffect(()=>{typeof window<"u"&&a(a3(window.location.origin,Ou,n))},[n]),o.jsxs("div",{className:"px-lg py-xl flex min-h-screen flex-col items-center justify-between overflow-y-auto",children:[o.jsx(P3,{}),o.jsxs("div",{className:"py-2xl flex flex-col items-center justify-center",children:[e&&o.jsx(F,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:e}),t&&o.jsx(F,{variant:r?"entry-title":"display",color:"default",className:"text-center",children:t}),o.jsx(F,{variant:"base",color:"light",className:"mt-4 max-w-[400px] text-center",children:o.jsx(ie,{defaultMessage:"Join millions who have switched to Perplexity, the modern search engine.",id:"n7AYVi1U68"})}),o.jsx($1,{autoFocus:!0,redirectUrl:s,showInternal:!0,className:"mt-xl w-full",disallowedMethods:Vgt})]}),o.jsxs(F,{variant:"small",color:"light",children:[" ",new Date().getFullYear()," Perplexity AI"]})]})});Wgt.displayName="MainContent";const Hgt=async({stringProperties:e,headers:t,reason:n})=>{if(!t["accept-language"])return ne.warn("No accept-language header provided for translation request"),e;const r=await re.POST("/rest/translation/translate",n,{body:{texts:e},headers:{...t}});return r.response.ok?r.data?.translated_texts??[]:(ne.error(`Failed to fetch translations for ${e.join(", ")}}`),[])},zgt=e=>e==null||e==="";async function Ggt({originalContent:e,keysToTranslate:t,reason:n}){const r=Zl();if(r===Wd)return e;const s=t.map(i=>e[i]);if(s.some(zgt))return e;const a=await Hgt({stringProperties:s,headers:{"accept-language":r},reason:n});if(a.length===s.length){const i={...e};return t.forEach((l,c)=>{i[l]=a[c]}),i}return e}const t$=d.memo(({className:e,innerClassName:t,gridClassName:n,children:r,fadeOut:s,dotClassName:a,highlightClassName:i,animate:l=!0,gridSize:c=22,count:u=20,style:f})=>{const[m,{width:p,height:h}]=Ho(),[g,y]=d.useState([]),[x,v]=d.useState(0),[b,_]=d.useState(0),w=d.useRef(null),C=d.useRef(new Set),S=d.useCallback(()=>{const k=Math.floor(Math.random()*x)+1,M=Math.floor(Math.random()*b)+1,j=`${k}-${M}`;if(C.current.has(j))return;const R={col:k,row:M,id:j,duration:Math.floor(Math.random()*1001)+1e3,isSuper:Math.floor(Math.random()*5)%5===0};y(O=>{const D=[R,...O];if(D.length>u){const P=D.pop();P&&C.current.delete(P.id)}return C.current.add(j),D})},[x,b,u]);d.useEffect(()=>{if(l)return w.current=setInterval(S,100),()=>{w.current&&clearInterval(w.current)}},[S,l]),d.useEffect(()=>{v(Math.floor(p/c)),_(Math.floor(h/c))},[p,h,c]);const E=s?{maskImage:"radial-gradient(black, transparent)"}:void 0;return o.jsxs("div",{className:B("bg-base dotGridContainer pointer-events-none relative isolate",e),ref:m,style:f,children:[o.jsxs("div",{className:"absolute inset-0 overflow-hidden",style:E,children:[o.jsx("div",{className:B("dotHighlightGrid bg-inverse/20 absolute inset-0",i),children:g.map(k=>o.jsx(sbe,{item:k,className:a},k.id))}),o.jsx("div",{className:B("dotGrid absolute inset-0",n)})]}),o.jsx("div",{className:B("relative",t),children:r})]})});t$.displayName="DotGrid";const sbe=d.memo(({item:e,className:t})=>o.jsx("div",{className:B("gridDot text-foreground",t,{highlight:e.isSuper}),style:{gridColumn:e.col,gridRow:e.row,animationDuration:`${e.duration}ms`}}));sbe.displayName="GridDot";function qgt(){_x(void 0)}function Jg(e={}){const t=new URL(window.location.href);for(const[n,r]of Object.entries(e))typeof r>"u"?t.searchParams.delete(n):t.searchParams.set(n,r);_x(Object.fromEntries(t.searchParams))}function _x(e){const t=new URL(window.location.href),r=(e?new URLSearchParams(e):new URLSearchParams).toString();r!==t.searchParams.toString()&&window.history.replaceState({},"",`?${r}`)}function abe(){return xp("pplx.partner_banner",null,{initializeWithValue:!1})}function obe(){return xp("pplx.partner_discount_code",null,{initializeWithValue:!1})}he(()=>X(()=>import("./AppDownloadQR-Ci3CHQSY.js"),__vite__mapDeps([0,1,2])),{loading:()=>o.jsx(Sve,{})});const Kgt=({displayAs:e,className:t,allowBgImage:n=!0})=>{const r=["/static/images/app-icons/nasa.png","/static/images/app-icons/jungle.png","/static/images/app-icons/flower.png","/static/images/app-icons/sf.png","/static/images/app-icons/books.png","/static/images/app-icons/cat.png"],s=d.useMemo(()=>r[Math.floor(Math.random()*r.length)],[]);return o.jsxs("div",{className:B("bg-dark relative inline-flex aspect-square size-20 items-center justify-center overflow-hidden shadow-lg",{"p-md rounded-[20px]":e==="ios","p-md rounded-full":e==="android"},t),children:[n&&o.jsx("img",{className:B("absolute inset-0 opacity-50 duration-150"),src:s,suppressHydrationWarning:!0,alt:""}),o.jsx("div",{className:"relative flex items-center justify-center",children:o.jsx($a,{variant:"mark",size:"md",color:"white"})}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/20 dark:border-white/10"})]})},ibe=()=>{const{device:{isAndroid:e}}=Pt();return o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("div",{className:"flex items-center",children:[...Array(5)].map((t,n)=>o.jsx(de,{icon:Ed,size:16,className:"text-super"},`rating-star-full-${n}`))}),o.jsx("div",{children:o.jsx(F,{variant:"tiny",color:"light",className:"mt-2xs flex items-end text-center",children:o.jsx(ie,{defaultMessage:"{amount} Ratings",id:"8lpjhgQpdU",values:{amount:e?"960K":"252K"}})})})]})},lbe=I.memo(({campaignData:e,dismiss:t,translated:n})=>{const r="reviews",{device:{isIOS:s}}=Pt(),[a,i]=d.useState(!!n),[l,c]=d.useState(e),{trackEvent:u}=Te();d.useEffect(()=>{if(n)return;(async()=>{const x=await Ggt({originalContent:e,keysToTranslate:["title_1","subtext_1","button_text"],reason:r});c(x),i(!0)})()},[e,n]),d.useEffect(()=>{u("mweb splash page viewed",{})},[u]);const{title_1:f,subtext_1:m,button_text:p,button_link:h}=l,g=d.useCallback(()=>{u("app download button selected",{downloadAppDestination:"mobile",origin:"marketingLandingPage"}),Ok(),window.open(h,"_blank")},[h,u]);return o.jsxs("div",{className:B("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[t&&o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Me,{pill:!0,variant:"noBackground",size:"small",icon:kt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:t})}),o.jsx(P3,{}),o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx(Kgt,{displayAs:s?"ios":"android",allowBgImage:!1}),o.jsxs("div",{className:B("flex flex-col items-center"),children:[o.jsx(Ye,{children:a?o.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex flex-col items-center",children:[o.jsx(F,{variant:"entry-title",color:"default",textCenter:!0,children:f}),o.jsx(F,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:m})]}):o.jsxs("div",{className:"invisible flex flex-col items-center",children:[o.jsx(F,{variant:"entry-title",color:"default",textCenter:!0,children:e.title_1}),o.jsx(F,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:e.subtext_1})]})}),o.jsx("div",{className:"mt-4",children:o.jsx(ibe,{})})]})]}),o.jsx("div",{className:"flex w-full flex-col items-center",children:o.jsx(Ye,{children:a?o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},className:"flex w-full flex-col items-center",children:o.jsx(me,{variant:"inverted",size:"large",text:p,icon:s?Hb:LO,fullWidth:!0,extraCSS:"max-w-xs rounded-xl mx-auto",onClick:g})}):o.jsx("div",{className:"invisible flex w-full flex-col items-center",children:o.jsx(me,{variant:"inverted",size:"large",text:e.button_text})})})})]})});lbe.displayName="Reviews";const Ygt=({origin:e})=>{const{device:{isIOS:t}}=Pt(),{downloadAppLink:n}=mf(e),{$t:r}=Z();return o.jsx(qe,{href:n,children:o.jsxs("div",{className:"gap-x-md py-lg flex items-center justify-center",children:[o.jsx("div",{"data-color-scheme":"dark",className:B("border-subtler bg-base inline-block border",{"p-sm rounded-xl":t,"p-md rounded-full":!t}),children:o.jsx("div",{className:"flex aspect-square w-12 items-center justify-center",children:o.jsx($a,{variant:"mark",size:"md",color:"white"})})}),o.jsxs("div",{className:"-mt-xs",children:[o.jsx(F,{variant:"baseSemi",children:"Perplexity"}),o.jsx(F,{variant:"small",color:"light",children:r({defaultMessage:"Search and discovery with AI",id:"n3oaAt293P"})}),o.jsx(ibe,{})]})]})})},B_=()=>{const{value:e,loading:t}=Qs({flag:"mweb-upsell-to-whatsapp",defaultValue:!1});return d.useMemo(()=>({mwebUpsellWhatsApp:e,loadingMwebUpsellWhatsApp:t}),[e,t])},Qgt=({origin:e,isOpen:t,onClose:n,sheetModalVariant:r})=>{const{trackEventOnce:s,trackEvent:a}=Te(),{$t:i}=Z(),{handleAppDownloadClicked:l}=mf("install-gate-modal-upsell"),c=Bgt(),u=U_({origin:"install-gate"}),{mwebUpsellWhatsApp:f}=B_();d.useEffect(()=>{s("install modal opened",{origin:e})},[e,s]);const m=d.useCallback(()=>{a("install modal closed",{origin:e}),n()},[n,e,a]);return o.jsx($B,{isOpen:t,onClose:m,variant:r,showCloseButton:!1,overlayVariant:"default-less-blur",children:f?o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"section-title",className:"px-sm text-center",children:o.jsx(ie,{defaultMessage:"Keep the conversation going.",id:"4/VUgNnQik"})}),o.jsx(F,{variant:"section-title",className:"px-sm text-center",children:o.jsx(ie,{defaultMessage:"Try Perplexity on WhatsApp",id:"YTg7pt2IE4"})}),o.jsxs("div",{className:"mt-md mb-lg flex flex-row items-center justify-center gap-4",children:[o.jsx("div",{className:"aspect-square size-10 overflow-hidden rounded-full shadow-lg",children:o.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{children:"Perplexity"}),o.jsx(F,{variant:"smallMono",color:"super",textCenter:!0,children:"+1 (833) 436-3285"})]})]}),o.jsx(me,{variant:"primary",text:i({defaultMessage:"Continue on WhatsApp",id:"I7Lrfco0vS"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("whatsapp button clicked",{origin:"install-gate"}),u()}})]}):o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"page-title",className:"px-sm text-center",children:c??o.jsx(ie,{defaultMessage:"One verified answer to any question",id:"C+F6JBwTvO"})}),o.jsx(Ygt,{origin:"install-gate-modal-upsell"}),o.jsx(me,{variant:"primary",text:i({defaultMessage:"Open Perplexity app",id:"u0MSV+x6J3"}),size:"small",extraCSS:"h-[44px] mb-md",onClick:()=>{a("app download button clicked",{origin:"install-gate"}),l()}})]})})},Xgt={xlarge:[64,"h-[64px] w-auto leading-[64px]"],large:[48,"h-[48px] w-auto leading-[48px]"],regular:[32,"h-[32px] w-auto leading-[32px]"],small:[18,"h-[18px] w-auto leading-[18px]"],tiny:[12,"h-[12px] w-auto leading-[12px]"]},Zgt=he(async()=>{const{Emoji:e}=await X(async()=>{const{Emoji:t}=await import("./emoji-picker-react.esm-DT3RrM2T.js");return{Emoji:t}},__vite__mapDeps([8,1,2]));return{default:e}},{nextFrame:!0}),gf=I.memo(({unified:e,size:t})=>{const[n,r]=Xgt[t]??[];return e?o.jsx("div",{className:`relative align-middle ${r}`,children:o.jsx(Zgt,{emojiStyle:"native",unified:e,size:n})}):null});gf.displayName="PerplexityEmoji";const Jgt=he(()=>X(()=>import("./emoji-picker-react.esm-DT3RrM2T.js"),__vite__mapDeps([8,1,2])),{nextFrame:!0}),cbe=I.memo(({emoji:e,setEmoji:t,size:n="large"})=>{const{$t:r}=Z(),{colorScheme:s}=jr(),[a,i]=d.useState(!1),l=d.useCallback(g=>{i(!1),t(g.unified)},[t]),c={small:"h-8 w-8",medium:"h-11 w-11",large:"h-14 w-14"},u=d.useCallback(()=>i(!1),[]),f=d.useMemo(()=>({showPreview:!1}),[]),m=d.useMemo(()=>o.jsx(Jgt,{emojiStyle:"native",onEmojiClick:l,autoFocusSearch:!0,width:"100%",theme:s==="dark"?"dark":"light",previewConfig:f}),[s,l,f]),p=d.useCallback(()=>t(""),[t]),h=d.useCallback(()=>i(g=>!g),[]);return o.jsxs("div",{className:"relative",children:[o.jsx(F,{variant:"smallBold",children:r({defaultMessage:"Emoji",id:"34NuzGC3+4"})}),o.jsxs("div",{className:"mt-sm relative inline-block",children:[e!==""&&o.jsx("div",{className:"-right-sm -top-sm absolute",children:o.jsx(me,{pill:!0,size:"tiny",icon:kt,onClick:p})}),o.jsx(ei,{isOpen:a,onClose:u,content:m,hasInteractiveContent:!0,children:o.jsx(z,{onClick:h,variant:"subtler",bgHover:"subtle",className:`p-sm flex cursor-pointer items-center justify-center rounded-full ${c[n]}`,children:e===""?o.jsx("div",{className:"flex size-full items-center justify-center",children:o.jsx(de,{icon:ar,size:"md"})}):o.jsx("div",{className:"flex size-full items-center justify-center",children:o.jsx(gf,{unified:e,size:"regular"})})})})]})]})});cbe.displayName="CollectionEmojiPicker";const eyt={in:{opacity:1,scale:1},out:{opacity:0,scale:.9}},ube=I.memo(e=>{const{cancelButton:t,confirmButton:n,description:r,title:s,ref:a}=e,{handleCancel:i,handleConfirm:l}=Htt();return o.jsx(tx,{asChild:!0,onEscapeKeyDown:c=>{c.stopPropagation()},ref:a,children:o.jsxs(ve.div,{animate:"in",className:"border-subtlest bg-base p-lg rounded-lg border shadow-lg",exit:"out",initial:"out",transition:{duration:.2},variants:eyt,children:[o.jsxs(l_,{children:[o.jsx(X5,{children:s}),o.jsx(tU,{children:r})]}),o.jsxs("div",{className:"gap-md flex flex-col items-center",children:[o.jsx(F,{children:r}),o.jsxs("div",{className:"gap-md mx-auto flex",children:[o.jsx(me,{variant:"common",onClick:i,testId:"confirm-close-modal-cancel-button",...t}),o.jsx(me,{variant:"rejected",onClick:l,testId:"confirm-close-modal-confirm-button",...n})]})]})]},"confirm-close-modal-content")})});ube.displayName="ConfirmCloseModalContent";const dbe=I.memo(e=>{const{children:t,className:n="",motionProps:r,ref:s}=e;return o.jsx(Q5,{asChild:!0,ref:s,children:o.jsx(ve.div,{className:B("bg-backdrop/25 fixed inset-0 flex flex-col items-center justify-center backdrop-blur-[1px]",n),initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},...r,children:t},"confirm-close-modal-overlay")})});dbe.displayName="ConfirmCloseModalOverlay";const fbe=I.memo(function(){const{$t:t}=Z(),n=d.useMemo(()=>({text:t({defaultMessage:"Cancel",id:"47FYwba+bI"}),testId:"default-confirm-modal-cancel-button"}),[t]),r=d.useMemo(()=>({text:t({defaultMessage:"Discard",id:"nmpevlUATU"}),testId:"default-confirm-modal-discard-button"}),[t]);return o.jsx(dbe,{children:o.jsx(ube,{cancelButton:n,confirmButton:r,description:t({defaultMessage:"Discard any unsaved changes?",id:"p7u+eL35XP"}),title:t({defaultMessage:"Discard changes?",id:"41zpq3nBvm"})})})});fbe.displayName="DefaultConfirmModal";const F8=I.memo(({isOpen:e,closeModal:t,existingCollection:n,entryUUID:r,frontendContextUUID:s,onCreate:a,content:i})=>{const l="space-create-modal",{$t:c}=Z(),{isMobileStyle:u,isMobileUserAgent:f}=xe(),{createCollection:m,createCollectionForThread:p}=nx({reason:l}),[h,g]=d.useState({title:i?.title??n?.title??"",description:i?.description??n?.description??"",instructions:i?.instructions??n?.instructions??"",emoji:i?.emoji??n?.emoji??"",accessLevel:n?.access??mE,enableWebByDefault:n?.enable_web_by_default??!0}),[y,x]=d.useState(!1),{title:v,description:b,emoji:_,instructions:w}=h,C=v?.length===0||v?.length>HK||b?.length>zK||w?.length>WK,S=A=>{g(T=>({...T,...A})),x(!0)},E=vt(),k=d.useCallback(A=>{S({title:"",description:"",instructions:"",emoji:"",accessLevel:mE}),t(),E.push(`/spaces/${A.slug}`),a?.(A)},[t,E,a]),M=d.useCallback(()=>{r?p({...h,entryUUID:r,frontendContextUUID:s??"",callback:k}):m({...h,callback:k})},[r,p,h,s,k,m]),j=d.useMemo(()=>[{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:t,shouldShowConfirmDialog:!0},{text:c({defaultMessage:"Continue",id:"acrOozm08x"}),variant:"primary",disabled:C,onClick:()=>M()}],[t,c,C,M]),R=d.useCallback(A=>S({title:A}),[]),O=d.useCallback(A=>S({emoji:A}),[]),D=d.useCallback(A=>S({description:A}),[]),P=d.useCallback(A=>S({instructions:A}),[]);return o.jsx(qt,{title:c({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),isOpen:e,onClose:t,actionList:j,confirmOnClose:y?o.jsx(fbe,{}):void 0,children:o.jsxs("div",{className:"space-y-md",children:[o.jsxs("div",{className:"space-x-sm flex items-center",children:[o.jsx("div",{className:"grow",children:o.jsx(Xr,{isMobileUserAgent:f,label:c({defaultMessage:"Title",id:"9a9+wwWy4u"}),value:v,autoFocus:!0,onChange:R,placeholder:c({defaultMessage:"Team Space...",id:"CR3RufeyCu"}),maxLength:HK})}),o.jsx("div",{className:"shrink-0",children:o.jsx(cbe,{emoji:_,setEmoji:O,size:"medium"})})]}),o.jsx(Wa,{isMobileStyle:u,isMobileUserAgent:f,placeholder:c({defaultMessage:"A collaborative space for discussing latest insights...",id:"r+xI8TGuu9"}),label:c({defaultMessage:"Description",id:"Q8Qw5BZ1VA"}),isOptional:!0,minRows:2,value:b,onChange:D,maxLength:zK}),o.jsx(Wa,{isMobileStyle:u,isMobileUserAgent:f,placeholder:c({defaultMessage:"Always respond in a formal tone and prioritize data-driven insights...",id:"ERATUnZFe3"}),label:c({defaultMessage:"Custom Instructions",id:"nRK52SgZ/p"}),subtitle:c({defaultMessage:"Give instructions to the AI that affects every thread in this space.",id:"6peDHp5LgI"}),isOptional:!0,value:w,minRows:2,onChange:P,maxLength:WK})]})})});F8.displayName="SpaceCreateModal";const tyt=e=>e?rDe(e):void 0,Eh=(e,t)=>{if(!e)return"";const n=tyt(e.currency);return n==null?"":t(e.price_minor_units/n,{style:"currency",currency:e.currency})},mbe=()=>{const e=vt(),{trackEvent:t}=Te(),n=d.useCallback(async({origin:r,discountCode:s,tier:a,referralCode:i,subscriptionTier:l="pro",redirectPath:c})=>{const u=new URL(`/${l}/payment`,window.location.origin);return u.searchParams.set("plan",a),u.searchParams.set("origin",r),s&&u.searchParams.set("promotion_code",s),c&&u.searchParams.set("redirect_path",c),t("pro checkout started",{subscriptionTier:l,origin:r,discountCode:s??"",referralCode:i??"",tier:"monthly",flowType:"embedded_checkout"}),e.push(u.toString()),!0},[e,t]);return d.useMemo(()=>({navigateToPayment:n}),[n])},zJ={RAMP:"Welcome Ramp members. Your 6 month Perplexity Pro free trial starts now!",FREEATT:"Welcome ATT Employees.  Your complimentary 1-year subscription starts now!",FREEAWS:"Welcome AWS Employees.  Your complimentary 1-year subscription starts now!",RABBIT:"Welcome r1 owners.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEUT:"Welcome UT Staff.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEDATABRICKS:"Welcome Databricks team.  Your complimentary 1-year Perplexity Pro subscription starts now!",FREESRA:"Welcome SRA team. Your complimentary 1-year Perplexity Pro subscription starts now!",HBSTECH:"Welcome HBS Tech Conference Attendees.  Your complimentary 6 month Perplexity Pro subscription starts now!",HBSSTAFF:"Welcome HBS Tech Conference Attendees.  Your complimentary 1 year Perplexity Pro subscription starts now!",FREENEWSROOM:"Welcome Friends!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEINKITT:"Welcome Inkitt Writers!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETIME:"Welcome Time team!  Your complimentary 1-year subscription to Perplexity Pro starts now!",FREETMOBILE:"Welcome T-Mobile team!  Your complimentary 1-year subscription to Perplexity Pro starts now!","11LABS":"Welcome! Your complimentary 3-month subscription to Perplexity Pro starts now!",FREECAVS:"Welcome Cavs team! Your complimentary 1-year Perplexity Pro subscription starts now!",NOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",FREENOTHING6:"Welcome Nothing owners. Your complimentary 6-month Perplexity Pro subscription starts now!",NOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",FREENOTHING1:"Welcome Nothing owners. Your complimentary 1-year Perplexity Pro subscription starts now!",HOOHACKS:"Welcome HooHacks Community. Your 1-year Perplexity Pro free trial starts now!",NJED:"Welcome NJ ED Community. Your 1-year Perplexity Pro free trial starts now!",COPYAI:"Welcome Copy AI customers! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST6:"Welcome Raycast users! Your 6-month complimentary Perplexity Pro subscription starts now!",RAYCAST3:"Welcome Raycast users! Your 3-month complimentary Perplexity Pro subscription starts now!",FREEMAGENTALOVE:"Welcome Deutsche Telekom!  Your complimentary 1-year Perplexity Pro subscription starts now!",FREEPPLXVIP:"Welcome friend of Perplexity! Your complimentary 1-year Perplexity Pro subscription starts now.",FREEUTA1:"Welcome UTA team! Your complimentray 1-year Perplexity Pro subscription starts now.",DT:"Willkommen Deutsche Telekom Kunde! Sie erhalten dank Magenta Moments ein kostenloses 1-Jahres-Abonnement fr Perplexity Pro.",MY:"Welcome! Your complimentary 1-year Perplexity Pro subscription starts now."},GC="pplx.discount_code",Y6="pplx.discount_code_expiry",pbe=()=>{const[e,t]=d.useState(null),[n,r]=d.useState(null),s=vt(),a=Ot(),i=Lt(),l=a?.get("discount_code"),{$t:c}=Z(),u=Array.isArray(l)?l[0]:l,[f,m]=d.useState(u||null),{hasAccessToProFeatures:p}=St(),h=d.useCallback(()=>{De.removeItem(GC),De.removeItem(Y6),r(null),t(null)},[]),g=d.useCallback(()=>{h(),m(null)},[h]),y=d.useCallback(()=>{if(n&&e)return;const b=De.getItem(GC);b?.startsWith("REPLIT")?(t("/static/images/replit.svg"),r("/static/images/replit_dark.svg")):b?.startsWith("BREX")?(t("/static/images/brex.svg"),r("/static/images/brex_dark.svg")):(r(null),t(null))},[n,e]),x=d.useCallback(()=>{const b=De.getItem(GC),_=De.getItem(Y6);if(p){h();return}if(!(!b&&!u)){if(_&&new Date(_)<new Date){h();return}if(!b||u&&u!==b){const w=new Date;w.setDate(w.getDate()+2),De.setItem(GC,String(u)),De.setItem(Y6,w.toString()),m(String(u)),y(),i==="/pro"&&s.push("/",void 0,"Pro page");return}if(b){m(b),y();return}}},[u,y,p,i,h,s]),v=d.useCallback(b=>{for(const _ in zJ)if(b&&b.startsWith(_))return zJ[_];return c({defaultMessage:"Redeem your promo code {discountCode}. Get started",id:"Vapo/CiOwF"},{discountCode:b})},[c]);return d.useEffect(()=>{x()},[u,x]),d.useMemo(()=>({discountCode:f,setDiscountCode:m,partnerLogoDark:n,partnerLogoLight:e,message:v(f??""),clearDiscountCode:g}),[g,f,v,n,e])},Q6="referral_code",X6="referral_code_expiry",nyt=()=>{const[e,t]=d.useState(null),[n,r]=d.useState(!1),a=Ot()?.get("referral_code"),i=Array.isArray(a)?a[0]:a,l=d.useCallback(()=>{const c=De.getItem(Q6),u=De.getItem(X6);if(!(!c&&!i)){if(u&&new Date(u)<new Date){De.removeItem(Q6),De.removeItem(X6),t(null);return}if(!c||i&&i!==c){const f=new Date;f.setDate(f.getDate()+1),De.setItem(Q6,String(i)),De.setItem(X6,f.toString()),t(String(i));return}if(c){t(c);return}}},[i]);return d.useEffect(()=>{l(),r(!0)},[i,l]),d.useMemo(()=>({referralCode:e,referralEvaluated:n}),[e,n])},ryt=()=>xp("pplx.persistent_promo_code",null),oin=Qe({pro:{defaultMessage:"Enterprise Pro",id:"h/OVAC8xF3"},max:{defaultMessage:"Enterprise Max",id:"tfsuL8YexA"}}),syt=[J({defaultMessage:"Unlimited access to Labs, Research, and Comet Max Assistant",id:"cxCDLl3cHO"}),J({defaultMessage:"Org-wide access to premium security features like data retention settings and usage analytics",id:"YgWIReWPJc"}),J({defaultMessage:"10x more file storage",id:"LgZECYLgEY"}),J({defaultMessage:"Access to our full model suite including o3-pro and Opus 4.1 Thinking",id:"0qp226NKVJ"}),J({defaultMessage:"Enhanced video generation",id:"y2H8HPGbes"}),J({defaultMessage:"Early access to new product features",id:"nFcQ0Wipw7"})],hbe={pro:"pro",max:"max"},ayt=e=>Object.keys(hbe).includes(e),iin=(e,t)=>{const n=Object.keys(hbe),r=n.indexOf(e),s=n.indexOf(t);return r<s},oyt=["enterprise_pro","enterprise_max"],lin=e=>oyt.includes(e),iyt={enterprise_pro:"pro",enterprise_max:"max"},GJ=e=>iyt[e],lyt=Qe({pro:{defaultMessage:"Perplexity Enterprise Pro Request",id:"c8Vh79Ma17"},max:{defaultMessage:"Perplexity Enterprise Max Request",id:"5x+WE7gjCk"}}),cyt=Qe({pro:{defaultMessage:"Dear Admin Team,%0D%0A%0D%0AI'd like to request an upgrade to Perplexity Enterprise Pro for our team. It would give us unlimited searches with the top AI models, better research tools, and custom workspaces while ensuring data security and administrative controls.%0D%0A%0D%0ABest regards,%0D%0A[Your Name]",id:"NQKslzlMIS"},max:{defaultMessage:"Hi there,%0D%0A[requestor email] is requesting an upgrade to Perplexity Enterprise Max, our most powerful tier yet.%0D%0A%0D%0AIt would give them access to:%0D%0A Unlimited access to Research and Labs  get comprehensive research reports, build dashboards, analyze data, and create interactive web appsall in one place%0D%0A Access to advanced AI models - Get in-depth answers powered by o3-pro, GPT 5 Thinking, or Opus 4.1 Thinking%0D%0A Greater file upload limits - from 5,000 to 10,000 in your files and 500 to 5,000 in Spaces%0D%0A Enhanced video generation - from 3 to 15 videos a month with sound powered by Veo 3%0D%0A%0D%0A[Upgrade your team member to Enterprise Max]",id:"b1ZvgOasAJ"}}),uyt=Qe({pro:{defaultMessage:"Dear Admin Team,%0D%0A%0D%0AI'd like to request a downgrade to Perplexity Enterprise Pro, as I no longer require the additional functionality offered by Enterprise Max.%0D%0A%0D%0ABest regards,%0D%0A[Your Name]",id:"BcKiJLVOOh"}});function dyt({toTier:e,fromTier:t,$t:n}){return n(e==="pro"&&t==="max"?uyt.pro:cyt[e])}function fyt({toTier:e,fromTier:t,organization:n,$t:r}){const s=n?.admins?.map(l=>l?.email).filter(l=>l!==void 0).join(";"),a=r(lyt[e]),i=dyt({toTier:e,fromTier:t,$t:r});return`mailto:${s}?subject=${a}&body=${i}`}const myt=({origin:e,reason:t,redirectPath:n})=>{const{$t:r}=Z(),s=vt(),{hasAccessToProFeatures:a,isEnterprisePro:i}=St(),{discountCode:l}=pbe(),[c]=ryt(),{referralCode:u}=nyt(),f=et(),{openVisitorLoginUpsell:m}=or({enabled:!f}),{trackEvent:p}=Te(),{organization:h,orgUser:g,isAdmin:y}=Hn({reason:t}),{subscriptionTier:x}=St(),{navigateToPayment:v}=mbe(),{device:{isWindowsApp:b}}=Pt(),{openModal:_}=xt(),{session:w}=mt(),C=d.useCallback(async()=>{if(f){if(await v({origin:e,discountCode:l??c??void 0,tier:"yearly",redirectPath:n}))return;p("pro checkout started",{subscriptionTier:"pro",origin:e,discountCode:l??"",referralCode:u??"",tier:"yearly",flowType:"stripe_checkout"});const M=await _E({request:{tier:"yearly",referralCode:a?"":u,discountCode:a?"":l,origin:e,locale:Zl(),subscriptionTier:"pro"},reason:t});M?.url?pa(M.url,"Handle click pricing yearly checkout started"):s.refresh("Handle click annual")}else m({title:r({defaultMessage:"Sign in to unlock {pro}",id:"HsM7RilrD6"},{pro:"Pro"}),origin:e})},[f,v,e,l,p,u,a,s,m,r,c,t,n]),S=d.useCallback(async(M="pro")=>{if(f){if(await v({origin:e,discountCode:l??c??void 0,tier:"monthly",referralCode:u??void 0,subscriptionTier:M,redirectPath:n}))return;p("pro checkout started",{subscriptionTier:M,origin:e,discountCode:l??"",referralCode:u??"",tier:"monthly",flowType:"stripe_checkout"});const j=await _E({request:{tier:"monthly",referralCode:a?"":u,discountCode:a?"":l,origin:e,locale:Zl(),subscriptionTier:M},reason:t});j?.url?pa(j.url,"Handle click pricing monthly checkout started"):s.refresh("Handle click monthly")}else m({title:r({defaultMessage:"Sign in to unlock {tier}",id:"8E/VXpzNhf"},{tier:M==="max"?"Max":"Pro"}),origin:e})},[f,v,e,l,u,p,a,s,m,r,c,t,n]),E=d.useCallback(M=>{const j=g?.uuid,R=g?.email,O=w?.user?.subscription_tier,D=GJ(M);if(!j||!R||!O||!ayt(O)){ne.error("Failed to open tier upgrade modal",{userId:j,from:O,tier:M});return}setTimeout(()=>{_("memberSetTierModal",{userId:j,email:R,from:O,to:D})},10)},[_,g?.uuid,g?.email,w?.user?.subscription_tier]),k=d.useCallback((M="enterprise_pro")=>{if(g&&h)if(y){i?E(M):b?pa(`https://www.perplexity.ai/onboarding/onboarding-org-subscription?tier=${M}`,"Handle click enterprise WindowsApp"):s.push(`/onboarding/onboarding-org-subscription?tier=${M}`);return}else{const j=GJ(M),R=fyt({toTier:j,fromTier:x,organization:h,$t:r});p("enterprise email request generated",{toTier:j,fromTier:x,origin:e}),pa(R,"Handle click enterprise")}else p("enterprise pro onboarding started",{origin:e}),b?pa(`https://www.perplexity.ai/onboarding/org/create?tier=${M}`,"Handle click enterprise WindowsApp"):s.push(`/onboarding/org/create?tier=${M}`)},[g,y,b,s,E,h,r,p,e,i,x]);return d.useMemo(()=>({handleClickMonthly:S,handleClickEnterprise:k,handleClickAnnual:C}),[C,k,S])},pyt=({reason:e})=>{const{data:t,isLoading:n}=Ue({queryKey:["student_partner_config",e],queryFn:async()=>{try{const{data:r,error:s}=await re.GET("/rest/academic/student-partner-config",e,{timeoutMs:Pe()});if(s)throw new Error("Failed to get student partner config");return{countryOffers:r.country_offers||{},countryNames:r.country_names||{},defaultMonths:r.default_months||1}}catch(r){return ne.error("Failed to get student partner config",r),{countryOffers:{BR:3,PH:3,MY:1,ID:1},countryNames:{BR:"Brazil",PH:"Philippines",MY:"Malaysia",ID:"Indonesia"},defaultMonths:1}}},staleTime:3e5});return d.useMemo(()=>({countryOffers:t?.countryOffers??{},countryNames:t?.countryNames??{},defaultMonths:t?.defaultMonths??1,loading:n}),[t,n])},hyt=o.jsx(ie,{defaultMessage:"Start for free, no credit card needed.",id:"uzjbT1FGfk"}),gyt=o.jsx(ie,{defaultMessage:"Upgrade productivity and learning with additional access.",id:"PnQLpmbknU"}),yyt=o.jsx(ie,{defaultMessage:"Unlock the full capabilities of Perplexity at a discount after verifying educational status.",id:"8fdSFzTbg5"}),xyt=o.jsx(ie,{defaultMessage:"Unlock Perplexity's full capabilities with early access to new products.",id:"XvAk63xTH/"}),qJ=o.jsx(ie,{defaultMessage:"Unlock the full capabilities of Perplexity for your team and enjoy new perks as they are added.",id:"fyHXg6ONTT"}),vyt=[o.jsx(ie,{defaultMessage:"Limited file uploads and image generation",id:"Yajq3Us4wf"},"ei4z2Aep9t"),o.jsx(ie,{defaultMessage:"Limited access to Perplexity Research",id:"rxiI86annI"},"Q4n6qAgIjm"),o.jsx(ie,{defaultMessage:"Limited access to advanced AI models",id:"Um2NQaGAN2"},"k+gSVpF51l"),o.jsx(ie,{defaultMessage:"Access to voice mode",id:"yzxI9mX7Ne"},"yzxI9mX7Ne")],U8=[o.jsx(ie,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),o.jsx(ie,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),o.jsx(ie,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),o.jsx(ie,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),o.jsx(ie,{defaultMessage:"Extended access to image generation",id:"YLNO5T8j3R"},"YLNO5T8j3R"),o.jsx(ie,{defaultMessage:"Limited access to video generation",id:"cuh0Xv/sI7"},"cuh0Xv/sI7"),o.jsx(ie,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD")],gbe=[o.jsx(ie,{defaultMessage:"Unlock free Pro",id:"ce/kjT07p9"},"unlock-free-pro"),o.jsx(ie,{defaultMessage:"Access to Study Mode for interactive flashcards and quizzes",id:"wvFgbv8SQM"},"study-mode"),o.jsx(ie,{defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"},"ei4z2Aep9t"),o.jsx(ie,{defaultMessage:"Access to Perplexity Labs",id:"umi6FCpljx"},"LicOGayBYr"),o.jsx(ie,{defaultMessage:"Unlimited file and photo uploads",id:"9mQ544QaNG"},"9mQ544QaNG"),o.jsx(ie,{defaultMessage:"Extended access to Perplexity Research",id:"N+s4bfYMOJ"},"+tC8PdouYw"),o.jsx(ie,{defaultMessage:"One subscription for all the latest AI models including GPT-5 and Claude Sonnet 4",id:"PjThV/+cRD"},"PjThV/+cRD"),o.jsx(ie,{defaultMessage:"{credits} in API credits",id:"RDoR9eeHom",values:{credits:o.jsx(di,{value:5,style:"currency",currency:"USD"})}},"RDoR9eeHom")],byt=()=>gbe,KJ=gbe,_yt=[o.jsx(ie,{defaultMessage:"Everything in Pro",id:"EQO1QOs7ln"},"EQO1QOs7ln"),o.jsx(ie,{defaultMessage:"Early access to our newest products",id:"WM5nzt3hTc"},"ju0j9rjkOw"),o.jsx(ie,{defaultMessage:"Unlimited access to Perplexity Labs",id:"Vc+NmvcKpa"},"8jDdpmfeqS"),o.jsx(ie,{defaultMessage:"Unlimited access to Perplexity Research",id:"+tC8PdouYw"},"8jDdpmfeqS"),o.jsx(ie,{defaultMessage:"Use advanced AI models like OpenAI o3-pro and Anthropic Claude Opus 4.1",id:"RrdqLnZKqo"},"RrdqLnZKqo"),o.jsx(ie,{defaultMessage:"Enhanced access to video generation",id:"VSNs3zFEjy"},"VSNs3zFEjy"),o.jsx(ie,{defaultMessage:"Priority support",id:"3sSrKzxPrc"},"3sSrKzxPrc")],wyt=[o.jsx(ie,{defaultMessage:"Unlimited Pro searches",id:"isnJxc1XxM"},"UnlimitedProSearches"),o.jsx(ie,{defaultMessage:"Unlimited uploads for files and images",id:"y5R/L7qsi/"},"UnlimitedUploads"),o.jsx(ie,{defaultMessage:"Unlimited collaborators in Spaces",id:"EZFr73mN/d"},"UnlimitedCollaborators"),o.jsx(ie,{defaultMessage:"Connect Google Drive, Sharepoint, Dropbox, OneDrive, and Box",id:"ALW0u9e/Ps"},"ConnectCloudServices"),o.jsx(ie,{defaultMessage:"Powered by the latest top AI models",id:"ZSiV9iYVeG"},"LatestAIModels"),o.jsx(ie,{defaultMessage:"Dedicated enterprise support",id:"6ojq3KOETz"},"DedicatedSupport"),o.jsx(ie,{defaultMessage:"Integrate with your identity provider",id:"NEWodUzDlf"},"IdentityProvider"),o.jsx(ie,{defaultMessage:"User permissioning",id:"oEuCJfg2fr"},"UserPermissioning"),o.jsx(ie,{defaultMessage:"SOC 2 Type II security compliance",id:"j84mT5pXG7"},"SOC2TypeII")],Cyt=[o.jsx(ie,{defaultMessage:"Everything in Enterprise Pro",id:"agavcX8Joo"},"EverythingInEnterprisePro"),...syt.map(e=>o.jsx(ie,{...e},e.id))],ii={standard:{title:o.jsx(ie,{defaultMessage:"Free",id:"tf1lIh/bri"}),monthlyPrice:o.jsx(di,{value:0,style:"currency",currency:"USD"}),yearlyPricePerMonth:null,monthlyBillingPeriod:o.jsx(ie,{defaultMessage:"Forever",id:"BG9UOWuEog"}),buttonText:o.jsx(ie,{defaultMessage:"Continue with free",id:"zX2SelZjuT"}),description:hyt,features:vyt},pro:{title:o.jsx(ie,{defaultMessage:"Pro",id:"R/eOkjWqNU"}),monthlyBillingPeriod:o.jsx(ie,{defaultMessage:"when billed annually",id:"CxEUNEw3IX"}),monthlyPrice:o.jsx(di,{value:20,style:"currency",currency:"USD"}),yearlyPricePerMonth:o.jsx(di,{value:16.67,style:"currency",currency:"USD"}),buttonText:o.jsx(ie,{defaultMessage:"Continue with Pro",id:"5/o9BMhnta"}),description:gyt,features:U8},max:{title:o.jsx(ie,{defaultMessage:"Max",id:"kkjl2vQekD"}),monthlyBillingPeriod:null,monthlyPrice:o.jsx(di,{value:200,style:"currency",currency:"USD"}),yearlyPricePerMonth:null,buttonText:o.jsx(ie,{defaultMessage:"Continue with Max",id:"1ORWA/vPd8"}),description:xyt,features:_yt},enterprise_pro:{title:o.jsx(ie,{defaultMessage:"Enterprise Pro",id:"h/OVAC8xF3"}),yearlyBillingPeriod:o.jsx(ie,{defaultMessage:"billed yearly",id:"BK8kQt5/nC"}),monthlyBillingPeriod:o.jsx(ie,{defaultMessage:"when billed annually",id:"CxEUNEw3IX"}),monthlyPrice:o.jsx(di,{value:40,style:"currency",currency:"USD"}),yearlyPricePerMonth:o.jsx(di,{value:33.33,style:"currency",currency:"USD"}),buttonText:o.jsx(ie,{defaultMessage:"Continue with Enterprise Pro",id:"ifdiwgNLuc"}),description:qJ,features:wyt},enterprise_max:{title:o.jsx(ie,{defaultMessage:"Enterprise Max",id:"tfsuL8YexA"}),yearlyBillingPeriod:o.jsx(ie,{defaultMessage:"billed yearly",id:"BK8kQt5/nC"}),monthlyBillingPeriod:o.jsx(ie,{defaultMessage:"when billed annually",id:"CxEUNEw3IX"}),monthlyPrice:o.jsx(di,{value:325,style:"currency",currency:"USD"}),yearlyPricePerMonth:o.jsx(di,{value:270.83,style:"currency",currency:"USD"}),buttonText:o.jsx(ie,{defaultMessage:"Continue with Enterprise Max",id:"UOcjuwA4xJ"}),description:qJ,features:Cyt},pro_student:{title:o.jsx(ie,{defaultMessage:"Education Pro",id:"Up6fU3LgJN"}),yearlyPricePerMonth:null,monthlyBillingPeriod:null,monthlyPrice:o.jsx(di,{value:4.99,style:"currency",currency:"USD"}),description:yyt,features:KJ},pro_unverified_student:{title:o.jsx(ie,{defaultMessage:"Education Pro",id:"Up6fU3LgJN"}),yearlyPricePerMonth:null,monthlyBillingPeriod:o.jsx(ie,{defaultMessage:"No credit card required, auto-downgrade to free",id:"0r9uk/D33v"}),monthlyPrice:o.jsx(ie,{defaultMessage:"Free trial",id:"PI5zmsy/ax"}),buttonText:o.jsx(ie,{defaultMessage:"Verify as student",id:"1tQDdEeW0V"}),subButtonText:o.jsx(ie,{defaultMessage:"Verify as educator",id:"vOTkGR1Bdz"}),description:o.jsx(ie,{defaultMessage:"Verify your student or educator status. Refer to earn more free Pro.",id:"4iPG2FhZW6"}),features:KJ}},Syt=({tier:e,isEnterpriseAdmin:t,isStudent:n,billingPeriod:r,proDiscount:s})=>{const a=Bu(),i=byt(),{countryOffers:l,defaultMonths:c}=pyt({reason:"tier-meta-data"}),{isFromStudentCometGrowth:u,isFromStudentReferral:f}=dhe();if(e==="pro_unverified_student"){const m=a&&l[a]||c;let p;return u?p=o.jsx(ie,{defaultMessage:"Comet access + free Pro",id:"HQIePLKH1b"}):f?p=o.jsx(ie,{defaultMessage:"Redeem 1 month",id:"KnDJBwXMb1"}):p=m>1?o.jsx(ie,{defaultMessage:"{months} months free trial",id:"lsnvrjEXuG",values:{months:m}}):o.jsx(ie,{defaultMessage:"Redeem free Pro",id:"TS1EKqbD7V"}),{...ii.pro_unverified_student,monthlyPrice:p,features:i}}if(e==="pro"&&n)return{...ii.pro_student,features:i.filter(m=>m.key!=="unlock-free-pro")};if(e==="pro"&&s){const m=s.discountPrice?ii[e].monthlyPrice:"",p=s.discountPrice?ii[e].yearlyPricePerMonth:"",h=s.discountPrice?o.jsx(o.Fragment,{children:s.discountPrice}):ii[e].monthlyPrice,g=s.discountPrice?o.jsx(o.Fragment,{children:s.discountPrice}):ii[e].yearlyPricePerMonth,y=s.showStudentDiscountContent?o.jsx(ie,{defaultMessage:"Unlock the full capabilities of Perplexity at a discount when using a valid educational email.",id:"xqWcjbsdXj"}):ii[e].description,x=ii[e].monthlyPrice,v=s?.discountType==="first_month_free"?r==="monthly"?o.jsx(ie,{defaultMessage:"First month free, then $20/month",id:"YvOdHbwWXs"}):o.jsx(ie,{defaultMessage:"First month free, then $16.67/month",id:"am6VV9Ad2K"}):void 0;return{...ii[e],features:U8,monthlyPrice:h,yearlyPricePerMonth:g,description:y,previousStrikethroughMonthlyPrice:m,previousStrikethroughYearlyPrice:p,discountDescription:v,...s.discountPrice?{previousMonthlyPrice:x}:{}}}return(e==="enterprise_pro"||e==="enterprise_max")&&!t?{...ii[e],buttonText:o.jsx(ie,{defaultMessage:"Contact your admin",id:"BUJtQlaK1z"})}:e==="pro"?{...ii[e],features:U8}:ii[e]},ybe=({reason:e})=>{const t=async()=>JQe({reason:e}),{data:n,isLoading:r}=Ue({queryKey:["get_user_previous_subscription"],queryFn:t});return d.useMemo(()=>({previousSubscriptionStatus:n?.previous_subscription_status??"none",previousSubscriptionSource:n?.previous_subscription_source??"none",isLoading:r}),[n?.previous_subscription_source,n?.previous_subscription_status,r])},Eyt=({subscriptionSource:e,previousSubscriptionSource:t})=>{const n=vt(),{env:{isProduction:r,isBeta:s}}=Pt(),{openModal:a}=xt(),{locale:i}=Z();return{navigateToPortal:d.useCallback(async()=>{if(e==="incentive"){a("incentiveProModal",{origin:Le.PRICING_TABLE});return}if(e==="ios"||t==="ios"){n.push("https://www.apple.com/app-store/");return}if(e==="android"||t==="android"){n.push("https://play.google.com/store");return}const c=await P5({reason:"tier-button"});if(c){n.push(c);return}n.push(r||s?"https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM":"https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA")},[e,t,n,a,i,r,s])}},Myt=({tier:e,onButtonClick:t,onSubTierButtonClick:n,disabled:r})=>{const s="tier-button",{isPro:a,isMax:i,isEnterprisePro:l,isEnterpriseMax:c,subscriptionSource:u,hasActiveSubscription:f}=St(),{formatDate:m,$t:p}=Z(),{data:h,status:g,isLoading:y}=vpe({reason:"paywall",enabled:i&&e==="pro"}),{isAdmin:x,isEnterprise:v}=Hn({reason:s}),b=d.useMemo(()=>g!=="success"?!1:h?.current_subscription_tier==="max"&&h?.next_subscription_tier==="pro"&&h?.downgrade_scheduled,[h,g]),_=d.useMemo(()=>g!=="success"||!h?.downgrade_scheduled_ts?"":m(h?.downgrade_scheduled_ts*1e3,{month:"long",day:"numeric",year:"numeric"}),[h,g,m]),{openStackedModal:w}=xt(),{previousSubscriptionSource:C}=ybe({reason:"tier-button"}),{navigateToPortal:S}=Eyt({subscriptionSource:u,previousSubscriptionSource:C}),{cancelMaxDowngrade:E,isPending:k}=kyt(),M=a&&f,j=i&&f,R=l&&f,O=c&&f,D=M||j;if(e==="pro"&&M&&!b||e==="enterprise_pro"&&R||e==="enterprise_max"&&O)return o.jsx(YJ,{});if(e==="max"&&j)return b?o.jsx(me,{fullWidth:!0,variant:"primary",disabled:k||y||r,onClick:E,isLoading:k,text:p({defaultMessage:"Keep Max",id:"XpN74Q/7Zn"}),testId:"keep-max-button"}):o.jsx(YJ,{});if(e==="standard"&&D)return o.jsx(me,{fullWidth:!0,variant:"common",onClick:S,disabled:r,text:o.jsx(ie,{defaultMessage:"Downgrade to free",id:"hHJO3dpg4H"})});if(e==="pro"&&j)return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(me,{fullWidth:!0,variant:"common",disabled:b||y||r,onClick:()=>{b||w("downgradeModal",{origin:Le.PRICING_TABLE})},text:y?"":b?o.jsx(ie,{defaultMessage:"Downgrade scheduled",id:"NZIQayhrc6"}):o.jsx(ie,{defaultMessage:"Downgrade to Pro",id:"kaso/aUweR"})}),b&&_&&o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(ie,{defaultMessage:"You will be downgraded on {downgradeBillingStart}",id:"Hs+T4CTvOa",values:{downgradeBillingStart:_}})})]});if(e==="standard")return o.jsx(me,{fullWidth:!0,variant:"common",onClick:t,disabled:r,text:o.jsx(ie,{defaultMessage:"Continue with free",id:"zX2SelZjuT"})});if(e==="max"&&M)return o.jsx(me,{fullWidth:!0,variant:"inverted",disabled:r,onClick:()=>w("upgradeModal",{origin:Le.PRICING_TABLE}),text:o.jsx(ie,{defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"}),testId:"upgrade-to-max-button"});if(e==="enterprise_pro"){const P=x||!v?o.jsx(ie,{defaultMessage:"Continue with Enterprise Pro",id:"ifdiwgNLuc"}):o.jsx(ie,{defaultMessage:"Request Enterprise Pro",id:"GwFywecEyY"});return o.jsx(me,{fullWidth:!0,variant:"inverted",disabled:r,onClick:t,text:P})}if(e==="enterprise_max"&&R){const P=x?o.jsx(ie,{defaultMessage:"Continue with Enterprise Max",id:"UOcjuwA4xJ"}):o.jsx(ie,{defaultMessage:"Request Enterprise Max",id:"deqHi82ijZ"});return o.jsx(me,{fullWidth:!0,variant:"primary",disabled:r,onClick:t,text:P})}return e==="enterprise_max"?o.jsx(me,{fullWidth:!0,variant:"inverted",disabled:r,onClick:t,text:o.jsx(ie,{defaultMessage:"Continue with Enterprise Max",id:"UOcjuwA4xJ"})}):e==="pro_unverified_student"?o.jsxs("div",{className:"gap-sm pb-md flex flex-col",children:[o.jsx(me,{fullWidth:!0,variant:"inverted",disabled:r,onClick:t,text:o.jsx(ie,{defaultMessage:"Verify as student",id:"1tQDdEeW0V"})}),o.jsx(Me,{noPadding:!0,variant:"primary",onClick:n,disabled:r,text:o.jsx(ie,{defaultMessage:"Verify as educator",id:"vOTkGR1Bdz"})})]}):o.jsx(me,{fullWidth:!0,variant:e==="pro"?"primary":"inverted",onClick:t,disabled:r,text:o.jsx(ie,{defaultMessage:"Get {tier}",id:"Rmlz2H/LWT",values:{tier:e.charAt(0).toUpperCase()+e.slice(1)}}),testId:`upgrade-to-${e}-button`})},YJ=()=>o.jsx(me,{fullWidth:!0,disabled:!0,variant:"common",text:o.jsx(ie,{defaultMessage:"Your current plan",id:"m5/DxlihXS"}),testId:"your-current-plan-button"}),kyt=()=>{const{$t:e}=Z(),t=ot(),{update:n}=mt(),{trackEvent:r}=Te(),{openToast:s}=fn(),{currentOpenModals:a,closeModal:i}=xt(),l=bpe({reason:"cancel-downgrade"},{onMutate:()=>{r("subscription cancel downgrade clicked")},onSuccess:async()=>{await z5({reason:"cancel-downgrade"}),await n(),r("subscription cancel downgrade success"),t.invalidateQueries({queryKey:Dme()}),s({variant:"success",message:e({defaultMessage:"Max subscription resumed",id:"w9dWkTVNlZ"}),description:e({defaultMessage:"You'll continue to receive uninterrupted access to Max features.",id:"YbEsVsbfnA"}),timeout:3}),a.length>0&&i()}});return{cancelMaxDowngrade:()=>l.mutate(),...l}},cin=({tier:e,billingPeriod:t,origin:n,onStandardTierClick:r=vn,onTierButtonClick:s=vn,onSubTierButtonClick:a=vn,isEnterpriseAdmin:i,isStudent:l,className:c,proDiscount:u,tierBadges:f,isSoftBankEnterprise:m})=>{const p="tier-card",{$t:h}=Z(),{isMax:g,isEnterprisePro:y,isEnterpriseMax:x}=St(),_=m&&(e==="enterprise_pro"||e==="enterprise_max")&&!(y&&e==="enterprise_pro"||x&&e==="enterprise_max"),{handleClickMonthly:w,handleClickEnterprise:C}=myt({origin:n,reason:p}),S=d.useCallback(()=>{if(e==="standard"&&r){r();return}if(e==="enterprise_pro"||e==="enterprise_max"){C(e),s();return}(e==="max"||e==="pro")&&w(e),s()},[e,r,s,C,w]),E=Syt({tier:e,isEnterpriseAdmin:!!i,isStudent:l,billingPeriod:t,proDiscount:u}),{title:k,monthlyBillingPeriod:M,description:j,features:R,monthlyPrice:O,yearlyPricePerMonth:D}=E,{previousStrikethroughMonthlyPrice:P,discountDescription:A}=E??{},T=M,N=t==="monthly"?O:D,L=e==="max"||e==="pro"||e==="enterprise_pro"||e==="enterprise_max"||e==="pro_unverified_student",U=L?"default":"light",$=f?.[e]||(e==="pro"&&!g?{text:h({defaultMessage:"Popular",id:"pxF+t0PUQJ"}),color:"super"}:void 0),V=e==="pro"&&l;return o.jsxs(z,{className:B("p-ml gap-sm flex flex-col pb-8",c),children:[o.jsxs("div",{className:"flex grow flex-col",children:[o.jsxs("div",{className:"mb-sm flex flex-col gap-4",children:[o.jsxs("div",{className:"flex justify-between gap-4",children:[o.jsx(F,{variant:"baseSemi",color:U,children:k}),$&&o.jsx(z,{variant:"superLight",className:B("flex h-fit items-center rounded-md px-2 py-1",$.className),children:o.jsx(F,{variant:"tinyRegular",color:$.color||"super",children:$.text})})]}),o.jsxs("div",{className:"h-8",children:[A&&o.jsx(F,{variant:"tinyRegular",color:"light",children:A}),t==="monthly"&&P&&o.jsx(F,{variant:"tiny",color:"light",className:"line-through",children:P}),o.jsxs("div",{className:"flex items-end gap-1",children:[o.jsx(F,{variant:"baseSemi",color:U,children:N}),o.jsxs(F,{variant:"tinyRegular",className:"pb-xs",children:[L&&e!=="enterprise_pro"&&e!=="enterprise_max"&&e!=="pro_unverified_student"&&!V&&o.jsxs(o.Fragment,{children:[o.jsx(F0,{}),o.jsx(ie,{defaultMessage:" / month",id:"poNf+KAUKK"})]}),V&&o.jsxs(o.Fragment,{children:[o.jsx(F0,{}),o.jsx(ie,{defaultMessage:" / month or <link>refer to earn</link>",values:{link:W=>o.jsx(qe,{className:"underline",href:"https://perplexity.ai/referrals",target:"_blank",children:W})},id:"hmYc/CXQmI"})]}),(e==="enterprise_pro"||e==="enterprise_max")&&o.jsxs(o.Fragment,{children:[o.jsx(F0,{}),o.jsx(ie,{defaultMessage:" / per seat each month",id:"krzByVjMC0"})]})]})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[D&&o.jsx(F,{variant:"tinyRegular",children:D}),o.jsx(F,{variant:"tinyRegular",color:"light",children:T})]})]})]}),o.jsx("div",{className:"mt-md mb-sm min-h-10",children:o.jsx(F,{variant:"tinyRegular",color:U,children:j})}),o.jsxs("div",{className:"mb-lg mt-1 flex flex-col gap-2",children:[o.jsx(Myt,{tier:e,onButtonClick:S,onSubTierButtonClick:a,disabled:m}),_&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"text-center",children:o.jsx(ie,{defaultMessage:"Please reach out to your SoftBank representative to manage your subscription.",id:"LCYNwJ1TPK"})})]}),o.jsxs("ul",{className:"flex flex-col gap-3",children:[R.map(W=>o.jsxs("li",{className:"flex flex-row gap-2",children:[o.jsx("div",{className:"flex items-center",children:o.jsx(de,{icon:dr,size:16,color:"#8D9191"})}),o.jsx(F,{variant:"tinyRegular",color:"light",children:W})]},W.props.id)),e==="pro"&&o.jsxs("li",{className:"flex flex-row gap-3",children:[o.jsx("div",{className:"flex items-center",children:o.jsx(de,{icon:eLe,size:16,color:"#8D9191"})}),o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(ie,{defaultMessage:"Exclusive access to Pro Perks and more",id:"a55IveCULf"})})]})]})]}),e==="pro"&&o.jsx("div",{className:"mt-auto pt-4",children:o.jsxs(F,{variant:"tinyRegular",color:"light",children:[o.jsx(ie,{defaultMessage:"Existing subscriber? See ",id:"EFG99v1s2/"}),o.jsx(qe,{href:"https://www.perplexity.ai/help-center/en/collections/8934800-subscription-billing",className:"underline",target:"_blank",children:o.jsx(ie,{defaultMessage:"billing help",id:"2FmZi7KYDc"})})]})}),e==="max"&&o.jsx("div",{className:"mt-auto pt-4",children:o.jsxs(F,{variant:"tinyRegular",color:"light",children:[o.jsx(ie,{defaultMessage:"For personal use only, and subject to our ",id:"WOtW93rmqA"}),o.jsx(qe,{href:"https://www.perplexity.ai/hub/legal/terms-of-service",className:"underline",target:"_blank",children:o.jsx(ie,{defaultMessage:"policies",id:"b1EHYiMz0c"})})]})})]})},F0=I.memo(()=>Bu()!=="US"&&o.jsx(ie,{defaultMessage:"USD",id:"hCQDknhvbI"}));F0.displayName="USDSpan";const Tyt=({billingInterval:e})=>e==="monthly"?o.jsx(ie,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):e==="yearly"?o.jsx(ie,{defaultMessage:"/ year",id:"8hNOud/igo"}):e==="unknown"?o.jsx(ie,{defaultMessage:"/ month",id:"Vn2ud4qKOl"}):null,nM=({planName:e,price:t,formatNumber:n,isHighlighted:r=!1,className:s="",billingInterval:a})=>o.jsxs(z,{variant:"subtler",className:`px-md h-xl my-sm flex items-center justify-between rounded-md ${s}`,children:[o.jsx(F,{variant:"baseSemi",color:r?"default":"light",children:o.jsx(ie,{...e})}),o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(F,{variant:"small",children:t?Eh(t,n):""}),a&&o.jsxs(F,{variant:"tinyRegular",children:[o.jsx(F0,{}),o.jsx(Tyt,{billingInterval:a})]})]})]}),Nyt=({isOpen:e,onClose:t})=>{const{data:n}=gpe({reason:"downgrade-modal"}),{update:r}=mt(),{currentOpenModals:s}=xt(),{deprecatedOpenToast:a}=fn(),{formatNumber:i,formatDate:l,$t:c}=Z(),{trackEvent:u}=Te();d.useEffect(()=>{e&&u("subscription downgrade modal rendered")},[e,u]);const f=d.useCallback(async()=>{await z5({reason:"downgrade-to-pro-modal"}),await r(),t(),u("subscription downgrade success"),s.length>0&&t(),Jg({downgrade:"success"}),a(c({defaultMessage:"Subscription updated",id:"Eq5gCUdVyJ"}),"success",5)},[t,s,r,a,c,u]),{mutate:m,isPending:p}=xpe({reason:"downgrade-modal"},{onSuccess:f}),h=n?.next_billing_start_ts,g=h?l(h*1e3):"";return o.jsx(qt,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:o.jsxs(z,{className:"p-ml",children:[o.jsx(F,{variant:"baseSemi",children:o.jsx(ie,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),o.jsx(nM,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:n?.old_product_price,formatNumber:i,billingInterval:n?.old_product_interval}),o.jsx(z,{children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[o.jsx("div",{className:"border-subtlest flex-1 border-t"}),o.jsx(ie,{defaultMessage:"Downgrade",id:"SduMNm+0em"}),o.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),o.jsx(nM,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:n?.new_product_price,formatNumber:i,billingInterval:n?.new_product_interval,isHighlighted:!0,className:"mb-0 !rounded-b-none rounded-t-md"}),o.jsx(z,{variant:"subtler",className:"px-md pb-sm flex items-center justify-between rounded-b-md",children:o.jsx(F,{variant:"small",color:"light",children:o.jsx(ie,{defaultMessage:"Your current Max subscription will remain active until {date} when it will change to Pro.",id:"2C6tgt4MMg",values:{date:g}})})}),o.jsxs(z,{className:"gap-sm mt-ml flex justify-end",children:[o.jsx(Me,{text:o.jsx(ie,{defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),o.jsx(me,{variant:"primary",text:o.jsx(ie,{defaultMessage:"Confirm",id:"N2IrpMDHDB"}),disabled:p,onClick:()=>m()})]})]})})},tu={pro:tLe,collection:uo,research:Uk,labs:Fb,comet_login:Sc,invite:up},jyt=()=>{const{data:e}=sU(),{trackEvent:t,trackEventOnce:n}=Te(),r=k_(e??void 0),[s,a]=d.useState(!1);d.useEffect(()=>{e&&e.app_location==="BANNER"&&(a(!0),n("banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,n]);const i=d.useCallback(()=>{e&&(t("banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),a(!1),g3(e.name))},[e,t]),l=d.useMemo(()=>{if(e&&e.icon_reference&&e.icon_reference in tu)return tu[e.icon_reference]},[e]);return d.useMemo(()=>({show:s&&!!e,onDismiss:i,onClick:r,icon:l,title:e?.title,actionLabel:e?.button_text}),[i,r,s,l,e])},xbe=({reason:e})=>{const{$t:t}=Z(),{data:n,isLoading:r}=Ue({queryKey:zGe(),queryFn:()=>lpe({reason:e})}),s=!!n?.institution;let a=n?.offer?.discount_str??void 0;!a&&s&&(a=t({defaultMessage:"$4.99",id:"ngR/pJs1LV"}));const i=n?.offer?.discount_type??void 0;return d.useMemo(()=>({userPromotionsLoading:r,discountPrice:a,discountType:i,showStudentDiscountContent:s,campaignId:n?.campaign?.id,institution:n?.institution}),[n?.campaign?.id,n?.institution,a,i,r,s])},Z6="clicked enterprise ad",J6="https://www.perplexity.ai/enterprise",vbe=()=>{const{trackEvent:e}=Te(),t=vt(),n=d.useCallback(async m=>{m?.preventDefault(),e(Z6,{source:"settingsHeader"}),t.push(J6)},[e,t]),r=d.useCallback(async m=>{m.preventDefault(),e(Z6,{source:"pricingTable"}),t.push(J6)},[e,t]),s=d.useCallback(async m=>{m.preventDefault(),e(Z6,{source:"paywall"}),t.push(J6)},[e,t]),a=d.useCallback(({orgName:m,success:p})=>{e("org created",{orgName:m,success:p})},[e]),i=d.useCallback(({invitedEmail:m,source:p,orgUUID:h,inviteType:g})=>{e("org user invited",{invitedEmail:m,source:p,orgUUID:h,inviteType:g})},[e]),l=d.useCallback(({invitedEmails:m,inviteCount:p,successCount:h,failureCount:g,source:y,orgUUID:x,inviteType:v})=>{e("org users bulk invited",{invitedEmails:m,inviteCount:p,successCount:h,failureCount:g,source:y,orgUUID:x,inviteType:v})},[e]),c=d.useCallback(({orgUUID:m})=>{e("org invite step completed",{orgUUID:m})},[e]),u=d.useCallback(({orgUUID:m,source:p,intent:h,success:g})=>e("org payment portal entered",{orgUUID:m,source:p,intent:h,success:g}),[e]),f=d.useCallback(({orgUUID:m,success:p})=>{e("sso enabled",{orgUUID:m,success:p})},[e]);return d.useMemo(()=>({handleSettingsHeaderAdClick:n,handlePricingTableAdClick:r,handlePaywallAdClick:s,trackOrgCreated:a,trackOrgUserInvited:i,trackOrgUsersBulkInvited:l,trackOrgInviteStepCompleted:c,trackOrgPaymentPortalEntered:u,trackSSOEnabled:f}),[s,r,n,a,c,u,i,l,f])},Ayt=({reason:e})=>{const t=vt(),{organization:n}=Hn({reason:e}),{trackOrgPaymentPortalEntered:r}=vbe(),s=d.useCallback(async({source:l})=>{const c=await rZe({source:l,locale:Zl(),reason:e});c?(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!0}),t.push(c)):(r({orgUUID:n?.uuid,source:l,intent:"portal",success:!1}),ne.log("could not open Stripe portal"))},[r,n?.uuid,t,e]),a=d.useCallback(({interval:l="monthly",subscriptionTier:c,source:u,onErrorCallback:f,reason:m})=>{const p=Zl();sZe({subscriptionTier:c==="enterprise_pro"?Ln.PRO:Ln.MAX,interval:l,origin:u,locale:p,reason:m}).then(h=>{h&&h.status==="success"&&h.url!=null&&h.url!==""?(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!0}),h.url&&t.push(h.url)):(r({orgUUID:n?.uuid,source:u,intent:"checkout",success:!1}),f?.())})},[t,n?.uuid,r]),i=d.useCallback(async({interval:l,subscriptionTier:c,collectionMethod:u,source:f,billingAddress:m,reason:p})=>{const h=Zl(),g=await aZe({interval:l,subscriptionTier:c==="enterprise_pro"?Ln.PRO:Ln.MAX,origin:f,locale:h,collectionMethod:u,billingAddress:m,reason:p});return await Xhe({reason:p}),g},[]);return d.useMemo(()=>({manageExistingBillingClick:s,navigateToCheckout:a,createInvoicedSubscription:i}),[i,s,a])},Iyt={good:"super",bad:"red",info:"subtler",orange:"orange"},Cp=I.memo(({variant:e,title:t,actionLabel:n,onClick:r,onClose:s,toolTip:a,icon:i,isMobileStyle:l,isLoading:c})=>{const u=e==="info"?"default":"defaultInverted",f=e==="info"?"super":u,m=d.useCallback(h=>{h.stopPropagation(),s?.(h)},[s]),p=o.jsxs(z,{className:B("h-bannerHeight rounded-sm","gap-xs px-md md:gap-sm relative flex w-full cursor-pointer items-center transition duration-200 hover:opacity-80",e==="info"?"justify-between":"justify-center",{"px-lg":s}),variant:Iyt[e],onClick:r,children:[c?o.jsx(F,{color:u,children:o.jsx(Fr,{})}):i&&o.jsx(F,{color:u,className:"mr-xs md:mr-0",children:o.jsx(de,{icon:i,size:l?"sm":"md"})}),o.jsx(F,{color:u,className:"leading-[1.1]",variant:l?"tiny":"small",children:t}),o.jsxs("div",{className:"flex items-center gap-1",children:[n&&o.jsx(F,{color:f,variant:l?"tiny":"small",className:B("decoration-inverse/30 hidden font-bold md:inline-flex",{"underline underline-offset-2":e!=="info"}),children:n}),r&&e!=="info"&&o.jsx(F,{color:u,className:"inline-flex",children:o.jsx(de,{icon:Kk,size:"xs"})})]}),s&&o.jsx(Me,{icon:kt,extraCSS:B("!absolute right-sm opacity-50",e==="info"?"text-foreground dark:!text-white":"!text-white"),variant:"noHover",size:"tiny",onClick:m})]});return a?o.jsx(bn,{tooltipText:a,children:p}):p});Cp.displayName="SiteBanner";const Ryt=({orgStripeStatus:e})=>{const t="org-billing-banner",n=vt(),{$t:r}=Z(),{navigateToCheckout:s}=Ayt({reason:t}),{isMobileStyle:a}=xe(),[i,l]=d.useState(!1),{openModal:c}=xt();if(Ys.getItem(wGe))return null;const f=()=>{if(!i){if(e==="none"){c("pricingModal",{origin:Le.ENTERPRISE_BILLING_BANNER,showFreeTier:!0,pitchMessage:{title:r({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}});return}l(!0),s({source:"banner",subscriptionTier:"enterprise_pro",onErrorCallback:()=>{n.refresh("Org billing banner"),l(!1)},reason:t})}},m=r(e==="past_due"?{defaultMessage:"Please complete your invoice payment to use Enterprise features",id:"e4FA3jvBUQ"}:{defaultMessage:"Please complete the payment process to use Enterprise features",id:"bNYGI9HBI3"}),p=r({defaultMessage:"May take up to a minute to reflect payment status changes",id:"+w47QOW1fc"});return o.jsx(Cp,{onClick:f,isLoading:i,variant:"bad",title:m,toolTip:p,icon:nLe,isMobileStyle:a})},Pyt=({message:e,discountCode:t,clearDiscountCode:n})=>{const r="discount-code-banner",s=et(),{trackEvent:a}=Te(),{$t:i}=Z(),{isMobileStyle:l}=xe(),[c,u]=d.useState(!1),[f,m]=d.useState(null),{openVisitorLoginUpsell:p}=or({enabled:!s}),{navigateToPayment:h}=mbe(),g=Le.DISCOUNT_CODE_BANNER;d.useEffect(()=>{a("promo code banner shown",{discountCode:t})},[a,t]);const y=d.useCallback(()=>{const b=new URL(window.location.href);b.searchParams.delete("discount_code"),_x(Object.fromEntries(b.searchParams)),n()},[n]),x=d.useCallback(async()=>{if(a("promo code banner clicked",{discountCode:t}),!c){if(f){y(),m(null);return}if(s){if(u(!0),a("get started button clicked from discount banner",{tier:"monthly"}),await h({origin:g,discountCode:t,tier:"monthly"})){n();return}a("pro checkout started",{subscriptionTier:"pro",origin:g,discountCode:t??"",referralCode:"",tier:"monthly",flowType:"stripe_checkout"}),_E({request:{subscriptionTier:"pro",tier:"monthly",referralCode:"",discountCode:t,origin:g,locale:Zl()},reason:r}).then(b=>{b?.url?pa(b.url,"Discount code banner checkout"):(b?.errorCode==="PROMO_CODE_CUSTOMER_NOT_FIRST_TIME"?m(i({defaultMessage:"This code is only valid for first-time customers. Click to dismiss.",id:"xTWJg0ueMJ"})):m(i({defaultMessage:"There was an error with your code. Please double-check your code and click to try again.",id:"CdOiX2ylN6"})),u(!1))})}else p({title:i({defaultMessage:"Get started with your Pro discount",id:"XTa2YrANRF"}),origin:g})}},[i,n,t,f,c,s,h,p,g,a,y]),v=b=>{y(),b.preventDefault()};return o.jsx(Cp,{onClick:x,isLoading:c,icon:f?vce:bce,variant:f?"bad":"good",title:f||e,isMobileStyle:l,onClose:v})},Lyt="back_to_school_winner",bbe="EDUFREEYEAR",QJ=({partnerCode:e,partnerDiscountCode:t,bannerVariant:n,onClose:r})=>{const{$t:s}=Z(),{session:a}=mt(),{hasActiveSubscription:i}=St(),l=e==="edu"&&t===bbe?!1:i,[,,c]=abe(),[,,u]=obe(),[f,m]=d.useState(!1),{isMobileStyle:p}=xe(),{data:h}=Ue({queryKey:["partner",e],queryFn:()=>fetch(`/api/subscription/config?partnerCode=${e}`).then(S=>S.json())}),g=vt();if(!e)return null;const y=h?.messages??Afe,x=l?s({defaultMessage:"Welcome to Perplexity Pro",id:"dcD7kilsgv"}):y?.bannerMessage??"",v=l?s({defaultMessage:"Learn More",id:"7DIW6+rckr"}):e.startsWith("edu")?s({defaultMessage:"Redeem Now",id:"EiBCDsh1sP"}):s({defaultMessage:"Get Started",id:"9QXm1EW9qz"}),b=l?void 0:bce,_=l?`/join/p/${e}/welcome`:a&&t?`/join/p/${e}/${t}`:`/join/p/${e}`,w=S=>{c(),u(),r&&r(),S.preventDefault()},C=()=>{f||(m(!0),g.push(_))};return h?.maskPromoCodeFromQueryParams?null:o.jsx(Cp,{icon:b,isMobileStyle:p,title:x,actionLabel:v,onClick:C,isLoading:f,variant:n??"good",onClose:w})},Oyt="https://www.perplexity.ai/hub/blog/eligible-uber-one-members-can-now-unlock-a-complimentary-full-year-of-perplexity-pro",Dyt=()=>{const{$t:e}=Z(),t=vt(),{isMobileStyle:n}=xe(),[r,s]=d.useState(!1),a=()=>{r||(s(!0),t.push(Oyt))};return o.jsx(Cp,{variant:"good",title:e({defaultMessage:"{uberOne} members in the United States and Canada can redeem one free year of {perplexityPro}",id:"jo9fEuRnKx"},{uberOne:"Uber One",perplexityPro:"Perplexity Pro"}),onClick:a,isLoading:r,isMobileStyle:n})},Fyt=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"org-invitation-banner",defaultValue:e,extraAttributes:t,subjectType:"visitor_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])};function Uyt({reason:e,enabled:t=!0}){const{variation:n}=Fyt(!1),r=et(),{session:s}=mt(),a=s?.user?.org_uuid,l=r&&!(!!a&&a!=="none")&&t&&n,{data:c,isLoading:u}=Ue({enabled:l,queryKey:yE(),queryFn:()=>oZe({reason:e}),staleTime:10*60*1e3,gcTime:60*60*1e3,refetchOnMount:!1,refetchOnWindowFocus:!0,refetchOnReconnect:!1});return{pendingInvitation:c??null,isLoading:u}}var rM;(function(e){e.NONE="none",e.ACTIVE="active",e.TRIALING="trialing",e.PAST_DUE="past_due",e.INVOICE_PAST_DUE="invoice_past_due",e.WHITE_GLOVE_PAST_DUE="white_glove_past_due",e.CANCELED="canceled"})(rM||(rM={}));const uin=[{label:"N/A",value:""},{label:"AD NRT",value:"ad_nrt"},{label:"AE TRN",value:"ae_trn"},{label:"AL TIN",value:"al_tin"},{label:"AM TIN",value:"am_tin"},{label:"AO TIN",value:"ao_tin"},{label:"AR CUIT",value:"ar_cuit"},{label:"AU ABN",value:"au_abn"},{label:"AU ARN",value:"au_arn"},{label:"BA TIN",value:"ba_tin"},{label:"BB TIN",value:"bb_tin"},{label:"BG UIC",value:"bg_uic"},{label:"BH VAT",value:"bh_vat"},{label:"BO TIN",value:"bo_tin"},{label:"BR CNPJ",value:"br_cnpj"},{label:"BR CPF",value:"br_cpf"},{label:"BS TIN",value:"bs_tin"},{label:"BY TIN",value:"by_tin"},{label:"CA BN",value:"ca_bn"},{label:"CA GST/HST",value:"ca_gst_hst"},{label:"CA PST BC",value:"ca_pst_bc"},{label:"CA PST MB",value:"ca_pst_mb"},{label:"CA PST SK",value:"ca_pst_sk"},{label:"CA QST",value:"ca_qst"},{label:"CD NIF",value:"cd_nif"},{label:"CH UID",value:"ch_uid"},{label:"CH VAT",value:"ch_vat"},{label:"CL TIN",value:"cl_tin"},{label:"CN TIN",value:"cn_tin"},{label:"CO NIT",value:"co_nit"},{label:"CR TIN",value:"cr_tin"},{label:"DE STN",value:"de_stn"},{label:"DO RCN",value:"do_rcn"},{label:"EC RUC",value:"ec_ruc"},{label:"EG TIN",value:"eg_tin"},{label:"ES CIF",value:"es_cif"},{label:"EU OSS VAT",value:"eu_oss_vat"},{label:"EU VAT",value:"eu_vat"},{label:"GB VAT",value:"gb_vat"},{label:"GE VAT",value:"ge_vat"},{label:"GN NIF",value:"gn_nif"},{label:"HK BR",value:"hk_br"},{label:"HR OIB",value:"hr_oib"},{label:"HU TIN",value:"hu_tin"},{label:"ID NPWP",value:"id_npwp"},{label:"IL VAT",value:"il_vat"},{label:"IN GST",value:"in_gst"},{label:"IS VAT",value:"is_vat"},{label:"JP CN",value:"jp_cn"},{label:"JP RN",value:"jp_rn"},{label:"JP TRN",value:"jp_trn"},{label:"KE PIN",value:"ke_pin"},{label:"KH TIN",value:"kh_tin"},{label:"KR BRN",value:"kr_brn"},{label:"KZ BIN",value:"kz_bin"},{label:"LI UID",value:"li_uid"},{label:"LI VAT",value:"li_vat"},{label:"MA VAT",value:"ma_vat"},{label:"MD VAT",value:"md_vat"},{label:"ME PIB",value:"me_pib"},{label:"MK VAT",value:"mk_vat"},{label:"MR NIF",value:"mr_nif"},{label:"MX RFC",value:"mx_rfc"},{label:"MY FRP",value:"my_frp"},{label:"MY ITN",value:"my_itn"},{label:"MY SST",value:"my_sst"},{label:"NG TIN",value:"ng_tin"},{label:"NO VAT",value:"no_vat"},{label:"NO VOEC",value:"no_voec"},{label:"NP PAN",value:"np_pan"},{label:"NZ GST",value:"nz_gst"},{label:"OM VAT",value:"om_vat"},{label:"PE RUC",value:"pe_ruc"},{label:"PH TIN",value:"ph_tin"},{label:"RO TIN",value:"ro_tin"},{label:"RS PIB",value:"rs_pib"},{label:"RU INN",value:"ru_inn"},{label:"RU KPP",value:"ru_kpp"},{label:"SA VAT",value:"sa_vat"},{label:"SG GST",value:"sg_gst"},{label:"SG UEN",value:"sg_uen"},{label:"SI TIN",value:"si_tin"},{label:"SN NINEA",value:"sn_ninea"},{label:"SR FIN",value:"sr_fin"},{label:"SV NIT",value:"sv_nit"},{label:"TH VAT",value:"th_vat"},{label:"TJ TIN",value:"tj_tin"},{label:"TR TIN",value:"tr_tin"},{label:"TW VAT",value:"tw_vat"},{label:"TZ VAT",value:"tz_vat"},{label:"UA VAT",value:"ua_vat"},{label:"UG TIN",value:"ug_tin"},{label:"US EIN",value:"us_ein"},{label:"UY RUC",value:"uy_ruc"},{label:"UZ TIN",value:"uz_tin"},{label:"UZ VAT",value:"uz_vat"},{label:"VE RIF",value:"ve_rif"},{label:"VN TIN",value:"vn_tin"},{label:"ZA VAT",value:"za_vat"},{label:"ZM TIN",value:"zm_tin"},{label:"ZW TIN",value:"zw_tin"}],_be=d.memo(({orgName:e,invitationUUID:t})=>{const{$t:n}=Z(),{isMobileStyle:r}=xe(),s=d.useCallback(()=>{pa(`/onboarding/org/join/${t}`,"Organization invitation")},[t]),a=d.useMemo(()=>n({defaultMessage:"{orgName} invited you to join their organization",id:"xAk8Drb2hE"},{orgName:e}),[n,e]),i=d.useMemo(()=>n({defaultMessage:"View invite",id:"TDWT6zhMKG"}),[n]);return o.jsx(Cp,{isLoading:!1,variant:"good",title:a,actionLabel:i,icon:Ti,isMobileStyle:r,onClick:s})});_be.displayName="OrgInvitationBanner";const Byt=e=>["/onboarding/org/create"].includes(e);function wbe(){const e="app-banner-inner",{isMobileUserAgent:t}=xe(),{message:n,discountCode:r,clearDiscountCode:s}=pbe(),{hasAccessToProFeatures:a}=St(),[i]=abe(),[l]=obe(),c=Lt(),{organization:u,orgUser:f}=Hn({reason:e}),{pendingInvitation:m}=Uyt({reason:e}),p=[rM.NONE,rM.PAST_DUE],h=u?.stripe_status&&p.includes(u.stripe_status),g=f?.role==="ADMIN",y=Ot(),v=xbe({reason:e}).campaignId===Lyt,[b,_]=xp("pplx.back_to_school_winner_banner_dismissed",!1),{show:w,onDismiss:C,onClick:S,icon:E,title:k,actionLabel:M}=jyt();return w&&k&&M?o.jsx(ve.div,{initial:{height:0},animate:{height:"auto"},exit:{height:0},transition:{duration:.2},children:o.jsx(Cp,{icon:E,isMobileStyle:t,title:k,actionLabel:M,onClick:S,variant:"good",onClose:C})}):m&&!u&&!f?o.jsx(_be,{orgName:m.organization_name,invitationUUID:m.invitation_uuid}):g&&h&&!Byt(c??"")&&!t?o.jsx(Ryt,{orgStripeStatus:u?.stripe_status}):/(^\/$)|(^\/search)/.test(c??"")&&i?o.jsx(QJ,{partnerCode:i,partnerDiscountCode:l}):r&&!a&&!i?o.jsx(Pyt,{message:n,discountCode:r,clearDiscountCode:s}):y?.get("utm_campaign")==="morningbrew_083024"&&y?.get("utm_source")==="newsletter"?o.jsx(Dyt,{}):v&&!b?o.jsx(QJ,{partnerCode:"edu",partnerDiscountCode:bbe,bannerVariant:"orange",onClose:()=>{_(!0)}}):null}const $yt=()=>{const e=d.useCallback(n=>{const r=document.documentElement,s=n??Sn("colorSchemeTheme"),a=nue(s);a?r.setAttribute("data-theme",a):r.removeAttribute("data-theme")},[]),t=d.useMemo(()=>gs(e,100),[e]);FF("colorSchemeTheme",n=>{t(n?.value)}),d.useEffect(()=>{e()},[e])},Cbe=Dt("AppLayoutContext",void 0),Wu=()=>{const e=d.useContext(Cbe);if(!e)throw new Error("useAppLayout must be used within an AppLayoutProvider");return e},Vyt=({children:e})=>{const[t,n]=d.useState(!1);return $yt(),o.jsx(Cbe.Provider,{value:{isMobileSidebarOpen:t,setMobileSidebarOpen:n},children:e})},Wyt=({children:e})=>{const{isMobileSidebarOpen:t,setMobileSidebarOpen:n}=Wu(),{$t:r}=Z();return o.jsx(qF,{open:t,onOpenChange:n,children:o.jsxs(YF,{forceMount:!0,children:[o.jsx(l_,{children:o.jsx(JF,{children:r({defaultMessage:"Mobile Sidebar",id:"37aIxgWRuh"})})}),o.jsx(Ye,{children:t&&o.jsxs(o.Fragment,{children:[o.jsx(QF,{asChild:!0,children:o.jsx(ve.div,{className:"fixed inset-0 bg-black/20 dark:bg-black/50",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2}},"mobile-sidebar-overlay")}),o.jsx(XF,{asChild:!0,children:o.jsx(ve.div,{className:"bg-base fixed inset-y-0 left-0",initial:{x:"-100%"},animate:{x:"0%"},exit:{x:"-100%"},transition:{duration:.2,ease:an},children:e},"mobile-sidebar-content")})]})})]})})},n$=({className:e})=>{const{inApp:t}=Xo(),{isMobileSidebarOpen:n,setMobileSidebarOpen:r}=Wu();return t?null:o.jsx(Me,{icon:rLe,pill:!0,onClick:()=>r(!n),extraCSS:e})},Vh=72,sM=200,Sbe=I.memo(({})=>{const{$t:e}=Z(),{trackEvent:t}=Te(),n=d.useCallback(()=>{t("click logo",{})},[t]),{device:{isIOS:r}}=Pt(),{handleAppDownloadClicked:s}=mf("mobile-header"),a=U_({origin:"mobile-header"}),{mwebUpsellWhatsApp:i,loadingMwebUpsellWhatsApp:l}=B_(),c=d.useMemo(()=>i?OO:r?Hb:LO,[i,r]);return o.jsx(z,{variant:"background",className:"px-sm h-headerHeight sticky inset-x-0 top-0 z-10 flex w-full items-center md:mb-0",children:o.jsxs("div",{className:"gap-x-sm pl-xs flex w-full items-center justify-between md:hidden",children:[o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(n$,{className:"-ml-sm"}),o.jsx(qe,{href:"/",onClick:n,children:o.jsx($a,{variant:"text",size:"small"})})]}),!l&&o.jsx(ho,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(me,{size:"small",pill:!0,variant:"primary",icon:c,text:e(i?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:i?a:s})})})]})})});Sbe.displayName="MobileProductHeader";const r$=Dt("ScrollContainerRefContext",null),Hyt=({children:e,scrollContainerRef:t})=>o.jsx(r$.Provider,{value:{scrollContainerRef:t},children:e}),ti=()=>{const e=d.useContext(r$);if(!e)throw new Error("useScrollContainerRef must be used within a ScrollContainerRefProvider");return e},s$=I.memo(e=>{const{children:t,inRenderingPlace:n}=e,s=mo().erp;return n&&n===s||!n&&s!==void 0?null:o.jsx(o.Fragment,{children:t})});s$.displayName="HideInEntropy";const zyt=/^\/b\//;function Ebe(e){return e&&zyt.test(e)}function Gyt(e){return e?new URL(window.location.href).pathname.endsWith(`/search/${e}`):!1}function qyt(e){return e?.startsWith("/collections")||e?.startsWith("/spaces")}function Kyt(){return dn()?"/b/home":"/"}const wx=()=>{const{locale:e}=Z();return lme(e)==="rtl"},Yyt=({children:e,ref:t})=>o.jsx(Vyt,{children:o.jsx(z,{variant:"underlay",children:o.jsx("div",{className:"isolate flex h-dvh",ref:t,children:e})})}),Qyt=({children:e})=>{const{isMobileStyle:t}=xe({evaluateOnInit:!0});return t?o.jsx(Wyt,{children:e}):o.jsx(o.Fragment,{children:e})},Xyt=({children:e,fillHeight:t=!0,hasSidebar:n,ref:r})=>{const{isSidebarPinned:s}=In(),{isMobileStyle:a}=xe({evaluateOnInit:!0}),i=Lt(),l=n&&!Ebe(i),c=s&&!a&&l,u=Ks(),f=wx(),m=d.useMemo(()=>f?{paddingRight:c?sM:0}:{paddingLeft:c?sM:0},[f,c]);return o.jsxs(ve.div,{initial:m,animate:m,transition:{duration:.2,ease:an},className:"erp-tab:p-0 md:gap-xs erp-tab:gap-0 isolate flex h-auto max-h-screen min-w-0 grow flex-col",ref:r,children:[o.jsx(s$,{inRenderingPlace:"sidecar",children:o.jsx(wbe,{})}),o.jsxs(z,{variant:"background",className:"@container/main relative isolate min-h-0 flex-1 overflow-clip bg-clip-border",children:[o.jsx("div",{className:B("mx-auto flex w-full flex-col",{"h-full":t}),children:e}),o.jsx(z,{className:B("rounded-inherit pointer-events-none absolute inset-0 z-20 hidden md:dark:block",l&&"md:!border-y-0 md:!border-r-0",!u&&"md:dark:border")})]})]})},Cx=({children:e,childrenWidth:t,containerClassName:n=""})=>{const r=Qr(t).with("small",()=>"max-w-screen-sm px-md md:px-lg").with("default",()=>"max-w-screen-md px-md md:px-lg").with("static",()=>"max-w-screen-lg px-md py-lg md:px-xl").with("large",()=>"max-w-threadWidth px-md md:px-lg").with("none",()=>"max-w-none").otherwise(()=>"max-w-screen-md px-md md:px-lg"),s=d.useRef(null);return o.jsx(Hyt,{scrollContainerRef:s,children:o.jsx("div",{ref:s,className:"scrollable-container scrollbar-subtle flex flex-1 basis-0 overflow-auto [scrollbar-gutter:stable]",children:o.jsx("div",{className:B("mx-auto size-full",r,n),children:e})})})},din=({children:e,mobileHeader:t=!0})=>{const{isMobileStyle:n}=xe();return o.jsxs(o.Fragment,{children:[o.jsx("div",{children:t&&n&&o.jsx(Sbe,{})}),e]})};function XJ(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?XJ(Object(n),!0).forEach(function(r){Mbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):XJ(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function g2(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?g2=function(t){return typeof t}:g2=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g2(e)}function Mbe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zyt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Jyt(e,t){if(e==null)return{};var n=Zyt(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function aM(e,t){return ext(e)||txt(e,t)||nxt(e,t)||rxt()}function ext(e){if(Array.isArray(e))return e}function txt(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var r=[],s=!0,a=!1,i,l;try{for(n=n.call(e);!(s=(i=n.next()).done)&&(r.push(i.value),!(t&&r.length===t));s=!0);}catch(c){a=!0,l=c}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw l}}return r}}function nxt(e,t){if(e){if(typeof e=="string")return ZJ(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ZJ(e,t)}}function ZJ(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rxt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var To=function(t,n,r){var s=!!r,a=I.useRef(r);I.useEffect(function(){a.current=r},[r]),I.useEffect(function(){if(!s||!t)return function(){};var i=function(){a.current&&a.current.apply(a,arguments)};return t.on(n,i),function(){t.off(n,i)}},[s,n,t,a])},K1=function(t){var n=I.useRef(t);return I.useEffect(function(){n.current=t},[t]),n.current},Hm=function(t){return t!==null&&g2(t)==="object"},sxt=function(t){return Hm(t)&&typeof t.then=="function"},axt=function(t){return Hm(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},JJ="[object Object]",B8=function e(t,n){if(!Hm(t)||!Hm(n))return t===n;var r=Array.isArray(t),s=Array.isArray(n);if(r!==s)return!1;var a=Object.prototype.toString.call(t)===JJ,i=Object.prototype.toString.call(n)===JJ;if(a!==i)return!1;if(!a&&!r)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var u={},f=0;f<l.length;f+=1)u[l[f]]=!0;for(var m=0;m<c.length;m+=1)u[c[m]]=!0;var p=Object.keys(u);if(p.length!==l.length)return!1;var h=t,g=n,y=function(v){return e(h[v],g[v])};return p.every(y)},kbe=function(t,n,r){return Hm(t)?Object.keys(t).reduce(function(s,a){var i=!Hm(n)||!B8(t[a],n[a]);return r.includes(a)?(i&&console.warn("Unsupported prop change: options.".concat(a," is not a mutable property.")),s):i?Wh(Wh({},s||{}),{},Mbe({},a,t[a])):s},null):null},Tbe="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",eee=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tbe;if(t===null||axt(t))return t;throw new Error(n)},Nbe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Tbe;if(sxt(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(s){return eee(s,n)})};var r=eee(t,n);return r===null?{tag:"empty"}:{tag:"sync",stripe:r}},jbe=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"3.1.0"}),t.registerAppInfo({name:"react-stripe-js",version:"3.1.0",url:"https://stripe.com/docs/stripe-js/react"}))},L3=I.createContext(null);L3.displayName="ElementsContext";var Abe=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},oxt=function(t){var n=t.stripe,r=t.options,s=t.children,a=I.useMemo(function(){return Nbe(n)},[n]),i=I.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,elements:a.tag==="sync"?a.stripe.elements(r):null}}),l=aM(i,2),c=l[0],u=l[1];I.useEffect(function(){var p=!0,h=function(y){u(function(x){return x.stripe?x:{stripe:y,elements:y.elements(r)}})};return a.tag==="async"&&!c.stripe?a.stripePromise.then(function(g){g&&p&&h(g)}):a.tag==="sync"&&!c.stripe&&h(a.stripe),function(){p=!1}},[a,c,r]);var f=K1(n);I.useEffect(function(){f!==null&&f!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[f,n]);var m=K1(r);return I.useEffect(function(){if(c.elements){var p=kbe(r,m,["clientSecret","fonts"]);p&&c.elements.update(p)}},[r,m,c.elements]),I.useEffect(function(){jbe(c.stripe)},[c.stripe]),I.createElement(L3.Provider,{value:c},s)};oxt.propTypes={stripe:Fe.any,options:Fe.object};var ixt=function(t){var n=I.useContext(L3);return Abe(n,t)},fin=function(){var t=ixt("calls useElements()"),n=t.elements;return n};Fe.func.isRequired;var lxt=["on","session"],O3=I.createContext(null);O3.displayName="CheckoutSdkContext";var Ibe=function(t,n){if(!t)throw new Error("Could not find CheckoutProvider context; You need to wrap the part of your app that ".concat(n," in an <CheckoutProvider> provider."));return t},a$=I.createContext(null);a$.displayName="CheckoutContext";var cxt=function(t,n){if(!t)return null;t.on,t.session;var r=Jyt(t,lxt);return n?Wh(Wh({},r),n):Wh(Wh({},r),t.session())},uxt="Invalid prop `stripe` supplied to `CheckoutProvider`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",dxt=function(t){var n=t.stripe,r=t.options,s=t.children,a=I.useMemo(function(){return Nbe(n,uxt)},[n]),i=I.useState(null),l=aM(i,2),c=l[0],u=l[1],f=I.useState(function(){return{stripe:a.tag==="sync"?a.stripe:null,checkoutSdk:null}}),m=aM(f,2),p=m[0],h=m[1],g=function(w,C){h(function(S){return S.stripe&&S.checkoutSdk?S:{stripe:w,checkoutSdk:C}})},y=I.useRef(!1);I.useEffect(function(){var _=!0;return a.tag==="async"&&!p.stripe?a.stripePromise.then(function(w){w&&_&&!y.current&&(y.current=!0,w.initCheckout(r).then(function(C){C&&(g(w,C),C.on("change",u))}))}):a.tag==="sync"&&a.stripe&&!y.current&&(y.current=!0,a.stripe.initCheckout(r).then(function(w){w&&(g(a.stripe,w),w.on("change",u))})),function(){_=!1}},[a,p,r,u]);var x=K1(n);I.useEffect(function(){x!==null&&x!==n&&console.warn("Unsupported prop change on CheckoutProvider: You cannot change the `stripe` prop after setting it.")},[x,n]);var v=K1(r);I.useEffect(function(){var _,w;if(p.checkoutSdk){r.clientSecret&&!Hm(v)&&!B8(r.clientSecret,v.clientSecret)&&console.warn("Unsupported prop change: options.clientSecret is not a mutable property.");var C=v==null||(_=v.elementsOptions)===null||_===void 0?void 0:_.appearance,S=r==null||(w=r.elementsOptions)===null||w===void 0?void 0:w.appearance;S&&!B8(S,C)&&p.checkoutSdk.changeAppearance(S)}},[r,v,p.checkoutSdk]),I.useEffect(function(){jbe(p.stripe)},[p.stripe]);var b=I.useMemo(function(){return cxt(p.checkoutSdk,c)},[p.checkoutSdk,c]);return p.checkoutSdk?I.createElement(O3.Provider,{value:p},I.createElement(a$.Provider,{value:b},s)):null};dxt.propTypes={stripe:Fe.any,options:Fe.shape({clientSecret:Fe.string.isRequired,elementsOptions:Fe.object}).isRequired};var fxt=function(t){var n=I.useContext(O3);return Ibe(n,t)},$8=function(t){var n=I.useContext(O3),r=I.useContext(L3);if(n&&r)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n?Ibe(n,t):Abe(r,t)},min=function(){fxt("calls useCheckout()");var t=I.useContext(a$);if(!t)throw new Error("Could not find Checkout Context; You need to wrap the part of your app that calls useCheckout() in an <CheckoutProvider> provider.");return t},mxt=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},rs=function(t,n){var r="".concat(mxt(t),"Element"),s=function(c){var u=c.id,f=c.className,m=c.options,p=m===void 0?{}:m,h=c.onBlur,g=c.onFocus,y=c.onReady,x=c.onChange,v=c.onEscape,b=c.onClick,_=c.onLoadError,w=c.onLoaderStart,C=c.onNetworksChange,S=c.onConfirm,E=c.onCancel,k=c.onShippingAddressChange,M=c.onShippingRateChange,j=$8("mounts <".concat(r,">")),R="elements"in j?j.elements:null,O="checkoutSdk"in j?j.checkoutSdk:null,D=I.useState(null),P=aM(D,2),A=P[0],T=P[1],N=I.useRef(null),L=I.useRef(null);To(A,"blur",h),To(A,"focus",g),To(A,"escape",v),To(A,"click",b),To(A,"loaderror",_),To(A,"loaderstart",w),To(A,"networkschange",C),To(A,"confirm",S),To(A,"cancel",E),To(A,"shippingaddresschange",k),To(A,"shippingratechange",M),To(A,"change",x);var U;y&&(t==="expressCheckout"?U=y:U=function(){y(A)}),To(A,"ready",U),I.useLayoutEffect(function(){if(N.current===null&&L.current!==null&&(R||O)){var V=null;O?V=O.createElement(t,p):R&&(V=R.create(t,p)),N.current=V,T(V),V&&V.mount(L.current)}},[R,O,p]);var $=K1(p);return I.useEffect(function(){if(N.current){var V=kbe(p,$,["paymentRequest"]);V&&"update"in N.current&&N.current.update(V)}},[p,$]),I.useLayoutEffect(function(){return function(){if(N.current&&typeof N.current.destroy=="function")try{N.current.destroy(),N.current=null}catch{}}},[]),I.createElement("div",{id:u,className:f,ref:L})},a=function(c){$8("mounts <".concat(r,">"));var u=c.id,f=c.className;return I.createElement("div",{id:u,className:f})},i=n?a:s;return i.propTypes={id:Fe.string,className:Fe.string,onChange:Fe.func,onBlur:Fe.func,onFocus:Fe.func,onReady:Fe.func,onEscape:Fe.func,onClick:Fe.func,onLoadError:Fe.func,onLoaderStart:Fe.func,onNetworksChange:Fe.func,onConfirm:Fe.func,onCancel:Fe.func,onShippingAddressChange:Fe.func,onShippingRateChange:Fe.func,options:Fe.object},i.displayName=r,i.__elementType=t,i},ss=typeof window>"u",pxt=I.createContext(null);pxt.displayName="EmbeddedCheckoutProviderContext";var pin=function(){var t=$8("calls useStripe()"),n=t.stripe;return n};rs("auBankAccount",ss);rs("card",ss);rs("cardNumber",ss);rs("cardExpiry",ss);rs("cardCvc",ss);rs("fpxBank",ss);rs("iban",ss);rs("idealBank",ss);rs("p24Bank",ss);rs("epsBank",ss);var hin=rs("payment",ss),gin=rs("expressCheckout",ss);rs("currencySelector",ss);rs("paymentRequestButton",ss);var yin=rs("linkAuthentication",ss),xin=rs("address",ss);rs("shippingAddress",ss);rs("paymentMethodMessaging",ss);rs("affirmMessage",ss);rs("afterpayClearpayMessage",ss);const tee="USD",hxt=({lineItems:e})=>{const{$t:t,formatNumber:n}=Z(),r=d.useMemo(()=>{const s=e;return[{title:J({defaultMessage:"Payment method",id:"BVTni9A2ca"}),value:s.payment_method,separator:!0},{title:J({defaultMessage:"Perplexity Max Subscription",id:"zmPIe7d+w+"}),value:s.new_product_price?Eh(s.new_product_price,n):""},{title:J({defaultMessage:"Adjustment",id:"LaLTJRqloA"}),value:s.adjustment_price?Eh(s.adjustment_price,n):"",separator:!0},{title:J({defaultMessage:"Subtotal",id:"L8seEcJFZ7"}),value:Eh(s.subtotal_price,n)},{title:J({defaultMessage:"Taxes",id:"r+dgivP2Od"}),value:Eh(s.tax_price,n),separator:!0},{title:J({defaultMessage:"Total due today",id:"MxAykvkF+r"}),value:Eh(s.total_due_today_price,n),color:"default",size:"small"}]},[e,n]);return o.jsx("ul",{className:"flex flex-col",children:r.map(s=>o.jsxs("li",{className:`flex items-center justify-between ${s.separator?"border-subtlest py-sm mb-sm border-b":"pb-sm"}`,children:[o.jsx(F,{variant:"tinyRegular",color:"light",children:t(s.title)}),o.jsx(F,{variant:s.size??"tinyRegular",color:s.color??"light",children:s.value})]},s.title.id))})},gxt=({variant:e="secondary",fullWidth:t=!1,subscriptionSource:n})=>{const{$t:r}=Z(),s=n==="softbank",a=[{type:"default",text:r({defaultMessage:"SoftBank",id:"mz906WB9pc"}),href:"https://stn.mb.softbank.jp/G4H51",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/G4H51","_blank")}},{type:"default",text:r({defaultMessage:"Y!mobile",id:"waO5BNtbEl"}),href:"https://stn.mb.softbank.jp/h6C4p",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/h6C4p","_blank")}},{type:"default",text:r({defaultMessage:"LINEMO",id:"5EeaeTgd/I"}),href:"https://stn.mb.softbank.jp/22m5K",onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/22m5K","_blank")}}];return o.jsx("div",{className:"flex items-center gap-2",children:s?o.jsx(nn,{items:a,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(hs,{size:"small",variant:e,fullWidth:t,trailingIcon:Wn,children:o.jsx(ie,{defaultMessage:"Manage carrier billing",id:"qt9JnrA7Lf"})})}):o.jsx(hs,{size:"small",variant:e,fullWidth:t,onClick:i=>{i.preventDefault(),window.open("https://stn.mb.softbank.jp/b6O6d","_blank")},trailingIcon:ba,children:o.jsx(ie,{defaultMessage:"Set up carrier billing",id:"KvLeD+r7rf"})})})},yxt="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",xxt="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",vxt="https://perplexity.sng.link/A6awk/pxdx?_ios_dl=home&_android_dl=singular-perplexity%3A%2F%2Fhome&_smtype=3";function bxt(e){switch(e){case"ios":return"https://www.apple.com/app-store/";case"android":return"https://play.google.com/store";default:Qt(e)}}const _xt=({text:e,hasPreviousSub:t=!1,origin:n,variant:r="tonal",fullWidth:s=!1})=>{const a="sub-modal-button",{$t:i,locale:l}=Z(),c=vt(),{hasAccessToProFeatures:u,subscriptionSource:f}=St(),{revenuecatStatus:m,stripeStatus:p}=wo({reason:a}),{previousSubscriptionSource:h}=ybe({reason:a}),{env:{isProduction:g,isBeta:y}}=Pt(),{session:x}=mt(),v=Jo(),{openModal:b}=xt(),_=d.useCallback(async()=>{if(f==="incentive"){b("incentiveProModal",{origin:n});return}const S=f==="ios"||f==="android",E=h==="ios"||h==="android";if(S||E){E&&h!==f?c.push(bxt(h)):c.push(vxt);return}if(f==="braintree"){n===Le.UPGRADE_MODAL?c.push("/max/payment"):b("braintreeSubscriptionModal",{origin:n});return}const M=await P5({reason:"sub-modal-button"});M?c.push(M):c.push(g||y?xxt:yxt)},[f,h,c,g,y,l,b,n]),w=u||p==="past_due"||t===!0,C=d.useMemo(()=>f==="ios"?i({defaultMessage:"Manage in App Store",id:"3iCRcP8mV0"}):f==="android"?i({defaultMessage:"Manage in Google Play",id:"tiFovnryYO"}):f==="braintree"?n===Le.UPGRADE_MODAL?i({defaultMessage:"Continue to payment",id:"+g+0OKqjZc"}):i({defaultMessage:"Manage subscription",id:"Oj9Phcvy9M"}):t?i({defaultMessage:"Manage plan",id:"88XpVMnmFe"}):m!=="none"||["ios","android"].includes(h)?i({defaultMessage:"Mobile subscription",id:"EttF2eTvlk"}):i(f==="softbank"?{defaultMessage:"SoftBank, Y!mobile, and LINEMO Customers",id:"i1WJntbsih"}:{defaultMessage:"Manage",id:"0AzlrbMWV9"}),[f,t,m,h,i,n]);return o.jsx("div",{children:w?f==="softbank"?o.jsx(gxt,{fullWidth:s,variant:r,subscriptionSource:f}):o.jsx(hs,{fullWidth:s,size:"small",onClick:_,variant:r,trailingIcon:ba,children:C}):o.jsx(hs,{size:"small",onClick:()=>{x?v({origin:n}):b("loginModal",{origin:Le.TRY_PRO,pitchMessage:{title:i({defaultMessage:"Sign in to unlock {pro}",id:"HsM7RilrD6"},{pro:"Pro"})}})},variant:r,leadingIcon:ba,children:e??o.jsx(ie,{defaultMessage:"Learn more",id:"TdTXXf940t"})})})},wxt="https://billing.stripe.com/p/login/test_7sIdSS7ioeNSdpe9AA",Cxt="https://billing.stripe.com/p/login/6oEeXaewnb3z1facMM",Sxt=()=>{const e=vt(),{env:{isProduction:t,isBeta:n}}=Pt(),r=d.useCallback(async({locale:s,reason:a})=>{const i=await P5({reason:a});i?e.push(i):e.push(t||n?Cxt:wxt)},[e,t,n]);return d.useMemo(()=>({navigateToCustomerPortal:r}),[r])};var Ia;(function(e){e.UNSUPPORTED="unsupported",e.MISSING_PAYMENT_METHOD="missingPaymentMethod",e.PAYMENT_FAILED="paymentFailed",e.ANDROID="android",e.IOS="ios",e.UPGRADE_TO_CONTINUE="upgradeToContinue",e.GENERIC_PAYMENT_ERROR="genericPaymentError"})(Ia||(Ia={}));function Ext({subscriptionSource:e,isMissingPaymentMethod:t,paymentFailed:n,upgradeError:r}){return e==="android"?Ia.ANDROID:e==="ios"?Ia.IOS:t?Ia.MISSING_PAYMENT_METHOD:n?Ia.PAYMENT_FAILED:r?Ia.GENERIC_PAYMENT_ERROR:Ia.UPGRADE_TO_CONTINUE}function Mxt(e){switch(e){case Ia.UNSUPPORTED:return J({defaultMessage:"Max subscriptions are not supported by carrier billing.",id:"Ux4ivT++jB"});case Ia.MISSING_PAYMENT_METHOD:return J({defaultMessage:"Please add a payment method to upgrade to Max.",id:"W6HVT1BPC8"});case Ia.PAYMENT_FAILED:return J({defaultMessage:"Payment failed. Please update payment to continue.",id:"b0rdlbJ3AI"});case Ia.ANDROID:return J({defaultMessage:"You subscribed on the Google Play Store. Upgrade your subscription via settings on the Android app.",id:"97MQ1Swe7/"});case Ia.IOS:return J({defaultMessage:"You subscribed on the App Store. Upgrade your subscription via settings on the iOS app.",id:"JGkQSWrZEy"});case Ia.UPGRADE_TO_CONTINUE:return J({defaultMessage:"You will be charged now and immediately get access to Max.",id:"9x1isMahOJ"});case Ia.GENERIC_PAYMENT_ERROR:return J({defaultMessage:"Something went wrong. Please continue to Stripe and complete your payment.",id:"xdKfV2F++4"});default:Qt(e)}}const nee=e=>{if(e){if(e instanceof we&&"details"in e){const t=e.details;if(t?.errorDetail&&typeof t.errorDetail=="object"&&"error_code"in t.errorDetail)return t.errorDetail.error_code}return e.message}},ree=6,kxt=()=>o.jsx("ul",{className:"flex flex-col",children:Array.from({length:ree}).map((e,t)=>{const n=t%2===0;return o.jsx("li",{className:B({"border-subtlest py-sm mb-sm border-b":n,"pb-sm":!n}),children:o.jsx(un,{children:o.jsx(z,{variant:"subtler",className:B("h-4 w-full rounded",{"py-0.5":t===ree-1})})})},t)})}),Txt=({isOpen:e,onClose:t})=>{const n=Z(),{session:r}=mt(),s=r?.user?.subscription_source,a=s==="stripe",{data:i,isLoading:l,status:c,error:u}=hpe({reason:"upgrade-modal",enabled:a}),{data:f,isLoading:m}=VP({currency:tee,reason:"upgrade-modal",subscriptionTier:"max"}),{data:p,isLoading:h}=VP({currency:tee,reason:"upgrade-modal",subscriptionTier:"pro"}),{formatNumber:g,locale:y}=Z(),{update:x}=mt(),{currentOpenModals:v}=xt(),{trackEvent:b}=Te(),{navigateToCustomerPortal:_}=Sxt(),w=d.useMemo(()=>f?.prices?.find(({tier:L})=>L==="monthly")??null,[f]),C=d.useMemo(()=>p?.prices?.find(({tier:L})=>L==="monthly")??null,[p]),S=d.useMemo(()=>c==="error"?nee(u):null,[c,u]),E=d.useCallback(async()=>{await z5({reason:"upgrade-to-max-modal"}),await x(),t(),b("subscription upgrade success"),v.length>0&&t(),Jg({upgrade_max:"success",subscription_tier:"max"})},[t,v,x,b]),k=ype({reason:"upgrade-modal"},{onSuccess:E}),M=S==="missing_payment_method",j=S==="stripe_upgrade_payment_error";d.useEffect(()=>{e&&b("subscription upgrade modal rendered")},[e,b]);const R=Ext({subscriptionSource:s,isMissingPaymentMethod:M,paymentFailed:j,upgradeError:nee(k?.error)}),O=d.useCallback(async()=>{await _({locale:y,reason:"upgrade-modal-add-payment"})},[_,y]),D=!!i?.payment_method,P=M||j||!!k.error,A=d.useMemo(()=>!a||k.isPending||!D||l||!!k.error,[a,k.isPending,D,l,k.error]),T=d.useCallback(async()=>{k.isPending||await k.mutateAsync()},[k]),N=d.useMemo(()=>M?o.jsx(ie,{defaultMessage:"Add payment method",id:"+EIsonKmCI"}):k.error?o.jsx(ie,{defaultMessage:"Continue to Stripe",id:"W2hJP+kQGf"}):o.jsx(ie,{defaultMessage:"Update payment method",id:"iIM9E+ynde"}),[M,k.error]);return o.jsx(qt,{isOpen:e,onClose:t,renderCloseButton:!1,headerClassname:"hidden",modalClassname:"!w-[416px] !min-w-[416px] !max-w-[416px] !p-0",modalContentClassname:"!p-0",noPadding:!0,children:o.jsxs(z,{className:"p-ml",children:[o.jsx(F,{variant:"baseSemi",children:o.jsx(ie,{defaultMessage:"Confirm changes",id:"AnPtOvcf8f"})}),o.jsx(nM,{planName:{id:"R/eOkjWqNU",defaultMessage:"Pro"},price:c==="error"||!a?C:i?.old_product_price,formatNumber:g,billingInterval:c==="error"||!a?"monthly":i?.old_product_interval}),o.jsx(z,{children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex items-center justify-center gap-1",children:[o.jsx("div",{className:"border-subtlest flex-1 border-t"}),o.jsx(ie,{defaultMessage:"Upgrade",id:"0h/lPMeYkq"}),o.jsx("div",{className:"border-subtlest flex-1 border-t"})]})}),o.jsx(nM,{planName:{id:"kkjl2vQekD",defaultMessage:"Max"},price:M||!a?w:i?.new_product_price,formatNumber:g,billingInterval:M||!a?"monthly":i?.new_product_interval,isHighlighted:!0,className:"mb-ml"}),l?o.jsx(kxt,{}):i&&o.jsx(hxt,{lineItems:i}),o.jsxs(z,{variant:"subtler",className:"px-md py-sm mt-ml gap-sm flex flex-col rounded-md",children:[o.jsx(F,{variant:"small",color:"light",children:o.jsx(ie,{...Mxt(R)})}),!a&&o.jsx(_xt,{origin:Le.UPGRADE_MODAL,variant:"primary",fullWidth:!0}),P&&o.jsx(me,{size:"small",fullWidth:!0,variant:"primary",text:N,onClick:O})]}),o.jsxs(z,{className:"gap-sm mt-ml flex justify-end",children:[o.jsx(Me,{text:n.formatMessage({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t}),o.jsx(me,{variant:"primary",text:n.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),isLoading:k.isPending,disabled:A,onClick:T})]})]})})};var Nxt={};const zr=I.memo(()=>o.jsx("div",{className:"bg-backdrop/70 fixed inset-0 z-[999] flex items-center justify-center backdrop-blur-sm",children:o.jsx(Fr,{})}));zr.displayName="ModalLoader";const Rbe=I.memo(()=>o.jsx("p",{children:"An error has occurred"}));Rbe.displayName="ErrorFallback";const jxt=he(async()=>{const{LocationPermissionModal:e}=await X(async()=>{const{LocationPermissionModal:t}=await Promise.resolve().then(()=>xGt);return{LocationPermissionModal:t}},void 0);return{default:e}},{loading:()=>o.jsx(zr,{})}),see=he(async()=>{const{FileUploadModal:e}=await X(async()=>{const{FileUploadModal:t}=await import("./FileUploadModal-DFsHPCxy.js");return{FileUploadModal:t}},__vite__mapDeps([9,1,2,5,10,11,6,7]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Axt=he(async()=>{const{CometDownloadInstructionsModal:e}=await X(async()=>{const{CometDownloadInstructionsModal:t}=await import("./CometDownloadInstructionsModal-DtoBv7E_.js");return{CometDownloadInstructionsModal:t}},__vite__mapDeps([12,1,2,5,6,7]));return{default:e}},{loading:()=>o.jsx(zr,{})}),aee=he(async()=>{const{CollectionCreateEditModal:e}=await X(async()=>{const{CollectionCreateEditModal:t}=await import("./CollectionCreateEditModal-hEanxRQM.js");return{CollectionCreateEditModal:t}},__vite__mapDeps([13,1,2,5,6,14,7]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Ixt=he(async()=>{const{CollectionSelectModal:e}=await X(async()=>{const{CollectionSelectModal:t}=await import("./CollectionSelectModal-C99C1v2h.js");return{CollectionSelectModal:t}},__vite__mapDeps([15,1,2,5,14,6,7]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Rxt=he(async()=>{const{OnboardingModal:e}=await X(async()=>{const{OnboardingModal:t}=await import("./OnboardingModal-C1-ZoNj2.js").then(n=>n.a);return{OnboardingModal:t}},__vite__mapDeps([16,1,2,5,7,6,17,18,19,20,21,22,23,24]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Pxt=he(async()=>{const{PurchaseConfirmationToast:e}=await X(async()=>{const{PurchaseConfirmationToast:t}=await import("./PurchaseConfirmationToast-CpDCx5ES.js");return{PurchaseConfirmationToast:t}},__vite__mapDeps([25,1,2,5,6,7,26]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Lxt=he(async()=>{const{ThreadLossAversionModal:e}=await X(async()=>{const{ThreadLossAversionModal:t}=await Promise.resolve().then(()=>kvt);return{ThreadLossAversionModal:t}},void 0);return{default:e}},{loading:()=>o.jsx(zr,{})}),Oxt=he(async()=>{const{CompanyDataPrivacyModal:e}=await X(async()=>{const{CompanyDataPrivacyModal:t}=await import("./CompanyDataPrivacyModal-vpY0ejQe.js");return{CompanyDataPrivacyModal:t}},__vite__mapDeps([27,1,2,5,7,6]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Dxt=he(async()=>{const{SpaceVideoModal:e}=await X(async()=>{const{SpaceVideoModal:t}=await import("./SpaceVideoModal-CYrK_Vbd.js");return{SpaceVideoModal:t}},__vite__mapDeps([28,1,2,5,7,6]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Fxt=he(async()=>{const{PricingTableModal:e}=await X(async()=>{const{PricingTableModal:t}=await import("./PricingTableModal-C0_AwxtJ.js");return{PricingTableModal:t}},__vite__mapDeps([29,1,2,7,30,5,6,21]));return{default:e}}),Uxt=he(async()=>{const{MapModal:e}=await X(async()=>{const{MapModal:t}=await import("./MapModal-CVCnFzcR.js");return{MapModal:t}},__vite__mapDeps([31,1,2,32,7,5,6]));return{default:e}}),Bxt=he(()=>X(()=>import("./InputPaymentModal-I5H69ZAW.js"),__vite__mapDeps([33,1,2,7,34,5,6]))),$xt=he(()=>X(()=>import("./ShoppingPaymentModal-4aMecxh9.js").then(e=>e.b),__vite__mapDeps([35,1,2,5,36,37,38,39,7,6,40,41,42,43,44,45,46,47,48,34,49,50,51,52,26])),{loading:()=>o.jsx(zr,{})}),Vxt=he(async()=>{const{ShoppingOnboardingModal:e}=await X(async()=>{const{ShoppingOnboardingModal:t}=await import("./ShoppingOnboardingModal-DJMWAAHD.js");return{ShoppingOnboardingModal:t}},__vite__mapDeps([53,1,2,5,52,6,35,36,37,38,39,7,40,41,42,43,44,45,46,47,48,34,49,50,51,26]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Wxt=he(async()=>{const{PurchaseDetailsModal:e}=await X(async()=>{const{PurchaseDetailsModal:t}=await import("./PurchaseDetailsModal-Cb1W5iDi.js");return{PurchaseDetailsModal:t}},__vite__mapDeps([54,1,2,5,52,6,55,7]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Hxt=he(async()=>{const{ReservationDetailsModal:e}=await X(async()=>{const{ReservationDetailsModal:t}=await import("./ReservationDetailsModal-DHu-dIsk.js");return{ReservationDetailsModal:t}},__vite__mapDeps([56,1,2,5,57,6,58,7]));return{default:e}},{loading:()=>o.jsx(zr,{})}),zxt=he(async()=>{const{SpaceSettingsModal:e}=await X(async()=>{const{SpaceSettingsModal:t}=await import("./SpaceSettingsModal-CQHMnKn8.js");return{SpaceSettingsModal:t}},__vite__mapDeps([59,1,2,5,7,6]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Gxt=he(async()=>{const{UsernameModal:e}=await X(async()=>{const{UsernameModal:t}=await import("./UsernameModal-BE04mvP9.js");return{UsernameModal:t}},__vite__mapDeps([60,1,2,5,7,6]));return{default:e}}),qxt=he(async()=>{const{FullNameModal:e}=await X(async()=>{const{FullNameModal:t}=await import("./FullNameModal-CTWDdtvH.js");return{FullNameModal:t}},__vite__mapDeps([61,1,2,5,7,6]));return{default:e}}),Kxt=he(async()=>{const{KeyboardShortcutEditorModal:e}=await X(async()=>{const{KeyboardShortcutEditorModal:t}=await import("./KeyboardShortcutEditorModal-INrp25HW.js");return{KeyboardShortcutEditorModal:t}},__vite__mapDeps([62,1,2,5,7,6]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Yxt=he(async()=>{const{VoiceToVoiceModal:e}=await X(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-ht83EKur.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([63,1,2,64,5,7,6]));return{default:e}},{loading:()=>o.jsx(GB,{})}),Qxt=he(async()=>{const{MemoryListModal:e}=await X(async()=>{const{MemoryListModal:t}=await import("./MemoryListModal-aYCax0zx.js");return{MemoryListModal:t}},__vite__mapDeps([65,1,2,5,66,6,7]));return{default:e}}),Xxt=he(async()=>{const{MemoryDetailModal:e}=await X(async()=>{const{MemoryDetailModal:t}=await import("./MemoryDetailModal-D3dw7W9k.js");return{MemoryDetailModal:t}},__vite__mapDeps([67,1,2,5,7,6]));return{default:e}}),Zxt=he(async()=>{const{HotelRoomDetailsModal:e}=await X(async()=>{const{HotelRoomDetailsModal:t}=await import("./HotelRoomDetailsModal-C9bHkAl2.js");return{HotelRoomDetailsModal:t}},__vite__mapDeps([68,1,2,5,69,7,6]));return{default:e}},{loading:()=>o.jsx(zr,{})}),Jxt=he(async()=>{const{PaymentModal:e}=await X(async()=>{const{PaymentModal:t}=await import("./PaymentModal-DhpQWjTD.js");return{PaymentModal:t}},__vite__mapDeps([70,1,2,5,7,6,50,34]));return{default:e}},{loading:()=>o.jsx(zr,{})}),evt=he(async()=>{const{FreeTrialModal:e}=await X(async()=>{const{FreeTrialModal:t}=await import("./FreeTrialModal-BmnK4a0l.js");return{FreeTrialModal:t}},__vite__mapDeps([30,1,2,5,7,6]));return{default:e}}),tvt=he(async()=>{const{ProReferralModal:e}=await X(async()=>{const{ProReferralModal:t}=await import("./ProReferralModal-Dc7vxYhi.js");return{ProReferralModal:t}},__vite__mapDeps([71,1,2,5,6,7]));return{default:e}}),nvt=he(async()=>{const{MeetingDefaultsModal:e}=await X(async()=>{const{MeetingDefaultsModal:t}=await import("./MeetingDefaultsModal-D20JM4id.js");return{MeetingDefaultsModal:t}},__vite__mapDeps([72,1,2,5,6,7]));return{default:e}}),rvt=he(async()=>{const{AvailabilityModal:e}=await X(async()=>{const{AvailabilityModal:t}=await import("./AvailabilityModal-C1bgmg8H.js");return{AvailabilityModal:t}},__vite__mapDeps([73,1,2,5,6,7]));return{default:e}}),svt=he(async()=>{const{ProMessageModal:e}=await X(async()=>{const{ProMessageModal:t}=await import("./ProMessageModal-UT3LSxoK.js");return{ProMessageModal:t}},__vite__mapDeps([74,1,2,6,7,5]));return{default:e}}),avt=he(async()=>{const{MemorySearchHistoryIntroModal:e}=await X(async()=>{const{MemorySearchHistoryIntroModal:t}=await import("./MemorySearchHistoryIntroModal-DXkpievf.js");return{MemorySearchHistoryIntroModal:t}},__vite__mapDeps([75,1,2,5,7,6]));return{default:e}}),ovt=he(async()=>X(()=>import("./SubSuccessModal-CRhNJYYq.js"),__vite__mapDeps([76,1,2,5,77,6,7]))),ivt=he(async()=>X(()=>import("./ReferralErrorModal-d1zB06it.js"),__vite__mapDeps([78,1,2,5,7,6]))),lvt=he(async()=>X(()=>import("./ReferralSuccessModal-CBSE0M5O.js"),__vite__mapDeps([79,1,2,5,24,7,6]))),cvt=he(async()=>X(()=>import("./IncentiveProModal-jQ_8iHSu.js"),__vite__mapDeps([80,1,2,5,7,6]))),uvt=he(async()=>{const{StudentReferralsModal:e}=await X(async()=>{const{StudentReferralsModal:t}=await import("./StudentReferralsModal-UxLyFT0z.js");return{StudentReferralsModal:t}},__vite__mapDeps([81,1,2,22,5,23,24,6,7]));return{default:e}}),dvt=he(async()=>{const{SheerIDModal:e}=await X(async()=>{const{SheerIDModal:t}=await import("./SheerIDModal-DFlc-m7P.js");return{SheerIDModal:t}},__vite__mapDeps([82,1,2,5,7,6]));return{default:e}}),fvt=he(async()=>X(()=>import("./BraintreeSubscriptionModal-COH-6oe9.js"),__vite__mapDeps([83,1,2,5,7,6]))),mvt=he(async()=>{const{RestaurantBookingModal:e}=await X(async()=>{const{RestaurantBookingModal:t}=await import("./RestaurantBookingModal-2PKvjiRZ.js");return{RestaurantBookingModal:t}},__vite__mapDeps([84,1,2,5,7,6,85,41,42,43,44,45]));return{default:e}},{loading:()=>o.jsx(zr,{})}),pvt=he(async()=>X(()=>import("./SheerIdRedirectModal-Dtw9M9B7.js"),__vite__mapDeps([86,1,2,5,7,6]))),hvt=he(async()=>{const{EnterprisePremiumSecureUpgradeModal:e}=await X(async()=>{const{EnterprisePremiumSecureUpgradeModal:t}=await import("./EnterprisePremiumSecureUpgradeModal-dd0e1DYg.js");return{EnterprisePremiumSecureUpgradeModal:t}},__vite__mapDeps([87,1,2,5,88,7,6]));return{default:e}}),gvt=he(async()=>{const{ShortcutModal:e}=await X(async()=>{const{ShortcutModal:t}=await import("./ShortcutModal-CKbed51p.js");return{ShortcutModal:t}},__vite__mapDeps([89,1,2,5,6,7]));return{default:e}}),yvt=he(async()=>X(()=>Promise.resolve().then(()=>kHt),void 0)),xvt=he(async()=>{const{AutomationModal:e}=await X(async()=>{const{AutomationModal:t}=await Promise.resolve().then(()=>wHt);return{AutomationModal:t}},void 0);return{default:e}}),vvt=he(async()=>{const{FinanceAlertModal:e}=await X(async()=>{const{FinanceAlertModal:t}=await Promise.resolve().then(()=>SHt);return{FinanceAlertModal:t}},void 0);return{default:e}}),bvt=he(async()=>{const{PlatformOptionsModal:e}=await X(async()=>{const{PlatformOptionsModal:t}=await import("./PlatformOptionsModal-CoQvOjZo.js");return{PlatformOptionsModal:t}},__vite__mapDeps([90,2,1,7,6,5]));return{default:e}}),_vt=he(async()=>{const{SharepointSiteModal:e}=await X(async()=>{const{SharepointSiteModal:t}=await import("./SharepointSiteModal-CQtJlt6n.js");return{SharepointSiteModal:t}},__vite__mapDeps([91,1,2,5,7,6]));return{default:e}}),wvt=he(async()=>{const{MCPServerModal:e}=await X(async()=>{const{MCPServerModal:t}=await import("./MCPServerModal-CeLCL2Lp.js");return{MCPServerModal:t}},__vite__mapDeps([92,1,2,5,6,7]));return{default:e}}),Cvt=he(async()=>{const{MemberSetTierModal:e}=await X(async()=>{const{MemberSetTierModal:t}=await import("./MemberSetTierModal-B3CekSDX.js");return{MemberSetTierModal:t}},__vite__mapDeps([93,1,2,5,77,6,7]));return{default:e}}),Svt=he(async()=>{const{MCPServiceToolsModal:e}=await X(async()=>{const{MCPServiceToolsModal:t}=await import("./MCPServiceToolsModal-WO-_otHe.js");return{MCPServiceToolsModal:t}},__vite__mapDeps([94,1,2,5,7,6]));return{default:e}}),Evt=he(async()=>{const{PlaceModal:e}=await X(async()=>{const{PlaceModal:t}=await import("./PlaceModal-Dqyn-B__.js");return{PlaceModal:t}},__vite__mapDeps([85,1,2,5,41,42,43,44,45,6,7]));return{default:e}},{loading:()=>o.jsx(zr,{})});function Mvt(e){return e?{[e.modalName]:e.arg}:{}}const Pbe=I.memo(({})=>{const{currentOpenModals:e}=xt(),[t,n]=d.useState(e.length);d.useEffect(()=>{setTimeout(()=>{n(e.length)},100)},[e.length]);const r=t!=e.length;return e.map((s,a)=>o.jsx(Lbe,{modal:s,canOutsideClickClose:!r&&a+1==e.length},a))});Pbe.displayName="Modals";const Lbe=I.memo(({modal:e,canOutsideClickClose:t})=>{const n=d.useMemo(()=>({canOutsideClickClose:t}),[t]);return o.jsx(nye.Provider,{value:n,children:o.jsx(Obe,{modal:e})})});Lbe.displayName="SingleModalWrapper";const Obe=I.memo(({modal:e})=>{const{closeModal:t}=xt(),{hasActiveSubscription:n}=St(),r=e.modalName,{pricingModal:s,loginModal:a,installModal:i,cometDownloadInstructionsModal:l,requestAccessModal:c,collectionSelectModal:u,collectionCreateOrEdit:f,collectionCreateForThread:m,spaceCreate:p,spaceCreateForThread:h,spaceSettings:g,companyDataPrivacyModal:y,citationListModal:x,checkSourcesModal:v,mapModal:b,inputPaymentModal:_,shoppingPaymentModal:w,purchaseConfirmationModal:C,shoppingOnboardingModal:S,shoppingOrderDetailsModal:E,lossAversionModal:k,spaceVideoModal:M,uploadFilesModal:j,spaceUploadFilesModal:R,spaceContextModal:O,locationPermissionModal:D,watchlistModal:P,reservationDetailsModal:A,deleteMemoryModal:T,memoryDetailModal:N,hotelRoomDetailsModal:L,memoryListModal:U,proSubscriptionPaymentModal:$,proMessageModal:V,memorySearchHistoryModal:W,gmailFailedPermissionsModal:Q,subSuccessModal:q,incentiveProModal:H,restaurantBookingModal:K,sheerIdRedirectModal:G,enterprisePremiumSecureUpgradeModal:ee,taskShortcutModal:Y,financeAlertModal:te,scheduledTaskModal:se,automationModal:ae,referralSuccessModal:pe,sharepointSiteModal:fe,avatarManagementModal:ge,shoppingTryOnOnboardingModal:Se,braintreeSubscriptionModal:je,announcementImageModal:ye,studentReferrals:be,sheerIdModal:Ne,meetingDefaultsModal:ke,availabilityModal:Ie,mcpServerModal:Ce,mcpServiceToolsModal:Ge,memberSetTierModal:tt,connectorsEnableModal:gt,placeModal:Ee,thirdPartyPersonalizationModal:Re}=Mvt(e),{trackEvent:Vt}=Te();return o.jsxs(o.Fragment,{children:[r==="loginModal"&&a?.origin&&o.jsx(n1e,{pitchMessage:a?.pitchMessage,origin:a.origin,isOpen:r==="loginModal",experimentalImageDesign:a.experimentalImageDesign,sheetModalDesign:a.sheetModalDesign,closeModal:t,closeCallback:a?.closeCallback,overrideRedirectUrl:a?.overrideRedirectUrl,disallowedMethods:a?.disallowedMethods,loginButtonsStyle:a?.loginButtonsStyle,renderCloseButton:a?.renderCloseButton,preEnteredEmail:a?.preEnteredEmail,autoFocus:a?.autoFocus}),!Nxt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(ho,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:r==="installModal"&&i&&o.jsx(Qgt,{isOpen:r==="installModal",onClose:()=>{t(),i.closeCallback?.()},origin:i.origin,sheetModalVariant:i.sheetModalVariant})}),r==="cometDownloadInstructionsModal"&&l&&l.requestedPlatform&&o.jsx(Axt,{isOpen:r==="cometDownloadInstructionsModal",onClose:t,requestedPlatform:l.requestedPlatform}),r==="pricingModal"&&s&&o.jsx(Fxt,{isOpen:r==="pricingModal",pitchMessage:s?.pitchMessage,closeModal:t,origin:s.origin,showFreeTier:s.showFreeTier,defaultSegment:s.defaultSegment}),r==="collectionSelectModal"&&u?.entryUUID&&o.jsx(Ixt,{isOpen:r==="collectionSelectModal",currentCollection:u.currentCollection,entryUUID:u.entryUUID,searchTerm:u.searchTerm,frontendContextUUID:u.frontendContextUUID,closeModal:t}),r==="collectionCreateOrEdit"&&o.jsx(aee,{isOpen:r==="collectionCreateOrEdit",existingCollection:f?.existingCollection,frontendContextUUID:f?.frontendContextUUID,closeModal:t,onCreate:f?.onCreate}),r==="spaceCreate"&&o.jsx(F8,{isOpen:r==="spaceCreate",closeModal:t,existingCollection:p?.existingCollection,onCreate:p?.onCreate,content:p?.content}),r==="spaceCreateForThread"&&h?.entryUUID&&o.jsx(F8,{isOpen:r==="spaceCreateForThread",closeModal:t,existingCollection:p?.existingCollection,frontendContextUUID:h?.frontendContextUUID,entryUUID:h?.entryUUID,onCreate:h?.onCreate}),r==="spaceSettings"&&o.jsx(zxt,{isOpen:r==="spaceSettings",existingSpace:g?.existingSpace,closeModal:t}),r==="spaceVideoModal"&&M&&o.jsx(Dxt,{isOpen:r==="spaceVideoModal",setIsOpen:t,type:M.type}),r==="uploadFilesModal"&&j&&o.jsx(see,{...j,isOpen:r==="uploadFilesModal",closeModal:t}),r==="spaceUploadFilesModal"&&R&&o.jsx(see,{...R,connectionTypes:Ymt(["LOCAL"]),isOpen:r==="spaceUploadFilesModal",closeModal:t}),r==="spaceContextModal"&&o.jsx(t1e,{isOpen:r==="spaceContextModal",closeModal:t,collectionSlug:O?.collectionSlug}),r==="requestAccessModal"&&c?.uuidOrSlug&&o.jsx(Lve,{isOpen:r==="requestAccessModal",onClose:t,uuidOrSlug:c.uuidOrSlug}),r==="mapModal"&&o.jsx(Nr,{fallback:Rbe,children:o.jsx(Uxt,{isOpen:r==="mapModal",closeModal:t,locations:b&&b.locations,header:b.header,entryUUID:b.entryUUID,searchByLocationOverride:b?.searchByLocationOverride})}),r==="collectionCreateForThread"&&m?.entryUUID&&o.jsx(aee,{isOpen:r==="collectionCreateForThread",existingCollection:f?.existingCollection,frontendContextUUID:m?.frontendContextUUID,closeModal:t,entryUUID:m?.entryUUID}),r==="inputPaymentModal"&&_&&o.jsx(Bxt,{isOpen:r==="inputPaymentModal",closeModal:t,isUpdating:_.isUpdating}),r==="shoppingPaymentModal"&&w&&o.jsx($xt,{isOpen:r==="shoppingPaymentModal",closeModal:t,product:w.product,onSuccess:w.onSuccess}),r==="companyDataPrivacyModal"&&o.jsx(Oxt,{organizationName:y.organizationName,isOpen:r==="companyDataPrivacyModal",closeModal:t,onContinue:y.onContinue}),r==="citationListModal"&&x&&x.webResults&&o.jsx(XB,{isOpen:r==="citationListModal",onClose:t,entry:x.entry,webResults:x.webResults,submit:x.submit}),r==="checkSourcesModal"&&v&&o.jsx(M1e,{isOpen:r==="checkSourcesModal",onClose:t,entryUUID:v.entryUUID,frontendContextUUID:v.frontendContextUUID,contextUUID:v.contextUUID,webResults:v.webResults,extendedBeforeContext:v.extendedBeforeContext,beforeContext:v.beforeContext,selectedText:v.selectedText,afterContext:v.afterContext,state:v?.state}),r==="keyboardShortcutEditorModal"&&o.jsx(Kxt,{isOpen:r==="keyboardShortcutEditorModal",closeModal:t}),r==="keyboardShortcutHelperModal"&&o.jsx(h0e,{isOpen:r==="keyboardShortcutHelperModal",closeModal:t}),r==="onboardingModal"&&o.jsx(Rxt,{isOpen:r==="onboardingModal",closeModal:t}),r==="lossAversionModal"&&k&&o.jsx(Lxt,{isOpen:r==="lossAversionModal",onClose:()=>{t(),k.callback?.()},origin:k.origin}),r==="shoppingOnboardingModal"&&S&&o.jsx(Vxt,{isOpen:r==="shoppingOnboardingModal",onClose:t,onContinue:S.onContinue}),r==="shoppingOrderDetailsModal"&&o.jsx(Wxt,{isOpen:r==="shoppingOrderDetailsModal",onClose:t,item:E?.item,userIntercomHash:E?.userIntercomHash}),r==="purchaseConfirmationModal"&&C&&o.jsx(Pxt,{isOpen:r==="purchaseConfirmationModal",onClose:t,order:C.order}),r==="watchlistModal"&&P&&o.jsx(Rgt,{isOpen:r==="watchlistModal",onClose:t,watchlistType:P.watchlistType,origin:P.origin}),r==="locationPermissionModal"&&D&&o.jsx(jxt,{isOpen:r==="locationPermissionModal",onClose:t,onPermissionGranted:D.onPermissionGranted??vn,origin:D.origin}),r==="reservationDetailsModal"&&A&&o.jsx(Hxt,{isOpen:r==="reservationDetailsModal",onClose:t,reservation:A.reservation,userIntercomHash:A.userIntercomHash}),r==="usernameModal"&&o.jsx(Gxt,{isOpen:r==="usernameModal",onClose:t}),r==="userFullNameModal"&&o.jsx(qxt,{isOpen:r==="userFullNameModal",onClose:t}),r==="deleteMemoryModal"&&o.jsx(Wht,{isOpen:r==="deleteMemoryModal",onClose:t,memoryId:T?.memoryId,onDeleteSuccess:T?.onDeleteSuccess}),r==="deleteAllMemoriesModal"&&o.jsx(Vht,{isOpen:r==="deleteAllMemoriesModal",onClose:t}),r==="voiceToVoiceModal"&&o.jsx(Yxt,{isOpen:r==="voiceToVoiceModal",onClose:t}),r==="hotelRoomDetailsModal"&&L&&o.jsx(Zxt,{isOpen:r==="hotelRoomDetailsModal",onClose:t,...L}),r==="memoryListModal"&&o.jsx(Qxt,{isOpen:r==="memoryListModal",onClose:t,isMemoryEnabled:U?.isMemoryEnabled??!1}),r==="memoryDetailModal"&&N&&o.jsx(Xxt,{isOpen:r==="memoryDetailModal",onClose:t,memoryKey:N.memoryKey,displayValue:N.displayValue}),r==="thirdPartyPersonalizationModal"&&Re&&o.jsx(Kht,{isOpen:r==="thirdPartyPersonalizationModal",onClose:t,...Re}),r==="proSubscriptionPaymentModal"&&$&&o.jsx(Jxt,{isOpen:r==="proSubscriptionPaymentModal",onClose:t,...$}),r==="proReferralModal"&&o.jsx(tvt,{isOpen:r==="proReferralModal",onClose:t}),r==="proMessageModal"&&V&&o.jsx(svt,{isOpen:r==="proMessageModal",onClose:t,...V}),r==="freeTrialModal"&&o.jsx(evt,{isOpen:r==="freeTrialModal",onClose:t}),r==="memorySearchHistoryModal"&&o.jsx(P1e,{isOpen:r==="memorySearchHistoryModal",onClose:t,snippet:W?.snippet??"",type:W?.type??"memory",url:W?.url??"",memoryKey:W?.memoryKey,entryUuid:W?.entryUuid,title:W?.title,timestamp:W?.timestamp}),r==="memorySearchHistoryIntroModal"&&o.jsx(avt,{isOpen:r==="memorySearchHistoryIntroModal",onClose:t}),r==="gmailFailedPermissionsModal"&&Q&&o.jsx($ht,{isOpen:r==="gmailFailedPermissionsModal",onContinue:Q.onContinue??vn,onClose:t}),r==="subSuccessModal"&&q&&o.jsx(ovt,{isOpen:r==="subSuccessModal",onClose:t,flowType:q.flowType,upgradeMax:q.upgradeMax,subscriptionTier:q.subscriptionTier,confirmationRedirectsToHomepage:q.confirmationRedirectsToHomepage}),r==="referralErrorModal"&&o.jsx(ivt,{isOpen:r==="referralErrorModal",onClose:t}),r==="referralSuccessModal"&&pe&&o.jsx(lvt,{isOpen:r==="referralSuccessModal",onClose:t,monthsAwarded:pe.monthsAwarded}),r==="incentiveProModal"&&o.jsx(cvt,{isOpen:r==="incentiveProModal",onClose:t,...H}),r==="braintreeSubscriptionModal"&&je&&o.jsx(fvt,{isOpen:r==="braintreeSubscriptionModal",onClose:t,origin:je.origin}),r==="sheerIdRedirectModal"&&G&&o.jsx(pvt,{isOpen:r==="sheerIdRedirectModal",onContinue:()=>{t(),pa(G.sheerIdUrl,"sheerIdRedirectModal")},onCancel:t}),r==="upgradeModal"&&o.jsx(Txt,{isOpen:r==="upgradeModal",onClose:t}),r==="downgradeModal"&&o.jsx(Nyt,{isOpen:r==="downgradeModal",onClose:t}),r==="restaurantBookingModal"&&K&&o.jsx(mvt,{isOpen:r==="restaurantBookingModal",onClose:t,...K}),r==="bugReportModal"&&o.jsx(zft,{isOpen:r==="bugReportModal",onClose:t}),r==="enterprisePremiumSecureUpgradeModal"&&o.jsx(hvt,{isOpen:r==="enterprisePremiumSecureUpgradeModal",onClose:t,onUpgradeSuccess:ee?.onUpgradeSuccess}),r==="taskShortcutModal"&&Y&&o.jsx(gvt,{open:r==="taskShortcutModal",onClose:()=>{t(),Y.onClose?.()},onCreated:Y.onCreated,source:Y.source,shortcut:Y.shortcut}),r==="financeAlertModal"&&te&&o.jsx(vvt,{isOpen:r==="financeAlertModal",onClose:()=>{t(),te.onClose?.()},symbol:te.symbol,task:te.task}),r==="scheduledTaskModal"&&se&&o.jsx(gc,{children:o.jsx(yvt,{open:r==="scheduledTaskModal",onClose:()=>{t(),se.onClose?.()},onSuccess:se.onSuccess,source:se.source,initial:se.initial,prefill:se.prefill})}),r==="automationModal"&&ae&&o.jsx(gc,{children:o.jsx(xvt,{open:r==="automationModal",onClose:()=>{t(),ae.onClose?.()},source:ae.source,initialConfiguration:ae.initial?o0e({selectedTask:ae.initial}):ae.prefill?a0e(ae.prefill):ae.initialConfiguration||S3(n),onSave:pt=>{ae.onSuccess?.(pt),t(),ae.onClose?.()},errorMessage:ae.errorMessage,trackEvent:Vt})}),r==="platformOptionsModal"&&o.jsx(bvt,{isOpen:r==="platformOptionsModal",onClose:t}),r==="sharepointSiteModal"&&fe&&o.jsx(_vt,{isOpen:r==="sharepointSiteModal",onClose:t,onSelectSite:fe.onSelectSite}),r==="avatarManagementModal"&&ge&&o.jsx(Ugt,{isOpen:r==="avatarManagementModal",onClose:t,config:ge??{source:"settings"}}),r==="shoppingTryOnOnboardingModal"&&o.jsx(_1e,{isOpen:r==="shoppingTryOnOnboardingModal",onClose:Se?.onClose||t,onSuccessfulOnboarding:Se?.onSuccessfulOnboarding||(()=>{})}),r==="announcementImageModal"&&ye&&o.jsx(ho,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:o.jsx(ipt,{onClose:t,announcementImageModal:ye})}),r==="studentReferrals"&&o.jsx(uvt,{isOpen:r==="studentReferrals",verificationId:be?.verificationId}),r==="sheerIdModal"&&o.jsx(dvt,{isOpen:r==="sheerIdModal",onClose:()=>{Ne?.onClose?.(),t()},onVerificationSuccess:pt=>{Ne?.onSuccess?.(pt),t()},type:Ne?.type||"student"}),r==="meetingDefaultsModal"&&o.jsx(nvt,{currentDuration:ke?.currentDuration,currentBuffer:ke?.currentBuffer,onSave:ke?.onSave}),r==="availabilityModal"&&o.jsx(rvt,{currentAvailability:Ie?.currentAvailability,onSave:Ie?.onSave}),r==="mcpServerModal"&&Ce&&o.jsx(wvt,{isOpen:r==="mcpServerModal",onClose:t,server:Ce.server,onSave:Ce.onSave,onDelete:Ce.onDelete}),r==="mcpServiceToolsModal"&&Ge&&o.jsx(Svt,{isOpen:r==="mcpServiceToolsModal",onClose:t,server:Ge.server,onEditServer:Ge.onEditServer,onToggleToolEnabled:Ge.onToggleToolEnabled}),r==="memberSetTierModal"&&tt&&o.jsx(Cvt,{isOpen:r==="memberSetTierModal",...tt,onClose:()=>{t(),tt.onClose?.()}}),r==="connectorsEnableModal"&&gt&&o.jsx(Uht,{connectorName:gt.connectorName,connectorAvatar:gt.connectorAvatar,showModal:r==="connectorsEnableModal",setShowModal:()=>t(),connectionType:gt.connectionType,reason:gt.reason,referrer:gt.referrer,referrerId:gt.referrerId,badge:gt.badge,handleEnable:gt.handleEnable}),r==="placeModal"&&Ee&&o.jsx(Evt,{isOpen:r==="placeModal",onClose:t,place:Ee.place,mode:Ee.mode,entryUUID:Ee.entryUUID,contextUUID:Ee.contextUUID})]})});Obe.displayName="SingleModal";const Dbe=I.memo(e=>{const{$t:t}=Z(),n=d.useMemo(()=>a3(window.location.href,Ou,Le.LOSS_AVERSION_MODAL),[]),{trackEvent:r}=Te(),[s,a]=d.useState(!1);return d.useEffect(()=>{r("loss aversion modal opened",{origin:e.origin})},[r,e.origin]),o.jsx(qt,{title:t(s?{defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}:{defaultMessage:"Lose your answer?",id:"BxKmht5dD3"}),actionList:s?void 0:[{text:t({defaultMessage:"Sign up or log in",id:"Qv2KGSr1CQ"}),onClick:()=>{a(!0)},variant:"primary"}],...e,children:o.jsx("div",{className:"grid grid-cols-1 grid-rows-1",children:o.jsx(na,{initial:!1,mode:"popLayout",transition:{type:"spring",duration:.2},children:s?o.jsx(Zr,{transition:{ease:_a,duration:.1,delay:.1},children:o.jsxs(ve.div,{className:"relative col-start-1 row-start-1",children:[o.jsx(F,{className:"mb-md",textCenter:!0,children:o.jsx(ie,{defaultMessage:"Log in to save this answer",id:"Ngtk6vEw7T"})}),o.jsx($1,{redirectUrl:n,showCloseButton:!1})]})},"login"):o.jsx(Zr,{transition:{ease:_a,duration:.1},children:o.jsx(ve.div,{className:"col-start-1 row-start-1",children:o.jsx(F,{children:t({defaultMessage:"To save this answer, sign up or log in.",id:"9Ha7YBI+Yh"})})})},"initial")})})})});Dbe.displayName="ThreadLossAversionModal";const o$=()=>{const e=d.useCallback(r=>{bqe(r)},[]),t=Sn(BP),n=d.useCallback(()=>jm(BP),[]);return d.useMemo(()=>({lossAversionStatus:t,setLossAversionStatus:e,unsetLossAversion:n}),[t,e,n])},Sx=()=>{const{lossAversionStatus:e,setLossAversionStatus:t}=o$(),n=Lt(),r=et(),s=d.useMemo(()=>!r&&e==="allowed"&&n?.startsWith("/search"),[r,e,n]),{openModal:a}=xt(),i=d.useCallback(({args:l,openModalOverride:c})=>{c?c("lossAversionModal",l):a("lossAversionModal",l),t("cooldown")},[a,t]);return d.useMemo(()=>({shouldShowLossAversionModal:s,handleOpenLossAversion:i}),[s,i])},kvt=Object.freeze(Object.defineProperty({__proto__:null,ThreadLossAversionModal:Dbe,useLossAversion:Sx,useLossAversionStorage:o$},Symbol.toStringTag,{value:"Module"})),Tvt=({children:e})=>{const[t,n]=d.useState([]),r=d.useMemo(()=>t.at(-1)?.modalName??null,[t]),{trackEvent:s}=Te(),{setModalOpen:a}=D0e();d.useEffect(()=>{a(r!=null)},[r,a]);const{device:{isMacOS:i,isWindowsApp:l}}=Pt(),{shouldShowLossAversionModal:c,handleOpenLossAversion:u}=Sx(),f=vt(),m=d.useCallback((v,b)=>{n(()=>[{modalName:v,arg:b}])},[]),p=d.useCallback((v,b)=>{n(_=>[..._,{modalName:v,arg:b}])},[]),h=d.useCallback((v,b)=>{n(_=>{const w=_.findLastIndex(C=>C.modalName==v);if(w!=-1){const C=_.slice();return C[w]={modalName:v,arg:b},C}else return _})},[]),g=d.useCallback(()=>{n(v=>v.slice(0,v.length-1))},[]),y=d.useMemo(()=>({currentOpenModals:t,currentOpenedModal:r,openModal:m,openStackedModal:p,updateModal:h,closeModal:g}),[t,m,p,h,g,r]),x=d.useCallback(v=>{if(i?v.metaKey&&v.key==="k":v.ctrlKey&&v.key==="i")v.preventDefault(),c?u({args:{origin:Le.NEW_THREAD_SHORTCUT,callback:()=>{s("quick ask keyboard shortcut",{}),f.push("/",void 0,"Quick ask keyboard shortcut (loss aversion)")}},openModalOverride:m}):(s("quick ask keyboard shortcut",{}),f.push("/",void 0,"Quick ask keyboard shortcut"));else if(i?v.metaKey&&v.key==="/":v.ctrlKey&&v.key==="/")v.preventDefault(),m(l?"keyboardShortcutEditorModal":"keyboardShortcutHelperModal",null);else if(l&&v.ctrlKey&&v.key==="d"){v.preventDefault();const b=new CustomEvent("toggleDictation");document.dispatchEvent(b)}},[i,l,c,u,m,s,f]);return d.useEffect(()=>(document.addEventListener("keydown",x),()=>{document.removeEventListener("keydown",x)}),[x]),o.jsxs(wpe.Provider,{value:y,children:[e,o.jsx(Pbe,{})]})},Nvt=({reason:e})=>{const{connectorsMap:t}=yx({reason:e});return d.useMemo(()=>({isAllowed:n=>!!t[n],isConnected:n=>t[n]?.connected===!0,getConnectionType:n=>t[n]?.connection_type??null}),[t])},jvt=["web","scholar","social","edgar","org","my_files"],Avt=e=>jvt.includes(e),os={web:{id:"web",icon:of,label:e=>e.formatMessage({defaultMessage:"Web",id:"B6CB3748fZ"}),description:e=>e.formatMessage({defaultMessage:"Search across the entire Internet",id:"L+Gw+J7uDs"})},scholar:{id:"scholar",icon:tE,label:e=>e.formatMessage({defaultMessage:"Academic",id:"mbxIJyT8C5"}),description:e=>e.formatMessage({defaultMessage:"Search academic papers",id:"IVRQQmrqTD"})},social:{id:"social",icon:Sce,label:e=>e.formatMessage({defaultMessage:"Social",id:"qOLogguG/7"}),description:e=>e.formatMessage({defaultMessage:"Discussions and opinions",id:"g9xPuArp4v"})},edgar:{id:"edgar",icon:Cce,label:()=>_me,description:e=>e.formatMessage({defaultMessage:"Search SEC filings",id:"7Xro7ObMcr"})},org:{id:"org",icon:wce,label:e=>e.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),description:e=>e.formatMessage({defaultMessage:"Search files from your organization",id:"Ak5CW53mGi"})},my_files:{id:"my_files",icon:_ce,label:e=>e.formatMessage({defaultMessage:"My files",id:"bYbrKKlKgS"}),description:e=>e.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})}},Ivt=e=>e?.length?e.filter(gp):void 0,No=(e,t,n,r)=>{const s=Vl(e),a=ja(e),i={avatar:s?o.jsx(Un,{user:s,size:"small",rounded:!1,showBackground:!1,altText:a}):void 0,text:a};return t?{...i,icon:void 0,type:"toggle"}:{...i,icon:void 0,type:"default",rightElement:o.jsx(F,{color:"light",children:o.jsx(de,{icon:ba,size:"sm"})}),onClick:()=>r(e,n)}},Fbe=({reason:e})=>{const t=Z(),n=vt(),{isMobileStyle:r}=xe(),{hasAccessToProFeatures:s}=St(),{openModal:a}=xt(),{isEnterprise:i,organization:l}=Hn({reason:e}),c=RB({feature:Nd.SOURCES}),u=dn(),{enabledConnectors:f,enabledFileConnectors:m}=P_({reason:e}),p=gx(),{isAllowed:h,isConnected:g,getConnectionType:y}=Nvt({reason:e}),{referrer:x,referrerId:v}=AB({mode:"file"}),[b,_]=d.useState(!1),w=d.useCallback(()=>{_(!0)},[]),C=d.useCallback(()=>{_(!1)},[]),S=d.useCallback((H,K)=>{const G=Vl(H);a("connectorsEnableModal",{connectorName:H,connectorAvatar:G,connectionType:K,reason:e,referrer:x??void 0,referrerId:v??void 0})},[a,e,x,v]),{value:E}=Qs({flag:"gcal-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:l?.uuid??""}}),{value:k}=Qs({flag:"enable-remote-mcp-tools",defaultValue:!1,extraAttributes:{orgUuid:l?.uuid??""}}),M=k&&s,j=E&&!u,{value:R}=Qs({flag:"outlook-fe-toggle",defaultValue:!1,extraAttributes:{orgUuid:l?.uuid??""}}),O=d.useCallback(H=>{H.stopPropagation(),n.push(`${p}/files`)},[n,p]),D=d.useMemo(()=>o.jsx("div",{className:"mr-sm flex",children:o.jsx(bn,{tooltipText:t.formatMessage({defaultMessage:"Manage my files",id:"o8eQg7byBv"}),children:o.jsx(F,{color:"light",onClick:O,children:o.jsx(de,{icon:Ece,size:"sm"})})})}),[t,O]),{cometMcpSources:P,toggleCometMcpSource:A}=C_(),T=d.useMemo(()=>Object.fromEntries(Object.entries(P)?.map(([H,K])=>[`comet_mcp_${H}`,{...K,rightElement:o.jsx(AU,{text:t.formatMessage({defaultMessage:"Local",id:"W4SaxYXWRk"}),variant:"subtle"}),onClick:()=>{A(H)}}])),[P,A,t]),N=d.useMemo(()=>{const H=M&&h("linear_alt")?{linear_alt:No("linear_alt",g("linear_alt"),y("linear_alt"),S)}:{},K=h("google_drive")&&c?{google_drive:No("google_drive",g("google_drive"),y("google_drive"),S)}:{},G=M&&h("slack")?{slack:No("slack",g("slack"),y("slack"),S)}:{},ee=j&&h("gcal")?{gcal:No("gcal",g("gcal"),y("gcal"),S)}:{},Y=M&&h("notion_mcp")?{notion_mcp:No("notion_mcp",g("notion_mcp"),y("notion_mcp"),S)}:{},te=M&&h("github_mcp_direct")?{github_mcp_direct:No("github_mcp_direct",g("github_mcp_direct"),y("github_mcp_direct"),S)}:{},se=M&&h("asana_mcp_direct")?{asana_mcp_direct:No("asana_mcp_direct",g("asana_mcp_direct"),y("asana_mcp_direct"),S)}:{},ae=M&&h("asana_mcp_merge")?{asana_mcp_merge:No("asana_mcp_merge",g("asana_mcp_merge"),y("asana_mcp_merge"),S)}:{},pe=M&&h("atlassian_mcp_direct")?{atlassian_mcp_direct:No("atlassian_mcp_direct",g("atlassian_mcp_direct"),y("atlassian_mcp_direct"),S)}:{},fe=M&&h("slack_direct")?{slack_direct:No("slack_direct",g("slack_direct"),y("slack_direct"),S)}:{},ge=M&&h("jira_mcp_merge")?{jira_mcp_merge:No("jira_mcp_merge",g("jira_mcp_merge"),y("jira_mcp_merge"),S)}:{},Se=M&&h("confluence_mcp_merge")?{confluence_mcp_merge:No("confluence_mcp_merge",g("confluence_mcp_merge"),y("confluence_mcp_merge"),S)}:{},je=M&&h("microsoft_teams_mcp_merge")?{microsoft_teams_mcp_merge:No("microsoft_teams_mcp_merge",g("microsoft_teams_mcp_merge"),y("microsoft_teams_mcp_merge"),S)}:{};return{...H,...Y,...te,...G,...ee,...K,...se,...ae,...pe,...fe,...ge,...Se,...je,...T,...f?.some(be=>be.name==="crunchbase")?{crunchbase:{icon:void 0,avatar:o.jsx(Un,{user:JD,rounded:!1,showBackground:!1,size:"small",altText:"Crunchbase"}),text:eF,type:"toggle"}}:{},...f?.some(be=>be.name==="factset")?{factset:{icon:void 0,avatar:o.jsx(Un,{user:ZD,rounded:!1,showBackground:!1,size:"small",altText:"FactSet"}),text:_5,type:"toggle"}}:{},...f?.some(be=>be.connection_type==="ONEDRIVE")&&c?{onedrive:{icon:void 0,avatar:o.jsx(Un,{user:dm(Cn.ONEDRIVE)||"",rounded:!1,showBackground:!1,size:"small",altText:Dg}),text:Dg,type:"toggle"}}:{},...f?.some(be=>be.connection_type==="SHAREPOINT")&&c?{sharepoint:{icon:void 0,avatar:o.jsx(Un,{user:dm(Cn.SHAREPOINT)||"",rounded:!1,showBackground:!1,size:"small",altText:Fg}),text:Fg,type:"toggle"}}:{},...f?.some(be=>be.connection_type==="WILEY")&&i?{wiley:{icon:void 0,avatar:o.jsx(Un,{user:Om,rounded:!1,showBackground:!1,size:"small",altText:"Wiley"}),text:tF,type:"toggle"}}:{},...k&&h("wiley_mcp_cashmere")?{wiley_mcp_cashmere:{icon:void 0,avatar:o.jsx(Un,{user:Om,rounded:!1,showBackground:!1,size:"small",altText:RP}),text:RP,type:"toggle"}}:{},...k&&h("cbinsights_mcp_cashmere")?{cbinsights_mcp_cashmere:{icon:void 0,avatar:o.jsx(Un,{user:nF,rounded:!1,showBackground:!1,size:"small",altText:PP}),text:PP,type:"toggle"}}:{},...k&&h("pitchbook_mcp_cashmere")?{pitchbook_mcp_cashmere:{icon:void 0,avatar:o.jsx(Un,{user:rF,rounded:!1,showBackground:!1,size:"small",altText:LP}),text:LP,type:"toggle"}}:{},...k&&h("statista_mcp_cashmere")?{statista_mcp_cashmere:{icon:void 0,avatar:o.jsx(Un,{user:sF,rounded:!1,showBackground:!1,size:"small",altText:OP}),text:OP,type:"toggle"}}:{},...f?.some(be=>be.connection_type==="DROPBOX")&&c?{dropbox:{icon:void 0,avatar:o.jsx(Un,{user:dm(Cn.DROPBOX)||"",rounded:!1,showBackground:!1,size:"small",altText:Dm}),text:Dm,type:"toggle"}}:{},...f?.some(be=>be.connection_type==="OUTLOOK")&&R?{outlook:{icon:void 0,avatar:o.jsx(Un,{user:dm(Cn.OUTLOOK)||"",rounded:!1,showBackground:!1,size:"small",altText:gE}),text:gE,type:"toggle"}}:{}}},[f,i,c,j,R,M,k,h,g,y,T,S]),{selectedConnectors:L,excessToggleConnectors:U}=d.useMemo(()=>{const H=Object.entries(N);if(H.length===0)return{selectedConnectors:[],excessToggleConnectors:[]};const K=H.filter(([,te])=>te.type==="toggle"),G=H.filter(([,te])=>te.type==="default");if(r)return{selectedConnectors:[...K,...G],excessToggleConnectors:[]};const ee=[...K.slice(0,3),...G].slice(0,3),Y=K.slice(3);return{selectedConnectors:ee,excessToggleConnectors:Y}},[N,r]),$=d.useMemo(()=>{if(U.length===0)return null;const H=U.map(([,K])=>K.avatar).filter(Boolean);return H.length===0?null:tM(H,{maxVisuals:5,size:"sm",stackDirection:"right",shape:"square",overlappingClassName:"bg-transparent ring-transparent",containerClass:"flex items-center h-5",innerClassName:"flex items-center gap-1",showRemainderCount:!1})},[U]),V=d.useMemo(()=>({type:"default",icon:$k,text:t.formatMessage({defaultMessage:"Browse all connectors",id:"vyHg7PluiB"}),rightElement:o.jsx(F,{color:"light",children:o.jsx(de,{icon:ba,size:"sm"})}),onClick:()=>n.push(`${p}/connectors`)}),[t,n,p]),W=d.useMemo(()=>{if(L.length===0)return null;const H=Object.fromEntries(L);return U.length===0?H.browse_all_connectors=V:H.more_connectors={type:"nested",text:t.formatMessage({defaultMessage:"More connectors",id:"3l4CuVEyHY"}),submenuItems:[...U,{type:"separator",show:!0},V],isSubmenuOpen:b,onSubmenuOpen:w,onSubmenuClose:C,textTrailingElement:$,menuWidth:"300px"},{groupId:"connectors",sources:H}},[L,U,V,t,b,w,C,$]),Q=d.useMemo(()=>{const H=m.map(Y=>{const te=Y.name,se=Vl(te)??"";return o.jsx(Un,{user:se,rounded:!1,showBackground:!1,size:"small"},te)});let K=null;H.length>0&&(K=tM(H,{...H.length<=3&&{rightText:o.jsx(F,{color:"light",variant:"tinyRegular",children:t.formatMessage({defaultMessage:"Search my files",id:"EYmiG70whM"})})},maxVisuals:H.length,size:"sm"}));const G=[],ee={web:{icon:os.web.icon,avatar:void 0,text:os.web.label(t),description:os.web.description(t),type:"toggle"},scholar:{icon:os.scholar.icon,avatar:void 0,text:os.scholar.label(t),description:os.scholar.description(t),type:"toggle"},social:{icon:os.social.icon,avatar:void 0,text:os.social.label(t),description:os.social.description(t),type:"toggle"},edgar:{icon:os.edgar.icon,avatar:void 0,text:os.edgar.label(t),description:os.edgar.description(t),type:"toggle"},...i?{org:{icon:os.org.icon,avatar:void 0,text:os.org.label(t),description:os.org.description(t),type:"toggle"}}:{},...c&&i?{my_files:{icon:os.my_files.icon,avatar:void 0,text:os.my_files.label(t),description:m.length===0?os.my_files.description(t):"",bottomElement:K??void 0,rightElement:D,type:"toggle"}}:{}};return Object.keys(ee).length>0&&G.push({groupId:"core",sources:ee}),W&&G.push(W),G},[m,t,i,c,D,W]),q=d.useMemo(()=>{const H={};return Q.forEach(K=>{Object.entries(K.sources).forEach(([G,ee])=>{ee.type==="toggle"&&(H[G]=ee)})}),H},[Q]);return d.useMemo(()=>({RootSources:q,RootSourceGroups:Q,ConnectionSources:N}),[N,q,Q])};var Ui={},oee;function Rvt(){if(oee)return Ui;oee=1;var e=Ui&&Ui.__awaiter||function(s,a,i,l){function c(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function m(g){try{h(l.next(g))}catch(y){f(y)}}function p(g){try{h(l.throw(g))}catch(y){f(y)}}function h(g){g.done?u(g.value):c(g.value).then(m,p)}h((l=l.apply(s,a||[])).next())})};Object.defineProperty(Ui,"__esModule",{value:!0}),Ui.identify=Ui.subscribe=Ui.publish=void 0;const t=(s,a)=>{window.todesktop.ipc.publish(s,a)};Ui.publish=t;const n=(s,a)=>window.todesktop.ipc.subscribe(s,a);Ui.subscribe=n;const r=()=>e(void 0,void 0,void 0,function*(){return window.todesktop.ipc.identify()});return Ui.identify=r,Ui}var iee=Rvt();const D3=()=>{const{device:{isWindowsApp:e}}=Pt(),t=d.useRef({}),n=d.useRef({}),r=d.useCallback((a,i)=>{if(e)try{iee.publish(a,i)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c),c.postMessage(i)}else ne.warn("Neither IPC publish nor BroadcastChannel are available in this runtime")}catch(c){ne.warn("Error using BroadcastChannel: ",c)}}},[e]),s=d.useCallback((a,i)=>{if(e)try{return iee.subscribe(a,i)}catch{try{if(typeof BroadcastChannel<"u"){let c=t.current[a];c||(c=new BroadcastChannel(a),t.current[a]=c);let u=n.current[a];u||(u=new Set,n.current[a]=u);const f=m=>{i(m.data)};return u.add(i),c.addEventListener("message",f),()=>{c.removeEventListener("message",f),u.delete(i),u.size===0&&(c.close(),delete t.current[a],delete n.current[a])}}ne.warn("Neither IPC subscribe nor BroadcastChannel are available in this runtime");return}catch(c){ne.warn("Error using BroadcastChannel: ",c);return}}},[e]);return d.useMemo(()=>({safeWindowsIpcPublish:r,safeWindowsIpcSubscribe:s}),[r,s])};function $_({defaultSource:e,reason:t}){const{sources:n,setSources:r,setRecency:s}=ir(),a=Ot(),{fileRepoInfo:i}=Ic({reason:t}),{RootSources:l,ConnectionSources:c}=Fbe({reason:t}),{isLoading:u}=Hn({reason:t}),{device:{isWindowsApp:f}}=Pt(),{safeWindowsIpcPublish:m,safeWindowsIpcSubscribe:p}=D3(),h=i.file_repository_type==="COLLECTION",g=h?`space-${i.owner_id}`:"home",y=ml(),x=Array.isArray(y?.slug)?y.slug[0]:y?.slug,{collection:v,isLoading:b}=Ac({collectionSlug:x,reason:t}),_=b?void 0:v?.enable_web_by_default,w=d.useRef(p);d.useEffect(()=>{w.current=p},[p]);const C=d.useRef(Math.random().toString(36).substring(7)),S=d.useCallback(O=>{let D=[];return n?.includes(O)?(D=n.filter(P=>P!==O),O==="web"&&(n.includes("crunchbase")&&(D=n.filter(P=>P!=="crunchbase"&&P!=="web")),s?.(null))):(D=[...n||[]],O==="crunchbase"&&!D.includes("web")&&D.push("web"),D.push(O)),h&&ij(D,g),r(D),f&&m(cd,{type:cd,sources:D,windowId:C.current}),D},[h,g,r,s,n,f,m]),E=d.useCallback(O=>{n?.includes(O)||S(O)},[n,S]),k=d.useCallback(O=>{n?.includes(O)&&S(O)},[n,S]),M=d.useCallback(O=>n?.includes(O)??!1,[n]),j=d.useCallback(O=>{const D=[...O];D.includes("crunchbase")&&!D.includes("web")&&D.push("web"),h&&ij(D,g),r(D),f&&m(cd,{type:cd,sources:D,windowId:C.current})},[h,f,g,m,r]);d.useEffect(()=>{if(!f)return;const O=w.current(cd,D=>{D.type===cd&&D.windowId!==C.current&&r(D.sources)});return()=>{O?.()}},[f,r,n]);const R=d.useMemo(()=>{if(b)return new Set([]);if(h)return _?new Set(["web"]):new Set([]);if(e)return new Set([e]);const D=(a?.get("sources")??"web").split(",").map(P=>P.trim()).filter(gp);return new Set(D||["web"])},[h,b,_,a,e]);return d.useEffect(()=>{if(u)return;let O=h?kqe(g)||[...R]:[...R];if(h&&_&&!O.includes("web")?O.push("web"):h&&!_&&O.includes("web")&&(O=O.filter(P=>P!=="web")),JSON.stringify(n||[])!==JSON.stringify(O)){const P=O.filter(A=>A in l||A in c);h&&ij(P,g),r(P)}},[u,h,_]),d.useMemo(()=>({DEFAULT_SOURCES:R,isSpace:h,isSpaceEnableWebByDefault:_,toggleSource:S,addSource:E,removeSource:k,hasSource:M,overwriteSources:j}),[R,h,_,j,S,E,k,M])}const Pvt=({reason:e})=>{const{safeWindowsIpcPublish:t}=D3(),{actions:n}=In(),{device:{isWindowsApp:r}}=Pt(),s=et(),{isPro:a}=St(),{DEFAULT_SOURCES:i}=$_({reason:e}),l=d.useRef(n),c=d.useRef(t);d.useEffect(()=>{l.current=n,c.current=t},[n,t]);const u=d.useCallback(()=>{pa("/?voice-mode=true","Voice mode")},[]),f=d.useCallback(()=>{pa("/?v2v=true","V2V mode")},[]),m=d.useCallback(g=>{const y=g.searchParams,x=y.get("q"),v=y.get("incognito"),_=(y.get("sources")??"").split(",").map(S=>S.trim()).filter(gp),w=y.get("search_mode"),C=w?nZe[w]:void 0;v!==null&&l.current.setIsIncognito(v==="true"),_&&t(cd,{type:cd,sources:_}),C?.model&&C?.mode&&t(Fh,{type:Fh,model:C.model,searchMode:C.mode}),x&&c.current(Eme,{query:x,promptSource:"user",querySource:"windows-app-shortcut",incognitoOverride:v,sourcesOverride:_??[]})},[t]),p=d.useCallback(g=>{const y=g.searchParams,x=y.get("type"),v=y.get("callback");if(!x||!v)return;const b=x.split(","),_=new URLSearchParams;b.forEach(C=>{switch(C){case"sources":_.set("sources",Array.from(i).join(","));break;case"search-modes":_.set("search-modes",Object.values(ue).join(","));break;case"sign-in":_.set("sign-in",s?"true":"false");break;case"subscription":_.set("subscription",a?"true":"false");break}});const w=`${v}?${_.toString()}`;window.open(w,"_blank")},[s,a,i]),h=d.useMemo(()=>new Map([["voice-mode",u],["v2v",f],["search",g=>m(g)],["request",g=>p(g)]]),[u,f,m,p]);d.useEffect(()=>{if(!r)return;const g=Mnt("openProtocolURL",(x,v)=>{const b=new URL(v.url);for(const[_,w]of h)if(b.toString().includes(_)){v.preventDefault(),w(b);break}}),y=async()=>{await(await g)()};return()=>{y()}},[r,h])},V8="keyboard-shortcuts",Lvt=(e,t)=>{const n={[Sr.NEW_THREAD]:{[Kn.MACOS]:[],[Kn.WINDOWS]:[]},[Sr.STOP_GENERATING]:{[Kn.MACOS]:[],[Kn.WINDOWS]:[]},[Sr.TOGGLE_INCOGNITO]:{[Kn.MACOS]:[],[Kn.WINDOWS]:[]},[Sr.SHOW_SHORTCUTS]:{[Kn.MACOS]:[],[Kn.WINDOWS]:[]},[Sr.FOCUS_ASK_INPUT]:{[Kn.MACOS]:[],[Kn.WINDOWS]:[]},[Sr.TOGGLE_DICTATION]:{[Kn.MACOS]:[],[Kn.WINDOWS]:[]},[Sr.TOGGLE_V2V]:{[Kn.MACOS]:[],[Kn.WINDOWS]:[]}},r=p0e(e,t);[Sr.NEW_THREAD,Sr.TOGGLE_V2V].forEach(s=>{const a=r.find(i=>i.type===s);a&&(n[s]={[Kn.MACOS]:a.macos,[Kn.WINDOWS]:a.windows})});try{const s=De.getItem(V8);if(s){const a=JSON.parse(s);[Sr.NEW_THREAD,Sr.TOGGLE_V2V].forEach(i=>{const l=a.find(c=>c.type===i);l&&(n[i]={[Kn.MACOS]:l.macos,[Kn.WINDOWS]:l.windows})})}}catch(s){ne.warn("Error reading keyboard shortcuts:",s)}return n},Ovt=(e,t)=>Yo(n=>({globalShortcuts:Lvt(e,t),setShortcut:(r,s,a)=>n(i=>{const l={...i.globalShortcuts,[r]:{...i.globalShortcuts[r],[s]:a}};try{const c=De.getItem(V8),f=(c?JSON.parse(c):[]).map(m=>m.type===r?{...m,[s]:a}:m);De.setItem(V8,JSON.stringify(f))}catch(c){ne.warn("Error saving keyboard shortcuts:",c)}return{globalShortcuts:l}})}));let eA=null;const W8=e=>{const{device:{isWindowsApp:t}}=Pt(),n=Z();return eA||(eA=Ovt(n,t)),eA(e)},Dvt=()=>{const{handleShowPanel:e}=wp(),t=W8(c=>c.setShortcut),{getMainWindowRef:n}=Fvt(),r=W8(c=>c.globalShortcuts),s=d.useCallback(async()=>{const c=await n();if(!c)return;await jU({ref:c}),await NU({ref:c});const u=new CustomEvent("toggleVoiceToVoice");document.dispatchEvent(u)},[n]),a=d.useCallback(async(c,u)=>{try{const f=Array.isArray(c)?c.join("+"):c;let m;switch(u){case Sr.NEW_THREAD:m=e;break;case Sr.TOGGLE_V2V:m=s;break;default:return ne.warn(`No handler registered for shortcut type: ${u}`),!1}return f&&f.trim()!==""&&await C6(f),await Pnt(f,m),!0}catch(f){return ne.warn("Error registering shortcut:",f),!1}},[e,s]),i=d.useCallback(async(c,u,f)=>{try{const m=c.join("+"),p=u.join("+");if(m===p)return;m&&m.trim()!==""&&await C6(m),await a(p,f)&&t(f,Kn.WINDOWS,u)}catch(m){ne.error("Error updating global shortcut:",m)}},[a,t]),l=d.useCallback(async c=>{const u=c.join("+");u&&u.trim()!==""&&await C6(u)},[]);return d.useMemo(()=>({shortcuts:r,registerShortcut:a,updateGlobalShortcut:i,unregisterShortcut:l}),[a,r,l,i])},Ube=Dt("WindowsAppContext",null),Fvt=()=>{const e=d.useContext(Ube);if(!e)throw new Error("useWindowsApp must be used within WindowsAppProvider");return e},Uvt=()=>{const e=d.useRef(null);return{getMainWindowRef:d.useCallback(async()=>(e.current||(e.current=(async()=>{let n=await BX({id:"TJmK6yKBLiw389HLDdYy5"});return n||(n=await BX({id:"C195F2RyYDhfB93QW7vui"})),n})()),e.current),[])}},Bvt=({children:e,getMainWindowRef:t})=>{const n="windows-app-provider-inner",{device:{isWindowsApp:r}}=Pt(),s=Lt(),a=r&&!s?.includes(N1),{submitQuery:i}=Sa(),{isCopilot:l}=ir(),{createPanelWindow:c,handleHidePanel:u}=wp(),f=et(),m=d.useRef(i),p=d.useRef(l),{safeWindowsIpcSubscribe:h}=D3();d.useEffect(()=>{m.current=i},[i]),Pvt({reason:n}),d.useEffect(()=>{p.current=l},[l]);const{shortcuts:g,registerShortcut:y,unregisterShortcut:x}=Dvt();d.useEffect(()=>{a&&(c(),u())},[a,c,u]);const v=d.useCallback(async b=>{const _=async(E=500)=>{const k=new AbortController,M=setTimeout(()=>k.abort(),E);try{const j=new Promise(R=>{d8().then(O=>{if(O){clearTimeout(M),R(!0);return}Jv("show",()=>{clearTimeout(M),R(!0)})})});return await Promise.race([j,new Promise(R=>{k.signal.addEventListener("abort",()=>R(!1))})])}catch(j){return ne.warn("Error ensuring window is ready",{error:j}),!1}finally{clearTimeout(M);try{f8("show")}catch(j){ne.warn("Error removing show listeners during cleanup",j)}}},w=await t();if(await jU({ref:w}),await NU({ref:w}),!await _())return;const C=b.query.trim();if(!C?.trim())return;const S=bo();m.current({rawQuery:C,copilotOverride:p.current?!0:void 0,attachments:b.attachments,collection:null,newFrontendContextUUID:S,promptSource:b.promptSource??"user",querySource:b.querySource??"home",timeFromFirstType:b.timeFromFirstType,shouldRedirectToBackendUUID:!0})},[t]);return d.useEffect(()=>{if(!a)return;const b=h(Eme,_=>{v(_)});return()=>{b?.()}},[a,v,h]),d.useEffect(()=>{if(!a)return;const b=[Sr.NEW_THREAD,...f?[Sr.TOGGLE_V2V]:[]];return b.forEach(_=>{const C=g[_][Kn.WINDOWS].map(sJ);y(C,_)}),()=>{b.forEach(_=>{const C=g[_][Kn.WINDOWS].map(sJ);x(C)})}},[y,a,g,f,x]),o.jsx(o.Fragment,{children:e})},$vt=({children:e})=>{const{getMainWindowRef:t}=Uvt(),n=d.useMemo(()=>({getMainWindowRef:t}),[t]);return o.jsx(Ube.Provider,{value:n,children:o.jsx(Blt,{children:o.jsx(Bvt,{getMainWindowRef:t,children:e})})})};var Vvt={};const Bbe=I.memo(function(){return d.useEffect(()=>{if(Vvt.NEXT_PUBLIC_SW_ENABLED_LOCAL){WX();return}const t=mo();t.env&&t.env!=="local"?WX():Jnt()},[]),null});Bbe.displayName="ServiceWorker";var Wvt={};const Cl=e=>{try{return JSON.parse(e)}catch{return{}}};function Hvt({reason:e}){const t=dn(),n=Nn(),r=d.useCallback(async(s,a)=>{if(ne.info("browserStep",s),s.browser_open_tab_content){const i=s.browser_open_tab_content,l=Cl(i.extra_headers);ne.info("browserTool: browser_open_tab",{tool:i},{request_id:l[hr]}),await wYe({url:i.url,cometBrowser:n,stepUuid:s.uuid,extraHeaders:Cl(i.extra_headers),reason:e})}else if(s.search_browser_content){const i=s.search_browser_content,l=Cl(i.extra_headers);ne.info("browserTool: search_browser",{tool:i},{request_id:l[hr]}),await MYe(i,n,s.uuid,l,e)}else if(s.browser_close_tabs_content){const i=s.browser_close_tabs_content,l=i.payload;if(!l){ne.error("[useExecuteBrowserTool] browser_close_tabs_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const c=Cl(i.extra_headers);ne.info("browserTool: browser_close_tabs",{tool:i},{request_id:c[hr]}),await EYe(l,n,s.uuid,c,e)}else if(s.browser_group_tabs_content){const i=s.browser_group_tabs_content,l=i.payloads,c=Cl(i.extra_headers);ne.info("browserTool: browser_group_tabs",{tool:i},{request_id:c[hr]}),await SYe(l,n,s.uuid,c,e)}else if(s.entropy_request_content){const i=s.entropy_request_content,l=i.extra_headers,c=Cl(l)[hr];ne.info("browserTool: entropy_request",{tool:i},{request_id:c}),i.tasks.forEach(u=>{ne.info("[comet] Submitting agent task",{task_id:u.uuid,entry_uuid:a,request_id:c}),n.submitTask({action:"startAgentFromPerplexity",type:"START_AGENT",extra_headers:l,base_url:i.base_url,entryId:a,...u,use_current_page:u.use_current_page&&!!Wvt.NEXT_PUBLIC_IS_SIDECAR_BUILD,capture_screenshot:!u.use_current_page&&!u.tab_id,is_mission_control:window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants")||i.is_mission_control})})}else if(s.get_url_content_content){const i=s.get_url_content_content,l=Cl(i.extra_headers);if(ne.info("browserTool: get_url_content",{tool:i},{request_id:l[hr]}),!t)return;const c={...i,key:s.uuid,request_id:l[hr],pages:[...i.pages||[]]},u=n.GetContent(c);await md(u,s.uuid,{request_id:l[hr]??""},e)}else if(s.browser_ungroup_content){const i=s.browser_ungroup_content;if(!i.payload){ne.error("[useExecuteBrowserTool] browser_ungroup_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const l={groupIds:i.payload.group_ids,tabIds:i.payload.tab_ids},c=Cl(i.extra_headers),u=n.ungroupTabs(l,s.uuid,c[hr]??"").then(f=>{if(!f.is_success)throw f;return{group_ids:f.groupIds,tab_ids:f.tabIds}});await md(u,s.uuid,{request_id:c[hr]??""},e)}else if(s.browser_search_tab_groups_content){const i=s.browser_search_tab_groups_content,l=i.payload;if(!l){ne.error("[useExecuteBrowserTool] browser_search_tab_groups_content payload is undefined",{browserStep:s},{reason:e,backend_uuid:a});return}const c=Cl(i.extra_headers),u=n.searchTabGroups(l,s.uuid,c[hr]??"").then(f=>{if(!f.is_success)throw f;return{results:f.results.map(m=>({...m,color:Wpe(m.color)}))}});await md(u,s.uuid,{request_id:c[hr]??""},e)}else if(s.browser_get_visible_tab_screenshot_content){const i=s.browser_get_visible_tab_screenshot_content,l=Cl(i.extra_headers),c=n.GetVisibleTabScreenshot({key:s.uuid,request_id:l[hr]??"",...i}).then(async u=>{const m=await(await fetch(u.data_url)).blob(),p=new File([m],"screenshot."+(i.format??"png"),{type:m.type}),h=await HB({file:p,forceImage:!0,reason:e,fileSource:"entropy"});if(!h||!h?.fields||!h.s3_bucket_url)throw new Error("Failed to create upload URL");const g=new FormData;Object.entries(h.fields).forEach(([v,b])=>{g.append(v,b)}),g.append("file",p);const y=await fetch(h.s3_bucket_url,{method:"POST",body:g});if(!y.ok)throw new Error(`Failed to upload screenshot: ${y.statusText}`);const x=await y.json();if(!x.secure_url)throw ne.error("[GetVisibleTabScreenshot] Upload did not return a secure URL",{response:x}),new Error("Upload did not return a secure URL");return{screenshot_url:x.secure_url}});await md(c,s.uuid,{request_id:l[hr]??""},e)}else ne.error("[useExecuteBrowserTool] Unknown browser tool step",{browserStep:s},{reason:e,backend_uuid:a})},[n,t,e]);return d.useMemo(()=>({executeBrowserTool:r}),[r])}const $be=I.memo(function(){const{executeBrowserTool:t}=Hvt({reason:"StreamMiddlewares"}),n=d.useCallback(s=>{if(!s||!s.browser_tool)return s;t(s.browser_tool,s.backend_uuid)},[t]),r=d.useMemo(()=>[n],[n]);return o.jsx(Cge,{middlewares:r})});$be.displayName="StreamMiddlewares";const zvt=({reason:e})=>{const t=P_({reason:e}),n=jB({reason:e});return d.useMemo(()=>{const r=tG([...t.enabledConnectors,...t.enabledFileConnectors,...t.enabledNonFileConnectors].map(a=>a.name)),s=tG([...n.disabledConnectors,...n.disabledFileConnectors].map(a=>a.name));return{enabled:r,disabled:s}},[t,n])},Gvt=({fileRepoInfo:e,reason:t})=>{const{$t:n}=Z(),r=ot(),s=["list_file_directory",e.file_repository_type,e.owner_id],{deprecatedOpenToast:a}=fn(),{session:i}=mt(),l=i?.user?.email??"",c=dt({mutationFn:async u=>{if(!u.nextURL)throw new Error("File must have a url");const f=await re.POST("/rest/file-repository/move-attachment-to-persistent-file-path",t,{body:{file_repository_info:e,file_url:u.nextURL},timeoutMs:Ht.MEDIUM,retries:2}),m=f.data;if(m&&await SB({request:{file_repository_info:e,file_index_params:[{file_s3_url:m.file_url_params.s3_object_url,file_size:u.file.size,filename:u.file.name,file_uuid:m.file_url_params.file_uuid,replace_existing:!1}]},reason:t}),!f.response.ok||!f.data)throw new Error("Failed to save file persistently");return f.data},onSuccess:(u,f)=>{const m={name:f.file.name,file_s3_url:u.file_url_params.s3_object_url,file_uuid:u.file_url_params.file_uuid,file_title:f.file.name,file_description:null,uploadedBy:l,date:new Date().toLocaleString(),state:"COMPLETE",size:f.file.size,isOptimistic:!0};r.setQueriesData({queryKey:s},h=>{if(!h)return h;const g=h.completedFiles||[];return{...h,completedFiles:[...g,m]}});const p=SF(e.owner_id,f.file.name);r.invalidateQueries({queryKey:p}),a(n({defaultMessage:"Saved file",id:"2HZW5WnkV3"}),"success",3)},onError:(u,f)=>{a(n({defaultMessage:"Failed to upload file",id:"x2gE8tKhMn"}),"error",3),ne.error("Error saving file with name",f.file.name,u)},onSettled:async()=>{await r.invalidateQueries({queryKey:s})}});return d.useMemo(()=>({saveFile:c.mutate,isLoading:c.isPending}),[c.isPending,c.mutate])},i$=({fileRepoInfo:e,fileName:t,reason:n,enabled:r=!0})=>{const{session:s}=mt();return Ue({queryKey:SF(e.owner_id,t),refetchOnMount:!0,queryFn:async()=>((await j8({request:{fileRepositoryInfo:e,limit:Ao,offset:0,searchTerm:t,fileStates:["COMPLETE"],email:s?.user?.email??""},reason:n}))?.files.length??0)>0,enabled:r&&e.file_repository_type==="COLLECTION"&&!!e.owner_id&&t.length>0})},Vbe=({fileRepoInfo:e,fileExists:t,reason:n})=>{const{deprecatedOpenToast:r}=fn(),{session:s}=mt(),a=d.useMemo(()=>s?.user?.email??"",[s]),i=ot(),{mutate:l}=j0e({fileRepoInfo:e,setTotalFilesUploading:()=>1,replaceExisting:t,reason:n}),{mutateAsync:c}=N0e({fileRepositoryType:e.file_repository_type,offset:0,searchTerm:"",ownerId:e.owner_id,reason:n}),u=d.useCallback(async(m,p)=>{try{if(!m||!p)return;const h=await c0e({thread_uuid:m,format:"md",filename:p,reason:n}),g=atob(h.file_content_64),y=new Array(g.length);for(let _=0;_<g.length;_++)y[_]=g.charCodeAt(_);const x=new Uint8Array(y),v=new Blob([x],{type:"application/md"}),b=new File([v],h.filename,{type:"application/md"});await l([b]),i.setQueryData(["file_exists",e.owner_id,p],!0),t||r("Successfully saved to space","success",3)}catch(h){r(`Failed to save to space: ${h}`,"error",3)}},[l,r,t,e,i,n]),f=d.useCallback(async m=>{try{const h=(await eM({fileRepositoryType:e.file_repository_type,limit:10,offset:0,searchTerm:"",email:a,ownerId:e.owner_id,reason:n}))?.completedFiles.find(g=>g.name.includes(m??""));if(!h?.file_uuid)return;await c([h.file_uuid]),i.setQueryData(["file_exists",e.owner_id,m],!1),r("File removed from space","success",3)}catch(p){r(`Failed to remove from space: ${p}`,"error",3)}},[c,r,i,e.owner_id,a,n,e.file_repository_type]);return d.useMemo(()=>({saveThreadToSpace:u,removeThreadFromSpace:f}),[f,u])},l$=({windowsAppOnly:e=!0}={})=>{const[t,n]=d.useState(()=>globalThis.Notification?globalThis.Notification.permission:"denied"),{device:{isWindowsApp:r}}=Pt();d.useEffect(()=>{globalThis.Notification&&globalThis.Notification.permission!==t&&n(globalThis.Notification.permission)},[t]);const s=d.useCallback(async()=>{if(globalThis.Notification){if(t==="granted")return!0;if(t==="denied")return!1;const i=await globalThis.Notification.requestPermission();return n(i),i==="granted"}return!1},[t]),a=d.useCallback(async({title:i,body:l,icon:c="https://r2cdn.perplexity.ai/pplx-desktop-icon.png",onClick:u})=>{if(!(e&&!r||!await s())&&globalThis.Notification){const m=new globalThis.Notification(i,{body:l,icon:c});u&&(m.onclick=()=>{u(),window.focus()})}},[e,r,s]);return d.useMemo(()=>({sendNotification:a,requestPermission:s,permission:t,isWindowsApp:r}),[r,t,s,a])},y2="v1",x2="last_results",F3=e=>({backend_uuid:t,thread_url_slug:n})=>t===e||n===e,U3=()=>{const e=De.getItem(x2);let t={version:y2,results:ce};try{e&&(t=JSON.parse(e),t.version!==y2&&(De.removeItem(x2),t={version:y2,results:[]}))}catch{De.removeItem(x2)}return t.results},Y1=e=>De.setItem(x2,JSON.stringify({version:y2,results:e})),Wbe=e=>{const t=F3(e.backend_uuid),r=U3().slice(-49).filter(s=>!t(s));r.push(e),Y1(r)||Y1([e])},c$=Jet,Hbe=c$*10,qvt=Hbe*10+c$,Q1="all_results",Kvt=({slugOrUUID:e,enabled:t,reason:n})=>{const r=ot(),s=d.useCallback(async(a,i)=>{const l=await P1({slugOrUUID:a,options:{withParentInfo:!0,supportedBlockUseCases:[...Mme],limit:i?Hbe:c$,fromFirst:!0,cursor:i},numRetries:Du,reason:n});if(!l?.entries?.length||l.status!=="success")return[];const c=[Q1,a];r.setQueryData(c,f=>{const m=l.entries,p=new Set(f?.map(g=>g.backend_uuid)),h=m.filter(g=>!p?.has(g.backend_uuid));return[...f??[],...h]});const u=r.getQueryData(c)??[];return l.next_cursor&&u.length<qvt&&s(a,l.next_cursor),u},[n,r]);return Ue({queryKey:[Q1,e],enabled:!!e&&t,retry:!1,queryFn:async({queryKey:a})=>await s(a[1]??"")})},Yvt=()=>{const e=ot();return d.useCallback(t=>{if(!Js(t))return;const n=t[0],r=n.thread_url_slug??n.backend_uuid;Wbe(n),e.setQueryData([Q1,r],t)},[e])},Qvt=()=>{const e=ot();return d.useCallback(t=>{if(t){const n=F3(t),r=U3();if(r.find(n)){const s=r.filter(a=>!n(a));Y1(s)}e.removeQueries({queryKey:[Q1,t],exact:!0})}else Y1(ce),e.removeQueries({queryKey:[Q1]})},[e])};function Xvt({reason:e}){const{setIsCopilot:t,gpt4Limit:n,setGPT4Limit:r,pplxAlphaLimit:s,setPplxAlphaLimit:a,pplxBetaLimit:i,setPplxBetaLimit:l,setAskInputReasoningMode:c}=ir(),{trackEvent:u}=Te(),f=d.useCallback(async()=>{try{const p=(await re.GET("/rest/rate-limit/all",e)).data;if(!p)throw new Error("No data returned from rate limit check");const h=p.remaining_pro??0,g=p.remaining_research??0,y=p.remaining_labs??0;n>0&&p.remaining_pro!==null&&h<=0&&u("pro rate limit reached",{}),s>0&&p.remaining_research!==null&&g<=0&&u("pplx alpha rate limit reached",{}),i>0&&p.remaining_labs!==null&&y<=0&&u("pplx beta rate limit reached",{}),r(h),a(g),l(y),h<=0&&(c(!1),t(!1))}catch(m){ne.error("Failed to check rate limit",m)}},[n,r,s,a,i,l,c,t,u,e]);return d.useCallback(()=>{f()},[f])}const Zvt=(e,t)=>{const{value:n,loading:r}=Fu({flag:"sapi-ranking-navigate",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},Jvt=async({query:e,userIdentity:t,queryClient:n,reason:r,sapiSearchNavigateConfig:s})=>{try{const a=s?[`sapi-ranking-navigate-cfg=${JSON.stringify(s)}`]:[],c=(await(await W9e({resource:"https://suggest.perplexity.ai/search/v2/navigate",method:"POST",options:{headers:{"content-type":"application/json","X-Client-Name":"agi_ui_navigate_v2","X-Client-Env":"production"}},body:JSON.stringify({query:e,user_identity:{lang:t.lang,country:t.country,ab_active_tests:a}}),timeoutMs:1e3,reason:r})).json())?.hit;c&&n.setQueryData(["navigationResults",e],c)}catch(a){ne.error("Failed to fetch navigational search results:",a)}},e0t=35,t0t=()=>{const e=ot(),t=Bu(),{variation:n,loading:r}=Zvt({});return d.useCallback(({query:s,params:a,reason:i})=>{const l=s.length<=e0t,c=!!a.last_backend_uuid,u=a.attachments,f=a.sources,m=a.model_preference==="pplx_study";if(l&&!c&&u.length===0&&f&&f.length>0&&!m){const h={lang:a.language,country:t};Jvt({query:s,userIdentity:h,queryClient:e,reason:i,sapiSearchNavigateConfig:r?void 0:n})}},[e,t,n,r])};var no;(function(e){e.EXPOSURE="sbs exposure",e.JUDGMENT="sbs judgment",e.BANNER="sbs banner"})(no||(no={}));const oM=-1,n0t="sbs_analytics_",r0t=e=>{const t=e?.experiment_override;return t?JSON.stringify(t):""},s0t=(e,t)=>{const n=e.side_by_side_metadata;return{displayPosition:t,experimentRole:n?.experiment_role||`entry_${t}`,entryUUID:e.backend_uuid,experimentOverride:r0t(n)}},zbe=(e,t)=>`${n0t}${e}_${t}`,tA=(e,t)=>{try{const n=zbe(e,t);return De.getItem(n)==="true"}catch(n){return ne.error("Error checking localStorage for SBS event:",n),!1}},nA=(e,t)=>{try{const n=zbe(e,t);De.setItem(n,"true")}catch(n){ne.error("Error setting localStorage for SBS event:",n)}},a0t=({results:e,session:t,trackEvent:n})=>{const r=d.useCallback(()=>{if(!e[0])return null;const c=e[0].side_by_side_metadata;if(!c?.sibling_uuid)return null;const u=c.experiment_override,f=u&&Object.keys(u)[0]||"";return{evaluationUUID:c.sibling_uuid,experimentVariationKey:f,evaluatorID:t?.user?.id||t?.user?.email||"anonymous"}},[e,t?.user?.id,t?.user?.email]),s=d.useCallback(c=>{try{const u=r();if(!u)return null;let f,m;if(c===oM)f=oM,m=void 0;else if(f=c,f>=0&&f<e.length)m=e[f]?.backend_uuid;else return ne.warn(`Invalid SBS selection index: ${c}, results length: ${e.length}`),null;const p={};return e.forEach(h=>{h.backend_uuid&&h.side_by_side_metadata?.execution_log&&(p[h.backend_uuid]=h.side_by_side_metadata.execution_log)}),{eventType:no.JUDGMENT,timestampMs:Date.now(),eventData:{evaluationUUID:u.evaluationUUID,evaluatorID:u.evaluatorID,preferredPosition:f,entryUUID:m,executionLogs:p}}}catch(u){return ne.error("Failed to build SBS judgment payload:",u),null}},[r,e]),a=d.useCallback(c=>{try{const u=r();if(!u||tA(u.evaluationUUID,no.JUDGMENT))return;const f=s(c);f&&(n(no.JUDGMENT,f),nA(u.evaluationUUID,no.JUDGMENT))}catch(u){ne.error("Failed to track SBS judgment:",u)}},[r,s,n]),i=d.useCallback(()=>{try{const c=r();if(!c||tA(c.evaluationUUID,no.BANNER))return;const u={eventType:no.BANNER,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,experimentRoles:e.map(f=>f.side_by_side_metadata?.experiment_role||`entry_${e.indexOf(f)}`)}};n(no.BANNER,u),nA(c.evaluationUUID,no.BANNER)}catch(c){ne.error("Failed to track SBS banner exposure:",c)}},[r,e,n]),l=d.useCallback(()=>{try{const c=r();if(!c||tA(c.evaluationUUID,no.EXPOSURE))return;const u={eventType:no.EXPOSURE,timestampMs:Date.now(),eventData:{evaluationUUID:c.evaluationUUID,evaluatorID:c.evaluatorID,experimentVariationKey:c.experimentVariationKey,entries:e.map(s0t)}};n(no.EXPOSURE,u),nA(c.evaluationUUID,no.EXPOSURE)}catch(c){ne.error("Failed to track SBS exposure:",c)}},[r,e,n]);return d.useMemo(()=>({trackJudgment:a,trackBannerExposure:i,trackSBSExposure:l}),[a,i,l])},o0t="side-by-side-experiments";function i0t(e,t={}){const{value:n,loading:r,error:s}=JYe({flag:o0t,defaultValue:{side_by_side_config:{}},subjectType:"context_uuid",extraAttributes:t},e);return d.useMemo(()=>({sideBySideOverrides:n,loading:r,error:s}),[n,r,s])}var l0t={};const Gbe="sbs_trigger_count",H8="[control]",c0t=e=>e?.startsWith(H8)??!1,u0t=[],d0t={isEnabled:!1,sbsVariations:u0t,isLoading:!1,error:null,incrementTriggerCount:()=>{},triggerCount:0},f0t="sbsMaxTriggerCntPerThread";function m0t(e,t,n,r,s,a,i,l,c){const{isPro:u,isMax:f,hasAccessToProFeatures:m}=e,{isEnterprise:p=!1}=t,h=u||f||p||m,g=u||f||m,y=s?.localeObj?.language||n?.language||null,x=r?.toLowerCase()||null,v=p?"ENTERPRISE":"INDIVIDUAL",b=typeof window<"u"&&window.navigator.userAgent.includes("Mobile");return{isPriority:h,isSubscribed:g,language:y,country:i,searchFocus:x,userCategory:v,isFollowUp:!!c,isMobile:b,appApiClient:"web",configuredModel:l,[f0t]:a}}const qbe=e=>[...e].sort((t,n)=>t.backend_uuid.localeCompare(n.backend_uuid,void 0,{sensitivity:"base"})),p0t=e=>{try{if(!e||!e.side_by_side_config)return!1;const t=e.side_by_side_config;if(!t||typeof t!="object")return!1;const n=!!(t.experiment_flag&&typeof t.experiment_flag=="string"&&t.experiment_flag.length>0),r=!!(t.variations&&Array.isArray(t.variations)&&t.variations.length>0);return n||r}catch{return!1}},h0t=e=>{if(!e||!e.side_by_side_config)return[];const t=e.side_by_side_config;if(!t.experiment_flag||!t.variations||!Array.isArray(t.variations))return[];if(t.variations.length===0)return[];const n=[],r=bo(),s=t.experiment_flag;let a=!1;return t.variations.forEach(i=>{if(!i||!i.identifier)return;const l=i.is_control===!0;l&&(a=!0);const c=l?`${H8}${s}:${i.identifier}`:`${s}:${i.identifier}`,u={[s]:i.attributes_override??{}};n.push({sibling_uuid:r,experiment_role:c,experiment_override:u})}),!a&&Js(n)&&(n[0].experiment_role=`${H8}${s}:${t.variations[0]?.identifier}`),n},lee=e=>{try{const t=Ys.getItem(`${Gbe}_${e}`);return t?parseInt(t,10):0}catch{return 0}},g0t=(e,t)=>{try{Ys.setItem(`${Gbe}_${e}`,t.toString())}catch{}};function y0t({frontendContextUUID:e,disableSideBySide:t=!1}){const n=qa(),{sources:r,configuredModel:s}=ir(),a=zQe(r||[]),i=St(),l=Hn({reason:"sbs-experiment-attributes"}),c=B1e({reason:"sbs-experiment-attributes"}),u=vve(),f=Bu(),{session:m}=mt(),p=dn()||!!l0t.NEXT_PUBLIC_IS_SIDECAR_BUILD||$F(),h=m?.user?.email?.endsWith("@perplexity.ai")??!1;t=t||n===ue.STUDIO||n===ue.RESEARCH||p||a.length>0||(l.isEnterprise??!1)&&!h;const[g,y]=d.useState(()=>e?lee(e):0),x=e?m0t(i,l,c,n,u,g,f??null,s,e):{},{sideBySideOverrides:v,loading:b,error:_}=i0t(e||"",x),w=_?String(_):null,C=p0t(v);d.useEffect(()=>{if(e){const E=lee(e);y(Math.max(0,E))}else y(0)},[e]),d.useEffect(()=>{C&&e&&g>0&&g0t(e,g)},[e,g,C]);const S=d.useCallback(()=>{C&&y(E=>Math.max(0,E+1))},[C]);return d.useMemo(()=>{if(t||!C||w)return d0t;const E=h0t(v);return{isEnabled:C,sbsVariations:E,isLoading:b,error:w,incrementTriggerCount:S,triggerCount:g}},[t,w,S,C,b,v,g])}const Kbe=e=>{if(!e.length)return[];const t=new Map;return e.forEach(n=>{if(n.side_by_side_metadata?.sibling_uuid&&n.side_by_side_metadata?.selection_status===Ki.UNSELECTED)return;const r=n.side_by_side_metadata?.sibling_uuid??n.backend_uuid;t.has(r)||t.set(r,[]),t.get(r).push(n)}),[...t.values()].map(n=>{const r=qbe(n);return r[0]?.side_by_side_metadata?.selection_status===Ki.TIE?[r[0]]:r})},x0t=async(e,t,n,r)=>{const s=(a,i)=>{r(l=>l.filter(c=>t.some(u=>u.backend_uuid===c.backend_uuid)?c.backend_uuid===a.backend_uuid:!0).map(c=>c.backend_uuid===a.backend_uuid?{...c,side_by_side_metadata:c.side_by_side_metadata?{...c.side_by_side_metadata,selection_status:i}:void 0}:c))};try{const a=t.map((c,u)=>{let f;return e===oM?f=Ki.TIE:f=u===e?Ki.SELECTED:Ki.UNSELECTED,EZe({entryUUID:c.backend_uuid,params:f,siblingUUID:n,reason:"user-sbs-selection"}).catch(m=>{throw ne.error(`Failed to update selection for entry ${c.backend_uuid}:`,m),m})});await Promise.all(a);let i,l;if(e===oM?(i=qbe(t)[0],l=Ki.TIE):(i=t[e],l=Ki.SELECTED),!i)throw new Error("No target result found");s(i,l)}catch(a){throw ne.error("Failed to update entry selection:",a),a}};function v0t({lastResponse:e,backend_uuid:t,trackEvent:n,notificationText:r,sendNotification:s,cometAdapter:a,isMissionControl:i}){if(!t)return ne.error(new Error("No backend_uuid found in response")),!1;if(!e)return ne.error(new Error("No last response found in query client")),!1;(Dr(e.display_model)===ue.RESEARCH||Dr(e.display_model)===ue.STUDIO)&&r&&s&&document.visibilityState!=="visible"&&s({title:r,body:e.query_str,onClick:()=>{window.focus()}}),e.blocks.filter(c=>c.intended_usage?.endsWith("_markdown")).forEach(c=>{c.markdown_block?.media_items&&n&&c.markdown_block?.media_items.forEach(u=>{n("inline image rendered",{image_url:u.image,entryUUID:t})})});const l=e.blocks.find(c=>c.intended_usage==="knowledge_cards")?.knowledge_card_block?.knowledge_cards?.[0];return l&&n&&n("knowledge card in results",{entryUUID:t,name:l.title,id:l.id,type:l.card_type}),a?.setTabProgress(!1),i||a?.showNotification(),!0}const u$="pplx.activeQuery";function Ybe(){const e=Ys.getItem(u$);if(!e)return{};try{return JSON.parse(e)}catch{return{}}}function b0t(e){Ys.setItem(u$,JSON.stringify(e))}function _0t(){Ys.removeItem(u$)}const Qbe=hp("QueryInputStateContext",()=>Yo(e=>({userInput:"",userInputJson:void 0,hasStartedTyping:!1,shouldTriggerFocus:!1,actions:{restoreInput:()=>{const t=Ybe();t.rawQuery&&e({userInput:t.rawQuery,userInputJson:t.rawQueryJson})},setUserInput:(t,n)=>{e({userInput:t,userInputJson:n}),b0t({rawQuery:t,rawQueryJson:n})},setHasStartedTyping:t=>e({hasStartedTyping:t}),setStartTypingTime:t=>e({startTypingTime:t}),resetInput:()=>{e({userInput:"",userInputJson:void 0}),_0t()},markInputAsSubmitted:()=>{e({userInput:"",userInputJson:void 0,startTypingTime:void 0})},setShouldTriggerFocus:t=>{e({shouldTriggerFocus:t})}}}))),w0t=Qbe.Provider,Ex=Qbe.useSelector,Xbe=I.memo(()=>{const{setUserInput:e,resetInput:t}=V_(),n=Lt(),r=ex(n);return d.useLayoutEffect(()=>{const s=Ybe();s.rawQuery&&e(s.rawQuery,s.rawQueryJson)},[e]),d.useLayoutEffect(()=>{!r||r===n||r==="/"&&n?.startsWith("/search/new")||r.startsWith("/search/new")&&n?.startsWith("/search")||t()},[n,r,t]),null});Xbe.displayName="QueryInputSideEffects";const Zbe=()=>Ex(e=>e.userInput),Jbe=()=>Ex(e=>e.userInputJson),e_e=()=>Ex(e=>e.hasStartedTyping),C0t=()=>Ex(e=>e.startTypingTime),S0t=()=>Ex(e=>e.shouldTriggerFocus),V_=()=>Ex(e=>e.actions),E0t=he(async()=>{const{DebugStreamSideEffects:e}=await X(async()=>{const{DebugStreamSideEffects:t}=await import("./DebugStreamSideEffects-CTZ7QwUR.js");return{DebugStreamSideEffects:t}},__vite__mapDeps([95,1,2,96,6,7,97,5]));return{default:e}},{prefetch:!1,restricted:!0}),t_e=I.memo(function(){const t="stream-side-effects",n=vt(),r=dn(),{session:s}=mt(),{trackEvent:a}=Te(),{$t:i}=Z(),l=M_(globalThis.navigator?.userAgent),{sendNotification:c}=l$({windowsAppOnly:!1}),u=iye(),f=t0t(),{addKeyRequiringRerender:m}=df(),p=mo(),h=Nn(),g=uf(),y=typeof window<"u"&&(window.location.pathname.startsWith("/b/mission-control")||window.location.pathname.startsWith("/b/assistants")),{fileRepoInfo:x}=Ic({reason:t}),{firstResult:{thread_url_slug:v}={}}=Ft(),{data:b}=i$({fileRepoInfo:x,fileName:v??"",reason:t}),{saveThreadToSpace:_}=Vbe({fileRepoInfo:x,fileExists:b??!0,reason:t}),w=Yvt(),{resetInput:C,restoreInput:S}=V_(),E=Zbe(),k=d.useRef(E);k.current=E;const M=zvt({reason:t}),j=ot(),R=Xvt({reason:t}),{updateLocalStatePostStream:O}=Sa();return d.useLayoutEffect(()=>is.on("created",async({stream:D,query:P,params:A})=>{if(D.isReconnect||!P||!A)return;if(u2(A)&&A.side_by_side_metadata){const{experiment_role:L}=A.side_by_side_metadata;if(!c0t(L))return}const T=Zo(),N=nj(l,p.erp);RGe(D.id,{name:"perplexity_ask",queryStr:P,queryParams:A,isFollowup:u2(A)&&(A.query_source==="followup"||A.query_source==="followup-sidecar"),isPerplexityBrowser:r,frontendUUID:A.frontend_uuid??"",session:s,browserVersion:T?.browser_version,source:N,connectors:M,mentions:"mentions"in A?A.mentions:[]}),h?.setTabProgress(!0),g&&h.sendThreadStatusToMobile({status:"working",streamId:D.id.description})}),[r,l,s,M,p.erp,h,g]),d.useLayoutEffect(()=>is.on("progress",({stream:D,message:P})=>{const{blocks:A,status:T,telemetry_data:N}=P,L=A?.some(V=>!!V?.markdown_block?.chunks?.length),U=A?.some(V=>!!V?.web_result_block?.web_results?.length),$=A?.some(V=>!!V?.sources_mode_block?.rows?.length);if(N){const{has_displayed_search_results:V,has_first_output_token:W,has_first_token:Q,has_widget_data:q,country:H,is_followup:K,source:G,engine_mode:ee,search_implementation_mode:Y,has_useful_renderable_content:te}=N,se={country:H,is_followup:K,source:G,engine_mode:ee,search_implementation_mode:Y};V&&D.timer.addTimingOnce("web.frontend.first_search_results_latency_ms",se),W&&D.timer.addTimingOnce("web.frontend.first_output_token_latency_ms",se),Q&&D.timer.addTimingOnce("web.frontend.first_token_latency_ms",se),q&&D.timer.addTimingOnce("web.frontend.first_widget_data_latency_ms",se),te&&D.timer.addTimingOnce("web.frontend.first_useful_renderable_content_latency_ms",se)}SGe(D.id,{hasLLMToken:L,hasSearchResults:U,hasSources:$},s??void 0),T===Qn.FAILED&&ne.error(new KU("STREAM_FAILED_CHUNK_ERROR"),{message:P})}),[s]),d.useLayoutEffect(()=>is.on("progress",({stream:D,isFirstMessage:P})=>{P&&D.placeholderChunk&&D.placeholderChunk.query_source&&!k.current&&C()}),[C]),d.useLayoutEffect(()=>is.on("completed",({stream:D})=>{const P=mo(),A=nj(l,P.erp);tY(D.id,{name:"SUCCESSFUL response",session:s,source:A})}),[s,l]),d.useLayoutEffect(()=>is.on("completed",({stream:D,thread:P})=>{if(!D.threadId||!D.entryId)return;w(P);const A=P?.find(N=>N?.uuid===D.id.description||N?.backend_uuid===D.entryId);let T;Dr(A?.display_model)===ue.RESEARCH?T=i({defaultMessage:"Your report is ready",id:"CEIDgftq5U"}):Dr(A?.display_model)===ue.STUDIO&&(T=i({defaultMessage:"Your project is ready",id:"UXOU5ST+Nc"})),v0t({lastResponse:A,backend_uuid:D.entryId,trackEvent:a,sendNotification:c,notificationText:T,cometAdapter:h,isMissionControl:y})}),[i,a,c,w,h,y]),d.useLayoutEffect(()=>is.on("completed",async({stream:D})=>{!v||!D.entryId||b&&await _(D.entryId,v)}),[b,_,v]),d.useLayoutEffect(()=>{const D=({stream:T})=>{const{id:N}=T,L=mo(),U=nj(l,L.erp),W=new URL(window.location.href).pathname.replace("/search/new/","");tY(N,{name:"FAILED response",session:s,source:U}),W===N.description&&(S(),n.replace(`/?error=${_m.ThreadStreamError}`,"StreamSideEffects")),h?.setTabProgress(!1)},P=is.on("error",D),A=is.on("aborted",D);return()=>{P(),A()}},[s,l,S,n,h]),d.useLayoutEffect(()=>is.on("created",({query:D,params:P,stream:{isReconnect:A,id:T}})=>{if(!(!D||!P||A||!u2(P))){if(r){u(D,{model_preference:P.model_preference,last_backend_uuid:"last_backend_uuid"in P?P.last_backend_uuid:void 0,sources:P.sources,override_no_search:P.override_no_search},T.description);return}f({query:D,params:P,reason:"streamEvents.on(created)"})}}),[u,f,r]),d.useEffect(()=>{const D=[is.on("completed",({stream:P})=>{h.cleanupTasks(P.entryId,"stream_completed"),g&&h.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),is.on("aborted",({stream:P})=>{h.cleanupTasks(P.entryId,"stream_aborted"),g&&h.sendThreadStatusToMobile({status:"ready",streamId:P.id.description})}),is.on("error",({stream:P})=>{h.cleanupTasks(P.entryId,"stream_error"),g&&h.sendThreadStatusToMobile({status:"error",streamId:P.id.description})})];return()=>{D.forEach(P=>P())}},[h,g]),d.useEffect(()=>is.on("completed",async({message:D,thread:P})=>{if(!D||(O(D),D.collection_info?.slug&&j.invalidateQueries({queryKey:[lu,{collection_slug:D.collection_info.slug.slice(-22)}]}),R(),Gyt(D.thread_url_slug)))return;const A=!!D.parent_info,T=P.findIndex(N=>N.uuid===D.uuid)>0;(A||!T)&&(m("floating-signup"),j.invalidateQueries({queryKey:[Bm],refetchType:"all"}))}),[j,l,m,R,O]),null});t_e.displayName="StreamSideEffects";const n_e=I.memo(function(){const{pendingTasks:t,navigationMeta:n}=Hr();return o.jsx(E0t,{pendingTasks:t,navigationMeta:n})});n_e.displayName="DebugStreamSideEffects";const yf=e=>e?.includes("perplexity.ai"),M0t=e=>e?.includes("localhost"),k0t=e=>yf(e)&&e?.includes("preview"),T0t=e=>yf(e)&&e?.includes("staging"),N0t=e=>yf(e)&&(e?.includes("alpha")||e?.includes("beta")),j0t=e=>yf(e)&&e?.includes("testing"),A0t=e=>yf(e)&&e?.includes("askdev"),I0t=e=>yf(e)&&e?.startsWith("dev"),R0t=e=>yf(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),P0t=e=>yf(e)&&!k0t(e)&&!j0t(e)&&!N0t(e)&&!A0t(e)&&!I0t(e)&&!R0t(e);function r_e(){return P0t(window.location.hostname)?"beta":T0t(window.location.hostname)?"staging":M0t(window.location.hostname)?"local":"testing"}class Wf{static GC_TIME=1e3*60*5;static STALE_TIME=1/0;static retryDelay(t,n){return Math.min(t>1?2**t*1e3:1e3,30*1e3)}static retryQuery(t,n){return!1}static retryMutation(t,n){return!1}}function L0t(){return Pm?cee():(rA||(rA=cee()),rA)}function cee(){return new _ze({queryCache:new Hfe({onError:e=>{const t=e instanceof FR?e:new FR("FETCHER_UNKNOWN_ERROR",{details:{cause:H9e(e)},cause:z9e(e)?e:void 0});ne.error(t)}}),mutationCache:new Gfe({onError:e=>{ne.error("Mutation error",e)}}),defaultOptions:{queries:{staleTime:Wf.STALE_TIME,gcTime:Wf.GC_TIME,refetchOnReconnect:!0,refetchOnMount:!0,refetchOnWindowFocus:!0,retry:Wf.retryQuery,retryDelay:Wf.retryDelay,throwOnError:!1,networkMode:"online"},mutations:{gcTime:Wf.GC_TIME,retry:Wf.retryMutation,retryDelay:Wf.retryDelay,throwOnError:!1,networkMode:"online"}}})}let rA;const s_e=I.memo(()=>{const{message:e,variant:t,description:n,ctaText:r,ctaOnClick:s,isVisible:a,timeout:i,handleClick:l,closeToast:c,position:u,iconOverride:f,keyProp:m}=fn(),p=d.useCallback(()=>{t==="refresh"&&l===void 0?window.location.reload():l&&l()},[t,l]);return o.jsx(hc,{keyProp:m,isVisible:a,variant:t,message:e,description:n,ctaText:r,ctaOnClick:s,timeout:i,handleClick:p,onTimeout:c,position:u,iconOverride:f},m)});s_e.displayName="Toasts";const a_e=I.memo(({children:e,colorScheme:t})=>{const{isMobileStyle:n,isMobileUserAgent:r}=xe();return o.jsx(dve,{isMobileStyle:n,isMobileUserAgent:r,children:o.jsx(Gpe,{userPreferredColorScheme:t,children:o.jsxs(uge,{children:[e,o.jsx(s_e,{})]})})})});a_e.displayName="GlobalUXProvider";he(async()=>{const{RenderToolbar:e}=await X(async()=>{const{RenderToolbar:t}=await import("./RenderToolbar-CCD5dedH.js");return{RenderToolbar:t}},__vite__mapDeps([98,2,1]));return{default:e}},{prefetch:!1});he(async()=>{const{ReactQueryDevtools:e}=await X(async()=>{const{ReactQueryDevtools:t}=await import("./index-Ds5yF1gS.js");return{ReactQueryDevtools:t}},[]);return{default:e}},{prefetch:!1});const O0t=({children:e,hostname:t,version:n,minVersion:r,spaRoutes:s,strictSpa:a,shouldOpenNonSpaRouteInNewTab:i,base:l,idleRefresh:c,minVersionRefresh:u})=>{const f=Lt(),m=L0t(),{colorScheme:p}=In();return d.useEffect(()=>{!n&&["beta","staging"].includes(r_e())&&ne.error("Version is not set")},[n]),o.jsx(G9e,{ssrPath:f??"/",ssrSearch:"",base:l,children:o.jsx(q9e,{spaRoutes:s,strictSpa:a,openNonSpaRouteInNewTab:i,children:o.jsx(Nat,{children:o.jsxs(w0t,{children:[o.jsx(Ave,{}),o.jsxs(Tze,{client:m,children:[o.jsx(a_e,{colorScheme:p??void 0,children:o.jsx(F0e,{children:o.jsx(ect,{hostname:t,children:o.jsx(sJe,{children:o.jsx(vge,{children:o.jsx(Let,{children:o.jsx(hnt,{shouldFetchSettings:!0,children:o.jsx(ytt,{children:o.jsx(Xat,{shouldFetchSettings:!1,children:o.jsx($vt,{children:o.jsx(act,{children:o.jsx(Tvt,{children:o.jsx(lnt,{children:o.jsx($lt,{children:o.jsxs(rct,{children:[c&&o.jsx(jve,{version:n}),u&&o.jsx(Ive,{minVersion:r}),o.jsx(t_e,{}),o.jsx($be,{}),typeof window<"u"&&o.jsx(Xbe,{}),o.jsx(n_e,{}),o.jsx(Bbe,{}),e]})})})})})})})})})})})})})})}),!1]})]})})})})},D0t="^/(finance|crypto|app/finance)/?([^/]+)?(?:/([^/]+))?/?$",d$="^/(finance|crypto)/?([^/]+)?(?:/([^/]+))?/?$",B3="^\\/search(?:\\/(?<new>new))?(?:\\/(?<uuid>.+))?$",f$=[B3,"/account/api/files/:repositoryUuid","/account/api/members","/account/api/billing","/account/api/files","/account/api/limits","/account/api/group","/account/api/keys","/account/api/playground/search","/account/api","/account/org/user-access","/account/org/permissions","/account/org/connectors","/account/org/insights","/account/org/members","/account/org/details","/account/org/files","/account/org","/account/pro-perks/:name","/account/pro-perks","/account/tasks/:taskId","/account/tasks","/account/site-instructions","/account/reservations","/account/preferences","/account/personalize/memories","/account/personalize","/account/assistant","/account/notifications","/account/purchases","/account/connectors","/account/shortcuts","/account/details","/account/files","/account","/sports/atp/tournaments/:seasonId","/sports/atp/events/:eventId","/sports/atp","/sports/wta/tournaments/:seasonId","/sports/wta/events/:eventId","/sports/wta","/sports/nba/players/:playerId","/sports/nba/events/:eventId","/sports/nba/teams/:teamId","/sports/nba","/sports/nfl/players/:playerId","/sports/nfl/events/:eventId","/sports/nfl/teams/:teamId","/sports/nfl","/sports/championsleague/events/:eventId","/sports/championsleague","/sports/laliga/events/:eventId","/sports/laliga","/sports/ligue1/events/:eventId","/sports/ligue1","/sports/bundesliga/events/:eventId","/sports/bundesliga","/sports/epl/events/:eventId","/sports/epl","/sports/f1/events/:eventId","/sports/f1","/sports/mlb/events/:eventId","/sports/mlb","/sports/ipl/events/:eventId","/sports/ipl","/sports/icc/events/:eventId","/sports/icc","/sports/pga/events/:eventId","/sports/pga","/sports/dpworldtour/events/:eventId","/sports/dpworldtour","/sports/wnba/events/:eventId","/sports/wnba","/sports/ncaam/events/:eventId","/sports/ncaam","/sports/ncaaw/events/:eventId","/sports/ncaaw","/sports/cricket/events/:eventId","/sports","/discover/:topic/:slug","/discover/:topic","/discover","/spaces/templates","/spaces/:slug","/spaces","/classroom/:school/:classCode","/hotels/:slug","/page/:slug","/b/mission-control","/b/assistants","/b/try-assistant","/b/speak","/b/home","/b/zen","/perplexify_me","/academic","/shopping","/library","/travel","/windows-app/ask/input",d$,"/"],F0t=["49a618ae-2fee-4bac-9150-81c466a49187"];function U0t(e){let t=e;t=t.replace(/^\^/,"").replace(/\$$/,""),t=t.replace(/\\\//g,"/");const n=[],r=t.match(/^\/\(([^)]+\|[^)]+)\)/);if(r){const h=r[1]?.split("|").map(g=>`/${g}`);n.push({type:"alternation",value:"",optional:!1,alternatives:h}),t=t.substring(r[0].length)}else{const h=t.match(/^([^(]+)/);if(h&&h[1]){const g=h[1];n.push({type:"literal",value:g,optional:!1}),t=t.substring(g.length)}}let s=t,a=0,i=0;const l=100;for(;s.length>0&&i++<l;){const h=s.match(/^\(\?:\/\(\?<(\w+)>([^)]+)\)\)\?/);if(h){const[_,w,C]=h,S=C===w;n.push({type:S?"literal":"param",value:S?`/${w}`:`/:${w}`,optional:!0,paramName:S?void 0:w}),s=s.substring(_.length);continue}const g=s.match(/^\(\?:\/\(\?<(\w+)>([^)]+)\)\)/);if(g){const[_,w,C]=g,S=C===w;n.push({type:S?"literal":"param",value:S?`/${w}`:`/:${w}`,optional:!1,paramName:S?void 0:w}),s=s.substring(_.length);continue}const y=s.match(/^\/?\(([^)]+)\)\?/),x=s.match(/^\(\?:\/\(([^)]+)\)\)\?/),v=y||x;if(v){const[_]=v;a++,n.push({type:"param",value:`/:param${a}`,optional:!0,paramName:`param${a}`}),s=s.substring(_.length);continue}const b=s.match(/^\/?\?+/);if(b&&b[0].length>0){s=s.substring(b[0].length);continue}break}const c=[],u=n.find(h=>h.type==="alternation"),f=n.filter(h=>h.type!=="alternation"),m=u?u.alternatives.map(h=>`/${h}`):[""];for(const h of m){const g=f.filter(b=>b.optional),y=f.filter(b=>!b.optional),x=g.some(b=>b.paramName?.startsWith("param"));if(g.every(b=>b.paramName?.startsWith("param"))&&x){const b=g.length;for(let _=0;_<=b;_++){let w=h;for(const C of y)w+=C.value;for(let C=0;C<_;C++)w+=g[C]?.value??"";w=w.replace(/\/+/g,"/"),w=w.replace(/\/\?/g,""),w=w||"/",c.push(w)}}else{const b=g.length,_=Math.pow(2,b);for(let w=0;w<_;w++){let C=h;for(const S of y)C+=S.value;for(let S=0;S<b;S++)w&1<<S&&(C+=g[S]?.value??"");C=C.replace(/\/+/g,"/"),C=C.replace(/\/\?/g,""),C=C||"/",c.push(C)}}}return[...new Set(c)].sort((h,g)=>{const y=h.split("/").filter(Boolean),x=g.split("/").filter(Boolean);if(y.length!==x.length)return x.length-y.length;for(let v=0;v<y.length;v++){const b=y[v]?.startsWith(":"),_=x[v]?.startsWith(":");if(b&&!_)return 1;if(!b&&_)return-1;if(y[v]!==x[v])return y[v].localeCompare(x[v])}return 0})}let uee=!1;const B0t=performance.now();function o_e({bootstrapConfig:e,user:t,routes:n,base:r=""}){if(uee||typeof document>"u")return;const a="4705c1a2-db1e-42f0-8a66-cd6208ae9e65",i="pub4ecf63e3fd1ad28de1a9027c01181601",l=e.version,c=e.env??"local",u=Zo(),f=t?.email?.endsWith("@perplexity.ai"),m=c==="local",p=c==="testing"||m||u||f?100:2,h=m||f?100:2;if(!F0t.includes(t?.org_uuid??"")){K9e({ddApplicationId:a,ddClientToken:i,version:l,env:c,debug:m,sessionSampleRate:100,sessionReplaySampleRate:h,beforeSend:x=>{if(n&&x.view.url&&x.context)try{const v=new URL(x.view.url).pathname,b=Q9e(v,r),_=BR(n,b);if(_)if(_.route.startsWith("^")){const w=BR(U0t(_.route),b);w&&(x.context.normalizedName=eG(w.route,r))}else x.context.normalizedName=eG(_.route,r)}catch{}return!0}}),Y9e({ddClientToken:i,version:l,env:c,debug:m,sessionSampleRate:p});const y=typeof navigator<"u"&&"serviceWorker"in navigator&&!!navigator.serviceWorker.controller;if(Zz({useServiceWorker:y}),Jz({useServiceWorker:y}),u){const x={cometAgentExtensionVersion:u?.agent_extension_version,cometDeviceId:u.device_id,cometMainExtensionVersion:u.extension_version,cometVersion:u?.browser_version,erp:e.erp};Zz(x),Jz(x)}ou("web.frontend.module_exec_start",{startTime:performance.timeOrigin,duration:B0t})}uee=!0}const $0t=e=>{const t=I.memo(function({error:r}){d.useEffect(()=>{ne.error(r,{digest:r.digest,globalError:!0})},[r]);const s=d.useCallback(a=>{a.preventDefault(),pa(e,`${e} error`)},[]);return o.jsx("div",{className:"bg-subtler flex h-screen items-center justify-center",children:o.jsxs(z,{className:"space-y-md p-lg rounded-md",children:[o.jsx("div",{className:"max-w-[400px]",children:o.jsx(F,{className:"text-center",variant:"section-title",children:r.digest?`Internal Error (${r.digest})`:"Internal Error"})}),o.jsx(F,{className:"text-center underline",variant:"section-title",color:"light",children:o.jsx(qe,{href:e,onClick:s,children:"Return home"})})]})})});return t.displayName=`GlobalError(${e})`,t},V0t=60*60*24;function W0t({children:e,session:t}){return o.jsx(Xb.SessionProvider,{session:t,refetchInterval:V0t,children:e})}const H0t=(e,t)=>t?.includes("WindowsApp")?!0:e==="true",z0t=e=>e==="light"||e==="dark";function G0t(e,{userAgent:t}={}){const n=e.colorScheme,r=z0t(n)?n:null;let s=e[$P],a={};try{a=JSON.parse(e[spe]??"{}")}catch{}const i=Object.values(ue).includes(s);(!s||!i)&&(s=ue.SEARCH);const l=e[Bme];return{colorScheme:r,isCollapsed:H0t(e.isCollapsed,t),isSidebarPinned:e.isSidebarPinned==="true",sidebarHiddenHubs:JSON.parse(e.sidebarHiddenHubs??"[]"),isIncognitoLocal:e[bE]===void 0?void 0:e[bE]==="true",isDiscoverInterestBoxDismissed:l?l==="true":void 0,isEnterpriseAdDismissed:e[$me]=="true",isMaxAssistantMode:e[ape]=="true",isSplashPageDismissed:e[Vme]=="true",isSuggestionsDisabled:e[Wme]=="true",isHomepageWidgetsDisabled:e[Hme]=="true",isSportsIosCtaDismissed:e[Gme]=="true",preferredSearchMode:s,preferredSearchModels:a,welcomeBackGateImpressions:Number(e[qme])||0,shareGateImpressions:Number(e[Kme])||0,isSidebarConnectorsAdDismissed:e[Yme]=="true",isStudentReferralBannerDismissed:e[Qme]=="true",isStudentSpaceUpsellDismissed:e[Xme]=="true",studentSpaceUpsellImpressions:Number(e[Zme])||0}}function q0t(e=""){return!e&&typeof navigator<"u"&&(e=navigator.userAgent),{isChrome:iat(e),isMobile:fxe(e),isAndroid:lat(e),isIOS:cat(e),isMacOS:uat(e),isMobileSafari:dat(e),isFirefox:fat(e),isWindowsApp:M_(e),isWindowsOS:mat(e),isMetaBrowser:pat(e),isSamsungBrowser:hat(e),userAgent:e}}const vl=e=>e?.includes("perplexity.ai"),i_e=e=>e?.includes("localhost"),K0t=e=>e?.includes("pplx.dev"),l_e=e=>vl(e)&&e?.includes("preview"),c_e=e=>vl(e)&&e?.includes("staging"),u_e=e=>vl(e)&&(e?.includes("alpha")||e?.includes("beta")),d_e=e=>vl(e)&&e?.includes("testing"),Y0t=e=>vl(e)&&e?.includes("experimental"),f_e=e=>vl(e)&&e?.includes("askdev"),m_e=e=>vl(e)&&e?.startsWith("dev"),p_e=e=>vl(e)&&(e?.includes("klarna")||e?.includes("inhouse")||e?.includes("wolfram")||e?.includes("ftrouter")||e?.includes("ft")||e?.includes("brave")||e?.includes("claude2")||e?.includes("claude1-instant")||e?.includes("claude2-instant")||e?.includes("shopping")||e?.includes("turbo16k")||e?.includes("yelp")||e?.includes("mobile-flag-dev")),h_e=e=>vl(e)&&!l_e(e)&&!d_e(e)&&!u_e(e)&&!f_e(e)&&!m_e(e)&&!p_e(e)&&!Y0t(e),Q0t=e=>vl(e)&&e?.includes("sandbox"),X0t=e=>e?.includes("quokka-gamma.ts.net")||e?.endsWith(".preview.i.perplexity.ai"),Z0t=e=>{const t="unknown";try{return typeof process<"u"&&process?.env?.DD_ENV?process?.env?.DD_ENV:e?i_e(e)?"local":e==="www.perplexity.ai"?"prod":e.endsWith(".preview.i.perplexity.ai")?e.replace(/\.preview\.i\.perplexity\.ai$/,""):e.endsWith(".perplexity.ai")?e.replace(/\.perplexity\.ai$/,""):t:t}catch{return t}},J0t=e=>e.isTesting||e.isLocalhost||e.isSandbox||e.isDevBox||e.isPplxDev||e.isDevDeployment,e1t=e=>{const t={isPublicDNS:vl(e),isLocalhost:i_e(e),isPplxDev:K0t(e),isPreview:l_e(e),isStaging:c_e(e),isBeta:u_e(e),isTesting:d_e(e),isAskDev:f_e(e),isDevBox:m_e(e),isNamedDevDomain:p_e(e),isProduction:h_e(e),isSandbox:Q0t(e),isDevDeployment:X0t(e),deployName:Z0t(e),envHasDevLogins:!1};return t.envHasDevLogins=J0t(t),t},g_e=d.memo(({children:e,userAgent:t,hostname:n})=>{const r=d.useMemo(()=>({device:q0t(t),env:e1t(n)}),[t,n]);return o.jsx(fme.Provider,{value:r,children:e})});g_e.displayName="WebPlatformProvider";const t1t={},m$=I.memo(({locale:e,children:t,messages:n=t1t})=>{const r=d.useCallback(s=>{s.code!=="MISSING_TRANSLATION"&&ne.error(s)},[]);return o.jsx(sDe,{locale:e,defaultLocale:Wd,messages:n,onError:r,children:t})});m$.displayName="TranslationsProvider";const n1t=lp(Oze),y_e=I.memo(({locale:e,children:t})=>{const{translations:n,matchedLocale:r}=d.use(n1t(e));return o.jsx(m$,{locale:r,messages:n,children:t})});y_e.displayName="InnerClientTranslationsProvider";const r1t={},x_e=I.memo(({children:e,shouldSetHtmlLang:t=!0})=>{const n=d.useMemo(()=>Zl(),[]),r=d.useMemo(()=>lme(n),[n]);return t&&typeof document<"u"&&(document.documentElement.lang!==n&&(document.documentElement.lang=n),document.documentElement.dir!==r&&(document.documentElement.dir=r)),n===Wd?o.jsx(m$,{locale:n,messages:r1t,children:e}):o.jsx(d.Suspense,{fallback:null,children:o.jsx(y_e,{locale:n,children:e})})});x_e.displayName="ClientTranslationsProvider";const s1t=he(async()=>{const{DebugModeActivator:e}=await X(async()=>{const{DebugModeActivator:t}=await import("./DebugModeActivator-Bxb4cmbj.js");return{DebugModeActivator:t}},__vite__mapDeps([99,1,2,97,7,6,5]));return{default:e}},{restricted:!0}),v_e=I.memo(({host:e,userAgent:t,children:n,session:r})=>{const s=d.useMemo(()=>G0t(X9e(),{userAgent:t}),[t]);return o.jsx(x_e,{children:o.jsx(W0t,{session:r,children:o.jsx(g_e,{hostname:e,userAgent:t,children:o.jsxs(xQe,{initialLocalUserSettings:s,children:[o.jsx(s1t,{}),n]})})})})});v_e.displayName="RootProviders";function a1t(e,t){if(e?.pathname.startsWith("/sidecar"))return"sidecar";if(e?.pathname.startsWith("/mobile-sidecar"))return"mobile-sidecar";if(t)return"tab"}function o1t(){const{cachedSession:e,sessionFetchPromise:t}=$De(!0),n=Ks(),r=document.querySelector("meta[name='version']")?.getAttribute("content")||"",s=+(document.querySelector("meta[name='min-version']")?.getAttribute("content")||0),a=new URL(window.location.href);return{cachedSession:e,sessionFetchPromise:t.catch(i=>(console.error("Error getting session",i),null)),config:{env:r_e(),version:r,minVersion:s,erp:a1t(a,n)}}}const b_e=I.memo(function({children:t}){const n=Lt(),r=Ot(),[s,a]=d.useState(null),{colorScheme:i}=jr(),{session:l}=mt(),c=d.useCallback(f=>f==="/search"&&r?.get("newFrontendContextUUID")||f.startsWith("/page/new")&&r?.get("newFrontendContextUUID")||f==="/search/new",[r]),u=d.useCallback(f=>{if((f?.split("?")[0]??"")===(s?.split("?")[0]??"")||c(f))return;const p=s;a(f),Ji({name:"pageview",data:{internalReferrer:p??void 0,colorScheme:i},session:l??void 0})},[i,c,s,l]);return d.useEffect(()=>{n&&u(n)},[u,n]),o.jsx(o.Fragment,{children:t})});b_e.displayName="PageviewTemplate";const i1t="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart.mp4",l1t="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama.mp4",c1t="https://r2cdn.perplexity.ai/comet/cmp_find_emails.mp4",u1t="https://r2cdn.perplexity.ai/comet/cmp_find_creatine.mp4",d1t="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping.mp4",f1t="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage.mp4",m1t="https://r2cdn.perplexity.ai/comet/cmp_walking_route.mp4",p1t="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing.mp4",h1t="https://r2cdn.perplexity.ai/comet/grocery_cart-min.png",g1t="https://r2cdn.perplexity.ai/comet/reddit_ama-min.png",y1t="https://r2cdn.perplexity.ai/comet/find_emails-min.png",x1t="https://r2cdn.perplexity.ai/comet/find_creatine-min.png",v1t="https://r2cdn.perplexity.ai/comet/bikes_shipping-min.png",b1t="https://r2cdn.perplexity.ai/comet/summarize_webpage-min.png",_1t="https://r2cdn.perplexity.ai/comet/tour_plan-min.png",w1t="https://r2cdn.perplexity.ai/comet/v2v_browsing-min.png",C1t="https://r2cdn.perplexity.ai/comet/cmp_grocery_cart_v2.mp4",S1t="https://r2cdn.perplexity.ai/comet/cmp_reddit_ama_v3.mp4",E1t="https://r2cdn.perplexity.ai/comet/cmp_find_emails_v2.mp4",M1t="https://r2cdn.perplexity.ai/comet/cmp_find_creatine_v2.mp4",k1t="https://r2cdn.perplexity.ai/comet/cmp_bikes_shipping_v3.mp4",T1t="https://r2cdn.perplexity.ai/comet/cmp_summarize_webpage_v2.mp4",N1t="https://r2cdn.perplexity.ai/comet/cmp_walking_route_v2.mp4",j1t="https://r2cdn.perplexity.ai/comet/cmp_v2v_browsing_v2.mp4";function A1t(){const{$t:e}=Z();return d.useMemo(()=>[{videoSrc:c1t,fullVideoSrc:E1t,previewSrc:y1t,label:e({id:"U51r44Fr7z",defaultMessage:"Master Your Inbox and Calendar"})},{videoSrc:i1t,fullVideoSrc:C1t,previewSrc:h1t,label:e({id:"7rWLu0GI8D",defaultMessage:"Delegate the Basics"})},{videoSrc:f1t,fullVideoSrc:T1t,previewSrc:b1t,label:e({id:"0MeQ1Iywio",defaultMessage:"Get the Gist in Seconds"})},{videoSrc:m1t,fullVideoSrc:N1t,previewSrc:_1t,label:e({id:"zX2SKiQpSn",defaultMessage:"Automate the Clicks"})},{videoSrc:p1t,fullVideoSrc:j1t,previewSrc:w1t,label:e({id:"k3OgfsBfr6",defaultMessage:"Browse with Your Voice"})},{videoSrc:u1t,fullVideoSrc:M1t,previewSrc:x1t,label:e({id:"Fi5Bt5+lYj",defaultMessage:"Quickly Find Answers in Your History"})},{videoSrc:l1t,fullVideoSrc:S1t,previewSrc:g1t,label:e({id:"HHOfPSzTkI",defaultMessage:"Get Insights in One Click"})},{videoSrc:d1t,fullVideoSrc:k1t,previewSrc:v1t,label:e({id:"ytn1Ld8ocW",defaultMessage:"Reference Any Tab for Precise Answers"})}],[e])}function I1t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>r=>{t.forEach(s=>s(r))},t)}const $3=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Mx(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function p$(e){return"nodeType"in e}function Ya(e){var t,n;return e?Mx(e)?e:p$(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function h$(e){const{Document:t}=Ya(e);return e instanceof t}function W_(e){return Mx(e)?!1:e instanceof Ya(e).HTMLElement}function __e(e){return e instanceof Ya(e).SVGElement}function kx(e){return e?Mx(e)?e.document:p$(e)?h$(e)?e:W_(e)||__e(e)?e.ownerDocument:document:document:document}const il=$3?d.useLayoutEffect:d.useEffect;function V3(e){const t=d.useRef(e);return il(()=>{t.current=e}),d.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}function R1t(){const e=d.useRef(null),t=d.useCallback((r,s)=>{e.current=setInterval(r,s)},[]),n=d.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function X1(e,t){t===void 0&&(t=[e]);const n=d.useRef(e);return il(()=>{n.current!==e&&(n.current=e)},t),n}function H_(e,t){const n=d.useRef();return d.useMemo(()=>{const r=e(n.current);return n.current=r,r},[...t])}function iM(e){const t=V3(e),n=d.useRef(null),r=d.useCallback(s=>{s!==n.current&&t?.(s,n.current),n.current=s},[]);return[n,r]}function lM(e){const t=d.useRef();return d.useEffect(()=>{t.current=e},[e]),t.current}let sA={};function z_(e,t){return d.useMemo(()=>{if(t)return t;const n=sA[e]==null?0:sA[e]+1;return sA[e]=n,e+"-"+n},[e,t])}function w_e(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),s=1;s<n;s++)r[s-1]=arguments[s];return r.reduce((a,i)=>{const l=Object.entries(i);for(const[c,u]of l){const f=a[c];f!=null&&(a[c]=f+e*u)}return a},{...t})}}const fg=w_e(1),Z1=w_e(-1);function P1t(e){return"clientX"in e&&"clientY"in e}function W3(e){if(!e)return!1;const{KeyboardEvent:t}=Ya(e.target);return t&&e instanceof t}function L1t(e){if(!e)return!1;const{TouchEvent:t}=Ya(e.target);return t&&e instanceof t}function cM(e){if(L1t(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return P1t(e)?{x:e.clientX,y:e.clientY}:null}const zm=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[zm.Translate.toString(e),zm.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:r}=e;return t+" "+n+"ms "+r}}}),dee="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function O1t(e){return e.matches(dee)?e:e.querySelector(dee)}const D1t={display:"none"};function F1t(e){let{id:t,value:n}=e;return I.createElement("div",{id:t,style:D1t},n)}function U1t(e){let{id:t,announcement:n,ariaLiveType:r="assertive"}=e;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return I.createElement("div",{id:t,style:s,role:"status","aria-live":r,"aria-atomic":!0},n)}function B1t(){const[e,t]=d.useState("");return{announce:d.useCallback(r=>{r!=null&&t(r)},[]),announcement:e}}const C_e=d.createContext(null);function $1t(e){const t=d.useContext(C_e);d.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function V1t(){const[e]=d.useState(()=>new Set),t=d.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[d.useCallback(r=>{let{type:s,event:a}=r;e.forEach(i=>{var l;return(l=i[s])==null?void 0:l.call(i,a)})},[e]),t]}const W1t={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},H1t={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function z1t(e){let{announcements:t=H1t,container:n,hiddenTextDescribedById:r,screenReaderInstructions:s=W1t}=e;const{announce:a,announcement:i}=B1t(),l=z_("DndLiveRegion"),[c,u]=d.useState(!1);if(d.useEffect(()=>{u(!0)},[]),$1t(d.useMemo(()=>({onDragStart(m){let{active:p}=m;a(t.onDragStart({active:p}))},onDragMove(m){let{active:p,over:h}=m;t.onDragMove&&a(t.onDragMove({active:p,over:h}))},onDragOver(m){let{active:p,over:h}=m;a(t.onDragOver({active:p,over:h}))},onDragEnd(m){let{active:p,over:h}=m;a(t.onDragEnd({active:p,over:h}))},onDragCancel(m){let{active:p,over:h}=m;a(t.onDragCancel({active:p,over:h}))}}),[a,t])),!c)return null;const f=I.createElement(I.Fragment,null,I.createElement(F1t,{id:r,value:s.draggable}),I.createElement(U1t,{id:l,announcement:i}));return n?ks.createPortal(f,n):f}var us;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(us||(us={}));function uM(){}function G1t(e,t){return d.useMemo(()=>({sensor:e,options:t??{}}),[e,t])}function q1t(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return d.useMemo(()=>[...t].filter(r=>r!=null),[...t])}const ll=Object.freeze({x:0,y:0});function g$(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function K1t(e,t){const n=cM(e);if(!n)return"0 0";const r={x:(n.x-t.left)/t.width*100,y:(n.y-t.top)/t.height*100};return r.x+"% "+r.y+"%"}function y$(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return n-r}function Y1t(e,t){let{data:{value:n}}=e,{data:{value:r}}=t;return r-n}function z8(e){let{left:t,top:n,height:r,width:s}=e;return[{x:t,y:n},{x:t+s,y:n},{x:t,y:n+r},{x:t+s,y:n+r}]}function S_e(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function fee(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const vin=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=fee(t,t.left,t.top),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=g$(fee(c),s);a.push({id:l,data:{droppableContainer:i,value:u}})}}return a.sort(y$)},Q1t=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=z8(t),a=[];for(const i of r){const{id:l}=i,c=n.get(l);if(c){const u=z8(c),f=s.reduce((p,h,g)=>p+g$(u[g],h),0),m=Number((f/4).toFixed(4));a.push({id:l,data:{droppableContainer:i,value:m}})}}return a.sort(y$)};function X1t(e,t){const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),s=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),i=s-r,l=a-n;if(r<s&&n<a){const c=t.width*t.height,u=e.width*e.height,f=i*l,m=f/(c+u-f);return Number(m.toFixed(4))}return 0}const Z1t=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:r}=e;const s=[];for(const a of r){const{id:i}=a,l=n.get(i);if(l){const c=X1t(l,t);c>0&&s.push({id:i,data:{droppableContainer:a,value:c}})}}return s.sort(Y1t)};function J1t(e,t){const{top:n,left:r,bottom:s,right:a}=t;return n<=e.y&&e.y<=s&&r<=e.x&&e.x<=a}const ebt=e=>{let{droppableContainers:t,droppableRects:n,pointerCoordinates:r}=e;if(!r)return[];const s=[];for(const a of t){const{id:i}=a,l=n.get(i);if(l&&J1t(r,l)){const u=z8(l).reduce((m,p)=>m+g$(r,p),0),f=Number((u/4).toFixed(4));s.push({id:i,data:{droppableContainer:a,value:f}})}}return s.sort(y$)};function tbt(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function E_e(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ll}function nbt(e){return function(n){for(var r=arguments.length,s=new Array(r>1?r-1:0),a=1;a<r;a++)s[a-1]=arguments[a];return s.reduce((i,l)=>({...i,top:i.top+e*l.y,bottom:i.bottom+e*l.y,left:i.left+e*l.x,right:i.right+e*l.x}),{...n})}}const rbt=nbt(1);function M_e(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function sbt(e,t,n){const r=M_e(t);if(!r)return e;const{scaleX:s,scaleY:a,x:i,y:l}=r,c=e.left-i-(1-s)*parseFloat(n),u=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),f=s?e.width/s:e.width,m=a?e.height/a:e.height;return{width:f,height:m,top:u,right:c+f,bottom:u+m,left:c}}const abt={ignoreTransform:!1};function Tx(e,t){t===void 0&&(t=abt);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:u,transformOrigin:f}=Ya(e).getComputedStyle(e);u&&(n=sbt(n,u,f))}const{top:r,left:s,width:a,height:i,bottom:l,right:c}=n;return{top:r,left:s,width:a,height:i,bottom:l,right:c}}function mee(e){return Tx(e,{ignoreTransform:!0})}function obt(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function ibt(e,t){return t===void 0&&(t=Ya(e).getComputedStyle(e)),t.position==="fixed"}function lbt(e,t){t===void 0&&(t=Ya(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const a=t[s];return typeof a=="string"?n.test(a):!1})}function H3(e,t){const n=[];function r(s){if(t!=null&&n.length>=t||!s)return n;if(h$(s)&&s.scrollingElement!=null&&!n.includes(s.scrollingElement))return n.push(s.scrollingElement),n;if(!W_(s)||__e(s)||n.includes(s))return n;const a=Ya(e).getComputedStyle(s);return s!==e&&lbt(s,a)&&n.push(s),ibt(s,a)?n:r(s.parentNode)}return e?r(e):n}function k_e(e){const[t]=H3(e,1);return t??null}function aA(e){return!$3||!e?null:Mx(e)?e:p$(e)?h$(e)||e===kx(e).scrollingElement?window:W_(e)?e:null:null}function T_e(e){return Mx(e)?e.scrollX:e.scrollLeft}function N_e(e){return Mx(e)?e.scrollY:e.scrollTop}function G8(e){return{x:T_e(e),y:N_e(e)}}var bs;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(bs||(bs={}));function j_e(e){return!$3||!e?!1:e===document.scrollingElement}function A_e(e){const t={x:0,y:0},n=j_e(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},s=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,i=e.scrollTop>=r.y,l=e.scrollLeft>=r.x;return{isTop:s,isLeft:a,isBottom:i,isRight:l,maxScroll:r,minScroll:t}}const cbt={x:.2,y:.2};function ubt(e,t,n,r,s){let{top:a,left:i,right:l,bottom:c}=n;r===void 0&&(r=10),s===void 0&&(s=cbt);const{isTop:u,isBottom:f,isLeft:m,isRight:p}=A_e(e),h={x:0,y:0},g={x:0,y:0},y={height:t.height*s.y,width:t.width*s.x};return!u&&a<=t.top+y.height?(h.y=bs.Backward,g.y=r*Math.abs((t.top+y.height-a)/y.height)):!f&&c>=t.bottom-y.height&&(h.y=bs.Forward,g.y=r*Math.abs((t.bottom-y.height-c)/y.height)),!p&&l>=t.right-y.width?(h.x=bs.Forward,g.x=r*Math.abs((t.right-y.width-l)/y.width)):!m&&i<=t.left+y.width&&(h.x=bs.Backward,g.x=r*Math.abs((t.left+y.width-i)/y.width)),{direction:h,speed:g}}function dbt(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:i}=window;return{top:0,left:0,right:a,bottom:i,width:a,height:i}}const{top:t,left:n,right:r,bottom:s}=e.getBoundingClientRect();return{top:t,left:n,right:r,bottom:s,width:e.clientWidth,height:e.clientHeight}}function I_e(e){return e.reduce((t,n)=>fg(t,G8(n)),ll)}function fbt(e){return e.reduce((t,n)=>t+T_e(n),0)}function mbt(e){return e.reduce((t,n)=>t+N_e(n),0)}function R_e(e,t){if(t===void 0&&(t=Tx),!e)return;const{top:n,left:r,bottom:s,right:a}=t(e);k_e(e)&&(s<=0||a<=0||n>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const pbt=[["x",["left","right"],fbt],["y",["top","bottom"],mbt]];class x${constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=H3(n),s=I_e(r);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,i,l]of pbt)for(const c of i)Object.defineProperty(this,c,{get:()=>{const u=l(r),f=s[a]-u;return this.rect[c]+f},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class U0{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...n)})},this.target=t}add(t,n,r){var s;(s=this.target)==null||s.addEventListener(t,n,r),this.listeners.push([t,n,r])}}function hbt(e){const{EventTarget:t}=Ya(e);return e instanceof t?e:kx(e)}function oA(e,t){const n=Math.abs(e.x),r=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+r**2)>t:"x"in t&&"y"in t?n>t.x&&r>t.y:"x"in t?n>t.x:"y"in t?r>t.y:!1}var pi;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(pi||(pi={}));function pee(e){e.preventDefault()}function gbt(e){e.stopPropagation()}var wn;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(wn||(wn={}));const P_e={start:[wn.Space,wn.Enter],cancel:[wn.Esc],end:[wn.Space,wn.Enter,wn.Tab]},ybt=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case wn.Right:return{...n,x:n.x+25};case wn.Left:return{...n,x:n.x-25};case wn.Down:return{...n,y:n.y+25};case wn.Up:return{...n,y:n.y-25}}};class L_e{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new U0(kx(n)),this.windowListeners=new U0(Ya(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(pi.Resize,this.handleCancel),this.windowListeners.add(pi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(pi.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,r=t.node.current;r&&R_e(r),n(ll)}handleKeyDown(t){if(W3(t)){const{active:n,context:r,options:s}=this.props,{keyboardCodes:a=P_e,coordinateGetter:i=ybt,scrollBehavior:l="smooth"}=s,{code:c}=t;if(a.end.includes(c)){this.handleEnd(t);return}if(a.cancel.includes(c)){this.handleCancel(t);return}const{collisionRect:u}=r.current,f=u?{x:u.left,y:u.top}:ll;this.referenceCoordinates||(this.referenceCoordinates=f);const m=i(t,{active:n,context:r.current,currentCoordinates:f});if(m){const p=Z1(m,f),h={x:0,y:0},{scrollableAncestors:g}=r.current;for(const y of g){const x=t.code,{isTop:v,isRight:b,isLeft:_,isBottom:w,maxScroll:C,minScroll:S}=A_e(y),E=dbt(y),k={x:Math.min(x===wn.Right?E.right-E.width/2:E.right,Math.max(x===wn.Right?E.left:E.left+E.width/2,m.x)),y:Math.min(x===wn.Down?E.bottom-E.height/2:E.bottom,Math.max(x===wn.Down?E.top:E.top+E.height/2,m.y))},M=x===wn.Right&&!b||x===wn.Left&&!_,j=x===wn.Down&&!w||x===wn.Up&&!v;if(M&&k.x!==m.x){const R=y.scrollLeft+p.x,O=x===wn.Right&&R<=C.x||x===wn.Left&&R>=S.x;if(O&&!p.y){y.scrollTo({left:R,behavior:l});return}O?h.x=y.scrollLeft-R:h.x=x===wn.Right?y.scrollLeft-C.x:y.scrollLeft-S.x,h.x&&y.scrollBy({left:-h.x,behavior:l});break}else if(j&&k.y!==m.y){const R=y.scrollTop+p.y,O=x===wn.Down&&R<=C.y||x===wn.Up&&R>=S.y;if(O&&!p.x){y.scrollTo({top:R,behavior:l});return}O?h.y=y.scrollTop-R:h.y=x===wn.Down?y.scrollTop-C.y:y.scrollTop-S.y,h.y&&y.scrollBy({top:-h.y,behavior:l});break}}this.handleMove(t,fg(Z1(m,this.referenceCoordinates),h))}}}handleMove(t,n){const{onMove:r}=this.props;t.preventDefault(),r(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}L_e.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:r=P_e,onActivation:s}=t,{active:a}=n;const{code:i}=e.nativeEvent;if(r.start.includes(i)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),s?.({event:e.nativeEvent}),!0)}return!1}}];function hee(e){return!!(e&&"distance"in e)}function gee(e){return!!(e&&"delay"in e)}class v${constructor(t,n,r){var s;r===void 0&&(r=hbt(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:i}=a;this.props=t,this.events=n,this.document=kx(i),this.documentListeners=new U0(this.document),this.listeners=new U0(r),this.windowListeners=new U0(Ya(i)),this.initialCoordinates=(s=cM(a))!=null?s:ll,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:r}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(pi.Resize,this.handleCancel),this.windowListeners.add(pi.DragStart,pee),this.windowListeners.add(pi.VisibilityChange,this.handleCancel),this.windowListeners.add(pi.ContextMenu,pee),this.documentListeners.add(pi.Keydown,this.handleKeydown),n){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(gee(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(hee(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:r,onPending:s}=this.props;s(r,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(pi.Click,gbt,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(pi.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:r,initialCoordinates:s,props:a}=this,{onMove:i,options:{activationConstraint:l}}=a;if(!s)return;const c=(n=cM(t))!=null?n:ll,u=Z1(s,c);if(!r&&l){if(hee(l)){if(l.tolerance!=null&&oA(u,l.tolerance))return this.handleCancel();if(oA(u,l.distance))return this.handleStart()}if(gee(l)&&oA(u,l.tolerance))return this.handleCancel();this.handlePending(l,u);return}t.cancelable&&t.preventDefault(),i(c)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===wn.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const xbt={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class b$ extends v${constructor(t){const{event:n}=t,r=kx(n.target);super(t,xbt,r)}}b$.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return!n.isPrimary||n.button!==0?!1:(r?.({event:n}),!0)}}];const vbt={move:{name:"mousemove"},end:{name:"mouseup"}};var q8;(function(e){e[e.RightClick=2]="RightClick"})(q8||(q8={}));class bbt extends v${constructor(t){super(t,vbt,kx(t.event.target))}}bbt.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;return n.button===q8.RightClick?!1:(r?.({event:n}),!0)}}];const iA={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class _bt extends v${constructor(t){super(t,iA)}static setup(){return window.addEventListener(iA.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(iA.move.name,t)};function t(){}}}_bt.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:r}=t;const{touches:s}=n;return s.length>1?!1:(r?.({event:n}),!0)}}];var B0;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(B0||(B0={}));var dM;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(dM||(dM={}));function wbt(e){let{acceleration:t,activator:n=B0.Pointer,canScroll:r,draggingRect:s,enabled:a,interval:i=5,order:l=dM.TreeOrder,pointerCoordinates:c,scrollableAncestors:u,scrollableAncestorRects:f,delta:m,threshold:p}=e;const h=Sbt({delta:m,disabled:!a}),[g,y]=R1t(),x=d.useRef({x:0,y:0}),v=d.useRef({x:0,y:0}),b=d.useMemo(()=>{switch(n){case B0.Pointer:return c?{top:c.y,bottom:c.y,left:c.x,right:c.x}:null;case B0.DraggableRect:return s}},[n,s,c]),_=d.useRef(null),w=d.useCallback(()=>{const S=_.current;if(!S)return;const E=x.current.x*v.current.x,k=x.current.y*v.current.y;S.scrollBy(E,k)},[]),C=d.useMemo(()=>l===dM.TreeOrder?[...u].reverse():u,[l,u]);d.useEffect(()=>{if(!a||!u.length||!b){y();return}for(const S of C){if(r?.(S)===!1)continue;const E=u.indexOf(S),k=f[E];if(!k)continue;const{direction:M,speed:j}=ubt(S,k,b,t,p);for(const R of["x","y"])h[R][M[R]]||(j[R]=0,M[R]=0);if(j.x>0||j.y>0){y(),_.current=S,g(w,i),x.current=j,v.current=M;return}}x.current={x:0,y:0},v.current={x:0,y:0},y()},[t,w,r,y,a,i,JSON.stringify(b),JSON.stringify(h),g,u,C,f,JSON.stringify(p)])}const Cbt={x:{[bs.Backward]:!1,[bs.Forward]:!1},y:{[bs.Backward]:!1,[bs.Forward]:!1}};function Sbt(e){let{delta:t,disabled:n}=e;const r=lM(t);return H_(s=>{if(n||!r||!s)return Cbt;const a={x:Math.sign(t.x-r.x),y:Math.sign(t.y-r.y)};return{x:{[bs.Backward]:s.x[bs.Backward]||a.x===-1,[bs.Forward]:s.x[bs.Forward]||a.x===1},y:{[bs.Backward]:s.y[bs.Backward]||a.y===-1,[bs.Forward]:s.y[bs.Forward]||a.y===1}}},[n,t,r])}function Ebt(e,t){const n=t!=null?e.get(t):void 0,r=n?n.node.current:null;return H_(s=>{var a;return t==null?null:(a=r??s)!=null?a:null},[r,t])}function Mbt(e,t){return d.useMemo(()=>e.reduce((n,r)=>{const{sensor:s}=r,a=s.activators.map(i=>({eventName:i.eventName,handler:t(i.handler,r)}));return[...n,...a]},[]),[e,t])}var J1;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(J1||(J1={}));var K8;(function(e){e.Optimized="optimized"})(K8||(K8={}));const yee=new Map;function kbt(e,t){let{dragging:n,dependencies:r,config:s}=t;const[a,i]=d.useState(null),{frequency:l,measure:c,strategy:u}=s,f=d.useRef(e),m=x(),p=X1(m),h=d.useCallback(function(v){v===void 0&&(v=[]),!p.current&&i(b=>b===null?v:b.concat(v.filter(_=>!b.includes(_))))},[p]),g=d.useRef(null),y=H_(v=>{if(m&&!n)return yee;if(!v||v===yee||f.current!==e||a!=null){const b=new Map;for(let _ of e){if(!_)continue;if(a&&a.length>0&&!a.includes(_.id)&&_.rect.current){b.set(_.id,_.rect.current);continue}const w=_.node.current,C=w?new x$(c(w),w):null;_.rect.current=C,C&&b.set(_.id,C)}return b}return v},[e,a,n,m,c]);return d.useEffect(()=>{f.current=e},[e]),d.useEffect(()=>{m||h()},[n,m]),d.useEffect(()=>{a&&a.length>0&&i(null)},[JSON.stringify(a)]),d.useEffect(()=>{m||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{h(),g.current=null},l))},[l,m,h,...r]),{droppableRects:y,measureDroppableContainers:h,measuringScheduled:a!=null};function x(){switch(u){case J1.Always:return!1;case J1.BeforeDragging:return n;default:return!n}}}function _$(e,t){return H_(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Tbt(e,t){return _$(e,t)}function Nbt(e){let{callback:t,disabled:n}=e;const r=V3(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(r)},[r,n]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function z3(e){let{callback:t,disabled:n}=e;const r=V3(t),s=d.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(r)},[n]);return d.useEffect(()=>()=>s?.disconnect(),[s]),s}function jbt(e){return new x$(Tx(e),e)}function xee(e,t,n){t===void 0&&(t=jbt);const[r,s]=d.useState(null);function a(){s(c=>{if(!e)return null;if(e.isConnected===!1){var u;return(u=c??n)!=null?u:null}const f=t(e);return JSON.stringify(c)===JSON.stringify(f)?c:f})}const i=Nbt({callback(c){if(e)for(const u of c){const{type:f,target:m}=u;if(f==="childList"&&m instanceof HTMLElement&&m.contains(e)){a();break}}}}),l=z3({callback:a});return il(()=>{a(),e?(l?.observe(e),i?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),i?.disconnect())},[e]),r}function Abt(e){const t=_$(e);return E_e(e,t)}const vee=[];function Ibt(e){const t=d.useRef(e),n=H_(r=>e?r&&r!==vee&&e&&t.current&&e.parentNode===t.current.parentNode?r:H3(e):vee,[e]);return d.useEffect(()=>{t.current=e},[e]),n}function Rbt(e){const[t,n]=d.useState(null),r=d.useRef(e),s=d.useCallback(a=>{const i=aA(a.target);i&&n(l=>l?(l.set(i,G8(i)),new Map(l)):null)},[]);return d.useEffect(()=>{const a=r.current;if(e!==a){i(a);const l=e.map(c=>{const u=aA(c);return u?(u.addEventListener("scroll",s,{passive:!0}),[u,G8(u)]):null}).filter(c=>c!=null);n(l.length?new Map(l):null),r.current=e}return()=>{i(e),i(a)};function i(l){l.forEach(c=>{const u=aA(c);u?.removeEventListener("scroll",s)})}},[s,e]),d.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,i)=>fg(a,i),ll):I_e(e):ll,[e,t])}function bee(e,t){t===void 0&&(t=[]);const n=d.useRef(null);return d.useEffect(()=>{n.current=null},t),d.useEffect(()=>{const r=e!==ll;r&&!n.current&&(n.current=e),!r&&n.current&&(n.current=null)},[e]),n.current?Z1(e,n.current):ll}function Pbt(e){d.useEffect(()=>{if(!$3)return;const t=e.map(n=>{let{sensor:r}=n;return r.setup==null?void 0:r.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function Lbt(e,t){return d.useMemo(()=>e.reduce((n,r)=>{let{eventName:s,handler:a}=r;return n[s]=i=>{a(i,t)},n},{}),[e,t])}function O_e(e){return d.useMemo(()=>e?obt(e):null,[e])}const _ee=[];function Obt(e,t){t===void 0&&(t=Tx);const[n]=e,r=O_e(n?Ya(n):null),[s,a]=d.useState(_ee);function i(){a(()=>e.length?e.map(c=>j_e(c)?r:new x$(t(c),c)):_ee)}const l=z3({callback:i});return il(()=>{l?.disconnect(),i(),e.forEach(c=>l?.observe(c))},[e]),s}function D_e(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return W_(t)?t:e}function Dbt(e){let{measure:t}=e;const[n,r]=d.useState(null),s=d.useCallback(u=>{for(const{target:f}of u)if(W_(f)){r(m=>{const p=t(f);return m?{...m,width:p.width,height:p.height}:p});break}},[t]),a=z3({callback:s}),i=d.useCallback(u=>{const f=D_e(u);a?.disconnect(),f&&a?.observe(f),r(f?t(f):null)},[t,a]),[l,c]=iM(i);return d.useMemo(()=>({nodeRef:l,rect:n,setRef:c}),[n,l,c])}const Fbt=[{sensor:b$,options:{}},{sensor:L_e,options:{}}],Ubt={current:{}},v2={draggable:{measure:mee},droppable:{measure:mee,strategy:J1.WhileDragging,frequency:K8.Optimized},dragOverlay:{measure:Tx}};class $0 extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,r;return(n=(r=this.get(t))==null?void 0:r.node.current)!=null?n:void 0}}const Bbt={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new $0,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:uM},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:v2,measureDroppableContainers:uM,windowRect:null,measuringScheduled:!1},F_e={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:uM,draggableNodes:new Map,over:null,measureDroppableContainers:uM},G_=d.createContext(F_e),U_e=d.createContext(Bbt);function $bt(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new $0}}}function Vbt(e,t){switch(t.type){case us.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case us.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case us.DragEnd:case us.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case us.RegisterDroppable:{const{element:n}=t,{id:r}=n,s=new $0(e.droppable.containers);return s.set(r,n),{...e,droppable:{...e.droppable,containers:s}}}case us.SetDroppableDisabled:{const{id:n,key:r,disabled:s}=t,a=e.droppable.containers.get(n);if(!a||r!==a.key)return e;const i=new $0(e.droppable.containers);return i.set(n,{...a,disabled:s}),{...e,droppable:{...e.droppable,containers:i}}}case us.UnregisterDroppable:{const{id:n,key:r}=t,s=e.droppable.containers.get(n);if(!s||r!==s.key)return e;const a=new $0(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function Wbt(e){let{disabled:t}=e;const{active:n,activatorEvent:r,draggableNodes:s}=d.useContext(G_),a=lM(r),i=lM(n?.id);return d.useEffect(()=>{if(!t&&!r&&a&&i!=null){if(!W3(a)||document.activeElement===a.target)return;const l=s.get(i);if(!l)return;const{activatorNode:c,node:u}=l;if(!c.current&&!u.current)return;requestAnimationFrame(()=>{for(const f of[c.current,u.current]){if(!f)continue;const m=O1t(f);if(m){m.focus();break}}})}},[r,t,s,i,a]),null}function B_e(e,t){let{transform:n,...r}=t;return e!=null&&e.length?e.reduce((s,a)=>a({transform:s,...r}),n):n}function Hbt(e){return d.useMemo(()=>({draggable:{...v2.draggable,...e?.draggable},droppable:{...v2.droppable,...e?.droppable},dragOverlay:{...v2.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function zbt(e){let{activeNode:t,measure:n,initialRect:r,config:s=!0}=e;const a=d.useRef(!1),{x:i,y:l}=typeof s=="boolean"?{x:s,y:s}:s;il(()=>{if(!i&&!l||!t){a.current=!1;return}if(a.current||!r)return;const u=t?.node.current;if(!u||u.isConnected===!1)return;const f=n(u),m=E_e(f,r);if(i||(m.x=0),l||(m.y=0),a.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const p=k_e(u);p&&p.scrollBy({top:m.y,left:m.x})}},[t,i,l,r,n])}const G3=d.createContext({...ll,scaleX:1,scaleY:1});var ud;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(ud||(ud={}));const Gbt=d.memo(function(t){var n,r,s,a;let{id:i,accessibility:l,autoScroll:c=!0,children:u,sensors:f=Fbt,collisionDetection:m=Z1t,measuring:p,modifiers:h,...g}=t;const y=d.useReducer(Vbt,void 0,$bt),[x,v]=y,[b,_]=V1t(),[w,C]=d.useState(ud.Uninitialized),S=w===ud.Initialized,{draggable:{active:E,nodes:k,translate:M},droppable:{containers:j}}=x,R=E!=null?k.get(E):null,O=d.useRef({initial:null,translated:null}),D=d.useMemo(()=>{var rn;return E!=null?{id:E,data:(rn=R?.data)!=null?rn:Ubt,rect:O}:null},[E,R]),P=d.useRef(null),[A,T]=d.useState(null),[N,L]=d.useState(null),U=X1(g,Object.values(g)),$=z_("DndDescribedBy",i),V=d.useMemo(()=>j.getEnabled(),[j]),W=Hbt(p),{droppableRects:Q,measureDroppableContainers:q,measuringScheduled:H}=kbt(V,{dragging:S,dependencies:[M.x,M.y],config:W.droppable}),K=Ebt(k,E),G=d.useMemo(()=>N?cM(N):null,[N]),ee=Rn(),Y=Tbt(K,W.draggable.measure);zbt({activeNode:E!=null?k.get(E):null,config:ee.layoutShiftCompensation,initialRect:Y,measure:W.draggable.measure});const te=xee(K,W.draggable.measure,Y),se=xee(K?K.parentElement:null),ae=d.useRef({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:Q,draggableNodes:k,draggingNode:null,draggingNodeRect:null,droppableContainers:j,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),pe=j.getNodeFor((n=ae.current.over)==null?void 0:n.id),fe=Dbt({measure:W.dragOverlay.measure}),ge=(r=fe.nodeRef.current)!=null?r:K,Se=S?(s=fe.rect)!=null?s:te:null,je=!!(fe.nodeRef.current&&fe.rect),ye=Abt(je?null:te),be=O_e(ge?Ya(ge):null),Ne=Ibt(S?pe??K:null),ke=Obt(Ne),Ie=B_e(h,{transform:{x:M.x-ye.x,y:M.y-ye.y,scaleX:1,scaleY:1},activatorEvent:N,active:D,activeNodeRect:te,containerNodeRect:se,draggingNodeRect:Se,over:ae.current.over,overlayNodeRect:fe.rect,scrollableAncestors:Ne,scrollableAncestorRects:ke,windowRect:be}),Ce=G?fg(G,M):null,Ge=Rbt(Ne),tt=bee(Ge),gt=bee(Ge,[te]),Ee=fg(Ie,tt),Re=Se?rbt(Se,Ie):null,Vt=D&&Re?m({active:D,collisionRect:Re,droppableRects:Q,droppableContainers:V,pointerCoordinates:Ce}):null,pt=S_e(Vt,"id"),[Nt,Ke]=d.useState(null),He=je?Ie:fg(Ie,gt),Tt=tbt(He,(a=Nt?.rect)!=null?a:null,te),We=d.useRef(null),_t=d.useCallback((rn,at)=>{let{sensor:yt,options:wt}=at;if(P.current==null)return;const Mt=k.get(P.current);if(!Mt)return;const bt=rn.nativeEvent,_e=new yt({active:P.current,activeNode:Mt,event:bt,options:wt,context:ae,onAbort(Oe){if(!k.get(Oe))return;const{onDragAbort:Xe}=U.current,It={id:Oe};Xe?.(It),b({type:"onDragAbort",event:It})},onPending(Oe,nt,Xe,It){if(!k.get(Oe))return;const{onDragPending:zn}=U.current,Mn={id:Oe,constraint:nt,initialCoordinates:Xe,offset:It};zn?.(Mn),b({type:"onDragPending",event:Mn})},onStart(Oe){const nt=P.current;if(nt==null)return;const Xe=k.get(nt);if(!Xe)return;const{onDragStart:It}=U.current,_n={activatorEvent:bt,active:{id:nt,data:Xe.data,rect:O}};ks.unstable_batchedUpdates(()=>{It?.(_n),C(ud.Initializing),v({type:us.DragStart,initialCoordinates:Oe,active:nt}),b({type:"onDragStart",event:_n}),T(We.current),L(bt)})},onMove(Oe){v({type:us.DragMove,coordinates:Oe})},onEnd:ze(us.DragEnd),onCancel:ze(us.DragCancel)});We.current=_e;function ze(Oe){return async function(){const{active:Xe,collisions:It,over:_n,scrollAdjustedTranslate:zn}=ae.current;let Mn=null;if(Xe&&zn){const{cancelDrop:Cr}=U.current;Mn={activatorEvent:bt,active:Xe,collisions:It,delta:zn,over:_n},Oe===us.DragEnd&&typeof Cr=="function"&&await Promise.resolve(Cr(Mn))&&(Oe=us.DragCancel)}P.current=null,ks.unstable_batchedUpdates(()=>{v({type:Oe}),C(ud.Uninitialized),Ke(null),T(null),L(null),We.current=null;const Cr=Oe===us.DragEnd?"onDragEnd":"onDragCancel";if(Mn){const Xa=U.current[Cr];Xa?.(Mn),b({type:Cr,event:Mn})}})}}},[k]),Kt=d.useCallback((rn,at)=>(yt,wt)=>{const Mt=yt.nativeEvent,bt=k.get(wt);if(P.current!==null||!bt||Mt.dndKit||Mt.defaultPrevented)return;const _e={active:bt};rn(yt,at.options,_e)===!0&&(Mt.dndKit={capturedBy:at.sensor},P.current=wt,_t(yt,at))},[k,_t]),en=Mbt(f,Kt);Pbt(f),il(()=>{te&&w===ud.Initializing&&C(ud.Initialized)},[te,w]),d.useEffect(()=>{const{onDragMove:rn}=U.current,{active:at,activatorEvent:yt,collisions:wt,over:Mt}=ae.current;if(!at||!yt)return;const bt={active:at,activatorEvent:yt,collisions:wt,delta:{x:Ee.x,y:Ee.y},over:Mt};ks.unstable_batchedUpdates(()=>{rn?.(bt),b({type:"onDragMove",event:bt})})},[Ee.x,Ee.y]),d.useEffect(()=>{const{active:rn,activatorEvent:at,collisions:yt,droppableContainers:wt,scrollAdjustedTranslate:Mt}=ae.current;if(!rn||P.current==null||!at||!Mt)return;const{onDragOver:bt}=U.current,_e=wt.get(pt),ze=_e&&_e.rect.current?{id:_e.id,rect:_e.rect.current,data:_e.data,disabled:_e.disabled}:null,Oe={active:rn,activatorEvent:at,collisions:yt,delta:{x:Mt.x,y:Mt.y},over:ze};ks.unstable_batchedUpdates(()=>{Ke(ze),bt?.(Oe),b({type:"onDragOver",event:Oe})})},[pt]),il(()=>{ae.current={activatorEvent:N,active:D,activeNode:K,collisionRect:Re,collisions:Vt,droppableRects:Q,draggableNodes:k,draggingNode:ge,draggingNodeRect:Se,droppableContainers:j,over:Nt,scrollableAncestors:Ne,scrollAdjustedTranslate:Ee},O.current={initial:Se,translated:Re}},[D,K,Vt,Re,k,ge,Se,Q,j,Nt,Ne,Ee]),wbt({...ee,delta:M,draggingRect:Re,pointerCoordinates:Ce,scrollableAncestors:Ne,scrollableAncestorRects:ke});const Rt=d.useMemo(()=>({active:D,activeNode:K,activeNodeRect:te,activatorEvent:N,collisions:Vt,containerNodeRect:se,dragOverlay:fe,draggableNodes:k,droppableContainers:j,droppableRects:Q,over:Nt,measureDroppableContainers:q,scrollableAncestors:Ne,scrollableAncestorRects:ke,measuringConfiguration:W,measuringScheduled:H,windowRect:be}),[D,K,te,N,Vt,se,fe,k,j,Q,Nt,q,Ne,ke,W,H,be]),Ut=d.useMemo(()=>({activatorEvent:N,activators:en,active:D,activeNodeRect:te,ariaDescribedById:{draggable:$},dispatch:v,draggableNodes:k,over:Nt,measureDroppableContainers:q}),[N,en,D,te,v,$,k,Nt,q]);return I.createElement(C_e.Provider,{value:_},I.createElement(G_.Provider,{value:Ut},I.createElement(U_e.Provider,{value:Rt},I.createElement(G3.Provider,{value:Tt},u)),I.createElement(Wbt,{disabled:l?.restoreFocus===!1})),I.createElement(z1t,{...l,hiddenTextDescribedById:$}));function Rn(){const rn=A?.autoScrollEnabled===!1,at=typeof c=="object"?c.enabled===!1:c===!1,yt=S&&!rn&&!at;return typeof c=="object"?{...c,enabled:yt}:{enabled:yt}}}),qbt=d.createContext(null),wee="button",Kbt="Draggable";function Ybt(e){let{id:t,data:n,disabled:r=!1,attributes:s}=e;const a=z_(Kbt),{activators:i,activatorEvent:l,active:c,activeNodeRect:u,ariaDescribedById:f,draggableNodes:m,over:p}=d.useContext(G_),{role:h=wee,roleDescription:g="draggable",tabIndex:y=0}=s??{},x=c?.id===t,v=d.useContext(x?G3:qbt),[b,_]=iM(),[w,C]=iM(),S=Lbt(i,t),E=X1(n);il(()=>(m.set(t,{id:t,key:a,node:b,activatorNode:w,data:E}),()=>{const M=m.get(t);M&&M.key===a&&m.delete(t)}),[m,t]);const k=d.useMemo(()=>({role:h,tabIndex:y,"aria-disabled":r,"aria-pressed":x&&h===wee?!0:void 0,"aria-roledescription":g,"aria-describedby":f.draggable}),[r,h,y,x,g,f.draggable]);return{active:c,activatorEvent:l,activeNodeRect:u,attributes:k,isDragging:x,listeners:r?void 0:S,node:b,over:p,setNodeRef:_,setActivatorNodeRef:C,transform:v}}function $_e(){return d.useContext(U_e)}const Qbt="Droppable",Xbt={timeout:25};function Zbt(e){let{data:t,disabled:n=!1,id:r,resizeObserverConfig:s}=e;const a=z_(Qbt),{active:i,dispatch:l,over:c,measureDroppableContainers:u}=d.useContext(G_),f=d.useRef({disabled:n}),m=d.useRef(!1),p=d.useRef(null),h=d.useRef(null),{disabled:g,updateMeasurementsFor:y,timeout:x}={...Xbt,...s},v=X1(y??r),b=d.useCallback(()=>{if(!m.current){m.current=!0;return}h.current!=null&&clearTimeout(h.current),h.current=setTimeout(()=>{u(Array.isArray(v.current)?v.current:[v.current]),h.current=null},x)},[x]),_=z3({callback:b,disabled:g||!i}),w=d.useCallback((k,M)=>{_&&(M&&(_.unobserve(M),m.current=!1),k&&_.observe(k))},[_]),[C,S]=iM(w),E=X1(t);return d.useEffect(()=>{!_||!C.current||(_.disconnect(),m.current=!1,_.observe(C.current))},[C,_]),d.useEffect(()=>(l({type:us.RegisterDroppable,element:{id:r,key:a,disabled:n,node:C,rect:p,data:E}}),()=>l({type:us.UnregisterDroppable,key:a,id:r})),[r]),d.useEffect(()=>{n!==f.current.disabled&&(l({type:us.SetDroppableDisabled,id:r,key:a,disabled:n}),f.current.disabled=n)},[r,a,n,l]),{active:i,rect:p,isOver:c?.id===r,node:C,over:c,setNodeRef:S}}function Jbt(e){let{animation:t,children:n}=e;const[r,s]=d.useState(null),[a,i]=d.useState(null),l=lM(n);return!n&&!r&&l&&s(l),il(()=>{if(!a)return;const c=r?.key,u=r?.props.id;if(c==null||u==null){s(null);return}Promise.resolve(t(u,a)).then(()=>{s(null)})},[t,r,a]),I.createElement(I.Fragment,null,n,r?d.cloneElement(r,{ref:i}):null)}const e_t={x:0,y:0,scaleX:1,scaleY:1};function t_t(e){let{children:t}=e;return I.createElement(G_.Provider,{value:F_e},I.createElement(G3.Provider,{value:e_t},t))}const n_t={position:"fixed",touchAction:"none"},r_t=e=>W3(e)?"transform 250ms ease":void 0,s_t=d.forwardRef((e,t)=>{let{as:n,activatorEvent:r,adjustScale:s,children:a,className:i,rect:l,style:c,transform:u,transition:f=r_t}=e;if(!l)return null;const m=s?u:{...u,scaleX:1,scaleY:1},p={...n_t,width:l.width,height:l.height,top:l.top,left:l.left,transform:zm.Transform.toString(m),transformOrigin:s&&r?K1t(r,l):void 0,transition:typeof f=="function"?f(r):f,...c};return I.createElement(n,{className:i,style:p,ref:t},a)}),a_t=e=>t=>{let{active:n,dragOverlay:r}=t;const s={},{styles:a,className:i}=e;if(a!=null&&a.active)for(const[l,c]of Object.entries(a.active))c!==void 0&&(s[l]=n.node.style.getPropertyValue(l),n.node.style.setProperty(l,c));if(a!=null&&a.dragOverlay)for(const[l,c]of Object.entries(a.dragOverlay))c!==void 0&&r.node.style.setProperty(l,c);return i!=null&&i.active&&n.node.classList.add(i.active),i!=null&&i.dragOverlay&&r.node.classList.add(i.dragOverlay),function(){for(const[c,u]of Object.entries(s))n.node.style.setProperty(c,u);i!=null&&i.active&&n.node.classList.remove(i.active)}},o_t=e=>{let{transform:{initial:t,final:n}}=e;return[{transform:zm.Transform.toString(t)},{transform:zm.Transform.toString(n)}]},i_t={duration:250,easing:"ease",keyframes:o_t,sideEffects:a_t({styles:{active:{opacity:"0"}}})};function l_t(e){let{config:t,draggableNodes:n,droppableContainers:r,measuringConfiguration:s}=e;return V3((a,i)=>{if(t===null)return;const l=n.get(a);if(!l)return;const c=l.node.current;if(!c)return;const u=D_e(i);if(!u)return;const{transform:f}=Ya(i).getComputedStyle(i),m=M_e(f);if(!m)return;const p=typeof t=="function"?t:c_t(t);return R_e(c,s.draggable.measure),p({active:{id:a,data:l.data,node:c,rect:s.draggable.measure(c)},draggableNodes:n,dragOverlay:{node:i,rect:s.dragOverlay.measure(u)},droppableContainers:r,measuringConfiguration:s,transform:m})})}function c_t(e){const{duration:t,easing:n,sideEffects:r,keyframes:s}={...i_t,...e};return a=>{let{active:i,dragOverlay:l,transform:c,...u}=a;if(!t)return;const f={x:l.rect.left-i.rect.left,y:l.rect.top-i.rect.top},m={scaleX:c.scaleX!==1?i.rect.width*c.scaleX/l.rect.width:1,scaleY:c.scaleY!==1?i.rect.height*c.scaleY/l.rect.height:1},p={x:c.x-f.x,y:c.y-f.y,...m},h=s({...u,active:i,dragOverlay:l,transform:{initial:c,final:p}}),[g]=h,y=h[h.length-1];if(JSON.stringify(g)===JSON.stringify(y))return;const x=r?.({active:i,dragOverlay:l,...u}),v=l.node.animate(h,{duration:t,easing:n,fill:"forwards"});return new Promise(b=>{v.onfinish=()=>{x?.(),b()}})}}let Cee=0;function u_t(e){return d.useMemo(()=>{if(e!=null)return Cee++,Cee},[e])}const bin=I.memo(e=>{let{adjustScale:t=!1,children:n,dropAnimation:r,style:s,transition:a,modifiers:i,wrapperElement:l="div",className:c,zIndex:u=999}=e;const{activatorEvent:f,active:m,activeNodeRect:p,containerNodeRect:h,draggableNodes:g,droppableContainers:y,dragOverlay:x,over:v,measuringConfiguration:b,scrollableAncestors:_,scrollableAncestorRects:w,windowRect:C}=$_e(),S=d.useContext(G3),E=u_t(m?.id),k=B_e(i,{activatorEvent:f,active:m,activeNodeRect:p,containerNodeRect:h,draggingNodeRect:x.rect,over:v,overlayNodeRect:x.rect,scrollableAncestors:_,scrollableAncestorRects:w,transform:S,windowRect:C}),M=_$(p),j=l_t({config:r,draggableNodes:g,droppableContainers:y,measuringConfiguration:b}),R=M?x.setRef:void 0;return I.createElement(t_t,null,I.createElement(Jbt,{animation:j},m&&E?I.createElement(s_t,{key:E,id:m.id,ref:R,as:l,activatorEvent:f,adjustScale:t,className:c,transition:a,rect:M,style:{zIndex:u,...s},transform:k},n):null))});function w$(e,t,n){const r=e.slice();return r.splice(n<0?r.length+n:n,0,r.splice(t,1)[0]),r}function d_t(e,t){return e.reduce((n,r,s)=>{const a=t.get(r);return a&&(n[s]=a),n},Array(e.length))}function qC(e){return e!==null&&e>=0}function f_t(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function m_t(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const V_e=e=>{let{rects:t,activeIndex:n,overIndex:r,index:s}=e;const a=w$(t,r,n),i=t[s],l=a[s];return!l||!i?null:{x:l.left-i.left,y:l.top-i.top,scaleX:l.width/i.width,scaleY:l.height/i.height}},KC={scaleX:1,scaleY:1},_in=e=>{var t;let{activeIndex:n,activeNodeRect:r,index:s,rects:a,overIndex:i}=e;const l=(t=a[n])!=null?t:r;if(!l)return null;if(s===n){const u=a[i];return u?{x:0,y:n<i?u.top+u.height-(l.top+l.height):u.top-l.top,...KC}:null}const c=p_t(a,s,n);return s>n&&s<=i?{x:0,y:-l.height-c,...KC}:s<n&&s>=i?{x:0,y:l.height+c,...KC}:{x:0,y:0,...KC}};function p_t(e,t,n){const r=e[t],s=e[t-1],a=e[t+1];return r?n<t?s?r.top-(s.top+s.height):a?a.top-(r.top+r.height):0:a?a.top-(r.top+r.height):s?r.top-(s.top+s.height):0:0}const W_e="Sortable",H_e=I.createContext({activeIndex:-1,containerId:W_e,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:V_e,disabled:{draggable:!1,droppable:!1}});function h_t(e){let{children:t,id:n,items:r,strategy:s=V_e,disabled:a=!1}=e;const{active:i,dragOverlay:l,droppableRects:c,over:u,measureDroppableContainers:f}=$_e(),m=z_(W_e,n),p=l.rect!==null,h=d.useMemo(()=>r.map(S=>typeof S=="object"&&"id"in S?S.id:S),[r]),g=i!=null,y=i?h.indexOf(i.id):-1,x=u?h.indexOf(u.id):-1,v=d.useRef(h),b=!f_t(h,v.current),_=x!==-1&&y===-1||b,w=m_t(a);il(()=>{b&&g&&f(h)},[b,h,g,f]),d.useEffect(()=>{v.current=h},[h]);const C=d.useMemo(()=>({activeIndex:y,containerId:m,disabled:w,disableTransforms:_,items:h,overIndex:x,useDragOverlay:p,sortedRects:d_t(h,c),strategy:s}),[y,m,w.draggable,w.droppable,_,h,x,c,p,s]);return I.createElement(H_e.Provider,{value:C},t)}const g_t=e=>{let{id:t,items:n,activeIndex:r,overIndex:s}=e;return w$(n,r,s).indexOf(t)},y_t=e=>{let{containerId:t,isSorting:n,wasDragging:r,index:s,items:a,newIndex:i,previousItems:l,previousContainerId:c,transition:u}=e;return!u||!r||l!==a&&s===i?!1:n?!0:i!==s&&t===c},x_t={duration:200,easing:"ease"},z_e="transform",v_t=zm.Transition.toString({property:z_e,duration:0,easing:"linear"}),b_t={roleDescription:"sortable"};function __t(e){let{disabled:t,index:n,node:r,rect:s}=e;const[a,i]=d.useState(null),l=d.useRef(n);return il(()=>{if(!t&&n!==l.current&&r.current){const c=s.current;if(c){const u=Tx(r.current,{ignoreTransform:!0}),f={x:c.left-u.left,y:c.top-u.top,scaleX:c.width/u.width,scaleY:c.height/u.height};(f.x||f.y)&&i(f)}}n!==l.current&&(l.current=n)},[t,n,r,s]),d.useEffect(()=>{a&&i(null)},[a]),a}function w_t(e){let{animateLayoutChanges:t=y_t,attributes:n,disabled:r,data:s,getNewIndex:a=g_t,id:i,strategy:l,resizeObserverConfig:c,transition:u=x_t}=e;const{items:f,containerId:m,activeIndex:p,disabled:h,disableTransforms:g,sortedRects:y,overIndex:x,useDragOverlay:v,strategy:b}=d.useContext(H_e),_=C_t(r,h),w=f.indexOf(i),C=d.useMemo(()=>({sortable:{containerId:m,index:w,items:f},...s}),[m,s,w,f]),S=d.useMemo(()=>f.slice(f.indexOf(i)),[f,i]),{rect:E,node:k,isOver:M,setNodeRef:j}=Zbt({id:i,data:C,disabled:_.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...c}}),{active:R,activatorEvent:O,activeNodeRect:D,attributes:P,setNodeRef:A,listeners:T,isDragging:N,over:L,setActivatorNodeRef:U,transform:$}=Ybt({id:i,data:C,attributes:{...b_t,...n},disabled:_.draggable}),V=I1t(j,A),W=!!R,Q=W&&!g&&qC(p)&&qC(x),q=!v&&N,H=q&&Q?$:null,G=Q?H??(l??b)({rects:y,activeNodeRect:D,activeIndex:p,overIndex:x,index:w}):null,ee=qC(p)&&qC(x)?a({id:i,items:f,activeIndex:p,overIndex:x}):w,Y=R?.id,te=d.useRef({activeId:Y,items:f,newIndex:ee,containerId:m}),se=f!==te.current.items,ae=t({active:R,containerId:m,isDragging:N,isSorting:W,id:i,index:w,items:f,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:u,wasDragging:te.current.activeId!=null}),pe=__t({disabled:!ae,index:w,node:k,rect:E});return d.useEffect(()=>{W&&te.current.newIndex!==ee&&(te.current.newIndex=ee),m!==te.current.containerId&&(te.current.containerId=m),f!==te.current.items&&(te.current.items=f)},[W,ee,m,f]),d.useEffect(()=>{if(Y===te.current.activeId)return;if(Y!=null&&te.current.activeId==null){te.current.activeId=Y;return}const ge=setTimeout(()=>{te.current.activeId=Y},50);return()=>clearTimeout(ge)},[Y]),{active:R,activeIndex:p,attributes:P,data:C,rect:E,index:w,newIndex:ee,items:f,isOver:M,isSorting:W,isDragging:N,listeners:T,node:k,overIndex:x,over:L,setNodeRef:V,setActivatorNodeRef:U,setDroppableNodeRef:j,setDraggableNodeRef:A,transform:pe??G,transition:fe()};function fe(){if(pe||se&&te.current.newIndex===w)return v_t;if(!(q&&!W3(O)||!u)&&(W||ae))return zm.Transition.toString({...u,property:z_e})}}function C_t(e,t){var n,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(r=e?.droppable)!=null?r:t.droppable}}function fM(e){if(!e)return!1;const t=e.data.current;return!!(t&&"sortable"in t&&typeof t.sortable=="object"&&"containerId"in t.sortable&&"items"in t.sortable&&"index"in t.sortable)}const S_t=[wn.Down,wn.Right,wn.Up,wn.Left],win=(e,t)=>{let{context:{active:n,collisionRect:r,droppableRects:s,droppableContainers:a,over:i,scrollableAncestors:l}}=t;if(S_t.includes(e.code)){if(e.preventDefault(),!n||!r)return;const c=[];a.getEnabled().forEach(m=>{if(!m||m!=null&&m.disabled)return;const p=s.get(m.id);if(p)switch(e.code){case wn.Down:r.top<p.top&&c.push(m);break;case wn.Up:r.top>p.top&&c.push(m);break;case wn.Left:r.left>p.left&&c.push(m);break;case wn.Right:r.left<p.left&&c.push(m);break}});const u=Q1t({collisionRect:r,droppableRects:s,droppableContainers:c});let f=S_e(u,"id");if(f===i?.id&&u.length>1&&(f=u[1].id),f!=null){const m=a.get(n.id),p=a.get(f),h=p?s.get(p.id):null,g=p?.node.current;if(g&&h&&m&&p){const x=H3(g).some((S,E)=>l[E]!==S),v=G_e(m,p),b=E_t(m,p),_=x||!v?{x:0,y:0}:{x:b?r.width-h.width:0,y:b?r.height-h.height:0},w={x:h.left,y:h.top};return _.x&&_.y?w:Z1(w,_)}}}};function G_e(e,t){return!fM(e)||!fM(t)?!1:e.data.current.sortable.containerId===t.data.current.sortable.containerId}function E_t(e,t){return!fM(e)||!fM(t)||!G_e(e,t)?!1:e.data.current.sortable.index<t.data.current.sortable.index}const M_t=({enabled:e=!0}={})=>{const{data:t,isLoading:n,isError:r}=Ue({enabled:e,queryKey:YGe(),queryFn:hZe,networkMode:"always",staleTime:1/0,gcTime:1/0});return{data:t??null,isLoading:n,isError:r}};function k_t(){const{data:e,isLoading:t}=M_t(),{trackEvent:n,trackEventOnce:r}=Te(),s=k_(e??void 0),[a,i]=d.useState(!1);d.useEffect(()=>{e&&e.name!=="comet_ntp_set_default"&&e.app_location===Zc.COMET_NTP_BANNER&&(i(!0),r("ntp banner upsell viewed",{upsellName:e.name,upsellType:e.upsell_type}))},[e,r]);const l=d.useCallback(()=>{e&&(n("ntp banner upsell dismissed",{upsellName:e.name,upsellType:e.upsell_type}),i(!1),eot(e.name))},[e,n]),c=d.useCallback(()=>{e&&(n("ntp banner upsell clicked",{upsellName:e.name,upsellType:e.upsell_type}),s())},[e,n,s]),u=d.useMemo(()=>{if(e?.icon_reference&&e.icon_reference in tu)return tu[e.icon_reference]},[e]);return d.useMemo(()=>({show:a&&!!e,onDismiss:l,onClick:c,icon:u,title:e?.title,actionLabel:e?.button_text,isLoading:t,upsellName:e?.name}),[l,c,a,u,e,t])}const q_e="pplx-top-sites-cache",T_t=5*60*1e3,See=()=>{try{const e=De.getItem(q_e);if(!e)return{data:[],isValid:!1};const t=JSON.parse(e);if(t.length>0&&t[0]?.timestamp){const n=Date.now()-(t[0]?.timestamp??0)<T_t;return{data:t.map(({timestamp:s,...a})=>a),isValid:n}}return{data:t,isValid:!1}}catch{}return{data:[],isValid:!1}},N_t=e=>{De.setItem(q_e,JSON.stringify(e))};function K_e({maxUrls:e=15}={}){const t=Nn(),{data:n}=See();return Ue({queryKey:["topMostUrls"],queryFn:async()=>{const{data:r,isValid:s}=See();if(s&&r&&r.length>0)return r;const i=(await CYe({cometBrowser:t,maxUrls:e}))?.reduce((c,u)=>{const m=new URL(u.url).hostname;return(!c[m]||c[m].visitCount<u.visitCount)&&(c[m]=u),c},{})??{},l=Object.values(i);return N_t(l),l},placeholderData:n,staleTime:5*60*1e3})}const mM="comet-widgets",Gm="comet-widgets-content",C$="default-shortcut-task-id";function Y_e(e,t){return e.find(n=>n.type===t)}function j_t(e){return typeof e=="object"&&e!==null&&"version"in e&&typeof e.version=="number"&&e.version===1&&"taskId"in e&&typeof e.taskId=="string"&&"name"in e&&typeof e.name=="string"&&"query"in e&&typeof e.query=="string"}function Q_e({context:e,widgetId:t,defaultQuery:n,defaultName:r}){if(e==="widget"){const s=Nx("SHORTCUT",t);if(j_t(s))return s}return{version:1,taskId:C$,name:r??"",query:n??""}}function A_t(){if(De.getItem(Gm))return;const t=De.getItem(mM);if(t)try{const n=JSON.parse(t),r={},s=n.map(a=>{if(a.content){const{content:i,...l}=a;return r[a.id]=i,l}return{id:a.id,type:a.type}});De.setItem(mM,JSON.stringify(s)),De.setItem(Gm,JSON.stringify(r))}catch{}}function X_e(e){A_t();const t=De.getItem(mM);if(!t)return e;try{const n=JSON.parse(t);return!n||!Array.isArray(n)?e:n.every(s=>s.id&&s.type&&typeof s.type=="string")?n:(S$(e),e)}catch{return e}}function S$(e){De.setItem(mM,JSON.stringify(e))}function I_t(e){const n=X_e([]).filter(r=>r.id!==e);S$(n)}function R_t(e){const t=De.getItem(Gm);if(!t)return!1;try{return!!JSON.parse(t)[e]}catch{return!1}}function Nx(e,t){const n=De.getItem(Gm);if(!n)return null;let r=null;try{r=JSON.parse(n)[t]}catch{return null}return typeof r!="object"||r===null?null:{version:1,...r}}function Sp(e,t,n){const r=De.getItem(Gm);let s={};if(r)try{s=JSON.parse(r)}catch{s={}}s[t]=n,De.setItem(Gm,JSON.stringify(s))}function P_t(e){const t=De.getItem(Gm);if(!t)return!1;try{const n=JSON.parse(t);return e.every(s=>!!n[s])}catch{return!1}}function L_t(e){return e.startsWith("student-shortcut-")}const Eee="widget-analytics-last-sent",O_t=6*60*60*1e3;function D_t(e,t){const{trackEvent:n}=Te();d.useEffect(()=>{const r=Date.now(),s=De.getItem(Eee),a=s?parseInt(s,10):0;if(r-a<O_t)return;const i={},l=[];e.forEach(u=>{i[u.type]=(i[u.type]||0)+1,R_t(u.id)&&l.push(u.type)});const c=e.map(u=>Y_e(t,u.type));n("comet home widgets viewed",{enabledWidgets:i,widgetsWithSettings:l,widgetTypes:c.map(u=>u?.type),widgetNames:c.map(u=>u?.name)}),De.setItem(Eee,r.toString())},[e,t,n])}const Mee="assistant-promo-config-cached";function F_t(){const{value:e,loading:t}=Fu({flag:"assistant-promo-deeplinks",subjectType:"user_nextauth_id",defaultValue:{}}),[n,r]=d.useState(()=>{const a=De.getItem(Mee);return a?JSON.parse(a):{}});d.useEffect(()=>{const a=e;!t&&JSON.stringify(a)!==JSON.stringify(n)&&(r(a),De.setItem(Mee,JSON.stringify(a)))},[e,n,t]);const s=!!(n.deeplinkQueries&&n.deeplinkQueries.length>0);return d.useMemo(()=>({config:n,isLoading:t,shouldShowExploreAssistant:s}),[n,t,s])}const kee="explore-assistant-should-show-cached",b2="explore-assistant-history-cache",Z_e=10*60*1e3,lA=e=>e!=="unknown"&&!!e,U_t=()=>{try{const e=De.getItem(b2);if(!e)return null;const t=JSON.parse(e);return Date.now()-t.timestamp>Z_e?(De.removeItem(b2),null):new Set(t.domainsInHistory)}catch{return De.removeItem(b2),null}},Tee=e=>{const t={timestamp:Date.now(),domainsInHistory:Array.from(e)};De.setItem(b2,JSON.stringify(t))},Nee={url:"https://www.nytimes.com/games/wordle/index.html",query:"Take control over browser and win Wordle for me"},B_t=(e,t)=>!e||!t?`${Nee.url}#comet=${encodeURIComponent(Nee.query)}`:`${e}#comet=${encodeURIComponent(t)}`;function J_e(){const{config:e,isLoading:t}=F_t(),n=Nn(),[r,s]=d.useState(()=>{const h=De.getItem(kee);return h?JSON.parse(h):!1}),a=d.useMemo(()=>e.deeplinkQueries||[],[e]),i=d.useMemo(()=>{const h=new Set;return a.forEach(g=>{if(g.action==="HISTORY_PRESENCE"){const y=Xs(g.url);lA(y)&&h.add(y)}}),Array.from(h)},[a]),{data:l}=Ue({queryKey:["explore-assistant-history",i],queryFn:async()=>{if(!n||i.length===0)return new Set;const h=U_t();if(h!==null)return h;try{const g=await n.getHistorySummary("explore-assistant-check",i,14,1),y=new Set;return g.history_results?.forEach(x=>{const v=Xs(x?.url||"");lA(v)&&i.includes(v)&&y.add(v)}),Tee(y),y}catch{return new sg("PARSE_HISTORY_FAILED",{message:"Explore Assistant failed to parse history"}),Tee(new Set),new Set}},staleTime:Z_e,enabled:!0,retry:!1,throwOnError:!1}),c=d.useMemo(()=>l||new Set,[l]),u=d.useMemo(()=>{if(a.length===0)return null;const h=[],g=a.filter(v=>v.action==="ALWAYS");h.push(...g);const y=a.filter(v=>{if(v.action!=="HISTORY_PRESENCE")return!1;const b=Xs(v.url);return lA(b)&&c.has(b)});if(h.push(...y),h.length===0)return null;const x=Math.floor(Math.random()*h.length);return h[x]||null},[a,c]),f=d.useMemo(()=>B_t(u?.url,u?.query),[u]),m=a?.length>0;d.useEffect(()=>{m!==r&&(s(m),De.setItem(kee,JSON.stringify(m)))},[m,r]);const p=t?r:m;return d.useMemo(()=>({targetUrl:f,isLoading:t,shouldShowWidget:p}),[f,t,p])}function ewe(e){return`student-shortcut-${e}`}const jee=Array.from({length:4},(e,t)=>ewe(t)),Ep=Pe({productionMs:3e3}),$_t=Pe({productionMs:5e3}),Aee={TASK_LIMIT_EXCEEDED:"TASK_LIMIT_EXCEEDED",SHORTCUT_NAME_ALREADY_EXISTS:"SHORTCUT_NAME_ALREADY_EXISTS"},q3=async({taskId:e,headers:t,reason:n})=>{const{data:r,error:s}=await re.GET("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},timeoutMs:Pe(),numRetries:Du,headers:t});if(s)throw s;return r?.task?s0e(r.task):null};async function Cin({headers:e,reason:t,schedulerType:n}){const r="getUserAlerts";try{const a=(await re.GET("/rest/tasks/",t,{params:{query:{scheduler_type:n}},timeoutMs:Pe(),numRetries:Du,headers:e})).data?.tasks.map(s0e);return a?a.sort((i,l)=>l.createdAt.valueOf()-i.createdAt.valueOf()):[]}catch(s){return ne.log(`Error in ${r}:`,s),[]}}const V_t=async({payload:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/tasks/",t,{body:e});if(r)throw r;return n},Y8=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await re.PATCH("/rest/tasks/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},twe=async({taskId:e,reason:t})=>re.DELETE("/rest/tasks/{task_id}",t,{params:{path:{task_id:e}},timeoutMs:Ep}),Sin=async({payload:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/tasks/suggest",t,{body:e,timeoutMs:1e4});if(r)throw r;return n},W_t=async({payload:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/tasks/finance",t,{body:e});if(r)throw r;return n},H_t=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await re.PATCH("/rest/tasks/finance/{task_id}",n,{params:{path:{task_id:e}},body:t});if(s)throw s;return r},z_t=async({ticker:e,reason:t})=>{const{data:n,error:r}=await re.GET("/rest/tasks/finance/tickers/{ticker}",t,{params:{path:{ticker:e}},timeoutMs:Pe(),numRetries:Du});if(r)throw ne.error("Failed to get finance ticker",r),r;return n},Ein=async({payload:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/tasks/shortcuts",t,{body:e,timeoutMs:Ep});if(r)throw r;return n},Min=async({payload:e,reason:t})=>{const{data:n,error:r}=await re.POST("/rest/tasks/shortcuts/slug",t,{body:e,timeoutMs:$_t});if(r)throw r;return n},kin=async({taskId:e,payload:t,reason:n})=>{const{data:r,error:s}=await re.PATCH("/rest/tasks/shortcuts/{task_id}",n,{body:t,params:{path:{task_id:e}},timeoutMs:Ep});if(s)throw s;return r},Tin=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await re.DELETE("/rest/tasks/shortcuts/defaults/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:Ep});if(r)throw r;return n},Nin=async({shortcutId:e,reason:t})=>{const{data:n,error:r}=await re.GET("/rest/tasks/shortcuts/copy/{shortcut_id}",t,{params:{path:{shortcut_id:e}},timeoutMs:Ep});if(r)throw r;return n},G_t=async({copyToken:e,reason:t,headers:n})=>{const{data:r,error:s}=await re.GET("/rest/tasks/shortcuts/paste/{copy_token}",t,{params:{path:{copy_token:e}},headers:n,timeoutMs:Ep});if(s)throw s;return r},nwe=async({reason:e,headers:t})=>{const{data:n,error:r}=await re.GET("/rest/tasks/shortcuts/mentions",e,{params:{query:{order_by:"created_at"}},timeoutMs:Ep,numRetries:Du,headers:t});if(r)throw ne.error("Failed to get shortcut typeahead options",r),r;return n},K3=({reason:e,...t})=>{const n=et();return Ue({queryKey:sqe(),queryFn:async()=>{const{tasks:r}=await nwe({reason:e});return r},...t,enabled:n&&(t.enabled??!0)})},rwe="comet-shortcuts-student-status-cached";function q_t(){const e=De.getItem(rwe);if(!e)return null;try{return JSON.parse(e)}catch{return null}}function K_t(e){De.setItem(rwe,JSON.stringify(e))}function Y_t(e){return e.length>0&&P_t(e)}function Q_t(){const[e]=d.useState(q_t),[t,n]=d.useState(Y_t(jee)),{data:r,isLoading:s}=K3({reason:"student-widgets-shortcuts"}),a=d.useMemo(()=>r?.filter(p=>p.metadata?.student_only)||[],[r]),i=d.useRef(null),l=d.useMemo(()=>(!i.current&&a.length>0&&(i.current=[...a].sort(()=>Math.random()-.5).slice(0,Math.min(a.length,jee.length))),i.current||[]),[a]),{signals:c,isLoading:u}=uhe({reason:"student-widgets"}),f=d.useMemo(()=>c.isVerifiedStudent||!1,[c.isVerifiedStudent]),m=d.useMemo(()=>u&&e!==null?e:f,[u,e,f]);return d.useEffect(()=>{u||K_t(f)},[u,f]),d.useEffect(()=>{m&&r&&!s&&(l.forEach(({task_id:p,task_name:h,prompt:g},y)=>{Sp("SHORTCUT",ewe(y),{version:1,taskId:p,name:h||"",query:g||""})}),n(l.length>0))},[m,r,l,s]),{showStudentWidgets:m&&t}}const swe=I.memo(({shouldShow:e,title:t,actionLabel:n,icon:r,onDismiss:s,onClick:a})=>e?o.jsx(ve.div,{className:"-mt-md col-span-full inline-flex flex-wrap items-center justify-center",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:o.jsxs(z,{variant:"superLight",className:"gap-sm pl-xs pr-sm py-xs shadow-subtle flex cursor-pointer items-center rounded-full border",onClick:a,children:[o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(Me,{icon:kt,onClick:i=>{i.stopPropagation(),s()},size:"small",pill:!0}),o.jsx(F,{variant:"small",color:"super",className:"whitespace-nowrap",children:t||""})]}),o.jsx(me,{variant:"primary",size:"tiny",pill:!0,text:n||"",icon:r,extraCSS:"border-none"})]})}):null);swe.displayName="NtpBanner";const xf=I.memo(({onClose:e,children:t})=>o.jsx(ff,{portalTarget:document.body,children:o.jsxs("div",{className:"fixed inset-0 flex size-full flex-col items-center justify-center",children:[o.jsx(ve.div,{onClick:e,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Is,className:"bg-backdrop/70 absolute inset-0"}),o.jsx(ve.div,{initial:{y:6,opacity:0},animate:{y:0,opacity:1},exit:{y:6,opacity:0},transition:Is,className:"w-full max-w-[360px]",children:o.jsx(Wt,{className:"shadow-overlay border-none",children:t})})]})}));xf.displayName="WidgetModal";const X_t=()=>{const{trackEvent:e}=Te(),t=vt(),n="clicked spaces ad",r=d.useCallback(async a=>{a.preventDefault(),e(n,{source:"createSpaceSidebar"}),t.push("/spaces/templates")},[e,t]),s=d.useCallback(async()=>{e("space mentioned in query"),Aqe()},[e]);return d.useMemo(()=>({handleCreateSpaceSidebarAdClick:r,handleSubmitQueryWithMention:s}),[r,s])},awe=e=>{const t=[];if(!e)return t;const n=r=>{if(r.type==="mention"){const a=r.props;a.variant==="source"&&t.push(a.uuid)}"children"in r&&Array.isArray(r.children)&&r.children.forEach(n)};return n(e),t},owe=e=>{const t=[];if(!e)return{dslQuery:void 0,mentions:t};let n=0;const r=s=>{let a="";if(s.type==="text"&&"text"in s)a=s.text;else if(s.type==="linebreak")a=`
`;else{if((s.type==="link"||s.type==="autolink")&&"url"in s)return a=`[${"children"in s&&Array.isArray(s.children)&&s.children.map(r).reduce((l,c)=>(l+=c,l),"")||""}](${s.url})`,a;if(s.type==="mention"){const l=s.props;if(l.variant==="tab")return t.push({id:l.uuid,url:l.url??"",type:l.variant}),n++,a=`<attachment citation_id="${n}" />`,a;if(l.variant==="space")return t.push({id:l.uuid,url:"",type:l.variant}),a="",a;if(l.variant==="shortcut")return t.push({id:l.uuid,url:"",type:l.variant}),a=l.queryText??"",a;if(l.variant==="source")return t.push({id:l.uuid,url:"",type:"sources"}),a="",a}}return"children"in s&&Array.isArray(s.children)?s.children.map(r).reduce((i,l)=>(i+=l,i),a):a};return{dslQuery:r(e)||void 0,mentions:t}},E$=3e3;function M$({onSubmit:e,immediate:t=!0}){const n=Zbe(),r=Jbe(),s=e_e(),a=C0t(),{setUserInput:i,setHasStartedTyping:l,setStartTypingTime:c,markInputAsSubmitted:u}=V_(),f=d.useRef(!1);d.useEffect(()=>()=>{f.current&&(u(),f.current=!1)},[u,t]);const m=d.useCallback(h=>{ne.info("ask input submitted");const g=a?performance.now()-a:void 0,{dslQuery:y,mentions:x}=owe(h.json?.root);e?.({timeFromFirstType:g,...h,dslQuery:y,mentions:h.mentions??x}),t?u():f.current=!0},[t,u,e,a]),p=d.useCallback((h,g)=>{!s&&h&&l(!0),a||c(performance.now()),i(h,g)},[s,i,l,a,c]);return[n,r,d.useMemo(()=>({onChange:p,onSubmit:m,setUserInput:i}),[p,m,i])]}function iwe({handleSubmitQuery:e,isHomepage:t,contextUuid:n,disableSideBySide:r=!1}){const{isEnabled:s,sbsVariations:a,incrementTriggerCount:i}=y0t({frontendContextUUID:n,disableSideBySide:r});return d.useCallback(c=>{s?(i(),a.forEach(u=>{const{experiment_override:f,sibling_uuid:m,experiment_role:p}=u,h={experiment_role:p,sibling_uuid:m,experiment_override:f,selection_status:Ki.SELECTION_STATUS_UNSPECIFIED,execution_log:{}},g={...c,...t?{newFrontendContextUUID:n}:{existingFrontendContextUUID:n},side_by_side_metadata:h};e(g)})):e(c)},[e,s,a,i,t,n])}const ls={[ue.SEARCH]:Qe({askInputPlaceholder:{defaultMessage:"Ask anything",id:"AUouhaZgFv"},name:{defaultMessage:"Search",id:"xmcVZ0BU63"},description:{defaultMessage:"Fast answers to everyday questions",id:"5Y9Hg4e+zB"}}),[ue.RESEARCH]:Qe({askInputPlaceholder:{defaultMessage:"Research anything",id:"PITzDLgm5P"},name:{defaultMessage:"Research",id:"JEe7dVso7F"},description:{defaultMessage:"Deep research on any topic",id:"uH6f+eH2OS"}}),[ue.STUDIO]:Qe({askInputPlaceholder:{defaultMessage:"Create anything",id:"pmtrj6Tjm9"},name:{defaultMessage:"Labs",id:"ylFNoY79wa"},description:{defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}}),[ue.STUDY]:Qe({askInputPlaceholder:{defaultMessage:"Study anything",id:"UOEDdZ+cnD"},name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"}})},Fn={[le.DEFAULT]:Qe({name:{defaultMessage:"Auto",id:"NXI/XLSYwc"},description:{defaultMessage:"Adapts to each query",id:"SsTMNu/s/A"}}),[le.PRO]:Qe({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Automatically selects the best model based on the query",id:"3ZgFQznYO0"}}),[le.PPLX_PRO_UPGRADED]:Qe({name:{defaultMessage:"Pro",id:"R/eOkjWqNU"},description:{defaultMessage:"Automatically selects the most responsive model based on the query",id:"DuOz+H05Us"}}),[le.SONAR]:Qe({name:{defaultMessage:"Sonar",id:"sT9VX563o6"},description:{defaultMessage:"Perplexity's fast model",id:"pdbURewz6Q"}}),[le.GPT_4o]:Qe({name:{defaultMessage:"GPT-4o",id:"nebbHBgxX/"},description:{defaultMessage:"OpenAI's versatile model",id:"zdAw82CyOA"}}),[le.GPT_4_1]:Qe({name:{defaultMessage:"GPT-4.1",id:"+LPr/f6Fal"},description:{defaultMessage:"OpenAI's advanced model",id:"+uCLZVt7uh"}}),[le.GPT_5]:Qe({name:{defaultMessage:"GPT-5",id:"VfhmdGpVc7"},description:{defaultMessage:"OpenAI's latest model",id:"5VYr+wSh/Y"}}),[le.GPT_5_THINKING]:Qe({name:{defaultMessage:"GPT-5 Thinking",id:"/IA3KV+qFr"},description:{defaultMessage:"OpenAI's latest model with thinking",id:"r+tIMgEnyZ"}}),[le.GPT5_PRO]:Qe({name:{defaultMessage:"GPT-5 Pro",id:"GwvubEn/BR"},description:{defaultMessage:"OpenAI's latest, most powerful reasoning model",id:"3Z57hOWKDd"}}),[le.CLAUDE_2]:Qe({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[le.GEMINI_2_FLASH]:Qe({name:{defaultMessage:"Gemini 2.5 Pro",id:"hec4NYL1Ib"},description:{defaultMessage:"Google's latest model",id:"XBL8FigIeX"}}),[le.GROK]:Qe({name:{defaultMessage:"Grok 3 Beta",id:"Ybq0GDRm0J"},description:{defaultMessage:"xAI's Grok 3 model",id:"gwIHPQy1c/"}}),[le.PPLX_REASONING]:Qe({name:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},description:{defaultMessage:"Advanced problem solving",id:"4J0akc6m53"}}),[le.CLAUDE_3_7_SONNET_THINKING]:Qe({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[le.CLAUDE_4_0_OPUS]:Qe({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[le.CLAUDE_4_0_OPUS_THINKING]:Qe({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[le.CLAUDE_4_1_OPUS]:Qe({name:{defaultMessage:"Claude Opus 4.1",id:"aq+8T//8S9"},description:{defaultMessage:"Anthropic's Opus reasoning model",id:"e0FjrIe1O/"}}),[le.CLAUDE_4_1_OPUS_THINKING]:Qe({name:{defaultMessage:"Claude Opus 4.1 Thinking",id:"Vd2LxNSW/4"},description:{defaultMessage:"Anthropic's Opus reasoning model with thinking",id:"ipx+1wZCy6"}}),[le.CLAUDE_4_5_SONNET]:Qe({name:{defaultMessage:"Claude Sonnet 4.5",id:"TreRV15OSF"},description:{defaultMessage:"Anthropic's newest advanced model",id:"yVLNWskqHe"}}),[le.CLAUDE_4_5_SONNET_THINKING]:Qe({name:{defaultMessage:"Claude Sonnet 4.5 Thinking",id:"POJuSUD1gU"},description:{defaultMessage:"Anthropic's newest reasoning model",id:"MIjO2w9Cui"}}),[le.GROK_4]:Qe({name:{defaultMessage:"Grok 4",id:"+Y775fAOqr"},description:{defaultMessage:"xAI's reasoning model",id:"tYRPjba3cL"}}),[le.GROK_4_NON_THINKING]:Qe({name:{defaultMessage:"Grok 4",id:"+Y775fAOqr"},description:{defaultMessage:"xAI's advanced model",id:"av1iNKEP7e"}}),[le.O3_PRO]:Qe({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's powerful reasoning model",id:"BodLv+J6l0"}}),[le.O4_MINI]:Qe({name:{defaultMessage:"o4-mini",id:"BwwjXFHgz7"},description:{defaultMessage:"OpenAI's latest reasoning model",id:"VKonAfIZbf"}}),[le.PPLX_SONAR_INTERNAL_TESTING]:Qe({name:{defaultMessage:"Sonar Testing - Alpha",id:"2oa4bWRfNL"},description:{defaultMessage:"Sonar model alpha variant",id:"EvwN/e7vAD"}}),[le.PPLX_SONAR_INTERNAL_TESTING_V2]:Qe({name:{defaultMessage:"Sonar Testing - Beta",id:"VNsK+ZGei/"},description:{defaultMessage:"Sonar model beta variant",id:"Dzfl36DNyM"}}),[le.ALPHA]:Qe({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Fast and thorough for routine research",id:"v/MuahlVJE"}}),[le.O3_RESEARCH]:Qe({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[le.O3_PRO_RESEARCH]:Qe({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[le.CLAUDE40SONNET_RESEARCH]:Qe({name:{defaultMessage:"Claude Sonnet 4.0",id:"4UrgPEhdwq"},description:{defaultMessage:"Anthropic's advanced model",id:"b5CqfvLw4b"}}),[le.CLAUDE40SONNETTHINKING_RESEARCH]:Qe({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[le.CLAUDE40OPUS_RESEARCH]:Qe({name:{defaultMessage:"Claude Opus 4.0",id:"fwViXd5wrs"},description:{defaultMessage:"Anthropic's most advanced model",id:"4l6C+Dcw8g"}}),[le.CLAUDE40OPUSTHINKING_RESEARCH]:Qe({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[le.BETA]:Qe({name:{defaultMessage:"Best",id:"PzlMqGwwkm"},description:{defaultMessage:"Multi-step tasks with advanced troubleshooting",id:"Sf0AeuilA5"}}),[le.O3_LABS]:Qe({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[le.O3_PRO_LABS]:Qe({name:{defaultMessage:"o3-pro",id:"lyV2e5kFYG"},description:{defaultMessage:"OpenAI's most powerful reasoning model",id:"1ntkiZj5rM"}}),[le.CLAUDE40SONNETTHINKING_LABS]:Qe({name:{defaultMessage:"Claude Sonnet 4.0 Thinking",id:"a3LiLxX42G"},description:{defaultMessage:"Anthropic's reasoning model",id:"vRfGVNHXG3"}}),[le.CLAUDE40OPUSTHINKING_LABS]:Qe({name:{defaultMessage:"Claude Opus 4.0 Thinking",id:"hwrQNTIYLG"},description:{defaultMessage:"Anthropic's advanced reasoning model",id:"RwUx0WhdZb"}}),[le.STUDY]:Qe({name:{defaultMessage:"Study",id:"UTFsoN8Z1P"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}}),[oa.O3_MINI]:Qe({name:{defaultMessage:"o3-mini",id:"GdJwPgWWId"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}}),[oa.GROK2]:Qe({name:{defaultMessage:"Grok-2",id:"9X3jPx+0vk"},description:{defaultMessage:"xAI's latest model",id:"e2CghRZC7d"}}),[oa.GPT_4]:Qe({name:{defaultMessage:"GPT-4",id:"6TGiMlP7f4"},description:{defaultMessage:"OpenAI's previous generation model",id:"U3OQoJ211e"}}),[oa.CLAUDE_3_OPUS]:Qe({name:{defaultMessage:"Claude 3 Opus",id:"gLSCHWGsu1"},description:{defaultMessage:"Anthropic's previous generation model",id:"hAevdn8yGl"}}),[oa.CLAUDE_3_5_HAIKU]:Qe({name:{defaultMessage:"Claude 3.5 Haiku",id:"zEJWYa05R2"},description:{defaultMessage:"Anthropic's smaller model",id:"pQia6E7J8i"}}),[oa.GEMINI]:Qe({name:{defaultMessage:"Gemini",id:"XoqZkcqFZ/"},description:{defaultMessage:"Previous version of Google's Gemini model",id:"9C0LtRWLFh"}}),[oa.LLAMA_X_LARGE]:Qe({name:{defaultMessage:"Llama X Large",id:"2zxgnSWUyX"},description:{defaultMessage:"Meta's large Llama model",id:"+95UnVOxgQ"}}),[oa.MISTRAL]:Qe({name:{defaultMessage:"Mistral",id:"dUBSpMbbs4"},description:{defaultMessage:"Mistral AI model",id:"rYRyt8I2Zr"}}),[oa.COPILOT]:Qe({name:{defaultMessage:"Copilot",id:"b3QbnXgawD"},description:{defaultMessage:"Legacy Pro Search",id:"pg83InaW1o"}}),[oa.CLAUDE_OMBRE_EAP]:Qe({name:{defaultMessage:"Claude Ombre",id:"F12IlTx8R1"},description:{defaultMessage:"Anthropic's research preview",id:"LKt7UBXwdw"}}),[oa.CLAUDE_LACE_EAP]:Qe({name:{defaultMessage:"Claude Lace",id:"8ydOdGYWef"},description:{defaultMessage:"Anthropic's opus research preview",id:"GHW8xWfe9i"}}),[oa.R1]:Qe({name:{defaultMessage:"R1 1776",id:"e8N3MYqmIQ"},description:{defaultMessage:"Perplexity's unbiased reasoning model",id:"R5Tg1hC1um"}}),[oa.GAMMA]:Qe({name:{defaultMessage:"Gamma",id:"Wb9IyuuCJO"},description:{defaultMessage:"Fast model for routine research",id:"prWIV9FsWt"}}),[oa.O3]:Qe({name:{defaultMessage:"o3",id:"BBaBURoUEg"},description:{defaultMessage:"OpenAI's reasoning model",id:"V9t5CKw8kf"}})};function Y3({collection:e,onSubmit:t,redirectToNewThread:n=!0,csrRedirect:r=!1}){const{$t:s}=Z(),{isCopilot:a}=ir(),{submitQuery:i}=Sa(),{actions:{clearCurrentStreamId:l,clearCurrentThreadId:c}}=Ft(),u=vt(),f=qa(),{handleSubmitQueryWithMention:m}=X_t(),p=d.useMemo(()=>bo(),[]),h=d.useCallback(C=>{if(C.query.trim()==="")return;t?.(C),C.mentions&&C.mentions.some(E=>E.type==="space")&&m();const S=C.newFrontendContextUUID??bo();n&&(c(),l(),i({rawQuery:C.query,dslQuery:C.dslQuery,mentions:C.mentions,copilotOverride:a?!0:void 0,attachments:C.attachments,collection:e||null,newFrontendContextUUID:S,promptSource:C.promptSource||"user",querySource:C.querySource,timeFromFirstType:C.timeFromFirstType,shouldRedirectToBackendUUID:!r,...C.side_by_side_metadata&&{side_by_side_metadata:C.side_by_side_metadata},onThreadSlugReceived:E=>{if(!r)return;const k=window.location.pathname;k.startsWith(`${u.base}/search/`)&&Dle(k.split("/").pop())&&u.replace(`/search/${E}`,"Home ask input")}}),r&&setTimeout(()=>{u.push(`/search/new/${S}`,void 0,"Home ask input")}))},[t,n,c,l,i,a,e,r,u,m]),g=iwe({handleSubmitQuery:h,isHomepage:!0,contextUuid:p}),y=d.useRef(!1),x=d.useCallback(C=>{y.current||(y.current=!0,setTimeout(()=>y.current=!1,E$),g(C))},[g]),[v,b,_]=M$({onSubmit:x,immediate:!r}),w=s(ls[f].askInputPlaceholder);return[v,b,d.useMemo(()=>({..._,placeholder:w}),[_,w])]}const k$=le.PRO,lwe=e=>({id:e.task_id,title:e.task_name,prompt:e.prompt,searchModel:rU(e.model_preference)??k$,sources:CE(e.sources),preconfigured:e.preconfigured});function jin(e=""){return{title:"",prompt:e,searchModel:k$,sources:["web"],preconfigured:!1}}const Z_t=(e,t)=>{const{value:n,loading:r}=jt({flag:"shortcut-widget",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},Iee="shortcut-widgets-enabled-cache";function J_t(){const{variation:e,loading:t}=Z_t(!1),{value:n,loading:r}=Qs({flag:"shortcut-tasks",defaultValue:!0}),s=t||r,a=e&&n,[i,l]=d.useState(()=>{const c=De.getItem(Iee);return c?JSON.parse(c):!1});return d.useEffect(()=>{s||a!==i&&(l(a),De.setItem(Iee,JSON.stringify(a)))},[a,s,i]),i}function Ree(e,t){Sp("SHORTCUT",t,e)}const T$=d.memo(({context:e,widgetId:t,defaultName:n,defaultQuery:r,showSettings:s,setShowSettings:a})=>{const[i,l,{onSubmit:c}]=Y3({csrRedirect:!0}),[u,f]=d.useState(()=>Q_e({context:e,widgetId:t,defaultQuery:r,defaultName:n})),{data:m}=Ue({queryKey:EF(u.taskId),queryFn:()=>q3({taskId:u.taskId,reason:"ShortcutWidget"}),enabled:u.taskId!==C$});d.useEffect(()=>{m&&f(x=>{const v={...x,query:m.prompt,name:m.title};return Ree(v,t),v})},[m,t]);const p=d.useCallback(()=>{c({query:u.query,querySource:"homepage_widget",promptSource:"homepage_widget",mentions:[{type:"shortcut",id:u.taskId,url:""}]})},[c,u.query,u.taskId]),h=d.useCallback(()=>{a?.(!1)},[a]),g=d.useCallback(x=>{Ree(x,t),f(x),a?.(!1)},[a,t]),y=o.jsxs("div",{className:"flex size-full flex-col p-3",style:{zoom:e==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{color:"super",children:o.jsx(de,{icon:Sc,size:"lg"})}),o.jsxs(F,{variant:"tinyRegular",color:"light",className:"line-clamp-2 break-words",children:["/",u.name]})]}),o.jsx(F,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance break-words",children:u.query})]});return e==="thumbnail"?y:o.jsxs(o.Fragment,{children:[o.jsx(Wt,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:p,children:o.jsx(un,{hoverOnly:!0,className:"size-full",children:o.jsx(z,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:y})})}),s&&o.jsx(ewt,{shortcut:u,onDone:g,onClose:h})]})});T$.displayName="ShortcutWidget";const ewt=({shortcut:e,onDone:t,onClose:n})=>{const r="shortcut-widget-settings",{$t:s}=Z(),a=Ha(),{openModal:i}=xt(),[l,c]=d.useState(e.taskId),[u,f]=d.useState(null),{data:m}=K3({reason:r}),p=d.useCallback(x=>m?.find(v=>v.task_id===x),[m]),h=d.useMemo(()=>{const x=[];m&&m.forEach(b=>{if(!b.prompt.length)return;const _={type:"default",text:`/${b.task_name}`,tooltipText:b.prompt,rightElement:b.preconfigured?null:o.jsx(twt,{shortcut:b,focused:u===b.task_id}),onMouseEnter:()=>{f(b.task_id)},onClick:()=>{c(b.task_id)}};x.push(_)});const v={type:"default",text:s({defaultMessage:"+ Create a new shortcut",id:"91niw1hBV9"}),onMouseEnter:()=>{f("create")},onClick:()=>{i("taskShortcutModal",{source:"shortcut_widget",onCreated:b=>{c(b.id)}})}};return[...x,v]},[m,s,i,u]),g=d.useMemo(()=>{const x=p(l);return x?`/${x.task_name}`:s({defaultMessage:"Choose or create a shortcut",id:"mtB/vUwddZ"})},[p,l,s]),y=d.useCallback(()=>{const x=p(l);x&&t({...e,query:x.prompt,name:x.task_name,taskId:l})},[t,e,p,l]);return o.jsx(Ye,{children:o.jsx(xf,{onClose:n,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"entry-title-300",children:s({defaultMessage:"Shortcuts",id:"7FAwwkYilD"})}),o.jsx(F,{variant:"small",color:"light",children:s({defaultMessage:"Add a shortcut to a query that you use often.",id:"ry+zfkzET+"})})]}),o.jsx(nn,{items:h,isMobileStyle:a,children:o.jsx(me,{size:"small",chevron:!0,chevronIcon:Wn,text:g,textClassName:"font-normal",layout:"split",fullWidth:!0,variant:"border",testId:"interface-language-select"})}),o.jsx("div",{className:"flex flex-row justify-end",children:o.jsx(me,{variant:"primary",size:"small",onClick:y,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})},twt=({shortcut:e,focused:t})=>{const{openModal:n}=xt(),r=d.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:lwe(e)})},[n,e]);return o.jsx("div",{className:B("transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:o.jsx(Me,{icon:Ru,size:"tiny",variant:"common",noPadding:!0,onClick:r})})};function nwt(e="widget",t,n){if(e==="widget"){const r=Nx("ASSISTANT",t);if(r)return{version:1,query:r.query??n??""}}return{version:1,query:n??""}}function Pee(e,t="widget",n){t==="widget"&&Sp("ASSISTANT",n,e)}const N$=I.memo(({context:e="widget",defaultQuery:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const a=nwt(e,n,t),{$t:i}=Z(),[l,c]=d.useState(a.query||""),[u,f,{onSubmit:m}]=Y3({csrRedirect:!0}),p=d.useRef(gs(C=>{Pee({query:C.query,version:1},e,n)},1e3));d.useEffect(()=>{const C=p.current.flush;return()=>{C()}},[p]);const h=C=>{const S=C.target.value;c(S),p.current({query:S})},g=o.jsxs("div",{className:B("flex size-full flex-col p-3",{"p-3":e==="thumbnail"}),style:{zoom:e==="thumbnail"?.75:1},children:[o.jsx(F,{color:"super",children:o.jsx(de,{icon:Sc,size:"lg"})}),o.jsx(F,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:l||""})]}),y=d.useCallback(()=>{m({query:l,querySource:"homepage_widget",promptSource:"homepage_widget"})},[m,l]),x=d.useCallback(()=>s?.(!1),[s]),v=d.useCallback(()=>{Pee({query:l||"",version:1},e,n),s?.(!1)},[s,l,e,n]),b=d.useCallback(()=>c(i({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})),[i]),_=d.useCallback(()=>c(i({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})),[i]),w=d.useCallback(()=>c(i({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})),[i]);return e==="thumbnail"?g:o.jsxs(o.Fragment,{children:[o.jsx(Wt,{shadow:!0,className:"aspect-[1/1] w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:y,children:o.jsx(un,{hoverOnly:!0,className:"size-full",children:o.jsx(z,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:g})})}),o.jsx(Ye,{children:r&&o.jsx(xf,{onClose:x,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"entry-title-300",children:i({defaultMessage:"Assistant query",id:"FyiOOCgH1j"})}),o.jsx(F,{variant:"small",color:"light",children:i({defaultMessage:"Save assistant queries that you use often.",id:"p2agK1deUX"})})]}),o.jsx("div",{children:o.jsxs("div",{className:"text-foreground relative whitespace-pre-wrap break-words px-3 py-2 text-sm after:content-['\\\\200B']",children:[o.jsx("span",{className:"invisible",children:l||""}),o.jsx("textarea",{className:"bg-base text-foreground border-subtler placeholder:text-quiet focus:ring-subtler absolute -inset-px size-full resize-none overflow-hidden rounded-md border px-3 py-2 text-sm outline-none focus:outline-none focus:ring-1",value:l||"",onChange:h})]})}),o.jsx("div",{children:o.jsxs(F,{variant:"tinyRegular",color:"light",children:[i({defaultMessage:"For example",id:"qbXH6UvD6V"}),":"," ",o.jsx(F,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:b,children:i({defaultMessage:"what is my schedule for today",id:"5xGy4y8knY"})}),","," ",o.jsx(F,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:_,children:i({defaultMessage:"group my tabs by topic",id:"uDBqWc5SFP"})}),","," ",o.jsx(F,{as:"a",role:"button",variant:"tinyRegular",color:"super",onClick:w,children:i({defaultMessage:"search for trending news",id:"E4T4sT/ZCb"})}),"."]})}),o.jsx("div",{className:"flex flex-row justify-end",children:o.jsx(me,{variant:"primary",size:"small",onClick:v,text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});N$.displayName="AssistantWidget";var YC={exports:{}},Lee;function rwt(){return Lee||(Lee=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){if(r===null||r===!0||r===!1)return NaN;var s=Number(r);return isNaN(s)?s:s<0?Math.ceil(s):Math.floor(s)}e.exports=t.default}(YC,YC.exports)),YC.exports}var QC={exports:{}},Oee;function swt(){return Oee||(Oee=1,function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;function n(r){var s=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds()));return s.setUTCFullYear(r.getFullYear()),r.getTime()-s.getTime()}e.exports=t.default}(QC,QC.exports)),QC.exports}function awt(e,t){var n=cwt(t);return n.formatToParts?iwt(n,e):lwt(n,e)}var owt={year:0,month:1,day:2,hour:3,minute:4,second:5};function iwt(e,t){try{for(var n=e.formatToParts(t),r=[],s=0;s<n.length;s++){var a=owt[n[s].type];a>=0&&(r[a]=parseInt(n[s].value,10))}return r}catch(i){if(i instanceof RangeError)return[NaN];throw i}}function lwt(e,t){var n=e.format(t),r=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r[3],r[1],r[2],r[4],r[5],r[6]]}var cA={};function cwt(e){if(!cA[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),n=t==="06/25/2014, 00:00:00"||t==="06/25/2014 00:00:00";cA[e]=n?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return cA[e]}function cwe(e,t,n,r,s,a,i){var l=new Date(0);return l.setUTCFullYear(e,t,n),l.setUTCHours(r,s,a,i),l}var Dee=36e5,uwt=6e4,uA={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function uwe(e,t,n){var r,s;if(!e||(r=uA.timezoneZ.exec(e),r))return 0;var a;if(r=uA.timezoneHH.exec(e),r)return a=parseInt(r[1],10),Fee(a)?-(a*Dee):NaN;if(r=uA.timezoneHHMM.exec(e),r){a=parseInt(r[2],10);var i=parseInt(r[3],10);return Fee(a,i)?(s=Math.abs(a)*Dee+i*uwt,r[1]==="+"?-s:s):NaN}if(mwt(e)){t=new Date(t||Date.now());var l=n?t:dwt(t),c=Q8(l,e),u=n?c:fwt(t,c,e);return-u}return NaN}function dwt(e){return cwe(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}function Q8(e,t){var n=awt(e,t),r=cwe(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime(),s=e.getTime(),a=s%1e3;return s-=a>=0?a:1e3+a,r-s}function fwt(e,t,n){var r=e.getTime(),s=r-t,a=Q8(new Date(s),n);if(t===a)return t;s-=a-t;var i=Q8(new Date(s),n);return a===i?a:Math.max(a,i)}function Fee(e,t){return-23<=e&&e<=23&&(t==null||0<=t&&t<=59)}var Uee={};function mwt(e){if(Uee[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Uee[e]=!0,!0}catch{return!1}}var pwt=rwt();const hwt=Qo(pwt);var gwt=swt();const Bee=Qo(gwt);var ywt=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,dA=36e5,$ee=6e4,xwt=2,Ra={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:ywt};function vwt(e,t){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(e===null)return new Date(NaN);var n={},r=n.additionalDigits==null?xwt:hwt(n.additionalDigits);if(r!==2&&r!==1&&r!==0)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]")return new Date(e.getTime());if(typeof e=="number"||Object.prototype.toString.call(e)==="[object Number]")return new Date(e);if(!(typeof e=="string"||Object.prototype.toString.call(e)==="[object String]"))return new Date(NaN);var s=bwt(e),a=_wt(s.date,r),i=a.year,l=a.restDateString,c=wwt(l,i);if(isNaN(c))return new Date(NaN);if(c){var u=c.getTime(),f=0,m;if(s.time&&(f=Cwt(s.time),isNaN(f)))return new Date(NaN);if(s.timeZone||n.timeZone){if(m=uwe(s.timeZone||n.timeZone,new Date(u+f)),isNaN(m))return new Date(NaN)}else m=Bee(new Date(u+f)),m=Bee(new Date(u+f+m));return new Date(u+f+m)}else return new Date(NaN)}function bwt(e){var t={},n=Ra.dateTimePattern.exec(e),r;if(n?(t.date=n[1],r=n[3]):(n=Ra.datePattern.exec(e),n?(t.date=n[1],r=n[2]):(t.date=null,r=e)),r){var s=Ra.timeZone.exec(r);s?(t.time=r.replace(s[1],""),t.timeZone=s[1].trim()):t.time=r}return t}function _wt(e,t){var n=Ra.YYY[t],r=Ra.YYYYY[t],s;if(s=Ra.YYYY.exec(e)||r.exec(e),s){var a=s[1];return{year:parseInt(a,10),restDateString:e.slice(a.length)}}if(s=Ra.YY.exec(e)||n.exec(e),s){var i=s[1];return{year:parseInt(i,10)*100,restDateString:e.slice(i.length)}}return{year:null}}function wwt(e,t){if(t===null)return null;var n,r,s,a;if(e.length===0)return r=new Date(0),r.setUTCFullYear(t),r;if(n=Ra.MM.exec(e),n)return r=new Date(0),s=parseInt(n[1],10)-1,Wee(t,s)?(r.setUTCFullYear(t,s),r):new Date(NaN);if(n=Ra.DDD.exec(e),n){r=new Date(0);var i=parseInt(n[1],10);return Mwt(t,i)?(r.setUTCFullYear(t,0,i),r):new Date(NaN)}if(n=Ra.MMDD.exec(e),n){r=new Date(0),s=parseInt(n[1],10)-1;var l=parseInt(n[2],10);return Wee(t,s,l)?(r.setUTCFullYear(t,s,l),r):new Date(NaN)}if(n=Ra.Www.exec(e),n)return a=parseInt(n[1],10)-1,Hee(t,a)?Vee(t,a):new Date(NaN);if(n=Ra.WwwD.exec(e),n){a=parseInt(n[1],10)-1;var c=parseInt(n[2],10)-1;return Hee(t,a,c)?Vee(t,a,c):new Date(NaN)}return null}function Cwt(e){var t,n,r;if(t=Ra.HH.exec(e),t)return n=parseFloat(t[1].replace(",",".")),fA(n)?n%24*dA:NaN;if(t=Ra.HHMM.exec(e),t)return n=parseInt(t[1],10),r=parseFloat(t[2].replace(",",".")),fA(n,r)?n%24*dA+r*$ee:NaN;if(t=Ra.HHMMSS.exec(e),t){n=parseInt(t[1],10),r=parseInt(t[2],10);var s=parseFloat(t[3].replace(",","."));return fA(n,r,s)?n%24*dA+r*$ee+s*1e3:NaN}return null}function Vee(e,t,n){t=t||0,n=n||0;var r=new Date(0);r.setUTCFullYear(e,0,4);var s=r.getUTCDay()||7,a=t*7+n+1-s;return r.setUTCDate(r.getUTCDate()+a),r}var Swt=[31,28,31,30,31,30,31,31,30,31,30,31],Ewt=[31,29,31,30,31,30,31,31,30,31,30,31];function dwe(e){return e%400===0||e%4===0&&e%100!==0}function Wee(e,t,n){if(t<0||t>11)return!1;if(n!=null){if(n<1)return!1;var r=dwe(e);if(r&&n>Ewt[t]||!r&&n>Swt[t])return!1}return!0}function Mwt(e,t){if(t<1)return!1;var n=dwe(e);return!(n&&t>366||!n&&t>365)}function Hee(e,t,n){return!(t<0||t>52||n!=null&&(n<0||n>6))}function fA(e,t,n){return!(e!=null&&(e<0||e>=25)||t!=null&&(t<0||t>=60)||n!=null&&(n<0||n>=60))}function pM(e,t,n){var r=vwt(e,n),s=uwe(t,r,!0),a=new Date(r.getTime()-s),i=new Date(0);return i.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),i.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),i}const kwt=e=>({"x-loc-latitude":e.latitude.toString(),"x-loc-longitude":e.longitude.toString()}),Twt=async e=>{let t;e&&(t=kwt(e));const{data:n,error:r}=await re.GET("/rest/homepage-widgets/clock/current-location","clock-widget-current-location",{headers:t});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to fetch clock current location",cause:r});return n},fwe="clock-current-location-cache",Nwt=5*60*1e3,X8={geonameid:5391959,name:"San Francisco",latitude:37.77493,longitude:-122.41942,countrycode:"US",population:864816,timezone:"America/Los_Angeles",timezone_offset:-25200};function zee(){try{const e=De.getItem(fwe);if(e){const t=JSON.parse(e);if(t.timestamp){const n=Date.now()-t.timestamp<Nwt,{timestamp:r,...s}=t;return{data:s,isValid:n}}return{data:t,isValid:!1}}}catch{}return{data:null,isValid:!1}}function jwt(e){try{const t={...e,timestamp:Date.now()};De.setItem(fwe,JSON.stringify(t))}catch{}}function Awt(e="widget",t){if(e==="widget"){const n=Nx("ANALOG_CLOCK",t);if(n)return n.version===1?{version:2,city:n.city,useCurrentLocation:!n.city}:n}return{version:2,city:X8,useCurrentLocation:!0}}function Gee(e,t="widget",n){t==="widget"&&Sp("ANALOG_CLOCK",n,e)}const Iwt=()=>{const{location:e}=fx(),{data:t}=zee();return Ue({queryKey:["clock-current-location",e?.latitude,e?.longitude],queryFn:async()=>{const{data:n,isValid:r}=zee();if(r&&n)return n;const s=await Twt(e);return s&&jwt(s),s},staleTime:5*60*1e3,gcTime:10*60*1e3,retry:1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,placeholderData:t})};function Rwt(e,t="widget"){const n=Awt(t,e),[r,s]=d.useState(n),{data:a,isLoading:i}=Iwt(),l=d.useMemo(()=>r.useCurrentLocation&&a?{name:a.name||"Your Location",timezone:a.timezone,country:a.country}:r.city||X8,[r.useCurrentLocation,a,r.city]),c=d.useCallback(f=>{const m={...r,...f};s(m),Gee(m,t,e)},[r,t,e]),u=d.useCallback((f,m)=>{const p={...r,city:f,useCurrentLocation:f?!1:m??!0};s(p),Gee(p,t,e)},[r,t,e]);return d.useMemo(()=>({selectedCity:l,settings:r,currentLocationData:a??null,isLoading:i,updateSettings:c,saveCity:u}),[l,r,a,i,c,u])}function Pwt(){const[e,t]=d.useState(!document.hidden);return d.useEffect(()=>{const n=()=>{t(document.visibilityState==="visible")};return document.addEventListener("visibilitychange",n),()=>document.removeEventListener("visibilitychange",n)},[]),e}const Lwt=async({query:e="",limit:t=10,reason:n})=>{try{const{error:r,data:s}=await re.GET("/rest/homepage-widgets/cities-autosuggests",n,{params:{query:{query:e,limit:t}},timeoutMs:2e3});if(r)throw new we("API_CLIENTS_ERROR",{message:"Failed to get cities autosuggestions",cause:r});return s.data??[]}catch(r){return ne.error(r),[]}},Owt=({query:e="",limit:t=5,reason:n})=>Ue({queryKey:["cities",e,t],queryFn:()=>Lwt({query:e,limit:t,reason:n}),enabled:e?.trim().length>0,staleTime:5*60*1e3,gcTime:30*60*1e3}),Dwt=100,Fwt=()=>o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Me,{icon:ar,size:"small",pill:!0})}),Uwt=()=>o.jsx("div",{className:"w-sm"}),Bwt=({onClear:e})=>o.jsx(Me,{icon:kt,size:"tiny",pill:!0,onClick:e}),$wt=e=>e*6,Vwt=e=>e*6,Wwt=e=>e*30,j$=I.memo(({widgetId:e,showCity:t=!1,showSettings:n,setShowSettings:r,context:s="widget"})=>{const{$t:a}=Z(),{colorScheme:i}=jr(),l=i==="dark",c=d.useRef(!0),{isMobileUserAgent:u}=xe(),f="clock-widget-settings",{selectedCity:m,settings:p,updateSettings:h,saveCity:g}=Rwt(e,s),y=d.useRef(null),[x,v]=d.useState(m.name??""),[b,_]=d.useState(-1),[w,C]=d.useState(!1);d.useEffect(()=>{v(m.name??"")},[m.name]);const{data:S=[]}=Owt({query:x,limit:Dwt,reason:f}),E=d.useMemo(()=>S.map(q=>({query:q.name,title:q.name,description:`${q.countrycode}  ${q.timezone}`,identifier:q.geonameid.toString()})),[S]),k=d.useCallback(()=>{C(!0)},[]),M=d.useCallback(()=>{C(!1)},[]),j=d.useCallback(q=>{v(q)},[]),R=()=>{v("")},O=d.useCallback(q=>S.find(H=>H.geonameid.toString()===q),[S]),D=d.useCallback(q=>{if(!q.identifier)return;const H=O(q.identifier);H&&(h({city:H,useCurrentLocation:!1}),v(H.name),g(H,!1))},[O,h,g]),P=d.useCallback((q,H)=>{D(q)},[D]);d.useEffect(()=>{if(c.current){c.current=!1;return}},[m,s,e]);const A=Pwt(),[T,N]=d.useState(A);d.useEffect(()=>{let q;return A?q=requestAnimationFrame(()=>{N(!0)}):N(!1),()=>{cancelAnimationFrame(q)}},[A]);const L=d.useMemo(()=>o.jsxs("div",{className:B("relative size-full p-2",{"pb-7 pt-2":t}),children:[o.jsxs("div",{className:"relative mx-auto aspect-square max-h-full max-w-full",children:[s==="widget"&&o.jsx(mwe,{selectedCity:m}),o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[o.jsx("path",{fill:l?"#fff":"#000",d:"M71 130a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0v-11a.5.5 0 0 1 .5-.5M40.817 122.278a.5.5 0 1 1 .867.5l-5.5 9.527a.5.5 0 0 1-.867-.5zM100.501 122.094a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.683M19.222 100.316a.5.5 0 0 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM122.096 100.499a.5.5 0 0 1 .683-.183l9.527 5.5a.501.501 0 0 1-.5.867l-9.527-5.5a.5.5 0 0 1-.183-.684M11.5 70.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1zM141.5 70.5a.5.5 0 0 1 0 1h-11a.5.5 0 0 1 0-1zM9.513 35.499a.5.5 0 0 1 .682-.183l9.527 5.5a.5.5 0 1 1-.5.867l-9.527-5.5a.5.5 0 0 1-.182-.684M131.806 35.316a.5.5 0 1 1 .5.867l-9.527 5.5a.5.5 0 0 1-.5-.867zM105.817 9.694a.5.5 0 0 1 .867.5l-5.5 9.527a.501.501 0 0 1-.867-.5zM35.501 9.51a.5.5 0 0 1 .683.183l5.5 9.527a.5.5 0 0 1-.867.5l-5.5-9.527a.5.5 0 0 1 .184-.682M71 0a.5.5 0 0 1 .5.5v11a.5.5 0 0 1-1 0V.5A.5.5 0 0 1 71 0"}),o.jsx("path",{fill:l?"#444":"#CCC",d:"M63.997 137.633a.5.5 0 0 1 .445.549l-.314 2.984a.5.5 0 1 1-.994-.105l.313-2.983a.5.5 0 0 1 .55-.445M78.004 137.632a.5.5 0 0 1 .55.444l.313 2.984a.5.5 0 1 1-.994.105l-.314-2.984a.5.5 0 0 1 .445-.549M84.932 136.538a.5.5 0 0 1 .593.385l.623 2.934a.5.5 0 1 1-.977.208l-.624-2.934a.5.5 0 0 1 .385-.593M57.07 136.532a.5.5 0 0 1 .385.593l-.624 2.934a.5.5 0 1 1-.979-.208l.624-2.933a.5.5 0 0 1 .593-.386M91.706 134.722a.5.5 0 0 1 .63.321l.927 2.853a.5.5 0 0 1-.95.309l-.928-2.853a.5.5 0 0 1 .32-.63M49.666 135.04a.5.5 0 0 1 .951.309l-.928 2.853a.499.499 0 1 1-.95-.309zM98.25 132.208a.5.5 0 0 1 .661.254l1.221 2.74a.5.5 0 0 1-.914.407l-1.22-2.741a.5.5 0 0 1 .253-.66M43.089 132.46a.5.5 0 0 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM30.92 125.315a.5.5 0 0 1 .81.588l-1.763 2.427a.5.5 0 0 1-.81-.588zM110.383 125.203a.5.5 0 0 1 .698.11l1.764 2.428a.5.5 0 0 1-.81.587l-1.763-2.427a.5.5 0 0 1 .111-.698M115.835 120.79a.5.5 0 0 1 .706.037l2.007 2.229a.5.5 0 1 1-.743.669l-2.007-2.228a.5.5 0 0 1 .037-.707M25.464 120.825a.5.5 0 1 1 .743.669l-2.008 2.229a.5.5 0 0 1-.743-.668zM120.794 115.833a.5.5 0 0 1 .706-.037l2.229 2.007a.499.499 0 1 1-.669.743l-2.229-2.007a.5.5 0 0 1-.037-.706M20.504 115.793a.5.5 0 1 1 .669.743l-2.23 2.007a.5.5 0 0 1-.669-.743zM125.204 110.382a.5.5 0 0 1 .698-.111l2.428 1.764a.5.5 0 0 1-.588.809l-2.428-1.763a.5.5 0 0 1-.11-.699M16.098 110.27a.5.5 0 0 1 .587.809l-2.427 1.764a.5.5 0 1 1-.587-.809zM9.133 97.998a.5.5 0 0 1 .407.913l-2.741 1.221a.5.5 0 0 1-.407-.914zM132.209 98.25a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 0 1-.406.914l-2.741-1.22a.5.5 0 0 1-.253-.66M134.723 91.703a.5.5 0 0 1 .63-.321l2.854.927a.5.5 0 0 1-.31.95l-2.852-.926a.5.5 0 0 1-.322-.63M6.652 91.382a.5.5 0 0 1 .31.95l-2.854.928a.5.5 0 1 1-.308-.952zM137.133 84.545l2.934.623a.501.501 0 0 1-.208.978l-2.934-.624a.5.5 0 1 1 .208-.977M4.873 84.543a.5.5 0 1 1 .208.977l-2.935.624a.5.5 0 0 1-.208-.978zM141.167 77.872a.5.5 0 0 1-.105.995l-2.984-.313a.5.5 0 0 1 .104-.996zM3.818 77.558a.5.5 0 0 1 .105.995l-2.984.313a.5.5 0 0 1-.104-.994zM3.923 63.447a.5.5 0 0 1-.105.995l-2.983-.314a.5.5 0 1 1 .104-.994zM141.062 63.133a.5.5 0 0 1 .105.995l-2.985.313a.5.5 0 0 1-.104-.995zM2.148 55.852l2.935.624a.5.5 0 1 1-.208.979L1.94 56.83a.5.5 0 0 1 .208-.979M139.857 55.85a.5.5 0 0 1 .208.979l-2.934.624a.5.5 0 0 1-.208-.979zM3.477 49.058a.5.5 0 0 1 .631-.32l2.853.927a.5.5 0 1 1-.309.951L3.8 49.688a.5.5 0 0 1-.322-.63M137.898 48.737a.5.5 0 1 1 .309.951l-2.853.927a.5.5 0 0 1-.309-.951zM6.14 42.12a.5.5 0 0 1 .66-.253l2.74 1.22a.5.5 0 1 1-.406.914l-2.742-1.22a.5.5 0 0 1-.253-.66M135.202 41.868a.5.5 0 0 1 .407.914l-2.741 1.22a.5.5 0 1 1-.406-.913zM13.56 29.267a.5.5 0 0 1 .699-.11l2.426 1.764a.5.5 0 0 1-.587.808l-2.427-1.763a.5.5 0 0 1-.112-.699M127.742 29.156a.5.5 0 0 1 .588.809l-2.428 1.763a.5.5 0 0 1-.588-.81zM18.24 23.492a.5.5 0 0 1 .706-.037l2.23 2.008a.5.5 0 0 1-.67.743l-2.229-2.008a.5.5 0 0 1-.037-.706M123.057 23.452a.5.5 0 0 1 .67.743l-2.229 2.008a.5.5 0 0 1-.67-.743zM23.494 18.236a.5.5 0 0 1 .707.037l2.007 2.23a.5.5 0 1 1-.743.669l-2.007-2.23a.5.5 0 0 1 .036-.706M117.804 18.27a.5.5 0 0 1 .743.67l-2.007 2.229a.5.5 0 1 1-.743-.67zM112.035 13.67a.5.5 0 0 1 .809.589l-1.763 2.426a.5.5 0 0 1-.81-.587zM29.268 13.558a.5.5 0 0 1 .699.11l1.763 2.428a.5.5 0 0 1-.81.588l-1.762-2.427a.5.5 0 0 1 .11-.699M42.12 6.139a.5.5 0 0 1 .661.253l1.22 2.74a.5.5 0 0 1-.913.408l-1.22-2.741a.5.5 0 0 1 .253-.66M99.219 6.391a.5.5 0 1 1 .913.407l-1.22 2.74a.5.5 0 0 1-.914-.406zM49.061 3.476a.5.5 0 0 1 .631.32l.927 2.854a.5.5 0 0 1-.951.31l-.927-2.854a.5.5 0 0 1 .32-.63M92.31 3.795a.5.5 0 1 1 .951.308l-.927 2.854a.5.5 0 1 1-.951-.31zM56.24 1.554a.5.5 0 0 1 .593.384l.624 2.935a.5.5 0 0 1-.979.208l-.623-2.935a.5.5 0 0 1 .385-.592M85.762 1.548a.5.5 0 0 1 .384.593l-.624 2.934a.5.5 0 1 1-.977-.208l.623-2.934a.5.5 0 0 1 .593-.385M78.422.389a.5.5 0 0 1 .445.55l-.314 2.983a.5.5 0 0 1-.995-.105l.314-2.983a.5.5 0 0 1 .55-.445M63.579.388a.5.5 0 0 1 .55.445l.313 2.983a.5.5 0 0 1-.994.105L63.135.937a.5.5 0 0 1 .444-.55"})]}),o.jsx(gwe,{isDarkMode:l,isVisible:A,isVisibleInternal:T}),o.jsx(pwe,{isDarkMode:l,selectedCity:m,isVisible:A,isVisibleInternal:T}),o.jsx(hwe,{isVisible:A,isVisibleInternal:T})]}),t&&o.jsx(F,{variant:"tiny",color:"default",className:"pointer-events-none flex h-7 select-none items-center justify-center",children:o.jsx("div",{className:"truncate px-2",children:m.name})})]}),[m,s,t,l,A,T]),U=B("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":w&&E.length>0,"opacity-50":!!p.useCurrentLocation}),$=d.useMemo(()=>({LeftIconComponent:Uwt,RightIconComponent:Fwt}),[]),V=d.useCallback(()=>r?.(!1),[r]),W=d.useCallback(q=>{h({useCurrentLocation:q})},[h]),Q=d.useCallback(()=>{r?.(!1)},[r]);return s==="thumbnail"?L:o.jsxs(o.Fragment,{children:[o.jsx(Wt,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(qe,{draggable:!1,href:`/search/new?q=${a({defaultMessage:"what time is it in {location}",id:"NbMaPyS+lK"},{location:m.name})}`,className:"relative block size-full",children:L})}),o.jsx(Ye,{children:n&&o.jsx(xf,{onClose:V,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:a({defaultMessage:"Select city",id:"twZBdKGll7"})}),o.jsx(bx,{isOpen:w&&E.length>0,suggestedQueries:E,focusedIndex:b,setFocusedIndex:_,handlePasteQuery:vn,handleSubmit:P,value:x??"",components:$,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Xr,{disable1pass:!0,disabled:p.useCurrentLocation,onFocus:k,onBlur:M,className:U,pill:!1,ref:y,isMobileUserAgent:u,placeholder:a({defaultMessage:"New York, London, Tokyo...",id:"iJ+co77mIp"}),value:x,onChange:j,ClearIcon:Bwt,...x.length>0?{onClear:R}:{}})}),o.jsxs("label",{htmlFor:"use-current-location",className:"gap-sm flex w-fit flex-row items-center",children:[o.jsx(F_,{id:"use-current-location",checked:!!p.useCurrentLocation,toggleChecked:W}),o.jsx(F,{variant:"small",color:"light",children:a({defaultMessage:"Use current location",id:"Z2NE7X6xxg"})})]}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(me,{variant:"primary",size:"small",onClick:Q,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})}),mwe=d.memo(({selectedCity:e})=>{const[t,n]=d.useState(new Date);return d.useEffect(()=>{const r=setInterval(()=>{n(new Date)},1e3);return()=>clearInterval(r)},[]),o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"absolute right-[calc(25%+4px)] top-1/2 -translate-y-1/2 translate-x-1/2",children:o.jsx(F,{variant:"tinyMono",className:"scale-[70%]",children:o.jsx(aDe,{value:t,hour:"numeric",minute:"2-digit",timeZone:e.timezone})})}),o.jsx("div",{className:"absolute left-[calc(25%+4px)] top-1/2 -translate-x-1/2 -translate-y-1/2",children:o.jsx(F,{variant:"tinyMono",className:"scale-[70%] uppercase",children:o.jsx(XR,{value:t,weekday:"short",timeZone:e.timezone})})})]})});mwe.displayName="TimeDisplay";const pwe=d.memo(({isDarkMode:e,selectedCity:t,isVisible:n,isVisibleInternal:r})=>{const s=d.useCallback(()=>{const l=pM(new Date,t.timezone);return Wwt(l.getHours()+l.getMinutes()/60+l.getSeconds()/3600)},[t]),[a,i]=d.useState(s());return d.useEffect(()=>{n&&i(s())},[n,s]),o.jsx("div",{className:"absolute inset-0",style:{transformOrigin:"center",transform:`rotate(${a}deg)`},children:o.jsx("div",{style:{animation:r?"spin 43200s linear infinite":void 0},className:"absolute inset-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:o.jsx("path",{fill:e?"#fff":"#000",fillRule:"evenodd",d:"M71 24a2 2 0 0 1 2 2v38c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V26a2 2 0 0 1 2-2m0 46a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})})})}),hwe=d.memo(({isVisible:e,isVisibleInternal:t})=>{const n=d.useCallback(()=>Vwt(new Date().getSeconds()),[]),[r,s]=d.useState(n());return d.useEffect(()=>{e&&s(n())},[e,n]),o.jsx("div",{className:"absolute inset-0",style:{transformOrigin:"center",transform:`rotate(${r}deg)`},children:o.jsx("div",{style:{animation:t?"spin 60s linear infinite":void 0},className:B("absolute inset-0",{"opacity-0":!t}),children:o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:[o.jsx("path",{fill:"#FF7323",d:"M71 2a.75.75 0 0 1 .75.75v66.397a2 2 0 0 1 0 3.706v3.397a.75.75 0 0 1-1.5 0v-3.397a1.999 1.999 0 0 1 0-3.706V2.75A.75.75 0 0 1 71 2"}),o.jsx("circle",{cx:71,cy:71,r:1,fill:"#fff"})]})})})}),gwe=d.memo(({isDarkMode:e,isVisible:t,isVisibleInternal:n})=>{const r=d.useCallback(()=>$wt(new Date().getMinutes()+new Date().getSeconds()/60),[]),[s,a]=d.useState(r());return d.useEffect(()=>{t&&a(r())},[t,r]),o.jsx("div",{className:"absolute inset-0",style:{transformOrigin:"center",transform:`rotate(${s}deg)`},children:o.jsx("div",{style:{animation:n?"spin 3600s linear infinite":void 0},className:"absolute inset-0",children:o.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"100%",viewBox:"0 0 142 142",fill:"none",children:o.jsx("path",{fill:e?"#fff":"#000",fillRule:"evenodd",d:"M71 2a2 2 0 0 1 2 2v60c0 .74-.403 1.383-1 1.73v2.444A2.998 2.998 0 0 1 71 74a3 3 0 0 1-1-5.826v-2.445c-.597-.346-1-.99-1-1.729V4a2 2 0 0 1 2-2m0 68a1 1 0 1 0 0 2 1 1 0 0 0 0-2",clipRule:"evenodd"})})})})});gwe.displayName="MinuteHand";pwe.displayName="HourHand";hwe.displayName="SecondHand";j$.displayName="ClockWidget";const ywe=20,Hwt=async({options:e,reason:t})=>{const n=e?.offset??0,r=e?.limit??ywe,s=e?.topic??null,a=e?.nextToken??null,{data:i,error:l}=await re.GET("/rest/discover/feed",t,{params:{query:{limit:r,offset:n,next_token:a,topic:s&&s!=="you"?[s]:void 0}},timeoutMs:Pe(),numRetries:1,reason:t});if(l)throw new we("API_CLIENTS_ERROR",{cause:l});const c=i;if(c.status!=="success")throw new we("API_CLIENTS_ERROR",{cause:c});const u=c?.items??[],f=c?.feed_uuid??null,m=c?.next_token??null;return f&&u.length>0&&u.forEach(p=>{p.feed_uuid=f}),{threads:u,nextToken:m}};async function zwt(){try{const e="getDiscoverTopics",{error:t,data:n}=await re.GET("/rest/discover/topics",e,{timeoutMs:1500,numRetries:1});if(t)throw new we("API_CLIENTS_ERROR",{cause:t});return{userSelectedTopics:n?.user_selected_topics??ce,allTopics:n?.all_topics??ce}}catch(e){return ne.error("Failed to get discover topics.",e),{userSelectedTopics:ce,allTopics:ce}}}function Gwt(){return Ue({queryKey:Rme(),queryFn:()=>zwt(),placeholderData:Pu,refetchOnReconnect:!0,refetchOnMount:!1})}const qwt=async({topics:e,reason:t})=>{const{data:n,error:r}=await re.PUT("/rest/discover/topics",t,{body:{topics:e,return_feed:!0,return_feed_limit:ywe,return_feed_version:pl},timeoutMs:1500,numRetries:1});if(r)throw new we("API_CLIENTS_ERROR",{cause:r});const s=n,a=s.feed_items??[],i=s.feed_uuid,l=s.next_token??null;return i&&a?.length>0&&a.forEach(c=>{c.feed_uuid=i}),{status:"success",feedItems:a,nextToken:l}},Ain=async({contextUUID:e,reason:t})=>{const n=await re.PUT("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Iin=async({contextUUID:e,reason:t})=>{const n=await re.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/like",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Rin=async({contextUUID:e,reason:t})=>{const n=await re.PUT("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Pin=async({contextUUID:e,reason:t})=>{const n=await re.DELETE("/rest/discover/feed-items/{context_uuid}/feedback/dislike",t,{params:{path:{context_uuid:e}}});if(n.error)throw n.error},Kwt=20,Ywt=({pageParam:e,topic:t,reason:n})=>{const r=e.pageNum*Kwt;return Hwt({options:{offset:r,topic:t,nextToken:e.nextToken},reason:n})},Qwt=({initialPage:e,topic:t,reason:n,refetchInterval:r})=>{const s=Lu({queryKey:qc(t),queryFn:({pageParam:m})=>Ywt({pageParam:m,topic:t,reason:n}),refetchOnReconnect:"always",refetchOnMount:!1,initialPageParam:{pageNum:e},refetchInterval:r,getNextPageParam:(m,p,h)=>{if(!(m&&!m.threads?.[0]?.has_next_page))return{pageNum:h.pageNum+1,nextToken:m.nextToken}}}),a=s.data?.pages??[],i=(()=>{const m=new Set;return a.flatMap(p=>p.threads).filter(p=>m.has(p.uuid)?!1:(m.add(p.uuid),!0))})(),l=a[a.length-1]?.threads?.[0]?.has_next_page??!1,c=s.data?.pageParams?.length??1,u=l?c+1:null,f=d.useMemo(()=>({currentPage:c,hasNextPage:l,hasPreviousPage:c>1,getNextPage:()=>s.fetchNextPage(),getPreviousPage:()=>s.fetchPreviousPage()}),[l,c,s]);return d.useMemo(()=>({...s,nextPage:u,paginationInfo:f,threads:i}),[u,f,s,i])},Xwt=0,Zwt=({topic:e,reason:t,refetchInterval:n})=>{const{threads:r,paginationInfo:s,isLoading:a,isFetching:i,fetchStatus:l,nextPage:c}=Qwt({initialPage:Xwt,topic:e,reason:t,refetchInterval:n}),u=a||l==="fetching",f=!r?.length&&!a&&l==="idle",m=d.useCallback(()=>{!s.hasNextPage||i||s.getNextPage()},[i,s]);return d.useMemo(()=>({threads:r,paginationInfo:s,isLoading:a,fetchStatus:l,nextPage:c,showLoadingState:u,showEmptyState:f,fetchNextPage:m}),[r,s,a,l,c,u,f,m])},Z8=I.memo(({variant:e,className:t,colorVariant:n,text:r,lines:s=1})=>{const i=d.useMemo(()=>({height:"50%"}),[.5]);return o.jsxs("div",{className:`relative grid items-center ${t}`,children:[o.jsx("div",{className:"col-start-1 row-start-1 flex size-full flex-col",children:Array.from({length:s}).map((l,c)=>o.jsx("div",{className:"flex h-full items-center",children:o.jsx(z,{className:B("rounded-full",{"w-full":c!==s-1||s===1,"w-1/2":c===s-1&&s>1}),variant:n??"subtle",style:i})},c))}),o.jsx(F,{variant:e,color:"light",className:"pointer-events-none col-start-1 row-start-1 opacity-0",children:Array.from({length:s}).map((l,c)=>o.jsxs(I.Fragment,{children:[r??o.jsx(o.Fragment,{children:""}),c<s-1&&o.jsx("br",{})]},c))})]})});Z8.displayName="TextBlockSkeleton";const A$=I.memo(({showSettings:e,setShowSettings:t,context:n="widget"})=>{const{$t:r}=Z(),s=Z(),[a,i]=d.useState(!1),{threads:l}=Zwt({topic:"top",reason:"Discover widget",refetchInterval:n==="thumbnail"?void 0:1e3*60*5}),c=l[0]?.updated_datetime?.endsWith("Z")?l[0]?.updated_datetime:`${l[0]?.updated_datetime}Z`,u=l[0]?.featured_images?.[0]?.thumbnail;d.useEffect(()=>{i(!1)},[u]);const f=l[0]?o.jsx("div",{className:B("size-full transform-gpu rounded-2xl"),children:o.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0",style:{zoom:n==="thumbnail"?.75:1},children:[u&&!a&&o.jsxs(o.Fragment,{children:[o.jsx("img",{src:u,alt:"Discover",className:"absolute inset-0 size-full object-cover",onError:()=>{i(!0)}},u),o.jsx("div",{className:"absolute inset-0 bg-black/50"}),o.jsx("div",{className:"absolute inset-0 bg-black",style:{maskImage:"linear-gradient(to bottom, transparent 50%, black)"}})]}),o.jsxs("div",{className:B("absolute inset-0 flex flex-col items-start justify-end gap-1 p-2",{"drop-shadow-md":!a}),children:[o.jsx(F,{variant:"micro",color:a?"default":"white",className:"opacity-60",children:x_(s,new Date(c))}),o.jsx(F,{variant:"smallBold",color:a?"default":"white",className:"w-full break-words",children:l[0].title})]})]})}):o.jsx("div",{className:"bg-subtler size-full",children:o.jsxs("div",{className:"absolute inset-0 flex w-full flex-col items-start justify-end gap-1 p-2",children:[o.jsx(Z8,{variant:"micro",colorVariant:"subtle",className:"w-10 opacity-75 dark:opacity-60"}),o.jsx(Z8,{variant:"smallBold",colorVariant:"subtle",lines:3,className:"w-full"})]})}),m=d.useCallback(()=>t?.(!1),[t]);return n==="thumbnail"?f:o.jsxs(o.Fragment,{children:[o.jsx(Wt,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(qe,{href:`/page/${l[0]?.slug}`,className:"block",children:o.jsx("div",{className:"absolute inset-0 select-none",children:f})})}),o.jsx(Ye,{children:e&&o.jsx(xf,{onClose:m,children:o.jsx("div",{className:"flex flex-col gap-3 px-5 py-4",children:o.jsx(F,{variant:"entry-title-300",children:r({defaultMessage:"Discover settings",id:"Kf1JUdlcaI"})})})})})]})});A$.displayName="DiscoverWidget";const Jwt=()=>{const e=d.useRef(null),t=d.useRef(null),n=d.useCallback((i,l)=>{if(e.current=i,!i||(i.volume=.5,!l))return;const c=i.play();c!==void 0&&(t.current=c,c.catch(()=>{}).finally(()=>{t.current===c&&(t.current=null)}))},[]),r=d.useCallback(()=>{const i=e.current;if(!i)return;const l=i.play();l!==void 0&&(t.current=l,l.catch(()=>{}).finally(()=>{t.current===l&&(t.current=null)}))},[]),s=d.useCallback(()=>{const i=e.current;i&&(t.current?t.current.catch(()=>{}).finally(()=>{i.pause()}):i.pause())},[]),a=d.useCallback(i=>{i?r():s()},[r,s]);return{videoRef:e,setVideoRef:n,playVideo:r,pauseVideo:s,togglePlayback:a}},eCt="https://r2cdn.perplexity.ai/comet/explore-assistant-min.mp4",qee="https://r2cdn.perplexity.ai/comet/eplore-assistant-stop-min.png",tCt=({context:e="widget"})=>{const{targetUrl:t,shouldShowWidget:n}=J_e(),{trackEvent:r}=Te(),{setVideoRef:s,togglePlayback:a}=Jwt(),i=d.useCallback(m=>{s(m,!1)},[s]),l=d.useCallback(()=>{if(!t)return;const m=Xs(t);r("explore assistant clicked",{domain:m})},[t,r]);if(d.useEffect(()=>{r("explore assistant shown")},[r]),!n||!t)return null;const c=()=>{e==="widget"&&a(!0)},u=()=>{e==="widget"&&a(!1)},f=o.jsx("div",{className:B("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-subtle":e==="widget"}),onMouseEnter:c,onMouseLeave:u,children:o.jsxs("div",{className:"group relative size-full",children:[e==="widget"?o.jsx("video",{ref:i,src:eCt,poster:qee,className:"pointer-events-none absolute inset-0 size-full object-cover",autoPlay:!1,loop:!0,muted:!0,playsInline:!0}):o.jsx("img",{src:qee,alt:"Explore Assistant",className:"pointer-events-none absolute inset-0 size-full object-cover"}),o.jsx("div",{className:"pointer-events-none absolute bottom-0 h-[45px] w-full bg-gradient-to-b from-transparent to-[#02233E]"}),o.jsx("div",{className:"absolute inset-x-0 bottom-2 flex justify-center",children:o.jsx(F,{variant:"tinyMono",color:"white",className:"!text-2xs uppercase drop-shadow-lg",children:e==="widget"?"Try Assistant In Action":"Try Assistant"})})]})});return e==="thumbnail"?f:o.jsx(Wt,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:o.jsx(qe,{href:t,target:"_blank",rel:"noopener",className:"block size-full cursor-pointer",draggable:!1,onClick:l,children:f})})},xwe=I.memo(tCt),vwe=e=>{switch(e){case"YELLOW":return"bg-[#fef3c7] dark:bg-[#422006]";case"BLUE":return"bg-[#dbeafe] dark:bg-[#172554]";case"RED":return"bg-[#fee2e2] dark:bg-[#450a0a]";case"GREEN":return"bg-[#d1fae5] dark:bg-[#052e16]";default:return"bg-[#fef3c7] dark:bg-[#422006]"}},nCt=e=>{switch(e){case"YELLOW":return"placeholder-[#eab308] dark:placeholder-[#a16207]";case"BLUE":return"placeholder-[#3b82f6] dark:placeholder-[#1d4ed8]";case"RED":return"placeholder-[#ef4444] dark:placeholder-[#b91c1c]";case"GREEN":return"placeholder-[#22c55e] dark:placeholder-[#15803d]";default:return"placeholder-[#eab308] dark:placeholder-[#a16207]"}},Kee=e=>{switch(e){case"YELLOW":return"text-[#a16207] dark:text-[#fef08a]";case"BLUE":return"text-[#1d4ed8] dark:text-[#bfdbfe]";case"RED":return"text-[#b91c1c] dark:text-[#fecaca]";case"GREEN":return"text-[#15803d] dark:text-[#bbf7d0]";default:return"text-[#a16207] dark:text-[#fef08a]"}};function rCt(e="widget",t,n){if(e==="widget"){const r=Nx("STICKY",t);if(r)return{text:r.text??n??"",color:r.color??"YELLOW"}}return{text:n??"",color:"YELLOW"}}function sCt(e,t="widget",n){t==="widget"&&Sp("STICKY",n,{version:1,text:e.text,color:e.color})}const I$=I.memo(({context:e="widget",defaultText:t,widgetId:n,showSettings:r,setShowSettings:s})=>{const{$t:a}=Z(),i=rCt(e,n,t),[l,c]=d.useState(()=>i.text),[u,f]=d.useState(()=>i.color),m=d.useRef(Fy(w=>{sCt({...w},e,n)},200));d.useEffect(()=>{const w=m.current.flush;return()=>{w()}},[m]);const p=w=>{const C=w.target.value;c(C),m.current({text:C,color:u})},h=["YELLOW","BLUE","RED","GREEN"],g=a({defaultMessage:"Milk",id:"2ohof39xN+"}),y=a({defaultMessage:"Eggs",id:"rMvDs1YU+D"}),x=a({defaultMessage:"Bread",id:"0n2Uqvcq4W"}),v=o.jsxs("div",{className:"relative flex size-full cursor-pointer flex-col",style:{zoom:e==="thumbnail"?.75:1},children:[o.jsx("div",{className:B("absolute inset-0",vwe(u))}),e==="widget"?o.jsx("textarea",{className:B("scrollbar-none absolute inset-0 z-[1] resize-none bg-transparent p-4 font-sans text-sm focus:outline-none",nCt(u),Kee(u)),autoCorrect:"false",placeholder:a({defaultMessage:"New note...",id:"i+imRH5ndN"}),value:l,onChange:p,style:{maskImage:"linear-gradient(to top, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 16px, rgba(0,0,0,1) calc(100% - 16px), rgba(0,0,0,0) 100%)"}}):o.jsx("div",{className:"absolute inset-0 p-4",children:o.jsxs(F,{variant:"baseSemi",className:Kee(u),children:["- ",g,o.jsx("br",{}),"- ",y,o.jsx("br",{}),"- ",x,o.jsx("br",{})]})})]}),b=d.useCallback(()=>s?.(!1),[s]),_=d.useCallback(()=>s?.(!1),[s]);return e==="thumbnail"?v:o.jsxs(o.Fragment,{children:[o.jsx(Wt,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:v}),o.jsx(Ye,{children:r&&o.jsx(xf,{onClose:_,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:a({defaultMessage:"Sticky color",id:"d1DnFHvFSU"})}),o.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:h.map((w,C)=>o.jsx(bwe,{value:w,color:u,text:l,setColor:f,debouncedSave:m},C))}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(me,{variant:"primary",size:"small",onClick:b,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});I$.displayName="Sticky";function aCt({color:e,onClick:t,selected:n}){return o.jsxs(ve.div,{whileTap:{scale:.95},onClick:t,className:B("relative aspect-square size-full cursor-pointer rounded-full",vwe(e)),children:[n&&o.jsx("div",{className:"border-inverse absolute inset-1 rounded-full border-4"}),o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 z-[1] border border-[black]/5 dark:border-[white]/5"})]})}const bwe=I.memo(({value:e,color:t,text:n,setColor:r,debouncedSave:s})=>{const a=d.useCallback(()=>{r(e),s.current({text:n,color:e})},[s,r,n,e]);return o.jsx(aCt,{color:e,onClick:a,selected:e===t})});bwe.displayName="StickyColorFactory";const jd=(e,t,n)=>{const r=document.createElement(e),[s,a]=Array.isArray(t)?[void 0,t]:[t,n];return s&&Object.assign(r,s),a?.forEach(i=>r.appendChild(i)),r},oCt=(e,t)=>{var n;return t==="left"?e.offsetLeft:(((n=e.offsetParent instanceof HTMLElement?e.offsetParent:null)==null?void 0:n.offsetWidth)??0)-e.offsetWidth-e.offsetLeft},iCt=e=>e.offsetWidth>0&&e.offsetHeight>0,lCt=(e,t)=>{customElements.get(e)!==t&&customElements.define(e,t)};function cCt(e,t,{reverse:n=!1}={}){const r=e.length;for(let s=n?r-1:0;n?s>=0:s<r;n?s--:s++)t(e[s],s)}function uCt(e,t,n,r){const s=t.formatToParts(e);n&&s.unshift({type:"prefix",value:n}),r&&s.push({type:"suffix",value:r});const a=[],i=[],l=[],c=[],u={},f=y=>`${y}:${u[y]=(u[y]??-1)+1}`;let m="",p=!1,h=!1;for(const y of s){m+=y.value;const x=y.type==="minusSign"||y.type==="plusSign"?"sign":y.type;x==="integer"?(p=!0,i.push(...y.value.split("").map(v=>({type:x,value:parseInt(v)})))):x==="group"?i.push({type:x,value:y.value}):x==="decimal"?(h=!0,l.push({type:x,value:y.value,key:f(x)})):x==="fraction"?l.push(...y.value.split("").map(v=>({type:x,value:parseInt(v),key:f(x),pos:-1-u[x]}))):(p||h?c:a).push({type:x,value:y.value,key:f(x)})}const g=[];for(let y=i.length-1;y>=0;y--){const x=i[y];g.unshift(x.type==="integer"?{...x,key:f(x.type),pos:u[x.type]}:{...x,key:f(x.type)})}return{pre:a,integer:g,fraction:l,post:c,valueAsString:m,value:typeof e=="string"?parseFloat(e):e}}const dCt=String.raw,fCt=(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0})(),mCt=typeof CSS<"u"&&CSS.supports&&CSS.supports("line-height","mod(1,1)"),Yee=typeof matchMedia<"u"?matchMedia("(prefers-reduced-motion: reduce)"):null,hM="--_number-flow-d-opacity",R$="--_number-flow-d-width",gM="--_number-flow-dx",P$="--_number-flow-d",pCt=(()=>{try{return CSS.registerProperty({name:hM,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:gM,syntax:"<length>",inherits:!0,initialValue:"0px"}),CSS.registerProperty({name:R$,syntax:"<number>",inherits:!1,initialValue:"0"}),CSS.registerProperty({name:P$,syntax:"<number>",inherits:!0,initialValue:"0"}),!0}catch{return!1}})(),hCt="var(--number-flow-char-height, 1em)",ad="var(--number-flow-mask-height, 0.25em)",Qee=`calc(${ad} / 2)`,J8="var(--number-flow-mask-width, 0.5em)",Hf=`calc(${J8} / var(--scale-x))`,XC="#000 0, transparent 71%",Xee=dCt`:host{display:inline-block;direction:ltr;white-space:nowrap;isolation:isolate;line-height:${hCt} !important}.number,.number__inner{display:inline-block;transform-origin:left top}:host([data-will-change]) :is(.number,.number__inner,.section,.digit,.digit__num,.symbol){will-change:transform}.number{--scale-x:calc(1 + var(${R$}) / var(--width));transform:translateX(var(${gM})) scaleX(var(--scale-x));margin:0 calc(-1 * ${J8});position:relative;-webkit-mask-image:linear-gradient(to right,transparent 0,#000 ${Hf},#000 calc(100% - ${Hf}),transparent ),linear-gradient(to bottom,transparent 0,#000 ${ad},#000 calc(100% - ${ad}),transparent 100% ),radial-gradient(at bottom right,${XC}),radial-gradient(at bottom left,${XC}),radial-gradient(at top left,${XC}),radial-gradient(at top right,${XC});-webkit-mask-size:100% calc(100% - ${ad} * 2),calc(100% - ${Hf} * 2) 100%,${Hf} ${ad},${Hf} ${ad},${Hf} ${ad},${Hf} ${ad};-webkit-mask-position:center,center,top left,top right,bottom right,bottom left;-webkit-mask-repeat:no-repeat}.number__inner{padding:${Qee} ${J8};transform:scaleX(calc(1 / var(--scale-x))) translateX(calc(-1 * var(${gM})))}:host > :not(.number){z-index:5}.section,.symbol{display:inline-block;position:relative;isolation:isolate}.section::after{content:'\200b';display:inline-block}.section--justify-left{transform-origin:center left}.section--justify-right{transform-origin:center right}.section > [inert],.symbol > [inert]{margin:0 !important;position:absolute !important;z-index:-1}.digit{display:inline-block;position:relative;--c:var(--current) + var(${P$})}.digit__num,.number .section::after{padding:${Qee} 0}.digit__num{display:inline-block;--offset-raw:mod(var(--length) + var(--n) - mod(var(--c),var(--length)),var(--length));--offset:calc( var(--offset-raw) - var(--length) * round(down,var(--offset-raw) / (var(--length) / 2),1) );--y:clamp(-100%,var(--offset) * 100%,100%);transform:translateY(var(--y))}.digit__num[inert]{position:absolute;top:0;left:50%;transform:translateX(-50%) translateY(var(--y))}.digit:not(.is-spinning) .digit__num[inert]{display:none}.symbol__value{display:inline-block;mix-blend-mode:plus-lighter;white-space:pre}.section--justify-left .symbol > [inert]{left:0}.section--justify-right .symbol > [inert]{right:0}.animate-presence{opacity:calc(1 + var(${hM}))}`,gCt=HTMLElement,yCt=mCt&&fCt&&pCt;let ZC,_we=class extends gCt{constructor(){super(),this.created=!1,this.batched=!1;const{animated:t,...n}=this.constructor.defaultProps;this._animated=this.computedAnimated=t,Object.assign(this,n)}get animated(){return this._animated}set animated(t){var n;this.animated!==t&&(this._animated=t,(n=this.shadowRoot)==null||n.getAnimations().forEach(r=>r.finish()))}set data(t){var n;if(t==null)return;const{pre:r,integer:s,fraction:a,post:i,value:l}=t;if(this.created){const c=this._data;this._data=t,this.computedTrend=typeof this.trend=="function"?this.trend(c.value,l):this.trend,this.computedAnimated=yCt&&this._animated&&(!this.respectMotionPreference||!(Yee!=null&&Yee.matches))&&iCt(this),(n=this.plugins)==null||n.forEach(u=>{var f;return(f=u.onUpdate)==null?void 0:f.call(u,t,c,this)}),this.batched||this.willUpdate(),this._pre.update(r),this._num.update({integer:s,fraction:a}),this._post.update(i),this.batched||this.didUpdate()}else{this._data=t,this.attachShadow({mode:"open"});try{this._internals??(this._internals=this.attachInternals()),this._internals.role="img"}catch{}if(typeof CSSStyleSheet<"u"&&this.shadowRoot.adoptedStyleSheets)ZC||(ZC=new CSSStyleSheet,ZC.replaceSync(Xee)),this.shadowRoot.adoptedStyleSheets=[ZC];else{const c=document.createElement("style");c.textContent=Xee,this.shadowRoot.appendChild(c)}this._pre=new Jee(this,r,{justify:"right",part:"left"}),this.shadowRoot.appendChild(this._pre.el),this._num=new xCt(this,s,a),this.shadowRoot.appendChild(this._num.el),this._post=new Jee(this,i,{justify:"left",part:"right"}),this.shadowRoot.appendChild(this._post.el),this.created=!0}try{this._internals.ariaLabel=t.valueAsString}catch{}}willUpdate(){this._pre.willUpdate(),this._num.willUpdate(),this._post.willUpdate()}didUpdate(){if(!this.computedAnimated)return;this._abortAnimationsFinish?this._abortAnimationsFinish.abort():this.dispatchEvent(new Event("animationsstart")),this._pre.didUpdate(),this._num.didUpdate(),this._post.didUpdate();const t=new AbortController;Promise.all(this.shadowRoot.getAnimations().map(n=>n.finished)).then(()=>{t.signal.aborted||(this.dispatchEvent(new Event("animationsfinish")),this._abortAnimationsFinish=void 0)}),this._abortAnimationsFinish=t}};_we.defaultProps={transformTiming:{duration:900,easing:"linear(0,.005,.019,.039,.066,.096,.129,.165,.202,.24,.278,.316,.354,.39,.426,.461,.494,.526,.557,.586,.614,.64,.665,.689,.711,.731,.751,.769,.786,.802,.817,.831,.844,.856,.867,.877,.887,.896,.904,.912,.919,.925,.931,.937,.942,.947,.951,.955,.959,.962,.965,.968,.971,.973,.976,.978,.98,.981,.983,.984,.986,.987,.988,.989,.99,.991,.992,.992,.993,.994,.994,.995,.995,.996,.996,.9963,.9967,.9969,.9972,.9975,.9977,.9979,.9981,.9982,.9984,.9985,.9987,.9988,.9989,1)"},spinTiming:void 0,opacityTiming:{duration:450,easing:"ease-out"},animated:!0,trend:(e,t)=>Math.sign(t-e),respectMotionPreference:!0,plugins:void 0,digits:void 0};let xCt=class{constructor(t,n,r,{className:s,...a}={}){this.flow=t,this._integer=new Zee(t,n,{justify:"right",part:"integer"}),this._fraction=new Zee(t,r,{justify:"left",part:"fraction"}),this._inner=jd("span",{className:"number__inner"},[this._integer.el,this._fraction.el]),this.el=jd("span",{...a,part:"number",className:`number ${s??""}`},[this._inner])}willUpdate(){this._prevWidth=this.el.offsetWidth,this._prevLeft=this.el.getBoundingClientRect().left,this._integer.willUpdate(),this._fraction.willUpdate()}update({integer:t,fraction:n}){this._integer.update(t),this._fraction.update(n)}didUpdate(){const t=this.el.getBoundingClientRect();this._integer.didUpdate(),this._fraction.didUpdate();const n=this._prevLeft-t.left,r=this.el.offsetWidth,s=this._prevWidth-r;this.el.style.setProperty("--width",String(r)),this.el.animate({[gM]:[`${n}px`,"0px"],[R$]:[s,0]},{...this.flow.transformTiming,composite:"accumulate"})}},wwe=class{constructor(t,n,{justify:r,className:s,...a},i){this.flow=t,this.children=new Map,this.onCharRemove=c=>()=>{this.children.delete(c)},this.justify=r;const l=n.map(c=>this.addChar(c).el);this.el=jd("span",{...a,className:`section section--justify-${r} ${s??""}`},i?i(l):l)}addChar(t,{startDigitsAtZero:n=!1,...r}={}){const s=t.type==="integer"||t.type==="fraction"?new Swe(this,t.type,n?0:t.value,t.pos,{...r,onRemove:this.onCharRemove(t.key)}):new vCt(this,t.type,t.value,{...r,onRemove:this.onCharRemove(t.key)});return this.children.set(t.key,s),s}unpop(t){t.el.removeAttribute("inert"),t.el.style.top="",t.el.style[this.justify]=""}pop(t){t.forEach(n=>{n.el.style.top=`${n.el.offsetTop}px`,n.el.style[this.justify]=`${oCt(n.el,this.justify)}px`}),t.forEach(n=>{n.el.setAttribute("inert",""),n.present=!1})}addNewAndUpdateExisting(t){const n=new Map,r=new Map,s=this.justify==="left",a=s?"prepend":"append";if(cCt(t,i=>{let l;this.children.has(i.key)?(l=this.children.get(i.key),r.set(i,l),this.unpop(l),l.present=!0):(l=this.addChar(i,{startDigitsAtZero:!0,animateIn:!0}),n.set(i,l)),this.el[a](l.el)},{reverse:s}),this.flow.computedAnimated){const i=this.el.getBoundingClientRect();n.forEach(l=>{l.willUpdate(i)})}n.forEach((i,l)=>{i.update(l.value)}),r.forEach((i,l)=>{i.update(l.value)})}willUpdate(){const t=this.el.getBoundingClientRect();this._prevOffset=t[this.justify],this.children.forEach(n=>n.willUpdate(t))}didUpdate(){const t=this.el.getBoundingClientRect();this.children.forEach(s=>s.didUpdate(t));const n=t[this.justify],r=this._prevOffset-n;r&&this.children.size&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}},Zee=class extends wwe{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r),this.unpop(r)}),this.addNewAndUpdateExisting(t),n.forEach(r=>{r instanceof Swe&&r.update(0)}),this.pop(n)}},Jee=class extends wwe{update(t){const n=new Map;this.children.forEach((r,s)=>{t.find(a=>a.key===s)||n.set(s,r)}),this.pop(n),this.addNewAndUpdateExisting(t)}},e9=class{constructor(t,n,{onRemove:r,animateIn:s=!1}={}){this.flow=t,this.el=n,this._present=!0,this._remove=()=>{var a;this.el.remove(),(a=this._onRemove)==null||a.call(this)},this.el.classList.add("animate-presence"),this.flow.computedAnimated&&s&&this.el.animate({[hM]:[-.9999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),this._onRemove=r}get present(){return this._present}set present(t){if(this._present!==t){if(this._present=t,t?this.el.removeAttribute("inert"):this.el.setAttribute("inert",""),!this.flow.computedAnimated){t||this._remove();return}this.el.style.setProperty("--_number-flow-d-opacity",t?"0":"-.999"),this.el.animate({[hM]:t?[-.9999,0]:[.999,0]},{...this.flow.opacityTiming,composite:"accumulate"}),t?this.flow.removeEventListener("animationsfinish",this._remove):this.flow.addEventListener("animationsfinish",this._remove,{once:!0})}}},Cwe=class extends e9{constructor(t,n,r,s){super(t.flow,r,s),this.section=t,this.value=n,this.el=r}},Swe=class extends Cwe{constructor(t,n,r,s,a){var i,l;const c=(((l=(i=t.flow.digits)==null?void 0:i[s])==null?void 0:l.max)??9)+1,u=Array.from({length:c}).map((m,p)=>{const h=jd("span",{className:"digit__num"},[document.createTextNode(String(p))]);return p!==r&&h.setAttribute("inert",""),h.style.setProperty("--n",String(p)),h}),f=jd("span",{part:`digit ${n}-digit`,className:"digit"},u);f.style.setProperty("--current",String(r)),f.style.setProperty("--length",String(c)),super(t,r,f,a),this.pos=s,this._onAnimationsFinish=()=>{this.el.classList.remove("is-spinning")},this._numbers=u,this.length=c}willUpdate(t){const n=this.el.getBoundingClientRect();this._prevValue=this.value;const r=n[this.section.justify]-t[this.section.justify],s=n.width/2;this._prevCenter=this.section.justify==="left"?r+s:r-s}update(t){this.el.style.setProperty("--current",String(t)),this._numbers.forEach((n,r)=>r===t?n.removeAttribute("inert"):n.setAttribute("inert","")),this.value=t}didUpdate(t){const n=this.el.getBoundingClientRect(),r=n[this.section.justify]-t[this.section.justify],s=n.width/2,a=this.section.justify==="left"?r+s:r-s,i=this._prevCenter-a;i&&this.el.animate({transform:[`translateX(${i}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"});const l=this.getDelta();l&&(this.el.classList.add("is-spinning"),this.el.animate({[P$]:[-l,0]},{...this.flow.spinTiming??this.flow.transformTiming,composite:"accumulate"}),this.flow.addEventListener("animationsfinish",this._onAnimationsFinish,{once:!0}))}getDelta(){var t;if(this.flow.plugins)for(const s of this.flow.plugins){const a=(t=s.getDelta)==null?void 0:t.call(s,this.value,this._prevValue,this);if(a!=null)return a}const n=this.value-this._prevValue,r=this.flow.computedTrend||Math.sign(n);return r<0&&this.value>this._prevValue?this.value-this.length-this._prevValue:r>0&&this.value<this._prevValue?this.length-this._prevValue+this.value:n}},vCt=class extends Cwe{constructor(t,n,r,s){const a=jd("span",{className:"symbol__value",textContent:r});super(t,r,jd("span",{part:`symbol ${n}`,className:"symbol"},[a]),s),this.type=n,this._children=new Map,this._onChildRemove=i=>()=>{this._children.delete(i)},this._children.set(r,new e9(this.flow,a,{onRemove:this._onChildRemove(r)}))}willUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect();this._prevOffset=n[this.section.justify]-t[this.section.justify]}update(t){if(this.value!==t){const n=this._children.get(this.value);n&&(n.present=!1);const r=this._children.get(t);if(r)r.present=!0;else{const s=jd("span",{className:"symbol__value",textContent:t});this.el.appendChild(s),this._children.set(t,new e9(this.flow,s,{animateIn:!0,onRemove:this._onChildRemove(t)}))}}this.value=t}didUpdate(t){if(this.type==="decimal")return;const n=this.el.getBoundingClientRect()[this.section.justify]-t[this.section.justify],r=this._prevOffset-n;r&&this.el.animate({transform:[`translateX(${r}px)`,"none"]},{...this.flow.transformTiming,composite:"accumulate"})}};const bCt=parseInt(d.version.match(/^(\d+)\./)?.[1]),L$=bCt>=19,_Ct=["data","digits"];class O$ extends _we{attributeChangedCallback(t,n,r){this[t]=JSON.parse(r)}}O$.observedAttributes=L$?[]:_Ct;lCt("number-flow-react",O$);const wCt={},ete=L$?e=>e:JSON.stringify;function tte(e){const{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:i,plugins:l,...c}=e;return[{transformTiming:t,spinTiming:n,opacityTiming:r,animated:s,respectMotionPreference:a,trend:i,plugins:l},c]}class CCt extends d.Component{updateProperties(t){if(!this.el)return;this.el.batched=!this.props.isolate;const[n]=tte(this.props);Object.entries(n).forEach(([r,s])=>{this.el[r]=s??O$.defaultProps[r]}),t?.onAnimationsStart&&this.el.removeEventListener("animationsstart",t.onAnimationsStart),this.props.onAnimationsStart&&this.el.addEventListener("animationsstart",this.props.onAnimationsStart),t?.onAnimationsFinish&&this.el.removeEventListener("animationsfinish",t.onAnimationsFinish),this.props.onAnimationsFinish&&this.el.addEventListener("animationsfinish",this.props.onAnimationsFinish)}componentDidMount(){this.updateProperties(),L$&&this.el&&(this.el.digits=this.props.digits,this.el.data=this.props.data)}getSnapshotBeforeUpdate(t){if(this.updateProperties(t),t.data!==this.props.data){if(this.props.group)return this.props.group.willUpdate(),()=>this.props.group?.didUpdate();if(!this.props.isolate)return this.el?.willUpdate(),()=>this.el?.didUpdate()}return null}componentDidUpdate(t,n,r){r?.()}handleRef(t){this.props.innerRef&&(this.props.innerRef.current=t),this.el=t}render(){const[t,{innerRef:n,className:r,data:s,willChange:a,isolate:i,group:l,digits:c,onAnimationsStart:u,onAnimationsFinish:f,...m}]=tte(this.props);return d.createElement("number-flow-react",{ref:this.handleRef,"data-will-change":a?"":void 0,class:r,...m,dangerouslySetInnerHTML:{__html:""},suppressHydrationWarning:!0,digits:ete(c),data:ete(s)})}constructor(t){super(t),this.handleRef=this.handleRef.bind(this)}}const ec=d.forwardRef(function({value:t,locales:n,format:r,prefix:s,suffix:a,...i},l){d.useImperativeHandle(l,()=>c.current,[]);const c=d.useRef(),u=d.useContext(SCt);u?.useRegister(c);const f=d.useMemo(()=>n?JSON.stringify(n):"",[n]),m=d.useMemo(()=>r?JSON.stringify(r):"",[r]),p=d.useMemo(()=>{const h=wCt[`${f}:${m}`]??=new Intl.NumberFormat(n,r);return uCt(t,h,s,a)},[t,f,m,s,a]);return d.createElement(CCt,{...i,group:u,data:p,innerRef:c})}),SCt=d.createContext(void 0),xn=0,mn=1,ln="finance",Hin=(e,t)=>["finance/topMovers",e,t];async function zin({marketType:e,country:t,headers:n}){const r=await re.GET("/rest/finance/top-movers/{market_type}",ln,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error("Failed to fetch top movers.",{cause:r.error});return r.data}const Gin=async({symbol:e,category:t,period:n})=>{const r=await re.POST("/rest/finance/financials/{market_identifier}/analysis",ln,{params:{path:{market_identifier:e}},body:{category:t,period:n},timeoutMs:1e4,numRetries:mn});if(r.error)throw new Error(`Failed to fetch financial insights for ${e}`,{cause:r.error});return r.data},qin=async({symbol:e,period:t,interval:n,headers:r})=>{const s=await re.GET("/rest/finance/history/{market_identifier}",ln,{params:{query:{period:t??"1d",interval:n},path:{market_identifier:e}},headers:r,timeoutMs:xn,numRetries:mn});if(s.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:s.error});return s.data},Kin=e=>["finance/coin50/history",e],Yin=async({period:e})=>{const t=await re.GET("/rest/finance/history/COIN50USD",ln,{params:{query:{period:e??"1d"}},timeoutMs:xn,numRetries:mn});if(t.error)throw new Error("Failed to fetch price history for COIN50USD",{cause:t.error});return t.data},Qin=async({symbol:e,period:t,interval:n})=>{const r=await re.GET("/rest/finance/history/{market_identifier}/csv",ln,{parseAs:"blob",params:{path:{market_identifier:e},query:{period:t??"1d",interval:n}}});if(r.error)throw new Error(`Failed to fetch price history for ${e}`,{cause:r.error});return r.data},eb=({symbol:e,withHistory:t,historyAfterHours:n,historyPeriod:r,historyOffset:s})=>["finance/quote",e,t??null,n??null,r??null,s??null],Yd=async({symbol:e,withHistory:t=!1,historyAfterHours:n=!0,historyPeriod:r,historyOffset:s,headers:a})=>{const i=await re.GET("/rest/finance/quote/{market_identifier}",ln,{params:{path:{market_identifier:e},query:{with_history:t,history_period:r,history_offset:s,history_after_hours:n}},headers:a,timeoutMs:xn,numRetries:mn});if(i.response.status===404)return null;if(i.error)throw new Error(`Failed to fetch quote for ${e}`,{cause:i.error});return i.data},Xin=e=>["finance/profile",e],Zin=async({symbol:e,headers:t})=>{const n=await re.GET("/rest/finance/profile/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.response.status===404)return null;if(n.error)throw new Error(`Failed to fetch profile for ${e}`,{cause:n.error});return n.data},Jin=e=>["finance/profile/description",e],eln=async({symbol:e,headers:t})=>{const n=await re.GET("/rest/finance/profile/{market_identifier}/description",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.error)throw new Error(`Failed to fetch profile description for ${e}`,{cause:n.error});return n.data},tln=(e,t,n="",r="",s)=>["finance/history",t,e,n,r,s],nln=e=>["finance/financials",e],rln=async(e,t)=>{const n=await re.GET("/rest/finance/financials/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.error)throw new Error(`Failed to fetch financials for ${e}`,{cause:n.error});return n.data},sln=e=>["finance/holders",e],aln=async(e,t)=>{const n=await re.GET("/rest/finance/holders/{market_identifier}/institutional",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.error)throw new Error(`Failed to fetch holders for ${e}`,{cause:n.error});return n.data},oln=e=>["finance/insider-trades-roster",e],iln=async(e,t,n)=>{const r=await re.GET("/rest/finance/holders/{market_identifier}/insiders",ln,{params:{path:{market_identifier:e},query:{page:t,limit:n}},timeoutMs:xn,numRetries:mn});if(r.error)throw new Error(`Failed to fetch insider trades for ${e}`,{cause:r.error});return r.data},lln=async e=>{const t=await re.GET("/rest/finance/holders/{market_identifier}/insiders/roster",ln,{params:{path:{market_identifier:e}},timeoutMs:xn,numRetries:mn});if(t.error)throw new Error(`Failed to fetch insider trades roster for ${e}`,{cause:t.error});return t.data},cln=e=>["finance/insider-trades-statistics",e],uln=async e=>{const t=await re.GET("/rest/finance/holders/{market_identifier}/insiders/statistics",ln,{params:{path:{market_identifier:e}},timeoutMs:xn,numRetries:mn});if(t.error)throw new Error(`Failed to fetch insider trades statistics for ${e}`,{cause:t.error});return t.data},dln=e=>["finance/insider-trades",e];function ECt(e,t){return["finance/peers",e,t]}async function MCt({symbol:e,headers:t,index:n}){const r=await re.GET("/rest/finance/peers/{market_identifier}",ln,{params:{path:{market_identifier:e},query:{with_index:n}},headers:t,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error(`Failed to fetch peers for ${e}`,{cause:r.error});return r.data}async function fln({symbol:e,headers:t}){const n=await re.GET("/rest/finance/bulls-vs-bears-summary/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.error)throw new Error(`Failed to fetch bulls vs bears analysis for ${e}`,{cause:n.error});return n.data}async function mln({symbol:e,headers:t}){const n=await re.GET("/rest/finance/timeline/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:0});if(n.error)throw new Error(`Failed to fetch timeline for ${e}`,{cause:n.error});return n.data}async function pln({eventId:e,symbol:t,headers:n}){const r=await re.GET("/rest/finance/earnings/{market_identifier}/transcript/{event_id}",ln,{headers:n,params:{path:{market_identifier:t,event_id:e}},timeoutMs:xn,numRetries:mn});if(r.response.status===404)return null;if(r.error)throw new Error(`Failed to fetch earnings transcript for ${t}`,{cause:r.error});return r.data}const hln=(e,t)=>["finance/analysis",e,t];async function gln({eventId:e,symbol:t,headers:n}){const r=await re.GET("/rest/finance/earnings/{market_identifier}/analysis/{event_id}",ln,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error(`Failed to fetch earnings analysis for ${t}`,{cause:r.error});return r.data}const yln=(e,t)=>["finance/documents",e,t];async function xln({eventId:e,symbol:t,headers:n}){const r=await re.GET("/rest/finance/earnings/{market_identifier}/documents/{event_id}",ln,{params:{path:{market_identifier:t,event_id:e}},headers:n,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error(`Failed to fetch earnings documents for ${t}`,{cause:r.error});return r.data}const vln=e=>["finance/documents",e];async function bln({symbol:e,headers:t}){const n=await re.GET("/rest/finance/documents/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.error)throw new Error(`Failed to fetch documents for ${e}`,{cause:n.error});return n.data}const _ln=async(e,t)=>{const n=await re.GET("/rest/finance/documents/download/{document_id}",ln,{params:{path:{document_id:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.error)throw new Error(`Failed to fetch document download url for ${e}`,{cause:n.error});return{errorCode:n.data?.error_code??null,presignedUrl:n.data?.presigned_url??null}},wln=e=>["finance/earnings",e];async function Cln({symbol:e,headers:t}){const n=await re.GET("/rest/finance/earnings/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.response.status===404)return[];if(n.error)throw new Error(`Failed to fetch earnings for ${e}`,{cause:n.error});return n.data}async function Sln({marketType:e,headers:t,country:n}){const r=await re.GET("/rest/finance/{market_type}",ln,{headers:t,params:{path:{market_type:e},query:{country:n}},timeoutMs:xn,numRetries:mn});if(r.error)throw new Error(`Failed to fetch finance page shared data for ${e}`,{cause:r.error});return r.data}const kCt=(e,t,n)=>["finance/top-indices",e,t,n];async function TCt({groupId:e,headers:t,historyPeriod:n,country:r}){const s=await re.GET("/rest/finance/top-indices/{group_id}",ln,{headers:t,params:{path:{group_id:e},query:{with_history:!0,history_period:n,country:r}},timeoutMs:xn,numRetries:mn});if(s.error)throw new Error("Failed to fetch top indices",{cause:s.error});return s.data}const Eln=(e,t)=>["finance/watchlist",e??"",t??""];async function Mln({headers:e,country:t}){const n=await re.GET("/rest/finance/watchlist",ln,{headers:e,timeoutMs:xn,numRetries:mn,params:{query:{country:t}}});if(n.error)throw new Error("Failed to fetch watchlist tickers",{cause:n.error});return n.data}async function kln(){const e=await re.GET("/rest/finance/equity-sectors",ln,{timeoutMs:xn,numRetries:mn});if(e.error)throw new Error("Failed to fetch equity sectors",{cause:e.error});return e.data}async function Tln(){const e=await re.GET("/rest/finance/fixed-income",ln,{timeoutMs:xn,numRetries:mn});if(e.error)throw new Error("Failed to fetch fixed income",{cause:e.error});return e.data}async function Nln({marketType:e,country:t}){const n=await re.GET("/rest/finance/market-sentiment/{market_type}",ln,{params:{path:{market_type:e},query:{country:t}},timeoutMs:xn,numRetries:mn});if(n.error)throw new Error("Failed to fetch market sentiment",{cause:n.error});return n.data}async function jln({marketType:e,headers:t,country:n}){const r=await re.GET("/rest/finance/top-z-scores/{market_type}",ln,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error("Failed to fetch top z scores",{cause:r.error});return r.data}async function Aln({marketIdentifier:e,locale:t}){const n=await re.GET("/rest/finance/significant-movement-summary/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:{"Accept-Language":t},timeoutMs:xn,numRetries:mn});if(n.error)throw new Error("Failed to fetch significant movement summary",{cause:n.error});return n.data}const Iln=e=>["finance/news",e];async function Rln({symbol:e,headers:t}){const n=await re.GET("/rest/finance/news/{market_identifier}",ln,{params:{path:{market_identifier:e}},headers:t,timeoutMs:xn,numRetries:mn});if(n.error)throw new Error("Failed to fetch news",{cause:n.error});return n.data}async function Pln({marketType:e,country:t,headers:n}){const r=await re.GET("/rest/finance/market-summary/{market_type}",ln,{params:{path:{market_type:e},query:{country:t}},headers:n,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error("Failed to fetch market summary",{cause:r.error});return r.data}async function Lln({marketType:e,headers:t,country:n}){const r=await re.GET("/rest/finance/general-news/{market_type}",ln,{params:{path:{market_type:e},query:{country:n}},headers:t,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error("Failed to fetch general news",{cause:r.error});return r.data}const Oln=(e,t,n)=>["finance/crypto-leaderboard",e,t,n];async function Dln({sortBy:e="dollarVolume24h",orderBy:t="desc",provider:n="coinbase",headers:r}){const s=await re.GET("/rest/finance/leaderboard/crypto",ln,{params:{query:{sort_by:e,order_by:t,provider:n}},timeoutMs:xn,numRetries:mn,headers:r});if(s.error)throw new Error("Failed to fetch crypto leaderboard",{cause:s.error});return s.data}const Fln=(e,t,n,r)=>["finance/earnings/schedule",e,t,n,r];async function Uln(e,t,n,r){const s=await re.GET("/rest/finance/earnings/schedule",ln,{params:{query:{start_date:e,end_date:t,timezone:n,country:r}},timeoutMs:xn,numRetries:mn});if(s.error)throw new Error("Failed to fetch earnings schedule",{cause:s.error});return s.data}const Bln=(e,t,n)=>["finance/earnings",e,t,n];async function $ln(e,t,n){const r=await re.GET("/rest/finance/earnings",ln,{params:{query:{date:e,timezone:t,country:n}},timeoutMs:xn,numRetries:mn});if(r.error)throw new Error("Failed to fetch earnings schedule",{cause:r.error});return r.data}async function Vln(){const{data:e,error:t}=await re.GET("/rest/autosuggest/finance/list-autosuggest",ln,{params:{query:{query:""}},timeoutMs:xn,numRetries:mn});if(t)throw new Error("Failed to fetch trending companies",{cause:t});return e.results.filter(n=>n.category==="ticker")}const Wln=(e,t)=>["finance/screener",e,t];async function Hln({query:e,currency:t,headers:n}){const r=await re.GET("/rest/finance/screener",ln,{params:{query:{query:e,currency:t||void 0}},headers:n,timeoutMs:xn,numRetries:mn});if(r.error)throw new Error("Failed to fetch screener data.",{cause:r.error});return r.data}const nte=(e,t)=>["finance-autosuggest",e,t],t9=async({query:e,reason:t,country:n})=>{try{const{data:r,error:s}=await re.GET("/rest/autosuggest/finance/list-autosuggest",t,{params:{query:{query:e,country:n}},timeoutMs:0});if(s)throw new Error("Failed to fetch finance suggestions.",{cause:s});return r.results??ce}catch(r){return ne.error(r),[]}},NCt=(e,t,n)=>["finance/currency-exchange",e,t,n];async function jCt({sourceCurrency:e,targetCurrency:t,amount:n=1,headers:r}){const s=await re.GET("/rest/finance/currency-exchange",ln,{params:{query:{source_currency:e,target_currency:t,amount:n}},headers:r,timeoutMs:xn,numRetries:mn});if(s.error)throw new Error(`Failed to convert ${e} to ${t}`,{cause:s.error});return s.data}async function ACt(e,t){try{return(await Yd({symbol:e,headers:t}))?.currency?.toLowerCase()||"usd"}catch(n){return ne.warn(`Failed to fetch currency for symbol ${e}`,{error:n}),"usd"}}const zln=(e,t)=>["finance/transcript",e,t],n9=["1d","5d","1m","6m","ytd","1y","5y","max"],rte={"1d":J({id:"+7PjfVlUMl",defaultMessage:"1 day"}),"5d":J({id:"vIv9T0OeHn",defaultMessage:"5 day"}),"1m":J({id:"p1dNdsvErg",defaultMessage:"1 month"}),"6m":J({id:"HgjCYPpteR",defaultMessage:"6 month"}),ytd:J({id:"zvczgisLv6",defaultMessage:"Year to date"}),"1y":J({id:"rwIPgHMeIl",defaultMessage:"1 year"}),"3m":J({id:"ooeaf7XYp0",defaultMessage:"3 month"}),"5y":J({id:"TUYRuZ5l9E",defaultMessage:"5 year"}),max:J({id:"kkjl2vQekD",defaultMessage:"Max"})},Ewe={"1d":"1D","5d":"5D","1m":"1M","6m":"6M",ytd:"YTD","1y":"1Y","3m":"3M","5y":"5Y",max:"MAX"},JC=new Set;async function ICt({period:e,symbols:t,headers:n,existingFailedPeriods:r=[],reason:s}){const a=n9.indexOf(e),i=[...r].filter(l=>!JC.has(l));for(const l of n9.slice(a)){if(i.includes(l)&&!JC.has(l))continue;const c=await re.GET("/rest/finance/prices/{period}/{market_identifiers}",s,{params:{path:{period:l,market_identifiers:t.join(",")}},headers:n,timeoutMs:xn,numRetries:mn});if(c.error){JC.has(l)||i.push(l),ne.error("Failed to fetch FMP prices",{url:`/rest/finance/prices/${l}/${t.join(",")}`,error:c.error,status:c.response.status,statusText:c.response.statusText});continue}return JC.add(l),{...c.data.data}}return null}const Mwe="stock-widget-quote-cache",kwe="stock-widget-prices-cache",_2="NVDA",RCt=60*1e3,PCt=5*60*1e3,LCt=60*1e3,OCt=30*1e3,DCt=5*60*1e3,FCt=60*1e3,UCt=150,ste=50,BCt=24*60*60*1e3,$Ct=.1,VCt=10,WCt=5;function HCt(e){try{const t=De.getItem(`${Mwe}-${e}`);if(t){const n=JSON.parse(t);if(Date.now()-n.timestamp<RCt)return n.data}}catch{}return null}function zCt(e,t){try{const n={symbol:e,data:t,timestamp:Date.now()};De.setItem(`${Mwe}-${e}`,JSON.stringify(n))}catch{}}function GCt(e,t){try{const n=De.getItem(`${kwe}-${e}-${t}`);if(n){const r=JSON.parse(n);if(Date.now()-r.timestamp<PCt)return r.data}}catch{}return null}function qCt(e,t,n){try{const r={symbol:e,period:t,data:n,timestamp:Date.now()};De.setItem(`${kwe}-${e}-${t}`,JSON.stringify(r))}catch{}}function KCt(e="widget",t="default"){if(e!=="widget")return{version:1,symbol:_2};const n=Nx("STOCK",t);return n?{version:1,symbol:n.symbol??_2}:{version:1,symbol:_2}}function YCt(e,t="widget",n="default"){t==="widget"&&Sp("STOCK",n,{version:1,symbol:e.symbol})}function QCt(e="default",t="widget"){const n=KCt(t,e),[r,s]=d.useState(n),a="stock-widget",{data:i}=ZB({watchlistType:"FINANCE",reason:a}),l=r.symbol||i?.[0]?.identifier||_2,c=HCt(l),u=GCt(l,"1d"),{data:f,isLoading:m}=Ue({queryKey:["finance/quote",l],queryFn:async()=>{const E=await Yd({symbol:l,withHistory:!0,historyPeriod:"1d",historyOffset:0});return E&&zCt(l,E),E},refetchInterval:LCt,staleTime:OCt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:c}),{data:p,isLoading:h}=Ue({queryKey:["finance/prices",l,"1d"],queryFn:async()=>{const E=await ICt({period:"1d",symbols:[l],reason:"stock-widget"});return E&&qCt(l,"1d",E),E},refetchInterval:DCt,staleTime:FCt,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0,enabled:!0,placeholderData:u}),g=f||c,y=p||u,x=!!(f&&p),v={symbol:l,price:"---.--",changesPercentage:"--%",change:"--$",exchange:"--",currency:"USD"},b={history:{prices:[{symbol:l,entries:Array.from({length:ste},(E,k)=>({date:new Date(Date.now()-(ste-1-k)*BCt).toISOString(),price:UCt+Math.sin(k*$Ct)*VCt+Math.random()*WCt})),exchange:"--",currency:"USD"}]}},_=g||v,w=y||b,C=d.useMemo(()=>w?.history?.prices?w.history.prices.map(E=>({symbol:E.symbol,entries:E.entries.map(k=>({date:k.date,price:k.price})).sort((k,M)=>new Date(k.date).getTime()-new Date(M.date).getTime()),exchange:E.exchange||_?.exchange||"",currency:E.currency||_?.currency||"USD"})):[],[w,_]),S=d.useCallback(E=>{s(E),YCt(E,t,e)},[s,t,e]);return d.useMemo(()=>({symbol:l,quote:_,prices:C,isLoading:m||h,hasError:!1,hasRealData:x,stockSettings:r,updateStockSettings:S}),[l,_,C,m,h,x,r,S])}const Q3=I.memo(({symbol:e,src:t,srcDark:n,className:r,size:s="lg"})=>{n=n??t;const[a,i]=d.useState(!1),l=d.useRef(null),{colorScheme:c}=jr(),u=()=>{l.current&&l.current.naturalHeight>0&&i(!1)};d.useEffect(()=>{l.current&&(l.current.complete&&l.current.naturalHeight===0?i(!0):i(!1))},[l]),d.useEffect(()=>{i(!1)},[e]);const f=c==="dark"?n:t;return o.jsx("div",{className:B({"size-lg":s==="lg","size-md":s==="md","size-sm":s==="sm"},"flex shrink-0 items-center justify-center",r),children:a||!f?o.jsx(XCt,{symbol:e}):o.jsx("img",{ref:l,src:f,alt:e,className:"rounded-[4px] object-contain",onError:()=>{i(!0)},onLoad:u},e)})});Q3.displayName="FinanceAssetLogo";const XCt=({symbol:e})=>{const t=d.useMemo(()=>e.replace(/[^a-zA-Z0-9]/g,"").slice(0,1).toUpperCase()||"#",[e]);return o.jsx(z,{variant:"subtle",className:"flex size-full items-center justify-center rounded-full",children:o.jsx(F,{color:"light",children:o.jsx("span",{className:"font-mono opacity-70",children:t})})})},ZCt=10,JCt=e=>{const{isSelected:t}=e;return o.jsx("div",{className:"flex h-full flex-col items-center justify-center",children:o.jsx(Me,{icon:t?dr:ar,size:"small",pill:!0})})},eSt=({onClear:e})=>o.jsx(Me,{icon:kt,size:"tiny",pill:!0,onClick:e}),Twe=I.memo(({onClose:e,onSelectStock:t,currentSymbol:n})=>{const{isMobileUserAgent:r}=xe(),s="stock-settings-modal",{$t:a}=Z(),i=ot(),l=d.useRef(null),[c,u]=d.useState(n),[f,m]=d.useState(ce),[p,h]=d.useState(-1),[g,y]=d.useState(!1),x=d.useCallback(()=>{e(),m(ce)},[e]),v=d.useCallback(async D=>{if(D.trim().length===0){m(ce);return}const A=mo().erp;try{const N=(await i.fetchQuery({queryKey:["watchlist","FINANCE",D],queryFn:()=>V1e({query:D,watchlistType:"FINANCE",limit:ZCt,cometRenderPlace:A,reason:s}),staleTime:3600})).map(L=>({query:L.title,title:L.title,image:L.image_url??void 0,imageDark:L.image_url_dark??void 0,description:L.description,identifier:L.identifier,category:L.category??void 0,subscribed:L.subscribed}));m(N)}catch{m(ce)}},[i,s]),b=gs(v,250,{leading:!0,trailing:!0}),_=d.useCallback(D=>{b(D)},[b]),w=d.useCallback(()=>{y(!0),_(c)},[c,_]),C=d.useCallback(()=>{y(!1)},[]),S=d.useCallback(D=>{u(D),_(D)},[_]),E=()=>{u(""),m([])},k=d.useCallback(D=>{t(D.identifier??"AAPL"),m(ce),u(D.identifier??"AAPL")},[t]),M=d.useCallback((D,P)=>{k(D)},[k]),j=B("h-10 rounded-md p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":g&&f.length>0}),R=d.useMemo(()=>({image:D,alt:P})=>o.jsx("div",{className:"mr-3 flex size-6 items-center justify-center overflow-hidden rounded",children:o.jsx(Q3,{src:D??"",symbol:P??"",size:"lg"})}),[]);d.useEffect(()=>{c||_("")},[c,_]);const O=d.useMemo(()=>({RightIconComponent:JCt,LeftIconComponent:R}),[R]);return o.jsx(xf,{onClose:x,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:a({defaultMessage:"Select Stock",id:"0MrUZjeA/m"})}),o.jsx(bx,{isOpen:g&&f.length>0,suggestedQueries:f,focusedIndex:p,setFocusedIndex:h,handlePasteQuery:vn,handleSubmit:M,value:c,components:O,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full max-h-[250px] overflow-y-auto",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Xr,{onFocus:w,onBlur:C,className:j,pill:!1,ref:l,isMobileUserAgent:r,placeholder:a({defaultMessage:"Search stocks (e.g., AAPL, TSLA, MSFT)...",id:"TMRxNvCkDS"}),value:c,onChange:S,ClearIcon:eSt,...c.length>0?{onClear:E}:{}})}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(me,{variant:"primary",size:"small",onClick:x,text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})});Twe.displayName="StockSettingsModal";var r9=Math.PI,s9=2*r9,em=1e-6,tSt=s9-em;function a9(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function ni(){return new a9}a9.prototype=ni.prototype={constructor:a9,moveTo:function(e,t){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)},closePath:function(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(e,t){this._+="L"+(this._x1=+e)+","+(this._y1=+t)},quadraticCurveTo:function(e,t,n,r){this._+="Q"+ +e+","+ +t+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(e,t,n,r,s,a){this._+="C"+ +e+","+ +t+","+ +n+","+ +r+","+(this._x1=+s)+","+(this._y1=+a)},arcTo:function(e,t,n,r,s){e=+e,t=+t,n=+n,r=+r,s=+s;var a=this._x1,i=this._y1,l=n-e,c=r-t,u=a-e,f=i-t,m=u*u+f*f;if(s<0)throw new Error("negative radius: "+s);if(this._x1===null)this._+="M"+(this._x1=e)+","+(this._y1=t);else if(m>em)if(!(Math.abs(f*l-c*u)>em)||!s)this._+="L"+(this._x1=e)+","+(this._y1=t);else{var p=n-a,h=r-i,g=l*l+c*c,y=p*p+h*h,x=Math.sqrt(g),v=Math.sqrt(m),b=s*Math.tan((r9-Math.acos((g+m-y)/(2*x*v)))/2),_=b/v,w=b/x;Math.abs(_-1)>em&&(this._+="L"+(e+_*u)+","+(t+_*f)),this._+="A"+s+","+s+",0,0,"+ +(f*p>u*h)+","+(this._x1=e+w*l)+","+(this._y1=t+w*c)}},arc:function(e,t,n,r,s,a){e=+e,t=+t,n=+n,a=!!a;var i=n*Math.cos(r),l=n*Math.sin(r),c=e+i,u=t+l,f=1^a,m=a?r-s:s-r;if(n<0)throw new Error("negative radius: "+n);this._x1===null?this._+="M"+c+","+u:(Math.abs(this._x1-c)>em||Math.abs(this._y1-u)>em)&&(this._+="L"+c+","+u),n&&(m<0&&(m=m%s9+s9),m>tSt?this._+="A"+n+","+n+",0,1,"+f+","+(e-i)+","+(t-l)+"A"+n+","+n+",0,1,"+f+","+(this._x1=c)+","+(this._y1=u):m>em&&(this._+="A"+n+","+n+",0,"+ +(m>=r9)+","+f+","+(this._x1=e+n*Math.cos(s))+","+(this._y1=t+n*Math.sin(s))))},rect:function(e,t,n,r){this._+="M"+(this._x0=this._x1=+e)+","+(this._y0=this._y1=+t)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};function Tn(e){return function(){return e}}var ate=Math.abs,sa=Math.atan2,zf=Math.cos,nSt=Math.max,mA=Math.min,Sl=Math.sin,Hh=Math.sqrt,to=1e-12,tb=Math.PI,yM=tb/2,w2=2*tb;function rSt(e){return e>1?0:e<-1?tb:Math.acos(e)}function ote(e){return e>=1?yM:e<=-1?-yM:Math.asin(e)}function sSt(e){return e.innerRadius}function aSt(e){return e.outerRadius}function oSt(e){return e.startAngle}function iSt(e){return e.endAngle}function lSt(e){return e&&e.padAngle}function cSt(e,t,n,r,s,a,i,l){var c=n-e,u=r-t,f=i-s,m=l-a,p=m*c-f*u;if(!(p*p<to))return p=(f*(t-a)-m*(e-s))/p,[e+p*c,t+p*u]}function eS(e,t,n,r,s,a,i){var l=e-n,c=t-r,u=(i?a:-a)/Hh(l*l+c*c),f=u*c,m=-u*l,p=e+f,h=t+m,g=n+f,y=r+m,x=(p+g)/2,v=(h+y)/2,b=g-p,_=y-h,w=b*b+_*_,C=s-a,S=p*y-g*h,E=(_<0?-1:1)*Hh(nSt(0,C*C*w-S*S)),k=(S*_-b*E)/w,M=(-S*b-_*E)/w,j=(S*_+b*E)/w,R=(-S*b+_*E)/w,O=k-x,D=M-v,P=j-x,A=R-v;return O*O+D*D>P*P+A*A&&(k=j,M=R),{cx:k,cy:M,x01:-f,y01:-m,x11:k*(s/C-1),y11:M*(s/C-1)}}function uSt(){var e=sSt,t=aSt,n=Tn(0),r=null,s=oSt,a=iSt,i=lSt,l=null;function c(){var u,f,m=+e.apply(this,arguments),p=+t.apply(this,arguments),h=s.apply(this,arguments)-yM,g=a.apply(this,arguments)-yM,y=ate(g-h),x=g>h;if(l||(l=u=ni()),p<m&&(f=p,p=m,m=f),!(p>to))l.moveTo(0,0);else if(y>w2-to)l.moveTo(p*zf(h),p*Sl(h)),l.arc(0,0,p,h,g,!x),m>to&&(l.moveTo(m*zf(g),m*Sl(g)),l.arc(0,0,m,g,h,x));else{var v=h,b=g,_=h,w=g,C=y,S=y,E=i.apply(this,arguments)/2,k=E>to&&(r?+r.apply(this,arguments):Hh(m*m+p*p)),M=mA(ate(p-m)/2,+n.apply(this,arguments)),j=M,R=M,O,D;if(k>to){var P=ote(k/m*Sl(E)),A=ote(k/p*Sl(E));(C-=P*2)>to?(P*=x?1:-1,_+=P,w-=P):(C=0,_=w=(h+g)/2),(S-=A*2)>to?(A*=x?1:-1,v+=A,b-=A):(S=0,v=b=(h+g)/2)}var T=p*zf(v),N=p*Sl(v),L=m*zf(w),U=m*Sl(w);if(M>to){var $=p*zf(b),V=p*Sl(b),W=m*zf(_),Q=m*Sl(_),q;if(y<tb&&(q=cSt(T,N,W,Q,$,V,L,U))){var H=T-q[0],K=N-q[1],G=$-q[0],ee=V-q[1],Y=1/Sl(rSt((H*G+K*ee)/(Hh(H*H+K*K)*Hh(G*G+ee*ee)))/2),te=Hh(q[0]*q[0]+q[1]*q[1]);j=mA(M,(m-te)/(Y-1)),R=mA(M,(p-te)/(Y+1))}}S>to?R>to?(O=eS(W,Q,T,N,p,R,x),D=eS($,V,L,U,p,R,x),l.moveTo(O.cx+O.x01,O.cy+O.y01),R<M?l.arc(O.cx,O.cy,R,sa(O.y01,O.x01),sa(D.y01,D.x01),!x):(l.arc(O.cx,O.cy,R,sa(O.y01,O.x01),sa(O.y11,O.x11),!x),l.arc(0,0,p,sa(O.cy+O.y11,O.cx+O.x11),sa(D.cy+D.y11,D.cx+D.x11),!x),l.arc(D.cx,D.cy,R,sa(D.y11,D.x11),sa(D.y01,D.x01),!x))):(l.moveTo(T,N),l.arc(0,0,p,v,b,!x)):l.moveTo(T,N),!(m>to)||!(C>to)?l.lineTo(L,U):j>to?(O=eS(L,U,$,V,m,-j,x),D=eS(T,N,W,Q,m,-j,x),l.lineTo(O.cx+O.x01,O.cy+O.y01),j<M?l.arc(O.cx,O.cy,j,sa(O.y01,O.x01),sa(D.y01,D.x01),!x):(l.arc(O.cx,O.cy,j,sa(O.y01,O.x01),sa(O.y11,O.x11),!x),l.arc(0,0,m,sa(O.cy+O.y11,O.cx+O.x11),sa(D.cy+D.y11,D.cx+D.x11),x),l.arc(D.cx,D.cy,j,sa(D.y11,D.x11),sa(D.y01,D.x01),!x))):l.arc(0,0,m,w,_,x)}if(l.closePath(),u)return l=null,u+""||null}return c.centroid=function(){var u=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+s.apply(this,arguments)+ +a.apply(this,arguments))/2-tb/2;return[zf(f)*u,Sl(f)*u]},c.innerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:Tn(+u),c):e},c.outerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:Tn(+u),c):t},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:Tn(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:Tn(+u),c):r},c.startAngle=function(u){return arguments.length?(s=typeof u=="function"?u:Tn(+u),c):s},c.endAngle=function(u){return arguments.length?(a=typeof u=="function"?u:Tn(+u),c):a},c.padAngle=function(u){return arguments.length?(i=typeof u=="function"?u:Tn(+u),c):i},c.context=function(u){return arguments.length?(l=u??null,c):l},c}function Nwe(e){this._context=e}Nwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qm(e){return new Nwe(e)}function D$(e){return e[0]}function F$(e){return e[1]}function U$(){var e=D$,t=F$,n=Tn(!0),r=null,s=qm,a=null;function i(l){var c,u=l.length,f,m=!1,p;for(r==null&&(a=s(p=ni())),c=0;c<=u;++c)!(c<u&&n(f=l[c],c,l))===m&&((m=!m)?a.lineStart():a.lineEnd()),m&&a.point(+e(f,c,l),+t(f,c,l));if(p)return a=null,p+""||null}return i.x=function(l){return arguments.length?(e=typeof l=="function"?l:Tn(+l),i):e},i.y=function(l){return arguments.length?(t=typeof l=="function"?l:Tn(+l),i):t},i.defined=function(l){return arguments.length?(n=typeof l=="function"?l:Tn(!!l),i):n},i.curve=function(l){return arguments.length?(s=l,r!=null&&(a=s(r)),i):s},i.context=function(l){return arguments.length?(l==null?r=a=null:a=s(r=l),i):r},i}function dSt(){var e=D$,t=null,n=Tn(0),r=F$,s=Tn(!0),a=null,i=qm,l=null;function c(f){var m,p,h,g=f.length,y,x=!1,v,b=new Array(g),_=new Array(g);for(a==null&&(l=i(v=ni())),m=0;m<=g;++m){if(!(m<g&&s(y=f[m],m,f))===x)if(x=!x)p=m,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),h=m-1;h>=p;--h)l.point(b[h],_[h]);l.lineEnd(),l.areaEnd()}x&&(b[m]=+e(y,m,f),_[m]=+n(y,m,f),l.point(t?+t(y,m,f):b[m],r?+r(y,m,f):_[m]))}if(v)return l=null,v+""||null}function u(){return U$().defined(s).curve(i).context(a)}return c.x=function(f){return arguments.length?(e=typeof f=="function"?f:Tn(+f),t=null,c):e},c.x0=function(f){return arguments.length?(e=typeof f=="function"?f:Tn(+f),c):e},c.x1=function(f){return arguments.length?(t=f==null?null:typeof f=="function"?f:Tn(+f),c):t},c.y=function(f){return arguments.length?(n=typeof f=="function"?f:Tn(+f),r=null,c):n},c.y0=function(f){return arguments.length?(n=typeof f=="function"?f:Tn(+f),c):n},c.y1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:Tn(+f),c):r},c.lineX0=c.lineY0=function(){return u().x(e).y(n)},c.lineY1=function(){return u().x(e).y(r)},c.lineX1=function(){return u().x(t).y(n)},c.defined=function(f){return arguments.length?(s=typeof f=="function"?f:Tn(!!f),c):s},c.curve=function(f){return arguments.length?(i=f,a!=null&&(l=i(a)),c):i},c.context=function(f){return arguments.length?(f==null?a=l=null:l=i(a=f),c):a},c}function fSt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function mSt(e){return e}function pSt(){var e=mSt,t=fSt,n=null,r=Tn(0),s=Tn(w2),a=Tn(0);function i(l){var c,u=l.length,f,m,p=0,h=new Array(u),g=new Array(u),y=+r.apply(this,arguments),x=Math.min(w2,Math.max(-w2,s.apply(this,arguments)-y)),v,b=Math.min(Math.abs(x)/u,a.apply(this,arguments)),_=b*(x<0?-1:1),w;for(c=0;c<u;++c)(w=g[h[c]=c]=+e(l[c],c,l))>0&&(p+=w);for(t!=null?h.sort(function(C,S){return t(g[C],g[S])}):n!=null&&h.sort(function(C,S){return n(l[C],l[S])}),c=0,m=p?(x-u*_)/p:0;c<u;++c,y=v)f=h[c],w=g[f],v=y+(w>0?w*m:0)+_,g[f]={data:l[f],index:c,value:w,startAngle:y,endAngle:v,padAngle:b};return g}return i.value=function(l){return arguments.length?(e=typeof l=="function"?l:Tn(+l),i):e},i.sortValues=function(l){return arguments.length?(t=l,n=null,i):t},i.sort=function(l){return arguments.length?(n=l,t=null,i):n},i.startAngle=function(l){return arguments.length?(r=typeof l=="function"?l:Tn(+l),i):r},i.endAngle=function(l){return arguments.length?(s=typeof l=="function"?l:Tn(+l),i):s},i.padAngle=function(l){return arguments.length?(a=typeof l=="function"?l:Tn(+l),i):a},i}var hSt=Awe(qm);function jwe(e){this._curve=e}jwe.prototype={areaStart:function(){this._curve.areaStart()},areaEnd:function(){this._curve.areaEnd()},lineStart:function(){this._curve.lineStart()},lineEnd:function(){this._curve.lineEnd()},point:function(e,t){this._curve.point(t*Math.sin(e),t*-Math.cos(e))}};function Awe(e){function t(n){return new jwe(e(n))}return t._curve=e,t}function gSt(e){var t=e.curve;return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e.curve=function(n){return arguments.length?t(Awe(n)):t()._curve},e}function ySt(){return gSt(U$().curve(hSt))}function tS(e,t){return[(t=+t)*Math.cos(e-=Math.PI/2),t*Math.sin(e)]}var o9=Array.prototype.slice;function xSt(e){return e.source}function vSt(e){return e.target}function B$(e){var t=xSt,n=vSt,r=D$,s=F$,a=null;function i(){var l,c=o9.call(arguments),u=t.apply(this,c),f=n.apply(this,c);if(a||(a=l=ni()),e(a,+r.apply(this,(c[0]=u,c)),+s.apply(this,c),+r.apply(this,(c[0]=f,c)),+s.apply(this,c)),l)return a=null,l+""||null}return i.source=function(l){return arguments.length?(t=l,i):t},i.target=function(l){return arguments.length?(n=l,i):n},i.x=function(l){return arguments.length?(r=typeof l=="function"?l:Tn(+l),i):r},i.y=function(l){return arguments.length?(s=typeof l=="function"?l:Tn(+l),i):s},i.context=function(l){return arguments.length?(a=l??null,i):a},i}function bSt(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t=(t+r)/2,n,t,s,r,s)}function _St(e,t,n,r,s){e.moveTo(t,n),e.bezierCurveTo(t,n=(n+s)/2,r,n,r,s)}function wSt(e,t,n,r,s){var a=tS(t,n),i=tS(t,n=(n+s)/2),l=tS(r,n),c=tS(r,s);e.moveTo(a[0],a[1]),e.bezierCurveTo(i[0],i[1],l[0],l[1],c[0],c[1])}function CSt(){return B$(bSt)}function SSt(){return B$(_St)}function ESt(){var e=B$(wSt);return e.angle=e.x,delete e.x,e.radius=e.y,delete e.y,e}function ite(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function Iwe(e){this._context=e}Iwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ite(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ite(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function MSt(e){return new Iwe(e)}function lte(e){return e<0?-1:1}function cte(e,t,n){var r=e._x1-e._x0,s=t-e._x1,a=(e._y1-e._y0)/(r||s<0&&-0),i=(n-e._y1)/(s||r<0&&-0),l=(a*s+i*r)/(r+s);return(lte(a)+lte(i))*Math.min(Math.abs(a),Math.abs(i),.5*Math.abs(l))||0}function ute(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function pA(e,t,n){var r=e._x0,s=e._y0,a=e._x1,i=e._y1,l=(a-r)/3;e._context.bezierCurveTo(r+l,s+l*t,a-l,i-l*n,a,i)}function xM(e){this._context=e}xM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:pA(this,this._t0,ute(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,pA(this,ute(this,n=cte(this,e,t)),n);break;default:pA(this,this._t0,n=cte(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};Object.create(xM.prototype).point=function(e,t){xM.prototype.point.call(this,t,e)};function kSt(e){return new xM(e)}function Rwe(e){this._context=e}Rwe.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=dte(e),s=dte(t),a=0,i=1;i<n;++a,++i)this._context.bezierCurveTo(r[0][a],s[0][a],r[1][a],s[1][a],e[i],t[i]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function dte(e){var t,n=e.length-1,r,s=new Array(n),a=new Array(n),i=new Array(n);for(s[0]=0,a[0]=2,i[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,a[t]=4,i[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,a[n-1]=7,i[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/a[t-1],a[t]-=r,i[t]-=r*i[t-1];for(s[n-1]=i[n-1]/a[n-1],t=n-2;t>=0;--t)s[t]=(i[t]-s[t+1])/a[t];for(a[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)a[t]=2*e[t+1]-s[t+1];return[s,a]}function TSt(e){return new Rwe(e)}function ey(e,t){if((i=e.length)>1)for(var n=1,r,s,a=e[t[0]],i,l=a.length;n<i;++n)for(s=a,a=e[t[n]],r=0;r<l;++r)a[r][1]+=a[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function ty(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function NSt(e,t){return e[t]}function $$(){var e=Tn([]),t=ty,n=ey,r=NSt;function s(a){var i=e.apply(this,arguments),l,c=a.length,u=i.length,f=new Array(u),m;for(l=0;l<u;++l){for(var p=i[l],h=f[l]=new Array(c),g=0,y;g<c;++g)h[g]=y=[0,+r(a[g],p,g,a)],y.data=a[g];h.key=p}for(l=0,m=t(f);l<u;++l)f[m[l]].index=l;return n(f,m),f}return s.keys=function(a){return arguments.length?(e=typeof a=="function"?a:Tn(o9.call(a)),s):e},s.value=function(a){return arguments.length?(r=typeof a=="function"?a:Tn(+a),s):r},s.order=function(a){return arguments.length?(t=a==null?ty:typeof a=="function"?a:Tn(o9.call(a)),s):t},s.offset=function(a){return arguments.length?(n=a??ey,s):n},s}function jSt(e,t){if((r=e.length)>0){for(var n,r,s=0,a=e[0].length,i;s<a;++s){for(i=n=0;n<r;++n)i+=e[n][s][1]||0;if(i)for(n=0;n<r;++n)e[n][s][1]/=i}ey(e,t)}}function ASt(e,t){if((c=e.length)>0)for(var n,r=0,s,a,i,l,c,u=e[t[0]].length;r<u;++r)for(i=l=0,n=0;n<c;++n)(a=(s=e[t[n]][r])[1]-s[0])>0?(s[0]=i,s[1]=i+=a):a<0?(s[1]=l,s[0]=l+=a):(s[0]=0,s[1]=a)}function ISt(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,a=r.length;n<a;++n){for(var i=0,l=0;i<s;++i)l+=e[i][n][1]||0;r[n][1]+=r[n][0]=-l/2}ey(e,t)}}function RSt(e,t){if(!(!((i=e.length)>0)||!((a=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,a,i;r<a;++r){for(var l=0,c=0,u=0;l<i;++l){for(var f=e[t[l]],m=f[r][1]||0,p=f[r-1][1]||0,h=(m-p)/2,g=0;g<l;++g){var y=e[t[g]],x=y[r][1]||0,v=y[r-1][1]||0;h+=x-v}c+=m,u+=h*m}s[r-1][1]+=s[r-1][0]=n,c&&(n-=u/c)}s[r-1][1]+=s[r-1][0]=n,ey(e,t)}}function PSt(e){var t=e.map(LSt);return ty(e).sort(function(n,r){return t[n]-t[r]})}function LSt(e){for(var t=-1,n=0,r=e.length,s,a=-1/0;++t<r;)(s=+e[t][1])>a&&(a=s,n=t);return n}function Pwe(e){var t=e.map(Lwe);return ty(e).sort(function(n,r){return t[n]-t[r]})}function Lwe(e){for(var t=0,n=-1,r=e.length,s;++n<r;)(s=+e[n][1])&&(t+=s);return t}function OSt(e){return Pwe(e).reverse()}function DSt(e){var t=e.length,n,r,s=e.map(Lwe),a=PSt(e),i=0,l=0,c=[],u=[];for(n=0;n<t;++n)r=a[n],i<l?(i+=s[r],c.push(r)):(l+=s[r],u.push(r));return u.reverse().concat(c)}function FSt(e){return ty(e).reverse()}var USt=["children","id","from","to","x1","y1","x2","y2","fromOffset","fromOpacity","toOffset","toOpacity","rotate","transform","vertical"];function i9(){return i9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i9.apply(this,arguments)}function BSt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function X3(e){var t=e.children,n=e.id,r=e.from,s=e.to,a=e.x1,i=e.y1,l=e.x2,c=e.y2,u=e.fromOffset,f=u===void 0?"0%":u,m=e.fromOpacity,p=m===void 0?1:m,h=e.toOffset,g=h===void 0?"100%":h,y=e.toOpacity,x=y===void 0?1:y,v=e.rotate,b=e.transform,_=e.vertical,w=_===void 0?!0:_,C=BSt(e,USt),S=a,E=l,k=i,M=c;return w&&!S&&!E&&!k&&!M&&(S="0",E="0",k="0",M="1"),I.createElement("defs",null,I.createElement("linearGradient",i9({id:n,x1:S,y1:k,x2:E,y2:M,gradientTransform:v?"rotate("+v+")":b},C),!!t&&t,!t&&I.createElement("stop",{offset:f,stopColor:r,stopOpacity:p}),!t&&I.createElement("stop",{offset:g,stopColor:s,stopOpacity:x})))}X3.propTypes={id:Fe.string.isRequired,from:Fe.string,to:Fe.string,x1:Fe.oneOfType([Fe.string,Fe.number]),x2:Fe.oneOfType([Fe.string,Fe.number]),y1:Fe.oneOfType([Fe.string,Fe.number]),y2:Fe.oneOfType([Fe.string,Fe.number]),fromOffset:Fe.oneOfType([Fe.string,Fe.number]),fromOpacity:Fe.oneOfType([Fe.string,Fe.number]),toOffset:Fe.oneOfType([Fe.string,Fe.number]),toOpacity:Fe.oneOfType([Fe.string,Fe.number]),rotate:Fe.oneOfType([Fe.string,Fe.number]),transform:Fe.string,children:Fe.node,vertical:Fe.bool};function V0(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function $St(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Z3(e){let t,n,r;e.length!==2?(t=V0,n=(l,c)=>V0(e(l),c),r=(l,c)=>e(l)-c):(t=e===V0||e===$St?e:VSt,n=e,r=e);function s(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const m=u+f>>>1;n(l[m],c)<0?u=m+1:f=m}while(u<f)}return u}function a(l,c,u=0,f=l.length){if(u<f){if(t(c,c)!==0)return f;do{const m=u+f>>>1;n(l[m],c)<=0?u=m+1:f=m}while(u<f)}return u}function i(l,c,u=0,f=l.length){const m=s(l,c,u,f-1);return m>u&&r(l[m-1],c)>-r(l[m],c)?m-1:m}return{left:s,center:i,right:a}}function VSt(){return 0}function Owe(e){return e===null?NaN:+e}const WSt=Z3(V0),jx=WSt.right;Z3(Owe).center;function co(e,t){let n,r;if(t===void 0)for(const s of e)s!=null&&(n===void 0?s>=s&&(n=r=s):(n>s&&(n=s),r<s&&(r=s)));else{let s=-1;for(let a of e)(a=t(a,++s,e))!=null&&(n===void 0?a>=a&&(n=r=a):(n>a&&(n=a),r<a&&(r=a)))}return[n,r]}class fte extends Map{constructor(t,n=GSt){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(mte(this,t))}has(t){return super.has(mte(this,t))}set(t,n){return super.set(HSt(this,t),n)}delete(t){return super.delete(zSt(this,t))}}function mte({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function HSt({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function zSt({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function GSt(e){return e!==null&&typeof e=="object"?e.valueOf():e}var l9=Math.sqrt(50),c9=Math.sqrt(10),u9=Math.sqrt(2);function d9(e,t,n){var r,s=-1,a,i,l;if(t=+t,e=+e,n=+n,e===t&&n>0)return[e];if((r=t<e)&&(a=e,e=t,t=a),(l=Dwe(e,t,n))===0||!isFinite(l))return[];if(l>0){let c=Math.round(e/l),u=Math.round(t/l);for(c*l<e&&++c,u*l>t&&--u,i=new Array(a=u-c+1);++s<a;)i[s]=(c+s)*l}else{l=-l;let c=Math.round(e*l),u=Math.round(t*l);for(c/l<e&&++c,u/l>t&&--u,i=new Array(a=u-c+1);++s<a;)i[s]=(c+s)/l}return r&&i.reverse(),i}function Dwe(e,t,n){var r=(t-e)/Math.max(0,n),s=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,s);return s>=0?(a>=l9?10:a>=c9?5:a>=u9?2:1)*Math.pow(10,s):-Math.pow(10,-s)/(a>=l9?10:a>=c9?5:a>=u9?2:1)}function f9(e,t,n){var r=Math.abs(t-e)/Math.max(0,n),s=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/s;return a>=l9?s*=10:a>=c9?s*=5:a>=u9&&(s*=2),t<e?-s:s}function qSt(e,t,n=Owe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,a=Math.floor(s),i=+n(e[a],a,e),l=+n(e[a+1],a+1,e);return i+(l-i)*(s-a)}}function KSt(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(s);++r<s;)a[r]=e+r*n;return a}function Ii(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const pte=Symbol("implicit");function V$(){var e=new fte,t=[],n=[],r=pte;function s(a){let i=e.get(a);if(i===void 0){if(r!==pte)return r;e.set(a,i=t.push(a)-1)}return n[i%n.length]}return s.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new fte;for(const i of a)e.has(i)||e.set(i,t.push(i)-1);return s},s.range=function(a){return arguments.length?(n=Array.from(a),s):n.slice()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return V$(t,n).unknown(r)},Ii.apply(s,arguments),s}function W$(){var e=V$().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,a,i,l=!1,c=0,u=0,f=.5;delete e.unknown;function m(){var p=t().length,h=s<r,g=h?s:r,y=h?r:s;a=(y-g)/Math.max(1,p-c+u*2),l&&(a=Math.floor(a)),g+=(y-g-a*(p-c))*f,i=a*(1-c),l&&(g=Math.round(g),i=Math.round(i));var x=KSt(p).map(function(v){return g+a*v});return n(h?x.reverse():x)}return e.domain=function(p){return arguments.length?(t(p),m()):t()},e.range=function(p){return arguments.length?([r,s]=p,r=+r,s=+s,m()):[r,s]},e.rangeRound=function(p){return[r,s]=p,r=+r,s=+s,l=!0,m()},e.bandwidth=function(){return i},e.step=function(){return a},e.round=function(p){return arguments.length?(l=!!p,m()):l},e.padding=function(p){return arguments.length?(c=Math.min(1,u=+p),m()):c},e.paddingInner=function(p){return arguments.length?(c=Math.min(1,p),m()):c},e.paddingOuter=function(p){return arguments.length?(u=+p,m()):u},e.align=function(p){return arguments.length?(f=Math.max(0,Math.min(1,p)),m()):f},e.copy=function(){return W$(t(),[r,s]).round(l).paddingInner(c).paddingOuter(u).align(f)},Ii.apply(m(),arguments)}function Fwe(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return Fwe(t())},e}function YSt(){return Fwe(W$.apply(null,arguments).paddingInner(1))}function Ax(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function q_(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function vf(){}var Km=.7,ny=1/Km,mg="\\s*([+-]?\\d+)\\s*",nb="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",tc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",QSt=/^#([0-9a-f]{3,8})$/,XSt=new RegExp(`^rgb\\(${mg},${mg},${mg}\\)$`),ZSt=new RegExp(`^rgb\\(${tc},${tc},${tc}\\)$`),JSt=new RegExp(`^rgba\\(${mg},${mg},${mg},${nb}\\)$`),e2t=new RegExp(`^rgba\\(${tc},${tc},${tc},${nb}\\)$`),t2t=new RegExp(`^hsl\\(${nb},${tc},${tc}\\)$`),n2t=new RegExp(`^hsla\\(${nb},${tc},${tc},${nb}\\)$`),hte={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ax(vf,rb,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:gte,formatHex:gte,formatHex8:r2t,formatHsl:s2t,formatRgb:yte,toString:yte});function gte(){return this.rgb().formatHex()}function r2t(){return this.rgb().formatHex8()}function s2t(){return Uwe(this).formatHsl()}function yte(){return this.rgb().formatRgb()}function rb(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=QSt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xte(t):n===3?new js(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?nS(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?nS(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=XSt.exec(e))?new js(t[1],t[2],t[3],1):(t=ZSt.exec(e))?new js(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=JSt.exec(e))?nS(t[1],t[2],t[3],t[4]):(t=e2t.exec(e))?nS(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=t2t.exec(e))?_te(t[1],t[2]/100,t[3]/100,1):(t=n2t.exec(e))?_te(t[1],t[2]/100,t[3]/100,t[4]):hte.hasOwnProperty(e)?xte(hte[e]):e==="transparent"?new js(NaN,NaN,NaN,0):null}function xte(e){return new js(e>>16&255,e>>8&255,e&255,1)}function nS(e,t,n,r){return r<=0&&(e=t=n=NaN),new js(e,t,n,r)}function H$(e){return e instanceof vf||(e=rb(e)),e?(e=e.rgb(),new js(e.r,e.g,e.b,e.opacity)):new js}function m9(e,t,n,r){return arguments.length===1?H$(e):new js(e,t,n,r??1)}function js(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Ax(js,m9,q_(vf,{brighter(e){return e=e==null?ny:Math.pow(ny,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new js(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new js(Cm(this.r),Cm(this.g),Cm(this.b),vM(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vte,formatHex:vte,formatHex8:a2t,formatRgb:bte,toString:bte}));function vte(){return`#${fm(this.r)}${fm(this.g)}${fm(this.b)}`}function a2t(){return`#${fm(this.r)}${fm(this.g)}${fm(this.b)}${fm((isNaN(this.opacity)?1:this.opacity)*255)}`}function bte(){const e=vM(this.opacity);return`${e===1?"rgb(":"rgba("}${Cm(this.r)}, ${Cm(this.g)}, ${Cm(this.b)}${e===1?")":`, ${e})`}`}function vM(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Cm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function fm(e){return e=Cm(e),(e<16?"0":"")+e.toString(16)}function _te(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Yi(e,t,n,r)}function Uwe(e){if(e instanceof Yi)return new Yi(e.h,e.s,e.l,e.opacity);if(e instanceof vf||(e=rb(e)),!e)return new Yi;if(e instanceof Yi)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),a=Math.max(t,n,r),i=NaN,l=a-s,c=(a+s)/2;return l?(t===a?i=(n-r)/l+(n<r)*6:n===a?i=(r-t)/l+2:i=(t-n)/l+4,l/=c<.5?a+s:2-a-s,i*=60):l=c>0&&c<1?0:i,new Yi(i,l,c,e.opacity)}function p9(e,t,n,r){return arguments.length===1?Uwe(e):new Yi(e,t,n,r??1)}function Yi(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ax(Yi,p9,q_(vf,{brighter(e){return e=e==null?ny:Math.pow(ny,e),new Yi(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new Yi(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new js(hA(e>=240?e-240:e+120,s,r),hA(e,s,r),hA(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new Yi(wte(this.h),rS(this.s),rS(this.l),vM(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vM(this.opacity);return`${e===1?"hsl(":"hsla("}${wte(this.h)}, ${rS(this.s)*100}%, ${rS(this.l)*100}%${e===1?")":`, ${e})`}`}}));function wte(e){return e=(e||0)%360,e<0?e+360:e}function rS(e){return Math.max(0,Math.min(1,e||0))}function hA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Bwe=Math.PI/180,$we=180/Math.PI,bM=18,Vwe=.96422,Wwe=1,Hwe=.82521,zwe=4/29,pg=6/29,Gwe=3*pg*pg,o2t=pg*pg*pg;function qwe(e){if(e instanceof nc)return new nc(e.l,e.a,e.b,e.opacity);if(e instanceof cu)return Kwe(e);e instanceof js||(e=H$(e));var t=vA(e.r),n=vA(e.g),r=vA(e.b),s=gA((.2225045*t+.7168786*n+.0606169*r)/Wwe),a,i;return t===n&&n===r?a=i=s:(a=gA((.4360747*t+.3850649*n+.1430804*r)/Vwe),i=gA((.0139322*t+.0971045*n+.7141733*r)/Hwe)),new nc(116*s-16,500*(a-s),200*(s-i),e.opacity)}function h9(e,t,n,r){return arguments.length===1?qwe(e):new nc(e,t,n,r??1)}function nc(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}Ax(nc,h9,q_(vf,{brighter(e){return new nc(this.l+bM*(e??1),this.a,this.b,this.opacity)},darker(e){return new nc(this.l-bM*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=Vwe*yA(t),e=Wwe*yA(e),n=Hwe*yA(n),new js(xA(3.1338561*t-1.6168667*e-.4906146*n),xA(-.9787684*t+1.9161415*e+.033454*n),xA(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function gA(e){return e>o2t?Math.pow(e,1/3):e/Gwe+zwe}function yA(e){return e>pg?e*e*e:Gwe*(e-zwe)}function xA(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function vA(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function i2t(e){if(e instanceof cu)return new cu(e.h,e.c,e.l,e.opacity);if(e instanceof nc||(e=qwe(e)),e.a===0&&e.b===0)return new cu(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*$we;return new cu(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function g9(e,t,n,r){return arguments.length===1?i2t(e):new cu(e,t,n,r??1)}function cu(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function Kwe(e){if(isNaN(e.h))return new nc(e.l,0,0,e.opacity);var t=e.h*Bwe;return new nc(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}Ax(cu,g9,q_(vf,{brighter(e){return new cu(this.h,this.c,this.l+bM*(e??1),this.opacity)},darker(e){return new cu(this.h,this.c,this.l-bM*(e??1),this.opacity)},rgb(){return Kwe(this).rgb()}}));var Ywe=-.14861,z$=1.78277,G$=-.29227,J3=-.90649,sb=1.97294,Cte=sb*J3,Ste=sb*z$,Ete=z$*G$-J3*Ywe;function l2t(e){if(e instanceof Sm)return new Sm(e.h,e.s,e.l,e.opacity);e instanceof js||(e=H$(e));var t=e.r/255,n=e.g/255,r=e.b/255,s=(Ete*r+Cte*t-Ste*n)/(Ete+Cte-Ste),a=r-s,i=(sb*(n-s)-G$*a)/J3,l=Math.sqrt(i*i+a*a)/(sb*s*(1-s)),c=l?Math.atan2(i,a)*$we-120:NaN;return new Sm(c<0?c+360:c,l,s,e.opacity)}function y9(e,t,n,r){return arguments.length===1?l2t(e):new Sm(e,t,n,r??1)}function Sm(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Ax(Sm,y9,q_(vf,{brighter(e){return e=e==null?ny:Math.pow(ny,e),new Sm(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Km:Math.pow(Km,e),new Sm(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Bwe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),s=Math.sin(e);return new js(255*(t+n*(Ywe*r+z$*s)),255*(t+n*(G$*r+J3*s)),255*(t+n*(sb*r)),this.opacity)}}));const eT=e=>()=>e;function Qwe(e,t){return function(n){return e+n*t}}function c2t(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function q$(e,t){var n=t-e;return n?Qwe(e,n>180||n<-180?n-360*Math.round(n/360):n):eT(isNaN(e)?t:e)}function u2t(e){return(e=+e)==1?As:function(t,n){return n-t?c2t(t,n,e):eT(isNaN(t)?n:t)}}function As(e,t){var n=t-e;return n?Qwe(e,n):eT(isNaN(e)?t:e)}const x9=function e(t){var n=u2t(t);function r(s,a){var i=n((s=m9(s)).r,(a=m9(a)).r),l=n(s.g,a.g),c=n(s.b,a.b),u=As(s.opacity,a.opacity);return function(f){return s.r=i(f),s.g=l(f),s.b=c(f),s.opacity=u(f),s+""}}return r.gamma=e,r}(1);function d2t(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(a){for(s=0;s<n;++s)r[s]=e[s]*(1-a)+t[s]*a;return r}}function f2t(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function m2t(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),a=new Array(n),i;for(i=0;i<r;++i)s[i]=K$(e[i],t[i]);for(;i<n;++i)a[i]=t[i];return function(l){for(i=0;i<r;++i)a[i]=s[i](l);return a}}function p2t(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function _M(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function h2t(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=K$(e[s],t[s]):r[s]=t[s];return function(a){for(s in n)r[s]=n[s](a);return r}}var v9=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,bA=new RegExp(v9.source,"g");function g2t(e){return function(){return e}}function y2t(e){return function(t){return e(t)+""}}function x2t(e,t){var n=v9.lastIndex=bA.lastIndex=0,r,s,a,i=-1,l=[],c=[];for(e=e+"",t=t+"";(r=v9.exec(e))&&(s=bA.exec(t));)(a=s.index)>n&&(a=t.slice(n,a),l[i]?l[i]+=a:l[++i]=a),(r=r[0])===(s=s[0])?l[i]?l[i]+=s:l[++i]=s:(l[++i]=null,c.push({i,x:_M(r,s)})),n=bA.lastIndex;return n<t.length&&(a=t.slice(n),l[i]?l[i]+=a:l[++i]=a),l.length<2?c[0]?y2t(c[0].x):g2t(t):(t=c.length,function(u){for(var f=0,m;f<t;++f)l[(m=c[f]).i]=m.x(u);return l.join("")})}function K$(e,t){var n=typeof t,r;return t==null||n==="boolean"?eT(t):(n==="number"?_M:n==="string"?(r=rb(t))?(t=r,x9):x2t:t instanceof rb?x9:t instanceof Date?p2t:f2t(t)?d2t:Array.isArray(t)?m2t:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?h2t:_M)(e,t)}function Xwe(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Zwe(e){return function(t,n){var r=e((t=p9(t)).h,(n=p9(n)).h),s=As(t.s,n.s),a=As(t.l,n.l),i=As(t.opacity,n.opacity);return function(l){return t.h=r(l),t.s=s(l),t.l=a(l),t.opacity=i(l),t+""}}}const v2t=Zwe(q$);var b2t=Zwe(As);function _2t(e,t){var n=As((e=h9(e)).l,(t=h9(t)).l),r=As(e.a,t.a),s=As(e.b,t.b),a=As(e.opacity,t.opacity);return function(i){return e.l=n(i),e.a=r(i),e.b=s(i),e.opacity=a(i),e+""}}function Jwe(e){return function(t,n){var r=e((t=g9(t)).h,(n=g9(n)).h),s=As(t.c,n.c),a=As(t.l,n.l),i=As(t.opacity,n.opacity);return function(l){return t.h=r(l),t.c=s(l),t.l=a(l),t.opacity=i(l),t+""}}}const w2t=Jwe(q$);var C2t=Jwe(As);function eCe(e){return function t(n){n=+n;function r(s,a){var i=e((s=y9(s)).h,(a=y9(a)).h),l=As(s.s,a.s),c=As(s.l,a.l),u=As(s.opacity,a.opacity);return function(f){return s.h=i(f),s.s=l(f),s.l=c(Math.pow(f,n)),s.opacity=u(f),s+""}}return r.gamma=t,r}(1)}const S2t=eCe(q$);var E2t=eCe(As);function M2t(e){return function(){return e}}function tCe(e){return+e}var Mte=[0,1];function Hl(e){return e}function b9(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:M2t(isNaN(t)?NaN:.5)}function k2t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function T2t(e,t,n){var r=e[0],s=e[1],a=t[0],i=t[1];return s<r?(r=b9(s,r),a=n(i,a)):(r=b9(r,s),a=n(a,i)),function(l){return a(r(l))}}function N2t(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),a=new Array(r),i=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++i<r;)s[i]=b9(e[i],e[i+1]),a[i]=n(t[i],t[i+1]);return function(l){var c=jx(e,l,1,r)-1;return a[c](s[c](l))}}function K_(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function tT(){var e=Mte,t=Mte,n=K$,r,s,a,i=Hl,l,c,u;function f(){var p=Math.min(e.length,t.length);return i!==Hl&&(i=k2t(e[0],e[p-1])),l=p>2?N2t:T2t,c=u=null,m}function m(p){return p==null||isNaN(p=+p)?a:(c||(c=l(e.map(r),t,n)))(r(i(p)))}return m.invert=function(p){return i(s((u||(u=l(t,e.map(r),_M)))(p)))},m.domain=function(p){return arguments.length?(e=Array.from(p,tCe),f()):e.slice()},m.range=function(p){return arguments.length?(t=Array.from(p),f()):t.slice()},m.rangeRound=function(p){return t=Array.from(p),n=Xwe,f()},m.clamp=function(p){return arguments.length?(i=p?!0:Hl,f()):i!==Hl},m.interpolate=function(p){return arguments.length?(n=p,f()):n},m.unknown=function(p){return arguments.length?(a=p,m):a},function(p,h){return r=p,s=h,f()}}function Y$(){return tT()(Hl,Hl)}function j2t(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function wM(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ry(e){return e=wM(Math.abs(e)),e?e[1]:NaN}function A2t(e,t){return function(n,r){for(var s=n.length,a=[],i=0,l=e[0],c=0;s>0&&l>0&&(c+l+1>r&&(l=Math.max(1,r-c)),a.push(n.substring(s-=l,s+l)),!((c+=l+1)>r));)l=e[i=(i+1)%e.length];return a.reverse().join(t)}}function I2t(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var R2t=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ab(e){if(!(t=R2t.exec(e)))throw new Error("invalid format: "+e);var t;return new Q$({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}ab.prototype=Q$.prototype;function Q$(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Q$.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function P2t(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var nCe;function L2t(e,t){var n=wM(e,t);if(!n)return e+"";var r=n[0],s=n[1],a=s-(nCe=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,i=r.length;return a===i?r:a>i?r+new Array(a-i+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+wM(e,Math.max(0,t+a-1))[0]}function kte(e,t){var n=wM(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const Tte={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:j2t,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>kte(e*100,t),r:kte,s:L2t,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Nte(e){return e}var jte=Array.prototype.map,Ate=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function O2t(e){var t=e.grouping===void 0||e.thousands===void 0?Nte:A2t(jte.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?Nte:I2t(jte.call(e.numerals,String)),i=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function u(m){m=ab(m);var p=m.fill,h=m.align,g=m.sign,y=m.symbol,x=m.zero,v=m.width,b=m.comma,_=m.precision,w=m.trim,C=m.type;C==="n"?(b=!0,C="g"):Tte[C]||(_===void 0&&(_=12),w=!0,C="g"),(x||p==="0"&&h==="=")&&(x=!0,p="0",h="=");var S=y==="$"?n:y==="#"&&/[boxX]/.test(C)?"0"+C.toLowerCase():"",E=y==="$"?r:/[%p]/.test(C)?i:"",k=Tte[C],M=/[defgprs%]/.test(C);_=_===void 0?6:/[gprs]/.test(C)?Math.max(1,Math.min(21,_)):Math.max(0,Math.min(20,_));function j(R){var O=S,D=E,P,A,T;if(C==="c")D=k(R)+D,R="";else{R=+R;var N=R<0||1/R<0;if(R=isNaN(R)?c:k(Math.abs(R),_),w&&(R=P2t(R)),N&&+R==0&&g!=="+"&&(N=!1),O=(N?g==="("?g:l:g==="-"||g==="("?"":g)+O,D=(C==="s"?Ate[8+nCe/3]:"")+D+(N&&g==="("?")":""),M){for(P=-1,A=R.length;++P<A;)if(T=R.charCodeAt(P),48>T||T>57){D=(T===46?s+R.slice(P+1):R.slice(P))+D,R=R.slice(0,P);break}}}b&&!x&&(R=t(R,1/0));var L=O.length+R.length+D.length,U=L<v?new Array(v-L+1).join(p):"";switch(b&&x&&(R=t(U+R,U.length?v-D.length:1/0),U=""),h){case"<":R=O+R+D+U;break;case"=":R=O+U+R+D;break;case"^":R=U.slice(0,L=U.length>>1)+O+R+D+U.slice(L);break;default:R=U+O+R+D;break}return a(R)}return j.toString=function(){return m+""},j}function f(m,p){var h=u((m=ab(m),m.type="f",m)),g=Math.max(-8,Math.min(8,Math.floor(ry(p)/3)))*3,y=Math.pow(10,-g),x=Ate[8+g/3];return function(v){return h(y*v)+x}}return{format:u,formatPrefix:f}}var sS,X$,rCe;D2t({thousands:",",grouping:[3],currency:["$",""]});function D2t(e){return sS=O2t(e),X$=sS.format,rCe=sS.formatPrefix,sS}function F2t(e){return Math.max(0,-ry(Math.abs(e)))}function U2t(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ry(t)/3)))*3-ry(Math.abs(e)))}function B2t(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ry(t)-ry(e))+1}function $2t(e,t,n,r){var s=f9(e,t,n),a;switch(r=ab(r??",f"),r.type){case"s":{var i=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=U2t(s,i))&&(r.precision=a),rCe(r,i)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=B2t(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=F2t(s))&&(r.precision=a-(r.type==="%")*2);break}}return X$(r)}function Y_(e){var t=e.domain;return e.ticks=function(n){var r=t();return d9(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return $2t(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,a=r.length-1,i=r[s],l=r[a],c,u,f=10;for(l<i&&(u=i,i=l,l=u,u=s,s=a,a=u);f-- >0;){if(u=Dwe(i,l,n),u===c)return r[s]=i,r[a]=l,t(r);if(u>0)i=Math.floor(i/u)*u,l=Math.ceil(l/u)*u;else if(u<0)i=Math.ceil(i*u)/u,l=Math.floor(l*u)/u;else break;c=u}return e},e}function sCe(){var e=Y$();return e.copy=function(){return K_(e,sCe())},Ii.apply(e,arguments),Y_(e)}function aCe(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],a=e[r],i;return a<s&&(i=n,n=r,r=i,i=s,s=a,a=i),e[n]=t.floor(s),e[r]=t.ceil(a),e}function Ite(e){return Math.log(e)}function Rte(e){return Math.exp(e)}function V2t(e){return-Math.log(-e)}function W2t(e){return-Math.exp(-e)}function H2t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function z2t(e){return e===10?H2t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function G2t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Pte(e){return(t,n)=>-e(-t,n)}function q2t(e){const t=e(Ite,Rte),n=t.domain;let r=10,s,a;function i(){return s=G2t(r),a=z2t(r),n()[0]<0?(s=Pte(s),a=Pte(a),e(V2t,W2t)):e(Ite,Rte),t}return t.base=function(l){return arguments.length?(r=+l,i()):r},t.domain=function(l){return arguments.length?(n(l),i()):n()},t.ticks=l=>{const c=n();let u=c[0],f=c[c.length-1];const m=f<u;m&&([u,f]=[f,u]);let p=s(u),h=s(f),g,y;const x=l==null?10:+l;let v=[];if(!(r%1)&&h-p<x){if(p=Math.floor(p),h=Math.ceil(h),u>0){for(;p<=h;++p)for(g=1;g<r;++g)if(y=p<0?g/a(-p):g*a(p),!(y<u)){if(y>f)break;v.push(y)}}else for(;p<=h;++p)for(g=r-1;g>=1;--g)if(y=p>0?g/a(-p):g*a(p),!(y<u)){if(y>f)break;v.push(y)}v.length*2<x&&(v=d9(u,f,x))}else v=d9(p,h,Math.min(h-p,x)).map(a);return m?v.reverse():v},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=r===10?"s":","),typeof c!="function"&&(!(r%1)&&(c=ab(c)).precision==null&&(c.trim=!0),c=X$(c)),l===1/0)return c;const u=Math.max(1,r*l/t.ticks().length);return f=>{let m=f/a(Math.round(s(f)));return m*r<r-.5&&(m*=r),m<=u?c(f):""}},t.nice=()=>n(aCe(n(),{floor:l=>a(Math.floor(s(l))),ceil:l=>a(Math.ceil(s(l)))})),t}function oCe(){const e=q2t(tT()).domain([1,10]);return e.copy=()=>K_(e,oCe()).base(e.base()),Ii.apply(e,arguments),e}function Lte(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Ote(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function K2t(e){var t=1,n=e(Lte(t),Ote(t));return n.constant=function(r){return arguments.length?e(Lte(t=+r),Ote(t)):t},Y_(n)}function iCe(){var e=K2t(tT());return e.copy=function(){return K_(e,iCe()).constant(e.constant())},Ii.apply(e,arguments)}function Dte(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Y2t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Q2t(e){return e<0?-e*e:e*e}function X2t(e){var t=e(Hl,Hl),n=1;function r(){return n===1?e(Hl,Hl):n===.5?e(Y2t,Q2t):e(Dte(n),Dte(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},Y_(t)}function Z$(){var e=X2t(tT());return e.copy=function(){return K_(e,Z$()).exponent(e.exponent())},Ii.apply(e,arguments),e}function Z2t(){return Z$.apply(null,arguments).exponent(.5)}function Fte(e){return Math.sign(e)*e*e}function J2t(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function lCe(){var e=Y$(),t=[0,1],n=!1,r;function s(a){var i=J2t(e(a));return isNaN(i)?r:n?Math.round(i):i}return s.invert=function(a){return e.invert(Fte(a))},s.domain=function(a){return arguments.length?(e.domain(a),s):e.domain()},s.range=function(a){return arguments.length?(e.range((t=Array.from(a,tCe)).map(Fte)),s):t.slice()},s.rangeRound=function(a){return s.range(a).round(!0)},s.round=function(a){return arguments.length?(n=!!a,s):n},s.clamp=function(a){return arguments.length?(e.clamp(a),s):e.clamp()},s.unknown=function(a){return arguments.length?(r=a,s):r},s.copy=function(){return lCe(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Ii.apply(s,arguments),Y_(s)}function cCe(){var e=[],t=[],n=[],r;function s(){var i=0,l=Math.max(1,t.length);for(n=new Array(l-1);++i<l;)n[i-1]=qSt(e,i/l);return a}function a(i){return i==null||isNaN(i=+i)?r:t[jx(n,i)]}return a.invertExtent=function(i){var l=t.indexOf(i);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},a.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let l of i)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(V0),s()},a.range=function(i){return arguments.length?(t=Array.from(i),s()):t.slice()},a.unknown=function(i){return arguments.length?(r=i,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return cCe().domain(e).range(t).unknown(r)},Ii.apply(a,arguments)}function uCe(){var e=0,t=1,n=1,r=[.5],s=[0,1],a;function i(c){return c!=null&&c<=c?s[jx(r,c,0,n)]:a}function l(){var c=-1;for(r=new Array(n);++c<n;)r[c]=((c+1)*t-(c-n)*e)/(n+1);return i}return i.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},i.range=function(c){return arguments.length?(n=(s=Array.from(c)).length-1,l()):s.slice()},i.invertExtent=function(c){var u=s.indexOf(c);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},i.unknown=function(c){return arguments.length&&(a=c),i},i.thresholds=function(){return r.slice()},i.copy=function(){return uCe().domain([e,t]).range(s).unknown(a)},Ii.apply(Y_(i),arguments)}function dCe(){var e=[.5],t=[0,1],n,r=1;function s(a){return a!=null&&a<=a?t[jx(e,a,0,r)]:n}return s.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(a){var i=t.indexOf(a);return[e[i-1],e[i]]},s.unknown=function(a){return arguments.length?(n=a,s):n},s.copy=function(){return dCe().domain(e).range(t).unknown(n)},Ii.apply(s,arguments)}const _A=new Date,wA=new Date;function ys(e,t,n,r){function s(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return s.floor=a=>(e(a=new Date(+a)),a),s.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),s.round=a=>{const i=s(a),l=s.ceil(a);return a-i<l-a?i:l},s.offset=(a,i)=>(t(a=new Date(+a),i==null?1:Math.floor(i)),a),s.range=(a,i,l)=>{const c=[];if(a=s.ceil(a),l=l==null?1:Math.floor(l),!(a<i)||!(l>0))return c;let u;do c.push(u=new Date(+a)),t(a,l),e(a);while(u<a&&a<i);return c},s.filter=a=>ys(i=>{if(i>=i)for(;e(i),!a(i);)i.setTime(i-1)},(i,l)=>{if(i>=i)if(l<0)for(;++l<=0;)for(;t(i,-1),!a(i););else for(;--l>=0;)for(;t(i,1),!a(i););}),n&&(s.count=(a,i)=>(_A.setTime(+a),wA.setTime(+i),e(_A),e(wA),Math.floor(n(_A,wA))),s.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?s.filter(r?i=>r(i)%a===0:i=>s.count(0,i)%a===0):s)),s}const CM=ys(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);CM.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?ys(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):CM);CM.range;const uu=1e3,_i=uu*60,du=_i*60,Eu=du*24,J$=Eu*7,Ute=Eu*30,CA=Eu*365,fu=ys(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*uu)},(e,t)=>(t-e)/uu,e=>e.getUTCSeconds());fu.range;const nT=ys(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uu)},(e,t)=>{e.setTime(+e+t*_i)},(e,t)=>(t-e)/_i,e=>e.getMinutes());nT.range;const rT=ys(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*_i)},(e,t)=>(t-e)/_i,e=>e.getUTCMinutes());rT.range;const sT=ys(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*uu-e.getMinutes()*_i)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getHours());sT.range;const aT=ys(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*du)},(e,t)=>(t-e)/du,e=>e.getUTCHours());aT.range;const Ix=ys(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*_i)/Eu,e=>e.getDate()-1);Ix.range;const Q_=ys(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Eu,e=>e.getUTCDate()-1);Q_.range;const fCe=ys(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Eu,e=>Math.floor(e/Eu));fCe.range;function Mp(e){return ys(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*_i)/J$)}const X_=Mp(0),SM=Mp(1),eEt=Mp(2),tEt=Mp(3),sy=Mp(4),nEt=Mp(5),rEt=Mp(6);X_.range;SM.range;eEt.range;tEt.range;sy.range;nEt.range;rEt.range;function kp(e){return ys(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/J$)}const Z_=kp(0),EM=kp(1),sEt=kp(2),aEt=kp(3),ay=kp(4),oEt=kp(5),iEt=kp(6);Z_.range;EM.range;sEt.range;aEt.range;ay.range;oEt.range;iEt.range;const J_=ys(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());J_.range;const oT=ys(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());oT.range;const cl=ys(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());cl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ys(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});cl.range;const yc=ys(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yc.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:ys(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});yc.range;function mCe(e,t,n,r,s,a){const i=[[fu,1,uu],[fu,5,5*uu],[fu,15,15*uu],[fu,30,30*uu],[a,1,_i],[a,5,5*_i],[a,15,15*_i],[a,30,30*_i],[s,1,du],[s,3,3*du],[s,6,6*du],[s,12,12*du],[r,1,Eu],[r,2,2*Eu],[n,1,J$],[t,1,Ute],[t,3,3*Ute],[e,1,CA]];function l(u,f,m){const p=f<u;p&&([u,f]=[f,u]);const h=m&&typeof m.range=="function"?m:c(u,f,m),g=h?h.range(u,+f+1):[];return p?g.reverse():g}function c(u,f,m){const p=Math.abs(f-u)/m,h=Z3(([,,x])=>x).right(i,p);if(h===i.length)return e.every(f9(u/CA,f/CA,m));if(h===0)return CM.every(Math.max(f9(u,f,m),1));const[g,y]=i[p/i[h-1][2]<i[h][2]/p?h-1:h];return g.every(y)}return[l,c]}const[lEt,cEt]=mCe(yc,oT,Z_,fCe,aT,rT),[uEt,dEt]=mCe(cl,J_,X_,Ix,sT,nT);function SA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function EA(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function kv(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function fEt(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,a=e.days,i=e.shortDays,l=e.months,c=e.shortMonths,u=Tv(s),f=Nv(s),m=Tv(a),p=Nv(a),h=Tv(i),g=Nv(i),y=Tv(l),x=Nv(l),v=Tv(c),b=Nv(c),_={a:N,A:L,b:U,B:$,c:null,d:zte,e:zte,f:LEt,g:zEt,G:qEt,H:IEt,I:REt,j:PEt,L:pCe,m:OEt,M:DEt,p:V,q:W,Q:Kte,s:Yte,S:FEt,u:UEt,U:BEt,V:$Et,w:VEt,W:WEt,x:null,X:null,y:HEt,Y:GEt,Z:KEt,"%":qte},w={a:Q,A:q,b:H,B:K,c:null,d:Gte,e:Gte,f:ZEt,g:lMt,G:uMt,H:YEt,I:QEt,j:XEt,L:gCe,m:JEt,M:eMt,p:G,q:ee,Q:Kte,s:Yte,S:tMt,u:nMt,U:rMt,V:sMt,w:aMt,W:oMt,x:null,X:null,y:iMt,Y:cMt,Z:dMt,"%":qte},C={a:j,A:R,b:O,B:D,c:P,d:Wte,e:Wte,f:TEt,g:Vte,G:$te,H:Hte,I:Hte,j:SEt,L:kEt,m:CEt,M:EEt,p:M,q:wEt,Q:jEt,s:AEt,S:MEt,u:yEt,U:xEt,V:vEt,w:gEt,W:bEt,x:A,X:T,y:Vte,Y:$te,Z:_Et,"%":NEt};_.x=S(n,_),_.X=S(r,_),_.c=S(t,_),w.x=S(n,w),w.X=S(r,w),w.c=S(t,w);function S(Y,te){return function(se){var ae=[],pe=-1,fe=0,ge=Y.length,Se,je,ye;for(se instanceof Date||(se=new Date(+se));++pe<ge;)Y.charCodeAt(pe)===37&&(ae.push(Y.slice(fe,pe)),(je=Bte[Se=Y.charAt(++pe)])!=null?Se=Y.charAt(++pe):je=Se==="e"?" ":"0",(ye=te[Se])&&(Se=ye(se,je)),ae.push(Se),fe=pe+1);return ae.push(Y.slice(fe,pe)),ae.join("")}}function E(Y,te){return function(se){var ae=kv(1900,void 0,1),pe=k(ae,Y,se+="",0),fe,ge;if(pe!=se.length)return null;if("Q"in ae)return new Date(ae.Q);if("s"in ae)return new Date(ae.s*1e3+("L"in ae?ae.L:0));if(te&&!("Z"in ae)&&(ae.Z=0),"p"in ae&&(ae.H=ae.H%12+ae.p*12),ae.m===void 0&&(ae.m="q"in ae?ae.q:0),"V"in ae){if(ae.V<1||ae.V>53)return null;"w"in ae||(ae.w=1),"Z"in ae?(fe=EA(kv(ae.y,0,1)),ge=fe.getUTCDay(),fe=ge>4||ge===0?EM.ceil(fe):EM(fe),fe=Q_.offset(fe,(ae.V-1)*7),ae.y=fe.getUTCFullYear(),ae.m=fe.getUTCMonth(),ae.d=fe.getUTCDate()+(ae.w+6)%7):(fe=SA(kv(ae.y,0,1)),ge=fe.getDay(),fe=ge>4||ge===0?SM.ceil(fe):SM(fe),fe=Ix.offset(fe,(ae.V-1)*7),ae.y=fe.getFullYear(),ae.m=fe.getMonth(),ae.d=fe.getDate()+(ae.w+6)%7)}else("W"in ae||"U"in ae)&&("w"in ae||(ae.w="u"in ae?ae.u%7:"W"in ae?1:0),ge="Z"in ae?EA(kv(ae.y,0,1)).getUTCDay():SA(kv(ae.y,0,1)).getDay(),ae.m=0,ae.d="W"in ae?(ae.w+6)%7+ae.W*7-(ge+5)%7:ae.w+ae.U*7-(ge+6)%7);return"Z"in ae?(ae.H+=ae.Z/100|0,ae.M+=ae.Z%100,EA(ae)):SA(ae)}}function k(Y,te,se,ae){for(var pe=0,fe=te.length,ge=se.length,Se,je;pe<fe;){if(ae>=ge)return-1;if(Se=te.charCodeAt(pe++),Se===37){if(Se=te.charAt(pe++),je=C[Se in Bte?te.charAt(pe++):Se],!je||(ae=je(Y,se,ae))<0)return-1}else if(Se!=se.charCodeAt(ae++))return-1}return ae}function M(Y,te,se){var ae=u.exec(te.slice(se));return ae?(Y.p=f.get(ae[0].toLowerCase()),se+ae[0].length):-1}function j(Y,te,se){var ae=h.exec(te.slice(se));return ae?(Y.w=g.get(ae[0].toLowerCase()),se+ae[0].length):-1}function R(Y,te,se){var ae=m.exec(te.slice(se));return ae?(Y.w=p.get(ae[0].toLowerCase()),se+ae[0].length):-1}function O(Y,te,se){var ae=v.exec(te.slice(se));return ae?(Y.m=b.get(ae[0].toLowerCase()),se+ae[0].length):-1}function D(Y,te,se){var ae=y.exec(te.slice(se));return ae?(Y.m=x.get(ae[0].toLowerCase()),se+ae[0].length):-1}function P(Y,te,se){return k(Y,t,te,se)}function A(Y,te,se){return k(Y,n,te,se)}function T(Y,te,se){return k(Y,r,te,se)}function N(Y){return i[Y.getDay()]}function L(Y){return a[Y.getDay()]}function U(Y){return c[Y.getMonth()]}function $(Y){return l[Y.getMonth()]}function V(Y){return s[+(Y.getHours()>=12)]}function W(Y){return 1+~~(Y.getMonth()/3)}function Q(Y){return i[Y.getUTCDay()]}function q(Y){return a[Y.getUTCDay()]}function H(Y){return c[Y.getUTCMonth()]}function K(Y){return l[Y.getUTCMonth()]}function G(Y){return s[+(Y.getUTCHours()>=12)]}function ee(Y){return 1+~~(Y.getUTCMonth()/3)}return{format:function(Y){var te=S(Y+="",_);return te.toString=function(){return Y},te},parse:function(Y){var te=E(Y+="",!1);return te.toString=function(){return Y},te},utcFormat:function(Y){var te=S(Y+="",w);return te.toString=function(){return Y},te},utcParse:function(Y){var te=E(Y+="",!0);return te.toString=function(){return Y},te}}}var Bte={"-":"",_:" ",0:"0"},Ds=/^\s*\d+/,mEt=/^%/,pEt=/[\\^$*+?|[\]().{}]/g;function Dn(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",a=s.length;return r+(a<n?new Array(n-a+1).join(t)+s:s)}function hEt(e){return e.replace(pEt,"\\$&")}function Tv(e){return new RegExp("^(?:"+e.map(hEt).join("|")+")","i")}function Nv(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function gEt(e,t,n){var r=Ds.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function yEt(e,t,n){var r=Ds.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function xEt(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function vEt(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function bEt(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function $te(e,t,n){var r=Ds.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Vte(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function _Et(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function wEt(e,t,n){var r=Ds.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function CEt(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Wte(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function SEt(e,t,n){var r=Ds.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Hte(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function EEt(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function MEt(e,t,n){var r=Ds.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function kEt(e,t,n){var r=Ds.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function TEt(e,t,n){var r=Ds.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function NEt(e,t,n){var r=mEt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function jEt(e,t,n){var r=Ds.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function AEt(e,t,n){var r=Ds.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function zte(e,t){return Dn(e.getDate(),t,2)}function IEt(e,t){return Dn(e.getHours(),t,2)}function REt(e,t){return Dn(e.getHours()%12||12,t,2)}function PEt(e,t){return Dn(1+Ix.count(cl(e),e),t,3)}function pCe(e,t){return Dn(e.getMilliseconds(),t,3)}function LEt(e,t){return pCe(e,t)+"000"}function OEt(e,t){return Dn(e.getMonth()+1,t,2)}function DEt(e,t){return Dn(e.getMinutes(),t,2)}function FEt(e,t){return Dn(e.getSeconds(),t,2)}function UEt(e){var t=e.getDay();return t===0?7:t}function BEt(e,t){return Dn(X_.count(cl(e)-1,e),t,2)}function hCe(e){var t=e.getDay();return t>=4||t===0?sy(e):sy.ceil(e)}function $Et(e,t){return e=hCe(e),Dn(sy.count(cl(e),e)+(cl(e).getDay()===4),t,2)}function VEt(e){return e.getDay()}function WEt(e,t){return Dn(SM.count(cl(e)-1,e),t,2)}function HEt(e,t){return Dn(e.getFullYear()%100,t,2)}function zEt(e,t){return e=hCe(e),Dn(e.getFullYear()%100,t,2)}function GEt(e,t){return Dn(e.getFullYear()%1e4,t,4)}function qEt(e,t){var n=e.getDay();return e=n>=4||n===0?sy(e):sy.ceil(e),Dn(e.getFullYear()%1e4,t,4)}function KEt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Dn(t/60|0,"0",2)+Dn(t%60,"0",2)}function Gte(e,t){return Dn(e.getUTCDate(),t,2)}function YEt(e,t){return Dn(e.getUTCHours(),t,2)}function QEt(e,t){return Dn(e.getUTCHours()%12||12,t,2)}function XEt(e,t){return Dn(1+Q_.count(yc(e),e),t,3)}function gCe(e,t){return Dn(e.getUTCMilliseconds(),t,3)}function ZEt(e,t){return gCe(e,t)+"000"}function JEt(e,t){return Dn(e.getUTCMonth()+1,t,2)}function eMt(e,t){return Dn(e.getUTCMinutes(),t,2)}function tMt(e,t){return Dn(e.getUTCSeconds(),t,2)}function nMt(e){var t=e.getUTCDay();return t===0?7:t}function rMt(e,t){return Dn(Z_.count(yc(e)-1,e),t,2)}function yCe(e){var t=e.getUTCDay();return t>=4||t===0?ay(e):ay.ceil(e)}function sMt(e,t){return e=yCe(e),Dn(ay.count(yc(e),e)+(yc(e).getUTCDay()===4),t,2)}function aMt(e){return e.getUTCDay()}function oMt(e,t){return Dn(EM.count(yc(e)-1,e),t,2)}function iMt(e,t){return Dn(e.getUTCFullYear()%100,t,2)}function lMt(e,t){return e=yCe(e),Dn(e.getUTCFullYear()%100,t,2)}function cMt(e,t){return Dn(e.getUTCFullYear()%1e4,t,4)}function uMt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?ay(e):ay.ceil(e),Dn(e.getUTCFullYear()%1e4,t,4)}function dMt(){return"+0000"}function qte(){return"%"}function Kte(e){return+e}function Yte(e){return Math.floor(+e/1e3)}var ah,ew,xCe;fMt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function fMt(e){return ah=fEt(e),ew=ah.format,ah.parse,xCe=ah.utcFormat,ah.utcParse,ah}function mMt(e){return new Date(e)}function pMt(e){return e instanceof Date?+e:+new Date(+e)}function eV(e,t,n,r,s,a,i,l,c,u){var f=Y$(),m=f.invert,p=f.domain,h=u(".%L"),g=u(":%S"),y=u("%I:%M"),x=u("%I %p"),v=u("%a %d"),b=u("%b %d"),_=u("%B"),w=u("%Y");function C(S){return(c(S)<S?h:l(S)<S?g:i(S)<S?y:a(S)<S?x:r(S)<S?s(S)<S?v:b:n(S)<S?_:w)(S)}return f.invert=function(S){return new Date(m(S))},f.domain=function(S){return arguments.length?p(Array.from(S,pMt)):p().map(mMt)},f.ticks=function(S){var E=p();return e(E[0],E[E.length-1],S??10)},f.tickFormat=function(S,E){return E==null?C:u(E)},f.nice=function(S){var E=p();return(!S||typeof S.range!="function")&&(S=t(E[0],E[E.length-1],S??10)),S?p(aCe(E,S)):f},f.copy=function(){return K_(f,eV(e,t,n,r,s,a,i,l,c,u))},f}function hMt(){return Ii.apply(eV(uEt,dEt,cl,J_,X_,Ix,sT,nT,fu,ew).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function gMt(){return Ii.apply(eV(lEt,cEt,yc,oT,Z_,Q_,aT,rT,fu,xCe).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function yMt(e,t){t.domain&&("nice"in e||"quantiles"in e||"padding"in e,e.domain(t.domain))}function xMt(e,t){t.range&&("padding"in e,e.range(t.range))}function vMt(e,t){"align"in e&&"align"in t&&typeof t.align<"u"&&e.align(t.align)}function bMt(e,t){"base"in e&&"base"in t&&typeof t.base<"u"&&e.base(t.base)}function _Mt(e,t){"clamp"in e&&"clamp"in t&&typeof t.clamp<"u"&&e.clamp(t.clamp)}function wMt(e,t){"constant"in e&&"constant"in t&&typeof t.constant<"u"&&e.constant(t.constant)}function CMt(e,t){"exponent"in e&&"exponent"in t&&typeof t.exponent<"u"&&e.exponent(t.exponent)}var Qte={lab:_2t,hcl:w2t,"hcl-long":C2t,hsl:v2t,"hsl-long":b2t,cubehelix:S2t,"cubehelix-long":E2t,rgb:x9};function SMt(e){switch(e){case"lab":case"hcl":case"hcl-long":case"hsl":case"hsl-long":case"cubehelix":case"cubehelix-long":case"rgb":return Qte[e]}var t=e.type,n=e.gamma,r=Qte[t];return typeof n>"u"?r:r.gamma(n)}function EMt(e,t){if("interpolate"in t&&"interpolate"in e&&typeof t.interpolate<"u"){var n=SMt(t.interpolate);e.interpolate(n)}}var MMt=new Date(Date.UTC(2020,1,2,3,4,5)),kMt="%Y-%m-%d %H:%M";function vCe(e){var t=e.tickFormat(1,kMt)(MMt);return t==="2020-02-02 03:04"}var Xte={day:Ix,hour:sT,minute:nT,month:J_,second:fu,week:X_,year:cl},Zte={day:Q_,hour:aT,minute:rT,month:oT,second:fu,week:Z_,year:yc};function TMt(e,t){if("nice"in t&&typeof t.nice<"u"&&"nice"in e){var n=t.nice;if(typeof n=="boolean")n&&e.nice();else if(typeof n=="number")e.nice(n);else{var r=e,s=vCe(r);if(typeof n=="string")r.nice(s?Zte[n]:Xte[n]);else{var a=n.interval,i=n.step,l=(s?Zte[a]:Xte[a]).every(i);l!=null&&r.nice(l)}}}}function NMt(e,t){"padding"in e&&"padding"in t&&typeof t.padding<"u"&&e.padding(t.padding),"paddingInner"in e&&"paddingInner"in t&&typeof t.paddingInner<"u"&&e.paddingInner(t.paddingInner),"paddingOuter"in e&&"paddingOuter"in t&&typeof t.paddingOuter<"u"&&e.paddingOuter(t.paddingOuter)}function jMt(e,t){if(t.reverse){var n=e.range().slice().reverse();"padding"in e,e.range(n)}}function AMt(e,t){"round"in t&&typeof t.round<"u"&&(t.round&&"interpolate"in t&&typeof t.interpolate<"u"?console.warn("[visx/scale/applyRound] ignoring round: scale config contains round and interpolate. only applying interpolate. config:",t):"round"in e?e.round(t.round):"interpolate"in e&&t.round&&e.interpolate(Xwe))}function IMt(e,t){"unknown"in e&&"unknown"in t&&typeof t.unknown<"u"&&e.unknown(t.unknown)}function RMt(e,t){if("zero"in t&&t.zero===!0){var n=e.domain(),r=n[0],s=n[1],a=s<r,i=a?[s,r]:[r,s],l=i[0],c=i[1],u=[Math.min(0,l),Math.max(0,c)];e.domain(a?u.reverse():u)}}var bCe=["domain","nice","zero","interpolate","round","range","reverse","align","base","clamp","constant","exponent","padding","unknown"],PMt={domain:yMt,nice:TMt,zero:RMt,interpolate:EMt,round:AMt,align:vMt,base:bMt,clamp:_Mt,constant:wMt,exponent:CMt,padding:NMt,range:xMt,reverse:jMt,unknown:IMt};function Qa(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=new Set(t),s=bCe.filter(function(a){return r.has(a)});return function(i,l){return typeof l<"u"&&s.forEach(function(c){PMt[c](i,l)}),i}}var LMt=Qa("domain","range","reverse","align","padding","round");function tV(e){return LMt(W$(),e)}var OMt=Qa("domain","range","reverse","align","padding","round");function tw(e){return OMt(YSt(),e)}var DMt=Qa("domain","range","reverse","clamp","interpolate","nice","round","zero");function Qd(e){return DMt(sCe(),e)}var FMt=Qa("domain","range","clamp","nice","round","unknown");function UMt(e){return FMt(lCe(),e)}var BMt=Qa("domain","range","reverse","clamp","interpolate","nice","round");function Tp(e){return BMt(hMt(),e)}var $Mt=Qa("domain","range","reverse","clamp","interpolate","nice","round");function _Ce(e){return $Mt(gMt(),e)}var VMt=Qa("domain","range","reverse","base","clamp","interpolate","nice","round");function nV(e){return VMt(oCe(),e)}var WMt=Qa("domain","range","reverse","clamp","exponent","interpolate","nice","round","zero");function wCe(e){return WMt(Z$(),e)}var HMt=Qa("domain","range","reverse","unknown");function rV(e){return HMt(V$(),e)}var zMt=Qa("domain","range","reverse","nice","zero");function CCe(e){return zMt(uCe(),e)}var GMt=Qa("domain","range","reverse");function SCe(e){return GMt(cCe(),e)}var qMt=Qa("domain","range","reverse","clamp","constant","nice","zero","round");function ECe(e){return qMt(iCe(),e)}var KMt=Qa("domain","range","reverse");function MCe(e){return KMt(dCe(),e)}var YMt=Qa("domain","range","reverse","clamp","interpolate","nice","round","zero");function kCe(e){return YMt(Z2t(),e)}function QMt(e){if(typeof e<"u"&&"type"in e)switch(e.type){case"linear":return Qd(e);case"log":return nV(e);case"pow":return wCe(e);case"sqrt":return kCe(e);case"symlog":return ECe(e);case"time":return Tp(e);case"utc":return _Ce(e);case"quantile":return SCe(e);case"quantize":return CCe(e);case"threshold":return MCe(e);case"ordinal":return rV(e);case"point":return tw(e);case"band":return tV(e)}return Qd(e)}var XMt=Qa.apply(void 0,bCe);function ZMt(e,t){return XMt(e.copy(),t)}function JMt(e){return"paddingInner"in e?"band":"padding"in e?"point":"quantiles"in e?"quantile":"base"in e?"log":"exponent"in e?e.exponent()===.5?"sqrt":"pow":"constant"in e?"symlog":"clamp"in e?e.ticks()[0]instanceof Date?vCe(e)?"utc":"time":"linear":"nice"in e?"quantize":"invertExtent"in e?"threshold":"ordinal"}function nw(e){if((typeof e=="function"||typeof e=="object"&&e)&&"valueOf"in e){var t=e.valueOf();if(typeof t=="number")return t}return e}function iT(e,t){var n=e;return"ticks"in n?n.ticks(t):n.domain().filter(function(r,s,a){return t==null||a.length<=t||s%Math.round((a.length-1)/t)===0})}function TCe(e){return e?.toString()}var ekt=new Set(["linear","pow","quantize","sqrt","symlog"]);function tkt(e){return ekt.has(e.type)}const nkt=Object.freeze(Object.defineProperty({__proto__:null,coerceNumber:nw,createScale:QMt,getTicks:iT,inferScaleType:JMt,scaleBand:tV,scaleCanBeZeroed:tkt,scaleLinear:Qd,scaleLog:nV,scaleOrdinal:rV,scalePoint:tw,scalePower:wCe,scaleQuantile:SCe,scaleQuantize:CCe,scaleRadial:UMt,scaleSqrt:kCe,scaleSymlog:ECe,scaleThreshold:MCe,scaleTime:Tp,scaleUtc:_Ce,toString:TCe,updateScale:ZMt},Symbol.toStringTag,{value:"Module"}));function ur(e,t){e(t)}var MM={ascending:Pwe,descending:OSt,insideout:DSt,none:ty,reverse:FSt},rkt=Object.keys(MM);function lT(e){return e&&MM[e]||MM.none}var kM={expand:jSt,diverging:ASt,none:ey,silhouette:ISt,wiggle:RSt},skt=Object.keys(kM);function cT(e){return e&&kM[e]||kM.none}function sV(e){var t=e===void 0?{}:e,n=t.innerRadius,r=t.outerRadius,s=t.cornerRadius,a=t.startAngle,i=t.endAngle,l=t.padAngle,c=t.padRadius,u=uSt();return n!=null&&ur(u.innerRadius,n),r!=null&&ur(u.outerRadius,r),s!=null&&ur(u.cornerRadius,s),a!=null&&ur(u.startAngle,a),i!=null&&ur(u.endAngle,i),l!=null&&ur(u.padAngle,l),c!=null&&ur(u.padRadius,c),u}function uT(e){var t=e===void 0?{}:e,n=t.x,r=t.x0,s=t.x1,a=t.y,i=t.y0,l=t.y1,c=t.defined,u=t.curve,f=dSt();return n&&ur(f.x,n),r&&ur(f.x0,r),s&&ur(f.x1,s),a&&ur(f.y,a),i&&ur(f.y0,i),l&&ur(f.y1,l),c&&f.defined(c),u&&f.curve(u),f}function Hu(e){var t=e===void 0?{}:e,n=t.x,r=t.y,s=t.defined,a=t.curve,i=U$();return n&&ur(i.x,n),r&&ur(i.y,r),s&&i.defined(s),a&&i.curve(a),i}function NCe(e){var t=e===void 0?{}:e,n=t.startAngle,r=t.endAngle,s=t.padAngle,a=t.value,i=t.sort,l=t.sortValues,c=pSt();return(i===null||i!=null)&&c.sort(i),(l===null||l!=null)&&c.sortValues(l),a!=null&&c.value(a),s!=null&&ur(c.padAngle,s),n!=null&&ur(c.startAngle,n),r!=null&&ur(c.endAngle,r),c}function jCe(e){var t=e===void 0?{}:e,n=t.angle,r=t.radius,s=t.defined,a=t.curve,i=ySt();return n&&ur(i.angle,n),r&&ur(i.radius,r),s&&i.defined(s),a&&i.curve(a),i}function ACe(e){var t=e.keys,n=e.value,r=e.order,s=e.offset,a=$$();return t&&a.keys(t),n&&ur(a.value,n),r&&a.order(lT(r)),s&&a.offset(cT(s)),a}var akt=["className","data","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","children","innerRef"];function _9(){return _9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_9.apply(this,arguments)}function okt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function ICe(e){var t=e.className,n=e.data,r=e.innerRadius,s=e.outerRadius,a=e.cornerRadius,i=e.startAngle,l=e.endAngle,c=e.padAngle,u=e.padRadius,f=e.children,m=e.innerRef,p=okt(e,akt),h=sV({innerRadius:r,outerRadius:s,cornerRadius:a,startAngle:i,endAngle:l,padAngle:c,padRadius:u});return f?I.createElement(I.Fragment,null,f({path:h})):!n&&(i==null||l==null||r==null||s==null)?(console.warn("[@visx/shape/Arc]: expected data because one of startAngle, endAngle, innerRadius, outerRadius is undefined. Bailing."),null):I.createElement("path",_9({ref:m,className:B("visx-arc",t),d:h(n)||""},p))}var ikt=["top","left","transform","className","children","innerRef"];function w9(){return w9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w9.apply(this,arguments)}function lkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function wa(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.transform,i=e.className,l=e.children,c=e.innerRef,u=lkt(e,ikt);return I.createElement("g",w9({ref:c,className:B("visx-group",i),transform:a||"translate("+s+", "+n+")"},u),l)}wa.propTypes={top:Fe.number,left:Fe.number,transform:Fe.string,className:Fe.string,children:Fe.node,innerRef:Fe.oneOfType([Fe.string,Fe.func,Fe.object])};const ckt=Object.freeze(Object.defineProperty({__proto__:null,Group:wa},Symbol.toStringTag,{value:"Module"}));var ukt=["className","top","left","data","centroid","innerRadius","outerRadius","cornerRadius","startAngle","endAngle","padAngle","padRadius","pieSort","pieSortValues","pieValue","children","fill"];function C9(){return C9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},C9.apply(this,arguments)}function dkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function fkt(e){var t=e.className,n=e.top,r=e.left,s=e.data,a=s===void 0?[]:s,i=e.centroid,l=e.innerRadius,c=l===void 0?0:l,u=e.outerRadius,f=e.cornerRadius,m=e.startAngle,p=e.endAngle,h=e.padAngle,g=e.padRadius,y=e.pieSort,x=e.pieSortValues,v=e.pieValue,b=e.children,_=e.fill,w=_===void 0?"":_,C=dkt(e,ukt),S=sV({innerRadius:c,outerRadius:u,cornerRadius:f,padRadius:g}),E=NCe({startAngle:m,endAngle:p,padAngle:h,value:v,sort:y,sortValues:x}),k=E(a);return b?I.createElement(I.Fragment,null,b({arcs:k,path:S,pie:E})):I.createElement(wa,{className:"visx-pie-arcs-group",top:n,left:r},k.map(function(M,j){return I.createElement("g",{key:"pie-arc-"+j},I.createElement("path",C9({className:B("visx-pie-arc",t),d:S(M)||"",fill:w==null||typeof w=="string"?w:w(M)},C)),i?.(S.centroid(M),M))}))}var mkt=["from","to","fill","className","innerRef"];function S9(){return S9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},S9.apply(this,arguments)}function pkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function dT(e){var t=e.from,n=t===void 0?{x:0,y:0}:t,r=e.to,s=r===void 0?{x:1,y:1}:r,a=e.fill,i=a===void 0?"transparent":a,l=e.className,c=e.innerRef,u=pkt(e,mkt),f=n.x===s.x||n.y===s.y;return I.createElement("line",S9({ref:c,className:B("visx-line",l),x1:n.x,y1:n.y,x2:s.x,y2:s.y,fill:i,shapeRendering:f?"crispEdges":"auto"},u))}var hkt=["children","data","x","y","fill","className","curve","innerRef","defined"];function E9(){return E9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E9.apply(this,arguments)}function gkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function RCe(e){var t=e.children,n=e.data,r=n===void 0?[]:n,s=e.x,a=e.y,i=e.fill,l=i===void 0?"transparent":i,c=e.className,u=e.curve,f=e.innerRef,m=e.defined,p=m===void 0?function(){return!0}:m,h=gkt(e,hkt),g=Hu({x:s,y:a,defined:p,curve:u});return t?I.createElement(I.Fragment,null,t({path:g})):I.createElement("path",E9({ref:f,className:B("visx-linepath",c),d:g(r)||"",fill:l,strokeLinecap:"round"},h))}var ykt=["className","angle","radius","defined","curve","data","innerRef","children","fill"];function M9(){return M9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M9.apply(this,arguments)}function xkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function vkt(e){var t=e.className,n=e.angle,r=e.radius,s=e.defined,a=e.curve,i=e.data,l=i===void 0?[]:i,c=e.innerRef,u=e.children,f=e.fill,m=f===void 0?"transparent":f,p=xkt(e,ykt),h=jCe({angle:n,radius:r,defined:s,curve:a});return u?I.createElement(I.Fragment,null,u({path:h})):I.createElement("path",M9({ref:c,className:B("visx-line-radial",t),d:h(l)||"",fill:m},p))}var bkt=["children","x","x0","x1","y","y0","y1","data","defined","className","curve","innerRef"];function k9(){return k9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},k9.apply(this,arguments)}function _kt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function wkt(e){var t=e.children,n=e.x,r=e.x0,s=e.x1,a=e.y,i=e.y0,l=e.y1,c=e.data,u=c===void 0?[]:c,f=e.defined,m=f===void 0?function(){return!0}:f,p=e.className,h=e.curve,g=e.innerRef,y=_kt(e,bkt),x=uT({x:n,x0:r,x1:s,y:a,y0:i,y1:l,defined:m,curve:h});return t?I.createElement(I.Fragment,null,t({path:x})):I.createElement("path",k9({ref:g,className:B("visx-area",p),d:x(u)||""},y))}var Ckt=["x","x0","x1","y","y1","y0","yScale","data","defined","className","curve","innerRef","children"];function T9(){return T9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T9.apply(this,arguments)}function Skt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function oy(e){var t=e.x,n=e.x0,r=e.x1,s=e.y,a=e.y1,i=e.y0,l=e.yScale,c=e.data,u=c===void 0?[]:c,f=e.defined,m=f===void 0?function(){return!0}:f,p=e.className,h=e.curve,g=e.innerRef,y=e.children,x=Skt(e,Ckt),v=uT({x:t,x0:n,x1:r,defined:m,curve:h});return i==null?v.y0(l.range()[0]):ur(v.y0,i),s&&!a&&ur(v.y1,s),a&&!s&&ur(v.y1,a),y?I.createElement(I.Fragment,null,y({path:v})):I.createElement("path",T9({ref:g,className:B("visx-area-closed",p),d:v(u)||""},x))}var Ekt=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function N9(){return N9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},N9.apply(this,arguments)}function Mkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function PCe(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,i=e.curve,l=e.defined,c=e.x,u=e.x0,f=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,x=e.color,v=e.children,b=Mkt(e,Ekt),_=ACe({keys:s,value:h,order:g,offset:y}),w=uT({x:c,x0:u,x1:f,y0:m,y1:p,curve:i,defined:l}),C=_(a);return v?I.createElement(I.Fragment,null,v({stacks:C,path:w,stack:_})):I.createElement(wa,{top:n,left:r},C.map(function(S,E){return I.createElement("path",N9({className:B("visx-stack",t),key:"stack-"+E+"-"+(S.key||""),d:w(S)||"",fill:x?.(S.key,E)},b))}))}var kkt=["className","top","left","keys","data","curve","defined","x","x0","x1","y0","y1","value","order","offset","color","children"];function TM(){return TM=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},TM.apply(this,arguments)}function Tkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Nkt(e){var t=e.className,n=e.top,r=e.left,s=e.keys,a=e.data,i=e.curve,l=e.defined,c=e.x,u=e.x0,f=e.x1,m=e.y0,p=e.y1,h=e.value,g=e.order,y=e.offset,x=e.color,v=e.children,b=Tkt(e,kkt);return I.createElement(PCe,TM({className:t,top:n,left:r,keys:s,data:a,curve:i,defined:l,x:c,x0:u,x1:f,y0:m,y1:p,value:h,order:g,offset:y,color:x},b),v||function(_){var w=_.stacks,C=_.path;return w.map(function(S,E){return I.createElement("path",TM({className:B("visx-area-stack",t),key:"area-stack-"+E+"-"+(S.key||""),d:C(S)||"",fill:x?.(S.key,E)},b))})})}var jkt=["className","innerRef"];function j9(){return j9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j9.apply(this,arguments)}function Akt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Rx(e){var t=e.className,n=e.innerRef,r=Akt(e,jkt);return I.createElement("rect",j9({ref:n,className:B("visx-bar",t)},r))}var Ikt=["children","className","innerRef","x","y","width","height","radius","all","top","bottom","left","right","topLeft","topRight","bottomLeft","bottomRight"];function A9(){return A9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},A9.apply(this,arguments)}function Rkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Pkt(e){var t=e.all,n=e.bottom,r=e.bottomLeft,s=e.bottomRight,a=e.height,i=e.left,l=e.radius,c=e.right,u=e.top,f=e.topLeft,m=e.topRight,p=e.width,h=e.x,g=e.y;m=t||u||c||m,s=t||n||c||s,r=t||n||i||r,f=t||u||i||f,l=Math.max(1,Math.min(l,Math.min(p,a)/2));var y=2*l,x=("M"+(h+l)+","+g+" h"+(p-y)+`
 `+(m?"a"+l+","+l+" 0 0 1 "+l+","+l:"h"+l+"v"+l)+`
 v`+(a-y)+`
 `+(s?"a"+l+","+l+" 0 0 1 "+-l+","+l:"v"+l+"h"+-l)+`
 h`+(y-p)+`
 `+(r?"a"+l+","+l+" 0 0 1 "+-l+","+-l:"h"+-l+"v"+-l)+`
 v`+(y-a)+`
 `+(f?"a"+l+","+l+" 0 0 1 "+l+","+-l:"v"+-l+"h"+l)+`
z`).split(`
`).join("");return x}function Lkt(e){var t=e.children,n=e.className,r=e.innerRef,s=e.x,a=e.y,i=e.width,l=e.height,c=e.radius,u=e.all,f=u===void 0?!1:u,m=e.top,p=m===void 0?!1:m,h=e.bottom,g=h===void 0?!1:h,y=e.left,x=y===void 0?!1:y,v=e.right,b=v===void 0?!1:v,_=e.topLeft,w=_===void 0?!1:_,C=e.topRight,S=C===void 0?!1:C,E=e.bottomLeft,k=E===void 0?!1:E,M=e.bottomRight,j=M===void 0?!1:M,R=Rkt(e,Ikt),O=Pkt({x:s,y:a,width:i,height:l,radius:c,all:f,top:p,bottom:g,left:x,right:b,topLeft:w,topRight:S,bottomLeft:k,bottomRight:j});return t?I.createElement(I.Fragment,null,t({path:O})):I.createElement("path",A9({ref:r,className:B("visx-bar-rounded",n),d:O},R))}function fT(e){if("bandwidth"in e)return e.bandwidth();var t=e.range(),n=e.domain();return Math.abs(t[t.length-1]-t[0])/n.length}var Okt=["data","className","top","left","x0","x0Scale","x1Scale","yScale","color","keys","height","children"];function I9(){return I9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I9.apply(this,arguments)}function Dkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Fkt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x0,i=e.x0Scale,l=e.x1Scale,c=e.yScale,u=e.color,f=e.keys,m=e.height,p=e.children,h=Dkt(e,Okt),g=fT(l),y=t.map(function(x,v){return{index:v,x0:i(a(x)),bars:f.map(function(b,_){var w=x[b];return{index:_,key:b,value:w,width:g,x:l(b)||0,y:c(w)||0,color:u(b,_),height:m-(c(w)||0)}})}});return p?I.createElement(I.Fragment,null,p(y)):I.createElement(wa,{className:B("visx-bar-group",n),top:r,left:s},y.map(function(x){return I.createElement(wa,{key:"bar-group-"+x.index+"-"+x.x0,left:x.x0},x.bars.map(function(v){return I.createElement(Rx,I9({key:"bar-group-bar-"+x.index+"-"+v.index+"-"+v.value+"-"+v.key,x:v.x,y:v.y,width:v.width,height:v.height,fill:v.color},h))}))}))}var Ukt=["data","className","top","left","x","y0","y0Scale","y1Scale","xScale","color","keys","width","children"];function R9(){return R9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R9.apply(this,arguments)}function Bkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function $kt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,i=a===void 0?function(){return 0}:a,l=e.y0,c=e.y0Scale,u=e.y1Scale,f=e.xScale,m=e.color,p=e.keys;e.width;var h=e.children,g=Bkt(e,Ukt),y=fT(u),x=t.map(function(v,b){return{index:b,y0:c(l(v))||0,bars:p.map(function(_,w){var C=v[_];return{index:w,key:_,value:C,height:y,x:i(C)||0,y:u(_)||0,color:m(_,w),width:f(C)||0}})}});return h?I.createElement(I.Fragment,null,h(x)):I.createElement(wa,{className:B("visx-bar-group-horizontal",n),top:r,left:s},x.map(function(v){return I.createElement(wa,{key:"bar-group-"+v.index+"-"+v.y0,top:v.y0},v.bars.map(function(b){return I.createElement(Rx,R9({key:"bar-group-bar-"+v.index+"-"+b.index+"-"+b.value+"-"+b.key,x:b.x,y:b.y,width:b.width,height:b.height,fill:b.color},g))}))}))}function Ri(e){return typeof e?.x=="number"?e?.x:0}function Pi(e){return typeof e?.y=="number"?e?.y:0}function Li(e){return e?.source}function Oi(e){return e?.target}function LCe(e){return e?.[0]}function OCe(e){return e?.[1]}var Vkt=["data","className","top","left","x","y0","y1","xScale","yScale","color","keys","value","order","offset","children"];function P9(){return P9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P9.apply(this,arguments)}function Wkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Hkt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.x,i=e.y0,l=i===void 0?LCe:i,c=e.y1,u=c===void 0?OCe:c,f=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,x=e.offset,v=e.children,b=Wkt(e,Vkt),_=$$();h&&_.keys(h),g&&ur(_.value,g),y&&_.order(lT(y)),x&&_.offset(cT(x));var w=_(t),C=fT(f),S=w.map(function(E,k){var M=E.key;return{index:k,key:M,bars:E.map(function(j,R){var O=(m(l(j))||0)-(m(u(j))||0),D=m(u(j)),P="bandwidth"in f?f(a(j.data)):Math.max((f(a(j.data))||0)-C/2);return{bar:j,key:M,index:R,height:O,width:C,x:P||0,y:D||0,color:p(E.key,R)}})}});return v?I.createElement(I.Fragment,null,v(S)):I.createElement(wa,{className:B("visx-bar-stack",n),top:r,left:s},S.map(function(E){return E.bars.map(function(k){return I.createElement(Rx,P9({key:"bar-stack-"+E.index+"-"+k.index,x:k.x,y:k.y,height:k.height,width:k.width,fill:k.color},b))})}))}var zkt=["data","className","top","left","y","x0","x1","xScale","yScale","color","keys","value","order","offset","children"];function L9(){return L9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},L9.apply(this,arguments)}function Gkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function qkt(e){var t=e.data,n=e.className,r=e.top,s=e.left,a=e.y,i=e.x0,l=i===void 0?LCe:i,c=e.x1,u=c===void 0?OCe:c,f=e.xScale,m=e.yScale,p=e.color,h=e.keys,g=e.value,y=e.order,x=e.offset,v=e.children,b=Gkt(e,zkt),_=$$();h&&_.keys(h),g&&ur(_.value,g),y&&_.order(lT(y)),x&&_.offset(cT(x));var w=_(t),C=fT(m),S=w.map(function(E,k){var M=E.key;return{index:k,key:M,bars:E.map(function(j,R){var O=(f(u(j))||0)-(f(l(j))||0),D=f(l(j)),P="bandwidth"in m?m(a(j.data)):Math.max((m(a(j.data))||0)-O/2);return{bar:j,key:M,index:R,height:C,width:O,x:D||0,y:P||0,color:p(E.key,R)}})}});return v?I.createElement(I.Fragment,null,v(S)):I.createElement(wa,{className:B("visx-bar-stack-horizontal",n),top:r,left:s},S.map(function(E){return E.bars.map(function(k){return I.createElement(Rx,L9({key:"bar-stack-"+E.index+"-"+k.index,x:k.x,y:k.y,height:k.height,width:k.width,fill:k.color},b))})}))}var DCe=function(t){return Math.PI/180*t},Kkt=["className","children","data","innerRef","path","x","y","source","target"];function O9(){return O9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O9.apply(this,arguments)}function Ykt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function FCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=CSt();return i.x(r),i.y(s),i.source(t),i.target(n),i(a)}}function Qkt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.x,l=i===void 0?Pi:i,c=e.y,u=c===void 0?Ri:c,f=e.source,m=f===void 0?Li:f,p=e.target,h=p===void 0?Oi:p,g=Ykt(e,Kkt),y=a||FCe({source:m,target:h,x:l,y:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",O9({ref:s,className:B("visx-link visx-link-horizontal-diagonal",t),d:y(r)||""},g))}var Xkt=["className","children","data","innerRef","path","x","y","source","target"];function D9(){return D9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D9.apply(this,arguments)}function Zkt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function UCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=SSt();return i.x(r),i.y(s),i.source(t),i.target(n),i(a)}}function Jkt(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.x,l=i===void 0?Ri:i,c=e.y,u=c===void 0?Pi:c,f=e.source,m=f===void 0?Li:f,p=e.target,h=p===void 0?Oi:p,g=Zkt(e,Xkt),y=a||UCe({source:m,target:h,x:l,y:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",D9({ref:s,className:B("visx-link visx-link-vertical-diagonal",t),d:y(r)||""},g))}var e5t=["className","children","data","innerRef","path","angle","radius","source","target"];function F9(){return F9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},F9.apply(this,arguments)}function t5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function BCe(e){var t=e.source,n=e.target,r=e.angle,s=e.radius;return function(a){var i=ESt();return i.angle(r),i.radius(s),i.source(t),i.target(n),i(a)}}function n5t(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.angle,l=i===void 0?Ri:i,c=e.radius,u=c===void 0?Pi:c,f=e.source,m=f===void 0?Li:f,p=e.target,h=p===void 0?Oi:p,g=t5t(e,e5t),y=a||BCe({source:m,target:h,angle:l,radius:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",F9({ref:s,className:B("visx-link visx-link-radial-diagonal",t),d:y(r)||""},g))}var r5t=["className","children","data","innerRef","path","percent","x","y","source","target"];function U9(){return U9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},U9.apply(this,arguments)}function s5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function $Ce(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),f=s(l),m=r(c),p=s(c),h=m-u,g=p-f,y=a*(h+g),x=a*(g-h),v=ni();return v.moveTo(u,f),v.bezierCurveTo(u+y,f+x,m+x,p-y,m,p),v.toString()}}function a5t(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?Pi:c,f=e.y,m=f===void 0?Ri:f,p=e.source,h=p===void 0?Li:p,g=e.target,y=g===void 0?Oi:g,x=s5t(e,r5t),v=a||$Ce({source:h,target:y,x:u,y:m,percent:l});return n?I.createElement(I.Fragment,null,n({path:v})):I.createElement("path",U9({ref:s,className:B("visx-link visx-link-horizontal-curve",t),d:v(r)||""},x))}var o5t=["className","children","data","innerRef","path","percent","x","y","source","target"];function B9(){return B9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B9.apply(this,arguments)}function i5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function VCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),f=s(l),m=r(c),p=s(c),h=m-u,g=p-f,y=a*(h+g),x=a*(g-h),v=ni();return v.moveTo(u,f),v.bezierCurveTo(u+y,f+x,m+x,p-y,m,p),v.toString()}}function l5t(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?Ri:c,f=e.y,m=f===void 0?Pi:f,p=e.source,h=p===void 0?Li:p,g=e.target,y=g===void 0?Oi:g,x=i5t(e,o5t),v=a||VCe({source:h,target:y,x:u,y:m,percent:l});return n?I.createElement(I.Fragment,null,n({path:v})):I.createElement("path",B9({ref:s,className:B("visx-link visx-link-vertical-curve",t),d:v(r)||""},x))}var c5t=["className","children","data","innerRef","path","percent","x","y","source","target"];function $9(){return $9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$9.apply(this,arguments)}function u5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function WCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l)-Math.PI/2,f=s(l),m=r(c)-Math.PI/2,p=s(c),h=Math.cos(u),g=Math.sin(u),y=Math.cos(m),x=Math.sin(m),v=f*h,b=f*g,_=p*y,w=p*x,C=_-v,S=w-b,E=a*(C+S),k=a*(S-C),M=ni();return M.moveTo(v,b),M.bezierCurveTo(v+E,b+k,_+k,w-E,_,w),M.toString()}}function d5t(e){var t=e.className,n=e.children,r=e.data,s=e.innerRef,a=e.path,i=e.percent,l=i===void 0?.2:i,c=e.x,u=c===void 0?Ri:c,f=e.y,m=f===void 0?Pi:f,p=e.source,h=p===void 0?Li:p,g=e.target,y=g===void 0?Oi:g,x=u5t(e,c5t),v=a||WCe({source:h,target:y,x:u,y:m,percent:l});return n?I.createElement(I.Fragment,null,n({path:v})):I.createElement("path",$9({ref:s,className:B("visx-link visx-link-radial-curve",t),d:v(r)||""},x))}var f5t=["className","children","innerRef","data","path","x","y","source","target"];function V9(){return V9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},V9.apply(this,arguments)}function m5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function HCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),f=r(l),m=s(l),p=ni();return p.moveTo(c,u),p.lineTo(f,m),p.toString()}}function p5t(e){var t=e.className,n=e.children,r=e.innerRef,s=e.data,a=e.path,i=e.x,l=i===void 0?Pi:i,c=e.y,u=c===void 0?Ri:c,f=e.source,m=f===void 0?Li:f,p=e.target,h=p===void 0?Oi:p,g=m5t(e,f5t),y=a||HCe({source:m,target:h,x:l,y:u});return n?I.createElement(I.Fragment,null,n({path:y})):I.createElement("path",V9({ref:r,className:B("visx-link visx-link-horizontal-line",t),d:y(s)||""},g))}var h5t=["className","innerRef","data","path","x","y","source","target","children"];function W9(){return W9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W9.apply(this,arguments)}function g5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function zCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),f=r(l),m=s(l),p=ni();return p.moveTo(c,u),p.lineTo(f,m),p.toString()}}function y5t(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?Ri:a,l=e.y,c=l===void 0?Pi:l,u=e.source,f=u===void 0?Li:u,m=e.target,p=m===void 0?Oi:m,h=e.children,g=g5t(e,h5t),y=s||zCe({source:f,target:p,x:i,y:c});return h?I.createElement(I.Fragment,null,h({path:y})):I.createElement("path",W9({ref:n,className:B("visx-link visx-link-vertical-line",t),d:y(r)||""},g))}var x5t=["className","innerRef","data","path","x","y","source","target","children"];function H9(){return H9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H9.apply(this,arguments)}function v5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function GCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i)-Math.PI/2,u=s(i),f=r(l)-Math.PI/2,m=s(l),p=Math.cos(c),h=Math.sin(c),g=Math.cos(f),y=Math.sin(f),x=ni();return x.moveTo(u*p,u*h),x.lineTo(m*g,m*y),x.toString()}}function b5t(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?Ri:a,l=e.y,c=l===void 0?Pi:l,u=e.source,f=u===void 0?Li:u,m=e.target,p=m===void 0?Oi:m,h=e.children,g=v5t(e,x5t),y=s||GCe({source:f,target:p,x:i,y:c});return h?I.createElement(I.Fragment,null,h({path:y})):I.createElement("path",H9({ref:n,className:B("visx-link visx-link-radial-line",t),d:y(r)||""},g))}var _5t=["className","innerRef","data","path","percent","x","y","source","target","children"];function z9(){return z9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z9.apply(this,arguments)}function w5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function qCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),f=s(l),m=r(c),p=s(c),h=ni();return h.moveTo(u,f),h.lineTo(u+(m-u)*a,f),h.lineTo(u+(m-u)*a,p),h.lineTo(m,p),h.toString()}}function C5t(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,i=a===void 0?.5:a,l=e.x,c=l===void 0?Pi:l,u=e.y,f=u===void 0?Ri:u,m=e.source,p=m===void 0?Li:m,h=e.target,g=h===void 0?Oi:h,y=e.children,x=w5t(e,_5t),v=s||qCe({source:p,target:g,x:c,y:f,percent:i});return y?I.createElement(I.Fragment,null,y({path:v})):I.createElement("path",z9({ref:n,className:B("visx-link visx-link-horizontal-step",t),d:v(r)||""},x))}var S5t=["className","innerRef","data","path","percent","x","y","source","target","children"];function G9(){return G9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G9.apply(this,arguments)}function E5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function KCe(e){var t=e.source,n=e.target,r=e.x,s=e.y,a=e.percent;return function(i){var l=t(i),c=n(i),u=r(l),f=s(l),m=r(c),p=s(c),h=ni();return h.moveTo(u,f),h.lineTo(u,f+(p-f)*a),h.lineTo(m,f+(p-f)*a),h.lineTo(m,p),h.toString()}}function M5t(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.percent,i=a===void 0?.5:a,l=e.x,c=l===void 0?Ri:l,u=e.y,f=u===void 0?Pi:u,m=e.source,p=m===void 0?Li:m,h=e.target,g=h===void 0?Oi:h,y=e.children,x=E5t(e,S5t),v=s||KCe({source:p,target:g,x:c,y:f,percent:i});return y?I.createElement(I.Fragment,null,y({path:v})):I.createElement("path",G9({ref:n,className:B("visx-link visx-link-vertical-step",t),d:v(r)||""},x))}var k5t=["className","innerRef","data","path","x","y","source","target","children"];function q9(){return q9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},q9.apply(this,arguments)}function T5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function YCe(e){var t=e.source,n=e.target,r=e.x,s=e.y;return function(a){var i=t(a),l=n(a),c=r(i),u=s(i),f=r(l),m=s(l),p=c-Math.PI/2,h=u,g=f-Math.PI/2,y=m,x=Math.cos(p),v=Math.sin(p),b=Math.cos(g),_=Math.sin(g),w=Math.abs(g-p)>Math.PI?g<=p:g>p;return`
      M`+h*x+","+h*v+`
      A`+h+","+h+",0,0,"+(w?1:0)+","+h*b+","+h*_+`
      L`+y*b+","+y*_+`
    `}}function N5t(e){var t=e.className,n=e.innerRef,r=e.data,s=e.path,a=e.x,i=a===void 0?Ri:a,l=e.y,c=l===void 0?Pi:l,u=e.source,f=u===void 0?Li:u,m=e.target,p=m===void 0?Oi:m,h=e.children,g=T5t(e,k5t),y=s||YCe({source:f,target:p,x:i,y:c});return h?I.createElement(I.Fragment,null,h({path:y})):I.createElement("path",q9({ref:n,className:B("visx-link visx-link-radial-step",t),d:y(r)||""},g))}var j5t=["sides","size","center","rotate","className","children","innerRef","points"];function K9(){return K9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},K9.apply(this,arguments)}function A5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var QCe={x:0,y:0},XCe=function(t){var n=t.sides,r=n===void 0?4:n,s=t.size,a=s===void 0?25:s,i=t.center,l=i===void 0?QCe:i,c=t.rotate,u=c===void 0?0:c,f=t.side,m=360/r*f-u,p=DCe(m);return{x:l.x+a*Math.cos(p),y:l.y+a*Math.sin(p)}},ZCe=function(t){var n=t.sides,r=t.size,s=t.center,a=t.rotate;return new Array(n).fill(0).map(function(i,l){return XCe({sides:n,size:r,center:s,rotate:a,side:l})})};function I5t(e){var t=e.sides,n=t===void 0?4:t,r=e.size,s=r===void 0?25:r,a=e.center,i=a===void 0?QCe:a,l=e.rotate,c=l===void 0?0:l,u=e.className,f=e.children,m=e.innerRef,p=e.points,h=A5t(e,j5t),g=p||ZCe({sides:n,size:s,center:i,rotate:c}).map(function(y){var x=y.x,v=y.y;return[x,v]});return f?I.createElement(I.Fragment,null,f({points:g})):I.createElement("polygon",K9({ref:m,className:B("visx-polygon",u),points:g.join(" ")},h))}var R5t=["className","innerRef"];function Y9(){return Y9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Y9.apply(this,arguments)}function P5t(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function L5t(e){var t=e.className,n=e.innerRef,r=P5t(e,R5t);return I.createElement("circle",Y9({ref:n,className:B("visx-circle",t)},r))}var Jte="http://www.w3.org/2000/svg";function O5t(e){var t=document.getElementById(e);if(!t){var n=document.createElementNS(Jte,"svg");n.setAttribute("aria-hidden","true"),n.style.opacity="0",n.style.width="0",n.style.height="0",n.style.position="absolute",n.style.top="-100%",n.style.left="-100%",n.style.pointerEvents="none",t=document.createElementNS(Jte,"path"),t.setAttribute("id",e),n.appendChild(t),document.body.appendChild(n)}return t}var D5t="__visx_splitpath_svg_path_measurement_id",ene=function(){return!0};function F5t(e){var t=e.path,n=e.pointsInSegments,r=e.segmentation,s=r===void 0?"x":r,a=e.sampleRate,i=a===void 0?1:a;try{var l=O5t(D5t);l.setAttribute("d",t);var c=l.getTotalLength(),u=n.length,f=n.map(function(){return[]});if(s==="x"||s==="y")for(var m=n.map(function(D){var P;return(P=D.find(function(A){return typeof A[s]=="number"}))==null?void 0:P[s]}),p=l.getPointAtLength(0),h=l.getPointAtLength(c),g=h[s]>p[s],y=g?m.map(function(D){return typeof D>"u"?ene:function(P){return P>=D}}):m.map(function(D){return typeof D>"u"?ene:function(P){return P<=D}}),x=0,v=0;v<=c;v+=i){for(var b=l.getPointAtLength(v),_=b[s];x<u-1&&y[x+1](_);)x+=1;f[x].push(b)}else{var w=n.map(function(D){return D.length}),C=w.reduce(function(D,P){return D+P},0),S=c/Math.max(1,C-1),E=w.slice(0,u-1);E.unshift(0);for(var k=2;k<u;k+=1)E[k]+=E[k-1];for(var M=0;M<u;M+=1)E[M]*=S;for(var j=0,R=0;R<=c;R+=i){for(var O=l.getPointAtLength(R);j<u-1&&R>=E[j+1];)j+=1;f[j].push(O)}}return f}catch{return[]}}function Q9(){return Q9=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Q9.apply(this,arguments)}var U5t=function(t){return t.x||0},B5t=function(t){return t.y||0};function JCe(e){var t=e.children,n=e.className,r=e.curve,s=e.defined,a=e.segmentation,i=e.sampleRate,l=e.segments,c=e.x,u=e.y,f=e.styles,m=d.useMemo(function(){var g=typeof c=="number"||typeof c>"u"?function(){return c}:c,y=typeof u=="number"||typeof u>"u"?function(){return u}:u;return l.map(function(x){return x.map(function(v,b){return{x:g(v,b,x),y:y(v,b,x)}})})},[c,u,l]),p=d.useMemo(function(){var g=Hu({x:c,y:u,defined:s,curve:r});return g(l.flat())||""},[c,u,s,r,l]),h=d.useMemo(function(){return F5t({path:p,segmentation:a,pointsInSegments:m,sampleRate:i})},[p,a,m,i]);return I.createElement("g",null,h.map(function(g,y){return t?I.createElement(I.Fragment,{key:y},t({index:y,segment:g,styles:f[y]||f[y%f.length]})):I.createElement(RCe,Q9({key:y,className:n,data:g,x:U5t,y:B5t},f[y]||f[y%f.length]))}))}JCe.propTypes={segments:Fe.arrayOf(Fe.array).isRequired,styles:Fe.array.isRequired,children:Fe.func,className:Fe.string};const $5t=Object.freeze(Object.defineProperty({__proto__:null,Arc:ICe,Area:wkt,AreaClosed:oy,AreaStack:Nkt,Bar:Rx,BarGroup:Fkt,BarGroupHorizontal:$kt,BarRounded:Lkt,BarStack:Hkt,BarStackHorizontal:qkt,Circle:L5t,Line:dT,LinePath:RCe,LineRadial:vkt,LinkHorizontal:Qkt,LinkHorizontalCurve:a5t,LinkHorizontalLine:p5t,LinkHorizontalStep:C5t,LinkRadial:n5t,LinkRadialCurve:d5t,LinkRadialLine:b5t,LinkRadialStep:N5t,LinkVertical:Jkt,LinkVerticalCurve:l5t,LinkVerticalLine:y5t,LinkVerticalStep:M5t,Pie:fkt,Polygon:I5t,STACK_OFFSETS:kM,STACK_OFFSET_NAMES:skt,STACK_ORDERS:MM,STACK_ORDER_NAMES:rkt,SplitLinePath:JCe,Stack:PCe,arc:sV,area:uT,degreesToRadians:DCe,getPoint:XCe,getPoints:ZCe,line:Hu,pathHorizontalCurve:$Ce,pathHorizontalDiagonal:FCe,pathHorizontalLine:HCe,pathHorizontalStep:qCe,pathRadialCurve:WCe,pathRadialDiagonal:BCe,pathRadialLine:GCe,pathRadialStep:YCe,pathVerticalCurve:VCe,pathVerticalDiagonal:UCe,pathVerticalLine:zCe,pathVerticalStep:KCe,pie:NCe,radialLine:jCe,stack:ACe,stackOffset:cT,stackOrder:lT},Symbol.toStringTag,{value:"Module"})),tne="pplx://www.pplx.com";function aV({href:e,inApp:t,queryParams:n}){if(!t||e==null)return e;const r=new URL(e,tne);return n?.forEach((s,a)=>{r.searchParams.get(a)||r.searchParams.set(a,s??"")}),r.pathname.startsWith("/app")||(r.pathname.startsWith("/")?r.pathname=`/app${r.pathname}`:r.pathname=`/app/${r.pathname}`),r.href.replace(tne,"")}const zu=I.memo(({children:e,href:t,...n})=>{const{inApp:r}=Xo(),s=Ot();return o.jsx(qe,{...n,href:aV({href:t,inApp:r,queryParams:s}),children:e})});zu.displayName="CanonicalLink";const V5t=I.memo(e=>e.href?o.jsx(zu,{...e}):e.children);V5t.displayName="CanonicalLinkMaybe";const W5t=(e,t)=>{const{value:n,loading:r}=jt({flag:"finance-india",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},H5t="pplx.finance-country",mT={US:"US",IN:"IN"},eSe=e=>mT[e?.toUpperCase()],z5t=e=>eSe(e)??mT.US,tSe=Dt("FinanceIndexContext",{country:mT.US,setCountry:()=>{},enabled:!1}),nSe=()=>{const e=d.useContext(tSe);if(!e)throw new Error("useFinanceCountry must be used within a FinanceCountryProvider");return e},G5t={US:J({defaultMessage:"US Markets",id:"7T1wl9MB1D"}),IN:J({defaultMessage:"India Markets",id:"ty1NgqpFg/"})},Gln=e=>G5t[e]??J({defaultMessage:"Markets",id:"sITCHuqY3F"}),qln=e=>{switch(e){case"IN":return"Asia/Kolkata";case"US":default:return"America/New_York"}},Kln=({children:e})=>{const t=Bu(),[n,r]=xp(H5t,null),{session:s}=mt(),{variation:a}=W5t(!0,{userEmail:s?.user?.email??""}),i=eSe(n)??z5t(t??null);return o.jsx(tSe.Provider,{value:{country:a?i:mT.US,setCountry:r,enabled:a},children:e})},oV=I.memo(({value:e,format:t,suffix:n,animated:r=!0})=>{const{locale:s}=Z();return r?o.jsx(ec,{value:e,format:t,suffix:n}):o.jsx("span",{children:Intl.NumberFormat(s,t).format(e)})});oV.displayName="FinanceNumberFlow";const q5t=e=>e===0?"":e>0?"+":"-",K5t=(e,t)=>e===0||!t?null:e>0?ba:sLe,Y5t=e=>e===0?"light":e>0?"positive":"negative",Ym=I.memo(({change:e,variant:t="small",includeIcon:n=!1,className:r,animated:s=!0,background:a=!0,mono:i=!0,animateIcon:l=!1,format:c={style:"percent",minimumFractionDigits:0,maximumFractionDigits:e/100>1?0:2},suffix:u})=>{const f=K5t(e,n);return o.jsxs(F,{variant:t,color:Y5t(e),className:B("flex shrink-0 grow-0 items-center justify-center gap-[0.1em] rounded text-center font-mono",{"bg-positive/10":e>0&&a,"bg-negative/10":e<0&&a,"bg-subtle":e===0&&a,"px-[0.6em] py-[0.15em]":a,"!pl-[0.3em]":a&&n&&e!==0},r),children:[o.jsx(ve.div,{layout:l?"position":void 0,transition:l?{duration:.9,bounce:0,type:"spring"}:void 0,className:B("inline-flex",{"-mt-px":i}),children:f?o.jsx(de,{icon:f,className:B("inline-flex size-[1.2em]",{"!mt-px":i})}):o.jsx("span",{className:i?"font-mono":"",children:q5t(e)})}),o.jsx("span",{className:B("whitespace-nowrap",{"font-mono":i}),children:o.jsx(oV,{value:Math.abs(e)/100,format:c,animated:s,suffix:u})})]})});Ym.displayName="FinancePriceChange";const rSe=kSt,pT="geometricPrecision",sSe="pointer-events-none overflow-visible font-sans",hT=200,aSe="relative isolate select-none touch-none touch-pan-down",hg={duration:.2,delay:hT/1e3,ease:ha},oSe={opacity:0,transition:{duration:0,delay:0}},iSe=4,lSe=3,Ua={blue:"oklch(var(--positive-color))",red:"oklch(var(--negative-color))",gray:"oklch(var(--foreground-quieter-color))",black:"oklch(var(--foreground-color))",transparent:"#00000000"},iV=16,cSe=-5,Q5t={fill:Ua.gray,fontSize:12,dy:`${cSe}px`,textAnchor:"start",fontFamily:"var(--font-family-sans)"},X9=e=>B("transition-opacity duration-500",{"opacity-0":e}),X5t=({tick:e,history:t,yScale:n,xScale:r,xOffset:s,yOffset:a,yHeight:i,yWidth:l,yGet:c,baseline:u})=>{if(!t||t.length===0)return!1;const m=n(e)+a,p=m-i;if(Number.isFinite(u)){const g=n(u);if(g>=p&&g<=m)return!0}const h=s+l;for(let g=0;g<t.length;g++){const y=t[g],x=r(fs(y));if(!y||!x||x<s)continue;if(x>h)break;const v=n(c(y));if(v>=p&&v<=m)return!0}return!1},uSe=({tick:e,history:t,yScale:n,xScale:r,yGet:s,baseline:a})=>({...Q5t,opacity:X5t({tick:e,history:t,yScale:n,xScale:r,xOffset:iV+5,yOffset:cSe,yHeight:16,yWidth:25,yGet:s,baseline:a})?.4:1}),dSe={fill:Ua.gray,fontSize:12,textAnchor:"start",dx:"6px",fontFamily:"var(--font-family-sans)"},gd={POSITIVE:"positive",NEGATIVE:"negative",NEUTRAL:"neutral",TRANSPARENT:"transparent"},ob={[gd.POSITIVE]:"blue",[gd.NEGATIVE]:"red",[gd.NEUTRAL]:"gray",[gd.TRANSPARENT]:"transparent"},nu=e=>e.date,fSe=e=>new Date(e),fs=e=>fSe(e.date),Z5t=e=>{const t=e.match(/(\d{2}):(\d{2})/);return t?t[0]:void 0},nne=(e,t)=>t?e.replace(/T\d{2}:\d{2}/,`T${t}`):e,J5t={lunch_break:{valence:gd.TRANSPARENT,backgroundColor:ob[gd.TRANSPARENT],backgroundOpacity:0,lineOpacity:0},pre_market:{backgroundOpacity:.5},after_hours:{backgroundOpacity:.5}},rne={lunch_break:J({defaultMessage:"Lunch Break",id:"tHK2Aeii37"}),pre_market:J({defaultMessage:"Pre-Market",id:"8y93h1dAbn"}),after_hours:J({defaultMessage:"After-Hours",id:"19IROpkyrs"})},Mh=(e,t)=>{const n=Z5t(t);if(n)return e?.find(r=>{const s=r.open,a=r.close;return s<=a?n>=s&&n<=a:n>=s||n<=a})},e3t=e=>({backgroundColor:ob[e],backgroundOpacity:1,lineColor:ob[e],lineOpacity:1,valence:e}),t3t={"1d":{0:0,15:5,30:10},"5d":null,"1m":null,"6m":null,"3m":null,ytd:null,"1y":null,"5y":{0:10},max:null};function mSe(e){if(!Array.isArray(e)||e.length<22)return new Set;const r=[];let s=0,a=0;const i=[],l=u=>{i.push(u);const f=u-s;s+=f/i.length,a+=f*(u-s)},c=()=>{const u=i.shift(),f=u-s;s-=f/i.length,a-=f*(u-s)};for(let u=1;u<=20;u++){const f=Math.log(e[u].close/e[u-1].close);l(f)}for(let u=21;u<e.length;u++){const f=Math.log(e[u].close/e[u-1].close),m=i.length>1?a/i.length:0,p=Math.sqrt(m),h=p>0&&Number.isFinite(p),g=h?Math.abs((f-s)/p):0;h&&g>20&&r.push(u),c(),l(f)}return new Set(r.map(u=>e[u].date))}const n3t=(e,t=0)=>{if(t===0||!e?.length)return e;const n=[...e];let r=0;for(let s=0;s<e.length;s++){const a=e[s].close;if(r+=a,s>=t){const l=e[s-t].close;r-=l}const i=s<t?s+1:t;s===0||s===e.length-1||(n[s]={...e[s],close:r/i})}return n},lV=(e,t)=>{const n=t3t[t];if(!n)return e;const r=Object.keys(n).reduce((s,a)=>Math.abs(e.length-+s)<Math.abs(e.length-+a)?+s:+a,0);return n3t(e,n[r]??0)},r3t=e=>e?.includes?.("00:00:00"),pSe=(e,t,n)=>{if(!e)return null;const r=new Date(e),s=!r3t(e);return r.toLocaleString(t,{month:"short",day:"numeric",timeZone:n,minute:s?"2-digit":void 0,hour:s?"numeric":void 0,year:s?void 0:"numeric",timeZoneName:s?"short":void 0})},cV=(e,t,n)=>new Intl.NumberFormat(n,{style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),s3t=Z3(e=>fs(e)).left,a3t=(e,t)=>{if("invert"in e)return e.invert(t);const n=e.step(),r=e.domain(),s=e.range()[0],a=Math.round((t-s)/n);return r[Math.max(0,Math.min(r.length-1,a))]};function uV(e,t,n){const r=Math.max(0,e),s=s3t(n,a3t(t,r),0);return{d:n[s]??n[n.length-1],index:s,x:r}}const iy=I.memo(({countryCode:e,square:t,...n})=>{const r=e??"NEU",s=t?`square/${r}`:r;return o.jsx("img",{src:`https://r2cdn.perplexity.ai/images/country_flags/${s}.svg`,alt:e??"NEU",...n})});iy.displayName="CountryFlag";const o3t={COMMODITY:"",FOREX:"FX",INDEX:"INDEX",CRYPTO:"CRYPTO"},ly=I.memo(({price:e,currency:t,sign:n,variant:r="small",animated:s=!0,className:a})=>{const i=d.useMemo(()=>({style:t?"currency":"decimal",currency:t||void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:Math.abs(e)<.01?void 0:2,signDisplay:n?"exceptZero":void 0}),[t,e,n]);return o.jsx(F,{variant:r,color:"light",className:a,children:o.jsx(ec,{value:e,format:i,animated:s})})});ly.displayName="Price";const hSe=({name:e,variant:t="smallBold"})=>e?o.jsx(F,{variant:t,className:"min-w-0 truncate break-words",as:"span",children:e}):null,gT=({symbol:e,exchange:t,country:n,gap:r="xs"})=>{const s=d.useMemo(()=>e&&decodeURIComponent(e).split(".")[0],[e]),a=d.useMemo(()=>t&&(o3t[t]??t),[t]);if(!s)return null;if(!a)return s;const i=n||null;return o.jsxs(Vo,{className:B("whitespace-nowrap",{"gap-xs":r==="xs","gap-sm":r==="sm"}),children:[o.jsx(An,{id:"symbol",children:s}),o.jsx(An,{id:"exchange",children:a}),i&&o.jsx(An,{id:"country",children:o.jsxs("div",{className:"relative flex w-[1.2em] shrink-0 items-center",children:[o.jsx(iy,{countryCode:i}),o.jsx("div",{className:"absolute inset-0 border border-black/10 dark:border-0"})]})})]})},gSe=({symbol:e,children:t,className:n})=>{const{inApp:r}=Xo(),s=Ot(),a=aV({href:`/finance/${e}`,inApp:r,queryParams:s}),i=d.useCallback(()=>{window.scrollTo({top:0,behavior:"instant"})},[]);return o.jsx(qe,{href:a,className:B("py-sm px-md hover:bg-subtler block border-b duration-150 last:border-b-0",n),onClick:i,children:t})},ySe=e=>{const{trackEvent:t}=Te(),n=d.useCallback((r,s)=>{switch(e){case"discover":t("discover home widget clicked",{widgetType:r,destinationUrl:s});break;case"market":case"crypto":t("finance homepage widget clicked",{pageType:e,widgetType:r,destinationUrl:s});break}},[t,e]);return d.useMemo(()=>({onClick:n}),[n])},Yln=({enter:e,exit:t})=>{const{trackEvent:n}=Te(),r=d.useRef(performance.now()),s=d.useRef(!0);d.useEffect(()=>{n(e,{});const a=()=>{s.current&&n(t,{timeOnPageMs:Math.ceil(performance.now()-r.current)})},i=()=>{document.hidden?(a(),s.current=!1):(r.current=performance.now(),s.current=!0)};return document.addEventListener("visibilitychange",i),window.addEventListener("beforeunload",a),()=>{document.removeEventListener("visibilitychange",i),window.removeEventListener("beforeunload",a),a()}},[n,e,t])},i3t=(e,t,n)=>{const r=()=>{t.removeEventListener("scrollend",r),n?.()};n&&t.addEventListener("scrollend",r),t.scrollTo({top:e,behavior:"smooth"})},l3t=60;function NM(e){const t=e.scrollHeight,n=e.clientHeight,r=e.scrollTop;return Math.abs(t-n-r)<=1}const c3t=()=>{const{scrollContainerRef:e}=ti(),t=d.useCallback(()=>{if(!e?.current)return;const n=e.current,r=n.querySelector("#coin50-section");if(!r)return;const s=r.getBoundingClientRect().top,a=n.scrollTop,i=s+a-l3t;i3t(i,n)},[e]);return d.useMemo(()=>({scrollToCoin50Section:t}),[t])},xSe="#1FB8CD",vSe="#B4413C",u3t=[xSe,"#FFC185",vSe,"#ECEBD5","#5D878F","#DB4545","#D2BA4C","#964325"],bSe="#20808D",_Se="#A84B2F",d3t=[bSe,_Se,"#1B474D","#BCE2E7","#944454","#FFC553","#848456","#6E522B"],f3t={tickColor:"#2F3031",axisColor:"#2F3031",textColor:"#aaaaaa",colorSchema:u3t},m3t={tickColor:"#D9D9D0",axisColor:"#D9D9D0",textColor:"#A0A0A0",colorSchema:d3t},Np=(e="sm")=>{const[t,n]=d.useState(e);d.useEffect(()=>{const c=()=>{window.innerWidth>=1536?n("2xl"):window.innerWidth>=1280?n("xl"):window.innerWidth>=1024?n("lg"):window.innerWidth>=768?n("md"):window.innerWidth>=640&&n("sm")};return window.addEventListener("resize",c),c(),()=>window.removeEventListener("resize",c)},[]);const r=!0,s=["md","lg","xl","2xl"].includes(t),a=["lg","xl","2xl"].includes(t),i=["xl","2xl"].includes(t),l=["2xl"].includes(t);return d.useMemo(()=>({breakpoint:t,isSmallScreen:r,isMediumScreen:s,isLargeScreen:a,isXLargeScreen:i,is2XLargeScreen:l}),[t,l,a,s,r,i])},W0=e=>new Date(e.date),MA=e=>e.close,p3t={blue:xSe,red:vSe},h3t={blue:bSe,red:_Se},dV=I.memo(({history:e,symbol:t,valence:n,width:r=150,height:s=25,strokeWidth:a=1.2,className:i})=>{const{colorScheme:l}=jr(),c=d.useMemo(()=>{const x=[...e],v=mSe(x),b=x.filter(_=>!v.has(_.date));return lV(b,"1d")},[e]),u=d.useMemo(()=>{const x=l==="dark"?p3t:h3t;return n==="positive"?x.blue:x.red},[l,n]),f=d.useMemo(()=>Tp({domain:co(c,W0),range:[0,r]}),[c,r]),m=d.useMemo(()=>Qd({domain:co(c,MA),range:[s,0]}),[c,s]),p=d.useMemo(()=>Hu().x(x=>f(W0(x))??0).y(x=>m(MA(x))??0).curve(MSt),[f,m]),h=d.useMemo(()=>p(c),[p,c]),g=d.useCallback(x=>f(W0(x))??0,[f]),y=d.useCallback(x=>m(MA(x))??0,[m]);return o.jsxs("svg",{height:s,width:r,viewBox:`0 0 ${r} ${s}`,className:B("overflow-visible",i),children:[o.jsx("path",{d:h,stroke:u,strokeWidth:a,fill:"none",shapeRendering:"geometricPrecision"}),o.jsx(X3,{from:`${u}22`,to:`${u}00`,id:`ticker-line-${t}`}),o.jsx(oy,{data:c,x:g,y,yScale:m,fill:`url(#ticker-line-${t})`})]})});dV.displayName="TickerLine";const g3t=({ticker:e,showExchange:t})=>{const{onClick:n}=ySe("crypto"),{scrollToCoin50Section:r}=c3t(),s=()=>{n("top_indices","scroll"),r()};return o.jsx("div",{className:"min-w-0 shrink-0 cursor-pointer",onClick:s,children:o.jsx(yT,{symbol:e.symbol,currency:e.currency,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:t})})},y3t=({ticker:e,marketType:t,showExchange:n})=>{const{onClick:r}=ySe(t),s=d.useCallback(()=>{r("top_indices",`/finance/${e.symbol}`)},[r,e.symbol]);return o.jsx(zu,{href:`/finance/${e.symbol}`,className:"min-w-0 shrink-0",onClick:s,children:o.jsx(yT,{currency:e.currency,symbol:e.symbol,exchange:e.exchange,name:e.name,price:e.price,change:e.change,history:e.history,showExchange:n})})},x3t=e=>{const{country:t}=nSe();return Ue({queryKey:kCt(e,"1d",t),queryFn:()=>TCt({groupId:e,historyPeriod:"1d",country:t}),refetchInterval:1e3*30})},v3t=I.memo(({groupId:e,className:t})=>{const{data:n,isLoading:r}=x3t(e);return o.jsx(wSe,{groupId:e,data:n,isLoading:r,className:t})});v3t.displayName="KeyTickersWithQuery";const wSe=I.memo(({groupId:e,className:t,data:n,isLoading:r,showExchange:s=!0})=>(yp("mini-graphs",{skip:!n}),o.jsxs("div",{className:t,children:[n?.map(a=>o.jsx(z,{children:a.symbol==="COIN50USD"?o.jsx(g3t,{ticker:a,showExchange:s}):o.jsx(y3t,{ticker:a,marketType:e,showExchange:s})},`markets-${a.symbol}`)),r&&[1,2,3,4].map(a=>o.jsx(CSe,{},a))]})));wSe.displayName="KeyTickers";const yT=I.memo(({symbol:e,name:t,currency:n,price:r,change:s,history:a,exchange:i,showExchange:l})=>{const c=s/(r-s)*100,u=t,{isXLargeScreen:f}=Np(),{isMobileStyle:m}=xe(),p=m&&r>1e6?r/1e6:r,h=m&&r>1e6?"M":"",g=d.useMemo(()=>a?.slice().sort((v,b)=>W0(v).getTime()-W0(b).getTime()),[a]),y=s<0?"negative":"positive",x=d.useMemo(()=>({style:n?"currency":"decimal",currency:n??void 0,trailingZeroDisplay:"stripIfInteger"}),[n]);return o.jsxs(Wt,{className:"py-sm gap-xs hover:shadow-subtle flex select-none flex-col transition-all duration-200 hover:scale-[1.02]",children:[o.jsxs("div",{className:"px-sm min-w-0",children:[o.jsxs("div",{className:"gap-xs flex min-w-0 items-center justify-between",children:[o.jsx(F,{variant:"smallBold",className:"min-w-0 truncate",children:u}),o.jsx(Ym,{className:"translate-x-xs",change:c,variant:"tiny",includeIcon:!0})]}),o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(F,{variant:"micro",color:"light",className:"whitespace-nowrap",children:o.jsx(gT,{symbol:e,exchange:!m&&l?i:void 0})}),o.jsx(Ym,{className:"-translate-x-two mt-px",change:s*100,background:!1,variant:"micro",format:x})]})]}),g&&g.length>0&&o.jsx("div",{className:"my-sm flex w-full",children:o.jsx("div",{className:"px-sm flex flex-1",children:o.jsx(dV,{history:g,symbol:e,valence:y,className:"h-auto w-0 flex-1",strokeWidth:f?1.6:1})})}),o.jsx(F,{variant:"baseSemi",className:"px-sm -mb-xs -mt-xs",children:o.jsx(oV,{value:p,format:x,suffix:h})})]})});yT.displayName="KeyTicker";const CSe=I.memo(()=>{const e=d.useMemo(()=>[{date:"2025-01-01",close:100},{date:"2025-01-02",close:100}],[]);return o.jsxs(un,{className:"pointer-events-none relative","aria-hidden":"true",children:[o.jsx("div",{className:"invisible",children:o.jsx(yT,{symbol:"XXX",name:"XXX",price:100,change:100,history:e})}),o.jsx("div",{className:"absolute inset-0",children:o.jsxs(Wt,{className:"py-sm gap-xs flex h-full flex-col",children:[o.jsxs("div",{className:"px-sm",children:[o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-4 w-3/5 max-w-24 rounded"}),o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-1/4 max-w-12 rounded-full"})]}),o.jsxs("div",{className:"gap-sm mt-xs flex items-center justify-between",children:[o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-1/4 max-w-10 rounded"}),o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-1/3 max-w-14 rounded"})]})]}),o.jsx("div",{className:"mx-sm my-xs flex-1",children:o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle size-full rounded"})}),o.jsx("div",{className:"px-sm",children:o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-2/5 max-w-20 rounded"})})]})})]})});CSe.displayName="KeyTickerSkeleton";const fV=I.memo(({widgetId:e,showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Z(),{symbol:a,quote:i,prices:l,isLoading:c,updateStockSettings:u}=QCt(e,r),f=d.useCallback(b=>{u({symbol:b,version:1})},[u]),m=d.useMemo(()=>({style:i.currency?"currency":void 0,currency:i.currency??void 0,minimumFractionDigits:i.price<1e3?2:0,maximumFractionDigits:2}),[i]),p=l[0]?.entries,h=p?.[0]?.price,g=p?.[p.length-1]?.price,y=g&&g>(i?.previousClose??h)?"positive":"negative",x=o.jsx("div",{className:B("h-full transform-gpu rounded-2xl"),children:o.jsxs("div",{className:"gap-xs flex h-full flex-1 flex-col justify-between p-2.5 pb-0 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex flex-col gap-px",children:[o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx(F,{variant:"smallBold",className:"min-w-0 truncate",children:a}),i&&!c&&typeof i.changesPercentage=="number"&&o.jsx(Ym,{change:i.changesPercentage,variant:"micro",includeIcon:!0,className:"-translate-y-0.5 translate-x-0.5 rounded-md"})]}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate whitespace-nowrap",children:c?s({defaultMessage:"Loading...",id:"gjBiyjshwX"}):i?.name||a})]}),Js(l)&&Js(l[0]?.entries)&&i?.price&&typeof i.price=="number"&&o.jsx("div",{className:"pointer-events-none",children:o.jsx(dV,{history:p?.map(b=>({date:b.date,close:b.price}))??ce,symbol:a,valence:y,width:140,height:60,strokeWidth:1.6,className:"h-auto w-full"})}),i?.price&&typeof i.price=="number"?o.jsx(F,{variant:"section-title",className:"-translate-x-two -translate-y-px",children:o.jsx("span",{className:"font-mono",children:o.jsx(ec,{value:i.price,format:m,animated:!0})})}):i?.price?o.jsx(F,{variant:"page-title",className:"-translate-x-two -translate-y-px",children:o.jsx("span",{className:"font-mono text-xl",children:i.price})}):null]})}),v=d.useCallback(()=>n?.(!1),[n]);return r==="thumbnail"?x:o.jsxs(o.Fragment,{children:[o.jsx(Wt,{shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(qe,{draggable:!1,href:`/finance/${a}`,className:"relative block size-full",children:o.jsx("div",{className:"absolute inset-0 select-none",children:x})})}),o.jsx(Ye,{children:t&&o.jsx(Twe,{onClose:v,onSelectStock:f,currentSymbol:a})})]})});fV.displayName="StockWidget";const Z9=I.memo(({hostname:e,title:t,context:n})=>{const r=["teal","maroon","purple","orange","blue"],s=e.split("").reduce((f,m)=>m.charCodeAt(0)+((f<<5)-f),0),a=Math.abs(s)%r.length,i=r[a],l=(t||e)?.[0]?.toUpperCase()??"",c={teal:"bg-[#21808D] dark:bg-[#32B8C6]",maroon:"bg-[#944454] dark:bg-[#FFB3C9]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"},u={teal:"text-[#B1EFF7] dark:text-[#082125]",maroon:"text-[#FFDFE9] dark:text-[#2D171B]",purple:"text-[#FFE4FF] dark:text-[#2E1836]",orange:"text-[#FFE6C8] dark:text-[#3B0F00]",blue:"text-[#CEF4FF] dark:text-[#071F2B]"};return o.jsx("span",{className:`pt-two flex select-none items-center justify-center rounded-full font-sans text-xs font-medium ${c[i]} ${u[i]} ${n==="thumbnail"?"size-4":"size-6"}`,children:l})});Z9.displayName="FaviconFallback";const sne=4,xT=I.memo(({context:e,disabled:t})=>{const[n,r]=d.useState({}),{data:s=[]}=K_e();if(e==="thumbnail")return o.jsx("div",{className:"gap-sm grid size-full grid-rows-3",children:s.length>=3?s.slice(0,3).map(i=>{const c=new URL(i.url).host;return o.jsx(s0,{width:"w-16",disabled:t,thumbnail:n[i.url]?o.jsx(Z9,{hostname:c,title:i.title,context:"thumbnail"}):o.jsx("img",{src:j1(i.url),alt:"Favicon",className:"size-full",onError:()=>{r(u=>({...u,[i.url]:!0}))}})},i.url)}):o.jsxs(o.Fragment,{children:[o.jsx(s0,{width:"w-16",disabled:t}),o.jsx(s0,{width:"w-12",disabled:t}),o.jsx(s0,{width:"w-14",disabled:t})]})});const a=Math.max(sne-s.length,0);return o.jsxs("div",{className:B("flex w-full flex-wrap items-center justify-center gap-3",{"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))]":e==="sortable-widgets"}),children:[s.slice(0,sne).map(i=>{const c=new URL(i.url).host,u=wU(c);return o.jsx(bn,{tooltipText:i.title||i.url,tooltipLayout:"bottom",asChild:!0,children:o.jsx(qe,{href:i.url,children:o.jsxs(Wt,{shadow:!0,className:B("p-sm gap-sm flex w-full select-none items-center rounded-lg border"),bgHover:"subtler",children:[n[i.url]?o.jsx(Z9,{hostname:c,title:i.title}):o.jsx("img",{src:j1(i.url),alt:"Favicon",className:"size-6 rounded-md",onError:()=>{r(f=>({...f,[i.url]:!0}))}}),o.jsx(F,{variant:"tiny",className:"line-clamp-1 text-left capitalize",color:"light",children:u.replace(/\./g," ")})]})})},i.url)}),new Array(a).fill("").map((i,l)=>o.jsx("div",{className:"h-[42px]"},l))]})});xT.displayName="TopMostUrls";const s0=I.memo(({width:e,thumbnail:t,disabled:n})=>o.jsxs(Wt,{shadow:!0,fullBleed:!0,className:"gap-sm px-sm flex flex-row items-center !rounded-lg",children:[o.jsx("div",{className:B("empty:bg-subtle size-4 overflow-hidden rounded-[4px]",{"opacity-50":n}),children:t}),o.jsx("div",{className:B("bg-subtle h-1.5 rounded-full",e,{"opacity-50":n})})]}));s0.displayName="TopMostUrlsThumbnailItem";const SSe="weather-widget-cache",b3t=5*60*1e3;function ane(){try{const e=De.getItem(SSe);if(!e)return{data:null,isValid:!1};const t=JSON.parse(e);if(t.timestamp){const n=Date.now()-t.timestamp<b3t,{timestamp:r,...s}=t;return{data:s,isValid:n}}return{data:t,isValid:!1}}catch{}return{data:null,isValid:!1}}function _3t(e){try{const t={...e,timestamp:Date.now()};De.setItem(SSe,JSON.stringify(t))}catch{}}function one(e="widget",t="default",n=!1){if(e!=="widget")return{version:1,prefersMetric:n};const r=Nx("WEATHER",t);return r?{version:1,prefersMetric:r.prefersMetric??n}:{version:1,prefersMetric:n}}function w3t(e,t="widget",n="default"){t==="widget"&&Sp("WEATHER",n,{version:1,prefersMetric:e.prefersMetric})}function C3t(e="default",t="widget"){const{locale:n}=Z(),{location:r}=fx(),s=r?.latitude??null,a=r?.longitude??null,{data:i}=ane(),l=one(t,e,i?.is_metric_preferred),[c,u]=d.useState(l),{data:f,isLoading:m}=Ue({queryKey:[JB,s,a].map(String),queryFn:async()=>{const{data:M,isValid:j}=ane();if(j&&M)return M;const R=await nbe({location:r,locale:n,reason:"weather-comet-home-widget"});return R&&_3t(R),u(O=>{const D=one(t,e,R?.is_metric_preferred);return{...O,prefersMetric:D.prefersMetric}}),R},placeholderData:i}),p="patchy-rain-possible-day",h=c.prefersMetric?16:62,g="Rainy",y="San Francisco, CA",x=f||i,v=x&&x.current&&x.location,b=!!f,_=!!r,w=v?x.current.condition?.icon:p,C=v?c.prefersMetric?x.current.temp_c??h:x.current.temp_f??h:h,S=v?x.current.condition?.text??g:g,E=v?`${x.location.name}${x.location.is_usa&&x.location.region?`, ${x.location.region}`:x.location.country?`, ${x.location.country}`:""}`:y,k=d.useCallback(M=>{u(M),w3t(M,t,e)},[u,t,e]);return d.useMemo(()=>({icon:w,temperature:C,condition:S,locationName:E,isLoading:m,hasError:!1,hasRealData:b,hasLocation:_,weatherSettings:c,updateWeatherSettings:k}),[w,C,S,E,m,b,_,c,k])}const C2=d.memo(({width:e,variant:t})=>{const[n,r]=d.useState(!1),s=t==="hail"?20:t==="normal"?25:40,a=400,i=t==="hail"?1:20,l=t==="hail"?3:t==="normal"?30:80,c=100,u=t==="hail"?.8:.5,f=t==="hail"?.3:.1,m=zy();return d.useEffect(()=>{r(!0)},[]),!n||m?null:o.jsx("div",{className:"absolute inset-0",children:Array.from({length:s}).map((p,h)=>{const g=Math.floor(Math.random()*(e-1)),y=Math.floor(Math.random()*(l-i+1))+i,x=Math.floor(Math.random()*(c+1)),v=Math.random()*(u-f)+f,b=Math.floor(Math.random()*a)+1,_=t==="hail"?y:1;return o.jsx("div",{className:"absolute inset-y-0",style:{left:g},children:o.jsx("div",{style:{opacity:v,animationDuration:a+x+"ms",animationDelay:-b+"ms",animationTimingFunction:"linear"},className:"animation-weather-rain absolute inset-y-0 will-change-transform",children:o.jsx("div",{style:{width:_,height:y,opacity:v,maskImage:t!=="hail"?"linear-gradient(to bottom, transparent, black, transparent)":void 0},className:B("absolute transform-gpu rounded-full bg-white")})})},h)})})});C2.displayName="Rain";const J9=d.memo(({width:e,height:t,variant:n})=>{const[r,s]=d.useState(!1),a=n==="normal"?50:80,i=n==="normal"?2e3:1e3,l=1,c=8,u=n==="normal"?1500:800,f=.5,m=.1,p=2,h=zy();return d.useEffect(()=>{s(!0)},[]),!r||h?null:o.jsxs("div",{className:"absolute inset-0",children:[o.jsx("div",{className:B("absolute inset-x-0 bottom-0 translate-y-[80%] bg-white opacity-20 blur-sm",{"rounded-m blur-xs -left-xl -right-xl h-lg":n==="heavy"},{"h-md rounded-[50%]":n==="normal"})}),o.jsx(Ye,{children:Array.from({length:a}).map((g,y)=>{const x=Math.floor(Math.random()*(e-1)),v=Math.floor(Math.random()*(c-l+1))+l,b=Math.floor(Math.random()*(u+1)),_=Math.floor(Math.random()*p)+1,w=Math.random()*(f-m)+m,C=Math.floor(Math.random()*i)+1;return o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:x,top:0,height:t},className:"absolute",children:o.jsx("div",{style:{animationDuration:i+b+"ms",animationTimingFunction:"linear",animationDelay:-C+"ms",opacity:w},className:B("absolute rounded-full bg-white","animation-weather-snow"),children:o.jsx("div",{style:{width:v,height:v,animationDuration:"inherit",maskImage:"radial-gradient(black 20%, transparent)"},className:B("absolute rounded-full bg-white",_===1&&"animation-weather-snow-wave")})})},y)})})]})});J9.displayName="Snow";const ESe=d.memo(({width:e,height:t,context:n})=>{const[r,s]=d.useState(!1),a=70,i=2,l=1,c=2,u=500,f=1e3,m=.5,p=.2,h=zy();return d.useEffect(()=>{s(!0)},[]),!r||h?null:o.jsxs("div",{className:"absolute inset-0",children:[o.jsx(Ye,{children:Array.from({length:a}).map((g,y)=>{const x=Math.floor(Math.random()*(e-1)),v=Math.floor(Math.random()*(t-1)),b=Math.floor(Math.random()*(i-l+1))+l,_=Math.floor(Math.random()*c)+1,w=Math.floor(Math.random()*(u+1)),C=Math.floor(Math.random()*(f+1)),S=Math.random()*(m-p)+p;return o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:3},style:{left:x,top:v},className:"absolute",children:o.jsx("div",{style:{width:b,height:b,animationDuration:5e3+w+"ms",animationDelay:C+"ms",opacity:S},className:B("absolute rounded-full bg-white",{"animation-weather-star-twinkle":_===1})})},y)})}),o.jsx("div",{className:B("w-lg absolute left-0 h-px bg-white","animation-weather-star-shoot",{"context-ntp":n==="ntp"})})]})});ESe.displayName="Stars";const vT=["clear-day","clear-night","partly-cloudy-day","partly-cloudy-night","cloudy-day","cloudy-night","patchy-rain-possible-day","patchy-rain-possible-night","possible-thunder-day","possible-thunder-night","overcast","fog","snow","sleet","patchy-freezing-drizzle","heavy-snow","blizzard","drizzle","hail","light-shower","heavy-rain","lightning-rain","lightning-snow"],jM=I.memo(({variant:e,context:t,className:n})=>{const r=d.useCallback(h=>{switch(h){case"clear-day":default:return["#FF813A","#FFC700","#1F84CD"];case"partly-cloudy-day":return["#8E8E8E","#D5D5D5","#1F84CD"];case"partly-cloudy-night":return["#8E8E8E","#6A6A6A","#0B1B39"];case"cloudy-day":case"overcast":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"drizzle":case"light-shower":case"heavy-rain":case"blizzard":case"heavy-snow":case"sleet":case"snow":case"fog":case"possible-thunder-day":case"hail":case"lightning-rain":case"lightning-snow":return["#B8B8B8","#8791AB","#486289"];case"cloudy-night":case"possible-thunder-night":case"patchy-rain-possible-night":return["#222938","#3E475A","#1B2230"];case"clear-night":return["#44344A","#091937","#091937"]}},[]),s=d.useCallback(h=>{switch(h){default:return null;case"partly-cloudy-night":case"cloudy-night":case"possible-thunder-night":case"clear-night":return"stars";case"light-shower":case"sleet":case"drizzle":case"patchy-rain-possible-night":case"patchy-rain-possible-day":case"patchy-freezing-drizzle":case"lightning-rain":return"rain";case"hail":return"rain-hail";case"heavy-rain":return"rain-heavy";case"snow":return"snow";case"heavy-snow":case"blizzard":case"lightning-snow":return"snow-heavy"}},[]),a=r(e),[i,l,c]=a,[u,{width:f,height:m}]=Ho(),p=t==="ntp"?null:s(e);return o.jsxs("div",{style:{backgroundColor:c},className:B("absolute inset-0 overflow-hidden rounded-xl shadow-md",n),children:[o.jsx("div",{className:"-inset-xl absolute translate-y-1/4 rounded-[50%] opacity-75",style:{backgroundColor:l}}),o.jsx("div",{className:"-inset-xl absolute translate-y-[60%] rounded-[50%] opacity-75",style:{backgroundColor:i}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 overflow-hidden",style:{backdropFilter:"blur(40px)",WebkitBackdropFilter:"blur(40px)"}}),o.jsx("div",{className:"absolute inset-0",ref:u,children:p==="stars"?o.jsx(ESe,{height:m,width:f,context:t}):p==="rain"?o.jsx(C2,{height:m,width:f,variant:"normal"}):p==="rain-heavy"?o.jsx(C2,{height:m,width:f,variant:"heavy"}):p==="snow"?o.jsx(J9,{height:m,width:f,variant:"normal"}):p==="snow-heavy"?o.jsx(J9,{height:m,width:f,variant:"heavy"}):p==="rain-hail"?o.jsx(C2,{height:m,width:f,variant:"hail"}):null}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-transparent"})]})});jM.displayName="WeatherGradient";const ib={"clear-day":zb,"clear-night":bLe,"partly-cloudy-day":iG,"partly-cloudy-night":oG,"cloudy-day":iG,"cloudy-night":oG,"patchy-rain-possible-day":vLe,"patchy-rain-possible-night":xLe,"possible-thunder-day":yLe,"possible-thunder-night":gLe,overcast:hLe,fog:pLe,snow:mLe,sleet:fLe,"patchy-freezing-drizzle":dLe,"heavy-snow":uLe,blizzard:cLe,drizzle:lLe,hail:iLe,"light-shower":oLe,"heavy-rain":aLe,"lightning-rain":aG,"lightning-snow":aG},mV=I.memo(({widgetId:e="default",showSettings:t,setShowSettings:n,context:r="widget"})=>{const{$t:s}=Z(),a=C3t(e,r),[i,l]=d.useState(!1),c=d.useCallback(()=>n?.(!1),[n]),{permissionStatus:u}=fx(),{openModal:f}=xt();d.useEffect(()=>{u==="granted"&&l(!0)},[u]);const m=d.useCallback(()=>{f("locationPermissionModal",{onPermissionGranted:()=>{l(!0)},origin:"weather_widget"})},[f]);if(!a.hasRealData&&!a.hasLocation&&a.isLoading)return o.jsxs("div",{className:B("h-full transform-gpu rounded-2xl"),children:[o.jsx(jM,{variant:"clear-day",className:"rounded-2xl",context:"ntp"}),o.jsx("div",{className:"gap-sm flex h-full flex-1 flex-col items-center justify-center p-2.5 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:o.jsx(F,{variant:"tiny",color:"white",className:"opacity-75",children:s({defaultMessage:"Loading weather...",id:"kTpqlc9m9M"})})})]});const p=Dk(vT,a.icon)?ib[a.icon]:zb,h=o.jsxs("div",{className:B("h-full transform-gpu overflow-hidden rounded-2xl"),children:[o.jsx(jM,{variant:a.icon,className:"!rounded-2xl",context:"ntp"}),o.jsxs("div",{className:"gap-sm flex h-full flex-1 flex-col justify-between p-2.5 pb-0 pt-1 drop-shadow-sm",style:{zoom:r==="thumbnail"?.75:1},children:[o.jsxs("div",{className:"flex flex-row items-start justify-between",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"page-title",color:"white",children:o.jsxs("span",{className:"font-mono",children:[a.temperature,"",a.weatherSettings.prefersMetric?"C":"F"]})}),o.jsx(F,{variant:"tinyRegular",color:"white",className:"-mt-xs opacity-60",children:a.condition})]}),o.jsx(F,{variant:"page-title",color:"white",className:"mr-0.5 mt-2",children:o.jsx(de,{icon:p,size:36,className:"-mt-xs"})})]}),o.jsx(F,{variant:"tiny",color:"white",className:"mb-1.5 line-clamp-2 flex items-center",children:a.locationName})]})]});return r==="thumbnail"?h:o.jsxs(o.Fragment,{children:[o.jsx(Wt,{shadow:!0,fullBleed:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",children:o.jsx(qe,{href:`/search/new?q=${s({defaultMessage:"weather near {location}",id:"vi8HXN1mDE"},{location:a.locationName})}
          `,draggable:!1,className:"relative block size-full",children:o.jsx("div",{className:"absolute inset-0 select-none",children:h})})}),o.jsx(Ye,{children:t&&o.jsx(xf,{onClose:c,children:o.jsxs("div",{className:"flex flex-col gap-3 px-5 py-4",children:[o.jsx(F,{variant:"entry-title-300",children:s({defaultMessage:"Weather settings",id:"RMurwlcxbd"})}),o.jsx("div",{className:"flex flex-col gap-3",children:o.jsx("div",{className:"flex w-full flex-col",children:o.jsxs("div",{className:"border-subtlest flex w-full gap-2 rounded-lg border p-1",children:[o.jsxs("label",{className:B("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-subtle":a.weatherSettings.prefersMetric}),children:[o.jsx("input",{type:"radio",name:"tempUnit",checked:a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!0};a.updateWeatherSettings(g)},className:"hidden"}),o.jsx(F,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"default":"light",children:s({defaultMessage:"Celsius",id:"y/PhoM9SbF"})})]}),o.jsxs("label",{className:B("flex w-full cursor-pointer items-center justify-center rounded-md py-2",{"bg-subtler dark:bg-subtle":!a.weatherSettings.prefersMetric}),children:[o.jsx("input",{type:"radio",name:"tempUnit",checked:!a.weatherSettings.prefersMetric,onChange:()=>{const g={version:1,prefersMetric:!1};a.updateWeatherSettings(g)},className:"hidden"}),o.jsx(F,{variant:"smallBold",color:a.weatherSettings.prefersMetric?"light":"default",children:s({defaultMessage:"Fahrenheit",id:"K2DDr1Ji/l"})})]})]})})}),o.jsx(z,{className:"border-t"}),o.jsxs("div",{className:"flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(F,{variant:"smallBold",children:s({defaultMessage:"Precise Location",id:"WP8KG0QkTf"})}),o.jsx(F,{variant:"small",className:"leading-tight",color:"light",children:s({defaultMessage:"Use your device location to get the most accurate weather information.",id:"Dsn2unk3pR"})})]}),o.jsx(S3t,{permissionStatus:u,children:o.jsx("div",{onClick:i?void 0:m,children:o.jsx(_o,{active:i,disabled:i})})})]}),o.jsx(z,{className:"border-t"}),o.jsx("div",{className:"mt-sm flex flex-row justify-end",children:o.jsx(me,{variant:"primary",size:"small",onClick:c,text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})})})]})})})]})});mV.displayName="WeatherWidget";const S3t=({children:e,permissionStatus:t})=>{const{$t:n}=Z(),r=n({defaultMessage:"Currently using precise location. This can be disabled from Comet Settings.",id:"5Z0PWou5EU"});return t==="granted"?o.jsx(bn,{asChild:!0,tooltipText:r,delayDuration:0,bodyTextClassName:"text-center",children:e}):e},E3t="chrome://wormhole",ine="wormhole-widgets-enabled-cache";function M3t(){const{value:e,loading:t}=Qs({flag:"wormhole-widget",defaultValue:!1}),[n,r]=d.useState(()=>{const s=De.getItem(ine);return s?JSON.parse(s):!1});return d.useEffect(()=>{t||e!==n&&(r(e),De.setItem(ine,JSON.stringify(e)))},[e,t,n]),n}const pV=I.memo(({context:e="widget"})=>{const t=Nn(),n=d.useCallback(()=>{t.openTab({url:E3t,key:"openWormhole"})},[t]),r=o.jsx("div",{className:"group relative size-full",children:o.jsx("img",{src:"/static/images/wormhole/thumbnail.png",alt:"Wormhole",className:"pointer-events-none absolute inset-0 object-cover"})});return e==="thumbnail"?r:o.jsx(Wt,{fullBleed:!0,shadow:!0,className:"active:!bg-subtler dark:active:!bg-subtle aspect-[1/1] w-full cursor-pointer overflow-hidden !rounded-2xl",onClick:n,children:r})});pV.displayName="WormholeWidget";const hV=I.memo(({context:e="widget"})=>{const t=o.jsx("div",{className:B("relative size-full cursor-pointer select-none",{"active:!bg-subtler dark:active:!bg-subtle":e==="widget"}),children:o.jsx("div",{className:"group relative size-full",children:o.jsx("img",{src:"/static/images/zen/thumbnail.png",alt:"Zen",className:"pointer-events-none absolute inset-0 object-cover"})})});return e==="thumbnail"?t:o.jsx(Wt,{shadow:!0,className:"aspect-[1/1] w-full overflow-hidden !rounded-2xl",fullBleed:!0,children:o.jsx(qe,{href:"/b/zen",className:"cursor-pointer",draggable:!1,children:t})})});hV.displayName="ZenWidget";const k3t=500,MSe=I.memo(function({id:t,editMode:n,onDelete:r,onShowSettings:s,widget:a}){const[i,l]=d.useState(!1),{isMobileStyle:c}=xe(),{$t:u}=Z(),[f,m]=d.useState(!1),[p,h]=d.useState(!1),[g,y]=d.useState(!1),x=d.useRef(null),{trackEvent:v}=Te(),b=d.useCallback((P,A)=>{v(`comet home widget ${P}`,{widgetType:A,widgetName:a?.name})},[v,a?.name]);d.useEffect(()=>{i&&(m(!1),y(!1))},[i]),d.useEffect(()=>()=>{x.current&&clearTimeout(x.current)},[]);const _=d.useCallback(()=>{x.current&&clearTimeout(x.current),x.current=setTimeout(()=>{y(!0),b("hovered",a?.type)},k3t)},[b,a?.type]),w=d.useCallback(()=>{x.current&&clearTimeout(x.current),f||y(!1)},[f]),C=d.useCallback(P=>{s(P),h(P)},[s]);d.useEffect(()=>{y(!1)},[p]);const{attributes:S,isDragging:E,listeners:k,setNodeRef:M}=w_t({id:t,disabled:!n}),j=P=>{switch(P){case"ANALOG_CLOCK":return o.jsx(j$,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C,showCity:!0});case"STICKY":return o.jsx(I$,{widgetId:t,showSettings:p,setShowSettings:C,context:"widget",defaultText:""});case"TOP_URLS":return o.jsx(xT,{context:"sortable-widgets"});case"WEATHER":return o.jsx(mV,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C});case"STOCK":return o.jsx(fV,{widgetId:t,context:"widget",showSettings:p,setShowSettings:C});case"DISCOVER":return o.jsx(A$,{context:"widget",showSettings:p,setShowSettings:C});case"ASSISTANT":return o.jsx(N$,{widgetId:t,context:"widget",defaultQuery:u({defaultMessage:"Find important unanswered emails",id:"D8O0cB/SKH"}),showSettings:p,setShowSettings:C});case"SHORTCUT":return o.jsx(T$,{widgetId:t,context:"widget",defaultName:u({defaultMessage:"quick-dinner",id:"7f3tHXsIWC"}),defaultQuery:u({defaultMessage:"Give me 3 ideas of one-pan meals I can make for dinner tonight",id:"sgqIZmDyDW"}),showSettings:p,setShowSettings:C});case"WORMHOLE":return o.jsx(pV,{widgetId:t,context:"widget"});case"ZEN":return o.jsx(hV,{context:"widget"});case"EXPLORE_ASSISTANT":return o.jsx(xwe,{context:"widget"},`${t}-widget`);default:return null}},R=d.useMemo(()=>{const P={type:"default",text:u({defaultMessage:"Remove",id:"G/yZLul6P1"}),destructive:!0,onClick:()=>{r?.(),b("dismissed",a?.type)}},A={type:"default",text:u({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:()=>C(!p)};return[...a?.settings?[A]:[],...a?.cannotBeDeleted?[]:[P]]},[u,r,p,a?.cannotBeDeleted,a?.settings,C,b,a?.type]),O=d.useCallback(()=>m(!0),[m]),D=d.useCallback(()=>{m(!1),y(!1)},[]);return a?o.jsxs(ve.div,{layout:!0,ref:M,className:B("relative isolate",a.width===4?"col-span-full":a.width===3?"col-span-3":a.width===2?"col-span-2":"col-span-1",{"z-[100]":E||i}),drag:n,dragSnapToOrigin:!0,onMouseEnter:_,onMouseLeave:w,onDragStart:()=>{l(!0)},onDragTransitionEnd:()=>{l(!1)},exit:{opacity:0},transition:Is,onClick:()=>b("selected",a?.type),children:[o.jsx(Ye,{children:(n||g)&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Is,className:"absolute -left-2 -top-2 z-10",children:o.jsx(nn,{isMobileStyle:c,items:R,placement:"bottom-start",onOpen:O,onClose:D,children:o.jsx(z,{as:"button",onClick:O,variant:"raised",className:"active:!bg-subtler dark:active:!bg-subtle shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:o.jsx(de,{icon:Ud,size:"sm"})})})})}),n&&o.jsx("div",{className:B("absolute inset-0 z-[9] cursor-grab",{"cursor-grabbing":E}),onMouseDown:()=>m(!1),...S,...k}),j(a.type)]}):null});MSe.displayName="WidgetItem";const kSe=I.memo(({widget:e,widgetData:t,editMode:n,handleDelete:r,onShowSettings:s})=>{const a=d.useCallback(()=>r(e.id),[r,e.id]);return t?e.shouldHide?o.jsx("div",{className:B("h-px",{"col-span-full":t.width===4,"col-span-1":t.width===1,"col-span-2":t.width===2,"col-span-3":t.width===3}),style:{opacity:0}},e.id):o.jsx(Nr,{fallback:null,children:o.jsx(MSe,{id:e.id,editMode:n,onDelete:a,widget:t,onShowSettings:s})},e.id):null});kSe.displayName="WidgetsFactory";const TSe=I.memo(({aspectRatio:e,onClick:t,widget:n,widgetIsAdded:r,hideIconOutline:s,manuallyDisabled:a=!1})=>{const i=n.singleton&&r||a,l=u=>{switch(u){case"ANALOG_CLOCK":return o.jsx(j$,{widgetId:n.type,context:"thumbnail"});case"STICKY":return o.jsx(I$,{widgetId:n.type,context:"thumbnail",defaultText:"My great sticky..."});case"WEATHER":return o.jsx(mV,{widgetId:n.type,context:"thumbnail"});case"TOP_URLS":return o.jsx(xT,{context:"thumbnail",disabled:i});case"STOCK":return o.jsx(fV,{widgetId:n.type,context:"thumbnail"});case"DISCOVER":return o.jsx(A$,{context:"thumbnail"});case"ASSISTANT":return o.jsx(N$,{widgetId:n.type,context:"thumbnail",defaultQuery:"Find important unanswered emails"});case"SHORTCUT":return o.jsx(T$,{widgetId:n.type,context:"thumbnail",defaultName:"quick-dinner",defaultQuery:"Give me 3 ideas of one-pan meals I can make for dinner tonight"});case"WORMHOLE":return o.jsx(pV,{widgetId:n.type,context:"thumbnail"});case"ZEN":return o.jsx(hV,{context:"thumbnail"});case"EXPLORE_ASSISTANT":return o.jsx(xwe,{context:"thumbnail"},`${n.type}-thumbnail`);default:return o.jsx("div",{})}},c=d.useMemo(()=>({aspectRatio:e}),[e]);return o.jsxs("div",{className:"gap-sm relative flex flex-col items-center justify-center",children:[!i&&o.jsx("div",{className:"absolute -top-2 left-1/2 z-10 translate-x-[-68px]",children:o.jsx(z,{as:"button",variant:"raised",onClick:i?void 0:t,className:"active:!bg-subtler dark:active:!bg-subtle shadow-overlay flex size-6 !cursor-pointer items-center justify-center rounded-full",children:o.jsx(de,{icon:ar,size:"sm"})})}),o.jsx(Wt,{shadow:!0,fullBleed:!s,onClick:i?void 0:t,style:c,className:B("h-[120px] cursor-pointer overflow-hidden",{"pointer-events-none":i,"!overflow-visible !rounded-none border-none !bg-transparent shadow-none":s}),children:o.jsx("div",{className:"absolute inset-0",children:l(n.type)})}),o.jsx(F,{variant:"small",color:i?"ultraLight":"default",children:n.name})]})});TSe.displayName="WidgetsTrayItem";const T3t=25,NSe=I.memo(({widget:e,handleAdd:t,userWidgets:n,handleRequestWeatherPermission:r,topSitesData:s})=>{const a=d.useMemo(()=>e.type==="TOP_URLS"&&s.length===0||n.length>=T3t,[s.length,n.length,e.type]),i=d.useCallback(()=>{t(e),r()},[t,r,e]);if(!e||e.cannotBeDeleted)return null;const l=n.some(c=>c.type===e.type);return o.jsx(Nr,{fallback:null,children:o.jsx(TSe,{aspectRatio:1/1,widget:e,widgetIsAdded:l,hideIconOutline:e.type==="TOP_URLS",onClick:i,manuallyDisabled:a})})});NSe.displayName="WidgetsTrayFactory";const N3t=({widgets:e,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r,handleAdd:s})=>e.map((a,i)=>o.jsx(NSe,{widget:a,handleAdd:s,userWidgets:t,handleRequestWeatherPermission:n,topSitesData:r},i)),jSe=I.memo(({children:e,setEditMode:t,containerRef:n,maxWidgetsReached:r})=>{const{$t:s}=Z(),a=d.useCallback(()=>t(!1),[t]);return o.jsx(ff,{portalTarget:n.current??document.body,children:o.jsx(ve.div,{initial:{y:"100%",x:"-50%"},animate:{y:0,x:"-50%"},exit:{y:"100%",x:"-50%"},transition:Is,className:"md:px-xl fixed bottom-0 left-1/2 z-[100] w-full pb-3",children:o.jsx("div",{className:"px-xl mx-auto max-w-[800px]",children:o.jsxs(z,{variant:"raised",className:"dark:!bg-base shadow-overlay size-full rounded-2xl pb-3",children:[o.jsx("div",{className:"scrollbar-none max-h-[250px] w-full overflow-scroll",children:e}),o.jsxs("div",{className:"pl-md border-subtlest sticky left-0 flex w-full flex-row items-center border-t pr-3 pt-3",children:[r&&o.jsx(F,{variant:"small",color:"ultraLight",children:s({defaultMessage:"You have reached the maximum number of widgets",id:"fRBSTWO49U"})}),o.jsx(me,{variant:"primary",size:"small",extraCSS:"ml-auto",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"}),onClick:a})]})]})})})})});jSe.displayName="WidgetTray";const j3t=()=>{const{$t:e}=Z();return d.useMemo(()=>[{type:"TOP_URLS",name:e({defaultMessage:"Top Sites",id:"v/BAbysxv5"}),singleton:!0,width:4},{type:"ANALOG_CLOCK",name:e({defaultMessage:"Clock",id:"qCyPKfisKN"}),settings:!0,width:1},{type:"STICKY",name:e({defaultMessage:"Sticky",id:"kpXiKrXCK9"}),settings:!0,width:1},{type:"WEATHER",name:e({defaultMessage:"Weather",id:"O2sqh9Nj5X"}),settings:!0,singleton:!0,width:1},{type:"STOCK",name:e({defaultMessage:"Stock",id:"vuKrlWBaI3"}),settings:!0,width:1},{type:"DISCOVER",name:e({defaultMessage:"Discover",id:"cE4HfwyEyr"}),singleton:!0,width:1},{type:"ASSISTANT",name:e({defaultMessage:"Assistant",id:"wSAvhubuX6"}),settings:!0,width:1},{type:"SHORTCUT",name:e({defaultMessage:"Shortcut",id:"tceWOrncgz"}),settings:!0,width:1},{type:"WORMHOLE",name:e({defaultMessage:"Wormhole",id:"GrT4LLPa93"}),singleton:!0,width:1},{type:"ZEN",name:e({defaultMessage:"Zen",id:"wpzEtliq4X"}),singleton:!0,width:1},{type:"EXPLORE_ASSISTANT",name:e({defaultMessage:"Try Assistant",id:"E4vPUv5Uqt"}),singleton:!0,width:1}],[e])},lne=25,A3t=()=>null,ASe=I.memo(({editMode:e,setEditMode:t,containerRef:n,askInput:r})=>{const s="sortable-widgets",{showStudentWidgets:a}=Q_t(),{shouldShowWidget:i}=J_e(),[l,c]=d.useState(X_e([])),u=q1t(G1t(b$)),f=d.useRef(!1),{show:m,title:p,actionLabel:h,icon:g,onDismiss:y,onClick:x}=k_t(),{data:v=[]}=K_e(),b=j3t();d.useEffect(()=>{if(!f.current){f.current=!0;return}S$(l)},[l]);const _=d.useCallback(P=>{const{active:A,over:T}=P;T&&A.id!==T.id&&c(N=>{const L=N.findIndex($=>$.id===A.id),U=N.findIndex($=>$.id===T.id);return w$(N,L,U)})},[]),w=d.useCallback(P=>{l.length>=lne||c(A=>[...A,{id:crypto.randomUUID(),type:P.type}])},[l]),C=d.useCallback(P=>{c(A=>A.filter(T=>T.id!==P))},[]),S=d.useCallback(()=>{navigator.geolocation.getCurrentPosition(ne.info)},[]),E=M3t(),k=J_t(),{data:M}=K3({reason:s,enabled:k}),[j,R]=d.useState(!1);d.useEffect(()=>{if(!k||!M||j)return;const P=M?.map?.(L=>L.task_id)??ce,T=l.filter(L=>L.type==="SHORTCUT").map(L=>{const{taskId:U}=Q_e({context:"widget",widgetId:L.id});return{...L,taskId:U}}).filter(L=>!P.includes(L.taskId)).filter(L=>L.taskId!==C$).map(L=>L.id);if(T.length===0)return;T.forEach(L=>{I_t(L)});const N=l.filter(L=>!T.includes(L.id));c(N)},[M,l,k,j]);const O=d.useMemo(()=>l.filter(P=>P.type==="EXPLORE_ASSISTANT"?i:L_t(P.id)?a:P.type==="SHORTCUT"?k:P.type==="WORMHOLE"?E:!0).map(P=>({...P,shouldHide:P.type==="TOP_URLS"&&v.length===0})),[l,v,i,k,E,a]),D=d.useMemo(()=>b.filter(P=>P.type==="WORMHOLE"?E:P.type==="EXPLORE_ASSISTANT"?i:P.type==="SHORTCUT"?k:P.type==="ASSISTANT"?!k:!0),[b,E,i,k]);return D_t(l,b),o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"p-lg flex min-h-full w-full items-center justify-center",children:o.jsxs("div",{style:{width:800},className:"grid grid-cols-[repeat(auto-fill,minmax(160px,1fr))] gap-3",children:[o.jsx(swe,{shouldShow:m,title:p,actionLabel:h,icon:g,onDismiss:y,onClick:x}),o.jsx(Gbt,{sensors:u,collisionDetection:ebt,onDragOver:_,children:o.jsxs(h_t,{items:O,strategy:A3t,children:[o.jsx(ve.div,{layout:!0,transition:Is,className:"-mb-md col-span-full",children:r}),o.jsx(Ye,{children:O.map(P=>o.jsx(kSe,{widget:P,editMode:e,handleDelete:C,widgetData:Y_e(b,P.type),onShowSettings:R},P.id))})]})})]})}),o.jsx(Ye,{children:e&&o.jsx(jSe,{containerRef:n,setEditMode:t,maxWidgetsReached:l.length>=lne,children:o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"grid w-full grid-cols-[repeat(auto-fill,minmax(120px,1fr))] flex-row gap-6 p-6",children:o.jsx(N3t,{widgets:D,handleAdd:w,userWidgets:l,handleRequestWeatherPermission:S,topSitesData:v})})})})})]})});ASe.displayName="HomeWidgets";const I3t=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"comet-cash-p2p-referrals",defaultValue:e,extraAttributes:t,subjectType:"visitor_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])},cne="comet-cash-p2p-referrals",R3t=1e3,ISe=I.memo(e=>{const{$t:t}=Z(),n=vt(),{trackEvent:r}=Te(),[s,a]=d.useState(()=>{const y=De.getItem(cne);return y==="true"?!0:y==="false"?!1:null}),[i,l]=d.useState(!1),c=d.useRef(null),{variation:u,loading:f}=I3t(!1);d.useEffect(()=>{!f&&u!==void 0&&(De.setItem(cne,String(u)),s===!1&&u===!0&&a(!0))},[u,f,s]);const m=s===!0?!0:f?!1:u;d.useEffect(()=>(m&&(l(!0),c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{l(!1),c.current=null},R3t)),()=>{c.current&&clearTimeout(c.current)}),[m]);const p=d.useCallback(()=>{const y=m?"/browser/invite-ga":"/browser/invite";r("comet ntp invite button clicked",{cometSurface:"comet_home"}),n.push(y)},[n,r,m]),h=d.useMemo(()=>{if(m){const y=t({defaultMessage:"Invite & Earn",id:"3ysiSRLFx5"});return i?o.jsx(un,{variant:"super",speed:"slow",as:"span",className:"relative inline-flex items-center",children:y}):y}return t({defaultMessage:"Invites",id:"Wy+IdbkBFc"})},[m,i,t]),g=d.useMemo(()=>m?o.jsx(ve.div,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},transition:{duration:.3,ease:[.4,0,.2,1]},children:o.jsx("div",{className:"bg-super text-inverse py-three flex items-center rounded-full px-1.5",children:o.jsx(F,{variant:"micro",color:"defaultInverted",className:"font-medium uppercase leading-none tracking-wider",children:t({defaultMessage:"NEW",id:"5Jcaq49T38"})})})}):null,[m,t]);return o.jsx(me,{...e,icon:up,text:h,trailingComponent:g,onClick:p})});ISe.displayName="NTPInviteButton";const P3t=()=>{const{value:e}=Qs({flag:"comet-invite-system",defaultValue:!0});return e};function L3t({isLazy:e=!0,enabled:t=!0,onMentionCometMcp:n}){const[r,s]=d.useState(()=>!e),a=Nn(),{cometMcpSources:i}=C_(),l=t&&a!==null&&Object.keys(i).length>0,c=d.useMemo(()=>!t||!l?[]:Object.entries(i).map(([f,m])=>O3t(f,m,n)),[t,l,i,n]),u=d.useCallback(()=>{r||s(!0)},[r]);return d.useMemo(()=>({isAtMentionCometMcpEnabled:l,mentionCometMcpOptions:c,onTrigger:u}),[l,c,u])}function O3t(e,t,n){return{uuid:e,variant:"source",label:t.text,icon:D3t(t),action:()=>n?.(e),convertToNode:!0}}function D3t(e){if(e.iconUrl)return{type:"image",url:e.iconUrl}}function F3t(){const{value:e}=jt({flag:"at-mention-spaces",subjectType:"user_nextauth_id",defaultValue:!0});return e}function U3t({reason:e,collectionName:t,isLazy:n=!0,enabled:r=!0}){const{$t:s}=Z(),[a,i]=d.useState(()=>!n),{isMobileStyle:l}=xe(),c=et(),u=F3t()&&r,{data:f,isStale:m,refetch:p}=Ue({queryKey:Xv(),queryFn:()=>Ket({reason:e}),enabled:u&&a,staleTime:10*60*1e3}),h=d.useCallback(()=>{a?m&&p():i(!0)},[a,m,p]),g=d.useMemo(()=>(f?.spaces??[]).map(v=>({uuid:v.uuid,variant:"space",label:v.title,icon:B3t(v)})),[f]),y=d.useMemo(()=>{const x=jqe();if(!(!u||l||!c||x))return t?s({defaultMessage:"Ask anything about { space } or @ mention a Space",id:"NpwyMmamjs"},{space:t}):s({defaultMessage:"Ask anything or @mention a Space",id:"5FEHAEZOKs"})},[s,t,u,l,c]);return d.useMemo(()=>({isAtMentionSpacesEnabled:u,mentionSpacesOptions:g,inputPlaceholder:y,onTrigger:h}),[y,u,g,h])}function B3t(e){return e.emoji?{type:"emoji",char:String.fromCodePoint(parseInt(e.emoji,16))}:{type:"icon",icon:uo}}function rw(){const{value:e}=Qs({flag:"shortcut-tasks",defaultValue:!0});return e&&Ks()}function bT(){const{gpt4Limit:e,pplxAlphaLimit:t,pplxBetaLimit:n}=ir(),{specialCapabilities:r}=ts(),s=et(),{hasAccessToProFeatures:a,isMax:i}=St(),l=ix(),c=!r.unlimitedProSearch&&e<=0&&!a,u=!r.unlimitedResearch&&(e<=0||t<=0),f=e<=0||n<=0,{session:m}=mt(),p=m?.user?.email??"",{isStudent:h}=V5({email:p,reason:"study-mode-access"});return d.useCallback(g=>{const y=vo[g],x=y===ue.SEARCH&&![le.DEFAULT,le.PRO].includes(g);if(g===le.DEFAULT)return!0;if(s)return Dr(g)===ue.STUDY&&!h?!1:i?!0:c||Dr(g)===ue.RESEARCH&&u||Dr(g)===ue.STUDIO&&f||l(y)?!1:!(!a&&x&&!r.unlimitedProSearch);{const v=r.unlimitedProSearch&&Dr(g)===ue.SEARCH&&!l(y),b=r.unlimitedResearch&&Dr(g)===ue.RESEARCH&&!l(y);return v||b}},[c,u,f,a,r.unlimitedProSearch,r.unlimitedResearch,s,l,i,h])}function sw(){const{$t:e}=Z(),t=et(),{openVisitorLoginUpsell:n}=or({enabled:!t}),r=ix(),s=bT(),a=Jo(),{specialCapabilities:i}=ts(),l=d.useCallback((u,f)=>{const m=vo[u];if(u===le.DEFAULT&&!f)return!1;const p=s(u)===!1||f;if(t)if(p){const h={[ue.SEARCH]:e({defaultMessage:"Want more {copilot}?",id:"Kf+JzdHL3c"},{copilot:"Pro Search"}),[ue.RESEARCH]:e({defaultMessage:"Want more Research?",id:"4cKm89wwuR"}),[ue.STUDIO]:e({defaultMessage:"Try Perplexity Labs",id:"y2BN7EwBoA"}),[ue.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},g={[ue.SEARCH]:e({defaultMessage:"With {pplx} {pro}, get as many as you want",id:"jRMiP6Ut4n"},{pplx:"Perplexity",pro:"Pro"}),[ue.RESEARCH]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Research.",id:"WuvGBcnhvG"}):e({defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),[ue.STUDIO]:r(m)?e({defaultMessage:"Upgrade to Max for unlimited access to Perplexity Labs.",id:"jmWIIwpGtp"}):e({defaultMessage:"Exclusive access for subscribers",id:"1LB4QwRSMw"}),[ue.STUDY]:e({defaultMessage:"Ask questions and learn",id:"8RzCMAs2/c"})},y=h[m??ue.SEARCH],x=g[m??ue.SEARCH],b={[ue.SEARCH]:Le.TRY_COPILOT,[ue.RESEARCH]:Le.TRY_RESEARCH,[ue.STUDIO]:Le.TRY_LABS}[m??ue.SEARCH]??Le.TRY_COPILOT;return a({pitchMessage:{title:y,description:x},origin:b}),!0}else return!1;else{if(u===le.PRO&&i.unlimitedProSearch)return!1;const h={[ue.SEARCH]:e({defaultMessage:"Sign in to access Pro Search",id:"AARKXJYL5U"}),[ue.RESEARCH]:e({defaultMessage:"Sign in to access Perplexity Research",id:"D/01NxLK/G"}),[ue.STUDIO]:e({defaultMessage:"Sign in to try Perplexity Labs",id:"xJYMyIruMK"}),[ue.STUDY]:e({defaultMessage:"Sign in to access Perplexity Study",id:"PiR4Uw7Ibg"})},g={[ue.SEARCH]:e({defaultMessage:"10x as many citations in answers",id:"D0fULpN8/D"}),[ue.RESEARCH]:e({defaultMessage:"Deep research and analysis on any topic",id:"vZzVhXmhZo"}),[ue.STUDIO]:e({defaultMessage:"Create projects from scratch, exclusive access for subscribers",id:"STPFx+8/sC"}),[ue.STUDY]:e({defaultMessage:"Step-by-step learning",id:"UGHOn5vTUx"})},y=h[m??ue.SEARCH],x=g[m??ue.SEARCH];return n({title:y,description:x,origin:Le.TRY_PRO}),!0}},[e,s,t,a,n,r,i.unlimitedProSearch]),c=d.useCallback(u=>s(u)?!1:(t?a({pitchMessage:{title:e({defaultMessage:"Choose a model",id:"fXlc3idTcy"}),description:e({defaultMessage:"With Perplexity Pro, you get unlimited access to all the latest AI models in one subscription",id:"YHjeXkhaC/"})},origin:Le.MODEL_SELECTOR}):n({title:e({defaultMessage:"Sign in to choose a model",id:"BhbQUiYsTB"}),description:e({defaultMessage:"Access the latest AI models from Perplexity, OpenAI, Anthropic (Claude), Google Gemini and more",id:"DDVABeGeBG"}),origin:Le.MODEL_SELECTOR}),!0),[s,t,a,n,e]);return d.useMemo(()=>({gateSearchModeSelection:l,gateSearchModelSelection:c}),[l,c])}function RSe(){const e=qa(),{actions:t}=In(),{setConfiguredModel:n,setConfiguredSearchMode:r}=ir(),{gateSearchModelSelection:s}=sw(),a=gV();return d.useCallback((i=a(),l=e)=>{s(i)||(t.setPreferredSearchModel(l,i),n(i),r(l))},[e,s,a,n,r,t])}const gV=()=>{const{gpt4Limit:e}=ir(),{specialCapabilities:t}=ts(),{hasAccessToProFeatures:n}=St();return d.useCallback(()=>!t.unlimitedProSearch&&(e<=0||!n)?le.DEFAULT:le.PRO,[e,n,t.unlimitedProSearch])};function Px(){const e=RSe(),{device:{isWindowsApp:t}}=Pt(),{safeWindowsIpcPublish:n,safeWindowsIpcSubscribe:r}=D3(),s=d.useRef(e);d.useEffect(()=>{s.current=e},[e]);const a=d.useRef(r);return d.useEffect(()=>{a.current=r},[r]),d.useEffect(()=>{if(!t)return;const l=a.current(Fh,c=>{c.type===Fh&&s.current(c.model,c.searchMode)});return()=>{l?.()}},[t]),d.useCallback((l,c)=>{n(Fh,{type:Fh,model:l,searchMode:c}),s.current(l,c)},[n])}function $3t({reason:e,enabled:t=!0}){const{$t:n}=Z(),[r,s]=d.useState(!1),{openModal:a}=xt(),i=Ha(),l=et(),c=rw()&&t,u=Px(),{overwriteSources:f}=$_({reason:e}),{data:m,isStale:p,refetch:h}=K3({reason:e,enabled:c&&r,staleTime:10*60*1e3}),g=d.useCallback(()=>{r?p&&h():s(!0)},[r,p,h]),y=d.useCallback(()=>{a("taskShortcutModal",{source:"typeahead_create"})},[a]),x=d.useMemo(()=>{if(!(!c||i||!l))return n({defaultMessage:"Ask anything. Type @ for mentions and / for shortcuts.",id:"KO0XLRzele"})},[n,i,c,l]),v=d.useCallback((_,w)=>{let C=ue.SEARCH;_===le.ALPHA?C=ue.RESEARCH:_===le.BETA&&(C=ue.STUDIO),u(_,C),f(w)},[u,f]),b=d.useMemo(()=>{const w=(m??[]).map(C=>({uuid:C.task_id,variant:"shortcut",label:`/${C.task_name}`,queryText:C.prompt,className:"group/shortcut-typeahead-option",action:()=>v(C.model_preference,C.sources),convertToNode:!0,rightElement:({focused:S})=>o.jsx(V3t,{shortcut:C,focused:S})}));return c&&l&&w.push({uuid:"create-a-shortcut",variant:"shortcut",label:n({defaultMessage:"+ Create a shortcut",id:"P9a8R5IRCb"}),action:y,convertToNode:!1,isAlwaysVisible:!0}),w},[m,c,l,v,n,y]);return d.useMemo(()=>({isShortcutTasksEnabled:c,shortcutsTypeaheadOptions:b,inputPlaceholder:x,onTrigger:g}),[c,b,x,g])}function V3t({shortcut:e,focused:t}){const{openModal:n}=xt(),r=d.useCallback(s=>{s.preventDefault(),s.stopPropagation(),n("taskShortcutModal",{source:"typeahead_edit",shortcut:lwe(e)})},[n,e]);return o.jsx("div",{className:B("h-5 transition-opacity",t&&"opacity-100",!t&&"opacity-0"),children:o.jsx(Me,{icon:Ru,size:"tiny",variant:"common",noPadding:!0,onMouseDown:r})})}const W3t=(e,t)=>{const[n,r]=d.useState(e),s=Fy(r,t);return d.useEffect(()=>{s(e)},[e,s]),n};var H3t={};const z3t=5e3,G3t=3e3,q3t=(e,t=!0)=>{const{$t:n}=Z(),r=dn(),s=t&&r,{sidecarSourceTab:{url:a}}=Hr(),i=W3t(a,G3t),l=d.useMemo(()=>H3t.NEXT_PUBLIC_IS_SIDECAR_BUILD?["get_tabs_for_sidecar",i]:["get_tabs_for_ntp"],[i]),{data:c=ce}=Ue({queryKey:l,queryFn:async()=>(await e.fetchOpenedTabs()).map(m=>{const p=j1(m.url);return{uuid:String(m.tabId),variant:"tab",label:m.title,url:m.url,icon:p?{type:"image",url:p}:void 0}}),staleTime:z3t,enabled:s}),u=d.useMemo(()=>s?n({defaultMessage:"Ask anything or @mention a tab",id:"37eMdtX5Pe"}):void 0,[n,s]);return d.useMemo(()=>({tabs:c,tabAttachmentsEnabled:s,inputPlaceholder:u}),[u,s,c])};function K3t({reason:e,isLazy:t=!0,enabled:n=!0,onMentionConnector:r}){const[s,a]=d.useState(()=>!t),{enabledConnectors:i,isConnectorsLoading:l,isConnectorsStale:c,refetchConnectors:u}=P_({reason:e,enabled:n}),f=d.useMemo(()=>!n||l?[]:i.map(p=>Y3t(p,r)),[n,i,l,r]),m=d.useCallback(()=>{s?c&&u():a(!0)},[s,c,u]);return d.useMemo(()=>({isAtMentionConnectorsEnabled:n,mentionConnectorsOptions:f,onTrigger:m}),[n,f,m])}function Y3t(e,t){return{uuid:e.name,variant:"source",label:ja(e.name),icon:Q3t(e),action:()=>t?.(e.name),convertToNode:!0}}function Q3t(e){const t=Vl(e.name);if(t)return{type:"image",url:t}}const X3t=(e,t)=>{const{value:n,loading:r}=jt({flag:"mention-connectors",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},Z3t=()=>{const{variation:e,loading:t}=X3t(!1);return{isMentionConnectorsEnabled:e,isMentionConnectorsEnabledLoading:t}};function J3t({isLazy:e=!0,enabled:t=!0,onMentionSource:n}){const r=Z(),[s,a]=d.useState(()=>!e),{session:i}=mt(),c=(i?.user?.org_uuid??"none")!=="none",u=RB({feature:Nd.SOURCES}),f=d.useMemo(()=>({web:!0,scholar:!0,social:!0,edgar:!0,org:c,my_files:u&&c}),[c,u]),m=d.useMemo(()=>t?Object.keys(f).filter(Avt).filter(g=>f[g]):[],[t,f]),p=d.useMemo(()=>!t||!s?[]:m.map(g=>eTt(os[g],r,n)),[t,s,m,r,n]),h=d.useCallback(()=>{s||a(!0)},[s]);return d.useMemo(()=>({isAtMentionSourcesEnabled:t,mentionSourcesOptions:p,onTrigger:h}),[t,p,h])}function eTt(e,t,n){return{uuid:e.id,variant:"source",label:e.label(t),icon:{type:"icon",icon:e.icon},action:()=>n?.(e.id),convertToNode:!0}}const _T=({reason:e,isLazy:t=!0,variants:n,collectionName:r})=>{const[s,a]=d.useState(""),i=Nn(),{isMentionConnectorsEnabled:l}=Z3t(),c=n===void 0||n.includes("tab"),u=n===void 0||n.includes("space"),f=n===void 0||n.includes("shortcut"),m=l&&(n===void 0||n.includes("sources")),{tabs:p,tabAttachmentsEnabled:h,inputPlaceholder:g}=q3t(i,c),{isAtMentionSpacesEnabled:y,mentionSpacesOptions:x,onTrigger:v,inputPlaceholder:b}=U3t({reason:e,collectionName:r,isLazy:t,enabled:u}),{isShortcutTasksEnabled:_,shortcutsTypeaheadOptions:w,inputPlaceholder:C,onTrigger:S}=$3t({reason:e,enabled:f}),{addSource:E,removeSource:k,hasSource:M}=$_({reason:e}),{addCometMcpSource:j,removeCometMcpSource:R,hasCometMcpSource:O}=C_(),D=Jbe(),P=d.useRef([]);d.useEffect(()=>{const se=awe(D?.root);P.current.filter(fe=>!se.includes(fe)).forEach(fe=>{gp(fe)&&M(fe)?k(fe):O(fe)&&R(fe)}),P.current=se},[D,M,k,O,R]);const A=d.useCallback(se=>E(se),[E]),T=d.useCallback(se=>j(se),[j]),N=d.useCallback(se=>E(se),[E]),{isAtMentionConnectorsEnabled:L,mentionConnectorsOptions:U,onTrigger:$}=K3t({reason:e,isLazy:t,enabled:m,onMentionConnector:A}),{isAtMentionCometMcpEnabled:V,mentionCometMcpOptions:W,onTrigger:Q}=L3t({isLazy:t,enabled:m,onMentionCometMcp:T}),{isAtMentionSourcesEnabled:q,mentionSourcesOptions:H,onTrigger:K}=J3t({isLazy:t,enabled:m,onMentionSource:N}),G=h||y||_||L||V,ee=d.useMemo(()=>[...h&&s==="@"?p:[],...y&&s==="@"?x:[],...L&&s==="@"?U:[],...V&&s==="@"?W:[],...q&&s==="@"?H:[],..._&&s==="/"?w:[]],[h,s,p,y,x,L,U,V,W,_,w,q,H]),Y=d.useCallback(se=>{a(se),se==="@"?(v(),$(),Q(),K()):se==="/"&&S()},[S,v,$,Q,K]),te=d.useMemo(()=>{try{if(typeof document>"u")return""}catch{return}return C??g??b},[C,b,g]);return d.useMemo(()=>({useLexical:G,mentionTypeaheadOptions:ee,inputPlaceholder:te,onTriggerTypeahead:Y}),[G,ee,te,Y])};function tTt(){const{value:e}=BF({flag:"enable-audio-video-uploads-attachments",subjectType:"user_nextauth_id",defaultValue:"False"});return d.useMemo(()=>({isAudioVideoFilesEnabled:e==="True"}),[e])}const yV=({reason:e})=>{const t=ot(),{mutateAsync:n}=dt({mutationKey:dC(),mutationFn:async i=>(await bJe({request:{url:i.url,thread_id:i.thread_id},reason:e})).file_url,onSuccess:(i,l,c)=>{t.setQueryData(dC(l.url),i),l.callback?.(i,!1)},onError:(i,l,c)=>{l.callback?.("",!1)},retry:!1}),r=d.useCallback(i=>{const l=t.getQueryData(dC(i));return typeof l=="string"?l:null},[t]),s=d.useCallback(async i=>{i.callback?.("",!0);const l=r(i.url);if(l)return i.callback?.(l,!1),l;const c=await n(i);return i.callback?.(c,!1),c},[r,n]),a=d.useCallback(async(i,l)=>{const c=URL.createObjectURL(l);t.setQueryData(dC(i),c)},[t]);return d.useMemo(()=>({getCachedImageDownloadUrl:r,getImageDownloadUrl:s,cacheImageDownloadUrl:a}),[a,r,s])};function nTt(){const{value:e}=jt({flag:"async-file-attachments-v2",defaultValue:!1,subjectType:"user_nextauth_id"});return e}const rTt=1e4,AM=["autosuggest"],sTt="AUTOSUGGEST_MESSAGE_MALFORMED",aTt="AUTOSUGGEST_MESSAGE_PARSE_ERROR",oTt="AUTOSUGGEST_WS_CONNECTION_ERROR",iTt="AUTOSUGGEST_WS_SEND_QUERY_ERROR",lTt=()=>{const{device:{isMobile:e}}=Pt(),t=ot();return d.useCallback(n=>{const r=t.getQueryData(AM),s=t.getQueryData([...AM,n]);if(s?.length&&s.length===dg(e))return s;if(r){const a=n.replace(/\s+/g,"").toLocaleLowerCase(),i=[];for(const f of r){if(e&&f.url)continue;const[m,p]=Z1e(a,f);if(m&&(i.push([p,f]),i.length===dg(e)))break}const l=i.sort(([f],[m])=>f-m).map(([f,m])=>m),[c,u]=D8(l,e,n);if(s?.length){const f=[...s];for(const m of c)if(!f.find(p=>p.query===m.query)&&(f.push(m),f.length===dg(e)))break;return D8(f,e,n)[1]}return u}return ce},[e,t])},cTt=()=>{const{suggestions:e}=ea(),{setSuggestions:t}=zo(),n=d.useRef(e);n.current=e;const r=ot(),s=lTt(),a=d.useRef(!1),{device:{isMobile:i}}=Pt(),l=d.useRef(null),c=d.useRef(null),u=d.useRef([]),f=d.useRef({lastMessageID:0});d.useLayoutEffect(()=>()=>{a.current=!1},[]);const m=d.useCallback((y,x=!1)=>{const v=s(y);!x&&!v.length||(n.current.length!==v.length||i7e(n.current,v,"query").length!==v.length)&&(n.current=v,t(v))},[s,t]),p=d.useCallback(y=>{try{const x=new WebSocket("wss://suggest.perplexity.ai/suggest/ws");x.onopen=()=>{y?.()},x.onmessage=v=>{let b;try{if(b=JSON.parse(v.data),b.length<4){ne.error(sTt,b);return}}catch(R){ne.error(aTt,R);return}const[_,w,C,S]=b,E=parseInt(C),k=ygt(S),[M,j]=D8(k,i);if(r.setQueryData(AM,(R=ce)=>M.length?$le([...M,...R],"query").sort((O,D)=>O.query.localeCompare(D.query)):R),r.setQueryData([...AM,_],j),E===f.current.lastMessageID&&a.current&&m(_,!0),f.current[E]){const R=performance.now()-f.current[E];u.current.push(R)}},l.current=x}catch(x){ne.error(oTt,x)}},[i,m,r]),h=d.useCallback(()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{l.current&&(l.current.close(),l.current=null)},rTt)},[]);d.useEffect(()=>(p(),h(),()=>{l.current&&l.current.close(),c.current&&clearTimeout(c.current)}),[p,h]);const g=d.useCallback((y,x=!0)=>{if(a.current=!!y.trim(),!a.current)return;m(y);const v=[WebSocket.OPEN,WebSocket.CONNECTING];if(!l.current||!v.includes(l.current.readyState)){x&&p(()=>{g(y,!1)});return}else h();const b=f.current.lastMessageID+1,_=b.toString();f.current.lastMessageID=b;try{const w=JSON.stringify({q:y,uuid:_,full_completion:!0});if(l.current.readyState===WebSocket.CONNECTING)return;l.current.send(w),f.current[b]=performance.now()}catch(w){ne.error(iTt,w)}},[p,h,m]);return d.useEffect(()=>{const y=setInterval(()=>{u.current.length!==0&&(IGe({latencies:u.current,isMobile:i}),u.current=[])},fgt);return()=>clearInterval(y)},[i]),d.useMemo(()=>({handleUpdateAutosuggestions:g}),[g])},uTt=({fileUploadRef:e,showFileUpload:t,attachments:n,setAttachments:r,handleChange:s,setIsUploadingFile:a,focusInput:i,onFileAttachComplete:l})=>{const{inputRef:c}=ea(),u=zU(),[f,m]=d.useState(null),p=d.useCallback(b=>{const _=n===void 0?"paste.txt":`paste-${n.length+1}.txt`,w=new File([b],_,{type:"text/plain"}),C=new DataTransfer;C.items.add(w),m({content:b,fileName:_}),e.current?.uploadFiles(C.files)},[n,e]),h=d.useCallback(()=>{m(null)},[]),g=d.useCallback(b=>{const _=b.clipboardData;if(_&&_.items.length>0){const w=new DataTransfer;for(const C of _.items){if(C.kind==="file"){b.preventDefault();const S=C.getAsFile();S&&w.items.add(S)}if(C.type==="text/plain"){const S=b.clipboardData.getData("Text");S.length>um&&(b.preventDefault(),p(S))}}e.current?.uploadFiles(w.files)}requestAnimationFrame(()=>{c.current&&(c.current.trim(),s(c.current.value,c.current.json))})},[e,s,c,p]),y=d.useCallback(b=>{s(b),c.current?.focus()},[s,c]),x=d.useCallback(b=>{a(!1),b.length>0?(r(b),i(),l?.(b)):r(void 0)},[a,r,i,l]),v=d.useCallback(async b=>{const _=new DataTransfer;for(const w of b){if(w.kind==="file"){const C=w.webkitGetAsEntry();if(!C)continue;if(x0e(C)){const S=w.getAsFile();S&&_.items.add(S)}else if(v0e(C)){const S=await lmt(C);for(const E of S)_.items.add(E)}}if(w.type==="text/plain"&&w.getAsString(C=>{C.length>um?p(C):c.current&&(c.current.append(C),s(c.current.value,c.current.json))}),_.items.length>u)break}e.current?.uploadFiles(_.files)},[e,c,s,u,p]);return d.useEffect(()=>{t||(r(void 0),m(null))},[t,r]),d.useMemo(()=>({handlePaste:g,handlePasteQuery:y,handleCompleteFileUpload:x,handleFileSelect:v,autoCreatedTextFile:f,dismissNotification:h,setAutoCreatedTextFile:m}),[x,v,g,y,f,h])};function dTt(){const{value:e}=jt({flag:"resize-image-attachments",defaultValue:!1,subjectType:"user_nextauth_id"});return e}function fTt(){const{value:e}=Fu({flag:"attachment-token-estimation-params",defaultValue:{max_total_tokens:5e5,type_bytes_per_token:{text:4,image:500},type_subtype_bytes_per_token:{"application/pdf":200,"application/msword":500,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":500,"application/vnd.openxmlformats-officedocument.presentationml.presentation":500},default_bytes_per_token:100},subjectType:"user_nextauth_id"});return e}function mTt(e){return e.every(t=>t instanceof File)}const pTt=({fileInputRef:e,isSignedIn:t,uploadRateLimit:n,maxFilesUpload:r,attachmentTokenEstimationParams:s,forwardedRef:a,existingAttachments:i,showPrivacyWarning:l,connectorsMap:c,onFilePickerOpen:u,onStart:f,onComplete:m,openLoginModal:p,openPricingModal:h,openCompanyDataPrivacyModal:g,closeModal:y,openVisitorLoginUpsell:x,openMicrosoftPicker:v,closeMicrosoftPicker:b,errorMicrosoftPicker:_,toPickerDocument:w,setUploadRateLimit:C,isFollowUp:S,isClearAttachmentsEnabled:E=!1,forceImage:k,refreshBoxCredentials:M,logMicrosoft:j,asyncAttachmentsEnabled:R=!1,setUploadsReady:O,getImageUrl:D,isAudioVideoFilesEnabled:P=!1,reason:A,incompleteParsingEnabled:T=!1,isImageAttachmentResizingEnabled:N=!1,maxAttachmentFileSizeMB:L=Xze,specialCapabilities:U={unlimitedProSearch:!1,maxModelSelection:!1,unlimitedResearch:!1,fileUpload:!1},onRemoveFile:$})=>{const{$t:V}=Z(),[W,Q]=d.useState(null),[q,H]=d.useState(null),[K,G]=d.useState([]),ee=d.useCallback(_e=>{G(ze=>ze.filter(Oe=>Oe.id!==_e))},[]),[Y,te]=d.useState(K&&K.length>0?"success":"idle"),[se,ae]=d.useState(null),pe=`${L}MB`,fe=d.useCallback(async(_e,ze,Oe)=>{if(!lo(_e))return null;const nt=Oe?{type:Oe}:void 0,Xe=SU(_e)?_e:await D?.(_e)??_e;if(!Xe)return new File([],ze,nt);try{const _n=await(await fetch(Xe)).blob();return new File([_n],ze,nt)}catch{return new File([],ze,nt)}},[D]);d.useEffect(()=>{E?G([]):(async()=>{const ze=await Promise.all((i??ce).map(async Oe=>{const nt=i8(Oe.split("/").pop()||"file"),Xe=f2(Oe);let It=new File([],nt,{type:Xe}),_n;if(lo(It)){const zn=await fe(Oe,nt,Xe);It=zn??It,_n=zn?URL.createObjectURL(zn):void 0}return{id:crypto.randomUUID(),file:It,nextURL:Oe,status:"success",thumbnailSource:_n}}));G(ze)})()},[E,i,fe]),d.useEffect(()=>{if(!O)return;if(!R||!K.length){O(!0);return}const _e=Oe=>T?Oe.status==="parsing"||Oe.status==="success"||Oe.status==="failed":Oe.status==="success"||Oe.status==="failed",ze=K.every(_e);O(ze)},[K,R,O,T]),d.useImperativeHandle(a,()=>({uploadFiles:_e=>Re(Array.from(_e)),clearFiles:ge}));const ge=d.useCallback(()=>{G([]),te("idle"),m?.([]),e.current?.value&&(e.current.value=""),ae(null)},[e,m]),Se=d.useCallback((_e,ze)=>{G(Oe=>{let nt=Oe;return _e?nt=Oe.filter(Xe=>Xe.nextURL!==_e):ze&&(nt=Oe.filter(Xe=>!Xe.nextURL?.includes(ze))),nt.length===0&&te("idle"),m?.(nt.filter(Xe=>!!Xe.nextURL).map(Xe=>({url:Xe.nextURL??"",file:Xe.file,resizedFile:Xe.resizedFile}))??[]),$?.(_e,ze),nt}),e.current?.value&&(e.current.value="")},[e,m,$]),je=d.useCallback(()=>{G([]),te("idle"),e.current?.value&&(e.current.value=""),ae(null)},[e]),ye=d.useCallback(_e=>{H(null),Q(_e??V(wl[A0.generic_upload_error])),K?.length&&te("success")},[V,K?.length]),be=d.useCallback(()=>{if(!p)return;const _e=V({defaultMessage:"Sign in to upload files and photos",id:"gEOi1eLJ7C"}),ze=V({defaultMessage:"Analyze files and photos for free",id:"nu4bK5/Y5T"});x?x({title:_e,description:ze,origin:Le.FILE_UPLOAD,sheetModalVariant:S?"bottom-sheet-gradient":"full-sheet"}):p({origin:Le.FILE_UPLOAD,pitchMessage:{title:_e,description:ze}})},[V,S,p,x]),Ne=d.useCallback(()=>{if(!h)return;const _e=V({defaultMessage:"Want more uploads?",id:"iInvIJ0Dv/"}),ze=V({defaultMessage:"Upgrade access for subscribers",id:"UwiL3wLZE3"});h({pitchMessage:{title:_e,description:ze},origin:Le.FILE_UPLOAD})},[V,h]),ke=d.useCallback(async(_e,ze)=>{let Oe;R?Oe=await kpt({request:{file_uuids:[_e]},reason:A}):Oe={file_uuid:_e,success:!0,error_code:null};const nt=Oe.success?"success":"failed";nt==="failed"?(ye(V(wl[Oe.error_code??a8.parsing_error],{filename:ze})),G(Xe=>Xe.filter(It=>It.file_uuid!==_e))):G(Xe=>[...(Xe??[]).map(It=>It.file_uuid===_e?{...It,status:nt}:It)])},[ye,R,V,A]),Ie=d.useCallback(_e=>_e instanceof File&&KK.includes(_e.type)||!(_e instanceof File)&&_e.mimeType&&KK.includes(_e.mimeType)?V(wl[A0.unsupported_type]):_e instanceof File&&_e.size>L*qK||!(_e instanceof File)&&_e.sizeBytes&&_e.sizeBytes>L*qK?V(wl[A0.too_large],{max:pe}):_e instanceof File&&_e.size<GK||!(_e instanceof File)&&_e.sizeBytes&&_e.sizeBytes<GK?V(wl.too_small):_e.name?null:V(wl.no_name),[V,pe,L]),Ce=d.useCallback(async(_e,ze,Oe,nt,Xe,It)=>{if(!_e.ok){ye(),ne.warn(`[localAttachmentUpload] upload failed for ${It}, response=${_e}`);return}let _n=null;try{const Mn=await _e.json();if(Mn?.moderation?.[0]?.status==="rejected"){ye(V(wl.failed_moderation)),ne.warn(`[localAttachmentUpload] upload failed moderation for ${It}, response=${_e}`);return}_n=o8(Mn?.eager?.[0]?.secure_url??Mn?.secure_url)}catch{_n=`${Oe}${nt}`.replace("${filename}",`${ze.name}`)}if(!_n){ye();return}const zn=wm(_n)?"success":"parsing";G(Mn=>Mn.map(Cr=>Cr.id===Xe?{...Cr,nextURL:_n,file_uuid:It,status:zn}:Cr)),te("success"),ae("local"),It&&zn=="parsing"&&await ke(It,ze.name)},[ye,V,ke]),Ge=d.useCallback(async(_e,ze,Oe)=>{if(!_e?.success){ye();return}if(_e.rate_limited){Ne(),ye(V(wl.rate_limited)),ee(Oe);return}if(!_e.filename||!_e.url){ye();return}const nt=_e.url&&wm(_e.url)?o8(_e.url):i8(_e.url),Xe=f2(nt);console.log(_e.url,_e.filename,Xe);const It=await fe(_e.url,_e.filename,Xe),_n=wm(_e.url)?"success":"parsing";G(zn=>zn.map(Mn=>Mn.id===Oe?{...Mn,file:It??Mn.file,nextURL:nt,file_uuid:_e.file_uuid??void 0,status:_n,thumbnailSource:It?URL.createObjectURL(It):void 0}:Mn)),te("success"),ae(ze),_e.file_uuid&&_n=="parsing"&&await ke(_e.file_uuid,_e.filename)},[fe,ye,Ne,V,ke,ee]),tt=d.useCallback(async(_e,ze)=>{if(_e?.rate_limited){Ne(),ye(V(wl.rate_limited)),ee(ze.id);return}if(!_e||!_e.fields||!_e.s3_bucket_url){ye();return}C0e(ze)&&G(nt=>nt.map(Xe=>Xe.id===ze.id?{...Xe,thumbnailSource:URL.createObjectURL(ze.file)}:Xe));const Oe=new FormData;Object.entries(_e.fields).forEach(([nt,Xe])=>{Oe.append(nt,Xe)}),Oe.append("file",ze.file);try{const nt=await fetch(_e.s3_bucket_url,{method:"POST",body:Oe});await Ce(nt,ze.file,_e.s3_bucket_url,_e.fields.key,ze.id,_e.file_uuid??void 0)}catch(nt){ne.warn(`[localAttachmentUpload] upload failed for ${_e.file_uuid} with error=${nt}`),ye()}},[Ne,ye,V,Ce,ee]),gt=d.useCallback(_e=>{const ze=_e.filter(nt=>nt.status==="success").reduce((nt,Xe)=>{const It=Xe.file.type,_n=It.split("/")[0],zn=s?.type_subtype_bytes_per_token?.[It],Mn=s?.type_bytes_per_token?.[_n],Cr=s?.default_bytes_per_token,Xa=zn??Mn??Cr,ri=Xe.file.size,Yu=Xa?ri/Xa:0;return nt+Yu},0),Oe=s?.max_total_tokens;return Oe&&ze>Oe},[s]);d.useEffect(()=>{if(!K.length)return;K.every(ze=>ze.status==="success"||ze.status==="failed")&&gt(K)&&H(V({defaultMessage:"Performance may be degraded for larger files.",id:"xwKpaJzWgU"}))},[K,gt,V,W]);const Ee=d.useCallback((_e,ze,Oe)=>{if(mTt(_e)){let nt=0;Promise.all(_e.map(async Xe=>{const It=Ie(Xe);if(It){ye(It);return}let _n=Xe;if(lo(Xe))try{N&&(_n=await dpt(Xe))}catch{ne.warn(`Unable to resize image file: ${Xe.name}`)}const zn={id:crypto.randomUUID(),file:_n,status:"uploading"};G(Cr=>[...Cr??[],zn]);const Mn=await HB({file:_n,fileSource:Oe,forceImage:k,reason:A});tt(Mn,zn),nt++})).then(()=>{n&&n>0&&C&&C(nt)})}else ze&&_e.forEach(nt=>{const Xe=Ie(nt);if(Xe)ye(Xe);else{const It=f2(nt.name??""),_n=new File([""],nt.name??"",{type:It}),zn={id:nt.id,file:_n,status:"uploading"};G(Mn=>[...Mn??[],zn]),Mpt({remote_file_id:nt.id,connection_type:ze.toUpperCase(),reason:A}).then(Mn=>{Ge(Mn,ze,zn.id)})}})},[n,C,Ie,k,A,ye,N,tt,Ge]),Re=d.useCallback((_e,ze,Oe)=>{if(!(!_e||_e.length===0)){if(Oe!==YD){if(!t&&!U.fileUpload){be();return}if(n&&n<=0){Ne();return}if(_e.length+(K?.length??0)>r){Q(V(wl.over_file_count,{maxNumFiles:r}));return}}f?.(),te("loading"),Ee(_e,ze,Oe)}},[t,n,K,r,Ee,f,be,Ne,V,U.fileUpload]),Vt=d.useCallback(async(_e,ze,Oe)=>{try{const Xe=await(await fetch(_e)).blob(),It=Oe||Xe.type||"application/octet-stream";return new File([Xe],ze,{type:It})}catch{return new File([],ze,Oe?{type:Oe}:void 0)}},[]),pt=d.useCallback(async(_e,ze,Oe)=>{const Xe=(Oe?Oe.startsWith("image/"):lo(_e))?await fe(_e,ze,Oe):await Vt(_e,ze,Oe);Xe&&Re([Xe],"local")},[Vt,fe,Re]),{openPicker:Nt}=U0e({clientId:c?.google_drive?.picker_credentials?.client_id??"",loginHint:c?.google_drive?.connection_display_name??"",isAudioVideoFilesEnabled:P}),[Ke,He]=d.useState(!1),[Tt,We]=d.useState(""),_t=d.useCallback(()=>He(!1),[]),Kt=d.useCallback(_e=>{const ze=_e.map(Oe=>({id:Oe.id,name:Oe.name,sizeBytes:Oe.size,mimeType:A8[Oe.extension]}));Re(ze,"box"),_t()},[Re,_t]),{openPicker:en,cleanupPicker:Rt}=S0e({apiKey:(Tt||c?.box?.picker_credentials?.api_key)??"",mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:Kt,onCancel:_t}),Ut=d.useCallback(async()=>{const _e=c?.box?.picker_credentials?.expires_at??"";if(_e&&M){const ze=new Date(_e);if(isNaN(ze.getTime())){He(!0);return}if(ze<new Date){const nt=await M();We(nt?.api_key??"")}}He(!0)},[c?.box?.picker_credentials?.expires_at,M]);d.useEffect(()=>{Ke&&en()},[Ke,en]);const Rn=d.useCallback((_e,ze)=>{if(!w||ze!=="onedrive"&&ze!=="sharepoint")return;const Oe=_e.map(nt=>w(nt,ze)).filter(nt=>nt!==null);Re(Oe,ze),b?.()},[w,Re,b]),{openPicker:rn}=k0e({clientId:c?.dropbox?.picker_credentials?.client_id??""}),at=d.useCallback(_e=>{const ze=_e.map(Oe=>{const nt=R_(Oe.name);return nt?{id:Oe.id,name:Oe.name,sizeBytes:Oe.bytes,mimeType:A8[nt]}:null}).filter(Oe=>Oe!==null);Re(ze,"dropbox")},[Re]),yt=d.useCallback(()=>ye(V({defaultMessage:"Unable to retrieve files from connector.",id:"4seKuUP1Wo"})),[ye,V]),wt=d.useCallback((_e,ze)=>{if(_e=="google_drive")Nt({mode:"attachment",onPicked:Oe=>Re(Oe,_e)});else if(_e==="onedrive"||_e==="sharepoint"){const Oe=c?.[_e];v?.({connector:_e,clientId:Oe?.picker_credentials?.client_id??"",tenantName:Oe?.picker_credentials?.tenant_name??"",loginHint:Oe?.connection_display_name??"",accountIdentifier:Oe?.picker_credentials?.account_identifier,webUrl:ze,mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:nt=>Rn(nt,_e),onError:_,onCancel:b,log:j})}else _e==="dropbox"?rn({mode:"attachment",isAudioVideoFilesEnabled:P,onPicked:at,onError:yt}):_e=="box"&&Ut()},[c,Nt,Re,v,Rn,b,_,rn,at,yt,Ut,j,P]),Mt=d.useCallback(_e=>{g&&g(()=>{y?.(),!_e||_e==="local"?(e.current?.click(),u?.()):wt(_e)})},[e,y,g,wt,u]),bt=d.useCallback(_e=>{if(!t&&!U.fileUpload){be();return}if(n&&n<=0){Ne();return}if(l&&!Sn(DP)){Mt(_e),sn(DP,"true",{expires:30});return}!_e||_e==="local"?(e.current?.click(),u?.()):wt(_e)},[t,n,l,e,be,Ne,Mt,wt,u,U.fileUpload]);return d.useEffect(()=>{let _e=null;return q&&(_e=setTimeout(()=>{H(null)},Qze)),()=>{_e&&clearTimeout(_e)}},[q]),d.useEffect(()=>{K&&m?.(K.filter(_e=>!!_e.nextURL).map(_e=>({url:_e.nextURL??"",file:_e.file,resizedFile:_e.resizedFile})))},[K,m]),d.useMemo(()=>({errorMessage:W,warningMessage:q,uploadedFiles:K,uploadSource:se,status:Y,fileInputRef:e,handleClearFiles:ge,handleRemoveFile:Se,handleStartUpload:bt,handleFileInput:Re,attachFromUrl:pt,removeAllFiles:je,handleOpenLoginModal:be,handleOpenPricingModal:Ne,isBoxOpen:Ke,onCloseBox:_t,cleanupBoxPicker:Rt,setErrorMessage:Q}),[W,q,K,se,Y,e,ge,Se,bt,Re,pt,je,be,Ne,Ke,_t,Rt])},hTt=({fileUploadRef:e,disablePrivacyWarning:t,isAudioVideoFilesEnabled:n,isClearAttachmentsEnabled:r,isFollowUp:s,organization:a,lastResult:i,onStartFileUpload:l,onCompleteFileUpload:c,setUploadsReady:u,reason:f,incompleteParsingEnabled:m=!1,specialCapabilities:p,askInputRef:h,onRemoveFile:g})=>{const y=d.useRef(null),{inputRef:x}=ea(),{openModal:v,closeModal:b}=xt(),_=zU(),w=fTt(),{value:C}=jt({flag:"async-attachment-processing",defaultValue:!1,subjectType:"user_nextauth_id"}),S=dTt(),E=et(),{openVisitorLoginUpsell:k}=or({enabled:!E}),M=Jo(),{hasDataRetentionWarning:j,connectorLimits:R}=wo({reason:f}),{connectorsMap:O}=yx({reason:f}),{uploadRateLimit:D,setUploadRateLimit:P}=ir(),{hasActiveSubscription:A}=St(),T=D??(A?hme:pme),N=d.useCallback(ge=>v("loginModal",ge),[v]),L=d.useCallback(ge=>{M(ge)},[M]),U=d.useCallback(ge=>v("companyDataPrivacyModal",{organizationName:a?.display_name??"",onContinue:ge}),[v,a]),{onOpen:$,onClose:V,onError:W,toPickerDocument:Q,options:q,onSelectSite:H,isOpen:K,log:G}=T0e({reason:f,mode:"attachment"}),{mutateAsync:ee}=E0e({reason:f}),{getCachedImageDownloadUrl:Y,getImageDownloadUrl:te}=yV({reason:f}),se=d.useCallback(async ge=>i?.backend_uuid?await te({url:ge,thread_id:i.backend_uuid}):Y(ge),[Y,te,i?.backend_uuid]),ae=pTt({fileInputRef:y,isSignedIn:E,uploadRateLimit:T,maxFilesUpload:_,attachmentTokenEstimationParams:w,forwardedRef:e,showPrivacyWarning:j&&!t,connectorsMap:O,onStart:l,onComplete:c,openLoginModal:N,openPricingModal:L,openCompanyDataPrivacyModal:U,closeModal:b,openVisitorLoginUpsell:k,openMicrosoftPicker:$,closeMicrosoftPicker:V,errorMicrosoftPicker:W,toPickerDocument:Q,setUploadRateLimit:P,isFollowUp:s,isClearAttachmentsEnabled:r,refreshBoxCredentials:ee,logMicrosoft:G,asyncAttachmentsEnabled:C,setUploadsReady:u,getImageUrl:se,isAudioVideoFilesEnabled:n,reason:f,incompleteParsingEnabled:m,isImageAttachmentResizingEnabled:S,maxAttachmentFileSizeMB:R?.max_attachment_file_size_mb,specialCapabilities:p,onRemoveFile:g}),{attachFromUrl:pe,removeAllFiles:fe}=ae;return d.useImperativeHandle(h??null,()=>({addMediaFile:async(ge,Se,je)=>{await pe(ge,Se,je)},focusInput:()=>{x.current?.focus()},removeAttachments:()=>{fe()}}),[pe,x,fe]),d.useMemo(()=>({...ae,fileInputRef:y,microsoftFilePickerOptions:q,handleSelectSharepointSite:H,isMicrosoftFilePickerOpen:K,onCloseMicrosoft:V,addMediaFile:pe,removeAllFiles:fe}),[ae,H,K,q,V,pe,fe])};var gTt={};const yTt=({setInput:e})=>{const t=Ot();d.useEffect(()=>{if(!t||!gTt.NEXT_PUBLIC_IS_SIDECAR_BUILD)return;const n=t.get("p_q");n&&e(n)},[t,e])},Qln="web.frontend.realtime.voice",Xln="oai-realtime-v2v-tool-call",Zln=4096,xTt=.7;var une;(function(e){e.BrowserGetUrlContent="get_full_page_content",e.ControlBrowser="control_browser",e.CloseBrowserTabs="close_browser_tabs",e.GroupOpenBrowserTabs="group_open_browser_tabs",e.OpenNewBrowserTab="open_page",e.SearchBrowser="search_browser",e.UngroupOpenBrowserTabs="ungroup_open_browser_tabs"})(une||(une={}));var dne;(function(e){e.MobileWeb="mobile_web",e.Web="web",e.macOS="macos",e.iOS="ios",e.Android="android",e.Windows="windows"})(dne||(dne={}));function vTt(){return Intl.DateTimeFormat().resolvedOptions().timeZone}async function Jln({body:e,reason:t,requestId:n}){try{const r=await re.POST("/rest/realtime/v1/session",t,{timeoutMs:Pe({productionMs:1e4,clientSideMs:1e4}),numRetries:1,body:e,headers:{"content-type":"application/json",...n?{[hr]:n}:{}}});if(!r.response.ok){const a=r.response.statusText||"Unknown realtime session error";return{status:r.response.status,error:`Failed to get realtime session: ${a}`}}return{data:r.data,status:r.response.status,error:null}}catch(r){return ne.error("Failed to get realtime session",r),{data:null,status:500,error:`Failed to get realtime session: ${r.message||"Internal server error"}`}}}async function bTt({body:e,reason:t}){try{const n=await re.POST("/rest/realtime/transcription-session",t,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});return n.response.ok?{data:n.data,status:n.response.status,error:null}:{status:n.response.status,error:`Failed to get realtime transcription session: ${n.response.statusText}`}}catch(n){return ne.error("Failed to get realtime transcription session",n),{data:null,status:500,error:`Failed to get realtime transcription session: ${n}`}}}async function ecn({body:e,reason:t,requestId:n}){try{const r=await re.POST("/rest/realtime/execute-tools",t,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json",...n?{[hr]:n}:{}}});if(!r.response.ok){const a=await r.response.text();throw new Error(`Failed to execute tools: ${a}`)}return r.data}catch(r){ne.error("Failed to execute tools",r);return}}async function tcn({entry:e,analyticsParams:t,reason:n,requestId:r}){try{const s=await re.POST("/rest/realtime/create-entry",n,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:{...e,analytics_params:{...t,timezone:vTt(),visitor_id:d_()}},headers:{"content-type":"application/json",...r?{[hr]:r}:{}}});if(!s.response.ok){const a=await s.response.text();throw new Error(`Failed to create entry: ${a}`)}return s.data}catch(s){ne.error("Failed to create entry",s);return}}async function ncn({params:e,reason:t,requestId:n}){try{const r=await re.POST("/rest/realtime/v1/upload-audio",t,{timeoutMs:Pe({productionMs:3e4}),numRetries:2,body:e,headers:{"content-type":"application/json",...n?{[hr]:n}:{}}});if(!r.response.ok){const s=await r.response.text();throw new Error(`Failed to upload audio: ${s}`)}return r.data}catch(r){ne.error("Failed to upload audio",r);return}}async function rcn({body:e,reason:t}){try{const n=await re.POST("/rest/realtime/v1/language-learning/session",t,{timeoutMs:Pe({productionMs:5e3}),numRetries:1,body:e,headers:{"content-type":"application/json"}});if(!n.response.ok){const r=await n.response.text();throw new Error(`Failed to create language learning session: ${r}`)}return n.data}catch(n){ne.error("Failed to create language learning session",n);return}}const _Tt=({callbacks:e,config:t,reason:n})=>{const[r,s]=d.useState(!1),[a,i]=d.useState(""),[l,c]=d.useState(!1),[u,f]=d.useState(null),[m,p]=d.useState(()=>{const Y=De.getItem(tj);return Y?Y==="true":null}),{device:{isWindowsApp:h}}=Pt(),{trackEvent:g}=Te(),y=t.silenceThreshold??30,x=t.silenceDuration??5e3,v=d.useRef(null),b=d.useRef(null),_=d.useRef(""),w=d.useRef(null),C=d.useRef(!1),S=d.useRef(null),E=d.useRef(null),k=d.useRef(null),M=d.useRef(null),j=d.useRef(null),R=d.useRef(new Map),O=d.useRef(null),D=d.useRef(null),P=d.useRef(null),A=d.useRef([]),T=d.useRef(null),N=d.useCallback(async()=>{try{return(await navigator.mediaDevices.getUserMedia({audio:!0})).getTracks().forEach(te=>te.stop()),p(!0),De.setItem(tj,"true"),!0}catch(Y){return f(`Microphone permission denied. ${Y}`),p(!1),De.setItem(tj,"false"),!1}},[]),L=d.useRef(!1),U=d.useCallback(()=>{w.current&&(w.current.getTracks().forEach(Y=>Y.stop()),w.current=null)},[]),$=d.useCallback(()=>{if(C.current=!1,k.current&&(clearTimeout(k.current),k.current=null),S.current&&(S.current.close(),S.current=null,E.current=null),v.current&&r&&v.current.stop(),T.current&&(clearInterval(T.current),T.current=null),P.current&&(P.current.port.onmessage=null,P.current.disconnect(),P.current=null),b.current&&b.current.stop(),U(),_.current="",i(""),R.current.clear(),s(!1),j.current&&(j.current.close(),j.current=null),M.current){const Y=Date.now()-M.current;g("stop transcription",{durationMs:Y})}M.current=null,e?.onStop?.()},[e,U,g,r]),V=d.useCallback(Y=>{if(!Y||!C.current)return;const te=Y.frequencyBinCount,se=new Uint8Array(te);Y.getByteFrequencyData(se),se.reduce((pe,fe)=>pe+fe)/te<y?k.current||(k.current=setTimeout(()=>{C.current&&e?.onSilence?.()},x)):k.current&&(clearTimeout(k.current),k.current=null),C.current&&requestAnimationFrame(()=>V(Y))},[e,y,x]),W=d.useCallback(()=>Array.from(R.current.values()).map(te=>te.finalTranscript||te.partialTranscript||"").join(" ").trim(),[R]),Q=d.useCallback(Y=>{const{type:te,item_id:se}=Y;if(!se)return;R.current.has(se)||R.current.set(se,{itemId:se,partialTranscript:"",finalTranscript:""});const ae=R.current.get(se),pe=D.current||"";switch(te){case"conversation.item.input_audio_transcription.delta":{const{delta:fe}=Y;pe==="whisper-1"?ae.partialTranscript=fe:ae.partialTranscript+=fe;break}case"conversation.item.input_audio_transcription.completed":{const{transcript:fe}=Y;typeof fe=="string"&&(ae.finalTranscript=fe);break}case"input_audio_buffer.committed":{Y.previous_item_id&&(ae.previousItemId=Y.previous_item_id);break}}R.current.set(se,ae),i(W())},[W]),q=d.useCallback(async()=>{const Y=await bTt({body:{source:h?b5:gme,timezone:KD,turn_detection_threshold:xTt,response_language:"en"},reason:n});if(!Y.data?.client_secret)throw ne.error("No ephemeral key from server"),new Error("Unable to start OAI session");O.current=Y.data.session_id,D.current=Y.data.model_name;const se=["realtime",`openai-insecure-api-key.${Y.data.client_secret}`,"openai-beta.realtime-v1"],ae=new WebSocket("wss://api.openai.com/v1/realtime?intent=transcription",se);j.current=ae,ae.onopen=()=>ne.info("OpenAI WS connected (base64 PCM approach)"),ae.onerror=pe=>{ne.error("OAI WS error:",pe),f("OpenAI WS error")},ae.onclose=pe=>{ne.info("OAI WS closed:",pe.code)},ae.onmessage=pe=>{try{const fe=JSON.parse(pe.data);Q(fe)}catch(fe){ne.error("Invalid OAI WS message:",pe.data,fe)}}},[Q,h,n]),H=d.useCallback(Y=>{let te=0;for(const pe of Y)te+=pe.length;const se=new Int16Array(te);let ae=0;for(const pe of Y)se.set(pe,ae),ae+=pe.length;return se},[]),K=d.useCallback(Y=>{const te=Y.buffer;let se="";const ae=new Uint8Array(te);for(const pe of ae)se+=String.fromCharCode(pe);return btoa(se)},[]),G=d.useCallback(async Y=>{const te=new AudioContext;S.current=te,await te.audioWorklet.addModule("/audio-worklet.js");const se=new AudioWorkletNode(te,"pcm-worklet-processor");P.current=se,se.port.onmessage=pe=>{if(!C.current)return;const fe=pe.data;A.current.push(fe)},T.current||(T.current=setInterval(()=>{if(!C.current||!j.current||j.current.readyState!==WebSocket.OPEN||A.current.length===0)return;const pe=H(A.current);A.current=[];const fe=K(pe),ge={event_id:`evt-${Date.now()}`,type:"input_audio_buffer.append",audio:fe};j.current.send(JSON.stringify(ge))},500));const ae=te.createMediaStreamSource(Y);ae.connect(se),se.connect(te.destination),E.current=te.createAnalyser(),E.current.fftSize=256,ae.connect(E.current),requestAnimationFrame(()=>V(E.current))},[V,H,K]),ee=d.useCallback(async()=>{if(f(null),M.current=Date.now(),g("start transcription"),C.current=!0,(m===null||m===!1)&&(c(!0),!await N())){c(!1),f("Microphone permission is required for voice input"),e?.onStop?.(),C.current=!1;return}try{await q();const Y=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(async te=>{if(p(!1),!await N())throw te;return navigator.mediaDevices.getUserMedia({audio:!0})});w.current=Y,await G(Y),L.current&&b.current&&(_.current="",i(""),b.current.start(),b.current.onspeechend=()=>$()),s(!0),c(!1),e?.onStart?.()}catch(Y){f(`Failed to start recording. ${Y}`),C.current=!1}},[e,m,N,g,$,q,G]);return d.useMemo(()=>({isTranscribing:r,isInitializing:l,transcription:a,error:u,startTranscription:ee,stopTranscription:$}),[u,l,r,ee,$,a])};function $e(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function PSe(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);n.search=r.toString(),console.warn(`Minified Lexical warning #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const bl=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,wTt=bl&&"documentMode"in document?document.documentMode:null,Gi=bl&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),Qm=bl&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),IM=!(!bl||!("InputEvent"in window)||wTt)&&"getTargetRanges"in new window.InputEvent("input"),lb=bl&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),cy=bl&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,CTt=bl&&/Android/.test(navigator.userAgent),LSe=bl&&/^(?=.*Chrome).*/i.test(navigator.userAgent),fne=bl&&CTt&&LSe,cb=bl&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&Gi&&!LSe;function OSe(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}const STt=1,ETt=3,MTt=9,kTt=11,Xm=0,DSe=1,uy=2,TTt=0,NTt=1,jTt=2,RM=4,PM=8,xV=128,ATt=1792|(112|(3|RM|PM)|xV),vV=1,bV=2,_V=3,wV=4,CV=5,SV=6,wT=lb||cy||cb?"":"",Mu=`

`,ITt=Qm?"":wT,Zm={bold:1,capitalize:1024,code:16,highlight:xV,italic:2,lowercase:256,strikethrough:RM,subscript:32,superscript:64,underline:PM,uppercase:512},RTt={directionless:1,unmergeable:2},mne={center:bV,end:SV,justify:wV,left:vV,right:_V,start:CV},PTt={[bV]:"center",[SV]:"end",[wV]:"justify",[vV]:"left",[_V]:"right",[CV]:"start"},LTt={normal:0,segmented:2,token:1},OTt={[TTt]:"normal",[jTt]:"segmented",[NTt]:"token"},pne="$config";function FSe(e,t,n,r,s,a){let i=e.getFirstChild();for(;i!==null;){const l=i.__key;i.__parent===t&&(Ae(i)&&FSe(i,l,n,r,s,a),n.has(l)||a.delete(l),s.push(l)),i=i.getNextSibling()}}const DTt=100;let e7=!1,EV=0;function FTt(e){EV=e.timeStamp}function kA(e,t,n){const r=e.nodeName==="BR",s=t.__lexicalLineBreak;return s&&(e===s||r&&e.previousSibling===s)||r&&jT(e,n)!==void 0}function UTt(e,t,n){const r=vc(Mi(n));let s=null,a=null;r!==null&&r.anchorNode===e&&(s=r.anchorOffset,a=r.focusOffset);const i=e.nodeValue;i!==null&&VV(t,i,s,a,!1)}function BTt(e,t,n){if(Be(e)){const r=e.anchor.getNode();if(r.is(n)&&e.format!==r.getFormat())return!1}return Gu(t)&&n.isAttached()}function $Tt(e,t,n,r){for(let s=e;s&&!O4t(s);s=uw(s)){const a=jT(s,t);if(a!==void 0){const i=Es(a,n);if(i)return Bn(i)||!Jr(s)?void 0:[s,i]}else if(s===r)return[r,R2e(n)]}}function USe(e,t,n){e7=!0;const r=performance.now()-EV>DTt;try{Io(e,()=>{const s=rt()||function(p){return p.getEditorState().read(()=>{const h=rt();return h!==null?h.clone():null})}(e),a=new Map,i=e.getRootElement(),l=e._editorState,c=e._blockCursorElement;let u=!1,f="";for(let p=0;p<t.length;p++){const h=t[p],g=h.type,y=h.target,x=$Tt(y,e,l,i);if(!x)continue;const[v,b]=x;if(g==="characterData")r&&Je(b)&&Gu(y)&&BTt(s,y,b)&&UTt(y,b,e);else if(g==="childList"){u=!0;const _=h.addedNodes;for(let S=0;S<_.length;S++){const E=_[S],k=A2e(E),M=E.parentNode;if(M!=null&&E!==c&&k===null&&!kA(E,M,e)){if(Qm){const j=(Jr(E)?E.innerText:null)||E.nodeValue;j&&(f+=j)}M.removeChild(E)}}const w=h.removedNodes,C=w.length;if(C>0){let S=0;for(let E=0;E<C;E++){const k=w[E];(kA(k,y,e)||c===k)&&(y.appendChild(k),S++)}C!==S&&a.set(v,b)}}}if(a.size>0)for(const[p,h]of a)h.reconcileObservedMutation(p,e);const m=n.takeRecords();if(m.length>0){for(let p=0;p<m.length;p++){const h=m[p],g=h.addedNodes,y=h.target;for(let x=0;x<g.length;x++){const v=g[x],b=v.parentNode;b==null||v.nodeName!=="BR"||kA(v,y,e)||b.removeChild(v)}}n.takeRecords()}s!==null&&(u&&ta(s),Qm&&D2e(e)&&s.insertRawText(f))})}finally{e7=!1}}function BSe(e){const t=e._observer;t!==null&&USe(e,t.takeRecords(),t)}function $Se(e){(function(t){EV===0&&Mi(t).addEventListener("textInput",FTt,!0)})(e),e._observer=new MutationObserver((t,n)=>{USe(e,t,n)})}function VTt(e){const t=new Map,n=new Set;for(let r=typeof e=="function"?e:e.replace;r.prototype&&r.prototype.getType!==void 0;r=Object.getPrototypeOf(r)){const{ownNodeConfig:s}=KV(r);if(s&&s.stateConfigs)for(const a of s.stateConfigs){let i;"stateConfig"in a?(i=a.stateConfig,a.flat&&n.add(i.key)):i=a,t.set(i.key,i)}}return{flatKeys:n,sharedConfigMap:t}}let WTt=class VSe{node;knownState;unknownState;sharedNodeState;size;constructor(t,n,r=void 0,s=new Map,a=void 0){this.node=t,this.sharedNodeState=n,this.unknownState=r,this.knownState=s;const{sharedConfigMap:i}=this.sharedNodeState,l=a!==void 0?a:function(c,u,f){let m=f.size;if(u)for(const p in u){const h=c.get(p);h&&f.has(h)||m++}return m}(i,r,s);this.size=l}getValue(t){const n=this.knownState.get(t);if(n!==void 0)return n;this.sharedNodeState.sharedConfigMap.set(t.key,t);let r=t.defaultValue;if(this.unknownState&&t.key in this.unknownState){const s=this.unknownState[t.key];s!==void 0&&(r=t.parse(s)),this.updateFromKnown(t,r)}return r}getInternalState(){return[this.unknownState,this.knownState]}toJSON(){const t={...this.unknownState},n={};for(const[r,s]of this.knownState)r.isEqual(s,r.defaultValue)?delete t[r.key]:t[r.key]=r.unparse(s);for(const r of this.sharedNodeState.flatKeys)r in t&&(n[r]=t[r],delete t[r]);return hne(t)&&(n.$=t),n}getWritable(t){if(this.node===t)return this;const{sharedNodeState:n,unknownState:r}=this,s=new Map(this.knownState);return new VSe(t,n,function(a,i,l){let c;if(l)for(const[u,f]of Object.entries(l)){const m=a.get(u);m?i.has(m)||i.set(m,m.parse(f)):(c=c||{},c[u]=f)}return c}(n.sharedConfigMap,s,r),s,this.size)}updateFromKnown(t,n){const r=t.key;this.sharedNodeState.sharedConfigMap.set(r,t);const{knownState:s,unknownState:a}=this;s.has(t)||a&&r in a||(a&&(delete a[r],this.unknownState=hne(a)),this.size++),s.set(t,n)}updateFromUnknown(t,n){const r=this.sharedNodeState.sharedConfigMap.get(t);r?this.updateFromKnown(r,r.parse(n)):(this.unknownState=this.unknownState||{},t in this.unknownState||this.size++,this.unknownState[t]=n)}updateFromJSON(t){const{knownState:n}=this;for(const r of n.keys())n.set(r,r.defaultValue);if(this.size=n.size,this.unknownState=void 0,t)for(const[r,s]of Object.entries(t))this.updateFromUnknown(r,s)}};function HTt(e){const t=e.getWritable(),n=t.__state?t.__state.getWritable(t):new WTt(t,WSe(t));return t.__state=n,n}function WSe(e){return e.__state?e.__state.sharedNodeState:N2e(GV(),e.getType()).sharedNodeState}function hne(e){if(e)for(const t in e)return e}function gne(e,t,n){for(const[r,s]of t.knownState){if(e.has(r.key))continue;e.add(r.key);const a=n?n.getValue(r):r.defaultValue;if(a!==s&&!r.isEqual(a,s))return!0}return!1}function yne(e,t,n){const{unknownState:r}=t,s=n?n.unknownState:void 0;if(r){for(const[a,i]of Object.entries(r))if(!e.has(a)&&(e.add(a),i!==(s?s[a]:void 0)))return!0}return!1}function xne(e,t){const n=e.__state;return n&&n.node===e?n.getWritable(t):n}function vne(e,t){const n=e.__mode,r=e.__format,s=e.__style,a=t.__mode,i=t.__format,l=t.__style,c=e.__state,u=t.__state;return(n===null||n===a)&&(r===null||r===i)&&(s===null||s===l)&&(e.__state===null||c===u||function(f,m){if(f===m)return!0;if(f&&m&&f.size!==m.size)return!1;const p=new Set;return!(f&&gne(p,f,m)||m&&gne(p,m,f)||f&&yne(p,f,m)||m&&yne(p,m,f))}(c,u))}function bne(e,t){const n=e.mergeWithSibling(t),r=Tr()._normalizedNodes;return r.add(e.__key),r.add(t.__key),n}function _ne(e){let t,n,r=e;if(r.__text!==""||!r.isSimpleText()||r.isUnmergeable()){for(;(t=r.getPreviousSibling())!==null&&Je(t)&&t.isSimpleText()&&!t.isUnmergeable();){if(t.__text!==""){if(vne(t,r)){r=bne(t,r);break}break}t.remove()}for(;(n=r.getNextSibling())!==null&&Je(n)&&n.isSimpleText()&&!n.isUnmergeable();){if(n.__text!==""){if(vne(r,n)){r=bne(r,n);break}break}n.remove()}}else r.remove()}function ub(e){return wne(e.anchor),wne(e.focus),e}function wne(e){for(;e.type==="element";){const t=e.getNode(),n=e.offset;let r,s;if(n===t.getChildrenSize()?(r=t.getChildAtIndex(n-1),s=!0):(r=t.getChildAtIndex(n),s=!1),Je(r)){e.set(r.__key,s?r.getTextContentSize():0,"text",!0);break}if(!Ae(r))break;e.set(r.__key,s?r.getChildrenSize():0,"element",!0)}}let Jm,va,db,CT,t7,n7,ep,el,r7,fb,ds="",jl=null,Al="",Jc="",kh=!1,LM=!1;function OM(e,t){const n=ep.get(e);if(t!==null){const r=i7(e);r.parentNode===t&&t.removeChild(r)}if(el.has(e)||va._keyToDOMMap.delete(e),Ae(n)){const r=FM(n,ep);s7(r,0,r.length-1,null)}n!==void 0&&WV(fb,db,CT,n,"destroyed")}function s7(e,t,n,r){let s=t;for(;s<=n;++s){const a=e[s];a!==void 0&&OM(a,r)}}function Gf(e,t){e.setProperty("text-align",t)}const zTt="40px";function HSe(e,t){const n=Jm.theme.indent;if(typeof n=="string"){const s=e.classList.contains(n);t>0&&!s?e.classList.add(n):t<1&&s&&e.classList.remove(n)}const r=getComputedStyle(e).getPropertyValue("--lexical-indent-base-value")||zTt;e.style.setProperty("padding-inline-start",t===0?"":`calc(${t} * ${r})`)}function zSe(e,t){const n=e.style;t===0?Gf(n,""):t===vV?Gf(n,"left"):t===bV?Gf(n,"center"):t===_V?Gf(n,"right"):t===wV?Gf(n,"justify"):t===CV?Gf(n,"start"):t===SV&&Gf(n,"end")}function a7(e,t){const n=function(r){const s=r.__dir;if(s!==null)return s;if(ps(r))return null;const a=r.getParentOrThrow();return ps(a)&&a.__dir===null?"auto":null}(t);n!==null?e.dir=n:e.removeAttribute("dir")}function DM(e,t){const n=el.get(e);n===void 0&&$e(60);const r=n.createDOM(Jm,va);if(function(s,a,i){const l=i._keyToDOMMap;(function(c,u,f){const m=`__lexicalKey_${u._key}`;c[m]=f})(a,i,s),l.set(s,a)}(e,r,va),Je(n)?r.setAttribute("data-lexical-text","true"):Bn(n)&&r.setAttribute("data-lexical-decorator","true"),Ae(n)){const s=n.__indent,a=n.__size;if(a7(r,n),s!==0&&HSe(r,s),a!==0){const l=a-1;o7(FM(n,el),n,0,l,n.getDOMSlot(r))}const i=n.__format;i!==0&&zSe(r,i),n.isInline()||GSe(null,n,r),AT(n)&&(ds+=Mu,Jc+=Mu)}else{const s=n.getTextContent();if(Bn(n)){const a=n.decorate(va,Jm);a!==null&&qSe(e,a),r.contentEditable="false"}ds+=s,Jc+=s}return t!==null&&t.insertChild(r),WV(fb,db,CT,n,"created"),r}function o7(e,t,n,r,s){const a=ds;ds="";let i=n;for(;i<=r;++i){DM(e[i],s);const l=el.get(e[i]);l!==null&&Je(l)&&(jl===null&&(jl=l.getFormat()),Al===""&&(Al=l.getStyle()))}AT(t)&&(ds+=Mu),s.element.__lexicalTextContent=ds,ds=a+ds}function Cne(e,t){if(e){const n=e.__last;if(n){const r=t.get(n);if(r)return sc(r)?"line-break":Bn(r)&&r.isInline()?"decorator":null}return"empty"}return null}function GSe(e,t,n){const r=Cne(e,ep),s=Cne(t,el);r!==s&&t.getDOMSlot(n).setManagedLineBreak(s)}function GTt(e,t,n){var r;jl=null,Al="",function(s,a,i){const l=ds,c=s.__size,u=a.__size;ds="";const f=i.element;if(c===1&&u===1){const m=s.__first,p=a.__first;if(m===p)a0(m,f);else{const g=i7(m),y=DM(p,null);try{f.replaceChild(y,g)}catch(x){if(typeof x=="object"&&x!=null){const v=`${x.toString()} Parent: ${f.tagName}, new child: {tag: ${y.tagName} key: ${p}}, old child: {tag: ${g.tagName}, key: ${m}}.`;throw new Error(v)}throw x}OM(m,null)}const h=el.get(p);Je(h)&&(jl===null&&(jl=h.getFormat()),Al===""&&(Al=h.getStyle()))}else{const m=FM(s,ep),p=FM(a,el);if(m.length!==c&&$e(227),p.length!==u&&$e(228),c===0)u!==0&&o7(p,a,0,u-1,i);else if(u===0){if(c!==0){const h=i.after==null&&i.before==null&&i.element.__lexicalLineBreak==null;s7(m,0,c-1,h?null:f),h&&(f.textContent="")}}else(function(h,g,y,x,v,b){const _=x-1,w=v-1;let C,S,E=b.getFirstChild(),k=0,M=0;for(;k<=_&&M<=w;){const O=g[k],D=y[M];if(O===D)E=TA(a0(D,b.element)),k++,M++;else{C===void 0&&(C=new Set(g)),S===void 0&&(S=new Set(y));const A=S.has(O),T=C.has(D);if(A)if(T){const N=tp(va,D);N===E?E=TA(a0(D,b.element)):(b.withBefore(E).insertChild(N),a0(D,b.element)),k++,M++}else DM(D,b.withBefore(E)),M++;else E=TA(i7(O)),OM(O,b.element),k++}const P=el.get(D);P!==null&&Je(P)&&(jl===null&&(jl=P.getFormat()),Al===""&&(Al=P.getStyle()))}const j=k>_,R=M>w;if(j&&!R){const O=y[w+1],D=O===void 0?null:va.getElementByKey(O);o7(y,h,M,w,b.withBefore(D))}else R&&!j&&s7(g,k,_,b.element)})(a,m,p,c,u,i)}AT(a)&&(ds+=Mu),f.__lexicalTextContent=ds,ds=l+ds}(e,t,t.getDOMSlot(n)),r=t,jl==null||jl===r.__textFormat||LM||r.setTextFormat(jl),function(s){Al===""||Al===s.__textStyle||LM||s.setTextStyle(Al)}(t)}function FM(e,t){const n=[];let r=e.__first;for(;r!==null;){const s=t.get(r);s===void 0&&$e(101),n.push(r),r=s.__next}return n}function a0(e,t){const n=ep.get(e);let r=el.get(e);n!==void 0&&r!==void 0||$e(61);const s=kh||n7.has(e)||t7.has(e),a=tp(va,e);if(n===r&&!s){if(Ae(n)){const i=a.__lexicalTextContent;i!==void 0&&(ds+=i,Jc+=i)}else{const i=n.getTextContent();Jc+=i,ds+=i}return a}if(n!==r&&s&&WV(fb,db,CT,r,"updated"),r.updateDOM(n,a,Jm)){const i=DM(e,null);return t===null&&$e(62),t.replaceChild(i,a),OM(e,null),i}if(Ae(n)&&Ae(r)){const i=r.__indent;(kh||i!==n.__indent)&&HSe(a,i);const l=r.__format;if((kh||l!==n.__format)&&zSe(a,l),s&&(GTt(n,r,a),ps(r)||r.isInline()||GSe(n,r,a)),AT(r)&&(ds+=Mu,Jc+=Mu),(kh||r.__dir!==n.__dir)&&(a7(a,r),ps(r)&&!kh))for(const c of r.getChildren())Ae(c)&&a7(tp(va,c.getKey()),c)}else{const i=r.getTextContent();if(Bn(r)){const l=r.decorate(va,Jm);l!==null&&qSe(e,l)}ds+=i,Jc+=i}if(!LM&&ps(r)&&r.__cachedText!==Jc){const i=r.getWritable();i.__cachedText=Jc,r=i}return a}function qSe(e,t){let n=va._pendingDecorators;const r=va._decorators;if(n===null){if(r[e]===t)return;n=I2e(va)}n[e]=t}function TA(e){let t=e.nextSibling;return t!==null&&t===va._blockCursorElement&&(t=t.nextSibling),t}function qTt(e,t,n,r,s,a){ds="",Jc="",kh=r===uy,va=n,Jm=n._config,db=n._nodes,CT=va._listeners.mutation,t7=s,n7=a,ep=e._nodeMap,el=t._nodeMap,LM=t._readOnly,r7=new Map(n._keyToDOMMap);const i=new Map;return fb=i,a0("root",null),va=void 0,db=void 0,t7=void 0,n7=void 0,ep=void 0,el=void 0,Jm=void 0,r7=void 0,fb=void 0,i}function i7(e){const t=r7.get(e);return t===void 0&&$e(75,e),t}function Zt(e){return{type:e}}const KSe=Zt("SELECTION_CHANGE_COMMAND"),KTt=Zt("SELECTION_INSERT_CLIPBOARD_NODES_COMMAND"),YTt=Zt("CLICK_COMMAND"),rc=Zt("DELETE_CHARACTER_COMMAND"),gg=Zt("INSERT_LINE_BREAK_COMMAND"),l7=Zt("INSERT_PARAGRAPH_COMMAND"),Em=Zt("CONTROLLED_TEXT_INSERTION_COMMAND"),aw=Zt("PASTE_COMMAND"),UM=Zt("REMOVE_TEXT_COMMAND"),dy=Zt("DELETE_WORD_COMMAND"),fy=Zt("DELETE_LINE_COMMAND"),mm=Zt("FORMAT_TEXT_COMMAND"),YSe=Zt("UNDO_COMMAND"),QSe=Zt("REDO_COMMAND"),QTt=Zt("KEYDOWN_COMMAND"),XSe=Zt("KEY_ARROW_RIGHT_COMMAND"),XTt=Zt("MOVE_TO_END"),ZSe=Zt("KEY_ARROW_LEFT_COMMAND"),ZTt=Zt("MOVE_TO_START"),JSe=Zt("KEY_ARROW_UP_COMMAND"),e2e=Zt("KEY_ARROW_DOWN_COMMAND"),my=Zt("KEY_ENTER_COMMAND"),JTt=Zt("KEY_SPACE_COMMAND"),MV=Zt("KEY_BACKSPACE_COMMAND"),t2e=Zt("KEY_ESCAPE_COMMAND"),kV=Zt("KEY_DELETE_COMMAND"),n2e=Zt("KEY_TAB_COMMAND"),e4t=Zt("OUTDENT_CONTENT_COMMAND"),r2e=Zt("DROP_COMMAND"),s2e=Zt("DRAGSTART_COMMAND"),t4t=Zt("DRAGOVER_COMMAND"),n4t=Zt("DRAGEND_COMMAND"),TV=Zt("COPY_COMMAND"),NV=Zt("CUT_COMMAND"),c7=Zt("SELECT_ALL_COMMAND"),scn=Zt("CLEAR_EDITOR_COMMAND"),acn=Zt("CLEAR_HISTORY_COMMAND"),ocn=Zt("CAN_REDO_COMMAND"),icn=Zt("CAN_UNDO_COMMAND"),r4t=Zt("FOCUS_COMMAND"),s4t=Zt("BLUR_COMMAND"),a4t=Zt("KEY_MODIFIER_COMMAND"),Vc=Object.freeze({}),u7=30,d7=[["keydown",function(e,t){if(H0=e.timeStamp,a2e=e.key,!t.isComposing()&&!ut(t,QTt,e)&&e.key!=null){if(NA&&Xne(e))return Io(t,()=>{aS(t,jA)}),NA=!1,void(jA="");if(function(n){return Gn(n,"ArrowRight",{shiftKey:"any"})}(e))ut(t,XSe,e);else if(function(n){return Gn(n,"ArrowRight",Gc)}(e))ut(t,XTt,e);else if(function(n){return Gn(n,"ArrowLeft",{shiftKey:"any"})}(e))ut(t,ZSe,e);else if(function(n){return Gn(n,"ArrowLeft",Gc)}(e))ut(t,ZTt,e);else if(function(n){return Gn(n,"ArrowUp",{altKey:"any",shiftKey:"any"})}(e))ut(t,JSe,e);else if(function(n){return Gn(n,"ArrowDown",{altKey:"any",shiftKey:"any"})}(e))ut(t,e2e,e);else if(function(n){return Gn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any",shiftKey:!0})}(e))z0=!0,ut(t,my,e);else if(function(n){return n.key===" "}(e))ut(t,JTt,e);else if(function(n){return Gi&&Gn(n,"o",{ctrlKey:!0})}(e))e.preventDefault(),z0=!0,ut(t,gg,!0);else if(function(n){return Gn(n,"Enter",{altKey:"any",ctrlKey:"any",metaKey:"any"})}(e))z0=!1,ut(t,my,e);else if(function(n){return Gn(n,"Backspace",{shiftKey:"any"})||Gi&&Gn(n,"h",{ctrlKey:!0})}(e))Xne(e)?ut(t,MV,e):(e.preventDefault(),ut(t,rc,!0));else if(function(n){return n.key==="Escape"}(e))ut(t,t2e,e);else if(function(n){return Gn(n,"Delete",{})||Gi&&Gn(n,"d",{ctrlKey:!0})}(e))(function(n){return n.key==="Delete"})(e)?ut(t,kV,e):(e.preventDefault(),ut(t,rc,!1));else if(function(n){return Gn(n,"Backspace",Qne)}(e))e.preventDefault(),ut(t,dy,!0);else if(function(n){return Gn(n,"Delete",Qne)}(e))e.preventDefault(),ut(t,dy,!1);else if(function(n){return Gi&&Gn(n,"Backspace",{metaKey:!0})}(e))e.preventDefault(),ut(t,fy,!0);else if(function(n){return Gi&&(Gn(n,"Delete",{metaKey:!0})||Gn(n,"k",{ctrlKey:!0}))}(e))e.preventDefault(),ut(t,fy,!1);else if(function(n){return Gn(n,"b",Gc)}(e))e.preventDefault(),ut(t,mm,"bold");else if(function(n){return Gn(n,"u",Gc)}(e))e.preventDefault(),ut(t,mm,"underline");else if(function(n){return Gn(n,"i",Gc)}(e))e.preventDefault(),ut(t,mm,"italic");else if(function(n){return Gn(n,"Tab",{shiftKey:"any"})}(e))ut(t,n2e,e);else if(function(n){return Gn(n,"z",Gc)}(e))e.preventDefault(),ut(t,YSe,void 0);else if(function(n){return Gi?Gn(n,"z",{metaKey:!0,shiftKey:!0}):Gn(n,"y",{ctrlKey:!0})||Gn(n,"z",{ctrlKey:!0,shiftKey:!0})}(e))e.preventDefault(),ut(t,QSe,void 0);else{const n=t._editorState._selection;n===null||Be(n)?Zne(e)&&(e.preventDefault(),ut(t,c7,e)):function(r){return Gn(r,"c",Gc)}(e)?(e.preventDefault(),ut(t,TV,e)):function(r){return Gn(r,"x",Gc)}(e)?(e.preventDefault(),ut(t,NV,e)):Zne(e)&&(e.preventDefault(),ut(t,c7,e))}(function(n){return n.ctrlKey||n.shiftKey||n.altKey||n.metaKey})(e)&&ut(t,a4t,e)}}],["pointerdown",function(e,t){const n=e.target,r=e.pointerType;Dx(n)&&r!=="touch"&&r!=="pen"&&e.button===0&&Io(t,()=>{qne(n)||(m7=!0)})}],["compositionstart",function(e,t){Io(t,()=>{const n=rt();if(Be(n)&&!t.isComposing()){const r=n.anchor,s=n.anchor.getNode();Hs(r.key),(e.timeStamp<H0+u7||r.type==="element"||!n.isCollapsed()||s.getFormat()!==n.format||Je(s)&&s.getStyle()!==n.style)&&ut(t,Em,ITt)}})}],["compositionend",function(e,t){Qm?jv=!0:cy||!lb&&!cb?Io(t,()=>{aS(t,e.data)}):(NA=!0,jA=e.data)}],["input",function(e,t){e.stopPropagation(),Io(t,()=>{if(Jr(e.target)&&qne(e.target))return;const n=rt(),r=e.data,s=u2e(e);if(r!=null&&Be(n)&&l2e(n,s,r,e.timeStamp,!1)){jv&&(aS(t,r),jv=!1);const a=n.anchor.getNode(),i=vc(Mi(t));if(i===null)return;const l=n.isBackward(),c=l?n.anchor.offset:n.focus.offset,u=l?n.focus.offset:n.anchor.offset;IM&&!n.isCollapsed()&&Je(a)&&i.anchorNode!==null&&a.getTextContent().slice(0,c)+r+a.getTextContent().slice(c+u)===O2e(i.anchorNode)||ut(t,Em,r);const f=r.length;Qm&&f>1&&e.inputType==="insertCompositionText"&&!t.isComposing()&&(n.anchor.offset-=f),lb||cy||cb||!t.isComposing()||(H0=0,Hs(null))}else $V(!1,t,r!==null?r:void 0),jv&&(aS(t,r||void 0),jv=!1);(function(){Ws();const a=Tr();BSe(a)})()},{event:e}),Th=null}],["click",function(e,t){Io(t,()=>{const n=rt(),r=vc(Mi(t)),s=iw();if(r){if(Be(n)){const a=n.anchor,i=a.getNode();if(a.type==="element"&&a.offset===0&&n.isCollapsed()&&!ps(i)&&sr().getChildrenSize()===1&&i.getTopLevelElementOrThrow().isEmpty()&&s!==null&&n.is(s))r.removeAllRanges(),n.dirty=!0;else if(e.detail===3&&!n.isCollapsed()&&i!==n.focus.getNode()){const l=xi(i,c=>Ae(c)&&!c.isInline());Ae(l)&&l.select(0)}}else if(e.pointerType==="touch"||e.pointerType==="pen"){const a=r.anchorNode;(Jr(a)||Gu(a))&&ta(AV(s,r,t,e))}}ut(t,YTt,e)})}],["cut",Vc],["copy",Vc],["dragstart",Vc],["dragover",Vc],["dragend",Vc],["paste",Vc],["focus",Vc],["blur",Vc],["drop",Vc]];IM&&d7.push(["beforeinput",(e,t)=>function(n,r){const s=n.inputType,a=u2e(n);s==="deleteCompositionText"||Qm&&D2e(r)||s!=="insertCompositionText"&&Io(r,()=>{const i=rt();if(s==="deleteContentBackward"){if(i===null){const h=iw();if(!Be(h))return;ta(h.clone())}if(Be(i)){const h=i.anchor.key===i.focus.key;if(l=n.timeStamp,a2e==="MediaLast"&&l<H0+u7&&r.isComposing()&&h){if(Hs(null),H0=0,setTimeout(()=>{Io(r,()=>{Hs(null)})},u7),Be(i)){const g=i.anchor.getNode();g.markDirty(),Je(g)||$e(142),c2e(i,g)}}else{Hs(null),n.preventDefault();const g=i.anchor.getNode(),y=g.getTextContent(),x=g.canInsertTextAfter(),v=i.anchor.offset===0&&i.focus.offset===y.length;let b=fne&&h&&!v&&x;if(b&&i.isCollapsed()&&(b=!Bn(j4t(i.anchor,!0))),!b){ut(r,rc,!0);const _=rt();fne&&Be(_)&&_.isCollapsed()&&(sm=_,setTimeout(()=>sm=null))}}return}}var l;if(!Be(i))return;const c=n.data;Th!==null&&$V(!1,r,Th),i.dirty&&Th===null||!i.isCollapsed()||ps(i.anchor.getNode())||a===null||i.applyDOMRange(a),Th=null;const u=i.anchor,f=i.focus,m=u.getNode(),p=f.getNode();if(s!=="insertText"&&s!=="insertTranspose")switch(n.preventDefault(),s){case"insertFromYank":case"insertFromDrop":case"insertReplacementText":ut(r,Em,n);break;case"insertFromComposition":Hs(null),ut(r,Em,n);break;case"insertLineBreak":Hs(null),ut(r,gg,!1);break;case"insertParagraph":Hs(null),z0&&!cy?(z0=!1,ut(r,gg,!1)):ut(r,l7,void 0);break;case"insertFromPaste":case"insertFromPasteAsQuotation":ut(r,aw,n);break;case"deleteByComposition":(function(h,g){return h!==g||Ae(h)||Ae(g)||!Mm(h)||!Mm(g)})(m,p)&&ut(r,UM,n);break;case"deleteByDrag":case"deleteByCut":ut(r,UM,n);break;case"deleteContent":ut(r,rc,!1);break;case"deleteWordBackward":ut(r,dy,!0);break;case"deleteWordForward":ut(r,dy,!1);break;case"deleteHardLineBackward":case"deleteSoftLineBackward":ut(r,fy,!0);break;case"deleteContentForward":case"deleteHardLineForward":case"deleteSoftLineForward":ut(r,fy,!1);break;case"formatStrikeThrough":ut(r,mm,"strikethrough");break;case"formatBold":ut(r,mm,"bold");break;case"formatItalic":ut(r,mm,"italic");break;case"formatUnderline":ut(r,mm,"underline");break;case"historyUndo":ut(r,YSe,void 0);break;case"historyRedo":ut(r,QSe,void 0)}else{if(c===`
`)n.preventDefault(),ut(r,gg,!1);else if(c===Mu)n.preventDefault(),ut(r,l7,void 0);else if(c==null&&n.dataTransfer){const h=n.dataTransfer.getData("text/plain");n.preventDefault(),i.insertRawText(h)}else c!=null&&l2e(i,a,c,n.timeStamp,!0)?(n.preventDefault(),ut(r,Em,c)):Th=c;o2e=n.timeStamp}})}(e,t)]);let H0=0,a2e=null,o2e=0,Th=null;const BM=new WeakMap;let f7=!1,m7=!1,z0=!1,jv=!1,NA=!1,jA="",sm=null,i2e=[0,"",0,"root",0];function l2e(e,t,n,r,s){const a=e.anchor,i=e.focus,l=a.getNode(),c=Tr(),u=vc(Mi(c)),f=u!==null?u.anchorNode:null,m=a.key,p=c.getElementByKey(m),h=n.length;return m!==i.key||!Je(l)||(!s&&(!IM||o2e<r+50)||l.isDirty()&&h<2||P2e(n))&&a.offset!==i.offset&&!l.isComposing()||Yc(l)||l.isDirty()&&h>1||(s||!IM)&&p!==null&&!l.isComposing()&&f!==hy(p)||u!==null&&t!==null&&(!t.collapsed||t.startContainer!==u.anchorNode||t.startOffset!==u.anchorOffset)||l.getFormat()!==e.format||l.getStyle()!==e.style||function(g,y){if(y.isSegmented())return!0;if(!g.isCollapsed())return!1;const x=g.anchor.offset,v=y.getParentOrThrow(),b=Mm(y);return x===0?!y.canInsertTextBefore()||!v.canInsertTextBefore()&&!y.isComposing()||b||function(_){const w=_.getPreviousSibling();return(Je(w)||Ae(w)&&w.isInline())&&!w.canInsertTextAfter()}(y):x===y.getTextContentSize()&&(!y.canInsertTextAfter()||!v.canInsertTextAfter()&&!y.isComposing()||b)}(e,l)}function Sne(e,t){return Gu(e)&&e.nodeValue!==null&&t!==0&&t!==e.nodeValue.length}function Ene(e,t,n){const{anchorNode:r,anchorOffset:s,focusNode:a,focusOffset:i}=e;f7&&(f7=!1,Sne(r,s)&&Sne(a,i)&&!sm)||Io(t,()=>{if(!n)return void ta(null);if(!TT(t,r,a))return;let l=rt();if(sm&&Be(l)&&l.isCollapsed()){const c=l.anchor,u=sm.anchor;(c.key===u.key&&c.offset===u.offset+1||c.offset===1&&u.getNode().is(c.getNode().getPreviousSibling()))&&(l=sm.clone(),ta(l))}if(sm=null,Be(l)){const c=l.anchor,u=c.getNode();if(l.isCollapsed()){e.type==="Range"&&e.anchorNode===e.focusNode&&(l.dirty=!0);const f=Mi(t).event,m=f?f.timeStamp:performance.now(),[p,h,g,y,x]=i2e,v=sr(),b=t.isComposing()===!1&&v.getTextContent()==="";if(m<x+200&&c.offset===g&&c.key===y)S2(l,p,h);else if(c.type==="text")Je(u)||$e(141),c2e(l,u);else if(c.type==="element"&&!b){Ae(u)||$e(259);const _=c.getNode();_.isEmpty()?function(w,C){const S=C.getTextFormat(),E=C.getTextStyle();S2(w,S,E)}(l,_):S2(l,0,"")}}else{const f=c.key,m=l.focus.key,p=l.getNodes(),h=p.length,g=l.isBackward(),y=g?i:s,x=g?s:i,v=g?m:f,b=g?f:m;let _=ATt,w=!1;for(let C=0;C<h;C++){const S=p[C],E=S.getTextContentSize();if(Je(S)&&E!==0&&!(C===0&&S.__key===v&&y===E||C===h-1&&S.__key===b&&x===0)&&(w=!0,_&=S.getFormat(),_===0))break}l.format=w?_:0}}ut(t,KSe,void 0)})}function S2(e,t,n){e.format===t&&e.style===n||(e.format=t,e.style=n,e.dirty=!0)}function c2e(e,t){S2(e,t.getFormat(),t.getStyle())}function u2e(e){if(!e.getTargetRanges)return null;const t=e.getTargetRanges();return t.length===0?null:t[0]}function aS(e,t){const n=e._compositionKey;if(Hs(null),n!==null&&t!=null){if(t===""){const r=Es(n),s=hy(e.getElementByKey(n));return void(s!==null&&s.nodeValue!==null&&Je(r)&&VV(r,s.nodeValue,null,null,!0))}if(t[t.length-1]===`
`){const r=rt();if(Be(r)){const s=r.focus;return r.anchor.set(s.key,s.offset,s.type),void ut(e,my,null)}}}$V(!0,e,t)}function d2e(e){let t=e.__lexicalEventHandles;return t===void 0&&(t=[],e.__lexicalEventHandles=t),t}const yg=new Map;function f2e(e){const t=P4t(e.target);if(t===null)return;const n=UV(t.anchorNode);if(n===null)return;m7&&(m7=!1,Io(n,()=>{const c=iw(),u=t.anchorNode;(Jr(u)||Gu(u))&&ta(AV(c,t,n,e))}));const r=BV(n),s=r[r.length-1],a=s._key,i=yg.get(a),l=i||s;l!==n&&Ene(t,l,!1),Ene(t,n,!0),n!==s?yg.set(a,n):i&&yg.delete(a)}function Mne(e){e._lexicalHandled=!0}function kne(e){return e._lexicalHandled===!0}function o4t(e){const t=e.ownerDocument,n=BM.get(t);if(n===void 0)return;const r=n-1;r>=0||$e(164),BM.set(t,r),r===0&&t.removeEventListener("selectionchange",f2e);const s=NT(e);FV(s)?(function(i){if(i._parentEditor!==null){const l=BV(i),c=l[l.length-1]._key;yg.get(c)===i&&yg.delete(c)}else yg.delete(i._key)}(s),e.__lexicalEditor=null):s&&$e(198);const a=d2e(e);for(let i=0;i<a.length;i++)a[i]();e.__lexicalEventHandles=[]}function p7(e,t,n){Ws();const r=e.__key,s=e.getParent();if(s===null)return;const a=function(l){const c=rt();if(!Be(c)||!Ae(l))return c;const{anchor:u,focus:f}=c,m=u.getNode(),p=f.getNode();return x7(m,l)&&u.set(l.__key,0,"element"),x7(p,l)&&f.set(l.__key,0,"element"),c}(e);let i=!1;if(Be(a)&&t){const l=a.anchor,c=a.focus;l.key===r&&(VM(l,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0),c.key===r&&(VM(c,e,s,e.getPreviousSibling(),e.getNextSibling()),i=!0)}else gu(a)&&t&&e.isSelected()&&e.selectPrevious();if(Be(a)&&t&&!i){const l=e.getIndexWithinParent();km(e),$M(a,s,l,-1)}else km(e);n||ul(s)||s.canBeEmpty()||!s.isEmpty()||p7(s,t),t&&a&&ps(s)&&s.isEmpty()&&s.selectEnd()}class Ad{__type;__key;__parent;__prev;__next;__state;static getType(){const{ownNodeType:t}=KV(this);return t===void 0&&$e(64,this.name),t}static clone(t){$e(65,this.name)}$config(){return{}}config(t,n){const r=n.extends||Object.getPrototypeOf(this.constructor);return Object.assign(n,{extends:r,type:t}),{[t]:n}}afterCloneFrom(t){this.__key===t.__key?(this.__parent=t.__parent,this.__next=t.__next,this.__prev=t.__prev,this.__state=t.__state):t.__state&&(this.__state=t.__state.getWritable(this))}static importDOM;constructor(t){this.__type=this.constructor.getType(),this.__parent=null,this.__prev=null,this.__next=null,Object.defineProperty(this,"__state",{configurable:!0,enumerable:!1,value:void 0,writable:!0}),k4t(this,t)}getType(){return this.__type}isInline(){$e(137,this.constructor.name)}isAttached(){let t=this.__key;for(;t!==null;){if(t==="root")return!0;const n=Es(t);if(n===null)break;t=n.__parent}return!1}isSelected(t){const n=t||rt();if(n==null)return!1;const r=n.getNodes().some(s=>s.__key===this.__key);if(Je(this))return r;if(Be(n)&&n.anchor.type==="element"&&n.focus.type==="element"){if(n.isCollapsed())return!1;const s=this.getParent();if(Bn(this)&&this.isInline()&&s){const a=n.isBackward()?n.focus:n.anchor;if(s.is(a.getNode())&&a.offset===s.getChildrenSize()&&this.is(s.getLastChild()))return!1}}return r}getKey(){return this.__key}getIndexWithinParent(){const t=this.getParent();if(t===null)return-1;let n=t.getFirstChild(),r=0;for(;n!==null;){if(this.is(n))return r;r++,n=n.getNextSibling()}return-1}getParent(){const t=this.getLatest().__parent;return t===null?null:Es(t)}getParentOrThrow(){const t=this.getParent();return t===null&&$e(66,this.__key),t}getTopLevelElement(){let t=this;for(;t!==null;){const n=t.getParent();if(ul(n))return Ae(t)||t===this&&Bn(t)||$e(194),t;t=n}return null}getTopLevelElementOrThrow(){const t=this.getTopLevelElement();return t===null&&$e(67,this.__key),t}getParents(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n),n=n.getParent();return t}getParentKeys(){const t=[];let n=this.getParent();for(;n!==null;)t.push(n.__key),n=n.getParent();return t}getPreviousSibling(){const t=this.getLatest().__prev;return t===null?null:Es(t)}getPreviousSiblings(){const t=[],n=this.getParent();if(n===null)return t;let r=n.getFirstChild();for(;r!==null&&!r.is(this);)t.push(r),r=r.getNextSibling();return t}getNextSibling(){const t=this.getLatest().__next;return t===null?null:Es(t)}getNextSiblings(){const t=[];let n=this.getNextSibling();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getCommonAncestor(t){const n=Ae(this)?this:this.getParent(),r=Ae(t)?t:t.getParent(),s=n&&r?k2(n,r):null;return s?s.commonAncestor:null}is(t){return t!=null&&this.__key===t.__key}isBefore(t){const n=k2(this,t);return n!==null&&(n.type==="descendant"||(n.type==="branch"?W2e(n)===-1:(n.type!=="same"&&n.type!=="ancestor"&&$e(279),!1)))}isParentOf(t){const n=k2(this,t);return n!==null&&n.type==="ancestor"}getNodesBetween(t){const n=this.isBefore(t),r=[],s=new Set;let a=this;for(;a!==null;){const i=a.__key;if(s.has(i)||(s.add(i),r.push(a)),a===t)break;const l=Ae(a)?n?a.getFirstChild():a.getLastChild():null;if(l!==null){a=l;continue}const c=n?a.getNextSibling():a.getPreviousSibling();if(c!==null){a=c;continue}const u=a.getParentOrThrow();if(s.has(u.__key)||r.push(u),u===t)break;let f=null,m=u;do{if(m===null&&$e(68),f=n?m.getNextSibling():m.getPreviousSibling(),m=m.getParent(),m===null)break;f!==null||s.has(m.__key)||r.push(m)}while(f===null);a=f}return n||r.reverse(),r}isDirty(){const t=Tr()._dirtyLeaves;return t!==null&&t.has(this.__key)}getLatest(){const t=Es(this.__key);return t===null&&$e(113),t}getWritable(){Ws();const t=bf(),n=Tr(),r=t._nodeMap,s=this.__key,a=this.getLatest(),i=n._cloneNotNeeded,l=rt();if(l!==null&&l.setCachedNodes(null),i.has(s))return HM(a),a;const c=U2e(a);return i.add(s),HM(c),r.set(s,c),c}getTextContent(){return""}getTextContentSize(){return this.getTextContent().length}createDOM(t,n){$e(70)}updateDOM(t,n,r){$e(71)}exportDOM(t){return{element:this.createDOM(t._config,t)}}exportJSON(){const t=this.__state?this.__state.toJSON():void 0;return{type:this.__type,version:1,...t}}static importJSON(t){$e(18,this.name)}updateFromJSON(t){return function(n,r){const s=n.getWritable(),a=r.$;let i=a;for(const l of WSe(s).flatKeys)l in r&&(i!==void 0&&i!==a||(i={...a}),i[l]=r[l]);return(s.__state||i)&&HTt(n).updateFromJSON(i),s}(this,t)}static transform(){return null}remove(t){p7(this,!0,t)}replace(t,n){Ws();let r=rt();r!==null&&(r=r.clone()),OA(this,t);const s=this.getLatest(),a=this.__key,i=t.__key,l=t.getWritable(),c=this.getParentOrThrow().getWritable(),u=c.__size;km(l);const f=s.getPreviousSibling(),m=s.getNextSibling(),p=s.__prev,h=s.__next,g=s.__parent;if(p7(s,!1,!0),f===null?c.__first=i:f.getWritable().__next=i,l.__prev=p,m===null?c.__last=i:m.getWritable().__prev=i,l.__next=h,l.__parent=g,c.__size=u,n&&(Ae(this)&&Ae(l)||$e(139),this.getChildren().forEach(y=>{l.append(y)})),Be(r)){ta(r);const y=r.anchor,x=r.focus;y.key===a&&Ane(y,l),x.key===a&&Ane(x,l)}return yd()===a&&Hs(i),l}insertAfter(t,n=!0){Ws(),OA(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.getParent(),i=rt();let l=!1,c=!1;if(a!==null){const h=t.getIndexWithinParent();if(km(s),Be(i)){const g=a.__key,y=i.anchor,x=i.focus;l=y.type==="element"&&y.key===g&&y.offset===h+1,c=x.type==="element"&&x.key===g&&x.offset===h+1}}const u=this.getNextSibling(),f=this.getParentOrThrow().getWritable(),m=s.__key,p=r.__next;if(u===null?f.__last=m:u.getWritable().__prev=m,f.__size++,r.__next=m,s.__next=p,s.__prev=r.__key,s.__parent=r.__parent,n&&Be(i)){const h=this.getIndexWithinParent();$M(i,f,h+1);const g=f.__key;l&&i.anchor.set(g,h+2,"element"),c&&i.focus.set(g,h+2,"element")}return t}insertBefore(t,n=!0){Ws(),OA(this,t);const r=this.getWritable(),s=t.getWritable(),a=s.__key;km(s);const i=this.getPreviousSibling(),l=this.getParentOrThrow().getWritable(),c=r.__prev,u=this.getIndexWithinParent();i===null?l.__first=a:i.getWritable().__next=a,l.__size++,r.__prev=a,s.__prev=c,s.__next=r.__key,s.__parent=r.__parent;const f=rt();return n&&Be(f)&&$M(f,this.getParentOrThrow(),u),t}isParentRequired(){return!1}createParentElementNode(){return kr()}selectStart(){return this.selectPrevious()}selectEnd(){return this.selectNext(0,0)}selectPrevious(t,n){Ws();const r=this.getPreviousSibling(),s=this.getParentOrThrow();if(r===null)return s.select(0,0);if(Ae(r))return r.select();if(!Je(r)){const a=r.getIndexWithinParent()+1;return s.select(a,a)}return r.select(t,n)}selectNext(t,n){Ws();const r=this.getNextSibling(),s=this.getParentOrThrow();if(r===null)return s.select();if(Ae(r))return r.select(0,0);if(!Je(r)){const a=r.getIndexWithinParent();return s.select(a,a)}return r.select(t,n)}markDirty(){this.getWritable()}reconcileObservedMutation(t,n){this.markDirty()}}class Lx extends Ad{static getType(){return"linebreak"}static clone(t){return new Lx(t.__key)}constructor(t){super(t)}getTextContent(){return`
`}createDOM(){return document.createElement("br")}updateDOM(){return!1}isInline(){return!0}static importDOM(){return{br:t=>function(n){const r=n.parentElement;if(r!==null&&zM(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&oS(s)){const a=r.lastChild;if(a===n||a.previousSibling===n&&oS(a))return!0}}return!1}(t)||function(n){const r=n.parentElement;if(r!==null&&zM(r)){const s=r.firstChild;if(s===n||s.nextSibling===n&&oS(s))return!1;const a=r.lastChild;if(a===n||a.previousSibling===n&&oS(a))return!0}return!1}(t)?null:{conversion:i4t,priority:0}}}static importJSON(t){return Go().updateFromJSON(t)}}function i4t(e){return{node:Go()}}function Go(){return Di(new Lx)}function sc(e){return e instanceof Lx}function oS(e){return Gu(e)&&/^( |\t|\r?\n)+$/.test(e.textContent||"")}function AA(e,t){return 16&t?"code":t&xV?"mark":32&t?"sub":64&t?"sup":null}function IA(e,t){return 1&t?"strong":2&t?"em":"span"}function m2e(e,t,n,r,s){const a=r.classList;let i=xg(s,"base");i!==void 0&&a.add(...i),i=xg(s,"underlineStrikethrough");let l=!1;const c=t&PM&&t&RM;i!==void 0&&(n&PM&&n&RM?(l=!0,c||a.add(...i)):c&&a.remove(...i));for(const u in Zm){const f=Zm[u];if(i=xg(s,u),i!==void 0)if(n&f){if(l&&(u==="underline"||u==="strikethrough")){t&f&&a.remove(...i);continue}t&f&&(!c||u!=="underline")&&u!=="strikethrough"||a.add(...i)}else t&f&&a.remove(...i)}}function p2e(e,t,n){const r=t.firstChild,s=n.isComposing(),a=e+(s?wT:"");if(r==null)t.textContent=a;else{const i=r.nodeValue;if(i!==a)if(s||Qm){const[l,c,u]=function(f,m){const p=f.length,h=m.length;let g=0,y=0;for(;g<p&&g<h&&f[g]===m[g];)g++;for(;y+g<p&&y+g<h&&f[p-y-1]===m[h-y-1];)y++;return[g,p-g-y,m.slice(g,h-y)]}(i,a);c!==0&&r.deleteData(l,c),r.insertData(l,u)}else r.nodeValue=a}}function Tne(e,t,n,r,s,a){p2e(s,e,t);const i=a.theme.text;i!==void 0&&m2e(0,0,r,e,i)}function iS(e,t){const n=document.createElement(t);return n.appendChild(e),n}class Rc extends Ad{__text;__format;__style;__mode;__detail;static getType(){return"text"}static clone(t){return new Rc(t.__text,t.__key)}afterCloneFrom(t){super.afterCloneFrom(t),this.__text=t.__text,this.__format=t.__format,this.__style=t.__style,this.__mode=t.__mode,this.__detail=t.__detail}constructor(t="",n){super(n),this.__text=t,this.__format=0,this.__style="",this.__mode=0,this.__detail=0}getFormat(){return this.getLatest().__format}getDetail(){return this.getLatest().__detail}getMode(){const t=this.getLatest();return OTt[t.__mode]}getStyle(){return this.getLatest().__style}isToken(){return this.getLatest().__mode===1}isComposing(){return this.__key===yd()}isSegmented(){return this.getLatest().__mode===2}isDirectionless(){return!!(1&this.getLatest().__detail)}isUnmergeable(){return!!(2&this.getLatest().__detail)}hasFormat(t){const n=Zm[t];return!!(this.getFormat()&n)}isSimpleText(){return this.__type==="text"&&this.__mode===0}getTextContent(){return this.getLatest().__text}getFormatFlags(t,n){return WM(this.getLatest().__format,t,n)}canHaveFormat(){return!0}isInline(){return!0}createDOM(t,n){const r=this.__format,s=AA(0,r),a=IA(0,r),i=s===null?a:s,l=document.createElement(i);let c=l;this.hasFormat("code")&&l.setAttribute("spellcheck","false"),s!==null&&(c=document.createElement(a),l.appendChild(c)),Tne(c,this,0,r,this.__text,t);const u=this.__style;return u!==""&&(l.style.cssText=u),l}updateDOM(t,n,r){const s=this.__text,a=t.__format,i=this.__format,l=AA(0,a),c=AA(0,i),u=IA(0,a),f=IA(0,i);if((l===null?u:l)!==(c===null?f:c))return!0;if(l===c&&u!==f){const y=n.firstChild;y==null&&$e(48);const x=document.createElement(f);return Tne(x,this,0,i,s,r),n.replaceChild(x,y),!1}let m=n;c!==null&&l!==null&&(m=n.firstChild,m==null&&$e(49)),p2e(s,m,this);const p=r.theme.text;p!==void 0&&a!==i&&m2e(0,a,i,m,p);const h=t.__style,g=this.__style;return h!==g&&(n.style.cssText=g),!1}static importDOM(){return{"#text":()=>({conversion:d4t,priority:0}),b:()=>({conversion:c4t,priority:0}),code:()=>({conversion:Wc,priority:0}),em:()=>({conversion:Wc,priority:0}),i:()=>({conversion:Wc,priority:0}),mark:()=>({conversion:Wc,priority:0}),s:()=>({conversion:Wc,priority:0}),span:()=>({conversion:l4t,priority:0}),strong:()=>({conversion:Wc,priority:0}),sub:()=>({conversion:Wc,priority:0}),sup:()=>({conversion:Wc,priority:0}),u:()=>({conversion:Wc,priority:0})}}static importJSON(t){return Zn().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTextContent(t.text).setFormat(t.format).setDetail(t.detail).setMode(t.mode).setStyle(t.style)}exportDOM(t){let{element:n}=super.exportDOM(t);return Jr(n)||$e(132),n.style.whiteSpace="pre-wrap",this.hasFormat("lowercase")?n.style.textTransform="lowercase":this.hasFormat("uppercase")?n.style.textTransform="uppercase":this.hasFormat("capitalize")&&(n.style.textTransform="capitalize"),this.hasFormat("bold")&&(n=iS(n,"b")),this.hasFormat("italic")&&(n=iS(n,"i")),this.hasFormat("strikethrough")&&(n=iS(n,"s")),this.hasFormat("underline")&&(n=iS(n,"u")),{element:n}}exportJSON(){return{detail:this.getDetail(),format:this.getFormat(),mode:this.getMode(),style:this.getStyle(),text:this.getTextContent(),...super.exportJSON()}}selectionTransform(t,n){}setFormat(t){const n=this.getWritable();return n.__format=typeof t=="string"?Zm[t]:t,n}setDetail(t){const n=this.getWritable();return n.__detail=typeof t=="string"?RTt[t]:t,n}setStyle(t){const n=this.getWritable();return n.__style=t,n}toggleFormat(t){const n=WM(this.getFormat(),t,null);return this.setFormat(n)}toggleDirectionless(){const t=this.getWritable();return t.__detail^=1,t}toggleUnmergeable(){const t=this.getWritable();return t.__detail^=2,t}setMode(t){const n=LTt[t];if(this.__mode===n)return this;const r=this.getWritable();return r.__mode=n,r}setTextContent(t){if(this.__text===t)return this;const n=this.getWritable();return n.__text=t,n}select(t,n){Ws();let r=t,s=n;const a=rt(),i=this.getTextContent(),l=this.__key;if(typeof i=="string"){const c=i.length;r===void 0&&(r=c),s===void 0&&(s=c)}else r=0,s=0;if(!Be(a))return y2e(l,r,l,s,"text","text");{const c=yd();c!==a.anchor.key&&c!==a.focus.key||Hs(l),a.setTextNodeRange(this,r,this,s)}return a}selectStart(){return this.select(0,0)}selectEnd(){const t=this.getTextContentSize();return this.select(t,t)}spliceText(t,n,r,s){const a=this.getWritable(),i=a.__text,l=r.length;let c=t;c<0&&(c=l+c,c<0&&(c=0));const u=rt();if(s&&Be(u)){const m=t+l;u.setTextNodeRange(a,m,a,m)}const f=i.slice(0,c)+r+i.slice(c+n);return a.__text=f,a}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}splitText(...t){Ws();const n=this.getLatest(),r=n.getTextContent();if(r==="")return[];const s=n.__key,a=yd(),i=r.length;t.sort((k,M)=>k-M),t.push(i);const l=[],c=t.length;for(let k=0,M=0;k<i&&M<=c;M++){const j=t[M];j>k&&(l.push(r.slice(k,j)),k=j)}const u=l.length;if(u===1)return[n];const f=l[0],m=n.getParent();let p;const h=n.getFormat(),g=n.getStyle(),y=n.__detail;let x=!1,v=null,b=null;const _=rt();if(Be(_)){const[k,M]=_.isBackward()?[_.focus,_.anchor]:[_.anchor,_.focus];k.type==="text"&&k.key===s&&(v=k),M.type==="text"&&M.key===s&&(b=M)}n.isSegmented()?(p=Zn(f),p.__format=h,p.__style=g,p.__detail=y,p.__state=xne(n,p),x=!0):p=n.setTextContent(f);const w=[p];for(let k=1;k<u;k++){const M=Zn(l[k]);M.__format=h,M.__style=g,M.__detail=y,M.__state=xne(n,M);const j=M.__key;a===s&&Hs(j),w.push(M)}const C=v?v.offset:null,S=b?b.offset:null;let E=0;for(const k of w){if(!v&&!b)break;const M=E+k.getTextContentSize();if(v!==null&&C!==null&&C<=M&&C>=E&&(v.set(k.getKey(),C-E,"text"),C<M&&(v=null)),b!==null&&S!==null&&S<=M&&S>=E){b.set(k.getKey(),S-E,"text");break}E=M}if(m!==null){(function(j){const R=j.getPreviousSibling(),O=j.getNextSibling();R!==null&&HM(R),O!==null&&HM(O)})(this);const k=m.getWritable(),M=this.getIndexWithinParent();x?(k.splice(M,0,w),this.remove()):k.splice(M,1,w),Be(_)&&$M(_,m,M,u-1)}return w}mergeWithSibling(t){const n=t===this.getPreviousSibling();n||t===this.getNextSibling()||$e(50);const r=this.__key,s=t.__key,a=this.__text,i=a.length;yd()===s&&Hs(r);const l=rt();if(Be(l)){const m=l.anchor,p=l.focus;m!==null&&m.key===s&&Fne(m,n,r,t,i),p!==null&&p.key===s&&Fne(p,n,r,t,i)}const c=t.__text,u=n?c+a:a+c;this.setTextContent(u);const f=this.getWritable();return t.remove(),f}isTextEntity(){return!1}}function l4t(e){return{forChild:jV(e.style),node:null}}function c4t(e){const t=e,n=t.style.fontWeight==="normal";return{forChild:jV(t.style,n?void 0:"bold"),node:null}}const Nne=new WeakMap;function u4t(e){if(!Jr(e))return!1;if(e.nodeName==="PRE")return!0;const t=e.style.whiteSpace;return typeof t=="string"&&t.startsWith("pre")}function d4t(e){const t=e;e.parentElement===null&&$e(129);let n=t.textContent||"";if(function(r){let s,a=r.parentNode;const i=[r];for(;a!==null&&(s=Nne.get(a))===void 0&&!u4t(a);)i.push(a),a=a.parentNode;const l=s===void 0?a:s;for(let c=0;c<i.length;c++)Nne.set(i[c],l);return l}(t)!==null){const r=n.split(/(\r?\n|\t)/),s=[],a=r.length;for(let i=0;i<a;i++){const l=r[i];l===`
`||l===`\r
`?s.push(Go()):l==="	"?s.push(ow()):l!==""&&s.push(Zn(l))}return{node:s}}if(n=n.replace(/\r/g,"").replace(/[ \t\n]+/g," "),n==="")return{node:null};if(n[0]===" "){let r=t,s=!0;for(;r!==null&&(r=jne(r,!1))!==null;){const a=r.textContent||"";if(a.length>0){/[ \t\n]$/.test(a)&&(n=n.slice(1)),s=!1;break}}s&&(n=n.slice(1))}if(n[n.length-1]===" "){let r=t,s=!0;for(;r!==null&&(r=jne(r,!0))!==null;)if((r.textContent||"").replace(/^( |\t|\r?\n)+/,"").length>0){s=!1;break}s&&(n=n.slice(0,n.length-1))}return n===""?{node:null}:{node:Zn(n)}}function jne(e,t){let n=e;for(;;){let r;for(;(r=t?n.nextSibling:n.previousSibling)===null;){const a=n.parentElement;if(a===null)return null;n=a}if(n=r,Jr(n)){const a=n.style.display;if(a===""&&!_7(n)||a!==""&&!a.startsWith("inline"))return null}let s=n;for(;(s=t?n.firstChild:n.lastChild)!==null;)n=s;if(Gu(n))return n;if(n.nodeName==="BR")return null}}const f4t={code:"code",em:"italic",i:"italic",mark:"highlight",s:"strikethrough",strong:"bold",sub:"subscript",sup:"superscript",u:"underline"};function Wc(e){const t=f4t[e.nodeName.toLowerCase()];return t===void 0?{node:null}:{forChild:jV(e.style,t),node:null}}function Zn(e=""){return Di(new Rc(e))}function Je(e){return e instanceof Rc}function jV(e,t){const n=e.fontWeight,r=e.textDecoration.split(" "),s=n==="700"||n==="bold",a=r.includes("line-through"),i=e.fontStyle==="italic",l=r.includes("underline"),c=e.verticalAlign;return u=>(Je(u)&&(s&&!u.hasFormat("bold")&&u.toggleFormat("bold"),a&&!u.hasFormat("strikethrough")&&u.toggleFormat("strikethrough"),i&&!u.hasFormat("italic")&&u.toggleFormat("italic"),l&&!u.hasFormat("underline")&&u.toggleFormat("underline"),c!=="sub"||u.hasFormat("subscript")||u.toggleFormat("subscript"),c!=="super"||u.hasFormat("superscript")||u.toggleFormat("superscript"),t&&!u.hasFormat(t)&&u.toggleFormat(t)),u)}class Ox extends Rc{static getType(){return"tab"}static clone(t){return new Ox(t.__key)}constructor(t){super("	",t),this.__detail=2}static importDOM(){return null}createDOM(t){const n=super.createDOM(t),r=xg(t.theme,"tab");return r!==void 0&&n.classList.add(...r),n}static importJSON(t){return ow().updateFromJSON(t)}setTextContent(t){return t!=="	"&&t!==""&&PSe(126),super.setTextContent("	")}spliceText(t,n,r,s){return r===""&&n===0||r==="	"&&n===1||$e(286),this}setDetail(t){return t!==2&&$e(127),this}setMode(t){return t!=="normal"&&$e(128),this}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}}function ow(){return Di(new Ox)}function ST(e){return e instanceof Ox}class m4t{key;offset;type;_selection;constructor(t,n,r){this._selection=null,this.key=t,this.offset=n,this.type=r}is(t){return this.key===t.key&&this.offset===t.offset&&this.type===t.type}isBefore(t){return this.key===t.key?this.offset<t.offset:V2e(zl(Tu(this,"next")),zl(Tu(t,"next")))<0}getNode(){const t=Es(this.key);return t===null&&$e(20),t}set(t,n,r,s){const a=this._selection,i=this.key;s&&this.key===t&&this.offset===n&&this.type===r||(this.key=t,this.offset=n,this.type=r,lw()||(yd()===i&&Hs(t),a!==null&&(a.setCachedNodes(null),a.dirty=!0)))}}function xc(e,t,n){return new m4t(e,t,n)}function RA(e,t){let n=t.__key,r=e.offset,s="element";if(Je(t)){s="text";const a=t.getTextContentSize();r>a&&(r=a)}else if(!Ae(t)){const a=t.getNextSibling();if(Je(a))n=a.__key,r=0,s="text";else{const i=t.getParent();i&&(n=i.__key,r=t.getIndexWithinParent()+1)}}e.set(n,r,s)}function Ane(e,t){if(Ae(t)){const n=t.getLastDescendant();Ae(n)||Je(n)?RA(e,n):RA(e,t)}else RA(e,t)}class ET{_nodes;_cachedNodes;dirty;constructor(t){this._cachedNodes=null,this._nodes=t,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){if(!gu(t))return!1;const n=this._nodes,r=t._nodes;return n.size===r.size&&Array.from(n).every(s=>r.has(s))}isCollapsed(){return!1}isBackward(){return!1}getStartEndPoints(){return null}add(t){this.dirty=!0,this._nodes.add(t),this._cachedNodes=null}delete(t){this.dirty=!0,this._nodes.delete(t),this._cachedNodes=null}clear(){this.dirty=!0,this._nodes.clear(),this._cachedNodes=null}has(t){return this._nodes.has(t)}clone(){return new ET(new Set(this._nodes))}extract(){return this.getNodes()}insertRawText(t){}insertText(){}insertNodes(t){const n=this.getNodes(),r=n.length,s=n[r-1];let a;if(Je(s))a=s.select();else{const i=s.getIndexWithinParent()+1;a=s.getParentOrThrow().select(i,i)}a.insertNodes(t);for(let i=0;i<r;i++)n[i].remove()}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=this._nodes,r=[];for(const s of n){const a=Es(s);a!==null&&r.push(a)}return lw()||(this._cachedNodes=r),r}getTextContent(){const t=this.getNodes();let n="";for(let r=0;r<t.length;r++)n+=t[r].getTextContent();return n}deleteNodes(){const t=this.getNodes();if((rt()||iw())===this&&t[0]){const n=Zs(t[0],"next");z4t(Xd(n,n))}for(const n of t)n.remove()}}function Be(e){return e instanceof jp}class jp{format;style;anchor;focus;_cachedNodes;dirty;constructor(t,n,r,s){this.anchor=t,this.focus=n,t._selection=this,n._selection=this,this._cachedNodes=null,this.format=r,this.style=s,this.dirty=!1}getCachedNodes(){return this._cachedNodes}setCachedNodes(t){this._cachedNodes=t}is(t){return!!Be(t)&&this.anchor.is(t.anchor)&&this.focus.is(t.focus)&&this.format===t.format&&this.style===t.style}isCollapsed(){return this.anchor.is(this.focus)}getNodes(){const t=this._cachedNodes;if(t!==null)return t;const n=function(r){const s=[],[a,i]=r.getTextSlices();a&&s.push(a.caret.origin);const l=new Set,c=new Set;for(const u of r)if(ac(u)){const{origin:f}=u;s.length===0?l.add(f):(c.add(f),s.push(f))}else{const{origin:f}=u;Ae(f)&&c.has(f)||s.push(f)}if(i&&s.push(i.caret.origin),yy(r.focus)&&Ae(r.focus.origin)&&r.focus.getNodeAtCaret()===null)for(let u=ku(r.focus.origin,"previous");ac(u)&&l.has(u.origin)&&!u.origin.isEmpty()&&u.origin.is(s[s.length-1]);u=XV(u))l.delete(u.origin),s.pop();for(;s.length>1;){const u=s[s.length-1];if(!Ae(u)||c.has(u)||u.isEmpty()||l.has(u))break;s.pop()}if(s.length===0&&r.isCollapsed()){const u=zl(r.anchor),f=zl(r.anchor.getFlipped()),m=h=>Rd(h)?h.origin:h.getNodeAtCaret(),p=m(u)||m(f)||(r.anchor.getNodeAtCaret()?u.origin:f.origin);s.push(p)}return s}(z2e(sre(this),"next"));return lw()||(this._cachedNodes=n),n}setTextNodeRange(t,n,r,s){this.anchor.set(t.__key,n,"text"),this.focus.set(r.__key,s,"text")}getTextContent(){const t=this.getNodes();if(t.length===0)return"";const n=t[0],r=t[t.length-1],s=this.anchor,a=this.focus,i=s.isBefore(a),[l,c]=h7(this);let u="",f=!0;for(let m=0;m<t.length;m++){const p=t[m];if(Ae(p)&&!p.isInline())f||(u+=`
`),f=!p.isEmpty();else if(f=!1,Je(p)){let h=p.getTextContent();p===n?p===r?s.type==="element"&&a.type==="element"&&a.offset!==s.offset||(h=l<c?h.slice(l,c):h.slice(c,l)):h=i?h.slice(l):h.slice(c):p===r&&(h=i?h.slice(0,c):h.slice(0,l)),u+=h}else!Bn(p)&&!sc(p)||p===r&&this.isCollapsed()||(u+=p.getTextContent())}return u}applyDOMRange(t){const n=Tr(),r=n.getEditorState()._selection,s=g2e(t.startContainer,t.startOffset,t.endContainer,t.endOffset,n,r);if(s===null)return;const[a,i]=s;this.anchor.set(a.key,a.offset,a.type,!0),this.focus.set(i.key,i.offset,i.type,!0),ub(this)}clone(){const t=this.anchor,n=this.focus;return new jp(xc(t.key,t.offset,t.type),xc(n.key,n.offset,n.type),this.format,this.style)}toggleFormat(t){this.format=WM(this.format,t,null),this.dirty=!0}setFormat(t){this.format=t,this.dirty=!0}setStyle(t){this.style=t,this.dirty=!0}hasFormat(t){const n=Zm[t];return!!(this.format&n)}insertRawText(t){const n=t.split(/(\r?\n|\t)/),r=[],s=n.length;for(let a=0;a<s;a++){const i=n[a];i===`
`||i===`\r
`?r.push(Go()):i==="	"?r.push(ow()):r.push(Zn(i))}this.insertNodes(r)}insertText(t){const n=this.anchor,r=this.focus,s=this.format,a=this.style;let i=n,l=r;!this.isCollapsed()&&r.isBefore(n)&&(i=r,l=n),i.type==="element"&&function(x,v,b,_){const w=x.getNode(),C=w.getChildAtIndex(x.offset),S=Zn();if(S.setFormat(b),S.setStyle(_),Id(C))C.splice(0,0,[S]);else{const E=ps(w)?kr().append(S):S;C===null?w.append(E):C.insertBefore(E)}x.is(v)&&v.set(S.__key,0,"text"),x.set(S.__key,0,"text")}(i,l,s,a),l.type==="element"&&hb(l,zl(Tu(l,"next")));const c=i.offset;let u=l.offset;const f=this.getNodes(),m=f.length;let p=f[0];Je(p)||$e(26);const h=p.getTextContent().length,g=p.getParentOrThrow();let y=f[m-1];if(m===1&&l.type==="element"&&(u=h,l.set(i.key,u,"text")),this.isCollapsed()&&c===h&&(Yc(p)||!p.canInsertTextAfter()||!g.canInsertTextAfter()&&p.getNextSibling()===null)){let x=p.getNextSibling();if(Je(x)&&x.canInsertTextBefore()&&!Yc(x)||(x=Zn(),x.setFormat(s),x.setStyle(a),g.canInsertTextAfter()?p.insertAfter(x):g.insertAfter(x)),x.select(0,0),p=x,t!=="")return void this.insertText(t)}else if(this.isCollapsed()&&c===0&&(Yc(p)||!p.canInsertTextBefore()||!g.canInsertTextBefore()&&p.getPreviousSibling()===null)){let x=p.getPreviousSibling();if(Je(x)&&!Yc(x)||(x=Zn(),x.setFormat(s),g.canInsertTextBefore()?p.insertBefore(x):g.insertBefore(x)),x.select(),p=x,t!=="")return void this.insertText(t)}else if(p.isSegmented()&&c!==h){const x=Zn(p.getTextContent());x.setFormat(s),p.replace(x),p=x}else if(!this.isCollapsed()&&t!==""){const x=y.getParent();if(!g.canInsertTextBefore()||!g.canInsertTextAfter()||Ae(x)&&(!x.canInsertTextBefore()||!x.canInsertTextAfter()))return this.insertText(""),h2e(this.anchor,this.focus,null),void this.insertText(t)}if(m===1){if(Mm(p)){const _=Zn(t);return _.select(),void p.replace(_)}const x=p.getFormat(),v=p.getStyle();if(c!==u||x===s&&v===a){if(ST(p)){const _=Zn(t);return _.setFormat(s),_.setStyle(a),_.select(),void p.replace(_)}}else{if(p.getTextContent()!==""){const _=Zn(t);if(_.setFormat(s),_.setStyle(a),_.select(),c===0)p.insertBefore(_,!1);else{const[w]=p.splitText(c);w.insertAfter(_,!1)}return void(_.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length))}p.setFormat(s),p.setStyle(a)}const b=u-c;p=p.spliceText(c,b,t,!0),p.getTextContent()===""?p.remove():this.anchor.type==="text"&&(p.isComposing()?this.anchor.offset-=t.length:(this.format=x,this.style=v))}else{const x=new Set([...p.getParentKeys(),...y.getParentKeys()]),v=Ae(p)?p:p.getParentOrThrow();let b=Ae(y)?y:y.getParentOrThrow(),_=y;if(!v.is(b)&&b.isInline())do _=b,b=b.getParentOrThrow();while(b.isInline());if(l.type==="text"&&(u!==0||y.getTextContent()==="")||l.type==="element"&&y.getIndexWithinParent()<u)if(Je(y)&&!Mm(y)&&u!==y.getTextContentSize()){if(y.isSegmented()){const k=Zn(y.getTextContent());y.replace(k),y=k}ps(l.getNode())||l.type!=="text"||(y=y.spliceText(0,u,"")),x.add(y.__key)}else{const k=y.getParentOrThrow();k.canBeEmpty()||k.getChildrenSize()!==1?y.remove():k.remove()}else x.add(y.__key);const w=b.getChildren(),C=new Set(f),S=v.is(b),E=v.isInline()&&p.getNextSibling()===null?v:p;for(let k=w.length-1;k>=0;k--){const M=w[k];if(M.is(p)||Ae(M)&&M.isParentOf(p))break;M.isAttached()&&(!C.has(M)||M.is(_)?S||E.insertAfter(M,!1):M.remove())}if(!S){let k=b,M=null;for(;k!==null;){const j=k.getChildren(),R=j.length;(R===0||j[R-1].is(M))&&(x.delete(k.__key),M=k),k=k.getParent()}}if(Mm(p))if(c===h)p.select();else{const k=Zn(t);k.select(),p.replace(k)}else p=p.spliceText(c,h-c,t,!0),p.getTextContent()===""?p.remove():p.isComposing()&&this.anchor.type==="text"&&(this.anchor.offset-=t.length);for(let k=1;k<m;k++){const M=f[k],j=M.__key;x.has(j)||M.remove()}}}removeText(){const t=rt()===this;T2(this,G4t(sre(this))),t&&rt()!==this&&ta(this)}formatText(t,n=null){if(this.isCollapsed())return this.toggleFormat(t),void Hs(null);const r=this.getNodes(),s=[];for(const w of r)Je(w)&&s.push(w);const a=w=>{r.forEach(C=>{if(Ae(C)){const S=C.getFormatFlags(t,w);C.setTextFormat(S)}})},i=s.length;if(i===0)return this.toggleFormat(t),Hs(null),void a(n);const l=this.anchor,c=this.focus,u=this.isBackward(),f=u?c:l,m=u?l:c;let p=0,h=s[0],g=f.type==="element"?0:f.offset;if(f.type==="text"&&g===h.getTextContentSize()&&(p=1,h=s[1],g=0),h==null)return;const y=h.getFormatFlags(t,n);a(y);const x=i-1;let v=s[x];const b=m.type==="text"?m.offset:v.getTextContentSize();if(h.is(v)){if(g===b)return;if(Yc(h)||g===0&&b===h.getTextContentSize())h.setFormat(y);else{const w=h.splitText(g,b),C=g===0?w[0]:w[1];C.setFormat(y),f.type==="text"&&f.set(C.__key,0,"text"),m.type==="text"&&m.set(C.__key,b-g,"text")}return void(this.format=y)}g===0||Yc(h)||([,h]=h.splitText(g),g=0),h.setFormat(y);const _=v.getFormatFlags(t,y);b>0&&(b===v.getTextContentSize()||Yc(v)||([v]=v.splitText(b)),v.setFormat(_));for(let w=p+1;w<x;w++){const C=s[w],S=C.getFormatFlags(t,_);C.setFormat(S)}f.type==="text"&&f.set(h.__key,g,"text"),m.type==="text"&&m.set(v.__key,b,"text"),this.format=y|_}insertNodes(t){if(t.length===0)return;if(this.isCollapsed()||this.removeText(),this.anchor.key==="root"){this.insertParagraph();const g=rt();return Be(g)||$e(134),g.insertNodes(t)}const n=(this.isBackward()?this.focus:this.anchor).getNode(),r=xi(n,fd),s=t[t.length-1];if(Ae(r)&&"__language"in r){if("__language"in t[0])this.insertText(t[0].getTextContent());else{const g=PA(this);r.splice(g,0,t),s.selectEnd()}return}if(!t.some(g=>(Ae(g)||Bn(g))&&!g.isInline())){Ae(r)||$e(211,n.constructor.name,n.getType());const g=PA(this);return r.splice(g,0,t),void s.selectEnd()}const a=function(g){const y=kr();let x=null;for(let v=0;v<g.length;v++){const b=g[v],_=sc(b);if(_||Bn(b)&&b.isInline()||Ae(b)&&b.isInline()||Je(b)||b.isParentRequired()){if(x===null&&(x=b.createParentElementNode(),y.append(x),_))continue;x!==null&&x.append(b)}else y.append(b),x=null}return y}(t),i=a.getLastDescendant(),l=a.getChildren(),c=!Ae(r)||!r.isEmpty()?this.insertParagraph():null,u=l[l.length-1];let f=l[0];var m;Ae(m=f)&&fd(m)&&!m.isEmpty()&&Ae(r)&&(!r.isEmpty()||r.canMergeWhenEmpty())&&(Ae(r)||$e(211,n.constructor.name,n.getType()),r.append(...f.getChildren()),f=l[1]),f&&(r===null&&$e(212,n.constructor.name,n.getType()),function(g,y,x){const v=y.getParentOrThrow().getLastChild();let b=y;const _=[y];for(;b!==v;)b.getNextSibling()||$e(140),b=b.getNextSibling(),_.push(b);let w=g;for(const C of _)w=w.insertAfter(C)}(r,f));const p=xi(i,fd);c&&Ae(p)&&(c.canMergeWhenEmpty()||fd(u))&&(p.append(...c.getChildren()),c.remove()),Ae(r)&&r.isEmpty()&&r.remove(),i.selectEnd();const h=Ae(r)?r.getLastChild():null;sc(h)&&p!==r&&h.remove()}insertParagraph(){if(this.anchor.key==="root"){const i=kr();return sr().splice(this.anchor.offset,0,[i]),i.select(),i}const t=PA(this),n=xi(this.anchor.getNode(),fd);Ae(n)||$e(213);const r=n.getChildAtIndex(t),s=r?[r,...r.getNextSiblings()]:[],a=n.insertNewAfter(this,!1);return a?(a.append(...s),a.selectStart(),a):null}insertLineBreak(t){const n=Go();if(this.insertNodes([n]),t){const r=n.getParentOrThrow(),s=n.getIndexWithinParent();r.select(s,s)}}extract(){const t=[...this.getNodes()],n=t.length;let r=t[0],s=t[n-1];const[a,i]=h7(this),l=this.isBackward(),[c,u]=l?[this.focus,this.anchor]:[this.anchor,this.focus],[f,m]=l?[i,a]:[a,i];if(n===0)return[];if(n===1){if(Je(r)&&!this.isCollapsed()){const p=r.splitText(f,m),h=f===0?p[0]:p[1];return h?(c.set(h.getKey(),0,"text"),u.set(h.getKey(),h.getTextContentSize(),"text"),[h]):[]}return[r]}if(Je(r)&&(f===r.getTextContentSize()?t.shift():f!==0&&([,r]=r.splitText(f),t[0]=r,c.set(r.getKey(),0,"text"))),Je(s)){const p=s.getTextContent().length;m===0?t.pop():m!==p&&([s]=s.splitText(m),t[t.length-1]=s,u.set(s.getKey(),s.getTextContentSize(),"text"))}return t}modify(t,n,r){if(Une(this,t,n,r))return;const s=t==="move",a=Tr(),i=vc(Mi(a));if(!i)return;const l=a._blockCursorElement,c=a._rootElement,u=this.focus.getNode();if(c===null||l===null||!Ae(u)||u.isInline()||u.canBeEmpty()||v7(l,a,c),this.dirty){let f=tp(a,this.anchor.key),m=tp(a,this.focus.key);this.anchor.type==="text"&&(f=hy(f)),this.focus.type==="text"&&(m=hy(m)),f&&m&&b2e(i,f,this.anchor.offset,m,this.focus.offset)}if(function(f,m,p,h){f.modify(m,p,h)}(i,t,n?"backward":"forward",r),i.rangeCount>0){const f=i.getRangeAt(0),m=this.anchor.getNode(),p=ps(m)?m:I4t(m);if(this.applyDOMRange(f),this.dirty=!0,!s){const h=this.getNodes(),g=[];let y=!1;for(let x=0;x<h.length;x++){const v=h[x];x7(v,p)?g.push(v):y=!0}if(y&&g.length>0)if(n){const x=g[0];Ae(x)?x.selectStart():x.getParentOrThrow().selectStart()}else{const x=g[g.length-1];Ae(x)?x.selectEnd():x.getParentOrThrow().selectEnd()}i.anchorNode===f.startContainer&&i.anchorOffset===f.startOffset||function(x){const v=x.focus,b=x.anchor,_=b.key,w=b.offset,C=b.type;b.set(v.key,v.offset,v.type,!0),v.set(_,w,C,!0)}(this)}}r==="lineboundary"&&Une(this,t,n,r,"decorators")}forwardDeletion(t,n,r){if(!r&&(t.type==="element"&&Ae(n)&&t.offset===n.getChildrenSize()||t.type==="text"&&t.offset===n.getTextContentSize())){const s=n.getParent(),a=n.getNextSibling()||(s===null?null:s.getNextSibling());if(Ae(a)&&a.isShadowRoot())return!0}return!1}deleteCharacter(t){const n=this.isCollapsed();if(this.isCollapsed()){const r=this.anchor;let s=r.getNode();if(this.forwardDeletion(r,s,t))return;const a=JV(Tu(r,t?"previous":"next"));if(a.getTextSlices().every(l=>l===null||l.distance===0)){let l={type:"initial"};for(const c of a.iterNodeCarets("shadowRoot"))if(ac(c)){if(!c.origin.isInline()){if(c.origin.isShadowRoot()){if(l.type==="merge-block")break;if(Ae(a.anchor.origin)&&a.anchor.origin.isEmpty()){const u=zl(c);T2(this,Xd(u,u)),a.anchor.origin.remove()}return}l.type!=="merge-next-block"&&l.type!=="merge-block"||(l={block:l.block,caret:c,type:"merge-block"})}}else{if(l.type==="merge-block")break;if(yy(c)){if(Ae(c.origin)){if(c.origin.isInline()){if(!c.origin.isParentOf(a.anchor.origin))break}else l={block:c.origin,type:"merge-next-block"};continue}if(Bn(c.origin)){if(!c.origin.isIsolated())if(l.type==="merge-next-block"&&(c.origin.isKeyboardSelectable()||!c.origin.isInline())&&Ae(a.anchor.origin)&&a.anchor.origin.isEmpty()){a.anchor.origin.remove();const u=v2e();u.add(c.origin.getKey()),ta(u)}else c.origin.remove();return}break}}if(l.type==="merge-block"){const{caret:c,block:u}=l;return T2(this,Xd(!c.origin.isEmpty()&&u.isEmpty()?eW(Zs(u,c.direction)):a.anchor,c)),this.removeText()}}const i=this.focus;if(this.modify("extend",t,"character"),this.isCollapsed()){if(t&&r.offset===0&&Rne(this,r.getNode()))return}else{const l=i.type==="text"?i.getNode():null;if(s=r.type==="text"?r.getNode():null,l!==null&&l.isSegmented()){const c=i.offset,u=l.getTextContentSize();if(l.is(s)||t&&c!==u||!t&&c!==0)return void Pne(l,t,c)}else if(s!==null&&s.isSegmented()){const c=r.offset,u=s.getTextContentSize();if(s.is(l)||t&&c!==0||!t&&c!==u)return void Pne(s,t,c)}(function(c,u){const f=c.anchor,m=c.focus,p=f.getNode(),h=m.getNode();if(p===h&&f.type==="text"&&m.type==="text"){const g=f.offset,y=m.offset,x=g<y,v=x?g:y,b=x?y:g,_=b-1;v!==_&&function(w){return!(P2e(w)||p4t(w))}(p.getTextContent().slice(v,b))&&(u?m.set(m.key,_,m.type):f.set(f.key,_,f.type))}})(this,t)}}if(this.removeText(),t&&!n&&this.isCollapsed()&&this.anchor.type==="element"&&this.anchor.offset===0){const r=this.anchor.getNode();r.isEmpty()&&ps(r.getParent())&&r.getPreviousSibling()===null&&Rne(this,r)}}deleteLine(t){this.isCollapsed()&&this.modify("extend",t,"lineboundary"),this.isCollapsed()?this.deleteCharacter(t):this.removeText()}deleteWord(t){if(this.isCollapsed()){const n=this.anchor,r=n.getNode();if(this.forwardDeletion(n,r,t))return;this.modify("extend",t,"word")}this.removeText()}isBackward(){return this.focus.isBefore(this.anchor)}getStartEndPoints(){return[this.anchor,this.focus]}}function gu(e){return e instanceof ET}function Ine(e){const t=e.offset;if(e.type==="text")return t;const n=e.getNode();return t===n.getChildrenSize()?n.getTextContent().length:0}function h7(e){const t=e.getStartEndPoints();if(t===null)return[0,0];const[n,r]=t;return n.type==="element"&&r.type==="element"&&n.key===r.key&&n.offset===r.offset?[0,0]:[Ine(n),Ine(r)]}function Rne(e,t){for(let n=t;n;n=n.getParent()){if(Ae(n)){if(n.collapseAtStart(e))return!0;if(ul(n))break}if(n.getPreviousSibling())break}return!1}const p4t=(()=>{try{const e=new RegExp("\\p{Emoji}","u"),t=e.test.bind(e);if(t("")&&t("#")&&t(""))return t}catch{}return()=>!1})();function Pne(e,t,n){const r=e,s=r.getTextContent().split(/(?=\s)/g),a=s.length;let i=0,l=0;for(let u=0;u<a;u++){const f=u===a-1;if(l=i,i+=s[u].length,t&&i===n||i>n||f){s.splice(u,1),f&&(l=void 0);break}}const c=s.join("").trim();c===""?r.remove():(r.setTextContent(c),r.select(l,l))}function Lne(e,t,n,r){let s,a=t;if(Jr(e)){let i=!1;const l=e.childNodes,c=l.length,u=r._blockCursorElement;a===c&&(i=!0,a=c-1);let f=l[a],m=!1;if(f===u)f=l[a+1],m=!0;else if(u!==null){const p=u.parentNode;e===p&&t>Array.prototype.indexOf.call(p.children,u)&&a--}if(s=zh(f),Je(s))a=Pd(s,i?"next":"previous");else{let p=zh(e);if(p===null)return null;if(Ae(p)){const h=r.getElementByKey(p.getKey());h===null&&$e(214),[p,a]=p.getDOMSlot(h).resolveChildIndex(p,h,e,t),Ae(p)||$e(215),i&&a>=p.getChildrenSize()&&(a=Math.max(0,p.getChildrenSize()-1));let y=p.getChildAtIndex(a);if(Ae(y)&&function(x,v,b){const _=x.getParent();return b===null||_===null||!_.canBeEmpty()||_!==b.getNode()}(y,0,n)){const x=i?y.getLastDescendant():y.getFirstDescendant();x===null?p=y:(y=x,p=Ae(y)?y:y.getParentOrThrow()),a=0}Je(y)?(s=y,p=null,a=Pd(y,i?"next":"previous")):y!==p&&i&&!m&&(Ae(p)||$e(216),a=Math.min(p.getChildrenSize(),a+1))}else{const h=p.getIndexWithinParent();a=t===0&&Bn(p)&&zh(e)===p?h:h+1,p=p.getParentOrThrow()}if(Ae(p))return xc(p.__key,a,"element")}}else s=zh(e);return Je(s)?xc(s.__key,Pd(s,a,"clamp"),"text"):null}function One(e,t,n){const r=e.offset,s=e.getNode();if(r===0){const a=s.getPreviousSibling(),i=s.getParent();if(t){if((n||!t)&&a===null&&Ae(i)&&i.isInline()){const l=i.getPreviousSibling();Je(l)&&e.set(l.__key,l.getTextContent().length,"text")}}else Ae(a)&&!n&&a.isInline()?e.set(a.__key,a.getChildrenSize(),"element"):Je(a)&&e.set(a.__key,a.getTextContent().length,"text")}else if(r===s.getTextContent().length){const a=s.getNextSibling(),i=s.getParent();if(t&&Ae(a)&&a.isInline())e.set(a.__key,0,"element");else if((n||t)&&a===null&&Ae(i)&&i.isInline()&&!i.canInsertTextAfter()){const l=i.getNextSibling();Je(l)&&e.set(l.__key,0,"text")}}}function h2e(e,t,n){if(e.type==="text"&&t.type==="text"){const r=e.isBefore(t),s=e.is(t);One(e,r,s),One(t,!r,s),s&&t.set(e.key,e.offset,e.type);const a=Tr();if(a.isComposing()&&a._compositionKey!==e.key&&Be(n)){const i=n.anchor,l=n.focus;e.set(i.key,i.offset,i.type,!0),t.set(l.key,l.offset,l.type,!0)}}}function g2e(e,t,n,r,s,a){if(e===null||n===null||!TT(s,e,n))return null;const i=Lne(e,t,Be(a)?a.anchor:null,s);if(i===null)return null;const l=Lne(n,r,Be(a)?a.focus:null,s);if(l===null)return null;if(i.type==="element"&&l.type==="element"){const c=zh(e),u=zh(n);if(Bn(c)&&Bn(u))return null}return h2e(i,l,a),[i,l]}function g7(e){return Ae(e)&&!e.isInline()}function y2e(e,t,n,r,s,a){const i=bf(),l=new jp(xc(e,t,s),xc(n,r,a),0,"");return l.dirty=!0,i._selection=l,l}function x2e(){const e=xc("root",0,"element"),t=xc("root",0,"element");return new jp(e,t,0,"")}function v2e(){return new ET(new Set)}function AV(e,t,n,r){const s=n._window;if(s===null)return null;const a=r||s.event,i=a?a.type:void 0,l=i==="selectionchange",c=!e7&&(l||i==="beforeinput"||i==="compositionstart"||i==="compositionend"||i==="click"&&a&&a.detail===3||i==="drop"||i===void 0);let u,f,m,p;if(Be(e)&&!c)return e.clone();if(t===null)return null;if(u=t.anchorNode,f=t.focusNode,m=t.anchorOffset,p=t.focusOffset,l&&Be(e)&&!TT(n,u,f))return e.clone();const h=g2e(u,m,f,p,n,e);if(h===null)return null;const[g,y]=h;return new jp(g,y,Be(e)?e.format:0,Be(e)?e.style:"")}function rt(){return bf()._selection}function iw(){return Tr()._editorState._selection}function $M(e,t,n,r=1){const s=e.anchor,a=e.focus,i=s.getNode(),l=a.getNode();if(!t.is(i)&&!t.is(l))return;const c=t.__key;if(e.isCollapsed()){const u=s.offset;if(n<=u&&r>0||n<u&&r<0){const f=Math.max(0,u+r);s.set(c,f,"element"),a.set(c,f,"element"),Dne(e)}}else{const u=e.isBackward(),f=u?a:s,m=f.getNode(),p=u?s:a,h=p.getNode();if(t.is(m)){const g=f.offset;(n<=g&&r>0||n<g&&r<0)&&f.set(c,Math.max(0,g+r),"element")}if(t.is(h)){const g=p.offset;(n<=g&&r>0||n<g&&r<0)&&p.set(c,Math.max(0,g+r),"element")}}Dne(e)}function Dne(e){const t=e.anchor,n=t.offset,r=e.focus,s=r.offset,a=t.getNode(),i=r.getNode();if(e.isCollapsed()){if(!Ae(a))return;const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(Je(u)){let f=0;c&&(f=u.getTextContentSize()),t.set(u.__key,f,"text"),r.set(u.__key,f,"text")}}else{if(Ae(a)){const l=a.getChildrenSize(),c=n>=l,u=c?a.getChildAtIndex(l-1):a.getChildAtIndex(n);if(Je(u)){let f=0;c&&(f=u.getTextContentSize()),t.set(u.__key,f,"text")}}if(Ae(i)){const l=i.getChildrenSize(),c=s>=l,u=c?i.getChildAtIndex(l-1):i.getChildAtIndex(s);if(Je(u)){let f=0;c&&(f=u.getTextContentSize()),r.set(u.__key,f,"text")}}}}function VM(e,t,n,r,s){let a=null,i=0,l=null;r!==null?(a=r.__key,Je(r)?(i=r.getTextContentSize(),l="text"):Ae(r)&&(i=r.getChildrenSize(),l="element")):s!==null&&(a=s.__key,Je(s)?l="text":Ae(s)&&(l="element")),a!==null&&l!==null?e.set(a,i,l):(i=t.getIndexWithinParent(),i===-1&&(i=n.getChildrenSize()),e.set(n.__key,i,"element"))}function Fne(e,t,n,r,s){e.type==="text"?e.set(n,e.offset+(t?0:s),"text"):e.offset>r.getIndexWithinParent()&&e.set(e.key,e.offset-1,"element")}function b2e(e,t,n,r,s){try{e.setBaseAndExtent(t,n,r,s)}catch{}}function h4t(e,t,n,r,s,a,i){const l=r.anchorNode,c=r.focusNode,u=r.anchorOffset,f=r.focusOffset,m=document.activeElement;if(s.has(k2e)&&m!==a||m!==null&&j2e(m))return;if(!Be(t))return void(e!==null&&TT(n,l,c)&&r.removeAllRanges());const p=t.anchor,h=t.focus,g=p.key,y=h.key,x=tp(n,g),v=tp(n,y),b=p.offset,_=h.offset,w=t.format,C=t.style,S=t.isCollapsed();let E=x,k=v,M=!1;if(p.type==="text"){E=hy(x);const A=p.getNode();M=A.getFormat()!==w||A.getStyle()!==C}else Be(e)&&e.anchor.type==="text"&&(M=!0);var j,R,O,D,P;if(h.type==="text"&&(k=hy(v)),E!==null&&k!==null&&(S&&(e===null||M||Be(e)&&(e.format!==w||e.style!==C))&&(j=w,R=C,O=b,D=g,P=performance.now(),i2e=[j,R,O,D,P]),u!==b||f!==_||l!==E||c!==k||r.type==="Range"&&S||(m!==null&&a.contains(m)||a.focus({preventScroll:!0}),p.type==="element"))){if(b2e(r,E,b,k,_),!s.has(_4t)&&t.isCollapsed()&&a!==null&&a===document.activeElement){const A=Be(t)&&t.anchor.type==="element"?E.childNodes[b]||null:r.rangeCount>0?r.getRangeAt(0):null;if(A!==null){let T;if(A instanceof Text){const N=document.createRange();N.selectNode(A),T=N.getBoundingClientRect()}else T=A.getBoundingClientRect();(function(N,L,U){const $=F2e(U),V=HV($);if($===null||V===null)return;let{top:W,bottom:Q}=L,q=0,H=0,K=U;for(;K!==null;){const G=K===$.body;if(G)q=0,H=Mi(N).innerHeight;else{const Y=K.getBoundingClientRect();q=Y.top,H=Y.bottom}let ee=0;if(W<q?ee=-(q-W):Q>H&&(ee=Q-H),ee!==0)if(G)V.scrollBy(0,ee);else{const Y=K.scrollTop;K.scrollTop+=ee;const te=K.scrollTop-Y;W-=te,Q-=te}if(G)break;K=uw(K)}})(n,T,a)}}f7=!0}}function PA(e){let t=e;e.isCollapsed()||t.removeText();const n=rt();Be(n)&&(t=n),Be(t)||$e(161);const r=t.anchor;let s=r.getNode(),a=r.offset;for(;!fd(s);){const i=s;if([s,a]=g4t(s,a),i.is(s))break}return a}function g4t(e,t){const n=e.getParent();if(!n){const s=kr();return sr().append(s),s.select(),[sr(),0]}if(Je(e)){const s=e.splitText(t);if(s.length===0)return[n,e.getIndexWithinParent()];const a=t===0?0:1;return[n,s[0].getIndexWithinParent()+a]}if(!Ae(e)||t===0)return[n,e.getIndexWithinParent()];const r=e.getChildAtIndex(t);if(r){const s=new jp(xc(e.__key,t,"element"),xc(e.__key,t,"element"),0,""),a=e.insertNewAfter(s);a&&a.append(r,...r.getNextSiblings())}return[n,e.getIndexWithinParent()+1]}function Une(e,t,n,r,s="decorators-and-blocks"){if(t==="move"&&r==="character"&&!e.isCollapsed()){const[f,m]=n===e.isBackward()?[e.focus,e.anchor]:[e.anchor,e.focus];return m.set(f.key,f.offset,f.type),!0}const a=Tu(e.focus,n?"previous":"next"),i=r==="lineboundary",l=t==="move";let c=a,u=s==="decorators-and-blocks";if(!H2e(c)){for(const f of c){u=!1;const{origin:m}=f;if(!Bn(m)||m.isIsolated()||(c=f,!i||!m.isInline()))break}if(u)for(const f of JV(a).iterNodeCarets(t==="extend"?"shadowRoot":"root")){if(ac(f))f.origin.isInline()||(c=f);else{if(Ae(f.origin))continue;Bn(f.origin)&&!f.origin.isInline()&&(c=f)}break}}if(c===a)return!1;if(l&&!i&&Bn(c.origin)&&c.origin.isKeyboardSelectable()){const f=v2e();return f.add(c.origin.getKey()),ta(f),!0}return c=zl(c),l&&hb(e.anchor,c),hb(e.focus,c),u||!i}let Cs=null,Ss=null,yo=!1,LA=!1,E2=0;const Bne={characterData:!0,childList:!0,subtree:!0};function lw(){return yo||Cs!==null&&Cs._readOnly}function Ws(){yo&&$e(13)}function _2e(){E2>99&&$e(14)}function bf(){return Cs===null&&$e(195,w2e()),Cs}function Tr(){return Ss===null&&$e(196,w2e()),Ss}function w2e(){let e=0;const t=new Set,n=py.version;if(typeof window<"u")for(const s of document.querySelectorAll("[contenteditable]")){const a=NT(s);if(FV(a))e++;else if(a){let i=String(a.constructor.version||"<0.17.1");i===n&&(i+=" (separately built, likely a bundler configuration issue)"),t.add(i)}}let r=` Detected on the page: ${e} compatible editor(s) with version ${n}`;return t.size&&(r+=` and incompatible editors with versions ${Array.from(t).join(", ")}`),r}function y4t(){return Ss}function $ne(e,t,n){const r=t.__type,s=N2e(e,r);let a=n.get(r);a===void 0&&(a=Array.from(s.transforms),n.set(r,a));const i=a.length;for(let l=0;l<i&&(a[l](t),t.isAttached());l++);}function Vne(e,t){return e!==void 0&&e.__key!==t&&e.isAttached()}function C2e(e,t){if(!t)return;const n=e._updateTags;let r=t;Array.isArray(t)||(r=[t]);for(const s of r)n.add(s)}function x4t(e){return IV(e,Tr()._nodes)}function IV(e,t){const n=e.type,r=t.get(n);r===void 0&&$e(17,n);const s=r.klass;e.type!==s.getType()&&$e(18,s.name);const a=s.importJSON(e),i=e.children;if(Ae(a)&&Array.isArray(i))for(let l=0;l<i.length;l++){const c=IV(i[l],t);a.append(c)}return a}function Wne(e,t,n){const r=Cs,s=yo,a=Ss;Cs=t,yo=!0,Ss=e;try{return n()}finally{Cs=r,yo=s,Ss=a}}function ru(e,t){const n=e._pendingEditorState,r=e._rootElement,s=e._headless||r===null;if(n===null)return;const a=e._editorState,i=a._selection,l=n._selection,c=e._dirtyType!==Xm,u=Cs,f=yo,m=Ss,p=e._updating,h=e._observer;let g=null;if(e._pendingEditorState=null,e._editorState=n,!s&&c&&h!==null){Ss=e,Cs=n,yo=!1,e._updating=!0;try{const S=e._dirtyType,E=e._dirtyElements,k=e._dirtyLeaves;h.disconnect(),g=qTt(a,n,e,S,E,k)}catch(S){if(S instanceof Error&&e._onError(S),LA)throw S;return T2e(e,null,r,n),$Se(e),e._dirtyType=uy,LA=!0,ru(e,a),void(LA=!1)}finally{h.observe(r,Bne),e._updating=p,Cs=u,yo=f,Ss=m}}n._readOnly||(n._readOnly=!0);const y=e._dirtyLeaves,x=e._dirtyElements,v=e._normalizedNodes,b=e._updateTags,_=e._deferred;c&&(e._dirtyType=Xm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements=new Map,e._normalizedNodes=new Set,e._updateTags=new Set),function(S,E){const k=S._decorators;let M=S._pendingDecorators||k;const j=E._nodeMap;let R;for(R in M)j.has(R)||(M===k&&(M=I2e(S)),delete M[R])}(e,n);const w=s?null:vc(Mi(e));if(e._editable&&w!==null&&(c||l===null||l.dirty)&&r!==null&&!b.has(w4t)){Ss=e,Cs=n;try{if(h!==null&&h.disconnect(),c||l===null||l.dirty){const S=e._blockCursorElement;S!==null&&v7(S,e,r),h4t(i,l,e,w,b,r)}(function(S,E,k){let M=S._blockCursorElement;if(Be(k)&&k.isCollapsed()&&k.anchor.type==="element"&&E.contains(document.activeElement)){const j=k.anchor,R=j.getNode(),O=j.offset;let D=!1,P=null;if(O===R.getChildrenSize())DA(R.getChildAtIndex(O-1))&&(D=!0);else{const A=R.getChildAtIndex(O);if(A!==null&&DA(A)){const T=A.getPreviousSibling();(T===null||DA(T))&&(D=!0,P=S.getElementByKey(A.__key))}}if(D){const A=S.getElementByKey(R.__key);return M===null&&(S._blockCursorElement=M=function(T){const N=T.theme,L=document.createElement("div");L.contentEditable="false",L.setAttribute("data-lexical-cursor","true");let U=N.blockCursor;if(U!==void 0){if(typeof U=="string"){const $=OSe(U);U=N.blockCursor=$}U!==void 0&&L.classList.add(...U)}return L}(S._config)),E.style.caretColor="transparent",void(P===null?A.appendChild(M):A.insertBefore(M,P))}}M!==null&&v7(M,S,E)})(e,r,l)}finally{h!==null&&h.observe(r,Bne),Ss=m,Cs=u}}g!==null&&function(S,E,k,M,j){const R=Array.from(S._listeners.mutation),O=R.length;for(let D=0;D<O;D++){const[P,A]=R[D];for(const T of A){const N=E.get(T);N!==void 0&&P(N,{dirtyLeaves:M,prevEditorState:j,updateTags:k})}}}(e,g,b,y,a),Be(l)||l===null||i!==null&&i.is(l)||e.dispatchCommand(KSe,void 0);const C=e._pendingDecorators;C!==null&&(e._decorators=C,e._pendingDecorators=null,G0("decorator",e,!0,C)),function(S,E,k){const M=Kne(E),j=Kne(k);M!==j&&G0("textcontent",S,!0,j)}(e,t||a,n),G0("update",e,!0,{dirtyElements:x,dirtyLeaves:y,editorState:n,mutatedNodes:g,normalizedNodes:v,prevEditorState:t||a,tags:b}),function(S,E){if(S._deferred=[],E.length!==0){const k=S._updating;S._updating=!0;try{for(let M=0;M<E.length;M++)E[M]()}finally{S._updating=k}}}(e,_),function(S){const E=S._updates;if(E.length!==0){const k=E.shift();if(k){const[M,j]=k;MT(S,M,j)}}}(e)}function G0(e,t,n,...r){const s=t._updating;t._updating=n;try{const a=Array.from(t._listeners[e]);for(let i=0;i<a.length;i++)a[i].apply(null,r)}finally{t._updating=s}}function Hne(e,t){const n=e._updates;let r=t||!1;for(;n.length!==0;){const s=n.shift();if(s){const[a,i]=s,l=e._pendingEditorState;let c;i!==void 0&&(c=i.onUpdate,i.skipTransforms&&(r=!0),i.discrete&&(l===null&&$e(191),l._flushSync=!0),c&&e._deferred.push(c),C2e(e,i.tag)),l==null?MT(e,a,i):a()}}return r}function MT(e,t,n){const r=e._updateTags;let s,a=!1,i=!1;n!==void 0&&(s=n.onUpdate,C2e(e,n.tag),a=n.skipTransforms||!1,i=n.discrete||!1),s&&e._deferred.push(s);const l=e._editorState;let c=e._pendingEditorState,u=!1;(c===null||c._readOnly)&&(c=e._pendingEditorState=S2e(c||l),u=!0),c._flushSync=i;const f=Cs,m=yo,p=Ss,h=e._updating;Cs=c,yo=!1,e._updating=!0,Ss=e;const g=e._headless||e.getRootElement()===null;OV(null);try{u&&(g?l._selection!==null&&(c._selection=l._selection.clone()):c._selection=function(b,_){const w=b.getEditorState()._selection,C=vc(Mi(b));return Be(w)||w==null?AV(w,C,b,_):w.clone()}(e,n&&n.event||null));const x=e._compositionKey;t(),a=Hne(e,a),function(b,_){const w=_.getEditorState()._selection,C=b._selection;if(Be(C)){const S=C.anchor,E=C.focus;let k;if(S.type==="text"&&(k=S.getNode(),k.selectionTransform(w,C)),E.type==="text"){const M=E.getNode();k!==M&&M.selectionTransform(w,C)}}}(c,e),e._dirtyType!==Xm&&(a?function(b,_){const w=_._dirtyLeaves,C=b._nodeMap;for(const S of w){const E=C.get(S);Je(E)&&E.isAttached()&&E.isSimpleText()&&!E.isUnmergeable()&&_ne(E)}}(c,e):function(b,_){const w=_._dirtyLeaves,C=_._dirtyElements,S=b._nodeMap,E=yd(),k=new Map;let M=w,j=M.size,R=C,O=R.size;for(;j>0||O>0;){if(j>0){_._dirtyLeaves=new Set;for(const D of M){const P=S.get(D);Je(P)&&P.isAttached()&&P.isSimpleText()&&!P.isUnmergeable()&&_ne(P),P!==void 0&&Vne(P,E)&&$ne(_,P,k),w.add(D)}if(M=_._dirtyLeaves,j=M.size,j>0){E2++;continue}}_._dirtyLeaves=new Set,_._dirtyElements=new Map,R.delete("root")&&R.set("root",!0);for(const D of R){const P=D[0],A=D[1];if(C.set(P,A),!A)continue;const T=S.get(P);T!==void 0&&Vne(T,E)&&$ne(_,T,k)}M=_._dirtyLeaves,j=M.size,R=_._dirtyElements,O=R.size,E2++}_._dirtyLeaves=w,_._dirtyElements=C}(c,e),Hne(e),function(b,_,w,C){const S=b._nodeMap,E=_._nodeMap,k=[];for(const[M]of C){const j=E.get(M);j!==void 0&&(j.isAttached()||(Ae(j)&&FSe(j,M,S,E,k,C),S.has(M)||C.delete(M),k.push(M)))}for(const M of k)E.delete(M);for(const M of w){const j=E.get(M);j===void 0||j.isAttached()||(S.has(M)||w.delete(M),E.delete(M))}}(l,c,e._dirtyLeaves,e._dirtyElements)),x!==e._compositionKey&&(c._flushSync=!0);const v=c._selection;if(Be(v)){const b=c._nodeMap,_=v.anchor.key,w=v.focus.key;b.get(_)!==void 0&&b.get(w)!==void 0||$e(19)}else gu(v)&&v._nodes.size===0&&(c._selection=null)}catch(x){return x instanceof Error&&e._onError(x),e._pendingEditorState=l,e._dirtyType=uy,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),void ru(e)}finally{Cs=f,yo=m,Ss=p,e._updating=h,E2=0}e._dirtyType!==Xm||e._deferred.length>0||function(x,v){const b=v.getEditorState()._selection,_=x._selection;if(_!==null){if(_.dirty||!_.is(b))return!0}else if(b!==null)return!0;return!1}(c,e)?c._flushSync?(c._flushSync=!1,ru(e)):u&&E4t(()=>{ru(e)}):(c._flushSync=!1,u&&(r.clear(),e._deferred=[],e._pendingEditorState=null))}function Io(e,t,n){Ss===e&&n===void 0?t():MT(e,t,n)}class q0{element;before;after;constructor(t,n,r){this.element=t,this.before=n||null,this.after=r||null}withBefore(t){return new q0(this.element,t,this.after)}withAfter(t){return new q0(this.element,this.before,t)}withElement(t){return this.element===t?this:new q0(t,this.before,this.after)}insertChild(t){const n=this.before||this.getManagedLineBreak();return n!==null&&n.parentElement!==this.element&&$e(222),this.element.insertBefore(t,n),this}removeChild(t){return t.parentElement!==this.element&&$e(223),this.element.removeChild(t),this}replaceChild(t,n){return n.parentElement!==this.element&&$e(224),this.element.replaceChild(t,n),this}getFirstChild(){const t=this.after?this.after.nextSibling:this.element.firstChild;return t===this.before||t===this.getManagedLineBreak()?null:t}getManagedLineBreak(){return this.element.__lexicalLineBreak||null}setManagedLineBreak(t){if(t===null)this.removeManagedLineBreak();else{const n=t==="decorator"&&(cb||cy||lb);this.insertManagedLineBreak(n)}}removeManagedLineBreak(){const t=this.getManagedLineBreak();if(t){const n=this.element,r=t.nodeName==="IMG"?t.nextSibling:null;r&&n.removeChild(r),n.removeChild(t),n.__lexicalLineBreak=void 0}}insertManagedLineBreak(t){const n=this.getManagedLineBreak();if(n){if(t===(n.nodeName==="IMG"))return;this.removeManagedLineBreak()}const r=this.element,s=this.before,a=document.createElement("br");if(r.insertBefore(a,s),t){const i=document.createElement("img");i.setAttribute("data-lexical-linebreak","true"),i.style.cssText="display: inline !important; border: 0px !important; margin: 0px !important;",i.alt="",r.insertBefore(i,a),r.__lexicalLineBreak=i}else r.__lexicalLineBreak=a}getFirstChildOffset(){let t=0;for(let n=this.after;n!==null;n=n.previousSibling)t++;return t}resolveChildIndex(t,n,r,s){if(r===this.element){const c=this.getFirstChildOffset();return[t,Math.min(c+t.getChildrenSize(),Math.max(c,s))]}const a=zne(n,r);a.push(s);const i=zne(n,this.element);let l=t.getIndexWithinParent();for(let c=0;c<i.length;c++){const u=a[c],f=i[c];if(u===void 0||u<f)break;if(u>f){l+=1;break}}return[t.getParentOrThrow(),l]}}function zne(e,t){const n=[];let r=t;for(;r!==e&&r!==null;r=r.parentNode){let s=0;for(let a=r.previousSibling;a!==null;a=a.previousSibling)s++;n.push(s)}return r!==e&&$e(225),n.reverse()}class qo extends Ad{__first;__last;__size;__format;__style;__indent;__dir;__textFormat;__textStyle;constructor(t){super(t),this.__first=null,this.__last=null,this.__size=0,this.__format=0,this.__style="",this.__indent=0,this.__dir=null,this.__textFormat=0,this.__textStyle=""}afterCloneFrom(t){super.afterCloneFrom(t),this.__key===t.__key&&(this.__first=t.__first,this.__last=t.__last,this.__size=t.__size),this.__indent=t.__indent,this.__format=t.__format,this.__style=t.__style,this.__dir=t.__dir,this.__textFormat=t.__textFormat,this.__textStyle=t.__textStyle}getFormat(){return this.getLatest().__format}getFormatType(){const t=this.getFormat();return PTt[t]||""}getStyle(){return this.getLatest().__style}getIndent(){return this.getLatest().__indent}getChildren(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n),n=n.getNextSibling();return t}getChildrenKeys(){const t=[];let n=this.getFirstChild();for(;n!==null;)t.push(n.__key),n=n.getNextSibling();return t}getChildrenSize(){return this.getLatest().__size}isEmpty(){return this.getChildrenSize()===0}isDirty(){const t=Tr()._dirtyElements;return t!==null&&t.has(this.__key)}isLastChild(){const t=this.getLatest(),n=this.getParentOrThrow().getLastChild();return n!==null&&n.is(t)}getAllTextNodes(){const t=[];let n=this.getFirstChild();for(;n!==null;){if(Je(n)&&t.push(n),Ae(n)){const r=n.getAllTextNodes();t.push(...r)}n=n.getNextSibling()}return t}getFirstDescendant(){let t=this.getFirstChild();for(;Ae(t);){const n=t.getFirstChild();if(n===null)break;t=n}return t}getLastDescendant(){let t=this.getLastChild();for(;Ae(t);){const n=t.getLastChild();if(n===null)break;t=n}return t}getDescendantByIndex(t){const n=this.getChildren(),r=n.length;if(t>=r){const a=n[r-1];return Ae(a)&&a.getLastDescendant()||a||null}const s=n[t];return Ae(s)&&s.getFirstDescendant()||s||null}getFirstChild(){const t=this.getLatest().__first;return t===null?null:Es(t)}getFirstChildOrThrow(){const t=this.getFirstChild();return t===null&&$e(45,this.__key),t}getLastChild(){const t=this.getLatest().__last;return t===null?null:Es(t)}getLastChildOrThrow(){const t=this.getLastChild();return t===null&&$e(96,this.__key),t}getChildAtIndex(t){const n=this.getChildrenSize();let r,s;if(t<n/2){for(r=this.getFirstChild(),s=0;r!==null&&s<=t;){if(s===t)return r;r=r.getNextSibling(),s++}return null}for(r=this.getLastChild(),s=n-1;r!==null&&s>=t;){if(s===t)return r;r=r.getPreviousSibling(),s--}return null}getTextContent(){let t="";const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContent(),Ae(a)&&s!==r-1&&!a.isInline()&&(t+=Mu)}return t}getTextContentSize(){let t=0;const n=this.getChildren(),r=n.length;for(let s=0;s<r;s++){const a=n[s];t+=a.getTextContentSize(),Ae(a)&&s!==r-1&&!a.isInline()&&(t+=Mu.length)}return t}getDirection(){return this.getLatest().__dir}getTextFormat(){return this.getLatest().__textFormat}hasFormat(t){if(t!==""){const n=mne[t];return!!(this.getFormat()&n)}return!1}hasTextFormat(t){const n=Zm[t];return!!(this.getTextFormat()&n)}getFormatFlags(t,n){return WM(this.getLatest().__textFormat,t,n)}getTextStyle(){return this.getLatest().__textStyle}select(t,n){Ws();const r=rt();let s=t,a=n;const i=this.getChildrenSize();if(!this.canBeEmpty()){if(t===0&&n===0){const c=this.getFirstChild();if(Je(c)||Ae(c))return c.select(0,0)}else if(!(t!==void 0&&t!==i||n!==void 0&&n!==i)){const c=this.getLastChild();if(Je(c)||Ae(c))return c.select()}}s===void 0&&(s=i),a===void 0&&(a=i);const l=this.__key;return Be(r)?(r.anchor.set(l,s,"element"),r.focus.set(l,a,"element"),r.dirty=!0,r):y2e(l,s,l,a,"element","element")}selectStart(){const t=this.getFirstDescendant();return t?t.selectStart():this.select()}selectEnd(){const t=this.getLastDescendant();return t?t.selectEnd():this.select()}clear(){const t=this.getWritable();return this.getChildren().forEach(n=>n.remove()),t}append(...t){return this.splice(this.getChildrenSize(),0,t)}setDirection(t){const n=this.getWritable();return n.__dir=t,n}setFormat(t){return this.getWritable().__format=t!==""?mne[t]:0,this}setStyle(t){return this.getWritable().__style=t||"",this}setTextFormat(t){const n=this.getWritable();return n.__textFormat=t,n}setTextStyle(t){const n=this.getWritable();return n.__textStyle=t,n}setIndent(t){return this.getWritable().__indent=t,this}splice(t,n,r){const s=r.length,a=this.getChildrenSize(),i=this.getWritable();t+n<=a||$e(226,String(t),String(n),String(a));const l=i.__key,c=[],u=[],f=this.getChildAtIndex(t+n);let m=null,p=a-n+s;if(t!==0)if(t===a)m=this.getLastChild();else{const g=this.getChildAtIndex(t);g!==null&&(m=g.getPreviousSibling())}if(n>0){let g=m===null?this.getFirstChild():m.getNextSibling();for(let y=0;y<n;y++){g===null&&$e(100);const x=g.getNextSibling(),v=g.__key;km(g.getWritable()),u.push(v),g=x}}let h=m;for(let g=0;g<s;g++){const y=r[g];h!==null&&y.is(h)&&(m=h=h.getPreviousSibling());const x=y.getWritable();x.__parent===l&&p--,km(x);const v=y.__key;if(h===null)i.__first=v,x.__prev=null;else{const b=h.getWritable();b.__next=v,x.__prev=b.__key}y.__key===l&&$e(76),x.__parent=l,c.push(v),h=y}if(t+n===a)h!==null&&(h.getWritable().__next=null,i.__last=h.__key);else if(f!==null){const g=f.getWritable();if(h!==null){const y=h.getWritable();g.__prev=h.__key,y.__next=f.__key}else g.__prev=null}if(i.__size=p,u.length){const g=rt();if(Be(g)){const y=new Set(u),x=new Set(c),{anchor:v,focus:b}=g;Gne(v,y,x)&&VM(v,v.getNode(),this,m,f),Gne(b,y,x)&&VM(b,b.getNode(),this,m,f),p!==0||this.canBeEmpty()||ul(this)||this.remove()}}return i}getDOMSlot(t){return new q0(t)}exportDOM(t){const{element:n}=super.exportDOM(t);if(Jr(n)){const r=this.getIndent();r>0&&(n.style.paddingInlineStart=40*r+"px");const s=this.getDirection();s&&(n.dir=s)}return{element:n}}exportJSON(){const t={children:[],direction:this.getDirection(),format:this.getFormatType(),indent:this.getIndent(),...super.exportJSON()},n=this.getTextFormat(),r=this.getTextStyle();return n!==0&&(t.textFormat=n),r!==""&&(t.textStyle=r),t}updateFromJSON(t){return super.updateFromJSON(t).setFormat(t.format).setIndent(t.indent).setDirection(t.direction).setTextFormat(t.textFormat||0).setTextStyle(t.textStyle||"")}insertNewAfter(t,n){return null}canIndent(){return!0}collapseAtStart(t){return!1}excludeFromCopy(t){return!1}canReplaceWith(t){return!0}canInsertAfter(t){return!0}canBeEmpty(){return!0}canInsertTextBefore(){return!0}canInsertTextAfter(){return!0}isInline(){return!1}isShadowRoot(){return!1}canMergeWith(t){return!1}extractWithChild(t,n,r){return!1}canMergeWhenEmpty(){return!1}reconcileObservedMutation(t,n){const r=this.getDOMSlot(t);let s=r.getFirstChild();for(let a=this.getFirstChild();a;a=a.getNextSibling()){const i=n.getElementByKey(a.getKey());i!==null&&(s==null?(r.insertChild(i),s=i):s!==i&&r.replaceChild(i,s),s=s.nextSibling)}}}function Ae(e){return e instanceof qo}function Gne(e,t,n){let r=e.getNode();for(;r;){const s=r.__key;if(t.has(s)&&!n.has(s))return!0;r=r.getParent()}return!1}class kT extends Ad{decorate(t,n){return null}isIsolated(){return!1}isInline(){return!0}isKeyboardSelectable(){return!0}}function Bn(e){return e instanceof kT}class Ap extends qo{__cachedText;static getType(){return"root"}static clone(){return new Ap}constructor(){super("root"),this.__cachedText=null}getTopLevelElementOrThrow(){$e(51)}getTextContent(){const t=this.__cachedText;return!lw()&&Tr()._dirtyType!==Xm||t===null?super.getTextContent():t}remove(){$e(52)}replace(t){$e(53)}insertBefore(t){$e(54)}insertAfter(t){$e(55)}updateDOM(t,n){return!1}splice(t,n,r){for(const s of r)Ae(s)||Bn(s)||$e(282);return super.splice(t,n,r)}static importJSON(t){return sr().updateFromJSON(t)}collapseAtStart(){return!0}}function ps(e){return e instanceof Ap}function S2e(e){return new cw(new Map(e._nodeMap))}function RV(){return new cw(new Map([["root",new Ap]]))}function E2e(e){const t=e.exportJSON(),n=e.constructor;if(t.type!==n.getType()&&$e(130,n.name),Ae(e)){const r=t.children;Array.isArray(r)||$e(59,n.name);const s=e.getChildren();for(let a=0;a<s.length;a++){const i=E2e(s[a]);r.push(i)}}return t}function v4t(e){return e instanceof cw}class cw{_nodeMap;_selection;_flushSync;_readOnly;constructor(t,n){this._nodeMap=t,this._selection=n||null,this._flushSync=!1,this._readOnly=!1}isEmpty(){return this._nodeMap.size===1&&this._selection===null}read(t,n){return Wne(n&&n.editor||null,this,t)}clone(t){const n=new cw(this._nodeMap,t===void 0?this._selection:t);return n._readOnly=!0,n}toJSON(){return Wne(null,this,()=>({root:E2e(sr())}))}}const b4t="historic",lcn="history-push",K0="history-merge",M2e="paste",k2e="collaboration",_4t="skip-scroll-into-view",w4t="skip-dom-selection";class PV extends qo{static getType(){return"artificial"}createDOM(t){return document.createElement("div")}}class Ip extends qo{static getType(){return"paragraph"}static clone(t){return new Ip(t.__key)}createDOM(t){const n=document.createElement("p"),r=xg(t.theme,"paragraph");return r!==void 0&&n.classList.add(...r),n}updateDOM(t,n,r){return!1}static importDOM(){return{p:t=>({conversion:C4t,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Jr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r)}return{element:n}}static importJSON(t){return kr().updateFromJSON(t)}exportJSON(){return{...super.exportJSON(),textFormat:this.getTextFormat(),textStyle:this.getTextStyle()}}insertNewAfter(t,n){const r=kr();r.setTextFormat(t.format),r.setTextStyle(t.style);const s=this.getDirection();return r.setDirection(s),r.setFormat(this.getFormatType()),r.setStyle(this.getStyle()),this.insertAfter(r,n),r}collapseAtStart(){const t=this.getChildren();if(t.length===0||Je(t[0])&&t[0].getTextContent().trim()===""){if(this.getNextSibling()!==null)return this.selectNext(),this.remove(),!0;if(this.getPreviousSibling()!==null)return this.selectPrevious(),this.remove(),!0}return!1}}function C4t(e){const t=kr();return e.style&&(t.setFormat(e.style.textAlign),qV(e,t)),{node:t}}function kr(){return Di(new Ip)}function Id(e){return e instanceof Ip}const vs=0,mb=1,Hc=2;function T2e(e,t,n,r){const s=e._keyToDOMMap;s.clear(),e._editorState=RV(),e._pendingEditorState=r,e._compositionKey=null,e._dirtyType=Xm,e._cloneNotNeeded.clear(),e._dirtyLeaves=new Set,e._dirtyElements.clear(),e._normalizedNodes=new Set,e._updateTags=new Set,e._updates=[],e._blockCursorElement=null;const a=e._observer;a!==null&&(a.disconnect(),e._observer=null),t!==null&&(t.textContent=""),n!==null&&(n.textContent="",s.set("root",n))}function LV(e){const t=e||{},n=y4t(),r=t.theme||{},s=e===void 0?n:t.parentEditor||null,a=t.disableEvents||!1,i=RV(),l=t.namespace||(s!==null?s._config.namespace:L2e()),c=t.editorState,u=[Ap,Rc,Lx,Ox,Ip,PV,...t.nodes||[]],{onError:f,html:m}=t,p=t.editable===void 0||t.editable;let h;if(e===void 0&&n!==null)h=n._nodes;else{h=new Map;for(let y=0;y<u.length;y++){let x=u[y],v=null,b=null;if(typeof x!="function"){const E=x;x=E.replace,v=E.with,b=E.withKlass||null}const{ownNodeConfig:_}=KV(x),w=x.getType(),C=x.transform(),S=new Set;_&&_.$transform&&S.add(_.$transform),C!==null&&S.add(C),h.set(w,{exportDOM:m&&m.export?m.export.get(x):void 0,klass:x,replace:v,replaceWithKlass:b,sharedNodeState:VTt(u[y]),transforms:S})}}const g=new py(i,s,h,{disableEvents:a,namespace:l,theme:r},f||console.error,function(y,x){const v=new Map,b=new Set,_=w=>{Object.keys(w).forEach(C=>{let S=v.get(C);S===void 0&&(S=[],v.set(C,S)),S.push(w[C])})};return y.forEach(w=>{const C=w.klass.importDOM;if(C==null||b.has(C))return;b.add(C);const S=C.call(w.klass);S!==null&&_(S)}),x&&_(x),v}(h,m?m.import:void 0),p,e);return c!==void 0&&(g._pendingEditorState=c,g._dirtyType=uy),g}class py{static version;_headless;_parentEditor;_rootElement;_editorState;_pendingEditorState;_compositionKey;_deferred;_keyToDOMMap;_updates;_updating;_listeners;_commands;_nodes;_decorators;_pendingDecorators;_config;_dirtyType;_cloneNotNeeded;_dirtyLeaves;_dirtyElements;_normalizedNodes;_updateTags;_observer;_key;_onError;_htmlConversions;_window;_editable;_blockCursorElement;_createEditorArgs;constructor(t,n,r,s,a,i,l,c){this._createEditorArgs=c,this._parentEditor=n,this._rootElement=null,this._editorState=t,this._pendingEditorState=null,this._compositionKey=null,this._deferred=[],this._keyToDOMMap=new Map,this._updates=[],this._updating=!1,this._listeners={decorator:new Set,editable:new Set,mutation:new Map,root:new Set,textcontent:new Set,update:new Set},this._commands=new Map,this._config=s,this._nodes=r,this._decorators={},this._pendingDecorators=null,this._dirtyType=Xm,this._cloneNotNeeded=new Set,this._dirtyLeaves=new Set,this._dirtyElements=new Map,this._normalizedNodes=new Set,this._updateTags=new Set,this._observer=null,this._key=L2e(),this._onError=a,this._htmlConversions=i,this._editable=l,this._headless=n!==null&&n._headless,this._window=null,this._blockCursorElement=null}isComposing(){return this._compositionKey!=null}registerUpdateListener(t){const n=this._listeners.update;return n.add(t),()=>{n.delete(t)}}registerEditableListener(t){const n=this._listeners.editable;return n.add(t),()=>{n.delete(t)}}registerDecoratorListener(t){const n=this._listeners.decorator;return n.add(t),()=>{n.delete(t)}}registerTextContentListener(t){const n=this._listeners.textcontent;return n.add(t),()=>{n.delete(t)}}registerRootListener(t){const n=this._listeners.root;return t(this._rootElement,null),n.add(t),()=>{t(null,this._rootElement),n.delete(t)}}registerCommand(t,n,r){r===void 0&&$e(35);const s=this._commands;s.has(t)||s.set(t,[new Set,new Set,new Set,new Set,new Set]);const a=s.get(t);a===void 0&&$e(36,String(t));const i=a[r];return i.add(n),()=>{i.delete(n),a.every(l=>l.size===0)&&s.delete(t)}}registerMutationListener(t,n,r){const s=this.resolveRegisteredNodeAfterReplacements(this.getRegisteredNode(t)).klass,a=this._listeners.mutation;let i=a.get(n);i===void 0&&(i=new Set,a.set(n,i)),i.add(s);const l=r&&r.skipInitialization;return l!==void 0&&l||this.initializeMutationListener(n,s),()=>{i.delete(s),i.size===0&&a.delete(n)}}getRegisteredNode(t){const n=this._nodes.get(t.getType());return n===void 0&&$e(37,t.name),n}resolveRegisteredNodeAfterReplacements(t){for(;t.replaceWithKlass;)t=this.getRegisteredNode(t.replaceWithKlass);return t}initializeMutationListener(t,n){const r=this._editorState,s=tre(r).get(n.getType());if(!s)return;const a=new Map;for(const i of s.keys())a.set(i,"created");a.size>0&&t(a,{dirtyLeaves:new Set,prevEditorState:r,updateTags:new Set(["registerMutationListener"])})}registerNodeTransformToKlass(t,n){const r=this.getRegisteredNode(t);return r.transforms.add(n),r}registerNodeTransform(t,n){const r=this.registerNodeTransformToKlass(t,n),s=[r],a=r.replaceWithKlass;if(a!=null){const i=this.registerNodeTransformToKlass(a,n);s.push(i)}return function(i,l){const c=tre(i.getEditorState()),u=[];for(const f of l){const m=c.get(f);m&&u.push(m)}u.length!==0&&i.update(()=>{for(const f of u)for(const m of f.keys()){const p=Es(m);p&&p.markDirty()}},i._pendingEditorState===null?{tag:K0}:void 0)}(this,s.map(i=>i.klass.getType())),()=>{s.forEach(i=>i.transforms.delete(n))}}hasNode(t){return this._nodes.has(t.getType())}hasNodes(t){return t.every(this.hasNode.bind(this))}dispatchCommand(t,n){return ut(this,t,n)}getDecorators(){return this._decorators}getRootElement(){return this._rootElement}getKey(){return this._key}setRootElement(t){const n=this._rootElement;if(t!==n){const r=xg(this._config.theme,"root"),s=this._pendingEditorState||this._editorState;if(this._rootElement=t,T2e(this,n,t,s),n!==null&&(this._config.disableEvents||o4t(n),r!=null&&n.classList.remove(...r)),t!==null){const a=HV(t),i=t.style;i.userSelect="text",i.whiteSpace="pre-wrap",i.wordBreak="break-word",t.setAttribute("data-lexical-editor","true"),this._window=a,this._dirtyType=uy,$Se(this),this._updateTags.add(K0),ru(this),this._config.disableEvents||function(l,c){const u=l.ownerDocument,f=BM.get(u);(f===void 0||f<1)&&u.addEventListener("selectionchange",f2e),BM.set(u,(f||0)+1),l.__lexicalEditor=c;const m=d2e(l);for(let p=0;p<d7.length;p++){const[h,g]=d7[p],y=typeof g=="function"?x=>{kne(x)||(Mne(x),(c.isEditable()||h==="click")&&g(x,c))}:x=>{if(kne(x))return;Mne(x);const v=c.isEditable();switch(h){case"cut":return v&&ut(c,NV,x);case"copy":return ut(c,TV,x);case"paste":return v&&ut(c,aw,x);case"dragstart":return v&&ut(c,s2e,x);case"dragover":return v&&ut(c,t4t,x);case"dragend":return v&&ut(c,n4t,x);case"focus":return v&&ut(c,r4t,x);case"blur":return v&&ut(c,s4t,x);case"drop":return v&&ut(c,r2e,x)}};l.addEventListener(h,y),m.push(()=>{l.removeEventListener(h,y)})}}(t,this),r!=null&&t.classList.add(...r)}else this._window=null,this._updateTags.add(K0),ru(this);G0("root",this,!1,t,n)}}getElementByKey(t){return this._keyToDOMMap.get(t)||null}getEditorState(){return this._editorState}setEditorState(t,n){t.isEmpty()&&$e(38);let r=t;r._readOnly&&(r=S2e(t),r._selection=t._selection?t._selection.clone():null),BSe(this);const s=this._pendingEditorState,a=this._updateTags,i=n!==void 0?n.tag:null;s===null||s.isEmpty()||(i!=null&&a.add(i),ru(this)),this._pendingEditorState=r,this._dirtyType=uy,this._dirtyElements.set("root",!1),this._compositionKey=null,i!=null&&a.add(i),this._updating||ru(this)}parseEditorState(t,n){return function(r,s,a){const i=RV(),l=Cs,c=yo,u=Ss,f=s._dirtyElements,m=s._dirtyLeaves,p=s._cloneNotNeeded,h=s._dirtyType;s._dirtyElements=new Map,s._dirtyLeaves=new Set,s._cloneNotNeeded=new Set,s._dirtyType=0,Cs=i,yo=!1,Ss=s,OV(null);try{const g=s._nodes;IV(r.root,g),a&&a(),i._readOnly=!0}catch(g){g instanceof Error&&s._onError(g)}finally{s._dirtyElements=f,s._dirtyLeaves=m,s._cloneNotNeeded=p,s._dirtyType=h,Cs=l,yo=c,Ss=u}return i}(typeof t=="string"?JSON.parse(t):t,this,n)}read(t){return ru(this),this.getEditorState().read(t,{editor:this})}update(t,n){(function(r,s,a){r._updating?r._updates.push([s,a]):MT(r,s,a)})(this,t,n)}focus(t,n={}){const r=this._rootElement;r!==null&&(r.setAttribute("autocapitalize","off"),Io(this,()=>{const s=rt(),a=sr();s!==null?s.dirty||ta(s.clone()):a.getChildrenSize()!==0&&(n.defaultSelection==="rootStart"?a.selectStart():a.selectEnd()),M2("focus"),A4t(()=>{r.removeAttribute("autocapitalize"),t&&t()})}),this._pendingEditorState===null&&r.removeAttribute("autocapitalize"))}blur(){const t=this._rootElement;t!==null&&t.blur();const n=vc(this._window);n!==null&&n.removeAllRanges()}isEditable(){return this._editable}setEditable(t){this._editable!==t&&(this._editable=t,G0("editable",this,!0,t))}toJSON(){return{editorState:this._editorState.toJSON()}}}py.version="0.36.1+prod.esm";let y7=null;function OV(e){y7=e}let S4t=1;function N2e(e,t){const n=DV(e,t);return n===void 0&&$e(30,t),n}function DV(e,t){return e._nodes.get(t)}const E4t=typeof queueMicrotask=="function"?queueMicrotask:e=>{Promise.resolve().then(e)};function qne(e){return Bn(gy(e))}function j2e(e){const t=document.activeElement;if(!Jr(t))return!1;const n=t.nodeName;return Bn(gy(e))&&(n==="INPUT"||n==="TEXTAREA"||t.contentEditable==="true"&&NT(t)==null)}function TT(e,t,n){const r=e.getRootElement();try{return r!==null&&r.contains(t)&&r.contains(n)&&t!==null&&!j2e(t)&&UV(t)===e}catch{return!1}}function FV(e){return e instanceof py}function UV(e){let t=e;for(;t!=null;){const n=NT(t);if(FV(n))return n;t=uw(t)}return null}function NT(e){return e?e.__lexicalEditor:null}function Mm(e){return ST(e)||e.isToken()}function Yc(e){return Mm(e)||e.isSegmented()}function Gu(e){return Dx(e)&&e.nodeType===ETt}function M4t(e){return Dx(e)&&e.nodeType===MTt}function hy(e){let t=e;for(;t!=null;){if(Gu(t))return t;t=t.firstChild}return null}function WM(e,t,n){const r=Zm[t];if(n!==null&&(e&r)==(n&r))return e;let s=e^r;return t==="subscript"?s&=-65:t==="superscript"?s&=-33:t==="lowercase"?(s&=-513,s&=-1025):t==="uppercase"?(s&=-257,s&=-1025):t==="capitalize"&&(s&=-257,s&=-513),s}function k4t(e,t){const n=function(){const i=y7;return y7=null,i}();if((t=t||n&&n.__key)!=null)return void(e.__key=t);Ws(),_2e();const r=Tr(),s=bf(),a=""+S4t++;s._nodeMap.set(a,e),Ae(e)?r._dirtyElements.set(a,!0):r._dirtyLeaves.add(a),r._cloneNotNeeded.add(a),r._dirtyType=DSe,e.__key=a}function km(e){const t=e.getParent();if(t!==null){const n=e.getWritable(),r=t.getWritable(),s=e.getPreviousSibling(),a=e.getNextSibling(),i=a!==null?a.__key:null,l=s!==null?s.__key:null,c=s!==null?s.getWritable():null,u=a!==null?a.getWritable():null;s===null&&(r.__first=i),a===null&&(r.__last=l),c!==null&&(c.__next=i),u!==null&&(u.__prev=l),n.__prev=null,n.__next=null,n.__parent=null,r.__size--}}function HM(e){_2e();const t=e.getLatest(),n=t.__parent,r=bf(),s=Tr(),a=r._nodeMap,i=s._dirtyElements;n!==null&&function(c,u,f){let m=c;for(;m!==null;){if(f.has(m))return;const p=u.get(m);if(p===void 0)break;f.set(m,!1),m=p.__parent}}(n,a,i);const l=t.__key;s._dirtyType=DSe,Ae(e)?i.set(l,!0):s._dirtyLeaves.add(l)}function Hs(e){Ws();const t=Tr(),n=t._compositionKey;if(e!==n){if(t._compositionKey=e,n!==null){const r=Es(n);r!==null&&r.getWritable()}if(e!==null){const r=Es(e);r!==null&&r.getWritable()}}}function yd(){return lw()?null:Tr()._compositionKey}function Es(e,t){const n=(t||bf())._nodeMap.get(e);return n===void 0?null:n}function A2e(e,t){const n=jT(e,Tr());return n!==void 0?Es(n,t):null}function jT(e,t){return e[`__lexicalKey_${t._key}`]}function gy(e,t){let n=e;for(;n!=null;){const r=A2e(n,t);if(r!==null)return r;n=uw(n)}return null}function I2e(e){const t=e._decorators,n=Object.assign({},t);return e._pendingDecorators=n,n}function Kne(e){return e.read(()=>sr().getTextContent())}function sr(){return R2e(bf())}function R2e(e){return e._nodeMap.get("root")}function ta(e){Ws();const t=bf();e!==null&&(e.dirty=!0,e.setCachedNodes(null)),t._selection=e}function zh(e){const t=Tr(),n=function(r,s){let a=r;for(;a!=null;){const i=jT(a,s);if(i!==void 0)return i;a=uw(a)}return null}(e,t);return n===null?e===t.getRootElement()?Es("root"):null:Es(n)}function P2e(e){return/[\uD800-\uDBFF][\uDC00-\uDFFF]/g.test(e)}function BV(e){const t=[];let n=e;for(;n!==null;)t.push(n),n=n._parentEditor;return t}function L2e(){return Math.random().toString(36).replace(/[^a-z]+/g,"").substring(0,5)}function O2e(e){return Gu(e)?e.nodeValue:null}function $V(e,t,n){const r=vc(Mi(t));if(r===null)return;const s=r.anchorNode;let{anchorOffset:a,focusOffset:i}=r;if(s!==null){let l=O2e(s);const c=gy(s);if(l!==null&&Je(c)){if(l===wT&&n){const u=n.length;l=n,a=u,i=u}l!==null&&VV(c,l,a,i,e)}}}function VV(e,t,n,r,s){let a=e;if(a.isAttached()&&(s||!a.isDirty())){const i=a.isComposing();let l=t;(i||s)&&t[t.length-1]===wT&&(l=t.slice(0,-1));const c=a.getTextContent();if(s||l!==c){if(l===""){if(Hs(null),lb||cy||cb)a.remove();else{const y=Tr();setTimeout(()=>{y.update(()=>{a.isAttached()&&a.remove()})},20)}return}const u=a.getParent(),f=iw(),m=a.getTextContentSize(),p=yd(),h=a.getKey();if(a.isToken()||p!==null&&h===p&&!i||Be(f)&&(u!==null&&!u.canInsertTextBefore()&&f.anchor.offset===0||f.anchor.key===e.__key&&f.anchor.offset===0&&!a.canInsertTextBefore()&&!i||f.focus.key===e.__key&&f.focus.offset===m&&!a.canInsertTextAfter()&&!i))return void a.markDirty();const g=rt();if(!Be(g)||n===null||r===null)return void Yne(a,l,g);if(g.setTextNodeRange(a,n,a,r),a.isSegmented()){const y=Zn(a.getTextContent());a.replace(y),a=y}Yne(a,l,g)}}}function Yne(e,t,n){if(e.setTextContent(t),Be(n)){const r=e.getKey();for(const s of["anchor","focus"]){const a=n[s];a.type==="text"&&a.key===r&&(a.offset=Pd(e,a.offset,"clamp"))}}}function lS(e,t,n){const r=t[n]||!1;return r==="any"||r===e[n]}function T4t(e,t){return lS(e,t,"altKey")&&lS(e,t,"ctrlKey")&&lS(e,t,"shiftKey")&&lS(e,t,"metaKey")}function Gn(e,t,n){return T4t(e,n)&&e.key.toLowerCase()===t.toLowerCase()}const Gc={ctrlKey:!Gi,metaKey:Gi},Qne={altKey:Gi,ctrlKey:!Gi};function Xne(e){return e.key==="Backspace"}function Zne(e){return Gn(e,"a",Gc)}function N4t(e){const t=sr();if(Be(e)){const n=e.anchor,r=e.focus,s=n.getNode().getTopLevelElementOrThrow().getParentOrThrow();return n.set(s.getKey(),0,"element"),r.set(s.getKey(),s.getChildrenSize(),"element"),ub(e),e}{const n=t.select(0,t.getChildrenSize());return ta(ub(n)),n}}function xg(e,t){e.__lexicalClassNameCache===void 0&&(e.__lexicalClassNameCache={});const n=e.__lexicalClassNameCache,r=n[t];if(r!==void 0)return r;const s=e[t];if(typeof s=="string"){const a=OSe(s);return n[t]=a,a}return s}function WV(e,t,n,r,s){if(n.size===0)return;const a=r.__type,i=r.__key,l=t.get(a);l===void 0&&$e(33,a);const c=l.klass;let u=e.get(c);u===void 0&&(u=new Map,e.set(c,u));const f=u.get(i),m=f==="destroyed"&&s==="created";(f===void 0||m)&&u.set(i,m?"updated":s)}function Jne(e,t,n){const r=e.getParent();let s=n,a=e;return r!==null&&(n===0&&(s=a.getIndexWithinParent(),a=r)),a.getChildAtIndex(s-1)}function j4t(e,t){const n=e.offset;if(e.type==="element")return Jne(e.getNode(),t,n);{const r=e.getNode();if(n===0){const s=r.getPreviousSibling();return s===null?Jne(r.getParentOrThrow(),t,r.getIndexWithinParent()+0):s}}return null}function D2e(e){const t=Mi(e).event,n=t&&t.inputType;return n==="insertFromPaste"||n==="insertFromPasteAsQuotation"}function ut(e,t,n){return function(r,s,a){const i=BV(r);for(let l=4;l>=0;l--)for(let c=0;c<i.length;c++){const u=i[c],f=u._commands.get(s);if(f!==void 0){const m=f[l];if(m!==void 0){const p=Array.from(m),h=p.length;let g=!1;if(Io(u,()=>{for(let y=0;y<h;y++)if(p[y](a,r))return void(g=!0)}),g)return g}}}return!1}(e,t,n)}function AT(e){return!ps(e)&&!e.isLastChild()&&!e.isInline()}function tp(e,t){const n=e._keyToDOMMap.get(t);return n===void 0&&$e(75,t),n}function uw(e){const t=e.assignedSlot||e.parentElement;return b7(t)?t.host:t}function F2e(e){return M4t(e)?e:Jr(e)?e.ownerDocument:null}function M2(e){Ws(),Tr()._updateTags.add(e)}function A4t(e){Ws(),Tr()._deferred.push(e)}function x7(e,t){let n=e.getParent();for(;n!==null;){if(n.is(t))return!0;n=n.getParent()}return!1}function HV(e){const t=F2e(e);return t?t.defaultView:null}function Mi(e){const t=e._window;return t===null&&$e(78),t}function I4t(e){let t=e.getParentOrThrow();for(;t!==null;){if(ul(t))return t;t=t.getParentOrThrow()}return t}function ul(e){return ps(e)||Ae(e)&&e.isShadowRoot()}function Di(e){const t=Tr(),n=e.getType(),r=DV(t,n);r===void 0&&$e(200,e.constructor.name,n);const{replace:s,replaceWithKlass:a}=r;if(s!==null){const i=s(e),l=i.constructor;return a!==null?i instanceof a||$e(201,a.name,a.getType(),l.name,l.getType(),e.constructor.name,n):i instanceof e.constructor&&l!==e.constructor||$e(202,l.name,l.getType(),e.constructor.name,n),i.__key===e.__key&&$e(203,e.constructor.name,n,l.name,l.getType()),i}return e}function OA(e,t){!ps(e.getParent())||Ae(t)||Bn(t)||$e(99)}function R4t(e){const t=Es(e);return t===null&&$e(63,e),t}function DA(e){return(Bn(e)||Ae(e)&&!e.canBeEmpty())&&!e.isInline()}function v7(e,t,n){n.style.removeProperty("caret-color"),t._blockCursorElement=null;const r=e.parentElement;r!==null&&r.removeChild(e)}function vc(e){return bl?(e||window).getSelection():null}function P4t(e){const t=HV(e);return t?t.getSelection():null}function zV(e){return Jr(e)&&e.tagName==="A"}function Jr(e){return Dx(e)&&e.nodeType===STt}function Dx(e){return typeof e=="object"&&e!==null&&"nodeType"in e&&typeof e.nodeType=="number"}function b7(e){return Dx(e)&&e.nodeType===kTt}function _7(e){const t=new RegExp(/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|mark|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var|#text)$/,"i");return e.nodeName.match(t)!==null}function zM(e){const t=new RegExp(/^(address|article|aside|blockquote|canvas|dd|div|dl|dt|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hr|li|main|nav|noscript|ol|p|pre|section|table|td|tfoot|ul|video)$/,"i");return e.nodeName.match(t)!==null}function fd(e){if(Bn(e)&&!e.isInline())return!0;if(!Ae(e)||ul(e))return!1;const t=e.getFirstChild(),n=t===null||sc(t)||Je(t)||t.isInline();return!e.isInline()&&e.canBeEmpty()!==!1&&n}function GV(){return Tr()}const ere=new WeakMap,L4t=new Map;function tre(e){if(!e._readOnly&&e.isEmpty())return L4t;e._readOnly||$e(192);let t=ere.get(e);return t||(t=function(n){const r=new Map;for(const[s,a]of n._nodeMap){const i=a.__type;let l=r.get(i);l||(l=new Map,r.set(i,l)),l.set(s,a)}return r}(e),ere.set(e,t)),t}function U2e(e){const t=e.constructor.clone(e);return t.afterCloneFrom(e),t}function qV(e,t){const n=parseInt(e.style.paddingInlineStart,10)||0,r=Math.round(n/40);t.setIndent(r)}function O4t(e){return e.__lexicalUnmanaged===!0}function Av(e,t){return function(n,r){return Object.prototype.hasOwnProperty.call(n,r)}(e,t)&&e[t]!==Ad[t]}function KV(e){const t=pne in e.prototype?e.prototype[pne]():void 0,n=function(i){if(!(i===Ad||i.prototype instanceof Ad)){let l="<unknown>",c="<unknown>";try{l=i.getType()}catch{}try{py.version&&(c=JSON.parse(py.version))}catch{}$e(290,i.name,l,c)}return i===kT||i===qo||i===Ad}(e),r=!n&&Av(e,"getType")?e.getType():void 0;let s,a=r;if(t)if(r)s=t[r];else for(const[i,l]of Object.entries(t))a=i,s=l;if(!n&&a&&(Av(e,"getType")||(e.getType=()=>a),Av(e,"clone")||(e.clone=i=>(OV(i),new e)),Av(e,"importJSON")||(e.importJSON=s&&s.$importJSON||(i=>new e().updateFromJSON(i))),!Av(e,"importDOM")&&s)){const{importDOM:i}=s;i&&(e.importDOM=()=>i)}return{ownNodeConfig:s,ownNodeType:a}}function B2e(e){const t=GV();return Ws(),new(t.resolveRegisteredNodeAfterReplacements(t.getRegisteredNode(e))).klass}const xi=(e,t)=>{let n=e;for(;n!=null&&!ps(n);){if(t(n))return n;n=n.getParent()}return null},D4t={next:"previous",previous:"next"};class YV{origin;constructor(t){this.origin=t}[Symbol.iterator](){return $2e({hasNext:yy,initial:this.getAdjacentCaret(),map:t=>t,step:t=>t.getAdjacentCaret()})}getAdjacentCaret(){return Zs(this.getNodeAtCaret(),this.direction)}getSiblingCaret(){return Zs(this.origin,this.direction)}remove(){const t=this.getNodeAtCaret();return t&&t.remove(),this}replaceOrInsert(t,n){const r=this.getNodeAtCaret();return t.is(this.origin)||t.is(r)||(r===null?this.insert(t):r.replace(t,n)),this}splice(t,n,r="next"){const s=r===this.direction?n:Array.from(n).reverse();let a=this;const i=this.getParentAtCaret(),l=new Map;for(let c=a.getAdjacentCaret();c!==null&&l.size<t;c=c.getAdjacentCaret()){const u=c.origin.getWritable();l.set(u.getKey(),u)}for(const c of s){if(l.size>0){const u=a.getNodeAtCaret();if(u){if(l.delete(u.getKey()),l.delete(c.getKey()),!(u.is(c)||a.origin.is(c))){const f=c.getParent();f&&f.is(i)&&c.remove(),u.replace(c)}}else u===null&&$e(263,Array.from(l).join(" "))}else a.insert(c);a=Zs(c,this.direction)}for(const c of l.values())c.remove();return this}}class pb extends YV{type="child";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:ku(t,this.direction)}getParentCaret(t="root"){return Zs(QV(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Fx(this.direction);return Zs(this.getNodeAtCaret(),t)||ku(this.origin,t)}getParentAtCaret(){return this.origin}getChildCaret(){return this}isSameNodeCaret(t){return t instanceof pb&&this.direction===t.direction&&this.origin.is(t.origin)}isSamePointCaret(t){return this.isSameNodeCaret(t)}}const F4t={root:ps,shadowRoot:ul};function Fx(e){return D4t[e]}function QV(e,t="root"){return F4t[t](e)?null:e}class np extends YV{type="sibling";getLatest(){const t=this.origin.getLatest();return t===this.origin?this:Zs(t,this.direction)}getSiblingCaret(){return this}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return Ae(this.origin)?ku(this.origin,this.direction):null}getParentCaret(t="root"){return Zs(QV(this.getParentAtCaret(),t),this.direction)}getFlipped(){const t=Fx(this.direction);return Zs(this.getNodeAtCaret(),t)||ku(this.origin.getParentOrThrow(),t)}isSamePointCaret(t){return t instanceof np&&this.direction===t.direction&&this.origin.is(t.origin)}isSameNodeCaret(t){return(t instanceof np||t instanceof rp)&&this.direction===t.direction&&this.origin.is(t.origin)}}class rp extends YV{type="text";offset;constructor(t,n){super(t),this.offset=n}getLatest(){const t=this.origin.getLatest();return t===this.origin?this:sp(t,this.direction,this.offset)}getParentAtCaret(){return this.origin.getParent()}getChildCaret(){return null}getParentCaret(t="root"){return Zs(QV(this.getParentAtCaret(),t),this.direction)}getFlipped(){return sp(this.origin,Fx(this.direction),this.offset)}isSamePointCaret(t){return t instanceof rp&&this.direction===t.direction&&this.origin.is(t.origin)&&this.offset===t.offset}isSameNodeCaret(t){return(t instanceof np||t instanceof rp)&&this.direction===t.direction&&this.origin.is(t.origin)}getSiblingCaret(){return Zs(this.origin,this.direction)}}function Rd(e){return e instanceof rp}function yy(e){return e instanceof np}function ac(e){return e instanceof pb}const U4t={next:class extends rp{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends rp{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},B4t={next:class extends np{direction="next";getNodeAtCaret(){return this.origin.getNextSibling()}insert(e){return this.origin.insertAfter(e),this}},previous:class extends np{direction="previous";getNodeAtCaret(){return this.origin.getPreviousSibling()}insert(e){return this.origin.insertBefore(e),this}}},$4t={next:class extends pb{direction="next";getNodeAtCaret(){return this.origin.getFirstChild()}insert(e){return this.origin.splice(0,0,[e]),this}},previous:class extends pb{direction="previous";getNodeAtCaret(){return this.origin.getLastChild()}insert(e){return this.origin.splice(this.origin.getChildrenSize(),0,[e]),this}}};function Zs(e,t){return e?new B4t[t](e):null}function sp(e,t,n){return e?new U4t[t](e,Pd(e,n)):null}function Pd(e,t,n="error"){const r=e.getTextContentSize();let s=t==="next"?r:t==="previous"?0:t;return(s<0||s>r)&&(n!=="clamp"&&PSe(284,String(t),String(r),e.getKey()),s=s<0?0:r),s}function nre(e,t){return new W4t(e,t)}function ku(e,t){return Ae(e)?new $4t[t](e):null}function V4t(e){return e&&e.getChildCaret()||e}function XV(e){return e&&V4t(e.getAdjacentCaret())}class ZV{type="node-caret-range";direction;anchor;focus;constructor(t,n,r){this.anchor=t,this.focus=n,this.direction=r}getLatest(){const t=this.anchor.getLatest(),n=this.focus.getLatest();return t===this.anchor&&n===this.focus?this:new ZV(t,n,this.direction)}isCollapsed(){return this.anchor.isSamePointCaret(this.focus)}getTextSlices(){const t=s=>{const a=this[s].getLatest();return Rd(a)?function(i,l){const{direction:c,origin:u}=i,f=Pd(u,l==="focus"?Fx(c):c);return nre(i,f-i.offset)}(a,s):null},n=t("anchor"),r=t("focus");if(n&&r){const{caret:s}=n,{caret:a}=r;if(s.isSameNodeCaret(a))return[nre(s,a.offset-s.offset),null]}return[n,r]}iterNodeCarets(t="root"){const n=Rd(this.anchor)?this.anchor.getSiblingCaret():this.anchor.getLatest(),r=this.focus.getLatest(),s=Rd(r),a=i=>i.isSameNodeCaret(r)?null:XV(i)||i.getParentCaret(t);return $2e({hasNext:i=>i!==null&&!(s&&r.isSameNodeCaret(i)),initial:n.isSameNodeCaret(r)?null:a(n),map:i=>i,step:a})}[Symbol.iterator](){return this.iterNodeCarets("root")}}class W4t{type="slice";caret;distance;constructor(t,n){this.caret=t,this.distance=n}getSliceIndices(){const{distance:t,caret:{offset:n}}=this,r=n+t;return r<n?[r,n]:[n,r]}getTextContent(){const[t,n]=this.getSliceIndices();return this.caret.origin.getTextContent().slice(t,n)}getTextContentSize(){return Math.abs(this.distance)}removeTextSlice(){const{caret:{origin:t,direction:n}}=this,[r,s]=this.getSliceIndices(),a=t.getTextContent();return sp(t.setTextContent(a.slice(0,r)+a.slice(s)),n,r)}}function JV(e){return Xd(e,Zs(sr(),e.direction))}function H4t(e){return Xd(e,e)}function Xd(e,t){return e.direction!==t.direction&&$e(265),new ZV(e,t,e.direction)}function $2e(e){const{initial:t,hasNext:n,step:r,map:s}=e;let a=t;return{[Symbol.iterator](){return this},next(){if(!n(a))return{done:!0,value:void 0};const i={done:!1,value:s(a)};return a=r(a),i}}}function V2e(e,t){const n=k2(e.origin,t.origin);switch(n===null&&$e(275,e.origin.getKey(),t.origin.getKey()),n.type){case"same":{const r=e.type==="text",s=t.type==="text";return r&&s?function(a,i){return Math.sign(a-i)}(e.offset,t.offset):e.type===t.type?0:r?-1:s?1:e.type==="child"?-1:1}case"ancestor":return e.type==="child"?-1:1;case"descendant":return t.type==="child"?1:-1;case"branch":return W2e(n)}}function W2e(e){const{a:t,b:n}=e,r=t.__key,s=n.__key;let a=t,i=n;for(;a&&i;a=a.getNextSibling(),i=i.getNextSibling()){if(a.__key===s)return-1;if(i.__key===r)return 1}return a===null?1:-1}function cS(e,t){return t.is(e)}function rre(e){return Ae(e)?[e.getLatest(),null]:[e.getParent(),e.getLatest()]}function k2(e,t){if(e.is(t))return{commonAncestor:e,type:"same"};const n=new Map;for(let[r,s]=rre(e);r;s=r,r=r.getParent())n.set(r,s);for(let[r,s]=rre(t);r;s=r,r=r.getParent()){const a=n.get(r);if(a!==void 0)return a===null?(cS(e,r)||$e(276),{commonAncestor:r,type:"ancestor"}):s===null?(cS(t,r)||$e(277),{commonAncestor:r,type:"descendant"}):((Ae(a)||cS(e,a))&&(Ae(s)||cS(t,s))&&r.is(a.getParent())&&r.is(s.getParent())||$e(278),{a,b:s,commonAncestor:r,type:"branch"})}return null}function Tu(e,t){const{type:n,key:r,offset:s}=e,a=R4t(e.key);return n==="text"?(Je(a)||$e(266,a.getType(),r),sp(a,t,s)):(Ae(a)||$e(267,a.getType(),r),q4t(a,e.offset,t))}function hb(e,t){const{origin:n,direction:r}=t,s=r==="next";Rd(t)?e.set(n.getKey(),t.offset,"text"):yy(t)?Je(n)?e.set(n.getKey(),Pd(n,r),"text"):e.set(n.getParentOrThrow().getKey(),n.getIndexWithinParent()+(s?1:0),"element"):(ac(t)&&Ae(n)||$e(268),e.set(n.getKey(),s?0:n.getChildrenSize(),"element"))}function z4t(e){const t=rt(),n=Be(t)?t:x2e();return T2(n,e),ta(n),n}function T2(e,t){hb(e.anchor,t.anchor),hb(e.focus,t.focus)}function sre(e){const{anchor:t,focus:n}=e,r=Tu(t,"next"),s=Tu(n,"next"),a=V2e(r,s)<=0?"next":"previous";return Xd(xy(r,a),xy(s,a))}function eW(e){const{direction:t,origin:n}=e,r=Zs(n,Fx(t)).getNodeAtCaret();return r?Zs(r,t):ku(n.getParentOrThrow(),t)}function are(e,t="root"){const n=[e];for(let r=ac(e)?e.getParentCaret(t):e.getSiblingCaret();r!==null;r=r.getParentCaret(t))n.push(eW(r));return n}function FA(e){return!!e&&e.origin.isAttached()}function G4t(e,t="removeEmptySlices"){if(e.isCollapsed())return e;const n="root",r="next";let s=t;const a=z2e(e,r),i=are(a.anchor,n),l=are(a.focus.getFlipped(),n),c=new Set,u=[];for(const g of a.iterNodeCarets(n))if(ac(g))c.add(g.origin.getKey());else if(yy(g)){const{origin:y}=g;Ae(y)&&!c.has(y.getKey())||u.push(y)}for(const g of u)g.remove();for(const g of a.getTextSlices()){if(!g)continue;const{origin:y}=g.caret,x=y.getTextContentSize(),v=eW(Zs(y,r)),b=y.getMode();if(Math.abs(g.distance)===x&&s==="removeEmptySlices"||b==="token"&&g.distance!==0)v.remove();else if(g.distance!==0){s="removeEmptySlices";let _=g.removeTextSlice();const w=g.caret.origin;if(b==="segmented"){const C=_.origin,S=Zn(C.getTextContent()).setStyle(C.getStyle()).setFormat(C.getFormat());v.replaceOrInsert(S),_=sp(S,r,_.offset)}w.is(i[0].origin)&&(i[0]=_),w.is(l[0].origin)&&(l[0]=_.getFlipped())}}let f,m;for(const g of i)if(FA(g)){f=zl(g);break}for(const g of l)if(FA(g)){m=zl(g);break}const p=function(g,y,x){if(!g||!y)return null;const v=g.getParentAtCaret(),b=y.getParentAtCaret();if(!v||!b)return null;const _=v.getParents().reverse();_.push(v);const w=b.getParents().reverse();w.push(b);const C=Math.min(_.length,w.length);let S;for(S=0;S<C&&_[S]===w[S];S++);const E=(j,R)=>{let O;for(let D=S;D<j.length;D++){const P=j[D];if(ul(P))return;!O&&R(P)&&(O=P)}return O},k=E(_,fd),M=k&&E(w,j=>x.has(j.getKey())&&fd(j));return k&&M?[k,M]:null}(f,m,c);if(p){const[g,y]=p;ku(g,"previous").splice(0,y.getChildren()),y.remove()}const h=[f,m,...i,...l].find(FA);if(h)return H4t(xy(zl(h),e.direction));$e(269,JSON.stringify(i.map(g=>g.origin.__key)))}function zl(e){const t=function(s){let a=s;for(;ac(a);){const i=XV(a);if(!ac(i))break;a=i}return a}(e.getLatest()),{direction:n}=t;if(Je(t.origin))return Rd(t)?t:sp(t.origin,n,n);const r=t.getAdjacentCaret();return yy(r)&&Je(r.origin)?sp(r.origin,n,Fx(n)):t}function H2e(e){return Rd(e)&&e.offset!==Pd(e.origin,e.direction)}function xy(e,t){return e.direction===t?e:e.getFlipped()}function z2e(e,t){return e.direction===t?e:Xd(xy(e.focus,t),xy(e.anchor,t))}function q4t(e,t,n){let r=ku(e,"next");for(let s=0;s<t;s++){const a=r.getAdjacentCaret();if(a===null)break;r=a}return xy(r,n)}function ccn(e){return e}function ucn(...e){return e}function dcn(e){return e}function K4t(e,t){if(!t||e===t)return e;for(const n in t)if(e[n]!==t[n])return{...e,...t};return e}const w7=new Map;function G2e(e){const t={};if(!e)return t;const n=e.split(";");for(const r of n)if(r!==""){const[s,a]=r.split(/:([^]+)/);s&&a&&(t[s.trim()]=a.trim())}return t}function ore(e){let t=w7.get(e);return t===void 0&&(t=G2e(e),w7.set(e,t)),t}function q2e(e){const t=GV().getElementByKey(e.getKey());if(t===null)return null;const n=t.ownerDocument.defaultView;return n===null?null:n.getComputedStyle(t)}function Y4t(e){return q2e(ps(e)?e:e.getParentOrThrow())}function Q4t(e,t){const n=e.getStartEndPoints();if(t.isSelected(e)&&!Yc(t)&&n!==null){const[r,s]=n,a=e.isBackward(),i=r.getNode(),l=s.getNode(),c=t.is(i),u=t.is(l);if(c||u){const[f,m]=h7(e),p=i.is(l),h=t.is(a?l:i),g=t.is(a?i:l);let y,x=0;p?(x=f>m?m:f,y=f>m?f:m):h?(x=a?m:f,y=void 0):g&&(x=0,y=a?f:m),t.__text=t.__text.slice(x,y)}}return t}function X4t(e){const t=e.getStyle(),n=G2e(t);w7.set(t,n)}function K2e(e){const t=Y2e(e);return t!==null&&t.writingMode==="vertical-rl"}function Y2e(e){const t=e.anchor.getNode();return Ae(t)?q2e(t):Y4t(t)}function ire(e,t){let n=K2e(e)?!t:t;Q2e(e)&&(n=!n);const r=Tu(e.focus,n?"previous":"next");if(H2e(r))return!1;for(const s of JV(r)){if(ac(s))return!s.origin.isInline();if(!Ae(s.origin)){if(Bn(s.origin))return!0;break}}return!1}function Z4t(e,t,n,r){e.modify(t?"extend":"move",n,r)}function Q2e(e){const t=Y2e(e);return t!==null&&t.direction==="rtl"}function lre(e,t,n){const r=Q2e(e);let s;s=K2e(e)||r?!n:n,Z4t(e,t,s,"character")}function J4t(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const tW=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,eNt=tW&&"documentMode"in document?document.documentMode:null;!(!tW||!("InputEvent"in window)||eNt)&&"getTargetRanges"in new window.InputEvent("input");const tNt=tW&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream;function X2e(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}function bc(...e){return()=>{for(let t=e.length-1;t>=0;t--)e[t]();e.length=0}}const nNt=tNt;function _c(e,...t){const n=X2e(...t);n.length>0&&e.classList.add(...n)}function nW(e,...t){const n=X2e(...t);n.length>0&&e.classList.remove(...n)}function rNt(e){return e?e.getAdjacentCaret():null}function sNt(e){const t=xi(e,n=>Ae(n)&&!n.isInline());return Ae(t)||J4t(4,e.__key),t}function gb(e,t){return e!==null&&Object.getPrototypeOf(e).constructor.name===t.name}function aNt(e,t){const n=t.body?t.body.childNodes:[];let r=[];const s=[];for(let a=0;a<n.length;a++){const i=n[a];if(!J2e.has(i.nodeName)){const l=eEe(i,e,s,!1);l!==null&&(r=r.concat(l))}}return function(a){for(const i of a)i.getNextSibling()instanceof PV&&i.insertAfter(Go());for(const i of a){const l=i.getChildren();for(const c of l)i.insertBefore(c);i.remove()}}(s),r}function oNt(e,t){if(typeof document>"u"||typeof window>"u"&&global.window===void 0)throw new Error("To use $generateHtmlFromNodes in headless mode please initialize a headless browser implementation such as JSDom before calling this function.");const n=document.createElement("div"),r=sr().getChildren();for(let s=0;s<r.length;s++)Z2e(e,r[s],n,t);return n.innerHTML}function Z2e(e,t,n,r=null){let s=r===null||t.isSelected(r);const a=Ae(t)&&t.excludeFromCopy("html");let i=t;if(r!==null){let h=U2e(t);h=Je(h)&&r!==null?Q4t(r,h):h,i=h}const l=Ae(i)?i.getChildren():[],c=DV(e,i.getType());let u;u=c&&c.exportDOM!==void 0?c.exportDOM(e,i):i.exportDOM(e);const{element:f,after:m}=u;if(!f)return!1;const p=document.createDocumentFragment();for(let h=0;h<l.length;h++){const g=l[h],y=Z2e(e,g,p,r);!s&&Ae(t)&&y&&t.extractWithChild(g,r,"html")&&(s=!0)}if(s&&!a){if((Jr(f)||b7(f))&&f.append(p),n.append(f),m){const h=m.call(i,f);h&&(b7(f)?f.replaceChildren(h):f.replaceWith(h))}}else n.append(p);return s}const J2e=new Set(["STYLE","SCRIPT"]);function eEe(e,t,n,r,s=new Map,a){let i=[];if(J2e.has(e.nodeName))return i;let l=null;const c=function(g,y){const{nodeName:x}=g,v=y._htmlConversions.get(x.toLowerCase());let b=null;if(v!==void 0)for(const _ of v){const w=_(g);w!==null&&(b===null||(b.priority||0)<=(w.priority||0))&&(b=w)}return b!==null?b.conversion:null}(e,t),u=c?c(e):null;let f=null;if(u!==null){f=u.after;const g=u.node;if(l=Array.isArray(g)?g[g.length-1]:g,l!==null){for(const[,y]of s)if(l=y(l,a),!l)break;l&&i.push(...Array.isArray(g)?g:[l])}u.forChild!=null&&s.set(e.nodeName,u.forChild)}const m=e.childNodes;let p=[];const h=(l==null||!ul(l))&&(l!=null&&g7(l)||r);for(let g=0;g<m.length;g++)p.push(...eEe(m[g],t,n,h,new Map(s),l));return f!=null&&(p=f(p)),zM(e)&&(p=iNt(e,p,h?()=>{const g=new PV;return n.push(g),g}:kr)),l==null?p.length>0?i=i.concat(p):zM(e)&&function(g){return g.nextSibling==null||g.previousSibling==null?!1:_7(g.nextSibling)&&_7(g.previousSibling)}(e)&&(i=i.concat(Go())):Ae(l)&&l.append(...p),i}function iNt(e,t,n){const r=e.style.textAlign,s=[];let a=[];for(let i=0;i<t.length;i++){const l=t[i];if(g7(l))r&&!l.getFormat()&&l.setFormat(r),s.push(l);else if(a.push(l),i===t.length-1||i<t.length-1&&g7(t[i+1])){const c=n();c.setFormat(r),c.append(...a),s.push(c),a=[]}}return s}function lNt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function cNt(e,t=rt()){return t==null&&lNt(166),Be(t)&&t.isCollapsed()||t.getNodes().length===0?"":oNt(e,t)}function cre(e,t){const n=e.getData("text/plain")||e.getData("text/uri-list");n!=null&&t.insertRawText(n)}function ure(e,t,n){const r=e.getData("application/x-lexical-editor");if(r)try{const l=JSON.parse(r);if(l.namespace===n._config.namespace&&Array.isArray(l.nodes))return C7(n,uNt(l.nodes),t)}catch{}const s=e.getData("text/html"),a=e.getData("text/plain");if(s&&a!==s)try{const l=new DOMParser().parseFromString(function(c){return window.trustedTypes&&window.trustedTypes.createPolicy?window.trustedTypes.createPolicy("lexical",{createHTML:u=>u}).createHTML(c):c}(s),"text/html");return C7(n,aNt(n,l),t)}catch{}const i=a||e.getData("text/uri-list");if(i!=null)if(Be(t)){const l=i.split(/(\r?\n|\t)/);l[l.length-1]===""&&l.pop();for(let c=0;c<l.length;c++){const u=rt();if(Be(u)){const f=l[c];f===`
`||f===`\r
`?u.insertParagraph():f==="	"?u.insertNodes([ow()]):u.insertText(f)}}}else t.insertRawText(i)}function C7(e,t,n){e.dispatchCommand(KTt,{nodes:t,selection:n})||(n.insertNodes(t),function(r){if(Be(r)&&r.isCollapsed()){const s=r.anchor;let a=null;const i=Tu(s,"previous");if(i)if(Rd(i))a=i.origin;else{const l=Xd(i,ku(sr(),"next").getFlipped());for(const c of l){if(Je(c.origin)){a=c.origin;break}if(Ae(c.origin)&&!c.origin.isInline())break}}if(a&&Je(a)){const l=a.getFormat(),c=a.getStyle();r.format===l&&r.style===c||(r.format=l,r.style=c,r.dirty=!0)}}}(n))}function uNt(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n],s=x4t(r);Je(s)&&X4t(s),t.push(s)}return t}const dNt=Symbol.for("preact-signals");function IT(){if(Ld>1)return void Ld--;let e,t=!1;for(;Y0!==void 0;){let n=Y0;for(Y0=void 0,S7++;n!==void 0;){const r=n.o;if(n.o=void 0,n.f&=-3,!(8&n.f)&&tEe(n))try{n.c()}catch(s){t||(e=s,t=!0)}n=r}}if(S7=0,Ld--,t)throw e}function fcn(e){if(Ld>0)return e();Ld++;try{return e()}finally{IT()}}let Vn,Y0;function dre(e){const t=Vn;Vn=void 0;try{return e()}finally{Vn=t}}let Ld=0,S7=0,N2=0;function fre(e){if(Vn===void 0)return;let t=e.n;return t===void 0||t.t!==Vn?(t={i:0,S:e,p:Vn.s,n:void 0,t:Vn,e:void 0,x:void 0,r:t},Vn.s!==void 0&&(Vn.s.n=t),Vn.s=t,e.n=t,32&Vn.f&&e.S(t),t):t.i===-1?(t.i=0,t.n!==void 0&&(t.n.p=t.p,t.p!==void 0&&(t.p.n=t.n),t.p=Vn.s,t.n=void 0,Vn.s.n=t,Vn.s=t),t):void 0}function ka(e,t){this.v=e,this.i=0,this.n=void 0,this.t=void 0,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function fNt(e,t){return new ka(e,t)}function tEe(e){for(let t=e.s;t!==void 0;t=t.n)if(t.S.i!==t.i||!t.S.h()||t.S.i!==t.i)return!0;return!1}function mre(e){for(let t=e.s;t!==void 0;t=t.n){const n=t.S.n;if(n!==void 0&&(t.r=n),t.S.n=t,t.i=-1,t.n===void 0){e.s=t;break}}}function nEe(e){let t,n=e.s;for(;n!==void 0;){const r=n.p;n.i===-1?(n.S.U(n),r!==void 0&&(r.n=n.n),n.n!==void 0&&(n.n.p=r)):t=n,n.S.n=n.r,n.r!==void 0&&(n.r=void 0),n=r}e.s=t}function oh(e,t){ka.call(this,void 0),this.x=e,this.s=void 0,this.g=N2-1,this.f=4,this.W=t?.watched,this.Z=t?.unwatched,this.name=t?.name}function rEe(e){const t=e.u;if(e.u=void 0,typeof t=="function"){Ld++;const n=Vn;Vn=void 0;try{t()}catch(r){throw e.f&=-2,e.f|=8,rW(e),r}finally{Vn=n,IT()}}}function rW(e){for(let t=e.s;t!==void 0;t=t.n)t.S.U(t);e.x=void 0,e.s=void 0,rEe(e)}function mNt(e){if(Vn!==this)throw new Error("Out-of-order effect");nEe(this),Vn=e,this.f&=-2,8&this.f&&rW(this),IT()}function Nh(e,t){this.x=e,this.u=void 0,this.s=void 0,this.o=void 0,this.f=32,this.name=t?.name}function E7(e,t){const n=new Nh(e,t);try{n.c()}catch(s){throw n.d(),s}const r=n.d.bind(n);return r[Symbol.dispose]=r,r}function pNt(e,t={}){const n={};for(const r in e){const s=t[r],a=fNt(s===void 0?e[r]:s);n[r]=a}return n}ka.prototype.brand=dNt,ka.prototype.h=function(){return!0},ka.prototype.S=function(e){const t=this.t;t!==e&&e.e===void 0&&(e.x=t,this.t=e,t!==void 0?t.e=e:dre(()=>{var n;(n=this.W)==null||n.call(this)}))},ka.prototype.U=function(e){if(this.t!==void 0){const t=e.e,n=e.x;t!==void 0&&(t.x=n,e.e=void 0),n!==void 0&&(n.e=t,e.x=void 0),e===this.t&&(this.t=n,n===void 0&&dre(()=>{var r;(r=this.Z)==null||r.call(this)}))}},ka.prototype.subscribe=function(e){return E7(()=>{const t=this.value,n=Vn;Vn=void 0;try{e(t)}finally{Vn=n}},{name:"sub"})},ka.prototype.valueOf=function(){return this.value},ka.prototype.toString=function(){return this.value+""},ka.prototype.toJSON=function(){return this.value},ka.prototype.peek=function(){const e=Vn;Vn=void 0;try{return this.value}finally{Vn=e}},Object.defineProperty(ka.prototype,"value",{get(){const e=fre(this);return e!==void 0&&(e.i=this.i),this.v},set(e){if(e!==this.v){if(S7>100)throw new Error("Cycle detected");this.v=e,this.i++,N2++,Ld++;try{for(let t=this.t;t!==void 0;t=t.x)t.t.N()}finally{IT()}}}}),oh.prototype=new ka,oh.prototype.h=function(){if(this.f&=-3,1&this.f)return!1;if((36&this.f)==32||(this.f&=-5,this.g===N2))return!0;if(this.g=N2,this.f|=1,this.i>0&&!tEe(this))return this.f&=-2,!0;const e=Vn;try{mre(this),Vn=this;const t=this.x();(16&this.f||this.v!==t||this.i===0)&&(this.v=t,this.f&=-17,this.i++)}catch(t){this.v=t,this.f|=16,this.i++}return Vn=e,nEe(this),this.f&=-2,!0},oh.prototype.S=function(e){if(this.t===void 0){this.f|=36;for(let t=this.s;t!==void 0;t=t.n)t.S.S(t)}ka.prototype.S.call(this,e)},oh.prototype.U=function(e){if(this.t!==void 0&&(ka.prototype.U.call(this,e),this.t===void 0)){this.f&=-33;for(let t=this.s;t!==void 0;t=t.n)t.S.U(t)}},oh.prototype.N=function(){if(!(2&this.f)){this.f|=6;for(let e=this.t;e!==void 0;e=e.x)e.t.N()}},Object.defineProperty(oh.prototype,"value",{get(){if(1&this.f)throw new Error("Cycle detected");const e=fre(this);if(this.h(),e!==void 0&&(e.i=this.i),16&this.f)throw this.v;return this.v}}),Nh.prototype.c=function(){const e=this.S();try{if(8&this.f||this.x===void 0)return;const t=this.x();typeof t=="function"&&(this.u=t)}finally{e()}},Nh.prototype.S=function(){if(1&this.f)throw new Error("Cycle detected");this.f|=1,this.f&=-9,rEe(this),mre(this),Ld++;const e=Vn;return Vn=this,mNt.bind(this,e)},Nh.prototype.N=function(){2&this.f||(this.f|=2,this.o=Y0,Y0=this)},Nh.prototype.d=function(){this.f|=8,1&this.f||rW(this)},Nh.prototype.dispose=function(){this.d()};function tr(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function sEe(e,t){if(e&&t&&!Array.isArray(t)&&typeof e=="object"&&typeof t=="object"){const n=e,r=t;for(const s in r)n[s]=sEe(n[s],r[s]);return e}return t}const qn={unmarked:0,temporary:1,permanent:2,configured:3,initialized:4,built:5,registered:6,afterRegistration:7};function UA(e){return e.id===qn.unmarked}function aEe(e){return e.id===qn.permanent}function hNt(e){return function(t){return t.id===qn.temporary}(e)||tr(305,String(e.id),String(qn.temporary)),Object.assign(e,{id:qn.permanent})}const gNt=new Set;let yNt=class{builder;configs;_dependency;_peerNameSet;extension;state;_signal;constructor(t,n){this.builder=t,this.extension=n,this.configs=new Set,this.state={id:qn.unmarked}}mergeConfigs(){let t=this.extension.config||{};const n=this.extension.mergeConfig?this.extension.mergeConfig.bind(this.extension):K4t;for(const r of this.configs)t=n(t,r);return t}init(t){const n=this.state;aEe(n)||tr(306,String(n.id));const r={getDependency:this.getInitDependency.bind(this),getDirectDependentNames:this.getDirectDependentNames.bind(this),getPeer:this.getInitPeer.bind(this),getPeerNameSet:this.getPeerNameSet.bind(this)},s={...r,getDependency:this.getDependency.bind(this),getInitResult:this.getInitResult.bind(this),getPeer:this.getPeer.bind(this)},a=function(l,c,u){return Object.assign(l,{config:c,id:qn.configured,registerState:u})}(n,this.mergeConfigs(),r);let i;this.state=a,this.extension.init&&(i=this.extension.init(t,a.config,r)),this.state=function(l,c,u){return Object.assign(l,{id:qn.initialized,initResult:c,registerState:u})}(a,i,s)}build(t){const n=this.state;let r;n.id!==qn.initialized&&tr(307,String(n.id),String(qn.built)),this.extension.build&&(r=this.extension.build(t,n.config,n.registerState));const s={...n.registerState,getOutput:()=>r,getSignal:this.getSignal.bind(this)};this.state=function(a,i,l){return Object.assign(a,{id:qn.built,output:i,registerState:l})}(n,r,s)}register(t,n){this._signal=n;const r=this.state;r.id!==qn.built&&tr(308,String(r.id),String(qn.built));const s=this.extension.register&&this.extension.register(t,r.config,r.registerState);return this.state=function(a){return Object.assign(a,{id:qn.registered})}(r),()=>{const a=this.state;a.id!==qn.afterRegistration&&tr(309,String(r.id),String(qn.afterRegistration)),this.state=function(i){return Object.assign(i,{id:qn.built})}(a),s&&s()}}afterRegistration(t){const n=this.state;let r;return n.id!==qn.registered&&tr(310,String(n.id),String(qn.registered)),this.extension.afterRegistration&&(r=this.extension.afterRegistration(t,n.config,n.registerState)),this.state=function(s){return Object.assign(s,{id:qn.afterRegistration})}(n),r}getSignal(){return this._signal===void 0&&tr(311),this._signal}getInitResult(){this.extension.init===void 0&&tr(312,this.extension.name);const t=this.state;return function(n){return n.id>=qn.initialized}(t)||tr(313,String(t.id),String(qn.initialized)),t.initResult}getInitPeer(t){const n=this.builder.extensionNameMap.get(t);return n?n.getExtensionInitDependency():void 0}getExtensionInitDependency(){const t=this.state;return function(n){return n.id>=qn.configured}(t)||tr(314,String(t.id),String(qn.configured)),{config:t.config}}getPeer(t){const n=this.builder.extensionNameMap.get(t);return n?n.getExtensionDependency():void 0}getInitDependency(t){const n=this.builder.getExtensionRep(t);return n===void 0&&tr(315,this.extension.name,t.name),n.getExtensionInitDependency()}getDependency(t){const n=this.builder.getExtensionRep(t);return n===void 0&&tr(315,this.extension.name,t.name),n.getExtensionDependency()}getState(){const t=this.state;return function(n){return n.id>=qn.afterRegistration}(t)||tr(316,String(t.id),String(qn.afterRegistration)),t}getDirectDependentNames(){return this.builder.incomingEdges.get(this.extension.name)||gNt}getPeerNameSet(){let t=this._peerNameSet;return t||(t=new Set((this.extension.peerDependencies||[]).map(([n])=>n)),this._peerNameSet=t),t}getExtensionDependency(){if(!this._dependency){const t=this.state;(function(n){return n.id>=qn.built})(t)||tr(317,this.extension.name),this._dependency={config:t.config,init:t.initResult,output:t.output}}return this._dependency}};const pre={tag:K0};function xNt(){const e=sr();e.isEmpty()&&e.append(kr())}const vNt={config:{setOptions:pre,updateOptions:pre},init:({$initialEditorState:e=xNt})=>({$initialEditorState:e,initialized:!1}),afterRegistration(e,{updateOptions:t,setOptions:n},r){const s=r.getInitResult();if(!s.initialized){s.initialized=!0;const{$initialEditorState:a}=s;if(v4t(a))e.setEditorState(a,n);else if(typeof a=="function")e.update(()=>{a(e)},t);else if(a&&(typeof a=="string"||typeof a=="object")){const i=e.parseEditorState(a);e.setEditorState(i,n)}}return()=>{}},name:"@lexical/extension/InitialState",nodes:[Ap,Rc,Lx,Ox,Ip]},hre=Symbol.for("@lexical/extension/LexicalBuilder");function gre(){}function bNt(e){throw e}function uS(e){return Array.isArray(e)?e:[e]}const BA="0.36.1+prod.esm";let oEe=class j2{roots;extensionNameMap;outgoingConfigEdges;incomingEdges;conflicts;_sortedExtensionReps;PACKAGE_VERSION;constructor(t){this.outgoingConfigEdges=new Map,this.incomingEdges=new Map,this.extensionNameMap=new Map,this.conflicts=new Map,this.PACKAGE_VERSION=BA,this.roots=t;for(const n of t)this.addExtension(n)}static fromExtensions(t){const n=[uS(vNt)];for(const r of t)n.push(uS(r));return new j2(n)}static maybeFromEditor(t){const n=t[hre];return n&&(n.PACKAGE_VERSION!==BA&&tr(292,n.PACKAGE_VERSION,BA),n instanceof j2||tr(293)),n}static fromEditor(t){const n=j2.maybeFromEditor(t);return n===void 0&&tr(294),n}constructEditor(){const{$initialEditorState:t,onError:n,...r}=this.buildCreateEditorArgs(),s=Object.assign(LV({...r,...n?{onError:a=>{n(a,s)}}:{}}),{[hre]:this});for(const a of this.sortedExtensionReps())a.build(s);return s}buildEditor(){let t=gre;function n(){try{t()}finally{t=gre}}const r=Object.assign(this.constructEditor(),{dispose:n,[Symbol.dispose]:n});return t=bc(this.registerEditor(r),()=>r.setRootElement(null)),r}hasExtensionByName(t){return this.extensionNameMap.has(t)}getExtensionRep(t){const n=this.extensionNameMap.get(t.name);if(n)return n.extension!==t&&tr(295,t.name),n}addEdge(t,n,r){const s=this.outgoingConfigEdges.get(t);s?s.set(n,r):this.outgoingConfigEdges.set(t,new Map([[n,r]]));const a=this.incomingEdges.get(n);a?a.add(t):this.incomingEdges.set(n,new Set([t]))}addExtension(t){this._sortedExtensionReps!==void 0&&tr(296);const n=uS(t),[r]=n;typeof r.name!="string"&&tr(297,typeof r.name);let s=this.extensionNameMap.get(r.name);if(s!==void 0&&s.extension!==r&&tr(298,r.name),!s){s=new yNt(this,r),this.extensionNameMap.set(r.name,s);const a=this.conflicts.get(r.name);typeof a=="string"&&tr(299,r.name,a);for(const i of r.conflictsWith||[])this.extensionNameMap.has(i)&&tr(299,r.name,i),this.conflicts.set(i,r.name);for(const i of r.dependencies||[]){const l=uS(i);this.addEdge(r.name,l[0].name,l.slice(1)),this.addExtension(l)}for(const[i,l]of r.peerDependencies||[])this.addEdge(r.name,i,l?[l]:[])}}sortedExtensionReps(){if(this._sortedExtensionReps)return this._sortedExtensionReps;const t=[],n=(r,s)=>{let a=r.state;if(aEe(a))return;const i=r.extension.name;var l;UA(a)||tr(300,i,s||"[unknown]"),UA(l=a)||tr(304,String(l.id),String(qn.unmarked)),a=Object.assign(l,{id:qn.temporary}),r.state=a;const c=this.outgoingConfigEdges.get(i);if(c)for(const u of c.keys()){const f=this.extensionNameMap.get(u);f&&n(f,i)}a=hNt(a),r.state=a,t.push(r)};for(const r of this.extensionNameMap.values())UA(r.state)&&n(r);for(const r of t)for(const[s,a]of this.outgoingConfigEdges.get(r.extension.name)||[])if(a.length>0){const i=this.extensionNameMap.get(s);if(i)for(const l of a)i.configs.add(l)}for(const[r,...s]of this.roots)if(s.length>0){const a=this.extensionNameMap.get(r.name);a===void 0&&tr(301,r.name);for(const i of s)a.configs.add(i)}return this._sortedExtensionReps=t,this._sortedExtensionReps}registerEditor(t){const n=this.sortedExtensionReps(),r=new AbortController,s=[()=>r.abort()],a=r.signal;for(const i of n){const l=i.register(t,a);l&&s.push(l)}for(const i of n){const l=i.afterRegistration(t);l&&s.push(l)}return bc(...s)}buildCreateEditorArgs(){const t={},n=new Set,r=new Map,s=new Map,a={},i={},l=this.sortedExtensionReps();for(const f of l){const{extension:m}=f;if(m.onError!==void 0&&(t.onError=m.onError),m.disableEvents!==void 0&&(t.disableEvents=m.disableEvents),m.parentEditor!==void 0&&(t.parentEditor=m.parentEditor),m.editable!==void 0&&(t.editable=m.editable),m.namespace!==void 0&&(t.namespace=m.namespace),m.$initialEditorState!==void 0&&(t.$initialEditorState=m.$initialEditorState),m.nodes)for(const p of m.nodes){if(typeof p!="function"){const h=r.get(p.replace);h&&tr(302,m.name,p.replace.name,h.extension.name),r.set(p.replace,f)}n.add(p)}if(m.html){if(m.html.export)for(const[p,h]of m.html.export.entries())s.set(p,h);m.html.import&&Object.assign(a,m.html.import)}m.theme&&sEe(i,m.theme)}Object.keys(i).length>0&&(t.theme=i),n.size&&(t.nodes=[...n]);const c=Object.keys(a).length>0,u=s.size>0;(c||u)&&(t.html={},c&&(t.html.import=a),u&&(t.html.export=s));for(const f of l)f.init(t);return t.onError||(t.onError=bNt),t}};function pcn(e,t){const n=oEe.fromEditor(e).extensionNameMap.get(t);return n?n.getExtensionDependency():void 0}let iEe=class lEe extends kT{static getType(){return"horizontalrule"}static clone(t){return new lEe(t.__key)}static importJSON(t){return cEe().updateFromJSON(t)}static importDOM(){return{hr:()=>({conversion:_Nt,priority:0})}}exportDOM(){return{element:document.createElement("hr")}}createDOM(t){const n=document.createElement("hr");return _c(n,t.theme.hr),n}getTextContent(){return`
`}isInline(){return!1}updateDOM(){return!1}};function _Nt(){return{node:cEe()}}function cEe(){return B2e(iEe)}function hcn(e){return e instanceof iEe}const wNt=new Set(["http:","https:","mailto:","sms:","tel:"]);let Ux=class uEe extends qo{__url;__target;__rel;__title;static getType(){return"link"}static clone(t){return new uEe(t.__url,{rel:t.__rel,target:t.__target,title:t.__title},t.__key)}constructor(t="",n={},r){super(r);const{target:s=null,rel:a=null,title:i=null}=n;this.__url=t,this.__target=s,this.__rel=a,this.__title=i}createDOM(t){const n=document.createElement("a");return this.updateLinkDOM(null,n,t),_c(n,t.theme.link),n}updateLinkDOM(t,n,r){if(zV(n)){t&&t.__url===this.__url||(n.href=this.sanitizeUrl(this.__url));for(const s of["target","rel","title"]){const a=`__${s}`,i=this[a];t&&t[a]===i||(i?n[s]=i:n.removeAttribute(s))}}}updateDOM(t,n,r){return this.updateLinkDOM(t,n,r),!1}static importDOM(){return{a:t=>({conversion:CNt,priority:1})}}static importJSON(t){return vy().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setURL(t.url).setRel(t.rel||null).setTarget(t.target||null).setTitle(t.title||null)}sanitizeUrl(t){t=xre(t);try{const n=new URL(xre(t));if(!wNt.has(n.protocol))return"about:blank"}catch{return t}return t}exportJSON(){return{...super.exportJSON(),rel:this.getRel(),target:this.getTarget(),title:this.getTitle(),url:this.getURL()}}getURL(){return this.getLatest().__url}setURL(t){const n=this.getWritable();return n.__url=t,n}getTarget(){return this.getLatest().__target}setTarget(t){const n=this.getWritable();return n.__target=t,n}getRel(){return this.getLatest().__rel}setRel(t){const n=this.getWritable();return n.__rel=t,n}getTitle(){return this.getLatest().__title}setTitle(t){const n=this.getWritable();return n.__title=t,n}insertNewAfter(t,n=!0){const r=vy(this.__url,{rel:this.__rel,target:this.__target,title:this.__title});return this.insertAfter(r,n),r}canInsertTextBefore(){return!1}canInsertTextAfter(){return!1}canBeEmpty(){return!1}isInline(){return!0}extractWithChild(t,n,r){if(!Be(n))return!1;const s=n.anchor.getNode(),a=n.focus.getNode();return this.isParentOf(s)&&this.isParentOf(a)&&n.getTextContent().length>0}isEmailURI(){return this.__url.startsWith("mailto:")}isWebSiteURI(){return this.__url.startsWith("https://")||this.__url.startsWith("http://")}};function CNt(e){let t=null;if(zV(e)){const n=e.textContent;(n!==null&&n!==""||e.children.length>0)&&(t=vy(e.getAttribute("href")||"",{rel:e.getAttribute("rel"),target:e.getAttribute("target"),title:e.getAttribute("title")}))}return{node:t}}function vy(e="",t){return Di(new Ux(e,t))}function hi(e){return e instanceof Ux}let sW=class dEe extends Ux{__isUnlinked;constructor(t="",n={},r){super(t,n,r),this.__isUnlinked=n.isUnlinked!==void 0&&n.isUnlinked!==null&&n.isUnlinked}static getType(){return"autolink"}static clone(t){return new dEe(t.__url,{isUnlinked:t.__isUnlinked,rel:t.__rel,target:t.__target,title:t.__title},t.__key)}getIsUnlinked(){return this.__isUnlinked}setIsUnlinked(t){const n=this.getWritable();return n.__isUnlinked=t,n}createDOM(t){return this.__isUnlinked?document.createElement("span"):super.createDOM(t)}updateDOM(t,n,r){return super.updateDOM(t,n,r)||t.__isUnlinked!==this.__isUnlinked}static importJSON(t){return M7().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setIsUnlinked(t.isUnlinked||!1)}static importDOM(){return null}exportJSON(){return{...super.exportJSON(),isUnlinked:this.__isUnlinked}}insertNewAfter(t,n=!0){const r=this.getParentOrThrow().insertNewAfter(t,n);if(Ae(r)){const s=M7(this.__url,{isUnlinked:this.__isUnlinked,rel:this.__rel,target:this.__target,title:this.__title});return r.append(s),s}return null}};function M7(e="",t){return Di(new sW(e,t))}function Fl(e){return e instanceof sW}const k7=Zt("TOGGLE_LINK_COMMAND");function yre(e,t){if(e.type==="element"){const n=e.getNode();return Ae(n)||function(r,...s){const a=new URL("https://lexical.dev/docs/error"),i=new URLSearchParams;i.append("code",r);for(const l of s)i.append("v",l);throw a.search=i.toString(),Error(`Minified Lexical error #${r}; visit ${a.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(252),n.getChildren()[e.offset+t]||null}return null}function $A(e,t={}){let n;if(e&&typeof e=="object"){const{url:f,...m}=e;n=f,t={...m,...t}}else n=e;const{target:r,title:s}=t,a=t.rel===void 0?"noreferrer":t.rel,i=rt();if(i===null||!Be(i)&&!gu(i))return;if(gu(i)){const f=i.getNodes();return f.length===0?void 0:void f.forEach(m=>{if(n===null){const p=xi(m,h=>!Fl(h)&&hi(h));p&&(p.insertBefore(m),p.getChildren().length===0&&p.remove())}else{const p=xi(m,h=>!Fl(h)&&hi(h));if(p)p.setURL(n),r!==void 0&&p.setTarget(r),a!==void 0&&p.setRel(a);else{const h=vy(n,{rel:a,target:r});m.insertBefore(h),h.append(m)}}})}const l=i.extract();if(n===null)return void l.forEach(f=>{const m=xi(f,p=>!Fl(p)&&hi(p));if(m){const p=m.getChildren();for(let h=0;h<p.length;h++)m.insertBefore(p[h]);m.remove()}});const c=new Set,u=f=>{c.has(f.getKey())||(c.add(f.getKey()),f.setURL(n),r!==void 0&&f.setTarget(r),a!==void 0&&f.setRel(a),s!==void 0&&f.setTitle(s))};if(l.length===1){const f=l[0],m=xi(f,hi);if(m!==null)return u(m)}(function(f){const m=rt();if(!Be(m))return f();const p=ub(m),h=p.isBackward(),g=yre(p.anchor,h?-1:0),y=yre(p.focus,h?0:-1);if(f(),g||y){const x=rt();if(Be(x)){const v=x.clone();if(g){const b=g.getParent();b&&v.anchor.set(b.getKey(),g.getIndexWithinParent()+(h?1:0),"element")}if(y){const b=y.getParent();b&&v.focus.set(b.getKey(),y.getIndexWithinParent()+(h?0:1),"element")}ta(ub(v))}}})(()=>{let f=null;for(const m of l){if(!m.isAttached())continue;const p=xi(m,hi);if(p){u(p);continue}if(Ae(m)){if(!m.isInline())continue;if(hi(m)){if(!(Fl(m)||f!==null&&f.getParentOrThrow().isParentOf(m))){u(m),f=m;continue}for(const g of m.getChildren())m.insertBefore(g);m.remove();continue}}const h=m.getPreviousSibling();hi(h)&&h.is(f)?h.append(m):(f=vy(n,{rel:a,target:r,title:s}),m.insertAfter(f),f.append(m))}})}const SNt=/^\+?[0-9\s()-]{5,}$/;function xre(e){return e.match(/^[a-z][a-z0-9+.-]*:/i)||e.match(/^[/#.]/)?e:e.includes("@")?`mailto:${e}`:SNt.test(e)?`tel:${e}`:`https://${e}`}function gcn(e,t){return bc(E7(()=>e.registerCommand(k7,n=>{const r=t.validateUrl.peek(),s=t.attributes.peek();if(n===null)return $A(null),!0;if(typeof n=="string")return!(r!==void 0&&!r(n))&&($A(n,s),!0);{const{url:a,target:i,rel:l,title:c}=n;return $A(a,{...s,rel:l,target:i,title:c}),!0}},mb)),E7(()=>{const n=t.validateUrl.value;if(!n)return;const r=t.attributes.value;return e.registerCommand(aw,s=>{const a=rt();if(!Be(a)||a.isCollapsed()||!gb(s,ClipboardEvent)||s.clipboardData===null)return!1;const i=s.clipboardData.getData("text");return!!n(i)&&!a.getNodes().some(l=>Ae(l))&&(e.dispatchCommand(k7,{...r,url:i}),s.preventDefault(),!0)},mb)}))}function ENt(e,t,n={}){const r=a=>{const i=a.target;if(!Dx(i))return;const l=UV(i);if(l===null)return;let c=null,u=null;if(l.update(()=>{const p=gy(i);if(p!==null){const h=xi(p,Ae);if(!t.disabled.peek())if(hi(h))c=h.sanitizeUrl(h.getURL()),u=h.getTarget();else{const g=function(y,x){let v=y;for(;v!=null;){if(x(v))return v;v=v.parentNode}return null}(i,zV);g!==null&&(c=g.href,u=g.target)}}}),c===null||c==="")return;const f=e.getEditorState().read(rt);if(Be(f)&&!f.isCollapsed())return void a.preventDefault();const m=a.type==="auxclick"&&a.button===1;window.open(c,t.newTab.peek()||m||a.metaKey||a.ctrlKey||u==="_blank"?"_blank":"_self"),a.preventDefault()},s=a=>{a.button===1&&r(a)};return e.registerRootListener((a,i)=>{i!==null&&(i.removeEventListener("click",r),i.removeEventListener("mouseup",s)),a!==null&&(a.addEventListener("click",r,n),a.addEventListener("mouseup",s,n))})}function ycn(e,t=n=>n){return n=>{const r=e.exec(n);return r===null?null:{index:r.index,length:r[0].length,text:r[0],url:t(r[0])}}}function fEe(e,t){for(let n=0;n<t.length;n++){const r=t[n](e);if(r)return r}return null}const MNt=/[.,;\s]/;function GM(e){return MNt.test(e)}function mEe(e){return GM(e[e.length-1])}function T7(e){return GM(e[0])}function pEe(e){let t=e.getPreviousSibling();return Ae(t)&&(t=t.getLastDescendant()),t===null||sc(t)||Je(t)&&mEe(t.getTextContent())}function hEe(e){let t=e.getNextSibling();return Ae(t)&&(t=t.getFirstDescendant()),t===null||sc(t)||Je(t)&&T7(t.getTextContent())}function kNt(e,t,n,r){return(e>0?GM(n[e-1]):pEe(r[0]))?t<n.length?GM(n[t]):hEe(r[r.length-1]):!1}function TNt(e,t,n){const r=[],s=[],a=[];let i=0,l=0;const c=[...e];for(;c.length>0;){const u=c[0],f=u.getTextContent().length,m=l;l+f<=t?(r.push(u),i+=f):m>=n?a.push(u):s.push(u),l+=f,c.shift()}return[i,r,s,a]}function NNt(e,t,n,r){const s=M7(r.url,r.attributes);if(e.length===1){let a,i=e[0];t===0?[a,i]=i.splitText(n):[,a,i]=i.splitText(t,n);const l=Zn(r.text);return l.setFormat(a.getFormat()),l.setDetail(a.getDetail()),l.setStyle(a.getStyle()),s.append(l),a.replace(s),i}if(e.length>1){const a=e[0];let i,l=a.getTextContent().length;t===0?i=a:[,i]=a.splitText(t);const c=[];let u;for(let h=1;h<e.length;h++){const g=e[h],y=g.getTextContent().length,x=l;if(x<n)if(l+y<=n)c.push(g);else{const[v,b]=g.splitText(n-x);c.push(v),u=b}l+=y}const f=rt(),m=f?f.getNodes().find(Je):void 0,p=Zn(i.getTextContent());return p.setFormat(i.getFormat()),p.setDetail(i.getDetail()),p.setStyle(i.getStyle()),s.append(p,...c),m&&m===i&&(Be(f)?p.select(f.anchor.offset,f.focus.offset):gu(f)&&p.select(0,p.getTextContent().length)),i.replace(s),u}}function VA(e,t,n){const r=e.getChildren(),s=r.length;for(let c=0;c<s;c++){const u=r[c];if(!Je(u)||!u.isSimpleText())return A2(e),void n(null,e.getURL())}const a=e.getTextContent(),i=fEe(a,t);if(i===null||i.text!==a||!pEe(e)||!hEe(e))return A2(e),void n(null,e.getURL());const l=e.getURL();if(l!==i.url&&(e.setURL(i.url),n(i.url,l)),i.attributes){const c=e.getRel();c!==i.attributes.rel&&(e.setRel(i.attributes.rel||null),n(i.attributes.rel||null,c));const u=e.getTarget();u!==i.attributes.target&&(e.setTarget(i.attributes.target||null),n(i.attributes.target||null,u))}}function A2(e){const t=e.getChildren();for(let n=t.length-1;n>=0;n--)e.insertAfter(t[n]);return e.remove(),t.map(n=>n.getLatest())}const jNt={changeHandlers:[],matchers:[]};function xcn(e,t=jNt){const{matchers:n,changeHandlers:r}=t,s=(a,i)=>{for(const l of r)l(a,i)};return bc(e.registerNodeTransform(Rc,a=>{const i=a.getParentOrThrow(),l=a.getPreviousSibling();if(Fl(i)&&!i.getIsUnlinked())VA(i,n,s);else if(!hi(i)){if(a.isSimpleText()&&(T7(a.getTextContent())||!Fl(l))){const c=function(u){const f=[u];let m=u.getNextSibling();for(;m!==null&&Je(m)&&m.isSimpleText()&&(f.push(m),!/[\s]/.test(m.getTextContent()));)m=m.getNextSibling();return f}(a);(function(u,f,m){let p=[...u];const h=p.map(v=>v.getTextContent()).join("");let g,y=h,x=0;for(;(g=fEe(y,f))&&g!==null;){const v=g.index,b=v+g.length;if(kNt(x+v,x+b,h,p)){const[_,,w,C]=TNt(p,x+v,x+b),S=NNt(w,x+v-_,x+b-_,g);p=S?[S,...C]:C,m(g.url,null),x=0}else x+=b;y=y.substring(b)}})(c,n,s)}(function(c,u,f){const m=c.getPreviousSibling(),p=c.getNextSibling(),h=c.getTextContent();var g;!Fl(m)||m.getIsUnlinked()||T7(h)&&(g=h,!(m.isEmailURI()?/^\.[a-zA-Z]{2,}/.test(g):/^\.[a-zA-Z0-9]{1,}/.test(g)))||(m.append(c),VA(m,u,f),f(null,m.getURL())),!Fl(p)||p.getIsUnlinked()||mEe(h)||(A2(p),VA(p,u,f),f(null,p.getURL()))})(a,n,s)}}),e.registerCommand(k7,a=>{const i=rt();return a!==null||!Be(i)||i.extract().forEach(l=>{const c=l.getParent();Fl(c)&&(c.setIsUnlinked(!c.getIsUnlinked()),c.markDirty())}),!1},mb))}const gEe=d.createContext(null);function ANt(e,t){return{getTheme:function(){return t??null}}}function Nu(){const e=d.useContext(gEe);return e==null&&function(t,...n){const r=new URL("https://lexical.dev/docs/error"),s=new URLSearchParams;s.append("code",t);for(const a of n)s.append("v",a);throw r.search=s.toString(),Error(`Minified Lexical error #${t}; visit ${r.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}(8),e}function INt({newTab:e=!0,disabled:t=!1}){const[n]=Nu();return d.useEffect(()=>ENt(n,pNt({disabled:t,newTab:e})),[n,e,t]),null}const yEe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,RNt=yEe?d.useLayoutEffect:d.useEffect,dS={tag:K0};function PNt({initialConfig:e,children:t}){const n=d.useMemo(()=>{const{theme:r,namespace:s,nodes:a,onError:i,editorState:l,html:c}=e,u=ANt(null,r),f=LV({editable:e.editable,html:c,namespace:s,nodes:a,onError:m=>i(m,f),theme:r});return function(m,p){if(p!==null){if(p===void 0)m.update(()=>{const h=sr();if(h.isEmpty()){const g=kr();h.append(g);const y=yEe?document.activeElement:null;(rt()!==null||y!==null&&y===m.getRootElement())&&g.select()}},dS);else if(p!==null)switch(typeof p){case"string":{const h=m.parseEditorState(p);m.setEditorState(h,dS);break}case"object":m.setEditorState(p,dS);break;case"function":m.update(()=>{sr().isEmpty()&&p(m)},dS)}}}(f,l),[f,u]},[]);return RNt(()=>{const r=e.editable,[s]=n;s.setEditable(r===void 0||r)},[]),o.jsx(gEe.Provider,{value:n,children:t})}function LNt(){return sr().getTextContent()}function ONt(e,t=!0){if(e)return!1;let n=LNt();return t&&(n=n.trim()),n===""}function DNt(e){if(!ONt(e,!1))return!1;const t=sr().getChildren(),n=t.length;if(n>1)return!1;for(let r=0;r<n;r++){const s=t[r];if(Bn(s))return!1;if(Ae(s)){if(!Id(s)||s.__indent!==0)return!1;const a=s.getChildren(),i=a.length;for(let l=0;l<i;l++){const c=a[r];if(!Je(c))return!1}}}return!0}function xEe(e){return()=>DNt(e)}const vEe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?d.useLayoutEffect:d.useEffect;function FNt({editor:e,ariaActiveDescendant:t,ariaAutoComplete:n,ariaControls:r,ariaDescribedBy:s,ariaErrorMessage:a,ariaExpanded:i,ariaInvalid:l,ariaLabel:c,ariaLabelledBy:u,ariaMultiline:f,ariaOwns:m,ariaRequired:p,autoCapitalize:h,className:g,id:y,role:x="textbox",spellCheck:v=!0,style:b,tabIndex:_,"data-testid":w,...C},S){const[E,k]=d.useState(e.isEditable()),M=d.useCallback(R=>{R&&R.ownerDocument&&R.ownerDocument.defaultView?e.setRootElement(R):e.setRootElement(null)},[e]),j=d.useMemo(()=>function(...R){return O=>{for(const D of R)typeof D=="function"?D(O):D!=null&&(D.current=O)}}(S,M),[M,S]);return vEe(()=>(k(e.isEditable()),e.registerEditableListener(R=>{k(R)})),[e]),o.jsx("div",{"aria-activedescendant":E?t:void 0,"aria-autocomplete":E?n:"none","aria-controls":E?r:void 0,"aria-describedby":s,...a!=null?{"aria-errormessage":a}:{},"aria-expanded":E&&x==="combobox"?!!i:void 0,...l!=null?{"aria-invalid":l}:{},"aria-label":c,"aria-labelledby":u,"aria-multiline":f,"aria-owns":E?m:void 0,"aria-readonly":!E||void 0,"aria-required":p,autoCapitalize:h,className:g,contentEditable:E,"data-testid":w,id:y,ref:j,role:x,spellCheck:v,style:b,tabIndex:_,...C})}const UNt=d.forwardRef(FNt);function vre(e){return e.getEditorState().read(xEe(e.isComposing()))}const BNt=d.forwardRef($Nt);function $Nt(e,t){const{placeholder:n,...r}=e,[s]=Nu();return o.jsxs(o.Fragment,{children:[o.jsx(UNt,{editor:s,...r,ref:t}),n!=null&&o.jsx(VNt,{editor:s,content:n})]})}function VNt({content:e,editor:t}){const n=function(i){const[l,c]=d.useState(()=>vre(i));return vEe(()=>{function u(){const f=vre(i);c(f)}return u(),bc(i.registerUpdateListener(()=>{u()}),i.registerEditableListener(()=>{u()}))},[i]),l}(t),[r,s]=d.useState(t.isEditable());if(d.useLayoutEffect(()=>(s(t.isEditable()),t.registerEditableListener(i=>{s(i)})),[t]),!n)return null;let a=null;return typeof e=="function"?a=e(r):e!==null&&(a=e),a===null?null:o.jsx("div",{"aria-hidden":!0,children:a})}const WNt=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?d.useLayoutEffect:d.useEffect;function HNt(e){return{initialValueFn:()=>e.isEditable(),subscribe:t=>e.registerEditableListener(t)}}function zNt(){return function(e){const[t]=Nu(),n=d.useMemo(()=>e(t),[t,e]),[r,s]=d.useState(()=>n.initialValueFn()),a=d.useRef(r);return WNt(()=>{const{initialValueFn:i,subscribe:l}=n,c=i();return a.current!==c&&(a.current=c,s(c)),l(u=>{a.current=u,s(u)})},[n,e]),r}(HNt)}const GNt={name:"@lexical/react/ReactProvider"};function qNt(e){const t=window.location.origin,n=r=>{if(r.origin!==t)return;const s=e.getRootElement();if(document.activeElement!==s)return;const a=r.data;if(typeof a=="string"){let i;try{i=JSON.parse(a)}catch{return}if(i&&i.protocol==="nuanria_messaging"&&i.type==="request"){const l=i.payload;if(l&&l.functionId==="makeChanges"){const c=l.args;if(c){const[u,f,m,p,h]=c;e.update(()=>{const g=rt();if(Be(g)){const y=g.anchor;let x=y.getNode(),v=0,b=0;if(Je(x)&&u>=0&&f>=0&&(v=u,b=u+f,g.setTextNodeRange(x,v,x,b)),v===b&&m===""||(g.insertRawText(m),x=y.getNode()),Je(x)){v=p,b=p+h;const _=x.getTextContentSize();v=v>_?_:v,b=b>_?_:b,g.setTextNodeRange(x,v,x,b)}r.stopImmediatePropagation()}})}}}}};return window.addEventListener("message",n,!0),()=>{window.removeEventListener("message",n,!0)}}const Rp=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,KNt=Rp&&"documentMode"in document?document.documentMode:null,YNt=Rp&&/Mac|iPod|iPhone|iPad/.test(navigator.platform),QNt=!(!Rp||!("InputEvent"in window)||KNt)&&"getTargetRanges"in new window.InputEvent("input"),XNt=Rp&&/Version\/[\d.]+.*Safari/.test(navigator.userAgent),bre=Rp&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,ZNt=Rp&&/^(?=.*Chrome).*/i.test(navigator.userAgent),JNt=Rp&&/AppleWebKit\/[\d.]+/.test(navigator.userAgent)&&YNt&&!ZNt;function _re(e,t){t.update(()=>{if(e!==null){const n=gb(e,KeyboardEvent)?null:e.clipboardData,r=rt();if(r!==null&&n!=null){e.preventDefault();const s=cNt(t);s!==null&&n.setData("text/html",s),n.setData("text/plain",r.getTextContent())}}})}function ejt(e){return bc(e.registerCommand(rc,t=>{const n=rt();return!!Be(n)&&(n.deleteCharacter(t),!0)},vs),e.registerCommand(dy,t=>{const n=rt();return!!Be(n)&&(n.deleteWord(t),!0)},vs),e.registerCommand(fy,t=>{const n=rt();return!!Be(n)&&(n.deleteLine(t),!0)},vs),e.registerCommand(Em,t=>{const n=rt();if(!Be(n))return!1;if(typeof t=="string")n.insertText(t);else{const r=t.dataTransfer;if(r!=null)cre(r,n);else{const s=t.data;s&&n.insertText(s)}}return!0},vs),e.registerCommand(UM,()=>{const t=rt();return!!Be(t)&&(t.removeText(),!0)},vs),e.registerCommand(gg,t=>{const n=rt();return!!Be(n)&&(n.insertLineBreak(t),!0)},vs),e.registerCommand(l7,()=>{const t=rt();return!!Be(t)&&(t.insertLineBreak(),!0)},vs),e.registerCommand(ZSe,t=>{const n=rt();if(!Be(n))return!1;const r=t,s=r.shiftKey;return!!ire(n,!0)&&(r.preventDefault(),lre(n,s,!0),!0)},vs),e.registerCommand(XSe,t=>{const n=rt();if(!Be(n))return!1;const r=t,s=r.shiftKey;return!!ire(n,!1)&&(r.preventDefault(),lre(n,s,!1),!0)},vs),e.registerCommand(MV,t=>{const n=rt();return!!Be(n)&&(!bre||navigator.language!=="ko-KR")&&(t.preventDefault(),e.dispatchCommand(rc,!0))},vs),e.registerCommand(kV,t=>{const n=rt();return!!Be(n)&&(t.preventDefault(),e.dispatchCommand(rc,!1))},vs),e.registerCommand(my,t=>{const n=rt();if(!Be(n))return!1;if(t!==null){if((bre||XNt||JNt)&&QNt)return!1;t.preventDefault()}return e.dispatchCommand(gg,!1)},vs),e.registerCommand(c7,()=>(N4t(),!0),vs),e.registerCommand(TV,t=>{const n=rt();return!!Be(n)&&(_re(t,e),!0)},vs),e.registerCommand(NV,t=>{const n=rt();return!!Be(n)&&(function(r,s){_re(r,s),s.update(()=>{const a=rt();Be(a)&&a.removeText()})}(t,e),!0)},vs),e.registerCommand(aw,t=>{const n=rt();return!!Be(n)&&(function(r,s){r.preventDefault(),s.update(()=>{const a=rt(),i=gb(r,ClipboardEvent)?r.clipboardData:null;i!=null&&Be(a)&&cre(i,a)},{tag:M2e})}(t,e),!0)},vs),e.registerCommand(r2e,t=>{const n=rt();return!!Be(n)&&(t.preventDefault(),!0)},vs),e.registerCommand(s2e,t=>{const n=rt();return!!Be(n)&&(t.preventDefault(),!0)},vs))}function tjt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const aW=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0?d.useLayoutEffect:d.useEffect;function njt({editor:e,ErrorBoundary:t}){return function(n,r){const[s,a]=d.useState(()=>n.getDecorators());return aW(()=>n.registerDecoratorListener(i=>{ks.flushSync(()=>{a(i)})}),[n]),d.useEffect(()=>{a(n.getDecorators())},[n]),d.useMemo(()=>{const i=[],l=Object.keys(s);for(let c=0;c<l.length;c++){const u=l[c],f=o.jsx(r,{onError:p=>n._onError(p),children:o.jsx(d.Suspense,{fallback:null,children:s[u]})}),m=n.getElementByKey(u);m!==null&&i.push(ks.createPortal(f,m,u))}return i},[r,s,n])}(e,t)}function rjt({editor:e,ErrorBoundary:t}){return function(n){const r=oEe.maybeFromEditor(n);if(r&&r.hasExtensionByName(GNt.name)){for(const s of["@lexical/plain-text","@lexical/rich-text"])r.hasExtensionByName(s)&&tjt(320,s);return!0}return!1}(e)?null:o.jsx(njt,{editor:e,ErrorBoundary:t})}function wre(e){return e.getEditorState().read(xEe(e.isComposing()))}function sjt({contentEditable:e,placeholder:t=null,ErrorBoundary:n}){const[r]=Nu();return function(s){aW(()=>bc(ejt(s),qNt(s)),[s])}(r),o.jsxs(o.Fragment,{children:[e,o.jsx(ajt,{content:t}),o.jsx(rjt,{editor:r,ErrorBoundary:n})]})}function ajt({content:e}){const[t]=Nu(),n=function(s){const[a,i]=d.useState(()=>wre(s));return aW(()=>{function l(){const c=wre(s);i(c)}return l(),bc(s.registerUpdateListener(()=>{l()}),s.registerEditableListener(()=>{l()}))},[s]),a}(t),r=zNt();return n?typeof e=="function"?e(r):e:null}const Cre="startTransition",N7=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,ojt=N7?d.useLayoutEffect:d.useEffect;let ijt=class{key;ref;constructor(t){this.key=t,this.ref={current:null},this.setRefElement=this.setRefElement.bind(this)}setRefElement(t){this.ref={current:t}}};const Sre=e=>{const t=document.getElementById("typeahead-menu");if(!t)return;const n=t.getBoundingClientRect();n.top+n.height>window.innerHeight&&t.scrollIntoView({block:"center"}),n.top<0&&t.scrollIntoView({block:"center"}),e.scrollIntoView({block:"nearest"})};function Ere(e,t){const n=e.getBoundingClientRect(),r=t.getBoundingClientRect();return n.top>=r.top-6&&n.top<=r.bottom+6}function ljt(e,t,n,r){const[s]=Nu();d.useEffect(()=>{if(t!=null&&e!=null){const a=s.getRootElement(),i=a!=null?function(m,p){let h=getComputedStyle(m);const g=h.position==="absolute",y=/(auto|scroll)/;if(h.position==="fixed")return document.body;for(let x=m;x=x.parentElement;)if(h=getComputedStyle(x),(!g||h.position!=="static")&&y.test(h.overflow+h.overflowY+h.overflowX))return x;return document.body}(a):document.body;let l=!1,c=Ere(t,i);const u=function(){l||(window.requestAnimationFrame(function(){n(),l=!1}),l=!0);const m=Ere(t,i);m!==c&&(c=m,r?.(m))},f=new ResizeObserver(n);return window.addEventListener("resize",n),document.addEventListener("scroll",u,{capture:!0,passive:!0}),f.observe(t),()=>{f.unobserve(t),window.removeEventListener("resize",n),document.removeEventListener("scroll",u,!0)}}},[t,s,r,n,e])}const Mre=Zt("SCROLL_TYPEAHEAD_OPTION_INTO_VIEW_COMMAND");function cjt({close:e,editor:t,anchorElementRef:n,resolution:r,options:s,menuRenderFn:a,onSelectOption:i,shouldSplitNodeWithQuery:l=!1,commandPriority:c=mb,preselectFirstItem:u=!0}){const[f,m]=d.useState(null),p=r.match&&r.match.matchingString;d.useEffect(()=>{u&&m(0)},[p,u]);const h=d.useCallback(y=>{t.update(()=>{const x=r.match!=null&&l?function(v){const b=rt();if(!Be(b)||!b.isCollapsed())return null;const _=b.anchor;if(_.type!=="text")return null;const w=_.getNode();if(!w.isSimpleText())return null;const C=_.offset,S=w.getTextContent().slice(0,C),E=v.replaceableString.length,k=C-function(j,R,O){let D=O;for(let P=D;P<=R.length;P++)j.slice(-P)===R.substring(0,P)&&(D=P);return D}(S,v.matchingString,E);if(k<0)return null;let M;return k===0?[M]=w.splitText(C):[,M]=w.splitText(k,C),M}(r.match):null;i(y,x,e,r.match?r.match.matchingString:"")})},[t,l,r.match,i,e]),g=d.useCallback(y=>{const x=t.getRootElement();x!==null&&(x.setAttribute("aria-activedescendant","typeahead-item-"+y),m(y))},[t]);return d.useEffect(()=>()=>{const y=t.getRootElement();y!==null&&y.removeAttribute("aria-activedescendant")},[t]),ojt(()=>{s===null?m(null):f===null&&u&&g(0)},[s,f,g,u]),d.useEffect(()=>bc(t.registerCommand(Mre,({option:y})=>!(!y.ref||y.ref.current==null)&&(Sre(y.ref.current),!0),c)),[t,g,c]),d.useEffect(()=>bc(t.registerCommand(e2e,y=>{const x=y;if(s!==null&&s.length){const v=f===null?0:f!==s.length-1?f+1:0;g(v);const b=s[v];b.ref!=null&&b.ref.current&&t.dispatchCommand(Mre,{index:v,option:b}),x.preventDefault(),x.stopImmediatePropagation()}return!0},c),t.registerCommand(JSe,y=>{const x=y;if(s!==null&&s.length){const v=f===null?s.length-1:f!==0?f-1:s.length-1;g(v);const b=s[v];b.ref!=null&&b.ref.current&&Sre(b.ref.current),x.preventDefault(),x.stopImmediatePropagation()}return!0},c),t.registerCommand(t2e,y=>{const x=y;return x.preventDefault(),x.stopImmediatePropagation(),e(),!0},c),t.registerCommand(n2e,y=>{const x=y;return s!==null&&f!==null&&s[f]!=null&&(x.preventDefault(),x.stopImmediatePropagation(),h(s[f]),!0)},c),t.registerCommand(my,y=>s!==null&&f!==null&&s[f]!=null&&(y!==null&&(y.preventDefault(),y.stopImmediatePropagation()),h(s[f]),!0),c)),[h,e,t,s,f,g,c]),a(n,d.useMemo(()=>({options:s,selectOptionAndCleanUp:h,selectedIndex:f,setHighlightedIndex:m}),[h,f,s]),r.match?r.match.matchingString:"")}function kre(e,t){t!=null&&(e.className=t),e.setAttribute("aria-label","Typeahead menu"),e.setAttribute("role","listbox"),e.style.display="block",e.style.position="absolute"}function ujt({options:e,onQueryChange:t,onSelectOption:n,onOpen:r,onClose:s,menuRenderFn:a,triggerFn:i,anchorClassName:l,commandPriority:c=mb,parent:u,preselectFirstItem:f=!0,ignoreEntityBoundary:m=!1}){const[p]=Nu(),[h,g]=d.useState(null),y=function(b,_,w,C=N7?document.body:void 0,S=!0){const[E]=Nu(),k=N7?document.createElement("div"):null,M=d.useRef(k),j=d.useCallback(()=>{if(M.current===null||C===void 0)return;M.current.style.top=M.current.style.bottom;const O=E.getRootElement(),D=M.current,P=D.firstChild;if(O!==null&&b!==null){const{left:A,top:T,width:N,height:L}=b.getRect(),U=M.current.offsetHeight;if(D.style.top=`${T+U+3+(S?window.pageYOffset:0)}px`,D.style.left=`${A+window.pageXOffset}px`,D.style.height=`${L}px`,D.style.width=`${N}px`,P!==null){P.style.top=`${T}`;const $=P.getBoundingClientRect(),V=$.height,W=$.width,Q=O.getBoundingClientRect();A+W>Q.right&&(D.style.left=`${Q.right-W+window.pageXOffset}px`),(T+V>window.innerHeight||T+V>Q.bottom)&&T-Q.top>V+L&&(D.style.top=`${T-V-L+(S?window.pageYOffset:0)}px`)}D.isConnected||(kre(D,w),C.append(D)),D.setAttribute("id","typeahead-menu"),O.setAttribute("aria-controls","typeahead-menu")}},[E,b,S,w,C]);d.useEffect(()=>{const O=E.getRootElement();return b!==null&&j(),()=>{O!==null&&O.removeAttribute("aria-controls");const D=M.current;D!==null&&D.isConnected&&(D.remove(),D.removeAttribute("id"))}},[E,j,b]);const R=d.useCallback(O=>{b!==null&&(O||_(null))},[b,_]);return ljt(b,M.current,j,R),k!=null&&k===M.current&&(kre(k,w),C?.append(k)),M}(h,g,l,u),x=d.useCallback(()=>{g(null),s!=null&&h!==null&&s()},[s,h]),v=d.useCallback(b=>{g(b),r!=null&&h===null&&r(b)},[r,h]);return d.useEffect(()=>{const b=p.registerUpdateListener(()=>{p.getEditorState().read(()=>{if(!p.isEditable())return void x();const _=p._window||window,w=_.document.createRange(),C=rt(),S=function(M){let j=null;return M.getEditorState().read(()=>{const R=rt();Be(R)&&(j=function(O){const D=O.anchor;if(D.type!=="text")return null;const P=D.getNode();if(!P.isSimpleText())return null;const A=D.offset;return P.getTextContent().slice(0,A)}(R))}),j}(p);if(!Be(C)||!C.isCollapsed()||S===null||w===null)return void x();const E=i(S,p);if(t(E?E.matchingString:null),E!==null&&(m||!function(M,j){return j===0&&M.getEditorState().read(()=>{const R=rt();if(Be(R)){const O=R.anchor.getNode().getPreviousSibling();return Je(O)&&O.isTextEntity()}return!1})}(p,E.leadOffset))&&function(j,R,O){const D=vc(O);if(D===null||!D.isCollapsed)return!1;const P=D.anchorNode,A=j,T=D.anchorOffset;if(P==null||T==null)return!1;try{R.setStart(P,A),R.setEnd(P,T)}catch{return!1}return!0}(E.leadOffset,w,_)!==null)return k=()=>v({getRect:()=>w.getBoundingClientRect(),match:E}),void(Cre in I?I[Cre](k):k());var k;x()})});return()=>{b()}},[p,i,t,h,x,v,m]),d.useEffect(()=>p.registerEditableListener(b=>{b||x()}),[p,x]),h===null||p===null||y.current===null?null:o.jsx(cjt,{close:x,resolution:h,editor:p,anchorElementRef:y,options:e,menuRenderFn:a,shouldSplitNodeWithQuery:!0,onSelectOption:n,commandPriority:c,preselectFirstItem:f})}const WA=245,HA=240,oW=100,iW=["@","/"].join(""),bEe=`\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\/!%'"~=<>_:;`,_Ee="[^"+iW+bEe+"\\s]",djt="(?:\\.[ |$]| |["+bEe+"]|)",wEe=new RegExp("(^|\\s|\\()(["+iW+"]((?:"+_Ee+djt+"){0,"+oW+"}))$"),CEe=new RegExp("(^|\\s|\\()(["+iW+"]((?:"+_Ee+"){0,"+oW+"}))$"),fjt=10,mjt={shortcut:5},lW=250,Tre={tab:0,file:1,space:2,shortcuts:3};function pjt(e,t){let n=wEe.exec(e);if(n===null&&(n=CEe.exec(e)),n!==null){const r=n[1],s=n[3];if(s.length>=t)return{leadOffset:n.index+r.length,matchingString:s,replaceableString:n[2]}}return null}class hjt extends ijt{uuid;variant;label;url;icon;queryText;action;convertToNode;isAlwaysVisible;rightElement;className;src;emoji;constructor(t,n,r,s,a,i,l,c,u,f,m,p,h,g){super(t),this.uuid=n,this.variant=r,this.label=s,this.url=a,this.icon=i,this.queryText=l,this.action=c,this.convertToNode=u,this.isAlwaysVisible=f,this.rightElement=m,this.className=p,this.src=h,this.emoji=g}}const SEe=I.memo(({options:e,onOpen:t=vn,onClose:n=vn,onTrigger:r=vn,ref:s})=>{const{$t:a}=Z(),[i]=Nu(),[l,c]=d.useState(!1),[u,f]=d.useState(null),[m,p]=d.useState(null),[h,g]=d.useState(!1),y=d.useCallback(()=>g(!0),[]),x=d.useCallback(()=>g(!1),[]),v=d.useCallback(()=>{c(!0),t()},[t]),b=d.useCallback(()=>{c(!1),f(null),n()},[n]),_=d.useCallback(R=>{switch(R){case"tab":return a({defaultMessage:"Tabs",id:"M56d6aRPai"});case"file":return a({defaultMessage:"Files",id:"m4vqJl0/FT"});case"space":return a({defaultMessage:"Spaces",id:"ZMoczsYew9"});case"shortcut":return a({defaultMessage:"Shortcuts",id:"7FAwwkYilD"});case"source":return a({defaultMessage:"Sources",id:"fhwTpAcBLC"});default:return R.toLocaleUpperCase()}},[a]);d.useEffect(()=>i.registerRootListener((R,O)=>{R&&(R.addEventListener("focus",y),R.addEventListener("blur",x)),O&&(O.removeEventListener("focus",y),O.removeEventListener("blur",x))}),[i,x,y]);const w=d.useMemo(()=>{const R=m?.toLocaleLowerCase().trim();if(u==="/"&&m?.includes(" "))return[];const O=N=>{if(!R)return 0;if(N.isAlwaysVisible)return 1;const L=N.label.toLowerCase(),U=N.variant==="shortcut"&&L.startsWith("/")?L.slice(1):L,$=N.url?.toLowerCase(),V=q=>q===R,W=q=>q?.startsWith(R),Q=q=>q?.includes(R);return V(U)||V($)?3:W(U)||W($)?2:Q(U)||Q($)?1:0},D=e.map(N=>({option:N,matchScore:O(N)})).filter(({matchScore:N})=>N>0||!R).sort((N,L)=>{const U=(Tre[N.option.variant]??Number.MAX_SAFE_INTEGER)-(Tre[L.option.variant]??Number.MAX_SAFE_INTEGER);return U!==0?U:L.matchScore-N.matchScore}).map(({option:N})=>N);let P="",A=0;const T=[];return D.forEach(N=>{N.variant!==P&&(P=N.variant,A=0);const L=mjt[P]??fjt;A>=L&&!N.isAlwaysVisible||(T.push(N),A+=1)}),T.map(N=>new hjt(N.uuid,N.uuid,N.variant,N.label,N.url,N.icon,N.queryText,N.action,N.convertToNode,N.isAlwaysVisible,N.rightElement,N.className,N.src,N.emoji))},[m,u,e]),C=d.useMemo(()=>w.some(R=>R.convertToNode===void 0||R.convertToNode),[w]),S=d.useCallback(R=>{p(R)},[]),E=d.useCallback(R=>{const O=pjt(R,0);return O?.replaceableString?.[0]&&(f(O.replaceableString[0]),r(O.replaceableString[0])),O},[r]),k=d.useCallback((R,O,D,P)=>{let A="";const T=[];return R.forEach((N,L)=>{N.variant!==A&&(A=N.variant,T.push({type:"separator",show:!0,text:_(A)})),T.push({type:"default",text:N.label,className:N.className,focused:L===O,customTextNode:o.jsx(F,{variant:"small",children:o.jsx(cW,{text:N.label,icon:N.icon,truncate:N.rightElement?"small":"medium",variant:"extraSmall",iconClassName:"mx-1 relative top-[-1.25px] h-4 w-4",emojiClassName:"mx-1 pl-[2px] align-middle shrink-0"})}),tooltipText:Gg(N.queryText??"",lW),onMouseMove:()=>{P(L)},onMouseDown:U=>{U.preventDefault(),P(L),D(N)},rightElement:N.rightElement?.({focused:L===O}),preserveRightElementSpace:!N.rightElement})}),T},[_]),M=d.useCallback((R,O,D)=>{if(R.action&&(setTimeout(()=>{R.action?.()},0),R.convertToNode===!1)){D();return}i.update(()=>{const P=uW({uuid:R.uuid,variant:R.variant,text:R.label,url:R.url,icon:R.icon,queryText:R.queryText});O&&O.replace(P);const A=Zn(" ");P.insertAfter(A),A.selectEnd(),D()})},[i]),j=d.useCallback((R,{selectedIndex:O,selectOptionAndCleanUp:D,setHighlightedIndex:P})=>{const A=()=>{if(!R.current)return{isTop:!1,leftOffset:0};const L=R.current.getBoundingClientRect(),$=window.innerHeight-L.bottom<WA&&L.top>WA;let V=0;const W=L.left+HA;return W>window.innerWidth&&(V=window.innerWidth-W-16),L.left+V<16&&(V=16-L.left),{isTop:$,leftOffset:V}},{isTop:T,leftOffset:N}=A();return R.current&&w.length?ks.createPortal(o.jsx(TU,{removeScrollBar:!1,enabled:!0,children:o.jsx(z,{variant:u_.background,className:"shadow-overlay p-xs scrollable-container scrollbar overflow-y-auto overflow-x-hidden rounded-xl [scrollbar-gutter:stable]",style:{width:HA,minWidth:HA,maxHeight:WA,...T&&{bottom:"48px",position:"absolute"},...N!==0&&{left:`${N}px`,position:"absolute"}},children:o.jsx(zd,{items:k(w,C?O??-1:-1,D,P),disableScrollArea:!0,disableHoverStyles:C})})}),R.current):null},[w,k,C]);return d.useImperativeHandle(s,()=>({canSubmit:()=>!l||!C}),[l,C]),h?o.jsx(ujt,{onQueryChange:S,onSelectOption:M,triggerFn:E,preselectFirstItem:C,onOpen:v,onClose:b,options:w,menuRenderFn:j}):null});SEe.displayName="MentionsPlugin";const gjt=Object.freeze(Object.defineProperty({__proto__:null,AtSignMentionsRegex:wEe,AtSignMentionsRegexAliasRegex:CEe,LENGTH_LIMIT:oW,TOOLTIP_MAX_NUM_CHARACTERS:lW,default:SEe},Symbol.toStringTag,{value:"Module"})),cW=I.memo(({className:e,textClassName:t,iconClassName:n,emojiClassName:r,text:s,icon:a,color:i,truncate:l,variant:c,tooltipText:u})=>{const f=d.useMemo(()=>{if(a)switch(a.type){case"emoji":return o.jsx("span",{className:B("inline-block select-none",r),children:a.char});case"icon":{const m=a.icon;return o.jsx(de,{icon:m,className:B("text-quiet inline-block shrink-0 rounded-sm",n)})}case"image":return o.jsx("i",{className:B("inline-block shrink-0 select-none rounded-sm bg-cover bg-center bg-no-repeat",n),style:{backgroundImage:`url(${a.url})`,fontSize:"0.78rem"}})}return null},[n,r,a]);return o.jsx(bn,{tooltipText:u,showTooltip:!!u,children:o.jsxs("span",{className:B("inline-flex min-w-0 items-center align-top",{"max-w-[168px]":l==="small","max-w-[208px]":l==="medium","max-w-[250px]":l==="large"},e),spellCheck:!1,children:[f,o.jsx(F,{className:B("inline-block min-w-0 truncate",t),color:i,as:"span",variant:c,children:s})]})})});cW.displayName="MentionNodeTextContent";const EEe=I.memo(e=>o.jsx(cW,{...e,className:"px-sm border-subtlest bg-subtler dark:bg-subtle rounded-md border-[0.2px]",textClassName:"leading-[1.3]",iconClassName:"mr-1 h-[0.88rem] w-[0.88rem]",emojiClassName:"mr-1 text-[0.80rem]",truncate:"large"}));EEe.displayName="MentionNodeDecorator";function yjt(e){const t=e.textContent,n=e.getAttribute("data-mention-uuid"),r=e.getAttribute("data-mention-variant"),s=e.getAttribute("data-mention-url")??void 0,a=e.getAttribute("data-mention-query-text")??void 0;return t!==null&&n!==null&&r!==null?{node:uW({uuid:n,variant:r,text:t,url:s,queryText:a})}:null}class RT extends kT{__props;static getType(){return"mention"}static clone(t){return new RT(t.__props,t.__key)}static importJSON(t){return uW(t.props).updateFromJSON(t)}constructor(t,n){super(n),this.__props=t}exportJSON(){return{...super.exportJSON(),props:this.__props}}createDOM(){return document.createElement("span")}isIsolated(){return!0}updateDOM(){return!1}decorate(){return o.jsx(EEe,{text:this.__props.text,icon:this.__props.icon,tooltipText:Gg(this.__props.queryText??"",lW)})}getTextContent(){switch(this.__props.variant){case"shortcut":return this.__props.queryText??"";case"tab":return this.__props.url?`[${this.__props.text||this.__props.url}](${this.__props.url})`:this.__props.text;case"space":case"source":default:return this.__props.text}}exportDOM(){const t=document.createElement("span");return t.setAttribute("data-mention-uuid",this.__props.uuid),t.setAttribute("data-mention-variant",this.__props.variant),t.setAttribute("data-mention-url",this.__props.url??""),t.textContent=this.__props.text,{element:t}}static importDOM(){return{span:t=>!t.hasAttribute("data-mention-uuid")||!t.hasAttribute("data-mention-variant")?null:{conversion:yjt,priority:4}}}}function uW(e){return Di(new RT(e))}const MEe=[RT,sW,Ux];function o0(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}function xjt(e){let t=1,n=e.getParent();for(;n!=null;){if(da(n)){const r=n.getParent();if(Jn(r)){t++,n=r.getParent();continue}o0(40)}return t}return t}function Ul(e){return da(e)&&Jn(e.getFirstChild())}function Nre(e){return ju().append(e)}function kEe(e,t){e.splice(e.getChildrenSize(),0,t)}function dW(e,t){const n=e.getLastChild(),r=t.getFirstChild();n&&r&&Ul(n)&&Ul(r)&&(dW(n.getFirstChild(),r.getFirstChild()),r.remove());const s=t.getChildren();s.length>0&&e.append(...s),t.remove()}function vjt(e){const t=e.getListType()!=="check";let n=e.getStart();for(const r of e.getChildren())da(r)&&(r.getValue()!==n&&r.setValue(n),t&&r.getLatest().__checked!=null&&r.setChecked(void 0),Jn(r.getFirstChild())||n++)}function bjt(e){const t=new Set;if(Ul(e)||t.has(e.getKey()))return;const n=e.getParent(),r=e.getNextSibling(),s=e.getPreviousSibling();if(Ul(r)&&Ul(s)){const a=s.getFirstChild();if(Jn(a)){a.append(e);const i=r.getFirstChild();Jn(i)&&(kEe(a,i.getChildren()),r.remove(),t.add(r.getKey()))}}else if(Ul(r)){const a=r.getFirstChild();if(Jn(a)){const i=a.getFirstChild();i!==null&&i.insertBefore(e)}}else if(Ul(s)){const a=s.getFirstChild();Jn(a)&&a.append(e)}else if(Jn(n)){const a=ju().setTextFormat(e.getTextFormat()).setTextStyle(e.getTextStyle()),i=oc(n.getListType()).setTextFormat(n.getTextFormat()).setTextStyle(n.getTextStyle());a.append(i),i.append(e),s?s.insertAfter(a):r?r.insertBefore(a):n.append(a)}}function _jt(e){if(Ul(e))return;const t=e.getParent(),n=t?t.getParent():void 0;if(Jn(n?n.getParent():void 0)&&da(n)&&Jn(t)){const r=t?t.getFirstChild():void 0,s=t?t.getLastChild():void 0;if(e.is(r))n.insertBefore(e),t.isEmpty()&&n.remove();else if(e.is(s))n.insertAfter(e),t.isEmpty()&&n.remove();else{const a=t.getListType(),i=ju(),l=oc(a);i.append(l),e.getPreviousSiblings().forEach(f=>l.append(f));const c=ju(),u=oc(a);c.append(u),kEe(u,e.getNextSiblings()),n.insertBefore(i),n.insertAfter(c),n.replace(e)}}}function qM(...e){const t=[];for(const n of e)if(n&&typeof n=="string")for(const[r]of n.matchAll(/\S+/g))t.push(r);return t}let PT=class extends qo{__value;__checked;$config(){return this.config("listitem",{$transform:t=>{if(t.__checked==null)return;const n=t.getParent();Jn(n)&&n.getListType()!=="check"&&t.getChecked()!=null&&t.setChecked(void 0)},extends:qo,importDOM:{li:()=>({conversion:wjt,priority:0})}})}constructor(t=1,n=void 0,r){super(r),this.__value=t===void 0?1:t,this.__checked=n}afterCloneFrom(t){super.afterCloneFrom(t),this.__value=t.__value,this.__checked=t.__checked}createDOM(t){const n=document.createElement("li");return this.updateListItemDOM(null,n,t),n}updateListItemDOM(t,n,r){(function(i,l,c){const u=l.getParent();!Jn(u)||u.getListType()!=="check"||Jn(l.getFirstChild())?(i.removeAttribute("role"),i.removeAttribute("tabIndex"),i.removeAttribute("aria-checked")):(i.setAttribute("role","checkbox"),i.setAttribute("tabIndex","-1"),c&&l.__checked===c.__checked||i.setAttribute("aria-checked",l.getChecked()?"true":"false"))})(n,this,t),n.value=this.__value,function(i,l,c){const u=[],f=[],m=l.list,p=m?m.listitem:void 0;let h;if(m&&m.nested&&(h=m.nested.listitem),p!==void 0&&u.push(...qM(p)),m){const g=c.getParent(),y=Jn(g)&&g.getListType()==="check",x=c.getChecked();y&&!x||f.push(m.listitemUnchecked),y&&x||f.push(m.listitemChecked),y&&u.push(x?m.listitemChecked:m.listitemUnchecked)}if(h!==void 0){const g=qM(h);c.getChildren().some(y=>Jn(y))?u.push(...g):f.push(...g)}f.length>0&&nW(i,...f),u.length>0&&_c(i,...u)}(n,r.theme,this);const s=t?t.__style:"",a=this.__style;s!==a&&(a===""?n.removeAttribute("style"):n.style.cssText=a),function(i,l,c){const u=ore(l.__textStyle);for(const f in u)i.style.setProperty(`--listitem-marker-${f}`,u[f]);if(c)for(const f in ore(c.__textStyle))f in u||i.style.removeProperty(`--listitem-marker-${f}`)}(n,this,t)}updateDOM(t,n,r){const s=n;return this.updateListItemDOM(t,s,r),!1}updateFromJSON(t){return super.updateFromJSON(t).setValue(t.value).setChecked(t.checked)}exportDOM(t){const n=this.createDOM(t._config),r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();return s&&(n.dir=s),{element:n}}exportJSON(){return{...super.exportJSON(),checked:this.getChecked(),value:this.getValue()}}append(...t){for(let n=0;n<t.length;n++){const r=t[n];if(Ae(r)&&this.canMergeWith(r)){const s=r.getChildren();this.append(...s),r.remove()}else super.append(r)}return this}replace(t,n){if(da(t))return super.replace(t);this.setIndent(0);const r=this.getParentOrThrow();if(!Jn(r))return t;if(r.__first===this.getKey())r.insertBefore(t);else if(r.__last===this.getKey())r.insertAfter(t);else{const s=oc(r.getListType());let a=this.getNextSibling();for(;a;){const i=a;a=a.getNextSibling(),s.append(i)}r.insertAfter(t),t.insertAfter(s)}return n&&(Ae(t)||o0(139),this.getChildren().forEach(s=>{t.append(s)})),this.remove(),r.getChildrenSize()===0&&r.remove(),t}insertAfter(t,n=!0){const r=this.getParentOrThrow();if(Jn(r)||o0(39),da(t))return super.insertAfter(t,n);const s=this.getNextSiblings();if(r.insertAfter(t,n),s.length!==0){const a=oc(r.getListType());s.forEach(i=>a.append(i)),t.insertAfter(a,n)}return t}remove(t){const n=this.getPreviousSibling(),r=this.getNextSibling();super.remove(t),n&&r&&Ul(n)&&Ul(r)&&(dW(n.getFirstChild(),r.getFirstChild()),r.remove())}insertNewAfter(t,n=!0){const r=ju().updateFromJSON(this.exportJSON()).setChecked(!this.getChecked()&&void 0);return this.insertAfter(r,n),r}collapseAtStart(t){const n=kr();this.getChildren().forEach(i=>n.append(i));const r=this.getParentOrThrow(),s=r.getParentOrThrow(),a=da(s);if(r.getChildrenSize()===1)if(a)r.remove(),s.select();else{r.insertBefore(n),r.remove();const i=t.anchor,l=t.focus,c=n.getKey();i.type==="element"&&i.getNode().is(this)&&i.set(c,i.offset,"element"),l.type==="element"&&l.getNode().is(this)&&l.set(c,l.offset,"element")}else r.insertBefore(n),this.remove();return!0}getValue(){return this.getLatest().__value}setValue(t){const n=this.getWritable();return n.__value=t,n}getChecked(){const t=this.getLatest();let n;const r=this.getParent();return Jn(r)&&(n=r.getListType()),n==="check"?!!t.__checked:void 0}setChecked(t){const n=this.getWritable();return n.__checked=t,n}toggleChecked(){const t=this.getWritable();return t.setChecked(!t.__checked)}getIndent(){const t=this.getParent();if(t===null||!this.isAttached())return this.getLatest().__indent;let n=t.getParentOrThrow(),r=0;for(;da(n);)n=n.getParentOrThrow().getParentOrThrow(),r++;return r}setIndent(t){typeof t!="number"&&o0(117),(t=Math.floor(t))>=0||o0(199);let n=this.getIndent();for(;n!==t;)n<t?(bjt(this),n++):(_jt(this),n--);return this}canInsertAfter(t){return da(t)}canReplaceWith(t){return da(t)}canMergeWith(t){return da(t)||Id(t)}extractWithChild(t,n){if(!Be(n))return!1;const r=n.anchor.getNode(),s=n.focus.getNode();return this.isParentOf(r)&&this.isParentOf(s)&&this.getTextContent().length===n.getTextContent().length}isParentRequired(){return!0}createParentElementNode(){return oc("bullet")}canMergeWhenEmpty(){return!0}};function wjt(e){if(e.classList.contains("task-list-item")){for(const n of e.children)if(n.tagName==="INPUT")return Cjt(n)}const t=e.getAttribute("aria-checked");return{node:ju(t==="true"||t!=="false"&&void 0)}}function Cjt(e){return e.getAttribute("type")!=="checkbox"?{node:null}:{node:ju(e.hasAttribute("checked"))}}function ju(e){return Di(new PT(void 0,e))}function da(e){return e instanceof PT}let LT=class extends qo{__tag;__start;__listType;$config(){return this.config("list",{$transform:t=>{(function(n){const r=n.getNextSibling();Jn(r)&&n.getListType()===r.getListType()&&dW(n,r)})(t),vjt(t)},extends:qo,importDOM:{ol:()=>({conversion:Are,priority:0}),ul:()=>({conversion:Are,priority:0})}})}constructor(t="number",n=1,r){super(r);const s=Ejt[t]||t;this.__listType=s,this.__tag=s==="number"?"ol":"ul",this.__start=n}afterCloneFrom(t){super.afterCloneFrom(t),this.__listType=t.__listType,this.__tag=t.__tag,this.__start=t.__start}getTag(){return this.getLatest().__tag}setListType(t){const n=this.getWritable();return n.__listType=t,n.__tag=t==="number"?"ol":"ul",n}getListType(){return this.getLatest().__listType}getStart(){return this.getLatest().__start}setStart(t){const n=this.getWritable();return n.__start=t,n}createDOM(t,n){const r=this.__tag,s=document.createElement(r);return this.__start!==1&&s.setAttribute("start",String(this.__start)),s.__lexicalListType=this.__listType,jre(s,t.theme,this),s}updateDOM(t,n,r){return t.__tag!==this.__tag||t.__listType!==this.__listType||(jre(n,r.theme,this),!1)}updateFromJSON(t){return super.updateFromJSON(t).setListType(t.listType).setStart(t.start)}exportDOM(t){const n=this.createDOM(t._config,t);return Jr(n)&&(this.__start!==1&&n.setAttribute("start",String(this.__start)),this.__listType==="check"&&n.setAttribute("__lexicalListType","check")),{element:n}}exportJSON(){return{...super.exportJSON(),listType:this.getListType(),start:this.getStart(),tag:this.getTag()}}canBeEmpty(){return!1}canIndent(){return!1}splice(t,n,r){let s=r;for(let a=0;a<r.length;a++){const i=r[a];da(i)||(s===r&&(s=[...r]),s[a]=ju().append(!Ae(i)||Jn(i)||i.isInline()?i:Zn(i.getTextContent())))}return super.splice(t,n,s)}extractWithChild(t){return da(t)}};function jre(e,t,n){const r=[],s=[],a=t.list;if(a!==void 0){const i=a[`${n.__tag}Depth`]||[],l=xjt(n)-1,c=l%i.length,u=i[c],f=a[n.__tag];let m;const p=a.nested,h=a.checklist;if(p!==void 0&&p.list&&(m=p.list),f!==void 0&&r.push(f),h!==void 0&&n.__listType==="check"&&r.push(h),u!==void 0){r.push(...qM(u));for(let g=0;g<i.length;g++)g!==c&&s.push(n.__tag+g)}if(m!==void 0){const g=qM(m);l>1?r.push(...g):s.push(...g)}}s.length>0&&nW(e,...s),r.length>0&&_c(e,...r)}function Sjt(e){const t=[];for(let n=0;n<e.length;n++){const r=e[n];if(da(r)){t.push(r);const s=r.getChildren();s.length>1&&s.forEach(a=>{Jn(a)&&t.push(Nre(a))})}else t.push(Nre(r))}return t}function Are(e){const t=e.nodeName.toLowerCase();let n=null;return t==="ol"?n=oc("number",e.start):t==="ul"&&(n=function(r){if(r.getAttribute("__lexicallisttype")==="check"||r.classList.contains("contains-task-list"))return!0;for(const s of r.childNodes)if(Jr(s)&&s.hasAttribute("aria-checked"))return!0;return!1}(e)?oc("check"):oc("bullet")),{after:Sjt,node:n}}const Ejt={ol:"number",ul:"bullet"};function oc(e="number",t=1){return Di(new LT(e,t))}function Jn(e){return e instanceof LT}const TEe=typeof window<"u"&&window.document!==void 0&&window.document.createElement!==void 0,Mjt=TEe&&"documentMode"in document?document.documentMode:null;!(!TEe||!("InputEvent"in window)||Mjt)&&"getTargetRanges"in new window.InputEvent("input");let fW=class NEe extends qo{static getType(){return"quote"}static clone(t){return new NEe(t.__key)}createDOM(t){const n=document.createElement("blockquote");return _c(n,t.theme.quote),n}updateDOM(t,n){return!1}static importDOM(){return{blockquote:t=>({conversion:kjt,priority:0})}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Jr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return mW().updateFromJSON(t)}insertNewAfter(t,n){const r=kr(),s=this.getDirection();return r.setDirection(s),this.insertAfter(r,n),r}collapseAtStart(){const t=kr();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}canMergeWhenEmpty(){return!0}};function mW(){return Di(new fW)}function j7(e){return e instanceof fW}let pW=class jEe extends qo{__tag;static getType(){return"heading"}static clone(t){return new jEe(t.__tag,t.__key)}constructor(t,n){super(n),this.__tag=t}getTag(){return this.__tag}setTag(t){const n=this.getWritable();return this.__tag=t,n}createDOM(t){const n=this.__tag,r=document.createElement(n),s=t.theme.heading;if(s!==void 0){const a=s[n];_c(r,a)}return r}updateDOM(t,n,r){return t.__tag!==this.__tag}static importDOM(){return{h1:t=>({conversion:ih,priority:0}),h2:t=>({conversion:ih,priority:0}),h3:t=>({conversion:ih,priority:0}),h4:t=>({conversion:ih,priority:0}),h5:t=>({conversion:ih,priority:0}),h6:t=>({conversion:ih,priority:0}),p:t=>{const n=t.firstChild;return n!==null&&Ire(n)?{conversion:()=>({node:null}),priority:3}:null},span:t=>Ire(t)?{conversion:n=>({node:Gh("h1")}),priority:3}:null}}exportDOM(t){const{element:n}=super.exportDOM(t);if(Jr(n)){this.isEmpty()&&n.append(document.createElement("br"));const r=this.getFormatType();r&&(n.style.textAlign=r);const s=this.getDirection();s&&(n.dir=s)}return{element:n}}static importJSON(t){return Gh(t.tag).updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setTag(t.tag)}exportJSON(){return{...super.exportJSON(),tag:this.getTag()}}insertNewAfter(t,n=!0){const r=t?t.anchor.offset:0,s=this.getLastDescendant(),a=!s||t&&t.anchor.key===s.getKey()&&r===s.getTextContentSize()||!t?kr():Gh(this.getTag()),i=this.getDirection();if(a.setDirection(i),this.insertAfter(a,n),r===0&&!this.isEmpty()&&t){const l=kr();l.select(),this.replace(l,!0)}return a}collapseAtStart(){const t=this.isEmpty()?kr():Gh(this.getTag());return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}extractWithChild(){return!0}};function Ire(e){return e.nodeName.toLowerCase()==="span"&&e.style.fontSize==="26pt"}function ih(e){const t=e.nodeName.toLowerCase();let n=null;return t!=="h1"&&t!=="h2"&&t!=="h3"&&t!=="h4"&&t!=="h5"&&t!=="h6"||(n=Gh(t),e.style!==null&&(qV(e,n),n.setFormat(e.style.textAlign))),{node:n}}function kjt(e){const t=mW();return e.style!==null&&(t.setFormat(e.style.textAlign),qV(e,t)),{node:t}}function Gh(e="h1"){return Di(new pW(e))}function Tjt(e){return e instanceof pW}var zA={exports:{}},Rre;function Njt(){return Rre||(Rre=1,function(e){var t=typeof window<"u"?window:typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope?self:{};/**
 * Prism: Lightweight, robust, elegant syntax highlighting
 *
 * @license MIT <https://opensource.org/licenses/MIT>
 * @author Lea Verou <https://lea.verou.me>
 * @namespace
 * @public
 */var n=function(r){var s=/(?:^|\s)lang(?:uage)?-([\w-]+)(?=\s|$)/i,a=0,i={},l={manual:r.Prism&&r.Prism.manual,disableWorkerMessageHandler:r.Prism&&r.Prism.disableWorkerMessageHandler,util:{encode:function b(_){return _ instanceof c?new c(_.type,b(_.content),_.alias):Array.isArray(_)?_.map(b):_.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(b){return Object.prototype.toString.call(b).slice(8,-1)},objId:function(b){return b.__id||Object.defineProperty(b,"__id",{value:++a}),b.__id},clone:function b(_,w){w=w||{};var C,S;switch(l.util.type(_)){case"Object":if(S=l.util.objId(_),w[S])return w[S];C={},w[S]=C;for(var E in _)_.hasOwnProperty(E)&&(C[E]=b(_[E],w));return C;case"Array":return S=l.util.objId(_),w[S]?w[S]:(C=[],w[S]=C,_.forEach(function(k,M){C[M]=b(k,w)}),C);default:return _}},getLanguage:function(b){for(;b;){var _=s.exec(b.className);if(_)return _[1].toLowerCase();b=b.parentElement}return"none"},setLanguage:function(b,_){b.className=b.className.replace(RegExp(s,"gi"),""),b.classList.add("language-"+_)},currentScript:function(){if(typeof document>"u")return null;if(document.currentScript&&document.currentScript.tagName==="SCRIPT")return document.currentScript;try{throw new Error}catch(C){var b=(/at [^(\r\n]*\((.*):[^:]+:[^:]+\)$/i.exec(C.stack)||[])[1];if(b){var _=document.getElementsByTagName("script");for(var w in _)if(_[w].src==b)return _[w]}return null}},isActive:function(b,_,w){for(var C="no-"+_;b;){var S=b.classList;if(S.contains(_))return!0;if(S.contains(C))return!1;b=b.parentElement}return!!w}},languages:{plain:i,plaintext:i,text:i,txt:i,extend:function(b,_){var w=l.util.clone(l.languages[b]);for(var C in _)w[C]=_[C];return w},insertBefore:function(b,_,w,C){C=C||l.languages;var S=C[b],E={};for(var k in S)if(S.hasOwnProperty(k)){if(k==_)for(var M in w)w.hasOwnProperty(M)&&(E[M]=w[M]);w.hasOwnProperty(k)||(E[k]=S[k])}var j=C[b];return C[b]=E,l.languages.DFS(l.languages,function(R,O){O===j&&R!=b&&(this[R]=E)}),E},DFS:function b(_,w,C,S){S=S||{};var E=l.util.objId;for(var k in _)if(_.hasOwnProperty(k)){w.call(_,k,_[k],C||k);var M=_[k],j=l.util.type(M);j==="Object"&&!S[E(M)]?(S[E(M)]=!0,b(M,w,null,S)):j==="Array"&&!S[E(M)]&&(S[E(M)]=!0,b(M,w,k,S))}}},plugins:{},highlightAll:function(b,_){l.highlightAllUnder(document,b,_)},highlightAllUnder:function(b,_,w){var C={callback:w,container:b,selector:'code[class*="language-"], [class*="language-"] code, code[class*="lang-"], [class*="lang-"] code'};l.hooks.run("before-highlightall",C),C.elements=Array.prototype.slice.apply(C.container.querySelectorAll(C.selector)),l.hooks.run("before-all-elements-highlight",C);for(var S=0,E;E=C.elements[S++];)l.highlightElement(E,_===!0,C.callback)},highlightElement:function(b,_,w){var C=l.util.getLanguage(b),S=l.languages[C];l.util.setLanguage(b,C);var E=b.parentElement;E&&E.nodeName.toLowerCase()==="pre"&&l.util.setLanguage(E,C);var k=b.textContent,M={element:b,language:C,grammar:S,code:k};function j(O){M.highlightedCode=O,l.hooks.run("before-insert",M),M.element.innerHTML=M.highlightedCode,l.hooks.run("after-highlight",M),l.hooks.run("complete",M),w&&w.call(M.element)}if(l.hooks.run("before-sanity-check",M),E=M.element.parentElement,E&&E.nodeName.toLowerCase()==="pre"&&!E.hasAttribute("tabindex")&&E.setAttribute("tabindex","0"),!M.code){l.hooks.run("complete",M),w&&w.call(M.element);return}if(l.hooks.run("before-highlight",M),!M.grammar){j(l.util.encode(M.code));return}if(_&&r.Worker){var R=new Worker(l.filename);R.onmessage=function(O){j(O.data)},R.postMessage(JSON.stringify({language:M.language,code:M.code,immediateClose:!0}))}else j(l.highlight(M.code,M.grammar,M.language))},highlight:function(b,_,w){var C={code:b,grammar:_,language:w};if(l.hooks.run("before-tokenize",C),!C.grammar)throw new Error('The language "'+C.language+'" has no grammar.');return C.tokens=l.tokenize(C.code,C.grammar),l.hooks.run("after-tokenize",C),c.stringify(l.util.encode(C.tokens),C.language)},tokenize:function(b,_){var w=_.rest;if(w){for(var C in w)_[C]=w[C];delete _.rest}var S=new m;return p(S,S.head,b),f(b,S,_,S.head,0),g(S)},hooks:{all:{},add:function(b,_){var w=l.hooks.all;w[b]=w[b]||[],w[b].push(_)},run:function(b,_){var w=l.hooks.all[b];if(!(!w||!w.length))for(var C=0,S;S=w[C++];)S(_)}},Token:c};r.Prism=l;function c(b,_,w,C){this.type=b,this.content=_,this.alias=w,this.length=(C||"").length|0}c.stringify=function b(_,w){if(typeof _=="string")return _;if(Array.isArray(_)){var C="";return _.forEach(function(j){C+=b(j,w)}),C}var S={type:_.type,content:b(_.content,w),tag:"span",classes:["token",_.type],attributes:{},language:w},E=_.alias;E&&(Array.isArray(E)?Array.prototype.push.apply(S.classes,E):S.classes.push(E)),l.hooks.run("wrap",S);var k="";for(var M in S.attributes)k+=" "+M+'="'+(S.attributes[M]||"").replace(/"/g,"&quot;")+'"';return"<"+S.tag+' class="'+S.classes.join(" ")+'"'+k+">"+S.content+"</"+S.tag+">"};function u(b,_,w,C){b.lastIndex=_;var S=b.exec(w);if(S&&C&&S[1]){var E=S[1].length;S.index+=E,S[0]=S[0].slice(E)}return S}function f(b,_,w,C,S,E){for(var k in w)if(!(!w.hasOwnProperty(k)||!w[k])){var M=w[k];M=Array.isArray(M)?M:[M];for(var j=0;j<M.length;++j){if(E&&E.cause==k+","+j)return;var R=M[j],O=R.inside,D=!!R.lookbehind,P=!!R.greedy,A=R.alias;if(P&&!R.pattern.global){var T=R.pattern.toString().match(/[imsuy]*$/)[0];R.pattern=RegExp(R.pattern.source,T+"g")}for(var N=R.pattern||R,L=C.next,U=S;L!==_.tail&&!(E&&U>=E.reach);U+=L.value.length,L=L.next){var $=L.value;if(_.length>b.length)return;if(!($ instanceof c)){var V=1,W;if(P){if(W=u(N,U,b,D),!W||W.index>=b.length)break;var K=W.index,Q=W.index+W[0].length,q=U;for(q+=L.value.length;K>=q;)L=L.next,q+=L.value.length;if(q-=L.value.length,U=q,L.value instanceof c)continue;for(var H=L;H!==_.tail&&(q<Q||typeof H.value=="string");H=H.next)V++,q+=H.value.length;V--,$=b.slice(U,q),W.index-=U}else if(W=u(N,0,$,D),!W)continue;var K=W.index,G=W[0],ee=$.slice(0,K),Y=$.slice(K+G.length),te=U+$.length;E&&te>E.reach&&(E.reach=te);var se=L.prev;ee&&(se=p(_,se,ee),U+=ee.length),h(_,se,V);var ae=new c(k,O?l.tokenize(G,O):G,A,G);if(L=p(_,se,ae),Y&&p(_,L,Y),V>1){var pe={cause:k+","+j,reach:te};f(b,_,w,L.prev,U,pe),E&&pe.reach>E.reach&&(E.reach=pe.reach)}}}}}}function m(){var b={value:null,prev:null,next:null},_={value:null,prev:b,next:null};b.next=_,this.head=b,this.tail=_,this.length=0}function p(b,_,w){var C=_.next,S={value:w,prev:_,next:C};return _.next=S,C.prev=S,b.length++,S}function h(b,_,w){for(var C=_.next,S=0;S<w&&C!==b.tail;S++)C=C.next;_.next=C,C.prev=_,b.length-=S}function g(b){for(var _=[],w=b.head.next;w!==b.tail;)_.push(w.value),w=w.next;return _}if(!r.document)return r.addEventListener&&(l.disableWorkerMessageHandler||r.addEventListener("message",function(b){var _=JSON.parse(b.data),w=_.language,C=_.code,S=_.immediateClose;r.postMessage(l.highlight(C,l.languages[w],w)),S&&r.close()},!1)),l;var y=l.util.currentScript();y&&(l.filename=y.src,y.hasAttribute("data-manual")&&(l.manual=!0));function x(){l.manual||l.highlightAll()}if(!l.manual){var v=document.readyState;v==="loading"||v==="interactive"&&y&&y.defer?document.addEventListener("DOMContentLoaded",x):window.requestAnimationFrame?window.requestAnimationFrame(x):window.setTimeout(x,16)}return l}(t);e.exports&&(e.exports=n),typeof bi<"u"&&(bi.Prism=n),n.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]},n.languages.markup.tag.inside["attr-value"].inside.entity=n.languages.markup.entity,n.languages.markup.doctype.inside["internal-subset"].inside=n.languages.markup,n.hooks.add("wrap",function(r){r.type==="entity"&&(r.attributes.title=r.content.replace(/&amp;/,"&"))}),Object.defineProperty(n.languages.markup.tag,"addInlined",{value:function(s,a){var i={};i["language-"+a]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:n.languages[a]},i.cdata=/^<!\[CDATA\[|\]\]>$/i;var l={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:i}};l["language-"+a]={pattern:/[\s\S]+/,inside:n.languages[a]};var c={};c[s]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return s}),"i"),lookbehind:!0,greedy:!0,inside:l},n.languages.insertBefore("markup","cdata",c)}}),Object.defineProperty(n.languages.markup.tag,"addAttribute",{value:function(r,s){n.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+r+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[s,"language-"+s],inside:n.languages[s]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}}),n.languages.html=n.languages.markup,n.languages.mathml=n.languages.markup,n.languages.svg=n.languages.markup,n.languages.xml=n.languages.extend("markup",{}),n.languages.ssml=n.languages.xml,n.languages.atom=n.languages.xml,n.languages.rss=n.languages.xml,function(r){var s=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;r.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+s.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+s.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+s.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+s.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:s,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},r.languages.css.atrule.inside.rest=r.languages.css;var a=r.languages.markup;a&&(a.tag.addInlined("style","css"),a.tag.addAttribute("style","css"))}(n),n.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/},n.languages.javascript=n.languages.extend("clike",{"class-name":[n.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/}),n.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/,n.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:n.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:n.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:n.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:n.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:n.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/}),n.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:n.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}}),n.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}}),n.languages.markup&&(n.languages.markup.tag.addInlined("script","javascript"),n.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript")),n.languages.js=n.languages.javascript,function(){if(typeof n>"u"||typeof document>"u")return;Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector);var r="Loading",s=function(y,x){return" Error "+y+" while fetching file: "+x},a=" Error: File does not exist or is empty",i={js:"javascript",py:"python",rb:"ruby",ps1:"powershell",psm1:"powershell",sh:"bash",bat:"batch",h:"c",tex:"latex"},l="data-src-status",c="loading",u="loaded",f="failed",m="pre[data-src]:not(["+l+'="'+u+'"]):not(['+l+'="'+c+'"])';function p(y,x,v){var b=new XMLHttpRequest;b.open("GET",y,!0),b.onreadystatechange=function(){b.readyState==4&&(b.status<400&&b.responseText?x(b.responseText):b.status>=400?v(s(b.status,b.statusText)):v(a))},b.send(null)}function h(y){var x=/^\s*(\d+)\s*(?:(,)\s*(?:(\d+)\s*)?)?$/.exec(y||"");if(x){var v=Number(x[1]),b=x[2],_=x[3];return b?_?[v,Number(_)]:[v,void 0]:[v,v]}}n.hooks.add("before-highlightall",function(y){y.selector+=", "+m}),n.hooks.add("before-sanity-check",function(y){var x=y.element;if(x.matches(m)){y.code="",x.setAttribute(l,c);var v=x.appendChild(document.createElement("CODE"));v.textContent=r;var b=x.getAttribute("data-src"),_=y.language;if(_==="none"){var w=(/\.(\w+)$/.exec(b)||[,"none"])[1];_=i[w]||w}n.util.setLanguage(v,_),n.util.setLanguage(x,_);var C=n.plugins.autoloader;C&&C.loadLanguages(_),p(b,function(S){x.setAttribute(l,u);var E=h(x.getAttribute("data-range"));if(E){var k=S.split(/\r\n?|\n/g),M=E[0],j=E[1]==null?k.length:E[1];M<0&&(M+=k.length),M=Math.max(0,Math.min(M-1,k.length)),j<0&&(j+=k.length),j=Math.max(0,Math.min(j,k.length)),S=k.slice(M,j).join(`
`),x.hasAttribute("data-start")||x.setAttribute("data-start",String(M+1))}v.textContent=S,n.highlightElement(v)},function(S){x.setAttribute(l,f),v.textContent=S})}}),n.plugins.fileHighlight={highlight:function(x){for(var v=(x||document).querySelectorAll(m),b=0,_;_=v[b++];)n.highlightElement(_)}};var g=!1;n.fileHighlight=function(){g||(console.warn("Prism.fileHighlight is deprecated. Use `Prism.plugins.fileHighlight.highlight` instead."),g=!0),n.plugins.fileHighlight.highlight.apply(this,arguments)}}()}(zA)),zA.exports}Njt();Prism.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|trait)\s+|\bcatch\s+\()[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:break|catch|continue|do|else|finally|for|function|if|in|instanceof|new|null|return|throw|try|while)\b/,boolean:/\b(?:false|true)\b/,function:/\b\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/[<>]=?|[!=]=?=?|--?|\+\+?|&&?|\|\|?|[?*/~^%]/,punctuation:/[{}[\];(),.:]/};Prism.languages.javascript=Prism.languages.extend("clike",{"class-name":[Prism.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$A-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\.(?:constructor|prototype))/,lookbehind:!0}],keyword:[{pattern:/((?:^|\})\s*)catch\b/,lookbehind:!0},{pattern:/(^|[^.]|\.\.\.\s*)\b(?:as|assert(?=\s*\{)|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally(?=\s*(?:\{|$))|for|from(?=\s*(?:['"]|$))|function|(?:get|set)(?=\s*(?:[#\[$\w\xA0-\uFFFF]|$))|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],function:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,number:{pattern:RegExp(/(^|[^\w$])/.source+"(?:"+(/NaN|Infinity/.source+"|"+/0[bB][01]+(?:_[01]+)*n?/.source+"|"+/0[oO][0-7]+(?:_[0-7]+)*n?/.source+"|"+/0[xX][\dA-Fa-f]+(?:_[\dA-Fa-f]+)*n?/.source+"|"+/\d+(?:_\d+)*n/.source+"|"+/(?:\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\.\d+(?:_\d+)*)(?:[Ee][+-]?\d+(?:_\d+)*)?/.source)+")"+/(?![\w$])/.source),lookbehind:!0},operator:/--|\+\+|\*\*=?|=>|&&=?|\|\|=?|[!=]==|<<=?|>>>?=?|[-+*/%&|^!=<>]=?|\.{3}|\?\?=?|\?\.?|[~:]/});Prism.languages.javascript["class-name"][0].pattern=/(\b(?:class|extends|implements|instanceof|interface|new)\s+)[\w.\\]+/;Prism.languages.insertBefore("javascript","keyword",{regex:{pattern:RegExp(/((?:^|[^$\w\xA0-\uFFFF."'\])\s]|\b(?:return|yield))\s*)/.source+/\//.source+"(?:"+/(?:\[(?:[^\]\\\r\n]|\\.)*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}/.source+"|"+/(?:\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.|\[(?:[^[\]\\\r\n]|\\.)*\])*\])*\]|\\.|[^/\\\[\r\n])+\/[dgimyus]{0,7}v[dgimyus]{0,7}/.source+")"+/(?=(?:\s|\/\*(?:[^*]|\*(?!\/))*\*\/)*(?:$|[\r\n,.;:})\]]|\/\/))/.source),lookbehind:!0,greedy:!0,inside:{"regex-source":{pattern:/^(\/)[\s\S]+(?=\/[a-z]*$)/,lookbehind:!0,alias:"language-regex",inside:Prism.languages.regex},"regex-delimiter":/^\/|\/$/,"regex-flags":/^[a-z]+$/}},"function-variable":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*)?\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\))/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(^|[^$\w\xA0-\uFFFF])(?!\s)[_$a-z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*=>)/i,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*=>)/,lookbehind:!0,inside:Prism.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*)\(\s*|\]\s*\(\s*)(?!\s)(?:[^()\s]|\s+(?![\s)])|\([^()]*\))+(?=\s*\)\s*\{)/,lookbehind:!0,inside:Prism.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});Prism.languages.insertBefore("javascript","string",{hashbang:{pattern:/^#!.*/,greedy:!0,alias:"comment"},"template-string":{pattern:/`(?:\\[\s\S]|\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}|(?!\$\{)[^\\`])*`/,greedy:!0,inside:{"template-punctuation":{pattern:/^`|`$/,alias:"string"},interpolation:{pattern:/((?:^|[^\\])(?:\\{2})*)\$\{(?:[^{}]|\{(?:[^{}]|\{[^}]*\})*\})+\}/,lookbehind:!0,inside:{"interpolation-punctuation":{pattern:/^\$\{|\}$/,alias:"punctuation"},rest:Prism.languages.javascript}},string:/[\s\S]+/}},"string-property":{pattern:/((?:^|[,{])[ \t]*)(["'])(?:\\(?:\r\n|[\s\S])|(?!\2)[^\\\r\n])*\2(?=\s*:)/m,lookbehind:!0,greedy:!0,alias:"property"}});Prism.languages.insertBefore("javascript","operator",{"literal-property":{pattern:/((?:^|[,{])[ \t]*)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?=\s*:)/m,lookbehind:!0,alias:"property"}});Prism.languages.markup&&(Prism.languages.markup.tag.addInlined("script","javascript"),Prism.languages.markup.tag.addAttribute(/on(?:abort|blur|change|click|composition(?:end|start|update)|dblclick|error|focus(?:in|out)?|key(?:down|up)|load|mouse(?:down|enter|leave|move|out|over|up)|reset|resize|scroll|select|slotchange|submit|unload|wheel)/.source,"javascript"));Prism.languages.js=Prism.languages.javascript;Prism.languages.markup={comment:{pattern:/<!--(?:(?!<!--)[\s\S])*?-->/,greedy:!0},prolog:{pattern:/<\?[\s\S]+?\?>/,greedy:!0},doctype:{pattern:/<!DOCTYPE(?:[^>"'[\]]|"[^"]*"|'[^']*')+(?:\[(?:[^<"'\]]|"[^"]*"|'[^']*'|<(?!!--)|<!--(?:[^-]|-(?!->))*-->)*\]\s*)?>/i,greedy:!0,inside:{"internal-subset":{pattern:/(^[^\[]*\[)[\s\S]+(?=\]>$)/,lookbehind:!0,greedy:!0,inside:null},string:{pattern:/"[^"]*"|'[^']*'/,greedy:!0},punctuation:/^<!|>$|[[\]]/,"doctype-tag":/^DOCTYPE/i,name:/[^\s<>'"]+/}},cdata:{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,greedy:!0},tag:{pattern:/<\/?(?!\d)[^\s>\/=$<%]+(?:\s(?:\s*[^\s>\/=]+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))|(?=[\s/>])))+)?\s*\/?>/,greedy:!0,inside:{tag:{pattern:/^<\/?[^\s>\/]+/,inside:{punctuation:/^<\/?/,namespace:/^[^\s>\/:]+:/}},"special-attr":[],"attr-value":{pattern:/=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+)/,inside:{punctuation:[{pattern:/^=/,alias:"attr-equals"},{pattern:/^(\s*)["']|["']$/,lookbehind:!0}]}},punctuation:/\/?>/,"attr-name":{pattern:/[^\s>\/]+/,inside:{namespace:/^[^\s>\/:]+:/}}}},entity:[{pattern:/&[\da-z]{1,8};/i,alias:"named-entity"},/&#x?[\da-f]{1,8};/i]};Prism.languages.markup.tag.inside["attr-value"].inside.entity=Prism.languages.markup.entity;Prism.languages.markup.doctype.inside["internal-subset"].inside=Prism.languages.markup;Prism.hooks.add("wrap",function(e){e.type==="entity"&&(e.attributes.title=e.content.replace(/&amp;/,"&"))});Object.defineProperty(Prism.languages.markup.tag,"addInlined",{value:function(t,n){var r={};r["language-"+n]={pattern:/(^<!\[CDATA\[)[\s\S]+?(?=\]\]>$)/i,lookbehind:!0,inside:Prism.languages[n]},r.cdata=/^<!\[CDATA\[|\]\]>$/i;var s={"included-cdata":{pattern:/<!\[CDATA\[[\s\S]*?\]\]>/i,inside:r}};s["language-"+n]={pattern:/[\s\S]+/,inside:Prism.languages[n]};var a={};a[t]={pattern:RegExp(/(<__[^>]*>)(?:<!\[CDATA\[(?:[^\]]|\](?!\]>))*\]\]>|(?!<!\[CDATA\[)[\s\S])*?(?=<\/__>)/.source.replace(/__/g,function(){return t}),"i"),lookbehind:!0,greedy:!0,inside:s},Prism.languages.insertBefore("markup","cdata",a)}});Object.defineProperty(Prism.languages.markup.tag,"addAttribute",{value:function(e,t){Prism.languages.markup.tag.inside["special-attr"].push({pattern:RegExp(/(^|["'\s])/.source+"(?:"+e+")"+/\s*=\s*(?:"[^"]*"|'[^']*'|[^\s'">=]+(?=[\s>]))/.source,"i"),lookbehind:!0,inside:{"attr-name":/^[^\s=]+/,"attr-value":{pattern:/=[\s\S]+/,inside:{value:{pattern:/(^=\s*(["']|(?!["'])))\S[\s\S]*(?=\2$)/,lookbehind:!0,alias:[t,"language-"+t],inside:Prism.languages[t]},punctuation:[{pattern:/^=/,alias:"attr-equals"},/"|'/]}}}})}});Prism.languages.html=Prism.languages.markup;Prism.languages.mathml=Prism.languages.markup;Prism.languages.svg=Prism.languages.markup;Prism.languages.xml=Prism.languages.extend("markup",{});Prism.languages.ssml=Prism.languages.xml;Prism.languages.atom=Prism.languages.xml;Prism.languages.rss=Prism.languages.xml;(function(e){var t=/(?:\\.|[^\\\n\r]|(?:\n|\r\n?)(?![\r\n]))/.source;function n(f){return f=f.replace(/<inner>/g,function(){return t}),RegExp(/((?:^|[^\\])(?:\\{2})*)/.source+"(?:"+f+")")}var r=/(?:\\.|``(?:[^`\r\n]|`(?!`))+``|`[^`\r\n]+`|[^\\|\r\n`])+/.source,s=/\|?__(?:\|__)+\|?(?:(?:\n|\r\n?)|(?![\s\S]))/.source.replace(/__/g,function(){return r}),a=/\|?[ \t]*:?-{3,}:?[ \t]*(?:\|[ \t]*:?-{3,}:?[ \t]*)+\|?(?:\n|\r\n?)/.source;e.languages.markdown=e.languages.extend("markup",{}),e.languages.insertBefore("markdown","prolog",{"front-matter-block":{pattern:/(^(?:\s*[\r\n])?)---(?!.)[\s\S]*?[\r\n]---(?!.)/,lookbehind:!0,greedy:!0,inside:{punctuation:/^---|---$/,"front-matter":{pattern:/\S+(?:\s+\S+)*/,alias:["yaml","language-yaml"],inside:e.languages.yaml}}},blockquote:{pattern:/^>(?:[\t ]*>)*/m,alias:"punctuation"},table:{pattern:RegExp("^"+s+a+"(?:"+s+")*","m"),inside:{"table-data-rows":{pattern:RegExp("^("+s+a+")(?:"+s+")*$"),lookbehind:!0,inside:{"table-data":{pattern:RegExp(r),inside:e.languages.markdown},punctuation:/\|/}},"table-line":{pattern:RegExp("^("+s+")"+a+"$"),lookbehind:!0,inside:{punctuation:/\||:?-{3,}:?/}},"table-header-row":{pattern:RegExp("^"+s+"$"),inside:{"table-header":{pattern:RegExp(r),alias:"important",inside:e.languages.markdown},punctuation:/\|/}}}},code:[{pattern:/((?:^|\n)[ \t]*\n|(?:^|\r\n?)[ \t]*\r\n?)(?: {4}|\t).+(?:(?:\n|\r\n?)(?: {4}|\t).+)*/,lookbehind:!0,alias:"keyword"},{pattern:/^```[\s\S]*?^```$/m,greedy:!0,inside:{"code-block":{pattern:/^(```.*(?:\n|\r\n?))[\s\S]+?(?=(?:\n|\r\n?)^```$)/m,lookbehind:!0},"code-language":{pattern:/^(```).+/,lookbehind:!0},punctuation:/```/}}],title:[{pattern:/\S.*(?:\n|\r\n?)(?:==+|--+)(?=[ \t]*$)/m,alias:"important",inside:{punctuation:/==+$|--+$/}},{pattern:/(^\s*)#.+/m,lookbehind:!0,alias:"important",inside:{punctuation:/^#+|#+$/}}],hr:{pattern:/(^\s*)([*-])(?:[\t ]*\2){2,}(?=\s*$)/m,lookbehind:!0,alias:"punctuation"},list:{pattern:/(^\s*)(?:[*+-]|\d+\.)(?=[\t ].)/m,lookbehind:!0,alias:"punctuation"},"url-reference":{pattern:/!?\[[^\]]+\]:[\t ]+(?:\S+|<(?:\\.|[^>\\])+>)(?:[\t ]+(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\)))?/,inside:{variable:{pattern:/^(!?\[)[^\]]+/,lookbehind:!0},string:/(?:"(?:\\.|[^"\\])*"|'(?:\\.|[^'\\])*'|\((?:\\.|[^)\\])*\))$/,punctuation:/^[\[\]!:]|[<>]/},alias:"url"},bold:{pattern:n(/\b__(?:(?!_)<inner>|_(?:(?!_)<inner>)+_)+__\b|\*\*(?:(?!\*)<inner>|\*(?:(?!\*)<inner>)+\*)+\*\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^..)[\s\S]+(?=..$)/,lookbehind:!0,inside:{}},punctuation:/\*\*|__/}},italic:{pattern:n(/\b_(?:(?!_)<inner>|__(?:(?!_)<inner>)+__)+_\b|\*(?:(?!\*)<inner>|\*\*(?:(?!\*)<inner>)+\*\*)+\*/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^.)[\s\S]+(?=.$)/,lookbehind:!0,inside:{}},punctuation:/[*_]/}},strike:{pattern:n(/(~~?)(?:(?!~)<inner>)+\2/.source),lookbehind:!0,greedy:!0,inside:{content:{pattern:/(^~~?)[\s\S]+(?=\1$)/,lookbehind:!0,inside:{}},punctuation:/~~?/}},"code-snippet":{pattern:/(^|[^\\`])(?:``[^`\r\n]+(?:`[^`\r\n]+)*``(?!`)|`[^`\r\n]+`(?!`))/,lookbehind:!0,greedy:!0,alias:["code","keyword"]},url:{pattern:n(/!?\[(?:(?!\])<inner>)+\](?:\([^\s)]+(?:[\t ]+"(?:\\.|[^"\\])*")?\)|[ \t]?\[(?:(?!\])<inner>)+\])/.source),lookbehind:!0,greedy:!0,inside:{operator:/^!/,content:{pattern:/(^\[)[^\]]+(?=\])/,lookbehind:!0,inside:{}},variable:{pattern:/(^\][ \t]?\[)[^\]]+(?=\]$)/,lookbehind:!0},url:{pattern:/(^\]\()[^\s)]+/,lookbehind:!0},string:{pattern:/(^[ \t]+)"(?:\\.|[^"\\])*"(?=\)$)/,lookbehind:!0}}}}),["url","bold","italic","strike"].forEach(function(f){["url","bold","italic","strike","code-snippet"].forEach(function(m){f!==m&&(e.languages.markdown[f].inside.content.inside[m]=e.languages.markdown[m])})}),e.hooks.add("after-tokenize",function(f){if(f.language!=="markdown"&&f.language!=="md")return;function m(p){if(!(!p||typeof p=="string"))for(var h=0,g=p.length;h<g;h++){var y=p[h];if(y.type!=="code"){m(y.content);continue}var x=y.content[1],v=y.content[3];if(x&&v&&x.type==="code-language"&&v.type==="code-block"&&typeof x.content=="string"){var b=x.content.replace(/\b#/g,"sharp").replace(/\b\+\+/g,"pp");b=(/[a-z][\w-]*/i.exec(b)||[""])[0].toLowerCase();var _="language-"+b;v.alias?typeof v.alias=="string"?v.alias=[v.alias,_]:v.alias.push(_):v.alias=[_]}}}m(f.tokens)}),e.hooks.add("wrap",function(f){if(f.type==="code-block"){for(var m="",p=0,h=f.classes.length;p<h;p++){var g=f.classes[p],y=/language-(.+)/.exec(g);if(y){m=y[1];break}}var x=e.languages[m];if(x)f.content=e.highlight(u(f.content),x,m);else if(m&&m!=="none"&&e.plugins.autoloader){var v="md-"+new Date().valueOf()+"-"+Math.floor(Math.random()*1e16);f.attributes.id=v,e.plugins.autoloader.loadLanguages(m,function(){var b=document.getElementById(v);b&&(b.innerHTML=e.highlight(b.textContent,e.languages[m],m))})}}});var i=RegExp(e.languages.markup.tag.pattern.source,"gi"),l={amp:"&",lt:"<",gt:">",quot:'"'},c=String.fromCodePoint||String.fromCharCode;function u(f){var m=f.replace(i,"");return m=m.replace(/&(\w{1,8}|#x?[\da-f]{1,8});/gi,function(p,h){if(h=h.toLowerCase(),h[0]==="#"){var g;return h[1]==="x"?g=parseInt(h.slice(2),16):g=Number(h.slice(1)),c(g)}else{var y=l[h];return y||p}}),m}e.languages.md=e.languages.markdown})(Prism);Prism.languages.c=Prism.languages.extend("clike",{comment:{pattern:/\/\/(?:[^\r\n\\]|\\(?:\r\n?|\n|(?![\r\n])))*|\/\*[\s\S]*?(?:\*\/|$)/,greedy:!0},string:{pattern:/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},"class-name":{pattern:/(\b(?:enum|struct)\s+(?:__attribute__\s*\(\([\s\S]*?\)\)\s*)?)\w+|\b[a-z]\w*_t\b/,lookbehind:!0},keyword:/\b(?:_Alignas|_Alignof|_Atomic|_Bool|_Complex|_Generic|_Imaginary|_Noreturn|_Static_assert|_Thread_local|__attribute__|asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|inline|int|long|register|return|short|signed|sizeof|static|struct|switch|typedef|typeof|union|unsigned|void|volatile|while)\b/,function:/\b[a-z_]\w*(?=\s*\()/i,number:/(?:\b0x(?:[\da-f]+(?:\.[\da-f]*)?|\.[\da-f]+)(?:p[+-]?\d+)?|(?:\b\d+(?:\.\d*)?|\B\.\d+)(?:e[+-]?\d+)?)[ful]{0,4}/i,operator:/>>=?|<<=?|->|([-+&|:])\1|[?:~]|[-+*/%&|^!=<>]=?/});Prism.languages.insertBefore("c","string",{char:{pattern:/'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n]){0,32}'/,greedy:!0}});Prism.languages.insertBefore("c","string",{macro:{pattern:/(^[\t ]*)#\s*[a-z](?:[^\r\n\\/]|\/(?!\*)|\/\*(?:[^*]|\*(?!\/))*\*\/|\\(?:\r\n|[\s\S]))*/im,lookbehind:!0,greedy:!0,alias:"property",inside:{string:[{pattern:/^(#\s*include\s*)<[^>]+>/,lookbehind:!0},Prism.languages.c.string],char:Prism.languages.c.char,comment:Prism.languages.c.comment,"macro-name":[{pattern:/(^#\s*define\s+)\w+\b(?!\()/i,lookbehind:!0},{pattern:/(^#\s*define\s+)\w+\b(?=\()/i,lookbehind:!0,alias:"function"}],directive:{pattern:/^(#\s*)[a-z]+/,lookbehind:!0,alias:"keyword"},"directive-hash":/^#/,punctuation:/##|\\(?=[\r\n])/,expression:{pattern:/\S[\s\S]*/,inside:Prism.languages.c}}}});Prism.languages.insertBefore("c","function",{constant:/\b(?:EOF|NULL|SEEK_CUR|SEEK_END|SEEK_SET|__DATE__|__FILE__|__LINE__|__TIMESTAMP__|__TIME__|__func__|stderr|stdin|stdout)\b/});delete Prism.languages.c.boolean;(function(e){var t=/(?:"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|'(?:\\(?:\r\n|[\s\S])|[^'\\\r\n])*')/;e.languages.css={comment:/\/\*[\s\S]*?\*\//,atrule:{pattern:RegExp("@[\\w-](?:"+/[^;{\s"']|\s+(?!\s)/.source+"|"+t.source+")*?"+/(?:;|(?=\s*\{))/.source),inside:{rule:/^@[\w-]+/,"selector-function-argument":{pattern:/(\bselector\s*\(\s*(?![\s)]))(?:[^()\s]|\s+(?![\s)])|\((?:[^()]|\([^()]*\))*\))+(?=\s*\))/,lookbehind:!0,alias:"selector"},keyword:{pattern:/(^|[^\w-])(?:and|not|only|or)(?![\w-])/,lookbehind:!0}}},url:{pattern:RegExp("\\burl\\((?:"+t.source+"|"+/(?:[^\\\r\n()"']|\\[\s\S])*/.source+")\\)","i"),greedy:!0,inside:{function:/^url/i,punctuation:/^\(|\)$/,string:{pattern:RegExp("^"+t.source+"$"),alias:"url"}}},selector:{pattern:RegExp(`(^|[{}\\s])[^{}\\s](?:[^{};"'\\s]|\\s+(?![\\s{])|`+t.source+")*(?=\\s*\\{)"),lookbehind:!0},string:{pattern:t,greedy:!0},property:{pattern:/(^|[^-\w\xA0-\uFFFF])(?!\s)[-_a-z\xA0-\uFFFF](?:(?!\s)[-\w\xA0-\uFFFF])*(?=\s*:)/i,lookbehind:!0},important:/!important\b/i,function:{pattern:/(^|[^-a-z0-9])[-a-z0-9]+(?=\()/i,lookbehind:!0},punctuation:/[(){};:,]/},e.languages.css.atrule.inside.rest=e.languages.css;var n=e.languages.markup;n&&(n.tag.addInlined("style","css"),n.tag.addAttribute("style","css"))})(Prism);Prism.languages.objectivec=Prism.languages.extend("c",{string:{pattern:/@?"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"/,greedy:!0},keyword:/\b(?:asm|auto|break|case|char|const|continue|default|do|double|else|enum|extern|float|for|goto|if|in|inline|int|long|register|return|self|short|signed|sizeof|static|struct|super|switch|typedef|typeof|union|unsigned|void|volatile|while)\b|(?:@interface|@end|@implementation|@protocol|@class|@public|@protected|@private|@property|@try|@catch|@finally|@throw|@synthesize|@dynamic|@selector)\b/,operator:/-[->]?|\+\+?|!=?|<<?=?|>>?=?|==?|&&?|\|\|?|[~^%?*\/@]/});delete Prism.languages.objectivec["class-name"];Prism.languages.objc=Prism.languages.objectivec;Prism.languages.sql={comment:{pattern:/(^|[^\\])(?:\/\*[\s\S]*?\*\/|(?:--|\/\/|#).*)/,lookbehind:!0},variable:[{pattern:/@(["'`])(?:\\[\s\S]|(?!\1)[^\\])+\1/,greedy:!0},/@[\w.$]+/],string:{pattern:/(^|[^@\\])("|')(?:\\[\s\S]|(?!\2)[^\\]|\2\2)*\2/,greedy:!0,lookbehind:!0},identifier:{pattern:/(^|[^@\\])`(?:\\[\s\S]|[^`\\]|``)*`/,greedy:!0,lookbehind:!0,inside:{punctuation:/^`|`$/}},function:/\b(?:AVG|COUNT|FIRST|FORMAT|LAST|LCASE|LEN|MAX|MID|MIN|MOD|NOW|ROUND|SUM|UCASE)(?=\s*\()/i,keyword:/\b(?:ACTION|ADD|AFTER|ALGORITHM|ALL|ALTER|ANALYZE|ANY|APPLY|AS|ASC|AUTHORIZATION|AUTO_INCREMENT|BACKUP|BDB|BEGIN|BERKELEYDB|BIGINT|BINARY|BIT|BLOB|BOOL|BOOLEAN|BREAK|BROWSE|BTREE|BULK|BY|CALL|CASCADED?|CASE|CHAIN|CHAR(?:ACTER|SET)?|CHECK(?:POINT)?|CLOSE|CLUSTERED|COALESCE|COLLATE|COLUMNS?|COMMENT|COMMIT(?:TED)?|COMPUTE|CONNECT|CONSISTENT|CONSTRAINT|CONTAINS(?:TABLE)?|CONTINUE|CONVERT|CREATE|CROSS|CURRENT(?:_DATE|_TIME|_TIMESTAMP|_USER)?|CURSOR|CYCLE|DATA(?:BASES?)?|DATE(?:TIME)?|DAY|DBCC|DEALLOCATE|DEC|DECIMAL|DECLARE|DEFAULT|DEFINER|DELAYED|DELETE|DELIMITERS?|DENY|DESC|DESCRIBE|DETERMINISTIC|DISABLE|DISCARD|DISK|DISTINCT|DISTINCTROW|DISTRIBUTED|DO|DOUBLE|DROP|DUMMY|DUMP(?:FILE)?|DUPLICATE|ELSE(?:IF)?|ENABLE|ENCLOSED|END|ENGINE|ENUM|ERRLVL|ERRORS|ESCAPED?|EXCEPT|EXEC(?:UTE)?|EXISTS|EXIT|EXPLAIN|EXTENDED|FETCH|FIELDS|FILE|FILLFACTOR|FIRST|FIXED|FLOAT|FOLLOWING|FOR(?: EACH ROW)?|FORCE|FOREIGN|FREETEXT(?:TABLE)?|FROM|FULL|FUNCTION|GEOMETRY(?:COLLECTION)?|GLOBAL|GOTO|GRANT|GROUP|HANDLER|HASH|HAVING|HOLDLOCK|HOUR|IDENTITY(?:COL|_INSERT)?|IF|IGNORE|IMPORT|INDEX|INFILE|INNER|INNODB|INOUT|INSERT|INT|INTEGER|INTERSECT|INTERVAL|INTO|INVOKER|ISOLATION|ITERATE|JOIN|KEYS?|KILL|LANGUAGE|LAST|LEAVE|LEFT|LEVEL|LIMIT|LINENO|LINES|LINESTRING|LOAD|LOCAL|LOCK|LONG(?:BLOB|TEXT)|LOOP|MATCH(?:ED)?|MEDIUM(?:BLOB|INT|TEXT)|MERGE|MIDDLEINT|MINUTE|MODE|MODIFIES|MODIFY|MONTH|MULTI(?:LINESTRING|POINT|POLYGON)|NATIONAL|NATURAL|NCHAR|NEXT|NO|NONCLUSTERED|NULLIF|NUMERIC|OFF?|OFFSETS?|ON|OPEN(?:DATASOURCE|QUERY|ROWSET)?|OPTIMIZE|OPTION(?:ALLY)?|ORDER|OUT(?:ER|FILE)?|OVER|PARTIAL|PARTITION|PERCENT|PIVOT|PLAN|POINT|POLYGON|PRECEDING|PRECISION|PREPARE|PREV|PRIMARY|PRINT|PRIVILEGES|PROC(?:EDURE)?|PUBLIC|PURGE|QUICK|RAISERROR|READS?|REAL|RECONFIGURE|REFERENCES|RELEASE|RENAME|REPEAT(?:ABLE)?|REPLACE|REPLICATION|REQUIRE|RESIGNAL|RESTORE|RESTRICT|RETURN(?:ING|S)?|REVOKE|RIGHT|ROLLBACK|ROUTINE|ROW(?:COUNT|GUIDCOL|S)?|RTREE|RULE|SAVE(?:POINT)?|SCHEMA|SECOND|SELECT|SERIAL(?:IZABLE)?|SESSION(?:_USER)?|SET(?:USER)?|SHARE|SHOW|SHUTDOWN|SIMPLE|SMALLINT|SNAPSHOT|SOME|SONAME|SQL|START(?:ING)?|STATISTICS|STATUS|STRIPED|SYSTEM_USER|TABLES?|TABLESPACE|TEMP(?:ORARY|TABLE)?|TERMINATED|TEXT(?:SIZE)?|THEN|TIME(?:STAMP)?|TINY(?:BLOB|INT|TEXT)|TOP?|TRAN(?:SACTIONS?)?|TRIGGER|TRUNCATE|TSEQUAL|TYPES?|UNBOUNDED|UNCOMMITTED|UNDEFINED|UNION|UNIQUE|UNLOCK|UNPIVOT|UNSIGNED|UPDATE(?:TEXT)?|USAGE|USE|USER|USING|VALUES?|VAR(?:BINARY|CHAR|CHARACTER|YING)|VIEW|WAITFOR|WARNINGS|WHEN|WHERE|WHILE|WITH(?: ROLLUP|IN)?|WORK|WRITE(?:TEXT)?|YEAR)\b/i,boolean:/\b(?:FALSE|NULL|TRUE)\b/i,number:/\b0x[\da-f]+\b|\b\d+(?:\.\d*)?|\B\.\d+\b/i,operator:/[-+*\/=%^~]|&&?|\|\|?|!=?|<(?:=>?|<|>)?|>[>=]?|\b(?:AND|BETWEEN|DIV|ILIKE|IN|IS|LIKE|NOT|OR|REGEXP|RLIKE|SOUNDS LIKE|XOR)\b/i,punctuation:/[;[\]()`,.]/};(function(e){var t=e.languages.powershell={comment:[{pattern:/(^|[^`])<#[\s\S]*?#>/,lookbehind:!0},{pattern:/(^|[^`])#.*/,lookbehind:!0}],string:[{pattern:/"(?:`[\s\S]|[^`"])*"/,greedy:!0,inside:null},{pattern:/'(?:[^']|'')*'/,greedy:!0}],namespace:/\[[a-z](?:\[(?:\[[^\]]*\]|[^\[\]])*\]|[^\[\]])*\]/i,boolean:/\$(?:false|true)\b/i,variable:/\$\w+\b/,function:[/\b(?:Add|Approve|Assert|Backup|Block|Checkpoint|Clear|Close|Compare|Complete|Compress|Confirm|Connect|Convert|ConvertFrom|ConvertTo|Copy|Debug|Deny|Disable|Disconnect|Dismount|Edit|Enable|Enter|Exit|Expand|Export|Find|ForEach|Format|Get|Grant|Group|Hide|Import|Initialize|Install|Invoke|Join|Limit|Lock|Measure|Merge|Move|New|Open|Optimize|Out|Ping|Pop|Protect|Publish|Push|Read|Receive|Redo|Register|Remove|Rename|Repair|Request|Reset|Resize|Resolve|Restart|Restore|Resume|Revoke|Save|Search|Select|Send|Set|Show|Skip|Sort|Split|Start|Step|Stop|Submit|Suspend|Switch|Sync|Tee|Test|Trace|Unblock|Undo|Uninstall|Unlock|Unprotect|Unpublish|Unregister|Update|Use|Wait|Watch|Where|Write)-[a-z]+\b/i,/\b(?:ac|cat|chdir|clc|cli|clp|clv|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|ebp|echo|epal|epcsv|epsn|erase|fc|fl|ft|fw|gal|gbp|gc|gci|gcs|gdr|gi|gl|gm|gp|gps|group|gsv|gu|gv|gwmi|iex|ii|ipal|ipcsv|ipsn|irm|iwmi|iwr|kill|lp|ls|measure|mi|mount|move|mp|mv|nal|ndr|ni|nv|ogv|popd|ps|pushd|pwd|rbp|rd|rdr|ren|ri|rm|rmdir|rni|rnp|rp|rv|rvpa|rwmi|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls|sort|sp|spps|spsv|start|sv|swmi|tee|trcm|type|write)\b/i],keyword:/\b(?:Begin|Break|Catch|Class|Continue|Data|Define|Do|DynamicParam|Else|ElseIf|End|Exit|Filter|Finally|For|ForEach|From|Function|If|InlineScript|Parallel|Param|Process|Return|Sequence|Switch|Throw|Trap|Try|Until|Using|Var|While|Workflow)\b/i,operator:{pattern:/(^|\W)(?:!|-(?:b?(?:and|x?or)|as|(?:Not)?(?:Contains|In|Like|Match)|eq|ge|gt|is(?:Not)?|Join|le|lt|ne|not|Replace|sh[lr])\b|-[-=]?|\+[+=]?|[*\/%]=?)/i,lookbehind:!0},punctuation:/[|{}[\];(),.]/};t.string[0].inside={function:{pattern:/(^|[^`])\$\((?:\$\([^\r\n()]*\)|(?!\$\()[^\r\n)])*\)/,lookbehind:!0,inside:t},boolean:t.boolean,variable:t.variable}})(Prism);var Pre={},Lre;function jjt(){return Lre||(Lre=1,Prism.languages.python={comment:{pattern:/(^|[^\\])#.*/,lookbehind:!0,greedy:!0},"string-interpolation":{pattern:/(?:f|fr|rf)(?:("""|''')[\s\S]*?\1|("|')(?:\\.|(?!\2)[^\\\r\n])*\2)/i,greedy:!0,inside:{interpolation:{pattern:/((?:^|[^{])(?:\{\{)*)\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}]|\{(?!\{)(?:[^{}])+\})+\})+\}/,lookbehind:!0,inside:{"format-spec":{pattern:/(:)[^:(){}]+(?=\}$)/,lookbehind:!0},"conversion-option":{pattern:/![sra](?=[:}]$)/,alias:"punctuation"},rest:null}},string:/[\s\S]+/}},"triple-quoted-string":{pattern:/(?:[rub]|br|rb)?("""|''')[\s\S]*?\1/i,greedy:!0,alias:"string"},string:{pattern:/(?:[rub]|br|rb)?("|')(?:\\.|(?!\1)[^\\\r\n])*\1/i,greedy:!0},function:{pattern:/((?:^|\s)def[ \t]+)[a-zA-Z_]\w*(?=\s*\()/g,lookbehind:!0},"class-name":{pattern:/(\bclass\s+)\w+/i,lookbehind:!0},decorator:{pattern:/(^[\t ]*)@\w+(?:\.\w+)*/m,lookbehind:!0,alias:["annotation","punctuation"],inside:{punctuation:/\./}},keyword:/\b(?:_(?=\s*:)|and|as|assert|async|await|break|case|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|match|nonlocal|not|or|pass|print|raise|return|try|while|with|yield)\b/,builtin:/\b(?:__import__|abs|all|any|apply|ascii|basestring|bin|bool|buffer|bytearray|bytes|callable|chr|classmethod|cmp|coerce|compile|complex|delattr|dict|dir|divmod|enumerate|eval|execfile|file|filter|float|format|frozenset|getattr|globals|hasattr|hash|help|hex|id|input|int|intern|isinstance|issubclass|iter|len|list|locals|long|map|max|memoryview|min|next|object|oct|open|ord|pow|property|range|raw_input|reduce|reload|repr|reversed|round|set|setattr|slice|sorted|staticmethod|str|sum|super|tuple|type|unichr|unicode|vars|xrange|zip)\b/,boolean:/\b(?:False|None|True)\b/,number:/\b0(?:b(?:_?[01])+|o(?:_?[0-7])+|x(?:_?[a-f0-9])+)\b|(?:\b\d+(?:_\d+)*(?:\.(?:\d+(?:_\d+)*)?)?|\B\.\d+(?:_\d+)*)(?:e[+-]?\d+(?:_\d+)*)?j?(?!\w)/i,operator:/[-+%=]=?|!=|:=|\*\*?=?|\/\/?=?|<[<=>]?|>[=>]?|[&|^~]/,punctuation:/[{}[\];(),.:]/},Prism.languages.python["string-interpolation"].inside.interpolation.inside.rest=Prism.languages.python,Prism.languages.py=Prism.languages.python),Pre}jjt();var Ore={},Dre;function Ajt(){return Dre||(Dre=1,function(e){for(var t=/\/\*(?:[^*/]|\*(?!\/)|\/(?!\*)|<self>)*\*\//.source,n=0;n<2;n++)t=t.replace(/<self>/g,function(){return t});t=t.replace(/<self>/g,function(){return/[^\s\S]/.source}),e.languages.rust={comment:[{pattern:RegExp(/(^|[^\\])/.source+t),lookbehind:!0,greedy:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/b?"(?:\\[\s\S]|[^\\"])*"|b?r(#*)"(?:[^"]|"(?!\1))*"\1/,greedy:!0},char:{pattern:/b?'(?:\\(?:x[0-7][\da-fA-F]|u\{(?:[\da-fA-F]_*){1,6}\}|.)|[^\\\r\n\t'])'/,greedy:!0},attribute:{pattern:/#!?\[(?:[^\[\]"]|"(?:\\[\s\S]|[^\\"])*")*\]/,greedy:!0,alias:"attr-name",inside:{string:null}},"closure-params":{pattern:/([=(,:]\s*|\bmove\s*)\|[^|]*\||\|[^|]*\|(?=\s*(?:\{|->))/,lookbehind:!0,greedy:!0,inside:{"closure-punctuation":{pattern:/^\||\|$/,alias:"punctuation"},rest:null}},"lifetime-annotation":{pattern:/'\w+/,alias:"symbol"},"fragment-specifier":{pattern:/(\$\w+:)[a-z]+/,lookbehind:!0,alias:"punctuation"},variable:/\$\w+/,"function-definition":{pattern:/(\bfn\s+)\w+/,lookbehind:!0,alias:"function"},"type-definition":{pattern:/(\b(?:enum|struct|trait|type|union)\s+)\w+/,lookbehind:!0,alias:"class-name"},"module-declaration":[{pattern:/(\b(?:crate|mod)\s+)[a-z][a-z_\d]*/,lookbehind:!0,alias:"namespace"},{pattern:/(\b(?:crate|self|super)\s*)::\s*[a-z][a-z_\d]*\b(?:\s*::(?:\s*[a-z][a-z_\d]*\s*::)*)?/,lookbehind:!0,alias:"namespace",inside:{punctuation:/::/}}],keyword:[/\b(?:Self|abstract|as|async|await|become|box|break|const|continue|crate|do|dyn|else|enum|extern|final|fn|for|if|impl|in|let|loop|macro|match|mod|move|mut|override|priv|pub|ref|return|self|static|struct|super|trait|try|type|typeof|union|unsafe|unsized|use|virtual|where|while|yield)\b/,/\b(?:bool|char|f(?:32|64)|[ui](?:8|16|32|64|128|size)|str)\b/],function:/\b[a-z_]\w*(?=\s*(?:::\s*<|\())/,macro:{pattern:/\b\w+!/,alias:"property"},constant:/\b[A-Z_][A-Z_\d]+\b/,"class-name":/\b[A-Z]\w*\b/,namespace:{pattern:/(?:\b[a-z][a-z_\d]*\s*::\s*)*\b[a-z][a-z_\d]*\s*::(?!\s*<)/,inside:{punctuation:/::/}},number:/\b(?:0x[\dA-Fa-f](?:_?[\dA-Fa-f])*|0o[0-7](?:_?[0-7])*|0b[01](?:_?[01])*|(?:(?:\d(?:_?\d)*)?\.)?\d(?:_?\d)*(?:[Ee][+-]?\d+)?)(?:_?(?:f32|f64|[iu](?:8|16|32|64|size)?))?\b/,boolean:/\b(?:false|true)\b/,punctuation:/->|\.\.=|\.{1,3}|::|[{}[\];(),:]/,operator:/[-+*\/%!^]=?|=[=>]?|&[&=]?|\|[|=]?|<<?=?|>>?=?|[@?]/},e.languages.rust["closure-params"].inside.rest=e.languages.rust,e.languages.rust.attribute.inside.string=e.languages.rust.string}(Prism)),Ore}Ajt();Prism.languages.swift={comment:{pattern:/(^|[^\\:])(?:\/\/.*|\/\*(?:[^/*]|\/(?!\*)|\*(?!\/)|\/\*(?:[^*]|\*(?!\/))*\*\/)*\*\/)/,lookbehind:!0,greedy:!0},"string-literal":[{pattern:RegExp(/(^|[^"#])/.source+"(?:"+/"(?:\\(?:\((?:[^()]|\([^()]*\))*\)|\r\n|[^(])|[^\\\r\n"])*"/.source+"|"+/"""(?:\\(?:\((?:[^()]|\([^()]*\))*\)|[^(])|[^\\"]|"(?!""))*"""/.source+")"+/(?!["#])/.source),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\\($/,alias:"punctuation"},punctuation:/\\(?=[\r\n])/,string:/[\s\S]+/}},{pattern:RegExp(/(^|[^"#])(#+)/.source+"(?:"+/"(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|\r\n|[^#])|[^\\\r\n])*?"/.source+"|"+/"""(?:\\(?:#+\((?:[^()]|\([^()]*\))*\)|[^#])|[^\\])*?"""/.source+")\\2"),lookbehind:!0,greedy:!0,inside:{interpolation:{pattern:/(\\#+\()(?:[^()]|\([^()]*\))*(?=\))/,lookbehind:!0,inside:null},"interpolation-punctuation":{pattern:/^\)|\\#+\($/,alias:"punctuation"},string:/[\s\S]+/}}],directive:{pattern:RegExp(/#/.source+"(?:"+(/(?:elseif|if)\b/.source+"(?:[ 	]*"+/(?:![ \t]*)?(?:\b\w+\b(?:[ \t]*\((?:[^()]|\([^()]*\))*\))?|\((?:[^()]|\([^()]*\))*\))(?:[ \t]*(?:&&|\|\|))?/.source+")+")+"|"+/(?:else|endif)\b/.source+")"),alias:"property",inside:{"directive-name":/^#\w+/,boolean:/\b(?:false|true)\b/,number:/\b\d+(?:\.\d+)*\b/,operator:/!|&&|\|\||[<>]=?/,punctuation:/[(),]/}},literal:{pattern:/#(?:colorLiteral|column|dsohandle|file(?:ID|Literal|Path)?|function|imageLiteral|line)\b/,alias:"constant"},"other-directive":{pattern:/#\w+\b/,alias:"property"},attribute:{pattern:/@\w+/,alias:"atrule"},"function-definition":{pattern:/(\bfunc\s+)\w+/,lookbehind:!0,alias:"function"},label:{pattern:/\b(break|continue)\s+\w+|\b[a-zA-Z_]\w*(?=\s*:\s*(?:for|repeat|while)\b)/,lookbehind:!0,alias:"important"},keyword:/\b(?:Any|Protocol|Self|Type|actor|as|assignment|associatedtype|associativity|async|await|break|case|catch|class|continue|convenience|default|defer|deinit|didSet|do|dynamic|else|enum|extension|fallthrough|fileprivate|final|for|func|get|guard|higherThan|if|import|in|indirect|infix|init|inout|internal|is|isolated|lazy|left|let|lowerThan|mutating|none|nonisolated|nonmutating|open|operator|optional|override|postfix|precedencegroup|prefix|private|protocol|public|repeat|required|rethrows|return|right|safe|self|set|some|static|struct|subscript|super|switch|throw|throws|try|typealias|unowned|unsafe|var|weak|where|while|willSet)\b/,boolean:/\b(?:false|true)\b/,nil:{pattern:/\bnil\b/,alias:"constant"},"short-argument":/\$\d+\b/,omit:{pattern:/\b_\b/,alias:"keyword"},number:/\b(?:[\d_]+(?:\.[\de_]+)?|0x[a-f0-9_]+(?:\.[a-f0-9p_]+)?|0b[01_]+|0o[0-7_]+)\b/i,"class-name":/\b[A-Z](?:[A-Z_\d]*[a-z]\w*)?\b/,function:/\b[a-z_]\w*(?=\s*\()/i,constant:/\b(?:[A-Z_]{2,}|k[A-Z][A-Za-z_]+)\b/,operator:/[-+*/%=!<>&|^~?]+|\.[.\-+*/%=!<>&|^~?]+/,punctuation:/[{}[\]();,.:\\]/};Prism.languages.swift["string-literal"].forEach(function(e){e.inside.interpolation.inside=Prism.languages.swift});var Fre={},Ure;function Ijt(){return Ure||(Ure=1,function(e){e.languages.typescript=e.languages.extend("javascript",{"class-name":{pattern:/(\b(?:class|extends|implements|instanceof|interface|new|type)\s+)(?!keyof\b)(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*(?:\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>)?/,lookbehind:!0,greedy:!0,inside:null},builtin:/\b(?:Array|Function|Promise|any|boolean|console|never|number|string|symbol|unknown)\b/}),e.languages.typescript.keyword.push(/\b(?:abstract|declare|is|keyof|readonly|require)\b/,/\b(?:asserts|infer|interface|module|namespace|type)\b(?=\s*(?:[{_$a-zA-Z\xA0-\uFFFF]|$))/,/\btype\b(?=\s*(?:[\{*]|$))/),delete e.languages.typescript.parameter,delete e.languages.typescript["literal-property"];var t=e.languages.extend("typescript",{});delete t["class-name"],e.languages.typescript["class-name"].inside=t,e.languages.insertBefore("typescript","function",{decorator:{pattern:/@[$\w\xA0-\uFFFF]+/,inside:{at:{pattern:/^@/,alias:"operator"},function:/^[\s\S]+/}},"generic-function":{pattern:/#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>(?=\s*\()/,greedy:!0,inside:{function:/^#?(?!\s)[_$a-zA-Z\xA0-\uFFFF](?:(?!\s)[$\w\xA0-\uFFFF])*/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:t}}}}),e.languages.ts=e.languages.typescript}(Prism)),Fre}Ijt();var Bre={},$re;function Rjt(){return $re||($re=1,function(e){var t=/\b(?:abstract|assert|boolean|break|byte|case|catch|char|class|const|continue|default|do|double|else|enum|exports|extends|final|finally|float|for|goto|if|implements|import|instanceof|int|interface|long|module|native|new|non-sealed|null|open|opens|package|permits|private|protected|provides|public|record(?!\s*[(){}[\]<>=%~.:,;?+\-*/&|^])|requires|return|sealed|short|static|strictfp|super|switch|synchronized|this|throw|throws|to|transient|transitive|try|uses|var|void|volatile|while|with|yield)\b/,n=/(?:[a-z]\w*\s*\.\s*)*(?:[A-Z]\w*\s*\.\s*)*/.source,r={pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z](?:[\d_A-Z]*[a-z]\w*)?\b/.source),lookbehind:!0,inside:{namespace:{pattern:/^[a-z]\w*(?:\s*\.\s*[a-z]\w*)*(?:\s*\.)?/,inside:{punctuation:/\./}},punctuation:/\./}};e.languages.java=e.languages.extend("clike",{string:{pattern:/(^|[^\\])"(?:\\.|[^"\\\r\n])*"/,lookbehind:!0,greedy:!0},"class-name":[r,{pattern:RegExp(/(^|[^\w.])/.source+n+/[A-Z]\w*(?=\s+\w+\s*[;,=()]|\s*(?:\[[\s,]*\]\s*)?::\s*new\b)/.source),lookbehind:!0,inside:r.inside},{pattern:RegExp(/(\b(?:class|enum|extends|implements|instanceof|interface|new|record|throws)\s+)/.source+n+/[A-Z]\w*\b/.source),lookbehind:!0,inside:r.inside}],keyword:t,function:[e.languages.clike.function,{pattern:/(::\s*)[a-z_]\w*/,lookbehind:!0}],number:/\b0b[01][01_]*L?\b|\b0x(?:\.[\da-f_p+-]+|[\da-f_]+(?:\.[\da-f_p+-]+)?)\b|(?:\b\d[\d_]*(?:\.[\d_]*)?|\B\.\d[\d_]*)(?:e[+-]?\d[\d_]*)?[dfl]?/i,operator:{pattern:/(^|[^.])(?:<<=?|>>>?=?|->|--|\+\+|&&|\|\||::|[?:~]|[-+*/%&|^!=<>]=?)/m,lookbehind:!0},constant:/\b[A-Z][A-Z_\d]+\b/}),e.languages.insertBefore("java","string",{"triple-quoted-string":{pattern:/"""[ \t]*[\r\n](?:(?:"|"")?(?:\\.|[^"\\]))*"""/,greedy:!0,alias:"string"},char:{pattern:/'(?:\\.|[^'\\\r\n]){1,6}'/,greedy:!0}}),e.languages.insertBefore("java","class-name",{annotation:{pattern:/(^|[^.])@\w+(?:\s*\.\s*\w+)*/,lookbehind:!0,alias:"punctuation"},generics:{pattern:/<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&)|<(?:[\w\s,.?]|&(?!&))*>)*>)*>)*>/,inside:{"class-name":r,keyword:t,punctuation:/[<>(),.:]/,operator:/[?&|]/}},import:[{pattern:RegExp(/(\bimport\s+)/.source+n+/(?:[A-Z]\w*|\*)(?=\s*;)/.source),lookbehind:!0,inside:{namespace:r.inside.namespace,punctuation:/\./,operator:/\*/,"class-name":/\w+/}},{pattern:RegExp(/(\bimport\s+static\s+)/.source+n+/(?:\w+|\*)(?=\s*;)/.source),lookbehind:!0,alias:"static",inside:{namespace:r.inside.namespace,static:/\b\w+$/,punctuation:/\./,operator:/\*/,"class-name":/\w+/}}],namespace:{pattern:RegExp(/(\b(?:exports|import(?:\s+static)?|module|open|opens|package|provides|requires|to|transitive|uses|with)\s+)(?!<keyword>)[a-z]\w*(?:\.[a-z]\w*)*\.?/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0,inside:{punctuation:/\./}}})}(Prism)),Bre}Rjt();var Vre={},Wre;function Pjt(){return Wre||(Wre=1,function(e){var t=/\b(?:alignas|alignof|asm|auto|bool|break|case|catch|char|char16_t|char32_t|char8_t|class|co_await|co_return|co_yield|compl|concept|const|const_cast|consteval|constexpr|constinit|continue|decltype|default|delete|do|double|dynamic_cast|else|enum|explicit|export|extern|final|float|for|friend|goto|if|import|inline|int|int16_t|int32_t|int64_t|int8_t|long|module|mutable|namespace|new|noexcept|nullptr|operator|override|private|protected|public|register|reinterpret_cast|requires|return|short|signed|sizeof|static|static_assert|static_cast|struct|switch|template|this|thread_local|throw|try|typedef|typeid|typename|uint16_t|uint32_t|uint64_t|uint8_t|union|unsigned|using|virtual|void|volatile|wchar_t|while)\b/,n=/\b(?!<keyword>)\w+(?:\s*\.\s*\w+)*\b/.source.replace(/<keyword>/g,function(){return t.source});e.languages.cpp=e.languages.extend("c",{"class-name":[{pattern:RegExp(/(\b(?:class|concept|enum|struct|typename)\s+)(?!<keyword>)\w+/.source.replace(/<keyword>/g,function(){return t.source})),lookbehind:!0},/\b[A-Z]\w*(?=\s*::\s*\w+\s*\()/,/\b[A-Z_]\w*(?=\s*::\s*~\w+\s*\()/i,/\b\w+(?=\s*<(?:[^<>]|<(?:[^<>]|<[^<>]*>)*>)*>\s*::\s*\w+\s*\()/],keyword:t,number:{pattern:/(?:\b0b[01']+|\b0x(?:[\da-f']+(?:\.[\da-f']*)?|\.[\da-f']+)(?:p[+-]?[\d']+)?|(?:\b[\d']+(?:\.[\d']*)?|\B\.[\d']+)(?:e[+-]?[\d']+)?)[ful]{0,4}/i,greedy:!0},operator:/>>=?|<<=?|->|--|\+\+|&&|\|\||[?:~]|<=>|[-+*/%&|^!=<>]=?|\b(?:and|and_eq|bitand|bitor|not|not_eq|or|or_eq|xor|xor_eq)\b/,boolean:/\b(?:false|true)\b/}),e.languages.insertBefore("cpp","string",{module:{pattern:RegExp(/(\b(?:import|module)\s+)/.source+"(?:"+/"(?:\\(?:\r\n|[\s\S])|[^"\\\r\n])*"|<[^<>\r\n]*>/.source+"|"+/<mod-name>(?:\s*:\s*<mod-name>)?|:\s*<mod-name>/.source.replace(/<mod-name>/g,function(){return n})+")"),lookbehind:!0,greedy:!0,inside:{string:/^[<"][\s\S]+/,operator:/:/,punctuation:/\./}},"raw-string":{pattern:/R"([^()\\ ]{0,16})\([\s\S]*?\)\1"/,alias:"string",greedy:!0}}),e.languages.insertBefore("cpp","keyword",{"generic-function":{pattern:/\b(?!operator\b)[a-z_]\w*\s*<(?:[^<>]|<[^<>]*>)*>(?=\s*\()/i,inside:{function:/^\w+/,generic:{pattern:/<[\s\S]+/,alias:"class-name",inside:e.languages.cpp}}}}),e.languages.insertBefore("cpp","operator",{"double-colon":{pattern:/::/,alias:"punctuation"}}),e.languages.insertBefore("cpp","class-name",{"base-clause":{pattern:/(\b(?:class|struct)\s+\w+\s*:\s*)[^;{}"'\s]+(?:\s+[^;{}"'\s]+)*(?=\s*[;{])/,lookbehind:!0,greedy:!0,inside:e.languages.extend("cpp",{})}}),e.languages.insertBefore("inside","double-colon",{"class-name":/\b[a-z_]\w*\b(?!\s*::)/i},e.languages.cpp["base-clause"])}(Prism)),Vre}Pjt();function AEe(e,t){for(const n of e.childNodes){if(Jr(n)&&n.tagName===t)return!0;AEe(n,t)}return!1}const i0="data-language",Iv="data-highlight-language",fS="data-theme";let hW=class IEe extends qo{__language;__theme;__isSyntaxHighlightSupported;static getType(){return"code"}static clone(t){return new IEe(t.__language,t.__key)}constructor(t,n){super(n),this.__language=t||void 0,this.__isSyntaxHighlightSupported=!1,this.__theme=void 0}afterCloneFrom(t){super.afterCloneFrom(t),this.__language=t.__language,this.__theme=t.__theme,this.__isSyntaxHighlightSupported=t.__isSyntaxHighlightSupported}createDOM(t){const n=document.createElement("code");_c(n,t.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(i0,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(Iv,r));const s=this.getTheme();s&&n.setAttribute(fS,s);const a=this.getStyle();return a&&n.setAttribute("style",a),n}updateDOM(t,n,r){const s=this.__language,a=t.__language;s?s!==a&&n.setAttribute(i0,s):a&&n.removeAttribute(i0);const i=this.__isSyntaxHighlightSupported;t.__isSyntaxHighlightSupported&&a?i&&s?s!==a&&n.setAttribute(Iv,s):n.removeAttribute(Iv):i&&s&&n.setAttribute(Iv,s);const l=this.__theme,c=t.__theme;l?l!==c&&n.setAttribute(fS,l):c&&n.removeAttribute(fS);const u=this.__style,f=t.__style;return u?u!==f&&n.setAttribute("style",u):f&&n.removeAttribute("style"),!1}exportDOM(t){const n=document.createElement("pre");_c(n,t._config.theme.code),n.setAttribute("spellcheck","false");const r=this.getLanguage();r&&(n.setAttribute(i0,r),this.getIsSyntaxHighlightSupported()&&n.setAttribute(Iv,r));const s=this.getTheme();s&&n.setAttribute(fS,s);const a=this.getStyle();return a&&n.setAttribute("style",a),{element:n}}static importDOM(){return{code:t=>t.textContent!=null&&(/\r?\n/.test(t.textContent)||AEe(t,"BR"))?{conversion:Hre,priority:1}:null,div:()=>({conversion:Ljt,priority:1}),pre:()=>({conversion:Hre,priority:0}),table:t=>GA(t)?{conversion:Ojt,priority:3}:null,td:t=>{const n=t,r=n.closest("table");return n.classList.contains("js-file-line")||r&&GA(r)?{conversion:zre,priority:3}:null},tr:t=>{const n=t.closest("table");return n&&GA(n)?{conversion:zre,priority:3}:null}}}static importJSON(t){return mu().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setLanguage(t.language).setTheme(t.theme)}exportJSON(){return{...super.exportJSON(),language:this.getLanguage(),theme:this.getTheme()}}insertNewAfter(t,n=!0){const r=this.getChildren(),s=r.length;if(s>=2&&r[s-1].getTextContent()===`
`&&r[s-2].getTextContent()===`
`&&t.isCollapsed()&&t.anchor.key===this.__key&&t.anchor.offset===s){r[s-1].remove(),r[s-2].remove();const c=kr();return this.insertAfter(c,n),c}const{anchor:a,focus:i}=t,l=(a.isBefore(i)?a:i).getNode();if(Je(l)){let c=Fjt(l);const u=[];for(;;)if(ST(c))u.push(ow()),c=c.getNextSibling();else{if(!OEe(c))break;{let x=0;const v=c.getTextContent(),b=c.getTextContentSize();for(;x<b&&v[x]===" ";)x++;if(x!==0&&u.push(LEe(" ".repeat(x))),x!==b)break;c=c.getNextSibling()}}const f=l.splitText(a.offset)[0],m=a.offset===0?0:1,p=f.getIndexWithinParent()+m,h=l.getParentOrThrow(),g=[Go(),...u];h.splice(p,0,g);const y=u[u.length-1];y?y.select():a.offset===0?f.selectPrevious():f.getNextSibling().selectNext(0,0)}if(gW(l)){const{offset:c}=t.anchor;l.splice(c,0,[Go()]),l.select(c+1,c+1)}return null}canIndent(){return!1}collapseAtStart(){const t=kr();return this.getChildren().forEach(n=>t.append(n)),this.replace(t),!0}setLanguage(t){const n=this.getWritable();return n.__language=t||void 0,n}getLanguage(){return this.getLatest().__language}setIsSyntaxHighlightSupported(t){const n=this.getWritable();return n.__isSyntaxHighlightSupported=t,n}getIsSyntaxHighlightSupported(){return this.getLatest().__isSyntaxHighlightSupported}setTheme(t){const n=this.getWritable();return n.__theme=t||void 0,n}getTheme(){return this.getLatest().__theme}};function mu(e,t){return B2e(hW).setLanguage(e).setTheme(t)}function gW(e){return e instanceof hW}function Hre(e){return{node:mu(e.getAttribute(i0))}}function Ljt(e){const t=e,n=Gre(t);return n||function(r){let s=r.parentElement;for(;s!==null;){if(Gre(s))return!0;s=s.parentElement}return!1}(t)?{node:n?mu():null}:{node:null}}function Ojt(){return{node:mu()}}function zre(){return{node:null}}function Gre(e){return e.style.fontFamily.match("monospace")!==null}function GA(e){return e.classList.contains("js-file-line-container")}let REe=class PEe extends Rc{__highlightType;constructor(t="",n,r){super(t,r),this.__highlightType=n}static getType(){return"code-highlight"}static clone(t){return new PEe(t.__text,t.__highlightType||void 0,t.__key)}getHighlightType(){return this.getLatest().__highlightType}setHighlightType(t){const n=this.getWritable();return n.__highlightType=t||void 0,n}canHaveFormat(){return!1}createDOM(t){const n=super.createDOM(t),r=qA(t.theme,this.__highlightType);return _c(n,r),n}updateDOM(t,n,r){const s=super.updateDOM(t,n,r),a=qA(r.theme,t.__highlightType),i=qA(r.theme,this.__highlightType);return a!==i&&(a&&nW(n,a),i&&_c(n,i)),s}static importJSON(t){return LEe().updateFromJSON(t)}updateFromJSON(t){return super.updateFromJSON(t).setHighlightType(t.highlightType)}exportJSON(){return{...super.exportJSON(),highlightType:this.getHighlightType()}}setFormat(t){return this}isParentRequired(){return!0}createParentElementNode(){return mu()}};function qA(e,t){return t&&e&&e.codeHighlight&&e.codeHighlight[t]}function LEe(e="",t){return Di(new REe(e,t))}function OEe(e){return e instanceof REe}function Djt(e,t){let n=e;for(let r=Zs(e,t);r&&(OEe(r.origin)||ST(r.origin));r=rNt(r))n=r.origin;return n}function Fjt(e){return Djt(e,"previous")}(function(e){e.languages.diff={coord:[/^(?:\*{3}|-{3}|\+{3}).*$/m,/^@@.*@@$/m,/^\d.*$/m]};var t={"deleted-sign":"-","deleted-arrow":"<","inserted-sign":"+","inserted-arrow":">",unchanged:" ",diff:"!"};Object.keys(t).forEach(function(n){var r=t[n],s=[];/^\w+$/.test(n)||s.push(/\w+/.exec(n)[0]),n==="diff"&&s.push("bold"),e.languages.diff[n]={pattern:RegExp("^(?:["+r+`].*(?:\r
?|
|(?![\\s\\S])))+`,"m"),alias:s,inside:{line:{pattern:/(.)(?=[\s\S]).*(?:\r\n?|\n)?/,lookbehind:!0},prefix:{pattern:/[\s\S]/,alias:/\w+/.exec(n)[0]}}}}),Object.defineProperty(e.languages.diff,"PREFIXES",{value:t})})(Prism);function A7(e,t){const n={};for(const r of e){const s=t(r);s&&(n[s]?n[s].push(r):n[s]=[r])}return n}function DEe(e){const t=A7(e,n=>n.type);return{element:t.element||[],multilineElement:t["multiline-element"]||[],textFormat:t["text-format"]||[],textMatch:t["text-match"]||[]}}const KM=/[!-/:-@[-`{-~\s]/,Ujt=/^\s{0,3}$/;function Bjt(e){if(!Id(e))return!1;const t=e.getFirstChild();return t==null||e.getChildrenSize()===1&&Je(t)&&Ujt.test(t.getTextContent())}function $jt(e,t){const n=function(s,a){const i=s.match(a.openTagsRegExp);if(i==null)return null;for(const l of i){const c=l.replace(/^\s/,""),u=a.fullMatchRegExpByTag[c];if(u==null)continue;const f=s.match(u),m=a.transformersByTag[c];if(f!=null&&m!=null){if(m.intraword!==!1)return f;const{index:p=0}=f,h=s[p-1],g=s[p+f[0].length];if((!h||KM.test(h))&&(!g||KM.test(g)))return f}}return null}(e.getTextContent(),t);if(!n)return null;const r=n.index||0;return{endIndex:r+n[0].length,match:n,startIndex:r,transformer:t.transformersByTag[n[1]]}}function tm(e){return Je(e)&&!e.hasFormat("code")}function nm(e,t,n){let r=$jt(e,t),s=function(i,l){const c=i;let u,f,m,p;for(const h of l){if(!h.replace||!h.importRegExp)continue;const g=c.getTextContent().match(h.importRegExp);if(!g)continue;const y=g.index||0,x=h.getEndIndex?h.getEndIndex(c,g):y+g[0].length;x!==!1&&(u===void 0||f===void 0||y<u&&x>f)&&(u=y,f=x,m=h,p=g)}return u===void 0||f===void 0||m===void 0||p===void 0?null:{endIndex:f,match:p,startIndex:u,transformer:m}}(e,n);if(r&&s&&(r.startIndex<=s.startIndex&&r.endIndex>=s.endIndex||s.startIndex>r.endIndex?s=null:r=null),r){const i=function(l,c,u,f,m){const p=l.getTextContent();let h,g,y;if(m[0]===p?h=l:c===0?[h,g]=l.splitText(u):[y,h,g]=l.splitText(c,u),h.setTextContent(m[2]),f)for(const x of f.format)h.hasFormat(x)||h.toggleFormat(x);return{nodeAfter:g,nodeBefore:y,transformedNode:h}}(e,r.startIndex,r.endIndex,r.transformer,r.match);tm(i.nodeAfter)&&nm(i.nodeAfter,t,n),tm(i.nodeBefore)&&nm(i.nodeBefore,t,n),tm(i.transformedNode)&&nm(i.transformedNode,t,n)}else if(s){const i=function(l,c,u,f,m){let p,h,g;return c===0?[p,h]=l.splitText(u):[g,p,h]=l.splitText(c,u),f.replace?{nodeAfter:h,nodeBefore:g,transformedNode:f.replace(p,m)||void 0}:null}(e,s.startIndex,s.endIndex,s.transformer,s.match);if(!i)return;tm(i.nodeAfter)&&nm(i.nodeAfter,t,n),tm(i.nodeBefore)&&nm(i.nodeBefore,t,n),tm(i.transformedNode)&&nm(i.transformedNode,t,n)}const a=e.getTextContent().replace(/\\([*_`~\\])/g,"$1").replace(/&#(\d+);/g,(i,l)=>String.fromCodePoint(l));e.setTextContent(a)}function Vjt(e,t=!1){const n=DEe(e),r=function(s){const a={},i={},l=[],c="(?<![\\\\])";for(const u of s){const{tag:f}=u;a[f]=u;const m=f.replace(/(\*|\^|\+)/g,"\\$1");l.push(m),f.length===1?i[f]=new RegExp(`(?<![\\\\${m}])(${m})((\\\\${m})?.*?[^${m}\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?![\\\\${m}])`):i[f]=new RegExp(`(?<!\\\\)(${m})((\\\\${m})?.*?[^\\s](\\\\${m})?)((?<!\\\\)|(?<=\\\\\\\\))(${m})(?!\\\\)`)}return{fullMatchRegExpByTag:i,openTagsRegExp:new RegExp(`${c}(${l.join("|")})`,"g"),transformersByTag:a}}(n.textFormat);return(s,a)=>{const i=s.split(`
`),l=i.length,c=a||sr();c.clear();for(let f=0;f<l;f++){const m=i[f],[p,h]=Wjt(i,f,n.multilineElement,c);p?f=h:Hjt(m,c,n.element,r,n.textMatch,t)}const u=c.getChildren();for(const f of u)!t&&Bjt(f)&&c.getChildrenSize()>1&&f.remove();rt()!==null&&c.selectStart()}}function Wjt(e,t,n,r){for(const s of n){const{handleImportAfterStartMatch:a,regExpEnd:i,regExpStart:l,replace:c}=s,u=e[t].match(l);if(!u)continue;if(a){const g=a({lines:e,rootNode:r,startLineIndex:t,startMatch:u,transformer:s});if(g===null)continue;if(g)return g}const f=typeof i=="object"&&"regExp"in i?i.regExp:i,m=i&&typeof i=="object"&&"optional"in i?i.optional:!i;let p=t;const h=e.length;for(;p<h;){const g=f?e[p].match(f):null;if(!g&&(!m||m&&p<h-1)){p++;continue}if(g&&t===p&&g.index===u.index){p++;continue}const y=[];if(g&&t===p)y.push(e[t].slice(u[0].length,-g[0].length));else for(let x=t;x<=p;x++)if(x===t){const v=e[x].slice(u[0].length);y.push(v)}else if(x===p&&g){const v=e[x].slice(0,-g[0].length);y.push(v)}else y.push(e[x]);if(c(r,null,u,g,y,!0)!==!1)return[!0,p];break}}return[!1,t]}function Hjt(e,t,n,r,s,a){const i=Zn(e),l=kr();l.append(i),t.append(l);for(const{regExp:c,replace:u}of n){const f=e.match(c);if(f&&(i.setTextContent(e.slice(f[0].length)),u(l,[i],f,!0)!==!1))break}if(nm(i,r,s),l.isAttached()&&e.length>0){const c=l.getPreviousSibling();if(!a&&(Id(c)||j7(c)||Jn(c))){let u=c;if(Jn(c)){const f=c.getLastDescendant();u=f==null?null:xi(f,da)}u!=null&&u.getTextContentSize()>0&&(u.splice(u.getChildrenSize(),0,[Go(),...l.getChildren()]),l.remove())}}}function zjt(e,...t){const n=new URL("https://lexical.dev/docs/error"),r=new URLSearchParams;r.append("code",e);for(const s of t)r.append("v",s);throw n.search=r.toString(),Error(`Minified Lexical error #${e}; visit ${n.toString()} for the full message or use the non-minified dev environment for full errors and additional helpful warnings.`)}const FEe=/^(\s*)(\d{1,})\.\s/,UEe=/^(\s*)[-*+]\s/,Gjt=/^(\s*)(?:-\s)?\s?(\[(\s|x)?\])\s/i,I7=/^(#{1,6})\s/,BEe=/^>\s/,$Ee=/^[ \t]*```([\w-]+)?/,VEe=/[ \t]*```$/,qjt=/^[ \t]*```[^`]+(?:(?:`{1,2}|`{4,})[^`]+)*```(?:[^`]|$)/,Kjt=/^(?:\|)(.+)(?:\|)\s?$/,Yjt=/^(\| ?:?-*:? ?)+\|\s?$/,WEe=e=>(t,n,r,s)=>{const a=e(r);a.append(...n),t.replace(a),s||a.select(0,0)},HEe=e=>(t,n,r,s)=>{const a=t.getPreviousSibling(),i=t.getNextSibling(),l=ju(e==="check"?r[3]==="x":void 0);if(Jn(i)&&i.getListType()===e){const u=i.getFirstChild();u!==null?u.insertBefore(l):i.append(l),t.remove()}else if(Jn(a)&&a.getListType()===e)a.append(l),t.remove();else{const u=oc(e,e==="number"?Number(r[2]):void 0);u.append(l),t.replace(u)}l.append(...n),s||l.select(0,0);const c=function(u){const f=u.match(/\t/g),m=u.match(/ /g);let p=0;return f&&(p+=f.length),m&&(p+=Math.floor(m.length/4)),p}(r[1]);c&&l.setIndent(c)},yW=(e,t,n)=>{const r=[],s=e.getChildren();let a=0;for(const i of s)if(da(i)){if(i.getChildrenSize()===1){const f=i.getFirstChild();if(Jn(f)){r.push(yW(f,t,n+1));continue}}const l=" ".repeat(4*n),c=e.getListType(),u=c==="number"?`${e.getStart()+a}. `:c==="check"?`- [${i.getChecked()?"x":" "}] `:"- ";r.push(l+u+t(i)),a++}return r.join(`
`)},Qjt={dependencies:[pW],export:(e,t)=>{if(!Tjt(e))return null;const n=Number(e.getTag().slice(1));return"#".repeat(n)+" "+t(e)},regExp:I7,replace:WEe(e=>{const t="h"+e[1].length;return Gh(t)}),type:"element"},Xjt={dependencies:[fW],export:(e,t)=>{if(!j7(e))return null;const n=t(e).split(`
`),r=[];for(const s of n)r.push("> "+s);return r.join(`
`)},regExp:BEe,replace:(e,t,n,r)=>{if(r){const a=e.getPreviousSibling();if(j7(a))return a.splice(a.getChildrenSize(),0,[Go(),...t]),void e.remove()}const s=mW();s.append(...t),e.replace(s),r||s.select(0,0)},type:"element"},Zjt={dependencies:[hW],export:e=>{if(!gW(e))return null;const t=e.getTextContent();return"```"+(e.getLanguage()||"")+(t?`
`+t:"")+"\n```"},regExpEnd:{optional:!0,regExp:VEe},regExpStart:$Ee,replace:(e,t,n,r,s,a)=>{let i,l;if(!t&&s){if(s.length===1)r?(i=mu(),l=n[1]+s[0]):(i=mu(n[1]),l=s[0].startsWith(" ")?s[0].slice(1):s[0]);else{if(i=mu(n[1]),s[0].trim().length===0)for(;s.length>0&&!s[0].length;)s.shift();else s[0]=s[0].startsWith(" ")?s[0].slice(1):s[0];for(;s.length>0&&!s[s.length-1].length;)s.pop();l=s.join(`
`)}const c=Zn(l);i.append(c),e.append(i)}else t&&WEe(c=>mu(c?c[1]:void 0))(e,t,n,a)},type:"multiline-element"},Jjt={dependencies:[LT,PT],export:(e,t)=>Jn(e)?yW(e,t,0):null,regExp:UEe,replace:HEe("bullet"),type:"element"},e6t={dependencies:[LT,PT],export:(e,t)=>Jn(e)?yW(e,t,0):null,regExp:FEe,replace:HEe("number"),type:"element"},t6t={format:["code"],tag:"`",type:"text-format"},n6t={format:["highlight"],tag:"==",type:"text-format"},r6t={format:["bold","italic"],tag:"***",type:"text-format"},s6t={format:["bold","italic"],intraword:!1,tag:"___",type:"text-format"},a6t={format:["bold"],tag:"**",type:"text-format"},o6t={format:["bold"],intraword:!1,tag:"__",type:"text-format"},i6t={format:["strikethrough"],tag:"~~",type:"text-format"},l6t={format:["italic"],tag:"*",type:"text-format"},c6t={format:["italic"],intraword:!1,tag:"_",type:"text-format"},u6t={dependencies:[Ux],export:(e,t,n)=>{if(!hi(e)||Fl(e))return null;const r=e.getTitle(),s=t(e);return r?`[${s}](${e.getURL()} "${r}")`:`[${s}](${e.getURL()})`},importRegExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))/,regExp:/(?:\[(.*?)\])(?:\((?:([^()\s]+)(?:\s"((?:[^"]*\\")*[^"]*)"\s*)?)\))$/,replace:(e,t)=>{const[,n,r,s]=t,a=vy(r,{title:s}),i=n.split("[").length-1,l=n.split("]").length-1;let c=n,u="";if(i<l)return;if(i>l){const m=n.split("[");u="["+m[0],c=m.slice(1).join("[")}const f=Zn(c);return f.setFormat(e.getFormat()),a.append(f),e.replace(a),u&&a.insertBefore(Zn(u)),f},trigger:")",type:"text-match"},d6t=[Qjt,Xjt,Jjt,e6t],f6t=[Zjt],m6t=[t6t,r6t,s6t,a6t,o6t,n6t,l6t,c6t,i6t],zEe=[u6t],GEe=[...d6t,...f6t,...m6t,...zEe];function qre(e,t,n){const r=n.length;for(let s=t;s>=r;s--){const a=s-r;if(qEe(e,a,n,0,r)&&e[a+r]!==" ")return a}return-1}function qEe(e,t,n,r,s){for(let a=0;a<s;a++)if(e[t+a]!==n[r+a])return!1;return!0}function wcn(e,t=GEe){const n=DEe(t),r=A7(n.textFormat,({tag:i})=>i[i.length-1]),s=A7(n.textMatch,({trigger:i})=>i);for(const i of t){const l=i.type;if(l==="element"||l==="text-match"||l==="multiline-element"){const c=i.dependencies;for(const u of c)e.hasNode(u)||zjt(173,u.getType())}}const a=(i,l,c)=>{(function(u,f,m,p){const h=u.getParent();if(!ul(h)||u.getFirstChild()!==f)return!1;const g=f.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExp:y,replace:x}of p){const v=g.match(y);if(v&&v[0].length===(v[0].endsWith(" ")?m:m-1)){const b=f.getNextSiblings(),[_,w]=f.splitText(m);if(x(u,w?[w,...b]:b,v,!1)!==!1)return _.remove(),!0}}return!1})(i,l,c,n.element)||function(u,f,m,p){const h=u.getParent();if(!ul(h)||u.getFirstChild()!==f)return!1;const g=f.getTextContent();if(g[m-1]!==" ")return!1;for(const{regExpStart:y,replace:x,regExpEnd:v}of p){if(v&&!("optional"in v)||v&&"optional"in v&&!v.optional)continue;const b=g.match(y);if(b&&b[0].length===(b[0].endsWith(" ")?m:m-1)){const _=f.getNextSiblings(),[w,C]=f.splitText(m);if(x(u,C?[C,..._]:_,b,null,null,!1)!==!1)return w.remove(),!0}}return!1}(i,l,c,n.multilineElement)||function(u,f,m){let p=u.getTextContent();const h=m[p[f-1]];if(h==null)return!1;f<p.length&&(p=p.slice(0,f));for(const g of h){if(!g.replace||!g.regExp)continue;const y=p.match(g.regExp);if(y===null)continue;const x=y.index||0,v=x+y[0].length;let b;return x===0?[b]=u.splitText(v):[,b]=u.splitText(x,v),b.selectNext(0,0),g.replace(b,y),!0}return!1}(l,c,s)||function(u,f,m){const p=u.getTextContent(),h=f-1,g=p[h],y=m[g];if(!y)return!1;for(const x of y){const{tag:v}=x,b=v.length,_=h-b+1;if(b>1&&!qEe(p,_,v,0,b)||p[_-1]===" ")continue;const w=p[h+1];if(x.intraword===!1&&w&&!KM.test(w))continue;const C=u;let S=C,E=qre(p,_,v),k=S;for(;E<0&&(k=k.getPreviousSibling())&&!sc(k);)if(Je(k)){if(k.hasFormat("code"))continue;const N=k.getTextContent();S=k,E=qre(N,N.length,v)}if(E<0||S===C&&E+b===_)continue;const M=S.getTextContent();if(E>0&&M[E-1]===g)continue;const j=M[E-1];if(x.intraword===!1&&j&&!KM.test(j))continue;const R=C.getTextContent(),O=R.slice(0,_)+R.slice(h+1);C.setTextContent(O);const D=S===C?O:M;S.setTextContent(D.slice(0,E)+D.slice(E+b));const P=rt(),A=x2e();ta(A);const T=h-b*(S===C?2:1)+1;A.anchor.set(S.__key,E,"text"),A.focus.set(C.__key,T,"text");for(const N of x.format)A.hasFormat(N)||A.formatText(N);A.anchor.set(A.focus.key,A.focus.offset,A.focus.type);for(const N of x.format)A.hasFormat(N)&&A.toggleFormat(N);return Be(P)&&(A.format=P.format),!0}}(l,c,r)};return e.registerUpdateListener(({tags:i,dirtyLeaves:l,editorState:c,prevEditorState:u})=>{if(i.has(k2e)||i.has(b4t)||e.isComposing())return;const f=c.read(rt),m=u.read(rt);if(!Be(m)||!Be(f)||!f.isCollapsed()||f.is(m))return;const p=f.anchor.key,h=f.anchor.offset,g=c._nodeMap.get(p);!Je(g)||!l.has(p)||h!==1&&h>m.anchor.offset+1||e.update(()=>{if(!tm(g))return;const y=g.getParent();y===null||gW(y)||a(y,g,f.anchor.offset)})})}function p6t(e,t=GEe,n,r=!1,s=!1){const a=r?e:function(i,l=!1){const c=i.split(`
`);let u=!1;const f=[];for(let m=0;m<c.length;m++){const p=c[m],h=f[f.length-1];qjt.test(p)?f.push(p):$Ee.test(p)||VEe.test(p)?(u=!u,f.push(p)):u||p===""||h===""||!h||I7.test(h)||I7.test(p)||BEe.test(p)||FEe.test(p)||UEe.test(p)||Gjt.test(p)||Kjt.test(p)||Yjt.test(p)||!l?f.push(p):f[f.length-1]=h+p}return f.join(`
`)}(e,s);return Vjt(t,r)(a,n)}const KEe=[...zEe],R7=(()=>{try{return new RegExp("(?<![-.+():%])"),!0}catch{return!1}})(),xW=e=>{if(!e)return"";const n=LV({namespace:"text-value",nodes:MEe});return n.update(()=>{const r=sr();r.clear(),R7?P7(e):r.append(kr().append(Zn(e)))},{discrete:!0}),n.read(()=>sr().getTextContent())},P7=(e,t)=>{p6t(e.replace(/\\/g,"\\\\"),KEe,t,!0)},qf=e=>{if(!e||!e.root)return"";const t=n=>{let r="";if(n.type==="text"&&"text"in n)r=n.text;else if(n.type==="linebreak")r=`
`;else{if((n.type==="link"||n.type==="autolink")&&"url"in n)return r=`[${"children"in n&&Array.isArray(n.children)&&n.children.map(t).reduce((a,i)=>(a+=i,a),"")||""}](${n.url})`,r;if(n.type==="mention"){const a=n.props;if(a.variant==="tab")return r=`[${a.text||a.url}](${a.url})`,r;if(a.variant==="shortcut")return r=a.queryText??"",r;if(a.variant==="source"||a.variant==="space")return r=a.text,r}}return"children"in n&&Array.isArray(n.children)?n.children.map(t).reduce((s,a)=>(s+=a,s),r):r};return t(e.root)},Kr={outerWrapper:{base:["bg-raised","w-full","outline-none","flex","items-center","border","rounded-2xl"],darkMode:"dark:bg-offset",transition:"duration-75 transition-all"},inputWrapper:{base:"overflow-hidden relative flex h-full w-full",expanded:["col-start-1","col-end-4","pb-3"],compact:["flex-grow","flex-shrink","p-sm","order-1"],disabled:"opacity-50 pointer-events-none cursor-not-allowed"},inputElement:["overflow-auto","max-h-[45vh]","lg:max-h-[40vh]","sm:max-h-[25vh]","outline-none","font-sans","resize-none","caret-super","selection:bg-super/30","selection:text-foreground","dark:selection:bg-super/10","dark:selection:text-super","text-foreground","bg-transparent","placeholder-quieter","placeholder:select-none","scrollbar-subtle"],attribution:{left:{base:["gap-sm","flex"],expanded:"col-start-1 row-start-2 -ml-two",compact:"order-0 ml-px"},right:{base:["flex","items-center","justify-self-end"],expanded:"col-start-3 row-start-2",compact:"order-2 mr-px"}},placeholder:{base:["absolute","inset-0","pointer-events-none","select-none","text-quieter"],compact:"p-sm"}},h6t=({isActive:e,isHighlighted:t})=>t?"border-super dark:border-super/85":e?"border-subtle":"border-subtler",g6t=({hasShadow:e,hasQuote:t})=>e&&!t?"shadow-sm dark:shadow-md shadow-super/10 dark:shadow-black/10":"",YEe=I.memo(({quote:e,onClear:t})=>e?o.jsx("div",{className:"py-sm bg-subtler dark:bg-base animate-slideDownAndFadeIn z-[49] mx-3 rounded-lg px-3",children:o.jsxs("div",{className:"gap-sm flex items-start",children:[o.jsx(F,{color:"light",className:"mt-px flex items-center pt-1",variant:"tinyRegular",children:o.jsx(de,{icon:_Le,size:"xs",className:"rotate-180"})}),o.jsx(F,{className:"py-xs line-clamp-3 flex-1 overflow-hidden text-ellipsis",variant:"tinyRegular",color:"light",children:e}),o.jsx("div",{className:"shrink-0",children:o.jsx(Me,{icon:kt,onClick:t,size:"tiny",pill:!0,toolTip:"Clear quote"})})]})}):null);YEe.displayName="QuotePreview";const y6t=he(async()=>{const{HistoryPlugin:e}=await X(async()=>{const{HistoryPlugin:t}=await import("./LexicalHistoryPlugin.prod-c33G8aYm.js");return{HistoryPlugin:t}},__vite__mapDeps([100,1,2,7,6,5]));return{default:e}}),x6t=he(async()=>{const{OnChangePlugin:e}=await X(async()=>{const{OnChangePlugin:t}=await import("./LexicalOnChangePlugin.prod-j4Vp7IAI.js");return{OnChangePlugin:t}},__vite__mapDeps([101,1,2,7,6,5]));return{default:e}}),v6t=he(async()=>{const{EditorRefPlugin:e}=await X(async()=>{const{EditorRefPlugin:t}=await import("./LexicalEditorRefPlugin.prod-C6gqf45O.js");return{EditorRefPlugin:t}},__vite__mapDeps([102,1,2,7,6,5]));return{default:e}}),b6t=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await Promise.resolve().then(()=>gjt);return{default:t}},void 0);return{default:e}}),_6t=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await import("./AutoLinkPlugin-B2vBdTb_.js");return{default:t}},__vite__mapDeps([103,1,2,7,6,5]));return{default:e}}),w6t=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await import("./LinkPlugin-BZ0VZS0h.js");return{default:t}},__vite__mapDeps([104,1,2,7,6,5]));return{default:e}}),C6t=he(async()=>{const{MarkdownShortcutPlugin:e}=await X(async()=>{const{MarkdownShortcutPlugin:t}=await import("./LexicalMarkdownShortcutPlugin.prod-BUh32tjx.js");return{MarkdownShortcutPlugin:t}},__vite__mapDeps([105,1,2,7,6,5]));return{default:e}});function S6t(e,t){switch(t.type){case"SET_EXPANDED":return{...e,isExpanded:t.payload};case"SET_ACTIVE":return{...e,isActive:t.payload};case"SET_COMPOSING":return{...e,isComposing:t.payload};default:return e}}const dw=Dt("ResizableInputContext",{state:{isExpanded:!0,isActive:!1,isComposing:!1},dispatch:()=>{}}),QEe=(e,t,n,r,s)=>{d.useEffect(()=>{const a=n?15:40;e&&e.length>a||e?.includes(`
`)?s(!0):r!==(t==="expanded")&&s(t==="expanded")},[e,t,n,r,s])},OT=I.memo(({initialLayout:e="expanded",wrapperClass:t,size:n,hasShadow:r,isHighlighted:s,isMobileUserAgent:a,quote:i,setQuote:l,attachmentsList:c,inputWarnings:u,children:f,inputRef:m,ref:p})=>{const[h,g]=d.useReducer(S6t,{isExpanded:e==="expanded",isActive:!1,isComposing:!1}),{isActive:y,isExpanded:x}=h,v=d.useMemo(()=>{const C=h6t({isActive:y,isHighlighted:s}),S=g6t({hasShadow:r,hasQuote:!!i});return B(...Kr.outerWrapper.base,Kr.outerWrapper.darkMode,Kr.outerWrapper.transition,t,C,S,{"px-0 pt-3 pb-3":n==="large"&&x,"py-sm px-0":n==="large"&&!x})},[y,t,r,i,n,x,s]),b=d.useCallback(()=>{a||m?.current?.focus()},[m,a]),_=d.useCallback(C=>{if(a)return;const S=C.target,E=m?.current?.element();E&&S!==E&&!E.contains(S)&&C.preventDefault()},[m,a]),w=d.useCallback(()=>l?.(null),[l]);return o.jsx(dw.Provider,{value:{state:h,dispatch:g},children:o.jsx("div",{className:"relative rounded-2xl",ref:p,onClick:b,onMouseDownCapture:_,children:o.jsxs("div",{className:B(v,"gap-y-md grid items-center"),children:[(u||i||c)&&o.jsxs("div",{className:B({"pt-xs":!x},"gap-y-sm grid items-center"),children:[u,i&&o.jsx(YEe,{quote:i,onClear:w}),c]}),o.jsx("div",{className:B({"px-3":n==="large"&&!x,"px-3.5":n==="large"&&x,flex:!x,"grid-rows-1fr-auto grid grid-cols-3":x}),children:f})]})})})});OT.displayName="ResizeableInputWrapper";const E6t=({autoFocus:e=!1,placeholder:t="",disableInput:n=!1,value:r,initialLayout:s="expanded",minRows:a,maxRows:i,onChange:l,onClick:c,onBlur:u,onFocus:f,onKeyDown:m,onPaste:p,isMobileStyle:h,isMobileUserAgent:g,testId:y,id:x,ref:v})=>{const{state:b,dispatch:_}=d.useContext(dw),{isActive:w,isComposing:C,isExpanded:S}=b,E=d.useRef(w);E.current=w;const k=ex(n),M=d.useRef(null),j=d.useMemo(()=>B(Kr.inputWrapper.base,{[Kr.inputWrapper.expanded.join(" ")]:S,[Kr.inputWrapper.compact.join(" ")]:!S,[Kr.inputWrapper.disabled]:n}),[n,S]),R=d.useMemo(()=>B(...Kr.inputElement,"w-full"),[]),O=d.useCallback(H=>{_({type:"SET_EXPANDED",payload:H})},[_]),D=d.useCallback(H=>{_({type:"SET_ACTIVE",payload:H})},[_]),P=d.useCallback(H=>{_({type:"SET_COMPOSING",payload:H})},[_]),A=d.useCallback(H=>{f?.(H.nativeEvent),D(!0)},[f,D]),T=d.useCallback(H=>{u?.(H.nativeEvent)!==!1&&D(!1)},[u,D]),N=d.useCallback(()=>{if(M.current){const H=M.current.value.length;M.current.focus(),M.current.setSelectionRange(H,H),M.current.scrollTop=M.current.scrollHeight}},[]),L=d.useCallback(H=>{if(!M?.current)return!0;const K=M.current,{selectionStart:G,selectionEnd:ee,value:Y}=K;if(G!==ee)return!1;const te=document.createElement("div"),se=window.getComputedStyle(K);te.style.position="absolute",te.style.visibility="hidden",te.style.whiteSpace=se.whiteSpace,te.style.wordWrap=se.wordWrap,te.style.font=se.font,te.style.padding=se.padding,te.style.border=se.border,te.style.width=K.offsetWidth+"px",te.style.lineHeight=se.lineHeight,document.body.appendChild(te);try{const ae=parseInt(se.lineHeight)||24,pe=Y.substring(0,G);te.textContent=pe;const fe=te.offsetHeight;return H==="first"?fe<=ae:(te.textContent=Y,te.offsetHeight-fe<ae)}finally{document.body.removeChild(te)}},[]),U=d.useCallback(H=>{c?.(H.nativeEvent)},[c]),$=d.useCallback(H=>{A1(H.nativeEvent,{isMobileUserAgent:g,isComposing:C,onKeyDown:m})},[m,C,g]),V=d.useCallback(()=>VF(P),[P]),W=d.useCallback(()=>WF(P),[P]),Q=d.useCallback(H=>{p?.(H.nativeEvent)},[p]),q=d.useCallback(H=>{l?.(H.target.value)},[l]);return d.useImperativeHandle(v,()=>{const H=M.current;return H.focusAtEnd=N,H.isFocused=()=>E.current,H.inLine=L,H.append=K=>{M.current&&(M.current.value+=K)},H.scrollToEnd=()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},H.trim=()=>{M.current&&(M.current.value=M.current.value.trim())},H.element=()=>M.current,H},[N,L]),d.useEffect(()=>{!g&&M.current&&e&&(N(),D(!0))},[g,M,e,D,N]),d.useEffect(()=>{k!==n&&!n&&!g&&e&&setTimeout(()=>{M.current?.focus()},200)}),QEe(r,s,h,S,O),o.jsx("div",{className:j,children:o.jsx(m0e,{ref:M,placeholder:t,minRows:a,maxRows:i,value:r,onClick:U,onChange:q,onKeyDown:$,onBlur:T,onCompositionStart:V,onCompositionEnd:W,onFocus:A,onPaste:Q,className:R,autoComplete:"off","data-test-id":y,rows:a,id:x,disabled:n,"data-1p-ignore":!0})})},I2="external-update",L7="focus",M6t="blur",k6t=new Set([I2,L7,M6t]),T6t=({autoFocus:e=!1,placeholder:t="",placeholderClassName:n,disableInput:r=!1,value:s,initialLayout:a="expanded",json:i,minRows:l,onChange:c,onClick:u,onBlur:f,onFocus:m,onKeyDown:p,onPaste:h,isMobileStyle:g,isMobileUserAgent:y,testId:x,id:v,namespace:b="ResizableLexicalInput",mentionTypeaheadOptions:_=ce,onMentionMenuOpen:w,onMentionMenuClose:C,onTriggerTypeahead:S,ref:E})=>{const k=d.useRef(null),[M,j]=d.useState(null),{state:R,dispatch:O}=d.useContext(dw),{isActive:D,isComposing:P,isExpanded:A}=R,T=d.useRef(P),N=d.useRef(D),L=d.useRef(""),U=d.useRef(null),$=d.useRef(e),V=d.useRef(null),W=d.useRef(c),Q=d.useRef(u),q=d.useRef(f),H=d.useRef(m),K=d.useRef(p),G=d.useRef(h);W.current=c,Q.current=u,q.current=f,H.current=m,K.current=p,G.current=h,T.current=P,N.current=D,$.current=e;const ee=ex(r),Y=d.useMemo(()=>B(Kr.inputWrapper.base,{[Kr.inputWrapper.expanded.join(" ")]:A,[Kr.inputWrapper.compact.join(" ")]:!A}),[A]),te=d.useMemo(()=>B(...Kr.inputElement,"size-full"),[]),se=d.useMemo(()=>B(...Kr.placeholder.base,{[Kr.placeholder.compact]:!A},n),[A,n]),ae=d.useCallback(We=>O({type:"SET_EXPANDED",payload:We}),[O]),pe=d.useCallback(We=>O({type:"SET_ACTIVE",payload:We}),[O]),fe=d.useCallback(We=>O({type:"SET_COMPOSING",payload:We}),[O]),ge=d.useCallback(We=>{ne.error(We)},[]),Se=d.useCallback(We=>{H.current?.(We),pe(!0)},[pe]),je=d.useCallback(We=>{q.current?.(We)!==!1&&pe(!1)},[pe]),ye=d.useCallback(We=>{G.current?.(We)},[]),be=d.useCallback(We=>{Q.current?.(We)},[]),Ne=d.useCallback((We,_t,Kt)=>{const en=[...Kt];let Rt;if(en.length>0&&en.every(Ut=>k6t.has(Ut)))if(en.includes(L7)){if(Rt=qf(We.toJSON()),Rt===L.current)return}else return;Rt===void 0&&(Rt=qf(We.toJSON())),L.current=Rt??"",U.current=We.toJSON(),W.current?.(L.current,U.current)},[]),ke=d.useCallback(()=>fe(!0),[fe]),Ie=d.useCallback(()=>fe(!1),[fe]),Ce=d.useCallback(We=>{A1(We,{isMobileUserAgent:y,isComposing:T.current,onKeyDown:K.current})},[y]),Ge=d.useCallback(()=>M?.update(()=>{M2(L7),sr().selectEnd()}),[M]),tt=d.useCallback(We=>M?.update(()=>{const _t=sr(),Kt=Zn(We),en=_t.getLastChild();if(Id(en))en.append(Kt);else throw new Error("Last child is not a paragraph node");_t.selectEnd()}),[M]),gt=d.useCallback(()=>M?.update(()=>{const _t=sr().getLastChild();if(Id(_t)){const Kt=_t.getLastChild();if(Je(Kt)){const Rt=Kt.getTextContent(),Ut=Rt.length-Rt.trimEnd().length;if(Ut){const Rn=Rt.length-Ut;Kt.spliceText(Rn,Ut,"",!0)}}const en=_t.getFirstChild();if(Je(en)){const Rt=en.getTextContent(),Ut=Rt.length-Rt.trimStart().length;Ut&&en.spliceText(0,Ut,"",!0)}U.current=M.getEditorState().toJSON(),L.current=qf(U.current)}else throw new Error("Last child is not a paragraph node")}),[M]),Ee=d.useCallback(We=>M?M.getEditorState().read(()=>{const _t=rt();if(!Be(_t))return!0;if(!_t.isCollapsed())return!1;const Kt=window.getSelection();if(!Kt||Kt.rangeCount===0)return!0;const en=Kt.getRangeAt(0);let Rt=en.getBoundingClientRect();if(Rt.width===0&&Rt.height===0){const rn=document.createTextNode("");en.insertNode(rn),Rt=en.getBoundingClientRect(),rn.remove()}const Ut=M.getElementByKey(sr().getFirstChild()?.getKey()??"")?.getBoundingClientRect();if(!Ut)return!0;const Rn=4;return We==="first"?Math.abs(Rt.top-Ut.top)<=Rn:Math.abs(Rt.bottom-Ut.bottom)<=Rn}):!0,[M]),Re=d.useCallback(()=>{w?.()},[w]),Vt=d.useCallback(()=>{C?.()},[C]),pt=d.useCallback(We=>{M||be(We.nativeEvent)},[M,be]);d.useImperativeHandle(E,()=>({append:tt,trim:gt,focusAtEnd:Ge,isFocused:()=>N.current,inLine:Ee,focus:()=>M?.focus(),blur:()=>M?.blur(),scrollIntoView:We=>M?.getRootElement()?.scrollIntoView(We),scrollToEnd:()=>M?.getRootElement()?.scrollIntoView({block:"end",behavior:"auto"}),element:()=>k?.current,get scrollHeight(){return M?.getRootElement()?.scrollHeight??0},get value(){return qf(M?.getEditorState()?.toJSON())},set value(We){throw new Error("setValue is not supported in Lexical")},get json(){return M?.getEditorState().toJSON()}}),[tt,Ge,gt,M,Ee]),QEe(s,a,g,A,ae),d.useEffect(()=>{!y&&M&&e&&(Ge(),pe(!0))},[y,e,pe,M,Ge]),d.useEffect(()=>{ee!==r&&!r&&!y&&e&&setTimeout(()=>Ge(),200)}),d.useEffect(()=>M?.registerRootListener((We,_t)=>{We&&(We.addEventListener("focus",Se),We.addEventListener("blur",je),We.addEventListener("compositionstart",ke),We.addEventListener("compositionend",Ie),We.addEventListener("keydown",Ce),We.addEventListener("paste",ye),We.addEventListener("click",be)),_t&&(_t.removeEventListener("focus",Se),_t.removeEventListener("blur",je),_t.removeEventListener("compositionstart",ke),_t.removeEventListener("compositionend",Ie),_t.removeEventListener("keydown",Ce),_t.removeEventListener("paste",ye),_t.removeEventListener("click",be))}),[je,be,Ie,Se,Ce,ye,ke,M]),d.useLayoutEffect(()=>{M&&M.setEditable(!r)},[r,M]),d.useLayoutEffect(()=>{M&&(s&&i&&!cs(i,U.current)?Promise.resolve().then(()=>{M.setEditorState(M.parseEditorState(i),{tag:I2}),$.current&&Ge(),U.current=M.getEditorState().toJSON(),L.current=qf(U.current)}):s&&L.current!==s?(M.update(()=>{M2(I2);const We=sr();We.clear(),R7?P7(s):We.append(Zn(s)),$.current&&We.selectEnd()},{discrete:!0}),U.current=M.getEditorState().toJSON(),L.current=qf(U.current)):!s&&L.current!==s&&(M.update(()=>{M2(I2);const We=sr();We.clear(),$.current?We.selectEnd():M.getRootElement()!==document.activeElement&&ta(null)},{discrete:!0}),U.current=M.getEditorState().toJSON(),L.current=qf(U.current)))},[s,i,M,Ge]),d.useEffect(()=>{const We=M?.registerCommand(rc,at=>{const yt=rt(),wt=yt?.getNodes();return wt?.length===1&&Bn(wt[0])?(wt[0].remove(),!0):Be(yt)?(yt.deleteCharacter(at),!0):gu(yt)?(yt.deleteNodes(),!0):!1},Hc),_t=M?.registerCommand(dy,at=>{const yt=rt();return Be(yt)?(yt.deleteWord(at),!0):!1},Hc),Kt=M?.registerCommand(fy,at=>{const yt=rt();return Be(yt)?(yt.deleteLine(at),!0):!1},Hc),en=M?.registerCommand(UM,()=>{const at=rt();return Be(at)?(at.removeText(),!0):!1},Hc),Rt=M?.registerCommand(Em,at=>{const yt=rt();if(typeof at=="string")yt!==null&&yt.insertText(at);else{if(yt===null)return!1;const wt=at.dataTransfer;if(wt!==null)ure(wt,yt,M);else if(Be(yt)){const Mt=at.data;return Mt&&yt.insertText(Mt),!0}}return!0},Hc),Ut=M?.registerCommand(aw,at=>{if("clipboardData"in at){const wt=at.clipboardData?.getData("text/plain");if(wt&&wt.length>um)return at.preventDefault(),!0}const yt=rt();return Be(yt)?(at.preventDefault(),M.update(()=>{const wt=rt(),Mt=gb(at,InputEvent)||gb(at,KeyboardEvent)?null:"clipboardData"in at?at.clipboardData:null;if(Mt&&wt){const{types:bt}=Mt;if(bt.includes("text/html")||bt.includes("application/x-lexical-editor")||Mt.files.length>0||!R7)ure(Mt,wt,M);else{const _e=wt.clone(),ze=kr();P7(Mt.getData("text/plain"),ze);const Oe=[];ze.getChildren().forEach(nt=>{Id(nt)?(Oe.length&&Oe.push(Go()),nt.getChildren().forEach(Xe=>{(Je(Xe)||Bn(Xe)||sc(Xe)||hi(Xe))&&Oe.push(Xe)})):Oe.push(nt)}),ta(_e),C7(M,Oe,_e)}}},{tag:M2e}),!0):!1},Hc),Rn=M?.registerCommand(MV,at=>{const yt=gy(at.target);if(Bn(yt))return!1;const wt=rt();if(Be(wt)){const{anchor:Mt}=wt,bt=Mt.getNode();if(wt.isCollapsed()&&Mt.offset===0&&!ps(bt)&&sNt(bt).getIndent()>0)return at.preventDefault(),M.dispatchCommand(e4t,void 0);if(nNt&&navigator.language==="ko-KR")return!1}else if(!gu(wt))return!1;return at.preventDefault(),M.dispatchCommand(rc,!0)},Hc),rn=M?.registerCommand(kV,at=>{const yt=gy(at.target);if(Bn(yt))return!1;const wt=rt();return Be(wt)||gu(wt)?(at.preventDefault(),M.dispatchCommand(rc,!1)):!1},Hc);return M?.registerNodeTransform(Rc,at=>{at.getFormat()!==0&&at.setFormat(0)}),M?.registerNodeTransform(Ap,at=>{if(at.getChildrenSize()>1){const yt=at.getChildren(),wt=kr();yt.forEach(Mt=>{Ae(Mt)&&(wt.getChildren().length&&wt.append(Go()),Mt.getChildren().forEach(bt=>{(Je(bt)||Bn(bt)||sc(bt)||hi(bt))&&wt.append(bt)}))}),at.clear().append(wt).selectEnd()}}),M?.registerNodeTransform(Ip,at=>{const yt=at.getParent();yt instanceof Ux&&(at.getChildren().forEach(Mt=>{yt.append(Mt)}),at.remove())}),()=>{We?.(),_t?.(),Kt?.(),en?.(),Rt?.(),Ut?.(),Rn?.(),rn?.()}},[M,ye]),d.useEffect(()=>{const We=M?.registerCommand(my,_t=>!_t||V.current&&!V.current.canSubmit()?!1:(A1(_t,{isMobileUserAgent:y,isComposing:T.current,onKeyDown:K.current}),_t.defaultPrevented),Hc);return()=>{We?.()}},[M,Vt,y]);const Nt=d.useMemo(()=>({namespace:b,onError:ge,nodes:MEe,theme:{link:"text-super hover:underline",text:{strikethrough:"line-through"}},editable:!r}),[b,ge,r]),Ke=d.useMemo(()=>({minHeight:`${(l??1)*1.5}em`}),[l]),He=d.useMemo(()=>o.jsx("div",{className:se,children:t}),[t,se]),Tt=d.useMemo(()=>o.jsx(BNt,{className:te,"aria-placeholder":t,placeholder:He,"data-test-id":x,id:v}),[v,t,He,te,x]);return d.useMemo(()=>o.jsx("div",{className:Y,children:o.jsx("div",{className:"w-full",style:Ke,ref:k,onClick:pt,children:o.jsxs(PNt,{initialConfig:Nt,children:[o.jsx(sjt,{contentEditable:Tt,ErrorBoundary:Nr}),o.jsx(y6t,{}),o.jsx(x6t,{onChange:Ne,ignoreSelectionChange:!0}),o.jsx(v6t,{editorRef:j}),o.jsx(b6t,{ref:V,onClose:Vt,onOpen:Re,options:_,onTrigger:S}),o.jsx(_6t,{}),o.jsx(w6t,{}),o.jsx(INt,{}),o.jsx(C6t,{transformers:KEe})]})})}),[Y,Ke,pt,Nt,Tt,Ne,Vt,Re,_,S])},DT=e=>{const t=e.useLexical?T6t:E6t;return o.jsx(t,{...e})},XEe=I.memo(({children:e})=>{const{state:t}=d.useContext(dw),{isExpanded:n}=t;return e!==null?o.jsx("div",{className:B(...Kr.attribution.left.base,{[Kr.attribution.left.expanded]:n,[Kr.attribution.left.compact]:!n}),children:e}):null});XEe.displayName="LeftAttribution";const ZEe=I.memo(({isLoading:e,children:t})=>{const{state:n}=d.useContext(dw),{isExpanded:r}=n;return o.jsxs("div",{className:B(...Kr.attribution.right.base,{[Kr.attribution.right.expanded]:r,[Kr.attribution.right.compact]:!r}),children:[e?o.jsx(F,{color:"light",className:"mr-3",children:o.jsx(de,{icon:Mce,size:"xs",className:"animate-spin"})}):null,t]})});ZEe.displayName="RightAttribution";const JEe=I.memo(({value:e,suggestDropdownProps:t,ResizeableInputWrapperProps:n,ResizeableInputProps:r,leftAttributionComponents:s,rightAttributionComponents:a,syncUncontrolledOnce:i})=>{const l=r.onChange,c=r.ref,u=d.useRef(null),f=d.useRef(e);f.current=e;const m=d.useRef(null),p=d.useRef(!1),h=d.useCallback(g=>{u.current=g,c instanceof Function?c(g):c&&(c.current=g)},[c]);return d.useEffect(()=>{const g=u.current?.value;g&&g!==f.current&&(!i||!p.current)&&l?.(g),i&&(p.current=!0)},[l,i]),yp("ask-input"),o.jsx(bx,{...t,floatingStrategy:"absolute",shouldEnableStacking:!0,portalTarget:m.current??void 0,value:e,children:o.jsxs(OT,{...n,ref:m,children:[o.jsx(DT,{...r,ref:h}),s,a]})})});JEe.displayName="AskInputBase";const _f=I.memo(({size:e,inverse:t,incognitoType:n=Hd.DEFAULT})=>o.jsx(z,{variant:"background",className:B("w-lg text-foreground flex aspect-square shrink-0 items-center justify-center rounded-full border",{"!w-[24px]":e==="small","!w-[16px]":e==="tiny"},{"!bg-inverse !text-inverse border-0":t}),children:n===Hd.GOVERNMENT?o.jsx("svg",{width:e==="tiny"?"10":e==="small"?"12":"16",height:"auto",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fill:"currentColor",d:"M2.75 12.5h2.5v-7h1.5v7h2.5v-7h1.5v7h2.5v-7h1.5v7H16V14H0v-1.5h1.25v-7h1.5zM16 3v1.5H0V3l8-3z"})}):o.jsx("svg",{width:e==="tiny"?"12":e==="small"?"16":"24",height:"auto",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M11.1927 4.54688C11.4375 4.71875 11.651 4.86458 12 4.86458C12.3453 4.86458 12.5529 4.72184 12.7993 4.55235L12.8073 4.54688L12.8084 4.54609C13.152 4.31187 13.5635 4.03125 14.5 4.03125C16.0885 4.03125 17.2083 6.30729 17.9375 8.6875C20.401 9.14062 22 9.875 22 10.6979C22 11.4427 20.6979 12.1094 18.6354 12.5677C18.6562 12.776 18.6667 12.9844 18.6667 13.1979C18.6667 14.0833 18.4948 14.9271 18.1823 15.6979H18.1965C17.2165 18.1697 14.8115 19.9169 12 19.9169C9.18854 19.9169 6.78355 18.1697 5.80356 15.6979H5.81771C5.50521 14.9271 5.33333 14.0833 5.33333 13.1979C5.33333 12.9844 5.34375 12.776 5.36458 12.5677C3.30208 12.1094 2 11.4427 2 10.6979C2 9.875 3.59896 9.14062 6.0625 8.6875C6.79167 6.30729 7.91146 4.03125 9.5 4.03125C10.4365 4.03125 10.848 4.31187 11.1916 4.54609L11.1927 4.54688ZM14.2708 15.6979H14.9167C16.0677 15.6979 17 14.7656 17 13.6146V12.8646C15.5312 13.0781 13.8229 13.1979 12 13.1979C10.1771 13.1979 8.46875 13.0781 7 12.8646V13.6146C7 14.7656 7.93229 15.6979 9.08333 15.6979H9.73437C10.5885 15.6979 11.3542 15.1458 11.625 14.3333C11.7448 13.9687 12.2604 13.9687 12.3802 14.3333C12.651 15.1458 13.4115 15.6979 14.2708 15.6979Z",fill:"currentColor"})})}));_f.displayName="IncognitoIcon";const fw=I.memo(({className:e,color:t})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:t||"currentColor",viewBox:"0 0 66 24",className:e,children:[o.jsx("path",{d:"M33.569 17.032a1.919 1.919 0 0 1-.799-1.593c0-1.277.935-1.982 2.857-2.157l4.956-.473v.134c0 .784-.127 1.492-.378 2.105a3.958 3.958 0 0 1-1.012 1.456c-.834.753-1.993 1.15-3.354 1.15-.94 0-1.724-.215-2.27-.622Z"}),o.jsx("path",{clipRule:"evenodd",fillRule:"evenodd",d:"M60.756 1.398c1.886.991 3.382 2.457 4.443 4.353 1.03 1.813 1.55 3.918 1.55 6.257 0 2.339-.521 4.444-1.55 6.257a10.934 10.934 0 0 1-2.475 3.027l-7.77-9.445 5.845-7.145V3.92h-3.135l-.076.096-4.626 5.837h-.009l-4.626-5.837-.075-.096h-3.136v.782l5.847 7.146-5.847 7.145v.782h3.136l.075-.095 4.626-5.837h.01l7.214 9.087-.017.01c-1.293.703-1.948 1.06-3.755 1.06H.25V1.862C.25.834 1.085 0 2.113 0h52.932c2.063 0 3.985.482 5.711 1.398ZM27.842 19.773V9.272c0-1.69-.55-3.073-1.59-4.002-.954-.851-2.28-1.301-3.834-1.301-1.375 0-2.54.306-3.463.91-.62.407-1.137.946-1.572 1.642a.1.1 0 0 1-.175-.008 4.35 4.35 0 0 0-1.35-1.605c-.864-.624-1.97-.94-3.285-.94-2.436 0-3.62.89-4.327 1.824-.059.077-.181.038-.181-.06V4.32H5.063v15.452h3.09V10.71c0-1.377.358-2.442 1.064-3.166.65-.665 1.597-1.017 2.74-1.017.967 0 1.712.26 2.215.772.488.499.736 1.221.736 2.148v10.326h3.09V10.71c0-1.377.358-2.442 1.063-3.165.65-.666 1.597-1.018 2.74-1.018.967 0 1.712.26 2.215.773.489.498.736 1.221.736 2.148v10.325h3.09Zm15.8 0 .001-10.003c0-1.821-.64-3.32-1.85-4.334-1.146-.96-2.862-1.468-4.72-1.468-1.856 0-3.49.467-4.723 1.35-1.213.87-2.003 2.096-2.254 3.557-.057.331-.04.736-.04.736h3.008l.027-.22c.122-.963.521-1.708 1.185-2.213.669-.51 1.587-.768 2.738-.768s2.038.27 2.636.8c.619.55.933 1.391.933 2.502v.682l-5.356.507c-3.577.344-5.547 1.997-5.547 4.656 0 1.375.564 2.531 1.63 3.346 1.023.781 2.436 1.194 4.088 1.194 1.43 0 2.66-.304 3.656-.903a5.177 5.177 0 0 0 1.408-1.237c.059-.075.179-.033.179.063v1.753h3.002Z"})]}));fw.displayName="MaxBadge";const vW=I.memo(({className:e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",viewBox:"0 0 51 24",className:e,children:[o.jsx("path",{d:"M35.069 7.954c-1.723 1.74-1.706 6.368 0 8.121 1.597 1.799 5.273 1.817 6.855 0 .873-.922 1.315-2.417 1.315-4.075 0-1.66-.442-3.144-1.317-4.048-1.584-1.853-5.256-1.834-6.853.002Z"}),o.jsx("path",{fillRule:"evenodd",d:"m48.958 5.715-.009-.015a10.792 10.792 0 0 0-4.387-4.301l-.01-.006C42.81.47 40.861 0 38.761 0H1.905C.866 0 .002.84 0 1.88V24h3.818V4.359h3.245v1.284c0 .132.161.196.252.1 2.987-3.275 9.077-2.319 11.216 1.723.725 1.234 1.092 2.759 1.092 4.534.102 4.584-3.017 8.265-7.55 8.235-2.031 0-3.629-.79-4.757-1.978a.146.146 0 0 0-.253.1V24h31.7c2.1 0 4.045-.468 5.78-1.39l.011-.005a10.795 10.795 0 0 0 4.394-4.302l.009-.016C49.98 16.483 50.5 14.368 50.5 12s-.52-4.482-1.543-6.285ZM30.112 7.42a24.93 24.93 0 0 1-.86-.003c-1.338-.02-2.845-.041-3.676.819-.549.54-.827 1.468-.827 2.759v8.809h-3.243V4.359h3.243v1.284c0 .148.194.202.271.077.314-.506.65-.852 1.012-1.05.616-.353 1.462-.532 2.514-.532h1.566V7.42Zm8.399 12.814c-4.77.033-8.068-3.395-7.973-8.235 0-1.716.348-3.21 1.033-4.442 2.714-5.062 11.157-5.068 13.852-.002.704 1.234 1.06 2.729 1.06 4.444.08 4.807-3.207 8.268-7.972 8.235Z",clipRule:"evenodd"}),o.jsx("path",{d:"M16.378 12c0 1.657-.442 3.153-1.314 4.075-1.583 1.816-5.26 1.798-6.857 0-1.706-1.753-1.722-6.381 0-8.121 1.597-1.836 5.27-1.855 6.854-.003.875.904 1.317 2.39 1.317 4.049Z"})]}));vW.displayName="ProBadge";const l0=I.memo(({isMax:e,className:t})=>e?o.jsx("div",{style:{"--mode-color":"oklch(var(--max-color))"},children:o.jsx(fw,{className:`text-max ${t||""}`})}):o.jsx("div",{style:{"--mode-color":"oklch(var(--super-color))"},children:o.jsx(vW,{className:`text-super ${t||""}`})}));l0.displayName="SearchModeBadge";function su(e){switch(e){case ue.SEARCH:return le.PRO;case ue.RESEARCH:return le.ALPHA;case ue.STUDIO:return le.BETA;case ue.STUDY:return le.STUDY;default:return le.PRO}}const eMe=I.memo(e=>{const{isFollowUp:t,value:n,onChange:r,buttonSize:s="small",variant:a="primaryGhost"}=e,i=ix(),{$t:l}=Z(),c=Px(),u=qa(),f=d.useMemo(()=>n!==void 0?vo[n]||ue.SEARCH:u,[n,u]),{isMax:m,hasAccessToProFeatures:p}=St(),h=et(),{gpt4Limit:g,pplxAlphaLimit:y,pplxBetaLimit:x}=ir(),{specialCapabilities:v}=ts(),{preferredSearchModels:b,actions:_}=In(),w=Ha(),C=bT(),{isMaxUpsellEnabled:S}=Uu(),[E,k]=d.useState(()=>{const A=b[ue.SEARCH];return v.unlimitedProSearch?!0:A===le.DEFAULT?!1:h});E&&g===0&&!v.unlimitedProSearch&&k(!1);const{gateSearchModeSelection:M}=sw(),j=d.useCallback(()=>{M(le.BETA,!0)},[M]),R=d.useCallback(A=>M(A?le.PRO:le.DEFAULT)?(k(!1),_.setPreferredSearchModel(ue.SEARCH,le.DEFAULT),!1):(k(A),_.setPreferredSearchModel(ue.SEARCH,A?le.PRO:le.DEFAULT),A),[_,M]),O=d.useCallback(A=>{(A===ue.SEARCH||S)&&_.setPreferredSearchMode(A);let T;switch(A){case ue.SEARCH:{E?T=b[A]??su(A):T=le.DEFAULT;break}case ue.RESEARCH:{S?T=b[A]??su(A):T=su(A);break}case ue.STUDIO:{S?T=b[A]??su(A):T=su(A);break}default:{T=le.DEFAULT;break}}if(!C(T)){M(T);return}r?r(T):c(T,A)},[_,S,E,r,b,c,C,M]),D=d.useMemo(()=>{function A($,V){return{active:f===$,description:l(ls[$].description),icon:Wg[$],onClick(){O($)},text:l(ls[$].name),type:"default",...V}}const T=$=>h&&$<=10&&!m,N=[];N.push(A(ue.SEARCH,{customDescriptionNode:p?void 0:o.jsxs(o.Fragment,{children:[o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(ie,{...ls[ue.SEARCH].description})}),o.jsxs("div",{className:"gap-md flex flex-col",children:[o.jsx("hr",{className:"border-subtler bg-subtler -mr-5 mt-3"}),o.jsxs("div",{className:"gap-sm -mr-5 flex items-start justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("button",{onClick:()=>{M(v.unlimitedProSearch?le.PRO:le.SONAR)},type:"button",children:o.jsx(F,{className:"font-medium underline",color:"super",variant:"tiny",children:o.jsx(ie,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})})}),o.jsx(l0,{isMax:m,className:"h-2.5"})]}),o.jsx(F,{className:"italic",color:"super",variant:"tinyRegular",children:o.jsx(ie,{defaultMessage:"Advanced search with 10x the sources",id:"MZLTMODV37"})}),h&&g<=10&&o.jsx(F,{className:"mt-1 font-light",color:"super",variant:"tinyRegular",children:o.jsx(ie,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:g}})})]}),o.jsx(tMe,{isProSearchEnabled:E,selectSearchModel:c,selectedSearchMode:f,setIsProSearchEnabled:R})]})]})]}),customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(F,{variant:"smallBold",children:o.jsx(ie,{...ls[ue.SEARCH].name})}),o.jsx(l0,{isMax:m,className:"h-2.5"})]})}));const L=Math.min(g,y);N.push(A(ue.RESEARCH,{customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(F,{variant:"smallBold",children:o.jsx(ie,{...ls[ue.RESEARCH].name})}),o.jsx(l0,{isMax:m||i(ue.RESEARCH),className:"h-2.5"})]}),customDescriptionNode:o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(ie,{...ls[ue.RESEARCH].description})}),T(L)&&o.jsxs("div",{children:[o.jsx(F,{color:"super",variant:"tinyRegular",children:o.jsx(ie,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:L}})}),i(ue.RESEARCH)&&o.jsx(me,{onClick:j,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})}));const U=Math.min(g,x);return N.push(A(ue.STUDIO,{customTextNode:o.jsxs("div",{className:"gap-sm mt-px flex items-center",children:[o.jsx(F,{variant:"smallBold",children:o.jsx(ie,{...ls[ue.STUDIO].name})}),o.jsx(l0,{isMax:m||i(ue.STUDIO),className:"h-2.5"})]}),customDescriptionNode:o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"light",children:o.jsx(ie,{...ls[ue.STUDIO].description})}),T(U)&&o.jsxs("div",{children:[o.jsx(F,{color:"max",variant:"tinyRegular",children:o.jsx(ie,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:U}})}),i(ue.STUDIO)&&o.jsx(me,{onClick:j,variant:"common",size:"small",fullWidth:!0,extraCSS:"mt-sm",text:l({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})})]})]})})),N},[p,m,h,g,E,c,f,R,y,i,j,l,x,O,M,v.unlimitedProSearch]),P=d.useMemo(()=>o.jsx(de,{icon:Wn,size:"xs",className:B("-mx-xs -mb-two opacity-50",{"-ml-sm":t})}),[t]);return o.jsx(nn,{isMobileStyle:w,items:D,placement:"bottom-start",children:o.jsx(me,{icon:Wg[f],size:s,text:t?o.jsx(o.Fragment,{children:""}):l(ls[f].name),variant:a,trailingComponent:P})})});eMe.displayName="SearchModeDropdownMenu";const tMe=I.memo(({isProSearchEnabled:e,selectSearchModel:t,selectedSearchMode:n,setIsProSearchEnabled:r})=>{const s=d.useCallback(i=>{r(i)&&n===ue.SEARCH&&t(i?le.PRO:le.DEFAULT)},[t,n,r]),a=d.useMemo(()=>({onClick(i){i.stopPropagation()}}),[]);return o.jsx(_o,{active:e,onChange:s,size:"small",switchProps:a})});tMe.displayName="SwitchFactory";const nMe=()=>{const{base:e}=vt(),t=Lt();return t===(e||"/")||t?.startsWith("/welcome")||t?.startsWith("/finance")},Zd=[.4,0,.2,1],Kre=10,rMe=I.memo(e=>{const{children:t,tooltipContent:n,triggeredSearchModeElement:r,isOpen:s,setIsOpen:a}=e,{showSuggestDropdown:i}=ea(),[l,c]=d.useState(!1),u=s!==void 0?s:l,f=a||c,m=d.useRef(0),[p,h]=Ho(),[g,y]=Ho(),v=d.useCallback(()=>{const{left:E=0,width:k=0}=r?.getBoundingClientRect()??{};return h.width===0||E===0?0:E-h.left+k/2-Kre/2},[h,r])();let b=v!==0;v!==0&&v!==m.current&&(b=m.current!==0,m.current=v);const _=d.useCallback(E=>{E||(m.current=0),f(E)},[f]),w=d.useCallback(E=>{E.preventDefault()},[]),C=d.useCallback(()=>{f(!1)},[f]),S=d.useCallback(E=>{E.preventDefault()},[]);return o.jsx(OD,{delayDuration:i?1e3:400,skipDelayDuration:100,children:o.jsxs($D,{onOpenChange:_,open:u,children:[o.jsx(DD,{asChild:!0,className:"focus:outline-none",onBlur:C,onClick:w,onPointerDown:S,children:t}),o.jsx(UD,{children:o.jsx(BD,{className:B("group/tooltip-content data-[state=closed]:animate-slideDownAndFadeOut data-[state=delayed-open]:animate-slideUpAndFadeIn ease-outExpo duration-300"),"data-color-scheme":"dark",sideOffset:4,side:"bottom",ref:p,children:o.jsxs(ve.div,{className:B("bg-base shadow-overlay flex w-72 flex-col rounded-lg"),animate:{height:y.height||void 0},transition:{duration:.05,ease:Zd},children:[o.jsxs(ve.div,{className:'absolute left-0 group-data-[side="bottom"]/tooltip-content:top-0 group-data-[side="top"]/tooltip-content:bottom-0',animate:{opacity:m.current?1:void 0,x:b?v:void 0},initial:{opacity:0},transition:{duration:.05,ease:Zd},style:{x:v,width:Kre},children:[o.jsx(uE,{className:"fill-inverse"}),o.jsx(uE,{className:"fill-inverse -translate-y-px scale-[99%]"})]}),o.jsx("div",{className:B("relative overflow-hidden"),children:o.jsx("div",{className:"whitespace-normal",ref:g,children:n})})]})})})]})})});rMe.displayName="SearchModeTooltip";const sMe={[ue.SEARCH]:le.DEFAULT,[ue.RESEARCH]:le.ALPHA,[ue.STUDIO]:le.BETA,[ue.STUDY]:le.DEFAULT},FT=I.memo(e=>{const{children:t,className:n,searchMode:r,...s}=e,{gateSearchModeSelection:a}=sw();return o.jsx("button",{className:B("group",n),onClick:()=>{a(sMe[r],!0)},type:"button",...s,children:o.jsx(F,{className:"!text-[var(--mode-color)] underline decoration-transparent transition-[text-decoration-color] group-hover:decoration-[var(--mode-color)]",variant:"smallBold",children:t})})});FT.displayName="SearchModeTooltipUpgradeButton";const UT=I.memo(e=>{const{badgeNode:t,color:n,enabledText:r,isEnabled:s,upgradeButton:a,isMaxUpsell:i=!1}=e;return o.jsxs("div",{className:"gap-sm flex items-center",style:{"--mode-color":n==="super"?"oklch(var(--super-color))":"oklch(var(--max-color))"},children:[t,s?o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(F,{className:"!text-[var(--mode-color)]",variant:"smallBold",children:r}),!i&&o.jsx(dr,{className:"text-[var(--mode-color)]",size:18})]}):o.jsx(o.Fragment,{children:a})]})});UT.displayName="SearchModeTooltipFooter";const aMe=I.memo(e=>{const{searchMode:t}=e,{$t:n}=Z(),r=et(),{hasAccessToProFeatures:s}=St(),{gateSearchModeSelection:a}=sw(),i=ix(),{specialCapabilities:l}=ts(),c=d.useCallback(()=>{a(sMe[t],!0)},[a,t]);return i(t)?o.jsx(me,{onClick:c,variant:"maxGold",size:"small",fullWidth:!0,text:n({defaultMessage:"Upgrade to Max",id:"z+PtTMgM3T"})}):l.unlimitedProSearch||l.unlimitedResearch||r&&s||t===ue.STUDY?null:o.jsx(me,{onClick:c,variant:"primary",size:"small",fullWidth:!0,testId:"upgrade-to-pro-button",text:r?o.jsx(ie,{defaultMessage:"Upgrade to Pro",id:"5N04mo7WNC"}):o.jsx(ie,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"})})});aMe.displayName="SearchModeTooltipUpsellButton";const mw=I.memo(e=>{const{footerNode:t,includeNewBadge:n,searchMode:r}=e,{$t:s}=Z();return o.jsxs("div",{className:"p-md flex flex-col gap-4",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs("div",{className:"relative",children:[o.jsx(F,{className:"text-box-trim-both",variant:"smallExtraBold",children:s(ls[r].name)}),n&&o.jsx(z,{className:"absolute -right-1 -top-1 rounded-md px-2 py-1",variant:"subtle",children:o.jsx(F,{variant:"tiny",children:o.jsx(ie,{defaultMessage:"New",id:"bW7B87wFFp"})})})]}),o.jsx(F,{variant:"small",className:"text-pretty",children:s(ls[r].description)})]}),o.jsx("hr",{className:"border-subtler bg-subtler"}),o.jsx("div",{className:"gap-xs flex flex-col",children:t}),o.jsx(aMe,{searchMode:r})]})});mw.displayName="SearchModeTooltipContentContainer";const BT=I.memo(({isMaxUpsell:e=!1})=>{const{isMax:t,isPro:n}=St();return t||e?o.jsx(fw,{className:"text-max h-3"}):n?o.jsx(vW,{className:"text-super h-3"}):null});BT.displayName="SearchModeBadge";const bW=({isMax:e,isPro:t,isMaxUpsell:n=!1})=>e||n?"max":"super",oMe=I.memo(e=>{const{isToggleActive:t,onToggleChange:n}=e,r=et(),{hasAccessToProFeatures:s,isMax:a,isPro:i}=St(),{gpt4Limit:l}=ir(),{specialCapabilities:c,isGovernmentRequestOrigin:u}=ts(),f=!r&&!c.unlimitedProSearch?null:s||c.unlimitedProSearch?u?o.jsx(ie,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):o.jsx(ie,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):l>0&&l<=10?o.jsx(ie,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:l}}):null,m=d.useMemo(()=>o.jsx(BT,{}),[]),p=d.useMemo(()=>({onClick(x){x.stopPropagation()}}),[]),h=d.useMemo(()=>o.jsx(FT,{searchMode:ue.SEARCH,children:o.jsx(ie,{defaultMessage:"Try Pro Search",id:"akAejIEhqZ"})}),[]),g=d.useMemo(()=>o.jsx(ie,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[]),y=d.useMemo(()=>o.jsxs("div",{className:"flex",children:[o.jsxs("div",{className:"gap-xs flex w-full flex-col",children:[o.jsx(UT,{badgeNode:m,color:bW({isMax:a,isPro:i}),enabledText:g,isEnabled:s||c.unlimitedProSearch,upgradeButton:h}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(ie,{defaultMessage:"Advanced search with 10x the sources; powered by top models",id:"IKFeqUH+w0"})}),f&&o.jsx(F,{color:"default",variant:"small",className:"mt-xs opacity-60",children:f})]}),!s&&!c.unlimitedProSearch&&o.jsx("div",{children:o.jsx(_o,{active:t,onChange:n,switchProps:p})})]}),[m,g,s,a,i,t,n,f,p,h,c.unlimitedProSearch]);return o.jsx(mw,{footerNode:y,searchMode:ue.SEARCH})});oMe.displayName="ProSearchModeTooltip";const iMe=I.memo(()=>{const e=et(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=St(),{gpt4Limit:s,pplxAlphaLimit:a}=ir(),{specialCapabilities:i,isGovernmentRequestOrigin:l}=ts(),c=ix(),u=c(ue.RESEARCH),f=!e&&!i.unlimitedResearch||Math.min(s,a)<0||c(ue.RESEARCH)?null:i.unlimitedResearch&&l?o.jsx(ie,{defaultMessage:"Unlimited access for government",id:"0JftsQv9MC"}):n?o.jsx(ie,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):a<=10?o.jsx(ie,{defaultMessage:"{limit, plural, one {# query remaining today} other {# queries remaining today}}",id:"ooxxk0PKGd",values:{limit:a}}):o.jsx(ie,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}),m=d.useMemo(()=>o.jsx(BT,{isMaxUpsell:u}),[u]),p=d.useMemo(()=>u?o.jsx(ie,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(ie,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[u]),h=d.useMemo(()=>o.jsx(FT,{searchMode:ue.RESEARCH,children:e?u?o.jsx(ie,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(ie,{defaultMessage:"Extended access for subscribers",id:"ATGyCTI4+V"}):o.jsx(ie,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,u]),g=d.useMemo(()=>o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(UT,{badgeNode:m,color:bW({isMax:n,isPro:r,isMaxUpsell:u}),enabledText:p,isEnabled:t||i.unlimitedResearch,upgradeButton:h,isMaxUpsell:u}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(ie,{defaultMessage:"In-depth reports with more sources, charts, and advanced reasoning",id:"9V0OqZ9HGl"})}),f&&o.jsx(F,{color:"default",variant:"small",className:"mt-xs opacity-60",children:f})]}),[m,p,t,n,r,u,f,h,i.unlimitedResearch]);return o.jsx(mw,{footerNode:g,searchMode:ue.RESEARCH})});iMe.displayName="ResearchModeTooltip";const lMe=I.memo(()=>{const e=et(),{hasAccessToProFeatures:t,isMax:n,isPro:r}=St(),{gpt4Limit:s,pplxBetaLimit:a}=ir(),i=ix(),l=i(ue.STUDIO),c=(()=>{if(!e)return null;if(!t)return o.jsx(ie,{defaultMessage:"Upgrade to get access",id:"eRbSgHbjUP"});const h=Math.min(s,a);return h<0||i(ue.STUDIO)?null:n?o.jsx(ie,{defaultMessage:"Unlimited access for subscribers",id:"EvvPQiWwUI"}):o.jsx(ie,{defaultMessage:"{limit, plural, one {# query remaining this month} other {# queries remaining this month}}",id:"wlPH+sOjjI",values:{limit:h}})})(),u=d.useMemo(()=>o.jsx(BT,{isMaxUpsell:l}),[l]),f=d.useMemo(()=>l?o.jsx(ie,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(ie,{defaultMessage:"Enabled",id:"V52jNnY+6M"}),[l]),m=d.useMemo(()=>o.jsx(FT,{searchMode:ue.STUDIO,children:e?l?o.jsx(ie,{defaultMessage:"Unlimited access with Max",id:"ARAQvr+fwO"}):o.jsx(ie,{defaultMessage:"Access for subscribers only",id:"Ez3b/pzas/"}):o.jsx(ie,{defaultMessage:"Get more queries with Pro",id:"BZEuCK3Abs"})}),[e,l]),p=d.useMemo(()=>o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(UT,{badgeNode:u,color:bW({isMax:n,isPro:r,isMaxUpsell:l}),enabledText:f,isEnabled:t,upgradeButton:m,isMaxUpsell:l}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:l?o.jsx(ie,{defaultMessage:"Draft, design, deliver your ideas.",id:"I1aIhz4l3D"}):o.jsx(ie,{defaultMessage:"Turn your ideas into completed docs, slides, dashboards, and more",id:"WRu1tcOhoj"})}),c&&o.jsx(F,{color:"default",variant:"small",className:"mt-xs opacity-60",children:c})]}),[u,f,t,n,r,l,c,m]);return o.jsx(mw,{footerNode:p,searchMode:ue.STUDIO,includeNewBadge:!0})});lMe.displayName="StudioModeTooltip";const cMe=I.memo(()=>{const e=I.useMemo(()=>o.jsx("div",{children:o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(ie,{defaultMessage:"Interactive learning and study tools that guide you toward deeper understanding beyond quick answers. ",id:"ZRKKxSc+oV"})})}),[]);return o.jsx(mw,{footerNode:e,searchMode:ue.STUDY,includeNewBadge:!0})});cMe.displayName="StudyModeTooltip";var _W="Radio",[N6t,uMe]=Ca(_W),[j6t,A6t]=N6t(_W),dMe=d.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:a,disabled:i,value:l="on",onCheck:c,form:u,...f}=e,[m,p]=d.useState(null),h=En(t,x=>p(x)),g=d.useRef(!1),y=m?u||!!m.closest("form"):!0;return o.jsxs(j6t,{scope:n,checked:s,disabled:i,children:[o.jsx(Xt.button,{type:"button",role:"radio","aria-checked":s,"data-state":hMe(s),"data-disabled":i?"":void 0,disabled:i,value:l,...f,ref:h,onClick:it(e.onClick,x=>{s||c?.(),y&&(g.current=x.isPropagationStopped(),g.current||x.stopPropagation())})}),y&&o.jsx(pMe,{control:m,bubbles:!g.current,name:r,value:l,checked:s,required:a,disabled:i,form:u,style:{transform:"translateX(-100%)"}})]})});dMe.displayName=_W;var fMe="RadioIndicator",mMe=d.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,a=A6t(fMe,n);return o.jsx(es,{present:r||a.checked,children:o.jsx(Xt.span,{"data-state":hMe(a.checked),"data-disabled":a.disabled?"":void 0,...s,ref:t})})});mMe.displayName=fMe;var I6t="RadioBubbleInput",pMe=d.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},a)=>{const i=d.useRef(null),l=En(i,a),c=IU(n),u=u5(t);return d.useEffect(()=>{const f=i.current;if(!f)return;const m=window.HTMLInputElement.prototype,h=Object.getOwnPropertyDescriptor(m,"checked").set;if(c!==n&&h){const g=new Event("click",{bubbles:r});h.call(f,n),f.dispatchEvent(g)}},[c,n,r]),o.jsx(Xt.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:l,style:{...s.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});pMe.displayName=I6t;function hMe(e){return e?"checked":"unchecked"}var R6t=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],$T="RadioGroup",[P6t,Ccn]=Ca($T,[mx,uMe]),gMe=mx(),yMe=uMe(),[L6t,O6t]=P6t($T),xMe=d.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:a,required:i=!1,disabled:l=!1,orientation:c,dir:u,loop:f=!0,onValueChange:m,...p}=e,h=gMe(n),g=S_(u),[y,x]=Ni({prop:a,defaultProp:s??null,onChange:m,caller:$T});return o.jsx(L6t,{scope:n,name:r,required:i,disabled:l,value:y,onValueChange:x,children:o.jsx(YU,{asChild:!0,...h,orientation:c,dir:g,loop:f,children:o.jsx(Xt.div,{role:"radiogroup","aria-required":i,"aria-orientation":c,"data-disabled":l?"":void 0,dir:g,...p,ref:t})})})});xMe.displayName=$T;var vMe="RadioGroupItem",bMe=d.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,a=O6t(vMe,n),i=a.disabled||r,l=gMe(n),c=yMe(n),u=d.useRef(null),f=En(t,u),m=a.value===s.value,p=d.useRef(!1);return d.useEffect(()=>{const h=y=>{R6t.includes(y.key)&&(p.current=!0)},g=()=>p.current=!1;return document.addEventListener("keydown",h),document.addEventListener("keyup",g),()=>{document.removeEventListener("keydown",h),document.removeEventListener("keyup",g)}},[]),o.jsx(QU,{asChild:!0,...l,focusable:!i,active:m,children:o.jsx(dMe,{disabled:i,required:a.required,checked:m,...c,...s,name:a.name,ref:f,onCheck:()=>a.onValueChange(s.value),onKeyDown:it(h=>{h.key==="Enter"&&h.preventDefault()}),onFocus:it(s.onFocus,()=>{p.current&&u.current?.click()})})})});bMe.displayName=vMe;var D6t="RadioGroupIndicator",_Me=d.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=yMe(n);return o.jsx(mMe,{...s,...r,ref:t})});_Me.displayName=D6t;const F6t=e=>{const t=Sn(e);if(!t)return 0;const n=parseInt(t);return isNaN(n)?1:n},Yre=(e,t)=>{sn(e,t.toString(),{expires:365})},wW=({cueKey:e,impressionsLimit:t,enabled:n})=>{const[r,s]=d.useState(!1),[a,i]=d.useState(0);d.useEffect(()=>{if(!n){s(!1);return}const c=F6t(e);i(c),c<t&&(s(!0),Yre(e,c+1),i(c+1))},[e,t,n]);const l=d.useCallback(()=>{Yre(e,t),i(t),s(!1)},[e,t]);return d.useMemo(()=>({shouldShow:r,currentCount:a,setReachedImpressions:l}),[r,a,l])},U6t={xs:"px-xs py-xxs",sm:"px-sm py-xs"},B6t=e=>{switch(e){case"common":return{background:"dark bg-base",titleText:"!text-light font-semibold",subtitleText:"!text-light mt-xxs opacity-90",arrow:"dark fill-base [&>path]:stroke-subtler dark:[&>path]:stroke-1 [clip-path:inset(1px_1px_0px_1px)]",borderRadius:"rounded-md"};default:return{background:"!bg-super !shadow-none",titleText:"!text-inverse",subtitleText:"!text-inverse mt-xs opacity-90",arrow:"fill-super",borderRadius:"rounded-md"}}},VT=I.memo(({cueKey:e,title:t,subtitle:n,children:r,enabled:s,impressionsLimit:a=1,variant:i="primary",size:l="xs",placement:c="bottom",sideOffset:u=10,className:f})=>{const[m,p]=d.useState(!1),{shouldShow:h}=wW({cueKey:e,impressionsLimit:a,enabled:s}),g=B6t(i),y=h&&!m,x=()=>!t&&!n?null:o.jsxs("div",{className:B(U6t[l],f),children:[t&&o.jsx(F,{variant:"tiny",className:g.titleText,children:t}),n&&o.jsx(F,{variant:"tiny",className:g.subtitleText,children:n})]}),v=d.useCallback(()=>{p(!0)},[]),b=d.useMemo(()=>({removeScroll:!1,animationClassName:"z-[2000]"}),[]);return o.jsx(ei,{content:x(),contentClassName:g.background,arrowClassName:g.arrow,borderRadius:g.borderRadius,isOpen:s&&y,onClose:v,placement:c,sideOffset:u,overlayProps:b,children:r})});VT.displayName="Cue";const CW=I.memo(e=>{const{className:t="",layoutKey:n="",options:r,value:s,backgroundClassName:a="",radioGroupIndicatorClassName:i="",variant:l="default",areCuesEnabled:c=!1,...u}=e,f=(()=>{switch(l){case"subtle":return"";case"default":return"bg-white dark:bg-black dark:bg-gradient-to-b dark:from-super/20 dark:to-super/20";default:Qt(l)}})(),{$t:m}=Z(),p=d.useMemo(()=>({study:m({defaultMessage:"Learn with Study Mode",id:"kJFaTtzXAA"})}),[m]),h=d.useMemo(()=>r.map(y=>{const x=y.value===s;return o.jsx(VT,{cueKey:`segmented-control-${y.value}`,enabled:!!p[y.value]&&c,placement:"top",title:p[y.value],children:o.jsxs(bMe,{...y.elementProps,"aria-label":y.label,disabled:y.disabled??void 0,className:"segmented-control group/segmented-control relative focus:outline-none",value:y.value,children:[x&&o.jsx(_Me,{asChild:!0,className:B("pointer-events-none absolute inset-0 z-0 block",f,"border-super dark:border-super/30 border","rounded-lg","shadow-super/30 dark:shadow-super/5 shadow-[0_1px_3px_0]","dark:text-super","transition-colors duration-300","group-focus-visible/segmented-control:border-dashed",i),children:o.jsx(ve.div,{layoutId:`segmented-control-active-indicator-${n}`,transition:{duration:.1}})}),y.children]})},y.value)}),[r,s,p,c,f,i,n]),g=(()=>{switch(l){case"subtle":return"bg-subtle";case"default":return"bg-super/10 dark:bg-black/[0.18]";default:Qt(l)}})();return o.jsxs(xMe,{...u,className:B("group relative isolate flex h-fit",t),value:s,children:[o.jsx("div",{className:B("absolute inset-0",g,"dark:border dark:border-black/[0.04]","rounded-[10px]","transition-colors duration-300",a)}),o.jsx("div",{className:"p-two flex shrink-0 items-center",children:h})]})});CW.displayName="SegmentedControl";const SW=I.memo(e=>{const{className:t="",isActiveOption:n,icon:r,label:s,activeColor:a="text-super"}=e,i=B("transition-colors duration-300",{[a]:n,"text-quiet group-hover/segmented-control:text-foreground":!n});return o.jsxs("div",{className:B("relative z-10 flex h-8 min-w-9 items-center justify-center",{"py-xs gap-xs px-2.5":n||s},t),children:[r&&o.jsx(k0,{buttonSize:"small",icon:r,iconClassName:B(i),showClicked:!1}),s&&o.jsx("div",{className:B("px-two font-sans text-sm leading-[1.125rem]",i),children:s})]})});SW.displayName="SegmentedControlOption";const wMe=I.memo(e=>{const{isFollowUp:t,layoutKey:n,value:r,onChange:s,className:a,variant:i}=e,l=qa(),c=d.useMemo(()=>r!==void 0?vo[r]||ue.SEARCH:l,[r,l]),{$t:u}=Z(),f=Px(),m=Lt(),{inputRef:p}=ea(),h=et(),{gpt4Limit:g}=ir(),{specialCapabilities:y}=ts(),x=nMe(),v=e_e(),{currentOpenedModal:b}=xt(),{preferredSearchModels:_,actions:w}=In(),{isMaxUpsellEnabled:C}=Uu(),[S,E]=d.useState(ue.SEARCH),k=d.useRef(null),[M,j]=d.useState(!1),R=d.useRef(null);d.useEffect(()=>()=>{R.current&&clearTimeout(R.current)},[]);const{gateSearchModeSelection:O}=sw(),[D,P]=d.useState(()=>_[ue.SEARCH]===le.DEFAULT?!1:h||y.unlimitedProSearch),A=d.useCallback(H=>O(H?le.PRO:le.DEFAULT)?(P(!1),w.setPreferredSearchModel(ue.SEARCH,le.DEFAULT),!1):(P(H),w.setPreferredSearchModel(ue.SEARCH,H?le.PRO:le.DEFAULT),H),[w,O]),T=d.useCallback(H=>{switch(H){case ue.SEARCH:return D?_[H]??su(H):le.DEFAULT;case ue.RESEARCH:return _[H]??su(H);case ue.STUDIO:return _[H]??su(H);case ue.STUDY:return le.STUDY}},[D,_]),N=bT(),L=N(le.STUDY),U=d.useCallback(H=>{(H===ue.SEARCH||C)&&w.setPreferredSearchMode(H);const K=T(H);N(K)?(s?s(K):f(K,H),p.current?.focus(),j(!1)):O(K)},[w,N,O,T,p,C,s,f,j]),$=d.useCallback(H=>{if(A(H),c===ue.SEARCH){const K=H?le.PRO:le.DEFAULT;s?s(K):f(K)}},[s,f,c,A]),V=d.useMemo(()=>{const H=L?gX:gX.filter(G=>G!==ue.STUDY);function K(G){const{searchMode:ee}=G,Y=T(ee),te=H.length<3&&!t;return{children:o.jsx("div",{"data-testid":`search-mode-${ee}`,children:o.jsx(SW,{label:te?o.jsx(ie,{...ls[ee].name}):void 0,icon:Wg[ee],isActiveOption:c===ee})}),elementProps:{"aria-disabled":N(Y)===!1?!0:void 0,onPointerEnter(se){R.current&&clearTimeout(R.current),k.current=se.currentTarget,E(ee),R.current=setTimeout(()=>{j(!0)},800)},onPointerLeave(){R.current&&(clearTimeout(R.current),R.current=null)},onClick(){R.current&&(clearTimeout(R.current),R.current=null),p.current?.focus(),j(!1)}},label:u(ls[ee].name),value:ee}}return H.map(G=>K({searchMode:G}))},[T,t,u,c,N,p,L]);D&&g===0&&!y.unlimitedProSearch&&P(!1);let W;switch(S){case ue.SEARCH:{W=o.jsx(oMe,{isToggleActive:D,onToggleChange:$});break}case ue.RESEARCH:{W=o.jsx(iMe,{});break}case ue.STUDIO:{W=o.jsx(lMe,{});break}case ue.STUDY:{W=o.jsx(cMe,{});break}}const Q=d.useMemo(()=>o.jsx(Ye,{initial:!1,mode:"popLayout",children:o.jsx(ve.div,{animate:{opacity:1},exit:{opacity:0},initial:{opacity:0},transition:{duration:.15},children:W},S)}),[W,S]),q=d.useCallback(H=>{H.target.tagName===document.activeElement?.tagName&&(k.current=H.target,E(c),j(!0))},[c]);return o.jsx(rMe,{tooltipContent:Q,triggeredSearchModeElement:k.current,isOpen:M,setIsOpen:j,children:o.jsx(CW,{layoutKey:`segmented-search-mode-selector_${n??m}`,options:V,onFocus:q,onValueChange:U,value:c,className:a,variant:i,areCuesEnabled:x&&!v&&!b})})});wMe.displayName="SegmentedSearchModeSelector";const CMe="(pointer: coarse)";function Qre(){return typeof window>"u"?!1:window.matchMedia(CMe).matches}function $6t(){const e=Ha(),[t,n]=d.useState(()=>Qre()||e);return d.useLayoutEffect(()=>{if(typeof window>"u")return;const r=window.matchMedia(CMe);function s(){n(Qre())}return r.addEventListener("change",s),s(),function(){r.removeEventListener("change",s)}},[]),t}const EW=I.memo(({isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,buttonSize:a,variant:i="default"})=>{const l=$6t(),c=Ha();if(l||c){const u=(()=>{switch(i){case"default":return"primaryGhost";case"subtle":return"common"}})();return o.jsx(eMe,{isFollowUp:e,value:n,onChange:r,buttonSize:a,variant:u})}else return o.jsx(wMe,{isFollowUp:e,layoutKey:t,value:n,onChange:r,className:s,variant:i})});EW.displayName="SearchModeSelector";const V6t=({showIncognitoHint:e,showSearchModeSelector:t=!0,isFollowUp:n,layoutKey:r})=>{const s="ask-input-left-attributions",{$t:a}=Z(),{device:{isMacOS:i}}=Pt(),{isIncognito:l,incognitoType:c}=Ga({reason:s}),{isGovernmentRequestOrigin:u}=ts();return o.jsx(XEe,{children:o.jsx(Ec,{children:o.jsx("div",{className:B("gap-xs flex items-center"),children:o.jsxs(Ye,{initial:!1,mode:"popLayout",children:[l&&e&&o.jsx(ve.div,{className:"mr-xs flex shrink-0 items-center",initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},children:o.jsx(bn,{className:"max-w-[280px]",tooltipText:c===Hd.GOVERNMENT?a({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):a({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:u?void 0:i?["",";"]:["ctrl",";"],asChild:!0,children:o.jsx("span",{children:o.jsx(_f,{size:"small",inverse:!0,incognitoType:c})})})}),t&&o.jsx(EW,{isFollowUp:n,layoutKey:r})]})})})})},SMe=I.memo(V6t);SMe.displayName="AskInputLeftAttribution";const EMe=I.memo(({children:e,placement:t,isOpen:n,onOpen:r,onClose:s,connectorMenuItems:a,width:i="250px"})=>{const{isMobileStyle:l}=xe(),c=d.useMemo(()=>({style:{width:i}}),[i]);return o.jsx(Ye,{initial:!1,mode:"popLayout",children:o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:Zd},children:o.jsx(nn,{placement:t,items:a,isMobileStyle:l,isOpen:n,onOpen:r,onClose:s,boxProps:c,children:e})},"attachment-selector")})});EMe.displayName="AttachmentSelector";var Xre={};const MMe=I.memo(({isOpen:e,fileType:t,size:n,tooltip:r,onOpen:s,onClose:a,onFilePickerOpen:i,onFilePickerClose:l,areFileAttachmentsAllowed:c,fileUploadErrorMessage:u,fileUploadWarningMessage:f,activeConnector:m=null,uploadedFiles:p=ce,handleStartUpload:h,handleFileInput:g,isBoxFilePickerOpen:y=!1,handleCloseBoxFilePicker:x,cleanupBoxFilePicker:v,microsoftFilePickerOptions:b=null,handleCloseMicrosoftFilePicker:_,handleSelectSharepointSite:w,isMicrosoftFilePickerOpen:C=!1,fileInputRef:S,isAudioVideoFilesEnabled:E=!1,setAttachmentErrorMessage:k})=>{const M="file-upload-button",{$t:j}=Z(),R=d.useRef(!1),{fileUploadUpsellTooltipOpen:O}=ea(),{setFileUploadUpsellTooltipOpen:D}=zo(),P=Ha(),A=et(),{uploadRateLimit:T}=ir(),{hasActiveSubscription:N}=St(),L=T??(N?hme:pme),U=d.useCallback(Ce=>Ce.preventDefault(),[]),{trackEvent:$}=Te(),{referrer:V,referrerId:W}=AB({mode:"file"}),{connectorsMap:Q}=yx({reason:M}),{enabledFileConnectors:q}=P_({reason:M}),{disabledFileConnectors:H}=jB({reason:M}),K=d.useMemo(()=>Q?.onedrive?.connected||Q?.sharepoint?.connected,[Q?.onedrive?.connected,Q?.sharepoint?.connected]),G=d.useCallback(()=>{switch(t){case"image":return j({defaultMessage:"images",id:"HVUWg4/ofn"});case"all":return j({defaultMessage:"files",id:"l17U7PEF+6"});default:return j({defaultMessage:"text or PDF files",id:"XFh9ob267W"})}},[j,t]),ee=d.useCallback(()=>{switch(t){case"image":return tGe;case"all":return E?oGe:nGe;default:return E?sGe:eGe}},[t,E]),Y=d.useCallback(Ce=>{Ce?$("attempt connector file attachment",{connectorName:Ce}):$("opened file selector",{}),h?.(Ce)},[h,$]),{handleConnect:te}=e3({reason:M}),[se,ae]=d.useState(!1),pe=d.useMemo(()=>{const Ce={type:"default",text:j({defaultMessage:"Local files",id:"xMmQ4F7z3A"}),size:"small",icon:nce,onMouseDown:U,onClick:()=>Y("local")},Ge=q.map(tt=>{const gt=tt.name;return{type:"default",text:ja(gt)??"",avatar:o.jsx("img",{src:Vl(gt)??"",alt:ja(gt),width:20,height:20}),onMouseDown:U,onClick:()=>Y(gt),show:_Ge.includes(tt.name)}});return H.length>0&&!P&&Ge.push({type:"nested",submenu:H.map(tt=>({type:"default",size:"small",text:ja(tt.name),avatar:o.jsx("img",{src:Vl(tt.name)??"",alt:ja(tt.name),width:20,height:20}),rightElement:o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(de,{icon:ba,size:"sm"})}),onClick:()=>te({connectorName:tt.name,customReferrer:V??void 0,customReferrerId:W??void 0})})),isSubmenuOpen:se,onSubmenuOpen:()=>ae(!0),onSubmenuClose:()=>ae(!1),text:j({defaultMessage:"Connect files",id:"geEGjFxpOA"}),icon:$k,onMouseDown:U}),[Ce,...Xre.NEXT_PUBLIC_IS_SIDECAR_BUILD?[]:Ge]},[j,q,H,U,Y,se,te,V,W,P]),fe=d.useCallback(()=>{pe.length<=1||p.length>0?Y(m??void 0):s?.()},[pe,p,m,Y,s]),ge=d.useCallback(()=>{a?.()},[a]),Se=d.useMemo(()=>{if(r)return r;let Ce=`${j({defaultMessage:"Attach",id:"Ye0Clmvfec"})} ${G()}`;return A?c?L!=null&&L>0&&L<=100?Ce+=`. ${j({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:L})}`:Sn(DP)&&(Ce=j({defaultMessage:"Files attached to threads are retained for 7 days",id:"hTclTOMwb7"})):Ce=j({defaultMessage:"File attachments are disabled by your organization",id:"HmmaBNCmcH"}):Ce+=`. ${j({defaultMessage:"Sign in to attach files",id:"Ei6nUBg77Q"})}`,Ce},[r,L,A,j,G,c]);d.useEffect(()=>{const Ce=()=>{R.current&&(l?.(),R.current=!1)};return window.addEventListener("focus",Ce),()=>window.removeEventListener("focus",Ce)},[l]);const je=d.useCallback(()=>{D(!1)},[D]),ye=d.useCallback(()=>_?.(),[_]),be=d.useCallback(()=>x?.(),[x]),Ne=d.useCallback(Ce=>w?.(Ce),[w]),ke=d.useCallback(()=>v?.(),[v]),Ie=d.useCallback(()=>{k?.("")},[k]);return o.jsx("div",{className:"flex items-center",children:o.jsx(bn,{tooltipText:j({defaultMessage:"Attach files",id:"8d3exg7mte"}),open:O,offset:3,closeOnClick:!0,onClickOutsideTooltip:je,asChild:!0,children:o.jsxs("div",{children:[o.jsx(EMe,{placement:"bottom-start",connectorMenuItems:pe,isOpen:e,onOpen:fe,onClose:ge,children:o.jsx(Me,{size:n,icon:zk,disabled:!c,toolTip:Se})}),o.jsx("input",{type:"file",multiple:!0,onClick:()=>{R.current=!0,i?.()},ref:S,onChange:Ce=>{R.current=!1,g?.(Ce.target.files?Array.from(Ce.target.files):ce)},accept:ee(),style:{display:"none"}}),K&&!Xre.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(IB,{options:b,isOpen:C,onClose:ye,onSelectSite:Ne}),Q?.box?.connected&&o.jsx(TB,{isOpen:y,onClose:be,cleanupPicker:ke}),o.jsx(hc,{isVisible:!!u,variant:"error",message:u??"",handleClose:Ie}),o.jsx(hc,{isVisible:!!f&&!u,variant:"warning",message:f??"",timeout:4})]})})})});MMe.displayName="FileUploadButton";var Vr;(function(e){e[e.FOCUS=0]="FOCUS",e[e.SOURCES=1]="SOURCES",e[e.RECENCY=2]="RECENCY",e[e.PRO_MODEL_PREFERENCE=3]="PRO_MODEL_PREFERENCE",e[e.ATTACHMENTS=4]="ATTACHMENTS",e[e.SEARCH_MODEL_SELECTOR=5]="SEARCH_MODEL_SELECTOR"})(Vr||(Vr={}));const MW=I.memo(({children:e,focusItems:t,placement:n,width:r="200px",isMobileStyle:s,isOpen:a=!1,onOpen:i,onClose:l,menuType:c=Vr.FOCUS,isSpace:u=!1})=>{const{$t:f}=Z(),{isMax:m}=St(),p=Z(),h=d.useMemo(()=>{switch(c){case Vr.RECENCY:return f({defaultMessage:"Choose recency",id:"qyxEklVz9W"});case Vr.SOURCES:default:return f({defaultMessage:"Choose sources",id:"5HzLAl6K6z"})}},[c,f]),g=d.useCallback(_=>{_?.stopPropagation(),i?.()},[i]),y=d.useCallback(()=>{l?.()},[l]),x=d.useMemo(()=>o.jsx("div",{className:"gap-x-xs p-sm bg-subtle flex items-center justify-center rounded-t-xl text-center",children:o.jsx(F,{color:"light",variant:"tinyRegular",children:o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(de,{icon:uo,size:"xs"}),p.formatMessage({defaultMessage:"Search includes all context from this space.",id:"uhJN0zDnSy"})]})})}),[p]),v=d.useMemo(()=>({width:r}),[r]),b=d.useMemo(()=>o.jsxs(z,{className:B("flex flex-col",{"max-h-[37vh]":u,"max-h-[42vh]":!u,"max-super-override":m}),style:v,children:[u&&c===Vr.SOURCES&&x,o.jsx(sl,{orientation:"vertical",showIndicatorOnHover:!1,className:B("min-h-0 flex-1 overflow-auto",{"p-xs":u&&c===Vr.SOURCES}),children:o.jsx(zd,{items:t,disableScrollArea:!0})})]}),[x,t,u,c,v,m]);return s?o.jsxs(o.Fragment,{children:[o.jsx(qt,{title:h,titleTextVariant:"baseSemi",variant:"bottom-left-sheet",actionList:ce,isOpen:a,onClose:y,noPadding:!0,children:o.jsx(zd,{textColor:"light",items:t})}),o.jsx("span",{onClick:g,children:e})]}):o.jsx(ei,{isFileSearchEnabled:!0,isOpen:a,placement:n,onClose:y,onOpen:g,avoidSizeCollisions:!1,contentClassName:u&&c===Vr.SOURCES?"!p-0":"",content:b,hasInteractiveContent:!0,children:e})});MW.displayName="FocusDropdown";const kMe=I.memo(({isOpen:e,onOpen:t,onClose:n})=>{const r="recency-switcher",{$t:s}=Z(),a=Z(),{isMobileStyle:i}=xe(),l=ml(),{trackEvent:c}=Te(),{sources:u,recency:f,setRecency:m}=ir(),p=Array.isArray(l?.slug)?l.slug[0]:l?.slug,{collection:h}=Ac({collectionSlug:p,reason:r}),g=h?.focused_web_config?.link_configs??ce,y=u&&u.includes("web"),x=u&&g.length>0,v=!y&&!x,_=u&&u.includes("crunchbase")?!0:v,w=d.useCallback(E=>{m(E),c("search recency click",{recency:E}),n()},[c,m,n]),C=d.useMemo(()=>[{value:null,label:s({defaultMessage:"All Time",id:"52UMW3b1Z0"})},{value:"DAY",label:s({defaultMessage:"Today",id:"zWgbGgjUUg"})},{value:"WEEK",label:s({defaultMessage:"Last Week",id:"P3YB9A5Yho"})},{value:"MONTH",label:s({defaultMessage:"Last Month",id:"cfMkrE1iIn"})},{value:"YEAR",label:s({defaultMessage:"Last Year",id:"7PhUtcTRXC"})}],[s]),S=d.useMemo(()=>C.map(E=>({type:"default",text:E.label,active:f===E.value,onClick:()=>w(E.value)})),[C,f,w]);return o.jsx(MW,{focusItems:S,placement:"bottom-start",width:"200px",isMobileStyle:i,isOpen:e,onOpen:t,onClose:n,menuType:Vr.RECENCY,children:o.jsx(Me,{toolTip:a.formatMessage({defaultMessage:"Set recency for web search",id:"3/OG+oV8gT"}),size:"small",icon:mp,disabled:_})})});kMe.displayName="RecencySwitcher";const W6t=(e,t)=>{const{value:n,loading:r}=jt({flag:"search-model-reasoning-toggle",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])};function TMe(){const{variation:e,loading:t}=W6t(!1);return d.useMemo(()=>({isSearchModelReasoningToggleEnabled:e,isSearchModelReasoningToggleEnabledLoading:t}),[e,t])}const NMe=(e,t)=>{const{value:n,loading:r}=jt({flag:"enable-gpt-5-pro-in-web-frontend",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},jMe=(e,t)=>{const{value:n,loading:r}=Fu({flag:"model-outage-on-model-selector-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},H6t=J({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),z6t=J({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"});function AMe({reason:e,selectedSearchMode:t,currentModel:n,onModelSelect:r,isRewrite:s}){const{$t:a}=Z(),{organization:i}=Hn({reason:e}),l=Jo(),c=Ha(),u=i?.settings?.disabled_model_preferences??ce,{isMax:f}=St(),{isMaxUpsellEnabled:m}=Uu(),{specialCapabilities:p}=ts(),h=d.useRef(null),{variation:g}=jMe({}),{variation:y}=NMe(!1),x="left",v=0,b=d.useCallback(C=>{![le.PRO,le.ALPHA,le.BETA].includes(C)&&n!==void 0&&t===ue.SEARCH&&(h.current=C),r(C)},[r,t,n]),{menuItems:_,selectOptions:w}=d.useMemo(()=>{const C=c?"description":"tooltipText";function S(R,O){const D=[],P=[];return R.filter(A=>!O?.includes(A.search_model)).forEach(A=>{if(u.includes(A.search_model))return;const T=!!g[A.search_model];let N,L="super";A.subscription_tier===Ln.MAX?(N=a({defaultMessage:"max",id:"+LmzMnWE+j"}),L="maxBorder"):A.has_new_tag&&(N=a({defaultMessage:"new",id:"qlTe+eC7Ec"}),L="superBorder");const U={active:n===A.search_model,[C]:a(Fn[A.search_model]?.description),tooltipLayout:x,tooltipDelayDuration:v,bottomElement:T?o.jsx("div",{children:o.jsx(F,{className:"whitespace-pre-wrap",variant:"tinyRegular",color:"red",children:a({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"})})}):void 0,onClick(){if(m&&!f&&(t===ue.STUDIO||t===ue.RESEARCH||t===ue.SEARCH&&A.subscription_tier===Ln.MAX&&!p.maxModelSelection)){l({origin:s?Le.RETRY_BUTTON:Le.MODEL_SELECTOR,pitchMessage:{title:a(H6t,{searchMode:a(ls[t].name)}),description:a(z6t)}});return}b(A.search_model)},size:"tiny",type:"default",text:a(Fn[A.search_model].name),badge:N,badgeVariant:L},$={value:A.search_model,label:a(Fn[A.search_model].name)},V=m&&!f&&A.subscription_tier===Ln.MAX;D.push(U),V||P.push($)}),{menuItems:D,selectOptions:P}}const E=[],k=[],M=G6t(y),j=M.filter(R=>!u.includes(R.search_model))[0]?.search_model||le.SONAR;if(t===ue.SEARCH){const R={selected:n===le.PRO,[C]:a({defaultMessage:"Selects the best model for each query",id:"TFsbkdJ4zc"}),onClick(){if(n===le.PRO){const P=h.current;b(P||j)}else b(le.PRO)},size:"tiny",text:a(Fn[le.PRO].name),type:"toggle",tooltipLayout:x,tooltipDelayDuration:v},O={value:le.PRO,label:a(Fn[le.PRO].name)};if(!s)E.push(R,{type:"separator",show:!0}),k.push(O);else{const P={active:n===le.ALPHA,[C]:a({defaultMessage:"In-depth reports on complex topics",id:"j7wjX6Ljpq"}),onClick(){b(le.ALPHA)},size:"tiny",text:a({defaultMessage:"Research",id:"JEe7dVso7F"}),type:"default",tooltipLayout:x,tooltipDelayDuration:v},A={value:le.ALPHA,label:a(Fn[le.ALPHA].name)};E.push(P),k.push(A);const T={active:n===le.BETA,[C]:a({defaultMessage:"Create projects from scratch",id:"nH9rAkplC/"}),onClick(){b(le.BETA)},size:"tiny",text:a({defaultMessage:"Labs",id:"ylFNoY79wa"}),type:"default",tooltipLayout:x,tooltipDelayDuration:v},N={value:le.BETA,label:a(Fn[le.BETA].name)};E.push(T,{type:"separator",show:!0}),k.push(N)}const D=S(M,!p.maxModelSelection&&!m&&!f?M.filter(P=>P.subscription_tier===Ln.MAX).map(P=>P.search_model):void 0);E.push(...D.menuItems),k.push(...D.selectOptions)}return{menuItems:E,selectOptions:k}},[u,a,t,n,g,f,m,l,b,s,c,p.maxModelSelection,y]);return d.useMemo(()=>({menuItems:_,selectOptions:w}),[_,w])}const G6t=e=>{let t=[...Yhe];return e&&(t=t.map(n=>n.search_model===le.O3_PRO?{search_model:le.GPT5_PRO,has_new_tag:!1,is_reasoning_model:!0,subscription_tier:Ln.MAX}:n)),t},q6t=(e,t)=>{const{value:n,loading:r}=jt({flag:"enable-sonar-internal-testing-in-web-frontend",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},K6t=[{label:Fn[le.SONAR].name,description:Fn[le.SONAR].description,search_model:le.SONAR,reasoning_model:null,has_new_tag:!1,subscription_tier:Ln.PRO},{label:Fn[le.CLAUDE_4_5_SONNET].name,description:Fn[le.CLAUDE_4_5_SONNET].description,search_model:le.CLAUDE_4_5_SONNET,reasoning_model:le.CLAUDE_4_5_SONNET_THINKING,has_new_tag:!0,subscription_tier:Ln.PRO},{label:Fn[le.GPT_5].name,description:Fn[le.GPT_5].description,search_model:le.GPT_5,reasoning_model:le.GPT_5_THINKING,has_new_tag:!1,subscription_tier:Ln.PRO},{label:Fn[le.GEMINI_2_FLASH].name,description:Fn[le.GEMINI_2_FLASH].description,search_model:null,reasoning_model:le.GEMINI_2_FLASH,has_new_tag:!1,subscription_tier:Ln.PRO},{label:Fn[le.GROK_4_NON_THINKING].name,description:Fn[le.GROK_4_NON_THINKING].description,search_model:le.GROK_4_NON_THINKING,reasoning_model:le.GROK_4,has_new_tag:!1,subscription_tier:Ln.PRO},{label:Fn[le.CLAUDE_4_1_OPUS].name,description:Fn[le.CLAUDE_4_1_OPUS].description,search_model:le.CLAUDE_4_1_OPUS,reasoning_model:le.CLAUDE_4_1_OPUS_THINKING,has_new_tag:!1,subscription_tier:Ln.MAX},{label:Fn[le.O3_PRO].name,description:Fn[le.O3_PRO].description,search_model:null,reasoning_model:le.O3_PRO,has_new_tag:!1,subscription_tier:Ln.MAX}],Y6t={label:Fn[le.PPLX_SONAR_INTERNAL_TESTING_V2].name,description:Fn[le.PPLX_SONAR_INTERNAL_TESTING_V2].description,search_model:le.PPLX_SONAR_INTERNAL_TESTING_V2,reasoning_model:null,has_new_tag:!1,subscription_tier:Ln.PRO},Q6t={label:Fn[le.GPT5_PRO].name,description:Fn[le.GPT5_PRO].description,search_model:null,reasoning_model:le.GPT5_PRO,has_new_tag:!1,subscription_tier:Ln.MAX},IMe=(e,t)=>{let n=[...K6t];return t&&(n=n.map(r=>r.reasoning_model===le.O3_PRO?Q6t:r)),e&&n.push(Y6t),n},X6t=(e,t)=>IMe(e,t).reduce((n,r)=>(r.search_model&&(n[r.search_model]=r),r.reasoning_model&&(n[r.reasoning_model]=r),n),{}),Z6t=(e,t)=>t[e],lh=Qe({reasoning:{defaultMessage:"Reasoning",id:"Aw3qRf7hyO"},max:{defaultMessage:"max",id:"+LmzMnWE+j"},new:{defaultMessage:"new",id:"qlTe+eC7Ec"},research:{defaultMessage:"Research",id:"JEe7dVso7F"},labs:{defaultMessage:"Labs",id:"ylFNoY79wa"}}),J6t=J({defaultMessage:"Advanced models in Perplexity {searchMode}",id:"XgqOYZp+oF"}),eAt=J({defaultMessage:"Exclusive access for Max subscribers",id:"z2ijkWbdu6"}),tAt=J({defaultMessage:"Temporary degraded performance",id:"Kc/pdbXoxJ"}),nAt=e=>{const{label:t,searchModel:n,reasoningModel:r,selected:s,badge:a,notice:i,onChange:l,tooltipText:c}=e,{$t:u}=Z(),f=d.useCallback(()=>{const x=n??r;if(!x){c1.error("ModelMenuItem: No model to select",{searchModel:n,reasoningModel:r});return}l(x)},[l,n,r]),m=d.useCallback(()=>{!r||!n||l(r===s?n:r)},[l,r,n,s]),p=!n,h=s===n||s===r,g=u({defaultMessage:"Model does not have a fast model and reasoning will be used",id:"yeyas85Pgq"}),y=p?g:void 0;return o.jsxs(z,{variant:h?"subtler":void 0,className:"rounded-lg",children:[o.jsx(RU,{text:t,role:"menuitem",active:h,onClick:f,tooltipText:c,...a}),h&&i&&o.jsx(F,{className:"max-w-44 px-2 py-1 text-left",variant:"tinyRegular",color:"red",children:i}),h&&r&&o.jsx(PU,{selected:s===r,text:u({defaultMessage:"With reasoning",id:"xwd+5Brxnr"}),textClassName:"text-quiet",role:"menuitem",active:s===r,onClick:m,disabled:p,tooltipText:y})]})},RMe=({currentModel:e,onModelSelect:t,origin:n,searchMode:r=ue.SEARCH})=>{const s="use-model-menu-items-with-reasoning",{$t:a}=Z(),{isMax:i}=St(),{organization:l}=Hn({reason:s}),{isMaxUpsellEnabled:c}=Uu(),{specialCapabilities:u}=ts(),f=Jo(),m=d.useRef(null),{variation:p}=q6t(!1),{variation:h}=NMe(!1),g=d.useMemo(()=>X6t(p,h),[p,h]),{variation:y}=jMe({}),x=u.maxModelSelection||c||i,v=l?.settings?.disabled_model_preferences??ce,b=gV(),_=d.useCallback(j=>{const R=Z6t(j,g);return c&&!i&&R.subscription_tier===Ln.MAX&&!u.maxModelSelection},[c,i,u.maxModelSelection,g]),w=d.useCallback(()=>{f({origin:n??Le.MODEL_SELECTOR,pitchMessage:{title:a(J6t,{searchMode:a(ls[r].name)}),description:a(eAt)}})},[f,a,n,r]),C=d.useCallback(j=>{m.current=j,t(j)},[t]),S=d.useCallback(j=>j&&v.includes(j),[v]),E=d.useCallback(j=>j===b()||j in g,[g,b]),k=d.useMemo(()=>{const j=b();return{type:"custom",text:a(Fn[le.PRO].name),children:o.jsx(hu,{type:"default",size:"small",text:a(Fn[le.PRO].name),tooltipText:a(Fn[le.PRO].description),active:e===j,onClick:()=>{C(j)}})}},[e,C,a,b]),M=d.useMemo(()=>{const j=P=>{if(P.subscription_tier===Ln.MAX)return{badge:a(lh.max),badgeVariant:"maxBorder"};if(P.has_new_tag)return{badge:a(lh.new),badgeVariant:"superBorder"}},R={type:"separator",show:!0},D=IMe(p,h).filter(P=>!(!x&&P.subscription_tier===Ln.MAX||S(P.search_model)&&S(P.reasoning_model))).map(P=>{const A=S(P.search_model)?null:P.search_model,T=S(P.reasoning_model)?null:P.reasoning_model;if(!A&&!T)return null;const L=!!(A&&y[A]||T&&y[T])?a(tAt):void 0;return{type:"custom",text:a(P.label),children:o.jsx(nAt,{label:a(P.label),selected:e,searchModel:A,reasoningModel:T,notice:L,onChange:U=>{if(_(U)){w();return}C(U)},badge:j(P),tooltipText:a(P.description)})}}).filter(P=>P!==null);if(n===Le.RETRY_BUTTON){const P={type:"custom",text:a(lh.research),children:o.jsx(hu,{type:"default",size:"small",icon:Uk,text:a(lh.research),active:e===le.ALPHA,onClick:()=>C(le.ALPHA)})},A={type:"custom",text:a(lh.labs),children:o.jsx(hu,{type:"default",size:"small",text:a(lh.labs),icon:Fb,active:e===le.BETA,onClick:()=>C(le.BETA)})};return[P,A,R,k,...D]}return[k,R,...D]},[a,n,e,x,S,y,_,w,C,p,h,k]);return d.useMemo(()=>({menuItems:M,isSupportedModel:E}),[M,E])},rAt=Qe({chooseModel:{defaultMessage:"Choose a model",id:"fXlc3idTcy"}}),PMe=d.memo(({isOpen:e,onOpen:t,onClose:n,selectedModel:r,onModelChange:s})=>{const{$t:a}=Z(),{isMax:i}=St(),{onActiveMenuChange:l}=zo(),{activeMenu:c}=ea(),u=qa(),{configuredModel:f}=ir(),m=Px(),{isMobileStyle:p}=xe(),h=gV(),g=u===ue.SEARCH,y=d.useCallback(O=>{m(O,u)},[m,u]),x=d.useCallback(()=>{l(Vr.SEARCH_MODEL_SELECTOR)},[l]),v=d.useCallback(()=>{l(null)},[l]),b=r??f,_=s??y,w=e??c===Vr.SEARCH_MODEL_SELECTOR,C=t??x,S=n??v,k=!!Ot()?.get("openSearchModeSelector");d.useEffect(()=>{k&&x()},[k,x]);const{menuItems:M}=RMe({currentModel:b,onModelSelect:_,searchMode:u}),j=d.useMemo(()=>b===h(),[b,h]),R=d.useMemo(()=>({className:B("max-h-[40vh]",{"max-super-override":i})}),[i]);return o.jsx(Ye,{initial:!1,mode:"popLayout",children:g&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:o.jsx(nn,{placement:"bottom-end",boxProps:R,items:M,isMobileStyle:p,isOpen:w,onOpen:C,onClose:S,children:o.jsx(Me,{extraCSS:"max-w-24 sm:max-w-none",icon:DO,size:"small",textClassName:"text-[0.8125rem]",toolTip:a(j?rAt.chooseModel:Fn[b].name),variant:j?"common":"super"})})},"search-model-selector")})});PMe.displayName="SearchModelSelectorWithReasoning";const sAt=({selectedModel:e,onModelChange:t}={})=>{const n="search-model-selector",{isMobileStyle:r}=xe(),{$t:s}=Z(),{onActiveMenuChange:a}=zo(),{activeMenu:i}=ea(),l=qa(),{configuredModel:c}=ir(),u=Px(),f=e||c,{isMax:m}=St(),p=l===ue.SEARCH,h=[le.DEFAULT,le.PRO,le.ALPHA,le.BETA].includes(f),y=!!Ot()?.get("openSearchModeSelector");d.useEffect(()=>{y&&a(Vr.SEARCH_MODEL_SELECTOR)},[y,a]);const x=d.useCallback(C=>{u(C,l)},[u,l]),{menuItems:v}=AMe({reason:n,selectedSearchMode:l,currentModel:f,onModelSelect:t||x}),b=d.useCallback(()=>{a(Vr.SEARCH_MODEL_SELECTOR)},[a]),_=d.useCallback(()=>{a(null)},[a]),w=d.useMemo(()=>({className:B("max-h-[40vh]",{"max-super-override":m})}),[m]);return o.jsx(Ye,{initial:!1,mode:"popLayout",children:p&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"linear"},children:o.jsx(nn,{placement:"bottom-end",boxProps:w,items:v,isMobileStyle:r,isOpen:i===Vr.SEARCH_MODEL_SELECTOR,onOpen:b,onClose:_,children:o.jsx(Me,{extraCSS:"max-w-24 sm:max-w-none",icon:DO,size:"small",textClassName:"text-[0.8125rem]",toolTip:s(h?{defaultMessage:"Choose a model",id:"fXlc3idTcy"}:Fn[f].name),variant:h?"common":"super"})})},"search-model-selector")})},LMe=I.memo(({selectedModel:e,onModelChange:t})=>{const{isSearchModelReasoningToggleEnabled:n}=TMe();return n?o.jsx(PMe,{selectedModel:e,onModelChange:t}):o.jsx(sAt,{selectedModel:e,onModelChange:t})});LMe.displayName="SearchModelSelector";const OMe=I.memo(()=>{const{isMaxAssistantMode:e,actions:t}=In(),n=Z9e(),[r,s]=d.useState(!n),a=d.useRef(null),i=d.useRef(null),l=d.useCallback(()=>{t.setIsMaxAssistantModeEnabled(!e)},[t,e]),c=d.useCallback(()=>{s(!r)},[r]);d.useEffect(()=>{r&&J9e()},[r]),d.useEffect(()=>{const f=m=>{r&&i.current&&!i.current.contains(m.target)&&a.current&&!a.current.contains(m.target)&&s(!1)};return r&&document.addEventListener("mousedown",f,!0),()=>{document.removeEventListener("mousedown",f,!0)}},[r]);const u=d.useMemo(()=>o.jsxs("div",{"data-color-scheme":"dark",ref:i,className:B("bg-base absolute bottom-full left-1/2 z-50 mb-1 -translate-x-1/2 px-4 py-3","shadow-overlay w-72 rounded-lg"),children:[o.jsxs("div",{className:"mb-2 flex items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{color:"default",variant:"baseSemi",children:o.jsx(ie,{defaultMessage:"Enable Max Assistant",id:"148Ehuq5Qh"})}),o.jsx(fw,{className:"text-max h-3"})]}),o.jsx("div",{className:"flex items-center gap-6",children:o.jsx(_o,{active:e??!1,onChange:l,size:"default"})})]}),o.jsx(F,{color:"default",variant:"small",className:"text-pretty",children:o.jsx(ie,{defaultMessage:"Thinks longer with deeper reasoning for complex workflows and questions.",id:"UOpEyLDsXA"})})]}),[e,l]);return o.jsxs("div",{className:"relative",ref:a,children:[o.jsx(Me,{size:Yt.small,variant:"common",icon:Ud,onClick:c}),r&&u]})});OMe.displayName="SidecarMoreMenuButton";const DMe=I.memo(({handleFileInput:e})=>{const{$t:t}=Z(),{sidecarSourceTab:{url:n}}=Hr(),r=Nn();d.useEffect(()=>r.subscribeScreenshotCaptured(a=>{e?.([a],"local",YD)}),[r,e]);const s=d.useCallback(async()=>{r.captureSourceTabScreenshotV2({sourceTabUrl:n})},[r,n]);return o.jsx("div",{className:"flex items-center gap-2",children:o.jsx(Me,{onClick:s,size:Yt.small,variant:"common",toolTip:t({defaultMessage:"Screenshot",id:"9a+SKtXKhe"}),icon:wLe})})});DMe.displayName="SidecarScreenshotButton";const aAt=5,oAt=J({defaultMessage:"This source is enabled because it is mentioned in your query",id:"EkzkLGwuYt"}),FMe=d.memo(({children:e})=>o.jsx("div",{className:"flex size-5 items-center justify-center",children:e})),iAt=e=>`comet_mcp_${e}`,lAt=e=>e.replace("comet_mcp_","");FMe.displayName="IconWrapper";const kW=d.memo(({isOpen:e,onOpen:t,onClose:n,defaultSource:r,selectedSources:s,onSourcesChange:a,variant:i="icon",hiddenSources:l,buttonVariant:c="default",useThreadSources:u=!1,mentionedSources:f=[]})=>{const m="sources-switcher",{$t:p}=Z(),{isMobileStyle:h}=xe(),{trackEvent:g}=Te(),{fileRepoInfo:y}=Ic({reason:m}),x=y?.file_repository_type==="COLLECTION",{RootSources:v,RootSourceGroups:b,ConnectionSources:_}=Fbe({reason:m}),{toggleSource:w}=$_({defaultSource:r,reason:m}),{sources:C}=ir(),{firstResult:S}=Ft(),{cometMcpSources:E,cometMcpDisabledServers:k}=C_(),M=S?.sources?.sources??ce,j=d.useMemo(()=>s??(u?M:C),[s,u,M,C]),R=a??w,O=d.useCallback(V=>V.preventDefault(),[]),D=d.useCallback(V=>{V.preventDefault(),V.stopPropagation()},[]),P=d.useCallback(V=>{g("search source click",{source:V}),R(V)},[g,R]),A=d.useMemo(()=>[...j,...Object.keys(E).filter(V=>!k?.has(V)).map(V=>iAt(V))],[j,E,k]),T=d.useCallback((V,W)=>{const Q=A?.includes(V),q=f.some(H=>H===V||H===lAt(V));return{type:W.type,text:W.text,description:W.description,size:"small",selected:Q||q,disabled:q,tooltipText:q?p(oAt):void 0,icon:W.icon,avatar:W.avatar,link:W.link,onMouseDown:D,onClick:()=>W.onClick?W.onClick():P(V),onLinkClick:W.onLinkClick,bottomElement:W.bottomElement,rightElement:W.rightElement,testId:`source-toggle-${V}`,submenu:W.submenuItems?.map(H=>{if(Array.isArray(H)&&H.length===2){const[K,G]=H;return T(K,G)}return H}),isSubmenuOpen:W.isSubmenuOpen,onSubmenuOpen:W.onSubmenuOpen,onSubmenuClose:W.onSubmenuClose,textTrailingElement:W.textTrailingElement,menuWidth:W.menuWidth}},[A,D,P,f,p]),N=d.useMemo(()=>{const V={type:"separator",show:!0};return b.map(q=>Object.entries(q.sources).filter(([H])=>!l?.includes(H)).map(([H,K])=>T(H,K))).flatMap((q,H)=>H===0?q:[V,...q])},[b,l,T]),L=d.useMemo(()=>{if(!A?.length)return o.jsx(de,{icon:f1,size:"sm"});const V=[];return A.forEach(W=>{let Q;if(W in v?Q=v[W]:W in _&&(Q=_[W]),Q){const q=Q,H=q.avatar||o.jsx(FMe,{children:q.icon?o.jsx(de,{icon:q.icon,size:"sm"}):o.jsx(de,{icon:f1,size:"sm"})});V.push(H)}}),tM(V,{isOverlapping:!0,maxVisuals:aAt,size:"md",stackDirection:"right"})},[A,v,_]),U=d.useMemo(()=>{if(A?.length===1){const V=A[0]??"";return V in v?v[V]?.text:V in _?_[V]?.text:V}return p({defaultMessage:"{count} sources",id:"l1+6PggBqU"},{count:A?.length||0})},[A,v,_,p]),$=(()=>{switch(c){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Qt(c)}})();return u&&(!A||A.length===0)?null:o.jsx(MW,{focusItems:N,placement:"bottom-end",width:"300px",isMobileStyle:h,isOpen:e,onOpen:u?void 0:t,onClose:n,menuType:Vr.SOURCES,isSpace:x,children:i==="button"?o.jsx(me,{text:U,extraCSS:B("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal",$),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Wn,onMouseDown:u?void 0:O,disabled:u,"data-testid":"sources-switcher-button"}):o.jsx(Me,{toolTip:p(u?{defaultMessage:"Start a new thread to change sources",id:"jKXi56aXv8"}:{defaultMessage:"Set sources for search",id:"yAyuRoLEjt"}),tooltipProps:u?{delayDuration:0}:void 0,size:"small",onMouseDown:u?void 0:O,disabled:u,"data-testid":"sources-switcher-button",variant:u?"noHover":"common",extraCSS:B("px-[4px]",{"!aspect-auto":A&&A.length>1},{"!cursor-default [&:active]:!scale-100 [&:active]:!duration-0 opacity-60":u}),leadingComponent:L})})});kW.displayName="SourcesSwitcher";const UMe=I.memo(({isTranscribing:e,isInitializing:t,startTranscription:n,stopTranscription:r,variant:s="primary"})=>{const{$t:a}=Z(),[i,l]=d.useState(t),c=()=>{l(!0),n?.()},u=()=>{l(!1),r?.()};return d.useEffect(()=>{e&&l(!1)},[e]),o.jsx(o.Fragment,{children:s==="primary"?o.jsxs("div",{className:"relative ml-2",children:[e&&o.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),o.jsx(me,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||i,icon:e?Ng:lG,variant:"primary",onClick:e?u:c,disabled:!1,size:Yt.small})]}):o.jsxs("div",{className:"relative",children:[e&&o.jsx("div",{className:"bg-super/20 absolute inset-[10%] animate-[ping_1.5s_cubic-bezier(0,0,0.2,1)_infinite] rounded-full"}),o.jsx(Me,{toolTip:a(e?{defaultMessage:"Stop Dictation",id:"RR4fO5+xkb"}:{defaultMessage:"Dictation",id:"0eNg7Kdki1"}),ariaLabel:"Dictation",isLoading:t||i,icon:e?Ng:lG,variant:"common",onClick:e?u:c,disabled:!1,size:Yt.small})]})})});UMe.displayName="DictationButton";const cAt={hidden(){return{opacity:0,scale:.2}},visible(){return{opacity:1,scale:1}}},BMe=I.memo(({onStopButtonClick:e,variant:t="inverted"})=>{const{$t:n}=Z();return o.jsx(ve.div,{animate:"visible",exit:"hidden",initial:"hidden",variants:cAt,children:o.jsx(me,{testId:"stop-generating-response-button",toolTip:n({defaultMessage:"Stop generating response",id:"wXXKXUJh1s"}),variant:t,icon:Ng,onClick:e,size:"small",extraCSS:"text-caution hover:!bg-caution hover:!text-white ml-2"})},"stop-button")});BMe.displayName="StopButton";var uAt={};const $Me=I.memo(()=>{const{openModal:e}=xt(),{$t:t}=Z(),n=et(),r=vt(),s=d.useCallback(()=>{n?uAt.NEXT_PUBLIC_IS_SIDECAR_BUILD?r.push("/speak"):e("voiceToVoiceModal",null):e("loginModal",{origin:Le.VOICE_TO_VOICE_BUTTON,pitchMessage:{title:"Sign in to unlock voice mode"}})},[n,e,r]);return o.jsx("div",{className:"ml-2",children:o.jsx(me,{onClick:s,size:Yt.small,icon:CLe,variant:"primary",disabled:!1,toolTip:t({defaultMessage:"Voice mode",id:"OnF9aqAuar"})})})});$Me.displayName="VoiceToVoiceButton";const VMe=(e,t)=>{const{value:n,loading:r}=jt({flag:"max_assistant_tooltip_enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},dAt=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"enable-clarifying-questions",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])};function WMe(){const{variation:e}=dAt(!1);return e}const HMe=I.memo(({toolTip:e,icon:t,isDisabled:n,value:r,querySource:s,size:a=Yt.small,handleSubmit:i,...l})=>o.jsx(me,{...l,ariaLabel:"Submit",toolTip:e,icon:t,variant:"primary",size:a,onClick:n?void 0:()=>i({query:r,querySource:s}),disabled:n,extraCSS:"!duration-100"}));HMe.displayName="SubmitButton";var mS={};const KA=({className:e,...t})=>o.jsx("div",{className:e,children:o.jsx(HMe,{...t,value:""})}),fAt=({value:e,json:t,submitWillFork:n,isFollowUp:r,isDisabled:s,querySource:a,errorMessage:i,handleSubmit:l,fileUploadRef:c,showFileUpload:u,fileUploadTooltip:f,showStopButton:m,showModelSelector:p,onStopButtonClick:h,onFilePickerOpen:g,onFilePickerClose:y,showSources:x,useThreadSources:v,showRecency:b,disableActionButtons:_,startTranscription:w,stopTranscription:C,isTranscribing:S,isTranscriptionInitializing:E,isTranscriptionAvailable:k,fileUploadErrorMessage:M,fileUploadWarningMessage:j,activeConnector:R=null,uploadedFiles:O,handleStartUpload:D,handleFileInput:P,isBoxFilePickerOpen:A=!1,handleCloseBoxFilePicker:T,cleanupBoxFilePicker:N,microsoftFilePickerOptions:L=null,handleCloseMicrosoftFilePicker:U,handleSelectSharepointSite:$,isMicrosoftFilePickerOpen:V=!1,fileInputRef:W,hasQuery:Q,isAudioVideoFilesEnabled:q=!1,setAttachmentErrorMessage:H,isCometHome:K,isMissionControl:G})=>{const ee="ask-input-right-attributions",{isMobileStyle:Y,isMobileUserAgent:te}=xe(),{screenshotToolEnabled:se}=Hr(),{openModal:ae}=xt(),{organization:pe}=Hn({reason:ee}),{$t:fe}=Z(),ge=WMe(),{activeMenu:Se}=ea(),{onActiveMenuChange:je}=zo(),{device:{isWindowsApp:ye}}=Pt(),be=Ot(),{fileRepoInfo:Ne}=Ic({reason:ee}),{isMax:ke}=St(),Ie=Ne.file_repository_type==="COLLECTION",Ce=b&&Ie&&!r,Ge=d.useRef(e),tt=d.useRef(t);Ge.current=e,tt.current=t;const{variation:gt}=VMe(!1),Ee=d.useCallback(({querySource:Rt})=>{l({query:Ge.current,json:tt.current,querySource:Rt})},[l]),Re=Pet(Det),Vt=Dr(Re?.display_model)==ue.RESEARCH||Dr(Re?.display_model)==ue.STUDIO;d.useEffect(()=>{if(!ye)return;const Rt=new URLSearchParams(window.location.search);Rt.get("voice-mode")?(Jg({"voice-mode":void 0}),w?.()):Rt.get("v2v")&&(Jg({v2v:void 0}),ae("voiceToVoiceModal",null))},[be,ye,w,ae]),d.useEffect(()=>{const Rt=()=>{k&&(S?C?.():w?.())},Ut=()=>{ae("voiceToVoiceModal",null)};return document.addEventListener("toggleVoiceToVoice",Ut),document.addEventListener("toggleDictation",Rt),()=>{document.removeEventListener("toggleDictation",Rt),document.removeEventListener("toggleVoiceToVoice",Ut)}},[S,k,w,C,ae]);const pt=!G&&!r&&!K&&(!te&&!Y||!!mS.NEXT_PUBLIC_IS_SIDECAR_BUILD),Nt=n?Gb:mS.NEXT_PUBLIC_IS_SIDECAR_BUILD||r?IO:Kk,Ke=m&&ge&&Vt,He=()=>{if(_)return o.jsx(KA,{className:"ml-2",isDisabled:!0,icon:Nt,querySource:a??"home",handleSubmit:vn});if(m){const Rn=Ke?"common":"inverted";return o.jsx(BMe,{onStopButtonClick:h,variant:Rn})}const Rt=a&&o.jsx(KA,{className:"ml-2",toolTip:i||(n?fe({defaultMessage:"Start your own thread",id:"TAA16rUT4G"}):""),icon:Nt,isDisabled:s,querySource:a,handleSubmit:Ee,"data-testid":"submit-button"},"submit-button"),Ut=[];if(mS.NEXT_PUBLIC_IS_SIDECAR_BUILD&&ke&&gt&&Ut.push(o.jsx(OMe,{},"sidecar-more-menu-button")),mS.NEXT_PUBLIC_IS_SIDECAR_BUILD&&se&&Ut.push(o.jsx(DMe,{handleFileInput:P},"sidecar-screenshot-button")),k&&Ut.push(o.jsx(UMe,{isTranscribing:S,isInitializing:E,stopTranscription:C,startTranscription:w,variant:S?"primary":"common"},"dictation-button")),pt){const Rn=(O?.length||Q)&&a&&!S;Rn?Ut.push(Rt):!S&&!Rn&&Ut.push(o.jsx($Me,{},"voice-to-voice-button"))}else S||Ut.push(Rt);return k||pt?Ut:Rt},Tt=d.useCallback(()=>je(null),[je]),We=d.useCallback(()=>je(Vr.SOURCES),[je]),_t=d.useCallback(()=>je(Vr.RECENCY),[je]),Kt=d.useCallback(()=>je(Vr.ATTACHMENTS),[je]),en=d.useMemo(()=>awe(t?.root),[t]);return o.jsxs(ZEe,{children:[x&&o.jsx(kW,{isOpen:Se===Vr.SOURCES,onOpen:We,onClose:Tt,useThreadSources:v,mentionedSources:en}),p&&o.jsx(LMe,{}),Ce&&o.jsx(kMe,{isOpen:Se===Vr.RECENCY,onOpen:_t,onClose:Tt}),u&&o.jsx(MMe,{isOpen:Se===Vr.ATTACHMENTS,onOpen:Kt,onClose:Tt,size:"small",forwardedRef:c,fileType:"all",tooltip:f,onFilePickerOpen:g,onFilePickerClose:y,areFileAttachmentsAllowed:pe?.settings?.file_attachments_allowed!==!1,fileUploadErrorMessage:M??null,fileUploadWarningMessage:j??null,activeConnector:R,uploadedFiles:O??ce,handleStartUpload:D,handleFileInput:P,isBoxFilePickerOpen:A,handleCloseBoxFilePicker:T,cleanupBoxFilePicker:N,microsoftFilePickerOptions:L,handleCloseMicrosoftFilePicker:U,handleSelectSharepointSite:$,isMicrosoftFilePickerOpen:V,fileInputRef:W,isAudioVideoFilesEnabled:q,setAttachmentErrorMessage:H}),a&&o.jsxs(o.Fragment,{children:[He(),Ke&&o.jsx("div",{className:s?"pointer-events-none opacity-50":"",children:o.jsx(KA,{className:"ml-3",toolTip:i||fe({defaultMessage:"Anything else to consider?",id:"DDAw7Ictpp"}),icon:Nt,querySource:a,isDisabled:!1,handleSubmit:Ee})})]})]})},zMe=I.memo(fAt);zMe.displayName="AskInputRightAttribution";const GMe=I.memo(({uploadedFiles:e,onRemoveFile:t,incompleteParsingEnabled:n,ref:r})=>o.jsxs("div",{ref:r,className:"gap-x-sm scrollbar-none flex snap-x snap-mandatory overflow-x-auto",children:[o.jsx("div",{className:"w-xs shrink-0"}),e.map((s,a)=>o.jsx(qMe,{uploadedFile:s,onRemoveFile:t,incompleteParsingEnabled:n},a)),o.jsx("div",{className:"w-xs shrink-0"})]}));GMe.displayName="UploadedFilesList";const qMe=I.memo(({uploadedFile:e,onRemoveFile:t,incompleteParsingEnabled:n})=>{const r="uploaded-files-list",{trackEvent:s}=Te(),a=n?e.status==="uploading":e.status==="uploading"||e.status==="parsing",{$t:i}=Z(),{fileRepoInfo:l}=Ic({reason:r}),{saveFile:c,isLoading:u}=Gvt({fileRepoInfo:l,reason:r}),{data:f}=i$({fileRepoInfo:l,fileName:e.file.name,reason:r}),m=Object.values(ui),p=R_(e.file.name),g=p&&!lo(e.file.name)&&m.includes(p)&&Ctt(e.nextURL),y=l.file_repository_type==="COLLECTION"&&!a&&g,x=d.useMemo(()=>i(f?{defaultMessage:"File exists in Space",id:"pD1m2AH9FU"}:{defaultMessage:"Save attachment to Space",id:"/Pbth8CiTs"}),[f,i]),v=d.useMemo(()=>C0e(e)?Bb:dmt(e)?SLe:fmt(e)?$b:mmt(e)?ia:vu,[e]),b=d.useCallback(()=>{s("remove attachment clicked"),e.nextURL&&t?.(e.nextURL,e.file_uuid??"")},[s,e,t]),_=d.useCallback(()=>c(e),[c,e]);return o.jsxs("div",{className:B("scroll-mx-md px-sm py-xs border-subtlest bg-subtler dark:bg-subtle gap-x-md flex h-[48px] w-fit snap-start items-center justify-between rounded-lg",{"opacity-70":a}),children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[e.thumbnailSource&&!a?o.jsx(ns,{alt:e.file.name,src:e.thumbnailSource,containerClassName:"size-8 shrink-0",imageClassName:"w-full h-full object-cover object-center",rounded:"md",includeLightBoxModal:!1}):o.jsx("div",{className:"p-sm bg-subtle dark:bg-subtler rounded-lg","data-testid":a?"file-loading-icon":"file-type-icon",children:o.jsx(de,{icon:a?Mce:v,size:"sm",color:"#64645F",className:a?"animate-spin":void 0})}),o.jsxs("div",{className:"flex-col",children:[o.jsx(F,{variant:"tiny",color:"light",className:"text-nowrap",children:umt(e.file.name,30)}),e.file.size>0&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"text-nowrap",children:pmt(e.file.size)})]})]}),o.jsxs("div",{className:"gap-x-sm flex items-center",children:[y&&o.jsx(Me,{icon:ELe,size:"tiny",onClick:_,disabled:f||u,variant:"common",toolTip:x,isLoading:u,pill:!0,noPadding:!0}),e.nextURL&&o.jsx(Me,{icon:kt,size:"tiny",testId:"remove-uploaded-file",onClick:b,variant:"common",pill:!0,noPadding:!0})]})]})});qMe.displayName="UploadedFilePreview";var mAt={};function pAt({handleSubmit:e,inputQuery:t}){const{trackEvent:n}=Te(),r=d.useRef(t);r.current=t;const s=qa(),{sidecarSourceTab:{url:a}}=Hr();return d.useCallback((l,c)=>{const u=bo();if(n("auto suggestion accepted",{mode:"dropdown-complete",query:r.current,completion:l.query,completion_uuid:l.query_uuid,completion_position:c,url:l.url,isNavigational:!!l.url,frontendContextUUID:u,searchMode:s,isPersonalized:l.isPersonalized,sourceDomain:mAt.NEXT_PUBLIC_IS_SIDECAR_BUILD?Xs(a):void 0}),l.isPersonalized&&fetch("/rest/autosuggest/track-query-clicked",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:l.query,search_mode:s})}).catch(()=>{}),l.url){window.open(l.url,"_self");return}e({query:l.submission_query??l.query,promptSource:"autosuggest",querySource:"autosuggest",newFrontendContextUUID:u})},[e,s,n,a])}var hAt={};function gAt({inputQuery:e}){const{trackEventBatch:t}=Te(),n=d.useRef(e);n.current=e;const r=qa(),{sidecarSourceTab:{url:s}}=Hr();return d.useCallback(i=>{if(n.current.length!==0)return;const l=i.map((c,u)=>({name:"auto suggestion blank state viewed",data:{mode:"dropdown-complete",query:n.current,completion:c.query,completion_uuid:c.query_uuid,completion_position:u,url:c.url,isNavigational:!!c.url,searchMode:r,sourceDomain:hAt.NEXT_PUBLIC_IS_SIDECAR_BUILD?Xs(s):void 0}}));t(l)},[r,t,s])}const yAt=(e,t)=>{const{value:n,loading:r}=jt({flag:"sidecar-personalized-query-suggestions",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},TW="sidecar-personalized-queries-cache",O7=1e3*60*10,xAt="sidecar";function vAt(e){try{let n=new URL(e).hostname.toLowerCase();return n.startsWith("www.")&&(n=n.slice(4)),n}catch{return""}}function bAt(){try{const e=De.getItem(TW);if(e)return JSON.parse(e)}catch{}return null}function _At(e){De.setItem(TW,JSON.stringify(e))}async function wAt(e,t,n){if(e!==null&&e.nonce!==null&&e.timestamp>n-O7&&e.domain_suggestions.length>0)return{nonce:e.nonce,domain_suggestions:e.domain_suggestions};const r=await re.POST("/rest/browser/personalization/sidecar-recommended-queries",xAt,{body:{last_refresh_timestamp_ms:e?.timestamp??0,nonce:e?.nonce??"",history_items:t},timeoutMs:3e4});return r.error?(ne.error("Failed to fetch sidecar personalized queries:",r.error),{domain_suggestions:[],nonce:""}):r?.data?.domain_suggestions===null||!r?.data?.domain_suggestions?{domain_suggestions:e?.domain_suggestions??[],nonce:e?.nonce??""}:r.data}function CAt(e,t){const n=e.find(r=>r.domain===t);return n?n.suggestions.map(r=>({query:r.query})):[]}const SAt=14,EAt=1500,MAt=(e,t)=>{const{session:n}=mt(),r=Nn(!1),s=vAt(e),{variation:a,loading:i}=yAt(!1,{userEmail:n?.user?.email??""}),l=bAt(),{data:c}=Ue({queryKey:["sidecar-personalized-queries",t,a,i],queryFn:async()=>{if(!r||!e||!t)return[];if(!a)return i||De.removeItem(TW),[];const u=Date.now();if(l&&l.domain_suggestions.length>0&&u-l.timestamp<O7)return l.domain_suggestions;try{const m=((await r.SearchBrowser({queries:[],sources:["HISTORY"],key:"sidecar-personalized-suggestions-history",request_id:"sidecar-personalized-suggestions",start_time:SAt*24*60*60*1e3,history_max_results:EAt,open_tabs_max_results:0,closed_tabs_max_results:0})).history_results??[]).map(g=>({url:g.url,title:g.title,last_accessed:g.last_accessed,visit_count:g.visit_count})),p=await wAt(l,m,u),h={nonce:p.nonce,timestamp:u,domain_suggestions:p.domain_suggestions};return h.domain_suggestions.length>0&&_At(h),p.domain_suggestions}catch(f){return ne.error(f),l?.domain_suggestions??[]}},placeholderData:()=>t?l?.domain_suggestions??[]:[],refetchInterval:O7});return CAt(c??[],s)},kAt=async({query:e,keywords:t,reason:n})=>{try{const{error:r,data:s}=await re.POST("/rest/autosuggest/reformulate-query",n,{body:{query:e,keywords:t}});if(r)throw new we("API_CLIENTS_ERROR",{cause:r});return s.reformulated_query}catch(r){return ne.error("Failed to fetch refinement query",r),null}},TAt=async({sources:e,attachments:t,searchMode:n,sourceTabUrl:r,entropyRenderingPlace:s,reason:a})=>{try{if(t&&t.length>0||e.length===0)return ce;const{error:i,data:l}=await re.POST("/rest/autosuggest/list-autosuggest",a,{body:{query:"",sources:e,attachments:t,search_mode:n,source_tab_url:r,entropy_rendering_place:s}});if(i)throw new we("API_CLIENTS_ERROR",{cause:i});return l.results??ce}catch(i){return ne.error(i),ce}},NAt=async({reason:e,onCreateShortcut:t})=>{try{const i=[...[...(await nwe({reason:e}))?.tasks??[]].sort(()=>Math.random()-.5).slice(0,2).map(l=>({query:l.prompt,title:l.task_name,shouldShowTitle:!0,category:"shortcuts"}))];return t&&i.push({query:"",query_uuid:"create-shortcut-button",title:"Create a shortcut",description:"",category:"shortcuts",icon:"plus",shouldShowTitle:!0,actionHandler:t}),i}catch(n){return ne.error("Failed to fetch shortcuts suggestions",n),ce}},KMe=async({cometBrowser:e,type:t,locale:n})=>{const r=await e.getPersonalSuggestions({source:"ntp",type:t,locale:n},"get-personal-suggestions");return r.is_success?r.suggestions:[]},jAt=async(e,t)=>{const n=await KMe(e);return n.length<=t?n:Vle(n).slice(0,t)},AAt=({cometBrowser:e,type:t,locale:n})=>{const{data:r=[]}=Ue({queryKey:["comet-personal-suggests-async",t,n],queryFn:async()=>Vle(await KMe({cometBrowser:e,type:t,locale:n})),staleTime:3e5,gcTime:3e5});return r},YA=({sources:e,attachments:t,searchMode:n,focus:r,isCometHome:s,reason:a,enabled:i})=>{const{sidecarSourceTab:{url:l}}=Hr(),u=mo().erp,{isMobileUserAgent:f}=xe(),m=Nn(),p=rw(),h=et(),{openModal:g}=xt(),y=MAt(l||"",u==="sidecar"),x=d.useCallback(()=>{g("taskShortcutModal",{source:"suggestions_dropdown"})},[g]),v=d.useMemo(()=>s&&n===ue.SEARCH?["comet-blank-state-suggest",n,p]:r==="finance"?["finance-blank-state-suggest"]:["blank-state-suggest",e,t,n,u==="sidecar"?l:""],[e,t,n,r,s,l,u,p]);return Ue({queryKey:v,enabled:i,queryFn:async()=>{if(s&&n===ue.SEARCH){const[w,C]=await Promise.all([jAt({cometBrowser:m,type:"input-blank-state"},dg(f,p)),p&&h?NAt({reason:a,onCreateShortcut:x}):Promise.resolve([])]);return[...(w??ce).map(S=>({...S,is_comet_assistant:!0,category:"suggestion"})),...C]}if(r==="finance")return(await t9({query:"",reason:a,country:"US"})).map((S,E)=>({query:S.query||`suggestion-${E}`,title:S.title??void 0,image:S.image??void 0,description:S.description??void 0,category:S.category??void 0,query_uuid:S.query_uuid??void 0,url:S.url??void 0,metadata:S.metadata??void 0}));const[b,_]=await Promise.all([TAt({sources:e,attachments:t,searchMode:n,sourceTabUrl:u==="sidecar"?l:"",entropyRenderingPlace:u,reason:a}),u==="sidecar"?TYe({entropyBrowser:m,url:l}):Promise.resolve([])]);return[...y.map(w=>({...w,isPersonalized:!0})),..._,...b].slice(0,dg(f))}})},IAt=e=>{const{setSuggestions:t,setBlankStateSuggestions:n}=zo(),{sidecarSourceTab:{url:r,secondaryTab:s}}=Hr(),i=mo().erp,l=d.useRef(void 0),c=d.useRef(e.selectedSearchMode),{blankStateSuggestions:u}=ea(),f=u[e.selectedSearchMode],m=r?Xs(r):void 0,p=d.useMemo(()=>{if(e.suggestionsDisabled)return!0;const x=i==="sidecar";return x&&m&&m===l.current||x&&s},[e.suggestionsDisabled,i,m,s]);!p&&l.current!==m&&(l.current=m);const{data:h}=YA({...e,searchMode:ue.SEARCH,enabled:!p}),{data:g}=YA({...e,searchMode:ue.RESEARCH,enabled:!p}),{data:y}=YA({...e,searchMode:ue.STUDIO,enabled:!p});return d.useEffect(()=>{h&&n(h,ue.SEARCH),g&&n(g,ue.RESEARCH),y&&n(y,ue.STUDIO),p&&(n([],ue.SEARCH),n([],ue.RESEARCH),n([],ue.STUDIO))},[h,g,y,n,p]),d.useEffect(()=>{(e.query?.length??0)>0||f&&((i==="sidecar"||c.current!==e.selectedSearchMode)&&t(f),c.current=e.selectedSearchMode)},[e.query,e.selectedSearchMode,f,t,i]),null};function YMe({userInputQuery:e,userInputJson:t,suggestionsDisabled:n,suggestions:r,focusedIndex:s,setFocusedIndex:a,onChange:i,handleSuggestionSubmission:l,placement:c="bottom",inputRef:u}){const f=d.useRef(e),m=d.useRef(t),p=d.useRef(r),h=d.useRef(s);f.current=e,m.current=t,p.current=r,h.current=s;const g=d.useCallback((_,w)=>{if(w>0){const C=(h.current+1)%w,S=p.current[C];if(S?.query){const E=S.query;i(E)}return _.preventDefault(),C}return null},[i]),y=d.useCallback(_=>{let w=h.current-1;if(w<0)w=-1,h.current===0&&(_.preventDefault(),i(f.current,m.current));else{_.preventDefault();const C=p.current[w];if(C?.query){const S=C.query;i(S)}}return w},[i]),x=d.useCallback((_,w)=>{if(w>0){const C=h.current<=0?w-1:(h.current-1)%w,S=p.current[C];if(S?.query){const E=S.query;i(E)}return _.preventDefault(),C}return null},[i]),v=d.useCallback((_,w)=>{let C=h.current+1;if(C>=w||C===0)C=-1,h.current===w-1&&(_.preventDefault(),i(f.current,m.current));else{_.preventDefault();const S=p.current[C];if(S?.query){const E=S.query;i(E)}}return C},[i]);return d.useCallback(_=>{if(n)return!1;const w=ga.isArrowDown(_),C=ga.isArrowUp(_);if(w){if(c==="bottom"&&h.current===-1&&!u.current?.inLine("last"))return!1;const S=c==="bottom"?g(_,p.current.length):v(_,p.current.length);if(S!==null)return a(S),!0}else if(C){if(c==="top"&&h.current===-1&&!u.current?.inLine("first"))return!1;const S=c==="bottom"?y(_):x(_,p.current.length);if(S!==null)return a(S),!0}else if(ga.isEnterKeyWithoutShift(_)&&h.current>=0&&h.current<p.current.length){const S=p.current[h.current];if(S)return l(S,h.current),!0}return!1},[n,c,u,g,v,a,y,x,l])}var Zre={};const RAt=e=>e==="travel"||e==="shopping"||e==="academic"||e==="sports",PAt=({autosuggestionsEnabled:e=!0,inputQuery:t,inputJson:n,isInputActive:r,onChange:s,handleSuggestionSubmission:a,handleSuggestionView:i,querySource:l,hasThreadContent:c,isMentionMenuOpened:u,placement:f="bottom",inputRef:m})=>{const{isWindowsAppPanelView:p}=wp(),[h,g]=d.useState(-1),[y,x]=d.useState(t),[v,b]=d.useState(),_=Lt(),{isSuggestionsDisabled:w}=In(),C=nMe(),S=Ebe(_),E=qyt(_),{activeMenu:k,suggestions:M}=ea(),{currentOpenedModal:j}=xt(),{setSuggestions:R,setShowSuggestDropdown:O}=zo(),D=d.useMemo(()=>w||!e||!C&&!S&&!p&&!E&&!RAt(l)&&!Zre.NEXT_PUBLIC_IS_SIDECAR_BUILD||l!=="finance"&&t.length>dgt&&!M.some(({query:A})=>A===t)||!!Zre.NEXT_PUBLIC_IS_SIDECAR_BUILD&&c,[w,e,C,S,E,p,l,t,c,M]),P=YMe({userInputQuery:y,userInputJson:v,suggestionsDisabled:D,suggestions:M,focusedIndex:h,setFocusedIndex:g,onChange:s,handleSuggestionSubmission:a,placement:f,inputRef:m});return d.useEffect(()=>{h===-1&&(x(t),b(n))},[t,h,x,b,n]),d.useEffect(()=>{D&&(R(ce),g(-1))},[D,R,g]),d.useEffect(()=>{const A=!D&&r&&!k&&!j&&M.length>0&&!u;O(A),A&&i(M)},[D,r,k,j,M,u,O,i]),d.useMemo(()=>({focusedIndex:h,setFocusedIndex:g,suggestionsDisabled:D,userInputQuery:y,handleSuggestDropdownNavigation:P,placement:f}),[h,P,D,y,f])};class LAt{static isAnyInputElementFocused(){const t=document.activeElement;return!!(t&&(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.getAttribute("contenteditable")==="true"||t.getAttribute("role")==="textbox"))}}function OAt({value:e,json:t,isDisabled:n,handleSubmit:r,handleSuggestDropdownNavigation:s,querySource:a,focusInput:i,isInputActive:l}){const{isMobileUserAgent:c}=xe(),u=d.useRef(e),f=d.useRef(t);u.current=e,f.current=t;const m=d.useCallback(x=>n&&ga.isEnterKeyWithoutShift(x)?(x.preventDefault(),!0):!1,[n]),p=d.useCallback(x=>x.isComposing?(x.preventDefault(),!0):!1,[]),h=d.useCallback(x=>{ga.isEnterKeyWithoutShift(x)&&!c&&(x.preventDefault(),r({query:u.current,json:f.current,querySource:a}))},[r,a,c]),g=d.useCallback(x=>{const v=ga.isCtrlOrCmdJ(x),b=ga.isOnlySlashKey(x);if(v||b){if(l||LAt.isAnyInputElementFocused())return;x.preventDefault(),i()}},[i,l]);return d.useEffect(()=>(document.addEventListener("keydown",g),()=>{document.removeEventListener("keydown",g)}),[g]),d.useCallback(x=>{m(x)||p(x)||s(x)||h(x)},[m,p,s,h])}const DAt=(e,t)=>{const{value:n,loading:r}=jt({flag:"clear-ask-input-suggestions-when-disabled",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])};function FAt({value:e,json:t,querySource:n,disableSubmission:r=!1,disableInput:s=!1,autofocus:a=!0,isUploadingFile:i=!1,onChange:l,onFocus:c,handleSubmit:u,handleUpdateAutosuggestions:f,autosuggestionsEnabled:m=!0,errorMessage:p,sources:h,attachments:g,selectedSearchMode:y,isInputActive:x,setIsInputActive:v,updateOnFocus:b=!1,inFlight:_=!1,resultsLength:w=0,quote:C,isMentionMenuOpened:S,isCometHome:E=!1,reason:k,placement:M="bottom"}){const{activeMenu:j,inputRef:R}=ea(),O=S0t(),{setShouldTriggerFocus:D}=V_(),{blankStateSuggestions:P}=ea(),{setSuggestions:A}=zo(),{onActiveMenuChange:T}=zo(),{device:{isAndroid:N}}=Pt(),L=d.useMemo(()=>!!C||e.trim().length>0||!!g&&g.length>0,[C,e,g]),U=r||s||!!p||i||!L,$=d.useCallback(fe=>{const{mentions:ge}=owe(t?.root);u({...fe,mentions:ge.length>0?ge:void 0})},[t,u]),V=pAt({handleSubmit:$,inputQuery:e}),W=gAt({inputQuery:e}),{focusedIndex:Q,setFocusedIndex:q,suggestionsDisabled:H,userInputQuery:K,handleSuggestDropdownNavigation:G}=PAt({autosuggestionsEnabled:m,inputQuery:e,inputJson:t,isInputActive:x&&m,onChange:l,handleSuggestionView:W,handleSuggestionSubmission:V,querySource:n,hasThreadContent:_||w>0,isMentionMenuOpened:S,placement:M,inputRef:R});IAt({sources:h,attachments:g,selectedSearchMode:y,suggestionsDisabled:H,focus:n==="finance"?"finance":void 0,query:e,isCometHome:E,reason:k});const ee=d.useCallback(()=>{R.current?.focus(),v(!0)},[R,v]),Y=d.useCallback(fe=>{c?.(fe),v(!0),T(null),b&&f(R.current?.value??""),N&&setTimeout(()=>{R.current?.scrollIntoView({behavior:"smooth",block:"center"})},300)},[c,T,f,v,b,R,N]);d.useEffect(()=>{O&&a&&(ee(),D(!1))},[O,ee,D,a]);const te=d.useCallback(()=>(v(!1),q(-1),!0),[q,v]),{variation:se}=DAt(!1),ae=d.useCallback((fe,ge)=>{if(l(fe,ge),H){se&&A([]);return}fe.trim().length===0&&P[y]?(A(P[y]),f(fe)):ggt(fe)&&f(fe)},[l,H,f,P,A,y,se]),pe=OAt({value:e,json:t,isDisabled:U,handleSubmit:$,handleSuggestDropdownNavigation:G,querySource:n,focusInput:ee,isInputActive:x});return d.useEffect(()=>{j!==null?R.current?.blur():a&&ee()},[j,R,ee,a]),d.useMemo(()=>({isDisabled:U,focusedIndex:Q,setFocusedIndex:q,userInputQuery:K,handleSuggestionSubmission:V,handleFocus:Y,handleBlur:te,handleChange:ae,handleKeyDown:pe,focusInput:ee,hasQuery:L}),[ee,Q,te,ae,Y,pe,V,L,U,q,K])}function UAt(){const{value:e}=jt({flag:"clear-attachment-on-submission",subjectType:"user_nextauth_id",defaultValue:!1});return e}const BAt=({entropyBrowser:e,isSidecar:t,focusInput:n})=>{d.useEffect(()=>{if(!e||!t)return;const r=()=>{document.visibilityState==="visible"&&n()},s=e.subscribeQuickActionButtonFired(()=>{n()});return document.addEventListener("visibilitychange",r),()=>{s(),window.removeEventListener("visibilitychange",r)}},[e,n,t])},QMe=I.memo(function(t){const{children:n,condition:r,Wrapper:s,...a}=t;return r?o.jsx(s,{...a,children:n}):n});QMe.displayName="ConditionalWrapper";var $At={};const VAt=({value:e,json:t,querySource:n,placeholder:r,placeholderClassName:s,disableSubmission:a=!1,disableInput:i=!1,initialLayout:l="expanded",minRows:c=1,isFollowUp:u=!1,submitWillFork:f=!1,showSources:m=!1,useThreadSources:p=!1,showRecency:h=!1,showModelSelector:g=!0,showSearchModeSelector:y=!0,showFileUpload:x=!1,disableActionButtons:v=!1,showIncognitoHint:b,hasShadow:_=!1,autofocus:w=!0,disablePrivacyWarning:C=!1,fileUploadTooltip:S,className:E,headerComponent:k,showStopButton:M=!1,forceHideSuggestions:j=!1,onChange:R,onFocus:O,onClick:D,onSubmit:P,onStopButtonClick:A=vn,onFilePickerOpen:T,onFilePickerClose:N,autosuggestionsEnabled:L=!0,dropdownPlacement:U="bottom",dropdownClassName:$,disableModeSelector:V=!1,useLexical:W=!1,mentionTypeaheadOptions:Q,isCometHome:q=!1,syncUncontrolledOnce:H=!1,onTriggerTypeahead:K,layoutKey:G,isHighlighted:ee,isMissionControl:Y,ref:te,onRemoveFile:se,onFileAttachComplete:ae,renderAttachments:pe=!0})=>{const fe=`ask-input-inner-${n}`,ge=d.useRef(!1),[Se,je]=d.useState(!1),[ye,be]=d.useState(w),{suggestions:Ne,blankStateSuggestions:ke,showSuggestDropdown:Ie}=ea(),{setSuggestions:Ce}=zo(),{isMobileStyle:Ge,isMobileUserAgent:tt}=xe(),{promptSkipped:gt}=sct(),{inputRef:Ee}=ea(),[Re,Vt]=d.useState(!0),pt=d.useRef(null),{currentOpenedModal:Nt}=xt(),Ke=!!Nt,He=et(),{quote:Tt,setQuote:We}=Sa(),_t=UAt(),Kt=qa(),{sources:en}=ir(),{specialCapabilities:Rt}=ts(),{lastResult:Ut,inFlight:Rn,resultsLength:rn}=Ft(),at=Nn(),yt=Z(),wt=d.useRef(null),[Mt,bt]=d.useState(!1),_e=d.useCallback(()=>bt(!0),[]),ze=d.useCallback(()=>bt(!1),[]),{cacheImageDownloadUrl:Oe}=yV({reason:fe}),[nt,Xe]=d.useState(void 0),It=d.useMemo(()=>nt?.map(mr=>mr.url),[nt]),{value:_n,loading:zn}=Xpe({flag:"windows-app-dictation-config",defaultValue:JK}),Mn=d.useMemo(()=>zn?JK:{eppoTranscriptionConfig:_n,runImmediately:!0},[_n,zn]),Cr=d.useMemo(()=>{if(e.length>um)return yt.formatMessage({defaultMessage:"Query is { numCharacters } characters too long",id:"yw04s2k4La"},{numCharacters:e.length-um})},[e,yt]),{handleUpdateAutosuggestions:Xa}=cTt(),ri=d.useCallback(mr=>{if(!(ge.current||!Re)){if(Xa(""),ge.current=!0,!mr.query&&It&&It.length>0){const So=s3(It[0]);mr.query=So!=="File"?So:"File Attached"}Cr?ge.current=!1:(setTimeout(()=>ge.current=!1,E$),P?.({query:mr.query,json:mr.json,attachments:It,promptSource:mr.promptSource,querySource:mr.querySource,mentions:mr.mentions}),nt?.forEach(So=>{So.file&&So.file.size>0&&lo(So.url)&&Oe(So.url,So.resizedFile??So.file)}),(_t||Y)&&wt.current?.clearFiles())}},[It,nt,Oe,Cr,Xa,_t,Y,P,Re]);d.useEffect(()=>at.subscribeForceSubmitQuery(mr=>{ri(mr)}),[at,ri]);const{isDisabled:Yu,focusedIndex:Bp,setFocusedIndex:Qu,userInputQuery:$p,handleSuggestionSubmission:Mf,handleFocus:kf,handleBlur:Jx,handleChange:Za,handleKeyDown:Xu,focusInput:si,hasQuery:ev}=FAt({value:e,json:t,querySource:n,disableSubmission:a,disableInput:i,autofocus:w,isUploadingFile:Se,onChange:R,onFocus:O,handleSubmit:ri,handleUpdateAutosuggestions:Xa,autosuggestionsEnabled:L,errorMessage:Cr,sources:en,attachments:It,selectedSearchMode:Kt,setIsInputActive:be,isInputActive:ye,inFlight:Rn,resultsLength:rn,quote:Tt,isMentionMenuOpened:Mt,isCometHome:q,reason:fe,placement:U});yTt({setInput:Za}),BAt({entropyBrowser:at,focusInput:si,isSidecar:!!$At.NEXT_PUBLIC_IS_SIDECAR_BUILD}),d.useEffect(()=>{gt&&Ee.current?.focus()},[Ee,gt]),d.useEffect(()=>{Tt&&si()},[Tt,si]);const{deprecatedOpenToast:ht}=fn(),Ur=d.useMemo(()=>({onStart:()=>{si()},onStop:()=>{si()},onSilence:()=>{ht("No audio detected. Make sure your microphone is connected and unmuted","error",4)}}),[si,ht]),{startTranscription:_l,stopTranscription:Zu,error:Fs,isTranscribing:Pc,isInitializing:Vp,transcription:Lc}=_Tt({callbacks:Ur,config:Mn,reason:fe});d.useEffect(()=>{Fs&&ht(`Audio Error: ${Fs}`,"error",4)},[Fs,ht]);const Tf=d.useRef("");d.useEffect(()=>{if(!Pc){Tf.current="";return}if(Lc&&Lc!==Tf.current){const mr=Lc.startsWith(Tf.current)?Lc.slice(Tf.current.length).trim():Lc;if(mr){const So=e?` ${mr}`:mr;Ee.current?.trim(),Ee.current?.append(So),Za(Ee.current?.value??"",Ee.current?.json)}Tf.current=Lc}},[Lc,Pc,e,Za,Ee]);const{isAudioVideoFilesEnabled:tv}=tTt(),Wp=nTt(),{organization:Yw}=Hn({reason:fe}),Qw=d.useCallback(()=>je(!0),[]),{handlePaste:nN,handlePasteQuery:nv,handleCompleteFileUpload:Hp,handleFileSelect:rN,autoCreatedTextFile:Oc,dismissNotification:zp,setAutoCreatedTextFile:Xw}=uTt({fileUploadRef:wt,showFileUpload:x,attachments:It,setAttachments:Xe,handleChange:Za,setIsUploadingFile:je,focusInput:si,onFileAttachComplete:ae}),{fileInputRef:Zw,errorMessage:rv,warningMessage:fr,uploadSource:Jw,uploadedFiles:Dc,handleRemoveFile:Nf,handleStartUpload:eC,handleFileInput:sv,isBoxOpen:Bz,onCloseBox:$z,cleanupBoxPicker:Vz,microsoftFilePickerOptions:Wz,isMicrosoftFilePickerOpen:Hz,handleSelectSharepointSite:zz,onCloseMicrosoft:Gz,setErrorMessage:qz}=hTt({fileUploadRef:wt,disablePrivacyWarning:C,isAudioVideoFilesEnabled:tv,isClearAttachmentsEnabled:Y||_t,isFollowUp:u,organization:Yw,lastResult:Ut,onStartFileUpload:Qw,onCompleteFileUpload:Hp,setUploadsReady:Vt,reason:fe,incompleteParsingEnabled:Wp,specialCapabilities:Rt,askInputRef:te,onRemoveFile:se}),Kz=d.useCallback(()=>{if(Oc){if(Ee.current?.append(Oc.content),Za(Ee.current?.value??"",Ee.current?.json),It){const mr=It.find(So=>So.includes(Oc.fileName));mr&&Nf(mr)}Xw(null)}},[Oc,Ee,Za,It,Nf,Xw]),Yz=d.useRef(e);Yz.current=e;const Qz=d.useCallback(mr=>{be(!0),Yz.current.length===0&&ke[Kt]&&Ce(ke[Kt]),D?.(mr)},[be,Ce,ke,Kt,D]),Xz=d.useCallback(mr=>{Ee.current=mr},[Ee]),b9e=d.useMemo(()=>({isOpen:(Ie&&!j)??!1,suggestedQueries:Ne,focusedIndex:Bp,setFocusedIndex:Qu,handlePasteQuery:nv,handleSubmit:Mf,userInputQuery:$p,placement:U,dropdownClassName:$,allowNonSequentialMatch:Ne!==ke[Kt],isCometHome:q,scrollableShards:Dc.length>0?[pt]:[]}),[ke,$,U,Bp,j,nv,Mf,q,Kt,Qu,Ie,Ne,Dc,pt,$p]),_9e=d.useMemo(()=>({initialLayout:l,wrapperClass:B({"transition-none p-lg":Ie,"border-b-none rounded-b-none":Ie&&!j&&U==="bottom","border-t-none rounded-t-none rounded-b-2xl":Ie&&!j&&U==="top","bg-base":Tt}),size:"large",hasShadow:_,isHighlighted:ee,isMobileUserAgent:tt,showStopButton:M,quote:Tt??void 0,inputWarnings:Oc&&o.jsxs(z,{variant:"subtler",className:"mx-sm mb-xs px-sm py-xs dark:bg-base flex items-center justify-between rounded-lg",children:[o.jsx("div",{className:"gap-x-sm flex items-center",children:o.jsxs(F,{variant:"tiny",color:"light",children:["Text is"," ",Math.max(1,Math.round((Oc.content.length-um)/um*100)),"% over the limit and is attached as a file."," ",o.jsx(Me,{variant:"super",size:"tiny",onClick:Kz,text:"Paste as text"})]})}),o.jsx(Me,{icon:kt,size:"tiny",onClick:zp,variant:"common",pill:!0,noPadding:!0})]}),attachmentsList:Dc.length>0&&pe&&o.jsx(GMe,{uploadedFiles:Dc,onRemoveFile:Nf,incompleteParsingEnabled:Wp,ref:pt}),setQuote:We,inputRef:Ee}),[Oc,zp,U,j,Nf,_,l,Ee,Wp,Kz,Tt,We,M,Ie,Dc,ee,pe,tt]),w9e=d.useMemo(()=>({ref:Xz,id:"ask-input",value:e,json:t,initialLayout:l,minRows:c,placeholder:r,placeholderClassName:s,disableInput:i,autoFocus:w,onClick:Qz,onChange:Za,onKeyDown:Xu,onBlur:Jx,onFocus:kf,onPaste:nN,onMentionMenuOpen:_e,onMentionMenuClose:ze,isMobileStyle:Ge,isMobileUserAgent:tt,useLexical:W,mentionTypeaheadOptions:W?Q:void 0,onTriggerTypeahead:W?K:void 0}),[w,i,Jx,Za,Qz,kf,Xu,nN,l,Ge,tt,t,Q,c,ze,_e,K,r,s,Xz,W,e]),C9e=d.useMemo(()=>o.jsx(zMe,{value:e,json:t,showSources:m,useThreadSources:p,showRecency:h,submitWillFork:f,isFollowUp:u,isDisabled:Yu||!Re,querySource:n,errorMessage:Cr,handleSubmit:ri,fileUploadRef:wt,showFileUpload:x,showModelSelector:g,disableActionButtons:v,fileUploadTooltip:S,disablePrivacyWarning:C,showStopButton:M,onStopButtonClick:A,onFilePickerOpen:T,onFilePickerClose:N,startTranscription:_l,stopTranscription:Zu,isTranscribing:Pc,isTranscriptionInitializing:Vp,isTranscriptionAvailable:!M,fileUploadErrorMessage:rv,fileUploadWarningMessage:fr,activeConnector:Jw,uploadedFiles:Dc,handleStartUpload:eC,handleFileInput:sv,isBoxFilePickerOpen:Bz,handleCloseBoxFilePicker:$z,cleanupBoxFilePicker:Vz,microsoftFilePickerOptions:Wz,handleCloseMicrosoftFilePicker:Gz,handleSelectSharepointSite:zz,isMicrosoftFilePickerOpen:Hz,fileInputRef:Zw,hasQuery:ev,isAudioVideoFilesEnabled:tv,setAttachmentErrorMessage:qz,isCometHome:q,isMissionControl:Y}),[Jw,Vz,v,C,Cr,Zw,rv,S,fr,$z,sv,zz,eC,ri,ev,tv,Bz,Yu,u,Vp,Hz,Pc,t,Wz,Gz,N,T,A,n,qz,x,g,h,m,p,M,_l,Zu,f,Dc,Re,e,q,Y]),{isMax:S9e}=St();return o.jsx(QMe,{condition:He&&x,Wrapper:OB,onDrop:rN,disabled:Ke,allowDropAnywhere:!0,children:o.jsxs(z,{variant:"subtler",className:B(E,"relative rounded-2xl",{"max-super-override":S9e}),children:[k,o.jsx(JEe,{value:e,suggestDropdownProps:b9e,ResizeableInputWrapperProps:_9e,ResizeableInputProps:w9e,syncUncontrolledOnce:H,leftAttributionComponents:V?null:o.jsx(s$,{inRenderingPlace:"sidecar",children:o.jsx(SMe,{showIncognitoHint:b,showSearchModeSelector:y,isFollowUp:u,layoutKey:G})}),rightAttributionComponents:C9e})]})})},pw=I.memo(VAt);pw.displayName="AskInput";const WAt=(e=!1,t)=>{const{fetchVariation:n}=jt({flag:"comet-onboarding",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id",skip:!0});return n},HAt=(e,t,n)=>{const{fetchVariation:r}=jt({flag:"try-assistant-page-enabled",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id",skip:!0,shortCircuitCases:n});return r};function zAt(){const{value:e}=Fu({flag:"comet-ntp-welcome-suggestions",subjectType:"visitor_id",defaultValue:{groups:[]}});return e}const GAt=he(async()=>{const{WelcomeOverlay:e}=await X(async()=>{const{WelcomeOverlay:t}=await import("./WelcomeOverlay-D6IPxdxT.js");return{WelcomeOverlay:t}},__vite__mapDeps([106,1,2,5,6,7]));return{default:e}}),qAt=e=>e.reduce((t,n)=>n.condition==="ALWAYS"?[...t,...n.suggests.map(r=>({query:r,icon:n.icon,image:n.image}))]:t,[]),XMe=I.memo(()=>{const e=d.useRef(null),{$t:t,locale:n}=Z(),r=vt(),s=Ot(),{trackEvent:a}=Te(),[i,l]=d.useState(!1),[c,u]=d.useState(!0),[f,m]=d.useState(!1),p=d.useRef(null),h=Nn(),g=d.useRef(null),{isMobileStyle:y}=xe(),x=P3t(),v=A1t(),b=HAt(!1),_=WAt(!1),w=d.useRef(!1),C=et(),{openVisitorLoginUpsell:S}=or({enabled:!C}),E=d.useMemo(()=>De.getItem("hasSeenSignupModal"),[]),k=d.useMemo(()=>UR()===0,[]);d.useEffect(()=>{const V=v[0];V&&(ks.preload(V.videoSrc,{as:"video"}),ks.preload(V.previewSrc,{as:"image"}))},[v]);const M=AAt({cometBrowser:h,type:"welcome-modal",locale:n}),j=zAt(),R=d.useMemo(()=>qAt(j.groups),[j]),O=d.useCallback(async V=>{const W=await b(),Q=()=>{r.push("/b/try-assistant")};if(W){try{(await h.openTab({url:`${window.location.origin}/b/try-assistant`,key:"openTryAssistant"})).is_success||Q()}catch{Q()}V?.onPageOpen?.()}else c||u(!0),l(!0),V?.onModalOpen?.()},[b,h,r,c]),D=d.useCallback(()=>{!C||De.getItem("hasClosedWelcomeModal")||O({onPageOpen:()=>{De.setItem("hasClosedWelcomeModal","true"),a("new signup ntp education viewed")},onModalOpen:()=>{De.setItem("hasClosedWelcomeModal","true"),a("new signup ntp education viewed")}})},[C,O,a]),P=d.useCallback(()=>!C&&E!=="true"?(S({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:Le.COMET_NTP,sheetModalVariant:"centered-sheet"}),De.setItem("hasSeenSignupModal","true"),!0):!1,[C,E,S,t]);d.useEffect(()=>{const V=e7e();k&&!V&&!w.current&&(w.current=!0,_().then(Q=>{if(t7e(),Q){try{h.openTab({url:`${window.location.origin}/onboarding-comet`,key:"openCometOnboarding"})}catch{window.location.href="/onboarding-comet"}return}else{if(P())return;D()}}))},[D,P,s,_,C,k,h]),d.useEffect(()=>{s?.get("tryAssistant")==="true"&&C&&(O({onPageOpen:()=>{a("new signup ntp education viewed")},onModalOpen:()=>{a("new signup ntp education viewed")}}),Jg({tryAssistant:void 0}))},[s,C,a,O]);const A=d.useCallback(()=>{C?O({onPageOpen:()=>{u(!1)},onModalOpen:()=>{a("ntp education selected")}}):S({title:t({defaultMessage:"Sign in below to unlock the full potential of Comet",id:"1SCRX9DriC"}),origin:Le.TRY_ASSISTANT_BUTTON,sheetModalVariant:"centered-sheet"})},[C,O,S,t,a]),T=aue(),N=d.useCallback(()=>{l(!1)},[]),L=()=>{navigator.geolocation.getCurrentPosition(ne.info)},U=d.useCallback(()=>{L(),m(!0)},[]),$=d.useMemo(()=>C&&T,[C,T]);return o.jsxs("div",{ref:e,className:"mx-auto flex size-full flex-col",style:y?void 0:{marginLeft:Vh*-.5+"px"},children:[o.jsx(ve.div,{initial:{paddingBottom:80},animate:{paddingBottom:f?320:80},exit:{paddingBottom:80},transition:Is,className:"px-md relative isolate mx-auto flex w-full max-w-[800px] grow flex-col items-center justify-center pb-[80px]",children:o.jsx(ASe,{containerRef:e,editMode:f,setEditMode:m,askInput:o.jsx(NW,{})})}),o.jsxs("div",{className:"gap-sm fixed bottom-0 left-1/2 mt-auto flex w-full max-w-[800px] -translate-x-1/2 justify-center py-6 pt-12",children:[o.jsx("div",{ref:p,children:o.jsx(me,{pill:!0,size:"small",variant:"border",icon:Sc,text:t({defaultMessage:"Try Assistant",id:"E4vPUv5Uqt"}),extraCSS:"z-[2] relative",onClick:A})}),$&&o.jsx(me,{pill:!0,size:"small",variant:"border",icon:kce,text:t({defaultMessage:"Background Assistants",id:"UmjY7aC43f"}),extraCSS:"z-[2] relative",href:"/b/assistants"}),o.jsx(me,{pill:!0,size:"small",variant:"border",icon:MLe,text:t({defaultMessage:"Edit widgets",id:"T1DvA9w3pt"}),extraCSS:"z-[2] relative",onClick:U}),x&&o.jsx(ISe,{pill:!0,size:"small",variant:"border",extraCSS:"z-[2] relative"}),o.jsx("div",{style:{maskImage:"linear-gradient(to bottom, rgba(0,0,0,0) 0%, rgba(0,0,0,1) 75%)"},className:"bg-base absolute inset-0"})]}),c&&ks.createPortal(o.jsx(GAt,{isOpen:i,onClose:N,suggestions:M.length?M:R,suggestionsScrollContainerRef:g,buttonRef:p}),document.body)]})});XMe.displayName="CometHomePage";const NW=I.memo(()=>o.jsx(gc,{children:o.jsx(YAt,{})}));NW.displayName="Input";const KAt=I.memo(()=>o.jsxs(o.Fragment,{children:[o.jsx(NW,{}),o.jsx("div",{className:"pt-md h-2xl w-full",children:o.jsx(xT,{context:"sortable-widgets"})})]}));KAt.displayName="InputWrapper";const YAt=()=>{const e="comet-ask-input",{mentionTypeaheadOptions:t,inputPlaceholder:n,onTriggerTypeahead:r}=_T({reason:e,isLazy:!0}),[s,a,i]=Y3({csrRedirect:!0});return o.jsx(z,{className:B("static flex w-full flex-col items-center justify-center md:mt-0","z-10"),children:o.jsx("div",{className:"mb-md w-full",children:o.jsx(pw,{...i,value:s,json:a,querySource:"home",autofocus:!0,minRows:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!0,dropdownPlacement:"bottom",useLexical:!0,mentionTypeaheadOptions:t,placeholder:n??i.placeholder,isCometHome:!0,onTriggerTypeahead:r})})})},QAt=he(async()=>{const{SideCanvasViewer:e}=await X(async()=>{const{SideCanvasViewer:t}=await import("./SideCanvasViewer-CgMox4lS.js");return{SideCanvasViewer:t}},__vite__mapDeps([107,1,2,5,108,6,17,7,18,109,110]));return{default:e}}),ZMe=Dt("CanvasContext",{openCanvas:()=>{},closeCanvas:()=>{},isCanvasOpen:!1,doCanvasAction:()=>{},setCanvasDispatch:()=>{},setCanvasState:()=>{}}),Pp=()=>d.useContext(ZMe),jW=I.memo(({children:e})=>{const[t,n]=d.useState(!1),r=d.useRef(void 0),[s,a]=d.useState(),i=vt(),l=Lt(),c=Ot(),u=d.useRef(l),f=d.useRef(c);u.current=l,f.current=c;const m=d.useCallback(()=>{n(!0);const v=new URLSearchParams(f.current?.toString());v.set("preview","1"),i.replace(`${u.current}?${v.toString()}`)},[i]),p=d.useCallback(()=>{n(!1),r.current=void 0;const v=new URLSearchParams(f.current?.toString());v.delete("preview"),i.replace(`${u.current}?${v.toString()}`)},[i]),h=d.useRef([]),g=d.useCallback(v=>{r.current?r.current(v):h.current.push(v)},[]),y=d.useCallback(v=>{r.current=v,h.current.length>0&&v&&(h.current.forEach(b=>v(b)),h.current=[])},[]),x=d.useMemo(()=>({openCanvas:m,closeCanvas:p,isCanvasOpen:t,setCanvasDispatch:y,doCanvasAction:g,canvasState:s,setCanvasState:a}),[m,p,t,y,g,s]);return o.jsxs(ZMe.Provider,{value:x,children:[e,o.jsx(Ye,{children:t&&o.jsx(QAt,{})})]})});jW.displayName="CanvasStateProvider";const JMe=Dt("SearchSideContainerContext",{container:null,setContainer:()=>{},isOpen:!1,setIsOpen:()=>{},width:720,setWidth:()=>{},isResizing:!1,setIsResizing:()=>{}}),D7=I.memo(({children:e})=>{const[t,n]=d.useState(null),r=720,{isXLargeScreen:s}=Np(),[a,i]=xp("search-side-content-width",r),[l,c]=d.useState(!1),[u,f]=d.useState(()=>{if(typeof window<"u"){const y=window.innerWidth;return a||(s?Math.min(800,y*.5):y*.6)}return r}),[m,p]=d.useState(!1),h=d.useCallback(y=>{f(y),i(y)},[i,f]),g=d.useMemo(()=>({container:t,setContainer:n,isOpen:l,setIsOpen:c,width:u,setWidth:h,isResizing:m,setIsResizing:p}),[t,n,l,c,u,h,m,p]);return o.jsx(JMe.Provider,{value:g,children:e})});D7.displayName="SearchSideContainerProvider";const Bx=()=>d.useContext(JMe),XAt=d.memo(({children:e,title:t,onClose:n,toolbarContent:r,resizable:s=!1,icon:a})=>{const{container:i,setIsOpen:l}=Bx(),{canvasState:c}=Pp();return d.useEffect(()=>{l(!0)},[l]),vp(()=>{l(!1)}),i?ks.createPortal(o.jsx(tke,{icon:a??c?.icon,title:t??c?.title,onClose:n,toolbarContent:r,resizable:s,children:e}),i):null}),eke=d.memo(({containerRef:e})=>{const{setWidth:t,setIsResizing:n,isResizing:r}=Bx(),s=d.useRef(null);vp(()=>{s.current&&s.current()});const a=d.useCallback(i=>{i.preventDefault(),n(!0),document.body.style.userSelect="none",document.body.style.cursor="col-resize";const l=i.clientX,c=e.current?.offsetWidth??0,u=p=>{const h=p.clientX-l,g=c-h;t(g)},f=()=>{n(!1),document.body.style.userSelect="",document.body.style.cursor="",document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",m),document.removeEventListener("contextmenu",m),s.current=null},m=()=>{f()};document.addEventListener("mousemove",u),document.addEventListener("mouseup",m),document.addEventListener("contextmenu",m),s.current=f},[t,n,e]);return o.jsxs("div",{className:"group absolute inset-y-0 left-0 z-10 hidden cursor-col-resize xl:block",children:[o.jsx(z,{variant:"background",className:"absolute inset-y-0 left-0 h-full w-px",children:o.jsx("div",{className:B("group-hover:bg-super duration-normal bg-subtle pointer-events-none absolute inset-0 origin-center group-hover:scale-x-[250%]",{"!bg-super scale-x-[250%] delay-0":r,"delay-0 group-hover:delay-300":!r})})}),o.jsx(z,{variant:"background",className:B("left-half duration-quick absolute top-1/2 -translate-x-1/2 -translate-y-1/2 rounded-full p-px group-hover:!opacity-0",{"!opacity-0 delay-0":r,"delay-0 group-hover:delay-300":!r}),children:o.jsx(z,{variant:"textColor",className:"w-three h-5 rounded-full opacity-20"})}),o.jsx("div",{className:"absolute top-0 h-full w-5 -translate-x-1/2 cursor-col-resize",onMouseDown:a})]})});eke.displayName="ResizeHandle";const tke=d.memo(({children:e,title:t,icon:n,onClose:r,toolbarContent:s,resizable:a=!1})=>{const{isResizing:i}=Bx(),l=d.useRef(null),{$t:c}=Z();return o.jsxs("div",{ref:l,className:"group/search-side-content relative flex h-full min-h-0 flex-1 flex-col",children:[a&&o.jsx(eke,{containerRef:l}),o.jsxs(z,{variant:"background",className:"h-headerHeight gap-sm px-md erp-tab:rounded-none sticky top-0 flex items-center rounded-t-lg border-b",children:[n,t&&o.jsx(F,{variant:"baseSemi",className:"min-w-0 truncate",children:t}),o.jsx("div",{className:"gap-sm flex flex-1 items-center",children:s}),o.jsx(Me,{icon:kt,onClick:r,size:"small",pill:!0,variant:"common",extraCSS:"-mr-xs",toolTip:c({defaultMessage:"Close",id:"rbrahOGMC3"})})]}),o.jsxs(z,{variant:"background",className:"md:gap-xs erp-tab:rounded-none scrollbar-subtle relative isolate h-0 flex-1 overflow-y-auto overflow-x-hidden rounded-b-lg bg-clip-border shadow-sm",children:[e,i&&o.jsx("div",{className:"absolute inset-0"})]})]})});tke.displayName="SearchSideContentBody";const nke=d.memo(()=>{const{isMobileStyle:e}=xe(),{setContainer:t,isOpen:n,isResizing:r}=Bx(),s=rke(),{isXLargeScreen:a}=Np();return e?o.jsx(qt,{variant:"full-sheet",isOpen:n,headerClassname:"hidden",wrapperClassname:"flex-1 !px-0 !pb-0",modalContentClassname:"min-h-0 !flex-1 !p-0",children:o.jsx("div",{ref:t,className:"flex h-full min-h-0 flex-1 flex-col"})}):o.jsx(z,{className:B("fixed inset-y-0 right-0 z-[100] flex h-full w-[60vw] min-w-0 flex-1 flex-col text-clip border-l shadow-lg xl:border-l-0 xl:shadow-none",{"pointer-events-none w-0 translate-x-full opacity-0":!n,"duration-normal transition-transform ease-in-out":!r}),style:{width:n&&a?s:void 0},ref:t})});nke.displayName="SearchSideContentWrapper";XAt.displayName="SearchSideContent";const rke=()=>{const{width:e}=Bx(),{width:t}=Hat(),{isSidebarPinned:n}=In();return d.useMemo(()=>`calc(max(500px,min(calc(100vw - ${n?720:520}px),${e/t*100}vw)))`,[e,t,n])},ske=d.memo(({children:e})=>{const{isOpen:t,isResizing:n}=Bx(),{isXLargeScreen:r}=Np(),s=rke();return o.jsx("div",{className:B("flex size-full flex-1",{"duration-0":n,"duration-normal ease-in-out":!n}),style:{transitionProperty:n?"none":"padding",paddingRight:t&&r?s:void 0},children:e})});ske.displayName="SearchSideContentLayoutWrapper";const pS=30,WT=({autoFetch:e,reason:t})=>{const n=et(),r=ot(),s=async({pageParam:h=0})=>{(!h||h<0)&&(h=1);const g=(h-1)*pS;return await zet({params:{limit:pS,offset:g},reason:t})},a=Lu({queryKey:gn,enabled:e&&n,initialPageParam:0,queryFn:({pageParam:h})=>s({pageParam:h}),getNextPageParam:(h,g)=>h&&h[0]?.has_next_page?g.length+1:void 0}),i=a.data?.pageParams?.length??1,l=a.data?.pages??ce,c=d.useMemo(()=>l.flat(),[l]),u=l[l.length-1]?.[0]?.has_next_page,f=d.useMemo(()=>({currentPage:i,hasNextPage:!!u,hasPreviousPage:i>1,getNextPage:()=>a.fetchNextPage(),getPreviousPage:()=>a.fetchPreviousPage()}),[i,u,a]),m=d.useCallback(h=>{const g=[],y=[];let x=0;for(;x<h.length;)y.push(g.length),g.push(h.slice(x,x+pS)),x+=pS;r.setQueryData(gn,{pages:g,pageParams:y})},[r]),p=d.useCallback(()=>{!f.hasNextPage||a.isLoading||f.getNextPage()},[a.isLoading,f]);return d.useMemo(()=>({...a,fetchNextPage:p,collections:c,paginationInfo:f,updateCache:m}),[c,p,f,a,m])},ZAt=({reason:e})=>{const{collections:t}=WT({autoFetch:!0,reason:e}),{data:n}=Nge({reason:e}),r=t?.filter(i=>!Hg(i.user_permission)),s=n?.[0]?.link;return r?.length===0?"/spaces/templates/":s||"/spaces/templates/"};function JAt(e){return e==="you"||e==="top"||e==="trending"?null:e}const ake=I.memo(e=>{const{$t:t}=Z(),{isMobileStyle:n}=xe();return o.jsx(qt,{...e,title:t({defaultMessage:"Make it yours",id:"RBKgNODPrT"}),variant:n?"bottom-left-sheet":void 0,children:o.jsx("div",{className:"mb-safeAreaInsetBottom md:-m-md md:-mb-10",children:o.jsx("div",{className:"-m-md md:m-0",children:o.jsx(oke,{title:t({defaultMessage:"Select topics and interests to customize your Discover experience",id:"EmIFJDqmup"}),onSave:e.onSave,discoverTopicMap:e.discoverTopicMap,userSelectedTopics:e.userSelectedTopics})})})})});ake.displayName="InterestConfigurationSheet";const oke=I.memo(({title:e,subtitle:t,onClose:n,onSave:r,discoverTopicMap:s,userSelectedTopics:a,variant:i})=>{const{$t:l}=Z(),[c,u]=d.useState(a),f=et(),{openVisitorLoginUpsell:m}=or({enabled:!f}),{trackEvent:p}=Te();d.useEffect(()=>{p("discover topics picker opened",{})},[p]);const h=d.useCallback(()=>{m({title:l({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Le.DISCOVER_TOPICS,sheetModalVariant:"bottom-sheet-gradient"})},[l,m]),g=v=>{if(p(c.includes(v)?"discover topic unselected":"discover topic selected",{topicUUID:JAt(v)}),!f){h();return}u(b=>b.includes(v)?b.filter(_=>_!==v):b.concat(v))},y=d.useCallback(()=>{if(p("discover topics picker saved",{}),!f){h();return}r(c)},[c,f,r,h,p]),x=d.useCallback(v=>{v.stopPropagation()},[]);return o.jsxs(z,{variant:"background",className:"p-md relative rounded-xl",onClick:x,children:[o.jsxs("div",{className:"relative z-[2]",children:[o.jsxs("div",{className:"mb-md flex items-start justify-between",children:[o.jsxs("div",{children:[e&&o.jsx(F,{variant:"baseSemi",children:e}),t&&o.jsx(F,{color:"light",variant:"small",children:t})]}),n&&o.jsx(Me,{icon:kt,size:"tiny",pill:!0,onClick:n,extraCSS:"-mt-sm -mr-sm hover:!bg-inverse/5"})]}),o.jsx("div",{className:"gap-sm flex flex-wrap",children:Object.values(s).map(v=>v.isAlwaysShown?null:o.jsx(ike,{topic:v.id,topicData:v,onClick:g,selected:c.includes(v.id)},v.id))}),o.jsx("div",{className:"mt-md bg-inverse h-px opacity-10"}),o.jsx("div",{className:"mt-md",children:o.jsx(me,{text:l({defaultMessage:"Save Interests",id:"YbI1HM86Ih"}),variant:"primary",size:"small",extraCSS:"w-full",onClick:y})})]}),i==="offset"&&o.jsx("div",{className:"rounded-inherit absolute inset-0 z-[1] dark:bg-black",children:o.jsx("div",{className:"bg-super/10 dark:bg-super/25 dark:border-super/5 rounded-inherit absolute inset-0 z-[1] dark:border"})})]})});oke.displayName="InterestConfigurationBox";const ike=I.memo(({topic:e,topicData:t,selected:n,onClick:r})=>o.jsxs(ve.button,{className:B("px-sm py-xs inline-flex cursor-pointer items-center gap-1.5 rounded-md duration-150 active:scale-[0.95]",{"bg-super/15 dark:bg-white/5":!n},{"bg-super":n}),onClick:()=>r(e),children:[o.jsx(Ye,{mode:"popLayout",initial:!1,children:o.jsx(ve.div,{initial:{scale:0},animate:{scale:1},exit:{scale:0},transition:{duration:.2,type:"spring",bounce:.2},children:o.jsx(de,{icon:n?Hk:t.icon,size:"sm",className:B({"text-quiet":!n},{"text-inverse":n})})},n?`selected-${e}`:e)}),o.jsx(F,{variant:"small",className:B({"text-quiet":!n},{"text-inverse":n}),children:t.name})]}));ike.displayName="InterestPill";const eIt={palette:jLe,flask:NLe,tv:Nce,microchip_ai:DO,dollar_circle:TLe,medal:RO,plane:qk,paint_brush:Tce},tIt=({allTopics:e})=>{const{$t:t}=Z();return d.useMemo(()=>[{id:"you",slug:"you",name:t({defaultMessage:"For You",id:"5KhEnUXBTF"}),icon:kLe,description:t({defaultMessage:"Stories curated for you",id:"2sibbc2gbI"}),isAlwaysShown:!0},{id:"top",slug:"top",name:t({defaultMessage:"Top",id:"X/9XdXSCBu"}),icon:KR,isAlwaysShown:!0},...e.map(r=>({id:r.id,name:r.translated_name??r.name,icon:eIt[r.icon]??KR,slug:r.slug}))],[e,t])},nIt=({reason:e})=>{const t=ot();return dt({mutationKey:["discover_update_topics",{}],mutationFn:r=>qwt({topics:r,reason:e}),onSuccess:()=>{t.invalidateQueries({queryKey:Rme()}),t.invalidateQueries({queryKey:qc()})}})},YM=d.memo(()=>o.jsx(un,{speed:"slow",className:"flex flex-col gap-2",children:Array.from({length:4}).map((e,t)=>o.jsxs(z,{className:B("grid place-items-center",{"w-[90%]":t===0||t===1,"w-[70%]":t===2,"w-[60%]":t===3}),children:[o.jsx(F,{variant:"small",className:"opacity-0",style:{gridArea:"1/-1"},children:""}),o.jsx(z,{variant:"subtle",className:"h-2 w-full rounded-full",style:{gridArea:"1/-1"}})]},t))}));YM.displayName="SidebarListLoader";const yb=d.memo(({children:e})=>o.jsx("div",{className:"flex flex-col gap-[10px]",children:e}));yb.displayName="SidebarSubMenu";const xb=d.memo(()=>o.jsx("div",{className:"bg-subtle h-px"}));xb.displayName="SidebarDivider";const by=d.memo(({text:e,accessory:t,className:n,href:r,onClick:s,onMouseOver:a,testId:i})=>{const l=o.jsx(F,{variant:"tiny",color:"light",className:"group-hover:text-foreground",children:e}),c=r?o.jsxs(qe,{href:r,className:"group relative block",onClick:s,onMouseOver:a,"data-testid":i||"library-button",draggable:!1,children:[o.jsx(z,{variant:"subtle",className:"-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100"}),o.jsxs("span",{className:"relative flex items-center gap-0.5",children:[l,o.jsx(Xn,{className:"text-quiet group-hover:text-foreground -me-xs duration-quick size-4 opacity-0 group-hover/header:opacity-100 rtl:rotate-180"})]})]}):l;return o.jsxs("div",{className:B("group/header gap-xs flex h-6 items-center justify-between",n),children:[c,o.jsx(Ye,{initial:!1,children:t&&o.jsx(ve.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:t})})]})});by.displayName="SidebarSubMenuHeader";const F7=d.memo(({href:e,text:t,onMouseOver:n,onClick:r})=>o.jsx(qe,{href:e,className:"block",onMouseOver:n,onClick:r,children:o.jsx(F,{variant:"tinyRegular",color:"light",className:"duration-quick hover:opacity-60",children:t})}));F7.displayName="SidebarLink";const zs=d.memo(({href:e,text:t,icon:n,fadeOut:r,onClick:s,selected:a,deemphasized:i,menuItems:l,testId:c,sidebarOpen:u,accessory:f,loading:m,id:p})=>{const h=wx(),{openDropdownId:g,setOpenDropdownId:y}=Izt(),x=o.jsxs(o.Fragment,{children:[o.jsx(z,{variant:"subtle",className:B("-inset-y-xs -inset-x-sm duration-quick absolute rounded-md opacity-0 group-hover:opacity-100",{"opacity-100":a||g===p})}),o.jsxs(F,{className:"relative flex items-center gap-2",variant:"small",color:i?"light":void 0,children:[n&&(d.isValidElement(n)?n:o.jsx(de,{icon:n,className:"size-[18px]"})),o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:r?h?"linear-gradient(to left, black 85%, transparent 97%)":"linear-gradient(to right, black 85%, transparent 97%)":void 0},children:t}),o.jsx(Ye,{initial:!1,children:f&&o.jsx(ve.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:f})}),l&&u&&!m&&o.jsxs(z,{as:"span",style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},variant:"underlay",className:B("bg-subtle ps-md -end-xs duration-quick absolute top-1/2 inline-flex -translate-y-1/2 translate-x-px opacity-0 group-hover:opacity-100",{"opacity-100":g===p}),children:[o.jsx(z,{variant:"subtle",className:"p-xs pointer-events-none absolute inset-0 flex items-center justify-end"}),o.jsx(nn,{isMobileStyle:!1,items:l,placement:h?"left":"right",isOpen:g===p,onOpen:()=>{y(p)},onClose:()=>{y(null)},children:o.jsx("div",{onClick:v=>{v.preventDefault()},className:"hover:bg-inverse/5 p-xs duration-quick rounded",children:o.jsx(de,{icon:Ud,size:14,className:"text-quiet"})})})]}),m&&o.jsx("span",{style:{maskImage:h?"linear-gradient(to right, black 60%, transparent)":"linear-gradient(to left, black 60%, transparent)"},className:B("group-hover:bg-subtle text-super ps-md -end-xs absolute top-1/2 -translate-x-0.5 -translate-y-1/2",{"bg-subtle":a,"bg-subtler":!a}),children:o.jsx("div",{className:"flex size-[14px] items-center justify-center",children:o.jsx(Fr,{size:12})})})]})]});return e?o.jsx(qe,{href:e,className:"group relative block","data-testid":c,draggable:!1,children:o.jsx("div",{className:"group relative block",onClick:s,children:x})}):o.jsx("button",{onClick:s,className:"group relative block appearance-none text-left",type:"button","data-testid":c,children:x})});zs.displayName="SidebarSubMenuItem";function rIt({userSelectedTopics:e,topics:t}){const n=e.map(s=>s.id);return Object.fromEntries(t.map(s=>{const a={...s,userSelected:n.includes(s.id)};return[s.id,a]}))}const Jre=e=>{const t=e?.split("/").slice(1);return t?t[1]:null},lke=d.memo(({isConfiguring:e,setConfiguring:t,sidebarOpen:n})=>{const r="discover-sidebar",s=et(),a=Lt(),{data:i,isLoading:l}=Gwt(),c=et(),u=tIt({allTopics:i?.allTopics??ce}),f=i?.userSelectedTopics??ce,m=rIt({userSelectedTopics:f,topics:u}),p=f.length>0?"selected":"default",h=d.useCallback(_=>_.id==="top"||_.id==="trending"?!0:_.id==="you"?s:p==="default"?!0:!!_.userSelected,[p,s]),g=d.useMemo(()=>{const _=[],w=[];return Object.values(m).map(C=>{const{name:S,icon:E,slug:k}=C;h(C)?_.push({text:S,icon:E,link:`/discover/${k}`,active:Jre(a)===k}):w.push({text:S,icon:E,link:`/discover/${k}`,active:Jre(a)===k})}),{activeItems:_,overflowItems:w}},[m,h,a]),y=f.map(_=>_.id),x=nIt({reason:r}),v=_=>{x.mutate(Array.from(_)),e&&t(!1)},{$t:b}=Z();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex flex-col gap-[12px]",children:[o.jsx(by,{text:b({defaultMessage:"Topics",id:"kc79d3WUbd"})}),l?o.jsx(YM,{}):o.jsx(yb,{children:g.activeItems.map(_=>o.jsx(zs,{id:_.text,href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))}),g.overflowItems.length>0&&c&&o.jsxs(o.Fragment,{children:[o.jsx(by,{text:b({defaultMessage:"More",id:"I5NMJ8llIi"})}),o.jsx(yb,{children:g.overflowItems.map(_=>o.jsx(zs,{id:_.text,href:_.link??"",text:_.text,selected:_.active,icon:_.icon,sidebarOpen:n},_.text))})]})]}),o.jsx(ake,{isOpen:e,onClose:()=>t(!1),onSave:v,discoverTopicMap:m,userSelectedTopics:y})]})});lke.displayName="DiscoverSidebar";const R2="recentItems";async function sIt({reason:e}){try{const t=await re.GET("/rest/thread/list_recent",e),n=t.data;if(!t.response.ok)throw new Error("Failed to get recent threads.");return n??ce}catch(t){return ne.error("Failed to get recent threads.",t),ce}}const aIt=({reason:e})=>{const{isIncognito:t}=Ga({reason:e}),{inFlightLatest:n}=Ft(),{session:r}=mt(),s=r?.user?.email,{data:a,refetch:i,isLoading:l}=Ue({queryKey:[R2,s],queryFn:async()=>!s||t?ce:await sIt({reason:e})});return d.useEffect(()=>{n||i({cancelRefetch:!1})},[n,i]),d.useMemo(()=>!s||t?{data:[],isLoading:!1}:{data:a??ce,isLoading:l},[a,s,t,l])},oIt={about:bu,born:KS,age:KS,died:KS,parents:zR,siblings:zR,children:BLe,spouse:YR,spouses:YR,education:tE,educated_at:tE,net_worth:ULe,ratings:KR,directed_by:Ace,starring:bu,watch_on:gce,treatment:FLe,symptoms:DLe,specialists:OLe};function iIt(e){return e&&oIt[e]||null}const lIt={EXTERNAL_LINK_TYPE_UNSPECIFIED:p1,PRIMARY:p1,WIKIPEDIA:LLe,X:PLe,INSTAGRAM:RLe,TIKTOK:ILe,YOUTUBE:jce,FACEBOOK:ALe,MAYOCLINIC:Ti,IMDB:ace};function ese(e){return lIt[e]}const cke=Dt("PanelContext",{menuItems:void 0}),$x=()=>{const e=d.useContext(cke);if(!e)throw new Error("usePanel must be used within PanelContext");return e},yr=({children:e,menuItems:t,variant:n,className:r})=>o.jsx(Nr,{fallback:null,children:o.jsx(cke.Provider,{value:{menuItems:t},children:n==="noChrome"?o.jsx(z,{className:r||"mb-md",children:e}):o.jsx(Wt,{shadow:!0,className:`${r||"mb-md"} p-md`,children:e})})}),cIt=({menuItems:e,buttonClass:t,placement:n})=>{const{isMobileStyle:r}=xe();return e.length<=0?null:o.jsx(nn,{items:e,isMobileStyle:r,placement:n,children:o.jsx(Me,{size:"tiny",pill:!0,icon:Ud,extraCSS:t})})},uIt=({title:e,href:t,subtitle:n,image_url:r,links:s,children:a,entryUUID:i,data:l})=>{const{trackEvent:c}=Te(),u=d.useCallback(f=>{c("knowledge card link clicked",{label:"social media",socialMediaType:f.type,value:f.url,entryUUID:i,type:l?.type??"",name:l?.title??"",id:l?.source_url??""})},[l?.source_url,l?.title,l?.type,i,c]);return o.jsx(z,{className:"gap-sm flex w-full justify-between",children:o.jsxs("div",{className:"gap-md flex grow items-start",children:[r?o.jsx("div",{className:"flex-none",children:o.jsx(ns,{imageClassName:"size-[120px] object-cover object-top",rounded:"md",src:r,alt:e,includeLightBoxModal:!1})}):null,o.jsxs("div",{className:"flex h-full grow flex-col",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"gap-sm mb-two flex items-start",children:[o.jsx(F,{variant:"section-title",className:"flex-1",children:t?o.jsx(qe,{href:t,target:"_blank",className:"hover:text-super flex-1 duration-150",children:e}):e}),a]}),n&&o.jsx(F,{variant:"small",className:"mb-sm mr-sm text-pretty",children:n})]}),s&&s.length>0&&o.jsx("div",{className:"gap-sm flex flex-wrap",children:s.map(f=>o.jsx(uke,{link:f,solo:s.length===1,handleLinkClick:u},f.type))})]})]})})},uke=I.memo(({link:e,solo:t,handleLinkClick:n})=>{const r=d.useCallback(()=>n(e),[n,e]);return t?o.jsx(me,{icon:ese(e.type),text:e.title,textClassName:"font-normal ml-2xs text-quiet ",size:"tiny",href:e.url,target:"_blank",onClick:r},e.url):o.jsx(me,{icon:ese(e.type),size:"tiny",href:e.url,target:"_blank",onClick:r},e.type)});uke.displayName="ButtonFactory";const dIt=({name:e,title:t,value:n})=>{const r=iIt(e);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-sm flex min-w-[120px]",children:[r&&o.jsx(F,{variant:"smallBold",color:"light",className:"w-5",children:o.jsx(de,{icon:r,size:"sm"})}),o.jsx(F,{variant:"smallBold",color:"light",children:t})]}),o.jsx(F,{variant:"small",children:n})]})},fIt=({children:e})=>o.jsx(z,{className:"pt-sm px-md border-t",children:e});yr.Title=uIt;yr.Item=dIt;yr.Menu=cIt;yr.Footer=fIt;const dke=I.memo(({graphData:e})=>{const[t,n]=d.useState(!1),r=e.url,s=e.name,a=d.useCallback(()=>n(!1),[]);return o.jsxs("div",{className:"flex justify-center",children:[o.jsx("img",{src:r,alt:s,className:"max-h-[50vh] overflow-hidden rounded align-middle",onClick:()=>n(!0)}),o.jsx(fke,{isOpen:t,onClose:a,alt:s,src:r})]})});dke.displayName="StaticImageGraph";const fke=I.memo(({isOpen:e,onClose:t,alt:n,src:r})=>{const s=d.useCallback(()=>t(!1),[t]);return o.jsxs(qt,{onClose:s,isOpen:e,variant:"hide-chrome",disableAnimation:!1,children:[o.jsx("div",{className:"flex place-content-center",onClick:()=>t(!1),children:o.jsx("div",{className:"gap-xs p-md md:p-xl flex flex-col items-center justify-between",children:o.jsx("div",{className:"grow",children:o.jsx("img",{alt:n,src:r,className:"max-h-[50vh]"})})})}),o.jsx(me,{onClick:s,icon:kt,extraCSS:"!fixed top-md right-md shadow-sm",size:"small",pill:!0,ariaLabel:"Close"})]})});fke.displayName="ImageModal";const mke=I.memo(({graphData:e})=>o.jsxs(yr,{className:"gap-md bg-subtler p-md flex flex-col rounded-md text-center",children:[o.jsx(yr.Title,{title:e.name,subtitle:""}),o.jsx(dke,{graphData:e})]}));mke.displayName="GraphPanel";const mIt={pendingClarifications:[],addClarification:()=>{},clearClarifications:()=>{}},pke=Dt("DeepResearchContext",mIt),hke=({children:e})=>{const[t,n]=d.useState([]),r=d.useCallback(i=>{n(t.concat([i]))},[t]),s=d.useCallback(()=>{n([])},[]),a={pendingClarifications:t,clearClarifications:s,addClarification:r};return o.jsx(pke.Provider,{value:a,children:e})},AW=()=>{const e=d.useContext(pke);if(!e)throw new Error("useDeepResearchState must be used within DeepResearchContext");return e};var El={},tse;function pIt(){if(tse)return El;tse=1;var e=El&&El.__values||function(s){var a=typeof Symbol=="function"&&s[Symbol.iterator],i=0;return a?a.call(s):{next:function(){return s&&i>=s.length&&(s=void 0),{value:s&&s[i++],done:!s}}}},t=El&&El.__read||function(s,a){var i=typeof Symbol=="function"&&s[Symbol.iterator];if(!i)return s;var l=i.call(s),c,u=[],f;try{for(;(a===void 0||a-- >0)&&!(c=l.next()).done;)u.push(c.value)}catch(m){f={error:m}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(f)throw f.error}}return u};Object.defineProperty(El,"__esModule",{value:!0}),El.selectState=function(s){return s};function n(){var s,a,i;function l(c){var u=0,f;function m(h){var g,y;s||(s={state:h,version:1}),s.state!==h&&(s.state=h,s.version+=1);var x=s.version,v;if(f){if(x===f.stateVersion)return f.value;var b=!1;try{for(var _=e(f.dependencies.entries()),w=_.next();!w.done;w=_.next()){var C=t(w.value,2),S=C[0],E=C[1];if(S(h)!==E){b=!0,v=S;break}}}catch(R){g={error:R}}finally{try{w&&!w.done&&(y=_.return)&&y.call(_)}finally{if(g)throw g.error}}if(!b)return f.value}u+=1;var k=new Map,M=Object.assign(function(R){if(k.has(R))return k.get(R);var O=R(h);return k.set(R,O),O},{reason:v}),j=i?i(function(){return c(M)},p,h,v):c(M);if(k.size===0)throw new Error("[rereselect] Selector malfunction: The selection logic must select some data by calling `query(selector)` at least once.");return f={stateVersion:x,dependencies:k,value:j},j}var p=Object.assign(function(g){return a?a(function(){return m(g)},p,g):m(g)},{selectionLogic:c,recomputations:function(){return u},resetRecomputations:function(){return u=0},introspect:function(){return f}});return p}return{makeSelector:l,setInvocationWrapper:function(c){a=c},setComputationWrapper:function(c){i=c}}}El.createSelectionContext=n;var r=n();return El.makeSelector=r.makeSelector,El}var Et=pIt();const hS=.2,gke=I.memo(({title:e,loading:t})=>{const{isMobileStyle:n}=xe(),r=n;return o.jsx(un,{active:t,className:"gap-sm flex w-full items-center",speed:"slow",children:o.jsx(Ye,{mode:"popLayout",initial:!1,children:o.jsx(ve.div,{initial:{y:"-50%",opacity:0},animate:{y:0,opacity:1,transition:{y:{duration:.2,ease:_a,delay:hS+.1},opacity:{duration:.2,ease:"linear",delay:hS+.1}}},exit:{y:"50%",opacity:0,transition:{y:{duration:.2,ease:vue,delay:hS},opacity:{duration:.2,ease:"linear",delay:hS}}},className:"w-full",children:o.jsx(F,{variant:r?"baseSemi":"section-title",color:t?"ultraLight":void 0,children:e})},e)})})});gke.displayName="EntityGroupTitle";const yke=Dt("EntityGroupContext",void 0),hIt=()=>{const e=d.useContext(yke);if(!e)throw new Error("useEntityGroup must be used within an EntityGroupProvider");return e},xke=I.memo(({children:e})=>{const[t,n]=d.useState(!1);return o.jsx(yke.Provider,{value:{viewMoreOpen:t,setViewMoreOpen:n},children:e})});xke.displayName="EntityGroupProvider";const hw=e=>{let t;if("meta_data"in e?t=e.meta_data:t=Qr(e).with({place_widget_block:ym.nonNullable},n=>({...n.place_widget_block,object:"PlaceWidget"})).with({shopping_widget_block:ym.nonNullable},n=>({...n.shopping_widget_block,progress:kl.DONE,object:"ShopifyWidget"})).with({search_result_widget_block:ym.nonNullable},n=>{const r=n.search_result_widget_block.metadata||{},s=r.object;if(s==="WeatherWidget")return{...r,progress:kl.DONE,object:"WeatherWidget"};if(s==="TimeWidget")return{...r,progress:kl.DONE,object:"TimeWidget"};if(s==="CalculatorWidget")return{...r,progress:kl.DONE,object:"CalculatorWidget"};if(s==="TaskWidget")return{...r,progress:kl.DONE,object:"TaskWidget"};if(s==="TimerWidget")return{...r,progress:kl.DONE,object:"TimerWidget"};if(s==="CurrencyExchangeWidget")return{...r,progress:kl.DONE,object:"CurrencyExchangeWidget"};if(s==="GenericFallbackWidget")return{...r,progress:kl.DONE,object:"GenericFallbackWidget"}}).otherwise(()=>{}),!!t)return t},vke=Dt("ScrollToWidgetContext",{selectedWidgetId:void 0,scrollToWidget:()=>{},entityRefs:{}}),IW=()=>{const e=d.useContext(vke);if(!e)throw new Error("useScrollToWidget must be used within ScrollToWidgetContext");return e},bke=I.memo(({children:e,entities:t})=>{const[n,r]=d.useState({}),[s,a]=d.useState(void 0),{scrollContainerRef:i}=ti(),l=d.useRef(null);d.useEffect(()=>()=>{r({})},[]),d.useEffect(()=>{r(u=>{const f=u;let m=!1;return t?.map(p=>{const h=hw(p);if(!h)return;if(h.object==="ShopifyWidget"){const y=h.id;if(!n[y]){m=!0;const x=d.createRef();f[y]=x}}}),m?f:u})},[t,n]);const c=u=>{l.current&&clearTimeout(l.current);const f=n[u]?.current;if(f&&i?.current){const p=f.getBoundingClientRect().top+i.current?.scrollTop-200;i?.current?.scrollTo({top:p,behavior:"smooth"})}a(u),l.current=setTimeout(()=>{a(void 0)},2e3)};return o.jsx(vke.Provider,{value:{selectedWidgetId:s,scrollToWidget:c,entityRefs:n},children:e})});bke.displayName="ScrollToWidgetProvider";const gIt=3,_ke=I.memo(({onClick:e,disabled:t,images:n})=>{const{$t:r}=Z();return o.jsx("div",{className:"flex items-center justify-center",children:o.jsxs(z,{variant:"background",bgHover:"subtler",className:B("gap-sm py-md group flex w-full cursor-pointer items-center justify-center rounded-lg border",{"pointer-events-none opacity-50":t}),onClick:e,children:[o.jsx("div",{className:"mx-xs flex items-center",children:n.slice(0,gIt).map((s,a)=>o.jsxs("div",{className:B("-ml-xs dark:ring-inverse relative size-6 shrink-0 overflow-hidden rounded bg-white p-[0.1rem] shadow-sm duration-150 dark:ring",{"group-hover:-translate-x-sm":a===1},{"group-hover:-translate-x-md":a===0}),children:[o.jsx(ns,{src:s.src,containerClassName:B("relative size-full"),alt:"",maskClassName:"!rounded-[0.18rem]",includeLightBoxModal:!1,imageClassName:"w-full h-full object-contain bg-white"}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-transparent"})]},s.src))}),o.jsx(F,{variant:"smallBold",children:r({defaultMessage:"All Products",id:"enAu2bZ4pg"})})]})})});_ke.displayName="ViewAllButton";const wke=I.memo(()=>o.jsx(Cke,{}));wke.displayName="WidgetPlaceholder";const Cke=I.memo(()=>{const e=d.useMemo(()=>({maskImage:"linear-gradient(to bottom, black, transparent)"}),[]);return o.jsx(ve.div,{children:o.jsx(z,{variant:"subtler",className:"flex h-[200px] animate-pulse rounded-lg",style:e})})});Cke.displayName="HighIntentWidgetAnimationPlaceholder";const Ske=Dt("EntityContext",{entityId:"",menuItems:void 0,variant:void 0}),gw=()=>{const e=d.useContext(Ske);if(!e)throw new Error("useEntity must be used within EntityContext");return e},yIt=({children:e,id:t,menuItems:n,className:r,entityVariant:s})=>o.jsx(Ske.Provider,{value:{entityId:t,menuItems:n,variant:s},children:o.jsx(Wt,{variant:s==="hide-chrome"?"transparent":void 0,className:B("group/card flex flex-col",{"p-md":s!=="hide-chrome"},r),children:e})}),xIt=({className:e,...t})=>o.jsx(z,{className:B("gap-sm md:gap-md relative flex flex-col rounded-lg md:flex-row",e),...t}),vIt=({primaryButtonText:e,onPrimaryButtonClick:t,listNumber:n,className:r,children:s,...a})=>o.jsxs("div",{className:B("relative md:w-[calc(30%_-_8px)]",r),...a,children:[o.jsxs("div",{className:"gap-md flex h-full flex-col justify-between",children:[s,e&&t&&o.jsx("div",{className:"flex flex-col items-stretch md:max-w-[160px]",children:o.jsx(me,{text:e,variant:"primary",onClick:t,pill:!0,size:"small"})})]}),typeof n=="number"&&o.jsx(F,{variant:"smallCaps",color:"light",className:"border-subtler bg-base absolute -left-1.5 -top-1.5 flex size-5 shrink-0 items-center justify-center rounded-full border shadow-sm",children:n})]}),bIt=({className:e,buttonProps:t,secondaryButtonProps:n,trailingComponent:r,children:s,...a})=>{const{menuItems:i}=gw();return o.jsx("div",{className:B("flex min-w-0 flex-1 flex-col",e),...a,children:o.jsxs("div",{className:"gap-sm md:gap-md flex flex-1 flex-col justify-between rounded-lg",children:[o.jsx("div",{className:"gap-xs flex flex-col justify-between",children:o.jsx("div",{className:B("gap-xs my-sm relative flex flex-col md:mt-0"),children:s})}),(t||n)&&o.jsxs("div",{className:"gap-sm flex w-full items-center",children:[t&&o.jsx(me,{variant:"primary",pill:!0,size:"small",...t,extraCSS:`${t.extraCSS} w-full max-w-[160px]`}),n&&o.jsx(me,{variant:"border",pill:!0,size:"small",...n,extraCSS:`${n.extraCSS}`}),r,i&&i.length>0&&o.jsx("div",{className:"duration-150 group-hover/card:opacity-100 md:opacity-0",children:o.jsx(yr.Menu,{menuItems:i,placement:"bottom-start"})})]})]})})},_It=({title:e,onTitleClick:t,className:n})=>{const{selectedWidgetId:r}=IW(),{entityId:s}=gw(),{isMobileStyle:a}=xe();return o.jsx("div",{onClick:()=>t?.(),className:n,children:o.jsx(F,{variant:a?"section-title":"entry-title",className:B("line-clamp-3 !leading-tight md:text-2xl",{"duration-fast cursor-pointer hover:opacity-70":!!t}),children:o.jsx("span",{className:B("duration-normal rounded-md",{"bg-super/10":r===s}),children:e})})})},wIt=({loading:e,className:t,onClick:n,trailingText:r})=>{const{$t:s}=Z();return o.jsxs(z,{className:B("group relative flex h-12 items-center",{"opacity-50":e,"cursor-pointer":!e},t),onClick:e?void 0:n,children:[!e&&o.jsx(z,{variant:"subtle",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),o.jsxs("div",{className:"relative w-full",children:[o.jsxs("div",{className:B("gap-md relative flex w-full items-center justify-between",{"opacity-0":e}),children:[o.jsx(F,{variant:"smallBold",color:"light",children:s({defaultMessage:"View More",id:"QQSdHPJWXu"})}),o.jsxs(F,{variant:"tiny",color:"light",className:"gap-sm flex items-center",children:[r,o.jsx(de,{icon:Xn,size:"xs"})]})]}),e&&o.jsxs("div",{className:"absolute inset-0 flex items-center justify-between",children:[o.jsx(z,{className:"h-2 w-[100px] rounded-full",variant:"subtle"}),o.jsx(de,{icon:Xn,className:"text-quietest",size:"sm"})]})]})]})},CIt=({title:e,className:t,children:n,trailingContent:r,defaultExpanded:s=!1})=>{const[a,i]=d.useState(!s);return o.jsxs(z,{className:t,children:[o.jsxs("div",{onClick:()=>i(!a),className:"group relative flex h-12 cursor-pointer select-none items-center justify-between",children:[o.jsx(z,{variant:"subtle",className:"inset-y-xs absolute -inset-x-3 rounded-md opacity-0 duration-150 group-hover:opacity-100"}),o.jsx(F,{variant:"smallBold",color:"light",className:"relative shrink-0 whitespace-nowrap",children:e}),o.jsxs("div",{className:"gap-md relative flex min-w-0 items-center",children:[o.jsx("div",{className:"gap-xs flex min-w-0 items-stretch",children:r}),o.jsx(de,{icon:Wn,className:B("text-foreground relative shrink-0 opacity-50",{"rotate-180":!a}),size:"sm"})]})]}),o.jsx(na,{transition:{ease:xo(.16,1,.3,1),duration:.2},initial:!1,children:!a&&o.jsx(Zr,{transition:{duration:.1},exit:{y:-5,opacity:0},animate:{y:0,opacity:1},initial:{y:-5,opacity:0},children:o.jsx("div",{className:"pb-4",children:n})})})]})},Eke=yIt,Scn=xIt,Ecn=_It,Mcn=CIt,kcn=vIt,Tcn=bIt,Ncn=wIt,HT=I.memo(({isOpen:e,children:t,placement:n,hoverOpen:r=!1,disabled:s=!1,onOpen:a,onClose:i,content:l,contentWidth:c="360px",isMobileStyle:u,boxProps:f,canOutsideClickClose:m,removeScroll:p,ref:h,...g})=>{const[y,x]=d.useState(!1),v=d.useMemo(()=>e!==void 0,[e]),b=d.useMemo(()=>v?e:y,[v,e,y]),_=d.useCallback(()=>{!b&&!s&&(a?.(),v||x(!0))},[s,v,a,b]),w=d.useCallback(()=>{b&&!s&&(i?.(),v||x(!1))},[s,v,i,b]);d.useImperativeHandle(h,()=>({dismiss:w}),[w]);const C=d.useMemo(()=>({width:c??void 0}),[c]),S=d.useMemo(()=>o.jsx(z,{style:C,...f,children:l}),[C,f,l]),E=d.useMemo(()=>({canOutsideClickClose:m??!0,removeScroll:p}),[m,p]);return u?o.jsxs(o.Fragment,{children:[o.jsx(qt,{variant:"bottom-left-sheet",actionList:ce,isOpen:b,onClose:w,children:l}),o.jsx("span",{onClick:_,children:t})]}):o.jsx(ei,{isOpen:b,hoverOpen:r,placement:n,onClose:w,onOpen:_,overlayProps:E,content:S,hasInteractiveContent:!0,...g,children:t})});HT.displayName="DropDownModal";const SIt=I.memo(({inFlight:e,chooseIfReason:t,chooseIfLeadInCopy:n,pros:r,cons:s,className:a,viewState:i="collapsed",id:l,showBuyIf:c=!0})=>{const u=!t&&e;return o.jsx(un,{active:u,className:B("relative",a),children:o.jsx(na,{children:o.jsx(Zr,{children:o.jsxs("div",{className:"gap-sm mt-md relative flex flex-col rounded-md md:mx-0",children:[c&&o.jsx(Mke,{reason:t,leadInCopy:n,loading:u}),o.jsx(vb,{pros:r??ce,cons:s??ce,loading:u,viewState:i,id:l})]})})})})});SIt.displayName="EntityItemGuidance";const Mke=I.memo(({reason:e,leadInCopy:t,loading:n,textVariant:r="base"})=>{const{variant:s}=gw();return!e&&!n?null:o.jsx("div",{className:B("flex items-start gap-[12px] rounded-md md:items-center"),children:o.jsx("div",{className:"w-full",children:n?o.jsxs("div",{className:"gap-sm pb-sm flex flex-col",children:[o.jsx(z,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 w-full rounded-full"}),o.jsx(z,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 rounded-full"}),o.jsx(z,{variant:s==="hide-chrome"?"subtler":"subtle",className:"h-2 w-1/2 rounded-full"})]}):o.jsxs(F,{variant:r,children:[o.jsx("span",{className:"font-medium",children:t})," ",e]})})})});Mke.displayName="EntityItemChooseIf";const kke=3,Tke=2,vb=I.memo(({pros:e,cons:t,loading:n,className:r,viewState:s="collapsed",id:a,scrollOnMobile:i=!0})=>!n&&e.length===0&&t.length===0?null:o.jsx("div",{className:r,children:s==="collapsed"?o.jsx(jke,{loading:n,pros:e,cons:t,id:a,scrollOnMobile:i}):o.jsx(Ake,{loading:n,pros:e,cons:t})}));vb.displayName="EntityItemProsCons";const Nke=I.memo(({children:e,loading:t,scrollOnMobile:n=!0})=>{const{isMobileStyle:r}=xe(),{variant:s}=gw();return r&&n?o.jsx("div",{className:"-mx-md",children:o.jsx(sl,{orientation:"horizontal",showScrollIndicator:!1,children:o.jsx("div",{className:"flex",children:o.jsx("ul",{className:"gap-sm px-md flex shrink-0",children:e})})})}):o.jsx("ul",{className:B("flex flex-wrap",{"gap-0":s==="dense-card"&&!t,"gap-sm":s!=="dense-card"||t}),children:e})});Nke.displayName="ProsConsCollapsedContainer";const jke=I.memo(({loading:e,pros:t,cons:n,id:r,scrollOnMobile:s=!0})=>o.jsx(Nke,{loading:e,scrollOnMobile:s,children:o.jsx(Ye,{initial:!1,children:o.jsx(Ec,{children:e?Array.from({length:3}).map((a,i)=>o.jsx(P2,{asPlaceholder:!0,text:"",type:"con",label:"",id:r},i)):o.jsxs(o.Fragment,{children:[t.map(a=>o.jsx(P2,{text:a.description,type:"pro",label:a.label,id:r},a.label+r)).slice(0,kke),n.map(a=>o.jsx(P2,{text:a.description,type:"con",label:a.label,id:r},a.label+r)).slice(0,Tke)]})})})}));jke.displayName="ProsConsCollapsed";const Ake=I.memo(({loading:e,pros:t,cons:n})=>o.jsx("div",{className:"-mx-6",children:o.jsx(sl,{orientation:"horizontal",showScrollIndicator:!1,children:o.jsx("ul",{className:"gap-sm flex px-6",children:e?Array.from({length:3}).map((r,s)=>o.jsx(Ike,{},s)):o.jsxs(o.Fragment,{children:[t.map(r=>o.jsx(U7,{text:r.description,type:"pro",label:r.label},r.label)).slice(0,kke),n.map(r=>o.jsx(U7,{text:r.description,type:"con",label:r.label},r.label)).slice(0,Tke)]})})})}));Ake.displayName="ProsConsExpanded";const P2=I.memo(({text:e,label:t,type:n,asPlaceholder:r,id:s})=>{const{trackEvent:a}=Te(),{variant:i}=gw(),l=()=>{r||a("shopping pro con hover",{type:n,label:t})},c={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},u=d.useMemo(()=>o.jsx("div",{className:B("p-sm pointer-events-none translate-y-0"),children:o.jsx(F,{variant:"small",children:e})}),[e]);return o.jsx(ve.li,{variants:c,initial:"initial",animate:"animate",transition:{duration:.1,ease:_a},className:B("group inline-flex shrink-0 cursor-default rounded-full duration-150",{"gap-xs":i!=="dense-card","gap-sm":i==="dense-card","hover:bg-subtler":!r,"border-subtlest border duration-150":!r&&i!=="dense-card","!border-transparent !bg-transparent":r}),onMouseEnter:l,children:o.jsx(HT,{hoverOpen:!0,placement:"bottom-start",contentWidth:"200px",removeScroll:!1,content:u,isMobileStyle:!1,delayTime:1,disabled:r,hasInteractiveContent:!1,childrenClassName:"inline-flex",children:o.jsxs("div",{className:B("p-xs relative inline-flex items-center pr-[10px]",{"bg-subtler dark:bg-subtle":r,"h-[26px] rounded-full":r,"gap-2xs":i==="dense-card","gap-xs":i!=="dense-card"}),children:[o.jsx("div",{className:B("size-md flex shrink-0 items-center justify-center rounded-full",{"text-super":n==="pro"},{"text-quiet":n==="con"},{"bg-transparent":r}),children:o.jsx(F,{variant:"tiny",color:n==="pro"?"super":"light",className:"inline-flex",children:o.jsx(de,{className:r?"opacity-0":"",icon:n==="pro"?dr:kt,size:"xs"})})}),r?o.jsx(F,{variant:"tiny",className:"w-10 shrink-0",children:""}):o.jsx(F,{variant:"tiny",color:"light",children:o.jsx("span",{className:B({"text-super":n==="pro"}),children:t})})]})})},t+s)});P2.displayName="EntityItemProConItem";const Ike=I.memo(()=>o.jsx(z,{className:"p-sm h-[136px] w-[200px] rounded-md",variant:"subtler"}));Ike.displayName="ExpandedLoading";const U7=I.memo(({text:e,label:t,type:n})=>o.jsxs(z,{className:"p-sm w-[200px] rounded-md",variant:"subtler",children:[o.jsxs("div",{className:"mb-2xs gap-xs flex items-center",children:[o.jsx(z,{variant:n==="pro"?"super":"textColor",className:B("size-md flex shrink-0 items-center justify-center rounded-full",{"opacity-50":n==="con"}),children:o.jsx(de,{icon:n==="pro"?dr:kt,className:"text-inverse shrink-0",size:"xs"})}),o.jsx(F,{variant:"smallBold",color:n==="pro"?"super":"light",children:t})]}),o.jsx(F,{variant:"small",color:"light",children:e})]}));U7.displayName="ProConItemExpanded";const B7=d.memo(({src:e,onClick:t,showViewMore:n,onMouseEnter:r,onMouseLeave:s,className:a,imageClassName:i,albumSize:l})=>{const{$t:c}=Z();return o.jsxs("div",{onClick:t,onMouseEnter:r,onMouseLeave:s,className:B("bg-subtle group relative aspect-square size-full cursor-pointer overflow-hidden rounded duration-150",a),children:[o.jsx("img",{src:e,alt:"",className:B("m-0 size-full object-contain duration-150 group-hover:scale-[1.02]",i),sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",loading:"lazy",decoding:"async"}),l&&o.jsx("div",{className:"absolute bottom-1.5 right-1.5 flex items-center justify-center rounded-full bg-black/40",children:o.jsxs(F,{variant:"tiny",color:"white",className:"gap-sm px-sm py-xs relative flex items-center",children:[l,o.jsx(de,{icon:$Le,size:"xs"})]})}),n&&o.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/30 dark:bg-black/80",children:o.jsxs(F,{variant:"tiny",color:"white",className:"px-sm py-xs relative rounded-full",children:[o.jsx("span",{className:"rounded-inherit absolute inset-0 bg-black opacity-30 dark:bg-white dark:opacity-10"}),o.jsx("span",{className:"relative opacity-80 dark:opacity-60",children:c({defaultMessage:"View More",id:"QQSdHPJWXu"})})]})})]})});B7.displayName="EntityItemImage";const EIt=()=>{const[e,t]=d.useState(!1),n=d.useRef(null),r=d.useRef(!1),s=d.useRef({x:0,y:0}),a=d.useRef(null);d.useEffect(()=>{const c=u=>{s.current={x:u.clientX,y:u.clientY}};return document.addEventListener("mousemove",c,{passive:!0}),()=>document.removeEventListener("mousemove",c)},[]);const i=d.useCallback(()=>{if(!n.current)return;const c=n.current.getBoundingClientRect(),{x:u,y:f}=s.current,m=u>=c.left&&u<=c.right&&f>=c.top&&f<=c.bottom;r.current&&!m&&(t(!0),r.current=!1,a.current&&(clearInterval(a.current),a.current=null))},[]),l=d.useCallback(()=>{t(!1),r.current=!0,a.current=setInterval(i,50)},[i]);return d.useEffect(()=>()=>{a.current&&clearInterval(a.current)},[]),[e,n,l]},RW=d.memo(({images:e,className:t,badgeText:n,imageClassName:r})=>{const[s,a]=d.useState(0),[i,l]=d.useState(!1),c=d.useRef(null),u=4,[f,m,p]=EIt(),h=d.useCallback(()=>{i||(l(!0),c.current=setInterval(()=>{a(x=>x===e.length-1?0:x+1)},1e3))},[i,e.length]),g=d.useCallback(()=>{l(!1),c.current&&(clearInterval(c.current),c.current=null),a(0)},[]),y=d.useCallback(()=>{p(),h()},[p,h]);return d.useEffect(()=>{f&&g()},[f,g]),d.useEffect(()=>()=>{c.current&&(clearInterval(c.current),c.current=null)},[]),o.jsxs("div",{className:"relative w-full",children:[o.jsx("div",{ref:m,className:B("p-xs grid grid-cols-1 grid-rows-1 rounded bg-white",t),onMouseEnter:y,children:i?e.map((x,v)=>o.jsx(B7,{src:x,className:B("rounded-inherit col-start-1 row-start-1 bg-white !duration-100",{"opacity-0":v!==s,hidden:v!==s&&!i}),imageClassName:B(r,"!scale-100")},v)):o.jsx(B7,{src:e[s]??e[0]??"",className:"rounded-inherit col-start-1 row-start-1 bg-white",imageClassName:B(r,"!scale-100")})}),e.length>1&&o.jsx("div",{className:B("bottom-sm pointer-events-none absolute left-1/2 -translate-x-1/2 duration-150",{"translate-y-0 opacity-50":i,"translate-y-0.5 opacity-0":!i}),children:o.jsx(Rke,{images:e,activeIndex:s,maxDots:u,isAnimating:i})}),n&&o.jsx("div",{className:"gap-sm right-xs top-xs pointer-events-none absolute flex items-center",children:n&&o.jsx(F,{variant:"smallCaps",className:"bg-inverse/70 !text-inverse dark:bg-subtler dark:!text-foreground flex h-5 items-center whitespace-nowrap rounded-full px-1.5 !text-[10px] backdrop-blur-sm",children:n})})]})});RW.displayName="EntityItemImageFadeCarousel";const Rke=d.memo(({images:e,activeIndex:t,maxDots:n,isAnimating:r})=>o.jsx(ve.div,{layout:!0,layoutRoot:!0,className:"gap-xs flex items-center justify-center",children:o.jsx(Ye,{mode:"popLayout",children:e.map((s,a)=>{let i=0,l=0;return t<n?(i=Math.max(t-Math.floor(n/2),0),l=i+n):(l=Math.min(t+Math.floor(n/2),e.length-1),i=l-n),a>l||a<i?null:o.jsx(ve.div,{initial:{opacity:0,x:4},animate:{opacity:1,x:0,scale:a===t?1:.6},exit:{opacity:0,x:-4},transition:{duration:.15},layout:"position",children:o.jsx("div",{className:B("bg-dark h-1.5 rounded-full border border-white p-px duration-200",{"w-4":a===t,"w-1.5":a!==t}),children:o.jsx(ve.div,{className:"h-full rounded-full bg-white/50",initial:{width:"0",opacity:0},animate:{width:a===t&&r?"100%":"0",opacity:r?1:0},transition:{width:{duration:1},opacity:{duration:.15}}},s+"progress")})},a)})})}));Rke.displayName="AnimateDots";const MIt=25,zT=I.memo(({rating:e,className:t,reviewCount:n,size:r="xs",textVariant:s="small",reviewTextVariant:a="small",reviewTextColor:i="light",variant:l,showCount:c=!0,minReviewCount:u=MIt,showRatingLabel:f=!0,url:m,color:p="default"})=>{const h=Math.floor(e),g=e%1===0?0:1,y=5-h-g;if(e===0||!n||n<u)return null;const x=o.jsxs("div",{className:B("gap-xs flex items-center",t),children:[o.jsxs("div",{className:"flex items-center",children:[l==="truncated"?o.jsx(de,{icon:Ed,size:r,className:"text-super -translate-y-px"}):Array.from({length:h}).map((v,b)=>o.jsx(de,{icon:Ed,size:r,className:"text-super"},`rating-star-full-${b}`)),l!=="truncated"&&Array.from({length:g}).map((v,b)=>o.jsx(Pke,{fraction:e%1,size:r},`rating-star-half-${b}`)),l!=="truncated"&&Array.from({length:y}).map((v,b)=>o.jsx("span",{className:"inline-flex opacity-20",children:o.jsx(de,{icon:Ed,size:r,className:"text-super"},b)},`rating-star-empty-${b}`))]}),f&&o.jsx(F,{variant:s,className:"group-hover/link:text-super relative font-medium leading-none",color:p,children:o.jsx(di,{value:e,maximumFractionDigits:1})}),n&&n>0&&c&&o.jsxs(F,{variant:a,color:i,className:"group-hover/link:text-super relative leading-none",children:["(",o.jsx(di,{value:n}),")"]})]});return m?o.jsx(qe,{href:m,target:"_blank",className:"group/link",children:x}):x});zT.displayName="EntityItemRating";const Pke=I.memo(({fraction:e,size:t})=>o.jsxs("div",{className:"isolate inline-grid grid-cols-1 grid-rows-1",children:[o.jsx("span",{className:"text-foreground relative col-start-1 row-start-1 inline-flex items-center opacity-30",children:o.jsx("span",{className:"inline-flex",children:o.jsx(de,{icon:Ed,size:t})})}),o.jsx("span",{className:"relative col-start-1 row-start-1 inline-flex items-center",children:o.jsx("span",{className:"text-super inline-flex overflow-hidden",style:{width:e*100+"%"},children:o.jsx(de,{icon:Ed,size:t,className:"shrink-0"})})})]}));Pke.displayName="HalfStar";const Lke=I.memo(()=>o.jsx("svg",{className:"h-auto w-full",fill:"none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 4635.92 708.22",children:o.jsx("path",{d:"M4806.79,746.44a25,25,0,1,0,25,25A25,25,0,0,0,4806.79,746.44Zm0,46.08a21.08,21.08,0,1,1,21.08-21.07A21.09,21.09,0,0,1,4806.79,792.52Zm8.12-25.33c0-4.55-3.25-7.25-8-7.25h-8v22.77h3.94v-8.26h4.26l4.13,8.26h4.23L4811,773.6A6.59,6.59,0,0,0,4814.91,767.19Zm-8.16,3.78h-3.87v-7.55h3.87c2.63,0,4.23,1.33,4.23,3.77S4809.38,771,4806.75,771ZM569.17,605.31a97.95,97.95,0,1,1-97.94-97.94A97.94,97.94,0,0,1,569.17,605.31Zm552.18,0a97.95,97.95,0,1,1-97.95-97.94A97.95,97.95,0,0,1,1121.35,605.31ZM1099,304.09C998.87,235.77,878,195.89,747.32,195.89a619.47,619.47,0,0,0-351,108.2H195.89l90.17,98.12a274.9,274.9,0,0,0-89.89,203.66c0,152.19,123.38,275.57,275.57,275.57A274.54,274.54,0,0,0,659,808l88.34,96.12L835.66,808a274.54,274.54,0,0,0,187.23,73.4c152.19,0,275.68-123.38,275.68-275.57a274.9,274.9,0,0,0-89.89-203.66l90.17-98.12ZM471.74,792.36c-103,0-186.49-83.49-186.49-186.49s83.5-186.49,186.49-186.49,186.5,83.49,186.5,186.49S574.74,792.36,471.74,792.36ZM747.37,600.5c0-122.73-89.26-228-207-273.06a538.15,538.15,0,0,1,413.93,0C836.62,372.49,747.37,477.78,747.37,600.5Zm462,5.37c0,103-83.5,186.49-186.49,186.49s-186.5-83.49-186.5-186.49,83.5-186.49,186.5-186.49S1209.38,502.87,1209.38,605.87Zm654.11-173.45h43.37v85.84h-50.75c-39.09,0-64.17,19.18-64.17,58.28V792.36h-92.78V432.42h92.78V492.9C1800.05,450.12,1829.56,432.42,1863.49,432.42Zm186.35-85.59a56.06,56.06,0,0,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S2049.84,315.11,2049.84,346.83Zm-102.33,85.59H2040V792.36h-92.53Zm347.35-6.08a179,179,0,0,0-109.22,36.52V432.42h-92.52V898h92.52V761.92a179,179,0,0,0,109.22,36.52c102.76,0,186-83.3,186-186.05S2397.62,426.34,2294.86,426.34Zm-8.15,287.12a101.07,101.07,0,1,1,101.07-101.07A101.07,101.07,0,0,1,2286.71,713.46Zm1890.57-34.8c0,69.4-59.54,119.78-141.57,119.78-85.12,0-144.57-51.57-144.57-125.42v-2h90.54v2c0,30.82,22,51.53,54.78,51.53,31.42,0,52.53-15.33,52.53-38.14,0-21.61-14.61-33.69-53.89-44.56l-51.71-14.1c-54.34-14.71-85.5-50.12-85.5-97.14,0-60.42,57-104.27,135.57-104.27,79.3,0,132.58,43.88,132.58,109.21v2.05h-85.3v-2.05c0-22.18-20.77-39.55-47.28-39.55-27.84,0-47.28,12.78-47.28,31.09,0,18.76,13.84,29.66,49.36,38.91l54,14.81C4162.05,600.16,4177.28,644.7,4177.28,678.66Zm-1368-215.8A179,179,0,0,0,2700,426.34c-102.76,0-186.05,83.3-186.05,186.05S2597.26,798.44,2700,798.44a179,179,0,0,0,109.22-36.52v30.44h92.52V432.42h-92.52Zm0,149.54a101.07,101.07,0,1,1-101.07-101.08A101.08,101.08,0,0,1,2809.24,612.4ZM3236,462.86a179,179,0,0,0-109.22-36.52c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05A179,179,0,0,0,3236,761.92v30.44h92.53V304.3H3236Zm-101.06,250.6A101.07,101.07,0,1,1,3236,612.39,101.07,101.07,0,0,1,3134.89,713.46Zm623.34-281h92.53V792.36h-92.53Zm102.33-85.59a56.06,56.06,0,1,1-112.12,0c0-31.72,24.34-56.8,56.06-56.8S3860.56,315.11,3860.56,346.83Zm530.71,79.51c-102.75,0-186.05,83.3-186.05,186.05s83.3,186.05,186.05,186.05,186-83.3,186-186.05S4494,426.34,4391.27,426.34Zm0,287.12a101.07,101.07,0,1,1,101.07-101.07A101.06,101.06,0,0,1,4391.27,713.46ZM1744.55,386.87H1613.14V792.36h-92.22V386.87H1389.51V304.3h355Zm1877.76,45.55h97.21L3595.31,792.36H3484L3360.47,432.42h97.2L3540,693.79Zm1162.19,0h43.37v85.84h-50.75c-39.09,0-64.18,19.18-64.18,58.28V792.36h-92.77V432.42h92.77V492.9C4721.06,450.12,4750.57,432.42,4784.5,432.42Z",transform:"translate(-195.89 -195.89)",fill:"currentColor"})}));Lke.displayName="TripadvisorLogo";const Oke=I.memo(()=>o.jsxs("svg",{className:"h-auto w-full",viewBox:"0 0 1000 385",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M806.495 227.151L822.764 223.392C823.106 223.313 823.671 223.183 824.361 222.96C828.85 221.753 832.697 218.849 835.091 214.862C837.485 210.874 838.241 206.113 837.198 201.582C837.175 201.482 837.153 201.388 837.13 201.289C836.596 199.117 835.66 197.065 834.37 195.239C832.547 192.926 830.291 190.991 827.728 189.542C824.711 187.82 821.553 186.358 818.289 185.171L800.452 178.659C790.441 174.937 780.432 171.309 770.328 167.771C763.776 165.439 758.224 163.393 753.4 161.901C752.49 161.62 751.485 161.34 750.669 161.058C744.837 159.271 740.739 158.53 737.272 158.505C734.956 158.42 732.649 158.841 730.511 159.738C728.283 160.699 726.282 162.119 724.639 163.906C723.822 164.835 723.054 165.806 722.337 166.815C721.665 167.843 721.049 168.907 720.491 170.001C719.876 171.174 719.348 172.391 718.911 173.642C715.6 183.428 713.951 193.7 714.032 204.029C714.091 213.368 714.342 225.354 719.475 233.479C720.712 235.564 722.372 237.366 724.348 238.769C728.004 241.294 731.7 241.627 735.544 241.904C741.289 242.316 746.855 240.905 752.403 239.623L806.45 227.135L806.495 227.151Z",fill:"currentColor"}),o.jsx("path",{d:"M987.995 140.779C983.553 131.457 977.581 122.947 970.328 115.601C969.39 114.669 968.385 113.806 967.321 113.02C966.339 112.283 965.318 111.598 964.264 110.967C963.18 110.373 962.065 109.837 960.924 109.362C958.668 108.476 956.25 108.077 953.829 108.19C951.513 108.322 949.254 108.956 947.207 110.049C944.105 111.591 940.748 114.07 936.283 118.221C935.666 118.834 934.891 119.525 934.195 120.177C930.511 123.641 926.413 127.911 921.536 132.883C914.002 140.497 906.583 148.152 899.21 155.89L886.017 169.571C883.601 172.071 881.401 174.771 879.441 177.643C877.771 180.07 876.59 182.799 875.963 185.678C875.6 187.886 875.653 190.142 876.12 192.329C876.143 192.429 876.164 192.523 876.187 192.622C877.229 197.154 879.988 201.103 883.883 203.637C887.778 206.172 892.505 207.094 897.068 206.211C897.791 206.106 898.352 205.982 898.693 205.898L969.033 189.646C974.576 188.365 980.202 187.191 985.182 184.3C988.522 182.363 991.699 180.443 993.878 176.569C995.043 174.441 995.748 172.092 995.948 169.675C997.027 160.089 992.021 149.202 987.995 140.779Z",fill:"currentColor"}),o.jsx("path",{d:"M862.1 170.358C867.197 163.955 867.184 154.41 867.64 146.607C869.174 120.536 870.79 94.4619 872.07 68.3766C872.56 58.4962 873.624 48.7498 873.036 38.7944C872.552 30.5816 872.492 21.1521 867.307 14.4122C858.154 2.52688 838.636 3.50371 825.319 5.34732C821.239 5.91358 817.153 6.6749 813.099 7.64807C809.045 8.62124 805.033 9.6841 801.108 10.9412C788.329 15.127 770.365 22.8103 767.323 37.5341C765.608 45.858 769.672 54.3727 772.824 61.9691C776.645 71.1774 781.865 79.4721 786.622 88.1401C799.198 111.024 812.008 133.765 824.782 156.53C828.597 163.326 832.755 171.933 840.135 175.454C840.623 175.667 841.121 175.856 841.628 176.018C844.937 177.272 848.545 177.513 851.993 176.712C852.201 176.664 852.405 176.617 852.608 176.57C855.792 175.704 858.675 173.973 860.937 171.568C861.345 171.185 861.734 170.782 862.1 170.358Z",fill:"currentColor"}),o.jsx("path",{d:"M855.997 240.155C854.008 237.355 851.184 235.258 847.931 234.162C844.677 233.065 841.16 233.027 837.881 234.051C837.111 234.307 836.361 234.618 835.636 234.983C834.515 235.554 833.445 236.221 832.439 236.976C829.507 239.148 827.039 241.97 824.791 244.8C824.221 245.522 823.7 246.483 823.022 247.1L811.708 262.663C805.295 271.382 798.971 280.123 792.7 289.003C788.608 294.735 785.068 299.576 782.273 303.859C781.743 304.666 781.193 305.567 780.689 306.284C777.338 311.469 775.441 315.252 774.467 318.622C773.735 320.862 773.503 323.234 773.788 325.572C774.1 328.008 774.92 330.35 776.195 332.447C776.873 333.499 777.604 334.516 778.385 335.495C779.196 336.436 780.058 337.332 780.966 338.18C781.936 339.105 782.973 339.957 784.07 340.729C791.879 346.162 800.428 350.066 809.421 353.083C816.904 355.567 824.682 357.053 832.555 357.504C833.894 357.572 835.237 357.543 836.572 357.417C837.809 357.309 839.04 357.136 840.26 356.9C841.479 356.615 842.681 356.266 843.863 355.853C846.162 354.993 848.255 353.66 850.008 351.94C851.667 350.279 852.944 348.276 853.749 346.07C855.057 342.81 855.917 338.671 856.483 332.526C856.532 331.652 856.657 330.604 856.744 329.644C857.19 324.545 857.395 318.556 857.723 311.514C858.276 300.685 858.71 289.903 859.053 279.09C859.053 279.09 859.782 259.875 859.78 259.865C859.946 255.437 859.81 250.53 858.582 246.121C858.042 244.008 857.17 241.994 855.997 240.155V240.155Z",fill:"currentColor"}),o.jsx("path",{d:"M983.707 270.24C981.346 267.651 978 265.069 972.722 261.878C971.961 261.453 971.068 260.886 970.244 260.392C965.85 257.749 960.557 254.969 954.374 251.611C944.876 246.396 935.372 241.312 925.778 236.271L908.825 227.28C907.946 227.024 907.053 226.389 906.225 225.989C902.968 224.432 899.516 222.978 895.932 222.311C894.697 222.074 893.444 221.944 892.186 221.923C891.375 221.913 890.565 221.962 889.761 222.07C886.371 222.595 883.234 224.178 880.795 226.591C878.356 229.005 876.74 232.128 876.178 235.513C875.919 237.667 875.998 239.847 876.411 241.976C877.24 246.487 879.254 250.95 881.338 254.858L890.391 271.824C895.428 281.394 900.526 290.907 905.752 300.391C909.123 306.578 911.929 311.871 914.557 316.26C915.055 317.085 915.62 317.974 916.046 318.738C919.245 324.013 921.815 327.333 924.421 329.715C926.109 331.345 928.132 332.586 930.349 333.351C932.68 334.124 935.146 334.398 937.59 334.155C938.832 334.008 940.066 333.795 941.286 333.516C942.488 333.193 943.672 332.808 944.833 332.362C946.087 331.889 947.305 331.327 948.478 330.678C955.36 326.82 961.703 322.07 967.345 316.552C974.112 309.894 980.093 302.633 984.745 294.321C985.392 293.145 985.952 291.924 986.422 290.667C986.86 289.504 987.24 288.319 987.558 287.118C987.834 285.896 988.045 284.662 988.191 283.418C988.422 280.977 988.138 278.514 987.358 276.19C986.591 273.963 985.345 271.932 983.707 270.24V270.24Z",fill:"currentColor"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M400.03 105.19C400.03 91.2089 411.42 79.7877 425.167 79.7877C438.717 79.7877 449.714 91.2089 450.303 105.387V303.682C450.303 317.663 438.913 329.084 425.167 329.084C411.027 329.084 400.03 317.663 400.03 303.682V105.19ZM376.657 227.672C376.461 231.61 375.479 238.896 370.373 244.213C364.874 249.923 357.412 251.302 353.092 251.302C335.123 251.4 317.155 251.45 299.187 251.499C281.218 251.548 263.248 251.597 245.279 251.696C246.85 256.619 249.992 264.101 257.062 270.994C261.382 275.129 265.506 277.492 267.273 278.476C269.434 279.855 276.896 283.793 286.126 283.793C295.945 283.793 304.586 280.642 313.03 276.31L313.736 275.945C319.604 272.904 325.66 269.766 332.079 268.631C338.363 267.646 345.04 268.827 349.949 273.16C355.841 278.279 358.197 285.762 356.037 293.442C353.484 302.106 346.218 309.589 338.559 314.118C334.239 316.678 329.526 318.844 324.813 320.617C318.725 322.783 312.441 324.358 306.157 325.343C299.872 326.327 293.392 326.721 286.911 326.524H286.911C283.769 326.524 280.431 326.524 277.092 326.13C273.558 325.736 270.023 324.949 266.684 324.161C261.186 322.98 256.08 321.207 250.974 318.844C246.064 316.678 241.155 313.921 236.638 310.771C232.121 307.62 227.997 303.879 224.07 299.94C220.338 296.002 216.804 291.67 213.662 286.944C203.057 270.797 198.147 250.908 199.129 231.61C199.915 212.706 206.199 193.802 217.589 178.443C218.823 176.519 220.247 174.883 221.596 173.333C222.18 172.663 222.75 172.008 223.284 171.354C237.35 154.158 256.142 148.716 263.894 146.471L264.328 146.345C286.519 140.044 304.978 144.179 312.441 146.345C316.172 147.33 337.185 153.828 353.484 171.354C354.27 172.141 356.43 174.701 359.179 178.443C369.505 192.508 373.066 205.605 374.272 210.042L374.301 210.146C375.479 214.478 376.657 220.386 376.657 227.672ZM261.382 195.181C249.992 204.436 246.85 216.251 246.064 219.992H331.686C330.901 216.448 327.562 204.436 316.172 195.181C304.586 185.925 292.41 185.335 288.679 185.335C284.948 185.335 272.772 185.925 261.382 195.181ZM586.98 142.998C564.593 142.998 544.169 153.041 529.637 169.385V168.794C529.048 155.6 518.05 144.967 504.696 144.967C490.753 144.967 479.56 156.191 479.56 170.172V359.409C479.56 373.391 490.753 384.615 504.696 384.615C518.64 384.615 529.833 373.391 529.833 359.409V352.123V300.334C544.365 316.482 564.593 326.721 587.176 326.721C632.147 326.721 668.674 285.959 668.674 235.155C668.478 184.35 631.951 142.998 586.98 142.998ZM575.983 285.566C550.453 285.566 529.637 263.314 529.637 235.549C529.637 207.586 550.257 185.335 575.983 185.335C601.512 185.335 622.328 207.586 622.328 235.549C622.132 263.314 601.512 285.566 575.983 285.566ZM161.425 248.348L153.177 266.464C149.446 274.341 145.715 282.415 142.18 290.488C141.052 292.966 139.916 295.494 138.764 298.057C123.068 332.981 104.44 374.43 63.8242 383.236C44.1861 387.568 14.5327 381.661 3.5354 363.15C-7.4619 344.443 8.83767 322.979 29.8504 327.902C33.1646 328.641 36.4235 330.266 39.7101 331.904C45.187 334.635 50.7406 337.404 56.7545 336.173C62.4495 335.188 65.9844 331.053 70.5011 325.736C76.7853 318.45 79.5346 310.771 80.7129 306.242C80.6147 306.045 80.5165 305.798 80.4183 305.552C80.3201 305.306 80.2219 305.06 80.1237 304.863C75.0117 295.326 70.5473 286.8 66.8178 279.677C64.3868 275.034 62.2681 270.987 60.4857 267.646C56.8287 260.714 54.0662 255.473 51.918 251.398C45.6449 239.497 44.609 237.532 41.8296 232.398C35.7418 220.78 29.2612 209.555 22.5843 198.331C15.3182 186.122 7.85577 172.535 13.9436 158.16C18.8531 146.542 31.4214 140.634 43.4006 144.376C56.0403 148.212 61.6377 160.239 66.8724 171.487C67.8188 173.52 68.7534 175.528 69.7156 177.458C78.16 194.196 86.4079 210.934 94.6559 227.672C95.382 229.336 96.4917 231.605 97.8402 234.362C99.0447 236.824 100.44 239.676 101.922 242.834C102.697 244.475 103.434 246.002 104.101 247.382C104.954 249.149 105.691 250.676 106.242 251.892C110.072 242.342 113.95 232.841 117.829 223.34C121.707 213.839 125.586 204.337 129.415 194.787C129.522 194.253 130.436 192.216 131.813 189.145C132.977 186.549 134.473 183.215 136.092 179.427C136.64 178.133 137.191 176.79 137.755 175.417C142.856 162.995 148.988 148.06 162.604 143.982C172.423 141.028 183.42 144.967 189.115 153.237C192.061 157.372 193.239 162.098 193.435 166.824C193.593 177.275 188.545 188.491 184.212 198.115C183.157 200.459 182.144 202.708 181.26 204.829C181.219 204.91 181.048 205.296 180.739 205.988C179.541 208.679 176.278 216.005 170.655 228.066C168.626 232.389 166.679 236.713 164.707 241.09C163.626 243.491 162.538 245.907 161.425 248.348Z",fill:"currentColor"}),o.jsx("path",{d:"M687.728 310.153H689.549C690.447 310.153 691.167 309.923 691.706 309.462C692.256 308.99 692.532 308.395 692.532 307.676C692.532 306.833 692.29 306.232 691.807 305.872C691.324 305.502 690.56 305.316 689.515 305.316H687.728V310.153ZM695.043 307.608C695.043 308.507 694.801 309.305 694.318 310.002C693.846 310.687 693.178 311.198 692.313 311.535L696.324 318.193H693.492L690.004 312.226H687.728V318.193H685.234V303.176H689.633C691.498 303.176 692.863 303.541 693.728 304.271C694.605 305.002 695.043 306.114 695.043 307.608ZM677.228 310.676C677.228 308.429 677.79 306.322 678.914 304.356C680.037 302.389 681.582 300.839 683.549 299.704C685.515 298.569 687.633 298.002 689.902 298.002C692.15 298.002 694.256 298.564 696.223 299.687C698.189 300.811 699.74 302.356 700.874 304.322C702.009 306.288 702.577 308.406 702.577 310.676C702.577 312.889 702.032 314.968 700.942 316.912C699.852 318.856 698.324 320.412 696.358 321.58C694.391 322.749 692.24 323.333 689.902 323.333C687.577 323.333 685.431 322.754 683.464 321.597C681.498 320.429 679.964 318.872 678.863 316.929C677.773 314.985 677.228 312.901 677.228 310.676ZM678.998 310.676C678.998 312.62 679.487 314.44 680.464 316.136C681.442 317.822 682.773 319.153 684.459 320.131C686.155 321.097 687.97 321.58 689.902 321.58C691.858 321.58 693.672 321.092 695.346 320.114C697.02 319.136 698.346 317.816 699.324 316.153C700.313 314.479 700.807 312.653 700.807 310.676C700.807 308.721 700.318 306.906 699.341 305.232C698.363 303.558 697.037 302.232 695.363 301.255C693.7 300.266 691.88 299.771 689.902 299.771C687.947 299.771 686.133 300.26 684.459 301.238C682.785 302.215 681.453 303.541 680.464 305.215C679.487 306.878 678.998 308.698 678.998 310.676Z",fill:"currentColor"})]}));Oke.displayName="YelpLogo";const kIt=({className:e})=>o.jsx(F,{className:B("w-10",e),children:o.jsx(Oke,{})}),TIt=({className:e})=>o.jsx(F,{className:B("w-[70px]",e),children:o.jsx(Lke,{})}),Dke=e=>{const t=d.useMemo(()=>Qr(e).with(ym.string.includes("yelp.com"),()=>kIt).with(ym.string.includes("tripadvisor.com"),()=>TIt).otherwise(()=>null),[e]);return d.useMemo(()=>({SearchClientLogo:t}),[t])},Fke=({entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s,reason:a})=>{const i=ot(),l=["place_result_reviews",`${n}_${s}`],{refetch:c,data:u,isFetching:f,error:m}=Ue({queryKey:l,enabled:!1,queryFn:async()=>{let p={summary:"",review_quality_score:0,pros:[],cons:[],key_features:[],review_search_results:[]},h="PENDING",g="";try{await re.SSE("/rest/sse/places_review_summary_bulk",a,{params:{places:[{entity_id:e,entity_name:t,data_source:n,entry_uuid:r,url:s}]},handlers:{message:y=>{y.blocks?.[0]?.review_summary_block&&(p={...p,...y.blocks[0].review_summary_block}),h=y.status??"FAILED",g=y.id??"",i.setQueryData(l,{review_summary:p,status:h,id:g})}}})}catch{}return{review_summary:p,status:h,id:g}}});return d.useMemo(()=>({generateReviewSummaryForPlace:c,reviewSummary:u?.review_summary,isFetching:f,error:m}),[u?.review_summary,m,c,f])};function PW(){const{locale:e}=Z(),t=new Intl.Locale(e),{value:n,loading:r}=Qs({flag:"canonical-hotel-pages-enabled",defaultValue:!1,extraAttributes:{cfLanguage:t.language,appApiVersion:pl}});return d.useMemo(()=>({initialized:!r,value:n}),[n,r])}function Uke({reason:e}){const{value:t}=PW(),{locale:n}=Z(),r=new Intl.Locale(n),{uuid:s}=ege({reason:e}),{value:a,loading:i}=Qs({flag:"can-book-hotels",defaultValue:!1,extraAttributes:{cfLanguage:r.language,appApiVersion:pl,dependent_flag:"canonical-hotel-pages-enabled",variation_served:t,orgUUID:s??""}});return d.useMemo(()=>({initialized:!i,value:a}),[i,a])}const NIt=ew("%b %d"),jIt=ew("%b"),AIt=ew("%Y");function IIt(e){return e?(e=new Date(e),(J_(e)<e?NIt:cl(e)<e?jIt:AIt)(e)):""}const $7=(e,t,n)=>{if(!e&&(e!==0||!n?.renderZero))return"";const s=t&&/^[A-Z]{3}$/.test(t)?t:void 0,a=e%1===0&&!n?.alwaysShowMinor||n?.roundToMajor?0:2;let i=n?.roundToMajor?0:2;if(e>0&&e<1){const c=Math.abs(e).toExponential();i=Math.abs(parseInt(c.split("e")[1]))+1}const l=Intl.NumberFormat(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:1,maximumFractionDigits:1,currencyDisplay:n?.currencyDisplay??"narrowSymbol"});return n?.truncate&&e>=1e6?`${l.format(e/1e6)}M`:n?.truncate&&e>=1e3?`${l.format(e/1e3)}k`:e.toLocaleString(void 0,{style:s?"currency":"decimal",currency:s,minimumFractionDigits:a,maximumFractionDigits:i,currencyDisplay:n?.currencyDisplay??"narrowSymbol"})};function RIt(e,t){const n=e>1?0:2;return e.toLocaleString(void 0,{style:"percent",minimumFractionDigits:0,maximumFractionDigits:n})}function QM(e){return new Date(`${e}T00:00:00`)}const nse={month:"long",day:"2-digit",year:"numeric"},rse={hour:"numeric"};function jcn(e,t="en-US"){const n=e.check_in_time?new Date(`${e.check_in_date}T${e.check_in_time}`):QM(e.check_in_date),r=e.check_out_time?new Date(`${e.check_out_date}T${e.check_out_time}`):QM(e.check_out_date);return{checkInDateString:n.toLocaleDateString(t,nse),checkOutDateString:r.toLocaleDateString(t,nse),checkInTimeString:e.check_in_time?n.toLocaleTimeString(t,rse):null,checkOutTimeString:e.check_out_time?r.toLocaleTimeString(t,rse):null,checkInDate:n,checkOutDate:r}}function Bke(e,t){const n=[],r=new Date(e);for(;r<=t;)n.push(new Date(r)),r.setDate(r.getDate()+1);return n.length}function Acn(e,t,n){const r=Bke(e,t)-1,s=n.price.pro_rate_discount?.base_price_after_discount;return{dailyBaseRate:n.price.base_price/r,dailyDiscountedBaseRate:s?s/r:null,currencyCode:n.price.currency_code,numNights:r}}const PIt=({amount:e,currency:t,targetCurrency:n,exchangeRates:r,options:s})=>{const a=sse(e,t,s),i=e/1e6,l=r?.find(({source_currency:u,target_currency:f})=>u===t&&f===n);if(!l||n===t)return{original:a,originalAmount:i};const c=sse(e*l.conversion_factor,n,s);return{original:a,originalAmount:i,adjusted:c,adjustedAmount:e*l.conversion_factor/1e6}},sse=(e,t,n)=>$7(e!==null?e/1e6:e,t,n);function Icn(e){const t=new Date;return t.setDate(t.getDate()+e),t}function LIt(e,t,n){if(!e)return null;const r=e.split(t);return r.length<=n?r:[r.slice(0,-1).join(t),...r.slice(-1)]}function _y(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${r}`}const OIt=async({hotelSlug:e,headers:t={},reason:n})=>{const{error:r,data:s}=await re.GET("/rest/travel/hotels/{slug}",n,{params:{path:{slug:e}},headers:t,timeoutMs:Ht.HIGH});if(r)throw new we("API_CLIENTS_ERROR",{cause:r});return s},Rcn=async({filters:e,reason:t})=>{const n=await re.POST("/rest/travel/hotels/search-widgets",t,{body:e,timeoutMs:Ht.NONE});if(n.data)return{hotels:n.data.hotels,map_item:n.data.map_item};throw new Error("No hotel results returned",{cause:n.error})},Pcn=async({hotelTripadvisorId:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:i}=t,l=await re.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:[e]},stay_info:{check_in_date:_y(r),check_out_date:_y(s),guests:{adults:a,children:i}}},timeoutMs:Ht.HIGH,retries:2});return l.data?{availability:l.data.results?.find(c=>c.tripadvisor_id===e),currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers?.find(c=>c.tripadvisor_id===e),perplexityProRateInfo:l.data.perplexity_pro_rate_info}:null},DIt=async({tripadvisorIds:e,searchPayload:t,reason:n})=>{const{checkIn:r,checkOut:s,numAdults:a,numChildren:i}=t,l=await re.POST("/rest/travel/hotels/search-availability",n,{body:{currency:"USD",filter:{tripadvisor_ids:e},stay_info:{check_in_date:_y(r),check_out_date:_y(s),guests:{adults:a,children:i}}},timeoutMs:Ht.HIGH,retries:2});return l.data?{availability:l.data.results,currencyExchangeRates:l.data.currency_exchange_rates,otaOffers:l.data.ota_hotel_offers}:null},Lcn=async({searchPayload:e,rate:t,paymentInfo:n,discountLabel:r,isProRate:s,reason:a})=>{const{checkIn:i,checkOut:l,numAdults:c,numChildren:u}=e,f=LIt(n.name," ",1),m=await re.POST("/rest/travel/hotels/reservations",a,{timeoutMs:Ht.NONE,body:{hotel_booking:{check_in_date:_y(i),check_out_date:_y(l),guests:{number_of_adults:c,number_of_children:u||null,primary:{address:{street:[n.address.line1,n.address.line2].filter(p=>!!p).join(" "),city:n.address.city,state:n.address.state,country_code:n.address.country,postal_code:n.address.postal_code},email:n.email,given_name:f?.[0]??"",surname:f?.[1]??"",telephone_number:n.phone}},payment:{stripe_payment_method_id:n.stripePaymentMethodId,stripe_customer_id:n.stripeCustomerId},selfbook_rate:{...t,is_pro_rate:s},customer_loyalty_code:n.customerLoyaltyCode},discount_label:r}});if(m.data)return m.data.hotel_booking;throw new Error("Booking hotel room failed",{cause:m.error})},Ocn=async({limit:e,offset:t,isCanceled:n,beforeDate:r,afterDate:s,dateOrder:a="desc",headers:i,reason:l})=>{const c=await re.GET("/rest/travel/hotels/user/reservations",l,{params:{query:{limit:e,offset:t,is_canceled:n,before_date:r,after_date:s,date_order_by:a}},headers:i,timeoutMs:Ht.MEDIUM});return c.data?c.data:null},Dcn=async({bookingId:e,reason:t})=>{const n=await re.DELETE("/rest/travel/hotels/reservations/{reservation_id}",t,{params:{path:{reservation_id:e}},timeoutMs:Ht.HIGH});if(!n.data)throw Error("Failed to cancel booking",{cause:n.error})},Fcn=async({amount:e,currency:t,paymentMethodId:n,reason:r})=>{const s=await re.GET("/rest/travel/hotels/user/discount-offer",r,{params:{query:{base_amount_micros:e,currency_code:t,payment_method_id:n}},timeoutMs:Ht.HIGH});return s.data?s.data:null},Ucn=async({reason:e})=>{const t=await re.GET("/rest/stripe/get-customer-billing-info",e);return t.data?t.data:null},FIt=({hotelIds:e,availabilitySearchPayload:t,priceConstraint:n,reason:r,enabled:s=!0})=>{const a=Ue({queryKey:["hotelAvailabilities",e,t],queryFn:async()=>{if(t&&e.length>0){const c=await DIt({tripadvisorIds:e,searchPayload:t,reason:r});if(c)return c;throw new Error("Failed to fetch availabilities")}return null},placeholderData:Pu,enabled:s&&!!t&&e.length>0}),i=n?.max_price,l=d.useMemo(()=>{if(!t||!a.data?.availability&&!a.data?.otaOffers)return;const c=a.data.currencyExchangeRates,u=Bke(t.checkIn,t.checkOut)-1;if(u<=0)return;const f={};a.data.availability?.forEach(g=>{const y=g.tripadvisor_id,x=g.rooms?.reduce((w,C)=>{const S=C.rates?.slice()??[];S.sort((k,M)=>k.price.base_price-M.price.base_price);const E=S[0];return E?w?E.price.base_price<w.price.base_price?E:w:E:w},null);if(!x)return;const v=PIt({amount:x.price.base_price,currency:x.price.currency_code,targetCurrency:"USD",exchangeRates:c,options:{roundToMajor:!0}}),b=v.adjustedAmount??v.originalAmount,_=f[y];(!_||_>b)&&(f[y]=b)});const m={};a.data.otaOffers?.forEach(g=>{const y=g.tripadvisor_id,x=g.offers.map(({price:v})=>v);if(x.sort(),Js(x)){const b=x[0]*u;m[y]=b}});const p={},h=new Set([...Object.keys(f),...Object.keys(m)]);for(const g of h){const y=f[g],x=m[g],v=y!==void 0?y/u:void 0,b=x!==void 0?x/u:void 0;if(v!==void 0&&(i==null||v<=i)&&y!==void 0){p[g]={price:y,source:"selfbook"};continue}b!==void 0&&(i==null||b<=i)&&x!==void 0&&(p[g]={price:x,source:"ota"})}return Object.entries(p).reduce((g,[y,x])=>(g[y]={total:$7(x.price,"USD",{roundToMajor:!0,renderZero:!0}),daily:$7(x.price/u,"USD",{roundToMajor:!0,renderZero:!0}),source:x.source},g),{})},[t,a.data,i]);return d.useMemo(()=>({lowestRatesByHotel:l,isFetching:a.isFetching,isError:a.isError,refetch:a.refetch}),[l,a.isFetching,a.isError,a.refetch])},UIt=(e,t)=>{const{value:n,loading:r}=jt({flag:"get-opentable-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])};function BIt({reason:e}){const{locale:t}=Z(),n=new Intl.Locale(t),{uuid:r}=ege({reason:e}),{variation:s,loading:a}=UIt(!1,{language:n.language,country:n.region??"",appApiVersion:pl,orgUUID:r??""});return d.useMemo(()=>({initialized:!a,value:s}),[a,s])}const $It=({place:e,entryUUID:t,contextUUID:n,mode:r,reason:s,hotelRate:a})=>{const{$t:i}=Z(),{SearchClientLogo:l}=Dke(e.url),{trackEvent:c}=Te(),{openStackedModal:u}=xt(),f=PW(),m=Uke({reason:s}),p=BIt({reason:s}),{generateReviewSummaryForPlace:h,reviewSummary:g,isFetching:y}=Fke({entity_id:String(e.id),entity_name:e.name,entry_uuid:t??"",data_source:e.client,url:e.url,reason:s});d.useEffect(()=>{e.review_summary||g||h()},[e.review_summary,g]);const x="user_filters"in e?e.user_filters:void 0,v=d.useMemo(()=>{if(x?.start_date&&x?.end_date&&x?.num_guests)return{checkIn:QM(x.start_date),checkOut:QM(x.end_date),numAdults:x.num_guests,numChildren:0}},[x]),{lowestRatesByHotel:b}=FIt({hotelIds:[e.id],availabilitySearchPayload:v,priceConstraint:x?.price_constraint,reason:s,enabled:e.entity_type==="hotel"}),_=d.useMemo(()=>e.review_summary??g,[e.review_summary,g]),{hasProsOrCons:w,isLoadingProsCons:C}=d.useMemo(()=>{const N=_?.pros_detailed?.length??0,L=_?.cons_detailed?.length??0;return{hasProsOrCons:N||L||y,isLoadingProsCons:y&&!_?.summary?.length&&(N+L<3||!N||!L)}},[_?.pros_detailed,_?.cons_detailed,_?.summary?.length,y]),S=!!_?.summary,E=_?.key_features&&_.key_features.length>0,k=!S&&y,M=d.useCallback(()=>{const N=e.entity_url??e.url;return f.initialized&&f.value?e.canonical_page_path??N:N},[f,e.canonical_page_path,e.entity_url,e.url]),j=d.useCallback(()=>{const N=M();if(m.initialized&&m.value&&e.canonical_page_path&&e.entity_type==="hotel"&&"user_filters"in e&&e.user_filters){const L=new URLSearchParams;if(e.user_filters.start_date&&L.set("check-in",e.user_filters.start_date),e.user_filters.end_date&&L.set("check-out",e.user_filters.end_date),e.user_filters.num_guests&&L.set("adults",String(e.user_filters.num_guests)),L.toString())return`${N}?${L.toString()}`}return N},[M,m,e]),R=i({defaultMessage:"See Prices",description:"button label",id:"AOhh9Wa3/S"}),O=i({defaultMessage:"Reserve",description:"button label",id:"Rl2ClHM49w"}),D=d.useCallback(N=>{c("place button clicked",{answerMode:r,entryUUID:t,contextUUID:n,itemID:N})},[n,t,r,c]),P=d.useCallback(N=>{window.open(N,"_blank")},[]),A=d.useMemo(()=>{if(m.initialized&&m.value&&e.canonical_page_path&&e.entity_type==="hotel"){const N=a??b?.[e.id],L=j();return N?{ctaText:i({defaultMessage:"From {price} per night",id:"fkXL6pzn0I",description:"Button text indicating the starting price per night for a hotel"},{price:N.daily}),ctaURL:L,onClick:()=>{P(L)},ctaSubtitle:void 0,icon:HR}:{ctaText:R,ctaURL:L,ctaSubtitle:void 0,onClick:()=>{P(L)},icon:HR}}else if(e.booking_urls){const N=e.booking_urls[0];if(N?.booking_type==="HOTEL"&&m.value)return{ctaText:R,ctaURL:N.url,onClick:()=>{P(N.url)},icon:VLe};if(N?.booking_type==="RESTAURANT"){const L=p.initialized&&p.value&&N.provider_entity_id,U=N.booking_provider;return{ctaText:O,ctaURL:N.url,icon:KS,onClick:L?()=>{c("restaurant reservation CTA clicked",{booking_provider:U}),u("restaurantBookingModal",{restaurantId:N.provider_entity_id,provider:U})}:()=>{P(N.url)}}}}},[a,m,p,e,j,O,R,u,i,b,c,P]),T=d.useCallback(N=>{N.stopPropagation()},[]);return{generatedReviewSummary:_,hasProsOrCons:!!w,isLoadingProsCons:C,hasReviewSummary:S,hasKeyFeatures:!!E,reviewSummaryLoading:k,getEntityUrl:M,getEntityUrlWithParams:j,bookingCTAProperties:A,SearchClientLogo:l,handleClientLogoClick:T,trackPlaceButtonClicked:D}},$ke=Dt("ImageCarouselContext",{images:[],onImageClick:()=>{},handleNext:()=>{},handlePrevious:()=>{},currentIndex:0,showControls:!1,direction:1,totalVisibleCarousels:0,setTotalVisibleCarousels:()=>{},fillMode:"cover",useCurrentIndex:()=>0}),V7=I.memo(({images:e,showControls:t,onImageClick:n,children:r,fillMode:s="cover"})=>{const[a,i]=d.useState(0),[l,c]=d.useState(1),[u,f]=d.useState(0);d.useEffect(()=>{i(0)},[e.length]);const m=d.useCallback(()=>{i(b=>b+1>=e.length?0:b+1),c(1)},[i,e.length]),p=d.useCallback(()=>{i(b=>b==0?e.length-1:b-1),c(-1)},[i,e.length]),h=d.useCallback(b=>{f(b),y(Date.now())},[]),[g,y]=d.useState(),x=d.useCallback(b=>!b.current||g===void 0?-1:VIt(b.current),[g]),v=d.useMemo(()=>({images:e,onImageClick:n,handleNext:m,handlePrevious:p,currentIndex:a,showControls:t,direction:l,totalVisibleCarousels:u,setTotalVisibleCarousels:h,fillMode:s,useCurrentIndex:x}),[e,a,t,l,u,m,p,h,n,s,x]);return o.jsx($ke.Provider,{value:v,children:o.jsx("div",{"data-paged-carousel":"parent",children:r})})});V7.displayName="ImagePagedCarouselProvider";const VIt=e=>{const t=e.closest('[data-paged-carousel="parent"]');if(!t)return-1;const n=t.querySelectorAll('[data-paged-carousel="child"]');return Array.from(n).filter(s=>{const a=s.getBoundingClientRect();return a.width>0&&a.height>0}).indexOf(e)},L2=I.memo(({className:e})=>{const{images:t,onImageClick:n,handleNext:r,handlePrevious:s,currentIndex:a,showControls:i,direction:l,totalVisibleCarousels:c,setTotalVisibleCarousels:u,fillMode:f,useCurrentIndex:m}=d.useContext($ke),p=d.useRef(null),h=m(p),[g,{width:y,height:x}]=Ho(),v=y>0&&x>0;d.useEffect(()=>{if(v)return u(j=>j+1),()=>u(j=>j-1)},[u,v]);const[b,_]=d.useState(!1),{isMobileUserAgent:w}=xe(),C=d.useMemo(()=>{const j=a+h;return j>=t.length?j%t.length:j},[h,a,t.length]),S=d.useCallback(()=>{n?.(C)},[C,n]),E={hiddenEnter:j=>({x:j===1?"100%":"-100%"}),hiddenExit:j=>({x:j===1?"-100%":"100%"}),visible:{x:0}};d.useEffect(()=>{const j=()=>{const R=(C+1)%t.length,O=C===0?t.length-1:C-1,D=new Image,P=new Image,A=t[R],T=t[O];A&&(D.src=A),T&&(P.src=T)};t.length>1&&j()},[C,t]);const k=t.length>1&&h===0,M=t.length>1&&h+1==c;return t.length?o.jsxs("div",{ref:p,"data-paged-carousel":"child",onMouseEnter:()=>_(!0),onMouseLeave:()=>_(!1),className:B("group relative size-full",e),children:[o.jsx("div",{ref:g,className:"size-full cursor-pointer overflow-hidden",onClick:S,children:h===-1?null:o.jsx(Ye,{initial:!1,custom:l,children:o.jsx(ve.img,{custom:l,src:t[C],alt:"",className:B("absolute inset-0 size-full",{"p-sm object-contain":f==="contain","object-cover":f==="cover"}),variants:E,initial:"hiddenEnter",animate:"visible",exit:"hiddenExit",transition:Is},t[C])})}),k&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:b||i||w?1:0},transition:Is,children:o.jsx(z,{as:"button",variant:"raised",className:"shadow-overlay active:bg-subtler absolute left-2 top-1/2 flex size-6 -translate-y-1/2 items-center justify-center rounded-full",onClick:s,children:o.jsx(de,{icon:cp,size:"sm"})})}),M&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:b||i||w?1:0},transition:Is,children:o.jsx(z,{as:"button",variant:"raised",className:"shadow-overlay active:bg-subtler absolute right-2 top-1/2 flex size-6 -translate-y-1/2 items-center justify-center rounded-full",onClick:r,children:o.jsx(de,{icon:Xn,size:"sm"})})})]}):null});L2.displayName="ImagePagedCarousel";const WIt=Iu("",{variants:{color:{inherit:"",foreground:"text-foreground",quiet:"text-quiet",quieter:"text-quieter",quietest:"text-quietest",inverse:"text-inverse",light:"text-light",dark:"text-dark"},size:{large:"text-4xl",default:"text-2xl",small:"text-xl",tiny:"text-lg"},family:{sans:"font-sans",mono:"font-mono",display:"font-display"},weight:{normal:"font-normal",medium:"font-medium",bold:"font-bold",extrabold:"font-extrabold"},align:{left:"text-left",center:"text-center",right:"text-right"}},defaultVariants:{color:"inherit",family:"sans",size:"default",weight:"normal",align:"left"}});function yw({children:e,level:t=1,color:n="inherit",family:r="sans",size:s="default",weight:a="normal",align:i="left"}){const l=`h${t}`;return o.jsx(l,{className:WIt({color:n,family:r,size:s,weight:a,align:i}),children:e})}const HIt=I.memo(({image:e,title:t,subtitle:n,children:r,footer:s,itemClick:a})=>o.jsxs("div",{className:"gap-md flex w-full flex-row",children:[o.jsx("div",{className:"w-[180px] shrink-0",children:e}),o.jsxs("div",{className:"gap-xs flex flex-col justify-center",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsxs(z,{as:"button",onClick:a,children:[o.jsx(F,{variant:"baseSemi",className:"text-left hover:underline",children:t}),o.jsx("div",{className:"mt-xs min-h-[24px]",children:n})]}),o.jsx("div",{className:"-mt-sm",children:r})]}),o.jsx("div",{className:"gap-xs -mt-sm flex flex-row justify-between",children:s})]})]}));HIt.displayName="InlineCard";const ase=({children:e})=>o.jsx("div",{className:"gap-md flex w-full flex-row",children:e}),zIt=({children:e})=>o.jsx("div",{className:"w-[180px] shrink-0",children:e}),GIt=({children:e})=>o.jsx("div",{className:"gap-xs flex flex-col justify-center",children:e}),qIt=({children:e,onClick:t})=>o.jsx(F1,{onClick:t,className:"gap-xs group flex flex-col",children:e}),KIt=({children:e})=>o.jsx("div",{className:"group-hover:underline",children:o.jsx(yw,{size:"tiny",weight:"medium",level:3,align:"left",children:e})}),YIt=({children:e})=>o.jsx("div",{className:"gap-xs -mt-sm flex flex-row justify-between",children:e}),ch=Object.assign(ase,{Root:ase,Image:zIt,Title:KIt,Content:GIt,Action:qIt,Footer:YIt}),QIt=({actions:e})=>o.jsx(Vo,{className:"text-quietest flex flex-row flex-wrap items-center",delimiter:"|",children:e.map((t,n)=>{const r=o.jsx(z,{className:"gap-xs flex items-center",children:o.jsx(Me,{variant:t.emphasize?"super":"common",size:"small",onClick:t.onClick,icon:t.icon,trailingComponent:t.trailingComponent,text:t.label,textClassName:t.textClassName,noPadding:!0})});return o.jsx(An,{id:t.label,children:r},n)})}),Vke=I.memo(({title:e,href:t,linkType:n="external",onClick:r,noFollow:s=!1,variant:a="entry-title-300"})=>{const{$t:i}=Z(),l=i({defaultMessage:"Open in Perplexity",id:"EUx7i7X2Vq"}),c=i({defaultMessage:"Open site",id:"X8dxWhlpJl"}),u=i({defaultMessage:"View details",id:"MnpUD7ksb+"}),f=o.jsx(F,{as:r?"button":void 0,onClick:r,variant:a,className:"decoration-subtle animate-underlineFade hover:text-super hover:decoration-super/80 dark:decoration-subtler line-clamp-3 inline-block w-fit cursor-pointer overflow-visible text-left align-baseline underline decoration-1 underline-offset-[5px] transition-all hover:underline-offset-[7px] motion-reduce:transition-none",children:e});return t?o.jsx(bn,{tooltipText:n==="external"?c:l,tooltipLayout:"right",asChild:!0,children:o.jsx(qe,{href:t,target:"_blank",rel:s?void 0:"nofollow",className:"w-fit",onClick:r,children:f})}):r?o.jsx(bn,{tooltipText:u,tooltipLayout:"right",asChild:!0,children:f}):f});Vke.displayName="InlineCardTitle";const XIt=(e,t,n)=>{let r=Math.min(Math.ceil(n/2),e.length),s=Math.min(Math.floor(n/2),t.length);return r+s<n&&(r=Math.min(n-s,e.length)),r+s<n&&(s=Math.min(n-r,t.length)),[...e.slice(0,r).map(a=>({...a,type:"pro"})),...t.slice(0,s).map(a=>({...a,type:"con"}))]},Wke=I.memo(({pros:e,cons:t,loading:n})=>{const[r,s]=d.useState(0),[a,i]=d.useState(!1),[l,c]=d.useState(1),[u,f]=d.useState(1),[m,p]=d.useState(0),[h,{width:g,height:y}]=Ho(),[x,v]=d.useState(ce),b=d.useRef(null),{isMobileUserAgent:_}=xe(),w=Math.floor(g??0),C=Math.floor(y??0),S=d.useCallback(R=>!e?.length&&!t?.length||R<=0?ce:XIt(e,t,R),[e,t]),E=d.useCallback((R,O,D,P)=>{const A=Math.floor(R/D),T=Math.floor(O/P);return{columns:Math.max(1,A),rows:Math.max(1,T)}},[]);d.useEffect(()=>{const{columns:R,rows:O}=E(w,C,180,56);c(R),f(O),r>x.length-1&&x.length-1>=0&&s(x.length-1)},[w,C,r,x.length,E]),d.useEffect(()=>{p(u*l),v(S(u*l))},[u,l,S]),d.useEffect(()=>{if(b.current){const R=b.current.scrollWidth,O=x.length,D=R/O*r;b.current.scrollTo({left:D})}},[a]),d.useEffect(()=>{const R=b.current;if(!R)return;const O=()=>{const D=R.scrollLeft,P=R.scrollWidth/x.length,A=Math.round(D/P);A!==r&&s(A)};return R.addEventListener("scroll",O),()=>R.removeEventListener("scroll",O)},[r,x.length]);const k=d.useCallback(R=>{if(!b.current)return;const D=b.current.scrollWidth/x.length*R;b.current.scrollTo({left:D})},[x.length]),M=d.useCallback(()=>{if(!b.current)return;const R=r+1>=x.length?0:r+1;k(R)},[r,x.length,k]),j=d.useCallback(()=>{if(!b.current)return;const R=r-1<0?x.length-1:r-1;k(R)},[r,x.length,k]);return o.jsx("div",{className:"size-full",style:{transformStyle:"preserve-3d",perspective:"1000px"},onMouseLeave:()=>{_||i(!1)},children:o.jsxs(ve.div,{initial:{rotateY:0},animate:{rotateY:a?180:0},transition:{type:"spring",stiffness:200,damping:30},style:{willChange:"transform",transformStyle:"preserve-3d"},className:"relative size-full",children:[o.jsx("div",{ref:h,className:"gap-sm grid size-full",style:{gridTemplateColumns:`repeat(${l}, 1fr)`,gridTemplateRows:`repeat(${u}, 1fr)`,backfaceVisibility:"hidden"},children:[...Array(m)].map((R,O)=>{const D=x[O];return!D&&!n?null:n?o.jsx(un,{children:o.jsx("div",{className:"bg-subtler size-full rounded-xl"})},O):D?o.jsx(Hke,{item:D,index:O,setIsFlipped:i,setDetailIndex:s},O):null})}),o.jsx("div",{className:"absolute inset-0 size-full",style:{backfaceVisibility:"hidden",willChange:"transform",transform:"rotateY(180deg)"},children:o.jsxs(Wt,{className:"gap-xs relative flex size-full flex-col text-left",children:[_&&o.jsx("button",{className:"shadow-overlay active:bg-subtler absolute right-[-8px] top-[-8px] z-[1] flex size-[24px] items-center justify-center rounded-full bg-white dark:bg-black",onClick:R=>{R.stopPropagation(),i(!1)},children:o.jsx(F,{color:"light",children:o.jsx(de,{icon:kt,size:"sm"})})}),o.jsx("div",{ref:b,className:B("scrollbar-none absolute inset-0 snap-x snap-mandatory overflow-x-hidden",{"!overflow-x-scroll":_}),children:o.jsx("div",{className:"flex h-full flex-row flex-nowrap",style:{width:`${x.length*100}%`},children:x.map((R,O)=>o.jsx(zke,{item:R,next:M,prev:j},O))})}),o.jsx("div",{className:"gap-xs bottom-sm absolute left-1/2 flex -translate-x-1/2 flex-row",children:Array.from({length:x.length},(R,O)=>o.jsx("div",{onClick:()=>{k(O)},className:B("size-[6px] cursor-pointer rounded-full bg-black dark:bg-white",{"opacity-50":O===r,"opacity-[10%]":O!==r})},O))})]})})]})})});Wke.displayName="ProsConsGrid";const Hke=I.memo(({item:e,index:t,setIsFlipped:n,setDetailIndex:r})=>{const s=d.useCallback(()=>{n(!0),r(t)},[t,r,n]);return o.jsx(Wt,{as:"button",onClick:s,className:"px-md active:bg-subtler dark:active:bg-subtle cursor-pointer",children:o.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[o.jsx(F,{variant:"smallBold",className:"leading-tight",color:e.type==="pro"?"super":"light",children:o.jsx(de,{icon:e.type==="pro"?dr:kt,size:"sm"})}),o.jsx(F,{variant:"smallBold",className:"line-clamp-2 text-left leading-tight",color:e.type==="pro"?"super":"light",children:e.label})]})})});Hke.displayName="CanonicalCardFactory";const zke=I.memo(({item:e,next:t,prev:n})=>{const{isMobileUserAgent:r}=xe();return o.jsx("div",{onClick:s=>{if(r)return;const a=s.currentTarget.getBoundingClientRect();s.clientX-a.left>a.width/2?t():n()},className:"scrollbar-none size-full cursor-pointer select-none snap-center overflow-y-scroll",style:{mask:"linear-gradient(to bottom, black calc(100% - 40px), transparent calc(100% - 12px))",WebkitMask:"linear-gradient(to bottom, black calc(100% - 40px), transparent calc(100% - 12px))"},children:o.jsxs("div",{className:"p-md gap-xs flex flex-col pb-[32px] text-left",children:[o.jsxs(F,{variant:"smallBold",className:"gap-xs flex flex-row leading-tight",color:e.type==="pro"?"super":"default",children:[o.jsx(de,{icon:e.type==="pro"?dr:kt,size:"sm",className:"translate-y-half shrink-0"}),e.label]}),o.jsx(F,{variant:"small",color:"light",children:e.description})]})})});zke.displayName="ProConDetailCard";function ose(e,t){const n=(e.getDay()+6)%7,r=(t-n+7)%7,s=new Date(e);return s.setDate(e.getDate()+r),s}function ise(e,t){return e.getMinutes()===0?new Intl.DateTimeFormat(t,{hour:"numeric"}).format(e):new Intl.DateTimeFormat(t,{hour:"numeric",minute:"numeric"}).format(e)}function Gke(e,t,n){const{locale:r,$t:s}=Z(),[a,i]=d.useState([]);return d.useEffect(()=>{if(!e||e.length===0)return i([]),()=>{};const l=()=>{const f=pM(new Date,t),m=(f.getDay()+6)%7,p=_=>{const w=ose(f,_.weekday_idx);return w.setHours(_.hour,_.minute,0,0),w},h=[];for(const _ of e){const w=p(_.open),C=p(_.close);m===_.close?.weekday_idx&&_.open?.weekday_idx!==_.close?.weekday_idx&&w.setDate(w.getDate()-7),h.push({openTime:w,closeTime:C})}h.sort((_,w)=>{const C=(_.openTime.getDay()+6)%7-(w.openTime.getDay()+6)%7;return C!==0?C:_.openTime.getTime()-w.openTime.getTime()});const g=[];for(let _=0;_<7;_++){const w=ose(new Date,_);g.push({day:Intl.DateTimeFormat(r,{weekday:n}).format(w),isToday:_===m,hours:[],joinedHours:s({defaultMessage:"Closed",id:"Fv1ZSzMOV6"})})}let y=null;const x=f.getTime();for(const{openTime:_,closeTime:w}of h){const C=(_.getDay()+6)%7,S=g[C],E=ise(_,r),k=ise(w,r),M=E===k?s({defaultMessage:"Open 24 hours",id:"mdcm71ltJq"}):`${E} - ${k}`;S.isToday=C===m,S.hours.push({open:E,close:k,openCloseString:M,isOpenNow:m===C&&f>=_&&f<w});const j=_.getTime(),R=w.getTime();if(j>x){const O=j-x;(y===null||O<y)&&(y=O)}if(R>x){const O=R-x;(y===null||O<y)&&(y=O)}}const v=new Date(f);v.setHours(24,0,0,0);const b=v.getTime()-x;b>0&&(y===null||b<y)&&(y=b);for(const _ of g)_.hours.length>0&&(_.joinedHours=_.hours.map(w=>w.openCloseString).join(", "));return i(_=>cs(_,g)?_:g),y},c=()=>{const f=l();if(f!==null&&f>0){const m=Math.min(f,864e5);return setTimeout(c,m)}else return setTimeout(c,24*60*60*1e3)},u=c();return()=>clearTimeout(u)},[e,t,r,n,s]),a}const qke=I.memo(({standardizedHours:e,timezone:t})=>{const n=Gke(e,t,"short");return n.length===0?null:o.jsx("div",{className:"gap-xs flex flex-col",children:n.map(({day:r,joinedHours:s,isToday:a})=>o.jsxs("div",{className:"gap-md flex items-center justify-between",children:[o.jsx(F,{variant:"tiny",color:"white",className:a?void 0:"opacity-50",children:r}),o.jsx(F,{variant:"tiny",color:"white",className:a?void 0:"opacity-50",children:s})]},`place-hours-${r}`))})});qke.displayName="PlaceOperatingHours";var au;(function(e){e.DEFAULT="default",e.DALLE3="dall-e-3",e.PLAYGROUND="playground",e.FLUX="flux",e.GPT4O_IMAGE="gpt-4o",e.GEMINI_FLASH="gemini-flash"})(au||(au={}));const Kke=e=>{switch(e){case au.DALLE3:return"DALL-E 3";case au.PLAYGROUND:return"Playground";case au.FLUX:return"FLUX";case au.GPT4O_IMAGE:return"GPT-4o Image";case au.GEMINI_FLASH:return"Gemini Flash";default:return"AI"}},LW=e=>{if(e==="dalle"||Object.values(au).includes(e))return!0;const t=e.toLowerCase();return Object.values(au).some(n=>t.includes(n.toLowerCase()))},Yke=I.memo(({mediaItem:e})=>{const{name:t,url:n,image:r,source:s,author_name:a,author_url:i}=e,l=LW(s??""),c=n?.includes("unsplash.com"),u=a&&i;let f=t;c&&(f="Unsplash");const m=d.useCallback(p=>{p.stopPropagation()},[]);return o.jsx(qe,{className:"cursor-pointer",target:"_blank",rel:"noopener nofollow",href:n??r??"",children:u?o.jsxs(z,{className:"flex max-w-[300px] items-stretch overflow-hidden",children:[o.jsxs("div",{className:"gap-sm hover:bg-subtler flex shrink-0 items-center rounded-md p-[7px] duration-300",children:[n&&o.jsx(ol,{domain:n}),o.jsx(F,{color:"white",variant:"tiny",className:"truncate",children:f})]}),o.jsx(qe,{href:i,target:"_blank",className:"gap-sm p-sm hover:bg-subtler group flex items-center overflow-hidden rounded-md pr-[10px] duration-300",onClick:m,children:o.jsx(F,{color:"white",variant:"tiny",className:"truncate opacity-50 duration-300 group-hover:opacity-75",children:a})})]}):o.jsx(z,{className:"hover:bg-subtle max-w-[250px] rounded-md p-[7px] px-[10px] duration-300",variant:l?"subtler":"transparent",children:n&&o.jsx(Wo,{color:"white",url:n,source:f,truncate:!1,isAttachment:!1,variant:"tiny"})})})});Yke.displayName="ImageGalleryCitation";const OW=I.memo(({image:e,name:t,url:n,fallbackSrc:r,onClick:s,AIProps:a,softBlockSaveImage:i,imageClassName:l,includeLightBoxModal:c,lightboxSrc:u,rounded:f="sm",onFail:m,onLoad:p,className:h,style:g,containerClassName:y,maskClassName:x,ref:v})=>{const b=d.useMemo(()=>({url:n,name:t}),[t,n]),_=d.useMemo(()=>({draggable:!1}),[]);return o.jsx("div",{onClick:s,className:h,style:g,children:o.jsx(ns,{AIProps:a,origin:b,fadeIn:!1,hasShadow:!1,includeLightBoxModal:c,lightboxSrc:u,imageClassName:B("max-h-[70vh] object-cover w-full",l),imageRef:v,alt:t,src:e,fallback:null,fallbackSrc:r,softBlockSaveImage:i,rounded:f,onFail:m,onLoad:p,containerClassName:y,maskClassName:x,imageProps:_,draggable:!1},n)})});OW.displayName="RenderImage";const Qke=I.memo(({mediaItem:e,softBlockSaveImage:t})=>{const{image:n,name:r,url:s,thumbnail:a,source:i}=e,l=n??a;return l?o.jsx("div",{className:"py-md px-lg flex size-full select-none items-center justify-center","data-color-scheme":"dark",children:o.jsx(OW,{image:l,name:r,fallbackSrc:a,url:s,AIProps:i?{isAI:LW(i),AILabel:Kke(i)}:void 0,includeLightBoxModal:!1,softBlockSaveImage:t,maskClassName:"bg-subtler"})}):(ne.warn(new Error("Invalid media item in image gallery"),{extra:{mediaItem:e}}),null)});Qke.displayName="ImageGalleryMain";const Xke=I.memo(({mediaItem:e,isHighlighed:t,onClick:n,imageRef:r})=>{const{image:s,name:a,url:i,thumbnail:l,source:c}=e,u=l??s,[f,m]=d.useState(!1),[p,h]=d.useState(!1),g=d.useCallback(()=>m(!0),[]),y=d.useCallback(()=>h(!0),[]);return!u||f?(ne.warn(new Error("Invalid media item in image gallery sidebar"),{extra:{mediaItem:e}}),null):o.jsx(OW,{className:B("cursor-pointer select-none rounded-lg border-transparent transition-all duration-200 ease-in-out",{"ring-super ring-2 ring-offset-2 ring-offset-black":t,"hover:opacity-70":!t,"animate-in fade-in duration-300 ease-in":p,hidden:!p}),AIProps:c?{isAI:LW(c),AILabel:Kke(c)}:void 0,image:u,name:a,fallbackSrc:void 0,url:i,includeLightBoxModal:!1,onClick:n,maskClassName:"bg-subtler !rounded-lg",imageClassName:"select-none",onFail:g,onLoad:y,ref:r})});Xke.displayName="GalleryImage";class ZIt extends I.Component{static defaultProps={columnsCount:3,gutter:"0"};getColumns(){const{children:t,columnsCount:n=3}=this.props,r=Array.from({length:n},()=>[]);let s=0;return I.Children.forEach(t,a=>{a&&I.isValidElement(a)&&(r[s%n].push(a),s++)}),r}renderColumns(){const{gutter:t="0"}=this.props;return this.getColumns().map((n,r)=>o.jsx("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",alignContent:"stretch",flex:1,width:0,gap:t},children:n.map(s=>s)},r))}render(){const{columnsCount:t,gutter:n="0",style:r,...s}=this.props;return o.jsx("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignContent:"stretch",boxSizing:"border-box",width:"100%",gap:n,...r},...s,children:this.renderColumns()})}}const Zke=I.memo(({mainIndex:e,images:t,onClick:n,mainIndexRef:r})=>o.jsx(ZIt,{className:"p-sm select-none pr-1",columnsCount:2,gutter:"8px",children:t.map((s,a)=>o.jsx(Jke,{mediaItem:s,index:a,mainIndex:e,onClick:n,mainIndexRef:r},"galleryImage "+a))}));Zke.displayName="ImageGallerySidebar";const Jke=I.memo(({mediaItem:e,index:t,mainIndex:n,onClick:r,mainIndexRef:s})=>{const a=d.useCallback(()=>r(t),[t,r]);return o.jsx(Xke,{mediaItem:e,isHighlighed:t===n,onClick:a,imageRef:t===n?s:void 0})});Jke.displayName="GalleryImageFactory";const Bl=I.memo(({children:e,isOpen:t,onClose:n,...r})=>o.jsx(ox,{isOpen:t,onClose:n,center:!1,variant:"lightbox",...r,children:o.jsx("div",{className:"flex h-screen flex-col",children:e})}));Bl.displayName="Gallery";const e5e=I.memo(({className:e="",headerText:t,children:n,onClose:r,...s})=>o.jsxs("div",{className:B("mx-md gap-md border-subtler h-headerHeight flex items-center justify-between border-b",e),"data-color-scheme":"dark",...s,children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx($a,{variant:"mark",color:"white",size:"tiny"}),t&&o.jsx(F,{color:"white",variant:"section-title",className:"line-clamp-1",children:t})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[n,o.jsx(me,{pill:!0,icon:kt,onClick:r,size:"small",extraCSS:"!bg-subtle"})]})]}));e5e.displayName="GalleryHeader";const t5e=I.memo(({className:e,style:t,...n})=>o.jsx("div",{className:B("col-span-6 h-[50dvh] min-h-0 w-full flex-1 shrink-0 md:size-auto lg:col-span-7",e),style:{colorScheme:"dark",...t},...n})),n5e=I.memo(({children:e,className:t,style:n,...r})=>o.jsx("div",{className:B("col-span-4 flex h-[50dvh] min-h-0 flex-col md:h-auto lg:col-span-3",t),"data-color-scheme":"dark",style:n,...r,children:o.jsx("div",{className:"scrollbar-subtle min-h-0 flex-1 overflow-y-auto",children:e})}));n5e.displayName="GallerySidebar";t5e.displayName="GalleryMain";const r5e=I.memo(({className:e,...t})=>o.jsx("div",{className:B("gap-lg flex min-h-0 flex-1 grow flex-col md:grid md:grid-cols-10 md:gap-0",e),...t}));r5e.displayName="GalleryContent";Bl.Header=e5e;Bl.Main=t5e;Bl.Sidebar=n5e;Bl.Content=r5e;const bb=I.memo(({mainImageIndex:e,title:t,isOpen:n,onClose:r=vn,onSelect:s,images:a,softBlockSaveImage:i})=>{const[l,c]=d.useState(e),u=d.useRef(null),f=d.useCallback(({initial:v})=>{u.current?.scrollIntoView({inline:"nearest",block:v?"center":"nearest",behavior:v?"auto":"smooth"})},[u]);d.useEffect(()=>{c(e)},[e,n]),d.useEffect(()=>{f({initial:!1})},[f,l]);const m=d.useCallback(()=>{c(v=>(v+1)%a.length)},[a.length]),p=d.useCallback(()=>{c(v=>(v-1+a.length)%a.length)},[a.length]),h=d.useCallback(()=>{c(v=>{const b=v-2;return b>=0?b:v})},[]),g=d.useCallback(()=>{c(v=>{const b=v+2;return b<a.length?b:v})},[a.length]);d.useEffect(()=>{const v=b=>{n&&(b.key==="ArrowRight"?m():b.key==="ArrowLeft"?p():b.key==="ArrowUp"?(b.preventDefault(),h()):b.key==="ArrowDown"&&(b.preventDefault(),g()))};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[n,m,p,h,g]);const y=d.useCallback(v=>{a[v]&&(c(v),s?.(a[v]))},[a,s]);d.useEffect(()=>{n&&setTimeout(()=>{f({initial:!0})},0)},[n,f]);const x=a[l];return o.jsxs(Bl,{isOpen:n,onClose:r,children:[o.jsx(Bl.Header,{headerText:t,onClose:r,children:x&&o.jsx(Yke,{mediaItem:x})}),o.jsxs(Bl.Content,{children:[o.jsx(Bl.Main,{children:x&&o.jsx(Qke,{mediaItem:x,softBlockSaveImage:i})}),o.jsx(Bl.Sidebar,{children:o.jsx(Zke,{images:a,mainIndex:l,onClick:y,mainIndexRef:u})})]})]})});bb.displayName="ImageGallery";const JIt="pk.eyJ1Ijoiam9obm55cHBseCIsImEiOiJjbG9zeWVsaHUwNGU5Mmpudm95bGpmcTJjIn0.ztIaHlLUvTpLq8EVD7LjDQ",eRt="clpmzsapf00zy01po5t7ge9zd",tRt="clps6e1xy015c01qt2u79a96f";function lse({mode:e="light",width:t,height:n,lat:r,long:s,zoom:a=12,scale:i}){return"https://api.mapbox.com/styles/v1/johnnypplx/"+(e==="light"?eRt:tRt)+`/static/${s},${r},${a}/${t}x${n}${i==2?"@2x":""}?access_token=${JIt}&logo=false`}function nRt(e){const t=lse({...e,scale:1}),n=lse({...e,scale:2});return{src:t,srcSet:`${t} 1x, ${n} 2x`}}const s5e=I.memo(({showPulse:e=!1,style:t="default"})=>o.jsxs("div",{className:"relative size-[12px]",children:[o.jsx("div",{className:B("bg-super relative z-[1] size-[12px] rounded-full shadow-[0_1px_6px_rgba(0,0,0,0.25)] transition-all duration-150 dark:shadow-[0_1px_4px_rgba(0,0,0,0.5)]",{"bg-white shadow-[0_1px_6px_rgba(0,0,0,0.35),0_0_0_1px_rgba(0,0,0,0.05)]":t==="recede"})}),e&&o.jsx(ve.div,{className:"bg-super pointer-events-none absolute left-0 top-0 size-[12px] rounded-full",initial:{scale:1,opacity:.75},animate:{scale:[1,2.5],opacity:[.75,0]},transition:{duration:1.5,ease:[0,0,.2,1],repeat:1/0,repeatType:"loop",repeatDelay:.01}})]}));s5e.displayName="PulsingDot";const rRt=4,XM=I.memo(({dollarCount:e,priceRange:t,className:n="",dollarColor:r="default",textVariant:s="tiny",currencySymbol:a,...i})=>{const l=t&&/^(.+?)\s*(\1\s*)+$/.test(t.trim());return l&&(e=t.replace(/\u200A/g,"").length??0),o.jsx("div",{className:`flex items-center ${n}`,...i,children:t&&!l?o.jsx(F,{variant:s,color:r,children:t}):o.jsx("div",{className:"flex gap-px",children:Array.from({length:rRt},(c,u)=>o.jsx(F,{variant:s,className:"inline-flex",color:u<e?r:"ultraLight",children:a||"$"},u))})})});XM.displayName="DollarRange";const sRt=I.memo(({place:e,entryUUID:t,contextUUID:n,context:r="medium",children:s})=>{const a="place-inline-card",{$t:i}=Z(),[l,c]=d.useState(!1),[u,f]=d.useState(!1),[m,p]=d.useState(0),[h,g]=d.useState(ce),{openModal:y}=xt(),{generatedReviewSummary:x,hasProsOrCons:v,isLoadingProsCons:b,bookingCTAProperties:_,SearchClientLogo:w,handleClientLogoClick:C}=$It({place:e,entryUUID:t,contextUUID:n,reason:a}),{trackEvent:S,trackEventOnce:E}=Te();d.useEffect(()=>{t&&(E("entity card shown",{entryUUID:t}),n&&S("place card viewed",{inline:!0,entryUUID:t,contextUUID:n,itemID:e.url}))},[t,n,e.url,S,E]);const k=d.useCallback(()=>{S("entity card clicked",{entryUUID:t})},[t,S]),M=d.useCallback(async()=>{const K=[];if(e.image_url&&K.push(e.image_url),e.images&&e.images.forEach(ee=>{ee!==e.image_url&&K.push(ee)}),!K.length){g(ce);return}const G=await Ttt(K);g(G.map(ee=>({image:ee,url:ee.includes("tripadvisor.com")?e.url:e.entity_url??e.url})))},[e.image_url,e.images,e.url,e.entity_url]);d.useEffect(()=>{M()},[M]);const j=d.useMemo(()=>h.map(K=>K.image),[h.length]),R=d.useCallback(K=>{f(!0),p(K)},[]),{colorScheme:O}=jr(),D=d.useCallback(()=>c(!0),[]),P=d.useCallback(()=>c(!1),[]),A=d.useCallback(()=>{window.open(Mtt(e.name,e.address?.join(", ")??""),"_blank")},[e.name,e.address]),T=d.useCallback(K=>{k(),K==="cta"&&_?_.onClick():y("placeModal",{place:e,entryUUID:t,contextUUID:n})},[k,y,t,n,e,_]),N=d.useCallback(()=>f(!1),[]),L=i({defaultMessage:"Website",id:"JkLHGwmS9L"}),U=i({defaultMessage:"Directions",id:"fuwkSr5Bz7"}),$=i({defaultMessage:"Call",id:"f+GKc4i1Gc"}),V=d.useMemo(()=>[(e.price||e.price_range)&&o.jsx(An,{id:"price",children:o.jsx(XM,{textVariant:"smallBold",dollarCount:e.price?.replace(/\u200A/g,"").length??0,priceRange:e.price_range})},"price"),e.rating&&o.jsx(An,{id:"rating",children:o.jsx(zT,{minReviewCount:1,reviewCount:e.num_reviews,rating:e.rating,size:"sm",variant:"truncated",textVariant:"smallBold",reviewTextVariant:"small",color:"default",url:w&&e.url?e.url:void 0})},"rating"),w&&o.jsx(An,{id:"logo",children:o.jsx(a5e,{SearchClientLogo:w,url:e.url,handleClick:C})},"logo")].filter(Boolean),[e.rating,e.num_reviews,e.url,e.price,e.price_range,w,C]),W=d.useMemo(()=>[!!e.standardized_hours&&o.jsx(An,{id:"open-until",children:o.jsx(ZM,{place:e})},"open-until"),(e.price||e.price_range)&&o.jsx(An,{id:"price",children:o.jsx(XM,{textVariant:"smallBold",dollarCount:e.price?.replace(/\u200A/g,"").length??0,priceRange:e.price_range,dollarColor:"light",currencySymbol:e.currency_char})},"price"),o.jsx(An,{id:"website",children:o.jsx(O2,{label:L,href:e.entity_url??e.url})},"website"),!!e.address?.length&&o.jsx(An,{id:"directions",children:o.jsx(O2,{label:U,href:Ett(e.name,e.address.join(", "))})},"directions"),!!e.phone&&o.jsx(An,{id:"call",children:o.jsx(O2,{label:e.phone,href:`tel:${e.phone}`})},"call")].filter(Boolean),[e,L,U]),Q=d.useMemo(()=>[_&&{label:_.ctaText,icon:_.icon,onClick:()=>T("cta"),emphasize:!0},e.address?.length&&{label:U,onClick:()=>A(),icon:qb},(e.entity_url||e.url)&&{label:L,onClick:()=>window.open(e.entity_url??e.url,"_blank"),icon:of},e.phone&&{label:$,onClick:()=>window.open(`tel:${e.phone}`,"_blank"),icon:Ice}].filter(K=>!!K),[_,T,e.entity_url,e.url,L,U,A,e.address?.length,e.phone,$]),q=d.useMemo(()=>_?o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-[16px]",children:_.ctaText}),_.ctaSubtitle&&o.jsx("span",{className:"text-quiet -mt-1 text-xs font-normal",children:_.ctaSubtitle})]}):null,[_]),H=d.useMemo(()=>_?o.jsxs("div",{className:"flex flex-col items-center",children:[o.jsx("span",{className:"text-lg",children:_.ctaText}),_.ctaSubtitle&&o.jsx("span",{className:"text-quiet -mt-0.5 text-sm font-normal",children:_.ctaSubtitle})]}):null,[_]);return r==="small"?o.jsxs(o.Fragment,{children:[o.jsx(V7,{images:j,showControls:l,onImageClick:R,children:o.jsxs(ch.Root,{children:[o.jsx(ch.Image,{children:o.jsx(Wt,{fullBleed:!0,className:"aspect-[4/3] w-full overflow-hidden",children:o.jsx(L2,{})})}),o.jsxs(ch.Content,{children:[o.jsx(ch.Action,{onClick:()=>T("title"),children:o.jsx(ch.Title,{children:e.name})}),o.jsx(F,{color:"light",children:o.jsx(Vo,{className:"gap-xs flex flex-row flex-wrap",children:V})}),o.jsx("div",{className:"-mt-sm",children:s}),o.jsx(ch.Footer,{children:o.jsx(QIt,{actions:Q})})]})]})}),o.jsx(bb,{title:e.name,mainImageIndex:m,isOpen:u,images:h??ce,onClose:N})]}):o.jsxs("div",{className:"group relative","data-testid":"place-inline-card",children:[o.jsx(V7,{images:j,showControls:l,onImageClick:R,children:o.jsxs("div",{className:"gap-md @container mt-4 flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-row items-end",children:[o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(Vke,{title:e.name,onClick:()=>T("title")}),o.jsx(F,{color:"light",children:o.jsx(Vo,{className:"gap-xs flex flex-row flex-wrap",children:[...V,...W]})})]}),_&&o.jsx("div",{className:"@[420px]:block ml-auto hidden",children:o.jsx(me,{variant:"primaryGhost",icon:_.icon,size:"regular",pill:!0,onClick:()=>T("cta"),text:q})})]}),(!h||h.length<1)&&!v?null:o.jsxs("div",{className:"gap-sm @[420px]:grid-cols-2 @[640px]:grid-cols-3 grid w-full grid-cols-1",children:[h&&h[0]&&o.jsx(Wt,{onMouseEnter:D,onMouseLeave:P,fullBleed:!0,className:"aspect-[4/3] overflow-hidden",children:o.jsx(L2,{})}),o.jsx(Wt,{onMouseEnter:D,onMouseLeave:P,fullBleed:!0,className:B("overflow-hidden",{"aspect-[4/3]":h&&h.length>1&&(v||!v&&h&&h[2]),"@[640px]:block hidden h-full":v||!v&&h&&h[2],"@[420px]:block @[640px]:col-span-2 hidden h-full":!v&&h&&h.length===1||v&&(!h||h.length<1)}),children:o.jsxs(z,{as:"button",onClick:A,className:"relative size-full",children:[o.jsx("img",{className:"absolute left-1/2 top-1/2 max-w-[unset] -translate-x-1/2 -translate-y-1/2",...nRt({mode:O,width:512,height:512,lat:e.lat,long:e.lng}),alt:""}),o.jsx("div",{className:"absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 overflow-visible",children:o.jsx(s5e,{})})]})}),v?o.jsx("div",{className:B("@[420px]:h-full h-[124px]",{"aspect-[4/3]":!h?.length}),children:o.jsx(Wke,{pros:x?.pros_detailed??ce,cons:x?.cons_detailed??ce,loading:b})}):h&&h[2]?o.jsx(Wt,{onMouseEnter:D,onMouseLeave:P,fullBleed:!0,className:"@[420px]:block hidden aspect-[4/3] overflow-hidden",children:o.jsx(L2,{})}):null]}),_&&e.canonical_page_path?o.jsx("div",{className:"-mt-sm @[420px]:hidden block",children:o.jsx(me,{variant:"primaryGhost",icon:_.icon,fullWidth:!0,size:"regular",pill:!0,onClick:()=>T("cta"),text:H})}):null,s]})}),o.jsx(bb,{title:e.name,mainImageIndex:m,isOpen:u,images:h??ce,onClose:N})]})});sRt.displayName="PlaceInlineCard";const ZM=I.memo(({place:e,textVariant:t="smallBold",condensed:n=!1,showTooltip:r=!0})=>{const{$t:s}=Z(),a=Gke(e.standardized_hours,e.timezone,"short"),[i,l]=d.useMemo(()=>{for(const u of a)if(u.isToday){for(const f of u.hours)if(f.isOpenNow)return f.open!==f.close?[!0,f.close]:[!0,null]}return[!1,null]},[a]),c=d.useMemo(()=>o.jsx(qke,{standardizedHours:e.standardized_hours,timezone:e.timezone}),[e.standardized_hours,e.timezone]);return o.jsx(bn,{tooltipText:c,asChild:!0,showTooltip:r,children:o.jsx(F,{variant:t,color:i?"super":"red",children:i?l&&!n?s({defaultMessage:"Open until {time}",id:"abDRIJdom/"},{time:l}):s({defaultMessage:"Open",id:"JfG49wNHKP"}):s({defaultMessage:"Closed",id:"Fv1ZSzMOV6"})})})});ZM.displayName="OpenUntil";const O2=I.memo(({label:e,href:t,textVariant:n="smallBold",icon:r,iconSize:s="xs"})=>{const a=d.useCallback(l=>{l.stopPropagation()},[]),i=o.jsxs(F,{variant:n,color:"light",className:B("gap-xs flex items-center truncate transition-colors duration-150",{"hover:text-super":t}),children:[r&&s?o.jsx(de,{icon:r,size:s}):null,e]});return t?o.jsx(qe,{href:t,target:"_blank",className:"cursor-pointer truncate",onClick:a,children:i}):i});O2.displayName="MetaDataItem";const a5e=I.memo(({SearchClientLogo:e,url:t,handleClick:n})=>{const r=d.useCallback(a=>{a.stopPropagation()},[]),s=n||r;return e?t?o.jsx(qe,{href:t,target:"_blank",className:"cursor-pointer duration-150 hover:opacity-70",onClick:s,children:o.jsx(e,{})}):o.jsx(e,{}):null});a5e.displayName="SearchClientLogoWrapper";const o5e=I.memo(({place:e,menuItems:t,className:n,entryUUID:r,contextUUID:s,onHover:a})=>{const i="place-widget",{$t:l}=Z(),[c,u]=d.useState(!1),{SearchClientLogo:f}=Dke(e.url),m=PW(),{generateReviewSummaryForPlace:p,reviewSummary:h,isFetching:g}=Fke({entity_id:String(e.id),entity_name:e.name,entry_uuid:r??"",data_source:e.client,url:e.url,reason:i}),{trackEvent:y}=Te();d.useEffect(()=>{r&&y("place card viewed",{entryUUID:r,contextUUID:s??"",inline:!1,itemID:e.url})},[r,s,e.url,y]),d.useEffect(()=>{e.review_summary||h||p()},[e.review_summary,h]);const x=d.useMemo(()=>e.review_summary??h,[e.review_summary,h]),v=d.useMemo(()=>{const D=[];return e.image_url&&D.push(e.image_url),e.images&&e.images.forEach(P=>{P!==e.image_url&&D.push(P)}),D.length?D.map(P=>({image:P,url:P.includes("tripadvisor.com")?e.url:e.entity_url??e.url})):null},[e.image_url,e.images,e.url,e.entity_url]),b=d.useMemo(()=>Qr(e.url).with(ym.string.includes("yelp.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Yelp"})).with(ym.string.includes("tripadvisor.com"),()=>l({defaultMessage:"View on {partnerSite}",id:"Z/KOc+Wez3"},{partnerSite:"Tripadvisor"})).otherwise(()=>null),[l,e.url]),_=d.useCallback(()=>{const D=e.entity_url??e.url,P=m.initialized&&m.value?e.canonical_page_path??D:D;window.open(P)},[m,e.canonical_page_path,e.entity_url,e.url]),{isMobileStyle:w}=xe(),C=!!x?.summary.length,{hasProsOrCons:S,isLoadingProsCons:E}=d.useMemo(()=>{const D=x?.pros_detailed?.length??0,P=x?.cons_detailed?.length??0;return{hasProsOrCons:D||P||g,isLoadingProsCons:g&&!C&&(D+P<3||!D||!P)}},[x?.pros_detailed,x?.cons_detailed,C,g]),k=d.useCallback(D=>{D.stopPropagation()},[]),M=d.useCallback(()=>{a&&a(void 0)},[a]),j=d.useCallback(()=>{a&&a(e.url)},[a,e.url]),R=d.useCallback(()=>{_()},[_]),O=d.useCallback(()=>{u(!1)},[]);return o.jsxs(o.Fragment,{children:[o.jsx(Eke,{id:String(e.id),entityVariant:"dense-card",menuItems:t,className:"relative !p-0",children:o.jsxs(z,{as:"button","data-widget-id":e.id,className:B("group/root gap-sm p-md md:gap-md group flex h-full cursor-pointer appearance-none flex-col text-left duration-150",n),onMouseEnter:j,onMouseLeave:M,onClick:R,children:[o.jsxs("div",{className:"gap-md flex flex-1",children:[v&&v.length>0&&o.jsx("div",{className:"border-subtlest shadow-subtle size-20 shrink-0 rounded-md border bg-white md:size-28 dark:border-0",children:o.jsx(RW,{images:v.map(D=>D.image),className:"size-full bg-white",imageClassName:"object-cover"})}),o.jsxs("div",{className:"gap-sm flex flex-1 flex-col",children:[o.jsx(F,{variant:w?"baseSemi":"section-title",className:"group-hover:text-super line-clamp-3 leading-tight transition-colors duration-150",children:e.name}),!!e.standardized_hours&&w&&o.jsx(ZM,{place:e,textVariant:"tiny"}),(e.rating||e.price||e.price_range)&&o.jsxs(Vo,{className:"gap-xs text-quiet text-xs",children:[!!e.standardized_hours&&!w&&o.jsx(An,{id:"is-open",children:o.jsx(ZM,{place:e,textVariant:"tiny"})}),(e.price||e.price_range)&&o.jsx(An,{id:"price",children:o.jsx(XM,{dollarCount:e.price?.replace(/\u200A/g,"").length??0,priceRange:e.price_range,currencySymbol:e.currency_char})}),e.rating&&o.jsx(An,{id:"rating",children:o.jsx(zT,{minReviewCount:1,reviewCount:e.num_reviews,rating:e.rating,size:"sm",variant:"truncated",textVariant:"tiny"})}),f&&o.jsx(An,{id:"logo",children:e.url?o.jsx(qe,{href:e.url,target:"_blank",className:"cursor-pointer duration-150 hover:opacity-70",onClick:k,children:o.jsx(f,{})}):o.jsx(f,{})})]}),o.jsxs("div",{className:"mt-xs gap-xs flex flex-col",children:[!!e.address?.length&&o.jsx(D2,{icon:qb,href:`https://maps.google.com/?q=${e.address.join(", ")}`,target:"_blank",label:e.address.join(", ")}),!!e.phone&&o.jsx(D2,{icon:Ice,label:e.phone,href:`tel:${e.phone}`}),!!e.url&&b&&!f&&o.jsx(D2,{icon:PO,label:b,href:e.url})]})]})]}),S&&o.jsx(un,{active:E,children:o.jsx(z,{className:"mt-xs pt-sm border-t",children:o.jsx("div",{className:"-ml-sm",children:o.jsx(vb,{id:String(e.id),pros:x?.pros_detailed??ce,cons:x?.cons_detailed??ce,loading:E})})})})]})}),o.jsx(bb,{title:e.name,mainImageIndex:0,isOpen:c,images:v??ce,onClose:O})]})});o5e.displayName="PlaceWidget";const D2=I.memo(({icon:e,label:t,href:n,target:r})=>{const s=d.useCallback(i=>{i.stopPropagation()},[]),a=o.jsxs(F,{variant:"tiny",color:"light",className:"gap-xs flex items-start md:items-center",children:[o.jsx(de,{icon:e,size:"sm",className:"-translate-x-0.5"}),t]});return n?o.jsx(qe,{href:n,target:r,className:"cursor-pointer",onClick:s,children:o.jsx(F,{superHover:!0,color:"light",children:a})}):a});D2.displayName="MetaDataItem";const i5e=I.memo(({url:e,children:t,className:n})=>{const r=d.useCallback(s=>{s.stopPropagation()},[]);return e?o.jsx("div",{className:B("inline-flex",n),children:o.jsx(qe,{href:e,target:"_blank",className:"inline-flex min-w-0 items-center gap-0 duration-150 hover:opacity-60",onClick:r,children:t})}):t});i5e.displayName="LogoWrapper";const l5e=I.memo(({merchantName:e,merchantDomain:t,itemUrl:n,className:r,textVariant:s,iconSize:a,faviconSize:i})=>o.jsx(i5e,{url:n??void 0,className:r,iconSize:a,children:o.jsx(c5e,{name:e,domain:t,faviconSize:i,textVariant:s})}));l5e.displayName="EntityItemMerchantInfo";const c5e=I.memo(({name:e,domain:t,faviconSize:n,textVariant:r="tiny"})=>o.jsxs(F,{variant:r,color:"light",className:"gap-xs flex items-center",children:[o.jsx(ol,{className:"-translate-y-half shrink-0",domain:t,size:n}),o.jsx("span",{className:"truncate whitespace-nowrap",children:e})]}));c5e.displayName="EntityMerchantLogoName";const QA=e=>{if(e.indexOf("$")===-1)return e;const t=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}),n=e.replace(/[$,]/g,"");return t.format(parseFloat(n))},u5e=I.memo(({price:e,comparePrice:t,soldOut:n,size:r,textVariant:s})=>{const{$t:a}=Z(),{isMobileStyle:i}=xe(),l=QA(n&&t?t:e);return o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{variant:s||(i||r==="small"?"smallBold":"baseSemi"),className:n?"line-through":void 0,color:t?"default":void 0,children:l}),n?o.jsx(F,{variant:s??"small",color:"red",children:a({defaultMessage:"Sold Out",id:"MwUAGRNkR/"})}):t&&o.jsx(F,{variant:s??"small",color:"light",className:"line-through",children:QA(t)})]})});u5e.displayName="EntityItemPrice";const aRt=({enabled:e,reason:t})=>{const{data:n,isPending:r,refetch:s}=Ue({queryKey:["create_firmly_session"],queryFn:async()=>Ogt({reason:t}),enabled:e});return d.useMemo(()=>({createFirmlySessionData:n,isPending:r,refetch:s}),[n,r,s])},d5e=I.memo(({className:e})=>o.jsx(F,{variant:"tiny",color:"super",className:B("flex shrink-0 items-center gap-[5px] !text-[11px]",e),children:"Buy now"}));d5e.displayName="BuyWithProIndicator";const f5e=I.memo(({className:e,textVariant:t="tiny"})=>{const{$t:n}=Z();return o.jsx(bn,{asChild:!0,tooltipLayout:"top",tooltipText:n({defaultMessage:"Shipping is free while shopping with Perplexity Pro",id:"UMkYrflCjt"}),children:o.jsx(F,{color:"light",variant:t,className:e,children:n({defaultMessage:"Free Delivery",id:"d7c64sMLc7"})})})});f5e.displayName="FreeShippingIndicator";const oRt=({reason:e,enabled:t=!0})=>{const n=ot(),{data:r,isLoading:s}=Ue({queryKey:sj(),queryFn:()=>Lgt({reason:e}),enabled:t}),a=d.useCallback(()=>{setTimeout(()=>{n.invalidateQueries({queryKey:sj()})},3e3)},[n]),i=d.useCallback(({paymentMethodId:l,type:c="card",link:u=null,card:f=null})=>{a(),n.setQueryData(sj(),m=>m&&m.customer?{...m,customer:{...m.customer,default_payment_method_type:c,default_payment_method:c==="card"?{id:l,brand:f?.brand,last_digits:f?.last_digits}:null,default_payment_method_link:c==="link"?{id:l,email:u?.email}:null}}:m)},[a,n]);return d.useMemo(()=>({customerShoppingInfo:r,isCustomerShoppingInfoLoading:s,setDefaultPaymentMethod:i}),[r,s,i])},DW=({ref:e,onInView:t,onNotInView:n,once:r=!0})=>{const[s,a]=d.useState(!1),i=UVe(e);d.useEffect(()=>{const l=r?!s:!0;i&&l?(t(),a(!0)):!i&&l&&n&&(n(),a(!0))},[r,s,a,t,i,n])},m5e=I.memo(()=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",role:"img",width:"70",height:"auto","aria-labelledby":"shop-pay-logo",viewBox:"0 0 424 102",fill:"none",children:[o.jsx("title",{id:"shop-pay-logo",children:"Shop Pay"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M204.916 30.0997C208.894 25.1796 215.067 21.1016 222.436 21.1016C238.98 21.1016 252.012 34.7983 252.001 51.6974C252.001 69.3058 238.903 82.3375 223.189 82.3375C214.834 82.3375 208.44 78.06 206.102 74.4918H205.88V100.356C205.88 100.512 205.818 100.661 205.708 100.771C205.598 100.881 205.449 100.943 205.293 100.943H190.566C190.409 100.943 190.258 100.882 190.146 100.772C190.035 100.662 189.97 100.513 189.967 100.356V21.6779C189.967 21.5192 190.03 21.3669 190.143 21.2547C190.255 21.1425 190.407 21.0795 190.566 21.0795H204.329C204.486 21.0824 204.635 21.1467 204.745 21.2586C204.855 21.3705 204.916 21.5211 204.916 21.6779V30.0997ZM221.179 67.3428C219.958 67.3814 218.73 67.2768 217.521 67.0265C214.479 66.397 211.694 64.8745 209.522 62.6536C207.35 60.4328 205.89 57.6146 205.329 54.5595C205.167 53.6817 205.082 52.7958 205.072 51.9114C205.061 50.9204 205.144 49.926 205.323 48.9415C205.879 45.8886 207.331 43.0704 209.495 40.8465C211.659 38.6226 214.436 37.094 217.473 36.4557C218.689 36.2001 219.924 36.0919 221.153 36.1288C223.15 36.1534 225.123 36.5679 226.962 37.3492C228.825 38.141 230.513 39.2939 231.929 40.7413C233.344 42.1887 234.459 43.902 235.209 45.7824C235.959 47.6628 236.329 49.6731 236.299 51.6974C236.299 51.6977 236.299 51.698 236.299 51.6983C236.331 53.7263 235.962 55.7408 235.214 57.626C234.465 59.5114 233.351 61.2304 231.937 62.6843C230.522 64.1382 228.834 65.2983 226.97 66.098C225.138 66.8837 223.171 67.3063 221.179 67.3428Z",fill:"currentColor"}),o.jsx("path",{d:"M109.306 32.8701C105.904 25.7337 99.4543 21.1238 89.7359 21.1238C86.753 21.1758 83.8218 21.9123 81.1685 23.2765C78.5151 24.6406 76.2106 26.5959 74.4325 28.9916L74.0779 29.4238V1.45428C74.0779 1.29264 74.0137 1.13763 73.8994 1.02333C73.7851 0.909028 73.6301 0.844803 73.4684 0.844803H59.7275C59.5678 0.847707 59.4156 0.913196 59.3037 1.02718C59.1917 1.14117 59.1291 1.29454 59.1291 1.45428V81.6837C59.1291 81.8424 59.1921 81.9946 59.3044 82.1068C59.4166 82.219 59.5688 82.2821 59.7275 82.2821H74.4436C74.6033 82.2821 74.7567 82.2194 74.8707 82.1075C74.9847 81.9956 75.0502 81.8434 75.0531 81.6837V47.4754C75.0531 40.8265 79.4856 36.1169 86.5777 36.1169C94.3347 36.1169 96.2961 42.4998 96.2961 49.0046V81.6837C96.2961 81.8424 96.3592 81.9946 96.4714 82.1068C96.5836 82.219 96.7358 82.2821 96.8945 82.2821H111.577C111.737 82.2821 111.891 82.2194 112.004 82.1075C112.118 81.9956 112.184 81.8434 112.187 81.6837V47.0543C112.187 45.8686 112.187 44.705 112.032 43.5747C111.78 39.8707 110.856 36.2435 109.306 32.8701V32.8701Z",fill:"currentColor"}),o.jsx("path",{d:"M35.8249 44.7604C35.8249 44.7604 28.3339 42.9985 25.5746 42.2893C22.8153 41.5801 17.9949 40.073 17.9949 36.4272C17.9949 32.7814 21.8845 31.6179 25.8295 31.6179C29.7745 31.6179 34.1627 32.5709 34.5062 36.948C34.5201 37.1058 34.5927 37.2525 34.7097 37.3593C34.8267 37.466 34.9795 37.5249 35.1379 37.5243L49.6434 37.4689C49.7288 37.4691 49.8133 37.4517 49.8916 37.4178C49.9699 37.3838 50.0404 37.3341 50.0987 37.2717C50.1569 37.2093 50.2017 37.1356 50.2301 37.0551C50.2585 36.9746 50.2701 36.8891 50.264 36.804C49.3664 22.7971 37.0771 17.7883 25.7408 17.7883C12.2991 17.7883 2.46987 26.6534 2.46987 36.4272C2.46987 43.5636 4.48669 50.2568 20.3442 54.911C23.1256 55.7199 26.9044 56.7727 30.2066 57.6924C34.1738 58.8006 36.3125 60.4739 36.3125 63.1112C36.3125 66.1697 31.8799 68.2973 27.5249 68.2973C21.2196 68.2973 16.7427 65.9592 16.377 61.7593C16.358 61.6056 16.2832 61.4642 16.1667 61.362C16.0502 61.2599 15.9003 61.2041 15.7454 61.2052L1.27307 61.2717C1.18823 61.2717 1.10425 61.2887 1.02614 61.3218C0.94802 61.355 0.877379 61.4035 0.818427 61.4645C0.759474 61.5255 0.713411 61.5978 0.683003 61.677C0.652596 61.7562 0.638464 61.8407 0.641441 61.9255C1.30633 75.1456 14.0721 82.271 25.9735 82.271C43.7038 82.271 51.7156 72.2977 51.7156 62.9561C51.7378 58.5679 50.7294 48.5724 35.8249 44.7604Z",fill:"currentColor"}),o.jsx("path",{d:"M146.384 17.6442C132.654 17.6442 125.806 22.3095 120.31 26.0439L120.143 26.1547C119.86 26.3488 119.66 26.6427 119.584 26.9775C119.508 27.3124 119.562 27.6637 119.733 27.961L125.163 37.3137C125.265 37.4887 125.404 37.6391 125.571 37.754C125.738 37.869 125.928 37.9457 126.127 37.9786C126.323 38.0139 126.523 38.0053 126.715 37.9536C126.907 37.9018 127.084 37.8082 127.235 37.6794L127.668 37.3248C130.493 34.9534 135.026 31.7841 145.996 30.9197C152.102 30.4322 157.377 32.0279 161.266 35.6626C165.544 39.6076 168.104 45.9794 168.104 52.7058C168.104 65.0837 160.812 72.8629 149.099 73.018C139.447 72.9626 132.965 67.9317 132.965 60.496C132.965 56.5511 134.749 53.9802 138.228 51.4093C138.494 51.2193 138.682 50.9395 138.757 50.6217C138.832 50.304 138.79 49.9696 138.638 49.6806L133.762 40.4608C133.672 40.2958 133.551 40.1502 133.404 40.0323C133.258 39.9144 133.089 39.8266 132.909 39.7738C132.725 39.7188 132.531 39.7033 132.34 39.7281C132.149 39.7529 131.965 39.8176 131.801 39.9179C126.327 43.1647 119.611 49.1043 119.977 60.5182C120.42 75.0459 132.499 86.1384 148.201 86.5927H148.988H150.063C168.724 85.9833 182.199 72.1315 182.199 53.3485C182.199 36.1059 169.633 17.6442 146.384 17.6442Z",fill:"currentColor"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M282.375 1.04428H408.027C416.699 1.04428 423.73 8.07446 423.73 16.7466V85.54C423.73 94.2121 416.699 101.242 408.027 101.242H282.375C273.703 101.242 266.673 94.2121 266.673 85.54V16.7466C266.673 8.07446 273.703 1.04428 282.375 1.04428ZM310.566 55.5316C321.049 55.5316 328.551 47.8854 328.551 37.1697C328.551 26.5093 321.049 18.8188 310.566 18.8188H292.06C291.84 18.8188 291.628 18.9064 291.473 19.0623C291.317 19.2181 291.229 19.4295 291.229 19.65V70.4361C291.232 70.6556 291.32 70.8653 291.476 71.0206C291.631 71.1758 291.841 71.2643 292.06 71.2672H299.019C299.24 71.2672 299.451 71.1796 299.607 71.0237C299.763 70.8679 299.85 70.6565 299.85 70.4361V56.3627C299.85 56.1423 299.938 55.9309 300.094 55.775C300.25 55.6191 300.461 55.5316 300.682 55.5316H310.566ZM310.034 26.5315C315.73 26.5315 319.93 31.0306 319.93 37.1697C319.93 43.3198 315.73 47.8078 310.034 47.8078H300.682C300.463 47.8078 300.253 47.7218 300.098 47.5683C299.942 47.4149 299.853 47.2063 299.85 46.9878V27.3626C299.853 27.1431 299.942 26.9334 300.097 26.7781C300.252 26.6229 300.462 26.5344 300.682 26.5315H310.034ZM330.601 61.5266C330.529 59.8838 330.868 58.2489 331.588 56.7704C332.308 55.2919 333.386 54.0167 334.724 53.0604C337.428 51.0325 341.616 49.9798 347.833 49.736L354.426 49.5144V47.564C354.426 43.6745 351.811 42.0233 347.611 42.0233C343.412 42.0233 340.763 43.5082 340.143 45.9351C340.093 46.1065 339.988 46.2564 339.843 46.3609C339.698 46.4653 339.523 46.5183 339.345 46.5113H332.84C332.72 46.5143 332.601 46.491 332.492 46.4431C332.382 46.3952 332.284 46.3238 332.205 46.2341C332.126 46.1443 332.067 46.0383 332.033 45.9235C331.999 45.8086 331.991 45.6878 332.009 45.5694C332.984 39.807 337.749 35.4299 347.911 35.4299C358.704 35.4299 362.593 40.4498 362.593 50.0352V70.4028C362.595 70.5129 362.575 70.6221 362.533 70.7243C362.492 70.8264 362.431 70.9193 362.354 70.9977C362.277 71.076 362.185 71.1382 362.083 71.1807C361.981 71.2232 361.872 71.245 361.762 71.245H355.191C355.081 71.245 354.972 71.2232 354.87 71.1807C354.769 71.1382 354.677 71.076 354.599 70.9977C354.522 70.9193 354.461 70.8264 354.42 70.7243C354.379 70.6221 354.358 70.5129 354.36 70.4028V68.8846C354.371 68.7514 354.339 68.6183 354.268 68.5049C354.197 68.3915 354.092 68.3041 353.967 68.2555C353.842 68.207 353.706 68.1999 353.577 68.2354C353.448 68.2709 353.334 68.347 353.252 68.4525C351.29 70.5912 348.099 72.1426 343.013 72.1426C335.555 72.1647 330.601 68.2641 330.601 61.5266ZM354.426 57.094V55.5205L345.894 55.9637C341.395 56.1964 338.768 58.0692 338.768 61.2163C338.768 64.0643 341.173 65.6489 345.362 65.6489C351.058 65.6489 354.426 62.5682 354.426 57.1051V57.094ZM369.198 80.7196V86.6481C369.188 86.8397 369.242 87.0293 369.353 87.1861C369.463 87.3429 369.623 87.4579 369.807 87.5124C370.966 87.8283 372.164 87.9739 373.365 87.9446C379.736 87.9446 385.554 85.6175 388.879 76.553L403.506 37.5353C403.548 37.4097 403.559 37.276 403.54 37.1451C403.52 37.0142 403.47 36.8897 403.394 36.7817C403.317 36.6738 403.216 36.5854 403.099 36.5238C402.982 36.4622 402.852 36.4291 402.719 36.4272H395.904C395.727 36.4257 395.554 36.4809 395.411 36.5845C395.267 36.6882 395.161 36.8349 395.106 37.0034L387.05 61.7149C386.989 61.8769 386.879 62.0163 386.737 62.1147C386.594 62.2131 386.425 62.2658 386.252 62.2658C386.079 62.2658 385.91 62.2131 385.767 62.1147C385.625 62.0163 385.516 61.8769 385.454 61.7149L376.168 36.9369C376.106 36.7782 375.998 36.6417 375.858 36.5449C375.718 36.4481 375.552 36.3956 375.381 36.394H368.732C368.6 36.3959 368.47 36.429 368.353 36.4906C368.236 36.5522 368.135 36.6406 368.058 36.7485C367.981 36.8564 367.931 36.9809 367.912 37.1119C367.892 37.2428 367.904 37.3765 367.946 37.5021L381.62 72.6301C381.687 72.8126 381.687 73.0129 381.62 73.1953L381.188 74.5583C380.684 76.2492 379.627 77.722 378.186 78.7407C376.746 79.7593 375.005 80.265 373.243 80.1766C372.22 80.1755 371.2 80.079 370.195 79.8885C370.073 79.8656 369.948 79.87 369.828 79.9012C369.708 79.9325 369.596 79.9898 369.501 80.0692C369.406 80.1486 369.329 80.2481 369.277 80.3605C369.224 80.4729 369.197 80.5956 369.198 80.7196Z",fill:"currentColor"})]}));m5e.displayName="ShopPayIcon";const iRt=(e,t)=>{const n=parseFloat(t.replace(/[^0-9.-]+/g,"")),r=parseFloat(e.replace(/[^0-9.-]+/g,"")),s=Math.trunc((n-r)/n*100);return s===0?null:`${s}%`},lRt=(e,t)=>{let n;return e.thumbnails&&e.thumbnails?.length===1?n=[...e.thumbnails,...e.images]:n=e.thumbnails?.length>0?e.thumbnails:e.images,n.filter(r=>r.variants.includes(t.id)).concat(n.filter(r=>r.variants.length===0))},cRt=he(async()=>{const{ShoppingDetailsModal:e}=await X(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-DL18410X.js").then(n=>n.c);return{ShoppingDetailsModal:t}},__vite__mapDeps([36,1,2,5,37,38,39,7,6,40,41,42,43,44,45,46,47,48]));return{default:e}}),uRt=he(async()=>{const{ShopifyPurchaseModal:e}=await X(async()=>{const{ShopifyPurchaseModal:t}=await import("./ShopifyPurchaseModal-CSLUn4gO.js");return{ShopifyPurchaseModal:t}},__vite__mapDeps([111,1,2,5,112,37,38,39,7,6,49]));return{default:e}}),dRt=(e,t)=>{switch(t.type){case"setItemDetailsOpen":return{...e,itemDetailsOpen:t.open};case"setSelectedImageIndex":return{...e,selectedImageIndex:t.index};case"setImageGalleryOpen":return{...e,imageGalleryOpen:t.open};case"setTryOnImageUrl":return{...e,tryOnImageUrl:t.url};case"setIsGeneratingTryOn":return{...e,isGeneratingTryOn:t.isGenerating}}},p5e={userDiscountOffer:null,shouldShowBuyWithPro:!1,selectedVariant:null,shopifyPurchaseModalOpen:!1,purchaseUrl:"",hideReviewSummary:!1,hasReviewSummary:!1,isShopifyPurchase:null,carouselImages:[],badgeText:"",needsUpsell:!1,showDiscountTag:!1,inViewRef:I.createRef(),reviewSummaryLoading:!1,buttonTitle:"",buttonTrailingComponent:null,selectedImageIndex:0,hasProsOrCons:!1,itemDetailsOpen:!1,imageGalleryOpen:!1,onPrimaryButtonClick:()=>{},tryOnImageUrl:null,isGeneratingTryOn:!1},fRt={setItemDetailsOpen:()=>{},setSelectedImageIndex:()=>{},setImageGalleryOpen:()=>{},setTryOnImageUrl:()=>{},setIsGeneratingTryOn:()=>{}},h5e=Dt("ShoppingWidgetDataContext",p5e),g5e=Dt("ShoppingWidgetApiContext",fRt),mRt=()=>d.useContext(h5e),pRt=()=>d.useContext(g5e),y5e=I.memo(({contextUUID:e,item:t,inFlight:n,entryUUID:r,onBuyWithProButtonClick:s,onShopifyButtonClick:a,children:i,canTryOn:l=!1})=>{const c="shopping-widget-provider",{$t:u}=Z(),[f,m]=d.useReducer(dRt,{...p5e}),[p,h]=d.useState(1),[g,y]=d.useState(!1),[x,v]=d.useState(t.variants.find(Re=>Re.available)||t.variants[0]),{trackEvent:b}=Te(),{openModal:_}=xt(),{hasAccessToProFeatures:w}=St(),C=et(),{openVisitorLoginUpsell:S}=or({enabled:!C}),E=Jo(),M=Bu()==="US",{env:{isLocalhost:j}}=Pt(),R=M||j,O=d.useRef(null),{isMobileStyle:D}=xe();DW({ref:O,onInView:()=>{e&&b("shown shopping product",{contextUUID:e,entryUUID:r??"",productId:t.id,productName:t.name,productURL:t.url,client:t.client})}});const P=!!t.review_summary?.buy_if,A=!P&&n;let T=null;x?.id&&t?.merchant_info?.merchant_domain&&t.client!=="shopify_catalogue"&&(T=`https://${t.merchant_info.merchant_domain}/cart/${x.id}:${p}`);const N=d.useMemo(()=>{const Re=x?lRt(t,x):[];return f.tryOnImageUrl?[{src:f.tryOnImageUrl,variants:[]},...Re]:Re},[t,x,f.tryOnImageUrl]),L=d.useMemo(()=>{const Re=t.images.map(Vt=>({image:Vt.src||"",url:Vt.src||""}));return f.tryOnImageUrl?[{image:f.tryOnImageUrl,url:f.tryOnImageUrl},...Re]:Re},[t.images,f.tryOnImageUrl]),U=d.useMemo(()=>t.merchant_info.pro_shop_enabled&&R,[t.merchant_info.pro_shop_enabled,R]),{customerShoppingInfo:$}=oRt({enabled:U??!1,reason:c}),V=d.useMemo(()=>!$?.customer?.shipping_address?.address.city,[$]),W=d.useCallback(()=>{const Re=p+1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:Re}),h(Re)},[e,t.name,p,b]),Q=d.useCallback(()=>{const Re=p>1?p-1:1;e&&b("shopping product quantity changed",{contextUUID:e,productName:t.name,newQuantity:Re}),h(Re)},[e,t.name,p,b]),q=d.useCallback(async()=>{x?.price?_("shoppingPaymentModal",{product:t,onSuccess:Re=>{_("purchaseConfirmationModal",{order:Re})}}):window.open(t.url)},[t,_,x]),H=d.useCallback(()=>{_("shoppingOnboardingModal",{onContinue:()=>{q()}})},[q,_]),K=d.useCallback(()=>{e&&T&&(b("shopping modal button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:x?.price??"",client:t.client}),window.open(T),y(!1))},[e,T,b,t.url,t.id,t.name,t.client,x]),G=d.useCallback(Re=>{e&&t.url&&b("shopping card button selected",{contextUUID:e,productURL:t.url,productId:t.id,productName:t.name,productPrice:x?.price??"",cta:Re,client:t.client})},[e,t.url,t.id,t.name,t.client,b,x]),ee=d.useMemo(()=>{if(x?.compare_at_price&&x?.price){const Re=iRt(x.price,x.compare_at_price);if(Re)return u({defaultMessage:"{amount} off",id:"+Fpudsk35l"},{amount:Re})}return null},[x,u]),Y=d.useMemo(()=>!!t.review_summary&&t.review_summary.review_quality_score===0,[t.review_summary]),te=d.useCallback((Re,Vt)=>{if(!t.variants)return;const pt=t.variants.find(Nt=>[Nt.option1,Nt.option2,Nt.option3].every((He,Tt)=>Tt===Vt?He===Re:He===x?.[`option${Tt+1}`]));pt&&v(pt),e&&b("shopping product option selected",{contextUUID:e,productName:t.name})},[e,t.name,t.variants,x,v,b]),se=d.useMemo(()=>T,[T]),ae=d.useMemo(()=>U&&(!C||!w),[U,C,w]),pe=d.useMemo(()=>u(U||T?{defaultMessage:"Buy with",id:"bw7bvygIAi"}:{defaultMessage:"Visit Site",id:"Ppy3I8Cd73"}),[U,T,u]),fe=d.useMemo(()=>U?o.jsx(h3,{sizeVariant:"small",fillColor:"fill-inverse",width:"w-[26px] ml-0.5"}):T?o.jsx("div",{className:"h-[14px] [&>*]:ml-0.5 [&>*]:w-auto",children:o.jsx(m5e,{})}):void 0,[U,T]),ge=d.useCallback(()=>{a?a():y(!0)},[a,y]),Se=d.useCallback(()=>{if(U){if(!C){S({origin:Le.BUY_WITH_PRO_BUTTON,description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"}),title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),sheetModalVariant:"bottom-sheet-gradient"});return}if(!w){E({origin:Le.BUY_WITH_PRO_BUTTON,pitchMessage:{title:u({defaultMessage:"Unlock free shipping with Perplexity",id:"dmUvYTOIgW"}),description:u({defaultMessage:"Explore millions of products with free shipping on Perplexity Pro.",id:"PYA+JEZasT"})}});return}V?H():q(),s?.()}else se?ge():window.open(t.url)},[q,H,ge,se,t.url,s,V,C,w,E,S,U,u]),je=d.useCallback(()=>{G(U?"buy with pro":se?"buy with shop":"visit site")},[G,se,U]),ye=d.useCallback(()=>{Se(),je()},[Se,je]),be=d.useMemo(()=>A?!0:(t.review_summary?.pros_detailed?.length??0)>0||(t.review_summary?.cons_detailed?.length??0)>0,[t.review_summary?.pros_detailed,t.review_summary?.cons_detailed,A]),Ne=d.useMemo(()=>({...f,shouldShowBuyWithPro:U,selectedVariant:x,shopifyPurchaseModalOpen:g,purchaseUrl:T,hideReviewSummary:Y,hasReviewSummary:P,isShopifyPurchase:se,carouselImages:N,badgeText:ee,needsUpsell:ae,inViewRef:O,reviewSummaryLoading:A,buttonTitle:pe,buttonTrailingComponent:fe,hasProsOrCons:be,onPrimaryButtonClick:ye}),[f,U,x,g,T,Y,P,se,N,ee,ae,O,A,pe,fe,be,ye]),ke=d.useMemo(()=>({setItemDetailsOpen:Re=>m({type:"setItemDetailsOpen",open:Re}),setSelectedImageIndex:Re=>m({type:"setSelectedImageIndex",index:Re}),setImageGalleryOpen:Re=>m({type:"setImageGalleryOpen",open:Re}),setTryOnImageUrl:Re=>m({type:"setTryOnImageUrl",url:Re}),setIsGeneratingTryOn:Re=>m({type:"setIsGeneratingTryOn",isGenerating:Re})}),[m]),Ie=d.useCallback(()=>{ke.setItemDetailsOpen(!1)},[ke]),Ce=d.useCallback(()=>{ke.setItemDetailsOpen(!1),y(!0)},[ke,y]),Ge=d.useCallback(()=>{ke.setItemDetailsOpen(!1)},[ke]),tt=d.useCallback(()=>{y(!1)},[y]),gt=d.useCallback(Re=>{ke.setSelectedImageIndex(Re),D||requestAnimationFrame(()=>{ke.setImageGalleryOpen(!0)})},[ke,D]),Ee=d.useCallback(()=>{ke.setImageGalleryOpen(!1)},[ke]);return o.jsx(h5e.Provider,{value:Ne,children:o.jsxs(g5e.Provider,{value:ke,children:[i,o.jsx(cRt,{isOpen:f.itemDetailsOpen,onClose:Ie,onShopifyButtonClick:Ce,inFlight:n,onBuyWithProButtonClick:Ge,item:t,canTryOn:l,menuItems:ce}),o.jsx(uRt,{open:g,onOptionSelect:te,onQuantityIncrement:W,onQuantityDecrement:Q,onClose:tt,quantity:p,item:t,selectedVariant:x,handleBuyClick:K,selectedImageIndex:f.selectedImageIndex,handleImageClick:gt,images:N}),o.jsx(bb,{title:t.name,mainImageIndex:f.selectedImageIndex,isOpen:f.imageGalleryOpen,images:L,onClose:Ee})]})})});y5e.displayName="ShoppingWidgetProvider";const x5e=I.memo(({contextUUID:e,entryUUID:t,item:n,inFlight:r,innerRef:s,className:a,showProsCons:i=!0,context:l})=>{const{result:{answer_modes:c}}=pn(),u=d.useMemo(()=>c.find(m=>m.answer_mode_type===hn.SHOPPING)?.shopping_config?.can_try_on??!1,[c]);return o.jsx(y5e,{contextUUID:e,item:n,inFlight:r,entryUUID:t,canTryOn:u,children:o.jsx(v5e,{item:n,className:a,contextUUID:e,entryUUID:t,inFlight:r,innerRef:s,showProsCons:i,context:l})})});x5e.displayName="ShoppingWidgetDense";const v5e=I.memo(({item:e,className:t,contextUUID:n,entryUUID:r,innerRef:s,showProsCons:a,context:i})=>{const l="widget-inner",{inViewRef:c,shouldShowBuyWithPro:u,carouselImages:f,badgeText:m,selectedVariant:p,reviewSummaryLoading:h,hasProsOrCons:g}=mRt(),{setItemDetailsOpen:y}=pRt(),{isMobileStyle:x}=xe(),{trackEvent:v}=Te(),b=d.useCallback(()=>{y(!0),v("shopping card body clicked",{productId:e.id,productURL:e.url,contextUUID:n??"",client:e.client}),i==="answersMode"&&v("answer mode tab item selected",{answerMode:"shopping",entryUUID:r??"",contextUUID:n??"",itemID:e.id})},[i,n,r,e.client,e.id,e.url,y,v]);aRt({enabled:e.client==="firmly",reason:l});const _=d.useCallback(()=>{b()},[b]);return o.jsx(Eke,{id:e.id,entityVariant:"dense-card",className:B("relative !p-0",t),children:o.jsxs(z,{as:"button","data-widget-id":e.id,ref:r1e([s,c]),className:B("group/root gap-sm md:gap-md flex cursor-pointer flex-col p-[10px] duration-150"),onClick:_,children:[o.jsxs("div",{className:B("md:gap-md flex flex-1 items-start gap-[12px]",{"md:items-center":!a||!g,"md:items-start":a&&g}),children:[e.image_url&&o.jsx("div",{className:"border-subtlest size-[88px] shrink-0 rounded-lg border bg-white md:size-28 dark:border-0",children:o.jsx(RW,{images:f.map(w=>w.src),className:"size-full rounded-lg bg-white",badgeText:m??void 0})}),o.jsxs("div",{className:"gap-xs flex flex-1 flex-col",children:[o.jsx("div",{className:"gap-xs flex items-start justify-between",children:o.jsxs("div",{className:"gap-xs flex flex-col",children:[e.merchant_info&&o.jsx(l5e,{merchantName:e.merchant,merchantDomain:e.merchant_info.merchant_domain,itemUrl:e.url,className:"md:mb-xs"}),u&&o.jsx("div",{className:"border-super/10 md:right-sm md:top-sm bg-super/10 md:px-sm md:py-xs absolute right-0 top-0 rounded-bl rounded-tr-[11px] border border-r-0 border-t-0 px-[6px] py-0.5 duration-150 md:rounded md:rounded-tr-[6px] md:border-r md:border-t",children:o.jsx(d5e,{})}),o.jsx(F,{variant:x?"smallBold":"baseSemi",className:"line-clamp-2 text-pretty text-left leading-tight",children:e.name}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(u5e,{textVariant:x?"tiny":void 0,comparePrice:p?.compare_at_price??void 0,price:e.price,size:"small"}),u&&o.jsx(f5e,{className:"inline-flex"})]}),typeof e.rating=="number"&&o.jsx(zT,{reviewCount:e.num_reviews,rating:e.rating,size:"xs",variant:"truncated",textVariant:x?"tiny":void 0})]})}),!x&&g&&a&&o.jsx(un,{active:h,className:"-ml-xs mt-1",children:o.jsx(vb,{pros:e.review_summary?.pros_detailed??ce,cons:e.review_summary?.cons_detailed??ce,loading:h,id:e.id})})]})]}),x&&g&&a&&o.jsx(vb,{pros:e.review_summary?.pros_detailed??ce,cons:e.review_summary?.cons_detailed??ce,loading:h,className:"mt-2",id:e.id})]})})});v5e.displayName="WidgetInner";const hRt=he(async()=>{const{ShoppingDetailsModal:e}=await X(async()=>{const{ShoppingDetailsModal:t}=await import("./ShoppingDetailsModal-DL18410X.js").then(n=>n.c);return{ShoppingDetailsModal:t}},__vite__mapDeps([36,1,2,5,37,38,39,7,6,40,41,42,43,44,45,46,47,48]));return{default:e}}),gRt=he(async()=>{const{ShoppingViewMoreModal:e}=await X(async()=>{const{ShoppingViewMoreModal:t}=await import("./ShoppingViewMoreModal-CUzNfmGy.js");return{ShoppingViewMoreModal:t}},__vite__mapDeps([113,1,2,114,5,112,37,38,39,7,6,49,115,40,41,42,43,44,45,46,47,48,116]));return{default:e}}),yRt=I.memo(({data:e,contextUUID:t,entryUUID:n,entryTitle:r,title:s,menuItemFn:a,innerRef:i,isEntryInFlight:l,entityVariant:c,includeViewAll:u,className:f,groupClassName:m,entityClassName:p,loading:h,textLoading:g,onRemoveResults:y})=>{const{$t:x}=Z(),{entityRefs:v}=IW(),{viewMoreOpen:b,setViewMoreOpen:_}=hIt(),[w,C]=d.useState(null),{trackEvent:S}=Te(),E=d.useCallback(()=>{_(!0),n&&S("view all clicked",{entryUUID:n,src:"button"})},[n,_,S]),k=d.useMemo(()=>{const R=[],O=[],D=[];return e.forEach(P=>{const A=hw(P);if(!A)return;const T=A.object;if(T==="ShopifyWidget")R.push(P),O.push(A),Js(A.images)&&D.push(A.images[0]);else if(T==="PlaceWidget"&&(R.push(P),O.push(A),Js(A.images))){const N=A.images[0];D.push({src:N,variants:[]})}}),{widgetResults:R,widgets:O,images:D}},[e]),M=d.useCallback(()=>_(!1),[_]),j=d.useCallback(()=>C(null),[]);return o.jsxs(o.Fragment,{children:[o.jsxs(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,ease:an},ref:i,className:B("gap-sm relative isolate flex flex-col",m),children:[s&&o.jsxs("div",{className:"mt-md flex items-end justify-between",children:[o.jsx(gke,{title:s,loading:h}),o.jsx("div",{className:"gap-sm flex items-center",children:o.jsxs(Ye,{mode:"popLayout",initial:!1,children:[u&&!h&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.2,ease:_a},children:o.jsx(me,{text:x({defaultMessage:"View All",id:"wbcwKddwLa"}),variant:"border",size:"tiny",pill:!0,onClick:E})},"view-all-button"),!h&&y&&o.jsx(me,{variant:"border",size:"tiny",pill:!0,icon:kt,onClick:y,toolTip:x({defaultMessage:"Remove results",id:"eLqO1aEzzN"})},"remove-results-button")]})})]}),g?o.jsx(wke,{}):o.jsx(b5e,{validatedWidgets:k,className:f,menuItemFn:a,contextUUID:t,entryUUID:n,isEntryInFlight:l,entityRefs:v,entityVariant:c,entityClassName:p,includeViewAll:u,onClickViewAll:E})]}),n&&o.jsxs(o.Fragment,{children:[w&&o.jsx(hRt,{isOpen:w!==null,onClose:j,item:w,onShopifyButtonClick:vn,onBuyWithProButtonClick:vn,inFlight:l,menuItems:ce}),o.jsx(gRt,{open:b,onClose:M,entryUUID:n,title:r??"",initialResults:k.widgetResults.filter(R=>"meta_data"in R)})]})]})});yRt.displayName="EntityGroup";const b5e=I.memo(({validatedWidgets:e,className:t,menuItemFn:n,contextUUID:r,entryUUID:s,isEntryInFlight:a,entityRefs:i,entityClassName:l,includeViewAll:c,onClickViewAll:u})=>o.jsxs("div",{className:B("gap-sm flex flex-col",t),children:[e.widgetResults.map((f,m)=>{const p=n?n(f):void 0,h=e.widgets[m];return Qr(h).with({object:"ShopifyWidget"},g=>o.jsx(x5e,{item:g,contextUUID:r,entryUUID:s,innerRef:i[g.id],inFlight:a,className:l},g.id)).with({object:"PlaceWidget"},g=>o.jsx(o5e,{place:g,contextUUID:r,entryUUID:s,menuItems:p,inFlight:a,className:l},g.id)).otherwise(()=>null)}),c&&o.jsx(_ke,{onClick:u,disabled:a,images:e.images})]}));b5e.displayName="HighIntentWidgetGroup";const xRt=(e,t)=>e.concat(t).reduce((r,s)=>{const a=hw(s);if(!a)return r;const i=a.object;return(i==="ShopifyWidget"||i==="PlaceWidget")&&(r[i]||(r[i]=[]),r[i].push(s)),r},{}),vRt=e=>{const t=hw(e);if(t)switch(t.object){case"ShopifyWidget":return!0;default:return!1}return!1},_5e=ce,bRt=(e,t)=>{if(!e)return;const n=e.filter(r=>r.plan_block&&r.intended_usage=="plan").map(r=>r.plan_block);if(n&&n.length>0){const r=[];let s=!1;for(const a of n){for(const i of a?.goals??[])if(i.description!==null)if(r.length==0||r[r.length-1]?.final)r.push({...i});else{const l=r[r.length-1];l&&(l.description+=i.description,l.final=i.final)}a?.final&&(s=!0)}if(r.length>0)return{goals:r,final:s,channel_uuid:"",comprehensive_mode:!1}}return t},_Rt=e=>e.blocks??ce,c0=e=>{const t=e.filter(s=>s.plan_block&&s.intended_usage=="pro_search_steps").map(s=>s.plan_block),n={};for(let s=0;s<t.length;s++)n[t[s]?.steps[0]?.uuid??""]=s;return t.filter((s,a)=>n[s.steps[0]?.uuid??""]===a).map(s=>s.steps.map(a=>({step_type:a.step_type,uuid:a.uuid??"",content:a?.initial_query_content??a?.attachment_content??a?.terminate_content??a?.search_web_content??a?.web_results_content??a?.code_content??a?.table_status_content??a?.entropy_request_content??a?.thought_content??a?.browser_search_content??a?.browser_open_tab_content??a?.browser_open_tab_results_content??a?.url_navigate_content??a?.browser_get_site_content_content??a?.user_clarification_content??a?.browser_get_history_summary_content??a?.browser_get_open_tab_content_content??a?.read_calendar_content??a?.read_calendar_response_content??a?.read_email_content??a?.read_email_response_content??a?.update_calendar_content??a?.generate_image_content??a?.generate_image_results_content??a?.generate_video_content??a?.generate_video_results_content??a?.search_tabs_content??a?.search_tabs_results_content??a?.create_app_results_content??a?.browser_close_tabs_content??a?.browser_close_tabs_results_content??a?.update_calendar_response_content??a?.browser_group_tabs_content??a?.browser_group_tabs_results_content??a?.create_chart_content??a?.get_url_content_content??a?.create_client_app_content??a?.get_user_info_content??a?.get_user_info_response_content??a?.get_free_busy_content??a?.get_free_busy_response_content??a?.send_email_content??a?.send_email_response_content??a?.browser_ungroup_content??a?.browser_search_tab_groups_content??a?.browser_search_tab_groups_result_content??a?.search_browser_content??a?.search_browser_results_content??a?.clarifying_questions_content??a?.clarifying_questions_output_content??a?.email_calendar_agent_content??a?.email_calendar_agent_response_content??a?.mcp_tool_input_content??a?.mcp_tool_output_content??a?.blocking_clarifying_questions_content??a?.create_tasks_content??a?.create_tasks_response_content??a?.flights_search_content??a?.flights_booking_content??a?.flights_search_response_content??a?.flights_booking_response_content??a?.flights_agent_content??a?.canvas_agent_content??a?.comet_agent_tool_input_content??{},assets:a.assets}))).flat()},wRt=e=>e?.filter(t=>t.reasoning_plan_block&&t.intended_usage==="reasoning_plan").map(t=>t.reasoning_plan_block),CRt=e=>{let t=!1;if(e&&e.length>0){const n=new Map;for(const a of e){if(a.goals){for(const i of a.goals)if(i.id)if(n.has(i.id)){const l=n.get(i.id);l.description+=i.description,n.set(i.id,l)}else n.set(i.id,{...i})}t=a.progress==="DONE"}const r=Array.from(n.values()),s=e.flatMap(a=>a.web_results??ce);return{goals:r,web_results:s,final:t}}};function SRt(e){const t={},n=[];return e?.forEach(r=>{if(r.widget_block){const s=t[r.intended_usage]??n.length;t[r.intended_usage]=s,n[s]=YQe(n[s],r.widget_block)}}),n}function ERt(e){return(e?.filter(t=>t.media_block).flatMap(t=>t.media_block.media_items)??[]).filter(t=>!t.sponsored_uuid)}function MRt(e){return e?.filter(t=>t.media_block).flatMap(t=>t.media_block.generated_media_items)??[]}function kRt(e=ce){return e.reduce((t,n)=>{if(n.is_code_interpreter&&n.is_image)t.codeInterpreterImages.push(n);else{const r=n.meta_data?.source==="quartr"?{...n,snippet:""}:n;t.webResultsStandard.push(r)}return t},{webResultsStandard:[],codeInterpreterImages:[]})}function TRt(e){return e?.flatMap(t=>t.inline_entity_block?.knowledge_card_block?t.inline_entity_block.knowledge_card_block.knowledge_cards:t.knowledge_card_block?t.knowledge_card_block.knowledge_cards:[])??[]}function NRt(e){return e??ce}function jRt(e){return e?.filter(t=>t.citation_block).flatMap(t=>t.citation_block.citations)??ce}function ARt(e){const t=e?.find(r=>r?.inline_entity_block?.finance_inline_block&&r.intended_usage==="answer_finance_widget")?.inline_entity_block?.finance_inline_block;return t===void 0?void 0:{object:"FinanceWidget",data:t.data_json.map(r=>JSON.parse(r)),data_v2:t?.data_json_v2?.map(r=>JSON.parse(r))}}function IRt(e){const t=e?.map(s=>s.widget_block)?.find(s=>s?.widget_type==="sports");if(!t?.sports_widget_block?.data)return;const r=t.sports_widget_block.data;switch(r.object){case"SportsEventsWidget":return r;case"SportsIndvScheduleWidget":return r;case"SportsStandingsWidget":return r;case"SportsIndvEventsWidget":return r;default:return}}function RRt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="WeatherWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function PRt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TimeWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function LRt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="TimerWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function ORt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="CalculatorWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function DRt(e,t){return e&&e.length>0?e.map(n=>({name:n.widget_type||"",url:"",snippet:"",timestamp:"",meta_data:{object:n.widget_type||"unknown",...n},is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""})):t||[]}function FRt(e){const t=e.find(r=>r?.meta_data?.object==="TableWidget");return t?t.meta_data.search_results:ce}function URt(e){return e.filter(t=>_5e.includes(t?.meta_data?.object))}function BRt(e){return e.filter(t=>!_5e.includes(t?.meta_data?.object))}function $Rt(e){const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="TaskWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function VRt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="FlightStatusWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function WRt(e){if(!e)return;const t=e?.find(r=>r.widget_block?.search_result_widget_block?.metadata?.object==="CurrencyExchangeWidget");return!t||!t.widget_block?.search_result_widget_block?void 0:t.widget_block.search_result_widget_block.metadata}function HRt(e){if(!e)return;const t=e?.find(n=>n.widget_block?.search_result_widget_block?.metadata?.object==="GenericFallbackWidget");if(!(!t||!t.widget_block?.search_result_widget_block))return t.widget_block.search_result_widget_block.metadata}function zRt(e){if(!e?.length)return[];const t=[];return e.forEach(n=>{n.intended_usage==="pro_search_steps"&&n.plan_block?.steps&&n.plan_block.steps.forEach(r=>{r.clarifying_questions_output_content?.clarification&&t.push(r.clarifying_questions_output_content.clarification)})}),t}function GRt(e){return e?e.find(n=>n.intended_usage==="refinement_filters")?.refinement_filters_block:void 0}function qRt(e){return e?e.find(n=>n.inline_entity_block?.maps_preview_block&&n.intended_usage==="answer_maps_preview")?.inline_entity_block?.maps_preview_block:void 0}const xs=e=>e.result,Mr=Et.makeSelector(e=>_Rt(e(xs))),KRt=Et.makeSelector(e=>{const t=e(Mr),n={};return t.forEach(r=>{r.intended_usage&&(n[r.intended_usage]=r)}),n}),YRt=Et.makeSelector(e=>e(xs).mode),JM=Et.makeSelector(e=>e(xs).display_model),QRt=Et.makeSelector(e=>!!e(xs).is_pro_reasoning_mode),w5e=Et.makeSelector(e=>e(xs).search_implementation_mode),FW=Et.makeSelector(e=>cn.isStatusFailed(e(xs))),XRt=Et.makeSelector(e=>cn.isStatusPending(e(xs))),ZRt=Et.makeSelector(e=>cn.isStatusBlocked(e(xs))),JRt=Et.makeSelector(e=>e(xs).plan),C5e=Et.makeSelector(e=>e(xs).widget_data??ce),GT=Et.makeSelector(e=>cn.parseAskTextField(e(xs))??void 0),S5e=Et.makeSelector(e=>cn.isStatusPending(e(xs))),ePt=Et.makeSelector(e=>unt(e(xs))),E5e=Et.makeSelector(e=>e(xs).expect_search_results),M5e=Et.makeSelector(e=>{const t=e(GT),n=cn.isStatusCompleted(e(xs));return t?cn.hasAnswer(t,n):!1}),k5e=Et.makeSelector(e=>e(j5e).length>0),ek=Et.makeSelector(e=>c0(e(Mr))),UW=Et.makeSelector(e=>bRt(e(Mr),e(JRt))),tPt=Et.makeSelector(e=>wRt(e(Mr))),T5e=Et.makeSelector(e=>CRt(e(tPt))),BW=Et.makeSelector(e=>Dr(e(JM))),nPt=Et.makeSelector(e=>{const t=e(BW),n=e(xs),r=cn.parseStructuredAnswerBlocks(n);return r!==null&&r.some(s=>s.intended_usage==="answer_generated_image"||s.intended_usage==="answer_generated_video")&&!r.some(s=>!!s.markdown_block?.answer||!!s.markdown_block?.chunks)&&t===ue.SEARCH}),N5e=Et.makeSelector(e=>SRt(e(Mr))),j5e=Et.makeSelector(e=>kRt(e(GT)?.web_results).webResultsStandard),A5e=Et.makeSelector(e=>RRt(e(Mr))),I5e=Et.makeSelector(e=>PRt(e(Mr))),R5e=Et.makeSelector(e=>LRt(e(Mr))),P5e=Et.makeSelector(e=>WRt(e(Mr))),L5e=Et.makeSelector(e=>HRt(e(Mr))),O5e=Et.makeSelector(e=>ORt(e(Mr))),D5e=Et.makeSelector(e=>VRt(e(Mr))),qT=Et.makeSelector(e=>DRt(e(N5e),e(C5e))),rPt=Et.makeSelector(e=>dnt(e(Mr),e(JM),e(ek))),sPt=Et.makeSelector(e=>e(GT)?.answer==="Answer skipped."||e(Mr).some(t=>t.markdown_block?.answer==="Answer skipped.")),aPt=Et.makeSelector(e=>e(YRt)===ag.COPILOT||e(ek)!=null&&e(ek).length>0),oPt=Et.makeSelector(e=>e(FW)?ce:ERt(e(Mr))),iPt=Et.makeSelector(e=>e(FW)?ce:MRt(e(Mr))),lPt=Et.makeSelector(e=>{const t=e(UW);return e(w5e)==="fast"||!!t&&t.goals.length===1&&t.goals[0]?.description==="Searching the web"}),cPt=Et.makeSelector(e=>e(xs).attachment_processing_progress??ce),F5e=Et.makeSelector(e=>!!e(cPt).length),U5e=Et.makeSelector(e=>e(xs).search_focus==="writing"),B5e=Et.makeSelector(e=>{const t=e(S5e),n=e(E5e),r=e(U5e);return!!t&&n!=="false"&&!r}),uPt=Et.makeSelector(e=>{const t=e(k5e),n=e(B5e);return t||n}),dPt=Et.makeSelector(e=>{if(e(M5e))return!1;const n=e(JM)===le.O3_PRO,r=e(JM)===le.GPT5_PRO;if(n||r||e(BW)!==ue.SEARCH)return!0;if(e(H5e))return!1;const l=e(lPt),c=e(T5e);if(l&&!c)return!1;const u=e(UW),f=e(w5e)==="multi_step",m=e(F5e);return!!(u||c||f||m)}),fPt=Et.makeSelector(e=>TRt(e(Mr))),mPt=Et.makeSelector(e=>NRt(e(xs).related_query_items)),pPt=Et.makeSelector(e=>jRt(e(Mr))),$5e=Et.makeSelector(e=>ARt(e(Mr))),V5e=Et.makeSelector(e=>IRt(e(Mr))),W5e=Et.makeSelector(e=>FRt(e(qT))),hPt=Et.makeSelector(e=>URt(e(qT))),gPt=Et.makeSelector(e=>BRt(e(qT))),yPt=Et.makeSelector(e=>xRt(e(qT),e(N5e))),xPt=Et.makeSelector(e=>[...e(j5e),...e(W5e)]),vPt=Et.makeSelector(e=>$Rt(e(Mr))),H5e=Et.makeSelector(e=>{const t=e(V5e),n=e($5e),r=e(A5e),s=e(I5e),a=e(O5e),i=e(D5e),l=e(R5e),c=e(P5e),u=e(L5e);return!!(t||n||r||s||a||i||l||c||u)}),bPt=Et.makeSelector(e=>zRt(e(Mr))),_Pt=Et.makeSelector(e=>GRt(e(Mr))),wPt=Et.makeSelector(e=>qRt(e(Mr))),z5e=e=>{const{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:c=[]}=e,u=bPt(e),f=n.backend_uuid?c.filter(h=>h.entryUUID===n.backend_uuid).map(h=>h.content):[],m=Array.from(new Set([...u,...f])),p=_Pt(e);return{idx:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,isPending:XRt(e),isBlocked:ZRt(e),isFinalStep:rPt(e),isFailed:FW(e),isProReasoningMode:QRt(e),widgetData:C5e(e),response:GT(e),isEntryInFlight:S5e(e),hasLLMToken:ePt(e),isAnswerSkipped:sPt(e),expectWebResults:E5e(e),steps:ek(e),researchPlan:UW(e),reasoningPlan:T5e(e),searchMode:BW(e),hasMediaOnlyLayout:nPt(e),hasAnswer:M5e(e),hasWebResults:k5e(e),weatherWidgetData:A5e(e),timeWidgetData:I5e(e),timerWidgetData:R5e(e),calculatorWidgetData:O5e(e),currencyExchangeWidgetData:P5e(e),flightStatusWidgetData:D5e(e),genericFallbackWidgetData:L5e(e),isCopilot:aPt(e),mediaItems:oPt(e),generatedMediaItems:iPt(e),hasPendingFiles:F5e(e),showAgentWorkflow:dPt(e),knowledgeCards:fPt(e),relatedQueryItems:mPt(e),webResultCitations:pPt(e),financeWidgetData:$5e(e),sportsWidgetData:V5e(e),tableWebResults:W5e(e),highPriorityWidgets:hPt(e),lowPriorityWidgets:gPt(e),groupedEntityWidgets:yPt(e),webResults:xPt(e),taskWidgetData:vPt(e),hasFastWidget:H5e(e),userClarifications:m,refinementFiltersData:p,selectedFilterIds:p?.selected_filter_ids??[],focusIsWriting:U5e(e),expectSearchResults:B5e(e),hasSources:uPt(e),blocksByIntendedUsage:KRt(e),mapsPreviewData:wPt(e)}},CPt=e=>Yo()((n,r)=>({editQueryValue:e.result?.query_str??"",isEditingQuery:!1,isStatusUpdaterOpen:!1,wasStatusUpdaterManuallyOpened:!1,selectedRefinementQuery:null,...z5e(e),actions:{setEditQueryValue:s=>n({editQueryValue:s}),setIsEditingQuery:s=>n({isEditingQuery:s}),setStatusUpdaterOpen:s=>n({isStatusUpdaterOpen:s}),setWasStatusUpdaterManuallyOpened:s=>n({wasStatusUpdaterManuallyOpened:s}),setSelectedRefinementQuery:s=>n({selectedRefinementQuery:s}),setSelectedFilterIds:s=>n({selectedFilterIds:s}),handleSourcesCuration:s=>{r().result?.frontend_context_uuid&&(r().result?.backend_uuid&&r().scrollToListItem?.(r().result.backend_uuid,{smooth:!0}),r().submitQuery({existingEntryUUID:r().result?.backend_uuid??void 0,newFrontendContextUUID:null,existingFrontendContextUUID:r().result?.frontend_context_uuid,deletedUrls:s,rawQuery:r().result?.query_str??"",existingUuid:r().result?.uuid??void 0,collection:null,promptSource:"user",querySource:"citation_modal"}))}}})),{Context:SPt,useTrackedState:EPt}=g_("ThreadEntryContext"),$W=I.memo(({idx:e,children:t,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l})=>{const c=d.useRef(r),{trackEvent:u}=vx(),{pendingClarifications:f}=AW(),[m]=d.useState(()=>CPt({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:f})),h=m(g=>g.isFinalStep);return d.useEffect(()=>{const g=()=>{const v=setTimeout(()=>{u("engaged",{})},1e4);return()=>{clearTimeout(v)}},y=a&&s,x=c.current&&!r;if(y&&x&&h)return g();c.current=r},[r,h,s,a,u]),d.useEffect(()=>{m.setState(z5e({idx:e,result:n,inFlight:r,isLastResult:s,isFirstResult:a,scrollToListItem:i,submitQuery:l,pendingClarifications:f}))},[e,n,r,s,a,i,l,f,m]),o.jsx(SPt.Provider,{value:m,children:t})});$W.displayName="ThreadEntryProvider";const pn=EPt;function KT(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=pn(),n=Sge(),r=n(e??"")??n(t);return d.useCallback((s,a)=>r?.addTiming(s,a),[r])}function G5e(){const{result:{frontend_uuid:e,frontend_context_uuid:t}}=pn(),n=Sge(),r=n(e??"")??n(t);return d.useCallback((s,a)=>r?.addTimingOnce(s,a),[r])}const MPt=({widgetType:e,widgetName:t,widgetSize:n="full"})=>{const{trackEvent:r}=Te(),{result:{backend_uuid:s,frontend_context_uuid:a}}=pn(),i=d.useMemo(()=>({widgetType:e,widgetName:t,widgetLocation:"thread",widgetSize:n,position:0,frontendUUID:a,entryUUID:s}),[e,t,s,a,n]),l=d.useCallback(()=>{r("widget viewed",i)},[r,i]),c=d.useCallback(()=>{r("widget hovered",i)},[r,i]),u=d.useCallback(f=>{r("widget selected",{...i,widgetCTA:{type:"internal_url",permalink:f}})},[r,i]);return d.useMemo(()=>({widgetViewed:l,widgetHovered:c,widgetSelected:u}),[l,c,u])},Fi=I.memo(e=>{const{children:t,...n}=e,{widgetSelected:r,widgetViewed:s,widgetHovered:a}=MPt(n),i=d.useRef({hovered:!1,viewed:!1}),{ref:l,isIntersecting:c}=bxe({threshold:.5,freezeOnceVisible:!0});d.useEffect(()=>{c&&!i.current.viewed&&(s(),i.current.viewed=!0)},[c,s]);const u=d.useCallback(()=>{i.current.hovered||(a(),i.current.hovered=!0)},[a]);return o.jsx("div",{ref:l,onMouseEnter:u,"data-testid":e.widgetType+"-widget",children:typeof t=="function"?t({widgetSelected:r}):t})});Fi.displayName="WithThreadWidgetInteractionEvents";const q5e=I.memo(e=>{const{data:t}=e,{menuItems:n}=$x();return t?.result==null?null:o.jsx(Fi,{widgetType:"calculator",widgetName:"calculator",widgetSize:"full",children:o.jsx(z,{className:"flex",children:o.jsxs("div",{className:"flex w-full items-center",children:[o.jsx(F,{color:"light",variant:"smallBold",children:o.jsx(de,{className:"mt-two text-2xl leading-none",icon:WLe,size:"sm"})}),o.jsx(F,{children:o.jsx(z,{className:"pl-md font-mono text-2xl",children:Ftt(t.result)})}),n&&n.length>0&&o.jsx("div",{className:"flex grow items-start justify-end",children:o.jsx(yr.Menu,{menuItems:n})})]})})})});q5e.displayName="CalculatorWidget";function Au(e){return Array.isArray?Array.isArray(e):Q5e(e)==="[object Array]"}function kPt(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function TPt(e){return e==null?"":kPt(e)}function Gl(e){return typeof e=="string"}function K5e(e){return typeof e=="number"}function NPt(e){return e===!0||e===!1||jPt(e)&&Q5e(e)=="[object Boolean]"}function Y5e(e){return typeof e=="object"}function jPt(e){return Y5e(e)&&e!==null}function Ro(e){return e!=null}function XA(e){return!e.trim().length}function Q5e(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const APt="Incorrect 'index' type",IPt=e=>`Invalid value for key ${e}`,RPt=e=>`Pattern length exceeds max of ${e}.`,PPt=e=>`Missing ${e} property in key`,LPt=e=>`Property 'weight' in key '${e}' must be a positive integer`,cse=Object.prototype.hasOwnProperty;class OPt{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let s=X5e(r);this._keys.push(s),this._keyMap[s.id]=s,n+=s.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function X5e(e){let t=null,n=null,r=null,s=1,a=null;if(Gl(e)||Au(e))r=e,t=use(e),n=W7(e);else{if(!cse.call(e,"name"))throw new Error(PPt("name"));const i=e.name;if(r=i,cse.call(e,"weight")&&(s=e.weight,s<=0))throw new Error(LPt(i));t=use(i),n=W7(i),a=e.getFn}return{path:t,id:n,weight:s,src:r,getFn:a}}function use(e){return Au(e)?e:e.split(".")}function W7(e){return Au(e)?e.join("."):e}function DPt(e,t){let n=[],r=!1;const s=(a,i,l)=>{if(Ro(a))if(!i[l])n.push(a);else{let c=i[l];const u=a[c];if(!Ro(u))return;if(l===i.length-1&&(Gl(u)||K5e(u)||NPt(u)))n.push(TPt(u));else if(Au(u)){r=!0;for(let f=0,m=u.length;f<m;f+=1)s(u[f],i,l+1)}else i.length&&s(u,i,l+1)}};return s(e,Gl(t)?t.split("."):t,0),r?n:n[0]}const FPt={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},UPt={isCaseSensitive:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},BPt={location:0,threshold:.6,distance:100},$Pt={useExtendedSearch:!1,getFn:DPt,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var Gt={...UPt,...FPt,...BPt,...$Pt};const VPt=/[^ ]+/g;function WPt(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(s){const a=s.match(VPt).length;if(n.has(a))return n.get(a);const i=1/Math.pow(a,.5*e),l=parseFloat(Math.round(i*r)/r);return n.set(a,l),l},clear(){n.clear()}}}class VW{constructor({getFn:t=Gt.getFn,fieldNormWeight:n=Gt.fieldNormWeight}={}){this.norm=WPt(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Gl(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Gl(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Ro(t)||XA(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((s,a)=>{let i=s.getFn?s.getFn(t):this.getFn(t,s.path);if(Ro(i)){if(Au(i)){let l=[];const c=[{nestedArrIndex:-1,value:i}];for(;c.length;){const{nestedArrIndex:u,value:f}=c.pop();if(Ro(f))if(Gl(f)&&!XA(f)){let m={v:f,i:u,n:this.norm.get(f)};l.push(m)}else Au(f)&&f.forEach((m,p)=>{c.push({nestedArrIndex:p,value:m})})}r.$[a]=l}else if(Gl(i)&&!XA(i)){let l={v:i,n:this.norm.get(i)};r.$[a]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function Z5e(e,t,{getFn:n=Gt.getFn,fieldNormWeight:r=Gt.fieldNormWeight}={}){const s=new VW({getFn:n,fieldNormWeight:r});return s.setKeys(e.map(X5e)),s.setSources(t),s.create(),s}function HPt(e,{getFn:t=Gt.getFn,fieldNormWeight:n=Gt.fieldNormWeight}={}){const{keys:r,records:s}=e,a=new VW({getFn:t,fieldNormWeight:n});return a.setKeys(r),a.setIndexRecords(s),a}function gS(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:s=Gt.distance,ignoreLocation:a=Gt.ignoreLocation}={}){const i=t/e.length;if(a)return i;const l=Math.abs(r-n);return s?i+l/s:l?1:i}function zPt(e=[],t=Gt.minMatchCharLength){let n=[],r=-1,s=-1,a=0;for(let i=e.length;a<i;a+=1){let l=e[a];l&&r===-1?r=a:!l&&r!==-1&&(s=a-1,s-r+1>=t&&n.push([r,s]),r=-1)}return e[a-1]&&a-r>=t&&n.push([r,a-1]),n}const am=32;function GPt(e,t,n,{location:r=Gt.location,distance:s=Gt.distance,threshold:a=Gt.threshold,findAllMatches:i=Gt.findAllMatches,minMatchCharLength:l=Gt.minMatchCharLength,includeMatches:c=Gt.includeMatches,ignoreLocation:u=Gt.ignoreLocation}={}){if(t.length>am)throw new Error(RPt(am));const f=t.length,m=e.length,p=Math.max(0,Math.min(r,m));let h=a,g=p;const y=l>1||c,x=y?Array(m):[];let v;for(;(v=e.indexOf(t,g))>-1;){let E=gS(t,{currentLocation:v,expectedLocation:p,distance:s,ignoreLocation:u});if(h=Math.min(E,h),g=v+f,y){let k=0;for(;k<f;)x[v+k]=1,k+=1}}g=-1;let b=[],_=1,w=f+m;const C=1<<f-1;for(let E=0;E<f;E+=1){let k=0,M=w;for(;k<M;)gS(t,{errors:E,currentLocation:p+M,expectedLocation:p,distance:s,ignoreLocation:u})<=h?k=M:w=M,M=Math.floor((w-k)/2+k);w=M;let j=Math.max(1,p-M+1),R=i?m:Math.min(p+M,m)+f,O=Array(R+2);O[R+1]=(1<<E)-1;for(let P=R;P>=j;P-=1){let A=P-1,T=n[e.charAt(A)];if(y&&(x[A]=+!!T),O[P]=(O[P+1]<<1|1)&T,E&&(O[P]|=(b[P+1]|b[P])<<1|1|b[P+1]),O[P]&C&&(_=gS(t,{errors:E,currentLocation:A,expectedLocation:p,distance:s,ignoreLocation:u}),_<=h)){if(h=_,g=A,g<=p)break;j=Math.max(1,2*p-g)}}if(gS(t,{errors:E+1,currentLocation:p,expectedLocation:p,distance:s,ignoreLocation:u})>h)break;b=O}const S={isMatch:g>=0,score:Math.max(.001,_)};if(y){const E=zPt(x,l);E.length?c&&(S.indices=E):S.isMatch=!1}return S}function qPt(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const s=e.charAt(n);t[s]=(t[s]||0)|1<<r-n-1}return t}class J5e{constructor(t,{location:n=Gt.location,threshold:r=Gt.threshold,distance:s=Gt.distance,includeMatches:a=Gt.includeMatches,findAllMatches:i=Gt.findAllMatches,minMatchCharLength:l=Gt.minMatchCharLength,isCaseSensitive:c=Gt.isCaseSensitive,ignoreLocation:u=Gt.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u},this.pattern=c?t:t.toLowerCase(),this.chunks=[],!this.pattern.length)return;const f=(p,h)=>{this.chunks.push({pattern:p,alphabet:qPt(p),startIndex:h})},m=this.pattern.length;if(m>am){let p=0;const h=m%am,g=m-h;for(;p<g;)f(this.pattern.substr(p,am),p),p+=am;if(h){const y=m-am;f(this.pattern.substr(y),y)}}else f(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,includeMatches:r}=this.options;if(n||(t=t.toLowerCase()),this.pattern===t){let g={isMatch:!0,score:0};return r&&(g.indices=[[0,t.length-1]]),g}const{location:s,distance:a,threshold:i,findAllMatches:l,minMatchCharLength:c,ignoreLocation:u}=this.options;let f=[],m=0,p=!1;this.chunks.forEach(({pattern:g,alphabet:y,startIndex:x})=>{const{isMatch:v,score:b,indices:_}=GPt(t,g,y,{location:s+x,distance:a,threshold:i,findAllMatches:l,minMatchCharLength:c,includeMatches:r,ignoreLocation:u});v&&(p=!0),m+=b,v&&_&&(f=[...f,..._])});let h={isMatch:p,score:p?m/this.chunks.length:1};return p&&r&&(h.indices=f),h}}class wf{constructor(t){this.pattern=t}static isMultiMatch(t){return dse(t,this.multiRegex)}static isSingleMatch(t){return dse(t,this.singleRegex)}search(){}}function dse(e,t){const n=e.match(t);return n?n[1]:null}class KPt extends wf{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class YPt extends wf{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class QPt extends wf{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class XPt extends wf{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class ZPt extends wf{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class JPt extends wf{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class e3e extends wf{constructor(t,{location:n=Gt.location,threshold:r=Gt.threshold,distance:s=Gt.distance,includeMatches:a=Gt.includeMatches,findAllMatches:i=Gt.findAllMatches,minMatchCharLength:l=Gt.minMatchCharLength,isCaseSensitive:c=Gt.isCaseSensitive,ignoreLocation:u=Gt.ignoreLocation}={}){super(t),this._bitapSearch=new J5e(t,{location:n,threshold:r,distance:s,includeMatches:a,findAllMatches:i,minMatchCharLength:l,isCaseSensitive:c,ignoreLocation:u})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class t3e extends wf{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const s=[],a=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+a,s.push([r,n-1]);const i=!!s.length;return{isMatch:i,score:i?0:1,indices:s}}}const H7=[KPt,t3e,QPt,XPt,JPt,ZPt,YPt,e3e],fse=H7.length,e8t=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,t8t="|";function n8t(e,t={}){return e.split(t8t).map(n=>{let r=n.trim().split(e8t).filter(a=>a&&!!a.trim()),s=[];for(let a=0,i=r.length;a<i;a+=1){const l=r[a];let c=!1,u=-1;for(;!c&&++u<fse;){const f=H7[u];let m=f.isMultiMatch(l);m&&(s.push(new f(m,t)),c=!0)}if(!c)for(u=-1;++u<fse;){const f=H7[u];let m=f.isSingleMatch(l);if(m){s.push(new f(m,t));break}}}return s})}const r8t=new Set([e3e.type,t3e.type]);class s8t{constructor(t,{isCaseSensitive:n=Gt.isCaseSensitive,includeMatches:r=Gt.includeMatches,minMatchCharLength:s=Gt.minMatchCharLength,ignoreLocation:a=Gt.ignoreLocation,findAllMatches:i=Gt.findAllMatches,location:l=Gt.location,threshold:c=Gt.threshold,distance:u=Gt.distance}={}){this.query=null,this.options={isCaseSensitive:n,includeMatches:r,minMatchCharLength:s,findAllMatches:i,ignoreLocation:a,location:l,threshold:c,distance:u},this.pattern=n?t:t.toLowerCase(),this.query=n8t(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:s}=this.options;t=s?t:t.toLowerCase();let a=0,i=[],l=0;for(let c=0,u=n.length;c<u;c+=1){const f=n[c];i.length=0,a=0;for(let m=0,p=f.length;m<p;m+=1){const h=f[m],{isMatch:g,indices:y,score:x}=h.search(t);if(g){if(a+=1,l+=x,r){const v=h.constructor.type;r8t.has(v)?i=[...i,...y]:i.push(y)}}else{l=0,a=0,i.length=0;break}}if(a){let m={isMatch:!0,score:l/a};return r&&(m.indices=i),m}}return{isMatch:!1,score:1}}}const z7=[];function a8t(...e){z7.push(...e)}function G7(e,t){for(let n=0,r=z7.length;n<r;n+=1){let s=z7[n];if(s.condition(e,t))return new s(e,t)}return new J5e(e,t)}const tk={AND:"$and",OR:"$or"},q7={PATH:"$path",PATTERN:"$val"},K7=e=>!!(e[tk.AND]||e[tk.OR]),o8t=e=>!!e[q7.PATH],i8t=e=>!Au(e)&&Y5e(e)&&!K7(e),mse=e=>({[tk.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function n3e(e,t,{auto:n=!0}={}){const r=s=>{let a=Object.keys(s);const i=o8t(s);if(!i&&a.length>1&&!K7(s))return r(mse(s));if(i8t(s)){const c=i?s[q7.PATH]:a[0],u=i?s[q7.PATTERN]:s[c];if(!Gl(u))throw new Error(IPt(c));const f={keyId:W7(c),pattern:u};return n&&(f.searcher=G7(u,t)),f}let l={children:[],operator:a[0]};return a.forEach(c=>{const u=s[c];Au(u)&&u.forEach(f=>{l.children.push(r(f))})}),l};return K7(e)||(e=mse(e)),r(e)}function l8t(e,{ignoreFieldNorm:t=Gt.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:s,norm:a,score:i})=>{const l=s?s.weight:null;r*=Math.pow(i===0&&l?Number.EPSILON:i,(l||1)*(t?1:a))}),n.score=r})}function c8t(e,t){const n=e.matches;t.matches=[],Ro(n)&&n.forEach(r=>{if(!Ro(r.indices)||!r.indices.length)return;const{indices:s,value:a}=r;let i={indices:s,value:a};r.key&&(i.key=r.key.src),r.idx>-1&&(i.refIndex=r.idx),t.matches.push(i)})}function u8t(e,t){t.score=e.score}function d8t(e,t,{includeMatches:n=Gt.includeMatches,includeScore:r=Gt.includeScore}={}){const s=[];return n&&s.push(c8t),r&&s.push(u8t),e.map(a=>{const{idx:i}=a,l={item:t[i],refIndex:i};return s.length&&s.forEach(c=>{c(a,l)}),l})}class Vx{constructor(t,n={},r){this.options={...Gt,...n},this.options.useExtendedSearch,this._keyStore=new OPt(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof VW))throw new Error(APt);this._myIndex=n||Z5e(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Ro(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,s=this._docs.length;r<s;r+=1){const a=this._docs[r];t(a,r)&&(this.removeAt(r),r-=1,s-=1,n.push(a))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:s,shouldSort:a,sortFn:i,ignoreFieldNorm:l}=this.options;let c=Gl(t)?Gl(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return l8t(c,{ignoreFieldNorm:l}),a&&c.sort(i),K5e(n)&&n>-1&&(c=c.slice(0,n)),d8t(c,this._docs,{includeMatches:r,includeScore:s})}_searchStringList(t){const n=G7(t,this.options),{records:r}=this._myIndex,s=[];return r.forEach(({v:a,i,n:l})=>{if(!Ro(a))return;const{isMatch:c,score:u,indices:f}=n.searchIn(a);c&&s.push({item:a,idx:i,matches:[{score:u,value:a,norm:l,indices:f}]})}),s}_searchLogical(t){const n=n3e(t,this.options),r=(l,c,u)=>{if(!l.children){const{keyId:m,searcher:p}=l,h=this._findMatches({key:this._keyStore.get(m),value:this._myIndex.getValueForItemAtKeyId(c,m),searcher:p});return h&&h.length?[{idx:u,item:c,matches:h}]:[]}const f=[];for(let m=0,p=l.children.length;m<p;m+=1){const h=l.children[m],g=r(h,c,u);if(g.length)f.push(...g);else if(l.operator===tk.AND)return[]}return f},s=this._myIndex.records,a={},i=[];return s.forEach(({$:l,i:c})=>{if(Ro(l)){let u=r(n,l,c);u.length&&(a[c]||(a[c]={idx:c,item:l,matches:[]},i.push(a[c])),u.forEach(({matches:f})=>{a[c].matches.push(...f)}))}}),i}_searchObjectList(t){const n=G7(t,this.options),{keys:r,records:s}=this._myIndex,a=[];return s.forEach(({$:i,i:l})=>{if(!Ro(i))return;let c=[];r.forEach((u,f)=>{c.push(...this._findMatches({key:u,value:i[f],searcher:n}))}),c.length&&a.push({idx:l,item:i,matches:c})}),a}_findMatches({key:t,value:n,searcher:r}){if(!Ro(n))return[];let s=[];if(Au(n))n.forEach(({v:a,i,n:l})=>{if(!Ro(a))return;const{isMatch:c,score:u,indices:f}=r.searchIn(a);c&&s.push({score:u,key:t,value:a,idx:i,norm:l,indices:f})});else{const{v:a,n:i}=n,{isMatch:l,score:c,indices:u}=r.searchIn(a);l&&s.push({score:c,key:t,value:a,norm:i,indices:u})}return s}}Vx.version="7.0.0";Vx.createIndex=Z5e;Vx.parseIndex=HPt;Vx.config=Gt;Vx.parseQuery=n3e;a8t(s8t);const Vi=(e,t)=>{if(e==null||e===void 0)return null;const n=2;let r=Math.min(n,t.maxDecimals??n);const s=Math.min(n,t.maxDecimals??n);return e>1e5&&(r=1),e.toLocaleString(t.locale,{style:t.currency?"currency":"decimal",notation:"compact",currency:t.currency,minimumFractionDigits:r,maximumFractionDigits:s})};function pse(e,t,n){return e==null||t==null?null:`${Vi(e,n)} - ${Vi(t,n)}`}const hse=(e,t,n)=>e==null||e===void 0?null:e.toLocaleString(t.locale,{style:"decimal",notation:"compact",...n});function f8t(e,t=6){if(e===0)return{minimumFractionDigits:0,maximumFractionDigits:1};let n=0,r=2;if(e!==0&&Math.abs(e)<1){let s=0,a=Math.abs(e);for(;a<1&&s<t;)a*=10,s++;n=Math.max(0,s-1),r=s}return{minimumFractionDigits:n,maximumFractionDigits:r}}const gse=(e,t,n)=>{if(e==null||e===void 0)return null;let{minimumFractionDigits:r,maximumFractionDigits:s}=f8t(e,6);return r=r,s=s,r>s&&(s=r),e*100>.001&&(r=2,s=2),e===0?"":e.toLocaleString(t.locale,{style:"percent",...n,minimumFractionDigits:r,maximumFractionDigits:s})},gr={previousClose:e=>Vi(e.d.previousClose,e),open:e=>Vi(e.d.open,e),dayRange:e=>pse(e.d.dayLow,e.d.dayHigh,{...e,maxDecimals:1}),yearRange:e=>pse(e.d.yearLow,e.d.yearHigh,{...e,maxDecimals:1}),eps:e=>Vi(e.d.eps,e),dayHigh:e=>Vi(e.d.dayHigh,e),dayLow:e=>Vi(e.d.dayLow,e),marketCap:e=>Vi(e.d.marketCap,e),pe:e=>{const t=e.d.pe;return t&&t<0?"":hse(t,e,{minimumFractionDigits:2})},dividendYieldTTM:e=>gse(e.d.dividendYieldTTM,e),volume:e=>hse(e.d.volume,e),dollarVolume24h:e=>Vi(e.d.dollarVolume24h,e),yearHigh:e=>Vi(e.d.yearHigh,e),yearLow:e=>Vi(e.d.yearLow,e),fundingRate:e=>gse(e.d.fundingRate?+e.d.fundingRate*100:null,e)},m8t={previousClose:gr.previousClose,volume:gr.volume,dayHigh:gr.dayHigh,open:gr.open,dayLow:gr.dayLow,yearHigh:gr.yearHigh,yearLow:gr.yearLow},p8t={previousClose:gr.previousClose,dollarVolume24h:gr.dollarVolume24h,dayHigh:gr.dayHigh,open:gr.open,dayLow:gr.dayLow,yearHigh:gr.yearHigh,yearLow:gr.yearLow,fundingRate:gr.fundingRate,marketCap:gr.marketCap},h8t={previousClose:gr.previousClose,yearRange:gr.yearRange,marketCap:gr.marketCap,open:gr.open,pe:gr.pe,dividendYieldTTM:gr.dividendYieldTTM,dayRange:gr.dayRange,volume:gr.volume,eps:gr.eps},yse={DEFAULT:h8t,CRYPTO:p8t,COMMODITY:m8t};function g8t({quote:e,type:t,currency:n,locale:r}){const s=yse[t||"DEFAULT"]??yse.DEFAULT;return Object.entries(s).map(([i,l])=>{const c=l({d:e,locale:r,currency:n});return c==null?null:{value:c,label:i,id:i}}).filter(i=>i!==null)}const y8t=({dt:e,dd:t,id:n})=>{const{isMobileStyle:r}=xe(),{breakpoint:s}=Np(),a=["md","sm"].includes(s)&&r;return o.jsxs("div",{className:"gap-x-sm py-xs px-sm md:p-sm flex flex-col gap-y-0.5 whitespace-nowrap md:flex-row md:justify-between",children:[o.jsx("dt",{children:o.jsx(F,{variant:a?"micro":"small",color:"light",children:e})}),o.jsx("dd",{children:o.jsx(F,{variant:a?"tiny":"smallBold",children:t})})]},n)},xse=({children:e})=>o.jsx(z,{variant:"background",children:e}),r3e=I.memo(({entries:e})=>{const t=(3-e.length%3)%3;return o.jsx("div",{className:"scrollbar-subtle overflow-x-auto",children:o.jsxs(z,{className:"grid min-w-max grid-cols-3 gap-px",variant:"subtler",children:[e.map(({label:n,value:r})=>o.jsx(xse,{children:o.jsx(y8t,{dt:n,dd:r,id:n})},n)),Array.from({length:t}).map((n,r)=>o.jsx(xse,{},r))]})})});r3e.displayName="FinanceGenericTable";const x8t=Qe({finance:{defaultMessage:"Finance",id:"Fm3M+yFIbr"},analysis:{defaultMessage:"Analysis",id:"VMIM8/fAKn"},companyOverview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},balanceSheet:{defaultMessage:"Balance Sheet",id:"ak91fL/u+x"},incomeStatement:{defaultMessage:"Income Statement",id:"HFT+V86brH"},keyStats:{defaultMessage:"Key Stats",id:"0FPlBr741P"},cashFlow:{defaultMessage:"Cash Flow",id:"mtw9A2k000"},date:{defaultMessage:"Date",id:"P7PLVjLe4f"},marketSummary:{defaultMessage:"Market Summary",id:"/4s4TMc/a+"},price:{defaultMessage:"Price",id:"b1zuN9KTHI"},symbol:{defaultMessage:"Symbol",id:"3HepmQoEZ+"},value:{defaultMessage:"Value",id:"GufXy52FNI"},percentage:{defaultMessage:"Percentage",id:"HyMpO2UIBG"},currency:{defaultMessage:"Currency",id:"55hdQy4uHO"},open:{defaultMessage:"Open",id:"JfG49wNHKP"},dayHigh:{defaultMessage:"High",id:"AxMhQrcUDC"},dayLow:{defaultMessage:"Low",id:"477I0ggSYe"},marketCap:{defaultMessage:"Market Cap",id:"9Mp3OYduig"},pe:{defaultMessage:"P/E Ratio",id:"fWnwRImZ9W"},volume24h:{defaultMessage:"24H Volume",id:"w7Tm/B63El"},dollarVolume24h:{defaultMessage:"24H Volume",id:"w7Tm/B63El"},volumeChange24h:{defaultMessage:"24H Volume Change",id:"CndnNLlEs+"},fundingRate:{defaultMessage:"Funding Rate",id:"CB1174SKrI"},volume:{defaultMessage:"Volume",id:"y867VsgbzT"},yearHigh:{defaultMessage:"Year High",id:"yh2gWeU/Gz"},yearLow:{defaultMessage:"Year Low",id:"fZpEs5CIaC"},avgVolume:{defaultMessage:"Avg. Volume",id:"MDNqWO8yDU"},dayRange:{defaultMessage:"Day Range",id:"6VJrMyvXcR"},yearRange:{defaultMessage:"52W Range",id:"FkJo44zhH6"},eps:{defaultMessage:"EPS",id:"JncK2a8+G4"},dividendYieldTTM:{defaultMessage:"Dividend Yield",id:"P3CiJnt5+6"},dividendYielTTM:{defaultMessage:"Dividend Yield",id:"P3CiJnt5+6"},previousClose:{defaultMessage:"Prev Close",id:"0jUP9zUh5z"},priceComparison:{defaultMessage:"Price Comparison",id:"MFuchsfwj7"},stockPerformance:{defaultMessage:"Stock Performance",id:"qEQxp1ikMt"},companyFinancials:{defaultMessage:"{company} Financials",id:"gWNvqjwoWh"},"13FFilings":{defaultMessage:"13F Filings",id:"XzGhyAgjmS"},pricePerformance:{defaultMessage:"Price & Performance",id:"nCv3Ti2cp5"},peers:{defaultMessage:"Peers",id:"JjgJTAa2wL"},transcriptLogin:{defaultMessage:"Login to view transcripts from {quartr}",id:"xY8csKCosL"},newsAndMarketInsights:{defaultMessage:"Latest News",id:"BlFeZAX10O"},recentTranscripts:{defaultMessage:"Recent Transcripts",id:"tiSu9ozyS4"},earnings:{defaultMessage:"Earnings",id:"14sEVuq+Kb"},related:{defaultMessage:"Related",id:"KQsZBWlEw/"},topMovers:{defaultMessage:"Top Movers",id:"e+JmwAUicC"}}),v8t=(e,t)=>{if(!t)return"";const n=x8t[t];return n?e(n):""},s3e=I.memo(({quote:e,type:t})=>{const{$t:n,locale:r}=Z(),s=d.useMemo(()=>e?g8t({quote:e,type:t,currency:e?.currency||void 0,locale:r}).map(i=>({...i,label:v8t(n,i.label),value:i.value})):[],[e,t,n,r]);return yp("financial-profile",{skip:!s.length}),o.jsx(r3e,{entries:s})});s3e.displayName="FinanceFinancialProfile";const a3e=I.memo(({quote:e,type:t,className:n})=>{const{renderingContext:r}=xH(),a=r==="widget"?"div":Wt;return e?o.jsx(a,{className:B("overflow-hidden",n),testId:"financial-profile-box",children:o.jsx(s3e,{quote:e,type:t})}):null});a3e.displayName="FinanceFinancialProfileCard";var WW=vw(),Jt=e=>xw(e,WW),HW=vw();Jt.write=e=>xw(e,HW);var YT=vw();Jt.onStart=e=>xw(e,YT);var zW=vw();Jt.onFrame=e=>xw(e,zW);var GW=vw();Jt.onFinish=e=>xw(e,GW);var vg=[];Jt.setTimeout=(e,t)=>{const n=Jt.now()+t,r=()=>{const a=vg.findIndex(i=>i.cancel==r);~a&&vg.splice(a,1),vd-=~a?1:0},s={time:n,handler:e,cancel:r};return vg.splice(o3e(n),0,s),vd+=1,i3e(),s};var o3e=e=>~(~vg.findIndex(t=>t.time>e)||~vg.length);Jt.cancel=e=>{YT.delete(e),zW.delete(e),GW.delete(e),WW.delete(e),HW.delete(e)};Jt.sync=e=>{Y7=!0,Jt.batchedUpdates(e),Y7=!1};Jt.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,Jt.onStart(n)}return r.handler=e,r.cancel=()=>{YT.delete(n),t=null},r};var qW=typeof window<"u"?window.requestAnimationFrame:()=>{};Jt.use=e=>qW=e;Jt.now=typeof performance<"u"?()=>performance.now():Date.now;Jt.batchedUpdates=e=>e();Jt.catch=console.error;Jt.frameLoop="always";Jt.advance=()=>{Jt.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):c3e()};var xd=-1,vd=0,Y7=!1;function xw(e,t){Y7?(t.delete(e),e(0)):(t.add(e),i3e())}function i3e(){xd<0&&(xd=0,Jt.frameLoop!=="demand"&&qW(l3e))}function b8t(){xd=-1}function l3e(){~xd&&(qW(l3e),Jt.batchedUpdates(c3e))}function c3e(){const e=xd;xd=Jt.now();const t=o3e(xd);if(t&&(u3e(vg.splice(0,t),n=>n.handler()),vd-=t),!vd){b8t();return}YT.flush(),WW.flush(e?Math.min(64,xd-e):16.667),zW.flush(),HW.flush(),GW.flush()}function vw(){let e=new Set,t=e;return{add(n){vd+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return vd-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,vd-=t.size,u3e(t,r=>r(n)&&e.add(r)),vd+=e.size,t=e)}}}function u3e(e,t){e.forEach(n=>{try{t(n)}catch(r){Jt.catch(r)}})}var _8t=Object.defineProperty,w8t=(e,t)=>{for(var n in t)_8t(e,n,{get:t[n],enumerable:!0})},dl={};w8t(dl,{assign:()=>S8t,colors:()=>Od,createStringInterpolator:()=>YW,skipAnimation:()=>f3e,to:()=>d3e,willAdvance:()=>QW});function Q7(){}var C8t=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),Ve={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function Qc(e,t){if(Ve.arr(e)){if(!Ve.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var zt=(e,t)=>e.forEach(t);function wc(e,t,n){if(Ve.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var Da=e=>Ve.und(e)?[]:Ve.arr(e)?e:[e];function Q0(e,t){if(e.size){const n=Array.from(e);e.clear(),zt(n,t)}}var u0=(e,...t)=>Q0(e,n=>n(...t)),KW=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),YW,d3e,Od=null,f3e=!1,QW=Q7,S8t=e=>{e.to&&(d3e=e.to),e.now&&(Jt.now=e.now),e.colors!==void 0&&(Od=e.colors),e.skipAnimation!=null&&(f3e=e.skipAnimation),e.createStringInterpolator&&(YW=e.createStringInterpolator),e.requestAnimationFrame&&Jt.use(e.requestAnimationFrame),e.batchedUpdates&&(Jt.batchedUpdates=e.batchedUpdates),e.willAdvance&&(QW=e.willAdvance),e.frameLoop&&(Jt.frameLoop=e.frameLoop)},X0=new Set,vi=[],ZA=[],nk=0,QT={get idle(){return!X0.size&&!vi.length},start(e){nk>e.priority?(X0.add(e),Jt.onStart(E8t)):(m3e(e),Jt(X7))},advance:X7,sort(e){if(nk)Jt.onFrame(()=>QT.sort(e));else{const t=vi.indexOf(e);~t&&(vi.splice(t,1),p3e(e))}},clear(){vi=[],X0.clear()}};function E8t(){X0.forEach(m3e),X0.clear(),Jt(X7)}function m3e(e){vi.includes(e)||p3e(e)}function p3e(e){vi.splice(M8t(vi,t=>t.priority>e.priority),0,e)}function X7(e){const t=ZA;for(let n=0;n<vi.length;n++){const r=vi[n];nk=r.priority,r.idle||(QW(r),r.advance(e),r.idle||t.push(r))}return nk=0,ZA=vi,ZA.length=0,vi=t,vi.length>0}function M8t(e,t){const n=e.findIndex(t);return n<0?e.length:n}var k8t={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},Xi="[-+]?\\d*\\.?\\d+",rk=Xi+"%";function XT(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var T8t=new RegExp("rgb"+XT(Xi,Xi,Xi)),N8t=new RegExp("rgba"+XT(Xi,Xi,Xi,Xi)),j8t=new RegExp("hsl"+XT(Xi,rk,rk)),A8t=new RegExp("hsla"+XT(Xi,rk,rk,Xi)),I8t=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,R8t=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,P8t=/^#([0-9a-fA-F]{6})$/,L8t=/^#([0-9a-fA-F]{8})$/;function O8t(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=P8t.exec(e))?parseInt(t[1]+"ff",16)>>>0:Od&&Od[e]!==void 0?Od[e]:(t=T8t.exec(e))?(uh(t[1])<<24|uh(t[2])<<16|uh(t[3])<<8|255)>>>0:(t=N8t.exec(e))?(uh(t[1])<<24|uh(t[2])<<16|uh(t[3])<<8|_se(t[4]))>>>0:(t=I8t.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=L8t.exec(e))?parseInt(t[1],16)>>>0:(t=R8t.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=j8t.exec(e))?(vse(bse(t[1]),yS(t[2]),yS(t[3]))|255)>>>0:(t=A8t.exec(e))?(vse(bse(t[1]),yS(t[2]),yS(t[3]))|_se(t[4]))>>>0:null}function JA(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function vse(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,a=JA(s,r,e+1/3),i=JA(s,r,e),l=JA(s,r,e-1/3);return Math.round(a*255)<<24|Math.round(i*255)<<16|Math.round(l*255)<<8}function uh(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function bse(e){return(parseFloat(e)%360+360)%360/360}function _se(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function yS(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function wse(e){let t=O8t(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,a=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${a})`}var _b=(e,t,n)=>{if(Ve.fun(e))return e;if(Ve.arr(e))return _b({range:e,output:t,extrapolate:n});if(Ve.str(e.output[0]))return YW(e);const r=e,s=r.output,a=r.range||[0,1],i=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const f=F8t(u,a);return D8t(u,a[f],a[f+1],s[f],s[f+1],c,i,l,r.map)}};function D8t(e,t,n,r,s,a,i,l,c){let u=c?c(e):e;if(u<t){if(i==="identity")return u;i==="clamp"&&(u=t)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=a(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function F8t(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var U8t={linear:e=>e},wb=Symbol.for("FluidValue.get"),wy=Symbol.for("FluidValue.observers"),yi=e=>!!(e&&e[wb]),ro=e=>e&&e[wb]?e[wb]():e,Cse=e=>e[wy]||null;function B8t(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Cb(e,t){const n=e[wy];n&&n.forEach(r=>{B8t(r,t)})}var h3e=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");$8t(this,e)}},$8t=(e,t)=>g3e(e,wb,t);function Wx(e,t){if(e[wb]){let n=e[wy];n||g3e(e,wy,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Sb(e,t){const n=e[wy];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[wy]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var g3e=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),F2=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,V8t=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Sse=new RegExp(`(${F2.source})(%|[a-z]+)`,"i"),W8t=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,ZT=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,y3e=e=>{const[t,n]=H8t(e);if(!t||KW())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&ZT.test(n))return y3e(n);if(n)return n}return e},H8t=e=>{const t=ZT.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},eI,z8t=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,x3e=e=>{eI||(eI=Od?new RegExp(`(${Object.keys(Od).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(a=>ro(a).replace(ZT,y3e).replace(V8t,wse).replace(eI,wse)),n=t.map(a=>a.match(F2).map(Number)),s=n[0].map((a,i)=>n.map(l=>{if(!(i in l))throw Error('The arity of each "output" value must be equal');return l[i]})).map(a=>_b({...e,output:a}));return a=>{const i=!Sse.test(t[0])&&t.find(c=>Sse.test(c))?.replace(F2,"");let l=0;return t[0].replace(F2,()=>`${s[l++](a)}${i||""}`).replace(W8t,z8t)}},XW="react-spring: ",v3e=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${XW}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},G8t=v3e(console.warn);function q8t(){G8t(`${XW}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var K8t=v3e(console.warn);function Y8t(){K8t(`${XW}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function JT(e){return Ve.str(e)&&(e[0]=="#"||/\d/.test(e)||!KW()&&ZT.test(e)||e in(Od||{}))}var pm=KW()?d.useEffect:d.useLayoutEffect,Q8t=()=>{const e=d.useRef(!1);return pm(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function ZW(){const e=d.useState()[1],t=Q8t();return()=>{t.current&&e(Math.random())}}function X8t(e,t){const[n]=d.useState(()=>({inputs:t,result:e()})),r=d.useRef(),s=r.current;let a=s;return a?t&&a.inputs&&Z8t(t,a.inputs)||(a={inputs:t,result:e()}):a=n,d.useEffect(()=>{r.current=a,s==n&&(n.inputs=n.result=void 0)},[a]),a.result}function Z8t(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var JW=e=>d.useEffect(e,J8t),J8t=[];function Z7(e){const t=d.useRef();return d.useEffect(()=>{t.current=e}),t.current}var Eb=Symbol.for("Animated:node"),e9t=e=>!!e&&e[Eb]===e,Rl=e=>e&&e[Eb],eH=(e,t)=>C8t(e,Eb,t),e4=e=>e&&e[Eb]&&e[Eb].getPayload(),b3e=class{constructor(){eH(this,this)}getPayload(){return this.payload||[]}},bw=class extends b3e{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,Ve.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new bw(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return Ve.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,Ve.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Mb=class extends bw{constructor(e){super(0),this._string=null,this._toString=_b({output:[e,e]})}static create(e){return new Mb(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(Ve.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=_b({output:[this.getValue(),e]})),this._value=0,super.reset()}},sk={dependencies:null},t4=class extends b3e{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return wc(this.source,(n,r)=>{e9t(n)?t[r]=n.getValue(e):yi(n)?t[r]=ro(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&zt(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return wc(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){sk.dependencies&&yi(e)&&sk.dependencies.add(e);const t=e4(e);t&&zt(t,n=>this.add(n))}},_3e=class extends t4{constructor(e){super(e)}static create(e){return new _3e(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(t9t)),!0)}};function t9t(e){return(JT(e)?Mb:bw).create(e)}function J7(e){const t=Rl(e);return t?t.constructor:Ve.arr(e)?_3e:JT(e)?Mb:bw}var Ese=(e,t)=>{const n=!Ve.fun(e)||e.prototype&&e.prototype.isReactComponent;return d.forwardRef((r,s)=>{const a=d.useRef(null),i=n&&d.useCallback(g=>{a.current=s9t(s,g)},[s]),[l,c]=r9t(r,t),u=ZW(),f=()=>{const g=a.current;if(n&&!g)return;(g?t.applyAnimatedValues(g,l.getValue(!0)):!1)===!1&&u()},m=new n9t(f,c),p=d.useRef();pm(()=>(p.current=m,zt(c,g=>Wx(g,m)),()=>{p.current&&(zt(p.current.deps,g=>Sb(g,p.current)),Jt.cancel(p.current.update))})),d.useEffect(f,[]),JW(()=>()=>{const g=p.current;zt(g.deps,y=>Sb(y,g))});const h=t.getComponentProps(l.getValue());return d.createElement(e,{...h,ref:i})})},n9t=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&Jt.write(this.update)}};function r9t(e,t){const n=new Set;return sk.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new t4(e),sk.dependencies=null,[e,n]}function s9t(e,t){return e&&(Ve.fun(e)?e(t):e.current=t),t}var Mse=Symbol.for("AnimatedComponent"),a9t=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new t4(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},a=i=>{const l=kse(i)||"Anonymous";return Ve.str(i)?i=a[i]||(a[i]=Ese(i,s)):i=i[Mse]||(i[Mse]=Ese(i,s)),i.displayName=`Animated(${l})`,i};return wc(e,(i,l)=>{Ve.arr(e)&&(l=kse(i)),a[l]=a(i)}),{animated:a}},kse=e=>Ve.str(e)?e:e&&Ve.str(e.displayName)?e.displayName:Ve.fun(e)&&e.name||null;function so(e,...t){return Ve.fun(e)?e(...t):e}var Z0=(e,t)=>e===!0||!!(t&&e&&(Ve.fun(e)?e(t):Da(e).includes(t))),w3e=(e,t)=>Ve.obj(e)?t&&e[t]:e,C3e=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,o9t=e=>e,n4=(e,t=o9t)=>{let n=i9t;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const a=t(e[s],s);Ve.und(a)||(r[s]=a)}return r},i9t=["config","onProps","onStart","onChange","onPause","onResume","onRest"],l9t={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function c9t(e){const t={};let n=0;if(wc(e,(r,s)=>{l9t[s]||(t[s]=r,n++)}),n)return t}function tH(e){const t=c9t(e);if(t){const n={to:t};return wc(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function kb(e){return e=ro(e),Ve.arr(e)?e.map(kb):JT(e)?dl.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function S3e(e){for(const t in e)return!0;return!1}function eL(e){return Ve.fun(e)||Ve.arr(e)&&Ve.obj(e[0])}function tL(e,t){e.ref?.delete(e),t?.delete(e)}function E3e(e,t){t&&e.ref!==t&&(e.ref?.delete(e),t.add(e),e.ref=t)}var u9t={default:{tension:170,friction:26}},nL={...u9t.default,mass:1,damping:1,easing:U8t.linear,clamp:!1},d9t=class{constructor(){this.velocity=0,Object.assign(this,nL)}};function f9t(e,t,n){n&&(n={...n},Tse(n,t),t={...n,...t}),Tse(e,t),Object.assign(e,t);for(const i in nL)e[i]==null&&(e[i]=nL[i]);let{frequency:r,damping:s}=e;const{mass:a}=e;return Ve.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*a,e.friction=4*Math.PI*s*a/r),e}function Tse(e,t){if(!Ve.und(t.decay))e.duration=void 0;else{const n=!Ve.und(t.tension)||!Ve.und(t.friction);(n||!Ve.und(t.frequency)||!Ve.und(t.damping)||!Ve.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var Nse=[],m9t=class{constructor(){this.changed=!1,this.values=Nse,this.toValues=null,this.fromValues=Nse,this.config=new d9t,this.immediate=!1}};function M3e(e,{key:t,props:n,defaultProps:r,state:s,actions:a}){return new Promise((i,l)=>{let c,u,f=Z0(n.cancel??r?.cancel,t);if(f)h();else{Ve.und(n.pause)||(s.paused=Z0(n.pause,t));let g=r?.pause;g!==!0&&(g=s.paused||Z0(g,t)),c=so(n.delay||0,t),g?(s.resumeQueue.add(p),a.pause()):(a.resume(),p())}function m(){s.resumeQueue.add(p),s.timeouts.delete(u),u.cancel(),c=u.time-Jt.now()}function p(){c>0&&!dl.skipAnimation?(s.delayed=!0,u=Jt.setTimeout(h,c),s.pauseQueue.add(m),s.timeouts.add(u)):h()}function h(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(m),s.timeouts.delete(u),e<=(s.cancelId||0)&&(f=!0);try{a.start({...n,callId:e,cancel:f},i)}catch(g){l(g)}}})}var nH=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?bg(e.get()):t.every(n=>n.noop)?k3e(e.get()):qi(e.get(),t.every(n=>n.finished)),k3e=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),qi=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),bg=e=>({value:e,cancelled:!0,finished:!1});function T3e(e,t,n,r){const{callId:s,parentId:a,onRest:i}=t,{asyncTo:l,promise:c}=n;return!a&&e===l&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=n4(t,(x,v)=>v==="onRest"?void 0:x);let f,m;const p=new Promise((x,v)=>(f=x,m=v)),h=x=>{const v=s<=(n.cancelId||0)&&bg(r)||s!==n.asyncId&&qi(r,!1);if(v)throw x.result=v,m(x),x},g=(x,v)=>{const b=new jse,_=new Ase;return(async()=>{if(dl.skipAnimation)throw Tb(n),_.result=qi(r,!1),m(_),_;h(b);const w=Ve.obj(x)?{...x}:{...v,to:x};w.parentId=s,wc(u,(S,E)=>{Ve.und(w[E])&&(w[E]=S)});const C=await r.start(w);return h(b),n.paused&&await new Promise(S=>{n.resumeQueue.add(S)}),C})()};let y;if(dl.skipAnimation)return Tb(n),qi(r,!1);try{let x;Ve.arr(e)?x=(async v=>{for(const b of v)await g(b)})(e):x=Promise.resolve(e(g,r.stop.bind(r))),await Promise.all([x.then(f),p]),y=qi(r.get(),!0,!1)}catch(x){if(x instanceof jse)y=x.result;else if(x instanceof Ase)y=x.result;else throw x}finally{s==n.asyncId&&(n.asyncId=a,n.asyncTo=a?l:void 0,n.promise=a?c:void 0)}return Ve.fun(i)&&Jt.batchedUpdates(()=>{i(y,r,r.item)}),y})()}function Tb(e,t){Q0(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var jse=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Ase=class extends Error{constructor(){super("SkipAnimationSignal")}},rL=e=>e instanceof rH,p9t=1,rH=class extends h3e{constructor(){super(...arguments),this.id=p9t++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=Rl(this);return e&&e.getValue()}to(...e){return dl.to(this,e)}interpolate(...e){return q8t(),dl.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Cb(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||QT.sort(this),Cb(this,{type:"priority",parent:this,priority:e})}},ap=Symbol.for("SpringPhase"),N3e=1,j3e=2,A3e=4,tI=e=>(e[ap]&N3e)>0,td=e=>(e[ap]&j3e)>0,Rv=e=>(e[ap]&A3e)>0,Ise=(e,t)=>t?e[ap]|=j3e|N3e:e[ap]&=-3,Rse=(e,t)=>t?e[ap]|=A3e:e[ap]&=-5,h9t=class extends rH{constructor(e,t){if(super(),this.animation=new m9t,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!Ve.und(e)||!Ve.und(t)){const n=Ve.obj(e)?{...e}:{...t,from:e};Ve.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(td(this)||this._state.asyncTo)||Rv(this)}get goal(){return ro(this.animation.to)}get velocity(){const e=Rl(this);return e instanceof bw?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return tI(this)}get isAnimating(){return td(this)}get isPaused(){return Rv(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:a}=r,i=e4(r.to);!i&&yi(r.to)&&(s=Da(ro(r.to))),r.values.forEach((u,f)=>{if(u.done)return;const m=u.constructor==Mb?1:i?i[f].lastPosition:s[f];let p=r.immediate,h=m;if(!p){if(h=u.lastPosition,a.tension<=0){u.done=!0;return}let g=u.elapsedTime+=e;const y=r.fromValues[f],x=u.v0!=null?u.v0:u.v0=Ve.arr(a.velocity)?a.velocity[f]:a.velocity;let v;const b=a.precision||(y==m?.005:Math.min(1,Math.abs(m-y)*.001));if(Ve.und(a.duration))if(a.decay){const _=a.decay===!0?.998:a.decay,w=Math.exp(-(1-_)*g);h=y+x/(1-_)*(1-w),p=Math.abs(u.lastPosition-h)<=b,v=x*w}else{v=u.lastVelocity==null?x:u.lastVelocity;const _=a.restVelocity||b/10,w=a.clamp?0:a.bounce,C=!Ve.und(w),S=y==m?u.v0>0:y<m;let E,k=!1;const M=1,j=Math.ceil(e/M);for(let R=0;R<j&&(E=Math.abs(v)>_,!(!E&&(p=Math.abs(m-h)<=b,p)));++R){C&&(k=h==m||h>m==S,k&&(v=-v*w,h=m));const O=-a.tension*1e-6*(h-m),D=-a.friction*.001*v,P=(O+D)/a.mass;v=v+P*M,h=h+v*M}}else{let _=1;a.duration>0&&(this._memoizedDuration!==a.duration&&(this._memoizedDuration=a.duration,u.durationProgress>0&&(u.elapsedTime=a.duration*u.durationProgress,g=u.elapsedTime+=e)),_=(a.progress||0)+g/this._memoizedDuration,_=_>1?1:_<0?0:_,u.durationProgress=_),h=y+a.easing(_)*(m-y),v=(h-u.lastPosition)/e,p=_==1}u.lastVelocity=v,Number.isNaN(h)&&(console.warn("Got NaN while animating:",this),p=!0)}i&&!i[f].done&&(p=!1),p?u.done=!0:t=!1,u.setValue(h,a.round)&&(n=!0)});const l=Rl(this),c=l.getValue();if(t){const u=ro(r.to);(c!==u||n)&&!a.decay?(l.setValue(u),this._onChange(u)):n&&a.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return Jt.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(td(this)){const{to:e,config:t}=this.animation;Jt.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return Ve.und(e)?(n=this.queue||[],this.queue=[]):n=[Ve.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>nH(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Tb(this._state,e&&this._lastCallId),Jt.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=Ve.obj(n)?n[t]:n,(n==null||eL(n))&&(n=void 0),r=Ve.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return tI(this)||(e.reverse&&([n,r]=[r,n]),r=ro(r),Ve.und(r)?Rl(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,n4(e,(i,l)=>/^on/.test(l)?w3e(i,n):i)),Lse(this,e,"onProps"),Lv(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const a=this._state;return M3e(++this._lastCallId,{key:n,props:e,defaultProps:r,state:a,actions:{pause:()=>{Rv(this)||(Rse(this,!0),u0(a.pauseQueue),Lv(this,"onPause",qi(this,Pv(this,this.animation.to)),this))},resume:()=>{Rv(this)&&(Rse(this,!1),td(this)&&this._resume(),u0(a.resumeQueue),Lv(this,"onResume",qi(this,Pv(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(i=>{if(e.loop&&i.finished&&!(t&&i.noop)){const l=I3e(e);if(l)return this._update(l,!0)}return i})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(bg(this));const r=!Ve.und(e.to),s=!Ve.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(bg(this));const{key:a,defaultProps:i,animation:l}=this,{to:c,from:u}=l;let{to:f=c,from:m=u}=e;s&&!r&&(!t.default||Ve.und(f))&&(f=m),t.reverse&&([f,m]=[m,f]);const p=!Qc(m,u);p&&(l.from=m),m=ro(m);const h=!Qc(f,c);h&&this._focus(f);const g=eL(t.to),{config:y}=l,{decay:x,velocity:v}=y;(r||s)&&(y.velocity=0),t.config&&!g&&f9t(y,so(t.config,a),t.config!==i.config?so(i.config,a):void 0);let b=Rl(this);if(!b||Ve.und(f))return n(qi(this,!0));const _=Ve.und(t.reset)?s&&!t.default:!Ve.und(m)&&Z0(t.reset,a),w=_?m:this.get(),C=kb(f),S=Ve.num(C)||Ve.arr(C)||JT(C),E=!g&&(!S||Z0(i.immediate||t.immediate,a));if(h){const R=J7(f);if(R!==b.constructor)if(E)b=this._set(C);else throw Error(`Cannot animate between ${b.constructor.name} and ${R.name}, as the "to" prop suggests`)}const k=b.constructor;let M=yi(f),j=!1;if(!M){const R=_||!tI(this)&&p;(h||R)&&(j=Qc(kb(w),C),M=!j),(!Qc(l.immediate,E)&&!E||!Qc(y.decay,x)||!Qc(y.velocity,v))&&(M=!0)}if(j&&td(this)&&(l.changed&&!_?M=!0:M||this._stop(c)),!g&&((M||yi(c))&&(l.values=b.getPayload(),l.toValues=yi(f)?null:k==Mb?[1]:Da(C)),l.immediate!=E&&(l.immediate=E,!E&&!_&&this._set(c)),M)){const{onRest:R}=l;zt(y9t,D=>Lse(this,t,D));const O=qi(this,Pv(this,c));u0(this._pendingCalls,O),this._pendingCalls.add(n),l.changed&&Jt.batchedUpdates(()=>{l.changed=!_,R?.(O,this),_?so(i.onRest,O):l.onStart?.(O,this)})}_&&this._set(w),g?n(T3e(t.to,t,this._state,this)):M?this._start():td(this)&&!h?this._pendingCalls.add(n):n(k3e(w))}_focus(e){const t=this.animation;e!==t.to&&(Cse(this)&&this._detach(),t.to=e,Cse(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;yi(t)&&(Wx(t,this),rL(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;yi(e)&&Sb(e,this)}_set(e,t=!0){const n=ro(e);if(!Ve.und(n)){const r=Rl(this);if(!r||!Qc(n,r.getValue())){const s=J7(n);!r||r.constructor!=s?eH(this,s.create(n)):r.setValue(n),r&&Jt.batchedUpdates(()=>{this._onChange(n,t)})}}return Rl(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,Lv(this,"onStart",qi(this,Pv(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),so(this.animation.onChange,e,this)),so(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;Rl(this).reset(ro(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),td(this)||(Ise(this,!0),Rv(this)||this._resume())}_resume(){dl.skipAnimation?this.finish():QT.start(this)}_stop(e,t){if(td(this)){Ise(this,!1);const n=this.animation;zt(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Cb(this,{type:"idle",parent:this});const r=t?bg(this.get()):qi(this.get(),Pv(this,e??n.to));u0(this._pendingCalls,r),n.changed&&(n.changed=!1,Lv(this,"onRest",r,this))}}};function Pv(e,t){const n=kb(t),r=kb(e.get());return Qc(r,n)}function I3e(e,t=e.loop,n=e.to){const r=so(t);if(r){const s=r!==!0&&tH(r),a=(s||e).reverse,i=!s||s.reset;return Nb({...e,loop:t,default:!1,pause:void 0,to:!a||eL(n)?n:void 0,from:i?e.from:void 0,reset:i,...s})}}function Nb(e){const{to:t,from:n}=e=tH(e),r=new Set;return Ve.obj(t)&&Pse(t,r),Ve.obj(n)&&Pse(n,r),e.keys=r.size?Array.from(r):null,e}function g9t(e){const t=Nb(e);return Ve.und(t.default)&&(t.default=n4(t)),t}function Pse(e,t){wc(e,(n,r)=>n!=null&&t.add(r))}var y9t=["onStart","onRest","onChange","onPause","onResume"];function Lse(e,t,n){e.animation[n]=t[n]!==C3e(t,n)?w3e(t[n],e.key):void 0}function Lv(e,t,...n){e.animation[t]?.(...n),e.defaultProps[t]?.(...n)}var x9t=["onStart","onChange","onRest"],v9t=1,R3e=class{constructor(e,t){this.id=v9t++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];Ve.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Nb(e)),this}start(e){let{queue:t}=this;return e?t=Da(e).map(Nb):this.queue=[],this._flush?this._flush(this,t):(F3e(this,t),sL(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;zt(Da(t),r=>n[r].stop(!!e))}else Tb(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(Ve.und(e))this.start({pause:!0});else{const t=this.springs;zt(Da(e),n=>t[n].pause())}return this}resume(e){if(Ve.und(e))this.start({pause:!1});else{const t=this.springs;zt(Da(e),n=>t[n].resume())}return this}each(e){wc(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Q0(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const a=!r&&this._started,i=s||a&&n.size?this.get():null;s&&t.size&&Q0(t,([l,c])=>{c.value=i,l(c,this,this._item)}),a&&(this._started=!1,Q0(n,([l,c])=>{c.value=i,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;Jt.onFrame(this._onFrame)}};function sL(e,t){return Promise.all(t.map(n=>P3e(e,n))).then(n=>nH(e,n))}async function P3e(e,t,n){const{keys:r,to:s,from:a,loop:i,onRest:l,onResolve:c}=t,u=Ve.obj(t.default)&&t.default;i&&(t.loop=!1),s===!1&&(t.to=null),a===!1&&(t.from=null);const f=Ve.arr(s)||Ve.fun(s)?s:void 0;f?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):zt(x9t,y=>{const x=t[y];if(Ve.fun(x)){const v=e._events[y];t[y]=({finished:b,cancelled:_})=>{const w=v.get(x);w?(b||(w.finished=!1),_&&(w.cancelled=!0)):v.set(x,{value:null,finished:b||!1,cancelled:_||!1})},u&&(u[y]=t[y])}});const m=e._state;t.pause===!m.paused?(m.paused=t.pause,u0(t.pause?m.pauseQueue:m.resumeQueue)):m.paused&&(t.pause=!0);const p=(r||Object.keys(e.springs)).map(y=>e.springs[y].start(t)),h=t.cancel===!0||C3e(t,"cancel")===!0;(f||h&&m.asyncId)&&p.push(M3e(++e._lastAsyncId,{props:t,state:m,actions:{pause:Q7,resume:Q7,start(y,x){h?(Tb(m,e._lastAsyncId),x(bg(e))):(y.onRest=l,x(T3e(f,y,m,e)))}}})),m.paused&&await new Promise(y=>{m.resumeQueue.add(y)});const g=nH(e,await Promise.all(p));if(i&&g.finished&&!(n&&g.noop)){const y=I3e(t,i,s);if(y)return F3e(e,[y]),P3e(e,y,!0)}return c&&Jt.batchedUpdates(()=>c(g,e,e.item)),g}function aL(e,t){const n={...e.springs};return t&&zt(Da(t),r=>{Ve.und(r.keys)&&(r=Nb(r)),Ve.obj(r.to)||(r={...r,to:void 0}),D3e(n,r,s=>O3e(s))}),L3e(e,n),n}function L3e(e,t){wc(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,Wx(n,e))})}function O3e(e,t){const n=new h9t;return n.key=e,t&&Wx(n,t),n}function D3e(e,t,n){t.keys&&zt(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function F3e(e,t){zt(t,n=>{D3e(e.springs,n,r=>O3e(r,e))})}var _w=({children:e,...t})=>{const n=d.useContext(ak),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=X8t(()=>({pause:r,immediate:s}),[r,s]);const{Provider:a}=ak;return d.createElement(a,{value:t},e)},ak=b9t(_w,{});_w.Provider=ak.Provider;_w.Consumer=ak.Consumer;function b9t(e,t){return Object.assign(e,d.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var U3e=()=>{const e=[],t=function(r){Y8t();const s=[];return zt(e,(a,i)=>{if(Ve.und(r))s.push(a.start());else{const l=n(r,a,i);l&&s.push(a.start(l))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return zt(e,r=>r.pause(...arguments)),this},t.resume=function(){return zt(e,r=>r.resume(...arguments)),this},t.set=function(r){zt(e,(s,a)=>{const i=Ve.fun(r)?r(a,s):r;i&&s.set(i)})},t.start=function(r){const s=[];return zt(e,(a,i)=>{if(Ve.und(r))s.push(a.start());else{const l=this._getProps(r,a,i);l&&s.push(a.start(l))}}),s},t.stop=function(){return zt(e,r=>r.stop(...arguments)),this},t.update=function(r){return zt(e,(s,a)=>s.update(this._getProps(r,s,a))),this};const n=function(r,s,a){return Ve.fun(r)?r(a,s):r};return t._getProps=n,t};function _9t(e,t,n){const r=Ve.fun(t)&&t;r&&!n&&(n=[]);const s=d.useMemo(()=>r||arguments.length==3?U3e():void 0,[]),a=d.useRef(0),i=ZW(),l=d.useMemo(()=>({ctrls:[],queue:[],flush(v,b){const _=aL(v,b);return a.current>0&&!l.queue.length&&!Object.keys(_).some(C=>!v.springs[C])?sL(v,b):new Promise(C=>{L3e(v,_),l.queue.push(()=>{C(sL(v,b))}),i()})}}),[]),c=d.useRef([...l.ctrls]),u=[],f=Z7(e)||0;d.useMemo(()=>{zt(c.current.slice(e,f),v=>{tL(v,s),v.stop(!0)}),c.current.length=e,m(f,e)},[e]),d.useMemo(()=>{m(0,Math.min(f,e))},n);function m(v,b){for(let _=v;_<b;_++){const w=c.current[_]||(c.current[_]=new R3e(null,l.flush)),C=r?r(_,w):t[_];C&&(u[_]=g9t(C))}}const p=c.current.map((v,b)=>aL(v,u[b])),h=d.useContext(_w),g=Z7(h),y=h!==g&&S3e(h);pm(()=>{a.current++,l.ctrls=c.current;const{queue:v}=l;v.length&&(l.queue=[],zt(v,b=>b())),zt(c.current,(b,_)=>{s?.add(b),y&&b.start({default:h});const w=u[_];w&&(E3e(b,w.ref),b.ref?b.queue.push(w):b.start(w))})}),JW(()=>()=>{zt(l.ctrls,v=>v.stop(!0))});const x=p.map(v=>({...v}));return s?[x,s]:x}function B3e(e,t){const n=Ve.fun(e),[[r],s]=_9t(1,n?e:[e],n?[]:t);return n||arguments.length==2?[r,s]:r}function $3e(e,t,n){const r=Ve.fun(t)&&t,{reset:s,sort:a,trail:i=0,expires:l=!0,exitBeforeEnter:c=!1,onDestroyed:u,ref:f,config:m}=r?r():t,p=d.useMemo(()=>r||arguments.length==3?U3e():void 0,[]),h=Da(e),g=[],y=d.useRef(null),x=s?null:y.current;pm(()=>{y.current=g}),JW(()=>(zt(g,P=>{p?.add(P.ctrl),P.ctrl.ref=p}),()=>{zt(y.current,P=>{P.expired&&clearTimeout(P.expirationId),tL(P.ctrl,p),P.ctrl.stop(!0)})}));const v=C9t(h,r?r():t,x),b=s&&y.current||[];pm(()=>zt(b,({ctrl:P,item:A,key:T})=>{tL(P,p),so(u,A,T)}));const _=[];if(x&&zt(x,(P,A)=>{P.expired?(clearTimeout(P.expirationId),b.push(P)):(A=_[A]=v.indexOf(P.key),~A&&(g[A]=P))}),zt(h,(P,A)=>{g[A]||(g[A]={key:v[A],item:P,phase:"mount",ctrl:new R3e},g[A].ctrl.item=P)}),_.length){let P=-1;const{leave:A}=r?r():t;zt(_,(T,N)=>{const L=x[N];~T?(P=g.indexOf(L),g[P]={...L,item:h[T]}):A&&g.splice(++P,0,L)})}Ve.fun(a)&&g.sort((P,A)=>a(P.item,A.item));let w=-i;const C=ZW(),S=n4(t),E=new Map,k=d.useRef(new Map),M=d.useRef(!1);zt(g,(P,A)=>{const T=P.key,N=P.phase,L=r?r():t;let U,$;const V=so(L.delay||0,T);if(N=="mount")U=L.enter,$="enter";else{const H=v.indexOf(T)<0;if(N!="leave")if(H)U=L.leave,$="leave";else if(U=L.update)$="update";else return;else if(!H)U=L.enter,$="enter";else return}if(U=so(U,P.item,A),U=Ve.obj(U)?tH(U):{to:U},!U.config){const H=m||S.config;U.config=so(H,P.item,A,$)}w+=i;const W={...S,delay:V+w,ref:f,immediate:L.immediate,reset:!1,...U};if($=="enter"&&Ve.und(W.from)){const H=r?r():t,K=Ve.und(H.initial)||x?H.from:H.initial;W.from=so(K,P.item,A)}const{onResolve:Q}=W;W.onResolve=H=>{so(Q,H);const K=y.current,G=K.find(ee=>ee.key===T);if(G&&!(H.cancelled&&G.phase!="update")&&G.ctrl.idle){const ee=K.every(Y=>Y.ctrl.idle);if(G.phase=="leave"){const Y=so(l,G.item);if(Y!==!1){const te=Y===!0?0:Y;if(G.expired=!0,!ee&&te>0){te<=2147483647&&(G.expirationId=setTimeout(C,te));return}}}ee&&K.some(Y=>Y.expired)&&(k.current.delete(G),c&&(M.current=!0),C())}};const q=aL(P.ctrl,W);$==="leave"&&c?k.current.set(P,{phase:$,springs:q,payload:W}):E.set(P,{phase:$,springs:q,payload:W})});const j=d.useContext(_w),R=Z7(j),O=j!==R&&S3e(j);pm(()=>{O&&zt(g,P=>{P.ctrl.start({default:j})})},[j]),zt(E,(P,A)=>{if(k.current.size){const T=g.findIndex(N=>N.key===A.key);g.splice(T,1)}}),pm(()=>{zt(k.current.size?k.current:E,({phase:P,payload:A},T)=>{const{ctrl:N}=T;T.phase=P,p?.add(N),O&&P=="enter"&&N.start({default:j}),A&&(E3e(N,A.ref),(N.ref||p)&&!M.current?N.update(A):(N.start(A),M.current&&(M.current=!1)))})},s?void 0:n);const D=P=>d.createElement(d.Fragment,null,g.map((A,T)=>{const{springs:N}=E.get(A)||A.ctrl,L=P({...N},A.item,A,T);return L&&L.type?d.createElement(L.type,{...L.props,key:Ve.str(A.key)||Ve.num(A.key)?A.key:A.ctrl.id,ref:L.ref}):L}));return p?[D,p]:D}var w9t=1;function C9t(e,{key:t,keys:n=t},r){if(n===null){const s=new Set;return e.map(a=>{const i=r&&r.find(l=>l.item===a&&l.phase!=="leave"&&!s.has(l));return i?(s.add(i),i.key):w9t++})}return Ve.und(n)?e:Ve.fun(n)?e.map(n):Da(n)}var V3e=class extends rH{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=_b(...t);const n=this._get(),r=J7(n);eH(this,r.create(n))}advance(e){const t=this._get(),n=this.get();Qc(t,n)||(Rl(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Ose(this._active)&&nI(this)}_get(){const e=Ve.arr(this.source)?this.source.map(ro):Da(ro(this.source));return this.calc(...e)}_start(){this.idle&&!Ose(this._active)&&(this.idle=!1,zt(e4(this),e=>{e.done=!1}),dl.skipAnimation?(Jt.batchedUpdates(()=>this.advance()),nI(this)):QT.start(this))}_attach(){let e=1;zt(Da(this.source),t=>{yi(t)&&Wx(t,this),rL(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){zt(Da(this.source),e=>{yi(e)&&Sb(e,this)}),this._active.clear(),nI(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=Da(this.source).reduce((t,n)=>Math.max(t,(rL(n)?n.priority:0)+1),0))}};function S9t(e){return e.idle!==!1}function Ose(e){return!e.size||Array.from(e).every(S9t)}function nI(e){e.idle||(e.idle=!0,zt(e4(e),t=>{t.done=!0}),Cb(e,{type:"idle",parent:e}))}var E9t=(e,...t)=>new V3e(e,t);dl.assign({createStringInterpolator:x3e,to:(e,t)=>new V3e(e,t)});var W3e=/^--/;function M9t(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!W3e.test(e)&&!(J0.hasOwnProperty(e)&&J0[e])?t+"px":(""+t).trim()}var Dse={};function k9t(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{className:r,style:s,children:a,scrollTop:i,scrollLeft:l,viewBox:c,...u}=t,f=Object.values(u),m=Object.keys(u).map(p=>n||e.hasAttribute(p)?p:Dse[p]||(Dse[p]=p.replace(/([A-Z])/g,h=>"-"+h.toLowerCase())));a!==void 0&&(e.textContent=a);for(const p in s)if(s.hasOwnProperty(p)){const h=M9t(p,s[p]);W3e.test(p)?e.style.setProperty(p,h):e.style[p]=h}m.forEach((p,h)=>{e.setAttribute(p,f[h])}),r!==void 0&&(e.className=r),i!==void 0&&(e.scrollTop=i),l!==void 0&&(e.scrollLeft=l),c!==void 0&&e.setAttribute("viewBox",c)}var J0={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},T9t=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),N9t=["Webkit","Ms","Moz","O"];J0=Object.keys(J0).reduce((e,t)=>(N9t.forEach(n=>e[T9t(n,t)]=e[t]),e),J0);var j9t=/^(matrix|translate|scale|rotate|skew)/,A9t=/^(translate)/,I9t=/^(rotate|skew)/,rI=(e,t)=>Ve.num(e)&&e!==0?e+t:e,U2=(e,t)=>Ve.arr(e)?e.every(n=>U2(n,t)):Ve.num(e)?e===t:parseFloat(e)===t,R9t=class extends t4{constructor({x:e,y:t,z:n,...r}){const s=[],a=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),a.push(i=>[`translate3d(${i.map(l=>rI(l,"px")).join(",")})`,U2(i,0)])),wc(r,(i,l)=>{if(l==="transform")s.push([i||""]),a.push(c=>[c,c===""]);else if(j9t.test(l)){if(delete r[l],Ve.und(i))return;const c=A9t.test(l)?"px":I9t.test(l)?"deg":"";s.push(Da(i)),a.push(l==="rotate3d"?([u,f,m,p])=>[`rotate3d(${u},${f},${m},${rI(p,c)})`,U2(p,0)]:u=>[`${l}(${u.map(f=>rI(f,c)).join(",")})`,U2(u,l.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new P9t(s,a)),super(r)}},P9t=class extends h3e{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return zt(this.inputs,(n,r)=>{const s=ro(n[0]),[a,i]=this.transforms[r](Ve.arr(s)?s:n.map(ro));e+=" "+a,t=t&&i}),t?"none":e}observerAdded(e){e==1&&zt(this.inputs,t=>zt(t,n=>yi(n)&&Wx(n,this)))}observerRemoved(e){e==0&&zt(this.inputs,t=>zt(t,n=>yi(n)&&Sb(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Cb(this,e)}},L9t=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];dl.assign({batchedUpdates:ks.unstable_batchedUpdates,createStringInterpolator:x3e,colors:k8t});var O9t=a9t(L9t,{applyAnimatedValues:k9t,createAnimatedStyle:e=>new R9t(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),yu=O9t.animated,sI,Fse;function D9t(){if(Fse)return sI;Fse=1,sI=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var i=n(r,s,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+r.length,i[1]),post:a.slice(i[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var i,l,c,u,f,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){for(i=[],c=a.length;h>=0&&!f;)h==m?(i.push(h),m=a.indexOf(r,h+1)):i.length==1?f=[i.pop(),p]:(l=i.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;i.length&&(f=[c,u])}return f}return sI}var aI,Use;function F9t(){if(Use)return aI;Use=1,aI=e;function e(r,s,a){r instanceof RegExp&&(r=t(r,a)),s instanceof RegExp&&(s=t(s,a));var i=n(r,s,a);return i&&{start:i[0],end:i[1],pre:a.slice(0,i[0]),body:a.slice(i[0]+r.length,i[1]),post:a.slice(i[1]+s.length)}}function t(r,s){var a=s.match(r);return a?a[0]:null}e.range=n;function n(r,s,a){var i,l,c,u,f,m=a.indexOf(r),p=a.indexOf(s,m+1),h=m;if(m>=0&&p>0){if(r===s)return[m,p];for(i=[],c=a.length;h>=0&&!f;)h==m?(i.push(h),m=a.indexOf(r,h+1)):i.length==1?f=[i.pop(),p]:(l=i.pop(),l<c&&(c=l,u=p),p=a.indexOf(s,h+1)),h=m<p&&m>=0?m:p;i.length&&(f=[c,u])}return f}return aI}var oI,Bse;function U9t(){if(Bse)return oI;Bse=1;var e=F9t();oI=t;function t(s,a,i){var l=s;return n(s,a).reduce(function(c,u){return c.replace(u.functionIdentifier+"("+u.matches.body+")",r(u.matches.body,u.functionIdentifier,i,l,a))},s)}function n(s,a){var i=[],l=typeof a=="string"?new RegExp("\\b("+a+")\\("):a;do{var c=l.exec(s);if(!c)return i;if(c[1]===void 0)throw new Error("Missing the first couple of parenthesis to get the function identifier in "+a);var u=c[1],f=c.index,m=e("(",")",s.substring(f));if(!m||m.start!==c[0].length-1)throw new SyntaxError(u+"(): missing closing ')' in the value '"+s+"'");i.push({matches:m,functionIdentifier:u}),s=m.post}while(l.test(s));return i}function r(s,a,i,l,c){return i(t(s,c,i),a,l)}return oI}var iI,$se;function B9t(){if($se)return iI;$se=1;var e=function(t){this.value=t};return e.math={isDegree:!0,acos:function(t){return e.math.isDegree?180/Math.PI*Math.acos(t):Math.acos(t)},add:function(t,n){return t+n},asin:function(t){return e.math.isDegree?180/Math.PI*Math.asin(t):Math.asin(t)},atan:function(t){return e.math.isDegree?180/Math.PI*Math.atan(t):Math.atan(t)},acosh:function(t){return Math.log(t+Math.sqrt(t*t-1))},asinh:function(t){return Math.log(t+Math.sqrt(t*t+1))},atanh:function(t){return Math.log((1+t)/(1-t))},C:function(t,n){var r=1,s=t-n,a=n;a<s&&(a=s,s=n);for(var i=a+1;i<=t;i++)r*=i;return r/e.math.fact(s)},changeSign:function(t){return-t},cos:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.cos(t)},cosh:function(t){return(Math.pow(Math.E,t)+Math.pow(Math.E,-1*t))/2},div:function(t,n){return t/n},fact:function(t){if(t%1!==0)return"NaN";for(var n=1,r=2;r<=t;r++)n*=r;return n},inverse:function(t){return 1/t},log:function(t){return Math.log(t)/Math.log(10)},mod:function(t,n){return t%n},mul:function(t,n){return t*n},P:function(t,n){for(var r=1,s=Math.floor(t)-Math.floor(n)+1;s<=Math.floor(t);s++)r*=s;return r},Pi:function(t,n,r){for(var s=1,a=t;a<=n;a++)s*=Number(r.postfixEval({n:a}));return s},pow10x:function(t){for(var n=1;t--;)n*=10;return n},sigma:function(t,n,r){for(var s=0,a=t;a<=n;a++)s+=Number(r.postfixEval({n:a}));return s},sin:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.sin(t)},sinh:function(t){return(Math.pow(Math.E,t)-Math.pow(Math.E,-1*t))/2},sub:function(t,n){return t-n},tan:function(t){return e.math.isDegree&&(t=e.math.toRadian(t)),Math.tan(t)},tanh:function(t){return e.sinha(t)/e.cosha(t)},toRadian:function(t){return t*Math.PI/180},and:function(t,n){return t&n}},e.Exception=function(t){this.message=t},iI=e,iI}var lI,Vse;function $9t(){if(Vse)return lI;Vse=1;var e=B9t();function t(b,_){for(var w=0;w<b.length;w++)b[w]+=_;return b}for(var n=[{token:"sin",show:"sin",type:0,value:e.math.sin},{token:"cos",show:"cos",type:0,value:e.math.cos},{token:"tan",show:"tan",type:0,value:e.math.tan},{token:"pi",show:"&pi;",type:3,value:"PI"},{token:"(",show:"(",type:4,value:"("},{token:")",show:")",type:5,value:")"},{token:"P",show:"P",type:10,value:e.math.P},{token:"C",show:"C",type:10,value:e.math.C},{token:" ",show:" ",type:14,value:" ".anchor},{token:"asin",show:"asin",type:0,value:e.math.asin},{token:"acos",show:"acos",type:0,value:e.math.acos},{token:"atan",show:"atan",type:0,value:e.math.atan},{token:"7",show:"7",type:1,value:"7"},{token:"8",show:"8",type:1,value:"8"},{token:"9",show:"9",type:1,value:"9"},{token:"int",show:"Int",type:0,value:Math.floor},{token:"cosh",show:"cosh",type:0,value:e.math.cosh},{token:"acosh",show:"acosh",type:0,value:e.math.acosh},{token:"ln",show:" ln",type:0,value:Math.log},{token:"^",show:"^",type:10,value:Math.pow},{token:"root",show:"root",type:0,value:Math.sqrt},{token:"4",show:"4",type:1,value:"4"},{token:"5",show:"5",type:1,value:"5"},{token:"6",show:"6",type:1,value:"6"},{token:"/",show:"&divide;",type:2,value:e.math.div},{token:"!",show:"!",type:7,value:e.math.fact},{token:"tanh",show:"tanh",type:0,value:e.math.tanh},{token:"atanh",show:"atanh",type:0,value:e.math.atanh},{token:"Mod",show:" Mod ",type:2,value:e.math.mod},{token:"1",show:"1",type:1,value:"1"},{token:"2",show:"2",type:1,value:"2"},{token:"3",show:"3",type:1,value:"3"},{token:"*",show:"&times;",type:2,value:e.math.mul},{token:"sinh",show:"sinh",type:0,value:e.math.sinh},{token:"asinh",show:"asinh",type:0,value:e.math.asinh},{token:"e",show:"e",type:3,value:"E"},{token:"log",show:" log",type:0,value:e.math.log},{token:"0",show:"0",type:1,value:"0"},{token:".",show:".",type:6,value:"."},{token:"+",show:"+",type:9,value:e.math.add},{token:"-",show:"-",type:9,value:e.math.sub},{token:",",show:",",type:11,value:","},{token:"Sigma",show:"&Sigma;",type:12,value:e.math.sigma},{token:"n",show:"n",type:13,value:"n"},{token:"Pi",show:"&Pi;",type:12,value:e.math.Pi},{token:"pow",show:"pow",type:8,value:Math.pow,numberOfArguments:2},{token:"&",show:"&",type:9,value:e.math.and}],r={0:11,1:0,2:3,3:0,4:0,5:0,6:0,7:11,8:11,9:1,10:10,11:0,12:11,13:0,14:-1,15:11},s=0;s<n.length;s++)n[s].precedence=r[n[s].type];var a={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,9:!0,12:!0,13:!0,14:!0,15:!0},i={0:!0,1:!0,2:!0,3:!0,4:!0,5:!0,6:!0,7:!0,8:!0,9:!0,10:!0,11:!0,12:!0,13:!0,15:!0},l={0:!0,3:!0,4:!0,8:!0,12:!0,13:!0,15:!0},c={},u={0:!0,1:!0,3:!0,4:!0,6:!0,8:!0,12:!0,13:!0,15:!0},f={1:!0},m=[[],["1","2","3","7","8","9","4","5","6","+","-","*","/","(",")","^","!","P","C","e","0",".",",","n"," ","&"],["pi","ln","Pi"],["sin","cos","tan","Del","int","Mod","log","pow"],["asin","acos","atan","cosh","root","tanh","sinh"],["acosh","atanh","asinh","Sigma"]];function p(b,_,w,C){for(var S=0;S<C;S++)if(b[w+S]!==_[S])return!1;return!0}e.tokenTypes={FUNCTION_WITH_ONE_ARG:0,NUMBER:1,BINARY_OPERATOR_HIGH_PRECENDENCE:2,CONSTANT:3,OPENING_PARENTHESIS:4,CLOSING_PARENTHESIS:5,DECIMAL:6,POSTFIX_FUNCTION_WITH_ONE_ARG:7,FUNCTION_WITH_N_ARGS:8,BINARY_OPERATOR_LOW_PRECENDENCE:9,BINARY_OPERATOR_PERMUTATION:10,COMMA:11,EVALUATED_FUNCTION:12,EVALUATED_FUNCTION_PARAMETER:13,SPACE:14},e.addToken=function(b){for(var _=0;_<b.length;_++){var w=b[_].token.length,C=-1;b[_].type===e.tokenTypes.FUNCTION_WITH_N_ARGS&&b[_].numberOfArguments===void 0&&(b[_].numberOfArguments=2),m[w]=m[w]||[];for(var S=0;S<m[w].length;S++)if(b[_].token===m[w][S]){C=h(m[w][S],n);break}C===-1?(n.push(b[_]),b[_].precedence=r[b[_].type],m.length<=b[_].token.length&&(m[b[_].token.length]=[]),m[b[_].token.length].push(b[_].token)):(n[C]=b[_],b[_].precedence=r[b[_].type])}};function h(b,_){for(var w=0;w<_.length;w++)if(_[w].token===b)return w;return-1}function g(b){for(var _=[],w=b.length,C,S,E,k=0;k<w;k++)if(!(k<w-1&&b[k]===" "&&b[k+1]===" ")){for(C="",S=b.length-k>m.length-2?m.length-1:b.length-k;S>0;S--)if(m[S]!==void 0)for(E=0;E<m[S].length;E++)p(b,m[S][E],k,S)&&(C=m[S][E],E=m[S].length,S=0);if(k+=C.length-1,C==="")throw new e.Exception("Can't understand after "+b.slice(k));_.push(n[h(C,n)])}return _}var y={value:e.math.changeSign,type:0,pre:21,show:"-"},x={value:")",show:")",type:5,pre:0},v={value:"(",type:4,pre:0,show:"("};return e.lex=function(b,_){var w=[v],C=[],S=b,E=a,k=0,M=c,j="",R;typeof _<"u"&&e.addToken(_);var O={},D=g(S);for(R=0;R<D.length;R++){var P=D[R];if(P.type===14){if(R>0&&R<D.length-1&&D[R+1].type===1&&(D[R-1].type===1||D[R-1].type===6))throw new e.Exception("Unexpected Space");continue}var A=P.token,T=P.type,N=P.value,L=P.precedence,U=P.show,$=w[w.length-1],V;for(V=C.length;V--&&C[V]===0;)if([0,2,3,4,5,9,11,12,13].indexOf(T)!==-1){if(E[T]!==!0)throw new e.Exception(A+" is not allowed after "+j);w.push(x),E=i,M=u,C.pop()}if(E[T]!==!0)throw new e.Exception(A+" is not allowed after "+j);if(M[T]===!0&&(T=2,N=e.math.mul,U="&times;",L=3,R=R-1),O={value:N,type:T,pre:L,show:U,numberOfArguments:P.numberOfArguments},T===0)E=a,M=c,t(C,2),w.push(O),D[R+1].type!==4&&(w.push(v),C.push(2));else if(T===1)$.type===1?($.value+=N,t(C,1)):w.push(O),E=i,M=l;else if(T===2)E=a,M=c,t(C,2),w.push(O);else if(T===3)w.push(O),E=i,M=u;else if(T===4)t(C,1),k++,E=a,M=c,w.push(O);else if(T===5){if(!k)throw new e.Exception("Closing parenthesis are more than opening one, wait What!!!");k--,E=i,M=u,w.push(O),t(C,1)}else if(T===6){if($.hasDec)throw new e.Exception("Two decimals are not allowed in one number");$.type!==1&&($={value:0,type:1,pre:0},w.push($)),E=f,t(C,1),M=c,$.value+=N,$.hasDec=!0}else T===7&&(E=i,M=u,t(C,1),w.push(O));T===8?(E=a,M=c,t(C,P.numberOfArguments+2),w.push(O),D[R+1].type!==4&&(w.push(v),C.push(P.numberOfArguments+2))):T===9?($.type===9?$.value===e.math.add?($.value=N,$.show=U,t(C,1)):$.value===e.math.sub&&U==="-"&&($.value=e.math.add,$.show="+",t(C,1)):$.type!==5&&$.type!==7&&$.type!==1&&$.type!==3&&$.type!==13?A==="-"&&(E=a,M=c,t(C,2).push(2),w.push(y),w.push(v)):(w.push(O),t(C,2)),E=a,M=c):T===10?(E=a,M=c,t(C,2),w.push(O)):T===11?(E=a,M=c,w.push(O)):T===12?(E=a,M=c,t(C,6),w.push(O),D[R+1].type!==4&&(w.push(v),C.push(6))):T===13&&(E=i,M=u,w.push(O)),t(C,-1),j=A}for(V=C.length;V--;)w.push(x);if(E[5]!==!0)throw new e.Exception("complete the expression");for(;k--;)w.push(x);return w.push(x),new e(w)},lI=e,lI}var cI,Wse;function V9t(){if(Wse)return cI;Wse=1;var e=$9t();return e.prototype.toPostfix=function(){for(var t=[],n,r,s,a,i,l=[{value:"(",type:4,pre:0}],c=this.value,u=1;u<c.length;u++)if(c[u].type===1||c[u].type===3||c[u].type===13)c[u].type===1&&(c[u].value=Number(c[u].value)),t.push(c[u]);else if(c[u].type===4)l.push(c[u]);else if(c[u].type===5)for(;(r=l.pop()).type!==4;)t.push(r);else if(c[u].type===11){for(;(r=l.pop()).type!==4;)t.push(r);l.push(r)}else{n=c[u],a=n.pre,i=l[l.length-1],s=i.pre;var f=i.value=="Math.pow"&&n.value=="Math.pow";if(a>s)l.push(n);else{for(;s>=a&&!f||f&&a<s;)r=l.pop(),i=l[l.length-1],t.push(r),s=i.pre,f=n.value=="Math.pow"&&i.value=="Math.pow";l.push(n)}}return new e(t)},cI=e,cI}var uI,Hse;function W9t(){if(Hse)return uI;Hse=1;var e=V9t();return e.prototype.postfixEval=function(t){t=t||{},t.PI=Math.PI,t.E=Math.E;for(var n=[],r,s,a,i=this.value,l=typeof t.n<"u",c=0;c<i.length;c++)if(i[c].type===1)n.push({value:i[c].value,type:1});else if(i[c].type===3)n.push({value:t[i[c].value],type:1});else if(i[c].type===0)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(i[c]):n[n.length-1].value=i[c].value(n[n.length-1].value);else if(i[c].type===7)typeof n[n.length-1].type>"u"?n[n.length-1].value.push(i[c]):n[n.length-1].value=i[c].value(n[n.length-1].value);else if(i[c].type===8){for(var u=[],f=0;f<i[c].numberOfArguments;f++)u.push(n.pop().value);n.push({type:1,value:i[c].value.apply(i[c],u.reverse())})}else i[c].type===10?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s.value=s.concat(r),s.value.push(i[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(i[c]),n.push(r)):n.push({type:1,value:i[c].value(s.value,r.value)})):i[c].type===2||i[c].type===9?(r=n.pop(),s=n.pop(),typeof s.type>"u"?(s=s.concat(r),s.push(i[c]),n.push(s)):typeof r.type>"u"?(r.unshift(s),r.push(i[c]),n.push(r)):n.push({type:1,value:i[c].value(s.value,r.value)})):i[c].type===12?(r=n.pop(),typeof r.type<"u"&&(r=[r]),s=n.pop(),a=n.pop(),n.push({type:1,value:i[c].value(a.value,s.value,new e(r))})):i[c].type===13&&(l?n.push({value:t[i[c].value],type:3}):n.push([i[c]]));if(n.length>1)throw new e.Exception("Uncaught Syntax error");return n[0].value>1e15?"Infinity":parseFloat(n[0].value.toFixed(15))},e.eval=function(t,n,r){return typeof n>"u"?this.lex(t).toPostfix().postfixEval():typeof r>"u"?typeof n.length<"u"?this.lex(t,n).toPostfix().postfixEval():this.lex(t).toPostfix().postfixEval(n):this.lex(t,n).toPostfix().postfixEval(r)},uI=e,uI}var dI,zse;function H9t(){if(zse)return dI;zse=1;var e=W9t();return e.prototype.formulaEval=function(){for(var t,n,r,s=[],a=this.value,i=0;i<a.length;i++)a[i].type===1||a[i].type===3?s.push({value:a[i].type===3?a[i].show:a[i].value,type:1}):a[i].type===13?s.push({value:a[i].show,type:1}):a[i].type===0?s[s.length-1]={value:a[i].show+(a[i].show!="-"?"(":"")+s[s.length-1].value+(a[i].show!="-"?")":""),type:0}:a[i].type===7?s[s.length-1]={value:(s[s.length-1].type!=1?"(":"")+s[s.length-1].value+(s[s.length-1].type!=1?")":"")+a[i].show,type:7}:a[i].type===10?(t=s.pop(),n=s.pop(),a[i].show==="P"||a[i].show==="C"?s.push({value:"<sup>"+n.value+"</sup>"+a[i].show+"<sub>"+t.value+"</sub>",type:10}):s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+"<sup>"+t.value+"</sup>",type:1})):a[i].type===2||a[i].type===9?(t=s.pop(),n=s.pop(),s.push({value:(n.type!=1?"(":"")+n.value+(n.type!=1?")":"")+a[i].show+(t.type!=1?"(":"")+t.value+(t.type!=1?")":""),type:a[i].type})):a[i].type===12&&(t=s.pop(),n=s.pop(),r=s.pop(),s.push({value:a[i].show+"("+r.value+","+n.value+","+t.value+")",type:12}));return s[0].value},dI=e,dI}var fI,Gse;function z9t(){if(Gse)return fI;Gse=1;var e=D9t(),t=U9t(),n=H9t(),r=100,s=/(\+|\-|\*|\\|[^a-z]|)(\s*)(\()/g,a;fI=i;function i(c,u){a=0,u=Math.pow(10,u===void 0?5:u),c=c.replace(/\n+/g," ");function f(p,h,g){if(a++>r)throw a=0,new Error("Call stack overflow for "+g);if(p==="")throw new Error(h+"(): '"+g+"' must contain a non-whitespace string");p=m(p,g);var y=l(p);if(y.length>1||p.indexOf("var(")>-1)return h+"("+p+")";var x=y[0]||"";x==="%"&&(p=p.replace(/\b[0-9\.]+%/g,function(_){return parseFloat(_.slice(0,-1))*.01}));var v=p.replace(new RegExp(x,"gi"),""),b;try{b=n.eval(v)}catch{return h+"("+p+")"}return x==="%"&&(b*=100),(h.length||x==="%")&&(b=Math.round(b*u)/u),b+=x,b}function m(p,h){p=p.replace(/((?:\-[a-z]+\-)?calc)/g,"");for(var g="",y=p,x;x=s.exec(y);){x[0].index>0&&(g+=y.substring(0,x[0].index));var v=e("(",")",y.substring([0].index));if(v.body==="")throw new Error("'"+p+"' must contain a non-whitespace string");var b=f(v.body,"",h);g+=v.pre+b,y=v.post}return g+y}return t(c,/((?:\-[a-z]+\-)?calc)\(/,f)}function l(c){for(var u=[],f=[],m=/[\.0-9]([%a-z]+)/gi,p=m.exec(c);p;)!p||!p[1]||(f.indexOf(p[1].toLowerCase())===-1&&(u.push(p[1]),f.push(p[1].toLowerCase())),p=m.exec(c));return u}return fI}var G9t=z9t();const mI=Qo(G9t);var pI,qse;function q9t(){if(qse)return pI;qse=1;var e=typeof bi=="object"&&bi&&bi.Object===Object&&bi;return pI=e,pI}var hI,Kse;function sH(){if(Kse)return hI;Kse=1;var e=q9t(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return hI=n,hI}var gI,Yse;function H3e(){if(Yse)return gI;Yse=1;var e=sH(),t=e.Symbol;return gI=t,gI}var yI,Qse;function K9t(){if(Qse)return yI;Qse=1;var e=H3e(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function a(i){var l=n.call(i,s),c=i[s];try{i[s]=void 0;var u=!0}catch{}var f=r.call(i);return u&&(l?i[s]=c:delete i[s]),f}return yI=a,yI}var xI,Xse;function Y9t(){if(Xse)return xI;Xse=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return xI=n,xI}var vI,Zse;function Q9t(){if(Zse)return vI;Zse=1;var e=H3e(),t=K9t(),n=Y9t(),r="[object Null]",s="[object Undefined]",a=e?e.toStringTag:void 0;function i(l){return l==null?l===void 0?s:r:a&&a in Object(l)?t(l):n(l)}return vI=i,vI}var bI,Jse;function z3e(){if(Jse)return bI;Jse=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return bI=e,bI}var _I,eae;function X9t(){if(eae)return _I;eae=1;var e=Q9t(),t=z3e(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",a="[object Proxy]";function i(l){if(!t(l))return!1;var c=e(l);return c==r||c==s||c==n||c==a}return _I=i,_I}var wI,tae;function Z9t(){if(tae)return wI;tae=1;var e=sH(),t=e["__core-js_shared__"];return wI=t,wI}var CI,nae;function J9t(){if(nae)return CI;nae=1;var e=Z9t(),t=function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""}();function n(r){return!!t&&t in r}return CI=n,CI}var SI,rae;function e7t(){if(rae)return SI;rae=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return SI=n,SI}var EI,sae;function t7t(){if(sae)return EI;sae=1;var e=X9t(),t=J9t(),n=z3e(),r=e7t(),s=/[\\^$.*+?()[\]{}|]/g,a=/^\[object .+?Constructor\]$/,i=Function.prototype,l=Object.prototype,c=i.toString,u=l.hasOwnProperty,f=RegExp("^"+c.call(u).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function m(p){if(!n(p)||t(p))return!1;var h=e(p)?f:a;return h.test(r(p))}return EI=m,EI}var MI,aae;function n7t(){if(aae)return MI;aae=1;function e(t,n){return t?.[n]}return MI=e,MI}var kI,oae;function G3e(){if(oae)return kI;oae=1;var e=t7t(),t=n7t();function n(r,s){var a=t(r,s);return e(a)?a:void 0}return kI=n,kI}var TI,iae;function r4(){if(iae)return TI;iae=1;var e=G3e(),t=e(Object,"create");return TI=t,TI}var NI,lae;function r7t(){if(lae)return NI;lae=1;var e=r4();function t(){this.__data__=e?e(null):{},this.size=0}return NI=t,NI}var jI,cae;function s7t(){if(cae)return jI;cae=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return jI=e,jI}var AI,uae;function a7t(){if(uae)return AI;uae=1;var e=r4(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(a){var i=this.__data__;if(e){var l=i[a];return l===t?void 0:l}return r.call(i,a)?i[a]:void 0}return AI=s,AI}var II,dae;function o7t(){if(dae)return II;dae=1;var e=r4(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var a=this.__data__;return e?a[s]!==void 0:n.call(a,s)}return II=r,II}var RI,fae;function i7t(){if(fae)return RI;fae=1;var e=r4(),t="__lodash_hash_undefined__";function n(r,s){var a=this.__data__;return this.size+=this.has(r)?0:1,a[r]=e&&s===void 0?t:s,this}return RI=n,RI}var PI,mae;function l7t(){if(mae)return PI;mae=1;var e=r7t(),t=s7t(),n=a7t(),r=o7t(),s=i7t();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,PI=a,PI}var LI,pae;function c7t(){if(pae)return LI;pae=1;function e(){this.__data__=[],this.size=0}return LI=e,LI}var OI,hae;function u7t(){if(hae)return OI;hae=1;function e(t,n){return t===n||t!==t&&n!==n}return OI=e,OI}var DI,gae;function s4(){if(gae)return DI;gae=1;var e=u7t();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return DI=t,DI}var FI,yae;function d7t(){if(yae)return FI;yae=1;var e=s4(),t=Array.prototype,n=t.splice;function r(s){var a=this.__data__,i=e(a,s);if(i<0)return!1;var l=a.length-1;return i==l?a.pop():n.call(a,i,1),--this.size,!0}return FI=r,FI}var UI,xae;function f7t(){if(xae)return UI;xae=1;var e=s4();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return UI=t,UI}var BI,vae;function m7t(){if(vae)return BI;vae=1;var e=s4();function t(n){return e(this.__data__,n)>-1}return BI=t,BI}var $I,bae;function p7t(){if(bae)return $I;bae=1;var e=s4();function t(n,r){var s=this.__data__,a=e(s,n);return a<0?(++this.size,s.push([n,r])):s[a][1]=r,this}return $I=t,$I}var VI,_ae;function h7t(){if(_ae)return VI;_ae=1;var e=c7t(),t=d7t(),n=f7t(),r=m7t(),s=p7t();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,VI=a,VI}var WI,wae;function g7t(){if(wae)return WI;wae=1;var e=G3e(),t=sH(),n=e(t,"Map");return WI=n,WI}var HI,Cae;function y7t(){if(Cae)return HI;Cae=1;var e=l7t(),t=h7t(),n=g7t();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return HI=r,HI}var zI,Sae;function x7t(){if(Sae)return zI;Sae=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return zI=e,zI}var GI,Eae;function a4(){if(Eae)return GI;Eae=1;var e=x7t();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return GI=t,GI}var qI,Mae;function v7t(){if(Mae)return qI;Mae=1;var e=a4();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return qI=t,qI}var KI,kae;function b7t(){if(kae)return KI;kae=1;var e=a4();function t(n){return e(this,n).get(n)}return KI=t,KI}var YI,Tae;function _7t(){if(Tae)return YI;Tae=1;var e=a4();function t(n){return e(this,n).has(n)}return YI=t,YI}var QI,Nae;function w7t(){if(Nae)return QI;Nae=1;var e=a4();function t(n,r){var s=e(this,n),a=s.size;return s.set(n,r),this.size+=s.size==a?0:1,this}return QI=t,QI}var XI,jae;function C7t(){if(jae)return XI;jae=1;var e=y7t(),t=v7t(),n=b7t(),r=_7t(),s=w7t();function a(i){var l=-1,c=i==null?0:i.length;for(this.clear();++l<c;){var u=i[l];this.set(u[0],u[1])}}return a.prototype.clear=e,a.prototype.delete=t,a.prototype.get=n,a.prototype.has=r,a.prototype.set=s,XI=a,XI}var ZI,Aae;function S7t(){if(Aae)return ZI;Aae=1;var e=C7t(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var a=function(){var i=arguments,l=s?s.apply(this,i):i[0],c=a.cache;if(c.has(l))return c.get(l);var u=r.apply(this,i);return a.cache=c.set(l,u)||c,u};return a.cache=new(n.Cache||e),a}return n.Cache=e,ZI=n,ZI}var E7t=S7t();const M7t=Qo(E7t);var Iae="__react_svg_text_measurement_id";function k7t(e,t){try{var n=document.getElementById(Iae);if(!n){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");r.setAttribute("aria-hidden","true"),r.style.width="0",r.style.height="0",r.style.position="absolute",r.style.top="-100%",r.style.left="-100%",n=document.createElementNS("http://www.w3.org/2000/svg","text"),n.setAttribute("id",Iae),r.appendChild(n),document.body.appendChild(r)}return Object.assign(n.style,t),n.textContent=e,n.getComputedTextLength()}catch{return null}}const oL=M7t(k7t,function(e,t){return e+"_"+JSON.stringify(t)});var T7t=["verticalAnchor","scaleToFit","angle","width","lineHeight","capHeight","children","style"];function N7t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function JI(e){return typeof e=="number"}function Rae(e){return typeof e=="number"&&Number.isFinite(e)||typeof e=="string"}function q3e(e){var t=e.verticalAnchor,n=t===void 0?"end":t,r=e.scaleToFit,s=r===void 0?!1:r,a=e.angle,i=e.width,l=e.lineHeight,c=l===void 0?"1em":l,u=e.capHeight,f=u===void 0?"0.71em":u,m=e.children,p=e.style,h=N7t(e,T7t),g=h.x,y=g===void 0?0:g,x=h.y,v=x===void 0?0:x,b=!Rae(y)||!Rae(v),_=d.useMemo(function(){var M=m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/);return{wordsWithWidth:M.map(function(j){return{word:j,wordWidth:oL(j,p)||0}}),spaceWidth:oL("",p)||0}},[m,p]),w=_.wordsWithWidth,C=_.spaceWidth,S=d.useMemo(function(){return b?[]:i||s?w.reduce(function(M,j){var R=j.word,O=j.wordWidth,D=M[M.length-1];if(D&&(i==null||s||(D.width||0)+O+C<i))D.words.push(R),D.width=D.width||0,D.width+=O+C;else{var P={words:[R],width:O};M.push(P)}return M},[]):[{words:m==null?[]:m.toString().split(/(?:(?!\u00A0+)\s+)/)}]},[b,i,s,m,w,C]),E=d.useMemo(function(){var M=b?"":mI(n==="start"?"calc("+f+")":n==="middle"?"calc("+(S.length-1)/2+" * -"+c+" + ("+f+" / 2))":"calc("+(S.length-1)+" * -"+c+")");return M},[b,n,f,S.length,c]),k=d.useMemo(function(){var M=[];if(b)return"";if(JI(y)&&JI(v)&&JI(i)&&s&&S.length>0){var j=S[0].width||1,R=s==="shrink-only"?Math.min(i/j,1):i/j,O=R,D=y-R*y,P=v-O*v;M.push("matrix("+R+", 0, 0, "+O+", "+D+", "+P+")")}return a&&M.push("rotate("+a+", "+y+", "+v+")"),M.length>0?M.join(" "):""},[b,y,v,i,s,S,a]);return{wordsByLines:S,startDy:E,transform:k}}var j7t=["dx","dy","textAnchor","innerRef","innerTextRef","verticalAnchor","angle","lineHeight","scaleToFit","capHeight","width"];function iL(){return iL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iL.apply(null,arguments)}function A7t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var I7t={overflow:"visible"};function o4(e){var t=e.dx,n=t===void 0?0:t,r=e.dy,s=r===void 0?0:r,a=e.textAnchor,i=a===void 0?"start":a,l=e.innerRef,c=e.innerTextRef;e.verticalAnchor,e.angle;var u=e.lineHeight,f=u===void 0?"1em":u;e.scaleToFit,e.capHeight,e.width;var m=A7t(e,j7t),p=m.x,h=p===void 0?0:p,g=m.fontSize,y=q3e(e),x=y.wordsByLines,v=y.startDy,b=y.transform;return I.createElement("svg",{ref:l,x:n,y:s,fontSize:g,style:I7t},x.length>0?I.createElement("text",iL({ref:c,transform:b},m,{textAnchor:i}),x.map(function(_,w){return I.createElement("tspan",{key:w,x:h,dy:w===0?v:f},_.words.join(" "))})):null)}const R7t=Object.freeze(Object.defineProperty({__proto__:null,Text:o4,getStringWidth:oL,useText:q3e},Symbol.toStringTag,{value:"Module"}));var Pa={top:"top",left:"left",bottom:"bottom"};function P7t(e){var t=e.labelOffset,n=e.labelProps,r=e.orientation,s=e.range,a=e.tickLabelFontSize,i=e.tickLength,l=r===Pa.left||r===Pa.top?-1:1,c,u,f;if(r===Pa.top||r===Pa.bottom){var m=r===Pa.bottom&&typeof n.fontSize=="number"?n.fontSize:0;c=(Number(s[0])+Number(s[s.length-1]))/2,u=l*(i+t+a+m)}else c=l*((Number(s[0])+Number(s[s.length-1]))/2),u=-(i+t),f="rotate("+l*90+")";return{x:c,y:u,transform:f}}function e1(){return e1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},e1.apply(null,arguments)}function L7t(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.tickClassName,a=e.tickComponent,i=e.tickLabelProps,l=e.tickStroke,c=l===void 0?"#222":l,u=e.tickTransform,f=e.ticks,m=e.strokeWidth,p=e.tickLineProps;return f.map(function(h){var g,y=h.value,x=h.index,v=h.from,b=h.to,_=h.formattedValue,w=(g=i[x])!=null?g:{},C=Math.max(10,typeof w.fontSize=="number"&&w.fontSize||0),S=b.y+(n&&r!==Pa.top?C:0);return I.createElement(wa,{key:"visx-tick-"+y+"-"+x,className:B("visx-axis-tick",s),transform:u},!t&&I.createElement(dT,e1({from:v,to:b,stroke:c,strokeWidth:m,strokeLinecap:"square"},p)),a?a(e1({},w,{x:b.x,y:S,formattedValue:_})):I.createElement(o4,e1({x:b.x,y:S},w),_))})}function t1(){return t1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},t1.apply(null,arguments)}var Pae={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function O7t(e){var t=e.axisFromPoint,n=e.axisLineClassName,r=e.axisToPoint,s=e.hideAxisLine,a=e.hideTicks,i=e.horizontal,l=e.label,c=l===void 0?"":l,u=e.labelClassName,f=e.labelOffset,m=f===void 0?14:f,p=e.labelProps,h=e.orientation,g=h===void 0?Pa.bottom:h,y=e.scale,x=e.stroke,v=x===void 0?"#222":x,b=e.strokeDasharray,_=e.strokeWidth,w=_===void 0?1:_,C=e.tickClassName,S=e.tickComponent,E=e.tickLineProps,k=e.tickLabelProps,M=e.tickLength,j=M===void 0?8:M,R=e.tickStroke,O=R===void 0?"#222":R,D=e.tickTransform,P=e.ticks,A=e.ticksComponent,T=A===void 0?L7t:A,N=t1({},Pae,p),L=t1({},Pae,typeof k=="object"?k:null),U=P.map(function(V){var W=V.value,Q=V.index;return typeof k=="function"?k(W,Q,P):L}),$=Math.max.apply(Math,[10].concat(U.map(function(V){return typeof V.fontSize=="number"?V.fontSize:0})));return I.createElement(I.Fragment,null,T({hideTicks:a,horizontal:i,orientation:g,scale:y,tickClassName:C,tickComponent:S,tickLabelProps:U,tickStroke:O,tickTransform:D,ticks:P,strokeWidth:w,tickLineProps:E}),!s&&I.createElement(dT,{className:B("visx-axis-line",n),from:t,to:r,stroke:v,strokeWidth:w,strokeDasharray:b}),c&&I.createElement(o4,t1({className:B("visx-axis-label",u)},P7t({labelOffset:m,labelProps:N,orientation:g,range:y.range(),tickLabelFontSize:$,tickLength:j}),N),c))}function D7t(e,t){t===void 0&&(t="center");var n=e;if(t!=="start"&&"bandwidth"in n){var r=n.bandwidth();return t==="center"&&(r/=2),n.round()&&(r=Math.round(r)),function(s){var a=n(s);return typeof a=="number"?a+r:a}}return e}function F7t(e){var t=e;return"tickFormat"in t?t.tickFormat():TCe}var Cc=function(){function e(n){var r=n.x,s=r===void 0?0:r,a=n.y,i=a===void 0?0:a;this.x=0,this.y=0,this.x=s,this.y=i}var t=e.prototype;return t.value=function(){return{x:this.x,y:this.y}},t.toArray=function(){return[this.x,this.y]},e}();function U7t(e,t){return new Cc({x:e.x+t.x,y:e.y+t.y})}function B7t(e,t){return new Cc({x:e.x-t.x,y:e.y-t.y})}const $7t=Object.freeze(Object.defineProperty({__proto__:null,Point:Cc,subtractPoints:B7t,sumPoints:U7t},Symbol.toStringTag,{value:"Module"}));function xS(e,t){var n=e.x,r=e.y;return new Cc(t?{x:n,y:r}:{x:r,y:n})}function lL(){return lL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lL.apply(null,arguments)}var eR=0;function V7t(e){return e===void 0&&(e=eR),typeof e=="number"?{start:e,end:e}:lL({start:eR,end:eR},e)}var W7t=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function cL(){return cL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cL.apply(null,arguments)}function H7t(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Jd(e){var t=e.children,n=t===void 0?O7t:t,r=e.axisClassName,s=e.hideAxisLine,a=s===void 0?!1:s,i=e.hideTicks,l=i===void 0?!1:i,c=e.hideZero,u=c===void 0?!1:c,f=e.innerRef,m=e.left,p=m===void 0?0:m,h=e.numTicks,g=h===void 0?10:h,y=e.orientation,x=y===void 0?Pa.bottom:y,v=e.rangePadding,b=v===void 0?0:v,_=e.scale,w=e.tickFormat,C=e.tickLength,S=C===void 0?8:C,E=e.tickValues,k=e.top,M=k===void 0?0:k,j=H7t(e,W7t),R=w??F7t(_),O=x===Pa.left,D=x===Pa.top,P=D||x===Pa.bottom,A=D7t(_),T=O||D?-1:1,N=_.range(),L=V7t(b),U=xS({x:Number(N[0])+.5-L.start,y:0},P),$=xS({x:Number(N[N.length-1])+.5+L.end,y:0},P),V=(E??iT(_,g)).filter(function(Q){return!u||Q!==0&&Q!=="0"}).map(function(Q,q){return{value:Q,index:q}}),W=V.map(function(Q){var q=Q.value,H=Q.index,K=nw(A(q));return{value:q,index:H,from:xS({x:K,y:0},P),to:xS({x:K,y:S*T},P),formattedValue:R(q,H,V)}});return I.createElement(wa,{className:B("visx-axis",r),innerRef:f,top:M,left:p},n(cL({},j,{axisFromPoint:U,axisToPoint:$,hideAxisLine:a,hideTicks:l,hideZero:u,horizontal:P,numTicks:g,orientation:x,rangePadding:b,scale:_,tickFormat:R,tickLength:S,tickPosition:A,tickSign:T,ticks:W})))}function z7t(e){return!!e&&e instanceof Element}function G7t(e){return!!e&&(e instanceof SVGElement||"ownerSVGElement"in e)}function q7t(e){return!!e&&"createSVGPoint"in e}function K7t(e){return!!e&&"getScreenCTM"in e}function Y7t(e){return!!e&&"changedTouches"in e}function Q7t(e){return!!e&&"clientX"in e}function X7t(e){return!!e&&(e instanceof Event||"nativeEvent"in e&&e.nativeEvent instanceof Event)}function n1(){return n1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},n1.apply(this,arguments)}var tR={x:0,y:0};function Z7t(e){if(!e)return n1({},tR);if(Y7t(e))return e.changedTouches.length>0?{x:e.changedTouches[0].clientX,y:e.changedTouches[0].clientY}:n1({},tR);if(Q7t(e))return{x:e.clientX,y:e.clientY};var t=e?.target,n=t&&"getBoundingClientRect"in t?t.getBoundingClientRect():null;return n?{x:n.x+n.width/2,y:n.y+n.height/2}:n1({},tR)}function Lae(e,t){if(!e||!t)return null;var n=Z7t(t),r=G7t(e)?e.ownerSVGElement:e,s=K7t(r)?r.getScreenCTM():null;if(q7t(r)&&s){var a=r.createSVGPoint();return a.x=n.x,a.y=n.y,a=a.matrixTransform(s.inverse()),new Cc({x:a.x,y:a.y})}var i=e.getBoundingClientRect();return new Cc({x:n.x-i.left-e.clientLeft,y:n.y-i.top-e.clientTop})}function aH(e,t){if(z7t(e)&&t)return Lae(e,t);if(X7t(e)){var n=e,r=n.target;if(r)return Lae(r,n)}return null}var vS={},Oae;function K3e(){if(Oae)return vS;Oae=1,vS.__esModule=!0,vS.default=i;var e=r(Dy()),t=r(Db()),n=["from","to","fill","className","innerRef"];function r(l){return l&&l.__esModule?l:{default:l}}function s(){return s=Object.assign?Object.assign.bind():function(l){for(var c=1;c<arguments.length;c++){var u=arguments[c];for(var f in u)Object.prototype.hasOwnProperty.call(u,f)&&(l[f]=u[f])}return l},s.apply(this,arguments)}function a(l,c){if(l==null)return{};var u={},f=Object.keys(l),m,p;for(p=0;p<f.length;p++)m=f[p],!(c.indexOf(m)>=0)&&(u[m]=l[m]);return u}function i(l){var c=l.from,u=c===void 0?{x:0,y:0}:c,f=l.to,m=f===void 0?{x:1,y:1}:f,p=l.fill,h=p===void 0?"transparent":p,g=l.className,y=l.innerRef,x=a(l,n),v=u.x===m.x||u.y===m.y;return e.default.createElement("line",s({ref:y,className:(0,t.default)("visx-line",g),x1:u.x,y1:u.y,x2:m.x,y2:m.y,fill:h,shapeRendering:v?"crispEdges":"auto"},x))}return vS}var J7t=K3e();const Y3e=Qo(J7t);function Q3e(e){return"bandwidth"in e?e.bandwidth():0}var eLt=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function uL(){return uL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},uL.apply(this,arguments)}function tLt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Lp(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,i=e.width,l=e.stroke,c=l===void 0?"#eaf0f6":l,u=e.strokeWidth,f=u===void 0?1:u,m=e.strokeDasharray,p=e.className,h=e.children,g=e.numTicks,y=g===void 0?10:g,x=e.lineStyle,v=e.offset,b=e.tickValues,_=tLt(e,eLt),w=b??iT(a,y),C=(v??0)+Q3e(a)/2,S=w.map(function(E,k){var M,j=((M=nw(a(E)))!=null?M:0)+C;return{index:k,from:new Cc({x:0,y:j}),to:new Cc({x:i,y:j})}});return I.createElement(wa,{className:B("visx-rows",p),top:n,left:s},h?h({lines:S}):S.map(function(E){var k=E.from,M=E.to,j=E.index;return I.createElement(Y3e,uL({key:"row-line-"+j,from:k,to:M,stroke:c,strokeWidth:f,strokeDasharray:m,style:x},_))}))}Lp.propTypes={tickValues:Fe.array,width:Fe.number.isRequired};var nLt=["top","left","scale","height","stroke","strokeWidth","strokeDasharray","className","numTicks","lineStyle","offset","tickValues","children"];function dL(){return dL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dL.apply(this,arguments)}function rLt(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function oH(e){var t=e.top,n=t===void 0?0:t,r=e.left,s=r===void 0?0:r,a=e.scale,i=e.height,l=e.stroke,c=l===void 0?"#eaf0f6":l,u=e.strokeWidth,f=u===void 0?1:u,m=e.strokeDasharray,p=e.className,h=e.numTicks,g=h===void 0?10:h,y=e.lineStyle,x=e.offset,v=e.tickValues,b=e.children,_=rLt(e,nLt),w=v??iT(a,g),C=(x??0)+Q3e(a)/2,S=w.map(function(E,k){var M,j=((M=nw(a(E)))!=null?M:0)+C;return{index:k,from:new Cc({x:j,y:0}),to:new Cc({x:j,y:i})}});return I.createElement(wa,{className:B("visx-columns",p),top:n,left:s},b?b({lines:S}):S.map(function(E){var k=E.from,M=E.to,j=E.index;return I.createElement(Y3e,dL({key:"column-line-"+j,from:k,to:M,stroke:c,strokeWidth:f,strokeDasharray:m,style:y},_))}))}oH.propTypes={tickValues:Fe.array,height:Fe.number.isRequired};var sLt=["tooltipOpen"];function aLt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function ok(){return ok=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ok.apply(null,arguments)}function iH(e){var t=d.useState(ok({tooltipOpen:!1},e)),n=t[0],r=t[1],s=d.useCallback(function(i){return r(typeof i=="function"?function(l){l.tooltipOpen;var c=aLt(l,sLt);return ok({},i(c),{tooltipOpen:!0})}:{tooltipOpen:!0,tooltipLeft:i.tooltipLeft,tooltipTop:i.tooltipTop,tooltipData:i.tooltipData})},[r]),a=d.useCallback(function(){return r({tooltipOpen:!1,tooltipLeft:void 0,tooltipTop:void 0,tooltipData:void 0})},[r]);return{tooltipOpen:n.tooltipOpen,tooltipLeft:n.tooltipLeft,tooltipTop:n.tooltipTop,tooltipData:n.tooltipData,updateTooltip:r,showTooltip:s,hideTooltip:a}}var oLt=["className","top","left","offsetLeft","offsetTop","style","children","unstyled","applyPositionStyle"];function ik(){return ik=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ik.apply(null,arguments)}function iLt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var X3e={position:"absolute",backgroundColor:"white",color:"#666666",padding:".3rem .5rem",borderRadius:"3px",fontSize:"14px",boxShadow:"0 1px 2px rgba(33,33,33,0.2)",lineHeight:"1em",pointerEvents:"none"},lH=I.forwardRef(function(e,t){var n=e.className,r=e.top,s=e.left,a=e.offsetLeft,i=a===void 0?10:a,l=e.offsetTop,c=l===void 0?10:l,u=e.style,f=u===void 0?X3e:u,m=e.children,p=e.unstyled,h=p===void 0?!1:p,g=e.applyPositionStyle,y=g===void 0?!1:g,x=iLt(e,oLt);return I.createElement("div",ik({ref:t,className:B("visx-tooltip",n),style:ik({top:r==null||c==null?r:r+c,left:s==null||i==null?s:s+i},y&&{position:"absolute"},!h&&f)},x),m)});lH.propTypes={children:Fe.node,className:Fe.string,left:Fe.number,offsetLeft:Fe.number,offsetTop:Fe.number,top:Fe.number,applyPositionStyle:Fe.bool,unstyled:Fe.bool};lH.displayName="Tooltip";function fL(){return fL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fL.apply(null,arguments)}function lLt(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,mL(e,t)}function mL(e,t){return mL=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},mL(e,t)}var Dae={top:0,right:0,bottom:0,left:0,width:0,height:0};function cLt(e){var t;return t=function(n){function r(a){var i;return i=n.call(this,a)||this,i.state={rect:void 0,parentRect:void 0},i.nodeRef=I.createRef(),i.getRects=i.getRects.bind(i),i}lLt(r,n);var s=r.prototype;return s.componentDidMount=function(){var i,l=this;this.node=(i=this.nodeRef)!=null&&i.current?this.nodeRef.current:Ule.findDOMNode(this),this.setState(function(){return l.getRects()})},s.getRects=function(){if(!this.node)return this.state;var i=this.node,l=i.parentNode,c=i.getBoundingClientRect?i.getBoundingClientRect():Dae,u=l!=null&&l.getBoundingClientRect?l.getBoundingClientRect():Dae;return{rect:c,parentRect:u}},s.render=function(){return I.createElement(e,fL({nodeRef:this.nodeRef,getRects:this.getRects},this.state,this.props))},r}(I.PureComponent),t.displayName="withBoundingRects("+(e.displayName||"")+")",t}var Z3e=d.createContext({isFlippedVertically:!1,isFlippedHorizontally:!1}),uLt=Z3e.Provider;Z3e.Consumer;var dLt=["children","getRects","left","offsetLeft","offsetTop","parentRect","rect","style","top","unstyled","nodeRef"];function lk(){return lk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lk.apply(null,arguments)}function fLt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function J3e(e){var t=e.children;e.getRects;var n=e.left,r=n===void 0?0:n,s=e.offsetLeft,a=s===void 0?10:s,i=e.offsetTop,l=i===void 0?10:i,c=e.parentRect,u=e.rect,f=e.style,m=f===void 0?X3e:f,p=e.top,h=p===void 0?0:p,g=e.unstyled,y=g===void 0?!1:g,x=e.nodeRef,v=fLt(e,dLt),b,_=!1,w=!1;if(u&&c){var C=r,S=h;if(c.width){var E=C+a+u.width-c.width,k=u.width-C-a;_=E>0&&E>k}else{var M=C+a+u.width-window.innerWidth,j=u.width-C-a;_=M>0&&M>j}if(c.height){var R=S+l+u.height-c.height,O=u.height-S-l;w=R>0&&R>O}else w=S+l+u.height>window.innerHeight;C=_?C-u.width-a:C+a,S=w?S-u.height-l:S+l,C=Math.round(C),S=Math.round(S),b="translate("+C+"px, "+S+"px)"}return I.createElement(lH,lk({ref:x,style:lk({left:0,top:0,transform:b},!y&&m)},v),I.createElement(uLt,{value:{isFlippedVertically:!w,isFlippedHorizontally:!_}},t))}J3e.propTypes={nodeRef:Fe.oneOfType([Fe.string,Fe.func,Fe.object])};const eTe=cLt(J3e),Cy=200,mLt={top:24,right:8,bottom:24,left:16},pLt={time:e=>new Date(e),linear:e=>+e,band:e=>e,ordinal:e=>e,log:e=>+e,point:e=>e};function nR(e,t){if(!e)return r=>null;if(t===void 0)return r=>r[e];const n=pLt[t]||(r=>r);return r=>n(r[e])}function dh(e,t){return typeof t=="function"?t(e):typeof t=="string"?t.replace("%s",e):e instanceof Date?IIt(e):String(e)}const Uo={time:Tp,linear:Qd,band:tV,log:nV,point:tw,ordinal:rV},Fae=["band","ordinal","point"];function hLt({width:e,height:t,margin:n,hasAxis:r,maxYLabelWidth:s=0}){const a=n.left+(r?s+15:0),i=e-n.right-n.left,l=t-n.bottom,c=n.top,u=[a,i],f=[l,c],m=Math.max(0,i-a);return{innerHeight:Math.max(0,l-c),innerWidth:m,xRange:u,yRange:f}}function Bcn(e,t,n){const r=[];let s="";return e.forEach(a=>{const i=t(a),l=i.toISOString().slice(0,10);l!==s&&(s=l,r.push(i))}),r.filter((a,i)=>i%n===0)}function i4(e){const{colorScheme:t}=jr(),n=Os(),r=d.useMemo(()=>n?t==="dark":!1,[t,n]);return d.useMemo(()=>({...r?f3t:m3t,...e}),[r,e])}function l4(e){return d.useMemo(()=>e.data.map(n=>({__key:Math.random(),...n})),[e.data])}function c4({config:e}){const t=d.useMemo(()=>nR(e.x.accessor,e.x.scale),[e.x]),n=d.useMemo(()=>nR(e.y.accessor,e.y.scale),[e.y]),r=d.useMemo(()=>nR(e.z?.accessor,e.z?.scale),[e.z]);return d.useMemo(()=>({xGet:t,yGet:n,zGet:r}),[t,n,r])}function u4({config:e}){const t=d.useCallback(l=>dh(l,e.x.format),[e.x]),n=d.useCallback(l=>dh(l,e.y.format),[e.y]),r=d.useCallback(l=>dh(l,e.z?.format),[e.z]),s=d.useCallback(l=>dh(l,e.x.tooltipFormat??e.x.format),[e.x]),a=d.useCallback(l=>dh(l,e.y.tooltipFormat??e.y.format),[e.y]),i=d.useCallback(l=>dh(l,e.z?.tooltipFormat??e.z?.format),[e.z]);return d.useMemo(()=>({xFormat:t,yFormat:n,zFormat:r,xTooltipFormat:s,yTooltipFormat:a,zTooltipFormat:i}),[t,n,r,s,a,i])}function ww({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}){return d.useMemo(()=>hLt({width:e,height:t,margin:n,maxYLabelWidth:r,hasAxis:s}),[e,t,n,r,s])}function cH({config:e,xGet:t,yGet:n,data:r,endTime:s,previousClose:a}){const i=d.useMemo(()=>{if(Fae.includes(e.x.scale))return[...new Set(r.map(t))];const u=co(r,t);return e.x.tickValues?co([...e.x.tickValues,...u]):u},[e.x.tickValues,e.x.scale,r,t]),l=d.useMemo(()=>{if(Fae.includes(e.y.scale))return[...new Set(r.map(n))];const f=[...co(r,n)];a!==void 0&&f.push(a),e.y.tickValues&&f.push(...e.y.tickValues);const[m,p]=co(f),g=(p-m)*.05;return[m-g,p+g]},[e.y.tickValues,e.y.scale,r,n,a]),c=d.useMemo(()=>{if(!s||!i||i.length<2||e.x.scale!=="time")return i;const[u,f]=i;return new Date(f).toDateString()!==s.toDateString()?i:Date.now()<s.getTime()&&f<s?[u,s]:i},[i,s,e.x.scale]);return d.useMemo(()=>({xDomain:c,yDomain:l}),[c,l])}function uH(e){const[t,n]=d.useState({width:0,height:0,resizing:!1});return d.useEffect(()=>{let r;const s=()=>{e.current&&(clearTimeout(r),n(a=>{const i=e.current?.offsetWidth??0,l=e.current?.offsetHeight??0,c=Math.round(a.width)!==Math.round(i);return{width:i,height:l,resizing:c}}),r=setTimeout(()=>{n(a=>({...a,resizing:!1}))},500))};return s(),window.addEventListener("resize",s),()=>{clearTimeout(r),window.removeEventListener("resize",s)}},[e]),t}const hm=30,tTe=({height:e,render:t,children:n})=>{const r=d.useRef(null),{width:s,resizing:a}=uH(r);return o.jsx("div",{style:{width:"100%",height:e},ref:r,className:B("relative"),children:o.jsx(Ye,{children:t&&!a&&o.jsx(ve.div,{className:"absolute",style:{top:0,left:0,right:0,bottom:0},initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:n(s)})})})},gLt=({children:e,style:t})=>o.jsx(z,{className:"p-sm pb-md flex h-full",children:o.jsx(z,{className:"flex size-full items-center justify-center",variant:"raised",style:t,children:o.jsx(F,{variant:"small",color:"light",children:e})})}),nTe=()=>o.jsx(gLt,{style:{height:Cy,marginBottom:hm},children:o.jsx(ie,{id:"iuY8kxCDQT",defaultMessage:"Something went wrong."})}),yLt="animate-in fade-in shadow-subtle transition-colors duration-500",dH=d.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1})=>{const a=d.useMemo(()=>({x:t,y:e}),[e,t]),i=d.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return isNaN(a.x+i.x+a.y+i.y)?null:o.jsx(ve.line,{x1:a.x,y1:a.y,x2:i.x,y2:i.y,stroke:r,strokeWidth:s,pointerEvents:"none",className:yLt,initial:{opacity:0,strokeWidth:0},animate:{opacity:.6,strokeWidth:s},exit:{opacity:0,strokeWidth:0},transition:{duration:.1}})});dH.displayName="YCrosshair";const xLt={pointerEvents:"none",position:"absolute",overflow:"visible"},rTe=({children:e,y:t,x:n,pill:r})=>o.jsx(eTe,{top:t,left:n,style:xLt,children:o.jsx("div",{className:B("m-xs shadow-subtle dark:bg-subtle relative border bg-white/75 backdrop-blur-sm",{"rounded-full":r,"rounded-lg":!r}),children:e})}),Uae=["1d","5d"],sTe=6,aTe=(e,t,n,r,s)=>{const a=t(e);return!(a===void 0||a<r||a>n-s)},Cw=(e,t,n)=>aTe(e,t,n,25,70),Sw=(e,t,n)=>aTe(e,t,n,20,20),vLt=({xScale:e,width:t})=>{if("ticks"in e)return e.ticks(sTe).map(n=>({date:n,label:Cw(n,e,t),line:Sw(n,e,t)}))},bLt=e=>{const t=e.match(/(\d{4})-(\d{2})-(\d{2})/);return t?t[0]:void 0},_Lt=({history:e,xGet:t,xGetUnparsed:n,width:r,xScale:s})=>{const a=[],i=new Set;return e.forEach(l=>{const c=t(l),u=bLt(n(l));u&&!i.has(u)&&(a.push({date:c,label:Cw(c,s,r),line:Sw(c,s,r)}),i.add(u))}),a};function wLt(e){const t=new Date(e.getFullYear(),e.getMonth(),1).getDay(),n=t===0?6:t-1;return Math.ceil((e.getDate()+n)/7)}const CLt=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getMonth(),u=wLt(l),f=`${c}-${u}`;a.has(f)||(s.push({date:l,label:Cw(l,r,n),line:Sw(l,r,n)}),a.add(f))}),s.filter((i,l,c)=>l?i.date.getTime()-c[l-1].date.getTime()>1e3*60*60*24*6:!0)},bS=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getMonth(),f=`${l.getFullYear()}-${c}`;a.has(f)||(s.push({date:l,label:Cw(l,r,n),line:Sw(l,r,n)}),a.add(f))}),s},Bae=({history:e,xGet:t,width:n,xScale:r})=>{const s=[],a=new Set;return e.forEach(i=>{const l=t(i),c=l.getFullYear();a.has(c)||(s.push({date:l,label:Cw(l,r,n),line:Sw(l,r,n)}),a.add(c))}),s},SLt={"1d":vLt,"5d":_Lt,"1m":CLt,"6m":bS,"3m":bS,ytd:bS,"1y":bS,"5y":Bae,max:Bae},nd=(e,t)=>e.date.toLocaleDateString(e.locale,{timeZone:e.timezone??void 0,...t}),ELt=e=>{const t=e.date.getMinutes()!==0;return e.date.toLocaleTimeString(e.locale,{timeZone:e.timezone??void 0,hour:"numeric",minute:t?"numeric":void 0})},MLt={"1d":e=>ELt(e),"5d":e=>nd(e,{month:"short",day:"numeric"}),"1m":e=>nd(e,{month:"short",day:"numeric"}),"6m":e=>nd(e,{month:"short"}),"3m":e=>nd(e,{month:"short"}),ytd:e=>nd(e,{month:"short"}),"1y":e=>nd(e,{month:"short"}),"5y":e=>nd(e,{year:"numeric"}),max:e=>nd(e,{year:"numeric"})},oTe=({history:e,xGet:t,xGetUnparsed:n,timezone:r,locale:s,period:a,width:i,xScale:l})=>{const c=i<400?3:6,u=d.useMemo(()=>{const g=SLt[a]({history:e,xGet:t,xGetUnparsed:n,locale:s,period:a,xScale:l,width:i});return g&&(g.length>c?g.map((y,x)=>({...y,label:y.label&&x%Math.floor(g.length/c)===0})):g)},[e,t,n,s,a,l,i,c]),f=d.useMemo(()=>{const g=u?.filter(y=>y.label).map(y=>y.date);return g?.length?g:void 0},[u]),m=d.useMemo(()=>{const g=u?.filter(y=>y.line).map(y=>y.date);return g?.length?g:void 0},[u]),p=d.useCallback(g=>MLt[a]({date:g,locale:s,timezone:r}),[a,s,r]);return{xTickLabels:f,xTickFormatter:p,xTickLines:m,xTickCount:f?void 0:sTe}};function $ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function kLt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$ae(Object(n),!0).forEach(function(r){TLt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$ae(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r1(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?r1=function(t){return typeof t}:r1=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r1(e)}function TLt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ck(){return ck=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ck.apply(this,arguments)}function NLt(e,t){if(e){if(typeof e=="string")return Vae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vae(e,t)}}function Vae(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function iTe(e,t){var n=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=NLt(e))||t){n&&(e=n);var r=0,s=function(){};return{s,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(c){throw c},f:s}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var a=!0,i=!1,l;return{s:function(){n=n.call(e)},n:function(){var c=n.next();return a=c.done,c},e:function(c){i=!0,l=c},f:function(){try{!a&&n.return!=null&&n.return()}finally{if(i)throw l}}}}function jLt(e,t){var n=[],r=[];function s(a,i){if(a.length===1)n.push(a[0]),r.push(a[0]);else{for(var l=Array(a.length-1),c=0;c<l.length;c++)c===0&&n.push(a[0]),c===l.length-1&&r.push(a[c+1]),l[c]=[(1-i)*a[c][0]+i*a[c+1][0],(1-i)*a[c][1]+i*a[c+1][1]];s(l,i)}}return e.length&&s(e,t),{left:n,right:r.reverse()}}function ALt(e){var t={};return e.length===4&&(t.x2=e[2][0],t.y2=e[2][1]),e.length>=3&&(t.x1=e[1][0],t.y1=e[1][1]),t.x=e[e.length-1][0],t.y=e[e.length-1][1],e.length===4?t.type="C":e.length===3?t.type="Q":t.type="L",t}function ILt(e,t){t=t||2;for(var n=[],r=e,s=1/t,a=0;a<t-1;a++){var i=s/(1-s*a),l=jLt(r,i);n.push(l.left),r=l.right}return n.push(r),n}function RLt(e,t,n){var r=[[e.x,e.y]];return t.x1!=null&&r.push([t.x1,t.y1]),t.x2!=null&&r.push([t.x2,t.y2]),r.push([t.x,t.y]),ILt(r,n).map(ALt)}var PLt=/[MLCSTQAHVZmlcstqahv]|-?[\d.e+-]+/g,_g={M:["x","y"],L:["x","y"],H:["x"],V:["y"],C:["x1","y1","x2","y2","x","y"],S:["x2","y2","x","y"],Q:["x1","y1","x","y"],T:["x","y"],A:["rx","ry","xAxisRotation","largeArcFlag","sweepFlag","x","y"],Z:[]};Object.keys(_g).forEach(function(e){_g[e.toLowerCase()]=_g[e]});function pL(e,t){for(var n=Array(e),r=0;r<e;r++)n[r]=t;return n}function LLt(e){return"".concat(e.type).concat(_g[e.type].map(function(t){return e[t]}).join(","))}function OLt(e,t){var n={x1:"x",y1:"y",x2:"x",y2:"y"},r=["xAxisRotation","largeArcFlag","sweepFlag"];if(e.type!==t.type&&t.type.toUpperCase()!=="M"){var s={};Object.keys(t).forEach(function(a){var i=t[a],l=e[a];l===void 0&&(r.includes(a)?l=i:(l===void 0&&n[a]&&(l=e[n[a]]),l===void 0&&(l=0))),s[a]=l}),s.type=t.type,e=s}return e}function DLt(e,t,n){var r=[];if(t.type==="L"||t.type==="Q"||t.type==="C")r=r.concat(RLt(e,t,n));else{var s=ck({},e);s.type==="M"&&(s.type="L"),r=r.concat(pL(n-1).map(function(){return s})),r.push(t)}return r}function Wae(e,t,n){var r=e.length-1,s=t.length-1,a=r/s,i=pL(s).reduce(function(c,u,f){var m=Math.floor(a*f);if(n&&m<e.length-1&&n(e[m],e[m+1])){var p=a*f%1<.5;c[m]&&(p?m>0?m-=1:m<e.length-1&&(m+=1):m<e.length-1?m+=1:m>0&&(m-=1))}return c[m]=(c[m]||0)+1,c},[]),l=i.reduce(function(c,u,f){if(f===e.length-1){var m=pL(u,ck({},e[e.length-1]));return m[0].type==="M"&&m.forEach(function(p){p.type="L"}),c.concat(m)}return c.concat(DLt(e[f],e[f+1],u))},[]);return l.unshift(e[0]),l}function Hae(e){for(var t=(e||"").match(PLt)||[],n=[],r,s,a=0;a<t.length;++a)if(r=_g[t[a]],r){s={type:t[a]};for(var i=0;i<r.length;++i)s[r[i]]=+t[a+i+1];a+=r.length,n.push(s)}return n}function FLt(e,t,n){var r=e==null?[]:e.slice(),s=t==null?[]:t.slice(),a=r1(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},i=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return[]};var c=(r.length===0||r[r.length-1].type==="Z")&&(s.length===0||s[s.length-1].type==="Z");r.length>0&&r[r.length-1].type==="Z"&&r.pop(),s.length>0&&s[s.length-1].type==="Z"&&s.pop(),r.length?s.length||s.push(r[0]):r.push(s[0]);var u=Math.abs(s.length-r.length);u!==0&&(s.length>r.length?r=Wae(r,s,i):s.length<r.length&&(s=Wae(s,r,i))),r=r.map(function(m,p){return OLt(m,s[p])});var f=r.map(function(m){return kLt({},m)});return c&&(f.push({type:"Z"}),r.push({type:"Z"})),function(p){if(p===1&&l)return t??[];if(p===0)return r;for(var h=0;h<f.length;++h){var g=r[h],y=s[h],x=f[h],v=iTe(_g[x.type]),b;try{for(v.s();!(b=v.n()).done;){var _=b.value;x[_]=(1-p)*g[_]+p*y[_],(_==="largeArcFlag"||_==="sweepFlag")&&(x[_]=Math.round(x[_]))}}catch(w){v.e(w)}finally{v.f()}}return f}}function ULt(e,t,n){var r=Hae(e),s=Hae(t),a=r1(n)==="object"?n:{excludeSegment:n,snapEndsToInput:!0},i=a.excludeSegment,l=a.snapEndsToInput;if(!r.length&&!s.length)return function(){return""};var c=FLt(r,s,{excludeSegment:i,snapEndsToInput:l});return function(f){if(f===1&&l)return t??"";var m=c(f),p="",h=iTe(m),g;try{for(h.s();!(g=h.n()).done;){var y=g.value;p+=LLt(y)}}catch(x){h.e(x)}finally{h.f()}return p}}const fH=(e,t=!0,n=200)=>{const r=d.useRef(e),s=d.useRef(e),a=!t||!r.current||!s.current,[i,l]=B3e(()=>({t:0,immediate:a,easing:Zd}));return d.useEffect(()=>{s.current!==e&&(r.current=s.current,s.current=e,t&&l.start({from:{t:0},to:{t:1},config:{duration:n}}))},[e,t,l,n]),t?i.t.to(c=>r.current===s.current?e:ULt(r.current,s.current)(c)):e},bd=e=>e.close,fh=({value:e,baseline:t,annotation:n})=>{const r=n?J5t[n.type]:void 0,s=e>=t?gd.POSITIVE:gd.NEGATIVE;return{...e3t(s),backgroundColor:ob[s],lineColor:ob[s],backgroundOpacity:1,valence:s,...r}},mH=(e,t)=>{const[n,r]=t;return n===r?0:(e-n)/(r-n)*100},BLt=({history:e,baseline:t,exchangeHoursAnnotations:n,xScale:r,width:s,xMaskingSupported:a})=>{if(!e?.length)return[];a||(n=[]);const i=[];e.forEach((u,f)=>{const m=e[f-1],p=Mh(n,nu(u));if(!m){i.push({...fh({value:bd(u),baseline:t,annotation:p}),x:0,type:p?.type});return}const h=bd(m),g=bd(u),y=Mh(n,nu(m)),x=Mh(n,nu(u));if(y!==x){const b=r(fs(m))??0;i.push({...fh({value:h,baseline:t,annotation:y}),x:b,type:y?.type}),i.push({...fh({value:g,baseline:t,annotation:Mh(n,nu(u))}),x:b,type:x?.type})}if(y===x&&(h<t&&g>=t||h>=t&&g<t)){const v=r(fs(m))??0,b=r(fs(u))??0,_=(t-h)/(g-h),w=v+_*(b-v);i.push({...fh({value:h,baseline:t,annotation:y}),x:w,type:y?.type}),i.push({...fh({value:g,baseline:t,annotation:x}),x:w,type:x?.type})}});const l=e[e.length-1],c=Mh(n,nu(l));return i.push({...fh({value:bd(l),baseline:t,annotation:c}),x:s,type:c?.type}),i},$Lt=({l:e,id:t,animationId:n,history:r,baseline:s,stops:a,yScale:i,style:l,xDomainData:c,height:u,marginBottom:f})=>{const m=d.useMemo(()=>{const h=i(s),g=e(r);return g?`${g} L ${c[1]},${h} L ${c[0]},${h} Z`:""},[e,r,i,s,c]),p=d.useMemo(()=>{const h=i.domain(),g=h[1]-h[0],y=(h[1]-s)/g*100,x=(u-f)/u*100;return y*(x/100)},[i,s,u,f]);return o.jsxs(o.Fragment,{children:[o.jsxs("defs",{children:[o.jsx("linearGradient",{id:`ticker-area-color-gradient-${t}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",colorInterpolation:"linearRGB",spreadMethod:"pad",children:a.map((h,g)=>o.jsx("stop",{offset:`${mH(h.x,c)}%`,stopColor:Ua[h.backgroundColor],stopOpacity:h.backgroundOpacity},g))}),o.jsxs("linearGradient",{id:`ticker-area-opacity-gradient-${t}`,x1:"0%",y1:"0%",x2:"0%",y2:"100%",children:[o.jsx("stop",{offset:"0%",stopColor:"white",stopOpacity:"0.3"}),o.jsx("stop",{offset:`${Math.max(0,p-20)}%`,stopColor:"white",stopOpacity:"0.1"}),o.jsx("stop",{offset:`${p}%`,stopColor:"white",stopOpacity:"0.00"}),o.jsx("stop",{offset:`${Math.min(100,p+20)}%`,stopColor:"white",stopOpacity:"0.1"}),o.jsx("stop",{offset:"100%",stopColor:"white",stopOpacity:"0.3"})]}),o.jsx("mask",{id:`ticker-area-mask-${t}`,children:o.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#ticker-area-opacity-gradient-${t})`})})]}),o.jsx("g",{mask:`url(#ticker-area-mask-${t})`,children:o.jsx(Ye,{mode:"wait",children:o.jsx(ve.path,{d:m,fill:`url(#ticker-area-color-gradient-${t})`,stroke:"none",shapeRendering:pT,style:{mixBlendMode:"multiply",...l},initial:{opacity:0},animate:{opacity:1,transition:hg},exit:oSe},n)})})]})},VLt=({l:e,history:t,stops:n,xDomainData:r,id:s})=>{const a=d.useMemo(()=>e(t),[e,t]),i=fH(a,!0,hT);return o.jsxs(o.Fragment,{children:[o.jsx("defs",{children:o.jsx("linearGradient",{id:`ticker-line-gradient-${s}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:n.map((l,c)=>o.jsx("stop",{offset:`${mH(l.x,r)}%`,stopColor:Ua[l.backgroundColor],stopOpacity:l.lineOpacity},c))})}),o.jsx(yu.path,{d:i,stroke:n?.length?`url(#ticker-line-gradient-${s})`:Ua.blue,strokeWidth:1.75,fill:"none",shapeRendering:pT})]})},WLt=({id:e,stops:t,height:n,opacity:r,size:s,style:a,xBounds:i})=>o.jsxs("g",{children:[o.jsxs("defs",{children:[o.jsx("pattern",{id:`ticker-after-hours-dot-grid-${e}`,patternUnits:"userSpaceOnUse",width:s,height:s,children:o.jsx("circle",{cx:s/2,cy:s/2,r:s*.12,fill:Ua.gray,opacity:r})}),o.jsx("linearGradient",{id:`ticker-after-hours-mask-gradient-${e}`,x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:t.map((l,c)=>{const u=!!l.type;return o.jsx("stop",{offset:`${mH(l.x,i)}%`,stopColor:"white",stopOpacity:u?1:0},c)})}),o.jsx("mask",{id:`ticker-after-hours-mask-${e}`,children:o.jsx("rect",{x:0,y:"0",width:i[1],height:n,fill:`url(#ticker-after-hours-mask-gradient-${e})`})})]}),o.jsx("rect",{x:0,y:"0",style:a,width:i[1],height:n,fill:`url(#ticker-after-hours-dot-grid-${e})`,mask:`url(#ticker-after-hours-mask-${e})`})]}),HLt=({exchangeHoursAnnotations:e,data:t,xScale:n,xBounds:r})=>{const{$t:s}=Z(),{tooltipData:a,hideTooltip:i,showTooltip:l}=iH(),c=d.useCallback(u=>{const f="touches"in u;u.stopPropagation();const m=aH(u);if(!m)return;const{d:p,x:h}=uV(m.x,n,t);if(!p)return;const g=Mh(e,p.date),y=g?.type&&rne[g.type]?s(rne[g.type]):void 0,x=Math.min(Math.max(r[0],h),r[1]);l({tooltipData:{data:p,x,y:f?0:m.y,annotation:y}})},[t,n,l,e,s,r]);return d.useMemo(()=>({tooltipData:a,hideTooltip:i,showTooltip:c}),[a,i,c])},zLt=({currency:e,absoluteChange:t,relativeChange:n})=>{const{locale:r}=Z(),s=d.useMemo(()=>t===void 0?null:cV(t,e,r),[t,e,r]),a=d.useMemo(()=>n===void 0?null:n.toLocaleString(r,{style:"percent",minimumFractionDigits:2,maximumFractionDigits:2,signDisplay:"exceptZero"}),[n,r]),i=d.useMemo(()=>t?t>0?"positive":"negative":"light",[t]);return!t&&!n?null:o.jsx(z,{className:"relative border-t",children:o.jsx(F,{variant:"tinyRegular",color:i,className:"px-sm py-xs whitespace-nowrap",children:o.jsx(ie,{id:"TqEJGQaMg0",defaultMessage:"{absoluteChange} ({relativeChange})",values:{absoluteChange:s,relativeChange:a}})})})},GLt=({x:e,y:t,close:n,date:r,annotation:s,absoluteChange:a,relativeChange:i,currency:l,exchangeTimezone:c})=>{const{locale:u}=Z();return o.jsxs(rTe,{y:t,x:e,children:[o.jsxs(z,{className:"py-sm relative px-[12px]",children:[o.jsx(F,{variant:"baseSemi",children:cV(n,l,u)}),o.jsx(F,{variant:"tinyRegular",className:"whitespace-nowrap",color:"light",children:pSe(r,u,c)}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"whitespace-nowrap",children:s})]}),o.jsx(zLt,{currency:l,absoluteChange:a,relativeChange:i})]})},qLt=({baseline:e,history:t,yScale:n,chartWidth:r,children:s})=>{const a=d.useMemo(()=>{const l=n(e),c=10,u=25,f=t.slice(-Math.max(3,Math.floor(t.length*.1))),m=f.reduce((y,x)=>y+n(bd(x)),0)/f.length,p=Math.abs(m-l),g=!(l<u)&&(p>=c?!0:m>l);return{opacity:1,top:l,left:r-10,transform:`translate(-100%, ${g?"-100%":"0"})`}},[e,t,n,r]),i=d.useMemo(()=>({...a,opacity:0}),[a]);return r<25?null:o.jsx(ve.div,{className:"pointer-events-none absolute z-50",initial:i,animate:a,transition:{duration:.5,ease:"easeInOut"},children:s})},KLt=(e,t)=>{if(!e?.length)return;const n=co(e,nu),r=nne(n[0],t?.open??""),s=nne(n[1],t?.close??"");let a=n[0],i=n[1];return r<a&&(a=r),s>i&&(i=s),[new Date(a),new Date(i)]},YLt=(e,t,n,r)=>{const[s,a]=d.useState(null),i=d.useCallback(()=>{e?.x&&a(e.x)},[e?.x]),l=d.useCallback(()=>{a(null)},[]),c=d.useMemo(()=>s===null?null:uV(s,t,n).d,[t,n,s]),u=d.useMemo(()=>{if(!c||!e)return null;const[x,v]=[e.data,c].sort((b,_)=>_.date.localeCompare(b.date));return{absolute:x.close-v.close,relative:(x.close-v.close)/v.close}},[c,e]),f=d.useMemo(()=>t.range()[1],[t]),m=d.useMemo(()=>!s||!c?null:t(fs(c)),[t,c,s]),p=d.useMemo(()=>!s||!c||!e?null:t(fs(e.data))??f,[t,c,s,e,f]),h=d.useMemo(()=>!c||!e||!s?`M 0 0 L ${f} 0 L ${f} ${r} L 0 ${r} Z`:`M ${m} 0 L ${p} 0 L ${p} ${r} L ${m} ${r} Z`,[c,e,s,r,m,p,f]),g="finance-chart-clip-path",y=d.useMemo(()=>({clipPath:`url(#${g})`}),[g]);return{id:g,path:h,style:y,animate:!s,absoluteChange:u?.absolute,relativeChange:u?.relative,handleMouseDown:i,handleMouseUp:l,leftX:m,rightX:p}},QLt=e=>e&&e<0?Ua.red:e&&e>0?Ua.blue:Ua.gray,XLt=({id:e,path:t})=>o.jsx("defs",{children:o.jsx("clipPath",{id:e,children:o.jsx(yu.path,{d:t})})}),lTe=d.memo(({symbol:e,exchangeTimezone:t,exchangeHours:n,period:r,currency:s,history:a,previousClose:i,width:l,height:c,exchangeHoursAnnotations:u=[]})=>{const{locale:f}=Z(),m=r==="1d",p=d.useMemo(()=>a.toSorted((ee,Y)=>ee.date.localeCompare(Y.date)),[a]),h=d.useMemo(()=>Uae.includes(r)?mSe(p):new Set,[p,r]),g=d.useMemo(()=>p.filter(ee=>!h.has(ee.date)),[p,h]),y=d.useMemo(()=>lV(g,r),[g,r]),x=d.useMemo(()=>m?Tp({domain:KLt(p,n),range:[0,l]}):tw({domain:p.map(fs),range:[0,l]}),[p,l,m,n]),v=d.useMemo(()=>co(a,fs).map(ee=>x(ee)),[x,a]),b=d.useMemo(()=>[0,l],[l]),_=d.useMemo(()=>co(y,bd),[y]),w=i??a[a.length-1].close,C=d.useMemo(()=>{w&&(_[0]=Math.min(_[0],w),_[1]=Math.max(_[1],w));const ee=_[1]-_[0];return _[0]-=ee*.05,_[1]+=ee*.05,Qd({nice:!1,domain:_,range:[c-hm,0]})},[c,w,_]),S=d.useMemo(()=>Hu().x(ee=>x(fs(ee))??0).y(ee=>C(bd(ee))??0).curve(rSe),[x,C]),{tooltipData:E,hideTooltip:k,showTooltip:M}=HLt({data:p,exchangeHoursAnnotations:u,xScale:x,xBounds:v}),{handleMouseDown:j,handleMouseUp:R,leftX:O,rightX:D,...P}=YLt(E,x,p,c),A=QLt(P.absoluteChange),T=d.useCallback(()=>{R(),k()},[R,k]),{isMobileStyle:N}=xe(),L=N?lSe:iSe,U=d.useMemo(()=>C.ticks(L),[C,L]),$=`${r}-${e}`,V=Uae.includes(r)&&!!u.length,{xTickLabels:W,xTickFormatter:Q,xTickLines:q,xTickCount:H}=oTe({history:p,xGet:fs,xGetUnparsed:nu,timezone:t,locale:f,period:r,xScale:x,width:l}),K=d.useMemo(()=>BLt({xMaskingSupported:V,history:y,baseline:w,xScale:x,width:l,exchangeHoursAnnotations:u??[]}),[y,w,x,u,l,V]),G=d.useCallback(ee=>uSe({tick:ee,history:y,yScale:C,xScale:x,yGet:bd,baseline:w}),[y,C,x,w]);return o.jsxs("div",{className:aSe,onMouseDown:j,onMouseMove:M,onMouseLeave:T,onMouseOut:T,onMouseUp:R,onTouchStart:M,onTouchMove:M,onTouchEnd:T,onTouchCancel:T,children:[o.jsxs("svg",{height:c,width:l,className:sSe,children:[o.jsx(Ye,{initial:!1,mode:"wait",children:!V&&o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:hg,children:[o.jsx(Lp,{tickValues:U,scale:C,width:l,stroke:Ua.gray,strokeWidth:1,opacity:.1,className:"transition-all duration-1000"}),o.jsx(oH,{scale:x,opacity:.1,height:c*2,stroke:Ua.gray,style:{transform:`translateY(-${c}px)`},numTicks:H,strokeWidth:1,tickValues:q})]},$)}),o.jsx(XLt,{id:P.id,path:P.path}),o.jsx($Lt,{l:S,id:e,animationId:$,history:y,baseline:w,stops:K,yScale:C,style:P.style,xDomainData:v,height:c,marginBottom:hm}),o.jsx(Ye,{mode:"wait",children:o.jsxs(ve.g,{initial:{opacity:0},exit:oSe,animate:{opacity:1},transition:hg,children:[o.jsx(WLt,{id:e,stops:K,height:c*3,style:{transform:`translateY(-${c*3/2}px)`},width:l,opacity:.33,size:5,xBounds:b}),o.jsx("g",{opacity:E?0:1,className:X9(!!E),children:o.jsx(Jd,{scale:C,hideTicks:!0,hideAxisLine:!0,numTicks:L,left:iV,orientation:"right",tickLabelProps:G})}),o.jsx(Jd,{scale:x,hideAxisLine:!0,hideTicks:!0,numTicks:H,tickValues:W,tickFormat:Q,orientation:"bottom",top:c-hm,tickLabelProps:dSe})]},$)}),o.jsx(VLt,{l:S,id:e,history:y,baseline:w,stops:K,xDomainData:v}),o.jsx(Ye,{children:o.jsx(pH,{width:l,yScale:C,baseline:w})}),o.jsx(Ye,{children:E&&o.jsx(dH,{marginTop:-c,tooltipLeft:E.x,innerHeight:c*3,color:A})})]}),o.jsx(Ye,{children:m&&o.jsx(qLt,{baseline:w,history:p,yScale:C,chartWidth:l,children:o.jsx(z,{className:B("m-sm px-sm py-xs shadow-subtle dark:bg-subtle relative rounded-full border bg-white/75 backdrop-blur-sm dark:shadow-md",X9(!!E)),children:o.jsx(F,{variant:"micro",color:"light",className:"relative whitespace-nowrap",children:o.jsx(ie,{id:"ZjNVXgqGKh",defaultMessage:"Prev close: {price}",values:{price:cV(w,s,f)}})})})})}),o.jsx(Ye,{children:v0(O)&&v0(D)&&o.jsx(ve.div,{animate:{opacity:1},exit:{opacity:0},transition:{duration:.15,ease:"easeInOut"},className:"pointer-events-none absolute inset-0",style:{left:D>O?O:D,right:l-(D>O?D:O),top:-c,bottom:-c},children:o.jsx(ve.div,{className:"bg-inverse absolute inset-0 rounded-md opacity-5"})})}),o.jsx("div",{style:{height:c-hm,width:l},className:"pointer-events-none absolute inset-0",children:E&&o.jsx(GLt,{x:E.x,y:E.y,annotation:E.annotation,close:E.data.close,date:E.data.date,absoluteChange:P.absoluteChange,relativeChange:P.relativeChange,currency:s,exchangeTimezone:t??void 0})})]})});lTe.displayName="Chart";const pH=d.memo(({width:e,yScale:t,baseline:n})=>o.jsx(ve.line,{stroke:Ua.gray,initial:{opacity:0},transition:{duration:hT/1e3,ease:"easeInOut"},animate:{opacity:1,x1:0,x2:e,y1:t(n??0),y2:t(n??0)},exit:{opacity:0},strokeDasharray:"4 4",strokeWidth:.8,shapeRendering:pT}));pH.displayName="FinanceStockHistoryChartClosingLine";const cTe=d.memo(({quote:e,period:t})=>o.jsx(Nr,{fallback:nTe,children:o.jsx(tTe,{height:Cy,render:!!e,children:n=>!e||!t||n<100||!e.history?.length?null:o.jsx(lTe,{symbol:e.symbol,currency:e.currency,period:t,history:e.history,previousClose:e.historicalPreviousClose??void 0,exchangeHours:e.exchangeHours,exchangeTimezone:e.exchangeTimezone,exchangeHoursAnnotations:e.exchangeHoursAnnotations,width:n,height:Cy})})}));cTe.displayName="FinanceStockHistoryChart";const ZLt=["oklch(var(--hydra-450))","oklch(var(--terra-450))","oklch(var(--dalmasca-400))","oklch(var(--kuja-450))","oklch(var(--rosa-450))","oklch(var(--costa-400))","oklch(var(--jenova-450))","oklch(var(--limsa-450))","oklch(var(--gridania-450))"],JLt=["oklch(var(--hydra-350))","oklch(var(--terra-350))","oklch(var(--dalmasca-300))","oklch(var(--kuja-350))","oklch(var(--rosa-350))","oklch(var(--costa-300))","oklch(var(--jenova-250))","oklch(var(--limsa-350))","oklch(var(--gridania-350))"],uTe=()=>{const{colorScheme:e}=jr();return d.useMemo(()=>e==="dark"?JLt:ZLt,[e])},s1=(e,t)=>t[e%t.length]??"oklch(var(--super-color))",eOt=4,B2=e=>e.changesPercentage,tOt=({d:e})=>{const t=fH(e??"",!0,hT);return e?o.jsx(yu.path,{strokeWidth:1.75,fill:"none",shapeRendering:pT,d:t}):null},nOt=({data:e,yScale:t})=>e?.map(n=>o.jsx(rOt,{x:n.x,yv:n.yv,color:n.quote.color,yScale:t,r:eOt},n.quote.symbol)),rOt=({x:e,yv:t,color:n,yScale:r,r:s})=>o.jsx("circle",{cx:e,cy:r(t),r:s,fill:n}),sOt=({data:e,timeZone:t,locale:n,x:r})=>{const s=d.useMemo(()=>e.reduce((i,l)=>Math.abs(l.x-r)<Math.abs(i.x-r)?l:i,e[0]),[e,r]),a=d.useMemo(()=>{if(!s)return null;const i=s.date;return i?pSe(i,n,t??void 0):null},[s,n,t]);return o.jsx(F,{variant:"tinyRegular",color:"light",className:"px-sm py-xs",children:a})},aOt=(e,t)=>{const n={color:e.color,symbol:e.symbol,name:e.name,exchange:e.exchange,currency:e.currency,image:e.image,imageDark:e.imageDark,exchangeTimezone:e.exchangeTimezone};return t?{quote:{...n,price:t.close,historicalChange:t.close-(e.historicalPreviousClose??0),historicalPercentChange:t.changesPercentage*100},date:t.date}:{quote:{...n,price:e.price,historicalChange:e.historicalChange??0,historicalPercentChange:e.historicalPercentChange??0},date:null}},oOt=({data:e,dataMovingAverage:t,xScale:n,xBounds:r,setHoveredComparisons:s})=>{const{tooltipData:a,hideTooltip:i,showTooltip:l}=iH(),c=d.useCallback(f=>{const m=aH(f);if(!m)return;const p=Math.min(Math.max(r[0],m.x),r[1]),h=t.map((g,y)=>{const x=uV(p,n,g.history),v=e[y].history[Math.min(x.index,e[y].history.length-1)],b=aOt(e[y],v);return{date:b.date,quote:b.quote,x:n(fs(x.d))??0,yv:B2(x.d)}});h.every(g=>g.x)&&(s(h.map(g=>g.quote)),l({tooltipData:{data:h,x:m.x,y:-30}}))},[e,t,n,l,r,s]),u=d.useCallback(()=>{i(),s([])},[i,s]);return d.useMemo(()=>({tooltipData:a,hideTooltip:u,showTooltip:c}),[a,u,c])},iOt=e=>{if(e.length===0)return!0;const t=e[0].map(fs);for(let n=1;n<e.length;++n){const r=e[n];if(r?.length!==t.length)return!1;for(let s=0;s<t.length-1;++s)if(fs(r[s]).getTime()!==t[s].getTime())return!1}return!0},lOt=(e,t)=>t?(e-t)/t:0,zae=e=>{const t=e.historicalPreviousClose||e.history[0].close,n=e.history.map(r=>({...r,changesPercentage:lOt(r.close,t),change:r.close-t}));return{...e,history:n}},cOt=(e,t)=>({...e,history:lV(e.history,t)}),uOt=(e,t)=>!e||e===t?1:.2,dOt=({quotes:e,period:t,width:n,height:r,setHoveredComparisons:s,focused:a})=>{const{locale:i,timeZone:l}=Z(),{isMobileStyle:c}=xe(),u=c?lSe:iSe,f=d.useMemo(()=>{const T=[...new Set(e.map(N=>N.exchangeTimezone))];return T.length===1?T[0]:l},[l,e]),m=d.useMemo(()=>e.map(zae),[e]),p=d.useMemo(()=>e.map(T=>zae(cOt(T,t))),[e,t]),h=d.useMemo(()=>p.flatMap(T=>T.history).sort((T,N)=>fs(T).getTime()-fs(N).getTime()),[p]),g=d.useMemo(()=>Qd({nice:!1,domain:co(m.flatMap(T=>T.history),B2),range:[r-hm,0]}),[r,m]),y=d.useMemo(()=>iOt(m.map(T=>T.history)),[m]),x=d.useMemo(()=>t==="1d"||!y?Tp({domain:co(h,fs),range:[0,n]}):tw({domain:Array.from(new Set(h.map(nu))).sort().map(fSe),range:[0,n]}),[n,h,y,t]),{xTickLabels:v,xTickFormatter:b,xTickLines:_,xTickCount:w}=oTe({history:h,xGet:fs,xGetUnparsed:nu,timezone:f,locale:i,period:t,xScale:x,width:n}),C=uTe(),S=d.useMemo(()=>Hu().x(T=>x(fs(T))??0).y(T=>g(B2(T))??0).curve(rSe),[x,g]),E=d.useMemo(()=>p.map((T,N)=>({path:S(T.history),color:s1(N,C),quote:T})),[p,S,C]),k=d.useMemo(()=>g.ticks(u).filter(T=>T!==0),[g,u]),M=d.useMemo(()=>[...m.map(T=>T.symbol),t].join("-"),[m,t]),j=d.useMemo(()=>[0,n],[n]),{tooltipData:R,hideTooltip:O,showTooltip:D}=oOt({data:m,dataMovingAverage:p,xScale:x,xBounds:j,setHoveredComparisons:s}),P=d.useCallback(T=>T.toLocaleString(i,{style:"percent"}),[i]),A=d.useCallback(T=>{const N=p.map(L=>uSe({tick:T,history:L.history,yScale:g,xScale:x,yGet:B2}));return N.find(L=>L.opacity<1)??N[0]},[p,g,x]);return o.jsxs("div",{className:aSe,onMouseMove:D,onMouseLeave:O,onMouseOut:O,onTouchStart:D,onTouchMove:D,onTouchEnd:O,onTouchCancel:O,children:[o.jsxs("svg",{height:r,width:n,className:sSe,children:[o.jsx(Ye,{initial:!1,mode:"wait",children:o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:hg,children:[o.jsx("g",{opacity:R?0:1,className:X9(!!R),children:o.jsx(Jd,{scale:g,hideTicks:!0,hideAxisLine:!0,numTicks:u,tickFormat:P,left:iV,orientation:"right",tickLabelProps:A})}),o.jsx(Jd,{scale:x,hideAxisLine:!0,hideTicks:!0,numTicks:w,tickValues:v,tickFormat:b,orientation:"bottom",top:r-hm,tickLabelProps:dSe}),o.jsx(Lp,{tickValues:k,scale:g,width:n,stroke:Ua.gray,strokeWidth:1,opacity:.1,className:"transition-all duration-1000"}),o.jsx(oH,{scale:x,opacity:.1,height:r*2,stroke:Ua.gray,style:{transform:`translateY(-${r}px)`},numTicks:w,strokeWidth:1,tickValues:_})]},M)}),o.jsx(Ye,{children:E.map((T,N)=>o.jsx(ve.g,{initial:{opacity:0,transition:hg},exit:{opacity:0,transition:hg},animate:{stroke:T.color,opacity:uOt(a,T.quote.symbol),transition:{delay:0,duration:.25}},children:o.jsx(tOt,{d:T.path})},N))}),o.jsx(Ye,{children:o.jsx(pH,{width:n,yScale:g})}),o.jsx(Ye,{children:R&&o.jsx(dH,{marginTop:-r,tooltipLeft:R.x,innerHeight:r*3,color:Ua.gray})}),o.jsx(nOt,{data:R?.data,yScale:g})]}),R&&o.jsx(rTe,{x:R.x,y:R.y,pill:!0,children:o.jsx(sOt,{data:R.data,timeZone:f,x:R.x,locale:i})})]})},fOt=d.memo(function({quotes:t,period:n,focused:r,setHoveredComparisons:s}){return o.jsx(Nr,{fallback:nTe,children:o.jsx(tTe,{height:Cy,render:!!t?.length,children:a=>!t?.length||!n||a<100||!t.every(i=>i?.history?.length)?null:o.jsx(dOt,{quotes:t,period:n,width:a,height:Cy,focused:r,setHoveredComparisons:s})})})}),mOt=({root:e,quote:t,removeComparison:n,setFocused:r,className:s,href:a})=>{const i=d.useCallback(()=>{r(t.symbol)},[r,t.symbol]),l=d.useCallback(()=>{r(null)},[r]),c=d.useCallback(u=>{u.preventDefault(),u.stopPropagation(),l(),n(t.symbol)},[n,t.symbol,l]);return o.jsxs(zu,{href:a,className:B("hover:bg-subtler flex items-center justify-start duration-150",{"bg-subtlest":e},s),onMouseEnter:i,onMouseLeave:l,children:[o.jsx(z,{className:"w-xs my-xs ml-xs shrink-0 self-stretch rounded-full",style:{background:t.color}}),o.jsxs(z,{className:"p-sm py-xs gap-sm md:gap-md flex w-full items-center justify-between",children:[o.jsxs(z,{className:B("gap-sm duration-quick grid w-full items-center transition-opacity [grid-template-columns:2fr_1fr_1fr] md:[grid-template-columns:5fr_1fr_1fr_1fr]",{"pointer-events-none opacity-0":t.loading}),children:[o.jsxs(z,{className:"gap-sm flex items-center",children:[o.jsx(Q3,{symbol:t.symbol??"",src:t.image??"",srcDark:t.imageDark??""}),o.jsxs(z,{children:[o.jsx(F,{variant:"smallBold",className:"line-clamp-1 text-ellipsis",children:t.name??t.symbol}),o.jsx(F,{variant:"tinyMono",color:"light",children:o.jsx(gT,{symbol:t.symbol,exchange:t.exchange})})]})]}),o.jsx("span",{children:v0(t.price)&&o.jsx(ly,{variant:"small",price:t.price??0,currency:t.currency,animated:!1,className:"text-right"})}),o.jsx("span",{className:"hidden text-center md:block",children:v0(t.historicalChange)&&o.jsx(ly,{variant:"small",price:t.historicalChange??0,currency:t.currency,animated:!1,sign:!0})}),o.jsx("span",{children:v0(t.historicalPercentChange)&&o.jsx(Ym,{change:t.historicalPercentChange??0,variant:"tiny",includeIcon:!0,mono:!1,animated:!1})})]}),o.jsx(z,{className:B("flex items-center justify-end active:scale-95",{"pointer-events-none invisible":e}),children:o.jsx(me,{onClick:c,variant:"border",icon:kt,pill:!0,size:"tiny"},t.symbol)})]})]})},dTe=d.memo(({comparisons:e,removeComparison:t,setFocused:n})=>{const r=d.useCallback(()=>{n(null)},[n]),s=d.useCallback(a=>{const i=[a.symbol,...e.map(l=>l.symbol).filter(l=>l!==a.symbol)];return`/finance/${a.symbol}?comparing=${i.join(",")}`},[e]);return o.jsx(z,{className:"m-0 flex flex-col overflow-hidden p-0",onMouseLeave:r,children:e.map((a,i)=>o.jsx(mOt,{quote:a,root:i===0,removeComparison:t,setFocused:n,href:s(a)},`${a.symbol}-${i===0}`))})});dTe.displayName="FinanceStockHistoryComparisonList";const fTe="recent-tickers:2",pOt=5,hOt=()=>{if(typeof window>"u")return[];try{const e=De.getItem(fTe);return e?JSON.parse(e):[]}catch{return[]}},Gae=e=>{if(!(typeof window>"u"))try{De.setItem(fTe,JSON.stringify(e))}catch{}},hH=()=>{const[e,t]=d.useState([]);d.useEffect(()=>{t(hOt())},[]);const n=d.useCallback(s=>{t(a=>{const i=a.filter(c=>c.symbol!==s.symbol),l=[s,...i].slice(0,pOt);return Gae(l),l})},[]),r=d.useCallback(()=>{t([]),Gae([])},[]);return d.useMemo(()=>({recentTickers:e,addRecentTicker:n,clearRecentTickers:r}),[e,n,r])},mTe=d.memo(({defaultSuggestions:e=[],placeholder:t,type:n="header",onClick:r,hideRecent:s=!1,inputClassName:a})=>{const[i,l]=d.useState(!1),[c,u]=d.useState(""),[f,m]=d.useState(null),p="finance-navigational-searchbar",{isMobileStyle:h}=xe(),{$t:g}=Z(),{country:y}=nSe(),x=ot(),{data:v,isLoading:b}=Ue({queryKey:nte(c,y),queryFn:()=>t9({query:c,reason:p,country:y}),staleTime:0,enabled:i}),_=d.useRef(null),w=vt(),C=d.useCallback(G=>{G?.url&&w.push(G.url)},[w]),S=r??C,E=g(h?{defaultMessage:"Enter Symbol",id:"Z+VSV2W9rg"}:{defaultMessage:"Search for companies, tickers, or crypto",id:"qKfwse3EGh"}),k=d.useRef(c);d.useEffect(()=>{k.current=c,m(c===""?null:0)},[c]);const M=d.useMemo(()=>e?.length&&c===""?"suggestions":v?.length&&c===""?"trending":"search",[e,c,v?.length]),j=d.useMemo(()=>{if(M==="suggestions")return g({defaultMessage:"Suggested",id:"a0lFbMbzyl"});if(M==="trending")return g({defaultMessage:"Trending",id:"ll/ufR0/ED"})},[M,g]),R=d.useMemo(()=>{if(M==="suggestions")return e;const G=v?.filter(ee=>ee.category==="ticker");return G?G.map(ee=>({symbol:ee.query??"",name:ee.title??"",image:ee.image??"",darkImage:ee.image_dark??"",url:ee.url??"",exchange:ee.metadata?.price_info?.exchange??"",country:ee.metadata?.price_info?.exchangeCountry??"",currency:ee.metadata?.price_info?.currency??"",change:ee.metadata?.price_info?.changePercentage??void 0,currentPrice:ee.metadata?.price_info?.currentPrice??void 0,changesPercentage:ee.metadata?.price_info?.changePercentage??void 0})):[]},[v,e,M]),{recentTickers:O,addRecentTicker:D}=hH(),P=d.useMemo(()=>({recentTickers:O.length&&c===""&&!s?O:[],suggestions:R?.length?R:[]}),[O,R,c,s]),A=d.useMemo(()=>[...P.recentTickers,...P.suggestions],[P.recentTickers,P.suggestions]);d.useEffect(()=>{f!==null&&f>T.current-1&&m(Math.max(0,T.current-1))},[P,f]);const T=d.useRef(0),N=d.useRef(null),L=d.useRef(A);d.useEffect(()=>{T.current=P.recentTickers.length+P.suggestions.length},[P]),d.useEffect(()=>{N.current=f},[f]),d.useEffect(()=>{L.current=A},[A]);const U=d.useCallback(G=>{u(G)},[]),$=d.useCallback(()=>{requestAnimationFrame(()=>{_.current&&_.current.focusAtEnd()})},[]),V=d.useCallback(G=>{S(G),l(!1),u(""),G&&D({symbol:G.symbol,name:G.name,image:G.image,darkImage:G.darkImage,url:G.url,exchange:G.exchange,country:G.country,currency:G.currency,change:G.change,currentPrice:G.currentPrice,changesPercentage:G.changesPercentage})},[D,S,l,u]),W=d.useCallback(G=>{const ee=T.current;G.key==="ArrowDown"?(m(Y=>Y===null?0:Math.min(Y+1,ee-1)),$()):G.key==="ArrowUp"?(m(Y=>Y===null?0:Math.max(Y-1,0)),$()):G.key==="Enter"&&N.current!==null&&(l(!1),V(L.current[N.current]))},[$,V]),Q=d.useCallback(()=>{l(!1),m(null),window.removeEventListener("keydown",W)},[W]),q=d.useCallback(()=>{l(!0),window.addEventListener("keydown",W),window.addEventListener("click",Q,{once:!0})},[Q,W]),H=d.useCallback(G=>{G.stopPropagation()},[]);d.useEffect(()=>{x.prefetchQuery({queryKey:nte("",y),queryFn:()=>t9({query:"",reason:p,country:y}),staleTime:0})},[x,y,p]),vp(()=>{window.removeEventListener("click",Q),window.removeEventListener("keydown",W)});const K=d.useCallback(()=>{l(!1),m(null)},[]);return o.jsxs("div",{className:B("relative",{"pt-one md:w-full md:max-w-[360px]":n==="header","w-full":n==="inline"}),onClick:H,children:[o.jsx(Xr,{type:"search",placeholder:t??E,isMobileUserAgent:!1,onFocus:q,onChange:U,className:B("!focus:ring-super/50 dark:focus:!ring-super/50 bg-subtler h-9 w-full !border-none !py-0",{"!bg-subtlest":n==="inline"},a),ref:_}),o.jsx(Ye,{children:i&&o.jsx(pTe,{title:j,isLoadingSuggestions:b,items:P,value:c,focusedIndex:f,onScrimClick:K,setIsFocused:l,setValue:u,type:n,hideRecent:s,openAsset:V})})]})});mTe.displayName="FinanceNavigationalSearchbar";const pTe=d.memo(({title:e,isLoadingSuggestions:t,items:n,value:r,focusedIndex:s,onScrimClick:a,setIsFocused:i,setValue:l,type:c,hideRecent:u,openAsset:f})=>{const{recentTickers:m,clearRecentTickers:p}=hH(),{isMobileStyle:h}=xe(),{$t:g}=Z(),{inApp:y}=Xo(),x=d.useCallback(()=>{p()},[p]),v=d.useMemo(()=>o.jsx("div",{className:"flex h-0 items-center",children:o.jsx(Me,{icon:kt,size:"tiny",pill:!0,onClick:x,extraCSS:"-mr-sm opacity-50 hover:opacity-100",toolTip:g({defaultMessage:"Clear recents",id:"4k9F3xn5kg"})})}),[x,g]);return!n.suggestions?.length&&!t?null:o.jsxs(o.Fragment,{children:[o.jsx(ve.div,{className:B({"top-headerHeight bg-base fixed inset-x-0 bottom-0 md:hidden":c==="header",hidden:c==="inline"}),onClick:a,initial:{opacity:0},animate:{opacity:.8},exit:{opacity:0},transition:{ease:an,duration:.2}}),o.jsx(ve.div,{className:B("md:w-auto",{"top-headerHeight md:-inset-x-xl fixed inset-x-0 w-screen md:absolute md:top-full":c==="header","absolute inset-x-0 top-full":c==="inline"}),initial:{opacity:0,y:-10,scale:h?1:.98},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:h?1:.98},transition:{ease:an,duration:.2},children:o.jsx(z,{variant:"raised",className:B("md:translate-y-xs relative flex flex-col overflow-hidden shadow-md",{"rounded-b-xl md:rounded-xl md:border md:shadow-xl":c==="header","rounded-xl border shadow-xl":c==="inline","-mt-one":y&&c==="header"}),children:n.suggestions&&n.suggestions.length>0?o.jsxs(o.Fragment,{children:[!!m.length&&r===""&&!u&&o.jsxs(o.Fragment,{children:[o.jsx(hL,{title:g({defaultMessage:"Recent",id:"iXpep1vGVo"}),trailing:v}),o.jsx("div",{className:"gap-xs p-sm flex flex-wrap",children:n.recentTickers.map((b,_)=>o.jsx(hTe,{ticker:b,isFocused:s===_,openAsset:f},`${b.symbol}-recent`))})]}),e?o.jsx(hL,{title:e}):o.jsx(z,{className:"border-b"}),n.suggestions.map((b,_)=>o.jsx(gTe,{ticker:b,openAsset:f,isFocused:s===_+n.recentTickers.length,setIsFocused:i,setValue:l},b.symbol+"suggestion"))]}):t?o.jsx("div",{className:"p-md flex items-center justify-center opacity-50",children:o.jsx(Fr,{size:14})}):n.suggestions?.length===0&&r!==""?o.jsx(F,{variant:"small",color:"light",className:"p-md text-center",children:g({defaultMessage:"No results",id:"jHJmjfxD4s"})}):null})})]})});pTe.displayName="NavigationalMenu";const hL=d.memo(({title:e,trailing:t})=>o.jsxs("div",{className:"bg-subtler gap-sm px-md py-sm flex items-center justify-between",children:[o.jsx(F,{variant:"tinyMono",color:"light",children:e}),t]}));hL.displayName="Header";const hTe=d.memo(({ticker:e,isFocused:t,openAsset:n})=>o.jsxs(z,{className:"pl-xs pr-sm group relative inline-flex cursor-pointer overflow-hidden rounded-full border py-0.5",as:"button",onClick:()=>n(e),children:[o.jsx(z,{className:B("absolute inset-0 rounded-full group-hover:opacity-50",t?"opacity-50":"opacity-0"),variant:"raisedOffset"}),o.jsxs("div",{className:"gap-xs relative flex items-center",children:[o.jsx(I3,{watchlistType:"FINANCE",image:e.image,imageDark:e.darkImage,alt:e.name,imageClassName:"!size-4 overflow-hidden rounded"}),o.jsx(F,{variant:"tiny",children:e.name}),o.jsx(F,{variant:"tinyMono",color:"light",children:e.symbol})]})]}));hTe.displayName="NavigationalSearchbarRecentItem";const gTe=d.memo(({ticker:e,isFocused:t,openAsset:n})=>{const{addRecentTicker:r}=hH(),s=d.useCallback(()=>{r(e),n(e)},[r,e,n]);return o.jsxs(z,{className:"gap-sm px-md py-sm group relative flex cursor-pointer appearance-none items-center justify-between border-b text-left last:border-b-0",onClick:s,as:"button",children:[o.jsx(z,{className:B("absolute inset-0 opacity-0 group-hover:opacity-50",t&&"opacity-50"),variant:"raisedOffset"}),o.jsxs("div",{className:"gap-md relative flex w-full items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[o.jsx(I3,{watchlistType:"FINANCE",image:e.image,imageDark:e.darkImage,alt:e.name,className:"shrink-0 overflow-hidden rounded"}),o.jsxs("div",{className:"min-w-0",children:[o.jsx(F,{variant:"smallBold",className:"truncate",children:e.name}),o.jsx(F,{variant:"tinyMono",color:"light",children:o.jsx(gT,{symbol:e.symbol,exchange:e.exchange,country:e.country})})]})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[e.currentPrice&&e.currency?o.jsx(F,{variant:"tinyMono",color:"light",children:e.currentPrice.toLocaleString("en-US",{style:"currency",currency:e.currency})}):null,e.change?o.jsx(Ym,{change:e.change,variant:"tinyMono",includeIcon:!0}):null,o.jsx(de,{icon:Xn,size:"sm",className:"text-quiet -mr-xs"})]})]})]})});gTe.displayName="NavigationalSearchbarItem";const yTe=d.memo(({peers:e,addComparison:t})=>{const{$t:n}=Z(),r=d.useMemo(()=>e.map(s=>s)?.slice(0,5),[e]);return o.jsx(z,{className:"flex flex-col",children:o.jsx(z,{className:"z-10 w-full",children:o.jsx(mTe,{placeholder:n({defaultMessage:"Compare to...",id:"54IHNaS6Nj"}),hideRecent:!0,defaultSuggestions:r,type:"inline",onClick:s=>{s&&t({symbol:s.symbol,name:s.name,image:s.image,imageDark:s.darkImage,exchange:s.exchange,price:s.currentPrice,currency:s.currency,historicalChange:s.change,historicalPercentChange:s.changesPercentage})}})})})});yTe.displayName="FinanceStockHistoryChartComparisonSearch";var xTe="Toggle",vTe=d.forwardRef((e,t)=>{const{pressed:n,defaultPressed:r,onPressedChange:s,...a}=e,[i,l]=Ni({prop:n,onChange:s,defaultProp:r??!1,caller:xTe});return o.jsx(Xt.button,{type:"button","aria-pressed":i,"data-state":i?"on":"off","data-disabled":e.disabled?"":void 0,...a,ref:t,onClick:it(e.onClick,()=>{e.disabled||l(!i)})})});vTe.displayName=xTe;var Cf="ToggleGroup",[bTe,$cn]=Ca(Cf,[mx]),_Te=mx(),gH=I.forwardRef((e,t)=>{const{type:n,...r}=e;if(n==="single"){const s=r;return o.jsx(gOt,{...s,ref:t})}if(n==="multiple"){const s=r;return o.jsx(yOt,{...s,ref:t})}throw new Error(`Missing prop \`type\` expected on \`${Cf}\``)});gH.displayName=Cf;var[wTe,CTe]=bTe(Cf),gOt=I.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[i,l]=Ni({prop:n,defaultProp:r??"",onChange:s,caller:Cf});return o.jsx(wTe,{scope:e.__scopeToggleGroup,type:"single",value:I.useMemo(()=>i?[i]:[],[i]),onItemActivate:l,onItemDeactivate:I.useCallback(()=>l(""),[l]),children:o.jsx(STe,{...a,ref:t})})}),yOt=I.forwardRef((e,t)=>{const{value:n,defaultValue:r,onValueChange:s=()=>{},...a}=e,[i,l]=Ni({prop:n,defaultProp:r??[],onChange:s,caller:Cf}),c=I.useCallback(f=>l((m=[])=>[...m,f]),[l]),u=I.useCallback(f=>l((m=[])=>m.filter(p=>p!==f)),[l]);return o.jsx(wTe,{scope:e.__scopeToggleGroup,type:"multiple",value:i,onItemActivate:c,onItemDeactivate:u,children:o.jsx(STe,{...a,ref:t})})});gH.displayName=Cf;var[xOt,vOt]=bTe(Cf),STe=I.forwardRef((e,t)=>{const{__scopeToggleGroup:n,disabled:r=!1,rovingFocus:s=!0,orientation:a,dir:i,loop:l=!0,...c}=e,u=_Te(n),f=S_(i),m={role:"group",dir:f,...c};return o.jsx(xOt,{scope:n,rovingFocus:s,disabled:r,children:s?o.jsx(YU,{asChild:!0,...u,orientation:a,dir:f,loop:l,children:o.jsx(Xt.div,{...m,ref:t})}):o.jsx(Xt.div,{...m,ref:t})})}),uk="ToggleGroupItem",ETe=I.forwardRef((e,t)=>{const n=CTe(uk,e.__scopeToggleGroup),r=vOt(uk,e.__scopeToggleGroup),s=_Te(e.__scopeToggleGroup),a=n.value.includes(e.value),i=r.disabled||e.disabled,l={...e,pressed:a,disabled:i},c=I.useRef(null);return r.rovingFocus?o.jsx(QU,{asChild:!0,...s,focusable:!i,active:a,ref:c,children:o.jsx(qae,{...l,ref:t})}):o.jsx(qae,{...l,ref:t})});ETe.displayName=uk;var qae=I.forwardRef((e,t)=>{const{__scopeToggleGroup:n,value:r,...s}=e,a=CTe(uk,n),i={role:"radio","aria-checked":e.pressed,"aria-pressed":void 0},l=a.type==="single"?i:void 0;return o.jsx(vTe,{...l,...s,ref:t,onPressedChange:c=>{c?a.onItemActivate(r):a.onItemDeactivate(r)}})}),bOt=gH,_Ot=ETe;const wOt=({value:e,onChange:t,id:n,children:r,boxProps:s,className:a=""})=>{const i=l=>{l&&t(l)};return o.jsx(MTe.Provider,{value:{activeValue:e},children:o.jsx(Ec,{id:n,children:o.jsx(bOt,{onValueChange:i,type:"single",value:e,asChild:!0,children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:o.jsx(z,{className:B("border-subtler p-two flex rounded-lg border",a),...s,children:r})})})})})},COt=({value:e,icon:t,className:n="",children:r})=>{const s="relative text-quiet hover:text-foreground data-[state=on]:text-foreground flex h-[32px] min-w-[32px] p-sm items-center justify-center duration-150 active:scale-95",a=d.useContext(MTe);return o.jsx(_Ot,{asChild:!0,value:e,children:o.jsxs("button",{className:B(s,n),children:[o.jsxs("span",{className:"gap-xs relative z-[2] flex",children:[Array.isArray(t)?t.map((i,l)=>o.jsx(de,{icon:i,size:"sm"},l)):t?o.jsx(de,{icon:t,size:"sm"}):null,r]}),a.activeValue===e&&o.jsx(ve.div,{layout:!0,layoutId:"toggle",className:"absolute inset-0 z-[1]",transition:{duration:.15,ease:Zd},children:o.jsx("div",{className:"absolute inset-0 rounded-md bg-current opacity-10"})})]})})},MTe=Dt("ToggleGroupContext",{activeValue:""}),SOt=wOt,EOt=COt,Kae={Root:SOt,Item:EOt},kTe=n9.map(e=>({text:Ewe[e],value:e})),MOt=d.memo(function({id:t,periods:n,period:r,setPeriod:s,className:a}){const{isMobileStyle:i}=xe(),{$t:l}=Z(),c=d.useMemo(()=>n.map(u=>({text:l(rte[u.value]),value:u.value,active:r===u.value,show:!0,type:"default",onClick:()=>{s(u.value)}})),[n,r,s,l]);return i?o.jsx(z,{className:B(a,"flex items-center"),variant:"transparent",children:o.jsx(nn,{items:c,isMobileStyle:i,children:o.jsx(Me,{text:l(rte[r]),size:"tiny",variant:"primary",chevron:!0})})}):o.jsx(Kae.Root,{value:r,className:a,id:`${t}-periods`,onChange:u=>{s(u)},children:n.map(u=>o.jsx(Kae.Item,{value:u.value,className:"select-none bg-transparent",children:o.jsx(F,{variant:"tiny",color:r===u.value?"default":"light",className:"translate-y-px whitespace-nowrap duration-150",children:u.text})},`${u.value}`))})}),yH=({shouldAnimate:e,animationDuration:t=1,animationName:n})=>{const r=d.useRef(0),s=d.useRef(null),[a,i]=d.useState(!1);d.useEffect(()=>{if(s.current&&(clearTimeout(s.current),s.current=null),e)i(!0),r.current=performance.now();else if(r.current>0){const m=(performance.now()-r.current)/(t*1e3)%1;s.current=setTimeout(()=>{i(!1),r.current=0,s.current=null},(1-m)*t*1e3)}else i(!1),r.current=0;return()=>{s.current&&(clearTimeout(s.current),s.current=null)}},[e,t]);const l=B(n,"fill-mode-both h-full w-auto shrink-0 transform-gpu will-change-transform"),c="h-full w-auto shrink-0 transform-gpu";return d.useMemo(()=>({_shouldAnimate:a,sequenceProps:{className:l,style:{animationDuration:`${t}s`}},staticProps:{className:c}}),[a,t,l])},d4=d.memo(({children:e,className:t,size:n,aspectRatio:r=1})=>o.jsx("div",{className:B("text-foreground flex shrink-0 items-center justify-start overflow-hidden",t),style:{height:n,aspectRatio:r},children:e}));d4.displayName="SpriteAnimationWrapper";const TTe=d.memo(({lineThickness:e,...t})=>o.jsxs("svg",{width:"2820",height:"74",viewBox:"0 0 2820 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:[o.jsx("path",{d:"M29.6848 25.4603L48.3092 41.1547V64.3955L29.6848 49.0293M29.6848 25.4603L10.9465 41.2436V64.7306L29.6316 49.0293M29.6848 25.4603H3.35229V49.1113H10.3379M29.6848 25.4603H56.0553V49.1113H48.6552M29.6848 25.4603L10.9465 9.77618V24.7752M29.6848 25.4603L48.3092 9.77618V24.7591M29.6848 25.4603L29.6848 2.77313V24.382M29.6848 25.4603V49.1113M29.6848 25.4603V71.6755V49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M209.685 49.029L226.532 65.889V42.256L209.685 25.46L189.647 39.835L189.532 64.785L207.207 50.797",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M209.685 25.46L207.549 47.423V71.566L209.685 49.084M209.685 25.46L183.516 24.701V47.433L189.594 47.823M209.685 25.46L235.855 26.937V50.943L226.655 50.299M209.685 25.46L192.558 8.218V24.1M209.685 25.46L229.708 10.542V26.546M209.685 25.46L211.798 2.855V24.76M209.685 25.46V49.111M269.685 49.029L285.993 66.318V42.675L269.685 25.46L249.061 39.22V63.11L266.369 51.263",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M269.685 25.46L266.606 47.86V71.511L269.685 49.084M269.685 25.46L243.571 22.835V46.558L248.794 47.068M269.685 25.46L295.788 27.702V51.6L286.585 50.723M269.685 25.46L253.227 7.67V24.726M269.685 25.46L290.377 11.28V27.133M269.685 25.46L272.71 2.923V23.098M269.685 25.46V49.111M329.685 49.03L345.299 67.137V43.3L329.685 25.46L308.331 38.51V62.29L325.293 51.73",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M329.685 25.46L325.565 47.635V71.334L329.685 49.084M329.685 25.46L304.726 21.906V45.738L307.934 46.296M329.685 25.46L355.721 28.687V52.584L345.937 51.279M329.685 25.46L314.048 7.233V23.17M329.685 25.46L351.015 11.882V27.907M329.685 25.46L333.714 2.992V22.74M329.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 49.029L404.201 67.538L404.352 43.92L389.685 25.46L367.86 37.607V61.387L384.2 52.113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 25.46L384.523 47.3V71.156L389.685 49.084M389.685 25.46L363.9 20.922V44.754L367.262 45.322M389.685 25.46L415.508 29.78V54.723L404.436 51.688M389.685 25.46L375.021 6.57701V22.724",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M389.685 25.46L411.715 12.838V29.235M389.685 25.46L394.754 3.19701V22.344M389.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 49.029L463.072 68.404L463.215 44.53L449.685 25.46L427.054 36.842V60.595L442.826 52.515",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 25.46L443.117 47.129V70.924L449.685 49.084M449.685 25.46L424.143 19.8V44.76L426.599 44.184M449.685 25.46L475.28 30.683V54.58L463.735 52.113M449.685 25.46L436.176 5.976V22.356",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M449.685 25.46L472.414 13.727V30.403M449.685 25.46L456.192 3.539L456.33 21.994M449.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 49.029L521.673 68.656L521.879 45.127L509.685 25.46L486.385 35.611V59.501L501.389 52.742",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 25.46L501.711 46.575V70.418L509.685 49.084M509.685 25.46L484.477 18.515V42.481L485.621 42.781M509.685 25.46L534.754 32.077V55.906L522.17 52.482",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M509.685 25.46L497.606 5.374L497.3 22.124M509.685 25.46L533.189 14.79V31.499M509.685 25.46L517.651 3.84V21.876M509.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M569.685 49.03L580.306 69.736V45.91L569.685 25.46L545.564 34.271V58.134L559.659 52.802",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M569.685 25.46L560 46.322V69.98L569.685 49.084M569.685 25.46L545.086 17.121V40.813L545.119 40.824M569.685 25.46L594.185 33.444L594.238 57.334L580.581 52.76M569.685 25.46L559.096 4.69V21.458M569.685 25.46L593.98 16.31L594.119 33.415M569.685 25.46L579.4 4.36V21.53M569.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 49.03L638.275 70.78V46.58L629.685 25.46L604.774 32.603V56.576L617.836 52.61",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 25.46L618.29 45.14V69.27L629.685 49.084M629.685 25.46L605.937 15.508V32.273M629.685 25.46L653.478 35.112V58.838L638.453 52.696M629.685 25.46L621.102 3.98V21.387",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M629.685 25.46L654.664 17.842V41.941L653.7 42.217M629.685 25.46L641.361 5.084V21.818M629.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 49.029L696.089 71.244V47.065L689.685 25.46L664.074 30.744V54.552L675.799 52.019",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 25.46L676.002 44.34V68.094L689.685 49.084M689.685 25.46L667.092 14.721V29.977M689.685 25.46L712.323 36.944V60.698L696.503 52.601M689.685 25.46L683.353 3.433V21.908",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M689.685 25.46L715.303 19.948V43.855L712.658 44.398M689.685 25.46L703.459 6.06799V22.442M689.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 49.029L753.271 71.747V47.493L749.685 25.46L723.558 28.365V52.201L733.357 51.009",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 25.46L733.714 43.157V66.918L749.685 49.084M749.685 25.46L728.673 11.707V27.76M749.685 25.46L770.772 38.83V62.694L753.503 51.57M749.685 25.46L746.12 3.05V22.72",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M749.685 25.46L775.789 22.19V46.083L771.103 46.627",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M765.679 23.49V7.408L749.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 49.029L809.977 72.045L809.685 47.568V25.46H783.345V49.467L790.992 49.34",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 25.46L791.205 41.503V64.753L809.685 49.083M809.685 25.46L790.832 9.656V25.143M809.685 25.46L828.674 41.127V64.754L809.685 49.11M809.685 25.46L809.343 2.735",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M809.685 25.46L836.063 25.033V48.753L829.072 48.848M809.685 25.46L828.172 9.24001V25.106M809.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 49.03L866.405 71.53L866.065 47.01L869.685 25.46L843.558 22.37V46.186L848.429 46.717",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 25.46L848.696 38.865V62.789L866.042 51.462M869.685 25.46L854.76 7.497V23.406M869.685 25.46L885.633 43.096V66.959L869.685 49.111M869.685 25.46L873.235 3.132V22.9",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M869.685 25.46L895.82 28.304V52.088L885.776 50.944M869.685 25.46L890.726 11.618V27.652M869.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 49.028L922.004 70.99V46.713L929.685 25.46L904.439 18.734V42.44L906.137 42.884",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 25.46L906.294 35.826V59.59L921.769 52.64M929.685 25.46L917.34 5.48701L917.202 21.692M929.685 25.46L942.076 45.065V68.9L929.685 49.111M929.685 25.46L937.401 3.78801V21.63",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M929.685 25.46L954.747 31.858V55.698L942.558 52.481M929.685 25.46L953.068 14.763V31.197M929.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 49.03L977.622 69.38V45.26L989.685 25.46L966.203 15.125V31.444",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 25.46L964.683 32.077V56.008L977.63 52.423M989.685 25.46L981.627 4.01001V21.74M989.685 25.46L997.788 46.787V70.513L989.685 49.111M989.685 25.46L1001.81 5.23701V21.8",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M989.685 25.46L1013.17 35.468V59.279L998 52.711",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1013.48 42.742L1014.79 42.37V18.372L989.685 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 49.029L1034.75 66.743V43.12L1049.68 25.46L1028.76 11.652V27.197",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 25.46L1023.45 28.18V52.112L1033.53 50.949M1049.68 25.46L1046.22 3.026V22.739M1049.68 25.46L1053.2 47.361V71.388L1049.68 49.111M1049.68 25.46L1065.79 7.507V23.295",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1049.68 25.46L1070.59 38.786V62.78L1053.32 51.489",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1070.94 46.661L1075.96 46.101V22.391L1049.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1108.51 49.947L1090.23 64.228V40.474L1109.68 25.46L1091.89 8.78101V24.188",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1109.68 25.46L1084.75 24.27V48.175L1090.22 48.405M1109.68 25.46L1110.87 2.862L1110.71 24.747M1109.68 25.46L1108.57 47.033V71.716L1109.68 49.111M1109.68 25.46L1129.08 10.132V25.747",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1109.68 25.46L1127.46 41.848V65.568L1109.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1127.63 49.715L1135.96 50.034V26.328L1109.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1163.88 52.298L1147.7 61.414V37.531L1169.68 25.46L1155.29 6.59399V22.504",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1169.68 25.46L1143.85 20.662V44.552L1147.51 45.194M1169.68 25.46L1175.13 3.327L1174.79 22.093M1169.68 25.46L1164.62 47.033L1164.2 71.17L1169.68 49.111L1184.23 67.947V44.145L1169.68 25.46ZM1169.68 25.46L1191.87 12.948V28.924",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1184.43 51.662L1195.53 54.743V29.828L1169.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1220.25 52.825L1206.12 58.508V34.662L1229.68 25.46L1218.52 5.036V21.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1229.68 25.46L1204.75 17.627V41.49L1205.54 41.7M1229.68 25.46L1238.81 4.256L1238.64 21.334M1229.68 25.46L1220.73 46.404V70.24L1229.68 49.111L1240.89 69.588V45.758L1229.68 25.46ZM1229.68 25.46L1253.58 15.873V32.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1241.03 52.54L1254.41 56.678V32.863L1229.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 25.46L1264.5 32.081V55.974L1277.2 52.472M1289.68 25.46L1281.65 3.97V21.309M1289.68 25.46L1266.25 14.747V31.563M1289.68 25.46L1301.82 5.35V21.67",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 49.111L1277.57 69.174V45.365L1289.68 25.46L1314.76 18.389V42.272L1314.08 42.458",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1289.68 25.46L1297.73 46.798V70.544L1289.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1297.9 52.673L1313.16 59.44V35.488L1289.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 25.46L1323.79 29.631V53.515L1334.71 51.624M1349.68 25.46L1344.45 3.259V22.232M1349.68 25.46L1327.68 12.87V28.975M1349.68 25.46L1364.34 6.717V22.43",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 49.111L1335.01 67.943V44.053L1349.68 25.46L1375.61 20.877V44.761L1372.31 45.315",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1349.68 25.46L1354.73 47.317V71.173L1349.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1354.79 52.049L1371.71 61.573V37.785L1349.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 25.46L1383.5 27.452V51.428L1392.53 50.601M1409.68 25.46L1407.03 2.95801V23.477M1409.68 25.46L1389.23 11.092V26.894M1409.68 25.46L1426.44 7.97501V23.577",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 49.112L1393.01 66.522V42.522L1409.68 25.46L1435.92 23.037V46.975L1430.43 47.422",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1409.68 25.46L1412.44 47.563V71.501L1409.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1412.62 51.087L1430.15 63.391V39.466L1409.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 25.46L1443.5 25.626V49.323L1450.99 49.239M1469.68 25.46L1469.63 2.79401V2.86401M1469.68 25.46L1450.9 9.64301V25.562M1469.68 25.46L1488.17 9.37001V24.736",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 49.112L1451.33 65.182V41.237L1469.68 25.46L1496.16 25.142V48.807L1488.91 48.89",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 25.46L1470 47.754V71.638L1469.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1469.68 49.029L1488.52 64.754V40.916L1469.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 25.46L1503.5 23.874V47.758L1509.37 48.043M1529.68 25.46L1531.55 2.84801V23.465M1529.68 25.46L1512.36 8.33001V24.23M1529.68 25.46L1549.57 10.545V26.025",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 49.111L1509.84 63.869V40.061L1529.68 25.46L1556.02 26.756V50.694L1547.51 50.182",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1529.68 25.46L1527.94 47.918V71.474L1529.68 49.111V25.46ZM1529.68 25.46L1547.05 42.091V66.098L1529.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1589.68 25.46L1563.5 22.18V46.007L1568.24 46.554M1589.68 25.46L1593.34 3.09401V22.586M1589.68 25.46L1573.79 7.40001V23.212M1589.68 25.46L1610.79 11.584V27.55",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1585.87 51.573L1568.66 62.693V38.803L1589.68 25.46L1615.89 28.242V52.307L1606.05 51.107",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1589.68 25.46L1586.05 47.645V71.31L1589.68 49.111V25.46ZM1589.68 25.46L1605.57 43.075V67.082L1589.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1649.68 25.46L1623.96 20.819V44.572L1627.42 45.172M1649.68 25.46L1654.72 3.17599V21.958M1649.68 25.46L1635.13 6.55299V22.64M1649.68 25.46L1671.73 12.842V28.897",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1644.41 52.059L1627.59 61.463V37.628L1649.68 25.46L1675.55 29.8V54.747L1664.45 51.7",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1649.68 25.46L1644.38 47.317V71.255L1649.68 49.111V25.46ZM1649.68 25.46L1664.25 44.019V67.929L1649.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1709.68 25.46L1684.35 19.59V43.25L1686.64 43.77M1709.68 25.46L1716.47 3.58701V21.618M1709.68 25.46L1696.43 5.87001V22.235M1709.68 25.46L1732.55 14.018V30.154",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1702.93 52.469L1686.93 60.424V36.452L1709.68 25.46L1735.25 31.14V54.76L1722.16 51.964",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1709.68 25.46L1702.88 47.085V70.9L1709.68 49.111V25.46ZM1709.68 25.46L1722.9 44.757V68.558L1709.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1769.68 25.46L1744.79 18.471V42.224L1746.02 42.562M1769.68 25.46L1777.81 3.99701V21.415M1769.68 25.46L1757.68 5.32301V21.924M1769.68 25.46L1793.25 15.056V31.36",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1761.32 52.76L1746.01 59.44V35.467L1769.68 25.46L1794.76 32.084V55.97L1781.58 52.363",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1769.68 25.46L1761.49 46.729V70.489L1769.68 49.111V25.46ZM1769.68 25.46L1781.63 45.222V69.146L1769.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1829.68 25.46L1805.1 17.39V41.163L1805.4 41.259M1829.68 25.46L1839 4.35201V21.335M1829.68 25.46L1818.87 4.703V21.707M1829.68 25.46L1853.83 15.986V32.568",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1820.07 52.787L1805.53 58.347V34.647L1829.68 25.46L1854.34 33.21V57.037L1841 52.75",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1829.68 25.46L1820.32 46.305V70.148L1829.68 49.111V25.46ZM1829.68 25.46L1840.49 45.66V69.638L1829.68 49.029",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1889.68 25.46L1865.62 16.478L1865.29 33.368M1889.68 25.46L1900.06 4.68V21.433M1889.68 25.46L1879.96 4.42V21.716M1889.68 25.46L1914.28 16.834V40.88L1914.24 40.895M1889.68 25.46L1865.16 33.554V57.444L1879.17 52.685",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1899.9 52.822L1913.91 57.912V34.058L1889.68 25.46L1879.29 45.868V69.806L1889.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1889.68 49.029L1899.43 69.806V46.015L1889.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1949.68 25.46L1925.99 15.695V31.95M1949.68 25.46L1961.1 5.063V21.494M1949.68 25.46L1940.84 4.092V21.5M1949.68 25.46L1974.68 17.79L1974.47 41.702L1973.9 41.872M1949.68 25.46L1924.76 32.706V56.596L1938.1 52.605",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1958.83 52.837L1973.52 58.814V34.733L1949.68 25.46L1938.23 45.615V69.41L1949.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M1949.68 49.029L1958.5 70.298V46.37L1949.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2009.68 25.46L1986.3 14.757V31.231M2009.68 25.46L2021.92 5.44601V21.716M2009.68 25.46L2001.76 3.87401V21.862M2009.68 25.46L2034.73 18.584V42.522L2033.42 42.892M2009.68 25.46L1984.49 31.943V55.858L1997.18 52.461",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2017.96 52.797L2033.06 59.525V35.698L2009.68 25.46L1997.49 45.136V69.026L2009.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2009.68 49.029L2017.51 70.544V46.63L2009.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2069.68 25.46L2046.84 14.317V30.256M2069.68 25.46L2082.74 5.82901V21.933M2069.68 25.46L2062.64 3.71001V21.922M2069.68 25.46L2095.2 19.377V43.287L2092.94 43.803M2069.68 25.46L2044.28 31.26V55.065L2056.51 52.199",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2076.98 52.648L2092.73 60.29V36.218L2069.68 25.46L2056.73 44.713V68.576L2069.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2069.68 49.03L2076.74 70.79V47.018L2069.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2129.68 25.46L2107.19 13.74V29.597M2129.68 25.46L2143.31 6.211V22.141M2129.68 25.46L2123.43 3.464V21.942M2129.68 25.46L2155.41 20.033L2155.2 43.916L2152.65 44.436M2129.68 25.46L2103.94 30.658V54.463L2115.78 52.002",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2136.31 52.545L2152.21 60.783V36.874L2129.68 25.46L2115.95 44.384V68.274L2129.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2129.68 49.029L2135.9 70.968V47.032L2129.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2189.68 25.46L2167.64 13.069V28.892M2189.68 25.46L2204.01 6.43V22.382M2189.68 25.46L2184.31 3.3V22.194M2189.68 25.46L2215.62 20.58V44.518L2212.13 45.137M2189.68 25.46L2163.85 29.865L2163.94 53.862L2174.73 51.834",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2195.71 52.442L2211.87 61.385V37.448L2189.68 25.46L2175.33 44.111V67.974L2189.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2189.68 49.029L2195.25 71.118V47.114L2189.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2249.68 25.46L2227.97 12.556V28.31M2249.68 25.46L2264.62 6.676V22.45M2249.68 25.46L2244.76 3.08V22.463M2249.68 25.46L2275.62 21.072V45.229L2271.85 45.793M2249.68 25.46L2223.76 29.346L2223.94 53.233L2234.52 51.539",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2254.75 52.153L2271.51 61.713V37.913L2249.68 25.46L2234.72 43.728V67.618L2249.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2249.68 49.029L2254.55 71.146V47.14L2249.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2309.68 25.46L2288.37 12.072V27.909M2309.68 25.46L2325.14 7.196V22.866M2309.68 25.46L2305.5 3.026V22.507M2309.68 25.46L2335.72 21.7L2335.62 45.502L2331.57 46.066M2309.68 25.46L2284.77 28.853V52.66L2294.05 51.244",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2314.36 51.989L2331.05 62.26V38.46L2309.68 25.46L2294.2 43.51V67.29L2309.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2309.68 49.029L2313.94 71.378V47.36L2309.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2348.71 27.302V11.671L2369.68 25.46L2385.56 7.414V23.034",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2369.68 25.46L2366.04 2.944V23.073M2369.68 25.46L2395.82 22.11L2395.62 46.158L2391.12 46.671M2369.68 25.46L2343.55 28.222V52.167L2353.56 50.996",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2374.76 51.665L2390.75 62.643V38.813L2369.68 25.46L2353.78 43.14V67.003L2369.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2369.68 49.029L2373.21 71.378V47.332L2369.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2429.68 25.46L2409.04 11.326V26.962M2429.68 25.46L2446.08 7.66V23.246M2429.68 25.46L2426.62 2.944V23.177M2429.68 25.46L2455.93 22.548V46.568L2450.64 47.08M2429.68 25.46L2403.43 27.948V51.62L2413.16 50.69",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2433.12 51.449L2450.35 63.189V39.251L2429.68 25.46L2413.32 42.771V66.69L2429.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2429.68 49.03L2432.71 71.46V47.332L2429.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2489.68 25.46L2469.4 11.01V26.644M2489.68 25.46L2506.48 7.88001V23.456M2489.68 25.46L2487.23 2.91701V24.713M2489.68 25.46L2516 23.095V46.98L2510.45 47.43M2489.68 25.46L2463.4 27.429L2463.43 51.292L2472.71 50.521",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2492.62 51.175L2510.11 63.49V39.415L2489.68 25.46L2472.91 42.553V66.457L2489.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2489.68 49.029L2492.24 71.474V47.4L2489.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2549.68 25.46L2529.67 10.693V26.371M2549.68 25.46L2566.81 8.098V24.768M2549.68 25.46L2547.67 2.821V24.777M2549.68 25.46L2576.07 23.45V47.39L2570.31 47.765M2549.68 25.46L2523.37 27.019L2523.43 50.964L2532.28 50.339",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2551.97 50.759L2569.78 64.726V39.606L2549.68 25.46L2532.56 42.252V66.142L2549.68 49.112",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2549.68 49.029L2551.77 71.515V47.333L2549.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2609.68 25.46L2589.92 10.392V25.937M2609.68 25.46L2627.12 8.31701V23.877M2609.68 25.46L2608.05 2.80701V23.983M2609.68 25.46L2636.14 23.888V47.744L2629.74 48.075M2609.68 25.46L2583.34 26.663L2583.38 50.526L2591.88 50.069",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2611.76 50.677L2629.29 63.873V40.071L2609.68 25.46L2592.23 42.074V65.971L2609.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2609.68 49.029L2611.33 71.542V47.305L2609.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2669.68 25.46L2650.26 10.242V25.778M2669.68 25.46L2687.45 8.56301V24.107M2669.68 25.46L2668.45 2.79401V24.457M2669.68 25.46L2696.14 24.161V48.127L2689.77 48.364M2669.68 25.46L2643.32 26.335L2643.33 50.253L2651.65 49.893",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2671.01 50.121L2689.05 63.9V40.235L2669.68 25.46L2651.95 41.828V65.698L2669.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2669.68 49.029L2670.93 71.556V47.387L2669.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2729.68 25.46L2710.5 9.982V25.512M2729.68 25.46L2747.69 8.782V24.307M2729.68 25.46L2728.87 2.78V24.433M2729.68 25.46L2756.14 24.49V48.236L2749.71 48.449M2729.68 25.46L2703.29 25.782V49.597L2711.26 49.45",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2730.41 49.695L2748.94 64.53V40.59L2729.68 25.46L2711.6 41.705V65.493L2729.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2729.68 49.029L2730.61 71.638V47.606L2729.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2789.68 25.46L2770.67 9.72201V25.286M2789.68 25.46L2807.94 9.00001V24.505M2789.68 25.46L2789.16 2.76601V24.416M2789.68 25.46L2816.14 24.763V48.673L2809.16 48.789M2789.68 25.46H2763.29V49.337L2771.24 49.269",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2790.41 49.7L2808.83 64.72V40.727L2789.68 25.46L2771.41 41.493V65.383L2789.68 49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M2789.68 49.029L2790.25 71.611V47.742L2789.68 25.46V49.111",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M89.6848 25.4603L108.309 41.4828V65.1065L89.6848 49.0293M89.6848 25.4603L70.5359 40.7925L70.5892 64.669L89.6316 49.0293M89.6848 25.4603L89.0273 47.9151V71.6481L89.6848 49.0839M89.6848 25.4603L63.4071 24.7588V48.5542L70.0911 48.6959M89.6848 25.4603L115.988 25.7611V49.5761L108.665 49.4467M89.6848 25.4603L71.3722 9.03792L71.2884 24.5988M89.6848 25.4603L108.796 9.74877V25.4474M89.6848 25.4603L90.293 2.75943V24.3785M89.6848 25.4603V49.1113",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"}),o.jsx("path",{d:"M149.676 25.4488L167.472 41.872L167.285 65.449L149.676 49.0179M149.676 25.4488L130.087 40.3914V64.2269L148.148 50.1661M149.676 25.4488L148.969 47.3567V71.6093L149.676 49.0725M149.676 25.4488L123.453 24.2184V47.9959L129.828 48.2643M149.676 25.4488L175.913 26.3511V50.1388L167.428 49.8028M149.676 25.4488L131.911 8.67098V24.5132M149.676 25.4488L169.243 10.0381V26.0706M149.676 25.4488L150.984 2.73438V24.3846M149.676 25.4488V49.0999",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})]}));TTe.displayName="Sequence";const NTe=d.memo(({lineThickness:e,...t})=>o.jsx("svg",{width:"60",height:"74",viewBox:"0 0 60 74",fill:"none",xmlns:"http://www.w3.org/2000/svg",...t,children:o.jsx("path",{d:"M29.6848 25.4603L48.3092 41.4828V65.1065L29.6848 49.0293M29.6848 25.4603L10.5359 40.7925L10.5892 64.669L29.6316 49.0293M29.6848 25.4603L3.4071 24.8588V48.5542L10.0911 48.6959M29.6848 25.4603L55.9884 25.7611V49.5761L48.6649 49.4467M29.6848 25.4603L11.3722 9.03792L11.2884 24.5988M29.6848 25.4603L48.7956 9.74877V25.4474M29.6848 25.4603L29.63 2.75943M29.6848 25.4603V49.1113M29.63 71.6481L29.6848 49.0839",stroke:"currentColor",strokeWidth:e,strokeLinecap:"round",strokeLinejoin:"round"})}));NTe.displayName="Static";const kOt=e=>{switch(e){case"asIcon":return 4.7;case"normal":return 3.3}},Hx=d.memo(({size:e=32,shouldAnimate:t=!0,lineThickness:n="asIcon",className:r})=>{const{_shouldAnimate:s,sequenceProps:a,staticProps:i}=yH({shouldAnimate:t,animationDuration:1,animationName:"animate-pplxIndicator"}),l=kOt(n);return o.jsx(d4,{size:e,className:r,aspectRatio:60/74,children:s?o.jsx(TTe,{lineThickness:l,...a}):o.jsx(NTe,{lineThickness:l,...i})})});Hx.displayName="MarkSpinner";const jTe=Object.freeze(Object.defineProperty({__proto__:null,MarkSpinner:Hx},Symbol.toStringTag,{value:"Module"})),ATe="shadow-subtle rounded-lg border backdrop-blur-sm bg-subtlest dark:bg-subtlest",ITe=d.memo(()=>{const[e,t]=d.useState(!1),[n,r]=d.useState({x:0,y:0}),s=d.useCallback(()=>{t(!0)},[t]),a=d.useCallback(()=>{t(!1),r({x:0,y:0})},[t]),i=d.useCallback(l=>{const c=l.currentTarget.getBoundingClientRect(),u=c.width/2,f=c.height/2,m=l.clientX-c.left,p=l.clientY-c.top,h=m-u,g=p-f,y=150,x=Math.sqrt(h*h+g*g),v=Math.max(0,1-x/y)*.15,b=h*v,_=g*v;t(!0),r({x:b,y:_})},[t,r]);return o.jsxs(z,{className:B("px-sm md:px-md relative flex h-full items-center justify-center gap-[6px]",ATe),variant:"transparent",onMouseLeave:a,onMouseEnter:i,onMouseMove:i,onMouseOut:a,onMouseDown:s,onMouseUp:a,children:[o.jsx("div",{className:"flex h-full items-center justify-center",children:o.jsx(ve.div,{animate:{x:n.x,y:n.y},transition:{type:"spring",ease:"easeInOut",stiffness:200,damping:40},className:"flex h-full items-center justify-center",children:o.jsx(Hx,{size:18,shouldAnimate:e,className:"text-quiet"})})}),o.jsx($a,{variant:"text",color:"quiet",className:"h-[14px] w-auto [&>svg]:h-[14px] [&>svg]:w-auto [&>svg]:subpixel-antialiased"})]})});ITe.displayName="Mark";const Yae=({children:e,animationId:t,period:n,setPeriod:r,isLoading:s,periods:a,className:i})=>{const{isMobileStyle:l}=xe(),c=l?35:38,{renderingContext:u}=xH(),f=u==="widget",m=f?z:Wt;return o.jsx(m,{className:B("overflow-hidden",i),children:o.jsxs(z,{className:B("flex flex-col justify-between",{"gap-y-md":!f,"gap-y-sm":f}),children:[o.jsxs("div",{className:"p-sm gap-sm z-[1] flex flex-wrap items-stretch justify-between md:flex-row",children:[o.jsx("div",{className:"gap-x-sm flex items-stretch",children:o.jsx("div",{className:"gap-x-sm flex items-stretch justify-center",style:{minHeight:c},children:o.jsx(MOt,{id:t,periods:a,period:n,setPeriod:r,className:ATe})})}),o.jsx(ve.div,{style:{minHeight:c},initial:{opacity:0},animate:{opacity:1},transition:{duration:.2},children:o.jsx(ITe,{})})]}),o.jsx(ve.div,{initial:{opacity:1},animate:{opacity:s?.5:1},transition:{duration:.5,delay:.5},children:e})]})})},TOt=I.memo(({children:e})=>o.jsx(Nr,{fallback:null,children:o.jsx("div",{className:"h-full",children:e})}));TOt.displayName="CanonicalSidebarSection";const NOt=I.memo(({children:e,className:t})=>o.jsx("div",{className:B("mt-md pb-lg space-y-lg",t),children:e}));NOt.displayName="CanonicalSidebarColumn";const jOt=I.memo(({children:e,className:t})=>o.jsx(F,{variant:"smallBold",className:B("pb-sm px-sm",t),children:e}));jOt.displayName="CanonicalSidebarSectionTitle";const RTe=I.memo(({children:e,className:t,variant:n})=>o.jsx(Wt,{variant:n,className:B("py-sm",t),children:e}));RTe.displayName="CanonicalSidebarSectionContent";const AOt="-my-sm gap-x-sm grid w-full grid-cols-[1fr_min-content_min-content]",IOt=I.memo(e=>{const{isLoading:t,isStale:n,movers:r,skinny:s,approxItemCount:a,itemProps:i}=e;return o.jsx(RTe,{className:B("overflow-hidden duration-150",{"opacity-50":t}),children:o.jsx(ve.div,{className:B(AOt,{"pointer-events-none invisible":t}),initial:{opacity:0},animate:{opacity:n?.5:1},exit:{opacity:0},transition:{duration:.5},"aria-hidden":t,children:t?o.jsx(ROt,{size:a??5,...e}):r?.map(l=>d.createElement(PTe,{...i,key:l.symbol,symbol:l.symbol,price:l.price,exchange:l.exchange??void 0,currency:l.currency??void 0,name:l.name??"",changesPercentage:l.changesPercentage,skinty:s,useImage:!s,image:l.image??void 0,imageDark:l.imageDark??void 0}))},"top-mover")})});IOt.displayName="MoverTable";const PTe=e=>e.skinty?o.jsx(LOt,{...e}):o.jsx(POt,{...e}),ROt=({size:e,...t})=>[...Array(e).fill(null)].map((n,r)=>o.jsx(PTe,{...t,symbol:"NVDA",price:110,currency:"USD",name:"XXX",changesPercentage:110,exchange:"XX",useImage:!t.skinny,skinty:t.skinny},r)),POt=e=>o.jsx(gSe,{symbol:e.symbol,className:"col-span-3 flex min-w-0",children:o.jsx(OOt,{...e})});function LOt({symbol:e,name:t,price:n,currency:r,changesPercentage:s,trailingComponent:a}){return o.jsxs(gSe,{symbol:e,className:"col-span-3 grid grid-cols-subgrid",children:[o.jsx(hSe,{name:t,variant:"small"}),o.jsx(ly,{price:n,currency:r}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(f4,{changesPercentage:s,includeIcon:!0,variant:"tiny",className:"w-full"}),a&&a({symbol:e})]})]})}const f4=I.memo(({changesPercentage:e,background:t,variant:n,includeIcon:r=!1,className:s,suffix:a,animateIcon:i})=>o.jsx(Ym,{change:e,variant:n,includeIcon:r,animateIcon:i,background:t,mono:!1,suffix:a,className:s}));f4.displayName="FinanceMoverChange";function OOt({symbol:e,price:t,currency:n,name:r,changesPercentage:s,useImage:a=!0,exchange:i,image:l,imageDark:c,trailingComponent:u,className:f}){return o.jsxs("div",{className:B("gap-sm flex w-full min-w-0 items-center",{"-ml-xs":!!a},f),children:[a&&o.jsx(Q3,{symbol:e,src:l??"",srcDark:c}),o.jsxs(z,{className:"flex min-w-0 flex-1 flex-col",children:[o.jsxs(z,{className:"gap-md flex min-w-0 items-center justify-between",children:[o.jsx(hSe,{name:r}),o.jsx(ly,{price:t,currency:n})]}),o.jsxs(z,{className:"gap-sm flex items-center justify-between text-right",children:[o.jsx(F,{variant:"tinyMono",className:"whitespace-nowrap",color:"light",children:o.jsx(gT,{symbol:e,exchange:i})}),o.jsx(f4,{changesPercentage:s,background:!1})]})]}),u&&u({symbol:e})]})}const LTe=({price:e,currency:t,change:n,percentChange:r,children:s,className:a,variant:i,period:l})=>{const c=d.useMemo(()=>({style:t?"currency":"decimal",currency:t??void 0,minimumFractionDigits:e<1e3?2:0,maximumFractionDigits:2}),[t,e]),u=i==="sm",f=u?"tiny":"base",{$t:m}=Z();return o.jsxs(z,{className:B("flex w-full flex-col",a),children:[o.jsxs(z,{className:"gap-sm flex w-full items-center justify-between",children:[o.jsx(F,{variant:u?"baseSemi":"entry-title-200",className:"m-0 p-0",children:o.jsx(ec,{value:e,format:c,animated:!0})}),o.jsxs(z,{className:"gap-xs flex items-center",children:[!u&&o.jsx(ly,{price:n??0,currency:t,sign:!0,variant:f}),o.jsx(f4,{changesPercentage:r??0,variant:f,background:!1,includeIcon:!0,animateIcon:!0,suffix:l?l==="1d"?` ${m({defaultMessage:"Today",id:"zWgbGgjUUg"})}`:` ${Ewe[l]}`:void 0})]})]}),o.jsx(z,{className:"gap-sm flex items-center justify-between",children:s})]})},OTe="flex items-center gap-xs truncate min-w-0",DTe="size-[.8rem] min-w-[.8rem] max-w-[.8rem] translate-y-[-.05rem] text-max",FTe=I.memo(({price:e,currency:t,change:n,percentChange:r,timestamp:s,open:a,closes:i,timezone:l,variant:c,period:u})=>{const{$t:f,locale:m}=Z(),p=d.useMemo(()=>{const h=s?new Date(s*1e3).toLocaleTimeString(m,{hour:"numeric",minute:"2-digit",day:"numeric",month:"short",second:c==="lg"?"2-digit":void 0,timeZoneName:"short",timeZone:l}):null;return!a&&i?c==="sm"?h:f({defaultMessage:"At close: {time}",id:"Fib7mn4gfB"},{time:h}):h},[s,m,a,f,i,l,c]);return o.jsx(LTe,{price:e,currency:t,change:n,percentChange:r,variant:c,period:u,children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:OTe,children:[p,i&&o.jsx(fce,{className:DTe})]})})});FTe.displayName="StockPriceBig";const UTe=I.memo(({price:e,currency:t,change:n,percentChange:r,timestamp:s,timezone:a,variant:i})=>{const{$t:l,locale:c}=Z(),u=new Date(s*1e3).toLocaleTimeString(c,{hour:"numeric",minute:"2-digit",day:"numeric",month:"short",timeZone:a}),f=i==="sm"?u:l({defaultMessage:"After hours: {time}",id:"elF1mrf0Os"},{time:u});return o.jsx(LTe,{price:e,currency:t,change:n,percentChange:r,variant:i,children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:OTe,children:[f,o.jsx(HLe,{className:DTe})]})})});UTe.displayName="AfterHoursPriceBig";const Qae=({children:e,grow:t=!0,className:n})=>o.jsx(Wt,{className:B(n,{"flex-1":t},"px-md py-sm rounded-md border"),children:e}),BTe=I.memo(({quote:e,period:t})=>{const n=!!e.afterHoursPrice,r=n&&t==="1d";yp("mini-graphs");const{isMobileStyle:s}=xe(),a=s&&n?"sm":"lg",i=d.useMemo(()=>o.jsx(FTe,{variant:a,price:e.price,currency:e.currency,change:e.historicalChange,percentChange:e.historicalPercentChange,period:t,timestamp:e.timestamp,open:e.isMarketOpen,closes:e.exchange!=="CRYPTO",timezone:e.exchangeTimezone??void 0}),[e,a,t]),l=d.useMemo(()=>o.jsx(UTe,{price:e.afterHoursPrice,change:e.afterHoursChange,percentChange:e.afterHoursPercentChange,timestamp:e.afterHoursTimestamp,currency:e.currency,timezone:e.exchangeTimezone??void 0,variant:a}),[e,a]);return o.jsxs(z,{className:"gap-sm flex flex-wrap",children:[o.jsx(Qae,{grow:r,children:i}),r&&o.jsx(Qae,{grow:!0,children:l})]})});BTe.displayName="BeforeAfterHours";const DOt=[],Xae="1y",FOt=7,gL=kTe.filter(e=>e.value!=="5d"),UOt=(e,t,n,r)=>{const s=ot(),a=d.useCallback(async l=>{const[c,u]=await Promise.all([s.ensureQueryData({queryKey:eb({symbol:e}),queryFn:()=>Yd({symbol:e}),staleTime:1e4}),s.ensureQueryData({queryKey:eb({symbol:e,historyPeriod:l,withHistory:!0,historyAfterHours:!0}),queryFn:()=>Yd({symbol:e,historyPeriod:l,withHistory:!0,historyAfterHours:!0}),staleTime:6e4})]);return{quote:{...c,history:u?.history,historicalChange:u?.historicalChange,historicalPercentChange:u?.historicalPercentChange,historicalPreviousClose:u?.historicalPreviousClose},period:l}},[e,s]),i=Ue({queryKey:["finance/quote-history",e,t],queryFn:async()=>{const l=await a(t);return!l?.quote?.history&&t!==Xae?await a(Xae):l},staleTime:0,refetchOnMount:!0,refetchInterval:1e3*10,placeholderData:l=>{if(l)return l;if(r)return{quote:r,period:t}},enabled:n});return{isLoading:i.isLoading,quote:i.data?.quote??void 0,period:i.data?.period??t}},BOt=(e,t,n,r)=>{const s=ot(),a=Ue({queryKey:["finance/comparison",t,...e],queryFn:async()=>{const i=t,l=e.map(async f=>await s.ensureQueryData({queryKey:eb({symbol:f,historyPeriod:t,withHistory:!0,historyAfterHours:!1}),queryFn:()=>Yd({symbol:f,historyPeriod:t,withHistory:!0,historyAfterHours:!1}),staleTime:3e4}));return{quotes:(await Promise.all(l))?.filter(f=>!!f)?.map((f,m)=>({...f,color:s1(m,r)}))??[],period:i}},placeholderData:Pu,refetchInterval:1e3*10,enabled:n});return{isLoading:a.isLoading,quotes:a.data?.quotes??DOt,period:a.data?.period??t}},$Ot=e=>{const t=Lt(),n=ex(t),r=Ot();d.useEffect(()=>{t&&n&&t!==n&&!r?.get("comparing")&&e([])},[t,n,r,e])},VOt=(e,t,n,r)=>{const s=Ot(),a=vt(),i=d.useCallback(S=>{const E=new URLSearchParams(window.location.search);E.set("comparing",S.join(",")),a.replace(`?${E.toString()}`)},[a]),[l,c]=d.useState(s?.get("comparing")?.split(",")??r??[]),u=d.useMemo(()=>[e,...l.filter(S=>S!==e)],[l,e]),f=u.length>1,[m,p]=d.useState({}),h=d.useCallback(S=>{S.symbol&&c(E=>{const k=[...new Set([e,...E,S.symbol])];return k.length>FOt&&k.splice(-2,1),i(k),p(M=>({...Object.fromEntries(Object.entries(M).filter(([j])=>k.includes(j))),[S.symbol]:S})),k})},[c,p,e,i]),g=d.useCallback(S=>{c(E=>{const k=E.filter(M=>M!==S);return i(k),k}),p(E=>{const k={...E};return delete k[S],k})},[c,p,i]),y=d.useCallback(()=>{c([])},[]);$Ot(c);const x=zOt(u,t),v=BOt(u,x,f,n),{comparisonQuotes:b,setHoveredComparisons:_}=HOt(u,v.quotes,m,n),w=WOt(e,u);return{peers:d.useMemo(()=>w.data.filter(S=>!u.includes(S.symbol)),[w.data,u]),isComparing:f,quotes:v.quotes,comparisonPeriod:v.period??x,comparisonQuotesLoading:v.isLoading,comparisonQuotes:b,setHoveredComparisons:_,addComparison:h,removeComparison:g,resetComparisons:y}},WOt=(e,t)=>{const{data:n,isLoading:r,isPlaceholderData:s}=Ue({queryKey:ECt(e,!0),queryFn:()=>MCt({symbol:e,index:!0}),placeholderData:Pu}),a=d.useMemo(()=>n?.filter(i=>!t.some(l=>l===i.symbol)&&i.symbol!==e)??[],[n,t,e]);return d.useMemo(()=>({data:a,isLoading:r||s}),[a,r,s])},HOt=(e,t,n,r)=>{const[s,a]=d.useState([]),i=d.useMemo(()=>e.map((f,m)=>{const p=t.find(g=>g.symbol===f)??n[f];return p?{symbol:p.symbol,name:p.name,image:p.image,imageDark:p.imageDark,exchange:p.exchange,currency:p.currency||void 0,price:p.price,exchangeTimezone:p.exchangeTimezone,historicalChange:p.historicalChange,historicalPercentChange:p.historicalPercentChange,color:s1(m,r)}:{symbol:f,loading:!0,color:s1(m,r)}}),[e,t,n,r]),l=d.useMemo(()=>s.map((u,f)=>({...u,color:s1(f,r)})),[s,r]),c=l.length>0?l:i;return d.useMemo(()=>({comparisonQuotes:c,setHoveredComparisons:a}),[c,a])},zOt=(e,t)=>e.length&&!gL.some(n=>n.value===t)?gL[0].value:t,GOt=e=>{const t=Ot(),n=vt(),[r,s]=d.useState(t?.get("period")??e??"1d"),a=d.useCallback(i=>{const l=new URLSearchParams(window.location.search);l.set("period",i),n.replace(`?${l.toString()}`),s(i)},[s,n]);return{period:r,setPeriod:a}},$Te=d.createContext({renderingContext:"page"}),xH=()=>d.useContext($Te),Vcn=({value:e,children:t})=>o.jsx($Te.Provider,{value:e,children:t}),qOt=({symbol:e,comparisons:t,initialQuote:n,initialPeriod:r,search:s=!0,price:a=!0,profile:i=!0,tempHideOnEmpty:l=!1,tmpOnComparisonsChange:c})=>{const{isMobileStyle:u}=xe(),{period:f,setPeriod:m}=GOt(r),[p,h]=d.useState(null),g=u?null:p,{renderingContext:y}=xH(),x=y==="widget",v=uTe(),b=VOt(e,f,v,t),_=UOt(e,f,!b.isComparing,n),{$t:w}=Z(),C=B({"-mx-sm border-t !border-offset":x});return d.useEffect(()=>{c?.(b.comparisonQuotes)},[b.comparisonQuotes,c]),l&&!_.isLoading&&!_.quote.history?.length?null:o.jsxs(o.Fragment,{children:[a&&o.jsx(BTe,{quote:_.quote,period:_.period}),b.isComparing?o.jsx(Yae,{animationId:b.comparisonQuotes.map(S=>S.symbol).join("-"),period:f,periods:gL,setPeriod:m,isLoading:b.comparisonQuotesLoading,className:C,children:o.jsx(fOt,{quotes:b.quotes,period:b.comparisonPeriod,focused:g,setHoveredComparisons:b.setHoveredComparisons})}):o.jsx(Yae,{animationId:e,periods:kTe,period:f,setPeriod:m,isLoading:_.isLoading,className:C,children:o.jsx(cTe,{quote:_.quote,period:_.period})}),s&&o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsx("div",{className:"w-full",children:o.jsx(yTe,{peers:b.peers,addComparison:b.addComparison})}),b.isComparing&&o.jsx(Me,{onClick:b.resetComparisons,size:"tiny",pill:!0,text:w({defaultMessage:"Reset",id:"jm/spnRSn+"})})]}),o.jsx(na,{className:"-mt-sm",children:b.isComparing&&o.jsx(Zr,{className:"py-sm",children:o.jsx(dTe,{comparisons:b.comparisonQuotes,removeComparison:b.removeComparison,setFocused:h})})}),i&&o.jsx(a3e,{quote:_.quote,type:_.quote?.exchange,className:B({"-mx-sm -mt-sm !border-offset border-y !px-0":x})})]})},yL=[{currencyCode:"AED",type:"fiat",currency:J({defaultMessage:"United Arab Emirates dirham",id:"u/noLkGMVn"}),countryCode:"AE",symbol:"."},{currencyCode:"AFN",type:"fiat",currency:J({defaultMessage:"Afghan afghani",id:"HbCn83pcga"}),countryCode:"AF",symbol:""},{currencyCode:"ALL",type:"fiat",currency:J({defaultMessage:"Albanian lek",id:"/il1Hf7GWO"}),countryCode:"AL",symbol:"L"},{currencyCode:"AMD",type:"fiat",currency:J({defaultMessage:"Armenian dram",id:"Sab4a7TKLH"}),countryCode:"AM",symbol:""},{currencyCode:"ARS",type:"fiat",currency:J({defaultMessage:"Argentine peso",id:"52+/SFD8VZ"}),countryCode:"AR",symbol:"$"},{currencyCode:"AUD",type:"fiat",currency:J({defaultMessage:"Australian dollar",id:"iWILeLEVYR"}),countryCode:"AU",symbol:"$"},{currencyCode:"AWG",type:"fiat",currency:J({defaultMessage:"Aruban florin",id:"BEGfukujzF"}),countryCode:"AW",symbol:""},{currencyCode:"BAM",type:"fiat",currency:J({defaultMessage:"Bosnia and Herzegovina convertible mark",id:"b09sYvQVre"}),countryCode:"BA",symbol:"KM"},{currencyCode:"BBD",type:"fiat",currency:J({defaultMessage:"Barbadian dollar",id:"VlWuwU66Ue"}),countryCode:"BB",symbol:"$"},{currencyCode:"BDT",type:"fiat",currency:J({defaultMessage:"Bangladeshi taka",id:"nzdEshqHWS"}),countryCode:"BD",symbol:""},{currencyCode:"BGN",type:"fiat",currency:J({defaultMessage:"Bulgarian lev",id:"IDTjXBqV4N"}),countryCode:"BG",symbol:""},{currencyCode:"BHD",type:"fiat",currency:J({defaultMessage:"Bahraini dinar",id:"eq8qHJx0kM"}),countryCode:"BH",symbol:".."},{currencyCode:"BIF",type:"fiat",currency:J({defaultMessage:"Burundian franc",id:"o/KpEtmYi4"}),countryCode:"BI",symbol:"FBu"},{currencyCode:"BMD",type:"fiat",currency:J({defaultMessage:"Bermudian dollar",id:"kO0KeiZ+IN"}),countryCode:"BM",symbol:"$"},{currencyCode:"BND",type:"fiat",currency:J({defaultMessage:"Brunei dollar",id:"GRkirfzc48"}),countryCode:"BN",symbol:"$"},{currencyCode:"BOB",type:"fiat",currency:J({defaultMessage:"Bolivian boliviano",id:"l7UUEAhjL1"}),countryCode:"BO",symbol:"Bs."},{currencyCode:"BRL",type:"fiat",currency:J({defaultMessage:"Brazilian real",id:"x+BZGn5rek"}),countryCode:"BR",symbol:"R$"},{currencyCode:"BSD",type:"fiat",currency:J({defaultMessage:"Bahamian dollar",id:"u9nfam/El1"}),countryCode:"BS",symbol:"$"},{currencyCode:"BTN",type:"fiat",currency:J({defaultMessage:"Bhutanese ngultrum",id:"EbzIZvY2C3"}),countryCode:"BT",symbol:"Nu."},{currencyCode:"BWP",type:"fiat",currency:J({defaultMessage:"Botswana pula",id:"TvRjxCQudG"}),countryCode:"BW",symbol:"P"},{currencyCode:"BZD",type:"fiat",currency:J({defaultMessage:"Belize dollar",id:"tnMfFVDwiX"}),countryCode:"BZ",symbol:"$"},{currencyCode:"CAD",type:"fiat",currency:J({defaultMessage:"Canadian dollar",id:"L4ftYFzYiG"}),countryCode:"CA",symbol:"$"},{currencyCode:"CDF",type:"fiat",currency:J({defaultMessage:"Congolese franc",id:"6DNXExdai2"}),countryCode:"CD",symbol:"FC"},{currencyCode:"CHF",type:"fiat",currency:J({defaultMessage:"Swiss franc",id:"113zTX3mKi"}),countryCode:"CH",symbol:"Fr."},{currencyCode:"CLP",type:"fiat",currency:J({defaultMessage:"Chilean peso",id:"tLhKy6Swhn"}),countryCode:"CL",symbol:"$"},{currencyCode:"CNH",type:"fiat",currency:J({defaultMessage:"Chinese yuan (offshore)",id:"wAShedQ5+o"}),countryCode:"CN",symbol:""},{currencyCode:"CNY",type:"fiat",currency:J({defaultMessage:"Chinese yuan",id:"/sleu+8FUs"}),countryCode:"CN",symbol:""},{currencyCode:"COP",type:"fiat",currency:J({defaultMessage:"Colombian peso",id:"KR2NhLe6wO"}),countryCode:"CO",symbol:"$"},{currencyCode:"CRC",type:"fiat",currency:J({defaultMessage:"Costa Rican coln",id:"OLgF3rrfev"}),countryCode:"CR",symbol:""},{currencyCode:"CUP",type:"fiat",currency:J({defaultMessage:"Cuban peso",id:"ua/JslQGFc"}),countryCode:"CU",symbol:"$"},{currencyCode:"CVE",type:"fiat",currency:J({defaultMessage:"Cape Verdean escudo",id:"gg39Xd9NoM"}),countryCode:"CV",symbol:"$"},{currencyCode:"CYP",type:"fiat",currency:J({defaultMessage:"Cypriot pound",id:"xJn7heFKbn"}),countryCode:"CY",symbol:""},{currencyCode:"CZK",type:"fiat",currency:J({defaultMessage:"Czech koruna",id:"xpMdKvcamT"}),countryCode:"CZ",symbol:"K"},{currencyCode:"DJF",type:"fiat",currency:J({defaultMessage:"Djiboutian franc",id:"WtP9AoFz2A"}),countryCode:"DJ",symbol:"Fdj"},{currencyCode:"DKK",type:"fiat",currency:J({defaultMessage:"Danish krone",id:"Xy5G3y8jOw"}),countryCode:"DK",symbol:"kr"},{currencyCode:"DOP",type:"fiat",currency:J({defaultMessage:"Dominican peso",id:"2i/KFaPpw5"}),countryCode:"DO",symbol:"RD$"},{currencyCode:"DZD",type:"fiat",currency:J({defaultMessage:"Algerian dinar",id:"6sTpFM3olk"}),countryCode:"DZ",symbol:""},{currencyCode:"EGP",type:"fiat",currency:J({defaultMessage:"Egyptian pound",id:"PxOcvtceh8"}),countryCode:"EG",symbol:""},{currencyCode:"ETB",type:"fiat",currency:J({defaultMessage:"Ethiopian birr",id:"6VjP5tvzWg"}),countryCode:"ET",symbol:"Br"},{currencyCode:"EUR",type:"fiat",currency:J({defaultMessage:"Euro",id:"Zz6d8XMgGD"}),countryCode:"EU",symbol:""},{currencyCode:"FJD",type:"fiat",currency:J({defaultMessage:"Fijian dollar",id:"w33lAGgTZS"}),countryCode:"FJ",symbol:"$"},{currencyCode:"GBP",type:"fiat",currency:J({defaultMessage:"Pound sterling",id:"uU25lEI6GM"}),countryCode:"GB",symbol:""},{currencyCode:"GEL",type:"fiat",currency:J({defaultMessage:"Georgian lari",id:"m4gS106RpO"}),countryCode:"GE",symbol:""},{currencyCode:"GHS",type:"fiat",currency:J({defaultMessage:"Ghanaian cedi",id:"2k7sXvkoLP"}),countryCode:"GH",symbol:""},{currencyCode:"GMD",type:"fiat",currency:J({defaultMessage:"Gambian dalasi",id:"zT8nD3rOKp"}),countryCode:"GM",symbol:"D"},{currencyCode:"GNF",type:"fiat",currency:J({defaultMessage:"Guinean franc",id:"kZk7wkuU9a"}),countryCode:"GN",symbol:"FG"},{currencyCode:"GTQ",type:"fiat",currency:J({defaultMessage:"Guatemalan quetzal",id:"0eSFsz1h5U"}),countryCode:"GT",symbol:"Q"},{currencyCode:"GYD",type:"fiat",currency:J({defaultMessage:"Guyanese dollar",id:"pvTNSDiMVb"}),countryCode:"GY",symbol:"$"},{currencyCode:"HKD",type:"fiat",currency:J({defaultMessage:"Hong Kong dollar",id:"tSeK2eAo7a"}),countryCode:"HK",symbol:"$"},{currencyCode:"HNL",type:"fiat",currency:J({defaultMessage:"Honduran lempira",id:"u1All4YZ/M"}),countryCode:"HN",symbol:"L"},{currencyCode:"HRK",type:"fiat",currency:J({defaultMessage:"Croatian kuna",id:"m4/bILMdtE"}),countryCode:"HR",symbol:"kn"},{currencyCode:"HTG",type:"fiat",currency:J({defaultMessage:"Haitian gourde",id:"fYPjhPHJw5"}),countryCode:"HT",symbol:"G"},{currencyCode:"HUF",type:"fiat",currency:J({defaultMessage:"Hungarian forint",id:"Bhl6SxOjG0"}),countryCode:"HU",symbol:"Ft"},{currencyCode:"IDR",type:"fiat",currency:J({defaultMessage:"Indonesian rupiah",id:"JnQBDoCEpL"}),countryCode:"ID",symbol:"Rp"},{currencyCode:"ILS",type:"fiat",currency:J({defaultMessage:"Israeli new shekel",id:"IxD6vfIMsj"}),countryCode:"IL",symbol:""},{currencyCode:"INR",type:"fiat",currency:J({defaultMessage:"Indian rupee",id:"XnsufP9pQC"}),countryCode:"IN",symbol:""},{currencyCode:"IQD",type:"fiat",currency:J({defaultMessage:"Iraqi dinar",id:"rmzi7U/4iu"}),countryCode:"IQ",symbol:"."},{currencyCode:"ISK",type:"fiat",currency:J({defaultMessage:"Icelandic krna",id:"+QCFy0sZgh"}),countryCode:"IS",symbol:"kr"},{currencyCode:"JMD",type:"fiat",currency:J({defaultMessage:"Jamaican dollar",id:"EkOwDtWSVs"}),countryCode:"JM",symbol:"J$"},{currencyCode:"JOD",type:"fiat",currency:J({defaultMessage:"Jordanian dinar",id:"B2GvyCUDsS"}),countryCode:"JO",symbol:"."},{currencyCode:"JPY",type:"fiat",currency:J({defaultMessage:"Japanese yen",id:"2PiQsV1fPp"}),countryCode:"JP",symbol:""},{currencyCode:"KES",type:"fiat",currency:J({defaultMessage:"Kenyan shilling",id:"JIjYrchwhv"}),countryCode:"KE",symbol:"KSh"},{currencyCode:"KHR",type:"fiat",currency:J({defaultMessage:"Cambodian riel",id:"KCKOEaCtcY"}),countryCode:"KH",symbol:""},{currencyCode:"KMF",type:"fiat",currency:J({defaultMessage:"Comorian franc",id:"WV9ZQdQeR+"}),countryCode:"KM",symbol:"CF"},{currencyCode:"KRW",type:"fiat",currency:J({defaultMessage:"South Korean won",id:"EiHQBnRax2"}),countryCode:"KR",symbol:""},{currencyCode:"KWD",type:"fiat",currency:J({defaultMessage:"Kuwaiti dinar",id:"fkOQdpZmRV"}),countryCode:"KW",symbol:"."},{currencyCode:"KYD",type:"fiat",currency:J({defaultMessage:"Cayman Islands dollar",id:"RsdrXusNMV"}),countryCode:"KY",symbol:"$"},{currencyCode:"KZT",type:"fiat",currency:J({defaultMessage:"Kazakhstani tenge",id:"2qtVTeGWCE"}),countryCode:"KZ",symbol:""},{currencyCode:"LAK",type:"fiat",currency:J({defaultMessage:"Lao kip",id:"Fgzd1G5Yfn"}),countryCode:"LA",symbol:""},{currencyCode:"LBP",type:"fiat",currency:J({defaultMessage:"Lebanese pound",id:"FGzeEqNQzF"}),countryCode:"LB",symbol:"."},{currencyCode:"LKR",type:"fiat",currency:J({defaultMessage:"Sri Lankan rupee",id:"a4/joWlRVu"}),countryCode:"LK",symbol:"Rs"},{currencyCode:"LRD",type:"fiat",currency:J({defaultMessage:"Liberian dollar",id:"FI1z5I01J6"}),countryCode:"LR",symbol:"$"},{currencyCode:"LSL",type:"fiat",currency:J({defaultMessage:"Lesotho loti",id:"csvFpR0QuR"}),countryCode:"LS",symbol:"L"},{currencyCode:"LTL",type:"fiat",currency:J({defaultMessage:"Lithuanian litas",id:"0eziwi9562"}),countryCode:"LT",symbol:"Lt"},{currencyCode:"LYD",type:"fiat",currency:J({defaultMessage:"Libyan dinar",id:"MHH+Pd33wK"}),countryCode:"LY",symbol:"."},{currencyCode:"MAD",type:"fiat",currency:J({defaultMessage:"Moroccan dirham",id:"ECYUhp5Zzw"}),countryCode:"MA",symbol:".."},{currencyCode:"MDL",type:"fiat",currency:J({defaultMessage:"Moldovan leu",id:"b0q4AtgUSW"}),countryCode:"MD",symbol:"L"},{currencyCode:"MGA",type:"fiat",currency:J({defaultMessage:"Malagasy ariary",id:"7X6Af0dVLl"}),countryCode:"MG",symbol:"Ar"},{currencyCode:"MKD",type:"fiat",currency:J({defaultMessage:"Macedonian denar",id:"RCCw/rBMD7"}),countryCode:"MK",symbol:""},{currencyCode:"MMK",type:"fiat",currency:J({defaultMessage:"Burmese kyat",id:"09O/caoUOd"}),countryCode:"MM",symbol:"K"},{currencyCode:"MOP",type:"fiat",currency:J({defaultMessage:"Macanese pataca",id:"WSCDGHnfAP"}),countryCode:"MO",symbol:"P"},{currencyCode:"MUR",type:"fiat",currency:J({defaultMessage:"Mauritian rupee",id:"B7EPhc2k1/"}),countryCode:"MU",symbol:""},{currencyCode:"MVR",type:"fiat",currency:J({defaultMessage:"Maldivian rufiyaa",id:"WKep/6FHLO"}),countryCode:"MV",symbol:"Rf"},{currencyCode:"MWK",type:"fiat",currency:J({defaultMessage:"Malawian kwacha",id:"0QSRp0Tfcl"}),countryCode:"MW",symbol:"MK"},{currencyCode:"MXN",type:"fiat",currency:J({defaultMessage:"Mexican peso",id:"cAJvdQ+v2Y"}),countryCode:"MX",symbol:"$"},{currencyCode:"MXV",type:"fiat",currency:J({defaultMessage:"Mexican Unidad de Inversion (UDI)",id:"pJjurDaC1J"}),countryCode:"MX",symbol:"UDI"},{currencyCode:"MYR",type:"fiat",currency:J({defaultMessage:"Malaysian ringgit",id:"BJOmmIMKBn"}),countryCode:"MY",symbol:"RM"},{currencyCode:"MZN",type:"fiat",currency:J({defaultMessage:"Mozambican metical",id:"KVoUcWYwrs"}),countryCode:"MZ",symbol:"MT"},{currencyCode:"NAD",type:"fiat",currency:J({defaultMessage:"Namibian dollar",id:"ofXViiQOEO"}),countryCode:"NA",symbol:"$"},{currencyCode:"NGN",type:"fiat",currency:J({defaultMessage:"Nigerian naira",id:"YtrB6By6fQ"}),countryCode:"NG",symbol:""},{currencyCode:"NIO",type:"fiat",currency:J({defaultMessage:"Nicaraguan crdoba",id:"NJJMgSKcDP"}),countryCode:"NI",symbol:"C$"},{currencyCode:"NOK",type:"fiat",currency:J({defaultMessage:"Norwegian krone",id:"X7p/vNj1w0"}),countryCode:"NO",symbol:"kr"},{currencyCode:"NPR",type:"fiat",currency:J({defaultMessage:"Nepalese rupee",id:"KpP5Ur9yKv"}),countryCode:"NP",symbol:""},{currencyCode:"NZD",type:"fiat",currency:J({defaultMessage:"New Zealand dollar",id:"uoVYggIiS7"}),countryCode:"NZ",symbol:"$"},{currencyCode:"OMR",type:"fiat",currency:J({defaultMessage:"Omani rial",id:"YuZlkmlwz6"}),countryCode:"OM",symbol:".."},{currencyCode:"PAB",type:"fiat",currency:J({defaultMessage:"Panamanian balboa",id:"WsXJoQA7BU"}),countryCode:"PA",symbol:"B/."},{currencyCode:"PEN",type:"fiat",currency:J({defaultMessage:"Peruvian sol",id:"Gzey/zBCdq"}),countryCode:"PE",symbol:"S/."},{currencyCode:"PGK",type:"fiat",currency:J({defaultMessage:"Papua New Guinean kina",id:"1odcdptMV2"}),countryCode:"PG",symbol:"K"},{currencyCode:"PHP",type:"fiat",currency:J({defaultMessage:"Philippine peso",id:"Ze94/Fib/J"}),countryCode:"PH",symbol:""},{currencyCode:"PKR",type:"fiat",currency:J({defaultMessage:"Pakistani rupee",id:"xg2ovH8pDh"}),countryCode:"PK",symbol:""},{currencyCode:"PLN",type:"fiat",currency:J({defaultMessage:"Polish zoty",id:"5nGZooUDXi"}),countryCode:"PL",symbol:"z"},{currencyCode:"PYG",type:"fiat",currency:J({defaultMessage:"Paraguayan guaran",id:"faGTF61Eyw"}),countryCode:"PY",symbol:""},{currencyCode:"QAR",type:"fiat",currency:J({defaultMessage:"Qatari riyal",id:"DuHEQnjrPb"}),countryCode:"QA",symbol:"."},{currencyCode:"RON",type:"fiat",currency:J({defaultMessage:"Romanian leu",id:"lXgl4aKBP3"}),countryCode:"RO",symbol:"lei"},{currencyCode:"RSD",type:"fiat",currency:J({defaultMessage:"Serbian dinar",id:"giqvsRUiA5"}),countryCode:"RS",symbol:"."},{currencyCode:"RUB",type:"fiat",currency:J({defaultMessage:"Russian ruble",id:"4U+m5Kd694"}),countryCode:"RU",symbol:""},{currencyCode:"RWF",type:"fiat",currency:J({defaultMessage:"Rwandan franc",id:"URbs3Tt0On"}),countryCode:"RW",symbol:"FRw"},{currencyCode:"SAR",type:"fiat",currency:J({defaultMessage:"Saudi riyal",id:"p6D2TLqko8"}),countryCode:"SA",symbol:"."},{currencyCode:"SCR",type:"fiat",currency:J({defaultMessage:"Seychellois rupee",id:"V7Ju6HZQJK"}),countryCode:"SC",symbol:""},{currencyCode:"SDG",type:"fiat",currency:J({defaultMessage:"Sudanese pound",id:"FsgRxw4tdm"}),countryCode:"SD",symbol:".."},{currencyCode:"SEK",type:"fiat",currency:J({defaultMessage:"Swedish krona",id:"WoyUwT/z0X"}),countryCode:"SE",symbol:"kr"},{currencyCode:"SGD",type:"fiat",currency:J({defaultMessage:"Singapore dollar",id:"SCjBmFU+PM"}),countryCode:"SG",symbol:"$"},{currencyCode:"SHP",type:"fiat",currency:J({defaultMessage:"Saint Helena pound",id:"XZdS6/MxwW"}),countryCode:"SH",symbol:""},{currencyCode:"SLL",type:"fiat",currency:J({defaultMessage:"Sierra Leonean leone",id:"DFZ4yqf1EG"}),countryCode:"SL",symbol:"Le"},{currencyCode:"SOS",type:"fiat",currency:J({defaultMessage:"Somali shilling",id:"e7cANdrF41"}),countryCode:"SO",symbol:"Sh.So."},{currencyCode:"SVC",type:"fiat",currency:J({defaultMessage:"Salvadoran coln",id:"A2mT13SXuX"}),countryCode:"SV",symbol:""},{currencyCode:"SZL",type:"fiat",currency:J({defaultMessage:"Swazi lilangeni",id:"+kNQR2VJjT"}),countryCode:"SZ",symbol:"E"},{currencyCode:"THB",type:"fiat",currency:J({defaultMessage:"Thai baht",id:"Yz36aOmXMd"}),countryCode:"TH",symbol:""},{currencyCode:"TJS",type:"fiat",currency:J({defaultMessage:"Tajikistani somoni",id:"G3q+8He+TZ"}),countryCode:"TJ",symbol:"M"},{currencyCode:"TMT",type:"fiat",currency:J({defaultMessage:"Turkmenistan manat",id:"iV0j+gxDPN"}),countryCode:"TM",symbol:"m"},{currencyCode:"TND",type:"fiat",currency:J({defaultMessage:"Tunisian dinar",id:"l6iU1LyMSk"}),countryCode:"TN",symbol:"."},{currencyCode:"TRY",type:"fiat",currency:J({defaultMessage:"Turkish lira",id:"hQ9m98Llgt"}),countryCode:"TR",symbol:""},{currencyCode:"TTD",type:"fiat",currency:J({defaultMessage:"Trinidad and Tobago dollar",id:"Op/jRg7//J"}),countryCode:"TT",symbol:"TT$"},{currencyCode:"TWD",type:"fiat",currency:J({defaultMessage:"New Taiwan dollar",id:"yAeWHzFY54"}),countryCode:"TW",symbol:"NT$"},{currencyCode:"TZS",type:"fiat",currency:J({defaultMessage:"Tanzanian shilling",id:"7YNH90CDt1"}),countryCode:"TZ",symbol:"TSh"},{currencyCode:"UAH",type:"fiat",currency:J({defaultMessage:"Ukrainian hryvnia",id:"HCy2dyACi0"}),countryCode:"UA",symbol:""},{currencyCode:"UGX",type:"fiat",currency:J({defaultMessage:"Ugandan shilling",id:"P5STuJcFRi"}),countryCode:"UG",symbol:"USh"},{currencyCode:"USD",type:"fiat",currency:J({defaultMessage:"United States dollar",id:"BPRJDRwXU1"}),countryCode:"US",symbol:"$"},{currencyCode:"UYU",type:"fiat",currency:J({defaultMessage:"Uruguayan peso",id:"HtXUCx6BL1"}),countryCode:"UY",symbol:"$U"},{currencyCode:"UZS",type:"fiat",currency:J({defaultMessage:"Uzbekistani som",id:"lv4m0Kbuw1"}),countryCode:"UZ",symbol:"so'm"},{currencyCode:"VND",type:"fiat",currency:J({defaultMessage:"Vietnamese ng",id:"We/RqEPpOp"}),countryCode:"VN",symbol:""},{currencyCode:"XAF",type:"fiat",currency:J({defaultMessage:"Central African CFA franc",id:"fZwFESvHCw"}),countryCode:"CF",symbol:"FCFA"},{currencyCode:"XAG",type:"commodity",currency:J({defaultMessage:"Silver (troy ounce)",id:"XVTnv5Liuj"}),countryCode:"ZZ",symbol:"XAG"},{currencyCode:"XAU",type:"commodity",currency:J({defaultMessage:"Gold (troy ounce)",id:"s3i6lUYb/y"}),countryCode:"ZZ",symbol:"XAU"},{currencyCode:"XCD",type:"fiat",currency:J({defaultMessage:"East Caribbean dollar",id:"pXF3HmkspQ"}),countryCode:"AG",symbol:"$"},{currencyCode:"XDR",type:"fiat",currency:J({defaultMessage:"Special drawing rights",id:"X4eXXVN7wq"}),countryCode:"ZZ",symbol:"SDR"},{currencyCode:"XOF",type:"fiat",currency:J({defaultMessage:"West African CFA franc",id:"cezzLNBm20"}),countryCode:"SN",symbol:"CFA"},{currencyCode:"XPF",type:"fiat",currency:J({defaultMessage:"CFP franc",id:"txe+aX9vvZ"}),countryCode:"PF",symbol:""},{currencyCode:"YER",type:"fiat",currency:J({defaultMessage:"Yemeni rial",id:"lRXRuW4arm"}),countryCode:"YE",symbol:""},{currencyCode:"ZAC",type:"fiat",currency:J({defaultMessage:"South African rand (financial)",id:"GsJykrhxvK"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZAR",type:"fiat",currency:J({defaultMessage:"South African rand",id:"MbU2//IGEL"}),countryCode:"ZA",symbol:"R"},{currencyCode:"ZMW",type:"fiat",currency:J({defaultMessage:"Zambian kwacha",id:"ZJnHTLBz2v"}),countryCode:"ZM",symbol:"ZK"},{currencyCode:"BTC",type:"crypto",currency:J({defaultMessage:"Bitcoin",id:"RkW5weBw8q"}),symbol:""},{currencyCode:"ETH",type:"crypto",currency:J({defaultMessage:"Ethereum",id:"ohE0sWxJfP"}),symbol:""},{currencyCode:"XRP",type:"crypto",currency:J({defaultMessage:"XRP",id:"rwHxdc9N83"}),symbol:"XRP"},{currencyCode:"BNB",type:"crypto",currency:J({defaultMessage:"BNB",id:"+x/JA+cbSg"}),symbol:"BNB"},{currencyCode:"USDT",type:"crypto",currency:J({defaultMessage:"Tether",id:"G17JtC1DRO"}),symbol:"USDT"},{currencyCode:"SOL",type:"crypto",currency:J({defaultMessage:"Solana",id:"RmbsLR1XI9"}),symbol:"SOL"},{currencyCode:"HYPE",type:"crypto",currency:J({defaultMessage:"HYPE",id:"sRJuK+IQu7"}),symbol:"HYPE"},{currencyCode:"STETH",type:"crypto",currency:J({defaultMessage:"stETH",id:"VNvqEhRv0o"}),symbol:"stETH"},{currencyCode:"WTRX",type:"crypto",currency:J({defaultMessage:"Wrapped TRX",id:"hi8IgS7Vvh"}),symbol:"WTRX"},{currencyCode:"DOGE",type:"crypto",currency:J({defaultMessage:"Dogecoin",id:"Q4KOhNgUFl"}),symbol:"DOGE"},{currencyCode:"ADA",type:"crypto",currency:J({defaultMessage:"Cardano",id:"Zk+zRo7Vav"}),symbol:"ADA"},{currencyCode:"TRX",type:"crypto",currency:J({defaultMessage:"TRON",id:"fLtNc/n43W"}),symbol:"TRX"},{currencyCode:"USDC",type:"crypto",currency:J({defaultMessage:"USD Coin",id:"tPc0IbLJq0"}),symbol:"USDC"},{currencyCode:"WBTC",type:"crypto",currency:J({defaultMessage:"Wrapped Bitcoin",id:"AO1Xrr+Cwk"}),symbol:"WBTC"},{currencyCode:"WSTETH",type:"crypto",currency:J({defaultMessage:"Wrapped stETH",id:"Fg7h7ipjGE"}),symbol:"wstETH"},{currencyCode:"EDLC",type:"crypto",currency:J({defaultMessage:"EDLC",id:"FplbXN+574"}),symbol:"EDLC"},{currencyCode:"LINK",type:"crypto",currency:J({defaultMessage:"Chainlink",id:"d/A799ZTa/"}),symbol:"LINK"},{currencyCode:"AIC",type:"crypto",currency:J({defaultMessage:"AIC",id:"RSOIsb9pEC"}),symbol:"AIC"},{currencyCode:"XLM",type:"crypto",currency:J({defaultMessage:"Stellar",id:"+uYwRW10Bd"}),symbol:"XLM"},{currencyCode:"WETH",type:"crypto",currency:J({defaultMessage:"Wrapped Ether",id:"s8UwDT+8t2"}),symbol:"WETH"},{currencyCode:"BCH",type:"crypto",currency:J({defaultMessage:"Bitcoin Cash",id:"hLt+wzROTK"}),symbol:"BCH"},{currencyCode:"UST",type:"crypto",currency:J({defaultMessage:"TerraUSD",id:"wot2OPkJDe"}),symbol:"UST"},{currencyCode:"AVAX",type:"crypto",currency:J({defaultMessage:"Avalanche",id:"C9K+TI7R4G"}),symbol:"AVAX"},{currencyCode:"SUI",type:"crypto",currency:J({defaultMessage:"Sui",id:"CvmoCbTblr"}),symbol:"SUI"},{currencyCode:"LTC",type:"crypto",currency:J({defaultMessage:"Litecoin",id:"oyKw8Dr6hh"}),symbol:"LTC"},{currencyCode:"TON",type:"crypto",currency:J({defaultMessage:"Toncoin",id:"V2AxdWxVB/"}),symbol:"TON"},{currencyCode:"HBAR",type:"crypto",currency:J({defaultMessage:"Hedera",id:"yLSpOa++/L"}),symbol:"HBAR"},{currencyCode:"WHBAR",type:"crypto",currency:J({defaultMessage:"Wrapped HBAR",id:"rfimaaddr1"}),symbol:"WHBAR"},{currencyCode:"UNI",type:"crypto",currency:J({defaultMessage:"Uniswap",id:"hincAkLfxR"}),symbol:"UNI"},{currencyCode:"BTCB",type:"crypto",currency:J({defaultMessage:"Bitcoin BEP2",id:"T7D16Bt6JS"}),symbol:"BTCB"},{currencyCode:"OKB",type:"crypto",currency:J({defaultMessage:"OKB",id:"6ZLe/X3P+I"}),symbol:"OKB"},{currencyCode:"SHIB",type:"crypto",currency:J({defaultMessage:"Shiba Inu",id:"dwuQAuovNP"}),symbol:"SHIB"},{currencyCode:"USDS",type:"crypto",currency:J({defaultMessage:"StableUSD",id:"DAzSEb0LeA"}),symbol:"USDS"},{currencyCode:"WBT",type:"crypto",currency:J({defaultMessage:"WhiteBIT Coin",id:"Lj9Zp416rG"}),symbol:"WBT"},{currencyCode:"BGB",type:"crypto",currency:J({defaultMessage:"Bitget Token",id:"OEQgkmdE1O"}),symbol:"BGB"},{currencyCode:"DAI",type:"crypto",currency:J({defaultMessage:"Dai",id:"7g+Z6oltsB"}),symbol:"DAI"},{currencyCode:"DOT",type:"crypto",currency:J({defaultMessage:"Polkadot",id:"iS7ue2zjn0"}),symbol:"DOT"},{currencyCode:"XMR",type:"crypto",currency:J({defaultMessage:"Monero",id:"RydJABkA4a"}),symbol:"XMR"},{currencyCode:"MNT",type:"crypto",currency:J({defaultMessage:"MNT",id:"90qNZszLR/"}),symbol:"MNT"},{currencyCode:"PEPE",type:"crypto",currency:J({defaultMessage:"Pepe",id:"x9wJbmzZhn"}),symbol:"PEPE"},{currencyCode:"AAVE",type:"crypto",currency:J({defaultMessage:"Aave",id:"kFjzNltaTL"}),symbol:"AAVE"},{currencyCode:"CRO",type:"crypto",currency:J({defaultMessage:"Cronos",id:"2cg8W1gIo3"}),symbol:"CRO"},{currencyCode:"ETC",type:"crypto",currency:J({defaultMessage:"Ethereum Classic",id:"Bv9Xkw6kNg"}),symbol:"ETC"},{currencyCode:"FD",type:"crypto",currency:J({defaultMessage:"FD",id:"+Q62UIi/LA"}),symbol:"FD"},{currencyCode:"TUSD",type:"crypto",currency:J({defaultMessage:"TrueUSD",id:"whDnhXYdIe"}),symbol:"TUSD"},{currencyCode:"NEAR",type:"crypto",currency:J({defaultMessage:"NEAR Protocol",id:"E9RsfkMwMk"}),symbol:"NEAR"},{currencyCode:"METAGAMES",type:"crypto",currency:J({defaultMessage:"MetaGames",id:"C0GGroVhnP"}),symbol:"METAGAMES"},{currencyCode:"TAO",type:"crypto",currency:J({defaultMessage:"Bittensor",id:"6+C0Ut5hKl"}),symbol:"TAO"},{currencyCode:"ICP",type:"crypto",currency:J({defaultMessage:"Internet Computer",id:"q9uyMXlX+M"}),symbol:"ICP"},{currencyCode:"GT",type:"crypto",currency:J({defaultMessage:"GateToken",id:"dSGfpIcmmI"}),symbol:"GT"},{currencyCode:"RETH",type:"crypto",currency:J({defaultMessage:"Rocket Pool ETH",id:"pg4o1kZ2d4"}),symbol:"rETH"},{currencyCode:"MRS",type:"crypto",currency:J({defaultMessage:"MRS",id:"CABw3watNU"}),symbol:"MRS"},{currencyCode:"APT",type:"crypto",currency:J({defaultMessage:"Aptos",id:"/U15UItsIY"}),symbol:"APT"},{currencyCode:"KAS",type:"crypto",currency:J({defaultMessage:"Kaspa",id:"1MwSSUoCwu"}),symbol:"KAS"},{currencyCode:"ALGO",type:"crypto",currency:J({defaultMessage:"Algorand",id:"TijDBb1K3w"}),symbol:"ALGO"},{currencyCode:"PENGU",type:"crypto",currency:J({defaultMessage:"PENGU",id:"esTSdYyjL9"}),symbol:"PENGU"},{currencyCode:"VET",type:"crypto",currency:J({defaultMessage:"VeChain",id:"o3b918Uwm9"}),symbol:"VET"},{currencyCode:"OTRUMP",type:"crypto",currency:J({defaultMessage:"OTRUMP",id:"dwjxu1ZNrs"}),symbol:"OTRUMP"},{currencyCode:"ARB",type:"crypto",currency:J({defaultMessage:"Arbitrum",id:"2qF6KBPwqc"}),symbol:"ARB"},{currencyCode:"LUNA1",type:"crypto",currency:J({defaultMessage:"Terra (LUNA1)",id:"g5JtKAkJm/"}),symbol:"LUNA1"},{currencyCode:"MKR",type:"crypto",currency:J({defaultMessage:"Maker",id:"iVoUggHR7n"}),symbol:"MKR"},{currencyCode:"QNT",type:"crypto",currency:J({defaultMessage:"Quant",id:"kZiBtRgPXK"}),symbol:"QNT"},{currencyCode:"BONK",type:"crypto",currency:J({defaultMessage:"BONK",id:"/WOyXrLUEt"}),symbol:"BONK"},{currencyCode:"ATOM",type:"crypto",currency:J({defaultMessage:"Cosmos",id:"VfvhDOBZSq"}),symbol:"ATOM"},{currencyCode:"FTN",type:"crypto",currency:J({defaultMessage:"FTN",id:"+BtHlnfKBJ"}),symbol:"FTN"},{currencyCode:"KCS",type:"crypto",currency:J({defaultMessage:"KuCoin Token",id:"J6x8n/y945"}),symbol:"KCS"},{currencyCode:"RNDR",type:"crypto",currency:J({defaultMessage:"Render",id:"fI33PYpQj/"}),symbol:"RNDR"},{currencyCode:"BNX",type:"crypto",currency:J({defaultMessage:"BNX",id:"/mzOvKP3DB"}),symbol:"BNX"},{currencyCode:"FIL",type:"crypto",currency:J({defaultMessage:"Filecoin",id:"O60m1dM5+I"}),symbol:"FIL"},{currencyCode:"WBNB",type:"crypto",currency:J({defaultMessage:"Wrapped BNB",id:"6oPoIEcEKM"}),symbol:"WBNB"},{currencyCode:"DUCK",type:"crypto",currency:J({defaultMessage:"DUCK",id:"Wy2n2zHjyn"}),symbol:"DUCK"},{currencyCode:"ONDO",type:"crypto",currency:J({defaultMessage:"Ondo",id:"Mdh4nCMVFp"}),symbol:"ONDO"},{currencyCode:"EZETH",type:"crypto",currency:J({defaultMessage:"EZETH",id:"GquMfdHRpr"}),symbol:"EZETH"},{currencyCode:"DHN",type:"crypto",currency:J({defaultMessage:"DHN",id:"3DBrwMVTuR"}),symbol:"DHN"},{currencyCode:"SPX",type:"crypto",currency:J({defaultMessage:"SPX",id:"78Gbn14660"}),symbol:"SPX"},{currencyCode:"XDC",type:"crypto",currency:J({defaultMessage:"XDC Network",id:"f4v54xCFpd"}),symbol:"XDC"},{currencyCode:"ENA",type:"crypto",currency:J({defaultMessage:"ENA",id:"G6NRdu/3/f"}),symbol:"ENA"},{currencyCode:"SOLVBTCBBN",type:"crypto",currency:J({defaultMessage:"SOLVBTCBBN",id:"U+VGyLBIbO"}),symbol:"SOLVBTCBBN"},{currencyCode:"LDO",type:"crypto",currency:J({defaultMessage:"Lido DAO",id:"Hm40klV7dx"}),symbol:"LDO"},{currencyCode:"INJ",type:"crypto",currency:J({defaultMessage:"Injective",id:"Zy5gqTZCK/"}),symbol:"INJ"},{currencyCode:"USD0",type:"crypto",currency:J({defaultMessage:"USD0",id:"I8k7Is+SUX"}),symbol:"USD0"},{currencyCode:"FLR",type:"crypto",currency:J({defaultMessage:"Flare",id:"EuWzA+LwQr"}),symbol:"FLR"},{currencyCode:"PY",type:"crypto",currency:J({defaultMessage:"PY",id:"2WmUk53rca"}),symbol:"PY"},{currencyCode:"SEI",type:"crypto",currency:J({defaultMessage:"Sei",id:"uIVFPKXueM"}),symbol:"SEI"},{currencyCode:"MSOL",type:"crypto",currency:J({defaultMessage:"Marinade Staked SOL",id:"Sgo9VGem0+"}),symbol:"mSOL"},{currencyCode:"CRV",type:"crypto",currency:J({defaultMessage:"Curve DAO Token",id:"hv2sTxuyJY"}),symbol:"CRV"},{currencyCode:"FTM",type:"crypto",currency:J({defaultMessage:"Fantom",id:"FdV4Gc/fz2"}),symbol:"FTM"},{currencyCode:"FLOKI",type:"crypto",currency:J({defaultMessage:"FLOKI",id:"d2sPiyXVq8"}),symbol:"FLOKI"},{currencyCode:"CMETH",type:"crypto",currency:J({defaultMessage:"CMETH",id:"ZXQlnD2obl"}),symbol:"CMETH"},{currencyCode:"SLISBNB",type:"crypto",currency:J({defaultMessage:"SLISBNB",id:"wqx7ZL4lbr"}),symbol:"SLISBNB"},{currencyCode:"FARTCOIN",type:"crypto",currency:J({defaultMessage:"FARTCOIN",id:"qFlNIb5L+O"}),symbol:"FARTCOIN"},{currencyCode:"EETH",type:"crypto",currency:J({defaultMessage:"eETH",id:"tCrC5owpVn"}),symbol:"eETH"},{currencyCode:"KAIA",type:"crypto",currency:J({defaultMessage:"KAIA",id:"fDXZE/gzgq"}),symbol:"KAIA"},{currencyCode:"GRT",type:"crypto",currency:J({defaultMessage:"The Graph",id:"oFrVNds2cX"}),symbol:"GRT"},{currencyCode:"IMX",type:"crypto",currency:J({defaultMessage:"Immutable",id:"+0mthqqK1s"}),symbol:"IMX"},{currencyCode:"WIF",type:"crypto",currency:J({defaultMessage:"WIF",id:"tK0cRtUi/S"}),symbol:"WIF"},{currencyCode:"RAY",type:"crypto",currency:J({defaultMessage:"Raydium",id:"pSdm2ZTXHD"}),symbol:"RAY"},{currencyCode:"OP",type:"crypto",currency:J({defaultMessage:"Optimism",id:"ghDrrz64nC"}),symbol:"OP"},{currencyCode:"XAUT",type:"crypto",currency:J({defaultMessage:"Tether Gold",id:"pobzwuxAfg"}),symbol:"XAUT"},{currencyCode:"PENDLE",type:"crypto",currency:J({defaultMessage:"Pendle",id:"z8diWExCd3"}),symbol:"PENDLE"}],mh=(e,t="default")=>{if(!e)return"";const n=t==="indian"?"en-IN":"en-US",r=new Intl.NumberFormat(n,{useGrouping:!0,minimumFractionDigits:0,maximumFractionDigits:100}),s=e.endsWith("."),a=e.split("."),i=a[0]||"0",l=a[1]||"",c=parseFloat(e);if(isNaN(c))return"";let f=r.format(parseFloat(i));return a.length>1?f+="."+l:s&&(f+="."),f},VTe=I.memo(({value:e,onChange:t,placeholder:n="0",disabled:r=!1,className:s="",min:a,max:i,step:l=1,formatting:c="default"})=>{const u=d.useRef(null),[f,m]=d.useState(mh(e,c)),p=d.useCallback(x=>x.replace(/,/g,""),[]),h=d.useCallback(x=>{const v=x.target.value,b=p(v),_=x.target.selectionStart||0;if(b===""||/^\d*\.?\d*$/.test(b)&&!/e/i.test(v)){const w=mh(b,c);m(w),t(b),requestAnimationFrame(()=>{if(u.current){const C=v.substring(0,_),S=p(C);let E=0,k=0;const M=S.replace(".","").length,j=S.includes(".")&&S.endsWith(".");for(let R=0;R<w.length;R++){const O=w[R];if(O==="."){if(j&&E===M){k=R+1;break}}else if(O!==","&&(E++,!j&&E===M)){k=R+1;break}}u.current.setSelectionRange(k,k)}})}},[p,t,c]),g=d.useCallback(x=>{const v=u.current;if(!v||(x.metaKey||x.ctrlKey)&&(x.key==="z"||x.key==="Z"))return;const{selectionStart:b,selectionEnd:_,value:w}=v;if(x.key==="ArrowUp"||x.key==="ArrowDown"){x.preventDefault();const C=parseFloat(p(e))||0,S=x.key==="ArrowUp"?l:-l;let E=C+S;a!==void 0&&E<a&&(E=a),i!==void 0&&E>i&&(E=i);const k=E.toString(),M=mh(k,c);m(M),t(k);return}if(x.key==="Backspace"&&b===_){if(b===null)return;if(w[b-1]===","){x.preventDefault();const S=w.substring(0,b-1),E=w.substring(b),k=S[S.length-1];if(k&&/\d/.test(k)){const M=S.slice(0,-1)+E,j=p(M),R=mh(j,c);m(R),t(j),setTimeout(()=>{const O=R.length-p(E).length;v.setSelectionRange(O,O)},0)}}}},[p,t,e,l,a,i,c]),y=d.useCallback(x=>{x.preventDefault();const v=x.clipboardData.getData("text"),b=p(v);if(/^\d*\.?\d*$/.test(b)&&!/e/i.test(v)){const _=mh(b,c);m(_),t(b)}},[p,t,c]);return I.useEffect(()=>{const x=mh(e,c);m(x)},[e,c]),o.jsx("input",{ref:u,type:"text",value:f,onChange:h,onKeyDown:g,onPaste:y,placeholder:n,disabled:r,className:s,inputMode:"decimal"})});VTe.displayName="CurrencyInput";const WTe=I.memo(e=>{const{data:t}=e,{source_currency:n,target_currency:r,source_amount:s,converted_amount:a,exchange_rate:i}=t,l=!0,{menuItems:c}=$x(),[u,f]=d.useState(s),[m,p]=d.useState(L(a)),[h,g]=d.useState(n),[y,x]=d.useState(r),[v,b]=d.useState(i),{colorScheme:_}=jr(),w=_==="dark",{$t:C}=Z(),S=`${h}${y}`,{data:E,isLoading:k,error:M}=Ue({queryKey:NCt(h,y,u),queryFn:()=>jCt({sourceCurrency:h,targetCurrency:y,amount:u}),enabled:!!h&&!!y&&u>0}),j=d.useRef(E?.source_currency),R=d.useRef(E?.target_currency),O=d.useRef(E?.exchange_rate),D=d.useRef(E?.source_img),P=d.useRef(E?.source_img_dark),A=d.useRef(E?.target_img),T=d.useRef(E?.target_img_dark);d.useEffect(()=>{E&&(E?.source_currency!==j.current||E?.target_currency!==R.current)&&(p(L(E.converted_amount)),j.current=E.source_currency,R.current=E.target_currency),E&&E.exchange_rate!==O.current&&(b(E.exchange_rate),O.current=E.exchange_rate),E&&E.source_img!==D.current&&(D.current=E.source_img),E&&E.source_img_dark!==P.current&&(P.current=E.source_img_dark),E&&E.target_img!==A.current&&(A.current=E.target_img),E&&E.target_img_dark!==T.current&&(T.current=E.target_img_dark)},[E]);function N(W){return yL.find(Q=>Q.currencyCode===W)}function L(W){return W>1?parseFloat(W.toFixed(2)):parseFloat(W.toPrecision(2))}function U(W){return W==="INR"||W==="PKR"||W==="BDT"||W==="NPR"}const $=N(h),V=N(y);return o.jsx(Fi,{widgetType:"finance",widgetName:"currency_exchange",widgetSize:"full",children:o.jsxs("div",{className:"gap-sm pb-sm flex flex-col overflow-visible",children:[o.jsx(Wt,{shadow:!0,className:"w-full overflow-hidden",children:o.jsxs(z,{variant:"subtler",className:"grid w-full grid-cols-1 gap-px md:grid-cols-2",children:[o.jsxs(z,{variant:"raised",className:"p-md pb-sm gap-sm flex w-full flex-col",children:[o.jsx("div",{className:"flex-1",children:o.jsxs(F,{variant:"entry-title-200",className:"flex font-mono !text-2xl",children:[o.jsx("span",{className:"text-quieter",children:$?.symbol}),o.jsx(vL,{value:u.toString(),error:!!M,onChange:W=>{const Q=parseFloat(W);f(Q),Q>0?p(L(Q*v)):p(0)},formatting:U($?.currencyCode)?"indian":"default"})]})}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(xL,{onSelect:W=>g(W),currency:$?C($.currency):h,icon:$&&$.type==="crypto"?o.jsx(z,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(w?P.current:D.current)&&o.jsx("img",{src:w?P.current??"":D.current??"",alt:C($.currency),className:"size-full object-contain"})}):$&&$.type==="commodity"?o.jsx(z,{className:B("size-full rounded-full",{"!bg-[gold]":$?.currencyCode==="XAU","!bg-[silver]":$?.currencyCode==="XAG"})}):o.jsx(iy,{className:"size-full object-contain",countryCode:$?.countryCode})}),o.jsx("div",{className:"ml-auto grid grid-cols-1 grid-rows-1 items-center",children:o.jsxs(Ye,{children:[k&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Is,className:"col-start-1 row-start-1 ml-auto",children:o.jsx(F,{color:"ultraLight",children:o.jsx(Fr,{size:12})})},"loading"),!k&&M&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:Is,className:"col-start-1 row-start-1 ml-auto",children:o.jsx(F,{color:"light",variant:"small",children:C({defaultMessage:"Not supported",id:"+FiyOTaUCW"})})},"error")]})})]})]}),o.jsxs(z,{variant:"raised",className:B("p-md pb-sm gap-md flex w-full flex-col",{"!gap-sm":l}),children:[o.jsx("div",{className:"flex-1",children:o.jsxs(F,{variant:"entry-title-200",color:"default",className:"flex font-mono !text-2xl",children:[o.jsx("span",{className:"text-quieter",children:V?.symbol}),o.jsx(vL,{value:m.toString(),error:!!M,onChange:W=>{const Q=parseFloat(W);p(Q),Q>0?f(L(Q/v)):f(0)},formatting:U(V?.currencyCode)?"indian":"default"})]})}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(xL,{onSelect:W=>x(W),currency:V?C(V.currency):y,icon:V&&V.type==="crypto"?o.jsx(z,{variant:"subtler",className:"size-full overflow-hidden rounded-full",children:(w?T.current:A.current)&&o.jsx("img",{src:w?T.current??"":A.current??"",alt:C(V.currency),className:"size-full object-contain"})}):V&&V.type==="commodity"?o.jsx(z,{className:B("size-full rounded-full",{"!bg-[gold]":V?.currencyCode==="XAU","!bg-[silver]":V?.currencyCode==="XAG"})}):o.jsx(iy,{className:"size-full object-contain",countryCode:V?.countryCode})}),c&&c.length>0&&o.jsx("div",{className:"ml-auto",children:o.jsx(yr.Menu,{menuItems:c})})]})]})]})}),o.jsx("div",{children:o.jsx(qOt,{symbol:S,initialPeriod:"1y",search:!1,price:!1,profile:!1,tempHideOnEmpty:!0})})]})})});WTe.displayName="CurrencyConversion";const xL=I.memo(({currency:e,icon:t,onSelect:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=xe(),[a,i]=d.useState(""),l=d.useMemo(()=>["CNY","EUR","GBP","JPY","USD","BTC","ETH"].map(y=>yL.find(x=>x.currencyCode===y)),[]),c=d.useMemo(()=>{const g=yL.map(y=>({...y,localizedCurrency:r(y.currency)}));return new Vx(g,{keys:["localizedCurrency","currencyCode","countryCode"],threshold:.3})},[r]),u=d.useMemo(()=>c.search(a)??[],[c,a]),f=d.useMemo(()=>l.map(g=>({type:"default",text:g?.currencyCode?r(g.currency):"",onClick:()=>{g?.currencyCode&&(n(g.currencyCode),i(""))}})),[l,n,r]),m=d.useMemo(()=>u.map(g=>({type:"default",text:r(g.item?.currency)??"",onClick:()=>{g?.item?.currencyCode&&(n(g.item?.currencyCode),i(""))}})),[u,n,r]),p=d.useMemo(()=>[{type:"default",text:r({defaultMessage:"No results",id:"jHJmjfxD4s"}),disabled:!0}],[r]),h=d.useMemo(()=>o.jsx(Xr,{autoFocus:!0,className:B({"!-mx-xs":s,"!px-xs py-sm mb-xs border-none !bg-transparent shadow-none outline-none focus:!ring-0":!s}),pill:!1,isMobileUserAgent:s,placeholder:r({defaultMessage:"Search currencies...",id:"fDMc8k+hJQ"}),value:a,onChange:g=>i(g),disable1pass:!0}),[s,a,r]);return o.jsx(nn,{alwaysShowChildren:!0,placement:"bottom-start",showFooterOnMobile:!0,items:a.length>0?m.length>0?m:p:f,isMobileStyle:s,wrapperClassName:"flex",header:h,footer:s&&h,children:o.jsx(Me,{chevron:!0,noPadding:!0,extraCSS:"!px-sm -ml-sm",leadingComponent:o.jsx("div",{className:"mr-0.5 size-5",children:t}),variant:"primary",size:"small",text:e})})});xL.displayName="CurrencyPicker";const vL=I.memo(({value:e,onChange:t,error:n,formatting:r="default"})=>n?o.jsx("span",{className:"!text-quieter",children:"---"}):o.jsx(VTe,{className:B("placeholder:text-quieter w-full overflow-hidden bg-transparent transition-colors duration-200 [appearance:textfield] focus:outline-none [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",{"!text-quieter":n}),value:e??"",disabled:n,placeholder:"0",onChange:t,min:0,formatting:r}));vL.displayName="ConversionInput";const _S=e=>e?new Date(e):void 0,KOt=e=>({departureTime:new Date(e.departureTime),arrivalTime:new Date(e.arrivalTime),actualDepartureTime:_S(e.actualDepartureTime),actualArrivalTime:_S(e.actualArrivalTime),estimatedDepartureTime:_S(e.estimatedDepartureTime),estimatedArrivalTime:_S(e.estimatedArrivalTime)}),YOt=e=>!!(e.actualArrivalTime&&e.actualArrivalTime>e.arrivalTime||e.estimatedArrivalTime&&e.estimatedArrivalTime>e.arrivalTime),QOt=e=>{if(e.length===0)return[];const t=[...e].sort((a,i)=>new Date(a.departureTime).getTime()-new Date(i.departureTime).getTime()),n=[],r=t[0];if(!r)return[];let s=[r];for(let a=1;a<t.length;a++){const i=t[a-1],l=t[a];!i||!l||(i.arrivalAirport===l.departureAirport?s.push(l):(n.push(s),s=[l]))}return n.length>0&&s.length==n[n.length-1]?.length&&n.push(s),n},d0=(e,t,n)=>{const r=Gut({start:e,end:t}),s=r.days||0,a=r.hours||0,i=r.minutes||0;return s>0?a===0&&i===0?n({id:"sSynIO3ThU",defaultMessage:"{days}d"},{days:s}):i===0?n({id:"10cSZzeWte",defaultMessage:"{days}d {hours}h"},{days:s,hours:a}):n({id:"OWk1HjddEb",defaultMessage:"{days}d {hours}h {minutes}m"},{days:s,hours:a,minutes:i.toString().padStart(2,"0")}):a===0?n({id:"VvfhE21OJI",defaultMessage:"{minutes}m"},{minutes:i}):i===0?n({id:"unuVj1l7KW",defaultMessage:"{hours}h"},{hours:a}):n({id:"0Yp4jJ7rzm",defaultMessage:"{hours}h {minutes}m"},{hours:a,minutes:i.toString().padStart(2,"0")})},HTe=I.memo(({flightMetadata:e,departureTime:t,arrivalTime:n,actualDepartureTime:r,actualArrivalTime:s,estimatedDepartureTime:a,estimatedArrivalTime:i,delayed:l=!1,rightContent:c})=>{const{$t:u}=Z(),f=d.useMemo(()=>new Date,[]),{cancelled:m,diverted:p,status:h,flightNumber:g,departureCity:y,departureAirport:x,arrivalAirport:v,arrivalCity:b}=e,_=r||a||t,w=s||i||n,C=d.useMemo(()=>d0(f,_,u),[f,_,u]),S=d.useMemo(()=>d0(_,f,u),[f,_,u]),E=d.useMemo(()=>d0(w,f,u),[f,w,u]),k=d.useMemo(()=>d0(f,w,u),[f,w,u]),M=_<=f,j=w<=f,R=d.useMemo(()=>j?u({id:"mtuHNb+mRc",defaultMessage:"Arrived {time} ago"},{time:E}):M?u({id:"b6q320RasU",defaultMessage:"Departed {time} ago"},{time:S}):u({id:"/JLglYfuNX",defaultMessage:"Departing in {time}"},{time:C}),[M,j,C,S,E,u]),O=d.useMemo(()=>m?u({id:"3wsVWFbC1x",defaultMessage:"Cancelled"}):p?u({id:"/N1ZeWQc8B",defaultMessage:"Diverted"}):h,[m,p,u,h]);return o.jsxs("div",{className:"gap-sm flex flex-col justify-between sm:flex-row",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"section-title",children:o.jsx(ie,{id:"5KgWVKDR/R",defaultMessage:"{flightNumber}  {departureCity} ({departureAirport}) to {arrivalCity} ({arrivalAirport})",values:{flightNumber:g,departureCity:y,departureAirport:x,arrivalAirport:v,arrivalCity:b}})}),o.jsx("div",{className:"gap-sm flex flex-row",children:o.jsxs(Vo,{className:"gap-xs flex flex-row flex-wrap",children:[!m&&o.jsx(An,{id:"relative-departure-time",children:o.jsx(F,{variant:"smallBold",color:"light",children:R})}),M&&!j&&!m&&o.jsx(An,{id:"relative-arrival-time",children:o.jsx(F,{variant:"smallBold",color:"light",children:o.jsx(ie,{id:"z8jWKRSOak",defaultMessage:"Arriving in {time}",values:{time:k}})})}),o.jsx(An,{id:"status",children:o.jsx(F,{variant:"smallBold",color:m||p||l?"negative":"super",children:O})})]})})]}),c]})});HTe.displayName="FlightHeader";const Op=()=>{const{firstResult:{status:e,privacy_state:t}={}}=Ft(),n=ji(),{isIncognitoLocal:r}=In();return d.useMemo(()=>{if(!e)return!1;const s=!!t&&(r&&t!==$g.INCOGNITO||!r&&t===$g.INCOGNITO);return!n&&e!==Qn.PENDING||s},[r,t,n,e])},wS={initial:{opacity:0,filter:"blur(2px)"},animate:{opacity:1,filter:"blur(0px)"},exit:{opacity:0,filter:"blur(2px)"},transition:{duration:.5,ease:ha}},vH=I.memo(({children:e,animationKey:t,...n})=>o.jsx(Ye,{mode:"popLayout",initial:!1,children:o.jsx(ve.div,{initial:wS.initial,animate:wS.animate,exit:wS.exit,transition:wS.transition,children:o.jsx(F,{...n,children:e})},t)}));vH.displayName="FlightTextSwitcher";const zTe=I.memo(({terminal:e,gate:t,alignEnd:n})=>{const{$t:r}=Z();return o.jsxs("div",{className:B("gap-lg flex w-full flex-row",n&&"justify-end"),children:[e&&o.jsx(bL,{label:r({id:"GAHVEi8lHA",defaultMessage:"Terminal"}),value:e}),t&&o.jsx(bL,{label:r({id:"W+gH70jajX",defaultMessage:"Gate"}),value:t})]})});zTe.displayName="FlightTerminalGate";const bL=I.memo(({label:e,value:t})=>o.jsxs("div",{children:[o.jsx(F,{variant:"tinyMono",color:"light",children:e}),o.jsx(vH,{animationKey:t,variant:"entry-title-200",children:t})]}));bL.displayName="FlightAttribute";const CS={initial:{opacity:0,height:0,filter:"blur(2px)"},animate:{opacity:1,height:"auto",filter:"blur(0px)"},exit:{opacity:0,height:0,filter:"blur(2px)"},transition:{duration:.3,ease:an}},_L=I.memo(({airport:e,time:t,actualTime:n,estimatedTime:r,timezone:s,terminal:a,gate:i,variant:l="departure",delayed:c=!1,cancelled:u=!1})=>{const{locale:f,$t:m}=Z(),{submitQuery:p}=Sa(),h=Op(),{firstResult:g}=Ft(),y=g?.frontend_context_uuid,x=d.useMemo(()=>m(l==="departure"?{id:"BtqAemWTLK",defaultMessage:"Departure"}:{id:"WOIPGxfmZn",defaultMessage:"Arrival"}),[l,m]),v=l==="arrival",b=d.useMemo(()=>{const E=n||r;return E&&E.getTime()===t.getTime()?null:E},[n,r,t]),_=d.useMemo(()=>t.toLocaleTimeString(f,{hour:"numeric",minute:"2-digit",timeZone:s}),[t,s,f]),w=d.useMemo(()=>b?.toLocaleTimeString(f,{hour:"numeric",minute:"2-digit",timeZone:s}),[b,s,f]),C=d.useMemo(()=>t.toLocaleDateString(f,{weekday:"short",month:"short",day:"numeric",timeZone:s}),[t,s,f]),S=d.useCallback(()=>{const E=h,k=bo();p({fork:E,rawQuery:m({id:"xxqvnlQO57",defaultMessage:"Airport {airport}"},{airport:e}),collection:null,newFrontendContextUUID:E?k:null,existingFrontendContextUUID:E?void 0:y,promptSource:"user",querySource:"entity_link",shouldRedirectToBackendUUID:E})},[e,h,y,p,m]);return o.jsxs("div",{className:"gap-md col-span-3 flex min-w-0 flex-col justify-between",children:[o.jsxs("div",{className:B("gap-sm flex flex-col",v&&"items-end"),children:[o.jsxs(F,{variant:"tinyMono",color:"light",className:"gap-sm flex flex-row whitespace-nowrap",children:[x,o.jsx("button",{className:"text-foreground hover:text-super cursor-pointer underline transition-colors duration-150 ease-in-out",onClick:S,children:e}),o.jsxs("span",{children:["| ",C]})]}),o.jsxs("div",{className:B("flex flex-col",v&&"items-end"),children:[o.jsx(vH,{animationKey:_,as:"span",variant:"entry-title-200",color:c?"negative":"super",className:B("-translate-y-px !font-mono transition-colors duration-500",u&&"text-quiet line-through"),children:b?w:_}),o.jsx(Ye,{initial:!1,children:b&&o.jsx(ve.div,{initial:CS.initial,animate:CS.animate,exit:CS.exit,transition:CS.transition,className:"overflow-hidden",children:o.jsx(F,{as:"span",variant:b?"small":"entry-title-200",color:"super",className:B("-translate-y-px !font-mono",b&&"!text-quiet line-through"),children:_})})})]})]}),o.jsx(zTe,{terminal:a,gate:i,alignEnd:v})]})});_L.displayName="FlightDepartureArrival";const XOt=ve(z),GTe=I.memo(({progress:e,departureTime:t,arrivalTime:n,delayed:r,cancelled:s})=>{const{$t:a}=Z(),i=d.useMemo(()=>d0(t,n,a),[t,n,a]),l=d.useMemo(()=>e===void 0||s?0:Math.max(0,Math.min(100,e)),[e,s]),{left:c,width:u}=d.useMemo(()=>({left:`${l}%`,width:`${l}%`}),[l]),f=d.useMemo(()=>({left:0}),[]),m=d.useMemo(()=>({duration:2,ease:an,delay:.5}),[]),p=d.useMemo(()=>({left:c,opacity:1,scale:1}),[c]),h=d.useMemo(()=>({...f,opacity:0,scale:1.2,top:"50%",translateX:"-50%",translateY:"-50%"}),[f]),g=d.useMemo(()=>({width:u}),[u]);return o.jsx("div",{className:"px-xs order-last col-span-6 flex flex-col items-center justify-center sm:order-[unset] sm:px-0",children:o.jsxs("div",{className:"gap-md flex w-full flex-col items-center",children:[o.jsx(F,{variant:"tinyMono",color:"light",children:i}),o.jsxs("div",{className:"relative flex w-full flex-1 items-center",children:[o.jsx("div",{className:"bg-inverse/10 relative h-0.5 w-full overflow-hidden rounded-full",children:o.jsx(ve.div,{className:B("!bg-inverse/50 absolute inset-y-0 left-0 transition-colors duration-500"),initial:f,animate:g,transition:m})}),o.jsx(XOt,{variant:"raised",className:"absolute left-0 flex aspect-square w-6 items-center justify-center",initial:h,animate:p,transition:m,children:o.jsx(de,{className:B("text-quiet transition-colors duration-500",e&&e>0&&!r&&"!text-super",r&&"!text-negative",s&&"!text-quiet"),icon:qk})})]})]})})});GTe.displayName="FlightProgress";const qTe=I.memo(({departureTime:e,arrivalTime:t,actualDepartureTime:n,actualArrivalTime:r,estimatedDepartureTime:s,estimatedArrivalTime:a,flightMetadata:i,delayed:l=!1})=>{const{cancelled:c,departureAirport:u,arrivalAirport:f,departureTimezone:m,arrivalTimezone:p,terminal:h,gate:g,arrivalTerminal:y,arrivalGate:x,progressPercent:v}=i;return o.jsxs(Wt,{className:"p-md gap-md grid w-full grid-cols-2 overflow-hidden shadow-sm sm:grid-cols-12",children:[o.jsx(_L,{variant:"departure",airport:u,time:e,actualTime:n,estimatedTime:s,timezone:m,terminal:h,gate:g,delayed:l,cancelled:c}),o.jsx(GTe,{departureTime:e,arrivalTime:t,progress:v,delayed:l,cancelled:c}),o.jsx(_L,{variant:"arrival",airport:f,time:t,actualTime:r,estimatedTime:a,timezone:p,terminal:y,gate:x,delayed:l,cancelled:c})]})});qTe.displayName="FlightStatusCard";const KTe=I.memo(({flights:e,selectedFlight:t,setSelectedFlight:n})=>{const{locale:r,$t:s}=Z(),{isMobileStyle:a}=xe(),i=d.useCallback(u=>{const f=new Date(u.departureTime),m=pM(f,u.departureTimezone);let p;if(pB(m)?p=s({id:"zWgbGgjUUg",defaultMessage:"Today"}):ndt(m)?p=s({id:"6dIxDP1C8c",defaultMessage:"Yesterday"}):tdt(m)?p=s({id:"MtrTNyxuSU",defaultMessage:"Tomorrow"}):p=f.toLocaleDateString(r,{weekday:"short",month:"short",day:"numeric"}),e.filter(g=>{if(g.departureTimezone!==u.departureTimezone)return!1;const y=pM(new Date(g.departureTime),g.departureTimezone);return Kd(y).getTime()===Kd(m).getTime()}).length>1){const g=f.toLocaleTimeString(r,{hour:"numeric",minute:"2-digit"});p=s({id:"Fr3TxQz4BU",defaultMessage:"{dateString} - {timeString}"},{dateString:p,timeString:g})}return p},[r,e,s]),l=d.useMemo(()=>e.map(u=>({type:"default",text:i(u),value:u.flightAwareId,onClick:()=>n(u),active:u.flightAwareId===t?.flightAwareId})),[e,i,n,t?.flightAwareId]),c=d.useMemo(()=>t?i(t):"",[t,i]);return o.jsx("div",{children:o.jsx(nn,{items:l,isMobileStyle:a,children:o.jsx(me,{variant:"border",text:c,chevron:!0,pill:!0})})})});KTe.displayName="FlightStatusSwitcher";const YTe=I.memo(({data:e})=>{const t=d.useMemo(()=>QOt(e.data.flights),[e.data.flights]),n=d.useMemo(()=>{const l=new Date().getTime();if(t.length===0)return 0;let c=0,u=1/0;return t.forEach((f,m)=>{f.forEach(p=>{const h=new Date(p.departureTime).getTime(),g=Math.abs(h-l);g<u&&(u=g,c=m)})}),c},[t]),[r,s]=d.useState(n),a=t[r],i=d.useMemo(()=>{if(t.length<2)return null;const l=t.map(c=>c[0]).filter(c=>!!c);return o.jsx(KTe,{flights:l,selectedFlight:a?.[0],setSelectedFlight:c=>{const u=t.findIndex(f=>f[0]?.flightAwareId===c?.flightAwareId);u!==-1&&s(u)}})},[t,a]);return!a||a.length===0?null:o.jsx(yr,{"data-testid":"flight-status-widget",className:"w-full",variant:"noChrome",children:o.jsx("div",{className:"gap-md flex flex-col",children:a.map((l,c)=>{const u=KOt(l),f=YOt(u),m=c===0?i:null;return o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(HTe,{flightMetadata:l,departureTime:u.departureTime,arrivalTime:u.arrivalTime,actualDepartureTime:u.actualDepartureTime,actualArrivalTime:u.actualArrivalTime,estimatedDepartureTime:u.estimatedDepartureTime,estimatedArrivalTime:u.estimatedArrivalTime,delayed:f,rightContent:m}),o.jsx(qTe,{departureTime:u.departureTime,arrivalTime:u.arrivalTime,actualDepartureTime:u.actualDepartureTime,actualArrivalTime:u.actualArrivalTime,estimatedDepartureTime:u.estimatedDepartureTime,estimatedArrivalTime:u.estimatedArrivalTime,flightMetadata:l,delayed:f})]},l.flightAwareId)})})})});YTe.displayName="FlightStatusWidget";const QTe=I.memo(({data:{title:e,text:t,image_url:n,canonical_pages:r}})=>o.jsx(qe,{href:r[0]?.url_web,className:"transition-transform duration-300 hover:scale-[1.025]",children:o.jsxs(Wt,{shadow:!0,className:"p-md flex items-center",children:[o.jsxs(z,{className:"gap-md flex flex-1 items-center md:items-start",children:[n&&o.jsx("img",{alt:"",className:"max-h-[65px] rounded",src:n}),o.jsxs("div",{className:"mr-sm w-full",children:[e&&o.jsx(F,{variant:"baseSemi",children:e}),t&&o.jsx(F,{variant:"small",color:"light",children:t})]})]}),o.jsx(Xn,{className:"size-5"})]})}));QTe.displayName="GenericFallbackWidget";const ic={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},XTe=Object.create(null);for(const e in ic)Object.hasOwn(ic,e)&&(XTe[ic[e]]=e);const ms={to:{},get:{}};ms.get=function(e){const t=e.slice(0,3).toLowerCase();let n,r;switch(t){case"hsl":{n=ms.get.hsl(e),r="hsl";break}case"hwb":{n=ms.get.hwb(e),r="hwb";break}default:{n=ms.get.rgb(e),r="rgb";break}}return n?{model:r,value:n}:null};ms.get.rgb=function(e){if(!e)return null;const t=/^#([a-f\d]{3,4})$/i,n=/^#([a-f\d]{6})([a-f\d]{2})?$/i,r=/^rgba?\(\s*([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)(?=[\s,])\s*(?:,\s*)?([+-]?\d+)\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,s=/^rgba?\(\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?[\d.]+)(%?)\s*)?\)$/,a=/^(\w+)$/;let i=[0,0,0,1],l,c,u;if(l=e.match(n)){for(u=l[2],l=l[1],c=0;c<3;c++){const f=c*2;i[c]=Number.parseInt(l.slice(f,f+2),16)}u&&(i[3]=Number.parseInt(u,16)/255)}else if(l=e.match(t)){for(l=l[1],u=l[3],c=0;c<3;c++)i[c]=Number.parseInt(l[c]+l[c],16);u&&(i[3]=Number.parseInt(u+u,16)/255)}else if(l=e.match(r)){for(c=0;c<3;c++)i[c]=Number.parseInt(l[c+1],10);l[4]&&(i[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else if(l=e.match(s)){for(c=0;c<3;c++)i[c]=Math.round(Number.parseFloat(l[c+1])*2.55);l[4]&&(i[3]=l[5]?Number.parseFloat(l[4])*.01:Number.parseFloat(l[4]))}else return(l=e.match(a))?l[1]==="transparent"?[0,0,0,0]:Object.hasOwn(ic,l[1])?(i=ic[l[1]],i[3]=1,i):null:null;for(c=0;c<3;c++)i[c]=Dd(i[c],0,255);return i[3]=Dd(i[3],0,1),i};ms.get.hsl=function(e){if(!e)return null;const t=/^hsla?\(\s*([+-]?(?:\d{0,3}\.)?\d+)(?:deg)?\s*,?\s*([+-]?[\d.]+)%\s*,?\s*([+-]?[\d.]+)%\s*(?:[,|/]\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=Dd(Number.parseFloat(n[2]),0,100),i=Dd(Number.parseFloat(n[3]),0,100),l=Dd(Number.isNaN(r)?1:r,0,1);return[s,a,i,l]}return null};ms.get.hwb=function(e){if(!e)return null;const t=/^hwb\(\s*([+-]?\d{0,3}(?:\.\d+)?)(?:deg)?\s*,\s*([+-]?[\d.]+)%\s*,\s*([+-]?[\d.]+)%\s*(?:,\s*([+-]?(?=\.\d|\d)(?:0|[1-9]\d*)?(?:\.\d*)?(?:[eE][+-]?\d+)?)\s*)?\)$/,n=e.match(t);if(n){const r=Number.parseFloat(n[4]),s=(Number.parseFloat(n[1])%360+360)%360,a=Dd(Number.parseFloat(n[2]),0,100),i=Dd(Number.parseFloat(n[3]),0,100),l=Dd(Number.isNaN(r)?1:r,0,1);return[s,a,i,l]}return null};ms.to.hex=function(...e){return"#"+SS(e[0])+SS(e[1])+SS(e[2])+(e[3]<1?SS(Math.round(e[3]*255)):"")};ms.to.rgb=function(...e){return e.length<4||e[3]===1?"rgb("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+")":"rgba("+Math.round(e[0])+", "+Math.round(e[1])+", "+Math.round(e[2])+", "+e[3]+")"};ms.to.rgb.percent=function(...e){const t=Math.round(e[0]/255*100),n=Math.round(e[1]/255*100),r=Math.round(e[2]/255*100);return e.length<4||e[3]===1?"rgb("+t+"%, "+n+"%, "+r+"%)":"rgba("+t+"%, "+n+"%, "+r+"%, "+e[3]+")"};ms.to.hsl=function(...e){return e.length<4||e[3]===1?"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)":"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+e[3]+")"};ms.to.hwb=function(...e){let t="";return e.length>=4&&e[3]!==1&&(t=", "+e[3]),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+t+")"};ms.to.keyword=function(...e){return XTe[e.slice(0,3)]};function Dd(e,t,n){return Math.min(Math.max(t,e),n)}function SS(e){const t=Math.round(e).toString(16).toUpperCase();return t.length<2?"0"+t:t}const ZTe={};for(const e of Object.keys(ic))ZTe[ic[e]]=e;const st={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},oklab:{channels:3,labels:["okl","oka","okb"]},lch:{channels:3,labels:"lch"},oklch:{channels:3,labels:["okl","okc","okh"]},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}},xu=(6/29)**3;function wg(e){const t=e>.0031308?1.055*e**.4166666666666667-.055:e*12.92;return Math.min(Math.max(0,t),1)}function Cg(e){return e>.04045?((e+.055)/1.055)**2.4:e/12.92}for(const e of Object.keys(st)){if(!("channels"in st[e]))throw new Error("missing channels property: "+e);if(!("labels"in st[e]))throw new Error("missing channel labels property: "+e);if(st[e].labels.length!==st[e].channels)throw new Error("channel and label counts mismatch: "+e);const{channels:t,labels:n}=st[e];delete st[e].channels,delete st[e].labels,Object.defineProperty(st[e],"channels",{value:t}),Object.defineProperty(st[e],"labels",{value:n})}st.rgb.hsl=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(t,n,r),a=Math.max(t,n,r),i=a-s;let l,c;switch(a){case s:{l=0;break}case t:{l=(n-r)/i;break}case n:{l=2+(r-t)/i;break}case r:{l=4+(t-n)/i;break}}l=Math.min(l*60,360),l<0&&(l+=360);const u=(s+a)/2;return a===s?c=0:u<=.5?c=i/(a+s):c=i/(2-a-s),[l,c*100,u*100]};st.rgb.hsv=function(e){let t,n,r,s,a;const i=e[0]/255,l=e[1]/255,c=e[2]/255,u=Math.max(i,l,c),f=u-Math.min(i,l,c),m=function(p){return(u-p)/6/f+1/2};if(f===0)s=0,a=0;else{switch(a=f/u,t=m(i),n=m(l),r=m(c),u){case i:{s=r-n;break}case l:{s=1/3+t-r;break}case c:{s=2/3+n-t;break}}s<0?s+=1:s>1&&(s-=1)}return[s*360,a*100,u*100]};st.rgb.hwb=function(e){const t=e[0],n=e[1];let r=e[2];const s=st.rgb.hsl(e)[0],a=1/255*Math.min(t,Math.min(n,r));return r=1-1/255*Math.max(t,Math.max(n,r)),[s,a*100,r*100]};st.rgb.oklab=function(e){const t=Cg(e[0]/255),n=Cg(e[1]/255),r=Cg(e[2]/255),s=Math.cbrt(.4122214708*t+.5363325363*n+.0514459929*r),a=Math.cbrt(.2119034982*t+.6806995451*n+.1073969566*r),i=Math.cbrt(.0883024619*t+.2817188376*n+.6299787005*r),l=.2104542553*s+.793617785*a-.0040720468*i,c=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[l*100,c*100,u*100]};st.rgb.cmyk=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.min(1-t,1-n,1-r),a=(1-t-s)/(1-s)||0,i=(1-n-s)/(1-s)||0,l=(1-r-s)/(1-s)||0;return[a*100,i*100,l*100,s*100]};function ZOt(e,t){return(e[0]-t[0])**2+(e[1]-t[1])**2+(e[2]-t[2])**2}st.rgb.keyword=function(e){const t=ZTe[e];if(t)return t;let n=Number.POSITIVE_INFINITY,r;for(const s of Object.keys(ic)){const a=ic[s],i=ZOt(e,a);i<n&&(n=i,r=s)}return r};st.keyword.rgb=function(e){return ic[e]};st.rgb.xyz=function(e){const t=Cg(e[0]/255),n=Cg(e[1]/255),r=Cg(e[2]/255),s=t*.4124564+n*.3575761+r*.1804375,a=t*.2126729+n*.7151522+r*.072175,i=t*.0193339+n*.119192+r*.9503041;return[s*100,a*100,i*100]};st.rgb.lab=function(e){const t=st.rgb.xyz(e);let n=t[0],r=t[1],s=t[2];n/=95.047,r/=100,s/=108.883,n=n>xu?n**(1/3):7.787*n+16/116,r=r>xu?r**(1/3):7.787*r+16/116,s=s>xu?s**(1/3):7.787*s+16/116;const a=116*r-16,i=500*(n-r),l=200*(r-s);return[a,i,l]};st.hsl.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;let s,a;if(n===0)return a=r*255,[a,a,a];const i=r<.5?r*(1+n):r+n-r*n,l=2*r-i,c=[0,0,0];for(let u=0;u<3;u++)s=t+1/3*-(u-1),s<0&&s++,s>1&&s--,6*s<1?a=l+(i-l)*6*s:2*s<1?a=i:3*s<2?a=l+(i-l)*(2/3-s)*6:a=l,c[u]=a*255;return c};st.hsl.hsv=function(e){const t=e[0];let n=e[1]/100,r=e[2]/100,s=n;const a=Math.max(r,.01);r*=2,n*=r<=1?r:2-r,s*=a<=1?a:2-a;const i=(r+n)/2,l=r===0?2*s/(a+s):2*n/(r+n);return[t,l*100,i*100]};st.hsv.rgb=function(e){const t=e[0]/60,n=e[1]/100;let r=e[2]/100;const s=Math.floor(t)%6,a=t-Math.floor(t),i=255*r*(1-n),l=255*r*(1-n*a),c=255*r*(1-n*(1-a));switch(r*=255,s){case 0:return[r,c,i];case 1:return[l,r,i];case 2:return[i,r,c];case 3:return[i,l,r];case 4:return[c,i,r];case 5:return[r,i,l]}};st.hsv.hsl=function(e){const t=e[0],n=e[1]/100,r=e[2]/100,s=Math.max(r,.01);let a,i;i=(2-n)*r;const l=(2-n)*s;return a=n*s,a/=l<=1?l:2-l,a=a||0,i/=2,[t,a*100,i*100]};st.hwb.rgb=function(e){const t=e[0]/360;let n=e[1]/100,r=e[2]/100;const s=n+r;let a;s>1&&(n/=s,r/=s);const i=Math.floor(6*t),l=1-r;a=6*t-i,i&1&&(a=1-a);const c=n+a*(l-n);let u,f,m;switch(i){default:case 6:case 0:{u=l,f=c,m=n;break}case 1:{u=c,f=l,m=n;break}case 2:{u=n,f=l,m=c;break}case 3:{u=n,f=c,m=l;break}case 4:{u=c,f=n,m=l;break}case 5:{u=l,f=n,m=c;break}}return[u*255,f*255,m*255]};st.cmyk.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=e[3]/100,a=1-Math.min(1,t*(1-s)+s),i=1-Math.min(1,n*(1-s)+s),l=1-Math.min(1,r*(1-s)+s);return[a*255,i*255,l*255]};st.xyz.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100;let s,a,i;return s=t*3.2404542+n*-1.5371385+r*-.4985314,a=t*-.969266+n*1.8760108+r*.041556,i=t*.0556434+n*-.2040259+r*1.0572252,s=wg(s),a=wg(a),i=wg(i),[s*255,a*255,i*255]};st.xyz.lab=function(e){let t=e[0],n=e[1],r=e[2];t/=95.047,n/=100,r/=108.883,t=t>xu?t**(1/3):7.787*t+16/116,n=n>xu?n**(1/3):7.787*n+16/116,r=r>xu?r**(1/3):7.787*r+16/116;const s=116*n-16,a=500*(t-n),i=200*(n-r);return[s,a,i]};st.xyz.oklab=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=Math.cbrt(.8189330101*t+.3618667424*n-.1288597137*r),a=Math.cbrt(.0329845436*t+.9293118715*n+.0361456387*r),i=Math.cbrt(.0482003018*t+.2643662691*n+.633851707*r),l=.2104542553*s+.793617785*a-.0040720468*i,c=1.9779984951*s-2.428592205*a+.4505937099*i,u=.0259040371*s+.7827717662*a-.808675766*i;return[l*100,c*100,u*100]};st.oklab.oklch=function(e){return st.lab.lch(e)};st.oklab.xyz=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(.999999998*t+.396337792*n+.215803758*r)**3,a=(1.000000008*t-.105561342*n-.063854175*r)**3,i=(1.000000055*t-.089484182*n-1.291485538*r)**3,l=1.227013851*s-.55779998*a+.281256149*i,c=-.040580178*s+1.11225687*a-.071676679*i,u=-.076381285*s-.421481978*a+1.58616322*i;return[l*100,c*100,u*100]};st.oklab.rgb=function(e){const t=e[0]/100,n=e[1]/100,r=e[2]/100,s=(t+.3963377774*n+.2158037573*r)**3,a=(t-.1055613458*n-.0638541728*r)**3,i=(t-.0894841775*n-1.291485548*r)**3,l=wg(4.0767416621*s-3.3077115913*a+.2309699292*i),c=wg(-1.2684380046*s+2.6097574011*a-.3413193965*i),u=wg(-.0041960863*s-.7034186147*a+1.707614701*i);return[l*255,c*255,u*255]};st.oklch.oklab=function(e){return st.lch.lab(e)};st.lab.xyz=function(e){const t=e[0],n=e[1],r=e[2];let s,a,i;a=(t+16)/116,s=n/500+a,i=a-r/200;const l=a**3,c=s**3,u=i**3;return a=l>xu?l:(a-16/116)/7.787,s=c>xu?c:(s-16/116)/7.787,i=u>xu?u:(i-16/116)/7.787,s*=95.047,a*=100,i*=108.883,[s,a,i]};st.lab.lch=function(e){const t=e[0],n=e[1],r=e[2];let s;s=Math.atan2(r,n)*360/2/Math.PI,s<0&&(s+=360);const i=Math.sqrt(n*n+r*r);return[t,i,s]};st.lch.lab=function(e){const t=e[0],n=e[1],s=e[2]/360*2*Math.PI,a=n*Math.cos(s),i=n*Math.sin(s);return[t,a,i]};st.rgb.ansi16=function(e,t=null){const[n,r,s]=e;let a=t===null?st.rgb.hsv(e)[2]:t;if(a=Math.round(a/50),a===0)return 30;let i=30+(Math.round(s/255)<<2|Math.round(r/255)<<1|Math.round(n/255));return a===2&&(i+=60),i};st.hsv.ansi16=function(e){return st.rgb.ansi16(st.hsv.rgb(e),e[2])};st.rgb.ansi256=function(e){const t=e[0],n=e[1],r=e[2];return t>>4===n>>4&&n>>4===r>>4?t<8?16:t>248?231:Math.round((t-8)/247*24)+232:16+36*Math.round(t/255*5)+6*Math.round(n/255*5)+Math.round(r/255*5)};st.ansi16.rgb=function(e){e=e[0];let t=e%10;if(t===0||t===7)return e>50&&(t+=3.5),t=t/10.5*255,[t,t,t];const n=(Math.trunc(e>50)+1)*.5,r=(t&1)*n*255,s=(t>>1&1)*n*255,a=(t>>2&1)*n*255;return[r,s,a]};st.ansi256.rgb=function(e){if(e=e[0],e>=232){const a=(e-232)*10+8;return[a,a,a]}e-=16;let t;const n=Math.floor(e/36)/5*255,r=Math.floor((t=e%36)/6)/5*255,s=t%6/5*255;return[n,r,s]};st.rgb.hex=function(e){const n=(((Math.round(e[0])&255)<<16)+((Math.round(e[1])&255)<<8)+(Math.round(e[2])&255)).toString(16).toUpperCase();return"000000".slice(n.length)+n};st.hex.rgb=function(e){const t=e.toString(16).match(/[a-f\d]{6}|[a-f\d]{3}/i);if(!t)return[0,0,0];let n=t[0];t[0].length===3&&(n=[...n].map(l=>l+l).join(""));const r=Number.parseInt(n,16),s=r>>16&255,a=r>>8&255,i=r&255;return[s,a,i]};st.rgb.hcg=function(e){const t=e[0]/255,n=e[1]/255,r=e[2]/255,s=Math.max(Math.max(t,n),r),a=Math.min(Math.min(t,n),r),i=s-a;let l;const c=i<1?a/(1-i):0;return i<=0?l=0:s===t?l=(n-r)/i%6:s===n?l=2+(r-t)/i:l=4+(t-n)/i,l/=6,l%=1,[l*360,i*100,c*100]};st.hsl.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=n<.5?2*t*n:2*t*(1-n);let s=0;return r<1&&(s=(n-.5*r)/(1-r)),[e[0],r*100,s*100]};st.hsv.hcg=function(e){const t=e[1]/100,n=e[2]/100,r=t*n;let s=0;return r<1&&(s=(n-r)/(1-r)),[e[0],r*100,s*100]};st.hcg.rgb=function(e){const t=e[0]/360,n=e[1]/100,r=e[2]/100;if(n===0)return[r*255,r*255,r*255];const s=[0,0,0],a=t%1*6,i=a%1,l=1-i;let c=0;switch(Math.floor(a)){case 0:{s[0]=1,s[1]=i,s[2]=0;break}case 1:{s[0]=l,s[1]=1,s[2]=0;break}case 2:{s[0]=0,s[1]=1,s[2]=i;break}case 3:{s[0]=0,s[1]=l,s[2]=1;break}case 4:{s[0]=i,s[1]=0,s[2]=1;break}default:s[0]=1,s[1]=0,s[2]=l}return c=(1-n)*r,[(n*s[0]+c)*255,(n*s[1]+c)*255,(n*s[2]+c)*255]};st.hcg.hsv=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);let s=0;return r>0&&(s=t/r),[e[0],s*100,r*100]};st.hcg.hsl=function(e){const t=e[1]/100,r=e[2]/100*(1-t)+.5*t;let s=0;return r>0&&r<.5?s=t/(2*r):r>=.5&&r<1&&(s=t/(2*(1-r))),[e[0],s*100,r*100]};st.hcg.hwb=function(e){const t=e[1]/100,n=e[2]/100,r=t+n*(1-t);return[e[0],(r-t)*100,(1-r)*100]};st.hwb.hcg=function(e){const t=e[1]/100,r=1-e[2]/100,s=r-t;let a=0;return s<1&&(a=(r-s)/(1-s)),[e[0],s*100,a*100]};st.apple.rgb=function(e){return[e[0]/65535*255,e[1]/65535*255,e[2]/65535*255]};st.rgb.apple=function(e){return[e[0]/255*65535,e[1]/255*65535,e[2]/255*65535]};st.gray.rgb=function(e){return[e[0]/100*255,e[0]/100*255,e[0]/100*255]};st.gray.hsl=function(e){return[0,0,e[0]]};st.gray.hsv=st.gray.hsl;st.gray.hwb=function(e){return[0,100,e[0]]};st.gray.cmyk=function(e){return[0,0,0,e[0]]};st.gray.lab=function(e){return[e[0],0,0]};st.gray.hex=function(e){const t=Math.round(e[0]/100*255)&255,r=((t<<16)+(t<<8)+t).toString(16).toUpperCase();return"000000".slice(r.length)+r};st.rgb.gray=function(e){return[(e[0]+e[1]+e[2])/3/255*100]};function JOt(){const e={},t=Object.keys(st);for(let{length:n}=t,r=0;r<n;r++)e[t[r]]={distance:-1,parent:null};return e}function eDt(e){const t=JOt(),n=[e];for(t[e].distance=0;n.length>0;){const r=n.pop(),s=Object.keys(st[r]);for(let{length:a}=s,i=0;i<a;i++){const l=s[i],c=t[l];c.distance===-1&&(c.distance=t[r].distance+1,c.parent=r,n.unshift(l))}}return t}function tDt(e,t){return function(n){return t(e(n))}}function nDt(e,t){const n=[t[e].parent,e];let r=st[t[e].parent][e],s=t[e].parent;for(;t[s].parent;)n.unshift(t[s].parent),r=tDt(st[t[s].parent][s],r),s=t[s].parent;return r.conversion=n,r}function rDt(e){const t=eDt(e),n={},r=Object.keys(t);for(let{length:s}=r,a=0;a<s;a++){const i=r[a];t[i].parent!==null&&(n[i]=nDt(i,t))}return n}const Ms={},sDt=Object.keys(st);function aDt(e){const t=function(...n){const r=n[0];return r==null?r:(r.length>1&&(n=r),e(n))};return"conversion"in e&&(t.conversion=e.conversion),t}function oDt(e){const t=function(...n){const r=n[0];if(r==null)return r;r.length>1&&(n=r);const s=e(n);if(typeof s=="object")for(let{length:a}=s,i=0;i<a;i++)s[i]=Math.round(s[i]);return s};return"conversion"in e&&(t.conversion=e.conversion),t}for(const e of sDt){Ms[e]={},Object.defineProperty(Ms[e],"channels",{value:st[e].channels}),Object.defineProperty(Ms[e],"labels",{value:st[e].labels});const t=rDt(e),n=Object.keys(t);for(const r of n){const s=t[r];Ms[e][r]=oDt(s),Ms[e][r].raw=aDt(s)}}const JTe=["keyword","gray","hex"],wL={};for(const e of Object.keys(Ms))wL[[...Ms[e].labels].sort().join("")]=e;const CL={};function cr(e,t){if(!(this instanceof cr))return new cr(e,t);if(t&&t in JTe&&(t=null),t&&!(t in Ms))throw new Error("Unknown model: "+t);let n,r;if(e==null)this.model="rgb",this.color=[0,0,0],this.valpha=1;else if(e instanceof cr)this.model=e.model,this.color=[...e.color],this.valpha=e.valpha;else if(typeof e=="string"){const s=ms.get(e);if(s===null)throw new Error("Unable to parse color from string: "+e);this.model=s.model,r=Ms[this.model].channels,this.color=s.value.slice(0,r),this.valpha=typeof s.value[r]=="number"?s.value[r]:1}else if(e.length>0){this.model=t||"rgb",r=Ms[this.model].channels;const s=Array.prototype.slice.call(e,0,r);this.color=SL(s,r),this.valpha=typeof e[r]=="number"?e[r]:1}else if(typeof e=="number")this.model="rgb",this.color=[e>>16&255,e>>8&255,e&255],this.valpha=1;else{this.valpha=1;const s=Object.keys(e);"alpha"in e&&(s.splice(s.indexOf("alpha"),1),this.valpha=typeof e.alpha=="number"?e.alpha:0);const a=s.sort().join("");if(!(a in wL))throw new Error("Unable to parse color from object: "+JSON.stringify(e));this.model=wL[a];const{labels:i}=Ms[this.model],l=[];for(n=0;n<i.length;n++)l.push(e[i[n]]);this.color=SL(l)}if(CL[this.model])for(r=Ms[this.model].channels,n=0;n<r;n++){const s=CL[this.model][n];s&&(this.color[n]=s(this.color[n]))}this.valpha=Math.max(0,Math.min(1,this.valpha)),Object.freeze&&Object.freeze(this)}cr.prototype={toString(){return this.string()},toJSON(){return this[this.model]()},string(e){let t=this.model in ms.to?this:this.rgb();t=t.round(typeof e=="number"?e:1);const n=t.valpha===1?t.color:[...t.color,this.valpha];return ms.to[t.model](...n)},percentString(e){const t=this.rgb().round(typeof e=="number"?e:1),n=t.valpha===1?t.color:[...t.color,this.valpha];return ms.to.rgb.percent(...n)},array(){return this.valpha===1?[...this.color]:[...this.color,this.valpha]},object(){const e={},{channels:t}=Ms[this.model],{labels:n}=Ms[this.model];for(let r=0;r<t;r++)e[n[r]]=this.color[r];return this.valpha!==1&&(e.alpha=this.valpha),e},unitArray(){const e=this.rgb().color;return e[0]/=255,e[1]/=255,e[2]/=255,this.valpha!==1&&e.push(this.valpha),e},unitObject(){const e=this.rgb().object();return e.r/=255,e.g/=255,e.b/=255,this.valpha!==1&&(e.alpha=this.valpha),e},round(e){return e=Math.max(e||0,0),new cr([...this.color.map(lDt(e)),this.valpha],this.model)},alpha(e){return e!==void 0?new cr([...this.color,Math.max(0,Math.min(1,e))],this.model):this.valpha},red:Ar("rgb",0,as(255)),green:Ar("rgb",1,as(255)),blue:Ar("rgb",2,as(255)),hue:Ar(["hsl","hsv","hsl","hwb","hcg"],0,e=>(e%360+360)%360),saturationl:Ar("hsl",1,as(100)),lightness:Ar("hsl",2,as(100)),saturationv:Ar("hsv",1,as(100)),value:Ar("hsv",2,as(100)),chroma:Ar("hcg",1,as(100)),gray:Ar("hcg",2,as(100)),white:Ar("hwb",1,as(100)),wblack:Ar("hwb",2,as(100)),cyan:Ar("cmyk",0,as(100)),magenta:Ar("cmyk",1,as(100)),yellow:Ar("cmyk",2,as(100)),black:Ar("cmyk",3,as(100)),x:Ar("xyz",0,as(95.047)),y:Ar("xyz",1,as(100)),z:Ar("xyz",2,as(108.833)),l:Ar("lab",0,as(100)),a:Ar("lab",1),b:Ar("lab",2),keyword(e){return e!==void 0?new cr(e):Ms[this.model].keyword(this.color)},hex(e){return e!==void 0?new cr(e):ms.to.hex(...this.rgb().round().color)},hexa(e){if(e!==void 0)return new cr(e);const t=this.rgb().round().color;let n=Math.round(this.valpha*255).toString(16).toUpperCase();return n.length===1&&(n="0"+n),ms.to.hex(...t)+n},rgbNumber(){const e=this.rgb().color;return(e[0]&255)<<16|(e[1]&255)<<8|e[2]&255},luminosity(){const e=this.rgb().color,t=[];for(const[n,r]of e.entries()){const s=r/255;t[n]=s<=.04045?s/12.92:((s+.055)/1.055)**2.4}return .2126*t[0]+.7152*t[1]+.0722*t[2]},contrast(e){const t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level(e){const t=this.contrast(e);return t>=7?"AAA":t>=4.5?"AA":""},isDark(){const e=this.rgb().color;return(e[0]*2126+e[1]*7152+e[2]*722)/1e4<128},isLight(){return!this.isDark()},negate(){const e=this.rgb();for(let t=0;t<3;t++)e.color[t]=255-e.color[t];return e},lighten(e){const t=this.hsl();return t.color[2]+=t.color[2]*e,t},darken(e){const t=this.hsl();return t.color[2]-=t.color[2]*e,t},saturate(e){const t=this.hsl();return t.color[1]+=t.color[1]*e,t},desaturate(e){const t=this.hsl();return t.color[1]-=t.color[1]*e,t},whiten(e){const t=this.hwb();return t.color[1]+=t.color[1]*e,t},blacken(e){const t=this.hwb();return t.color[2]+=t.color[2]*e,t},grayscale(){const e=this.rgb().color,t=e[0]*.3+e[1]*.59+e[2]*.11;return cr.rgb(t,t,t)},fade(e){return this.alpha(this.valpha-this.valpha*e)},opaquer(e){return this.alpha(this.valpha+this.valpha*e)},rotate(e){const t=this.hsl();let n=t.color[0];return n=(n+e)%360,n=n<0?360+n:n,t.color[0]=n,t},mix(e,t){if(!e||!e.rgb)throw new Error('Argument to "mix" was not a Color instance, but rather an instance of '+typeof e);const n=e.rgb(),r=this.rgb(),s=t===void 0?.5:t,a=2*s-1,i=n.alpha()-r.alpha(),l=((a*i===-1?a:(a+i)/(1+a*i))+1)/2,c=1-l;return cr.rgb(l*n.red()+c*r.red(),l*n.green()+c*r.green(),l*n.blue()+c*r.blue(),n.alpha()*s+r.alpha()*(1-s))}};for(const e of Object.keys(Ms)){if(JTe.includes(e))continue;const{channels:t}=Ms[e];cr.prototype[e]=function(...n){return this.model===e?new cr(this):n.length>0?new cr(n,e):new cr([...cDt(Ms[this.model][e].raw(this.color)),this.valpha],e)},cr[e]=function(...n){let r=n[0];return typeof r=="number"&&(r=SL(n,t)),new cr(r,e)}}function iDt(e,t){return Number(e.toFixed(t))}function lDt(e){return function(t){return iDt(t,e)}}function Ar(e,t,n){e=Array.isArray(e)?e:[e];for(const r of e)(CL[r]||=[])[t]=n;return e=e[0],function(r){let s;return r!==void 0?(n&&(r=n(r)),s=this[e](),s.color[t]=r,s):(s=this[e]().color[t],n&&(s=n(s)),s)}}function as(e){return function(t){return Math.max(0,Math.min(e,t))}}function cDt(e){return Array.isArray(e)?e:[e]}function SL(e,t){for(let n=0;n<t;n++)typeof e[n]!="number"&&(e[n]=0);return e}const Dp=I.memo(({size:e="default",className:t,includeDot:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=xe();return o.jsx("div",{className:B("flex shrink-0 items-center justify-center",t),children:o.jsxs(F,{variant:e==="tiny"||s?"micro":"tiny",color:"super",className:B("bg-superBG pt-three flex shrink-0 items-center rounded-full py-0.5 tracking-wider",{"px-2.5":e==="default","pl-2":e==="default"&&n,"px-2":e==="small","px-1.5":e==="tiny"}),children:[n&&o.jsxs("span",{className:"grid",children:[o.jsx("span",{className:"bg-super mr-1 size-1.5 rounded-full",style:{gridArea:"1/-1"}}),o.jsx("span",{className:"bg-super mr-1 size-1.5 animate-ping rounded-full",style:{gridArea:"1/-1"}})]}),r({defaultMessage:"Live",id:"Dn82ALx/+V"}).toUpperCase()]})})});Dp.displayName="LiveIndicator";const uDt=["West First Round","East First Round","Western Conference Semifinals","Eastern Conference Semifinals","Western Conference Finals","Eastern Conference Finals","NBA Finals"],e4e=e=>uDt.includes(e);function dDt(e){return e!==null&&typeof e=="object"&&"is_bye_event"in e&&typeof e.is_bye_event=="boolean"}function t4e(e,t){return t.find(n=>String(n.teamId)===String(e))}const fDt=e=>{switch(e){case"nba":case"wnba":case"ncaam":case"ncaaw":case"mlb":case"atp":case"wta":case"championsleague":case"laliga":case"ligue1":case"epl":case"bundesliga":return"/static/images/sports/nba/logos/nba-logo-generic.png";case"nfl":return"/static/images/sports/nfl/logos/nfl-logo-generic.png";case"ipl":case"cricket":case"icc":return"/static/images/sports/cricket/logos/cricket-logo-generic.png";default:return""}},mDt="#64645F";function Sy(e,t,n){const r={teamId:e,logo:fDt(n),color:mDt};return t4e(e,t)??r}function pDt(e,t){return t.find(n=>n.teamId===e)}function Ew(e){return[...e].sort((t,n)=>n.teamLocationType.teamLocationTypeId-t.teamLocationType.teamLocationTypeId)}function dk(e){if(!e||e.wins+e.losses+e.ties===0)return"";const{wins:t,losses:n,ties:r}=e;return r?`${t}-${n}-${r}`:`${t}-${n}`}function hDt(e,t){return t.winProbabilities?.find(n=>n.teamId===e)}function gDt(e,t,n,r){const s=Sy(e,n,r),a=pDt(e,t),i=t.find(c=>c.teamId===e)?.seed,l=yDt(r);return{teamId:a.teamId,logo:s.logo,color:s.color,nickname:l?a.location:a.nickname,abbreviation:a.abbreviation,record:a.record,winner:a.isWinner,score:a.score,seed:i}}const yDt=e=>e==="ncaam"||e==="ncaaw";function xDt(e,t,n,r){const s=Sy(e,n,r),a=t.find(i=>i.id===e);return a?{teamId:a.id,logo:s.logo,color:s.color,nickname:a.title??"",abbreviation:a.abbreviation??""}:{teamId:e,logo:s.logo,color:s.color,nickname:"",abbreviation:""}}function vDt(e,t,n){return Ew(e)?.map(r=>gDt(r.teamId,e,t,n))}function Wcn(e,t,n){return e.map(r=>xDt(r.id,e,t,n))}function Hcn(e,t){for(const n of t)for(const r of n.divisions)for(const s of r.teams)if(s.teamId===e)return{conference:n.abbreviation,division:r.name};return null}const zcn=e=>e?"nickname"in e?e.nickname:e.title:null,Gcn=e=>e?"teamId"in e?e.teamId:e.id:null,qcn=e=>"score"in e?e.score:e.sub_text&&e.text?`${e.text} ${e.sub_text}`:e.text,bDt=e=>"isWinner"in e?e.isWinner:e.won,Kcn=e=>e?e.some(t=>bDt(t)):!1,Ycn=e=>e?"teamId"in(e[0]??{})?e.every(t=>"teamId"in t)&&!e.some(t=>!t.teamId||String(t.teamId)==="TBD"):e.every(t=>"id"in t)&&!e.some(t=>t.id==="TBD"):!1,Qcn=e=>!e.team_1||!e.team_2||dDt(e.extra)&&e.extra.is_bye_event?!1:!!(e.team_1.id&&e.team_2.id&&e.team_1.id!=="TBD"&&e.team_2.id!=="TBD"),Xcn=e=>"id"in e,Zcn=e=>!!e.team_1.won||!!e.team_2.won;var Ov={},Zae;function Mw(){if(Zae)return Ov;Zae=1,Ov.__esModule=!0,Ov.default=void 0;var e={top:"top",left:"left",right:"right",bottom:"bottom"};return Ov.default=e,Ov}var _Dt=Mw();const wDt=Qo(_Dt);function ES(e,t,n,r,s){var a;switch(e){case"center":return s;case"min":return n??0;case"max":return r??0;case"outside":default:return(a=(t??0)<s?n:r)!=null?a:0}}function Jae(e){var t=e.from,n=e.to;return{fromX:t.x,toX:n.x,fromY:t.y,toY:n.y,opacity:1}}function n4e(e){var t=e.scale,n=e.animateXOrY,r=e.animationTrajectory,s=r===void 0?"outside":r,a=n==="x";return d.useMemo(function(){var i=t.range().map(nw),l=i[0],c=i[1],u=c!=null&&l!=null&&c<l,f=u?[c,l]:[l,c],m=f[0],p=f[1],h=c!=null&&l!=null?Math.abs(c-l):0,g=(m??0)+h/2,y=s;!a&&s==="min"&&(y="max"),!a&&s==="max"&&(y="min");var x=function(b){var _=b.from,w=b.to;return{fromX:a?ES(y,_.x,m,p,g):_.x,toX:a?ES(y,_.x,m,p,g):w.x,fromY:a?_.y:ES(y,_.y,m,p,g),toY:a?w.y:ES(y,_.y,m,p,g),opacity:0}};return{from:x,leave:x,enter:Jae,update:Jae}},[t,a,s])}function a1(){return a1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a1.apply(null,arguments)}function CDt(e){var t=e.hideTicks,n=e.horizontal,r=e.orientation,s=e.scale,a=e.tickClassName,i=e.tickComponent,l=e.tickLabelProps,c=e.tickStroke,u=c===void 0?"#222":c,f=e.tickTransform,m=e.ticks,p=e.tickLineProps,h=e.animationTrajectory,g=$3e(m,a1({},n4e({scale:s,animateXOrY:n?"x":"y",animationTrajectory:h}),{keys:function(x){return"tick-"+x.value+"-"+x.index}}));return I.createElement(I.Fragment,null,g(function(y,x,v,b){var _,w,C=y.fromX,S=y.toX,E=y.fromY,k=y.toY,M=y.opacity,j=v.key,R=(_=(w=l[b])!=null?w:l[0])!=null?_:{};return x==null||j==null?null:I.createElement(yu.g,{key:j,className:B("visx-axis-tick",a),transform:f},!t&&I.createElement(yu.line,a1({x1:C,x2:S,y1:E,y2:k,stroke:u,strokeLinecap:"square",strokeOpacity:M},p)),I.createElement(yu.g,{key:b,transform:E9t([S,k],function(O,D){var P;return"translate("+O+","+(D+(r===wDt.bottom&&typeof R.fontSize=="number"?(P=R.fontSize)!=null?P:10:0))+")"}),opacity:M},i?i(a1({},R,{x:S,y:k,formattedValue:x?.formattedValue})):I.createElement(o4,R,x?.formattedValue)))}))}var MS={};const bH=Yb(ckt),_H=Yb(nkt);var kS={};const r4e=Yb($5t),s4e=Yb(R7t);var TS={},eoe;function SDt(){if(eoe)return TS;eoe=1,TS.__esModule=!0,TS.default=n;var e=t(Mw());function t(r){return r&&r.__esModule?r:{default:r}}function n(r){var s=r.labelOffset,a=r.labelProps,i=r.orientation,l=r.range,c=r.tickLabelFontSize,u=r.tickLength,f=i===e.default.left||i===e.default.top?-1:1,m,p,h;if(i===e.default.top||i===e.default.bottom){var g=i===e.default.bottom&&typeof a.fontSize=="number"?a.fontSize:0;m=(Number(l[0])+Number(l[l.length-1]))/2,p=f*(u+s+c+g)}else m=f*((Number(l[0])+Number(l[l.length-1]))/2),p=-(u+s),h="rotate("+f*90+")";return{x:m,y:p,transform:h}}return TS}var NS={},toe;function EDt(){if(toe)return NS;toe=1,NS.__esModule=!0,NS.default=c;var e=i(Dy()),t=i(Db()),n=r4e,r=bH,s=s4e,a=i(Mw());function i(u){return u&&u.__esModule?u:{default:u}}function l(){return l=Object.assign?Object.assign.bind():function(u){for(var f=1;f<arguments.length;f++){var m=arguments[f];for(var p in m)({}).hasOwnProperty.call(m,p)&&(u[p]=m[p])}return u},l.apply(null,arguments)}function c(u){var f=u.hideTicks,m=u.horizontal,p=u.orientation,h=u.tickClassName,g=u.tickComponent,y=u.tickLabelProps,x=u.tickStroke,v=x===void 0?"#222":x,b=u.tickTransform,_=u.ticks,w=u.strokeWidth,C=u.tickLineProps;return _.map(function(S){var E,k=S.value,M=S.index,j=S.from,R=S.to,O=S.formattedValue,D=(E=y[M])!=null?E:{},P=Math.max(10,typeof D.fontSize=="number"&&D.fontSize||0),A=R.y+(m&&p!==a.default.top?P:0);return e.default.createElement(r.Group,{key:"visx-tick-"+k+"-"+M,className:(0,t.default)("visx-axis-tick",h),transform:b},!f&&e.default.createElement(n.Line,l({from:j,to:R,stroke:v,strokeWidth:w,strokeLinecap:"square"},C)),g?g(l({},D,{x:R.x,y:A,formattedValue:O})):e.default.createElement(s.Text,l({x:R.x,y:A},D),O))})}return NS}var noe;function MDt(){if(noe)return kS;noe=1,kS.__esModule=!0,kS.default=f;var e=l(Dy()),t=l(Db()),n=r4e,r=s4e,s=l(SDt()),a=l(Mw()),i=l(EDt());function l(m){return m&&m.__esModule?m:{default:m}}function c(){return c=Object.assign?Object.assign.bind():function(m){for(var p=1;p<arguments.length;p++){var h=arguments[p];for(var g in h)({}).hasOwnProperty.call(h,g)&&(m[g]=h[g])}return m},c.apply(null,arguments)}var u={textAnchor:"middle",fontFamily:"Arial",fontSize:10,fill:"#222"};function f(m){var p=m.axisFromPoint,h=m.axisLineClassName,g=m.axisToPoint,y=m.hideAxisLine,x=m.hideTicks,v=m.horizontal,b=m.label,_=b===void 0?"":b,w=m.labelClassName,C=m.labelOffset,S=C===void 0?14:C,E=m.labelProps,k=m.orientation,M=k===void 0?a.default.bottom:k,j=m.scale,R=m.stroke,O=R===void 0?"#222":R,D=m.strokeDasharray,P=m.strokeWidth,A=P===void 0?1:P,T=m.tickClassName,N=m.tickComponent,L=m.tickLineProps,U=m.tickLabelProps,$=m.tickLength,V=$===void 0?8:$,W=m.tickStroke,Q=W===void 0?"#222":W,q=m.tickTransform,H=m.ticks,K=m.ticksComponent,G=K===void 0?i.default:K,ee=c({},u,E),Y=c({},u,typeof U=="object"?U:null),te=H.map(function(ae){var pe=ae.value,fe=ae.index;return typeof U=="function"?U(pe,fe,H):Y}),se=Math.max.apply(Math,[10].concat(te.map(function(ae){return typeof ae.fontSize=="number"?ae.fontSize:0})));return e.default.createElement(e.default.Fragment,null,G({hideTicks:x,horizontal:v,orientation:M,scale:j,tickClassName:T,tickComponent:N,tickLabelProps:te,tickStroke:Q,tickTransform:q,ticks:H,strokeWidth:A,tickLineProps:L}),!y&&e.default.createElement(n.Line,{className:(0,t.default)("visx-axis-line",h),from:p,to:g,stroke:O,strokeWidth:A,strokeDasharray:D}),_&&e.default.createElement(r.Text,c({className:(0,t.default)("visx-axis-label",w)},(0,s.default)({labelOffset:S,labelProps:ee,orientation:M,range:j.range(),tickLabelFontSize:se,tickLength:V}),ee),_))}return kS}var jS={},roe;function kDt(){if(roe)return jS;roe=1,jS.__esModule=!0,jS.default=e;function e(t,n){n===void 0&&(n="center");var r=t;if(n!=="start"&&"bandwidth"in r){var s=r.bandwidth();return n==="center"&&(s/=2),r.round()&&(s=Math.round(s)),function(a){var i=r(a);return typeof i=="number"?i+s:i}}return t}return jS}var AS={},soe;function TDt(){if(soe)return AS;soe=1,AS.__esModule=!0,AS.default=t;var e=_H;function t(n){var r=n;return"tickFormat"in r?r.tickFormat():e.toString}return AS}var IS={};const a4e=Yb($7t);var aoe;function NDt(){if(aoe)return IS;aoe=1,IS.__esModule=!0,IS.default=t;var e=a4e;function t(n,r){var s=n.x,a=n.y;return new e.Point(r?{x:s,y:a}:{x:a,y:s})}return IS}var ph={},ooe;function jDt(){if(ooe)return ph;ooe=1,ph.__esModule=!0,ph.default=n,ph.defaultAxisRangePadding=void 0;function e(){return e=Object.assign?Object.assign.bind():function(r){for(var s=1;s<arguments.length;s++){var a=arguments[s];for(var i in a)({}).hasOwnProperty.call(a,i)&&(r[i]=a[i])}return r},e.apply(null,arguments)}var t=ph.defaultAxisRangePadding=0;function n(r){return r===void 0&&(r=t),typeof r=="number"?{start:r,end:r}:e({start:t,end:t},r)}return ph}var ioe;function ADt(){if(ioe)return MS;ioe=1,MS.__esModule=!0,MS.default=g,m(YB());var e=m(Dy()),t=m(Db()),n=bH,r=_H,s=m(MDt()),a=m(kDt()),i=m(TDt()),l=m(NDt()),c=m(Mw()),u=m(jDt()),f=["children","axisClassName","hideAxisLine","hideTicks","hideZero","innerRef","left","numTicks","orientation","rangePadding","scale","tickFormat","tickLength","tickValues","top"];function m(y){return y&&y.__esModule?y:{default:y}}function p(){return p=Object.assign?Object.assign.bind():function(y){for(var x=1;x<arguments.length;x++){var v=arguments[x];for(var b in v)({}).hasOwnProperty.call(v,b)&&(y[b]=v[b])}return y},p.apply(null,arguments)}function h(y,x){if(y==null)return{};var v={};for(var b in y)if({}.hasOwnProperty.call(y,b)){if(x.includes(b))continue;v[b]=y[b]}return v}function g(y){var x=y.children,v=x===void 0?s.default:x,b=y.axisClassName,_=y.hideAxisLine,w=_===void 0?!1:_,C=y.hideTicks,S=C===void 0?!1:C,E=y.hideZero,k=E===void 0?!1:E,M=y.innerRef,j=y.left,R=j===void 0?0:j,O=y.numTicks,D=O===void 0?10:O,P=y.orientation,A=P===void 0?c.default.bottom:P,T=y.rangePadding,N=T===void 0?0:T,L=y.scale,U=y.tickFormat,$=y.tickLength,V=$===void 0?8:$,W=y.tickValues,Q=y.top,q=Q===void 0?0:Q,H=h(y,f),K=U??(0,i.default)(L),G=A===c.default.left,ee=A===c.default.top,Y=ee||A===c.default.bottom,te=(0,a.default)(L),se=G||ee?-1:1,ae=L.range(),pe=(0,u.default)(N),fe=(0,l.default)({x:Number(ae[0])+.5-pe.start,y:0},Y),ge=(0,l.default)({x:Number(ae[ae.length-1])+.5+pe.end,y:0},Y),Se=(W??(0,r.getTicks)(L,D)).filter(function(ye){return!k||ye!==0&&ye!=="0"}).map(function(ye,be){return{value:ye,index:be}}),je=Se.map(function(ye){var be=ye.value,Ne=ye.index,ke=(0,r.coerceNumber)(te(be));return{value:be,index:Ne,from:(0,l.default)({x:ke,y:0},Y),to:(0,l.default)({x:ke,y:V*se},Y),formattedValue:K(be,Ne,Se)}});return e.default.createElement(n.Group,{className:(0,t.default)("visx-axis",b),innerRef:M,top:q,left:R},v(p({},H,{axisFromPoint:fe,axisToPoint:ge,hideAxisLine:w,hideTicks:S,hideZero:k,horizontal:Y,numTicks:D,orientation:A,rangePadding:N,scale:L,tickFormat:K,tickLength:V,tickPosition:te,tickSign:se,ticks:je})))}return MS}var IDt=ADt();const RDt=Qo(IDt);var PDt=["animationTrajectory","tickComponent"];function fk(){return fk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fk.apply(null,arguments)}function LDt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function ODt(e){var t=e.animationTrajectory,n=e.tickComponent,r=LDt(e,PDt),s=d.useMemo(function(){return function(i){return I.createElement(CDt,fk({},i,{tickComponent:n,animationTrajectory:t}))}},[t,n]);return I.createElement(RDt,fk({},r,{ticksComponent:s}))}var RS={},PS={},loe;function DDt(){if(loe)return PS;loe=1,PS.__esModule=!0,PS.default=e;function e(t){return"bandwidth"in t?t.bandwidth():0}return PS}var coe;function FDt(){if(coe)return RS;coe=1,RS.__esModule=!0,RS.default=p;var e=u(YB()),t=u(Dy()),n=u(Db()),r=u(K3e()),s=bH,a=a4e,i=_H,l=u(DDt()),c=["top","left","scale","width","stroke","strokeWidth","strokeDasharray","className","children","numTicks","lineStyle","offset","tickValues"];function u(h){return h&&h.__esModule?h:{default:h}}function f(){return f=Object.assign?Object.assign.bind():function(h){for(var g=1;g<arguments.length;g++){var y=arguments[g];for(var x in y)Object.prototype.hasOwnProperty.call(y,x)&&(h[x]=y[x])}return h},f.apply(this,arguments)}function m(h,g){if(h==null)return{};var y={},x=Object.keys(h),v,b;for(b=0;b<x.length;b++)v=x[b],!(g.indexOf(v)>=0)&&(y[v]=h[v]);return y}function p(h){var g=h.top,y=g===void 0?0:g,x=h.left,v=x===void 0?0:x,b=h.scale,_=h.width,w=h.stroke,C=w===void 0?"#eaf0f6":w,S=h.strokeWidth,E=S===void 0?1:S,k=h.strokeDasharray,M=h.className,j=h.children,R=h.numTicks,O=R===void 0?10:R,D=h.lineStyle,P=h.offset,A=h.tickValues,T=m(h,c),N=A??(0,i.getTicks)(b,O),L=(P??0)+(0,l.default)(b)/2,U=N.map(function($,V){var W,Q=((W=(0,i.coerceNumber)(b($)))!=null?W:0)+L;return{index:V,from:new a.Point({x:0,y:Q}),to:new a.Point({x:_,y:Q})}});return t.default.createElement(s.Group,{className:(0,n.default)("visx-rows",M),top:y,left:v},j?j({lines:U}):U.map(function($){var V=$.from,W=$.to,Q=$.index;return t.default.createElement(r.default,f({key:"row-line-"+Q,from:V,to:W,stroke:C,strokeWidth:E,strokeDasharray:k,style:D},T))}))}return p.propTypes={tickValues:e.default.array,width:e.default.number.isRequired},RS}var UDt=FDt();const BDt=Qo(UDt);var $Dt=["scale","lines","animationTrajectory","animateXOrY","lineKey","lineStyle"];function mk(){return mk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mk.apply(null,arguments)}function VDt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function o4e(e){var t=e.scale,n=e.lines,r=e.animationTrajectory,s=e.animateXOrY,a=e.lineKey,i=e.lineStyle,l=VDt(e,$Dt),c=$3e(n,mk({},n4e({scale:t,animateXOrY:s,animationTrajectory:r}),{key:a}));return I.createElement(I.Fragment,null,c(function(u,f,m){var p=u.fromX,h=u.toX,g=u.fromY,y=u.toY,x=u.opacity,v=m.key;return I.createElement(yu.line,mk({key:v,x1:p,x2:h,y1:g,y2:y,strokeOpacity:x,style:i},l))}))}o4e.propTypes={lineKey:Fe.func.isRequired};var WDt=["scale","width","numTicks","tickValues","offset","className","animationTrajectory","top","left"];function EL(){return EL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EL.apply(null,arguments)}function HDt(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function i4e(e){var t=e.scale,n=e.width,r=e.numTicks,s=e.tickValues,a=e.offset,i=e.className,l=e.animationTrajectory,c=e.top,u=e.left,f=HDt(e,WDt);return I.createElement(BDt,{scale:t,width:n,numTicks:r,tickValues:s,className:i,top:c,left:u,offset:a},function(m){var p=m.lines;return I.createElement(o4e,EL({scale:t,lines:p,animationTrajectory:l,animateXOrY:"y",lineKey:function(g){var y,x;return"row-"+((y=g==null||(x=g.from)==null?void 0:x.y)!=null?y:"")+"-"+g.index}},f))})}function uoe({ref:e}){const t=e.current,[n,r,s]=d.useMemo(()=>{if(t){const a=t.querySelectorAll(".visx-axis-tick"),i=Array.from(a).map(l=>{const{width:c,height:u}=l.getBBox();return[c,u]});if(i.length){const l=Math.max(...i.map(u=>u[0])),c=Math.max(...i.map(u=>u[1]));return[l,c,i.length*l]}}return[0,0,0]},[t]);return d.useMemo(()=>({minRequiredWidth:s,maxLabelWidth:n,maxLabelHeight:r}),[r,n,s])}function m4(){const e=d.useRef(null),{maxLabelWidth:t,minRequiredWidth:n}=uoe({ref:e}),r=d.useRef(null),{maxLabelWidth:s}=uoe({ref:r});return d.useMemo(()=>({xAxisRef:e,yAxisRef:r,maxXLabelWidth:t,maxYLabelWidth:s,minXRequiredWidth:n}),[t,s,n])}const doe=40,rR=e=>typeof e=="number";function p4({config:e,innerWidth:t,innerHeight:n,maxXLabelWidth:r}){let s=Math.floor(t/(r+doe));rR(e?.x?.numTicks)&&rR(s)&&(s=Math.min(s,e.x.numTicks)),r||(s=void 0);let a=Math.floor(n/doe);return rR(e?.y?.numTicks)&&(a=Math.min(a,e.y.numTicks)),{xTiltTicks:!1,xNumTicks:s,yNumTicks:a}}const l4e="fill-quiet font-mono text-xs font-bold truncate max-w-[100px]",foe="fill-quiet text-xs font-semibold font-sans",zDt=(e,t,n)=>n?{transform:"rotate(-10deg)",transformOrigin:`${e}px ${t}px`,textAnchor:"end"}:{textAnchor:"middle"};function GDt(e){const{shouldTilt:t,x:n,y:r,formattedValue:s,style:a,className:i,...l}=e;return o.jsx("text",{...l,x:n,y:r,dy:"2px",className:B(l4e,i),style:{...a,...zDt(n,r,t)},children:s})}const kw=I.memo(function(t){const{margin:n,height:r,width:s,xScale:a,yScale:i,xFormat:l,yFormat:c,yNumTicks:u,xNumTicks:f,xTickValues:m,yTickValues:p,xTiltTicks:h,animated:g,tickColor:y,axisColor:x,xAxisRef:v,yAxisRef:b,xAxisLabel:_,yAxisLabel:w,gridDashed:C=!1,gridStrokeWidth:S=.5}=t,E=Os(),k=g?ODt:Jd,M=g?i4e:Lp,j=d.useCallback(O=>o.jsx(GDt,{...O,shouldTilt:h}),[h]),R=d.useMemo(()=>({className:l4e,textAnchor:"start",dx:"0.75em",dy:"-0.25em"}),[]);return o.jsxs(o.Fragment,{children:[o.jsx(Jd,{orientation:Pa.bottom,top:r-n.bottom,scale:a,stroke:x,hideAxisLine:!0,label:_,labelClassName:foe,tickFormat:l,numTicks:f,tickStroke:y,innerRef:v,tickValues:m,tickComponent:j,axisClassName:"select-none"}),o.jsx(k,{orientation:Pa.left,left:n.left,hideAxisLine:!0,label:w,labelOffset:7.5,labelClassName:foe,scale:i,tickFormat:c,stroke:x,tickStroke:y,hideTicks:!0,innerRef:b,tickLabelProps:R,numTicks:u,tickValues:p,axisClassName:"select-none"}),E&&o.jsx(M,{left:n.left,scale:i,width:s-n.right-n.left*2,strokeDasharray:C?"8,4":void 0,stroke:x,strokeWidth:S,numTicks:u})]})});kw.displayName="Axes";const c4e=I.memo(({color:e})=>o.jsx("div",{className:"size-[14px] rounded-full",style:{backgroundColor:e}}));c4e.displayName="Tile";const Tw=I.memo(({entries:e})=>o.jsx("ol",{className:"my-sm gap-x-md gap-y-xs flex flex-wrap",children:e.map(({key:t,color:n})=>o.jsxs("li",{className:"gap-xs fade-in flex items-center transition-all duration-200",children:[o.jsx(c4e,{color:n}),o.jsx(F,{variant:"tiny",color:"light",children:String(t)})]},String(t)))}));Tw.displayName="Legend";const zx=I.memo(({width:e,height:t,children:n,ref:r})=>{const s=d.useMemo(()=>({position:"relative",height:t,overflow:"visible"}),[t]);return o.jsx(z,{style:s,children:o.jsx("svg",{width:e,ref:r,height:t,style:{position:"absolute",left:0,top:0,overflow:"visible"},children:n})})});zx.displayName="Svg";function moe(e){return function(){return e}}function qDt(e){return e[0]}function KDt(e){return e[1]}function pk(){this._=null}function h4(e){e.U=e.C=e.L=e.R=e.P=e.N=null}pk.prototype={constructor:pk,insert:function(e,t){var n,r,s;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=poe(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)r=n.U,n===r.L?(s=r.R,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.R&&(Dv(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Fv(this,r))):(s=r.L,s&&s.C?(n.C=s.C=!1,r.C=!0,e=r):(e===n.L&&(Fv(this,n),e=n,n=e.U),n.C=!1,r.C=!0,Dv(this,r))),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t=e.U,n,r=e.L,s=e.R,a,i;if(r?s?a=poe(s):a=r:a=s,t?t.L===e?t.L=a:t.R=a:this._=a,r&&s?(i=a.C,a.C=e.C,a.L=r,r.U=a,a!==s?(t=a.U,a.U=e.U,e=a.R,t.L=e,a.R=s,s.U=a):(a.U=t,t=a,e=a.R)):(i=e.C,e=a),e&&(e.U=t),!i){if(e&&e.C){e.C=!1;return}do{if(e===this._)break;if(e===t.L){if(n=t.R,n.C&&(n.C=!1,t.C=!0,Dv(this,t),n=t.R),n.L&&n.L.C||n.R&&n.R.C){(!n.R||!n.R.C)&&(n.L.C=!1,n.C=!0,Fv(this,n),n=t.R),n.C=t.C,t.C=n.R.C=!1,Dv(this,t),e=this._;break}}else if(n=t.L,n.C&&(n.C=!1,t.C=!0,Fv(this,t),n=t.L),n.L&&n.L.C||n.R&&n.R.C){(!n.L||!n.L.C)&&(n.R.C=!1,n.C=!0,Dv(this,n),n=t.L),n.C=t.C,t.C=n.L.C=!1,Fv(this,t),e=this._;break}n.C=!0,e=t,t=t.U}while(!e.C);e&&(e.C=!1)}}};function Dv(e,t){var n=t,r=t.R,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function Fv(e,t){var n=t,r=t.L,s=n.U;s?s.L===n?s.L=r:s.R=r:e._=r,r.U=s,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function poe(e){for(;e.L;)e=e.L;return e}function f0(e,t,n,r){var s=[null,null],a=ua.push(s)-1;return s.left=e,s.right=t,n&&hk(s,e,t,n),r&&hk(s,t,e,r),Lo[e.index].halfedges.push(a),Lo[t.index].halfedges.push(a),s}function Uv(e,t,n){var r=[t,n];return r.left=e,r}function hk(e,t,n,r){!e[0]&&!e[1]?(e[0]=r,e.left=t,e.right=n):e.left===n?e[1]=r:e[0]=r}function YDt(e,t,n,r,s){var a=e[0],i=e[1],l=a[0],c=a[1],u=i[0],f=i[1],m=0,p=1,h=u-l,g=f-c,y;if(y=t-l,!(!h&&y>0)){if(y/=h,h<0){if(y<m)return;y<p&&(p=y)}else if(h>0){if(y>p)return;y>m&&(m=y)}if(y=r-l,!(!h&&y<0)){if(y/=h,h<0){if(y>p)return;y>m&&(m=y)}else if(h>0){if(y<m)return;y<p&&(p=y)}if(y=n-c,!(!g&&y>0)){if(y/=g,g<0){if(y<m)return;y<p&&(p=y)}else if(g>0){if(y>p)return;y>m&&(m=y)}if(y=s-c,!(!g&&y<0)){if(y/=g,g<0){if(y>p)return;y>m&&(m=y)}else if(g>0){if(y<m)return;y<p&&(p=y)}return!(m>0)&&!(p<1)||(m>0&&(e[0]=[l+m*h,c+m*g]),p<1&&(e[1]=[l+p*h,c+p*g])),!0}}}}}function QDt(e,t,n,r,s){var a=e[1];if(a)return!0;var i=e[0],l=e.left,c=e.right,u=l[0],f=l[1],m=c[0],p=c[1],h=(u+m)/2,g=(f+p)/2,y,x;if(p===f){if(h<t||h>=r)return;if(u>m){if(!i)i=[h,n];else if(i[1]>=s)return;a=[h,s]}else{if(!i)i=[h,s];else if(i[1]<n)return;a=[h,n]}}else if(y=(u-m)/(p-f),x=g-y*h,y<-1||y>1)if(u>m){if(!i)i=[(n-x)/y,n];else if(i[1]>=s)return;a=[(s-x)/y,s]}else{if(!i)i=[(s-x)/y,s];else if(i[1]<n)return;a=[(n-x)/y,n]}else if(f<p){if(!i)i=[t,y*t+x];else if(i[0]>=r)return;a=[r,y*r+x]}else{if(!i)i=[r,y*r+x];else if(i[0]<t)return;a=[t,y*t+x]}return e[0]=i,e[1]=a,!0}function XDt(e,t,n,r){for(var s=ua.length,a;s--;)(!QDt(a=ua[s],e,t,n,r)||!YDt(a,e,t,n,r)||!(Math.abs(a[0][0]-a[1][0])>lr||Math.abs(a[0][1]-a[1][1])>lr))&&delete ua[s]}function ZDt(e){return Lo[e.index]={site:e,halfedges:[]}}function JDt(e,t){var n=e.site,r=t.left,s=t.right;return n===s&&(s=r,r=n),s?Math.atan2(s[1]-r[1],s[0]-r[0]):(n===r?(r=t[1],s=t[0]):(r=t[0],s=t[1]),Math.atan2(r[0]-s[0],s[1]-r[1]))}function u4e(e,t){return t[+(t.left!==e.site)]}function eFt(e,t){return t[+(t.left===e.site)]}function tFt(){for(var e=0,t=Lo.length,n,r,s,a;e<t;++e)if((n=Lo[e])&&(a=(r=n.halfedges).length)){var i=new Array(a),l=new Array(a);for(s=0;s<a;++s)i[s]=s,l[s]=JDt(n,ua[r[s]]);for(i.sort(function(c,u){return l[u]-l[c]}),s=0;s<a;++s)l[s]=r[i[s]];for(s=0;s<a;++s)r[s]=l[s]}}function nFt(e,t,n,r){var s=Lo.length,a,i,l,c,u,f,m,p,h,g,y,x,v=!0;for(a=0;a<s;++a)if(i=Lo[a]){for(l=i.site,u=i.halfedges,c=u.length;c--;)ua[u[c]]||u.splice(c,1);for(c=0,f=u.length;c<f;)g=eFt(i,ua[u[c]]),y=g[0],x=g[1],m=u4e(i,ua[u[++c%f]]),p=m[0],h=m[1],(Math.abs(y-p)>lr||Math.abs(x-h)>lr)&&(u.splice(c,0,ua.push(Uv(l,g,Math.abs(y-e)<lr&&r-x>lr?[e,Math.abs(p-e)<lr?h:r]:Math.abs(x-r)<lr&&n-y>lr?[Math.abs(h-r)<lr?p:n,r]:Math.abs(y-n)<lr&&x-t>lr?[n,Math.abs(p-n)<lr?h:t]:Math.abs(x-t)<lr&&y-e>lr?[Math.abs(h-t)<lr?p:e,t]:null))-1),++f);f&&(v=!1)}if(v){var b,_,w,C=1/0;for(a=0,v=null;a<s;++a)(i=Lo[a])&&(l=i.site,b=l[0]-e,_=l[1]-t,w=b*b+_*_,w<C&&(C=w,v=i));if(v){var S=[e,t],E=[e,r],k=[n,r],M=[n,t];v.halfedges.push(ua.push(Uv(l=v.site,S,E))-1,ua.push(Uv(l,E,k))-1,ua.push(Uv(l,k,M))-1,ua.push(Uv(l,M,S))-1)}}for(a=0;a<s;++a)(i=Lo[a])&&(i.halfedges.length||delete Lo[a])}var d4e=[],wH;function rFt(){h4(this),this.x=this.y=this.arc=this.site=this.cy=null}function qh(e){var t=e.P,n=e.N;if(!(!t||!n)){var r=t.site,s=e.site,a=n.site;if(r!==a){var i=s[0],l=s[1],c=r[0]-i,u=r[1]-l,f=a[0]-i,m=a[1]-l,p=2*(c*m-u*f);if(!(p>=-1e-12)){var h=c*c+u*u,g=f*f+m*m,y=(m*h-u*g)/p,x=(c*g-f*h)/p,v=d4e.pop()||new rFt;v.arc=e,v.site=s,v.x=y+i,v.y=(v.cy=x+l)+Math.sqrt(y*y+x*x),e.circle=v;for(var b=null,_=jb._;_;)if(v.y<_.y||v.y===_.y&&v.x<=_.x)if(_.L)_=_.L;else{b=_.P;break}else if(_.R)_=_.R;else{b=_;break}jb.insert(b,v),b||(wH=v)}}}}function Sg(e){var t=e.circle;t&&(t.P||(wH=t.N),jb.remove(t),d4e.push(t),h4(t),e.circle=null)}var f4e=[];function sFt(){h4(this),this.edge=this.site=this.circle=null}function hoe(e){var t=f4e.pop()||new sFt;return t.site=e,t}function sR(e){Sg(e),Eg.remove(e),f4e.push(e),h4(e)}function aFt(e){var t=e.circle,n=t.x,r=t.cy,s=[n,r],a=e.P,i=e.N,l=[e];sR(e);for(var c=a;c.circle&&Math.abs(n-c.circle.x)<lr&&Math.abs(r-c.circle.cy)<lr;)a=c.P,l.unshift(c),sR(c),c=a;l.unshift(c),Sg(c);for(var u=i;u.circle&&Math.abs(n-u.circle.x)<lr&&Math.abs(r-u.circle.cy)<lr;)i=u.N,l.push(u),sR(u),u=i;l.push(u),Sg(u);var f=l.length,m;for(m=1;m<f;++m)u=l[m],c=l[m-1],hk(u.edge,c.site,u.site,s);c=l[0],u=l[f-1],u.edge=f0(c.site,u.site,null,s),qh(c),qh(u)}function oFt(e){for(var t=e[0],n=e[1],r,s,a,i,l=Eg._;l;)if(a=m4e(l,n)-t,a>lr)l=l.L;else if(i=t-iFt(l,n),i>lr){if(!l.R){r=l;break}l=l.R}else{a>-1e-6?(r=l.P,s=l):i>-1e-6?(r=l,s=l.N):r=s=l;break}ZDt(e);var c=hoe(e);if(Eg.insert(r,c),!(!r&&!s)){if(r===s){Sg(r),s=hoe(r.site),Eg.insert(c,s),c.edge=s.edge=f0(r.site,c.site),qh(r),qh(s);return}if(!s){c.edge=f0(r.site,c.site);return}Sg(r),Sg(s);var u=r.site,f=u[0],m=u[1],p=e[0]-f,h=e[1]-m,g=s.site,y=g[0]-f,x=g[1]-m,v=2*(p*x-h*y),b=p*p+h*h,_=y*y+x*x,w=[(x*b-h*_)/v+f,(p*_-y*b)/v+m];hk(s.edge,u,g,w),c.edge=f0(u,e,null,w),s.edge=f0(e,g,null,w),qh(r),qh(s)}}function m4e(e,t){var n=e.site,r=n[0],s=n[1],a=s-t;if(!a)return r;var i=e.P;if(!i)return-1/0;n=i.site;var l=n[0],c=n[1],u=c-t;if(!u)return l;var f=l-r,m=1/a-1/u,p=f/u;return m?(-p+Math.sqrt(p*p-2*m*(f*f/(-2*u)-c+u/2+s-a/2)))/m+r:(r+l)/2}function iFt(e,t){var n=e.N;if(n)return m4e(n,t);var r=e.site;return r[1]===t?r[0]:1/0}var lr=1e-6,Eg,Lo,jb,ua;function lFt(e,t,n){return(e[0]-n[0])*(t[1]-e[1])-(e[0]-t[0])*(n[1]-e[1])}function cFt(e,t){return t[1]-e[1]||t[0]-e[0]}function ML(e,t){var n=e.sort(cFt).pop(),r,s,a;for(ua=[],Lo=new Array(e.length),Eg=new pk,jb=new pk;;)if(a=wH,n&&(!a||n[1]<a.y||n[1]===a.y&&n[0]<a.x))(n[0]!==r||n[1]!==s)&&(oFt(n),r=n[0],s=n[1]),n=e.pop();else if(a)aFt(a.arc);else break;if(tFt(),t){var i=+t[0][0],l=+t[0][1],c=+t[1][0],u=+t[1][1];XDt(i,l,c,u),nFt(i,l,c,u)}this.edges=ua,this.cells=Lo,Eg=jb=ua=Lo=null}ML.prototype={constructor:ML,polygons:function(){var e=this.edges;return this.cells.map(function(t){var n=t.halfedges.map(function(r){return u4e(t,e[r])});return n.data=t.site.data,n})},triangles:function(){var e=[],t=this.edges;return this.cells.forEach(function(n,r){if(l=(a=n.halfedges).length)for(var s=n.site,a,i=-1,l,c,u=t[a[l-1]],f=u.left===s?u.right:u.left;++i<l;)c=f,u=t[a[i]],f=u.left===s?u.right:u.left,c&&f&&r<c.index&&r<f.index&&lFt(s,c,f)<0&&e.push([s.data,c.data,f.data])}),e},links:function(){return this.edges.filter(function(e){return e.right}).map(function(e){return{source:e.left.data,target:e.right.data}})},find:function(e,t,n){for(var r=this,s,a=r._found||0,i=r.cells.length,l;!(l=r.cells[a]);)if(++a>=i)return null;var c=e-l.site[0],u=t-l.site[1],f=c*c+u*u;do l=r.cells[s=a],a=null,l.halfedges.forEach(function(m){var p=r.edges[m],h=p.left;if(!((h===l.site||!h)&&!(h=p.right))){var g=e-h[0],y=t-h[1],x=g*g+y*y;x<f&&(f=x,a=h.index)}});while(a!==null);return r._found=s,n==null||f<=n*n?l.site:null}};function uFt(){var e=qDt,t=KDt,n=null;function r(s){return new ML(s.map(function(a,i){var l=[Math.round(e(a,i,s)/lr)*lr,Math.round(t(a,i,s)/lr)*lr];return l.index=i,l.data=a,l}),n)}return r.polygons=function(s){return r(s).polygons()},r.links=function(s){return r(s).links()},r.triangles=function(s){return r(s).triangles()},r.x=function(s){return arguments.length?(e=typeof s=="function"?s:moe(+s),r):e},r.y=function(s){return arguments.length?(t=typeof s=="function"?s:moe(+s),r):t},r.extent=function(s){return arguments.length?(n=s==null?null:[[+s[0][0],+s[0][1]],[+s[1][0],+s[1][1]]],r):n&&[[n[0][0],n[0][1]],[n[1][0],n[1][1]]]},r.size=function(s){return arguments.length?(n=s==null?null:[[0,0],[+s[0],+s[1]]],r):n&&[n[1][0]-n[0][0],n[1][1]-n[0][1]]},r}var goe=1;function dFt(e){var t=e.width,n=t===void 0?0:t,r=e.height,s=r===void 0?0:r,a=e.x,i=e.y,l=uFt();return a&&l.x(a),i&&l.y(i),l.extent([[-1,-1],[n+goe,s+goe]]),l}function g4({data:e,innerHeight:t,innerWidth:n,xScale:r,yScale:s,xGet:a,yGet:i,voronoiRadius:l=void 0}){const{showTooltip:c,hideTooltip:u,tooltipData:f}=iH(),m=d.useMemo(()=>dFt({width:n,height:t,x:g=>r(a(g)),y:g=>s(i(g))})(e),[e,n,t,r,s,a,i]),p=d.useCallback(h=>{const{x:g,y}=aH(h)??{x:0,y:0},x=m.find(g,y,l);if(!x)return u();c({tooltipData:{localPoint:{x:g,y},voronoiSite:x}})},[c,u,m,l]);return d.useMemo(()=>({showTooltip:c,hideTooltip:u,handleTooltip:p,tooltipData:f}),[p,u,c,f])}const Nw=I.memo(function({margin:t,height:n,width:r,tooltipHandle:s,tooltipHide:a,maxYLabelWidth:i}){const c=d.useCallback(()=>a(),[a]);return o.jsx(Rx,{x:t.left+i-2.5,y:t.top,width:r-t.right-t.left*2-i+2.5*2,height:n-t.bottom-t.top,fill:"transparent",onTouchStart:s,onTouchMove:s,onMouseMove:s,onMouseLeave:c})});Nw.displayName="TooltipListener";const Ab=I.memo(({cx:e,cy:t,color:n,r=3})=>o.jsx("circle",{cx:e,cy:t,r,fill:n,stroke:n,strokeWidth:1}));Ab.displayName="YDot";const Ey=I.memo(({marginTop:e,tooltipLeft:t=0,innerHeight:n,color:r,strokeWidth:s=1,dotted:a=!1})=>{const i=d.useMemo(()=>({x:t,y:e}),[e,t]),l=d.useMemo(()=>({x:t,y:n+e}),[n,e,t]);return o.jsx("g",{children:o.jsx(dT,{from:i,to:l,stroke:r,strokeWidth:s,strokeDasharray:a?"4 4":void 0,pointerEvents:"none",className:"animate-in fade-in duration-300"})})});Ey.displayName="YCrosshair";const aR=e=>e,p4e=I.memo(({entry:e,xFormat:t=aR,yFormat:n=aR,zFormat:r=aR,xGet:s,yGet:a,zGet:i})=>{const l=[{value:t(s(e))},{value:n(a(e))}];i&&l.unshift({value:r(i(e))});const c=l.filter(u=>u.value);return o.jsx(z,{children:c.map(({value:u},f)=>o.jsx(F,{variant:"tiny",className:"py-two",children:String(u)},f))})});p4e.displayName="InnerToolTip";const h4e=I.memo(({tooltipTop:e=0,tooltipLeft:t=0,children:n})=>{const r=d.useMemo(()=>({position:"absolute",pointerEvents:"none"}),[]);return o.jsx(eTe,{top:e,left:t,style:r,children:o.jsx(z,{variant:"background",className:"p-sm dark:border-inverse rounded-md border shadow-sm",children:n})})});h4e.displayName="Tooltip";const jw=I.memo(({tooltipTop:e,tooltipLeft:t,entry:n,data:r,config:s,UserToolTip:a,xFormat:i,yFormat:l,zFormat:c,zGet:u,xGet:f,yGet:m})=>o.jsx(h4e,{tooltipTop:e,tooltipLeft:t,children:a?o.jsx(a,{entry:n,config:s,data:r}):o.jsx(p4e,{entry:n,config:s,xFormat:i,yFormat:l,zFormat:c,zGet:u,xGet:f,yGet:m})}));jw.displayName="ComposedTooltip";const hh=0,g4e=I.memo(function(t){const{width:n,height:r,margin:s,config:a,tooltip:i,colors:l,axes:c=!0}=t,{colorSchema:u,axisColor:f,tickColor:m}=i4(l),p=Os(),h=l4({data:t.data}),{xAxisRef:g,yAxisRef:y,maxYLabelWidth:x,maxXLabelWidth:v,minXRequiredWidth:b}=m4(),{innerHeight:_,innerWidth:w,xRange:C,yRange:S}=ww({width:n,height:r,margin:s,maxYLabelWidth:x,hasAxis:c}),{xNumTicks:E,yNumTicks:k,xTiltTicks:M}=p4({config:a,innerWidth:w,innerHeight:_,maxXLabelWidth:v}),{xGet:j,yGet:R,zGet:O}=c4({config:a}),{xFormat:D,yFormat:P,xTooltipFormat:A,yTooltipFormat:T,zTooltipFormat:N}=u4({config:a}),L=d.useMemo(()=>{if(!a?.z?.accessor)return[{key:"default",data:h}];const fe=a.z.accessor,ge=I1(h,Se=>String(Se[fe]));return Object.entries(ge).map(([Se,je])=>({key:Se,data:je}))},[h,a.z]),U=L.length>1,$=U?L.map(({key:fe})=>fe):h.map(j),V=Uo.band({range:C,domain:$,padding:.4}),W=[...new Set(h.map(j))],Q=Uo.band({range:[0,V.bandwidth()],domain:W,padding:.1}),q=d.useMemo(()=>{const[fe,ge]=co(h,R),Se=Math.min(hh,fe),je=Math.max(hh,ge);return[Se,je]},[h,R]),H=d.useMemo(()=>Uo.linear({range:S,domain:q}),[S,q]),K=Uo.ordinal({range:u.slice(0,W.length),domain:U?W:$}),{tooltipData:G,hideTooltip:ee,handleTooltip:Y}=g4({data:h,innerHeight:_,innerWidth:w,xScale:U?Q:V,yScale:H,xGet:j,yGet:R}),se=d.useCallback(({localPoint:fe})=>{const ge=U?Q:V,Se=ge.bandwidth(),je=(ge.step()-Se)/4;if(isNaN(fe?.x??NaN)||isNaN(fe?.y??NaN))return null;const ye=fe?.x,be=fe?.y;return h.reduce((Ne,ke)=>{let Ie=ge(j(ke))||0;const Ce=H(R(ke)),Ge=Math.abs(Ce-H(0));return U&&(Ie+=V(ke.z)||0),Ie!==void 0&&Ce!==void 0&&ye>=Ie-je&&ye<=Ie+Se+je&&be>=Ce-Ge&&be<=Ce+Ge?{x:Ie,y:Ce,data:ke}:Ne},null)},[h,V,j,H,R,U,Q])({localPoint:G?.localPoint}),ae=d.useMemo(()=>({marginLeft:s.left,marginRight:s.right}),[s.left,s.right]),pe=d.useMemo(()=>[hh],[]);return o.jsxs(z,{className:"relative",children:[U&&W.length>1&&o.jsx(z,{style:ae,children:o.jsx(Tw,{entries:W.map(fe=>({key:fe,color:K(fe)}))})}),o.jsxs(zx,{width:n,height:r,children:[o.jsx(kw,{xScale:V,yScale:H,xFormat:D,yFormat:P,width:n,height:r,margin:s,yNumTicks:k,xNumTicks:E,yTickValues:a.y.tickValues,xTickValues:a.x.tickValues,xAxisLabel:a.x.label,yAxisLabel:a.y.label,animated:!0,tickColor:m,axisColor:f,xAxisRef:g,yAxisRef:y,xTiltTicks:M}),p&&o.jsx(i4e,{left:s.left,scale:H,width:n-s.right-s.left*2,stroke:f,tickValues:pe,strokeWidth:2}),L.map(({key:fe,data:ge})=>o.jsx(wa,{left:V(fe),children:ge.map((Se,je)=>{const ye=U?Q:V;return o.jsx(ve.rect,{rx:2,ry:2,x:ye(j(Se)),width:ye.bandwidth(),fill:K(U?je:fe),initial:{y:H(hh),height:0,opacity:0},animate:{y:H(Math.max(hh,R(Se))),height:Math.abs(H(R(Se))-H(hh)),opacity:1},transition:{duration:.5,ease:"easeInOut"}},je)})},fe)),o.jsx(Nw,{margin:s,tooltipHandle:Y,tooltipHide:ee,height:r,width:n,maxYLabelWidth:x})]}),se&&G&&o.jsx(jw,{UserToolTip:i,tooltipTop:G?.localPoint?.y,tooltipLeft:G?.localPoint?.x,entry:se.data,data:h,config:a,xFormat:A,yFormat:T,zFormat:N,zGet:O,xGet:j,yGet:R})]})});g4e.displayName="BarChart";function fFt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),i=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[i]}function mFt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",i=d.useMemo(()=>[...(n.find(({key:m})=>m===a)||n[0])?.d||[]].sort((m,p)=>s(m)-s(p)),[a,n,s]),l=e?.localPoint.x,c=d.useMemo(()=>i.map(s),[i,s]);return d.useMemo(()=>{if(l==null)return;if("invert"in r){const p=r.invert(l),h=jx(c,p);if(h<=0)return i[0];if(h>=c.length)return i[c.length-1];const g=i[h-1],y=i[h];return Math.abs(s(g)-p)<Math.abs(s(y)-p)?g:y}const f=fFt({xScale:r,xPosition:l}),m=i.find(p=>String(s(p))===String(f));return m||i.reduce((p,h)=>Math.abs(s(h)-f)<Math.abs(s(p)-f)?h:p,i[0])},[l,r,i,s,c])}const y4e=I.memo(function(t){const{$t:n}=Z(),{width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:i,tooltip:l,axes:c=!0,colors:u,animate:f=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:x}=t,[v,b]=d.useState(null),_=l4({data:t.data}),w=d.useRef(new Set),{colorSchema:C,tickColor:S,axisColor:E,textColor:k}=i4(u),{colorScheme:M}=jr(),j=M==="dark",{xAxisRef:R,yAxisRef:O,maxYLabelWidth:D,maxXLabelWidth:P,minXRequiredWidth:A}=m4(),{xGet:T,yGet:N,zGet:L}=c4({config:i}),{xFormat:U,yFormat:$,xTooltipFormat:V,yTooltipFormat:W,zTooltipFormat:Q}=u4({config:i}),{xDomain:q,yDomain:H}=cH({config:i,data:_,xGet:T,yGet:N,endTime:p,previousClose:h}),{innerHeight:K,innerWidth:G,xRange:ee,yRange:Y}=ww({width:r,height:s,margin:a,maxYLabelWidth:D,hasAxis:c}),{xNumTicks:te,yNumTicks:se,xTiltTicks:ae}=p4({config:i,innerWidth:G,innerHeight:K,maxXLabelWidth:P}),pe=d.useMemo(()=>Uo[i.x.scale]({range:[ee[0],P?ee[1]-P/2:ee[1]],domain:q}),[i.x.scale,ee,q,P]),fe=d.useMemo(()=>{const Ke=i.y.scale==="log";return Uo[i.y.scale]({range:Y,domain:H,base:Ke?2:void 0,nice:!Ke,round:!0})},[i.y.scale,Y,H]),ge=d.useMemo(()=>{if(!i.z?.accessor)return[{key:"",d:_}];const Ke=i.z.accessor,He=I1(_,Tt=>String(Tt[Ke]));return Object.entries(He).map(([Tt,We])=>({key:Tt,d:We}))},[_,i?.z?.accessor]),Se=d.useMemo(()=>{if(ge.length<=1)return null;const Ke=new Map;return ge.forEach(Tt=>{Tt.d.forEach(We=>{const _t=T(We);Ke.set(_t,We)})}),Array.from(Ke.values()).sort((Tt,We)=>T(Tt)-T(We))},[ge,T]),{tooltipData:je,hideTooltip:ye,handleTooltip:be}=g4({data:_,innerHeight:K,innerWidth:G,xScale:pe,yScale:fe,xGet:T,yGet:N}),Ne=mFt({tooltipData:je,config:i,groups:ge,xScale:pe,xGet:T}),ke=d.useMemo(()=>!y||!ge.length||!ge[0].d.length?null:ge[0].d.at(-1),[ge,y]),Ie=d.useMemo(()=>Hu().x(Ke=>pe(T(Ke))).y(Ke=>fe(N(Ke))).curve(qm),[pe,fe,T,N]),Ce=d.useMemo(()=>Uo.ordinal({domain:ge.map(({key:Ke})=>Ke),range:C}),[C,ge]),Ge=d.useCallback(()=>{je&&b(Ne||null)},[je,Ne]),tt=d.useCallback(()=>{b(null)},[]),gt=d.useMemo(()=>{const Ke={};if(!v||!Ne||!ge.length)return Ke;const He=T(v),Tt=T(Ne),[We,_t]=He<Tt?[He,Tt]:[Tt,He],Kt=Ut=>{const Rn=i.z?.accessor?Ut[i.z.accessor]:ge[0].key,rn=ge.find(({key:at})=>at===Rn);return rn?rn.d.filter(at=>{const yt=T(at);return yt>=We&&yt<=_t}):[]},en=i.z?.accessor?v[i.z.accessor]:ge[0].key;Ke[en]=Kt(v);const Rt=i.z?.accessor?Ne[i.z.accessor]:ge[0].key;return en!==Rt&&(Ke[Rt]=Kt(Ne)),Ke},[v,Ne,ge,T,i.z?.accessor]),Ee=d.useMemo(()=>{const Ke=gt[i.z?.accessor?v?.[i.z.accessor]:ge[0]?.key]||[],He=gt[i.z?.accessor?Ne?.[i.z.accessor]:ge[0]?.key]||[],Tt=[...Ke,...He],We=new Map;return Tt.forEach(Kt=>{We.set(T(Kt),Kt)}),Array.from(We.values()).sort((Kt,en)=>T(Kt)-T(en))},[gt,i.z?.accessor,v,Ne,ge,T]),Re=d.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),Vt=d.useMemo(()=>[h],[h]),pt=d.useCallback(Ke=>pe(T(Ke))??0,[pe,T]),Nt=d.useCallback(Ke=>fe(N(Ke))??0,[fe,N]);return o.jsxs(z,{children:[i.z&&ge?.length>1&&m&&o.jsx(z,{style:Re,children:o.jsx(Tw,{entries:ge.map(({key:Ke})=>({key:Ke,color:Ce(Ke)}))})}),o.jsxs(z,{className:"relative",onMouseDown:Ge,onMouseUp:tt,onMouseLeave:tt,children:[o.jsxs(zx,{width:r,height:s,children:[c&&o.jsx(kw,{width:r,height:s,margin:a,xScale:pe,yScale:fe,xFormat:U,yFormat:$,yNumTicks:se,xNumTicks:te,yTickValues:i.y.tickValues,xTickValues:i.x.tickValues,tickColor:S,axisColor:E,xAxisRef:R,yAxisRef:O,xTiltTicks:ae,xAxisLabel:i.x.label,yAxisLabel:i.y.label}),x&&x({xScale:pe,yScale:fe,xGet:T,yGet:N}),h&&o.jsx("text",{x:r-a.right-10,y:fe(h)-5,fill:k,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?n({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof i.y.format=="function"?i.y.format(h):h}):n({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof i.y.format=="function"?i.y.format(h):h})}),h&&o.jsx(Lp,{left:a.left,scale:fe,width:r-a.right-a.left*2,stroke:k,tickValues:Vt,strokeWidth:2,strokeDasharray:"2,6",opacity:j?.6:1}),Ne&&o.jsx(Ey,{marginTop:a.top,tooltipLeft:pe(T(Ne)),innerHeight:K,color:E,strokeWidth:1}),v&&o.jsx(Ey,{marginTop:a.top,tooltipLeft:pe(T(v)),innerHeight:K,color:E,strokeWidth:1}),Se&&ge.length>1&&ge[1]?.key&&o.jsx(ve.path,{d:Ie(Se),stroke:Ce(ge[1].key),strokeWidth:1.5,fill:"none",shapeRendering:"geometricPrecision",initial:f?{pathLength:f?0:1,opacity:f?0:1}:void 0,animate:f?{pathLength:1,opacity:1}:void 0,transition:f?{duration:.8,ease:ha}:void 0}),ge.map(({d:Ke,key:He},Tt)=>{const We=w.current.has(He),_t=We||!f?{initial:void 0,animate:{pathLength:1,opacity:1}}:{initial:{pathLength:f?0:1,opacity:f?0:1},animate:{pathLength:1,opacity:1},transition:{duration:.8,ease:ha,delay:Tt/ge.length}};return We||w.current.add(He),o.jsx(ve.path,{d:Ie(Ke),stroke:Ce(He),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",..._t},He)}),(Ne||ke)&&o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[o.jsx(Ab,{cx:pe(T(Ne||ke)),cy:fe(N(Ne||ke)),color:Ce(i.z?.accessor?(Ne||ke)?.[i.z.accessor]:""),r:5}),v&&Ne&&o.jsxs(o.Fragment,{children:[o.jsx(Ab,{cx:pe(T(v)),cy:fe(N(v)),color:Ce(i.z?.accessor?v[i.z.accessor]:""),r:5}),Ee.length>1&&o.jsx(oy,{data:Ee,x:pt,y:Nt,fill:Ce(ge[0].key),fillOpacity:.2,stroke:"none",yScale:fe,curve:qm})]})]}),(ge.length===1||ge.length===2)&&ge.map(({d:Ke,key:He},Tt)=>{const We=Ce(He);return o.jsx(ve.g,{initial:f?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:f?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:f?{duration:.8,ease:ha,delay:Tt/ge.length}:void 0,children:!v&&(ge.length===1||Tt===0)&&o.jsxs(o.Fragment,{children:[o.jsx(X3,{from:`${We}22`,to:`${We}00`,id:He}),o.jsx(oy,{data:Ke,x:pt,y:Nt,strokeWidth:0,yScale:fe,fill:`url('#${He}')`},He)]})},He)}),o.jsx(Nw,{margin:a,tooltipHandle:be,tooltipHide:ye,height:s,width:r,maxYLabelWidth:D})]}),Ne&&je&&o.jsx(jw,{tooltipTop:je.localPoint.y,tooltipLeft:je.localPoint.x,entry:Ne,UserToolTip:l?Ke=>o.jsx(l,{...Ke,comparisonEntry:v||void 0}):void 0,data:_,config:i,xFormat:V,yFormat:W,zFormat:Q,zGet:L,xGet:T,yGet:N})]})]})});y4e.displayName="CompositeLineChart";function pFt({xScale:e,xPosition:t}){const n=e.domain(),[r,s]=e.range(),a=(s-r)/(n.length-1),i=Math.min(Math.max(Math.round((t-r)/a),0),n.length-1);return n[i]}function hFt({tooltipData:e,config:t,groups:n,xScale:r,xGet:s}){const a=t.z?.accessor?e?.voronoiSite?.data?.[t.z?.accessor]:"",i=d.useMemo(()=>[...(n.find(({key:f})=>f===a)||n[0])?.d||[]].sort((f,m)=>s(f)-s(m)),[a,n,s]),l=e?.localPoint.x;return d.useMemo(()=>{if(!l)return;if("invert"in r){const m=r.invert(l),p=jx(i.map(s),m);return i?.[p-1]}const u=pFt({xScale:r,xPosition:l});return i.find(m=>String(s(m))===String(u))},[l,r,i,s])}const x4e=I.memo(e=>{const{$t:t}=Z(),{enableComparison:n=!0,width:r,height:s,margin:a={top:0,right:0,bottom:0,left:0},config:i,tooltip:l,axes:c=!0,colors:u,animate:f=!0,includeLegend:m=!0,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y=!1,children:x}=e,[v,b]=d.useState(null),_=l4({data:e.data}),w=Os(),{colorSchema:C,tickColor:S,axisColor:E,textColor:k}=i4(u),{colorScheme:M}=jr(),j=d.useMemo(()=>w?M==="dark":!1,[M,w]),{xAxisRef:R,yAxisRef:O,maxYLabelWidth:D,maxXLabelWidth:P,minXRequiredWidth:A}=m4(),{xGet:T,yGet:N,zGet:L}=c4({config:i}),{xFormat:U,yFormat:$,xTooltipFormat:V,yTooltipFormat:W,zTooltipFormat:Q}=u4({config:i}),{xDomain:q,yDomain:H}=cH({config:i,data:_,xGet:T,yGet:N,endTime:p,previousClose:h}),{innerHeight:K,innerWidth:G,xRange:ee,yRange:Y}=ww({width:r,height:s,margin:a,maxYLabelWidth:D,hasAxis:c}),{xNumTicks:te,yNumTicks:se,xTiltTicks:ae}=p4({config:i,innerWidth:G,innerHeight:K,maxXLabelWidth:P}),pe=d.useMemo(()=>Uo[i.x.scale]({range:[ee[0],P?ee[1]-P/2:ee[1]],domain:q}),[i.x.scale,ee,q,P]),fe=d.useMemo(()=>{const pt=i.y.scale==="log";return Uo[i.y.scale]({range:Y,domain:H,base:pt?2:void 0,nice:!pt,round:!0})},[i.y.scale,Y,H]),ge=d.useMemo(()=>{if(!i.z?.accessor)return[{key:"",d:_}];const pt=i.z.accessor,Nt=I1(_,Ke=>String(Ke[pt]));return Object.entries(Nt).map(([Ke,He])=>({key:Ke,d:He}))},[_,i?.z?.accessor]),{tooltipData:Se,hideTooltip:je,handleTooltip:ye}=g4({data:_,innerHeight:K,innerWidth:G,xScale:pe,yScale:fe,xGet:T,yGet:N}),be=hFt({tooltipData:Se,config:i,groups:ge,xScale:pe,xGet:T}),Ne=d.useMemo(()=>!y||!ge.length||!ge[0].d.length?null:ge[0].d.at(-1),[ge,y]),ke=d.useMemo(()=>Hu().x(pt=>pe(T(pt))).y(pt=>fe(N(pt))).curve(qm),[pe,fe,T,N]),Ie=d.useMemo(()=>Uo.ordinal({range:C}),[C]),Ce=d.useCallback(()=>{!Se||!n||b(be||null)},[n,Se,be]),Ge=d.useCallback(()=>{n&&b(null)},[n]),tt=d.useMemo(()=>{if(!v||!be||!ge.length)return[];const pt=ge[0],Nt=T(v),Ke=T(be),[He,Tt]=Nt<Ke?[Nt,Ke]:[Ke,Nt];return pt.d.filter(We=>{const _t=T(We);return _t>=He&&_t<=Tt})},[v,be,ge,T]),gt=d.useMemo(()=>({marginLeft:a.left,marginRight:a.right}),[a.left,a.right]),Ee=d.useCallback(pt=>pe(T(pt))??0,[pe,T]),Re=d.useCallback(pt=>fe(N(pt))??0,[fe,N]),Vt=d.useMemo(()=>[h],[h]);return o.jsxs(z,{children:[i.z&&ge?.length>1&&m&&o.jsx(z,{style:gt,children:o.jsx(Tw,{entries:ge.map(({key:pt})=>({key:pt,color:Ie(pt)}))})}),o.jsxs(z,{className:"relative",onMouseDown:Ce,onMouseUp:Ge,onMouseLeave:Ge,children:[o.jsxs(zx,{width:r,height:s,children:[c&&o.jsx(kw,{width:r,height:s,margin:a,xScale:pe,yScale:fe,xFormat:U,yFormat:$,yNumTicks:se,xNumTicks:te,yTickValues:i.y.tickValues,xTickValues:i.x.tickValues,tickColor:S,axisColor:E,xAxisRef:R,yAxisRef:O,xTiltTicks:ae,xAxisLabel:i.x.label,yAxisLabel:i.y.label}),x&&x({xScale:pe,yScale:fe,xGet:T,yGet:N}),h&&o.jsx("text",{x:r-a.right-10,y:fe(h)-5,fill:k,fontSize:12,className:"font-mono",textAnchor:"end",children:g==="CRYPTO"?t({defaultMessage:"Prev day: {value}",id:"7i8MvDtMyq"},{value:typeof i.y.format=="function"?i.y.format(h):h}):t({defaultMessage:"Prev close: {value}",id:"uRPxTu0cgj"},{value:typeof i.y.format=="function"?i.y.format(h):h})}),h&&o.jsx(Lp,{left:a.left,scale:fe,width:r-a.right-a.left*2,stroke:k,tickValues:Vt,strokeWidth:2,strokeDasharray:"2,6",opacity:j?.6:1}),be&&o.jsx(Ey,{marginTop:a.top,tooltipLeft:pe(T(be)),innerHeight:K,color:E,strokeWidth:1}),v&&o.jsx(Ey,{marginTop:a.top,tooltipLeft:pe(T(v)),innerHeight:K,color:E,strokeWidth:1}),(be||Ne)&&o.jsxs(ve.g,{initial:{opacity:0},animate:{opacity:1},transition:{duration:0,delay:.8},children:[o.jsx(Ab,{cx:pe(T(be||Ne)),cy:fe(N(be||Ne)),color:Ie(i.z?.accessor?(be||Ne)?.[i.z.accessor]:""),r:5}),v&&be&&tt.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(Ab,{cx:pe(T(v)),cy:fe(N(v)),color:Ie(i.z?.accessor?v[i.z.accessor]:""),r:5}),o.jsx(oy,{data:tt,x:Ee,y:Re,fill:Ie(i.z?.accessor?v[i.z.accessor]:""),fillOpacity:.2,stroke:"none",yScale:fe,curve:qm})]})]}),ge.length===1&&ge.map(({d:pt,key:Nt},Ke)=>{const He=Ie(Nt);return o.jsx(ve.g,{initial:f?{opacity:0,clipPath:"inset(0% 100% 0% 0%)"}:void 0,animate:f?{opacity:1,clipPath:"inset(0% 0% 0% 0%)"}:void 0,transition:f?{duration:.8,ease:"easeInOut",delay:Ke/ge.length}:void 0,children:!v&&o.jsxs(o.Fragment,{children:[o.jsx(X3,{from:`${He}22`,to:`${He}00`,id:Nt}),o.jsx(oy,{data:pt,x:Ee,y:Re,strokeWidth:0,yScale:fe,fill:`url('#${Nt}')`},Nt)]})},Nt)}),ge.map(({d:pt,key:Nt},Ke)=>o.jsx(ve.path,{d:ke(pt),stroke:Ie(Nt),strokeWidth:2,fill:"none",shapeRendering:"geometricPrecision",initial:f?{pathLength:0,opacity:0}:void 0,animate:f?{pathLength:1,opacity:1}:void 0,transition:f?{duration:.8,ease:"easeInOut",delay:Ke/ge.length}:void 0},Nt)),o.jsx(Nw,{margin:a,tooltipHandle:ye,tooltipHide:je,height:s,width:r,maxYLabelWidth:D})]}),be&&Se&&o.jsx(jw,{tooltipTop:Se.localPoint.y,tooltipLeft:Se.localPoint.x,entry:be,UserToolTip:l?pt=>o.jsx(l,{...pt,comparisonEntry:v||void 0}):void 0,data:_,config:i,xFormat:V,yFormat:W,zFormat:Q,zGet:L,xGet:T,yGet:N})]})]})});x4e.displayName="LineChart";const v4e=I.memo(e=>{const{width:t,height:n,margin:r,config:s,tooltip:a,colors:i,axes:l=!0}=e,c=3,u=l4({data:e.data}),{colorSchema:f,tickColor:m,axisColor:p}=i4(i),{xAxisRef:h,yAxisRef:g,maxYLabelWidth:y,maxXLabelWidth:x,minXRequiredWidth:v}=m4(),{innerHeight:b,innerWidth:_,xRange:w,yRange:C}=ww({width:t,height:n,margin:r,maxYLabelWidth:y,hasAxis:l}),{xNumTicks:S,yNumTicks:E,xTiltTicks:k}=p4({config:s,innerWidth:_,innerHeight:b,maxXLabelWidth:x}),{xGet:M,yGet:j,zGet:R}=c4({config:s}),{xFormat:O,yFormat:D,xTooltipFormat:P,yTooltipFormat:A,zTooltipFormat:T}=u4({config:s}),{xDomain:N,yDomain:L}=cH({data:u,config:s,xGet:M,yGet:j}),U=d.useMemo(()=>Uo[s.x.scale]({range:w,domain:N}),[s.x.scale,w,N]),$=d.useMemo(()=>Uo[s.y.scale]({range:C,domain:L,nice:!0,round:!0}),[s.y.scale,C,L]),{tooltipData:V,handleTooltip:W,hideTooltip:Q}=g4({data:u,innerHeight:b,innerWidth:_,xScale:U,yScale:$,xGet:M,yGet:j,voronoiRadius:c*2}),q=d.useMemo(()=>Uo.ordinal({range:f}),[f]),H=d.useMemo(()=>{if(!s.z?.accessor)return[];const ee=new Set([]);return u.forEach(Y=>ee.add(Y[s?.z?.accessor])),Array.from(ee)},[u,s.z]),K=V?.voronoiSite,G=d.useMemo(()=>({marginLeft:r.left,marginRight:r.right}),[r.left,r.right]);return o.jsxs(z,{children:[H.length>1&&o.jsx(z,{style:G,children:o.jsx(Tw,{entries:H.map(ee=>({key:ee,color:q(ee)}))})}),o.jsxs(z,{className:"relative",children:[o.jsxs(zx,{width:t,height:n,children:[o.jsx(kw,{xScale:U,yScale:$,xFormat:O,yFormat:D,width:t,height:n,margin:r,yTickValues:s.y.tickValues,xTickValues:s.x.tickValues,tickColor:m,axisColor:p,xAxisRef:h,yAxisRef:g,yNumTicks:E,xNumTicks:S,xTiltTicks:k}),K&&o.jsx(Ey,{marginTop:r.top,tooltipLeft:K[0],innerHeight:b,color:p}),o.jsx("g",{children:u.map((ee,Y)=>{const te=K?.data?.__key==ee.__key,se=s.z?.accessor?q(ee[s.z.accessor]):q("");return o.jsx(ve.circle,{"data-hint":`${M(ee)}: ${j(ee)}`,cx:U(M(ee)),cy:$(j(ee)),r:c,strokeWidth:c/2,stroke:se,fill:te?"transparent":se,initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,ease:"easeInOut",delay:Y/u.length}},ee.__key)})}),o.jsx(Nw,{margin:r,tooltipHandle:W,tooltipHide:Q,height:n,width:t,maxYLabelWidth:y})]}),K&&o.jsx(jw,{tooltipTop:K?.[1],tooltipLeft:K?.[0],UserToolTip:a,entry:K.data,data:u,config:s,xFormat:P,yFormat:A,zFormat:T,zGet:R,xGet:M,yGet:j})]})]})});v4e.displayName="ScatterChart";function gFt(e){const{type:t,config:n,width:r,data:s,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:f,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:x,enableComparison:v}=e;return t==="line"?o.jsx(x4e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:f,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,enableComparison:v,children:x}):t==="bar"?o.jsx(g4e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,colors:u,includeLegend:m}):t==="scatter"?o.jsx(v4e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,colors:u,includeLegend:m}):t==="compositeLine"?o.jsx(y4e,{data:s,config:n,width:r,height:a,margin:i,tooltip:l,axes:c,colors:u,animate:f,includeLegend:m,endTime:p,previousClose:h,exchangeName:g,showLastPoint:y,children:x}):null}const b4e=I.memo(function({type:t,config:n,data:r,tooltip:s,height:a=Cy,margin:i=mLt,axes:l,className:c,colors:u,includeLegend:f,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,children:x,enableComparison:v}){const b=d.useRef(null),{width:_}=uH(b);return o.jsx("div",{ref:b,className:c,children:o.jsx(gFt,{type:t,data:r,config:n,width:_,height:a,margin:i,tooltip:s,axes:l,colors:u,includeLegend:f,endTime:m,previousClose:p,exchangeName:h,showLastPoint:g,animate:y,enableComparison:v,children:x})})});b4e.displayName="Chart";const Jcn=({data:e,brands:t,teams:n,isLive:r,isFinal:s,startLabel:a,endLabel:i,nowLabel:l,shouldAdjustColors:c=!0,nicknameFormatter:u,tooltip:f})=>{const m=d.useMemo(()=>n.map((A,T)=>({...A,uniqueName:A.name+"".repeat(T+1)})),[n]),{teamsData:p}=d.useMemo(()=>({teamsData:m.map(A=>{const T=A.brand||t4e(A.id,t),N=e[A.id]?.candlesticks||[];return{id:A.id,name:A.name,uniqueName:A.uniqueName,brand:T,candlesticks:N}})}),[m,e,t]),{colorScheme:h,isColorSchemeReady:g}=jr(),{earliestTimestamp:y,latestTimestamp:x}=d.useMemo(()=>{let A=1/0,T=0;return p.forEach(N=>{if(N.candlesticks.length>0){const L=N.candlesticks[0]?.timestamp,U=N.candlesticks[N.candlesticks.length-1]?.timestamp;L&&(A=Math.min(A,L)),U&&(T=Math.max(T,U))}}),{earliestTimestamp:A===1/0?0:A,latestTimestamp:T}},[p]),v=d.useMemo(()=>y?new Date(y*1e3):null,[y]),b=d.useMemo(()=>x?new Date(x*1e3):null,[x]),_=d.useMemo(()=>p.flatMap(A=>A.candlesticks.map(T=>({timestamp:new Date(T.timestamp*1e3),value:(T.price.open+T.price.close)/2,team:A.uniqueName}))),[p]),{locale:w}=Z(),C=!r&&!s,[S,E]=d.useState(!1),{isMobileStyle:k}=xe();d.useEffect(()=>{E(!0)},[]);const M=d.useMemo(()=>{const A=[];if((r||s)&&v&&b)A.push(v,b);else if(C&&v&&b){const T=b.getTime()-v.getTime();A.push(v,new Date(v.getTime()+T/2),b)}return A},[r,s,C,v,b]),R={x:{accessor:"timestamp",scale:"time",format:d.useMemo(()=>{const A=M.map((T,N)=>{const L=N===0||N>0&&T.toDateString()!==M[N-1]?.toDateString();return{date:T,shouldShowDate:L}});return T=>C?A.find(U=>U.date.getTime()===T.getTime())?.shouldShowDate??!0?k?T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"}):k?T.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):T.toLocaleString(w,{hour:"numeric",minute:"numeric"}):!v||!b?"":T.getTime()===v.getTime()?a:T.getTime()===b.getTime()?s?i:r?l:"":k?T.toLocaleString(w,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00","").replace(" AM","a").replace(" PM","p"):r?T.toLocaleString(w,{hour:"numeric",minute:"numeric"}):T.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},[M,C,k,w,v,b,s,r,a,i,l]),tickValues:M.length>0?M:void 0,tooltipFormat:A=>A.toLocaleString(w,{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})},y:{accessor:"value",scale:"linear",format:A=>RIt(A/100)},z:{accessor:"team",scale:"ordinal",label:"team",format:A=>A.replace(/\u200B/g,"")}},O=d.useMemo(()=>{if(!S||!c)return p.map(N=>N.brand?.color||"#4a90e2");let A=null;return p.map(N=>{const L=cr(N.brand?.color||"#4a90e2"),U=gk(L,h==="dark"),$=cr(N.brand?.color||"#4a90e2"),V=gk($,h==="dark"),W=kL(U,V,h==="dark",2);if(A){const Q=kL(W,A,W.isDark(),2);return A=Q,Q.hex()}return A=W,W.hex()}).map(N=>N.toString())},[p,h,g,S,c]),{$t:D}=Z(),P=n.length>2;return o.jsxs("div",{children:[o.jsxs(z,{className:B("mb-sm pb-sm -mx-md -mt-sm px-md flex border-b",{"flex-col":P,"items-center justify-between":!P}),children:[o.jsx(F,{variant:"baseSemi",className:P?"mb-sm":void 0,children:D({id:"J3+o0a6LLR",defaultMessage:"Odds to win"})}),o.jsx("div",{className:B("gap-md flex items-center",{"flex-wrap":P}),children:p.map((A,T)=>o.jsx(bFt,{nickname:u?u(A.name):A.name,color:O[T]||"#4a90e2"},A.id))})]}),o.jsx(b4e,{type:"line",data:_,config:R,height:200,margin:yFt,className:"w-full",includeLegend:!1,colors:{colorSchema:O},enableComparison:!1,tooltip:f})]})},yFt={top:16,right:-6,bottom:10,left:8},gk=(e,t)=>{const n="#f7f1f2",r="#1f2121";return e?kL(e,cr(t?r:n),t):cr(n)},kL=(e,t,n,r=3)=>{if(!e)return cr(t);let s=cr(e),a=0,i=0;for(;s.contrast(cr(t))<r&&(s=n?xFt(s,a):vFt(s,a),a+=.01,i++,!(i>20)););return s};function xFt(e,t){const n=e.lightness();return e.lightness(n+(100-n)*t)}function vFt(e,t){const n=e.lightness();return e.lightness(n-n*t)}const bFt=({nickname:e,color:t})=>o.jsxs(z,{className:"gap-xs flex items-center",children:[o.jsx(z,{className:"size-2 rounded-full",style:{backgroundColor:t}}),o.jsx(F,{variant:"small",children:e})]}),_Ft=({event:e})=>{const t=e.event.status==="live",n=e.event.extra.pitch_outcome,r=n?.count?.outs??0,s=n?.count?.balls??0,a=n?.count?.strikes??0,i=n?.runners,l=n?.count,c=n?.type!=="half_over"&&r!==3&&s!==4&&a!==3;return t?o.jsxs("div",{className:"mt-lg md:mt-md flex flex-col items-center gap-0",children:[o.jsx(wFt,{runners:i}),o.jsx(CFt,{outs:r}),o.jsx(SFt,{count:l,show:c})]}):null},wFt=({runners:e})=>{const t=e?.filter(n=>!n.out).map(n=>n.ending_base);return o.jsx("div",{style:{transformStyle:"preserve-3d",perspective:"1000px"},className:"inline-flex",children:o.jsx("div",{style:{transform:"rotateX(45deg)"},children:o.jsxs("div",{className:"gap-three grid rotate-45 grid-cols-2 grid-rows-2",children:[o.jsx(oR,{active:t?.includes(2)??!1}),o.jsx(oR,{active:t?.includes(1)??!1}),o.jsx(oR,{active:t?.includes(3)??!1})]})})})},oR=({active:e})=>o.jsx("div",{className:B("size-3 duration-150 md:size-4",e?"bg-super":"bg-inverse/25")}),CFt=({outs:e})=>o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(iR,{filled:e>=1}),o.jsx(iR,{filled:e>=2}),o.jsx(iR,{filled:e>=3})]}),iR=({filled:e})=>o.jsx("div",{className:B("relative size-1 rounded-full duration-150",e?"bg-inverse":"bg-inverse/25"),children:e&&o.jsx("div",{className:"bg-inverse repeat-1 absolute inset-0 animate-ping rounded-full"})}),SFt=({count:e,show:t})=>{const n=e?.balls??0,r=e?.strikes??0,s=n===0&&r===0;return o.jsx(F,{variant:"micro",color:s?"ultraLight":"light",className:B("mt-1 duration-150",t?"opacity-100":"opacity-0"),children:o.jsx("span",{className:"font-mono",children:t?`${n}-${r}`:o.jsx(o.Fragment,{children:""})})})};function EFt({children:e,className:t}){return o.jsx(F,{variant:"micro",className:B("py-xs !font-mono uppercase",t),color:"light",children:e})}const eun="[&_tr>td:first-child]:pl-md [&_tr>th:first-child]:pl-md [&_tr>td:last-child]:pr-md [&_tr>th:last-child]:pr-md",Aw=({className:e,textCenter:t,finalText:n})=>{const{$t:r}=Z(),{isMobileStyle:s}=xe();return o.jsx("div",{className:B("flex items-center justify-center",e),children:o.jsx(F,{variant:s?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-subtle pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n?n.toUpperCase():r({defaultMessage:"Final",id:"6/JzkWi0di"}).toUpperCase()})})},_4e=({className:e,textCenter:t=!1})=>{const{$t:n}=Z(),{isMobileStyle:r}=xe();return o.jsx("div",{className:B("flex items-center justify-center",e),children:o.jsx(F,{variant:r?"micro":"tiny",color:"light",className:"bg-subtler dark:bg-subtle pt-three rounded-full px-2.5 py-0.5",textCenter:t,children:n({defaultMessage:"Upcoming",id:"6/aEFZbs2i"}).toUpperCase()})})},w4e=I.memo(function({attributions:t}){const{$t:n}=Z(),r=t.join("  ");return o.jsxs(z,{className:"mt-md pt-md pb-lg flex flex-col gap-1 border-t",children:[o.jsx(F,{variant:"smallBold",color:"light",className:"text-center",children:r}),o.jsx(F,{variant:"small",color:"light",className:"text-center",children:n({defaultMessage:"{perplexity} is not affiliated with, endorsed by, or sponsored by any sports leagues or teams. All trademarks, team names, logos, and player images are the property of their respective owners. The content provided on this page is for informational purposes only and is intended to help users follow sports news and updates.",id:"M0PBu8vKH2"},{perplexity:"Perplexity"})})]})});w4e.displayName="SportsSources";const C4e=I.memo(({children:e,innerRef:t,canScrollLeft:n,canScrollRight:r,fadeOut:s})=>o.jsx("div",{className:"gap-md flex w-full flex-col overflow-hidden",children:o.jsx(sl,{orientation:"horizontal",viewportRef:t,showScrollIndicator:!1,className:B("relative",{"mask-fade-l-12":n&&!r&&s,"mask-fade-r-12":r&&!n&&s,"mask-fade-h-12":n&&r&&s}),children:o.jsx("div",{className:"p-md pt-0",children:e})})}));C4e.displayName="CanonicalScroll";const y4=I.memo(({title:e,subtitle:t,children:n,scrollable:r,fadeOut:s,trailing:a,titleClassName:i})=>{const l=d.useRef(null),[c,u]=d.useState(!1),[f,m]=d.useState(!1),p=d.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft-l.current.clientWidth,behavior:"smooth"})},[l]),h=d.useCallback(()=>{l.current?.scrollTo({left:l.current.scrollLeft+l.current.clientWidth,behavior:"smooth"})},[l]),g=d.useCallback(()=>{l.current&&(u(l.current.scrollLeft>0),m(l.current.scrollLeft+l.current.clientWidth+10<l.current.scrollWidth&&l.current.scrollWidth>l.current.clientWidth))},[l]);return d.useEffect(()=>{const y=l.current;return y?.addEventListener("scroll",g),()=>{y?.removeEventListener("scroll",g)}},[g,l]),d.useEffect(()=>{const y=new ResizeObserver(g);return y.observe(window.document.body),()=>{y.disconnect()}},[g,l]),d.useEffect(()=>{g()},[g]),o.jsxs(z,{className:"gap-md flex flex-col",children:[o.jsxs(S4e,{title:e,subtitle:t,className:i,children:[a,r&&o.jsxs("div",{className:"-mr-sm flex items-center",children:[o.jsx(Me,{icon:cp,size:"small",onClick:p,disabled:!c,variant:c?void 0:"noHover"}),o.jsx(Me,{icon:Xn,size:"small",onClick:h,disabled:!f,variant:f?void 0:"noHover"})]})]}),r?o.jsx(C4e,{innerRef:l,canScrollLeft:c,canScrollRight:f,fadeOut:s,children:n}):o.jsx("div",{ref:l,className:"gap-md px-md pb-md flex flex-col",children:n})]})});y4.displayName="CanonicalSection";const S4e=I.memo(({children:e,title:t,subtitle:n,className:r})=>o.jsxs(z,{className:B("gap-md px-md py-sm flex items-center justify-between border-b",r),children:[o.jsxs(z,{className:"flex items-center justify-between",children:[t&&o.jsx(F,{variant:"baseSemi",children:t}),n&&o.jsx(F,{variant:"smallCaps",color:"light",children:n})]}),e]}));S4e.displayName="SectionTitle";const MFt={tiny:"size-[16px]",small:"size-[24px]",medium:"size-[32px]",large:"xl:size-[64px] size-[50px]"},kFt={tiny:"p-[0.5px]",small:"p-[0.5px]",medium:"p-[0.5px]",large:"p-[0.5px]"},TFt={tiny:"border-[1px]",small:"border-[1px]",medium:"border-[2px]",large:"border-[4px]"},Ls=d.memo(({includeStripe:e=!0,includeShadow:t=!1,className:n,includeBackground:r=!1,size:s="large",logo:a,color:i,...l})=>{const c=d.useMemo(()=>{let u=MFt[s];return r&&(u+=` ${kFt[s]}`),u},[r,s]);return o.jsx("div",{className:B(c,{"shadow-subtle":t&&r,"border-subtlest rounded-full border bg-white dark:border-transparent":r},n),...l,children:o.jsx("div",{className:B("rounded-inherit relative flex size-full items-center justify-center",{[TFt[s]]:e&&r}),style:{borderColor:r?i:void 0},children:o.jsx("img",{src:a,alt:"",width:r?"70%":"100%",height:"auto"})})})});Ls.displayName="SportsTeamLogo";function My(e,t){return e=Math.abs(e/100),e.toLocaleString(t,{style:"percent",maximumFractionDigits:0})}const NFt=new Map([["one","st"],["two","nd"],["few","rd"],["other","th"]]),jFt=new Intl.PluralRules("en-US",{type:"ordinal"});function E4e(e){if(!e&&e!==0||isNaN(e))return"";const t=NFt.get(jFt.select(e));return`${e}${t}`}function AFt(e,t){if(t!=="upcoming"||e<new Date)return!1;const n=new Date;return Math.abs(+e-+n)<1e3*60*60*24}function tun(e){return new Date(e.toLocaleDateString(void 0,{timeZone:"UTC"}))}function yk(e,t){const n=_xe();return d.useMemo(()=>!n||!t?e:gk(cr(e),t==="dark").toString(),[e,t,n])}const nun=(e,t,n,r)=>{if(!e||!t)return n;const s=new Date(e),a=new Date(t),i={month:"short",day:"numeric"};s.getFullYear()!==a.getFullYear()&&(i.year="numeric");const l=s.toLocaleDateString(r,i),c=a.toLocaleDateString(r,{...i,year:"numeric"});return s.toDateString()===a.toDateString()?c:s.getMonth()===a.getMonth()&&s.getFullYear()===a.getFullYear()?`${s.toLocaleDateString(r,{month:"short"})} ${s.getDate()}-${a.getDate()}, ${a.getFullYear()}`:`${l} - ${c}`},IFt=(e,t)=>({title:null,team_1_super_text:null,team_2_super_text:null,team_1_text:e,team_2_text:t,team_1_emphasis:!1,team_2_emphasis:!1,isTextColorSuper:!0}),run=e=>{const t=e.stat_columns||[],n=[{show:e.team_1.text&&e.team_2.text,team1:e.team_1.text,team2:e.team_2.text},{show:e.team_1.sub_text&&e.team_2.sub_text,team1:e.team_1.sub_text,team2:e.team_2.sub_text}].filter(r=>r.show).map(r=>IFt(r.team1,r.team2));return[...t,...n]},M4e=I.memo(({variant:e="common",active:t,vertical:n,onClick:r,indicatorPos:s="bottom",extraCSS:a,showNewIndicator:i,styleProps:l,isNewRedesign:c=!1,disabled:u,innerRef:f,...m})=>{const p=B("absolute",{"right-0 h-full w-[3px] rounded-l-sm":s=="right","left-0 h-full w-[3px] rounded-l-sm":s=="left","bottom-0 left-0 right-0 h-[3px] rounded-t-sm":s=="bottom","top-0 left-0 right-0 h-[3px] rounded-b-sm":s=="top","bg-inverse":e==="primary","bg-inverse/70":e==="common"},l?.indicatorClass),h=B({"px-xs transition duration-300 relative ":n,"flex items-center":t&&n,"justify-center px-xs":!n,"!cursor-not-allowed":u,"my-0.5 [&_*]:!font-normal [&_*]:!text-foreground [&_a]:hover:bg-subtler":c,"[&_a]:bg-subtle [&_a]:text-foreground [&_a]:hover:bg-subtle":c&&t,"opacity-70 cursor-not-allowed":u},t?l?.activeBgClass:l?.bgClass);return o.jsxs("div",{onClick:u?void 0:r,className:h,children:[i&&o.jsx("div",{className:"right-md top-sm text-super absolute z-10",children:""}),o.jsx(Me,{variant:u?"noHover":t?"primary":"common",...m,fullWidth:!0,extraCSS:B("py-md focus-visible:!bg-transparent before:absolute before:opacity-0 focus-visible:before:opacity-100 before:ring-super/50 before:ring-[1.5px] before:inset-y-0 before:inset-x-[-10px] before:rounded-md",{"cursor-not-allowed":u},a),noXPadding:!n,disabled:u,ref:f??void 0}),t&&!u&&o.jsx(ve.div,{layout:"position",layoutId:"tab-indicator",className:p,transition:{duration:.1,ease:"easeOut"}})]})});M4e.displayName="TabButton";const Iw=I.memo(({actionList:e,size:t=Yt.regular,variant:n="primary",fillSpace:r=!1,vertical:s=!1,layout:a="left",indicatorPos:i,iconOnly:l,allowScroll:c,tabClass:u,testId:f,layoutGroupId:m,styleProps:p,isNewRedesign:h=!1,activeTabRef:g})=>{const y=B({"w-full":r&&!c,"flex w-auto":c,"justify-center":a==="center","justify-end":a==="right"},p?.wrapperClass),x=B("items-center relative",{"justify-center":a==="center","flex-1":r,"w-full":r&&!c,"w-auto overflow-hidden flex":c},p?.innerClass),v=B("flex",{"w-full":r&&!c,"w-auto overflow-x-auto overflow-y-hidden flex-1 scrollbar-none":c},p?.scrollClass),b=B("items-center relative scrollbar-none",{"flex-1":r,"space-y-xs":s&&!h,"gap-x-md flex h-14":!s&&t!=="tiny","gap-x-sm flex h-10":!s&&t==="tiny","w-full":!s&&!c,"flex px-md w-auto overflow-x-auto":c},p?.scrollInnerClass),_=B("relative",{"h-full flex items-center":!s,"justify-center":r,"w-full":r&&!c,"flex-1 shrink-0":c},p?.itemClass);return o.jsx("div",{className:y,"data-test-id":f,children:o.jsx("div",{className:x,children:o.jsx("div",{className:v,children:o.jsx("div",{className:b,children:o.jsx(Ec,{id:m,children:e.map(w=>w.show?o.jsxs(z,{className:_,children:[o.jsx(M4e,{testId:w.testId,ariaLabel:w.ariaLabel,vertical:s,text:l?void 0:w.text,size:t,variant:n,onClick:w.onClick,fullWidth:r,active:w.active,icon:w.icon,href:w.href,target:w.target,layout:a,tooltipLayout:i==="right"?"right":"top",toolTip:w.tooltip,indicatorPos:i,trailingComponent:w.trailingComponent,extraCSS:u,showNewIndicator:w.showNewIndicator,styleProps:p?.tabButton,isNewRedesign:h,disabled:w.disabled,innerRef:w.active?g:void 0}),!l&&w.badge&&o.jsx(F,{className:"bg-super pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 rounded-md px-1 py-0.5 text-white",variant:"tiny",children:w.badge}),w.children&&o.jsx(o.Fragment,{children:w.children})]},w.key??w.text):null)})})})})})});Iw.displayName="TabBar";const RFt=[17,16];function sun({event:e,league:t,brands:n,isLive:r}){const{$t:s}=Z(),[a,i]=d.useState(!1),[l,c]=d.useState("all"),u=d.useMemo(()=>(e.matchEvents?e.matchEvents.liveData.event:[]).filter(m=>l==="all"?!0:RFt.includes(m.typeId[0])).reduce((m,p)=>(m[p.periodId[1].toString()]=m[p.periodId[1].toString()]||[],m[p.periodId[1].toString()]?.push(p),m),{}),[e?.matchEvents,l]),f=d.useMemo(()=>[{text:s({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>c("all"),show:!0,active:l==="all"},{text:s({defaultMessage:"Key Plays",id:"CyNRXF54hv"}),onClick:()=>c("key"),show:!0,active:l==="key"}],[l,s]);return o.jsxs(o.Fragment,{children:[o.jsx(z,{variant:"raised",className:"rounded-xl border",children:o.jsx(y4,{title:s(r?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:o.jsx("div",{className:"-mb-sm",children:o.jsx(Iw,{actionList:f,layoutGroupId:"soccer-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:o.jsx("div",{className:"-my-md",children:o.jsx(CH,{plays:u,event:e,onViewAll:()=>i(!0),playsToRender:6,reverse:!0,brands:n,inModal:!1,league:t})})})}),a&&o.jsx(DFt,{plays:u,isOpen:a,onClose:()=>i(!1),event:e,brands:n,reverse:!0,setOpen:i,league:t})]})}const k4e=({isRed:e,className:t})=>o.jsx("svg",{width:"16",height:"19",viewBox:"0 0 16 19",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:B("shrink-0",t),children:o.jsx("rect",{x:"4.29248",y:"0.726685",width:"12",height:"15",rx:"2",transform:"rotate(14.6454 4.29248 0.726685)",fill:e?"#EB4E45":"#f6c825"})}),CH=d.memo(({plays:e,onViewAll:t,playsToRender:n=1/0,reverse:r=!0,brands:s,inModal:a=!1,league:i})=>{const{$t:l}=Z(),c=r?[...Object.keys(e)].reverse():Object.keys(e),u=d.useMemo(()=>{let f=n;return o.jsxs(z,{children:[c.map(m=>{let p=0;const h=e[m]?.length??0;return f<=0?null:(f<h?(p=f,f=0):(p=h,f-=h),o.jsx(PFt,{plays:e[m]??ce,playsToRender:p,period:m,reverse:r,brands:s,league:i},m))}),!a&&t&&o.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:o.jsx(Me,{variant:"super",chevron:!0,chevronIcon:Xn,text:l({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:t})})]})},[e,n,r,a,t,l,c,s,i]);return a?u:o.jsx(na,{className:"relative isolate",mode:"popLayout",transition:{duration:.2,ease:an},children:o.jsx(Zr,{children:u})})});CH.displayName="PlaysByPeriod";function PFt({plays:e,playsToRender:t,period:n,reverse:r,brands:s,league:a}){const i=d.useMemo(()=>r?[...e].reverse():e,[e,r]),l=Os();return o.jsxs(z,{children:[t>0&&o.jsx(z,{variant:"subtle",className:B("-mx-md px-md py-sm sticky top-0 z-10 flex items-center justify-between"),children:o.jsx(F,{variant:"smallCaps",color:"light",children:n})}),o.jsx(Ec,{children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:i.slice(0,t).map(c=>o.jsx(T4e,{play:c,brands:s,parentHasMounted:l,league:a},c.id))})})]})}const T4e=d.memo(({play:e,brands:t,parentHasMounted:n,league:r})=>{const{$t:s}=Z(),a=d.useRef(!n),i=Sy(e.contestantId,t,r),{colorScheme:l}=jr(),c=yk(i.color,l)?.toString()??i.color;return o.jsxs(ve.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:a.current?void 0:{opacity:0},animate:a.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:an},opacity:{duration:.2,ease:_a}},layout:"position",children:[o.jsx("div",{className:"left-xs inset-y-xs absolute w-1 rounded-full opacity-50",style:{backgroundColor:c}}),!a.current&&o.jsx(ve.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:_a,delay:.2}}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx(Ls,{logo:i.logo,color:i.color,size:"small",includeStripe:!1}),o.jsxs("div",{className:"gap-sm flex flex-1 flex-row items-center",children:[o.jsxs("div",{className:"gap-md flex items-baseline",children:[o.jsx(F,{variant:"tiny",color:"light",className:"whitespace-nowrap",children:e.periodId[1]==="PENALTIES"?`${s({defaultMessage:"PK",id:"mG6A02k2Ar"})} ${e.timeMin}`:`${e.timeMin}'`}),o.jsx(F,{variant:"small",children:e.commentary_text})]}),LFt(e)&&o.jsx(k4e,{isRed:OFt(e)==="red"})]})]})]})});T4e.displayName="Play";const LFt=e=>e.typeId[0]===17,OFt=e=>{const t=e.commentary_text.toLowerCase();return t.includes("second yellow card")||t.includes("red card")?"red":t.includes("yellow card")?"yellow":null},DFt=({plays:e,isOpen:t,setOpen:n,event:r,brands:s,reverse:a,league:i})=>{const l=d.useRef(null),{isMobileStyle:c}=xe();return o.jsx(qt,{modalContentClassname:"!py-0 mb-0 min-h-0",modalClassname:"[&_>div]:min-h-0",isOpen:t,onClose:()=>n(!1),variant:c?"bottom-sheet":"side-sheet",includeBlur:!1,children:o.jsxs("div",{className:"flex min-h-0 flex-1 flex-col",children:[o.jsx(F,{variant:"section-title",className:"py-sm -mt-sm -mx-md px-md border-subtlest shadow-subtle border-b",children:"Play by Play"}),o.jsx("div",{ref:l,className:"-mx-md px-md scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:o.jsx(CH,{plays:e,event:r,brands:s,inModal:!0,reverse:a,league:i})})]})})},FFt=({event:e})=>{const n=[...e.matchStats?.contestantStats.map(r=>{const s=r.goal_events.map(i=>({type:"goal",event:i})),a=r.red_card_events.map(i=>({type:"red_card",event:i}));return[...s,...a]})??[]].map(r=>r.sort((s,a)=>s.event[0]-a.event[0]));return!n||n.length===0?null:o.jsx("div",{className:"gap-md p-md grid grid-cols-2",children:n.map((r,s)=>o.jsx(UFt,{events:r,position:s===0?"left":"right"},s))})},UFt=({events:e,position:t})=>o.jsx("div",{className:B("gap-xs flex flex-col",{"items-start":t==="left","items-end":t==="right"}),children:e.map((n,r)=>o.jsx(BFt,{event:n,position:t},r))}),BFt=({event:e,position:t})=>o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsxs(F,{variant:"tiny",className:B("flex items-center gap-1",{"flex-row-reverse":t==="right"}),children:[o.jsx($Ft,{event:e})," ",e.event[1]]}),o.jsxs(F,{variant:"tiny",color:"light",children:[e.event[0],"'"]})]}),$Ft=({event:e})=>e.type!=="goal"?o.jsx(k4e,{isRed:!0,className:"size-md inline-block"}):o.jsx("div",{className:"size-md inline-block",children:""}),N4e=I.memo(()=>o.jsx("div",{}));N4e.displayName="SportsWidgetErrorFallback";const yoe=new Set,VFt=e=>e.status==="live"||e.status==="upcoming";function WFt({widget:e}){const{isMobileStyle:t}=xe(),{result:{backend_uuid:n,mode:r}}=pn(),s=KT();if(d.useEffect(()=>{!n||!e||!e?.events?.length||yoe.has(n)||(s("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:r}),yoe.add(n))},[n,e?.events?.length,r,e,s]),!e?.events?.length)return null;const a=e.canonical_pages?.[0]?.url_web,i=e.events.at(0),l=!t&&(i&&VFt(i)||e.events.length<5),c=e.league??"nba";return o.jsx(Nr,{fallback:N4e,children:o.jsx(Fi,{widgetType:"sports",widgetName:e.object,children:({widgetSelected:u})=>o.jsx(j4e,{canonicalPageLink:a,children:o.jsx(YFt,{events:e.events,showHero:l,widgetSelected:u,league:c})})})})}const j4e=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(qe,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Xn,{size:18})]})}):null]})},A4e=({initialData:e,refetch:t=!1,reason:n})=>Ue({initialData:e,queryKey:["sports/events/widget",e.id],queryFn:async()=>{if(!e.refetch_url)return e;const r=await Ple({urlPath:e.refetch_url,timeoutMs:0,reason:n});if(!r.ok)throw ne.error("Failed to fetch sport event",{url:e.refetch_url,status:r.status,statusText:r.statusText}),new Error(`Failed to fetch sport event ${r.status} ${r.statusText}`);return await r.json()},refetchInterval:r=>r.state.data?.refetch_url?r.state.data?.refetch_interval_secs*1e3:!1,enabled:!!e.refetch_url&&t}),HFt=({event:e,onClick:t,eventCount:n,league:r})=>{const{data:s}=A4e({initialData:e,refetch:!0,reason:"sports-event-row"}),a=I4e(),i=r==="nba"&&e4e(s.title[0]??""),l=O4e(s.team_1,s.team_2),c=i?l:null,u=d.useMemo(()=>[{title:s.team_1.title,score:s.team_1.text,subscore:s.team_1.sub_text,image:s.team_1.img,emphasized:s.team_1.won,period:s.period_text},{title:s.team_2.title,score:s.team_2.text,subscore:s.team_2.sub_text,image:s.team_2.img,emphasized:s.team_2.won,period:s.period_text}],[s]);return o.jsx(L4e,{href:s.url?.url_web,onClick:()=>t(s.url?.url_web),children:o.jsx(ZFt,{title:s.status==="live"?"LIVE":a(s.datetime,s.datetime_tba,s.datetime_end),isLive:s.status==="live",items:u,period:R4e(s.period_text,s.period_time,r)??null,eventCount:n,subtitle:c??void 0},s.id)})},zFt=({events:e,onClick:t,league:n})=>o.jsx("div",{className:B("bg-subtlest grid grid-cols-1 rounded-b-lg md:grid-cols-2",{"lg:grid-cols-3":e.length>2}),children:e.map(r=>o.jsx(HFt,{event:r,onClick:t,eventCount:e.length,league:n},r.id))}),GFt=e=>{const{locale:t}=Z();return e?new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):""},qFt=e=>e.join("  "),I4e=({includeTime:e=!0}={})=>{const{$t:t}=Z(),{locale:n}=Z();return d.useCallback((r,s,a)=>{if(a){if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const m=new Date(r),p=new Date(a),h=m.getFullYear();if(!(h===new Date().getFullYear())){const w=m.toLocaleDateString(n,{month:"short"}),C=p.toLocaleDateString(n,{month:"short"}),S=m.getDate(),E=p.getDate();return w===C?`${w} ${S}-${E}, ${h}`:`${w} ${S}-${C} ${E}, ${h}`}const y=m.toLocaleDateString(n,{month:"short"}),x=p.toLocaleDateString(n,{month:"short"}),v=m.getDate(),b=p.getDate();let _;if(y===x?_=`${y} ${v}-${b}`:_=`${y} ${v}-${x} ${b}`,e){const w=s?"TBA":m.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${_}, ${w}`}return _}if(!r&&s)return t({defaultMessage:"TBA",id:"ZfAWFLTzx/"});if(!r)return"";const i=new Date(r),l=r&&s,c=i.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});if(W5(i))return e?`${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}, ${c}`:t({defaultMessage:"Today",id:"zWgbGgjUUg"});if(UQe(i))return e?`${t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"})}, ${c}`:t({defaultMessage:"Yesterday",id:"6dIxDP1C8c"});if(hhe(i))return e?`${t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"})}, ${c}`:t({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"});if(i.getFullYear()!==new Date().getFullYear())return new Date(i).toLocaleDateString(n,{month:"short",day:"numeric",year:"numeric"});const u=i.toLocaleDateString(n,{month:"short",day:"numeric"});if(!e)return u;const f=l?"TBA":i.toLocaleTimeString(n,{hour:"numeric",minute:"numeric",timeZoneName:"short"});return`${u}, ${f}`},[n,t,e])},R4e=(e,t,n)=>{if(n==="mlb")return KFt(e);if(!e||typeof t?.seconds!="number"&&typeof t?.minutes!="number")return e;const r=t?.seconds?.toString().padStart(2,"0")??"00",s=t?.minutes??0;return`${e} ${s}:${r}`},KFt=e=>e?.replace("Top","").replace("Bot",""),YFt=({events:e,showHero:t,widgetSelected:n,league:r})=>{const s=d.useMemo(()=>t?e.slice(1):e,[e,t]),{data:a}=A4e({initialData:e[0],refetch:t,reason:"sports-widget-dense"});return o.jsxs(z,{children:[t&&o.jsxs(L4e,{href:a?.url?.url_web,onClick:()=>{n(a?.url?.url_web)},children:[o.jsx(QFt,{event:a,includeBorder:s.length>0,league:r,statusExtra:a&&r==="mlb"&&a.status==="live"?o.jsx(_Ft,{event:{event:a}}):null}),r==="championsleague"&&a&&o.jsx(FFt,{event:{event:a,brands:[],candlestickData:null,matchEvents:null,matchStats:a.extra?.match_stats??null,eventExtra:null}})]}),o.jsx(zFt,{events:s,onClick:n,league:r})]})},P4e=()=>o.jsx("span",{className:"text-quietest",children:""}),L4e=({children:e,href:t,onClick:n})=>t?o.jsx(qe,{href:t,className:"group/link group",onClick:n,children:e}):o.jsx("div",{className:"group",onClick:n,children:e}),O4e=(e,t)=>{const{$t:n}=Z(),r=e.subtitle?.split("-"),s=t.subtitle?.split("-"),a=Js(r)?+r[0]:null,i=Js(s)?+s[0]:null,l=4;if(a===null||i===null)return null;const c=a>i?e.abbreviation:t.abbreviation,u=a>i?a:i,f=a>i?i:a;return a>=l||i>=l?n({defaultMessage:"{leadingTeam} Wins {leadingScore}-{trailingScore}",id:"T1UC+k87MZ"},{leadingTeam:c,leadingScore:u,trailingScore:f}):a===i?n({defaultMessage:"Series Tied {team1Record}-{team2Record}",id:"Liahhq+hIg"},{team1Record:a,team2Record:i}):n({defaultMessage:"{leadingTeam} Leads {leadingScore}-{trailingScore}",id:"oO28OWtTlZ"},{leadingTeam:c,leadingScore:u,trailingScore:f})},QFt=({event:e,includeBorder:t=!1,className:n,league:r,scoreExtra:s,statusExtra:a})=>{const{$t:i}=Z(),l=e.team_1.title,c=e.team_2.title,u=e.team_1.text,f=e.team_1.sub_text,m=e.team_2.text,p=e.team_2.sub_text,h=r==="nba"&&e4e(e.title[0]??""),g=O4e(e.team_1,e.team_2),y=h?g:null,x=I4e({includeTime:!1}),v=GFt(e.datetime),b=e.datetime_tba?i({defaultMessage:"TBA",id:"ZfAWFLTzx/"}):v,_=qFt(e.title),w=_xe(),{colorScheme:C}=jr(),S=R4e(e.period_text,e.period_time,r),E=e.team_1.won||e.team_2.won,k=d.useMemo(()=>{let M;return E?(e.team_1.won?M=e.team_1.color:M=e.team_2.color,w?gk(M?cr(M):null,C==="dark"):M):null},[e.team_1.won,e.team_1.color,e.team_2.color,C,E,w]);return o.jsxs(z,{className:B(n,"rounded-inherit relative",{"border-b":t}),children:[E&&o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 overflow-hidden",style:{color:k?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"},children:o.jsx(t$,{className:"-inset-xl rounded-inherit !absolute ![--dog-bg-highlight:currentColor]",dotClassName:"!text-[currentColor]",highlightClassName:"!bg-black/5 dark:!bg-white/5"})}),o.jsx("div",{className:"px-md gap-sm relative flex items-start justify-between pt-[12px]",children:o.jsxs(F,{variant:"tiny",color:"light",children:[_,y&&" "+y]})}),o.jsxs("div",{className:"p-md md:px-lg md:py-md gap-sm relative grid grid-cols-[1fr_auto_1fr] items-center justify-start md:justify-between md:gap-[12px]",children:[o.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row md:justify-start md:gap-[12px]",children:[o.jsx(boe,{record:e.team_1.subtitle,name:l,logo:e.team_1.img}),o.jsx("div",{className:"md:mx-auto",children:o.jsx(xoe,{position:"leading",score:u,subscore:f,isWinner:e.team_1.won,hasWinner:E,scoreExtra:s,team:e.team_1,teamIdx:0,league:r})})]}),o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(XFt,{status:e.status,date:x(e.datetime,e.datetime_tba,e.datetime_end),time:b,isUpcoming:e.datetime?AFt(new Date(e.datetime),e.status):void 0,period:S??null}),a]}),o.jsxs("div",{className:"gap-md flex flex-col-reverse items-center justify-start md:flex-row-reverse md:gap-[12px]",children:[o.jsx(boe,{record:e.team_2.subtitle,name:c,logo:e.team_2.img}),o.jsx("div",{className:"md:mx-auto",children:o.jsx(xoe,{score:m,subscore:p,position:"trailing",isWinner:e.team_2.won,hasWinner:E,scoreExtra:s,team:e.team_2,teamIdx:1,league:r})})]})]}),e.live_text&&o.jsx("div",{className:"bg-subtlest px-md relative py-[12px]",children:o.jsxs(F,{variant:"tiny",color:"light",className:"gap-sm line-clamp-1 flex items-start md:items-center",children:[o.jsx(zLe,{size:16,className:"opacity-80 md:-translate-y-px"}),e.live_text]})}),E&&o.jsx("div",{className:"rounded-inherit pointer-events-none absolute inset-0 opacity-20 mix-blend-multiply dark:opacity-60 dark:mix-blend-soft-light",style:{backgroundColor:k?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&o.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[12px] border opacity-40",style:{borderColor:k?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}}),!t&&E&&o.jsx("div",{className:"pointer-events-none absolute -inset-px rounded-[13px] border opacity-20 dark:opacity-40",style:{borderColor:k?.toString(),maskImage:e.team_1.won?"linear-gradient(to left, transparent 60%, black)":"linear-gradient(to right, transparent 60%, black)"}})]})},xoe=({score:e,subscore:t,position:n,emptyPlaceholder:r=o.jsx(P4e,{}),isWinner:s,hasWinner:a,scoreExtra:i,team:l,teamIdx:c,league:u})=>{const{isMobileStyle:f}=xe(),m=u==="ipl"||u==="cricket"||u==="icc"||u==="atp"||u==="wta";return o.jsxs("div",{className:B("md:gap-xs flex flex-col items-center justify-center",{"items-start":n==="leading","items-end":n==="trailing","opacity-50":a&&!s}),children:[o.jsxs(F,{variant:f?m?"section-title":"display":"section-title",className:"gap-xs md:gap-sm flex items-center sm:!text-2xl lg:!text-3xl",children:[s&&n==="trailing"&&o.jsx(voe,{className:"size-3 rotate-180 md:size-4"}),o.jsxs("span",{className:"font-mono",children:[i&&o.jsx("span",{className:"mr-xs",children:i(l,c)}),e??r]}),s&&n==="leading"&&o.jsx(voe,{className:"size-2.5 md:size-4"})]}),t&&o.jsx(F,{variant:"tiny",color:"light",children:o.jsx("span",{className:"font-mono",children:t})})]})},voe=({className:e})=>o.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),boe=({name:e,logo:t,record:n})=>e?o.jsxs("div",{className:"gap-sm flex flex-col items-center justify-between md:gap-0",children:[t&&o.jsx(Ls,{logo:t,color:"#000000"}),o.jsx(F,{variant:"baseSemi",children:e}),n&&o.jsx(F,{variant:"tiny",color:"light",children:o.jsx("span",{className:"font-mono",children:n})})]}):null,XFt=({status:e,date:t,time:n,isUpcoming:r,variant:s="stacked",period:a})=>{const i=e==="live",l=e==="final",{isMobileStyle:c}=xe();return o.jsx("div",{className:B("gap-sm flex",{"flex-row items-center":s==="row","flex-col items-center justify-center":s==="stacked"}),children:i?o.jsxs("div",{className:"gap-sm flex flex-col items-center",children:[o.jsx(Dp,{size:c?"small":"default",includeDot:!0}),a&&o.jsx(F,{variant:"tiny",color:"light",children:a})]}):o.jsxs("div",{className:B("gap-xs flex",{"flex-col":s==="stacked","flex-row items-center":s==="row"}),children:[r&&o.jsx(_4e,{textCenter:!0,className:"mb-1 hidden md:block"}),l&&o.jsx(Aw,{textCenter:!0,className:"-mt-0.5 md:mb-1 md:mt-0 md:block"}),o.jsx(F,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:t}),n&&!l&&o.jsx(F,{variant:"tiny",color:"light",className:"w-full whitespace-nowrap text-center",children:n})]})})},ZFt=({items:e,title:t,subtitle:n,isLive:r,period:s,eventCount:a})=>{const i=e.some(f=>f.emphasized),{isMobileStyle:l}=xe(),{isLargeScreen:c,isMediumScreen:u}=Np();return o.jsx(z,{variant:"raised",className:B("px-md h-full py-[12px]",{"border-b border-r-0 group-last:border-b-0 group-even:border-r-0":l,"border-b group-odd:border-r":u&&!c,"group-[&:nth-child(2n):nth-last-child(-n+3)~a]:border-b-0":u&&!c&&a>2,"border-b border-r group-[&:nth-child(3n)]:border-r-0":c,"group-[&:nth-child(3n):nth-last-child(-n+4)~a]:border-b-0":c&&a>3,"!border-b-0":c&&a<=3||u&&!c&&a<=2}),children:o.jsxs("div",{className:"gap-sm flex size-full flex-col items-start justify-between duration-150 group-hover/link:opacity-75",children:[r?o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(Dp,{size:"small",className:"-ml-1"}),s&&o.jsx(F,{variant:"tiny",color:"super",children:s})]}):t?o.jsx(F,{variant:"tinyRegular",color:"light",children:t}):null,o.jsx("div",{className:"w-full",children:e.map((f,m)=>o.jsx(JFt,{item:f,anyEmphasized:i},f.title+m))}),n&&o.jsx(F,{variant:"tinyRegular",color:"light",children:n})]})})},JFt=({item:e,anyEmphasized:t})=>{const n=d.useMemo(()=>e.score?e.subscore?`${e.score} ${e.subscore}`:e.score:o.jsx(P4e,{}),[e.score,e.subscore]);return o.jsxs(z,{className:"flex w-full items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[e.image&&o.jsx("img",{src:e.image,alt:e.title,className:"size-[24px]"}),o.jsx(F,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:e.title})]}),o.jsxs("div",{className:"flex items-center gap-1",children:[e.emphasized&&o.jsx(Kb,{size:14,className:"text-super -translate-y-half"}),o.jsx(F,{variant:e.emphasized?"smallBold":"small",color:t&&!e.emphasized?"light":"default",children:n})]})]})},D4e=I.memo(()=>o.jsx("div",{children:"Error loading individual event widget."}));D4e.displayName="IndvEventsWidgetErrorFallback";const _oe=new Set,eUt=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(qe,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Xn,{size:18})]})}):null]})},tUt=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleDateString(t,{month:"short",day:"numeric"})}catch{return""}},nUt=(e,t)=>{if(!e)return"";try{return new Date(e).toLocaleTimeString(t,{hour:"numeric",minute:"2-digit",hour12:!0}).replace(/^0+/,"")}catch{return""}},F4e=({competitor:e})=>o.jsxs(z,{className:"gap-sm border-subtlest px-md py-sm flex items-center border-b last:border-b-0",children:[o.jsx(F,{className:"w-4 text-center",children:e.rank}),o.jsxs("div",{className:"gap-sm flex grow items-center",children:[e.primary_img_url?o.jsx(Ls,{logo:e.primary_img_url,color:"transparent",size:"small",className:"shrink-0"}):o.jsx(z,{className:"flex h-5 w-8 shrink-0 items-center justify-center rounded-sm bg-[#44403c] text-xs",children:e.abbreviation}),o.jsxs("div",{className:"flex grow flex-col",children:[o.jsx(F,{variant:"smallBold",children:e.title}),o.jsxs(F,{variant:"tiny",color:"light",children:[e.metadata[0]," "]})]})]}),o.jsxs(z,{className:"flex flex-col items-end text-right",children:[o.jsx(F,{variant:"smallBold",children:e.metadata[1]}),o.jsx(F,{variant:"tiny",color:"light",children:e.metadata[2]})]})]},e.id),rUt=({event:e,league:t})=>{const{locale:n}=Z(),r=e.subtitle,{$t:s}=Z(),a=nUt(e.datetime,n),i=e.datetime?pB(new Date(e.datetime))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):hhe(new Date(e.datetime))?s({defaultMessage:"Tomorrow",id:"MtrTNyxuSU"}):new Date(e.datetime).toLocaleDateString(n,{weekday:"short",month:"short",day:"numeric"}):"";return o.jsxs(z,{className:"flex flex-col",children:[o.jsxs(z,{className:"p-md border-subtler flex items-end justify-between border-b",children:[o.jsxs(z,{className:"flex flex-col",children:[o.jsx(F,{variant:"baseSemi",children:e.title.join(" ")}),o.jsxs(F,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})]}),o.jsxs("div",{className:"flex flex-col items-end",children:[o.jsx(F,{variant:"small",children:i}),o.jsx(F,{variant:"small",color:"light",children:a})]})]}),e.image_url&&o.jsx(z,{className:"aspect-video w-full overflow-hidden rounded-lg bg-[#292524]",children:o.jsx(ns,{src:e.image_url,alt:`${e.title.join(" ")} circuit map`,className:"size-full object-contain"})}),o.jsx(z,{className:"gap-xs p-md flex flex-col",children:e.metadata?.map((l,c)=>o.jsxs(z,{className:"flex justify-between",children:[o.jsx(F,{className:"text-sm",color:"light",children:l[0]}),o.jsx(F,{className:"text-sm",children:l[1]})]},c))})]})},sUt=({event:e,league:t})=>{const{locale:n}=Z(),r=tUt(e.datetime,n),s=e.competitors.slice(0,3),a=e.subtitle;return o.jsxs(z,{className:"flex flex-col",children:[o.jsxs(z,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",className:"flex justify-between",children:o.jsx("span",{children:e.title.join(" ")})}),o.jsxs(F,{variant:"small",color:"light",children:[t.toUpperCase(),a&&`${a}`]})]}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{variant:"small",color:"light",children:r}),o.jsx(Aw,{})]})]}),o.jsx(z,{className:"flex flex-col",children:s.map(i=>o.jsx(F4e,{competitor:i},i.id))})]})},aUt=({event:e,league:t})=>{const n=e.competitors.slice(0,3),r=e.subtitle;return o.jsxs(z,{className:"flex flex-col",children:[o.jsxs(z,{className:"border-subtler px-md py-sm gap-md flex items-center justify-between border-b",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",className:"flex justify-between",children:o.jsx("span",{children:e.title.join(" ")})}),o.jsx("div",{children:o.jsxs(F,{variant:"small",color:"light",children:[t.toUpperCase(),r&&`${r}`]})})]}),o.jsxs("span",{className:"flex items-center gap-1",children:[o.jsx(Dp,{includeDot:!0}),e.period_text&&o.jsx(F,{color:"light",variant:"small",children:e.period_text})]})]}),o.jsx(z,{className:"flex flex-col",children:n.map(s=>o.jsx(F4e,{competitor:s},s.id))})]})},oUt=({event:e,league:t})=>{switch(e.status){case"upcoming":return o.jsx(rUt,{event:e,league:t});case"live":return o.jsx(aUt,{event:e,league:t});case"final":return o.jsx(sUt,{event:e,league:t});default:return null}};function iUt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=pn(),r=KT(),s=d.useMemo(()=>e?.event,[e]),a=d.useMemo(()=>e?.league,[e]);if(d.useEffect(()=>{!t||!e||!s||_oe.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),_oe.add(t))},[t,s,n,e,r]),!e||!s)return null;const i=e.canonical_page?.url_web,l=`indv-event-${s.id??"unknown"}`;return o.jsx(Nr,{fallback:D4e,children:o.jsx(Fi,{widgetType:"sports",widgetName:l,children:({})=>o.jsx(eUt,{canonicalPageLink:i,children:o.jsx(oUt,{event:s,league:a})})})})}const U4e=I.memo(()=>o.jsx("div",{children:"Error loading individual schedule widget."}));U4e.displayName="IndvScheduleWidgetErrorFallback";const woe=new Set,lUt=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(qe,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Xn,{size:18})]})}):null]})},cUt=(e,t,n)=>{if(!e)return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2");try{return new Date(e).toLocaleTimeString(n,{hour:"numeric",minute:"2-digit",hour12:!0,timeZoneName:"short"}).replace(/^0+/,"")}catch{return t.replace(/^(0)(\d:[0-5]\d\s+[AP]M)$/,"$2")}},lR=({event:e,isFinal:t,isLive:n})=>{const{locale:r}=Z(),s=e.metadata?.[0],a=e.metadata?.[1]??"",i=cUt(e.datetime,a,r),{isMobileStyle:l}=xe(),c=!!e.url?.url_web,u=o.jsxs(o.Fragment,{children:[o.jsxs(z,{className:"p-md col-span-3 grid grid-cols-subgrid items-center md:col-span-4",children:[o.jsx(z,{className:"flex flex-col items-start",children:o.jsx(dUt,{date:e.datetime??""})}),o.jsxs(z,{className:"gap-xs flex flex-col md:gap-0",children:[o.jsx(F,{variant:"baseSemi",className:"text-base leading-snug",children:e.title.join(" ")}),s&&o.jsxs(F,{variant:l?"tiny":"small",className:"mt-0 pt-0",color:"light",children:[!t&&!n&&o.jsxs(o.Fragment,{children:[i,"  "]}),s]})]}),o.jsx("div",{className:"hidden md:block",children:e.live_text&&o.jsx(F,{variant:"small",className:"text-right",children:e.live_text})}),o.jsx("div",{children:t?o.jsx(Aw,{}):n?o.jsx(Dp,{includeDot:!0}):null})]}),o.jsx("div",{className:"p-md -mt-sm col-span-2 col-start-2 pl-0 pt-0 md:hidden",children:e.live_text&&o.jsx(F,{variant:"tiny",className:"border-subtlest p-xs px-sm rounded border",color:"light",children:e.live_text})})]}),f="col-span-3 grid grid-cols-subgrid border-b border-subtlest last:border-b-0 md:col-span-4";return c?o.jsx(qe,{href:e.url?.url_web??"",className:B(f,"hover:bg-subtler duration-150"),children:u}):o.jsx(z,{className:f,children:u})};function uUt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=pn(),r=KT(),s=d.useMemo(()=>e?.events??[],[e]);if(d.useEffect(()=>{!t||!e||!s?.length||woe.has(t)||(r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n}),woe.add(t))},[t,e,s,n,r]),!e||!s||s.length===0)return null;const a=e.canonical_page?.url_web,i=`indv-schedule-${e.league??"unknown"}`;return o.jsx(Nr,{fallback:U4e,children:o.jsx(Fi,{widgetType:"sports",widgetName:i,children:({})=>o.jsx(lUt,{canonicalPageLink:a,children:o.jsx(z,{className:"gap-x-md grid grid-cols-[min-content,1fr,min-content] md:grid-cols-[min-content,1fr,1fr,min-content]",children:s.map(l=>{switch(l.status){case"upcoming":return o.jsx(lR,{event:l},l.id);case"live":return o.jsx(lR,{event:l,isLive:!0},l.id);case"final":return o.jsx(lR,{event:l,isFinal:!0},l.id);default:return null}})})})})})}const dUt=({date:e})=>{const{locale:t}=Z(),n=new Date(e).toLocaleDateString(t,{day:"numeric"}),r=new Date(e).toLocaleDateString(t,{month:"short"}),{isMobileStyle:s}=xe();return o.jsxs("div",{className:"dark:bg-subtle bg-subtler py-xs flex w-full flex-col items-center justify-center rounded-lg px-0.5 md:p-[6px]",children:[o.jsx(F,{className:"px-sm -mb-0.5 rounded-full text-center",variant:"tinyRegular",color:"light",children:r}),o.jsx(F,{className:"px-sm -mb-1 text-center",variant:s?"baseSemi":"section-title",children:n})]})},B4e=({headshotImageUrl:e,flagUrl:t,name:n,isCompositeFlag:r})=>!e&&!t?null:o.jsxs("div",{className:"relative size-6 shrink-0 rounded md:size-8",children:[o.jsx("img",{src:e??t,alt:n,className:B("rounded-inherit relative size-full shrink-0",{"object-contain":r,"object-cover":!r})}),!r&&o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"}),e&&o.jsxs("div",{className:"ml-xs ring-raised absolute right-[90%] top-[90%] size-3 shrink-0 -translate-y-1/2 translate-x-1/2 rounded-full ring-2 md:size-4",children:[o.jsx("img",{src:t,alt:n,className:"rounded-inherit relative size-full shrink-0 object-cover"}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-black/10 dark:border-white/10"})]})]}),fUt=e=>{for(const t of e)for(const n of t.cells)if(n.extra?.is_current_round)return n.column_id;return null},$4e=({value:e,variant:t="red"})=>{if(!e)return null;const n=t==="subtle";return o.jsx(z,{variant:t,className:"inline-flex h-5 items-center whitespace-nowrap rounded px-[6px] py-px",children:o.jsx(F,{variant:"micro",className:B("translate-y-half tracking-wider",{uppercase:!n}),children:e})})};$4e.displayName="StatusDisplay";const LS=(e,t)=>{const n=e.display_value??e.value??"",r=t.font_weight==="bold"?"smallBold":"small",s=e.extra;return o.jsx(F,{variant:r,className:s?.is_current_round?"font-bold":"",children:n})},mUt={pos_golf:(e,t)=>{const n=e.display_value??e.value??"",r=t.font_weight==="bold"?"smallBold":"small";return e.extra?.show_trophy?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(de,{icon:Kb,size:"md",className:"text-super"})}):o.jsx(F,{variant:r,color:"light",children:n})},golfer_golf:(e,t)=>{const n=String(e.display_value??""),r=e.image_url??void 0,s=e.value,a=e.sub_text,i=t.font_weight==="bold"?"smallBold":"small";return o.jsxs("div",{className:"md:gap-md gap-sm flex items-center",children:[o.jsx(B4e,{headshotImageUrl:r,flagUrl:s,name:n}),o.jsxs("div",{children:[o.jsx(F,{variant:i,children:n}),a&&o.jsx(F,{variant:"tiny",color:"light",children:e.sub_text})]})]})},status_golf:e=>{const t=e.display_value??e.value??"",r=/am|pm/i.test(String(t))?"subtle":"red";return o.jsx($4e,{value:t,variant:r})},total_golf:(e,t)=>{const n=e.display_value??e.value??"E",r=typeof e.value=="number"?e.value:0,s=t.font_weight==="bold"?"smallBold":"small";let a="default";return r<0?a="positive":r>0&&(a="negative"),o.jsx(F,{variant:s,color:a,children:n})},r1:LS,r2:LS,r3:LS,r4:LS},pUt={status_golf:()=>null},hUt=({result:e})=>{let t="",n=null;return e==="W"?(t="bg-[#059669] text-white",n=dr):e==="D"?(t="bg-[#64748b] text-white",n=Yk):e==="L"&&(t="bg-[#e11d48] text-white",n=kt),o.jsx("div",{className:B("flex size-4 items-center justify-center rounded-full",t),children:n&&o.jsx(n,{size:12,strokeWidth:2.5})})},V4e=({form:e})=>{const t=String(e).replace(/\s/g,"");return o.jsx("div",{className:"flex gap-0.5",children:t.split("").map((n,r)=>o.jsx(hUt,{result:n},r))})};V4e.displayName="FormDisplay";const gUt=({value:e})=>{const t=e.includes(""),n=e.includes(""),r=e==="-",s=e.replace(/[^0-9]/g,"");return o.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[o.jsx(de,{icon:t?GLe:n?qLe:Yk,size:"sm",className:B("scale-90",{"text-quietest":r,"text-positive":t,"text-negative":n})}),!r&&o.jsx(F,{variant:"tinyMono",color:t?"positive":"negative",className:"w-[2ch] shrink-0 text-left",children:s})]})},yUt={form:e=>{const t=e.display_value??e.value??"";return o.jsx(V4e,{form:String(t)})},movement:e=>{const t=e.display_value??e.value??"";return o.jsx(gUt,{value:String(t)})}},W4e={...yUt,...mUt},xUt={...pUt},H4e=(e="left")=>{switch(e){case"center":return"text-center";case"right":return"text-right";case"left":default:return"text-left"}},vUt=(e=!1)=>e?"w-full":"w-0",cR=(e="normal",t)=>{if(t==="pos")return"smallCaps";switch(e){case"bold":return"smallBold";case"normal":default:return"small"}},bUt=(e="")=>e==="pos"?"light":"default",_Ut=({cell:e,column:t,columns:n,rows:r,columnRenderers:s=W4e})=>{const{inApp:a}=Xo();if(!e)return o.jsx("td",{className:"md:px-md p-sm"});let i;const l=t.column_type??"text",c=e.display_value??e.value??"-";t.column_id&&s[t.column_id]?i=s[t.column_id]?.(e,t,{columns:n,rows:r}):(l==="entity"||l==="image")&&e.image_url?i=o.jsxs("div",{className:"md:gap-md gap-sm flex items-center",children:[o.jsx(Ls,{logo:e.image_url,color:"transparent",size:"small",className:"shrink-0"}),o.jsxs("div",{children:[o.jsx(F,{variant:cR(t.font_weight??"normal",t.column_id),children:c}),l==="entity"&&e.sub_text&&o.jsx(F,{variant:"tiny",color:"light",children:e.sub_text})]})]}):l==="entity"&&!e.image_url?i=o.jsxs("div",{children:[o.jsx(F,{variant:cR(t.font_weight??"normal",t.column_id),children:c}),e.sub_text&&o.jsx(F,{variant:"tiny",color:"light",children:e.sub_text})]}):i=o.jsx(F,{variant:cR(t.font_weight??"normal",t.column_id),color:bUt(t.column_id),children:c});const u=B("md:pl-md pl-sm last:px-sm md:last:px-md py-sm align-middle",H4e(t.alignment),vUt(t.should_fill_width));return e.canonical_page?o.jsx("td",{className:u,children:o.jsx(zu,{href:a?e.canonical_page.url_app:e.canonical_page.url_web,className:"block",children:i})}):o.jsx("td",{className:u,children:i})},wUt=({row:e,rows:t,columns:n,columnRenderers:r})=>{const s=new Map(e.cells.map(a=>[a.column_id,a]));return o.jsx("tr",{className:B("border-subtlest border-b last:border-b-0"),children:n.map(a=>o.jsx(_Ut,{cell:s.get(a.column_id),column:a,columns:n,rows:t,columnRenderers:r},a.column_id))})},CUt=({table:e,variant:t="subtler",title:n,className:r,noWrapTitle:s=!1,onGroupClick:a,columnRenderers:i,headerRenderers:l})=>{const[c,u]=d.useState(e?.groups?.[0]?.group_id??""),[f,m]=d.useState(!1),{$t:p}=Z();if(yp("standings"),!e||!e.groups?.length)return null;const h=n??e.title??"Standings",g=e.groups.find(C=>C.group_id===c),y=e.groups.length>1;if(!g)return null;const x=f?g.rows:g.rows.slice(0,10),v=fUt(g.rows),b={...W4e,...i},_={...xUt,...l};v&&!_[v]&&(_[v]=C=>o.jsx(z,{variant:"super",className:"inline-flex h-5 items-center rounded px-[6px] py-px",children:o.jsx(F,{variant:"micro",className:"translate-y-half uppercase tracking-wider",children:C.header_label})}));const w=e.groups.map(C=>({type:"default",text:C.title??C.group_id,onClick:()=>{u(C.group_id),a?.(C.group_id)},active:c===C.group_id,show:!0}));return o.jsx(Wt,{className:r,header:o.jsxs("div",{className:"md:pl-md gap-sm sm:gap-md flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[o.jsx(F,{variant:"baseSemi",className:B(s?"flex-shrink-0":void 0,"max-sm:pl-sm"),children:h}),y?o.jsx(nn,{items:w,isMobileStyle:!1,wrapperClassName:"min-w-0",children:o.jsx(me,{text:g.title??g.group_id,chevron:!0,size:"small",extraCSS:"w-full mb-sm"})}):o.jsx("div",{className:"invisible min-h-10"})]}),children:o.jsxs("div",{className:"rounded-inherit",children:[o.jsx("div",{className:"rounded-t-inherit overflow-hidden",children:o.jsx(sl,{orientation:"horizontal",children:o.jsxs("table",{className:B("w-full table-auto border-collapse"),children:[o.jsx(z,{as:"thead",variant:t==="raised"?"raisedOffset":"subtle",children:o.jsx("tr",{children:g.columns.map(C=>{const S=_[C.column_id],E=S?S(C):C.header_label;return o.jsx("th",{className:B("md:pl-md pl-sm last:px-sm md:last:px-md py-xs whitespace-nowrap align-middle",H4e(C.alignment)),children:E?o.jsx(EFt,{className:B({"w-[200px] md:w-auto":C.should_fill_width}),children:E}):null},C.column_id)})})}),o.jsx("tbody",{children:x.map(C=>o.jsx(wUt,{row:C,rows:g.rows,columns:g.columns,columnRenderers:b},C.row_id))})]})})}),g.rows.length>10&&o.jsx(z,{className:"p-xs border-t",children:o.jsx(Me,{text:p(f?{id:"UOYN/MXiOT",defaultMessage:"View Less"}:{id:"wbcwKddwLa",defaultMessage:"View All"}),size:"small",fullWidth:!0,onClick:()=>m(C=>!C)})})]},g.group_id)})},z4e=I.memo(()=>o.jsx("div",{children:"Error loading standings widget."}));z4e.displayName="StandingsWidgetErrorFallback";const SUt=new Set,EUt=({children:e,canonicalPageLink:t})=>{const{$t:n}=Z();return o.jsxs(z,{variant:"raised",className:"shadow-subtle overflow-hidden rounded-xl border",children:[e,t?o.jsx(qe,{href:t,children:o.jsxs(F,{variant:"smallBold",className:"p-sm border-subtlest flex items-center justify-center gap-0.5 border-t text-center duration-150 hover:opacity-75",color:"super",children:[n({defaultMessage:"View More",id:"QQSdHPJWXu"}),o.jsx(Xn,{size:18})]})}):null]})};function MUt({widgetData:e}){const{result:{backend_uuid:t,mode:n}}=pn(),r=KT(),s=d.useMemo(()=>e?.standings_table?e.standings_table:null,[e]);if(d.useEffect(()=>{!t||!e||!s||SUt.has(t)||r("web.frontend.sports_widget_render_time",{widgetType:"sports",widgetSubType:e.object,league:e.league,queryMode:n})},[t,s,n,e,r]),!e||!s)return null;const a=e.canonical_pages?.[0]?.url_web,i=`standings-${s.table_id??"unknown"}`;return o.jsx(Nr,{fallback:z4e,children:o.jsx(Fi,{widgetType:"sports",widgetName:i,children:({})=>o.jsx(EUt,{canonicalPageLink:a,children:o.jsx(CUt,{table:s,variant:"raised",className:"!rounded-none border-0"})})})})}const ky={staleTime:0,refetchOnWindowFocus:!0,refetchOnMount:!0,refetchOnReconnect:!0},G4e=({event:e,team1:t,team2:n,isLive:r})=>{const s=e.datetime&&new Date(e.datetime)>new Date,a=r?t.sub_text:null,i=r?n.sub_text:null,{isMobileStyle:l}=xe(),c=d.useMemo(()=>e?.stat_columns?.map(f=>({team1:{score:f.team_1_text,scoreSuper:f.team_1_super_text,emphasis:f.team_1_emphasis,super:!1},team2:{score:f.team_2_text,scoreSuper:f.team_2_super_text,emphasis:f.team_2_emphasis,super:!1}})),[e?.stat_columns]),u=d.useMemo(()=>r?[...c??[],{team1:{score:t.text,scoreSuper:null,emphasis:!1,super:!0},team2:{score:n.text,scoreSuper:null,emphasis:!1,super:!0}}]:c,[c,r,t.text,n.text]);return s?o.jsxs("div",{className:"gap-sm pr-sm flex h-full flex-col justify-around",children:[o.jsx(F,{variant:"base",color:"ultraLight",className:"opacity-50",children:""}),o.jsx(F,{variant:"base",color:"ultraLight",className:"opacity-50",children:""})]}):c?o.jsxs("div",{className:B("gap-x-md grid h-16 auto-cols-auto grid-flow-col",{"gap-x-sm":l}),children:[u?.map((f,m)=>o.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid",children:[o.jsx("div",{className:"flex items-center",children:o.jsxs(F,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:f.team1.super&&f.team1.score?"super":f.team1.emphasis?"default":"ultraLight",children:[f.team1.score??"",f.team1.scoreSuper&&o.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:f.team1.scoreSuper})]})}),o.jsx("div",{className:"flex items-center",children:o.jsxs(F,{variant:l?"smallBold":"section-title",className:"min-w-[2ch] text-center !font-mono leading-none",color:f.team2.super&&f.team2.score?"super":f.team2.emphasis?"default":"ultraLight",children:[f.team2.score??"",f.team2.scoreSuper&&o.jsx("sup",{className:"-translate-y-sm text-2xs !font-mono tracking-tight",children:f.team2.scoreSuper})]})})]},m)),(a||i)&&o.jsxs("div",{className:"gap-sm grid h-full grid-cols-subgrid place-items-center",children:[o.jsx(Coe,{score:a}),o.jsx(Coe,{score:i})]})]}):null},Coe=({score:e})=>{const{isMobileStyle:t}=xe();return o.jsx(z,{variant:"superLight",className:B("px-xs flex w-full items-center justify-center rounded py-0.5",{"opacity-0":!e}),children:o.jsx(F,{variant:t?"smallBold":"section-title",color:"super",className:"flex min-w-[2ch] items-center justify-center",children:o.jsx("span",{className:"font-mono",children:e??""})})})},kUt=({children:e,className:t})=>o.jsx(ve.div,{layout:!0,layoutRoot:!0,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{ease:an,duration:.5},className:B("p-sm isolate flex-col items-end md:flex",t),children:o.jsx("ul",{className:"-mb-xs flex w-full flex-col items-start",children:o.jsx(Ec,{id:"index",children:e})})}),q4e=I.memo(({extraCss:e})=>o.jsx(z,{className:`h-[12px] w-[60px] rounded-full ${e}`,variant:"subtler"}));q4e.displayName="ArticleSkeletonItem";const TUt=({widgetData:e,onClick:t,highlighted:n,idx:r})=>o.jsxs("div",{className:"gap-xs pt-sm ml-6 flex items-center",onClick:t.bind(null,e.id),children:[o.jsx(F,{className:B("border-subtler bg-base relative -top-px inline-flex size-4 shrink-0 scale-[.85] items-center justify-center rounded-full border shadow-sm duration-150",{"border-foreground bg-inverse !text-inverse opacity-70":n}),variant:"smallCaps",color:"light",children:r+1}),o.jsx(F,{variant:"tiny",color:n?void 0:"light",className:B("line-clamp-1 cursor-pointer opacity-80 duration-150 hover:!opacity-100",{"!opacity-100":n}),children:e.name})]}),NUt=({highlighted:e,scrollTopOffset:t,scrollThumbHeight:n,widgets:r,loading:s})=>o.jsxs("div",{className:B("bg-base w-two absolute inset-y-0 left-0 z-[2] rounded-full",{"opacity-0 delay-1000":!e}),children:[o.jsx("div",{className:B("absolute inset-0 overflow-hidden duration-150",{"opacity-0":r.length===0||!e,"opacity-1":r.length>0}),children:o.jsx("div",{className:B("absolute left-0 top-0 w-full rounded-full",{"bg-inverse/70":s},{"bg-inverse":!s}),style:{top:`min(${t}%, calc(100% - 8px - ${n}%))`,height:n+"%"}})}),o.jsx("div",{className:"bg-inverse/10 absolute inset-0 rounded-full"})]}),K4e=(e,t,n=100)=>{const s=e.getBoundingClientRect().top,a=t.clientHeight/2;return s-a<=n},jUt=({title:e,onClick:t,idx:n,onWidgetClick:r,highlighted:s=!1,isStaged:a,loading:i,id:l,widgets:c=ce,ref:u,testId:f})=>{const m=s&&!i,[p,h]=d.useState(0),[g,y]=d.useState(0),[x,v]=d.useState(""),b=2,{entityRefs:_}=IW(),{scrollContainerRef:w}=ti(),C=d.useRef(null),S=d.useCallback(()=>{const M=u?.current;if(M){const j=M.getBoundingClientRect().height,R=M.getBoundingClientRect().top;h(Math.max((1-(j+R)/j)*100,0))}},[u]),E=d.useMemo(()=>Fy(()=>{let M=[];Object.keys(_).map(j=>{_[j]?.current&&w?.current&&K4e(_[j]?.current,w.current)&&(M=[...M,j])}),v(M[M.length-1]??"")},100),[v,_,w]);d.useEffect(()=>{const M=w.current;if(M)return c&&c.length>=b&&s?(M.addEventListener("scroll",E),M.addEventListener("scroll",S)):(M.removeEventListener("scroll",E),M.removeEventListener("scroll",S)),()=>{M.removeEventListener("scroll",E),M.removeEventListener("scroll",S)}},[s,E,S,c,w]),d.useEffect(()=>{const M=u?.current;if(C.current&&(C.current.disconnect(),C.current=null),M?.nodeType===Node.ELEMENT_NODE){const j=new ResizeObserver(([R])=>{if(R&&Js(R.borderBoxSize)){const{blockSize:O}=R.borderBoxSize[0];y(window.innerHeight/O*100)}});j.observe(M),C.current=j}return()=>{C.current?.disconnect(),C.current=null}},[u,n]);const k=d.useMemo(()=>c.length>=b&&o.jsx("span",{className:"ml-xs inline-flex",children:o.jsx(de,{icon:Wn,size:"xs"})}),[c.length,b]);return o.jsxs(un,{as:"li",active:i,speed:"slow",className:"group relative flex select-none flex-col",children:[o.jsx(na,{mode:"popLayout",initial:!0,children:o.jsx(Zr,{children:a&&!e?o.jsx("div",{className:"ml-md flex h-[20px] items-center",children:o.jsx(q4e,{extraCss:"!w-[100px] !h-[10px]"})}):o.jsxs("div",{children:[o.jsx("div",{onClick:t.bind(null,n),"data-testid":f,children:o.jsxs(F,{variant:"small",color:m?"default":a?"ultraLight":"light",className:B("gap-xs pl-md line-clamp-2 cursor-pointer opacity-80 duration-150 group-hover:opacity-100",{"font-[450] !opacity-100":m}),children:[e,k]})}),s&&!a&&c.length>=b&&o.jsx(ve.div,{initial:{opacity:0,y:-4},animate:{opacity:1,y:0,transition:{delay:.15}},exit:{opacity:0,y:-4},className:"pb-1",children:c.map((M,j)=>{const R=M.meta_data;return R.object==="ShopifyWidget"?o.jsx(TUt,{widgetData:R,onClick:r,idx:j,highlighted:!i&&x===M.meta_data?.id},M.meta_data?.id):null})},e)]})},a&&!e?"placeholder":e)}),o.jsx("div",{className:"h-sm text-inverse relative z-[5] inline-flex w-full",children:o.jsx("svg",{width:"2",height:"10",viewBox:"0 0 2 10",fill:"none",className:"inline-flex",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M2 0C2 0.552284 1.55228 1 1 1C0.447716 1 0 0.552284 0 0V10C0 9.44772 0.447716 9 1 9C1.55228 9 2 9.44772 2 10V0Z",fill:"currentColor"})})}),i&&o.jsx("div",{className:"w-two absolute inset-y-0 left-0 z-[4] animate-pulse rounded-full",children:o.jsx("div",{className:B("bg-inverse absolute inset-0 opacity-10")})}),o.jsx("div",{className:B("bg-base w-two absolute inset-y-0 left-0 z-[3] opacity-0 duration-150",{"!opacity-100":a})}),c.length>=b&&o.jsx(NUt,{highlighted:s,scrollTopOffset:p,scrollThumbHeight:g,widgets:c,loading:i??!1}),s&&o.jsx(ve.div,{layoutId:"layout"+l,transition:{ease:an,duration:.3},className:B("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full",{"!bg-inverse/70":a||i},{"opacity-0 delay-100":c.length>=b})}),o.jsx("div",{className:B("bg-inverse w-two absolute inset-y-0 left-0 z-[1] rounded-full opacity-10 duration-150")})]})},AUt=({items:e,sectionRefs:t,onItemClick:n,onWidgetClick:r,className:s,id:a})=>{const[i,l]=d.useState(0),c=h=>{r?.(h)},{scrollContainerRef:u}=ti(),f=h=>{n(h)},m=d.useMemo(()=>Fy(()=>{if(!u?.current)return;const h=u.current;if((h?.scrollTop??0)===0){l(0);return}if(NM(h)){l(e.length-1);return}let y=[];Array.from({length:Object.keys(t).length}).map((x,v)=>{const b=t?.[v]?.current;b&&K4e(b,h,0)&&(y=[...y,v])}),l(y[y.length-1]??0)},100),[t,l,e.length,u]),p=d.useCallback(()=>{m()},[m]);return d.useEffect(()=>{const h=u?.current;return h?.addEventListener("scroll",p),()=>{h?.removeEventListener("scroll",p)}},[p,u]),o.jsx(kUt,{className:s,children:e.filter(h=>h.show).map((h,g)=>o.jsx(jUt,{title:h.title,onClick:f,onWidgetClick:c,idx:g,loading:h.loading,highlighted:g===i,isStaged:h.staged,id:a,testId:h.testId,widgets:h.widgets,ref:t[g]},h.id))})},Y4e=I.memo(()=>o.jsx("div",{}));Y4e.displayName="MenuSectionErrorFallback";const Q4e=I.memo(({children:e,entries:t,className:n,showMenu:r=!0,header:s,footer:a,variant:i="default",id:l})=>{const{isMobileStyle:c}=xe();return o.jsxs("div",{className:B(n,"mx-md mb-md max-w-threadWidth gap-x-lg md:mx-lg relative md:grid",{"grid-cols-4":i==="default","grid-cols-3":i==="twoThirds"}),children:[o.jsx("div",{className:B("space-y-md pt-md",{"col-span-3":i==="default","col-span-2":i==="twoThirds"}),children:e}),o.jsx("div",{className:B("relative",{"col-span-1 col-start-4":i==="default","col-span-1":i==="twoThirds"}),children:r&&!c&&o.jsxs("div",{className:"sticky top-0",children:[s&&o.jsx("div",{children:s}),o.jsx(X4e,{entries:t,id:l}),a&&o.jsx("div",{children:a})]})})]})});Q4e.displayName="WithMenu";const uR=({children:e,className:t,show:n=!0,ref:r})=>n?o.jsx(Nr,{fallback:Y4e,children:o.jsx("div",{ref:r,className:t,children:e})}):null,X4e=I.memo(({entries:e,id:t})=>{const{scrollContainerRef:n}=ti();I.useEffect(()=>{const i=window.location.hash.slice(1);if(i){const l=e.find(c=>c.id===i);l?.ref.current&&Soe(l.ref.current,!1,n.current)}},[e,n]);const r=d.useMemo(()=>Object.fromEntries(e.filter(i=>i.show).map((i,l)=>[l,i.ref])),[e]),s=d.useMemo(()=>e.map(i=>({title:i.title,id:i.id,loading:!1,show:i.show??!0})).filter(i=>i.show),[e]),a=d.useCallback(i=>{r[i]?.current&&Soe(r[i].current,!0,n.current)},[r,n]);return o.jsx(AUt,{className:"pt-md",items:s,sectionRefs:r,onItemClick:a,id:`menu-list-${t}`})});X4e.displayName="MenuList";function Soe(e,t=!0,n){const r=parseFloat(getComputedStyle(document.documentElement).getPropertyValue("--header-height"))||50,s=parseFloat(window.getComputedStyle(e).marginTop),{top:a}=e.getBoundingClientRect();if(!n)return;const i=a+n.scrollTop-r-s;n.scrollTo({top:i,behavior:t?"smooth":"auto"})}async function IUt(){const{error:e,data:t}=await re.GET("/rest/sports/f1/","f1-index",{timeoutMs:0});if(e)throw new we("API_CLIENTS_ERROR",{details:{league:"f1"}});return t?.data}async function RUt(){const{error:e,data:t}=await re.GET("/rest/sports/nba","nba-index",{timeoutMs:0});if(e)throw new we("API_CLIENTS_ERROR",{details:{league:"nba"}});return t?.data??null}async function PUt(){const{error:e,data:t}=await re.GET("/rest/sports/wnba/","wnba-index",{timeoutMs:0});if(e)throw new we("API_CLIENTS_ERROR",{details:{league:"wnba"}});return t?.data}async function LUt(){const{error:e,data:t}=await re.GET("/rest/sports/pga/","pga-index",{timeoutMs:0});if(e)throw new we("API_CLIENTS_ERROR",{details:{league:"pga"}});return t?.data}async function OUt(){const{error:e,data:t}=await re.GET("/rest/sports/european_tour/","european-tour-index",{timeoutMs:0});if(e)throw new we("API_CLIENTS_ERROR",{details:{league:"european_tour"}});return t?.data}async function DUt(e){const{error:t,data:n}=await re.GET("/rest/sports/tennis/{league}",`${e}-index-client-page`,{params:{path:{league:e}},timeoutMs:3e4});if(t)throw new we("API_CLIENTS_ERROR",{cause:t,details:{league:e}});return n?.data}async function FUt(){const{error:e,data:t}=await re.GET("/rest/sports/mlb","mlb-index",{timeoutMs:0});if(e)throw new we("API_CLIENTS_ERROR",{details:{league:"mlb"}});return t?.data}async function UUt(){const{error:e,data:t}=await re.GET("/rest/sports/ipl","ipl-index",{timeoutMs:0});if(e)throw new we("API_CLIENTS_ERROR",{details:{league:"ipl"}});return t?.data??null}const BUt=e=>["sports/",e],Z4e=e=>["wsc-story",e];async function J4e({eventId:e,headers:t}){const n=await re.GET("/rest/sports/wsc/story/{event_id}","wsc-story-fetch",{params:{path:{event_id:String(e)}},headers:t,timeoutMs:0});if(n.error)throw new we("API_CLIENTS_ERROR",{details:{eventId:e,endpoint:"/rest/sports/wsc/story"}});if(!n.data)throw new Error(`No URL found in WSC story response for event ${e}`);return n.data}async function eNe({league:e,headers:t,reason:n}){try{const{error:r,data:s}=await re.GET("/rest/sports/{league}/hype",n,{params:{path:{league:e}},headers:t,timeoutMs:0});if(r)throw new we("API_CLIENTS_ERROR",{details:{league:e,reason:n}});return s.data}catch(r){return ne.error(r),null}}async function $Ut({headers:e,reason:t}){try{const{error:n,data:r}=await re.GET("/rest/sports/hype",t,{headers:e,timeoutMs:0});if(n)throw new we("API_CLIENTS_ERROR",{details:{reason:t}});return r.data}catch(n){return ne.error(n),null}}const VUt=()=>["sports/","hype"];async function WUt({headers:e,reason:t}){try{const{error:n,data:r}=await re.GET("/rest/sports/manifest",t,{headers:e,timeoutMs:0});if(n)throw new we("API_CLIENTS_ERROR",{details:{endpoint:"/rest/sports/manifest",reason:t}});return r}catch(n){return ne.error(n),null}}const HUt=()=>["sports/","manifest"],aun=Object.freeze(Object.defineProperty({__proto__:null,getConsolidatedSportsHype:$Ut,getConsolidatedSportsHypeKey:VUt,getEuropeanTourIndex:OUt,getF1Index:IUt,getIPLIndex:UUt,getMLBIndex:FUt,getNBAIndex:RUt,getPGAIndex:LUt,getSportsLeagueHype:eNe,getSportsManifest:WUt,getSportsManifestKey:HUt,getTennisIndex:DUt,getWNBAIndex:PUt,getWscStory:J4e,sportsIndexKey:BUt,wscStoryKey:Z4e},Symbol.toStringTag,{value:"Module"})),tNe=I.memo(({query:e,children:t,nofollow:n=!0,sources:r,...s})=>{const a=`/search/new?q=${encodeURIComponent(e)}${r?`&sources=${r.join(",")}`:""}`,i=d.useCallback(()=>WDe({query:e}),[e]);return o.jsx(qe,{href:VDe()?void 0:a,rel:n?"nofollow":void 0,onClick:i,...s,children:t})});tNe.displayName="CanonicalQuery";var dR,x4="HoverCard",[nNe,oun]=Ca(x4,[cf]),v4=cf(),[zUt,b4]=nNe(x4),rNe=e=>{const{__scopeHoverCard:t,children:n,open:r,defaultOpen:s,onOpenChange:a,openDelay:i=700,closeDelay:l=300}=e,c=v4(t),u=d.useRef(0),f=d.useRef(0),m=d.useRef(!1),p=d.useRef(!1),[h,g]=Ni({prop:r,defaultProp:s??!1,onChange:a,caller:x4}),y=d.useCallback(()=>{clearTimeout(f.current),u.current=window.setTimeout(()=>g(!0),i)},[i,g]),x=d.useCallback(()=>{clearTimeout(u.current),!m.current&&!p.current&&(f.current=window.setTimeout(()=>g(!1),l))},[l,g]),v=d.useCallback(()=>g(!1),[g]);return d.useEffect(()=>()=>{clearTimeout(u.current),clearTimeout(f.current)},[]),o.jsx(zUt,{scope:t,open:h,onOpenChange:g,onOpen:y,onClose:x,onDismiss:v,hasSelectionRef:m,isPointerDownOnContentRef:p,children:o.jsx(d5,{...c,children:n})})};rNe.displayName=x4;var sNe="HoverCardTrigger",aNe=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=b4(sNe,n),a=v4(n);return o.jsx(i_,{asChild:!0,...a,children:o.jsx(Xt.a,{"data-state":s.open?"open":"closed",...r,ref:t,onPointerEnter:it(e.onPointerEnter,vk(s.onOpen)),onPointerLeave:it(e.onPointerLeave,vk(s.onClose)),onFocus:it(e.onFocus,s.onOpen),onBlur:it(e.onBlur,s.onClose),onTouchStart:it(e.onTouchStart,i=>i.preventDefault())})})});aNe.displayName=sNe;var SH="HoverCardPortal",[GUt,qUt]=nNe(SH,{forceMount:void 0}),oNe=e=>{const{__scopeHoverCard:t,forceMount:n,children:r,container:s}=e,a=b4(SH,t);return o.jsx(GUt,{scope:t,forceMount:n,children:o.jsx(es,{present:n||a.open,children:o.jsx(Ky,{asChild:!0,container:s,children:r})})})};oNe.displayName=SH;var xk="HoverCardContent",iNe=d.forwardRef((e,t)=>{const n=qUt(xk,e.__scopeHoverCard),{forceMount:r=n.forceMount,...s}=e,a=b4(xk,e.__scopeHoverCard);return o.jsx(es,{present:r||a.open,children:o.jsx(KUt,{"data-state":a.open?"open":"closed",...s,onPointerEnter:it(e.onPointerEnter,vk(a.onOpen)),onPointerLeave:it(e.onPointerLeave,vk(a.onClose)),ref:t})})});iNe.displayName=xk;var KUt=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:i,...l}=e,c=b4(xk,n),u=v4(n),f=d.useRef(null),m=En(t,f),[p,h]=d.useState(!1);return d.useEffect(()=>{if(p){const g=document.body;return dR=g.style.userSelect||g.style.webkitUserSelect,g.style.userSelect="none",g.style.webkitUserSelect="none",()=>{g.style.userSelect=dR,g.style.webkitUserSelect=dR}}},[p]),d.useEffect(()=>{if(f.current){const g=()=>{h(!1),c.isPointerDownOnContentRef.current=!1,setTimeout(()=>{document.getSelection()?.toString()!==""&&(c.hasSelectionRef.current=!0)})};return document.addEventListener("pointerup",g),()=>{document.removeEventListener("pointerup",g),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!1}}},[c.isPointerDownOnContentRef,c.hasSelectionRef]),d.useEffect(()=>{f.current&&XUt(f.current).forEach(y=>y.setAttribute("tabindex","-1"))}),o.jsx(Gy,{asChild:!0,disableOutsidePointerEvents:!1,onInteractOutside:i,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:it(a,g=>{g.preventDefault()}),onDismiss:c.onDismiss,children:o.jsx(f5,{...u,...l,onPointerDown:it(l.onPointerDown,g=>{g.currentTarget.contains(g.target)&&h(!0),c.hasSelectionRef.current=!1,c.isPointerDownOnContentRef.current=!0}),ref:m,style:{...l.style,userSelect:p?"text":void 0,WebkitUserSelect:p?"text":void 0,"--radix-hover-card-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-hover-card-content-available-width":"var(--radix-popper-available-width)","--radix-hover-card-content-available-height":"var(--radix-popper-available-height)","--radix-hover-card-trigger-width":"var(--radix-popper-anchor-width)","--radix-hover-card-trigger-height":"var(--radix-popper-anchor-height)"}})})}),YUt="HoverCardArrow",QUt=d.forwardRef((e,t)=>{const{__scopeHoverCard:n,...r}=e,s=v4(n);return o.jsx(m5,{...s,...r,ref:t})});QUt.displayName=YUt;function vk(e){return t=>t.pointerType==="touch"?void 0:e()}function XUt(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP});for(;n.nextNode();)t.push(n.currentNode);return t}var lNe=rNe,cNe=aNe,uNe=oNe,dNe=iNe;const fR="text-foreground text-left hover:text-super focus:text-super mb-xs transition-color line-clamp-2 cursor-pointer font-sans text-sm font-medium duration-150",Ty=I.memo(({hideHoverCard:e=!1,children:t,contentProps:n,linkProps:r,result:s,webResultCitation:a,timestampComponent:i,trackEvent:l,getAttachmentUrl:c,onOpened:u})=>{const f=s?.is_conversation_history??!1,m=s?.is_memory??!1,p=f||m,[h,g]=d.useState(!1),[y,x]=d.useState(null),v=s.is_attachment??!1,b=rx(s),_=lo(s.url),w=d.useCallback(async()=>{if(!c)return;const q=await c(s.url);_&&(x(q),g(!0),R(!1),O.current=!1)},[c,s.url,_]),C=O_(s),S=w1e(s),E=S||p&&!C?null:s.meta_data?.generated_file_title??s.name,k=a?.cited_texts??[],M=s.meta_data?.generated_file_description??s.snippet,[j,R]=d.useState(!1),O=d.useRef(!1),[D,P]=d.useState(!1),A=!!(s.url&&sx(s.url)),T=zy(),N=s.meta_data?.authors,L=typeof s.meta_data?.wiley_book_uuid=="string",U=typeof s.meta_data?.domain_name=="string"?s.meta_data?.domain_name:void 0,$=d.useMemo(()=>CU(s),[s]);d.useEffect(()=>{if(typeof window>"u")return;function q(){O.current=!1}return document.addEventListener("visibilitychange",q),()=>{window.removeEventListener("visibilitychange",q)}},[]);const V=s.url||C,W=d.useCallback(()=>g(!1),[]),Q=d.useMemo(()=>({src:y??void 0}),[y]);return o.jsxs(lNe,{onOpenChange:q=>{!q&&O.current||(R(e?!1:q),q&&u?.())},open:j,openDelay:200,closeDelay:200,children:[A&&s.url&&o.jsx(D_,{isOpen:D,name:E,setisOpen:P,url:s.url}),_&&y&&o.jsx(L_,{isOpen:h,onClose:W,imgProps:Q}),o.jsx(cNe,{asChild:!0,"aria-label":E,onPointerEnter:()=>{O.current=!0},onClick:()=>{R(!1),O.current=!1},onPointerLeave:()=>{O.current=!1},children:t}),o.jsx(uNe,{children:o.jsx(dNe,{className:B({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!T}),side:"bottom",sideOffset:8,...n,children:o.jsxs("div",{className:"bg-base dark:border-subtler px-md w-80 rounded-xl border py-3 shadow-lg",children:[p&&!C?o.jsx(KB,{variant:"medium",searchType:m?"memory":"conversation-history"}):o.jsxs("div",{className:"gap-sm flex flex-col",children:[(V||i)&&o.jsxs("div",{className:"flex items-center justify-between",children:[V&&o.jsx(Wo,{className:"text-right",variant:"tiny",color:"light",url:s.url,isAttachment:v,source:U,connectionType:s.meta_data?.connection_type}),i]}),A?o.jsx("button",{className:fR,onClick:()=>{P(!0)},children:E}):b?o.jsx("button",{className:fR,onClick:w,children:E}):$?o.jsx(qB,{className:fR,result:s,trackEvent:l,...r,children:E}):o.jsx("span",{className:"text-foreground mb-xs line-clamp-2 text-left font-sans text-sm",children:E})]}),N?o.jsx(F,{color:"light",variant:"small",className:"line-clamp-3",children:N.join(", ")}):null,S?o.jsx(F,{variant:"small",color:"light",children:o.jsx(ie,{defaultMessage:"This is a private source.",id:"jKReyt0qq8",description:"Text shown when a source is private and obfuscated"})}):null,E!==s.name&&!m&&!S?o.jsx(F,{variant:"small",color:"light",children:s.name}):null,k.length>0?o.jsx("ul",{children:k.map((q,H)=>o.jsx("li",{className:"border-b last:border-b-0",children:o.jsx(F,{variant:"small",className:"line-clamp-[20] italic",children:q})},H))}):M&&o.jsx(F,{variant:"small",className:"line-clamp-4 whitespace-pre-wrap",children:M}),L?o.jsxs(z,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(de,{size:"sm",icon:mce})}),o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(ie,{defaultMessage:"Premium Source",id:"K/sjkPqxv7",description:"title"})})]}):null,C&&!S?o.jsxs(z,{className:"gap-xs pt-sm mt-sm flex items-center border-t",children:[o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(de,{size:"sm",icon:_0})}),o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(ie,{defaultMessage:"Personal Search",id:"7+aLCEyqS2",description:"title"})})]}):null]})})})]})});Ty.displayName="CitationHoverCard";const lc=I.memo(({variant:e=u_.subtle,label:t,accessory:n,onClick:r,className:s,size:a="default",textColor:i="default",icon:l,iconClassName:c,iconOnly:u=!1,tooltip:f,truncate:m=!1,hover:p=!0,href:h,linkBehavior:g="none",trackEvent:y,forceExternalHandler:x})=>{const v=d.useCallback(C=>{g==="external"&&h&&y&&y("click citation",{source:"inline",citation_url:h}),(g!=="external"||x)&&r?.(C)},[r,g,h,y,x]),b=o.jsxs(z,{as:"span",variant:e,className:B("text-3xs rounded-badge group min-w-4 cursor-pointer text-center align-middle font-mono tabular-nums",{"py-[0.1875rem] leading-snug":a==="default","py-[0.175rem] leading-none":a==="small","py-[0.125rem] leading-none":a==="extraSmall"},{"px-[0.3rem]":!u,"inline-block px-[0.1875rem]":u,"[@media(hover:hover)]:hover:bg-super dark:[@media(hover:hover)]:hover:text-inverse [@media(hover:hover)]:hover:text-white":p}),onClick:g==="external"?void 0:r,children:[l&&o.jsx(de,{icon:l,size:"2xs",className:B("-mt-px inline-block align-middle opacity-80",{"mr-xs":!u},c)}),o.jsx("span",{ref:C=>{if(C&&m){const S=C.scrollWidth>C.clientWidth;C.style.maskImage=S?"linear-gradient(to right, black 70%, transparent 100%)":""}},className:B("relative -mt-px inline-block align-middle",{"max-w-[25ch] overflow-hidden":m}),children:t}),!!n&&o.jsx("span",{className:"ml-xs -mt-px mr-px inline-block align-middle",children:n})]}),_=f?o.jsx(bn,{tooltipText:f,tooltipLayout:"top",asChild:!0,children:b}):b,w=o.jsx(F,{as:"span",color:i,className:B("relative -mt-px select-none whitespace-nowrap",{"-top-px":a==="default","-top-[3px] leading-none":a==="small","-top-two leading-none":a==="extraSmall"},s),children:_});return g==="external"&&h?o.jsx(qe,{href:h,target:"_blank",rel:"noopener",className:"inline",onClick:v,children:w}):w});lc.displayName="CitationBubble";const _4=I.memo(e=>o.jsx(lc,{...e}));_4.displayName="CitationNumberBubble";const EH=I.memo(({sources:e,count:t,variant:n="default",className:r})=>{const s="clip-path-small",a="clip-path-default",i=Math.min(e.length,t),l=d.useMemo(()=>{if(e.length===0)return[];const c=[],u=new Set;for(const p of e){const h=Xs(p);u.has(h)||(c.push(h),u.add(h))}if(c.length>=i)return c.slice(0,i);const f=[...c],m=i-f.length;for(let p=0;p<m&&p<e.length;p++){const h=e[p];h&&f.push(h)}return f.slice(0,i)},[e,i]);return i===0?null:o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:a,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),o.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:s,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),o.jsx("div",{className:B("gap-xs relative flex shrink-0 items-center",r),children:o.jsx("div",{className:"ml-xs flex",children:l.map((c,u)=>o.jsx(ol,{domain:c,size:n==="small"?12:14,className:B("bg-subtle relative z-0 shrink-0",{"-ml-[5px]":n==="default"},{"-ml-xs":n==="small"}),style:u!==i-1?{clipPath:`url(#${n==="small"?s:a})`}:void 0},u))})})]})});EH.displayName="CitationPile";function ZUt(e,t){return e==null?1:t==null?-1:e==null&&t==null?0:!isNaN(Number(e))&&!isNaN(Number(t))?Number(e)-Number(t):String(e).localeCompare(String(t))}const JUt=({children:e,...t})=>o.jsx("table",{...t,children:e}),eBt=({children:e,...t})=>o.jsx("tr",{...t,children:e}),tBt=({children:e,index:t,id:n,data:r,...s})=>o.jsx("td",{...s,children:o.jsx(F,{variant:"tiny",className:B({"font-normal":t}),children:e})}),nBt=({SortButton:e,children:t})=>o.jsx("th",{className:"py-sm pr-sm text-left align-text-top outline-none",children:o.jsxs(z,{className:B("group relative flex items-center justify-between"),children:[o.jsx(F,{variant:"tiny",color:"light",children:t}),e]})}),fNe=I.memo(function({name:t,setSortDescriptor:n}){return o.jsx("button",{className:"right-sm absolute opacity-0 transition-opacity duration-200 group-hover:opacity-100",onClick:()=>{n(r=>({...r,column:t,reverse:!r.reverse}))},children:o.jsx(F,{variant:"tiny",color:"super",children:o.jsx(de,{icon:KLe,size:"xs"})})})});fNe.displayName="SortButton";const mNe=I.memo(({collapsed:e,setCollapsed:t,viewMoreText:n,viewLessText:r})=>{const s=d.useCallback(()=>{t(a=>!a)},[t]);return o.jsx(z,{className:"pb-sm",children:o.jsx(me,{pill:!0,variant:"border",size:"tiny",chevron:!0,chevronIcon:e?Wn:$y,text:e?n:r,onClick:s})})});mNe.displayName="ResponsiveTableExpander";const Eoe="focus-visible:outline-super focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-0",pNe=I.memo(function(t){const{data:n,columns:r,compareFunction:s,RowCell:a,HeaderCell:i,Row:l,Table:c,limit:u}=t,[f,m]=d.useState({column:void 0,reverse:!1}),p=n.at(0),h=d.useMemo(()=>r??Object.keys(p??{}).map(w=>({name:w})),[p,r]),g=s??ZUt,y=d.useMemo(()=>{const w=n.map(C=>({data:C,key:C.key??Math.random().toString(36).substring(7)}));return f.column&&w.sort((C,S)=>g(C.data[f.column],S.data[f.column])*(f.reverse?-1:1)),w.slice(0,u||w.length)},[n,u,f,g]),x=i??nBt,v=c??JUt,b=l??eBt,_=a??tBt;return o.jsx("div",{className:"overflow-x-auto",children:o.jsxs(v,{className:"w-full border-collapse",children:[o.jsx("thead",{children:o.jsx(b,{id:"_header",children:h.map((w,C)=>o.jsx(hNe,{index:C,HeaderCell:x,setSortDescriptor:m,...w},w.name))})}),o.jsx("tbody",{children:y.map(w=>o.jsx(b,{id:w.key,className:B("group",Eoe,"border-subtlest border-t border-dashed !outline-none first:border-solid"),children:h.map(({name:C},S)=>o.jsx(_,{id:C,index:S,data:w.data,className:B("pr-sm align-text-top last:pr-0",Eoe,'group-data-[selected="true"]:first:border-l-super py-sm group-data-[selected="true"]:border-super group-data-[selected="true"]:bg-super/10 group-data-[selected="true"]:first:pl-xs group-data-[selected="true"]:last:pr-xs dark:group-data-[selected="true"]:bg-super/10 rounded-sm outline-none transition-all duration-300 ease-in-out group-data-[selected="true"]:first:border-l-2 group-data-[selected="true"]:last:border-r-2'),children:String(w.data[C])},C))},w.key))})]})})});pNe.displayName="ResponsiveTable";const hNe=I.memo(({index:e,HeaderCell:t,setSortDescriptor:n,...r})=>{const s=d.useMemo(()=>o.jsx(fNe,{name:r.name,setSortDescriptor:n}),[r.name,n]);return o.jsx(t,{index:e,id:r.name,data:r,SortButton:s,children:r.label??r.name},r.name)});hNe.displayName="HeaderCellFactory";const TL=3,bk=I.memo(({children:e})=>o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx("time",{className:"text-nowrap",children:e})}));bk.displayName="Timestamp";const gNe=I.memo(({source:e,includeRootLink:t=!0})=>{const{$t:n}=Z(),{trackEvent:r}=Te(),s=d.useMemo(()=>({onClick(){r("click citation",{source:"hoverCard",citation_url:e.url})}}),[e.url,r]),a=d.useMemo(()=>({color:"light"}),[]);return o.jsx(Ty,{timestampComponent:e.timestamp?o.jsx(N3,{recentlyUpdatedLabel:n({defaultMessage:"just now",id:"I90sbWU03C"}),timestamp:e.timestamp,timestampProps:a,children:n({defaultMessage:"Updated",id:"xrk6zgu9jU"})}):null,linkProps:s,result:e,children:o.jsx(rBt,{url:t?e.url:void 0,children:o.jsx(_4,{label:`${e.id}`,className:"mb-xs"})})})});gNe.displayName="Citation";const rBt=({children:e,url:t,ref:n,...r})=>t!==void 0?o.jsx(qe,{href:t,target:"_blank",rel:"noopener nofollow",ref:n,...r,children:e}):o.jsx("span",{ref:n,...r,children:e}),sBt=(e,t)=>{if(!e)return"";const n=new Date(e),r=new Date;return Math.abs(+n-+r)<1e3*60*60*24?new Intl.RelativeTimeFormat(t,{localeMatcher:"best fit",numeric:"auto",style:"long"}).format(0,"day"):n.toLocaleDateString(void 0,{month:"short",day:"numeric",year:"numeric"})},yNe=I.memo(({post:e})=>{const{locale:t}=Z(),{isMobileStyle:n}=xe(),r=d.useMemo(()=>e.timestamp?sBt(e.timestamp,t):"",[e.timestamp,t]);return o.jsx(z,{children:o.jsx(tNe,{query:e.headline,nofollow:!0,children:o.jsxs("span",{className:"group/post pb-xs cursor-pointer",children:[o.jsxs(F,{variant:n?"smallBold":"baseSemi",className:"mb-xs gap-sm flex items-baseline justify-between",children:[o.jsx("span",{className:"leading-snug duration-150",children:e.headline}),o.jsxs("div",{className:"flex translate-x-1 items-center gap-0.5",children:[e.timestamp&&!n&&o.jsx(z,{className:"gap-sm capitalize",children:o.jsx(bk,{children:r})}),o.jsx(de,{icon:Xn,size:"sm",className:"text-quiet group-hover/post:text-foreground translate-y-1 opacity-75 duration-150 md:translate-y-0"})]})]}),o.jsxs(F,{variant:n?"small":"base",className:"text-pretty leading-tight",children:[o.jsx("span",{className:"opacity-75",children:e.text}),o.jsx("span",{className:"ml-xs inline-flex",children:e.sources.map((s,a)=>o.jsx("span",{className:"mr-xs",children:o.jsx(gNe,{source:s,includeRootLink:!1},s.id)},a))})]}),e.timestamp&&n&&o.jsxs(z,{className:"mt-sm gap-xs flex items-center capitalize",children:[o.jsx(mp,{className:"text-quiet opacity-80",size:16}),o.jsx(bk,{children:r})]})]})})})});yNe.displayName="Post";const xNe=I.memo(({created:e,posts:t,title:n,variant:r})=>{const{$t:s}=Z(),[a,i]=d.useState(!0),[l,c]=d.useState(!1),{locale:u}=Z(),[f,m]=d.useState(Date.now());d.useEffect(()=>{const b=setInterval(()=>m(Date.now()),15e3);return()=>clearInterval(b)},[]);const p=Os(),h=d.useMemo(()=>{if(!e||!p)return"";const b=Date.parse(e),_=f-b;let w=_/6e4,C="days";w<1?(w=_/1e3,C="seconds"):w<60?(w=_/6e4,C="minutes"):w<1440?(w=_/36e5,C="hours"):(w=_/864e5,C="days"),w=-Math.abs(Math.floor(w));const S=new Intl.RelativeTimeFormat(u,{localeMatcher:"best fit",numeric:"auto",style:"short"});return s({defaultMessage:"Updated {time}",id:"0aJxT29U/1"},{time:S.format(w,C)})},[e,f,s,u,p]),g=d.useMemo(()=>{if(!t?.length)return[];const b=t.flatMap(_=>_.sources).map(_=>[_.id,_]);return Object.values(Object.fromEntries(b))},[t]),y=d.useMemo(()=>g.map(b=>b.url),[g]),x=d.useCallback(()=>c(!0),[]),v=d.useCallback(()=>c(!1),[]);return o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsxs(z,{className:B("gap-xs px-md py-sm flex flex-wrap items-center justify-between",{"border-b":r!=="raised"}),children:[o.jsxs(F,{variant:"baseSemi",color:t.length>0?"super":"ultraLight",className:"gap-sm flex items-center",as:"h2",children:[o.jsx(iBt,{animate:t.length>0}),o.jsx("span",{children:n??s({defaultMessage:"What's Happening",id:"wVxgwE2ray"})})]}),o.jsx(bk,{children:h})]}),o.jsxs(z,{variant:r,className:B({"rounded-xl border":r==="raised"}),children:[o.jsx(na,{transition:{ease:an,duration:.2},children:o.jsx(Zr,{children:t.length===0?o.jsx(aBt,{}):o.jsx("ul",{className:"pb-md grid",children:t.slice(0,a?TL:t.length).map((b,_)=>o.jsx(ve.li,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0},transition:{y:{ease:an,duration:.2}},className:"mx-md border-subtlest py-md block border-b last:border-b-0 last:pb-0",children:o.jsx(yNe,{post:b},_)},b.headline))})})}),t.length>0&&o.jsxs(o.Fragment,{children:[t.length>TL&&o.jsx(z,{className:"px-md",children:o.jsx(mNe,{collapsed:a,setCollapsed:i,viewMoreText:s({defaultMessage:"View More",id:"QQSdHPJWXu"}),viewLessText:s({defaultMessage:"View Less",id:"UOYN/MXiOT"})})}),o.jsx("div",{className:"pb-md pl-md",children:o.jsxs(z,{as:"button",bgHover:"subtle",className:"gap-sm px-sm inline-flex items-center rounded-full border py-1.5",onClick:x,children:[o.jsx(EH,{sources:y,count:4}),o.jsxs(F,{variant:"tiny",color:"light",children:[g.length," Sources"]})]})})]})]})]}),o.jsx(XB,{isOpen:l,onClose:v,webResults:g})]})});xNe.displayName="WhatsHappening";const aBt=()=>o.jsx(un,{className:"px-md",children:o.jsx("div",{className:"divide-y",style:{maskImage:"linear-gradient(to bottom, black 50%, transparent)"},children:Array.from({length:TL}).map((e,t)=>o.jsx(oBt,{},t))})}),oBt=()=>o.jsxs(z,{className:"gap-sm py-md flex flex-col",children:[o.jsx(z,{className:"mb-sm h-2 w-4/5 rounded-full",variant:"subtle"}),o.jsx(z,{className:"h-2 w-3/5 rounded-full",variant:"subtle"}),o.jsx(z,{className:"h-2 w-3/5 rounded-full",variant:"subtle"}),o.jsx(z,{className:"h-2 w-2/5 rounded-full",variant:"subtle"})]}),OS=(e,t)=>t?{initial:{opacity:0},animate:{opacity:1},transition:{duration:1,repeat:1/0,repeatDelay:5,ease:_a,delay:e}}:{opacity:1},iBt=({animate:e})=>o.jsx("svg",{viewBox:"0 0 576 512",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"text-super inline-block h-[1em] overflow-visible align-[-0.125em]",children:o.jsxs("g",{children:[o.jsx(ve.path,{d:"M99.8 69.4C110 77.8 111.4 93 103 103.2C68.6 144.7 48 197.9 48 256C48 314.1 68.6 367.3 103 408.8C111.4 419 110 434.1 99.8 442.6C89.6 451.1 74.5 449.6 66 439.4C24.8 389.6 0 325.7 0 256C0 186.3 24.8 122.4 66 72.6C74.4 62.4 89.6 61 99.8 69.4ZM476.3 69.4C486.5 61 501.6 62.4 510.1 72.6C551.3 122.4 576.1 186.4 576.1 256C576.1 325.6 551.3 389.6 510.1 439.4C501.7 449.6 486.5 451 476.3 442.6C466.1 434.2 464.7 419 473.1 408.8C507.4 367.3 528.1 314.1 528.1 256C528.1 197.9 507.5 144.7 473.1 103.2C464.7 93 466.1 77.9 476.3 69.4Z",fill:"currentColor",...OS(.3,e)}),o.jsx(ve.path,{...OS(.15,e),d:"M160 256C160 226.4 170 199.2 186.9 177.5C195 167 193.2 151.9 182.7 143.8C172.2 135.7 157.1 137.5 149 148C125.8 177.8 112 215.3 112 256C112 296.7 125.8 334.2 149 364C157.2 374.5 172.2 376.4 182.7 368.2C193.2 360 195 345 186.9 334.5C170 312.8 160 285.6 160 256Z",fill:"currentColor"}),o.jsx(ve.path,{...OS(.15,e),d:"M464 256C464 215.3 450.2 177.8 427 148C418.8 137.5 403.8 135.6 393.3 143.8C382.8 152 381 167 389.1 177.5C406 199.2 416 226.4 416 256C416 285.6 406 312.8 389.1 334.5C381 345 382.8 360.1 393.3 368.2C403.8 376.3 418.9 374.5 427 364C450.2 334.2 464 296.7 464 256Z",fill:"currentColor"}),o.jsx(ve.path,{...OS(0,e),d:"M259.716 227.716C252.214 235.217 248 245.391 248 256C248 266.609 252.214 276.783 259.716 284.284C267.217 291.786 277.391 296 288 296C298.609 296 308.783 291.786 316.284 284.284C323.786 276.783 328 266.609 328 256C328 245.391 323.786 235.217 316.284 227.716C308.783 220.214 298.609 216 288 216C277.391 216 267.217 220.214 259.716 227.716Z",fill:"currentColor"})]})}),lBt=({hype:e,title:t,variant:n})=>o.jsx(xNe,{title:t,created:e?.created,posts:e?.posts??ce,variant:n}),cBt=({hype:e,variant:t="subtler",className:n})=>{const{$t:r}=Z(),s=r({defaultMessage:"Latest News",id:"BlFeZAX10O"});return o.jsx(Nr,{children:o.jsx(z,{variant:t==="raised"?"transparent":"subtler",className:B("rounded",n),children:o.jsx(lBt,{variant:t!=="raised"?"transparent":t,hype:e,title:s})})})},uBt=({eventId:e,enabled:t})=>Ue({queryKey:Z4e(e??""),queryFn:()=>J4e({eventId:e??""}),enabled:!!e&&!!t,retry:!1,staleTime:5*60*1e3}),iun=({league:e,story:t})=>o.jsx(bNe,{league:e,story:t,children:o.jsxs(z,{className:"bg-subtle hover:bg-subtler gap-sm py-xs flex w-fit place-items-center rounded-full pl-3 pr-2 transition-colors",variant:"subtle",children:[o.jsx(F,{variant:"smallBold",color:"light",children:o.jsx(ie,{defaultMessage:"Watch the highlights",id:"Z2uaDmB5pt"})}),o.jsx(vNe,{story:t,className:"p-two size-9",border:!1})]})}),vNe=({story:e,className:t,border:n=!0})=>{const r=e?.storyThumbnailUrls?.find(s=>s.aspectRatio==="1x1")?.url||e?.storyThumbnailUrl;return o.jsx(z,{variant:"super",className:B("group rounded-full",{"p-one sm:p-three":n},t),children:o.jsx(z,{className:B({"p-two rounded-full bg-white dark:bg-black":n}),children:o.jsx(z,{className:"relative overflow-hidden rounded-full",children:o.jsx("img",{src:r,alt:e.title||"",className:B("aspect-square object-cover transition-opacity group-hover:opacity-80"),loading:"lazy"})})})})},bNe=({league:e,story:t,children:n})=>{const{trackEvent:r}=Te(),{inApp:s}=Xo(),a=d.useCallback(()=>{r("sports wsc story clicked",{eventId:t.id,league:e})},[r,e,t?.id]);return o.jsx("a",{href:t.storyUrl,target:s?void 0:"_blank",onClick:a,className:"cursor-pointer",children:n})};function dBt({className:e,league:t,story:n}){return n?.id?o.jsx(bNe,{league:t,story:n,children:o.jsx(vNe,{story:n,className:e})}):null}function fBt({type:e,season:t,imgUrl:n,eventId:r}){yp("header");const{$t:s}=Z(),a="#84754E",{data:i}=uBt({eventId:r,enabled:!!r}),l=d.useCallback(p=>{if(!p)return null;const h=new Date(p+"T00:00:00");return isNaN(h.getTime())?null:h.toLocaleDateString("en-US",{month:"short",day:"numeric"})},[]),c=l(t.start_date),u=l(t.end_date),f=d.useMemo(()=>[c&&u?s({defaultMessage:"{startDate} - {endDate},",id:"uLiKxHxStJ"},{startDate:c,endDate:u}):c||u,t.year].filter(Boolean).join(" "),[c,u,t.year,s]),m=t?e==="season"?s({defaultMessage:"{year} Season",id:"oERTY0/4Zj"},{year:t.year}):e==="tournament"?f:null:null;return o.jsxs("div",{className:"gap-sm p-md relative flex h-[120px] items-end overflow-hidden rounded-xl",style:{"--header-bg":a},children:[o.jsx("div",{className:"absolute inset-0 overflow-hidden rounded-xl dark:after:absolute dark:after:inset-0 dark:after:rounded-xl dark:after:border dark:after:border-white/10",children:o.jsx(t$,{className:"-inset-xl !absolute !bg-[var(--header-bg,#84754E)] ![--dot-bg:var(--header-bg,#84754E)]",dotClassName:"!text-[white]",highlightClassName:"!bg-white/10"})}),o.jsx("div",{className:"gap-md flex items-end md:items-center",children:o.jsxs("div",{className:"gap-sm relative flex flex-col items-start",children:[o.jsx("img",{className:"relative w-[180px]",src:n,alt:"Laver Cup Logo"}),o.jsx(F,{variant:"small",color:"white",className:"leading-tight opacity-80",children:m}),i&&o.jsx(dBt,{league:"atp",story:i})]})})]})}function _Ne({src:e,name:t,onBroken:n,className:r}){const[s,a]=d.useState(void 0),i=d.useRef(null),l=()=>{a(!0),n?.()},c=()=>{i.current&&i.current.naturalHeight>0&&a(!1)};return d.useEffect(()=>{i.current&&(i.current.complete&&i.current.naturalHeight===0?(a(!0),n?.()):a(!1))},[i,n]),s||!e?o.jsxs("svg",{viewBox:"0 0 62 62",children:[o.jsx("mask",{id:"mask0_634_1278",style:{maskType:"alpha"},maskUnits:"userSpaceOnUse",x:"0",y:"0",width:"62",height:"62",children:o.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z"})}),o.jsxs("g",{mask:"url(#mask0_634_1278)",children:[o.jsx("path",{d:"M31 62C48.1208 62 62 48.1208 62 31C62 13.8792 48.1208 0 31 0C13.8792 0 0 13.8792 0 31C0 48.1208 13.8792 62 31 62Z",className:"fill-subtle"}),o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M31 44C39.8366 44 47 36.165 47 26.5C47 16.835 39.8366 9 31 9C22.1634 9 15 16.835 15 26.5C15 36.165 22.1634 44 31 44ZM-11 70.5C-11 57.1768 1.57462 45.9165 18.8426 42.2547C22.1373 45.2176 26.3757 47 31 47C35.6243 47 39.8627 45.2176 43.1574 42.2547C60.4254 45.9165 73 57.1768 73 70.5C73 86.7924 54.196 100 31 100C7.80404 100 -11 86.7924 -11 70.5Z",className:"fill-foreground opacity-10"})]})]}):o.jsx("img",{ref:i,src:e,className:B(r,{"opacity-0":s===void 0}),alt:t,onError:l,onLoad:c})}const lun=({style:e,...t})=>o.jsx("div",{className:"bg-subtle relative size-10 shrink-0 overflow-hidden rounded-full md:size-[60px]",style:e,children:o.jsx(_Ne,{...t,className:"block size-full object-cover object-center"})}),mBt=({title:e=!0,infoItems:t})=>{const{$t:n}=Z(),{isMobileStyle:r}=xe(),s=t.filter(a=>a.value!=null&&a.value!=="");return s.length===0?null:r?o.jsx("div",{children:o.jsx(hBt,{children:s.map(a=>o.jsx(_k,{...a},a.label))})}):o.jsx(Wt,{header:e&&o.jsx(F,{variant:"baseSemi",className:"ml-md mb-sm",children:n({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"})}),children:o.jsx(pBt,{children:s.map(a=>o.jsx(_k,{...a},a.label))})})},pBt=({children:e})=>o.jsx("div",{className:"p-md gap-sm flex flex-col overflow-hidden",children:o.jsx(z,{className:"gap-sm grid grid-cols-[1fr_1fr_1fr] lg:grid-cols-[1fr_1fr_1fr_1fr]",children:e})}),hBt=({children:e})=>o.jsx("div",{className:"gap-sm -mx-md scrollbar-none flex overflow-x-auto",children:o.jsx("div",{className:"px-md gap-sm flex",children:e})});function _k({label:e,value:t,className:n}){const{isMobileStyle:r}=xe(),s=r?Wt:z,a=r?"py-sm px-[12px]":void 0;return t==null||t===""?null:o.jsxs(s,{className:B(a,n),children:[o.jsx(F,{variant:r?"tinyRegular":"small",color:"light",className:r?"whitespace-nowrap":void 0,children:e}),o.jsx(F,{variant:"smallBold",children:t})]})}function gBt({teams:e}){const{europe:t,world:n}=Rw();return o.jsxs(z,{className:"gap-lg mt-lg flex flex-col",children:[o.jsxs(z,{children:[o.jsx(Moe,{name:"europe",color:t,prevWinner:!0}),o.jsx(koe,{config:e.europe,color:t,team:"europe"})]}),o.jsxs(z,{children:[o.jsx(Moe,{name:"world",color:n}),o.jsx(koe,{config:e.world,color:n,team:"world"})]})]})}const Moe=({name:e,color:t,prevWinner:n})=>{const r=e==="europe"?"Europe":"World",{$t:s}=Z();return o.jsxs("div",{className:"gap-sm mb-sm pl-sm md:pl-md flex items-center",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx("div",{className:"flex size-6 items-center justify-center rounded-md",style:{backgroundColor:t},children:o.jsx("img",{src:SNe[e],alt:e})}),o.jsx(F,{variant:"baseSemi",children:s({defaultMessage:"Team {name}",id:"HTz+p5sZsy"},{name:r})})]}),n&&o.jsxs(z,{className:"px-sm py-xs gap-xs ml-auto flex items-center rounded-full border",children:[o.jsx(de,{icon:Kb,size:"2xs",className:"opacity-50"}),o.jsx(F,{variant:"tinyRegular",color:"light",children:s({defaultMessage:"Defending Champion",id:"4+F8AQjH+h"})})]})]})},koe=({config:e,color:t,team:n})=>{const{$t:r}=Z(),{captain:s,viceCaptain:a,players:i}=e;return o.jsxs(Wt,{className:"p-md relative overflow-hidden border-none",children:[o.jsx("div",{className:"absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:t,maskImage:"linear-gradient(to bottom right, black, transparent 40%, rgba(0, 0, 0, 0))"}}),o.jsx(z,{className:"rounded-inherit absolute inset-0 border"}),o.jsxs("div",{className:"relative",children:[o.jsxs(yBt,{children:[o.jsx(_k,{label:r({defaultMessage:"Captain",id:"n47Ce9YDZE"}),value:s,className:"gap-sm items-center !bg-transparent md:flex"}),o.jsx(_k,{label:r({defaultMessage:"Vice Captain",id:"M46+waT3VZ"}),value:a,className:"gap-sm items-center !bg-transparent md:flex"})]}),o.jsx(z,{className:"gap-md flex flex-col",children:i.map(l=>o.jsx(xBt,{...l,team:n},l.name))})]})]})},yBt=({children:e})=>{const{isMobileStyle:t}=xe();return t?o.jsx(z,{className:"pb-md mb-md gap-sm flex border-b",children:e}):o.jsx(z,{className:"pb-md mb-md gap-lg flex items-center border-b",children:e})},Toe='path(evenodd, "M -10 -10 L 58 -10 L 58 68 L -10 68 Z M 18 40 Q 14 40 14 44 L 14 56 Q 14 60 18 60 L 30 60 Q 34 60 34 56 L 34 44 Q 34 40 30 40 Z")',xBt=({name:e,img:t,rank:n,country:r,description:s,team:a})=>{const{europe:i,world:l}=Rw(),c=a==="europe"?i:l;return o.jsxs(z,{className:"grid grid-cols-[1fr_auto] gap-3",children:[o.jsxs(z,{className:"size-xl relative translate-y-1",children:[o.jsx("div",{className:"shadow-overlay aspect-square overflow-hidden rounded-full",style:{clipPath:Toe,WebkitClipPath:Toe},children:o.jsx(_Ne,{src:t,name:e,className:"block size-full"})}),o.jsx(iy,{countryCode:r,className:"shadow-subtle absolute left-1/2 top-full w-4 -translate-x-1/2 -translate-y-1/2 rounded-sm"})]}),o.jsxs(z,{children:[o.jsxs(z,{className:"gap-sm flex items-center justify-start",children:[o.jsx(F,{variant:"baseSemi",children:e}),o.jsxs(F,{variant:"tiny",color:"light",className:"relative rounded-md px-[6px] py-0.5",children:[o.jsx("span",{className:"rounded-inherit mix-blend-hardlight absolute inset-0 opacity-10 dark:opacity-20",style:{backgroundColor:c}}),o.jsx("span",{className:"relative inline-flex translate-y-px",style:{color:c},children:n})]})]}),o.jsx(F,{variant:"small",color:"light",children:s})]})]})},wNe=I.memo(({children:e,maxFaces:t=3,showMore:n=!0,clickable:r=!1,size:s="medium",onAvatarClick:a,backgroundClass:i})=>{const l=I.Children.count(e);return o.jsxs(z,{onClick:r?a:void 0,bgHover:r?"subtler":void 0,className:B("group flex items-center",{"p-xs cursor-pointer rounded-full transition-all":r}),children:[I.Children.map(e,(c,u)=>u<t?o.jsx(z,{variant:"background",className:B("rounded-full group-hover:bg-transparent",{"relative transition-all duration-200 ease-in-out":u!==0,"p-two group-hover:-ml-xs -ml-[10px]":u!==0&&s==="small","p-two group-hover:-ml-sm -ml-[16px]":u!==0&&s==="medium"},i),children:o.jsx("div",{children:c})},u):null),n&&l>t&&o.jsx(z,{children:o.jsxs(F,{variant:"smallCaps",color:"light",className:"px-xs",children:["+",l-t]})})]})});wNe.displayName="AvatarList";const Noe=({score:e,team:t,players:n,last:r,winner:s,loser:a})=>{const{$t:i}=Z(),{isMobileStyle:l}=xe(),c=SNe[t.toLowerCase()],{europe:u,world:f}=Rw(),m=t.toLowerCase()==="europe"?u:f;return o.jsxs(Wt,{className:B("relative flex items-center overflow-hidden border-none",{"flex-row-reverse":r,"gap-sm p-[12px]":l,"p-md gap-md":!l,"opacity-50":a}),children:[o.jsxs("div",{className:"rounded-inherit absolute inset-0",children:[o.jsx("div",{className:"rounded-inherit absolute inset-0 opacity-10 dark:opacity-25",style:{backgroundColor:m,maskImage:r?"linear-gradient(to right, transparent, black)":"linear-gradient(to left, transparent, black)"}}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border opacity-10",style:{borderColor:m}})]}),o.jsxs("div",{className:B("relative flex aspect-square w-12 items-center justify-center rounded-md",{hidden:l}),style:{backgroundColor:m},children:[o.jsx("img",{src:c,alt:t,className:"relative h-auto w-10 object-contain"}),s&&o.jsx(z,{className:B("p-xs absolute top-0 z-10 -translate-y-1/3 rounded-full border",{"left-0 -translate-x-1/3":!r,"right-0 translate-x-1/3":r}),style:{borderColor:"white",borderWidth:1,backgroundColor:m},children:o.jsx(Kb,{size:15,color:"white"})})]}),o.jsx("div",{className:"gap-sm relative flex flex-col items-center",children:o.jsxs("div",{className:B("gap-xs flex flex-col",{"items-end":r,"items-start":!r}),children:[o.jsx(z,{className:"gap-xs flex items-center",children:o.jsx(F,{variant:"smallBold",className:"whitespace-nowrap",children:i({defaultMessage:"Team {team}",id:"5gr4uNrlJ2"},{team:t})})}),n&&o.jsx(z,{className:"gap-sm flex flex-col",children:o.jsx(wNe,{size:"small",backgroundClass:"bg-transparent",showMore:!1,maxFaces:6,children:n.filter(p=>p.img).map(p=>o.jsx(Un,{size:"small",user:p.img??"",className:"shadow-overlay rounded-full bg-white",showBackground:!1},p.img))})})]})}),o.jsxs("div",{className:B("-mt-xs relative flex flex-col items-center",{"mr-sm ml-auto":!r,"ml-sm mr-auto":r}),children:[o.jsx(F,{variant:l?"section-title":"page-title",className:"leading-none",color:e>0?"default":"light",children:o.jsx(ec,{animated:!0,value:e,format:{style:"decimal",minimumFractionDigits:0,maximumFractionDigits:0}})}),o.jsx(F,{variant:l?"tinyRegular":"small",color:"light",className:B("leading-none",{"-mt-xs":!l}),children:i({defaultMessage:"{count, plural, one {point} other {points}}",id:"OTgg6EBiyt"},{count:e})})]})]})};function vBt({scoreEurope:e,scoreWorld:t,teams:n}){const{$t:r}=Z(),{europe:s,world:a}=Rw(),i=e>=13||t>=13,l=i&&e>t,c=i&&t>e;return o.jsxs(z,{className:"grid grid-cols-[1fr_auto_1fr] items-center",children:[o.jsx(Noe,{loser:c,winner:l,score:e,team:r({defaultMessage:"Europe",id:"X3AIiKlYIf"}),players:n?.europe.players}),o.jsxs(z,{className:"relative z-10 mx-[-12px] flex size-8 items-center justify-center rounded-full shadow-md",variant:"raised",children:[o.jsxs("div",{className:"absolute inset-0 opacity-25",children:[o.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:a,maskImage:"linear-gradient(to right, transparent, black)"}}),o.jsx("div",{className:"absolute inset-0 rounded-full border",style:{borderColor:s,maskImage:"linear-gradient(to left, transparent, black)"}})]}),o.jsx(F,{variant:"smallCaps",color:"light",className:"relative text-center",children:"VS"})]}),o.jsx(Noe,{loser:l,winner:c,score:t,team:r({defaultMessage:"World",id:"jqdzk6QquP"}),players:n?.world.players,last:!0})]})}const bBt=(e,t,n)=>{if(!e||!t)return null;try{return e.toLocaleString(n,{style:"currency",currency:t,notation:"compact",compactDisplay:"short"})}catch{return null}},_Bt=({title:e=!0,tournamentInfo:t})=>{const{$t:n}=Z(),{season:r}=t,{info:s,competition:a}=r,i=d.useMemo(()=>[{label:n({defaultMessage:"Location",id:"rvirM238ZE"}),value:s?.complex},{label:n({defaultMessage:"Surface",id:"/AElfCMvxg"}),value:s?.surface_text},{label:n({defaultMessage:"Competitors",id:"GnmePy5BjJ"}),value:s?.number_of_competitors},{label:n({defaultMessage:"Prize Money",id:"bFVLOCMwiJ"}),value:bBt(s?.prize_money,s?.prize_currency)},{label:n({defaultMessage:"Level",id:"y1Qr811Pys"}),value:a?.level_text}],[s,a,n]);return o.jsx(mBt,{title:e,infoItems:i})},CNe="laver-cup-client-page",wBt=async e=>{const{error:t,data:n}=await re.GET("/rest/sports/tennis/atp/tournaments/lavercup",CNe,{params:{query:{year:e}},timeoutMs:0});if(t)throw new we("API_CLIENTS_ERROR",{cause:t,details:{year:e}});return n},DS={europe:{light:"#003359",dark:"#006CBD"},world:{light:"#782327",dark:"#C53A40"}},Rw=()=>{const{colorScheme:e}=jr();return{europe:e==="dark"?DS.europe.dark:DS.europe.light,world:e==="dark"?DS.world.dark:DS.world.light}},SNe={europe:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-europe-no-text.svg",world:"https://lavercup.com/wp-content/themes/lavercup_spark/assets/graphics/trophy-world-no-text.svg"},CBt=()=>+(Ot().get("year")??new Date().getFullYear());function cun(){const e=CBt(),{data:t,isLoading:n}=Ue({...ky,queryFn:()=>wBt(e),queryKey:["/sports/atp/tournaments/lavercup"]}),{data:r}=Ue({...ky,queryFn:()=>eNe({league:`${e} Laver Cup`,reason:CNe}),queryKey:["/sports/hype/lavercup"]}),{$t:s}=Z(),a=d.useMemo(()=>({tournamentInfo:{title:s({defaultMessage:"Tournament Info",id:"Z/95hzDc2J"}),id:"tournamentInfo",ref:d.createRef(),show:!0},schedule:{title:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"}),id:"schedule",ref:d.createRef(),show:!!t?.events&&t?.events?.length>0},participants:{title:s({defaultMessage:"Participants",id:"zx0myyxie/"}),id:"participants",ref:d.createRef(),show:!!t?.teams},latestNews:{title:s({defaultMessage:"Latest News",id:"BlFeZAX10O"}),id:"latestNews",show:!0,ref:d.createRef()}}),[s,t?.teams,t?.events]),i=d.useMemo(()=>Object.values(a),[a]);if(!t?.tournamentInfo||n)return null;const l=t.events.map(p=>p.team_1.id),c=t.events.map(p=>p.team_2.id),u=t.brands.filter(p=>c.includes(String(p.teamId))),f=t.brands.filter(p=>l.includes(String(p.teamId))),m={world:u,europe:f};return o.jsx("div",{children:o.jsxs(Q4e,{entries:i,children:[o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(fBt,{season:t.tournamentInfo.season,league:"atp",type:"tournament",imgUrl:"/static/images/sports/atp/laver-cup-logo.svg",eventId:"lavercup"}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsx(_Bt,{tournamentInfo:t.tournamentInfo,title:!1}),o.jsx(vBt,{scoreEurope:t.scoreEurope,scoreWorld:t.scoreWorld,teams:t.teams})]})]}),o.jsx(uR,{ref:a.schedule?.ref,show:a.schedule?.show,children:o.jsx(p$t,{events:t.events,players:m})}),o.jsx(uR,{ref:a.participants?.ref,show:a.participants?.show,children:o.jsx(gBt,{teams:t.teams})}),o.jsx(uR,{show:a.latestNews?.show,ref:a.latestNews?.ref,children:o.jsx(cBt,{hype:r??null,variant:"raised"})}),o.jsx(w4e,{attributions:[s({defaultMessage:"Data: {provider}",id:"dSwg4JBLt6"},{provider:"Sportradar"})]})]})})}const SBt=e=>{try{const t=e.split("-").map(Number);if(t.length!==3||t.some(isNaN))return null;const[n,r,s]=t;return new Date(n,r-1,s)}catch{return null}},EBt=({selectedDate:e,eventsByDay:t,setSelectedDate:n})=>{const r=d.useMemo(()=>Object.keys(t),[t]),{$t:s}=Z();return!r.length||r?.length<=1?o.jsx(F,{variant:"baseSemi",className:"ml-md mb-sm",children:s({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}):o.jsx("div",{className:"mb-sm gap-sm flex flex-row justify-around",children:r.map(a=>{const i=SBt(a);return i?o.jsx(MBt,{date:i,selected:e.toDateString()===i.toDateString(),onClick:()=>n(i)},a):null})})},MBt=({date:e,selected:t,onClick:n})=>{const r=e.toLocaleDateString("en-US",{weekday:"short"}),s=e.toLocaleDateString("en-US",{day:"numeric"}),{isMobileStyle:a}=xe();return o.jsxs("button",{className:"group flex flex-1 appearance-none flex-col items-center gap-1 rounded-lg",onClick:n,children:[o.jsx(z,{className:B("flex items-center justify-center rounded-full duration-150",{"group-hover:bg-subtler":!t,"size-8":a,"size-10":!a}),variant:t?"textColor":"transparent",children:o.jsx(F,{variant:a?"baseSemi":"section-title",color:t?"defaultInverted":"default",children:s})}),o.jsx(F,{variant:t?"tiny":"tinyRegular",color:t?"default":"light",children:r})]})},NL=({value:e,digitClassName:t,className:n})=>{const[r,s]=d.useState(!1),a=String(e).split("");return d.useEffect(()=>{s(!0)},[]),o.jsx("div",{className:B("flex",n),children:a.map((i,l)=>isNaN(parseInt(i))?o.jsx("span",{className:t,children:i},l):o.jsx(kBt,{className:t,value:parseInt(i),animate:r,idx:l,hasValue:+e.replace(/[^\d.-]/g,"")>0},l))})},kBt=({value:e,className:t,hasValue:n,animate:r,idx:s})=>{const[a,{height:i}]=Ho();return o.jsxs("div",{className:"relative overflow-hidden",style:{maskImage:"linear-gradient(to bottom, transparent, black 4px, black calc(100% - 4px), transparent)"},children:[o.jsx("div",{className:"pointer-events-none flex opacity-0",ref:a,children:o.jsx("span",{className:t,children:"0"})}),o.jsx("div",{className:"absolute inset-0",children:o.jsx(ve.div,{initial:{opacity:.25},animate:{opacity:r&&n?1:void 0,y:r?-1*e*i:void 0},className:"flex flex-col",transition:{y:{ease:an,duration:1,delay:s*.1},opacity:{ease:"linear",duration:.5}},children:Array.from({length:10}).map((l,c)=>o.jsx("span",{className:B("flex",t),children:c},c))})})]})};function joe(e){return!isNaN(new Date(e).getTime())}function Aoe(e){const t=e+"+00:00";return joe(t)?t:joe(e)?e:null}function TBt(e){if(typeof e.startDate=="string")return{full:Aoe(e.startDate)??"",dateType:"UTC",year:0,month:0,date:0,hour:0,minute:0};const t=e.startDate?.find(r=>r.dateType==="UTC");if(!t)return;const n=Aoe(t.full);if(n)return{...t,full:n}}function uun(e){return!isNaN(e.hour)&&!isNaN(e.minute)}function NBt(e){const t=e?.tvStations?.[0]?.name;switch(t){case"Amazon Prime Video":return"Prime Video";default:return t}}function jBt(e){return e?.venue?.name||""}function ABt(e){return[e?.venue?.city,e?.venue?.state?.abbreviation].filter(Boolean).join(", ")}function IBt(e,t){const n=e?.[0]?.forecasts?.[0],r=n?.condition;return{temperature:n?.temperature?.find(a=>a.temperatureScaleId===(t?2:1)),weatherCondition:r}}function Gx(e){return typeof e.eventStatus=="string"?e.eventStatus==="live":e?.eventStatus?.eventStatusId===2}function op(e){return typeof e.eventStatus=="string"?e.eventStatus==="final":e.eventStatus?.eventStatusId===4}function dun(e){return Gx(e)||op(e)}function fun(e,t){return Ew(e.teams)[1]?.teamId===t.teamId}function ENe(e,t=4){return t===2?e.period===1&&e.minutes===0&&e.seconds===0&&e.isActive===!1:e.period===2&&e.minutes===0&&e.seconds===0&&e.isActive===!1}function mun(e){return e.status==="live"}function pun(e){return e.status==="final"}function hun(e){return"id"in e}function gun(e,t){return new Date(e.datetime).toLocaleString(t,{month:"short",day:"numeric"})}const RBt=Qe({perplexitySports:{defaultMessage:"{pplx} Sports",id:"K65/hgZBjY"},teamVsTeam:{defaultMessage:"{team1} vs {team2}",id:"lyaxuodMxh"},nfl:{defaultMessage:"NFL",id:"Lv6pQppd/V"},nba:{defaultMessage:"NBA",id:"D+pbqZQpNj"},wnba:{defaultMessage:"WNBA",id:"avDAamqQm4"},ncaam:{defaultMessage:"NCAAM",id:"gC9NSK3/R6"},ncaaw:{defaultMessage:"NCAAW",id:"eERAIF8MIh"},cricket:{defaultMessage:"Cricket",id:"hJ+aKKEPPW"},conference:{defaultMessage:"Conference",id:"E0mu0BuhfL"},division:{defaultMessage:"Division",id:"dETzL9JuSD"},league:{defaultMessage:"League",id:"P3y4FpCWKK"},nflByeNote:{defaultMessage:"Plays lowest remaining seed",id:"ivzjhdMH5D"},playoffBracket:{defaultMessage:"Playoff Bracket",id:"5T8u2ZRrKO"},watchOn:{defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},overview:{defaultMessage:"Overview",id:"9uOFF3L8kp"},highlights:{defaultMessage:"Highlight Videos",id:"J4ZW4MNVky"},moreAboutNfl:{defaultMessage:"More about the NFL",id:"JGDrER55OW"},pregameHighlights:{defaultMessage:"Pregame Highlights",id:"pTASonM2gu"},gameHighlights:{defaultMessage:"Game Highlights",id:"nX0XrAiLIA"},final:{defaultMessage:"Final",id:"6/JzkWi0di"},videos:{defaultMessage:"Videos",id:"4XfMuxy3FO"},playerPhotos:{defaultMessage:"{player} Photos",id:"YRfYXYpNfE"},noInjuries:{defaultMessage:"No Team Injuries",id:"9D6SP/NB3G"},seasonLeaders:{defaultMessage:"Season Leaders",id:"lT3vL7pgxM"},gameLeaders:{defaultMessage:"Game Leaders",id:"BpPX7CGEMm"},bettingOdds:{defaultMessage:"Betting Odds",id:"taELAJbik0"},teamComparisons:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},seasonComparisons:{defaultMessage:"Season Comparison",id:"1fVXZNAk6A"},seasonPerformance:{defaultMessage:"Season Performance",id:"+XGEnxB3qU"},injuries:{defaultMessage:"Injuries",id:"+9VW01o/qa"},nextGame:{defaultMessage:"Next Game",id:"GHv/zzzbyP"},gameWinnerOdds:{defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"},offense:{defaultMessage:"Offense",id:"gkhnHmdS3n"},pointsPerGame:{defaultMessage:"Points Per Game",id:"oiTKA0iiEO"},totalYardsPerGame:{defaultMessage:"Total Yards Per Game",id:"1hUUAbKwNU"},passingYardsPerGame:{defaultMessage:"Passing Yards Per Game",id:"NZ1ECBKywu"},rushingYardsPerGame:{defaultMessage:"Rushing Yards Per Game",id:"XaZf8sSKrF"},thirdDownConversionRate:{defaultMessage:"Third Down Conversion Rate",id:"ffvMztEyfa"},redZoneEfficiency:{defaultMessage:"Red Zone Efficiency",id:"KD1EYvEBXL"},freeThrowsMade:{defaultMessage:"Free Throws Made",id:"qngxYnoujX"},fieldGoalsMade:{defaultMessage:"Field Goals Made",id:"8hkrjZ6IYu"},turnovers:{defaultMessage:"Turnovers",id:"ix10Ldc+00"},blocks:{defaultMessage:"Blocked Shots",id:"H+onZtcuVa"},steals:{defaultMessage:"Steals",id:"6WYTxwolV8"},threePointFieldGoalsMade:{defaultMessage:"Three Point Field Goals Made",id:"sHR4TS9YOq"},defense:{defaultMessage:"Defense",id:"7Y+mK49r3z"},pointsAllowed:{defaultMessage:"Points Allowed",id:"oIj9CdpmXY"},turnoverDiff:{defaultMessage:"Turnover Diff",id:"XAiSFr028u"},pointsAllowedPerGame:{defaultMessage:"Points Allowed Per Game",id:"crP3Q4G1sg"},assistsPerGame:{defaultMessage:"Assists Per Game",id:"iVrCmaL1xp"},reboundsPerGame:{defaultMessage:"Rebounds Per Game",id:"luHpkidK/P"},fieldGoalPercentage:{defaultMessage:"Field Goal Percentage",id:"eFfteQzdQj"},blocksPerGame:{defaultMessage:"Blocks Per Game",id:"GZdk7v9wsc"},stealsPerGame:{defaultMessage:"Steals Per Game",id:"AsfNOOP1Pv"},threePointPercentage:{defaultMessage:"Three Point Percentage",id:"47T2zZRSFt"},freeThrowPercentage:{defaultMessage:"Free Throw Percentage",id:"/G3PY4IYf7"},yardsAllowedPerGame:{defaultMessage:"Yards Allowed Per Game",id:"B15PuOjR7R"},passingYardsAllowed:{defaultMessage:"Passing Yards Allowed",id:"0HGZ3V81cB"},rushingYardsAllowed:{defaultMessage:"Rushing Yards Allowed",id:"ftA+LXAEQL"},firstDowns:{defaultMessage:"First Downs",id:"aHqkLRqHjr"},penalties:{defaultMessage:"Penalties",id:"fa38C8rLbM"},penaltyYards:{defaultMessage:"Penalty Yards",id:"ZC7MShyuR1"},possessionMinutes:{defaultMessage:"Possession Minutes",id:"khpuL1ieoV"},fumblesLost:{defaultMessage:"Fumbles Lost",id:"IzuROyqz+7"},interceptionsThrown:{defaultMessage:"Interceptions Thrown",id:"tmQq6pHbYi"},other:{defaultMessage:"Other",id:"/VnDMl81rh"},totalYards:{defaultMessage:"Total Yards",id:"veZmYTt6MN"},points:{defaultMessage:"Points",id:"P0PLlQxVoe"},turnoversPerGame:{defaultMessage:"Turnovers Per Game",id:"uTgBwtAPGV"},foulsPerGame:{defaultMessage:"Fouls Per Game",id:"SMqdG+QmGB"},penaltiesPerGame:{defaultMessage:"Penalties Per Game",id:"9wKTlQSR/j"},penaltyYardsPerGame:{defaultMessage:"Penalty Yards Per Game",id:"Jm5WpbiViO"},gamePreview:{defaultMessage:"Game Preview",id:"GvobedfNcN"},gameSummary:{defaultMessage:"Game Summary",id:"+eeGQlcxzW"},gameLive:{defaultMessage:"LIVE",id:"UqyNCCygYW"},carries:{defaultMessage:"{value} carries",id:"rq9+96YlFa"},receptions:{defaultMessage:"{value} rec",id:"sTvPmiSZD7"},pointsStat:{defaultMessage:"{value} points",id:"UrDn6NGZfb"},reboundsStat:{defaultMessage:"{value} rebounds",id:"9vdJ9I7bdt"},assists:{defaultMessage:"Assists",id:"PqEAty/m8X"},rebounds:{defaultMessage:"Rebounds",id:"VXRs2esXLO"},assistsStat:{defaultMessage:"{value} assists",id:"bWLYwKNgJ3"},passingYards:{defaultMessage:"Passing Yards",id:"aQGqkCWSsl"},rushingYards:{defaultMessage:"Rushing Yards",id:"MpZ23vuQex"},receivingYards:{defaultMessage:"Receiving Yards",id:"GbfiEHr37J"},bettingOddsSpread:{defaultMessage:"Spread",id:"B7hDsYrvQe"},bettingOddsTotal:{defaultMessage:"Total",id:"MJ2jZQxQnT"},bettingOddsMoneyline:{defaultMessage:"Money Line",id:"kW0GAibgTH"},injuryReport:{defaultMessage:"Injury Report",id:"/YN/gLAPJU"},player:{defaultMessage:"Player",id:"1AGL1rdLFR"},position:{defaultMessage:"Position",id:"U6qGuOVs+L"},injury:{defaultMessage:"Injury",id:"PQiOxuIu/I"},status:{defaultMessage:"Status",id:"tzMNF3jWoU"},noRelatedGames:{defaultMessage:"No related games",id:"Ot5mpNSKsp"},teamComparison:{defaultMessage:"Team Comparison",id:"KdREfWZdzQ"},noUpdatesAvailable:{defaultMessage:"No updates available",id:"0Pg/1iJOgA"},halftime:{defaultMessage:"Halftime",id:"iC0AL294Dr"},viewMatchDetails:{defaultMessage:"View Game Details",id:"jBJqA9z9lD"},viewStandings:{defaultMessage:"View Standings",id:"oaPWiK0oYi"},followGameLive:{defaultMessage:"Follow Game Live",id:"CWFVI1BPrZ"},latestNews:{defaultMessage:"Latest News",id:"BlFeZAX10O"},imageSource:{defaultMessage:"Image source: {source}",id:"O/d/1HvfyG"},week:{defaultMessage:"Week {week}",id:"RE27WbGe9C"},total:{defaultMessage:"T",id:"sjlqAC/nrs"},team:{defaultMessage:"Team",id:"wsUmh9XWBm"},sources:{defaultMessage:"Data: Stats Perform  Player Photos: Associated Press",id:"g0CN3T/ISr"},nflSeason:{defaultMessage:"{year} NFL Season",id:"n6vqth75CA"},nbaSeason:{defaultMessage:"{year} NBA Season",id:"rrCa+R0f7X"},undrafted:{defaultMessage:"Undrafted",id:"ZpiNk0Z5Np"},pre:{defaultMessage:"Pre",id:"hMX10Ja0Xm"},preseason:{defaultMessage:"Preseason",id:"HENGOVahPR"},regularSeason:{defaultMessage:"Regular Season",id:"Ea9LD9vfyQ"},postSeason:{defaultMessage:"Postseason",id:"xvhy/ycHzu"},proBowl:{defaultMessage:"Pro Bowl",id:"pxho4sLngT"},wildCardPlayoff:{defaultMessage:"Wild Card Playoff",id:"EvhXzrm4Ix"},divisionalPlayoff:{defaultMessage:"Divisional Playoff",id:"p1LmAErYhB"},conferenceChampionship:{defaultMessage:"Conference Championship",id:"AVW9uMIxMK"},superBowl:{defaultMessage:"Super Bowl",id:"khEvs6DTrv"},relatedGames:{defaultMessage:"Related Games",id:"Vii6YKE9t9"},noEvents:{defaultMessage:"No events",id:"xPFOlw/kys"},showAllTeams:{defaultMessage:"Show all teams",id:"k112pFsCZU"},tba:{defaultMessage:"TBA",id:"ZfAWFLTzx/"},live:{defaultMessage:"Live",id:"Dn82ALx/+V"},standings:{defaultMessage:"Standings",id:"o2v7SB+ObO"},schedule:{defaultMessage:"Schedule",id:"hGQqkWwmJD"},wins:{defaultMessage:"Wins",id:"f++h1REg9b"},losses:{defaultMessage:"Losses",id:"eQJCl5DaWL"},ties:{defaultMessage:"Ties",id:"LYMVZdnuVv"},winPct:{defaultMessage:"Win Pct",id:"sHcBpWJlFR"},pointsFor:{defaultMessage:"PF",id:"zG5bX7TOdX"},pointsAgainst:{defaultMessage:"PA",id:"+09k0C5AlI"},streak:{defaultMessage:"Str",id:"/K3fzWE90S"},teamSchedule:{defaultMessage:"{year} {team} Schedule",id:"1Z4UTJhHPZ"},home:{defaultMessage:"Home",id:"ejEGdxSUGs"},away:{defaultMessage:"Away",id:"0JXAskjV4d"},previous:{defaultMessage:"Previous",id:"JJNc3cbYIJ"},upcoming:{defaultMessage:"Upcoming",id:"6/aEFZbs2i"},relatedTeams:{defaultMessage:"Related Teams",id:"ZzOufqyGoL"},seasonStats:{defaultMessage:"{year} Season Stats",id:"0p+BU5Jj9p"},coachName:{defaultMessage:"Coach",id:"uQg6UcdK4Y"},diff:{defaultMessage:"Diff",id:"Fm3StihZV6"},teams:{defaultMessage:"Teams",id:"DNeuzb5ky2"},seasonHighlights:{defaultMessage:"Season Highlights",id:"u0NXd7YWeO"},playByPlay:{defaultMessage:"Play by Play",id:"g2y6uMg3RU"},playSummary:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"},activeDrive:{defaultMessage:"Active Drive",id:"9WRCeRXYnG"},drive:{defaultMessage:"Drive",id:"1YAWJ379IQ"},gameDown:{defaultMessage:"{down} Down",id:"D6NiYuphxA"},noLeader:{defaultMessage:"No Leader",id:"nEuoHaJ7ix"},endOfPeriod:{defaultMessage:"End of Quarter",id:"tY+g5ifXSh"},playSubtitle:{defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},downloadIosNotificationCta:{defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"},downloadIosNotificationCtaSub:{defaultMessage:"Scan the QR code to download the app",id:"1j+FmhPZ8J"},iosNotificationsCta:{defaultMessage:"Turn on live game updates",id:"B3DARItQiv"},iosNotificationsCtaOff:{defaultMessage:"Turn off live game updates",id:"MJ3BTMxxFR"},iosNotificationsCtaSub:{defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"},iosNotificationsCtaSubOff:{defaultMessage:"You are subscribed to live game alerts.",id:"ESQg4GtLBi"},moreGames:{defaultMessage:"More Games",id:"ssuX7Q5/hn"},goals:{defaultMessage:"Goals",id:"XHLYdJ4a0Y"},shots:{defaultMessage:"Shots",id:"MtAfOi/9Z4"},shotsOnTarget:{defaultMessage:"Shots on Target",id:"XypPx7GnSa"},fouls:{defaultMessage:"Fouls",id:"ULgxB5+kkl"},yellowCards:{defaultMessage:"Yellow Cards",id:"OgfXSatXn2"},redCards:{defaultMessage:"Red Cards",id:"iM3q/GTmBa"},corners:{defaultMessage:"Corners",id:"SG1mA2ViLF"},saves:{defaultMessage:"Saves",id:"OXuG5Tbo0I"},passes:{defaultMessage:"Passes",id:"zt/qs3N6e3"},pointsWon:{defaultMessage:"Points Won",id:"XinSz02Vcr"},totalWinners:{defaultMessage:"Winners",id:"upRjwyuG/1"},forehandWinners:{defaultMessage:"Forehand Winners",id:"dhq2amJ4Pc"},backhandWinners:{defaultMessage:"Backhand Winners",id:"7LkIR0bV+s"},aces:{defaultMessage:"Aces",id:"sZJa/S3ekv"},doubleFaults:{defaultMessage:"Double Faults",id:"+3VTXdG9VS"},firstServePercentage:{defaultMessage:"First Serve %",id:"L5NV6vruFx"},firstServePointsWonPercentage:{defaultMessage:"First Serve Points Won %",id:"QOFjHS/pnz"},secondServePointsWonPercentage:{defaultMessage:"Second Serve Points Won %",id:"GfQX2xkNys"},breakpointsWon:{defaultMessage:"Break Points Won",id:"vuAxPAew9k"},totalUnforcedErrors:{defaultMessage:"Unforced Errors",id:"4F6jzAUiDp"}}),MNe=(e,t,n)=>{if(!t)return"";const r=RBt[t];return r?e(r,n):""};function PBt(e,t){const{$t:n}=Z();if(t){if(e==="nfl")switch(t){case 19:return"Wildcard Round";case 20:return"Divisional Round";case 21:return"Conference Round";case 22:return"Super Bowl";default:return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}return n({defaultMessage:"Week {week}",id:"RE27WbGe9C"},{week:t})}}function LBt(e,t){return vDt(e.event.teams,e.brands,t).map(s=>{const a=hDt(s.teamId,e);return{...s,winProbability:a?.probability??0}})}function kNe({event:e,league:t}){const{$t:n,formatNumber:r}=Z(),s=NBt(e?.event),{isMobileStyle:a}=xe(),i=s?a?s:n({defaultMessage:"Watch on {network}",id:"yCXRhFX8Qz"},{network:s}):"",l=MNe(n,t),c=jBt(e.event),u=ABt(e.event),{locale:f}=Z(),[m,p]=d.useState(!1),{temperature:h,weatherCondition:g}=IBt(e.weather,m),y=h?.degrees?r(h?.degrees,{style:"unit",unit:m?"celsius":"fahrenheit"}):"",[x,v]=LBt(e,t),b=PBt(t,e.event.week),_=e.event.eventRound?.name||null;return{whereToWatch:i,league:t,gameVenue:c,gameLocation:u,roundName:_,locale:f,celcius:m,setCelcius:p,weatherCondition:g,degrees:y,team1:x,team2:v,weekLabel:b,leagueName:l}}const TNe=({event:e,final:t,className:n,isLive:r})=>{const{$t:s}=Z(),{locale:a}=Z(),{isMobileStyle:i}=xe(),l=TBt(e);if(!l)return null;const c=l.year===new Date().getFullYear(),u=ENe(e.eventStatus,e.scheduledPeriods),f=W5(new Date(l.full))?s({defaultMessage:"Today",id:"zWgbGgjUUg"}):new Date(l.full).toLocaleString(a,{weekday:c||i?void 0:"short",month:i?"numeric":"short",day:"numeric",year:c?void 0:"numeric"}),m=e?.scheduledPeriods==2?`H${e.eventStatus?.period}`:`Q${e.eventStatus?.period}`;return o.jsxs(z,{className:B("gap-xs p-sm md:px-sm flex flex-1 flex-col items-center justify-center",n),children:[!r&&o.jsx(F,{variant:"smallBold",className:"text-center leading-tight",children:f}),r?o.jsxs("div",{className:"gap-xs flex flex-col items-center",children:[o.jsxs(Vo,{className:"gap-xs text-super",children:[o.jsx(An,{id:"period",children:o.jsx(F,{variant:"smallBold",color:"super",className:"text-center uppercase leading-tight",children:u?s({defaultMessage:"Halftime",id:"iC0AL294Dr"}):m})}),!u&&o.jsx(An,{id:"time",children:o.jsxs(F,{variant:"smallBold",color:"super",className:"text-center",children:[e.eventStatus.minutes,":",e.eventStatus.seconds?.toString()?.padStart?.(2,"0")]})})]}),o.jsx(Dp,{includeDot:!0})]}):t?o.jsx(Aw,{}):o.jsx(F,{color:"light",variant:i?"tiny":"small",className:"text-center",children:l.full&&!e.isTba?new Date(l.full).toLocaleTimeString(a,{hour:"numeric",minute:"numeric",timeZoneName:"short"}):"TBA"})]})},yun=({seriesEvents:e,league:t,eventId:n,gameLabel:r})=>{const{isMobileStyle:s}=xe(),{inApp:a}=Xo(),i=Ot(),l=vt(),{$t:c}=Z(),u=c({defaultMessage:"Game",id:"Am8glJTtny"}),f=r??u,m=d.useMemo(()=>!e?.length||!t?[]:e.map((g,y)=>{const x=g.eventId===n,v=aV({href:`/sports/${t}/events/${g.eventId}`,inApp:a,queryParams:i});return{type:"default",text:`${f} ${y+1}`,onClick:()=>{!x&&v&&l.push(v)},active:x}}),[e,t,l,n,f,a,i]);if(!e?.length)return null;const p=n?e.findIndex(g=>g.eventId===n):0,h=n?p+1:1;return o.jsx(nn,{items:m,isMobileStyle:s,children:o.jsx(me,{size:"small",chevron:!0,text:`${f} ${h}`})})},NNe=({gameLocation:e,roundName:t,setCelcius:n,weatherCondition:r,degrees:s,whereToWatch:a,weekLabel:i,isFinal:l,league:c})=>{const{locale:u}=Z(),f=r&&s,m=a&&!l||i;return o.jsxs(z,{className:"gap-lg p-md flex items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[o.jsxs(Vo,{className:"gap-xs text-quiet",children:[o.jsx(An,{id:"league",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-xs flex truncate whitespace-nowrap",children:c.toUpperCase()})}),i&&o.jsx(An,{id:"week",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:i})}),t&&o.jsx(An,{id:"round",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:t})})]}),m&&o.jsxs(Vo,{className:"gap-xs text-quiet",children:[a&&!l&&o.jsx(An,{id:"watch",children:o.jsxs(F,{variant:"tiny",color:"light",className:"gap-xs flex truncate whitespace-nowrap",children:[o.jsx(Nce,{size:14,className:"mb-xs"}),a]})}),i&&o.jsx(An,{id:"week",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-sm flex items-center truncate whitespace-nowrap",children:i})})]})]}),o.jsx("button",{className:"flex min-w-0 flex-col items-end",onClick:()=>n(p=>!p),children:f?o.jsxs(Vo,{className:"gap-xs text-quiet text-xs",children:[u.startsWith("en-")&&r&&o.jsx(An,{id:"condition",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-xs flex items-center whitespace-nowrap",children:r})}),s&&o.jsx(An,{id:"temperature",children:o.jsx(F,{variant:"tiny",color:"light",className:"gap-xs flex items-center",children:s})})]}):o.jsx(F,{variant:"tiny",color:"light",className:"w-full min-w-0 truncate whitespace-nowrap text-end",children:e})})]})},OBt=Dt("BlazeSDKContext",{blazeSDK:null,isBlazeSDKReady:!1}),DBt=()=>d.useContext(OBt);function FBt(e,t){const n=e.Theme(t?"row-rectangle":"row-rectangle-horizontal");return n.layoutStyle.borderRadius="5px",n.layoutStyle.statusLiveStyle.isVisible=!1,n.layoutStyle.statusLiveUnreadStyle.isVisible=!1,n.layoutStyle.statusReadStyle.isVisible=!1,n.layoutStyle.statusUnreadStyle.isVisible=!1,n.playerStyle.titleFont="var(--font-fk-grotesk-neue)",n.playerStyle.publishedDateFont="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.font="var(--font-fk-grotesk-neue)",n.layoutStyle.labelStyle.fontSize=".75rem",n.playerStyle.iconsButton=[{value:"MUTE_UNMUTE",isVisible:!0},{value:"EXIT_PLAYER",isVisible:!0}],n}function UBt(e,t){return Fk(t)?e.LabelBuilder().singleLabel(t[0]):e.LabelBuilder().mustInclude(t?.join?.(" , "))}function BBt(e,{isMobile:t,labels:n,maxItems:r,onData:s}){const a=e.DataSourceBuilder().labels({labels:UBt(e,n),maxItems:r,orderType:"RecentlyUpdatedFirst"}),i=FBt(e,t);e.WidgetRowView("stories-container",{dataSource:a,theme:i,contentType:"story",delegates:{[e.Delegations.onWidgetDataLoadCompleted]:l=>{s?.({detail:l.detail,error:null})},[e.Delegations.onErrorThrown]:l=>{s?.({error:l,detail:null})}}})}function $Bt({labels:e,maxItems:t,onData:n,style:r,className:s}){const{isMobileStyle:a}=xe(),{blazeSDK:i,isBlazeSDKReady:l}=DBt(),c=d.useRef(!1);return d.useEffect(()=>{if(!(!l||c.current))try{BBt(i,{isMobile:a,labels:e,maxItems:t,onData:n}),c.current=!0}catch(u){n?.({error:u,detail:null})}},[i,l,a,t,n,c]),o.jsx("div",{id:"stories-container",className:B("overrides [&_blaze-widget-layout]:p-0",s),style:r},a?"m":"d")}async function VBt({url:e}){const{default:t}=await X(async()=>{const{default:r}=await import("./qrcode-DzQwd33t.js").then(s=>s.q);return{default:r}},__vite__mapDeps([117,2])),n=t(0,"M");return n.addData(e.toString()),n.make(),n.createSvgTag(2,0)}async function WBt({deviceId:e,liveEventId:t,reason:n}){const r=await re.GET("/rest/live-events/subscription",n,{params:{query:{device_id:e,live_event_id:t}}});return r.error?(ne.error(`Failed to get subscription status: ${e}`),!1):r.data?.subscribed??!1}async function HBt({apns:e}){const t=t5({type:"pplx.sports.notifications",data:{apns:e}});return await new Promise(n=>setTimeout(n,500)),t||ne.error("Failed to subscribe user to event."),t}async function zBt({liveEventId:e,deviceId:t,apns:n}){try{const{error:r}=await re.DELETE("/rest/live-events/subscription","sports-ios-notification-sub-unsubscribe",{params:{query:{device_id:t,live_event_id:e}}});if(t5({type:"pplx.sports.notifications.unsubscribe",data:{apns:n}}),r)throw new we("API_CLIENTS_ERROR",{cause:r});return!0}catch(r){return ne.error(r),!1}}const jNe=(e,t)=>["events/subscription",e,t];function GBt({apns:e,liveEventId:t,deviceId:n}){const r=ot(),s=jNe(n,t);return dt({mutationFn:async a=>a.subscribe?HBt({apns:e}):await zBt({liveEventId:t,deviceId:n,apns:e}),onMutate:async a=>{await r.cancelQueries({queryKey:s});const i=r.getQueryData(s);return r.setQueryData(s,a),{prevState:i}},onError:(a,i,l)=>{r.setQueryData(s,l?.prevState)},onSettled:()=>{r.invalidateQueries({queryKey:s})}})}const qBt=({apns:e,deviceId:t})=>{const n="sports-ios-notification-sub",r=e.attributes?.live_event_id,{trackEvent:s}=Te(),{data:a}=Ue({queryKey:jNe(t,r),queryFn:()=>WBt({deviceId:t,liveEventId:r,reason:n}),staleTime:0}),{mutate:i,isPending:l}=GBt({apns:e,liveEventId:r,deviceId:t}),c=d.useRef(null);return M3(c,()=>{s("live event subscribe toggle impression",{deviceId:t,liveEventId:r,subscribed:!!a})},{threshold:.5}),o.jsx("div",{ref:c,className:"gap-x-sm flex items-center pl-4",children:o.jsx(_o,{active:!!a,onChange:()=>i({subscribe:!a}),disabled:l})})},KBt=({url:e})=>{const[t,n]=d.useState("");return d.useEffect(()=>{VBt({url:e}).then(n).catch(ne.error)},[e]),t?o.jsx(z,{variant:"background",className:"p-xs shadow-subtle aspect-square w-full rounded border",children:o.jsx("div",{className:"[&_path]:fill-foreground [&_rect]:fill-inverse flex items-center justify-center [&_svg]:h-auto [&_svg]:w-full",dangerouslySetInnerHTML:{__html:t}})}):o.jsx(un,{className:"bg-subtler block aspect-square w-full rounded"})},MH=({title:e,subtitle:t="",children:n,className:r,expandedCta:s=!1})=>o.jsxs(z,{className:B("mx-md gap-sm md:-mt-md md:px-md grid border-t",r),children:[o.jsxs(z,{className:"gap-md flex min-h-[50px] items-center justify-between",children:[o.jsxs(z,{children:[o.jsx(F,{variant:"smallBold",children:e}),o.jsx(F,{variant:"small",color:"light",children:t})]}),n]}),s&&o.jsx(YBt,{})]}),YBt=()=>{const{isMobileStyle:e}=xe(),{actions:t,isSportsIosCtaDismissed:n}=In();return o.jsx(o.Fragment,{children:!n&&e&&o.jsxs(z,{className:"relative block overflow-hidden rounded","aria-hidden":"true",children:[o.jsx(z,{className:"p-sm absolute right-0 top-0",children:o.jsx("button",{onClick:()=>t.setIsSportsIosCtaDismissed(!0),children:o.jsx(kt,{color:"white"})})}),o.jsx("img",{className:"max-h-[200px] w-full object-cover object-[0_90%]",src:"https://r2cdn.perplexity.ai/images/ios-live-game-alerts-promo.jpg",alt:""})]})})},QBt={SportsEventAttributes:"2.37.1",SportsIndividualEventAttributes:"2.45.0"};function ANe({apns:e,containerClassName:t,title:n,subtitle:r}){const{$t:s}=Z(),{device:{isAndroid:a}}=Pt(),{inApp:i,appVersion:l,deviceId:c}=Xo(),{handleAppDownloadClicked:u}=mf("sports-ios-notification-sub"),{isMobileStyle:f}=xe();if(a||!e)return null;if(n=n||s({defaultMessage:"Turn on live game updates",id:"B3DARItQiv"}),r=r||s({defaultMessage:"Real-time game updates",id:"qeSXEmN+v2"}),i){const m=QBt[e.attributesType];return m?HDe(l,m)?o.jsx(ZBt,{containerClassName:t,onClick:u}):!e||!c?null:o.jsx(MH,{title:n,subtitle:r,className:t,children:o.jsx(d.Suspense,{children:o.jsx(qBt,{apns:e,deviceId:c})})}):null}return f?o.jsx(XBt,{containerClassName:t,onClick:u}):null}const XBt=({containerClassName:e,onClick:t})=>{const{$t:n}=Z();return o.jsx(MH,{title:n({defaultMessage:"Download the app to get live updates during the event",id:"vBmN5Ou5qa"}),className:e,children:o.jsx(me,{size:"small",pill:!0,variant:"primary",icon:Hb,text:n({defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:t})})},ZBt=({containerClassName:e,onClick:t})=>{const{$t:n}=Z();return o.jsx(MH,{title:n({defaultMessage:"Update the app to follow the event live",id:"DKTCeuOgpP"}),className:e,children:o.jsx(me,{size:"small",pill:!0,variant:"primary",icon:Hb,text:n({defaultMessage:"Update App",id:"NEMhhhqxf3"}),onClick:t})})};function xun({apns:e}){const{$t:t}=Z(),{downloadAppLink:n}=mf("sports-ios-notification-sub"),{isMobileStyle:r}=xe(),{actions:s,isSportsIosCtaDismissed:a}=In(),i=d.useCallback(()=>{s.setIsSportsIosCtaDismissed(!0)},[s]);return a||r||!e?null:o.jsxs(z,{variant:"raised",className:"ml-sm mt-md p-md shadow-subtle relative flex max-w-[160px] flex-col items-center rounded-xl border",children:[o.jsx("div",{className:"mb-sm flex w-full justify-center",children:o.jsx(KBt,{url:n})}),o.jsx(F,{variant:"smallBold",className:"text-center leading-tight",children:t({defaultMessage:"Download the app to get live game updates",id:"TbQ0fq8jWR"})}),o.jsx(Me,{size:"tiny",pill:!0,icon:kt,extraCSS:"!absolute -top-0.5 opacity-50 hover:opacity-100 -right-0.5",onClick:i,variant:"noBackground"}),o.jsxs(z,{className:"mt-sm px-sm gap-xs mx-auto inline-flex items-center justify-center rounded-full border py-1",children:[o.jsx(Ed,{size:12,className:"text-quiet"}),o.jsxs("div",{className:"flex gap-px",children:[o.jsx(F,{variant:"smallCaps",color:"light",className:"whitespace-nowrap text-center",children:"4.9"}),o.jsx(F,{variant:"smallCaps",color:"ultraLight",className:"whitespace-nowrap text-center",children:""}),o.jsx(F,{variant:"smallCaps",color:"light",className:"text-center",children:"100k+"})]})]})]})}function JBt({team1:e,team2:t}){const{$t:n}=Z(),[r,s]=d.useState(!1),{colorScheme:a}=jr(),i=d.useRef(null);DW({ref:i,onInView:()=>{s(!0)}});const l=xo(.16,1,.3,1),{locale:c}=Z(),u=yk(e.color,a),f=yk(t.color,a);return o.jsxs("div",{className:"gap-sm px-md pb-md mx-auto flex flex-col items-center",ref:i,children:[o.jsx(un,{className:"w-full shrink-0",active:!r,children:o.jsxs("div",{className:"relative",children:[o.jsxs("div",{className:B("relative flex h-2 w-full shrink-0 justify-between overflow-hidden rounded-full duration-150",{"bg-subtle":!r}),children:[o.jsx(ve.div,{className:"absolute inset-y-0 left-0 h-full rounded-full",style:{background:t.winProbability?f:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${t.winProbability}%)`:0,left:r?`calc(${e.winProbability}% + 1px)`:0},transition:{ease:l,duration:.5}}),o.jsx(ve.div,{className:"relative h-full rounded-full",style:{background:e.winProbability?u:"#00000010",boxShadow:"inset 0 0 0 1px rgba(255, 255, 255, 0.1)"},animate:{width:r?`calc(${e.winProbability}% - 1px)`:0},transition:{ease:l,duration:.5}})]}),o.jsx("div",{className:"bg-base from-subtler to-subtler p-two absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 bg-gradient-to-r",children:o.jsx("div",{className:"bg-inverse/70 h-4 w-[1.5px] rounded-full"})})]})}),o.jsxs("div",{className:"grid w-full grid-cols-3",children:[o.jsx(F,{variant:"small",className:"text-left",children:o.jsx(NL,{value:My(e.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"mt-px text-center",children:n({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})}),o.jsx(F,{variant:"small",className:"text-right",children:o.jsx(NL,{value:My(t.winProbability,c),digitClassName:"font-mono",className:"inline-flex"})})]})]})}const e$t=({width:e,height:t,fraction:n,className:r,colors:s,onAnimationEnd:a,onArcSelect:i,onArcDeselect:l,selectedArc:c,animate:u})=>{const m=Math.PI*2*(1-n),[p,h]=d.useState(!1),[g,y]=d.useState(!1);d.useEffect(()=>{p&&g&&a?.()},[p,g,a]);const x=b=>{i?.(b)},v=()=>{l?.()};return o.jsx("svg",{width:e,height:t,viewBox:`0 0 ${e} ${t}`,className:r,children:o.jsxs(wa,{top:t/2,left:e/2,children:[o.jsx(Ioe,{startAngle:0,endAngle:m,outerRadius:e/2,innerRadius:e/2-(c===0?12:10),padAngle:.04,cornerRadius:999,fill:s[1],onAnimationEnd:()=>h(!0),onMouseEnter:()=>x(0),onMouseLeave:v,animationEnded:p&&g,className:c===1?"opacity-20":void 0,animate:u}),o.jsx(Ioe,{startAngle:m,endAngle:Math.PI*2,padAngle:.02,outerRadius:e/2,innerRadius:e/2-(c===1?12:10),cornerRadius:999,fill:s[0],onAnimationEnd:()=>y(!0),onMouseEnter:()=>x(1),onMouseLeave:v,animationEnded:p&&g,className:c===0?"opacity-20":void 0,animate:u})]})})},t$t=yu(ICe),Ioe=({startAngle:e,endAngle:t,onAnimationEnd:n,animationEnded:r,className:s,animate:a,...i})=>{const l=B3e({to:{startAngle:a?e:Math.PI*2,endAngle:a?t:Math.PI*2},from:{startAngle:Math.PI*2,endAngle:Math.PI*2},delay:200,onRest:m=>{m.finished===!0&&n?.()}}),{colorScheme:c,isColorSchemeReady:u}=jr({addSecondPass:!0}),f=u&&c==="dark"?"stroke-white/5":void 0;return o.jsx(t$t,{...i,startAngle:a?l.startAngle:0,endAngle:a?l.endAngle:0,className:B(f,r?"duration-200 ease-out":"",s)})},n$t=({className:e,team1:t,team2:n,size:r=150})=>{const[s,a]=d.useState(!1),[i,l]=d.useState(!1),[c,u]=d.useState(null),f=d.useRef(null),m=d.useRef(null),p="duration-200",h=d.useRef(null),[g,y]=d.useState(!1),{locale:x}=Z(),{isMobileStyle:v}=xe(),b=d.useMemo(()=>[t.winProbability?t.color:"#00000010",n.winProbability?n.color:"#00000010"],[t,n]);DW({ref:h,onInView:()=>{a(!0),xK(Math.max(t.winProbability-30,0),t.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{f.current&&(f.current.textContent=My(S,x))}}),xK(Math.max(n.winProbability-20,0),n.winProbability,{duration:2,ease:"easeOut",onUpdate:S=>{m.current&&(m.current.textContent=My(S,x))}}),y(!0)}});const _=S=>{u(S)},w=()=>{u(null)},C=Math.abs(t.winProbability/100);return o.jsx("div",{className:e,ref:h,children:o.jsxs("div",{className:"gap-sm md:gap-md isolate grid w-full grid-cols-[1fr,auto,1fr] items-center",children:[o.jsx(Roe,{innerRef:f,show:s,textBlockVariant:v?"smallBold":"baseSemi",className:B("translate-x-md self-start text-right !delay-0 !ease-out md:translate-x-0 md:self-center",p,{"scale-110":c===1,"opacity-20":c===0}),onMouseEnter:()=>_(1),onMouseLeave:w}),o.jsxs("div",{className:"relative",style:{width:r,height:r},children:[o.jsx(e$t,{height:r,width:r,fraction:C,animate:g,className:"relative z-[2] size-full",colors:b,onAnimationEnd:()=>l(!0),onArcSelect:S=>{u(S)},onArcDeselect:()=>u(null),selectedArc:c}),o.jsx(un,{active:!s,className:"absolute inset-0 z-[1]",children:o.jsx("div",{className:B("border-subtlest absolute inset-0 rounded-full border-[10px]",p,{"opacity-0":s})})}),o.jsx("div",{className:B("absolute inset-0 z-[1] rounded-full opacity-10 blur-md dark:opacity-20",p,{"!opacity-0":!i}),style:{backgroundImage:`conic-gradient(${t.color} 0deg, ${n.color} 10deg, ${n.color} ${(1-C)*360-10}deg, ${t.color} ${(1-C)*360}deg)`,maskImage:"radial-gradient(transparent, black)"}}),o.jsx("div",{className:"absolute inset-0 z-[3] flex items-center justify-center",children:o.jsxs("div",{className:"gap-sm flex size-full items-center justify-center",children:[o.jsx("div",{onMouseEnter:()=>_(1),onMouseLeave:w,className:"flex size-full items-center justify-end",children:o.jsx(Ls,{color:t.color,logo:t.logo,includeStripe:!1,size:"medium",className:B("pointer-events-auto ease-out",p,c===1?"scale-110":void 0,c===0?"opacity-20":void 0)})}),o.jsx(z,{className:"h-lg hidden border-l md:block"}),o.jsx("div",{onMouseEnter:()=>_(0),onMouseLeave:w,className:"flex size-full items-center justify-start",children:o.jsx(Ls,{color:n.color,logo:n.logo,includeStripe:!1,size:"medium",className:B("pointer-events-auto ease-out",p,c===0?"scale-110":void 0,c===1?"opacity-20":void 0)})})]})})]}),o.jsx(Roe,{innerRef:m,show:s,textBlockVariant:v?"smallBold":"baseSemi",className:B("-translate-x-md self-end !delay-0 !ease-out md:-translate-x-0 md:self-center",p,{"scale-110":c===0,"opacity-20":c===1}),onMouseEnter:()=>_(0),onMouseLeave:w})]})})},Roe=({innerRef:e,show:t,className:n,textBlockVariant:r="section-title",...s})=>{const{locale:a}=Z();return o.jsx("div",{className:B("flex-1 cursor-default",{"translate-y-2 opacity-0":!t},n),...s,children:o.jsxs(F,{variant:r,className:B("relative !font-mono"),children:[o.jsx("span",{ref:e,className:"absolute inset-0",children:My(0,a)}),o.jsx("span",{className:"opacity-0",children:My(100,a)})]})})},r$t=({watchlistType:e,identifier:t,category:n,modalOrigin:r,loginPrompt:s,reason:a})=>{const{$t:i}=Z(),l=ot(),c=et(),{openModal:u}=xt(),f=d.useRef(!1),[m,p]=d.useState(!1),[h,g]=d.useState(!1),[y,x]=d.useState(!1),{data:v,isLoading:b}=ZB({watchlistType:e,reason:a}),{mutate:_}=W1e({watchlistType:e,queryClient:l,reason:a}),{mutate:w}=H1e({watchlistType:e,queryClient:l,reason:a}),C=d.useCallback(S=>{const{invalidateOnSuccess:E=!0}=S??{};if(g(!1),x(!1),!c){const k=i({defaultMessage:"Sign in to follow your interests",id:"ebRSvhaBXI"});u("loginModal",{pitchMessage:{title:s||k},origin:r});return}m?(w({identifier:t,category:n}),x(!0)):(_({identifier:t,category:n}),g(!0)),p(!m),E&&l.invalidateQueries({queryKey:[Zg]})},[i,_,n,t,m,c,s,r,u,l,w]);return d.useEffect(()=>{if(!f.current&&!b&&v){f.current=!0;const S=k=>{const M=k.identifier===t;return n?M&&k.category===n:M},E=v.some(S);p(E)}},[b,v,t,n]),d.useMemo(()=>({isFollowed:m,toggleFollow:C,showFollowToast:h,showUnfollowToast:y,setShowFollowToast:g,setShowUnfollowToast:x,isLoadingSubscriptions:b}),[m,b,h,y,C])},INe=I.memo(({isFollowed:e,toggleFollow:t,iconOnly:n=!1,size:r="small",selectedButtonClassName:s,unselectedButtonClassName:a,tooltip:i,variant:l})=>{const c=Z(),{isMobileStyle:u}=xe();return o.jsx(Ye,{mode:"wait",children:e?o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsx(me,{variant:l??"primaryGhost",pill:!0,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}),onClick:t,extraCSS:s,toolTip:i,icon:Ed})},"confirmed"):o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsx(me,{pill:!0,variant:l,icon:ar,size:r,text:u||n?void 0:c.formatMessage({defaultMessage:"Follow",id:"ieGrWod3CN"}),onClick:t,extraCSS:a,toolTip:i})},"follow")})});INe.displayName="FollowButton";const s$t=({team:e,size:t,variant:n,league:r="nfl"})=>{const[s,a]=d.useState(0),i=d.useMemo(()=>{switch(t){case"large":return s>=1280?64:50;case"medium":default:return 32;case"small":return 20}},[t,s]),l=()=>{a(window.innerWidth)};d.useEffect(()=>(window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)),[]),d.useEffect(()=>{a(window.innerWidth)},[]);const c=6,u=32,f=u/2,m=Math.sin(Math.PI/u),p=i*m,[h,g]=d.useState(!1),[y,x]=d.useState(0),v=1600,b=n==="angled-first"?20:n==="angled-last"?-20:0;d.useEffect(()=>{h&&(x(w=>w+(n==="angled-last"?-360:360)*2),setTimeout(()=>{g(!1)},v))},[h,n]);const _=()=>{g(!0)};return o.jsxs(ve.div,{onMouseEnter:_,transition:{ease:_a,duration:1},className:B("wrapper transition-opacity duration-150",{"opacity-0":s===0}),style:{width:i,height:i},children:[o.jsx("div",{className:"shadow"}),o.jsxs(ve.div,{className:B("coin size-full"),initial:{rotateY:"0deg"},animate:{rotateY:`${y+b}deg`},transition:{rotateY:{ease:XO,duration:v/1e3}},children:[o.jsx("div",{className:"front flex items-center justify-center bg-white",style:{width:i,height:i,transform:`translateZ(${c/2}px)`},children:o.jsx(Ls,{color:e.color,logo:e.logo,size:t})}),o.jsx("div",{className:"back border-subtler flex items-center justify-center border bg-white dark:border-transparent",style:{width:i,height:i,transform:`translateZ(${c/-2}px) rotateY(180deg)`},children:r==="nfl"?o.jsx(a$t,{className:"h-auto w-2/5 opacity-40 grayscale"}):o.jsx(o$t,{className:"h-[70%] w-auto opacity-40 grayscale"})}),o.jsx("div",{className:"side",style:{transform:`translateX(${i*.5-c/2}px)`},children:Array.from({length:f}).map((w,C)=>o.jsxs("div",{className:"spoke",style:{width:c,height:i,transform:`rotateY(90deg) rotateX(calc((180deg / ${f}) * ${C+1}))`},children:[o.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}}),o.jsx("div",{className:"facet",style:{height:p,width:c,transform:`rotateX(calc(((180deg - (360deg / ${u})) / 2)))`}})]},C))})]})]})},a$t=({className:e})=>o.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/a/a2/National_Football_League_logo.svg"}),o$t=({className:e})=>o.jsx("img",{alt:"",className:e,src:"https://upload.wikimedia.org/wikipedia/en/0/03/National_Basketball_Association_logo.svg"}),vun=({eventId:e,league:t,children:n,...r})=>e?o.jsx(zu,{...r,href:`/sports/${t}/events/${e}`,children:n}):o.jsx(o.Fragment,{children:n}),i$t=({teamId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="championsleague"||t==="wnba"||t==="atp"||t==="wta"?o.jsx(F,{children:n}):o.jsx(zu,{...r,href:`/sports/${t}/teams/${e}`,className:"cursor-pointer duration-150 hover:opacity-60",children:n}),bun=({playerId:e,league:t,children:n,...r})=>t==="ncaam"||t==="ncaaw"||t==="wnba"||t==="atp"||t==="wta"?o.jsx(F,{children:n}):o.jsx(zu,{...r,href:`/sports/${t}/players/${e}`,children:n}),jL=I.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=vn,icon:a,...i})=>{const[l,c]=d.useState(t),u=d.useRef(null),{$t:f}=Z();d.useEffect(()=>{c(t)},[t]);const m=d.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=d.useCallback(h=>{h?.stopPropagation(),c(!1),s(),m()},[s,m]);return d.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),o.jsx(ff,{children:o.jsx(Ye,{children:l&&o.jsx(ve.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:Is,...i,children:o.jsxs(z,{variant:"raised",className:B("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&o.jsx("div",{className:"p-sm bg-subtler dark:bg-subtle my-[12px] flex aspect-square items-center justify-center rounded-md",children:o.jsx(de,{icon:a,className:"text-quiet",size:"md"})}),o.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[o.jsx(F,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),o.jsxs(z,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[o.jsx(Me,{size:"tiny",variant:"noHover",text:f({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60"}),o.jsx(z,{className:"border-t"}),o.jsx(Me,{size:"tiny",variant:"noHover",text:f({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60"})]})]})]})},"toast")})})});jL.displayName="FollowConfirmationToast";const wk=({team:e,metadata:t,className:n,logoClassName:r,textClassName:s,nameClassName:a,size:i="large",coinLogoProps:l,hasPosession:c,posessionIndicatorClassName:u,league:f,position:m})=>{const p="team-info",{isMobileStyle:h}=xe(),g=Z(),y=vt(),x=gx(),{inApp:v}=Xo(),{isFollowed:b,toggleFollow:_,showFollowToast:w,showUnfollowToast:C,setShowFollowToast:S,setShowUnfollowToast:E,isLoadingSubscriptions:k}=r$t({watchlistType:"SPORTS",identifier:e.teamId.toString(),category:f.toLowerCase(),modalOrigin:Le.SPORTS_WATCHLIST,loginPrompt:"Sign in to follow your teams",reason:p});return o.jsxs("div",{className:B("gap-sm flex min-w-0 flex-col items-center",n),children:[o.jsx(jL,{message:g.formatMessage({defaultMessage:"Added {team} to your watchlist",id:"ASZzl0rkyl"},{team:e.nickname}),isVisible:w,onSettingsClick:()=>{y.push(`${x}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>S(!1)}),o.jsx(jL,{message:g.formatMessage({defaultMessage:"Removed {team} from your watchlist",id:"9NeRSAm+wb"},{team:e.nickname}),isVisible:C,onSettingsClick:()=>{y.push(`${x}/personalize?watchlistModal=sports`)},timeout:5,onTimeout:()=>E(!1)}),o.jsxs("div",{className:"relative shrink-0",children:[l?o.jsx(s$t,{...l,team:e,size:i,league:f}):o.jsx(Ls,{className:B("shrink-0",r),logo:e.logo,color:e.color,size:i}),!k&&!v&&o.jsx("div",{className:B("absolute bottom-1/2",m==="left"?"-translate-x-xs right-full":"translate-x-xs left-full"),children:o.jsx(INe,{isFollowed:b,toggleFollow:_,size:"tiny",iconOnly:!0,selectedButtonClassName:"!bg-inverse/5 !border-transparent !text-foreground scale-[0.85]",unselectedButtonClassName:"!bg-transparent border-subtlest !text-quiet border scale-[0.85]",tooltip:b?g.formatMessage({defaultMessage:"Following",id:"cPIKU2QdyN"}):g.formatMessage({defaultMessage:"Follow Team",id:"QrB7VHb46Y"})})})]}),o.jsxs("div",{className:B("flex flex-col items-center",s),children:[o.jsxs("div",{className:"relative",children:[o.jsx("span",{className:B("-translate-x-xs text-super absolute right-full top-1/2 -translate-y-1/2 text-base",u),children:c&&o.jsx(RO,{size:h?12:16,className:"relative"})}),o.jsx(i$t,{teamId:e.teamId,league:f,children:o.jsxs("div",{className:"gap-sm flex items-center",children:[e.seed&&o.jsx(F,{variant:"tinyRegular",color:"light",children:e.seed}),o.jsx(F,{variant:"baseSemi",className:B("truncate xl:!text-lg",a),children:e.nickname})]})})]}),t&&o.jsx(F,{variant:"smallCaps",color:"light",className:"text-center",children:t})]})]})},_un=({event:e,showWsc:t,onWscData:n,league:r})=>{const[s,a]=d.useState(!1),{whereToWatch:i,gameLocation:l,setCelcius:c,weatherCondition:u,degrees:f,team1:m,team2:p,weekLabel:h,roundName:g}=kNe({event:e,league:r});d.useEffect(()=>{const x=new ResizeObserver(()=>{a(window.innerWidth<1e3)});return x.observe(document.body),()=>{x.disconnect()}},[]);const y=(m?.winProbability??0)>0||(p?.winProbability??0)>0;return o.jsxs(z,{variant:"raised",className:"relative rounded-xl border",children:[o.jsx(NNe,{league:r,gameLocation:l,roundName:g,setCelcius:c,weatherCondition:u??"",degrees:f,whereToWatch:i,weekLabel:h,isFinal:op(e.event)}),o.jsx(z,{className:"mx-md border-t"}),o.jsx(z,{children:o.jsxs("div",{className:"gap-xs p-md md:gap-md grid grid-cols-3",children:[o.jsx("div",{className:"gap-lg flex items-center justify-center",children:m&&o.jsx(wk,{team:m,league:r,metadata:dk(m.record),position:"left"})}),o.jsx(TNe,{event:e.event}),o.jsx("div",{className:"gap-lg flex items-center justify-center",children:p&&o.jsx(wk,{team:p,league:r,metadata:dk(p.record),position:"right"})})]})}),o.jsx(l$t,{showWsc:t,predictionExists:y,narrowWindow:s,team1:m,team2:p,wsc:e.wsc,onWscData:n}),o.jsx(ANe,{apns:e.apns})]})};function l$t({predictionExists:e,showWsc:t,narrowWindow:n,team1:r,team2:s,wsc:a,onWscData:i}){const{$t:l}=Z();return!r||!s?null:t?o.jsxs("div",{className:"gap-md md:pb-md grid grid-cols-2 md:gap-0",children:[e&&o.jsxs("div",{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center md:flex-col",children:[o.jsx("div",{className:"flex flex-1 items-center justify-center",children:o.jsx(n$t,{size:n?115:140,team1:r,team2:s})}),o.jsx(F,{color:"light",variant:"tiny",children:l({defaultMessage:"Game Winner Odds",id:"Ar4Hgi5LK/"})})]}),t&&o.jsx(RNe,{wsc:a,onWscData:i})]}):e?o.jsx(z,{className:"md:mx-md pt-md border-t",children:o.jsx(JBt,{team1:r,team2:s})}):null}const wun=({title:e,subtitle:t,children:n})=>o.jsxs(z,{className:"gap-md flex flex-col",children:[o.jsxs(z,{className:"px-md py-sm flex items-center justify-between border-b",children:[e&&o.jsx(F,{variant:"baseSemi",children:e}),t&&o.jsx(F,{variant:"smallCaps",color:"light",className:"gap-xs flex items-center",children:t})]}),o.jsx("div",{className:"gap-md px-md pb-md flex flex-col",children:n})]});function RNe({wsc:e,onWscData:t,wscTitle:n,includeLabel:r=!0}){const{$t:s}=Z(),a=e?.labels,i=d.useRef(null),[l,c]=d.useState({width:0,height:0}),{isMobileStyle:u}=xe(),f=n||s({defaultMessage:"Pregame Highlights",id:"pTASonM2gu"}),m=e?.labels?.length>0;return d.useEffect(()=>{const p=new ResizeObserver(()=>{c({width:i.current?.clientWidth||0,height:i.current?.clientHeight||0})});return p.observe(document.body),()=>{p.disconnect()}},[]),m?o.jsxs(z,{className:"gap-md p-md md:gap-sm md:p-lg md:pb-md flex flex-col-reverse items-center justify-center md:flex-col md:border-l",children:[o.jsx("div",{className:"flex w-full flex-1 items-center justify-center",ref:i,children:o.jsx("div",{className:"flex aspect-video h-full items-center justify-center",children:l.width>0?o.jsx($Bt,{labels:a,onData:t,style:{width:u?void 0:l.width,height:u?l.height:void 0},className:"rounded shadow-md duration-200 ease-in-out hover:scale-[1.02]"}):o.jsx(un,{className:"bg-subtle size-full self-stretch rounded-md"})})}),r&&o.jsx(F,{variant:"tiny",color:"light",className:"text-center",children:f})]}):null}const Cun=({event:e,onWscData:t,showWsc:n,league:r})=>{const{$t:s}=Z(),{isMobileStyle:a}=xe(),{setCelcius:i,weatherCondition:l,degrees:c,team1:u,team2:f,weekLabel:m,whereToWatch:p,gameLocation:h,roundName:g}=kNe({event:e,league:r}),y=[u?.winner?u.color:"transparent","transparent",f?.winner?f.color:"transparent"],x=Gx(e.event);return o.jsxs(Wt,{className:"overflow-hidden",children:[!x&&o.jsx("div",{className:"pointer-events-none absolute inset-0 bg-gradient-to-r opacity-10 dark:opacity-20",style:{background:`linear-gradient(100deg, ${y.join(" , ")})`}}),o.jsx(NNe,{roundName:g,setCelcius:i,weatherCondition:l??"",degrees:c,weekLabel:m,whereToWatch:p,gameLocation:h,isFinal:op(e.event),league:r}),o.jsx(z,{className:"mx-md border-t"}),o.jsx(z,{children:o.jsxs("div",{className:"gap-xs p-md md:gap-md relative grid grid-cols-[1fr,1fr,1fr] overflow-hidden md:grid-cols-[1fr,3fr,1fr]",children:[o.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[o.jsx("div",{className:"block md:hidden",children:u&&o.jsx(FS,{team:u,isLive:x,position:"left"})}),u&&o.jsx(wk,{team:u,metadata:dk(u.record),hasPosession:x&&u.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"left"})]}),o.jsxs("div",{className:"gap-sm flex items-center md:gap-0",children:[o.jsx("div",{className:"hidden flex-1 items-center justify-start md:flex",children:u&&o.jsx(FS,{team:u,isLive:x,position:"left"})}),o.jsx(TNe,{event:e.event,final:op(e.event),isLive:x}),o.jsx("div",{className:"hidden flex-1 items-center justify-end md:flex",children:f&&o.jsx(FS,{team:f,isLive:x,position:"right"})})]}),o.jsxs("div",{className:"gap-md flex min-w-0 flex-col items-center justify-center md:flex-row",children:[o.jsx("div",{className:"block md:hidden",children:f&&o.jsx(FS,{team:f,isLive:x,position:"right"})}),f&&o.jsx(wk,{team:f,metadata:dk(f.record),hasPosession:x&&f.teamId===e.event.eventStatus.teamPossessionId,league:r,position:"right"})]})]})}),o.jsx(z,{className:"mx-md border-t"}),o.jsxs("div",{className:B("md:pb-md grid",{"grid-cols-[65%,35%]":n}),children:[o.jsx("div",{className:"py-sm md:p-md flex w-full flex-1 items-center justify-center md:pb-0",children:o.jsx(c$t,{event:e,isLive:x})}),n&&o.jsx(RNe,{wsc:e.wsc,onWscData:t,wscTitle:s({defaultMessage:"Game Highlights",id:"nX0XrAiLIA"}),includeLabel:!a})]}),x&&o.jsx(ANe,{apns:e.apns})]})},FS=({team:e,isLive:t,position:n})=>o.jsxs(F,{variant:"page-title",color:e.winner||t?void 0:"light",className:"relative",children:[o.jsx(NL,{value:String(e.score),digitClassName:"font-mono"}),e.winner&&!t&&o.jsx(AL,{className:B("absolute top-1/2 -translate-y-1/2",{"-left-sm -translate-x-full rotate-180":n==="right","-right-sm translate-x-full":n==="left"})})]}),AL=({className:e})=>o.jsx("svg",{width:"6",viewBox:"0 0 18 35",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:e,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18 0.322327L0.822266 17.5L18 34.6777V0.322327Z",className:"fill-foreground"})}),PNe="text-right ml-4",LNe="text-left",mR=({children:e,right:t,light:n,bold:r})=>o.jsx(z,{as:"th",className:"border-b border-dashed",children:o.jsx(F,{variant:"smallCaps",color:n?"light":void 0,className:B("pb-sm",{[PNe]:t,[LNe]:!t}),children:o.jsx("span",{className:r?"font-semibold":"",children:e})})}),pR=({children:e,right:t,bold:n,light:r,className:s})=>o.jsx("td",{children:o.jsx(F,{variant:n?"smallBold":"small",color:r?"light":void 0,className:B("pt-xs",{[PNe]:t,[LNe]:!t},s),children:e})});function c$t({event:e,isLive:t}){const{$t:n}=Z(),{locale:r}=Z(),{isMobileStyle:s}=xe(),a=e.event.scheduledPeriods??4,i=e.event.eventStatus.period&&e.event.eventStatus.period>a?e.event.eventStatus.period:a,l=Ew(e.event.teams);return o.jsxs("table",{className:"p-md w-full border-separate",cellPadding:0,cellSpacing:0,children:[o.jsx("colgroup",{children:o.jsx("col",{className:"w-full"})}),o.jsx("thead",{children:o.jsxs("tr",{children:[o.jsx(mR,{light:!0,children:n({defaultMessage:"Team",id:"wsUmh9XWBm"})}),Array.from({length:i}).map((c,u)=>o.jsx(mR,{right:!0,light:!0,children:u<a?(u+1).toLocaleString(r):u===a?"OT":`${u-a+1}OT`},u)),o.jsx(mR,{right:!0,bold:!0,children:n({defaultMessage:"T",id:"sjlqAC/nrs"})})]})}),o.jsx("tbody",{children:l.map(({location:c,nickname:u,teamId:f,abbreviation:m,score:p,linescores:h})=>{const g=Object.fromEntries(h.map(({period:y,score:x})=>[y,x]));return o.jsxs("tr",{children:[o.jsxs(pR,{bold:!0,className:"relative",children:[t&&f===e.event.eventStatus.teamPossessionId&&o.jsx("span",{className:"-translate-x-xs pt-xs absolute right-full top-0 flex h-[1lh] items-center",children:o.jsx("span",{className:"size-xs bg-inverse inline-flex translate-y-px rounded-full"})}),o.jsx("span",{className:s?"uppercase":"",children:s?m:`${c} ${u}`})]}),Array.from({length:i}).map((y,x)=>o.jsx(pR,{right:!0,light:!0,children:o.jsx("span",{className:g[x+1]!==void 0?"":"opacity-50",children:g[x+1]??""})},x)),o.jsx(pR,{bold:!0,right:!0,children:p??""})]},u)})})]})}const ONe=e=>!!e.extra.team_1_competitor_types?.map(n=>n.type).includes("team");function Sun({event:e}){const t=e.event.extra,n=ONe(e.event),r=e.event.status==="live";return o.jsx("div",{className:"px-md flex w-full flex-col pb-3 pt-2",children:o.jsxs("div",{className:"gap-lg relative flex w-full items-center",children:[o.jsx("div",{className:"gap-sm flex flex-1",children:o.jsxs("div",{className:"flex flex-1 flex-col sm:gap-3",children:[o.jsx(Loe,{team:e.event.team_1,isDoubles:!!n,teamCompetitorTypes:t?.team_1_competitor_types,brands:e.brands}),o.jsx("div",{className:"bg-subtle my-1.5 h-px w-full sm:hidden"}),o.jsx(Loe,{team:e.event.team_2,isDoubles:!!n,teamCompetitorTypes:t?.team_2_competitor_types,brands:e.brands})]})}),o.jsx("div",{className:"flex h-full items-center justify-end",children:o.jsxs("div",{className:"gap-x-md relative grid h-full auto-cols-auto grid-flow-col",children:[o.jsx(G4e,{event:e.event,team1:e.event.team_1,team2:e.event.team_2,isLive:r}),(e.event.team_1.won||e.event.team_2.won)&&o.jsx(m$t,{event:e})]})})]})})}const Poe=(e,t={includeFirstInitial:!0})=>{const n=e.trim().split(/\s+/);if(n.length===0)return"";const[r,...s]=n,a=t.includeFirstInitial&&r?r[0]?.toUpperCase()+".":"";return s.length>0?`${a}${a?" ":""}${s.join(" ")}`:a.trim()},u$t=(e,t={includeFirstInitial:!0})=>{try{const n=e.split(" / ");if(n.length!==2)return e;const[r="",s=""]=n;return`${Poe(r,t)} / ${Poe(s,t)}`}catch{return e}};function Loe({team:e,isDoubles:t,teamCompetitorTypes:n,brands:r}){const{isMobileStyle:s}=xe(),a=e.emphasis,i=t?o.jsx(o.Fragment,{children:u$t(e.title??"",{includeFirstInitial:!0})}):s?e.abbreviation??e.title:e.title;return o.jsx("div",{className:"relative flex items-center",children:o.jsxs("div",{className:B("relative flex items-center",{"gap-md":t,"gap-sm":!t}),children:[t?o.jsx(f$t,{competitorTypes:n,brands:r}):e.img&&e.color&&o.jsx(Ls,{logo:e.img,color:e.color,size:"small"}),e.seed&&o.jsx(F,{variant:"tinyRegular",color:"light",children:e.seed}),o.jsxs(F,{variant:"base",className:"font-regular max-sm:text-sm",children:[i,a&&" "]})]})})}const d$t="polygon(0 0, 100% 0, 100% calc(100% - 7px), calc(100% - 12px) calc(100% - 7px), calc(100% - 12px) 100%, 0 100%)",f$t=({competitorTypes:e,brands:t,className:n,topFlagClass:r})=>{const s=e?.filter(i=>i.type==="player").map(i=>t.find(c=>c.teamId===i.id));if(!s)return null;const a='after:content-[" "] after:absolute after:inset-0 after:border after:border-black/10';return o.jsxs("div",{className:B("-translate-y-three grid grid-cols-1 grid-rows-1 place-items-center",n),children:[o.jsx(Ls,{logo:s[0]?.logo??"",color:s[0]?.color??"",size:"tiny",className:B(a,"relative col-start-1 row-start-1 !h-auto"),style:{clipPath:d$t}}),o.jsx(Ls,{logo:s[1]?.logo??"",color:s[1]?.color??"",size:"tiny",className:B(a,"col-start-1 row-start-1 !h-auto translate-x-[6px] translate-y-[6px]",r)})]})},m$t=({event:e})=>o.jsxs("div",{className:"-right-md gap-sm absolute grid h-full grid-rows-2",children:[o.jsx("div",{className:"flex items-center",children:e.event.team_1.won&&o.jsx(AL,{className:"shrink-0"})}),o.jsx("div",{className:"flex items-center",children:e.event.team_2.won&&o.jsx(AL,{className:"shrink-0"})})]}),DNe=({event:e,subtitles:t,headshots:n})=>{const{locale:r}=Z(),s=d.useMemo(()=>{if(!e.datetime)return null;const m=new Date(e.datetime);return isNaN(m.getTime())?null:m.toLocaleTimeString(r,{hour:"numeric",minute:"numeric",hour12:!0})},[e.datetime,r]),a=e.status==="live",i=e.status==="final",l=e.datetime&&new Date(e.datetime)>new Date,c=e.team_1.won||e.team_2.won,{isMobileStyle:u}=xe(),f=ONe(e);return o.jsxs(z,{className:"group relative",children:[o.jsx(z,{className:"bg-subtler duration-quick absolute inset-0 opacity-0 transition-opacity group-hover:opacity-50",variant:"subtle"}),o.jsxs(zu,{href:`/sports/atp/events/${e.id}`,className:B("p-md gap-y-md relative grid w-full flex-col",{"gap-y-sm":u}),children:[o.jsxs("div",{className:"gap-md flex items-center justify-between",children:[o.jsx(F,{variant:u?"tinyRegular":"small",color:"light",children:e.title[0]}),l?o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(F,{variant:u?"tinyRegular":"small",color:"light",children:s}),o.jsx(_4e,{className:"-mr-0.5"})]}):a?o.jsx(Dp,{className:"-mr-0.5",includeDot:!0}):i&&o.jsx(Aw,{className:"-mr-0.5"})]}),o.jsxs(z,{className:"gap-lg flex w-full items-center",children:[o.jsx("div",{className:"gap-sm flex flex-1",children:o.jsxs("div",{className:B("flex flex-1 flex-col gap-[12px]",{"gap-sm":u}),children:[o.jsx(Ooe,{team:e.team_1,headshotImageUrl:n?.team1??null,anyWinner:c,subtitle:t?.team1,isDoubles:f,serving:e.team_1.emphasis,isLive:a}),o.jsx(Ooe,{team:e.team_2,headshotImageUrl:n?.team2??null,anyWinner:c,subtitle:t?.team2,isDoubles:f,serving:e.team_2.emphasis,isLive:a})]})}),o.jsx("div",{className:"flex h-full items-center justify-end",children:o.jsx(G4e,{event:e,team1:e.team_1,team2:e.team_2,isLive:a})})]})]})]})},Ooe=({team:e,headshotImageUrl:t,anyWinner:n,subtitle:r,isDoubles:s,serving:a,isLive:i})=>{const l=e.won,{isMobileStyle:c}=xe();return o.jsxs("div",{className:B("gap-sm flex items-center",{"opacity-30 grayscale":n&&!l}),children:[o.jsx(B4e,{headshotImageUrl:t??void 0,flagUrl:e.img??void 0,name:e.title??"",isCompositeFlag:s}),o.jsxs("div",{children:[o.jsxs(F,{variant:c?"smallBold":"baseSemi",className:"gap-xs flex items-center",children:[e.title,l&&o.jsx(z,{variant:"superLight",className:"p-xs ml-auto inline-flex aspect-square rounded-full",children:o.jsx(Kb,{size:12,className:"text-super"})}),a&&i&&o.jsx(de,{icon:YLe,size:14,className:"text-super"})]}),typeof r=="string"?o.jsx(F,{variant:"micro",color:"light",className:"-mt-0.5",children:r}):r]})]})},Doe=e=>e.toISOString().split("T")[0];function p$t({events:e,players:t}){const n=d.useMemo(()=>e.reduce((l,c)=>{let u="";if(c.datetime){const f=new Date(c.datetime),m=f.getFullYear(),p=String(f.getMonth()+1).padStart(2,"0"),h=String(f.getDate()).padStart(2,"0");u=`${m}-${p}-${h}`}return l[u]=l[u]||[],l[u]?.push(c),l},{}),[e]),r=d.useMemo(()=>{const l=new Date,c=Doe(l),u=Object.keys(n);return u.length===0?c:u.reduce((f,m)=>{const p=new Date(m+"T00:00:00"),h=new Date(f+"T00:00:00"),g=Math.abs(p.getTime()-l.getTime()),y=Math.abs(h.getTime()-l.getTime());return g<y?m:f})},[n]),[s,a]=d.useState(new Date(r+"T00:00:00")),i=n[Doe(s)??""];return!i||i?.length===0?null:o.jsxs(z,{className:"mt-lg",children:[o.jsx(EBt,{selectedDate:s,setSelectedDate:a,eventsByDay:n}),o.jsx(Wt,{className:"overflow-hidden",children:o.jsx("div",{className:"grid",children:o.jsx(h$t,{events:i??[],players:t})})})]})}const h$t=({events:e,players:t})=>{const{locale:n}=Z(),r=d.useCallback(a=>{if(!a)return null;const i=new Date(a);if(isNaN(i.getTime()))return null;const l=new Date,c=i.getFullYear()!==l.getFullYear();return i.toLocaleDateString(n,{month:"short",day:"numeric",...c?{year:"numeric"}:{}})},[n]),{isMobileStyle:s}=xe();return o.jsxs("div",{className:"grid",children:[o.jsxs(z,{className:"px-md py-sm gap-sm flex w-full flex-row items-center justify-between",variant:"subtler",children:[o.jsx(F,{variant:s?"tiny":"smallBold",children:r(e[0]?.datetime)}),o.jsx(F,{variant:s?"tinyRegular":"small",color:"light",children:e[0]?.title[1]})]}),o.jsx("div",{className:"grid divide-y",children:e.map(a=>o.jsx(g$t,{event:a,players:t},a.id))})]})},g$t=({event:e,players:t})=>{const{europe:n,world:r}=Rw(),s={team1:o.jsx(F,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:n},children:"Team Europe"}),team2:o.jsx(F,{variant:"micro",color:"light",className:"-mt-0.5",style:{color:r},children:"Team World"})},a=t.world.concat(t.europe),i=a.find(u=>u.teamId===e.team_1.id),l=a.find(u=>u.teamId===e.team_2.id),c={team1:i?.logo_secondary??null,team2:l?.logo_secondary??null};return o.jsx(DNe,{event:e,subtitles:s,headshots:c})},y$t=async e=>{if(!e)return null;const t=await re.POST("/rest/sports/{league}/widget","sports-widget",{body:e});if(t?.error)throw new we("API_CLIENTS_ERROR",{cause:t.error,details:e});return t.data},x$t=({data:e})=>{const{data:t}=Ue({...ky,queryKey:["/sports/widget",e.events.map(r=>r.id).join(",")],queryFn:()=>y$t(e.debug_fn_args),placeholderData:Pu,refetchInterval:3e4}),n=t||e;return n?.object!==e.object?null:o.jsx(j4e,{canonicalPageLink:n?.canonical_pages?.[0]?.url_web,children:o.jsx("div",{className:"divide-y overflow-hidden",children:n?.events?.map(r=>o.jsx(DNe,{event:r},r.id))})})},m0=I.memo(({data:e})=>Qr(e).with({object:"SportsEventsWidget"},t=>t.league==="atp"||t.league==="wta"?o.jsx(x$t,{data:t}):o.jsx(WFt,{widget:t})).with({object:"SportsStandingsWidget"},t=>o.jsx(MUt,{widgetData:t})).with({object:"SportsIndvScheduleWidget"},t=>o.jsx(uUt,{widgetData:t})).with({object:"SportsIndvEventsWidget"},t=>o.jsx(iUt,{widgetData:t})).exhaustive());m0.displayName="SportsWidget";function v$t({csvString:e,filename:t="perplexity.csv"}){if(typeof window>"u")throw new Error("Attempting to download a CSV file in a server context.");try{const n=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=window.URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=t,document.body.appendChild(s),s.click(),document.body.removeChild(s)}catch(n){throw n}}function b$t(){return d.useCallback(e=>{v$t(e)},[])}var hR,Foe;function _$t(){if(Foe)return hR;Foe=1;var e=typeof Element<"u",t=typeof Map=="function",n=typeof Set=="function",r=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function s(a,i){if(a===i)return!0;if(a&&i&&typeof a=="object"&&typeof i=="object"){if(a.constructor!==i.constructor)return!1;var l,c,u;if(Array.isArray(a)){if(l=a.length,l!=i.length)return!1;for(c=l;c--!==0;)if(!s(a[c],i[c]))return!1;return!0}var f;if(t&&a instanceof Map&&i instanceof Map){if(a.size!==i.size)return!1;for(f=a.entries();!(c=f.next()).done;)if(!i.has(c.value[0]))return!1;for(f=a.entries();!(c=f.next()).done;)if(!s(c.value[1],i.get(c.value[0])))return!1;return!0}if(n&&a instanceof Set&&i instanceof Set){if(a.size!==i.size)return!1;for(f=a.entries();!(c=f.next()).done;)if(!i.has(c.value[0]))return!1;return!0}if(r&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(i)){if(l=a.length,l!=i.length)return!1;for(c=l;c--!==0;)if(a[c]!==i[c])return!1;return!0}if(a.constructor===RegExp)return a.source===i.source&&a.flags===i.flags;if(a.valueOf!==Object.prototype.valueOf&&typeof a.valueOf=="function"&&typeof i.valueOf=="function")return a.valueOf()===i.valueOf();if(a.toString!==Object.prototype.toString&&typeof a.toString=="function"&&typeof i.toString=="function")return a.toString()===i.toString();if(u=Object.keys(a),l=u.length,l!==Object.keys(i).length)return!1;for(c=l;c--!==0;)if(!Object.prototype.hasOwnProperty.call(i,u[c]))return!1;if(e&&a instanceof Element)return!1;for(c=l;c--!==0;)if(!((u[c]==="_owner"||u[c]==="__v"||u[c]==="__o")&&a.$$typeof)&&!s(a[u[c]],i[u[c]]))return!1;return!0}return a!==a&&i!==i}return hR=function(i,l){try{return s(i,l)}catch(c){if((c.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw c}},hR}var w$t=_$t();const C$t=Qo(w$t),FNe=I.memo(({domain:e,url:t,suffix:n,overflowCount:r,...s})=>{if(!t&&!e)return null;const a=e||wU(t).replace(/^[a-z]{1,2}\./i,""),i=n?`${a}.${n}`:a,l=r&&r>0?o.jsxs("span",{className:"opacity-50",children:["+",r]}):void 0;return o.jsx(lc,{label:i,accessory:l,truncate:!0,...s})});FNe.displayName="CitationDomainBubble";const UNe=I.memo(function({href:t,overflowCount:n,getAttachmentUrl:r,onCitationClick:s,...a}){const[i,l]=d.useState(!1),[c,u]=d.useState(null),f=d.useCallback(async y=>{if(s?.(y),y?.defaultPrevented||!t||!r)return;const x=await r(t);lo(t)&&(u(x),l(!0))},[s,r,t]),m=n&&n>0?o.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0,p=d.useCallback(()=>l(!1),[]),h=d.useMemo(()=>({src:c??void 0}),[c]);return w_(t||"")?o.jsx(lc,{accessory:m,icon:oce,className:"cursor-pointer",truncate:!0,onClick:f,...a}):o.jsxs(o.Fragment,{children:[o.jsx(lc,{accessory:m,icon:zk,className:"cursor-pointer",truncate:!0,onClick:f,...a}),c&&o.jsx(L_,{isOpen:i,onClose:p,imgProps:h})]})});UNe.displayName="FileCitationBubble";const BNe=I.memo(({children:e,webResults:t,citationGroup:n,contentProps:r,hideHoverCard:s=!1,trackEvent:a,getAttachmentUrl:i,openMemorySearchHistoryModal:l,onCitationClick:c,forceExternalHandler:u})=>{const[f,m]=d.useState(!1),[p,h]=d.useState(!1),[g,y]=d.useState(null),[x,v]=d.useState(!1),[b,_]=d.useState(null),w=zy(),C=Z(),{isMobileStyle:S}=xe(),E=d.useCallback(()=>v(!1),[]),k=d.useMemo(()=>({src:b??void 0}),[b]),M=d.useMemo(()=>t.every(D=>D.is_conversation_history),[t]),j=d.useCallback(()=>{if(M)return C.formatMessage({defaultMessage:"Library",id:"StcK672jB9"});switch(n.category){case"memory":return C.formatMessage({defaultMessage:"Memory",id:"dVx3yznM2C"});case"attachment":return C.formatMessage({defaultMessage:"Attachments",id:"Vlx13nOMtX"});case"youtube":return C.formatMessage({defaultMessage:"YouTube",id:"zuA3BgDC6u"});default:return C.formatMessage({defaultMessage:"Sources",id:"fhwTpAcBLC"})}},[n.category,M,C]),R=d.useCallback(D=>async P=>{if(P.preventDefault(),D.is_conversation_history||D.is_memory)if(c){c(D,P);return}else if(l){l(D);return}else{console.warn("Memory/conversation history modal handler not provided");return}if(D.url?sx(D.url):null){y(D),h(!0),m(!1);return}const T=D.is_attachment||!1,N=lo(D.url);if(T&&N&&i){const L=await i(D.url);_(L),v(!0),m(!1);return}if(T&&rx(D)&&i){const L=await i(D.url);window.open(L,"_blank");return}if(a&&D.url&&a("click citation",{source:"grouped_hovercard",citation_url:D.url}),u&&c){c(D,P);return}CU(D)&&window.open(D.url,"_blank")},[c,l,a,i,u]),O=d.useCallback(D=>{const P=D.is_memory?o.jsx(de,{icon:Kl,size:"sm"}):D.is_conversation_history?o.jsx(de,{icon:fp,size:"sm"}):o.jsx(Wo.Icon,{url:D.url,isAttachment:D.is_attachment||!1,connectionType:D.meta_data?.connection_type}),A=D.meta_data?.connection_type,T=A==="WILEY"?"Wiley":A||D.is_memory||D.is_conversation_history?D.name:void 0,N=D.is_memory?D.snippet:D.name;return o.jsxs("div",{className:"hover:bg-subtler relative flex min-w-0 cursor-pointer select-none items-start gap-3 rounded-lg px-2 py-1.5 align-top",children:[o.jsx("span",{className:"mt-two shrink-0",children:P}),o.jsxs("span",{className:B("flex min-w-0 select-none",{"gap-two flex-col items-start":D.is_memory,"gap-xs items-baseline":!D.is_memory}),children:[N&&o.jsx(F,{className:B("min-w-0 shrink",{"truncate text-ellipsis":!D.is_memory},{"line-clamp-2":D.is_memory}),variant:"small",as:"span",children:N}),!M&&o.jsx(F,{variant:"tinyMono",color:"light",className:"shrink-0",children:o.jsx(Wo.Source,{url:D.url,source:T,isAttachment:D.is_attachment||!1,connectionType:D.meta_data?.connection_type,isMemory:D.is_memory||!1,isConversationHistory:D.is_conversation_history||!1})})]})]})},[M]);return o.jsxs(o.Fragment,{children:[g&&g.url&&o.jsx(D_,{isOpen:p,name:g.name,setisOpen:h,url:g.url}),b&&o.jsx(L_,{isOpen:x,onClose:E,imgProps:k}),o.jsxs(lNe,{onOpenChange:D=>{m(s?!1:D)},open:f,openDelay:0,closeDelay:S?0:200,children:[o.jsx(cNe,{asChild:!0,onPointerDown:D=>{(S||D.pointerType==="touch")&&m(!0)},children:e}),o.jsx(uNe,{children:o.jsx(dNe,{className:B({"data-open:animate-in data-open:zoom-in-[0.97] data-open:fade-in data-closed:animate-out data-closed:zoom-out-[0.97] data-closed:fade-out data-[side=bottom]:origin-top data-[side=top]:origin-bottom":!w}),side:"bottom",sideOffset:8,collisionPadding:S?8:10,align:S?"center":"start",...r,children:o.jsxs("div",{className:B("bg-base dark:border-subtler rounded-xl border pt-3 shadow-lg",{"w-96":!S,"w-[calc(100vw-16px)]":S}),children:[o.jsxs("div",{className:"gap-two flex px-5 pb-2 pt-1",children:[o.jsx(F,{variant:"tinyMono",children:j()}),o.jsx(F,{variant:"tinyMono",as:"span",color:"light",className:"mx-two",children:""}),o.jsx(F,{variant:"tinyMono",color:"light",children:n.totalCount||t.length})]}),o.jsx("div",{className:"scrollbar-subtle max-h-60 overflow-y-auto px-3 pb-3",children:o.jsx("div",{className:"space-y-px",children:t.map((D,P)=>o.jsx(qe,{className:"block",href:D.url||"#",target:"_blank",rel:"noopener nofollow",onClick:R(D),children:O(D)},D.url||P))})})]})})})]})]})});BNe.displayName="GroupedCitationHoverCard";const $Ne=I.memo(({ytID:e,timestamp:t,overflowCount:n,...r})=>{const[s,a]=d.useState(!1),i=d.useCallback(()=>a(!0),[]),l=n&&n>0?o.jsxs("span",{className:"opacity-50",children:["+",n]}):void 0;return o.jsxs(o.Fragment,{children:[o.jsx(lc,{label:"youtube",accessory:l,icon:jce,onClick:i,className:"cursor-pointer",...r}),e&&o.jsx(D_,{url:`https://www.youtube.com/watch?v=${e}`,name:"",isOpen:s,setisOpen:a,timestamp:t})]})});$Ne.displayName="YoutubeCitationBubble";const S$t="_entity_chip",Uoe="pplx-entity-id";function Eun(e){const t=e.match(/^pplx:\/\/entity_chip\/(?<id>.+)$/);if(!(!t||!t.groups?.id))return t.groups.id}const E$t={side:"bottom",align:"start"};var ao;(function(e){e.YOUTUBE="youtube",e.FILE="file",e.MEMORY="memory",e.CONVERSATION_HISTORY="conversation_history",e.WEB="web",e.NUMBERED="numbered"})(ao||(ao={}));function M$t(e){if(e){if(e.is_memory)return Kl;if(e.is_conversation_history)return fp}}function k$t(e){const{ytID:t,isMobileStyle:n,isFile:r,isMemory:s,isConversationHistory:a,enableCitationGrouping:i}=e;return t&&!n?ao.YOUTUBE:r?ao.FILE:i?s?ao.MEMORY:a?ao.CONVERSATION_HISTORY:ao.WEB:ao.NUMBERED}function T$t(e){const t=e.indexOf("&t=");return t!==-1?e.substring(t+3):void 0}function N$t({count:e}){return!e||e<=0?null:o.jsxs("span",{className:"pl-two opacity-50",children:["+",e]})}const kH=I.memo(e=>{const{str:t,href:n,className:r,trackEvent:s,isFile:a,isDownloadable:i,citationSize:l,onCitationClick:c,getAttachmentUrl:u,isMemory:f,isConversationHistory:m,citationGroup:p,enableCitationGrouping:h,citationDomain:g,fileName:y,webResult:x,ref:v,forceExternalHandler:b,..._}=e,{isMobileStyle:w}=xe(),C=H5.test(t),S=d.useCallback(()=>{s?.("click citation",{source:"inline",citation_url:n})},[n,s]),E=d.useMemo(()=>{const U=p?.overflowCount;return!U||U<=0?null:o.jsx(N$t,{count:U})},[p?.overflowCount]);if(!C)return o.jsx("span",{children:t});const k=T$t(n),M=sx(n),j=t.replace(/\[|\]|,.*$/g,""),O=!!(n&&!f&&!m&&(!(M||i)||w)),D=k$t({ytID:M,isMobileStyle:w,isFile:a,isMemory:f,isConversationHistory:m,enableCitationGrouping:h}),P=h&&p&&p.citations.length>1,A=w&&P,T=!O||A?"onClick":"external";let N;switch(D){case ao.YOUTUBE:N=M&&o.jsx($Ne,{...!h&&{label:j},ytID:M,overflowCount:p?.overflowCount??0,timestamp:k,size:l,forceExternalHandler:b});break;case ao.FILE:N=o.jsx(UNe,{label:h?y??j:j,overflowCount:p?.overflowCount??0,size:l,href:n,getAttachmentUrl:i?u:void 0,onCitationClick:c,forceExternalHandler:b});break;case ao.NUMBERED:{const U=M$t(x);N=U?o.jsx(lc,{label:j,icon:U,size:l,onClick:c,href:n,linkBehavior:T,trackEvent:s,forceExternalHandler:b}):o.jsx(_4,{label:j,size:l,onClick:c,href:n,linkBehavior:T,trackEvent:s,forceExternalHandler:b});break}case ao.MEMORY:N=o.jsx(lc,{label:x?.name.toLocaleLowerCase(),icon:Kl,accessory:E,size:l,truncate:!0,onClick:c,linkBehavior:"onClick",forceExternalHandler:b});break;case ao.CONVERSATION_HISTORY:N=o.jsx(lc,{label:"library",icon:fp,accessory:E,size:l,truncate:!1,onClick:c,linkBehavior:"onClick",forceExternalHandler:b});break;case ao.WEB:default:N=o.jsx(FNe,{domain:g,url:n,overflowCount:p?.overflowCount??0,size:l,href:n,linkBehavior:T,trackEvent:s,onClick:A||b?c:S,forceExternalHandler:b})}return o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"citation-nbsp"}),o.jsx("span",{className:B(r,"citation inline"),ref:v,..._,children:N}),""]})});kH.displayName="MdStringToLink";const j$t=function(t){const{ref:n,...r}=t,{anchor:s,className:a,...i}=r,l=f=>{const m=document.getElementById(f);m&&m.scrollIntoView({behavior:"smooth"})},c=s.replace(/\[|\]/g,""),u=d.useCallback(()=>l(`#search${s}`),[s]);return o.jsx(qe,{href:`#search${s}`,onClick:u,className:a,ref:n,...i,children:o.jsx(_4,{label:c})})},A$t=Dt("MarkdownLinkContext",{}),Mun=I.memo(e=>{const{className:t,href:n,title:r,children:s,target:a="_blank",node:i,ref:l,...c}=e,{hideHoverCard:u=!1,trackEvent:f,citationSize:m,onCitationClick:p,getAttachmentUrl:h,enableCitationGrouping:g=!1,webResults:y=[],EntityChipComponent:x,inlineTokenAnnotationsLookup:v,forceExternalHandler:b}=d.useContext(A$t),_=i?.data?.webResult,w=_?.is_attachment??!1,C=i?.data?.webResultCitation,S=_?.is_memory??!1,E=_?.is_conversation_history??!1,{$t:k}=Z(),M=g&&i?.data?i.data.citationGroup:void 0,{isMobileStyle:j}=xe(),R=d.useCallback(V=>{if(M&&M.citations.length>1&&j){V?.preventDefault();return}if(g&&M&&M.citations.length>0&&(_?.is_memory||_?.is_conversation_history)){const Q=M.citations[0],q=y?.[Q-1];q&&p&&p(q,V)}else _&&p&&p(_,V)},[_,M,g,j,p,y]),O=d.useMemo(()=>{if(!i||!v||!(Uoe in i.properties))return;const V=i.properties[Uoe];if(typeof V!="string")return;const W=v[V];if(W&&W.annotation_type===qQ.FINANCE){const Q=W.data;return Q?.symbol?{id:W.id,annotation_type:W.annotation_type,symbol:Q.symbol,quoteUrl:Q.quote_url||""}:void 0}},[i,v]),D=d.useCallback(()=>{f&&O&&f("click entity chip",{type:O.annotation_type,symbol:O.symbol})},[O,f]),P=d.useMemo(()=>({side:"bottom"}),[]),A=d.useMemo(()=>_?{onClick(V){f&&f("click citation",{source:"inline hoverCard",citation_url:_.url}),R(V)}}:void 0,[_,R,f]),T=d.useMemo(()=>({color:"light"}),[]),N=d.useCallback((V,W)=>()=>{f&&W&&f("inline link clicked",{linkURL:n,linkText:I.Children.toArray(s).join(""),linkSurface:V})},[n,s,f]),L=d.useCallback(V=>()=>{f&&V&&f("inline link viewed",{linkURL:n,linkText:I.Children.toArray(s).join("")})},[n,s,f]),U=d.useMemo(()=>({onClick:N("citation_hover_card",_)}),[N,_]);let $;switch(r){case"_citation":{if(M?.isHidden)return null;$=o.jsx(kH,{isMemory:S,isConversationHistory:E,onCitationClick:R,className:t,str:I.Children.toArray(s).join(""),href:n,rel:"nofollow noopener",trackEvent:f,isFile:w,isDownloadable:_?rx(_):!1,citationSize:m,getAttachmentUrl:h,citationGroup:M,enableCitationGrouping:g,citationDomain:_?.meta_data?.citation_domain_name,fileName:_?.name,webResult:_,ref:l,forceExternalHandler:b});break}case"_anchor_citation":{$=o.jsx(j$t,{anchor:I.Children.toArray(s).join(""),className:t,ref:l,...c});break}case S$t:return!O||!x?null:o.jsx(x,{type:qQ.FINANCE,data:O,className:t,onClick:D,ref:l});default:{const{"aria-label":V,onClick:W,...Q}=c,q=(()=>{if(!(!y?.length||!n))return y.find(ee=>ee.url===n)})(),H=q!==void 0,K=!!(!H&&r),G=o.jsx(P0,{variant:"inline",href:n,target:a,title:K?r:void 0,rel:"nofollow noopener",ref:l,bold:!0,onTrackEvent:N("answer",q),__dangerousDoNotUseOnClick:W,...Q,children:s});H?$=o.jsx(Ty,{result:q,contentProps:E$t,onOpened:L(q),linkProps:U,children:G}):$=G}}if(_){if(g&&M&&M.citations.length>1){const W=M.citations.map(Q=>y[Q-1]).filter(Q=>Q!==void 0);return o.jsx(BNe,{webResults:W,citationGroup:M,hideHoverCard:u,trackEvent:f,getAttachmentUrl:h,onCitationClick:p,contentProps:P,forceExternalHandler:b,children:$})}return o.jsx(Ty,{hideHoverCard:u,contentProps:P,linkProps:A,result:_,trackEvent:f,timestampComponent:j3.isRecentlyTrending(_)?o.jsx(N3,{recentlyUpdatedLabel:k({defaultMessage:"Just now",description:"Label for recently updated content",id:"FlgDFQFpF1"}),timestamp:_.meta_data?.published_date,timestampProps:T,children:"Updated"}):null,webResultCitation:C,getAttachmentUrl:h,children:$})}return $},C$t),VNe=I.memo(({status:e})=>o.jsx(F,{as:"span",variant:"smallBold",color:e?"super":"light",children:o.jsx(de,{icon:e?dr:kt,size:"md"})}));VNe.displayName="BoolCell";const WNe=I.memo(({url:e})=>o.jsx(qe,{href:e,target:"_blank",rel:"noopener",className:"top-xs relative inline-block transition-opacity duration-300 hover:opacity-50",children:o.jsx(Wo,{color:"light",variant:"tiny",url:e,isAttachment:!1})}));WNe.displayName="LinkCell";const $2=I.memo(({text:e})=>o.jsx(F,{as:"span",variant:"tiny",className:"text-pretty break-words font-normal",children:e}));$2.displayName="TextCell";const HNe=function(e){if(e==null)return L$t;if(typeof e=="function")return w4(e);if(typeof e=="object")return Array.isArray(e)?I$t(e):R$t(e);if(typeof e=="string")return P$t(e);throw new Error("Expected function, string, or object as test")};function I$t(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=HNe(e[n]);return w4(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function R$t(e){const t=e;return w4(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function P$t(e){return w4(t);function t(n){return n&&n.type===e}}function w4(e){return t;function t(n,r,s){return!!(O$t(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function L$t(){return!0}function O$t(e){return e!==null&&typeof e=="object"&&"type"in e}const zNe=[],D$t=!0,Boe=!1,F$t="skip";function U$t(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=HNe(s),i=r?-1:1;l(e,void 0,[])();function l(c,u,f){const m=c&&typeof c=="object"?c:{};if(typeof m.type=="string"){const h=typeof m.tagName=="string"?m.tagName:typeof m.name=="string"?m.name:void 0;Object.defineProperty(p,"name",{value:"node ("+(c.type+(h?"<"+h+">":""))+")"})}return p;function p(){let h=zNe,g,y,x;if((!t||a(c,u,f[f.length-1]||void 0))&&(h=B$t(n(c,f)),h[0]===Boe))return h;if("children"in c&&c.children){const v=c;if(v.children&&h[0]!==F$t)for(y=(r?v.children.length:-1)+i,x=f.concat(v);y>-1&&y<v.children.length;){const b=v.children[y];if(g=l(b,y,x)(),g[0]===Boe)return g;y=typeof g[1]=="number"?g[1]:y+i}}return h}}}function B$t(e){return Array.isArray(e)?e:typeof e=="number"?[D$t,e]:e==null?zNe:[e]}function Qi(e,t,n,r){let s,a,i;typeof t=="function"&&typeof n!="function"?(a=void 0,i=t,s=n):(a=t,i=n,s=r),U$t(e,a,l,s);function l(c,u){const f=u[u.length-1],m=f?f.children.indexOf(c):void 0;return i(c,m,f)}}const Ck=e=>{const t=[];let n="";Qi(e,[{type:"text"},{tagName:"br"},{tagName:"a"}],s=>{if(s.type==="element"&&s.tagName==="br"){t.push(`
`);return}s.type==="element"&&s.tagName==="a"&&s.properties?.href&&(n=String(s.properties.href)),s.type==="text"&&t.push(s.value.trim())});const r=t.join("");return r?r.replace(/\s*\[\d+\]\s*/g," ").replace(/[ \t]+/g," ").trim():n},kun=e=>{if(e.tagName!=="table")return{success:!1,error:{type:"INVALID_TABLE",message:"Invalid node: expected table element"}};let t=[];const n=[];Qi(e,{tagName:"thead"},a=>{const i=[];Qi(a,{tagName:"th"},l=>{const c=Ck(l);i.push(c)}),n.push({cells:i,isHeader:!0}),t=i.map(l=>l.length)}),Qi(e,{tagName:"tbody"},a=>{Qi(a,{tagName:"tr"},i=>{const l=[];Qi(i,{tagName:"td"},c=>{const u=Ck(c);l.push(u)}),l.forEach((c,u)=>{u>=t.length?t.push(c.length):t[u]=Math.max(t[u]??0,c.length)}),n.push({cells:l,isHeader:!1})})});const r=$$t(n);return{success:!0,data:{plainText:V$t(n,t),htmlText:r}}},$oe=e=>{const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return e.replace(/[&<>"']/g,n=>t[n]||n)},$$t=e=>{const{headerRows:t,bodyRows:n}=e.reduce((u,f)=>(f.isHeader?u.headerRows.push(f):u.bodyRows.push(f),u),{headerRows:[],bodyRows:[]}),r="border-collapse: collapse; width: 100%; font-family: Arial, sans-serif;",s="border: 1px solid #ddd; padding: 8px; text-align: left;",a=`${s} background-color: #f2f2f2; font-weight: bold;`,i=t.length>0?`<thead>${t.map(u=>`<tr>${u.cells.map(f=>`<th style="${a}">${$oe(f)}</th>`).join("")}
          </tr>`).join("")}
        </thead>`:"",l=n.length>0?`<tbody>
          ${n.map(u=>`<tr>${u.cells.map(f=>`<td style="${s}">${$oe(f)}</td>`).join("")}
            </tr>`).join("")}
        </tbody>`:"";return`<table style="${r}">${i}${l}</table>`},V$t=(e,t)=>{const n=[];return e.forEach((r,s)=>{const a=[];for(let i=0;i<t.length;i++){const l=r.cells[i]||"";a.push(l.padEnd(t[i]??0))}if(n.push(a.join("  |  ")),r.isHeader&&s===0){const i=t.map(l=>"-".repeat(l)).join("--+--");n.push(i)}}),n.join(`
`)};class Voe{static stringArrayToCSV(t){return t.map(this.escapeCSVString).join(",")}static escapeCSVString(t){return`"${t.replace(/"/g,'""')}"`}static tableToCSV(t){if(t.tagName!=="table")throw new Error("Attempting to convert node of wrong tagName to CSV from 'table'");try{const n=[];let r="";return Qi(t,{tagName:"thead"},s=>{const a=[];Qi(s,{tagName:"th"},i=>{const l=Ck(i);a.push(l)}),n.push(this.stringArrayToCSV(a)),r+=a.join("-").replace(/[^a-z0-9\\-]/gi,"")}),Qi(t,{tagName:"tbody"},s=>{Qi(s,{tagName:"tr"},a=>{const i=[];Qi(a,{tagName:"td"},l=>{const c=Ck(l);i.push(c)}),n.push(this.stringArrayToCSV(i))})}),{csvString:n.join(`
`),filename:r}}catch(n){throw new Error(`Error attempting to convert table node to CSV string: ${n}`)}}}const GNe=I.memo(({tableData:e,citationOffset:t})=>{const{$t:n}=Z(),{trackEvent:r}=Te(),{data:s,column_metadata:a,search_results:i}=e,l=d.useMemo(()=>a.reduce((g,{name:y,display_name:x})=>(g[y]=x,g),{}),[a]),c=d.useMemo(()=>a.reduce((g,{name:y,display_format:x})=>(g[y]=x,g),{}),[a]),u=d.useCallback((g,y)=>g.value===null&&y.value===null?0:g.value===null?-1:y.value===null?1:typeof g.value=="string"?String(g.value).localeCompare(String(y.value)):Number(g.value)-Number(y.value),[]),f=d.useCallback(({data:g,id:y,...x})=>{const v=c[y],b=g[y]?.citation_index??null,_=b!==null?i[b]:null,w=_?.is_attachment??!1,C=g[y]?.value;let S=o.jsx($2,{text:String(C)});return v==="url"&&(S=o.jsx(WNe,{url:String(C)})),v==="boolean"&&(S=o.jsx(VNe,{status:!!C})),v==="long_text"&&(S=o.jsx($2,{text:String(C)})),v==="date"&&(S=o.jsx($2,{text:String(C)})),C===null?o.jsx("td",{...x,children:o.jsx(F,{variant:"tiny",color:"ultraLight",children:o.jsx(de,{icon:Yk,size:"xs"})})}):o.jsxs("td",{...x,children:[o.jsx("span",{children:S}),v!=="url"&&_&&_.url&&b!==null&&o.jsx(Ty,{result:_,children:o.jsx(kH,{str:`[${b+t+1}]`,href:_.url,isFile:w,isDownloadable:rx(_),className:B("citation ml-xs inline")})})]})},[i,c,t]),m=d.useMemo(()=>a.map(({name:g})=>({name:g,label:l[g],sortable:!0,resizable:!0})),[a,l]),p=b$t(),h=d.useCallback(()=>{const g=a.reduce((b,_)=>(b.push(_.name),b),[]).join("-"),y=a.map(({display_name:b})=>Voe.escapeCSVString(b)).join(","),x=s.map(b=>a.map(({name:_})=>Voe.escapeCSVString(String(b[_]?.value))).join(",")),v=[y,...x].join(`
`);return r("clicked download table as csv",{source:"widget"}),p({csvString:v,filename:g})},[a,s,p,r]);return o.jsx(Fi,{widgetType:"table",widgetName:"table",widgetSize:"full",children:o.jsxs(z,{variant:"subtler",className:"px-md pb-xs rounded-lg",children:[o.jsx(pNe,{data:s,columns:m,RowCell:f,compareFunction:u}),o.jsx(z,{className:"border-subtlest py-sm flex justify-end border-t",children:o.jsx(Me,{icon:Uy,variant:"super",onClick:h,pill:!0,size:"tiny",text:n({defaultMessage:"Export CSV",id:"TE51b7zSWC"}),toolTip:n({defaultMessage:"Download Table as CSV",id:"X3dYB0f+/Q"})})})]})})});GNe.displayName="TableWidget";const qNe=d.memo(({children:e,defaultExpanded:t=!1,title:n})=>{const{$t:r}=Z(),[s,a]=d.useState(t),i=d.useCallback(()=>{a(c=>!c)},[]),l=d.useMemo(()=>s?Wn:Xn,[s]);return o.jsx(na,{className:"overflow-hidden",transition:{duration:.3,ease:an},children:o.jsxs("div",{children:[o.jsx(me,{variant:"common",text:n??r({defaultMessage:"Advanced",id:"3Rx6Qo1x+1"}),onClick:i,size:"tiny",icon:l,noPadding:!0,extraCSS:"!bg-transparent hover:!bg-subtler"}),o.jsx(Zr,{children:s&&o.jsx("div",{className:"pt-2",children:e})})]})})});qNe.displayName="AutomationAdvancedSection";const W$t=[{value:"ONCE",label:"Once"},{value:"DAILY",label:"Daily"},{value:"WEEKLY",label:"Weekly"},{value:"WEEKDAYS",label:"Every weekday"},{value:"MONTHLY",label:"Monthly"},{value:"YEARLY",label:"Yearly"}],H$t=[{value:"0",label:"Sunday"},{value:"1",label:"Monday"},{value:"2",label:"Tuesday"},{value:"3",label:"Wednesday"},{value:"4",label:"Thursday"},{value:"5",label:"Friday"},{value:"6",label:"Saturday"}],z$t=[...Array(31)].map((e,t)=>({value:String(t+1),label:String(t+1)})),G$t=[{value:"0",label:"January"},{value:"1",label:"February"},{value:"2",label:"March"},{value:"3",label:"April"},{value:"4",label:"May"},{value:"5",label:"June"},{value:"6",label:"July"},{value:"7",label:"August"},{value:"8",label:"September"},{value:"9",label:"October"},{value:"10",label:"November"},{value:"11",label:"December"}];var $t=function(){return $t=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},$t.apply(this,arguments)};function q$t(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function KNe(e,t,n){for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function Pw(e){return e.mode==="multiple"}function Lw(e){return e.mode==="range"}function C4(e){return e.mode==="single"}var K$t={root:"rdp",multiple_months:"rdp-multiple_months",with_weeknumber:"rdp-with_weeknumber",vhidden:"rdp-vhidden",button_reset:"rdp-button_reset",button:"rdp-button",caption:"rdp-caption",caption_start:"rdp-caption_start",caption_end:"rdp-caption_end",caption_between:"rdp-caption_between",caption_label:"rdp-caption_label",caption_dropdowns:"rdp-caption_dropdowns",dropdown:"rdp-dropdown",dropdown_month:"rdp-dropdown_month",dropdown_year:"rdp-dropdown_year",dropdown_icon:"rdp-dropdown_icon",months:"rdp-months",month:"rdp-month",table:"rdp-table",tbody:"rdp-tbody",tfoot:"rdp-tfoot",head:"rdp-head",head_row:"rdp-head_row",head_cell:"rdp-head_cell",nav:"rdp-nav",nav_button:"rdp-nav_button",nav_button_previous:"rdp-nav_button_previous",nav_button_next:"rdp-nav_button_next",nav_icon:"rdp-nav_icon",row:"rdp-row",weeknumber:"rdp-weeknumber",cell:"rdp-cell",day:"rdp-day",day_today:"rdp-day_today",day_outside:"rdp-day_outside",day_selected:"rdp-day_selected",day_disabled:"rdp-day_disabled",day_hidden:"rdp-day_hidden",day_range_start:"rdp-day_range_start",day_range_end:"rdp-day_range_end",day_range_middle:"rdp-day_range_middle"};function Y$t(e,t){return $u(e,"LLLL y",t)}function Q$t(e,t){return $u(e,"d",t)}function X$t(e,t){return $u(e,"LLLL",t)}function Z$t(e){return"".concat(e)}function J$t(e,t){return $u(e,"cccccc",t)}function eVt(e,t){return $u(e,"yyyy",t)}var tVt=Object.freeze({__proto__:null,formatCaption:Y$t,formatDay:Q$t,formatMonthCaption:X$t,formatWeekNumber:Z$t,formatWeekdayName:J$t,formatYearCaption:eVt}),nVt=function(e,t,n){return $u(e,"do MMMM (EEEE)",n)},rVt=function(){return"Month: "},sVt=function(){return"Go to next month"},aVt=function(){return"Go to previous month"},oVt=function(e,t){return $u(e,"cccc",t)},iVt=function(e){return"Week n. ".concat(e)},lVt=function(){return"Year: "},cVt=Object.freeze({__proto__:null,labelDay:nVt,labelMonthDropdown:rVt,labelNext:sVt,labelPrevious:aVt,labelWeekNumber:iVt,labelWeekday:oVt,labelYearDropdown:lVt});function uVt(){var e="buttons",t=K$t,n=Vve,r={},s={},a=1,i={},l=new Date;return{captionLayout:e,classNames:t,formatters:tVt,labels:cVt,locale:n,modifiersClassNames:r,modifiers:s,numberOfMonths:a,styles:i,today:l,mode:"default"}}function dVt(e){var t=e.fromYear,n=e.toYear,r=e.fromMonth,s=e.toMonth,a=e.fromDate,i=e.toDate;return r?a=go(r):t&&(a=new Date(t,0,1)),s?i=C3(s):n&&(i=new Date(n,11,31)),{fromDate:a?Kd(a):void 0,toDate:i?Kd(i):void 0}}var YNe=d.createContext(void 0);function fVt(e){var t,n=e.initialProps,r=uVt(),s=dVt(n),a=s.fromDate,i=s.toDate,l=(t=n.captionLayout)!==null&&t!==void 0?t:r.captionLayout;l!=="buttons"&&(!a||!i)&&(l="buttons");var c;(C4(n)||Pw(n)||Lw(n))&&(c=n.onSelect);var u=$t($t($t({},r),n),{captionLayout:l,classNames:$t($t({},r.classNames),n.classNames),components:$t({},n.components),formatters:$t($t({},r.formatters),n.formatters),fromDate:a,labels:$t($t({},r.labels),n.labels),mode:n.mode||r.mode,modifiers:$t($t({},r.modifiers),n.modifiers),modifiersClassNames:$t($t({},r.modifiersClassNames),n.modifiersClassNames),onSelect:c,styles:$t($t({},r.styles),n.styles),toDate:i});return I.createElement(YNe.Provider,{value:u},e.children)}function wr(){var e=d.useContext(YNe);if(!e)throw new Error("useDayPicker must be used within a DayPickerProvider.");return e}function QNe(e){var t=wr(),n=t.locale,r=t.classNames,s=t.styles,a=t.formatters.formatCaption;return I.createElement("div",{className:r.caption_label,style:s.caption_label,"aria-live":"polite",role:"presentation",id:e.id},a(e.displayMonth,{locale:n}))}function mVt(e){return I.createElement("svg",$t({width:"8px",height:"8px",viewBox:"0 0 120 120","data-testid":"iconDropdown"},e),I.createElement("path",{d:"M4.22182541,48.2218254 C8.44222828,44.0014225 15.2388494,43.9273804 19.5496459,47.9996989 L19.7781746,48.2218254 L60,88.443 L100.221825,48.2218254 C104.442228,44.0014225 111.238849,43.9273804 115.549646,47.9996989 L115.778175,48.2218254 C119.998577,52.4422283 120.07262,59.2388494 116.000301,63.5496459 L115.778175,63.7781746 L67.7781746,111.778175 C63.5577717,115.998577 56.7611506,116.07262 52.4503541,112.000301 L52.2218254,111.778175 L4.22182541,63.7781746 C-0.0739418023,59.4824074 -0.0739418023,52.5175926 4.22182541,48.2218254 Z",fill:"currentColor",fillRule:"nonzero"}))}function XNe(e){var t,n,r=e.onChange,s=e.value,a=e.children,i=e.caption,l=e.className,c=e.style,u=wr(),f=(n=(t=u.components)===null||t===void 0?void 0:t.IconDropdown)!==null&&n!==void 0?n:mVt;return I.createElement("div",{className:l,style:c},I.createElement("span",{className:u.classNames.vhidden},e["aria-label"]),I.createElement("select",{name:e.name,"aria-label":e["aria-label"],className:u.classNames.dropdown,style:u.styles.dropdown,value:s,onChange:r},a),I.createElement("div",{className:u.classNames.caption_label,style:u.styles.caption_label,"aria-hidden":"true"},i,I.createElement(f,{className:u.classNames.dropdown_icon,style:u.styles.dropdown_icon})))}function pVt(e){var t,n=wr(),r=n.fromDate,s=n.toDate,a=n.styles,i=n.locale,l=n.formatters.formatMonthCaption,c=n.classNames,u=n.components,f=n.labels.labelMonthDropdown;if(!r)return I.createElement(I.Fragment,null);if(!s)return I.createElement(I.Fragment,null);var m=[];if(Gve(r,s))for(var p=go(r),h=r.getMonth();h<=s.getMonth();h++)m.push(D6(p,h));else for(var p=go(new Date),h=0;h<=11;h++)m.push(D6(p,h));var g=function(x){var v=Number(x.target.value),b=D6(go(e.displayMonth),v);e.onChange(b)},y=(t=u?.Dropdown)!==null&&t!==void 0?t:XNe;return I.createElement(y,{name:"months","aria-label":f(),className:c.dropdown_month,style:a.dropdown_month,onChange:g,value:e.displayMonth.getMonth(),caption:l(e.displayMonth,{locale:i})},m.map(function(x){return I.createElement("option",{key:x.getMonth(),value:x.getMonth()},l(x,{locale:i}))}))}function hVt(e){var t,n=e.displayMonth,r=wr(),s=r.fromDate,a=r.toDate,i=r.locale,l=r.styles,c=r.classNames,u=r.components,f=r.formatters.formatYearCaption,m=r.labels.labelYearDropdown,p=[];if(!s)return I.createElement(I.Fragment,null);if(!a)return I.createElement(I.Fragment,null);for(var h=s.getFullYear(),g=a.getFullYear(),y=h;y<=g;y++)p.push(RZ(Pct(new Date),y));var x=function(b){var _=RZ(go(n),Number(b.target.value));e.onChange(_)},v=(t=u?.Dropdown)!==null&&t!==void 0?t:XNe;return I.createElement(v,{name:"years","aria-label":m(),className:c.dropdown_year,style:l.dropdown_year,onChange:x,value:n.getFullYear(),caption:f(n,{locale:i})},p.map(function(b){return I.createElement("option",{key:b.getFullYear(),value:b.getFullYear()},f(b,{locale:i}))}))}function gVt(e,t){var n=d.useState(e),r=n[0],s=n[1],a=t===void 0?r:t;return[a,s]}function yVt(e){var t=e.month,n=e.defaultMonth,r=e.today,s=t||n||r||new Date,a=e.toDate,i=e.fromDate,l=e.numberOfMonths,c=l===void 0?1:l;if(a&&Qg(a,s)<0){var u=-1*(c-1);s=al(a,u)}return i&&Qg(s,i)<0&&(s=i),go(s)}function xVt(){var e=wr(),t=yVt(e),n=gVt(t,e.month),r=n[0],s=n[1],a=function(i){var l;if(!e.disableNavigation){var c=go(i);s(c),(l=e.onMonthChange)===null||l===void 0||l.call(e,c)}};return[r,a]}function vVt(e,t){for(var n=t.reverseMonths,r=t.numberOfMonths,s=go(e),a=go(al(s,r)),i=Qg(a,s),l=[],c=0;c<i;c++){var u=al(s,c);l.push(u)}return n&&(l=l.reverse()),l}function bVt(e,t){if(!t.disableNavigation){var n=t.toDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,i=r?a:1,l=go(e);if(!n)return al(l,i);var c=Qg(n,e);if(!(c<a))return al(l,i)}}function _Vt(e,t){if(!t.disableNavigation){var n=t.fromDate,r=t.pagedNavigation,s=t.numberOfMonths,a=s===void 0?1:s,i=r?a:1,l=go(e);if(!n)return al(l,-i);var c=Qg(l,n);if(!(c<=0))return al(l,-i)}}var ZNe=d.createContext(void 0);function wVt(e){var t=wr(),n=xVt(),r=n[0],s=n[1],a=vVt(r,t),i=bVt(r,t),l=_Vt(r,t),c=function(m){return a.some(function(p){return mB(m,p)})},u=function(m,p){c(m)||(p&&Hve(m,p)?s(al(m,1+t.numberOfMonths*-1)):s(m))},f={currentMonth:r,displayMonths:a,goToMonth:s,goToDate:u,previousMonth:l,nextMonth:i,isDateDisplayed:c};return I.createElement(ZNe.Provider,{value:f},e.children)}function Ow(){var e=d.useContext(ZNe);if(!e)throw new Error("useNavigation must be used within a NavigationProvider");return e}function Woe(e){var t,n=wr(),r=n.classNames,s=n.styles,a=n.components,i=Ow().goToMonth,l=function(f){i(f)},c=(t=a?.CaptionLabel)!==null&&t!==void 0?t:QNe,u=I.createElement(c,{id:e.id,displayMonth:e.displayMonth});return I.createElement("div",{className:r.caption_dropdowns,style:s.caption_dropdowns},I.createElement("div",{className:r.vhidden},u),I.createElement(pVt,{onChange:l,displayMonth:e.displayMonth}),I.createElement(hVt,{onChange:l,displayMonth:e.displayMonth}))}function CVt(e){return I.createElement("svg",$t({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),I.createElement("path",{d:"M69.490332,3.34314575 C72.6145263,0.218951416 77.6798462,0.218951416 80.8040405,3.34314575 C83.8617626,6.40086786 83.9268205,11.3179931 80.9992143,14.4548388 L80.8040405,14.6568542 L35.461,60 L80.8040405,105.343146 C83.8617626,108.400868 83.9268205,113.317993 80.9992143,116.454839 L80.8040405,116.656854 C77.7463184,119.714576 72.8291931,119.779634 69.6923475,116.852028 L69.490332,116.656854 L18.490332,65.6568542 C15.4326099,62.5991321 15.367552,57.6820069 18.2951583,54.5451612 L18.490332,54.3431458 L69.490332,3.34314575 Z",fill:"currentColor",fillRule:"nonzero"}))}function SVt(e){return I.createElement("svg",$t({width:"16px",height:"16px",viewBox:"0 0 120 120"},e),I.createElement("path",{d:"M49.8040405,3.34314575 C46.6798462,0.218951416 41.6145263,0.218951416 38.490332,3.34314575 C35.4326099,6.40086786 35.367552,11.3179931 38.2951583,14.4548388 L38.490332,14.6568542 L83.8333725,60 L38.490332,105.343146 C35.4326099,108.400868 35.367552,113.317993 38.2951583,116.454839 L38.490332,116.656854 C41.5480541,119.714576 46.4651794,119.779634 49.602025,116.852028 L49.8040405,116.656854 L100.804041,65.6568542 C103.861763,62.5991321 103.926821,57.6820069 100.999214,54.5451612 L100.804041,54.3431458 L49.8040405,3.34314575 Z",fill:"currentColor"}))}var Sk=d.forwardRef(function(e,t){var n=wr(),r=n.classNames,s=n.styles,a=[r.button_reset,r.button];e.className&&a.push(e.className);var i=a.join(" "),l=$t($t({},s.button_reset),s.button);return e.style&&Object.assign(l,e.style),I.createElement("button",$t({},e,{ref:t,type:"button",className:i,style:l}))});function EVt(e){var t,n,r=wr(),s=r.dir,a=r.locale,i=r.classNames,l=r.styles,c=r.labels,u=c.labelPrevious,f=c.labelNext,m=r.components;if(!e.nextMonth&&!e.previousMonth)return I.createElement(I.Fragment,null);var p=u(e.previousMonth,{locale:a}),h=[i.nav_button,i.nav_button_previous].join(" "),g=f(e.nextMonth,{locale:a}),y=[i.nav_button,i.nav_button_next].join(" "),x=(t=m?.IconRight)!==null&&t!==void 0?t:SVt,v=(n=m?.IconLeft)!==null&&n!==void 0?n:CVt;return I.createElement("div",{className:i.nav,style:l.nav},!e.hidePrevious&&I.createElement(Sk,{name:"previous-month","aria-label":p,className:h,style:l.nav_button_previous,disabled:!e.previousMonth,onClick:e.onPreviousClick},s==="rtl"?I.createElement(x,{className:i.nav_icon,style:l.nav_icon}):I.createElement(v,{className:i.nav_icon,style:l.nav_icon})),!e.hideNext&&I.createElement(Sk,{name:"next-month","aria-label":g,className:y,style:l.nav_button_next,disabled:!e.nextMonth,onClick:e.onNextClick},s==="rtl"?I.createElement(v,{className:i.nav_icon,style:l.nav_icon}):I.createElement(x,{className:i.nav_icon,style:l.nav_icon})))}function Hoe(e){var t=wr().numberOfMonths,n=Ow(),r=n.previousMonth,s=n.nextMonth,a=n.goToMonth,i=n.displayMonths,l=i.findIndex(function(g){return mB(e.displayMonth,g)}),c=l===0,u=l===i.length-1,f=t>1&&(c||!u),m=t>1&&(u||!c),p=function(){r&&a(r)},h=function(){s&&a(s)};return I.createElement(EVt,{displayMonth:e.displayMonth,hideNext:f,hidePrevious:m,nextMonth:s,previousMonth:r,onPreviousClick:p,onNextClick:h})}function MVt(e){var t,n=wr(),r=n.classNames,s=n.disableNavigation,a=n.styles,i=n.captionLayout,l=n.components,c=(t=l?.CaptionLabel)!==null&&t!==void 0?t:QNe,u;return s?u=I.createElement(c,{id:e.id,displayMonth:e.displayMonth}):i==="dropdown"?u=I.createElement(Woe,{displayMonth:e.displayMonth,id:e.id}):i==="dropdown-buttons"?u=I.createElement(I.Fragment,null,I.createElement(Woe,{displayMonth:e.displayMonth,id:e.id}),I.createElement(Hoe,{displayMonth:e.displayMonth,id:e.id})):u=I.createElement(I.Fragment,null,I.createElement(c,{id:e.id,displayMonth:e.displayMonth}),I.createElement(Hoe,{displayMonth:e.displayMonth,id:e.id})),I.createElement("div",{className:r.caption,style:a.caption},u)}function kVt(e){var t=wr(),n=t.footer,r=t.styles,s=t.classNames.tfoot;return n?I.createElement("tfoot",{className:s,style:r.tfoot},I.createElement("tr",null,I.createElement("td",{colSpan:8},n))):I.createElement(I.Fragment,null)}function TVt(e,t,n){for(var r=n?Vm(new Date):pc(new Date,{locale:e,weekStartsOn:t}),s=[],a=0;a<7;a++){var i=Gs(r,a);s.push(i)}return s}function NVt(){var e=wr(),t=e.classNames,n=e.styles,r=e.showWeekNumber,s=e.locale,a=e.weekStartsOn,i=e.ISOWeek,l=e.formatters.formatWeekdayName,c=e.labels.labelWeekday,u=TVt(s,a,i);return I.createElement("tr",{style:n.head_row,className:t.head_row},r&&I.createElement("td",{style:n.head_cell,className:t.head_cell}),u.map(function(f,m){return I.createElement("th",{key:m,scope:"col",className:t.head_cell,style:n.head_cell,"aria-label":c(f,{locale:s})},l(f,{locale:s}))}))}function jVt(){var e,t=wr(),n=t.classNames,r=t.styles,s=t.components,a=(e=s?.HeadRow)!==null&&e!==void 0?e:NVt;return I.createElement("thead",{style:r.head,className:n.head},I.createElement(a,null))}function AVt(e){var t=wr(),n=t.locale,r=t.formatters.formatDay;return I.createElement(I.Fragment,null,r(e.date,{locale:n}))}var TH=d.createContext(void 0);function IVt(e){if(!Pw(e.initialProps)){var t={selected:void 0,modifiers:{disabled:[]}};return I.createElement(TH.Provider,{value:t},e.children)}return I.createElement(RVt,{initialProps:e.initialProps,children:e.children})}function RVt(e){var t=e.initialProps,n=e.children,r=t.selected,s=t.min,a=t.max,i=function(u,f,m){var p,h;(p=t.onDayClick)===null||p===void 0||p.call(t,u,f,m);var g=!!(f.selected&&s&&r?.length===s);if(!g){var y=!!(!f.selected&&a&&r?.length===a);if(!y){var x=r?KNe([],r):[];if(f.selected){var v=x.findIndex(function(b){return qs(u,b)});x.splice(v,1)}else x.push(u);(h=t.onSelect)===null||h===void 0||h.call(t,x,u,f,m)}}},l={disabled:[]};r&&l.disabled.push(function(u){var f=a&&r.length>a-1,m=r.some(function(p){return qs(p,u)});return!!(f&&!m)});var c={selected:r,onDayClick:i,modifiers:l};return I.createElement(TH.Provider,{value:c},n)}function NH(){var e=d.useContext(TH);if(!e)throw new Error("useSelectMultiple must be used within a SelectMultipleProvider");return e}function PVt(e,t){var n=t||{},r=n.from,s=n.to;if(!r)return{from:e,to:void 0};if(!s&&qs(r,e))return{from:r,to:e};if(!s&&Hve(e,r))return{from:e,to:r};if(!s)return{from:r,to:e};if(!(qs(s,e)&&qs(r,e))){if(qs(s,e))return{from:s,to:void 0};if(!qs(r,e))return Wve(r,e)?{from:e,to:s}:{from:r,to:e}}}var jH=d.createContext(void 0);function LVt(e){if(!Lw(e.initialProps)){var t={selected:void 0,modifiers:{range_start:[],range_end:[],range_middle:[],disabled:[]}};return I.createElement(jH.Provider,{value:t},e.children)}return I.createElement(OVt,{initialProps:e.initialProps,children:e.children})}function OVt(e){var t=e.initialProps,n=e.children,r=t.selected,s=r||{},a=s.from,i=s.to,l=t.min,c=t.max,u=function(h,g,y){var x,v;(x=t.onDayClick)===null||x===void 0||x.call(t,h,g,y);var b=PVt(h,r);(v=t.onSelect)===null||v===void 0||v.call(t,b,h,g,y)},f={range_start:[],range_end:[],range_middle:[],disabled:[]};if(a&&(f.range_start=[a],i?(f.range_end=[i],qs(a,i)||(f.range_middle=[{after:a,before:i}])):f.range_end=[a]),l&&(a&&!i&&f.disabled.push({after:S8(a,l-1),before:Gs(a,l-1)}),a&&i&&f.disabled.push({after:a,before:Gs(a,l-1)})),c&&(a&&!i&&(f.disabled.push({before:Gs(a,-c+1)}),f.disabled.push({after:Gs(a,c-1)})),a&&i)){var m=$l(i,a)+1,p=c-m;f.disabled.push({before:S8(a,p)}),f.disabled.push({after:Gs(i,p)})}return I.createElement(jH.Provider,{value:{selected:r,onDayClick:u,modifiers:f}},n)}function AH(){var e=d.useContext(jH);if(!e)throw new Error("useSelectRange must be used within a SelectRangeProvider");return e}function V2(e){return Array.isArray(e)?KNe([],e):e!==void 0?[e]:[]}function DVt(e){var t={};return Object.entries(e).forEach(function(n){var r=n[0],s=n[1];t[r]=V2(s)}),t}var fl;(function(e){e.Outside="outside",e.Disabled="disabled",e.Selected="selected",e.Hidden="hidden",e.Today="today",e.RangeStart="range_start",e.RangeEnd="range_end",e.RangeMiddle="range_middle"})(fl||(fl={}));var FVt=fl.Selected,zc=fl.Disabled,UVt=fl.Hidden,BVt=fl.Today,gR=fl.RangeEnd,yR=fl.RangeMiddle,xR=fl.RangeStart,$Vt=fl.Outside;function VVt(e,t,n){var r,s=(r={},r[FVt]=V2(e.selected),r[zc]=V2(e.disabled),r[UVt]=V2(e.hidden),r[BVt]=[e.today],r[gR]=[],r[yR]=[],r[xR]=[],r[$Vt]=[],r);return e.fromDate&&s[zc].push({before:e.fromDate}),e.toDate&&s[zc].push({after:e.toDate}),Pw(e)?s[zc]=s[zc].concat(t.modifiers[zc]):Lw(e)&&(s[zc]=s[zc].concat(n.modifiers[zc]),s[xR]=n.modifiers[xR],s[yR]=n.modifiers[yR],s[gR]=n.modifiers[gR]),s}var JNe=d.createContext(void 0);function WVt(e){var t=wr(),n=NH(),r=AH(),s=VVt(t,n,r),a=DVt(t.modifiers),i=$t($t({},s),a);return I.createElement(JNe.Provider,{value:i},e.children)}function eje(){var e=d.useContext(JNe);if(!e)throw new Error("useModifiers must be used within a ModifiersProvider");return e}function HVt(e){return!!(e&&typeof e=="object"&&"before"in e&&"after"in e)}function zVt(e){return!!(e&&typeof e=="object"&&"from"in e)}function GVt(e){return!!(e&&typeof e=="object"&&"after"in e)}function qVt(e){return!!(e&&typeof e=="object"&&"before"in e)}function KVt(e){return!!(e&&typeof e=="object"&&"dayOfWeek"in e)}function YVt(e,t){var n,r=t.from,s=t.to;if(!r)return!1;if(!s&&qs(r,e))return!0;if(!s)return!1;var a=$l(s,r)<0;a&&(n=[s,r],r=n[0],s=n[1]);var i=$l(e,r)>=0&&$l(s,e)>=0;return i}function QVt(e){return cB(e)}function XVt(e){return Array.isArray(e)&&e.every(cB)}function ZVt(e,t){return t.some(function(n){if(typeof n=="boolean")return n;if(QVt(n))return qs(e,n);if(XVt(n))return n.includes(e);if(zVt(n))return YVt(e,n);if(KVt(n))return n.dayOfWeek.includes(e.getDay());if(HVt(n)){var r=$l(n.before,e),s=$l(n.after,e),a=r>0,i=s<0,l=Wve(n.before,n.after);return l?i&&a:a||i}return GVt(n)?$l(e,n.after)>0:qVt(n)?$l(n.before,e)>0:typeof n=="function"?n(e):!1})}function IH(e,t,n){var r=Object.keys(t).reduce(function(a,i){var l=t[i];return ZVt(e,l)&&a.push(i),a},[]),s={};return r.forEach(function(a){return s[a]=!0}),n&&!mB(e,n)&&(s.outside=!0),s}function JVt(e,t){for(var n=go(e[0]),r=C3(e[e.length-1]),s,a,i=n;i<=r;){var l=IH(i,t),c=!l.disabled&&!l.hidden;if(!c){i=Gs(i,1);continue}if(l.selected)return i;l.today&&!a&&(a=i),s||(s=i),i=Gs(i,1)}return a||s}var eWt=365;function tje(e,t){var n=t.moveBy,r=t.direction,s=t.context,a=t.modifiers,i=t.retry,l=i===void 0?{count:0,lastFocused:e}:i,c=s.weekStartsOn,u=s.fromDate,f=s.toDate,m=s.locale,p={day:Gs,week:WE,month:al,year:hct,startOfWeek:function(x){return s.ISOWeek?Vm(x):pc(x,{locale:m,weekStartsOn:c})},endOfWeek:function(x){return s.ISOWeek?Fve(x):fB(x,{locale:m,weekStartsOn:c})}},h=p[n](e,r==="after"?1:-1);r==="before"&&u?h=gct([u,h]):r==="after"&&f&&(h=yct([f,h]));var g=!0;if(a){var y=IH(h,a);g=!y.disabled&&!y.hidden}return g?h:l.count>eWt?l.lastFocused:tje(h,{moveBy:n,direction:r,context:s,modifiers:a,retry:$t($t({},l),{count:l.count+1})})}var nje=d.createContext(void 0);function tWt(e){var t=Ow(),n=eje(),r=d.useState(),s=r[0],a=r[1],i=d.useState(),l=i[0],c=i[1],u=JVt(t.displayMonths,n),f=s??(l&&t.isDateDisplayed(l))?l:u,m=function(){c(s),a(void 0)},p=function(x){a(x)},h=wr(),g=function(x,v){if(s){var b=tje(s,{moveBy:x,direction:v,context:h,modifiers:n});qs(s,b)||(t.goToDate(b,s),p(b))}},y={focusedDay:s,focusTarget:f,blur:m,focus:p,focusDayAfter:function(){return g("day","after")},focusDayBefore:function(){return g("day","before")},focusWeekAfter:function(){return g("week","after")},focusWeekBefore:function(){return g("week","before")},focusMonthBefore:function(){return g("month","before")},focusMonthAfter:function(){return g("month","after")},focusYearBefore:function(){return g("year","before")},focusYearAfter:function(){return g("year","after")},focusStartOfWeek:function(){return g("startOfWeek","before")},focusEndOfWeek:function(){return g("endOfWeek","after")}};return I.createElement(nje.Provider,{value:y},e.children)}function RH(){var e=d.useContext(nje);if(!e)throw new Error("useFocusContext must be used within a FocusProvider");return e}function nWt(e,t){var n=eje(),r=IH(e,n,t);return r}var PH=d.createContext(void 0);function rWt(e){if(!C4(e.initialProps)){var t={selected:void 0};return I.createElement(PH.Provider,{value:t},e.children)}return I.createElement(sWt,{initialProps:e.initialProps,children:e.children})}function sWt(e){var t=e.initialProps,n=e.children,r=function(a,i,l){var c,u,f;if((c=t.onDayClick)===null||c===void 0||c.call(t,a,i,l),i.selected&&!t.required){(u=t.onSelect)===null||u===void 0||u.call(t,void 0,a,i,l);return}(f=t.onSelect)===null||f===void 0||f.call(t,a,a,i,l)},s={selected:t.selected,onDayClick:r};return I.createElement(PH.Provider,{value:s},n)}function rje(){var e=d.useContext(PH);if(!e)throw new Error("useSelectSingle must be used within a SelectSingleProvider");return e}function aWt(e,t){var n=wr(),r=rje(),s=NH(),a=AH(),i=RH(),l=i.focusDayAfter,c=i.focusDayBefore,u=i.focusWeekAfter,f=i.focusWeekBefore,m=i.blur,p=i.focus,h=i.focusMonthBefore,g=i.focusMonthAfter,y=i.focusYearBefore,x=i.focusYearAfter,v=i.focusStartOfWeek,b=i.focusEndOfWeek,_=function(N){var L,U,$,V;C4(n)?(L=r.onDayClick)===null||L===void 0||L.call(r,e,t,N):Pw(n)?(U=s.onDayClick)===null||U===void 0||U.call(s,e,t,N):Lw(n)?($=a.onDayClick)===null||$===void 0||$.call(a,e,t,N):(V=n.onDayClick)===null||V===void 0||V.call(n,e,t,N)},w=function(N){var L;p(e),(L=n.onDayFocus)===null||L===void 0||L.call(n,e,t,N)},C=function(N){var L;m(),(L=n.onDayBlur)===null||L===void 0||L.call(n,e,t,N)},S=function(N){var L;(L=n.onDayMouseEnter)===null||L===void 0||L.call(n,e,t,N)},E=function(N){var L;(L=n.onDayMouseLeave)===null||L===void 0||L.call(n,e,t,N)},k=function(N){var L;(L=n.onDayPointerEnter)===null||L===void 0||L.call(n,e,t,N)},M=function(N){var L;(L=n.onDayPointerLeave)===null||L===void 0||L.call(n,e,t,N)},j=function(N){var L;(L=n.onDayTouchCancel)===null||L===void 0||L.call(n,e,t,N)},R=function(N){var L;(L=n.onDayTouchEnd)===null||L===void 0||L.call(n,e,t,N)},O=function(N){var L;(L=n.onDayTouchMove)===null||L===void 0||L.call(n,e,t,N)},D=function(N){var L;(L=n.onDayTouchStart)===null||L===void 0||L.call(n,e,t,N)},P=function(N){var L;(L=n.onDayKeyUp)===null||L===void 0||L.call(n,e,t,N)},A=function(N){var L;switch(N.key){case"ArrowLeft":N.preventDefault(),N.stopPropagation(),n.dir==="rtl"?l():c();break;case"ArrowRight":N.preventDefault(),N.stopPropagation(),n.dir==="rtl"?c():l();break;case"ArrowDown":N.preventDefault(),N.stopPropagation(),u();break;case"ArrowUp":N.preventDefault(),N.stopPropagation(),f();break;case"PageUp":N.preventDefault(),N.stopPropagation(),N.shiftKey?y():h();break;case"PageDown":N.preventDefault(),N.stopPropagation(),N.shiftKey?x():g();break;case"Home":N.preventDefault(),N.stopPropagation(),v();break;case"End":N.preventDefault(),N.stopPropagation(),b();break}(L=n.onDayKeyDown)===null||L===void 0||L.call(n,e,t,N)},T={onClick:_,onFocus:w,onBlur:C,onKeyDown:A,onKeyUp:P,onMouseEnter:S,onMouseLeave:E,onPointerEnter:k,onPointerLeave:M,onTouchCancel:j,onTouchEnd:R,onTouchMove:O,onTouchStart:D};return T}function oWt(){var e=wr(),t=rje(),n=NH(),r=AH(),s=C4(e)?t.selected:Pw(e)?n.selected:Lw(e)?r.selected:void 0;return s}function iWt(e){return Object.values(fl).includes(e)}function lWt(e,t){var n=[e.classNames.day];return Object.keys(t).forEach(function(r){var s=e.modifiersClassNames[r];if(s)n.push(s);else if(iWt(r)){var a=e.classNames["day_".concat(r)];a&&n.push(a)}}),n}function cWt(e,t){var n=$t({},e.styles.day);return Object.keys(t).forEach(function(r){var s;n=$t($t({},n),(s=e.modifiersStyles)===null||s===void 0?void 0:s[r])}),n}function uWt(e,t,n){var r,s,a,i=wr(),l=RH(),c=nWt(e,t),u=aWt(e,c),f=oWt(),m=!!(i.onDayClick||i.mode!=="default");d.useEffect(function(){var S;c.outside||l.focusedDay&&m&&qs(l.focusedDay,e)&&((S=n.current)===null||S===void 0||S.focus())},[l.focusedDay,e,n,m,c.outside]);var p=lWt(i,c).join(" "),h=cWt(i,c),g=!!(c.outside&&!i.showOutsideDays||c.hidden),y=(a=(s=i.components)===null||s===void 0?void 0:s.DayContent)!==null&&a!==void 0?a:AVt,x=I.createElement(y,{date:e,displayMonth:t,activeModifiers:c}),v={style:h,className:p,children:x,role:"gridcell"},b=l.focusTarget&&qs(l.focusTarget,e)&&!c.outside,_=l.focusedDay&&qs(l.focusedDay,e),w=$t($t($t({},v),(r={disabled:c.disabled,role:"gridcell"},r["aria-selected"]=c.selected,r.tabIndex=_||b?0:-1,r)),u),C={isButton:m,isHidden:g,activeModifiers:c,selectedDays:f,buttonProps:w,divProps:v};return C}function dWt(e){var t=d.useRef(null),n=uWt(e.date,e.displayMonth,t);return n.isHidden?I.createElement("div",{role:"gridcell"}):n.isButton?I.createElement(Sk,$t({name:"day",ref:t},n.buttonProps)):I.createElement("div",$t({},n.divProps))}function fWt(e){var t=e.number,n=e.dates,r=wr(),s=r.onWeekNumberClick,a=r.styles,i=r.classNames,l=r.locale,c=r.labels.labelWeekNumber,u=r.formatters.formatWeekNumber,f=u(Number(t),{locale:l});if(!s)return I.createElement("span",{className:i.weeknumber,style:a.weeknumber},f);var m=c(Number(t),{locale:l}),p=function(h){s(t,n,h)};return I.createElement(Sk,{name:"week-number","aria-label":m,className:i.weeknumber,style:a.weeknumber,onClick:p},f)}function mWt(e){var t,n,r=wr(),s=r.styles,a=r.classNames,i=r.showWeekNumber,l=r.components,c=(t=l?.Day)!==null&&t!==void 0?t:dWt,u=(n=l?.WeekNumber)!==null&&n!==void 0?n:fWt,f;return i&&(f=I.createElement("td",{className:a.cell,style:s.cell},I.createElement(u,{number:e.weekNumber,dates:e.dates}))),I.createElement("tr",{className:a.row,style:s.row},f,e.dates.map(function(m){return I.createElement("td",{className:a.cell,style:s.cell,key:Uut(m),role:"presentation"},I.createElement(c,{displayMonth:e.displayMonth,date:m}))}))}function zoe(e,t,n){for(var r=n?.ISOWeek?Fve(t):fB(t,n),s=n?.ISOWeek?Vm(e):pc(e,n),a=$l(r,s),i=[],l=0;l<=a;l++)i.push(Gs(s,l));var c=i.reduce(function(u,f){var m=n?.ISOWeek?Dut(f):Wut(f,n),p=u.find(function(h){return h.weekNumber===m});return p?(p.dates.push(f),u):(u.push({weekNumber:m,dates:[f]}),u)},[]);return c}function pWt(e,t){var n=zoe(go(e),C3(e),t);if(t?.useFixedWeeks){var r=zut(e,t);if(r<6){var s=n[n.length-1],a=s.dates[s.dates.length-1],i=WE(a,6-r),l=zoe(WE(a,1),i,t);n.push.apply(n,l)}}return n}function hWt(e){var t,n,r,s=wr(),a=s.locale,i=s.classNames,l=s.styles,c=s.hideHead,u=s.fixedWeeks,f=s.components,m=s.weekStartsOn,p=s.firstWeekContainsDate,h=s.ISOWeek,g=pWt(e.displayMonth,{useFixedWeeks:!!u,ISOWeek:h,locale:a,weekStartsOn:m,firstWeekContainsDate:p}),y=(t=f?.Head)!==null&&t!==void 0?t:jVt,x=(n=f?.Row)!==null&&n!==void 0?n:mWt,v=(r=f?.Footer)!==null&&r!==void 0?r:kVt;return I.createElement("table",{className:i.table,style:l.table,role:"grid","aria-labelledby":e["aria-labelledby"]},!c&&I.createElement(y,null),I.createElement("tbody",{className:i.tbody,style:l.tbody,role:"rowgroup"},g.map(function(b){return I.createElement(x,{displayMonth:e.displayMonth,key:b.weekNumber,dates:b.dates,weekNumber:b.weekNumber})})),I.createElement(v,{displayMonth:e.displayMonth}))}function gWt(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}var yWt=gWt()?d.useLayoutEffect:d.useEffect,vR=!1,xWt=0;function Goe(){return"react-day-picker-".concat(++xWt)}function vWt(e){var t,n=e??(vR?Goe():null),r=d.useState(n),s=r[0],a=r[1];return yWt(function(){s===null&&a(Goe())},[]),d.useEffect(function(){vR===!1&&(vR=!0)},[]),(t=e??s)!==null&&t!==void 0?t:void 0}function bWt(e){var t,n,r=wr(),s=r.dir,a=r.classNames,i=r.styles,l=r.components,c=Ow().displayMonths,u=vWt(r.id?"".concat(r.id,"-").concat(e.displayIndex):void 0),f=[a.month],m=i.month,p=e.displayIndex===0,h=e.displayIndex===c.length-1,g=!p&&!h;s==="rtl"&&(t=[p,h],h=t[0],p=t[1]),p&&(f.push(a.caption_start),m=$t($t({},m),i.caption_start)),h&&(f.push(a.caption_end),m=$t($t({},m),i.caption_end)),g&&(f.push(a.caption_between),m=$t($t({},m),i.caption_between));var y=(n=l?.Caption)!==null&&n!==void 0?n:MVt;return I.createElement("div",{key:e.displayIndex,className:f.join(" "),style:m},I.createElement(y,{id:u,displayMonth:e.displayMonth}),I.createElement(hWt,{"aria-labelledby":u,displayMonth:e.displayMonth}))}function _Wt(e){var t=e.initialProps,n=wr(),r=RH(),s=Ow(),a=d.useState(!1),i=a[0],l=a[1];d.useEffect(function(){n.initialFocus&&r.focusTarget&&(i||(r.focus(r.focusTarget),l(!0)))},[n.initialFocus,i,r.focus,r.focusTarget,r]);var c=[n.classNames.root,n.className];n.numberOfMonths>1&&c.push(n.classNames.multiple_months),n.showWeekNumber&&c.push(n.classNames.with_weeknumber);var u=$t($t({},n.styles.root),n.style),f=Object.keys(t).filter(function(m){return m.startsWith("data-")}).reduce(function(m,p){var h;return $t($t({},m),(h={},h[p]=t[p],h))},{});return I.createElement("div",$t({className:c.join(" "),style:u,dir:n.dir,id:n.id},f),I.createElement("div",{className:n.classNames.months,style:n.styles.months},s.displayMonths.map(function(m,p){return I.createElement(bWt,{key:p,displayIndex:p,displayMonth:m})})))}function wWt(e){var t=e.children,n=q$t(e,["children"]);return I.createElement(fVt,{initialProps:n},I.createElement(wVt,null,I.createElement(rWt,{initialProps:n},I.createElement(IVt,{initialProps:n},I.createElement(LVt,{initialProps:n},I.createElement(WVt,null,I.createElement(tWt,null,t)))))))}function CWt(e){return I.createElement(wWt,$t({},e),I.createElement(_Wt,{initialProps:e}))}const sje=I.memo(({className:e,showOutsideDays:t=!0,...n})=>{const r=I.useMemo(()=>({months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-between relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:"h-7 w-7 p-0 rounded hover:bg-subtle flex items-center justify-center bg-subtler [&_*]:fill-quiet",table:"w-full border-collapse",head_row:"flex",head_cell:"text-quiet rounded-md w-8 font-normal text-sm font-mono",row:"flex w-full mt-1",cell:B("relative p-0 text-center text-sm focus-within:relative focus-within:z-20 [&:has([aria-selected].day-range-end)]:rounded-r-full",n.mode==="range"?"[&:has(>.day-range-end)]:rounded-r-full [&:has([aria-selected])]:bg-superBG [&:has(>.day-range-start)]:rounded-l-full first:[&:has([aria-selected])]:rounded-l-full last:[&:has([aria-selected])]:rounded-r-full":"[&:has([aria-selected])]:rounded-md"),day:B("size-8 p-0 font-normal select-none aria-selected:opacity-100 flex items-center justify-center rounded-full hover:bg-subtler cursor-pointer"),day_range_start:"day-range-start",day_range_end:"day-range-end",day_selected:B(n.mode==="range"?"[&.day-range-start]:!bg-super [&.day-range-start]:!text-inverse [&.day-range-start]:hover:!bg-super [&.day-range-end]:!bg-super [&.day-range-end]:!text-inverse [&.day-range-end]:hover:!bg-super":"!bg-super !text-inverse hover:!bg-super"),day_today:"bg-superBG text-super hover:bg-superBG",day_outside:"day-outside text-quiet aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-quiet opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...B}),[n.mode]),s=d.useMemo(()=>({IconLeft:({className:a,...i})=>o.jsx(de,{icon:cp,className:a,size:"sm",...i}),IconRight:({className:a,...i})=>o.jsx(de,{icon:Xn,className:a,size:"sm",...i})}),[]);return o.jsx(CWt,{showOutsideDays:t,className:B("p-3 font-sans text-base",e),classNames:r,components:s,...n})});sje.displayName="Calendar";var S4="Popover",[aje,Tun]=Ca(S4,[cf]),Dw=cf(),[SWt,Sf]=aje(S4),oje=e=>{const{__scopePopover:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:i=!1}=e,l=Dw(t),c=d.useRef(null),[u,f]=d.useState(!1),[m,p]=Ni({prop:r,defaultProp:s??!1,onChange:a,caller:S4});return o.jsx(d5,{...l,children:o.jsx(SWt,{scope:t,contentId:fo(),triggerRef:c,open:m,onOpenChange:p,onOpenToggle:d.useCallback(()=>p(h=>!h),[p]),hasCustomAnchor:u,onCustomAnchorAdd:d.useCallback(()=>f(!0),[]),onCustomAnchorRemove:d.useCallback(()=>f(!1),[]),modal:i,children:n})})};oje.displayName=S4;var ije="PopoverAnchor",EWt=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Sf(ije,n),a=Dw(n),{onCustomAnchorAdd:i,onCustomAnchorRemove:l}=s;return d.useEffect(()=>(i(),()=>l()),[i,l]),o.jsx(i_,{...a,...r,ref:t})});EWt.displayName=ije;var lje="PopoverTrigger",cje=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Sf(lje,n),a=Dw(n),i=En(t,s.triggerRef),l=o.jsx(Xt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":pje(s.open),...r,ref:i,onClick:it(e.onClick,s.onOpenToggle)});return s.hasCustomAnchor?l:o.jsx(i_,{asChild:!0,...a,children:l})});cje.displayName=lje;var LH="PopoverPortal",[MWt,kWt]=aje(LH,{forceMount:void 0}),uje=e=>{const{__scopePopover:t,forceMount:n,children:r,container:s}=e,a=Sf(LH,t);return o.jsx(MWt,{scope:t,forceMount:n,children:o.jsx(es,{present:n||a.open,children:o.jsx(Ky,{asChild:!0,container:s,children:r})})})};uje.displayName=LH;var Ny="PopoverContent",dje=d.forwardRef((e,t)=>{const n=kWt(Ny,e.__scopePopover),{forceMount:r=n.forceMount,...s}=e,a=Sf(Ny,e.__scopePopover);return o.jsx(es,{present:r||a.open,children:a.modal?o.jsx(NWt,{...s,ref:t}):o.jsx(jWt,{...s,ref:t})})});dje.displayName=Ny;var TWt=Rg("PopoverContent.RemoveScroll"),NWt=d.forwardRef((e,t)=>{const n=Sf(Ny,e.__scopePopover),r=d.useRef(null),s=En(t,r),a=d.useRef(!1);return d.useEffect(()=>{const i=r.current;if(i)return GF(i)},[]),o.jsx(K5,{as:TWt,allowPinchZoom:!0,children:o.jsx(fje,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:it(e.onCloseAutoFocus,i=>{i.preventDefault(),a.current||n.triggerRef.current?.focus()}),onPointerDownOutside:it(e.onPointerDownOutside,i=>{const l=i.detail.originalEvent,c=l.button===0&&l.ctrlKey===!0,u=l.button===2||c;a.current=u},{checkForDefaultPrevented:!1}),onFocusOutside:it(e.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1})})})}),jWt=d.forwardRef((e,t)=>{const n=Sf(Ny,e.__scopePopover),r=d.useRef(!1),s=d.useRef(!1);return o.jsx(fje,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{e.onCloseAutoFocus?.(a),a.defaultPrevented||(r.current||n.triggerRef.current?.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{e.onInteractOutside?.(a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const i=a.target;n.triggerRef.current?.contains(i)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),fje=d.forwardRef((e,t)=>{const{__scopePopover:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,disableOutsidePointerEvents:i,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onInteractOutside:f,...m}=e,p=Sf(Ny,n),h=Dw(n);return HF(),o.jsx(G5,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:o.jsx(Gy,{asChild:!0,disableOutsidePointerEvents:i,onInteractOutside:f,onEscapeKeyDown:l,onPointerDownOutside:c,onFocusOutside:u,onDismiss:()=>p.onOpenChange(!1),children:o.jsx(f5,{"data-state":pje(p.open),role:"dialog",id:p.contentId,...h,...m,ref:t,style:{...m.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),mje="PopoverClose",AWt=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Sf(mje,n);return o.jsx(Xt.button,{type:"button",...r,ref:t,onClick:it(e.onClick,()=>s.onOpenChange(!1))})});AWt.displayName=mje;var IWt="PopoverArrow",RWt=d.forwardRef((e,t)=>{const{__scopePopover:n,...r}=e,s=Dw(n);return o.jsx(m5,{...s,...r,ref:t})});RWt.displayName=IWt;function pje(e){return e?"open":"closed"}var PWt=oje,LWt=cje,OWt=uje,DWt=dje;const OH=I.memo(({children:e,content:t,isOpen:n,onClose:r,onOpen:s})=>o.jsxs(PWt,{open:n,onOpenChange:a=>{a?s?.():r?.()},children:[o.jsx(LWt,{asChild:!0,children:e}),o.jsx(OWt,{children:o.jsx(DWt,{asChild:!0,sideOffset:4,side:"bottom",align:"start",children:o.jsx(z,{variant:"background",className:B("p-xs relative rounded-lg border shadow-sm","min-w-[var(--radix-popover-trigger-width)]","data-close:zoom-out-95 data-close:fade-out data-close:animate-out","data-open:duration-150 data-open:ease-in-out data-open:animate-in data-open:fade-in data-open:zoom-in-95"),children:t})})})]}));OH.displayName="Popover";const FWt=e=>e.toLocaleDateString();function Ek({value:e,onChange:t,placeholder:n="Select date",formatDate:r=FWt,showIcon:s=!0,buttonClassName:a,variant:i="default",trailingIcon:l,fromDate:c,endDate:u}){const[f,m]=d.useState(!1),p=()=>{m(!f)},h=x=>{t(x),m(!1)},g=d.useMemo(()=>{const x=new Date;return x.setHours(0,0,0,0),x},[]),y=(()=>{switch(i){case"subtle":return"bg-subtle";case"default":return"bg-subtler";default:Qt(i)}})();return o.jsx("div",{className:"relative size-full",children:o.jsx(OH,{isOpen:f,onOpen:()=>m(!0),onClose:()=>m(!1),content:o.jsx(sje,{mode:"single",selected:e,onSelect:h,disabled:[{before:c??g,after:u}],fromDate:c??g}),children:o.jsxs("div",{role:"button",tabIndex:0,onClick:()=>p(),className:B(y,"flex cursor-pointer items-center justify-between rounded-lg px-4 font-sans","hover:border-subtler focus:border-subtler border border-transparent","transition-colors duration-200 ease-out","size-full","outline-none focus:outline-none focus:ring-0",a),children:[o.jsxs("div",{className:"flex items-center gap-2",children:[s&&o.jsx(Vb,{size:16,className:"text-foreground"}),o.jsx("span",{className:"text-foreground text-sm",children:e?r(e):n})]}),l]})})})}const qoe=({hour:e,minute:t})=>`${e%12||12}:${t.toString().padStart(2,"0")} ${e>=12?"PM":"AM"}`,Koe=e=>{const t=e.trim().match(/^((?:0?[1-9]|1[0-2])):([0-5]\d)\s*([ap]m)$/i);if(!t||t.length!==4)return null;const n=parseInt(t[1]??"",10),r=parseInt(t[2]??"",10);if(isNaN(n)||isNaN(r))return null;const s=t[3]?.toLowerCase();return s==="pm"&&n!==12?{hour:n+12,minute:r}:s==="am"&&n===12?{hour:0,minute:r}:{hour:n,minute:r}},UWt=(e,t)=>e.hour===t.hour&&e.minute===t.minute,BWt=Array.from({length:48},(e,t)=>({hour:Math.floor(t/2),minute:t%2*30}));function $Wt({value:e,onChange:t,placeholder:n="Select time",variant:r="default",withIcon:s}){const[a,i]=d.useState(""),[l,c]=d.useState(!1),u=d.useRef(null),f=a.trim()!==""&&!Koe(a),m=d.useRef(null),p=e?qoe(e):n,h=d.useMemo(()=>BWt.map(C=>({key:`${C.hour}:${C.minute}`,label:qoe(C),value:C})),[]),g=d.useCallback(C=>{C&&l&&e&&m.current&&m.current?.scrollIntoView({behavior:"instant",block:"start"})},[l,e]),y=()=>{const C=Koe(a);C&&t(C),i("")},x=C=>{t(C),i(""),c(!1)},v=()=>{c(!l)},b=()=>{c(!l),setTimeout(()=>{u.current&&u.current.focus()},0)},_=(()=>{switch(r){case"subtle":return"bg-subtle";case"default":return"bg-subtler";default:Qt(r)}})(),w=d.useMemo(()=>o.jsx(de,{icon:mp,size:"sm"}),[]);return o.jsx("div",{className:"relative size-full",children:o.jsx(OH,{isOpen:l,onOpen:()=>c(!0),onClose:()=>c(!1),content:o.jsx("div",{ref:g,className:"p-xs scrollbar-subtle max-h-64 overflow-y-auto",children:h.map(C=>o.jsx("div",{ref:e&&UWt(C.value,e)?m:null,role:"button",tabIndex:0,onClick:()=>x(C.value),className:B("px-sm text-foreground cursor-pointer rounded-lg py-1.5","hover:bg-subtler"),children:o.jsx(F,{variant:"extraSmall",children:C.label})},C.key))}),children:o.jsxs("div",{role:"button",tabIndex:0,onClick:v,className:B(_,"text-foreground flex size-full cursor-pointer items-center gap-2 rounded-lg px-4 font-sans","border transition-colors duration-200 ease-out","outline-none focus:outline-none focus:ring-0","hover:border-subtler focus-within:border-subtler border-transparent",{"!border-negative":f}),children:[s&&w,o.jsx("input",{ref:u,type:"text",value:a||p,placeholder:n,onChange:C=>i(C.target.value),onBlur:y,onClick:b,className:"w-full bg-transparent text-sm focus:outline-none"}),o.jsx(de,{size:"xs",icon:Wn,className:"right-sm pointer-events-none absolute text-inherit opacity-50"})]})})})}const jy=d.memo(({children:e})=>o.jsx("div",{className:"min-w-0 flex-1 rounded-md",children:e}));jy.displayName="InputWrapper";const p0=d.memo(({options:e,value:t,onChange:n,isMobileStyle:r,variant:s="default"})=>{const a=Z(),i=d.useMemo(()=>e.map(p=>({type:"default",text:p.label,onClick:()=>n(p.value),active:p.value===t,role:"menuitemradio"})),[n,e,t]),c=d.useMemo(()=>e.find(p=>p.value===t),[e,t])?.label||a.formatMessage({defaultMessage:"Select...",id:"724CrE1YuG"}),u=d.useMemo(()=>({className:"w-full"}),[]),f=d.useMemo(()=>({matchTargetWidth:!0,avoidPositionCollisions:!1}),[]),m=(()=>{switch(s){case"subtle":return"";case"default":return"!bg-subtler";default:Qt(s)}})();return o.jsx(jy,{children:o.jsx(nn,{items:i,isMobileStyle:r,placement:"bottom",contentClassName:"w-full",boxProps:u,popoverProps:f,children:o.jsx(me,{text:c,extraCSS:B("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",m),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Wn})})})});p0.displayName="FormSelect";const DH=d.memo(({schedule:e,onScheduleChange:t,variant:n="default"})=>{const{formatMessage:r}=Z(),{isMobileStyle:s}=xe(),a=d.useMemo(()=>new Date(e.year,e.month,e.day,e.hour,e.minute),[e.year,e.month,e.day,e.hour,e.minute]),{kind:i}=e,l=i==="ONCE",c=i==="WEEKLY",u=i==="MONTHLY"||i==="YEARLY",f=i==="YEARLY",m=d.useCallback(b=>{t({kind:b})},[t]),p=d.useCallback(b=>{t({dayOfWeek:parseInt(b,10)})},[t]),h=d.useCallback(b=>{t({month:parseInt(b,10)})},[t]),g=d.useCallback(b=>{t({day:parseInt(b,10)})},[t]),y=d.useCallback(b=>{b&&t({day:b.getDate(),month:b.getMonth(),year:b.getFullYear()})},[t]),x=d.useCallback(b=>{t({hour:b.hour,minute:b.minute})},[t]),v=d.useMemo(()=>({hour:e.hour,minute:e.minute}),[e.hour,e.minute]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:r({defaultMessage:"Schedule",id:"hGQqkWwmJD"})}),o.jsxs("div",{className:"flex h-10 flex-wrap gap-3",children:[o.jsx(p0,{options:W$t,value:e.kind,onChange:m,isMobileStyle:s,variant:n}),c&&o.jsx(p0,{options:H$t,value:String(e.dayOfWeek),onChange:p,isMobileStyle:s,variant:n}),f&&o.jsx(p0,{options:G$t,value:String(e.month),onChange:h,isMobileStyle:s,variant:n}),u&&o.jsx(p0,{options:z$t,value:String(e.day),onChange:g,isMobileStyle:s,variant:n}),l&&o.jsx(jy,{children:o.jsx(Ek,{value:a,onChange:y,variant:n})}),o.jsx(jy,{children:o.jsx($Wt,{value:v,onChange:x,variant:n})})]})]})});DH.displayName="ScheduleSelect";const VWt=Qe({selectModel:{defaultMessage:"Select model...",id:"XZsGHYyuKM"}}),WWt=({selectedModel:e,onModelChange:t,variant:n="default"})=>{const r="task-modal-model-selector",s=e||le.PRO,{$t:a}=Z(),{isMobileStyle:i}=xe(),{isSearchModelReasoningToggleEnabled:l}=TMe(),{selectOptions:c}=AMe({reason:r,selectedSearchMode:ue.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),{menuItems:u}=RMe({searchMode:ue.SEARCH,currentModel:s,onModelSelect:g=>{t?.(g)}}),f=d.useMemo(()=>c.map(g=>({type:"default",text:g.label,onClick:()=>t?.(g.value),active:g.value===s})),[c,s,t]),m=d.useMemo(()=>l?u:f,[l,u,f]),p=Fn[s].name||VWt.selectModel,h=(()=>{switch(n){case"subtle":return"bg-subtle";case"default":return"!bg-subtler";default:Qt(n)}})();return o.jsx(nn,{items:m,isMobileStyle:i,placement:"bottom",contentClassName:"w-full",boxProps:{className:"w-full"},popoverProps:{matchTargetWidth:!0,avoidPositionCollisions:!1},children:o.jsx(me,{text:a(p),extraCSS:B("px-4 size-full !h-10 border-0 !outline-none !justify-start font-normal",h),textClassName:"text-left text-foreground text-sm font-normal",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Wn})})};function HWt(e,t){if(e.includes(t)){let n=e.filter(r=>r!==t);return t==="web"&&e.includes("crunchbase")&&(n=n.filter(r=>r!=="crunchbase")),n}else{const n=[...e];return t==="crunchbase"&&!n.includes("web")&&n.push("web"),n.push(t),n}}function zWt({sources:e,onChange:t,variant:n="default"}){const[r,s]=d.useState(!1),a=d.useCallback(i=>{const l=HWt(e,i);t(l)},[t,e]);return o.jsx(kW,{isOpen:r,onOpen:()=>s(!0),onClose:()=>s(!1),selectedSources:e,onSourcesChange:a,variant:"button",buttonVariant:n,hiddenSources:[Dl.org,Dl.google_drive,Dl.onedrive,Dl.sharepoint,Dl.my_files],allowCometRestrictions:!1})}const E4=d.memo(({searchModel:e,onSearchModelChange:t,sources:n,onSourcesChange:r,variant:s="default"})=>{const a=vo[e]??ue.SEARCH,{hasActiveSubscription:i}=St();return o.jsx("div",{className:"flex w-full flex-col gap-2",children:o.jsxs("div",{className:"flex gap-3",children:[i&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(ie,{defaultMessage:"Mode",id:"mrOnjMzgC4"})}),o.jsx("div",{className:"h-full w-fit",children:o.jsx(EW,{value:e,onChange:t,layoutKey:"task-modal",className:"h-full",variant:s,buttonSize:"regular"})})]}),i&&a===ue.SEARCH&&o.jsxs("div",{className:"flex min-w-[100px] flex-1 flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(ie,{defaultMessage:"Model",id:"rhSI1/3g21"})}),o.jsx(jy,{children:o.jsx(WWt,{selectedModel:e,onModelChange:t,variant:s})})]}),i&&o.jsxs("div",{className:"flex min-w-[100px] flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(ie,{defaultMessage:"Sources",id:"fhwTpAcBLC"})}),o.jsx(jy,{children:o.jsx(zWt,{sources:n,onChange:r,variant:s})})]})]})})});E4.displayName="QuerySearchConfigurationSelector";const hje=d.memo(({query:e,onQueryChange:t})=>{const{$t:n}=Z(),{hasActiveSubscription:r}=St(),s=d.useCallback(l=>{t({...e,searchModel:l})},[t,e]),a=d.useCallback(l=>{t({...e,sources:l})},[t,e]);if(!r)return null;const i=n({defaultMessage:"Model options",id:"ObVxV7yacw"});return o.jsx(qNe,{title:i,children:o.jsx(E4,{searchModel:e.searchModel,onSearchModelChange:s,sources:e.sources??I_(),onSourcesChange:a,variant:"subtle"})})});hje.displayName="ScheduledAutomationAdvancedConfiguration";const gje=d.memo(({trigger:e,query:t,onQueryChange:n})=>{switch(e.type){case lt.SCHEDULED:return o.jsx(hje,{query:t,onQueryChange:n});case lt.PRICE_ALERT:case lt.SHORTCUT:return null;default:Qt(e)}});gje.displayName="AutomationAdvancedSettingsConfiguration";const yje=d.memo(({expiryDate:e,onExpiryDateChange:t,schedule:n})=>{const{$t:r}=Z(),s=d.useCallback(l=>{l.stopPropagation(),t(null)},[t]),a=d.useMemo(()=>o.jsx(me,{type:"button",onClick:s,icon:kt,size:"tiny",variant:"common"}),[s]),i=d.useMemo(()=>{if(e===null)return;const l=n?vB(n):void 0;return l?Gs(l,1):void 0},[e,n]);return o.jsx(Ek,{value:e===null?void 0:e,onChange:t,buttonClassName:"w-full py-sm bg-subtle",trailingIcon:a,fromDate:i,placeholder:r({defaultMessage:"None selected",id:"7MYtB45RD0"})})});yje.displayName="AutomationExpiryDatePicker";const xje=d.memo(({defaultExpiryDate:e,expiryDate:t,onExpiryDateChange:n,schedule:r})=>{const s=d.useCallback(a=>{n?.(a)},[n]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(ie,{defaultMessage:"Expiration date",id:"CICBj0Td+l"})}),o.jsx(yje,{expiryDate:t||e,onExpiryDateChange:s,schedule:r})]})});xje.displayName="ExpiryDateSection";const vje=d.memo(({trigger:e,onTriggerChange:t})=>{const n=d.useCallback(r=>{e.type===lt.SCHEDULED&&t({...e,type:lt.SCHEDULED,expiryDate:r})},[t,e]);switch(e.type){case lt.SCHEDULED:return e.schedule.kind!=="ONCE"?o.jsx(xje,{defaultExpiryDate:e.defaultExpiryDate,expiryDate:e.expiryDate,onExpiryDateChange:n,schedule:e.schedule}):null;case lt.PRICE_ALERT:case lt.SHORTCUT:return null;default:Qt(e)}});vje.displayName="AutomationExpiryDateConfiguration";const GWt=({options:e,selectedValues:t,onSelectionChange:n,placeholder:r="Select options...",disabled:s=!1})=>{const a=Z(),{isMobileStyle:i}=xe(),[l,c]=d.useState(!1),u=d.useCallback(x=>{const b=t.includes(x)?t.filter(_=>_!==x):[...t,x];n(b)},[t,n]),f=d.useMemo(()=>e.map(x=>{const v=t.includes(x.value);return{type:"multiSelect",text:x.label,onClick:()=>{u(x.value)},selected:v,iconVariant:"check",disableActiveStyles:!0}}),[e,t,u]),m=d.useMemo(()=>{if(t.length===0)return r;const x=t.map(v=>e.find(b=>b.value===v)?.label).filter(Boolean);return new Intl.ListFormat(a.locale,{style:"long",type:"conjunction"}).format(x)},[t,e,r,a.locale]),p=d.useCallback(()=>c(!0),[]),h=d.useCallback(()=>c(!1),[]),g=d.useMemo(()=>({className:"w-[180px]"}),[]),y=d.useMemo(()=>({matchTargetWidth:!1,avoidPositionCollisions:!1}),[]);return o.jsx(nn,{isOpen:l,onOpen:p,onClose:h,items:f,isMobileStyle:i,placement:"bottom-end",contentClassName:"w-full",boxProps:g,popoverProps:y,disabled:s,alwaysShowChildren:!0,children:o.jsx(me,{text:m,extraCSS:B("px-4 w-full !h-10 border-0 !outline-none !justify-start font-normal"),textClassName:"text-left text-foreground text-sm font-normal truncate",fullWidth:!0,layout:"split",chevron:!0,chevronIcon:Wn,disabled:s})})},bje=(e,t)=>{const{value:n,loading:r}=jt({flag:"app-notifications",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},_je=d.memo(({notificationSettings:e,onNotificationSettingsChange:t,disabled:n})=>{const{$t:r}=tue(),{variation:s,loading:a}=bje(!1),i=d.useMemo(()=>{const u=[];return s&&!a&&u.push({value:"in_app",label:r({defaultMessage:"In-app",id:"E7zWOQXV+k"})}),u.push({value:"email",label:r({defaultMessage:"Email",id:"sy+pv5U9ls"})},{value:"push",label:r({defaultMessage:"Mobile",id:"GWtmtuCmOx"})}),u},[r,s,a]),l=d.useMemo(()=>{const u=[];return s&&!a&&e.should_send_in_app&&u.push("in_app"),e.should_send_email&&u.push("email"),e.should_send_push&&u.push("push"),u},[e,s,a]),c=d.useCallback(u=>{t({should_send_email:u.includes("email"),should_send_push:u.includes("push"),should_send_in_app:u.includes("in_app")})},[t]);return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(ie,{defaultMessage:"Notification platform",id:"L9evilaxeT"})}),o.jsx(GWt,{options:i,selectedValues:l,onSelectionChange:c,placeholder:r({defaultMessage:"Select platform",id:"Gl5w1+hLYC"}),disabled:n})]})});_je.displayName="AutomationNotificationConfiguration";const oo=`
`;function wje({baseInstructions:e,additionalInstructions:t}){let n=e+oo;return t&&(n+=t),n}function Yoe({prompt:e,baseInstructions:t}){if(!e||!t)return"";const n=e.replace(/\\n/g,oo),r=t.replace(/\\n/g,oo),s=r+oo;if(n.startsWith(s))return n.slice(s.length);if(n.startsWith(r)){const l=n.slice(r.length);if(l.startsWith(oo))return l.slice(oo.length);if(l.trim()==="")return""}return n.startsWith(r)?"":n}function qWt(e){const t=e.split(oo),n=t[0]||"",r=t.length>1?t.slice(1).join(oo):"";return{baseInstructions:n,additionalInstructions:r}}function KWt(e,t){let n=e;for(const[r,s]of Object.entries(t))n=n.replaceAll(r,s);return n}function Qoe({rawInstructions:e,symbol:t,quoteName:n="",eventValue:r,direction:s}){return KWt(e,{"\\\\n":`
`,"{symbol}":t,"{quoteName}":n,"{{event_value}}":r,"{{direction}}":s})}function Cje({prompt:e,symbol:t,quoteName:n=""}){if(!t||!e)return"";let r=e;r.startsWith('"')&&r.endsWith('"')&&(r=r.slice(1,-1));const s="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.",a="Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.";let i=r;if(i.startsWith(s+oo))i=i.slice((s+oo).length);else if(i.startsWith(a+oo))i=i.slice((a+oo).length);else if(i===s||i===a)return"";if(i.includes(oo)){const l=i.split(oo);i=l[l.length-1]??i}return i}function IL({selectedSymbol:e,symbol:t,quote:n,isLoading:r=!1,alertType:s,priceValue:a,percentValue:i,currencySymbol:l,$t:c}){const u=e??t,f=n?.name?` (${n.name})`:"",m=d.useMemo(()=>s==="price"?YWt({symbol:u,quoteName:f,priceValue:a,currencySymbol:l,$t:c}):QWt({symbol:u,quoteName:f,percentValue:i,$t:c}),[s,u,f,a,l,c,i]),p=d.useMemo(()=>!u||!n?"":s==="price"?M4({symbol:u,quoteName:f}):k4({symbol:u,quoteName:f}),[u,n,s,f]),h=!r&&n?.name;return d.useMemo(()=>({shouldShowDisplayInstructions:h,displayInstructions:m,baseInstructions:p,effectiveSymbol:u,quoteName:f}),[p,m,u,f,h])}function M4({symbol:e,quoteName:t,$t:n}){return n?n({id:"0J1c9pn78+",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{direction}}' to '{{event_value}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{direction}} to {{event_value}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function k4({symbol:e,quoteName:t,$t:n}){return n?n({id:"9XAm3nfaVB",defaultMessage:"Explain the factors driving the latest movement of {symbol}{quoteName}, including its recent '{{event_value}}%' '{{direction}}'. Contextualize this price movement within the last few weeks of price movement and investor narrative."},{symbol:e||"",quoteName:t||""}):`Explain the factors driving the latest movement of ${e}${t||""}, including its recent {{event_value}}% {{direction}}. Contextualize this price movement within the last few weeks of price movement and investor narrative.`}function YWt({symbol:e,quoteName:t,priceValue:n,currencySymbol:r,$t:s}){if(!e)return s({id:"39tYCstx5d",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent rise/fall. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const a=n&&n!=="$"?s({defaultMessage:" to {currencySymbol}{priceValue}",id:"zSy/VeEpR9"},{priceValue:n,currencySymbol:r}):"",i=s({defaultMessage:"rise/fall",id:"+dqzTFX/gy"});return M4({symbol:e,quoteName:t,$t:s}).replace(" to {{event_value}}",a).replace("{{direction}}",i)}function QWt({symbol:e,quoteName:t,percentValue:n,$t:r}){if(!e)return r({id:"pP0ylRs8IX",defaultMessage:"Explain the factors driving the latest movement of this asset, including its recent increase/decrease. Contextualize this price movement within the last few weeks of price movement and investor narrative."});const s=r({id:"QBY86oKDNP",defaultMessage:"increase/decrease"});return k4({symbol:e,quoteName:t,$t:r}).replace(" {{event_value}}%",n?` ${parseFloat(n).toFixed(2)}%`:"").replace("{{direction}}",s)}const ef=1e9,tf=-1e9;function RL({symbol:e,alertType:t,priceValue:n,priceThreshold:r,percentValue:s,positiveSelected:a=!0,negativeSelected:i=!0,baseInstructions:l,additionalInstructions:c=""}){let u,f="";if(t==="price"){if(!n||!r)return null;const p=parseFloat(n.replace(/[^0-9.]/g,""));if(isNaN(p))return null;u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_TARGET",value_lower_bound:r==="below"?p:tf,value_upper_bound:r==="above"?p:ef},f=`Alert when ${e} is ${r} ${n}`}else if(t==="movement"){if(!s)return null;const p=parseFloat(s);if(isNaN(p))return null;a&&i?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:p},f=`Alert when ${e} moves +${s}% or -${s}% in a day`):a?(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:tf,value_upper_bound:p},f=`Alert when ${e} moves +${s}% in a day`):i&&(u={event_entity:e,event_group:"FINANCE",event_type:"STOCK_PRICE_MOVEMENT",value_lower_bound:-p,value_upper_bound:ef},f=`Alert when ${e} moves -${s}% in a day.`)}if(!u)return null;const m=wje({baseInstructions:l,additionalInstructions:c});return{task_name:f,prompt:m,event_subscription:u,model_preference:"turbo"}}const T4="5";function PL(e){const t={selectedSymbol:e.symbol,additionalInstructions:"",selectedOption:"price",priceValue:"",percentValue:"",positiveSelected:!0,negativeSelected:!0};switch(e.alertType){case Wr.TARGET_PRICE:return{...t,selectedOption:"price",priceValue:e.price===0?"":e.price.toString()};case Wr.MOVEMENT_AMOUNT:{const n=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==ef/100,r=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==tf/100;let s="";return n?s=(e.percentageDecimalUpperBound*100).toFixed(2):r&&(s=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2)),s?{...t,selectedOption:"movement",percentValue:s,positiveSelected:n,negativeSelected:r}:{...t,selectedOption:"movement",percentValue:T4,positiveSelected:!0,negativeSelected:!0}}default:Qt(e)}}function XWt(e){switch(e.selectedOption){case"price":{const t=parseFloat(e.priceValue.replace(/[^0-9.]/g,""));return{type:lt.PRICE_ALERT,alertType:Wr.TARGET_PRICE,symbol:e.selectedSymbol??"",price:t||0,currency:"usd"}}case"movement":{const n=(parseFloat(e.percentValue)||0)/100;let r=0,s=0;return e.positiveSelected&&e.negativeSelected?(r=n,s=-n):e.positiveSelected?r=n:e.negativeSelected&&(s=-n),{type:lt.PRICE_ALERT,alertType:Wr.MOVEMENT_AMOUNT,symbol:e.selectedSymbol??"",percentageDecimalUpperBound:r,percentageDecimalLowerBound:s}}default:Qt(e.selectedOption)}}function ZWt({trigger:e,onTriggerChange:t}){const[n,r]=d.useState(()=>PL(e)),s=d.useMemo(()=>e.alertType===Wr.TARGET_PRICE?`${e.symbol}-${e.alertType}-${e.price}`:`${e.symbol}-${e.alertType}-${e.percentageDecimalUpperBound}-${e.percentageDecimalLowerBound}`,[e]),a=d.useRef(s);d.useEffect(()=>{s!==a.current&&(r(PL(e)),a.current=s)},[s,e]);const i=d.useCallback(y=>{const x=XWt(y);t(x)},[t]),l=d.useCallback(y=>{r(x=>{const v=y(x);return i(v),v})},[i]),c=d.useCallback(y=>{l(x=>({...x,selectedSymbol:y}))},[l]),u=d.useCallback((y,x="")=>{l(v=>{switch(y){case"price":return{...v,selectedOption:y,priceValue:x};case"movement":return{...v,selectedOption:y,percentValue:T4,positiveSelected:!0,negativeSelected:!0};default:Qt(y)}})},[l]),f=d.useCallback(y=>{l(x=>({...x,priceValue:typeof y=="function"?y(x.priceValue):y}))},[l]),m=d.useCallback(y=>{l(x=>({...x,percentValue:typeof y=="function"?y(x.percentValue):y}))},[l]),p=d.useCallback(y=>{l(x=>({...x,positiveSelected:y}))},[l]),h=d.useCallback(y=>{l(x=>({...x,negativeSelected:y}))},[l]),g=d.useCallback(y=>{r(x=>({...x,additionalInstructions:y}))},[]);return d.useMemo(()=>({formState:n,onSymbolChange:c,onOptionChange:u,onPriceValueChange:f,onPercentValueChange:m,onPositiveChange:p,onNegativeChange:h,onAdditionalInstructionsChange:g}),[n,c,u,f,m,p,h,g])}const Fw=({symbol:e,enabled:t=!!e,onInitialSuccess:n})=>{const r=d.useRef(!1),s=Ue({enabled:t&&!!e,queryKey:eb({symbol:e}),queryFn:()=>Yd({symbol:e}),refetchInterval:5*1e3});return d.useEffect(()=>{s.isSuccess&&s.data&&!r.current&&n&&(r.current=!0,n(s.data))},[s.isSuccess,s.data,n]),s},JWt=async({query:e,locale:t,reason:n})=>{try{const{data:r,error:s}=await re.GET("/rest/autosuggest/finance/tasks-autosuggest",n,{params:{query:{query:e}},headers:{"accept-language":t}});if(s)throw new we("API_CLIENTS_ERROR",{message:"Failed to get finance tasks suggestions",cause:s});return"results"in r?r.results:[]}catch(r){return ne.error(r),[]}},Sje="[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent",eHt=e=>/^(\d+(\.\d{0,2})?|\.\d{1,2})$/.test(e),tHt=e=>/^(\d+(\.\d{0,1})?|\.\d{0,1})$/.test(e),N4=(e,t)=>{try{return new Intl.NumberFormat(t,{style:"currency",currency:e.toUpperCase(),currencyDisplay:"symbol"}).format(0).replace(/[0-9.,\s]/g,"").trim()||"$"}catch{return"$"}},nHt=({currentPrice:e,value:t,onChange:n,variant:r="default",currency:s="USD"})=>{const{isMobileUserAgent:a}=xe(),{locale:i,$t:l}=Z(),c=d.useMemo(()=>N4(s,i),[s,i]),u=d.useMemo(()=>e?.toLocaleString(i,{style:"currency",currency:s.toUpperCase()}),[e,i,s]),f=d.useCallback(y=>{n(x=>{if(y===c)return y;const v=y.replace(c,"");return eHt(v)||y===""?c+v:x})},[n,c]),m=d.useCallback(()=>{t===""&&n(c)},[n,t,c]),p=d.useCallback(()=>{t===c&&n("")},[n,t,c]),h=(()=>{switch(r){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"subtle":return"bg-subtle [&_textarea]:bg-subtle";default:Qt(r)}})(),g=B(Sje,h);return o.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[o.jsx(F,{variant:"tiny",color:"light",children:u?l({id:"74LVOPcS2E",defaultMessage:"Target Price (currently {formattedPrice})"},{formattedPrice:u}):l({id:"xPMPP84OOV",defaultMessage:"Target Price"})}),o.jsx("div",{className:"gap-sm flex items-stretch",children:o.jsx(Xr,{placeholder:c,className:B(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:a,value:t,onChange:f,onFocus:m,onBlur:p,disable1pass:!0,colorVariant:r})})]})},rHt=({value:e,onChange:t,positiveSelected:n,onPositiveChange:r,negativeSelected:s,onNegativeChange:a,variant:i="default"})=>{const{isMobileUserAgent:l}=xe(),{$t:c}=Z(),u=d.useCallback(()=>{a(!s)},[s,a]),f=d.useCallback(()=>{r(!n)},[r,n]),m=d.useCallback(y=>{t(x=>tHt(y)||y===""?y:x)},[t]),p=d.useMemo(()=>({delayDuration:100}),[]),h=(()=>{switch(i){case"default":return"bg-subtler [&_textarea]:bg-subtler";case"subtle":return"bg-subtle [&_textarea]:bg-subtle";default:Qt(i)}})(),g=B(Sje,h);return o.jsx("div",{className:"gap-md flex flex-col",children:o.jsxs("div",{className:"gap-sm flex flex-col items-start",children:[o.jsx(F,{variant:"tiny",color:"light",children:c({id:"agMnIX4PMS",defaultMessage:"Movement Amount (%)"})}),o.jsxs("div",{className:"gap-md flex h-full items-center",children:[o.jsxs("div",{className:"gap-sm flex h-full items-center",children:[o.jsx(me,{variant:s?"primaryGhost":"border",size:"small",onClick:u,pill:!0,icon:Yk,toolTip:c({id:"M9L9vXrgoN",defaultMessage:"Negative Movement"}),tooltipProps:p}),o.jsx(me,{variant:n?"primaryGhost":"border",size:"small",onClick:f,pill:!0,icon:ar,toolTip:c({id:"iFYP+IX00i",defaultMessage:"Positive Movement"}),tooltipProps:p})]}),o.jsx(Xr,{className:B(g,"p-sm !rounded-md"),variant:"monospace",isMobileUserAgent:l,value:e,onChange:m,disable1pass:!0,colorVariant:i})]})]})})},FH=I.memo(e=>{const{selectedSymbol:t,selectedOption:n,onSymbolChange:r,onOptionChange:s,showSymbolInput:a=!0,currentPrice:i,priceValue:l,onPriceValueChange:c,percentValue:u,onPercentValueChange:f,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,externalInputValue:y,variant:x,colorVariant:v="default",currency:b,isAssetSelected:_=!0}=e,w=()=>{switch(x){case"full":return{additionalInstructions:e.additionalInstructions,onAdditionalInstructionsChange:e.onAdditionalInstructionsChange,displayPriceInstructions:e.displayPriceInstructions,displayMovementInstructions:e.displayMovementInstructions};case"trigger":return{additionalInstructions:"",onAdditionalInstructionsChange:()=>{},displayPriceInstructions:void 0,displayMovementInstructions:void 0};default:return Qt(x)}},{additionalInstructions:C,onAdditionalInstructionsChange:S,displayPriceInstructions:E,displayMovementInstructions:k}=w(),{isMobileUserAgent:M}=xe(),{$t:j,locale:R}=Z(),[O,D]=d.useState(!1),[P,A]=d.useState(0),[T,N]=d.useState(""),[L,U]=d.useState([]),$=d.useRef(null),V=ot(),W=d.useRef(T);W.current=T,d.useEffect(()=>{N(y??"")},[y]),d.useEffect(()=>{if(b&&l){const ye=N4(b.toUpperCase(),R);if(/^\d+(\.\d+)?$/.test(l)){c(ye+l);return}const Ne=l.replace(/[^0-9.]/g,"");l.replace(/[0-9.]/g,"").trim()!==ye&&Ne&&c(ye+Ne)}},[b,R,l,c]);const Q=d.useMemo(()=>[{label:j({id:"xPMPP84OOV",defaultMessage:"Target Price"}),value:"price"},{label:j({id:"24152tl1L3",defaultMessage:"Movement Amount"}),value:"movement"}].map(be=>({label:be.label,value:be.value,children:o.jsx("div",{className:"w-full flex-1",children:o.jsx(SW,{label:be.label,isActiveOption:n===be.value})})})),[n,j]),q=d.useCallback(async ye=>{const Ne=(await V.fetchQuery({queryKey:["finance-tasks-autosuggest",ye],queryFn:()=>JWt({query:ye,reason:"finance-add-alert"}),staleTime:0})).map(ke=>({query:ke.title??"",title:ke.title??"",image:ke.image??"",imageDark:ke.image_dark??"",description:ke.description??"",identifier:ke.title??""}));U(Ne)},[V]),H=gs(q,100,{leading:!0,trailing:!0}),K=d.useCallback(ye=>{H(ye)},[H]),G=d.useCallback(()=>{D(!0),A(-1),K(W.current)},[K]),ee=d.useCallback(()=>{D(!1)},[]),Y=d.useCallback(ye=>{const be=ye;N(be),K(be),be.trim()===""&&(r(null),c(""),f(""))},[K,r,c,f]),te=d.useCallback(ye=>{r(ye.identifier??null),N(ye.title??""),D(!1),$.current?.blur()},[r]),se=YMe({userInputQuery:T,suggestionsDisabled:!O||L.length===0,suggestions:L,focusedIndex:P,setFocusedIndex:A,onChange:ye=>{N(ye)},handleSuggestionSubmission:te,inputRef:$}),ae=d.useCallback(ye=>{s(ye)},[s]),pe=d.useCallback(ye=>{S?.(ye)},[S]),fe=B("h-10 rounded-md dark:border-0 dark:border-transparent dark:bg-subtle p-4 dark:[&:focus]:ring-0",{"rounded-t-md rounded-b-none":O&&L.length>0}),ge=d.useMemo(()=>({image:ye,imageDark:be,alt:Ne})=>o.jsx(I3,{image:ye,imageDark:be,alt:Ne,watchlistType:"FINANCE",className:"bg-subtler mr-sm !size-8 rounded",imageClassName:"inset-xs"}),[]),Se=({onClear:ye})=>o.jsx(Me,{icon:kt,size:"tiny",pill:!0,onClick:ye}),je=d.useMemo(()=>({RightIconComponent:()=>null,LeftIconComponent:ge}),[ge]);return o.jsxs("div",{className:"flex flex-col gap-3",children:[a&&o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(ie,{defaultMessage:"Find a stock, token, or fund...",id:"DTOgClV6qi"})}),o.jsx(bx,{isOpen:O&&L.length>0,suggestedQueries:L,focusedIndex:P,setFocusedIndex:A,handlePasteQuery:vn,handleSubmit:te,value:T,components:je,dropdownClassName:"dark:border-none dark:ml-0 dark:mr-0 dark:w-full",dropdownType:"select",popoverClassName:"dark:!border-none",children:o.jsx(Xr,{autoFocus:!t,onFocus:G,onBlur:ee,onKeyDown:se,className:fe,pill:!1,ref:$,isMobileUserAgent:M,placeholder:j({defaultMessage:"Search for any asset",id:"BeYic/1TvC"}),value:T,onChange:Y,ClearIcon:Se,colorVariant:v})})]}),o.jsxs("div",{className:B("flex flex-col gap-3 sm:flex-row",!_&&"pointer-events-none opacity-50"),children:[o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(ie,{defaultMessage:"Alert criteria",id:"h44KqVtM6/"})}),o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:o.jsx(CW,{layoutKey:"task",options:Q,value:n,onValueChange:ae,className:"p-three inline-flex",variant:v})})]}),o.jsxs("div",{className:"gap-md flex flex-col",children:[n==="price"&&o.jsx(nHt,{currentPrice:i,value:l,onChange:c,variant:v,currency:b}),n==="movement"&&o.jsx(rHt,{value:u,onChange:f,positiveSelected:m,onPositiveChange:p,negativeSelected:h,onNegativeChange:g,variant:v})]})]}),x==="full"&&o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:j({id:"qax5d8pQCh",defaultMessage:"Default Query"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(F,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:n==="price"?E:k})})]}),o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"smallBold",color:"light",className:"flex shrink-0 items-center",children:j({id:"QFuOkrgHHJ",defaultMessage:"Additional Instructions (optional)"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(Wa,{value:C,onChange:pe,isMobileUserAgent:M,isMobileStyle:!1,minRows:3,placeholder:j({id:"DtwY5RHKrT",defaultMessage:"Check news and social media sentiment to assess consensus or controversy"})})})]})]})]})});FH.displayName="FinanceAlertForm";const Eje=d.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s="default",disabled:a})=>{const{isMobileUserAgent:i}=xe(),{$t:l,locale:c}=Z(),u=PL(e),{selectedSymbol:f,priceValue:m,percentValue:p}=u,{data:h,isLoading:g}=Fw({symbol:u.selectedSymbol}),y=e.alertType===Wr.TARGET_PRICE?"price":"movement",x=h?.currency?N4(h?.currency,c):"$",{displayInstructions:v}=IL({selectedSymbol:f,quote:h,isLoading:g,alertType:y,priceValue:m,percentValue:p,currencySymbol:x,$t:l});return o.jsxs("div",{className:B("gap-md flex flex-col",a&&"pointer-events-none opacity-50"),children:[o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:o.jsx(ie,{defaultMessage:"Default query",id:"7SalR4PwjB"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(F,{variant:"small",color:"light",className:"pl-sm border-subtlest border-l-2",children:v})})]}),o.jsxs("div",{className:"gap-sm flex w-full flex-col items-start",children:[o.jsx("div",{className:"gap-xs flex w-full items-center",children:o.jsx(F,{variant:"tiny",color:"light",className:"flex shrink-0 items-center",children:o.jsx(ie,{defaultMessage:"Additional Instructions (optional)",id:"QFuOkrgHHJ"})})}),o.jsx("div",{className:"w-full [&>*]:w-full",children:o.jsx(Wa,{value:t,onChange:n,isMobileUserAgent:i,isMobileStyle:!1,minRows:3,maxLength:mme,className:B("[&_textarea]:placeholder:!text-quietest placeholder:!text-quietest hover:!border-subtler focus-within:!border-subtler !border !border-transparent","w-full"),placeholder:"Check news and social media sentiment to assess consensus or controversy",variant:s,disabled:a})})]}),r&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(af,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:r})]})]})});Eje.displayName="PriceAlertQueryPromptInput";const Mje=d.memo(({trigger:e,prompt:t,onPromptChange:n,error:r,variant:s,disabled:a})=>{const{data:i}=Fw({symbol:e.symbol}),l=d.useMemo(()=>{if(!e.symbol)return"";const f=i?.name?` (${i.name})`:"";return e.alertType===Wr.TARGET_PRICE?M4({symbol:e.symbol,quoteName:f}):k4({symbol:e.symbol,quoteName:f})},[e.symbol,e.alertType,i?.name]),c=d.useMemo(()=>{const f=i?.name?` (${i.name})`:"";return Cje({prompt:t,symbol:e.symbol,quoteName:f})},[t,e.symbol,i?.name]),u=f=>{const m=wje({baseInstructions:l,additionalInstructions:f});n(m)};return o.jsx(Eje,{trigger:e,prompt:c,onPromptChange:u,error:r,variant:s,disabled:a})});Mje.displayName="PriceAlertPromptWrapper";const j4=d.memo(({trigger:e,prompt:t,onPromptChange:n,placeholder:r,error:s,variant:a="default",disabled:i})=>{const{isMobileUserAgent:l}=xe(),c=(()=>{switch(a){case"default":return"bg-subtler [&_textarea]:bg-transparent";case"subtle":return"bg-subtle [&_textarea]:bg-transparent";default:Qt(a)}})();switch(e.type){case lt.SCHEDULED:case lt.SHORTCUT:return o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(F,{variant:"tiny",color:"light",className:"select-none",children:o.jsx(ie,{defaultMessage:"Instructions",id:"sV2v5LjRpX"})}),o.jsx(Wa,{placeholder:r,value:t,onChange:n,isMobileUserAgent:l,isMobileStyle:!1,minRows:3,maxLength:mme,allowEnterNewlines:!0,className:B("hover:!border-subtler focus-within:!border-subtler !border !border-transparent",c),variant:a,disabled:i}),s&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(af,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:s})]})]});case lt.PRICE_ALERT:return o.jsx(Mje,{trigger:e,prompt:t,onPromptChange:n,error:s,variant:a,disabled:i});default:Qt(e)}});j4.displayName="QueryPromptInput";const kje=d.memo(({trigger:e,query:t,onQueryChange:n})=>{const{$t:r}=Z(),s=d.useCallback(c=>{n({...t,prompt:c})},[n,t]),a=d.useCallback(c=>{n({...t,searchModel:c})},[n,t]),i=d.useCallback(c=>{n({...t,sources:c})},[n,t]),l=d.useMemo(()=>{switch(e.type){case lt.SCHEDULED:return null;case lt.PRICE_ALERT:return null;case lt.SHORTCUT:return o.jsx(E4,{searchModel:t.searchModel,onSearchModelChange:a,sources:t.sources??I_(),onSourcesChange:i,variant:"subtle"});default:Qt(e)}},[a,i,t.searchModel,t.sources,e]);return e.type===lt.PRICE_ALERT?null:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx(j4,{trigger:e,prompt:t.prompt,placeholder:r({defaultMessage:"Describe what you want to automate",id:"79ZUaZU8Ho"}),onPromptChange:s,variant:"subtle"}),l]})});kje.displayName="AutomationQueryConfiguration";const Tje=d.memo(({trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r})=>{const{formState:s,onSymbolChange:a,onOptionChange:i,onPriceValueChange:l,onPercentValueChange:c,onPositiveChange:u,onNegativeChange:f}=ZWt({trigger:e,onTriggerChange:t}),m=d.useCallback(x=>r||(x.price?sHt(x.price):""),[r]),p=d.useCallback(x=>{switch(s.selectedOption){case"price":{if(x&&!s.priceValue){const v=m(x);v&&l(v)}break}case"movement":break;default:Qt(s.selectedOption)}},[s.priceValue,s.selectedOption,m,l]),{data:h}=Fw({symbol:s.selectedSymbol,onInitialSuccess:p}),g=d.useCallback(x=>{let v="";switch(x){case"price":{v=s.priceValue,h&&(v=m(h));break}case"movement":break;default:Qt(x)}i(x,v)},[s.priceValue,m,i,h]),y=!!e.symbol&&e.symbol.trim()!=="";return o.jsx("div",{children:o.jsx(FH,{variant:"trigger",externalInputValue:s.selectedSymbol??void 0,selectedSymbol:s.selectedSymbol,selectedOption:s.selectedOption,onSymbolChange:a,onOptionChange:g,showSymbolInput:!n,currentPrice:h?.price,priceValue:s.priceValue,onPriceValueChange:l,percentValue:s.percentValue,onPercentValueChange:c,positiveSelected:s.positiveSelected,onPositiveChange:u,negativeSelected:s.negativeSelected,onNegativeChange:f,colorVariant:"subtle",currency:h?.currency??void 0,isAssetSelected:y})})});Tje.displayName="PriceAlertTriggerConfiguration";function sHt(e){return(e*(1+parseInt(T4,10)/100)).toFixed(2)}const LL=d.memo(({trigger:e,onTriggerChange:t})=>{const n=d.useMemo(()=>e?.schedule??Bs(),[e?.schedule]),r=d.useCallback(s=>{t({type:lt.SCHEDULED,...e,schedule:{...n,...s}})},[t,n,e]);return o.jsx(DH,{schedule:n,onScheduleChange:r,variant:"subtle"})});LL.displayName="ScheduledAutomationTriggerConfiguration";const Nje=d.memo(()=>o.jsx("div",{children:"Shortcut Trigger Configuration"}));Nje.displayName="ShortcutTriggerAutomationConfiguration";const jje=d.memo(({trigger:e,onTriggerChange:t,isEditing:n=!1,defaultTargetPriceValue:r})=>{if(!e)return o.jsx(LL,{trigger:null,onTriggerChange:t});switch(e.type){case lt.SCHEDULED:return o.jsx(LL,{trigger:e,onTriggerChange:t});case lt.PRICE_ALERT:return o.jsx(Tje,{trigger:e,onTriggerChange:t,isEditing:n,defaultTargetPriceValue:r});case lt.SHORTCUT:return o.jsx(Nje,{});default:Qt(e)}});jje.displayName="AutomationTriggerConfiguration";const aHt=(e,t)=>{const{value:n,loading:r}=jt({flag:"tasks-notification-settings-enabled",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},A4=d.memo(({configuration:e,onConfigurationChange:t,errorMessage:n,onError:r})=>{const s=!!e.id,a=d.useCallback(m=>{let p=e.query;switch(m.type){case lt.PRICE_ALERT:{p={...e.query,prompt:e.query.prompt};break}case lt.SCHEDULED:case lt.SHORTCUT:break;default:Qt(m)}const h={...e,trigger:m,query:p};r?.(null),t(h)},[e,t,r]),i=d.useCallback(m=>{const p={...e,query:m};t(p)},[e,t]),l=d.useCallback(m=>{const p={...e,notificationSettings:m};t(p)},[e,t]),{variation:c,loading:u}=aHt(!0),f=e.trigger.type===lt.PRICE_ALERT&&(!e.trigger.symbol||e.trigger.symbol.trim()==="");return o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(kje,{trigger:e.trigger,query:e.query,onQueryChange:i}),o.jsx(jje,{trigger:e.trigger,onTriggerChange:a,isEditing:s,defaultTargetPriceValue:e.defaultTargetPriceValue}),o.jsx(vje,{trigger:e.trigger,onTriggerChange:a}),!u&&c&&o.jsx(_je,{notificationSettings:e.notificationSettings??hf,onNotificationSettingsChange:l,disabled:f}),e.trigger.type===lt.PRICE_ALERT&&o.jsx("div",{className:"flex flex-col gap-2",children:o.jsx(j4,{trigger:e.trigger,prompt:e.query.prompt,onPromptChange:m=>i({...e.query,prompt:m}),variant:"subtle",disabled:f})}),o.jsx(gje,{trigger:e.trigger,query:e.query,onQueryChange:i}),n&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(af,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:n})]})]})});A4.displayName="AutomationConfiguration";function oHt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,schedule:O0(e.schedule),task_name:"",expiry_date:n0e(e.expiryDate??e.defaultExpiryDate),notification_settings:n}}function iHt(e,t){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,task_name:e.shortcut,schedule:{rrule:"",start_at:"",tzid:""}}}function Aje({trigger:e,query:t,quote:n}){const{symbol:r}=e,s=n?.name?` (${n.name})`:void 0;switch(e.alertType){case Wr.TARGET_PRICE:{const a=n?.price||0,i=M4({symbol:r,quoteName:s}),l=e.price>a?"above":"below",c=Qoe({rawInstructions:i,symbol:r,quoteName:s||"",eventValue:`$${e.price}`,direction:l}),u=Yoe({prompt:t.prompt,baseInstructions:c});return RL({symbol:r,alertType:"price",priceValue:`$${e.price}`,priceThreshold:l,baseInstructions:c,additionalInstructions:u})}case Wr.MOVEMENT_AMOUNT:{const a=k4({symbol:r,quoteName:s}),i=e.percentageDecimalUpperBound>0&&e.percentageDecimalUpperBound!==ef/100,l=e.percentageDecimalLowerBound<0&&e.percentageDecimalLowerBound!==tf/100;let c,u;i&&l?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase or decrease"):i?(c=(e.percentageDecimalUpperBound*100).toFixed(2),u="increase"):l?(c=(Math.abs(e.percentageDecimalLowerBound)*100).toFixed(2),u="decrease"):(c="0.00",u="change");const f=Qoe({rawInstructions:a,symbol:r,quoteName:s||"",eventValue:c,direction:u}),m=Yoe({prompt:t.prompt,baseInstructions:f});return RL({symbol:r,alertType:"movement",percentValue:c,positiveSelected:i,negativeSelected:l,baseInstructions:f,additionalInstructions:m})}default:Qt(e)}}function lHt(e,t,n,r){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,schedule:O0(e.schedule),expiry_date:n0e(e.expiryDate??e.defaultExpiryDate),clear_expiry:e.expiryDate===null?!0:void 0,notification_settings:r}}function cHt(e,t,n){return{prompt:t.prompt,model_preference:t.searchModel,sources:t.sources,status:n==="COMPLETED"?"PAUSED":n,task_name:e.shortcut}}function uHt({trigger:e,query:t,status:n,quote:r}){const s=Aje({trigger:e,query:t,quote:r});return s?{task_name:s.task_name,prompt:s.prompt,event_subscription:s.event_subscription,model_preference:s.model_preference,status:n==="COMPLETED"?"PAUSED":n}:null}function Ije({onCreateSuccess:e,onCreateError:t,onUpdateSuccess:n,onUpdateError:r,onDeleteSuccess:s,onDeleteError:a}={}){const{$t:i}=Z(),l=ot(),c=dt({mutationFn:p=>W_t({payload:p,reason:"finance-add-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:n2()}),e?.()},onError:p=>t?.(p)}),u=dt({mutationFn:({taskId:p,payload:h})=>H_t({taskId:p,payload:h,reason:"finance-edit-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:n2()}),n?.()},onError:p=>{if(p instanceof Error)switch(p.name){case"TimeoutError":r?.({detail:i({defaultMessage:"Network Timeout",id:"Z+mLGQc4GD"})});break;default:ne.error(`Unknown error occured: ${p.name}`),r?.({detail:i({defaultMessage:"Unknown error occurred",id:"y1q3uzCFY6"})})}else r?.(p)}}),f=dt({mutationFn:p=>twe({taskId:p,reason:"finance-delete-alert"}),onSuccess:()=>{l.invalidateQueries({queryKey:n2()}),s?.()},onError:()=>a?.()}),m=c.isPending||u.isPending||f.isPending;return d.useMemo(()=>({createMutation:c,updateMutation:u,deleteMutation:f,isMutationLoading:m}),[c,u,f,m])}const dHt=()=>{const{formatMessage:e}=Z();return{getErrorMessage:n=>{switch(n?.detail?.error_code){case Aee.TASK_LIMIT_EXCEEDED:return e({defaultMessage:"You have reached the maximum of number of active tasks of this type for your subscription level.",id:"3H43PMJpfD"});case Aee.SHORTCUT_NAME_ALREADY_EXISTS:return e({defaultMessage:"A shortcut with this name already exists. Please choose a different name.",id:"GpnXJDWEkN"});default:return e({defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"})}}}},fHt={settings_create:!0,settings_edit:!0,settings_suggest:!0,settings_primer:!0,task_widget:!0,discover_task_widget:!0,thread_dropdown:!0,typeahead_create:!0,notifications_panel:!0,router:!0};function OL(e){return e in fHt}const mHt={settings_create:!0,settings_edit:!0,settings_suggest:!0,finance_home_page:!0,finance_asset_page:!0};function Xoe(e){return e in mHt}const pHt={settings_create:!0,settings_edit:!0,typeahead_create:!0,thread_create:!0,suggestions_dropdown:!0,notifications_panel:!0,typeahead_edit:!0,shortcut_widget:!0,settings_paste:!0,try_assistant_suggestions:!0,thread_upsell_create:!0};function Zoe(e){return e in pHt}const hHt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function Rje(e){return e in hHt}const gHt={created:!0,updated:!0,deleted:!0,paused:!0,resumed:!0,skipped:!0};function yHt(e){return e in gHt}const xHt={created:!0,updated:!0,deleted:!0,copied:!0,skipped:!0};function vHt(e){return e in xHt}function Pje({reason:e,source:t,onSuccess:n,onError:r}){const s=ot(),{trackEvent:a}=Te(),{getErrorMessage:i}=dHt(),l=d.useCallback((g,y)=>{s.invalidateQueries({queryKey:n2()}),y&&s.invalidateQueries({queryKey:EF(y)}),n?.(g)},[s,n]),c=d.useCallback((g,y)=>{OL(t)&&Rje(g)&&a("task modal action",{source:t,action:g}),l(g,y)},[t,a,l]),u=dt({mutationFn:g=>V_t({payload:g,reason:e}),onSuccess:g=>c("created",g.task_id),onError:g=>r(i(g))}),f=dt({mutationFn:({id:g,payload:y})=>Y8({taskId:g,payload:y,reason:e}),onSuccess:g=>c("updated",g.task.task_id),onError:g=>r(i(g))}),m=dt({mutationFn:({id:g,newStatus:y})=>Y8({taskId:g,payload:{status:y},reason:e}),onSuccess:g=>{c(g.task.status==="PAUSED"?"paused":"resumed",g.task.task_id)},onError:g=>r(i(g))}),p=dt({mutationFn:g=>twe({taskId:g,reason:e}),onSuccess:()=>c("deleted"),onError:g=>r(i(g))}),h=u.isPending||f.isPending||m.isPending||p.isPending;return{createMutation:u,updateMutation:f,toggleMutation:m,deleteMutation:p,isMutationLoading:h,invalidateAndClose:l}}function bHt({initialConfiguration:e,isModalOpened:t,reason:n,source:r,onSuccess:s,onError:a}){const{$t:i}=Z(),{hasActiveSubscription:l}=St(),[c,u]=d.useState(bB(e??S3(l))),f=d.useCallback(k=>{u(k)},[]),m=(()=>{switch(c.trigger.type){case lt.PRICE_ALERT:return c.trigger.symbol;case lt.SCHEDULED:case lt.SHORTCUT:return null;default:Qt(c.trigger)}})(),{data:p,isLoading:h}=Fw({symbol:m,enabled:!!m&&t}),g=Pje({reason:n,source:r,onSuccess:s,onError:a}),y=Ije({onCreateSuccess:()=>s("created"),onCreateError:k=>a(`Failed to create price alert - ${k.detail}`),onUpdateSuccess:()=>s("updated"),onUpdateError:k=>a(`Failed to update price alert - ${k.detail}`),onDeleteSuccess:()=>s("deleted"),onDeleteError:()=>a("Failed to delete price alert")}),x=h||g.isMutationLoading||y.isMutationLoading,v=d.useCallback(k=>{const M=k?{...c,...k}:c;if(M.id)switch(M.trigger.type){case lt.SCHEDULED:g.updateMutation.mutate({id:M.id,payload:lHt(M.trigger,M.query,M.status,M.notificationSettings)});break;case lt.PRICE_ALERT:{const j=uHt({trigger:M.trigger,query:M.query,status:M.status,quote:p});j?y.updateMutation.mutate({taskId:M.id,payload:j}):a(i({defaultMessage:"Failed to update price alert payload - Missing inputs",id:"293dgMfZdE"}));break}case lt.SHORTCUT:g.updateMutation.mutate({id:M.id,payload:cHt(M.trigger,M.query,M.status)});break;default:Qt(M.trigger)}else switch(M.trigger.type){case lt.SCHEDULED:g.createMutation.mutate(oHt(M.trigger,M.query,M.notificationSettings??hf));break;case lt.PRICE_ALERT:{const j=Aje({trigger:M.trigger,query:M.query,quote:p});j?y.createMutation.mutate(j):a(i({defaultMessage:"Failed to create price alert payload - Missing inputs",id:"Fimh9vZMY/"}));break}case lt.SHORTCUT:g.createMutation.mutate(iHt(M.trigger,M.query));break;default:Qt(M.trigger)}},[c,g.updateMutation,g.createMutation,p,y.updateMutation,y.createMutation,a,i]),b=d.useCallback(()=>{v()},[v]),_=d.useCallback(k=>{if(!c.id)return;v({status:k?"ACTIVE":"PAUSED"})},[c.id,v]),w=d.useCallback(()=>{if(c.id)switch(c.trigger.type){case lt.SCHEDULED:g.deleteMutation.mutate(c.id);break;case lt.PRICE_ALERT:y.deleteMutation.mutate(c.id);break;case lt.SHORTCUT:g.deleteMutation.mutate(c.id);break;default:Qt(c.trigger)}},[c.id,c.trigger,y.deleteMutation,g.deleteMutation]),C=Lje({isLoading:x,currentConfiguration:c}),S=d.useMemo(()=>{switch(c.trigger.type){case lt.SCHEDULED:case lt.SHORTCUT:return;case lt.PRICE_ALERT:return C?i({defaultMessage:"Select stock, token or fund to begin",id:"x/nyvvB4aQ"}):void 0;default:Qt(c.trigger)}},[i,c.trigger,C]),E=c.status==="ACTIVE";return{currentConfiguration:c,setCurrentConfiguration:f,onClickSave:b,onClickToggle:_,onClickDelete:w,isEnabled:E,isLoading:x,isSaveDisabled:C,saveButtonTooltipText:S}}function Lje({isLoading:e,currentConfiguration:t}){if(e)return!0;switch(t.trigger.type){case lt.SCHEDULED:case lt.SHORTCUT:return!t.query.prompt;case lt.PRICE_ALERT:{const n=t.trigger;if(!n.symbol||n.symbol.trim()==="")return!0;switch(n.alertType){case Wr.TARGET_PRICE:if(!n.price||n.price<=0)return!0;break;case Wr.MOVEMENT_AMOUNT:{const r=n.percentageDecimalLowerBound!==tf/100&&n.percentageDecimalLowerBound!==0;if(!(n.percentageDecimalUpperBound!==ef/100&&n.percentageDecimalUpperBound!==0)&&!r)return!0;break}default:Qt(n)}break}default:Qt(t.trigger)}return!1}const _Ht=(e,t)=>{if(!e?.id)return!1;const{status:n,...r}=e,{status:s,...a}=t;return cs(r,a)&&n!==s},I4=d.memo(({open:e,onClose:t,initialConfiguration:n,onSave:r,source:s,trackEvent:a,errorMessage:i})=>{const l=tue(),{$t:c}=l,u="automation-modal",[f,m]=d.useState(!1),[p,h]=d.useState(null),[g,y]=d.useState(!1),x=d.useCallback(()=>{h(null),t()},[t]),{currentConfiguration:v,setCurrentConfiguration:b,onClickSave:_,onClickDelete:w,isLoading:C,isSaveDisabled:S,saveButtonTooltipText:E}=bHt({initialConfiguration:n,isModalOpened:e,reason:u,source:s,onSuccess:D=>{let P=D;D==="updated"&&_Ht(n,v)&&(P=v.status==="PAUSED"?"paused":"resumed"),r?.(P),x(),m(P)},onError:h});d.useEffect(()=>{e&&(OL(s)?a?.("task modal opened",{source:s}):Xoe(s)?a?.("price alert modal opened",{source:s}):Zoe(s)&&a?.("shortcut modal opened",{source:s}))},[e,s,a]);const k=d.useMemo(()=>{const D=[];return v.id&&D.push({text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),variant:"rejecter",onClick:w,disabled:C}),D.push({text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",onClick:x}),D.push({text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:_,disabled:S,tooltipText:E}),D},[c,v.id,C,S,w,_,x,E]),M=d.useCallback(D=>{const P=D?"ACTIVE":"PAUSED",A=P==="PAUSED"?"paused":"resumed";switch(b({...v,status:P}),v.trigger.type){case lt.SCHEDULED:OL(s)&&Rje(A)&&a?.("task modal action",{source:s,action:A});break;case lt.PRICE_ALERT:Xoe(s)&&yHt(A)&&a?.("price alert modal action",{source:s,action:A});break;case lt.SHORTCUT:Zoe(s)&&vHt(A)&&a?.("shortcut modal action",{source:s,action:A});break;default:Qt(v.trigger)}},[v,b,s,a]),j=d.useMemo(()=>{if(!v.id||v.trigger.type===lt.PRICE_ALERT)return null;const D=v.status!=="PAUSED";return o.jsx(_o,{active:D,text:D?"Active":"Paused",onChange:M,disabled:C,testId:"automation-status-switch"})},[v.id,v.status,v.trigger.type,M,C]),R=d.useCallback(D=>{const P=bB(D);b(P)},[b]),O=d.useCallback(()=>{m(!1)},[]);return d.useEffect(()=>{n&&!g&&e&&(R(n),y(!0))},[R,g,n,e]),d.useEffect(()=>{e||y(!1)},[e]),o.jsxs(o.Fragment,{children:[o.jsx(qt,{isOpen:e,onClose:x,title:hft({intl:l,triggerType:v.trigger.type}),titleTextVariant:"base",footerContent:j,actionList:k,footerClassname:"!pt-4",wrapperClassname:"!w-full",children:o.jsx(A4,{configuration:v,onConfigurationChange:R,errorMessage:(i||p)??void 0,onError:h})}),o.jsx(hc,{message:f?gft({intl:l,triggerType:v.trigger.type,actionPerformed:f}):"",variant:"success",isVisible:!!f,handleClose:O})]})});I4.displayName="AutomationModal";const wHt=Object.freeze(Object.defineProperty({__proto__:null,AutomationModal:I4},Symbol.toStringTag,{value:"Module"})),Oje=(e,t)=>{const{value:n,loading:r}=jt({flag:"tasks-price-alerts-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},R4=(e,t)=>{const{value:n,loading:r}=jt({flag:"tasks-settings-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},CHt=(e,t)=>{const n={selectedOption:"price",priceValue:"",percentValue:T4,positiveSelected:!0,negativeSelected:!0,additionalInstructions:"",selectedSymbol:t??null,inputValue:t??""};if(!e)return n;const{subscription:r,prompt:s}=e,a=r?Cje({prompt:s,symbol:r.event_entity}):qWt(s).additionalInstructions,i={...n,additionalInstructions:a};if(!r)return i;const{event_type:l,value_lower_bound:c,value_upper_bound:u,event_entity:f}=r;if(i.selectedSymbol=f??null,i.inputValue=f??"",l==="STOCK_PRICE_TARGET")i.selectedOption="price",u&&u!==ef?i.priceValue=`$${u}`:c&&c!==tf&&(i.priceValue=`$${c}`);else if(l==="STOCK_PRICE_MOVEMENT"){i.selectedOption="movement";const m=u!=null&&u!==ef,p=c!=null&&c!==tf;i.positiveSelected=m,i.negativeSelected=p,m?i.percentValue=`${u}`:p&&(i.percentValue=`${Math.abs(c)}`)}return i},Dje=I.memo(({symbol:e,buttonProps:t,watchlistAddedForSymbol:n,modalOpenedSource:r})=>{const{trackEvent:s}=Te(),a=d.useMemo(()=>{try{return decodeURIComponent(e.toUpperCase())}catch{return e.toUpperCase()}},[e]),{data:i,isLoading:l}=Ue({queryKey:["getFinanceTicker",a],queryFn:()=>z_t({ticker:a,reason:"finance-ticker-supported-check"}),staleTime:1/0}),[c,u]=d.useState(!1),{isMobileStyle:f}=xe(),{$t:m}=Z(),p=!!i?.supported,h=!!(i?.supported&&n),g=n?`finance-alert-watchlist-${a}`:"finance-alert-page-visit",y=(p||h)&&!c,{variation:x,loading:v}=R4(!1),{variation:b,loading:_}=Oje(!1),w=d.useCallback(()=>u(!1),[]),C=d.useCallback(()=>{s("price alert modal opened",{source:r}),u(!0)},[r,s]);return l||!i?.supported||v||_?null:o.jsxs(o.Fragment,{children:[o.jsx(VT,{cueKey:g,title:m({defaultMessage:"Set an alert for {ticker}",id:"bb+ueMBxHa"},{ticker:a}),enabled:y,placement:"bottom",size:"sm",children:o.jsx(me,{text:f?void 0:m({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),size:"small",variant:"border",icon:Rce,onClick:C,...t})},g),x&&b?o.jsx(I4,{open:c,onClose:w,source:"settings_create",initialConfiguration:i0e({symbol:e})}):o.jsx(P4,{isOpen:c,onClose:w,symbol:a})]})});Dje.displayName="FinanceAddAlertIfSupported";const P4=I.memo(({isOpen:e,onClose:t,symbol:n,task:r})=>{const s=vt(),{deprecatedOpenToast:a}=fn(),i=!!r,[l,c]=d.useState(null),[u,f]=d.useState("price"),{isMobileStyle:m}=xe(),[p,h]=d.useState(""),{$t:g}=Z(),[y,x]=d.useState(n??null),[v,b]=d.useState(!1),{data:_}=Ue({queryKey:eb({symbol:y}),queryFn:()=>Yd({symbol:y}),enabled:!!y&&e,refetchInterval:5*1e3}),[w,C]=d.useState(""),[S,E]=d.useState(""),[k,M]=d.useState(!0),[j,R]=d.useState(!0),O=d.useMemo(()=>{if(u!=="price"||!_?.price)return;const se=parseFloat(w.replace(/[^0-9.]/g,""));if(!(isNaN(se)||se===_.price))return se>_.price?"above":"below"},[w,_?.price,u]),D=d.useCallback(()=>{b(!1),x(n??null)},[n]),{createMutation:P,updateMutation:A,deleteMutation:T}=Ije({onCreateSuccess:()=>{t(),b(!1),D(),a(g({defaultMessage:"Price alert created",id:"YccmIRCItP"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onCreateError:()=>{a(g({defaultMessage:"Failed to create price alert",id:"vkLT4iLR3O"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onUpdateSuccess:()=>{t(),b(!1),D(),a(g({defaultMessage:"Price alert updated",id:"wTPvmuiyuE"}),"success",3,void 0,g({defaultMessage:"Manage Alerts",id:"t6akfMv9BC"}),()=>{s.push("/account/tasks?tab=alerts")})},onUpdateError:()=>{a(g({defaultMessage:"Failed to update price alert",id:"Fpz5cXYABV"}),"error",3,g({defaultMessage:"Please try again",id:"fHqssj/1KO"})),b(!1)},onDeleteSuccess:()=>{t()}}),N=d.useCallback(()=>{t(),D()},[t,D]),L=d.useCallback(()=>{r&&T.mutate(r.id)},[r,T]),U=IL({selectedSymbol:y,symbol:n,quote:_,alertType:"price",priceValue:w,$t:g}),$=IL({selectedSymbol:y,symbol:n,quote:_,alertType:"movement",percentValue:S,$t:g}),V=U.baseInstructions,W=U.displayInstructions,Q=$.baseInstructions,q=$.displayInstructions;d.useEffect(()=>{if(e){const se=CHt(r,n);c(se),f(se.selectedOption),C(se.priceValue),E(se.percentValue),M(se.positiveSelected),R(se.negativeSelected),h(se.additionalInstructions),x(se.selectedSymbol)}else c(null),D()},[e,r,n,D]);const{locale:H}=Z();d.useEffect(()=>{if(i&&_?.currency&&w&&w.startsWith("$")){const se=N4(_.currency,H);se!=="$"&&C(w.replace("$",se))}},[i,_?.currency,H,w]);const K=d.useCallback(()=>{b(!0);const se=y??n;if(!se){b(!1);return}const pe=RL({symbol:se,alertType:u,priceValue:w,priceThreshold:O,percentValue:S,positiveSelected:k,negativeSelected:j,baseInstructions:u==="price"?V:Q,additionalInstructions:p});if(!pe){b(!1);return}i&&r?A.mutate({taskId:r.id,payload:pe}):P.mutate(pe)},[i,r,y,n,u,w,O,S,k,j,p,V,Q,P,A]),G=d.useMemo(()=>{if(!i||!l)return!0;const se={selectedOption:u,priceValue:w,percentValue:S,positiveSelected:k,negativeSelected:j,additionalInstructions:p,selectedSymbol:y},{inputValue:ae,...pe}=l;return!cs(se,pe)},[i,l,u,w,S,k,j,p,y]),ee=d.useMemo(()=>{const se=w.replace(/[^0-9.]/g,""),ae=S.replace("%","");return u==="price"?!y||!se||!O:!y||!ae},[y,u,w,S,O]),Y=d.useMemo(()=>ee||!G,[ee,G]),te=d.useMemo(()=>[{text:g({id:"47FYwba+bI",defaultMessage:"Cancel"}),onClick:N,variant:"border"},{text:g(i?{id:"KjhtiKJItq",defaultMessage:"Edit Alert"}:{id:"KHrQobwBBl",defaultMessage:"Add Alert"}),onClick:K,variant:"primary",disabled:i?Y:ee,isLoading:v}],[K,g,ee,v,N,i,Y]);return o.jsxs(qt,{isOpen:e,onClose:t,title:g({id:"hrmMcFoV7/",defaultMessage:"Price Alert"}),variant:m?"bottom-sheet":"default",children:[o.jsx("div",{className:"gap-md flex min-h-[60vh] flex-col md:min-h-0",children:o.jsx(FH,{variant:"full",selectedSymbol:y,selectedOption:u,onSymbolChange:x,onOptionChange:f,showSymbolInput:!i,currentPrice:_?.price,priceValue:w,onPriceValueChange:C,percentValue:S,onPercentValueChange:E,positiveSelected:k,onPositiveChange:M,negativeSelected:j,onNegativeChange:R,additionalInstructions:p,onAdditionalInstructionsChange:h,displayPriceInstructions:W,displayMovementInstructions:q,externalInputValue:l?.inputValue,currency:_?.currency??void 0})}),o.jsxs("div",{className:"mt-md flex w-full items-center justify-between",children:[o.jsx("div",{children:i&&o.jsx(me,{text:g({id:"K3r6DQW7h+",defaultMessage:"Delete"}),variant:"border",onClick:L,isLoading:T.isPending})}),o.jsx("div",{className:"gap-sm md:-mb-md flex items-center",children:te.map(se=>o.jsx(me,{text:se.text,onClick:se.onClick,variant:se.variant,disabled:se.disabled,isLoading:se.isLoading},se.text))})]})]})});P4.displayName="FinanceAlertModal";const SHt=Object.freeze(Object.defineProperty({__proto__:null,FinanceAddAlertIfSupported:Dje,FinanceAlertModal:P4},Symbol.toStringTag,{value:"Module"})),Fp=(e,t)=>{const{value:n,loading:r}=jt({flag:"tasks-automations-rename",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},Fje=I.memo(({isOpened:e,onOpen:t,onClose:n,onEdit:r})=>{const s=Z(),a=vt(),{isMobileStyle:i}=xe(),{variation:l,loading:c}=Fp(!1),u=d.useMemo(()=>[{type:"default",text:s.formatMessage({defaultMessage:"Edit",id:"wEQDC6Wv3/"}),onClick:r,testId:"task-widget-edit"},{type:"default",text:l?s.formatMessage({defaultMessage:"View Automations",id:"ykWUMgOBHX"}):s.formatMessage({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),rightElement:o.jsx("div",{className:"flex items-center",children:o.jsx(Xn,{size:16})}),onClick:()=>{a.push("/account/tasks")},testId:"task-widget-view-tasks"}],[s,r,l,a]);return c?null:o.jsx(nn,{placement:"bottom-start",items:u,onOpen:t,onClose:n,isMobileStyle:i,children:o.jsx(Me,{size:"tiny",icon:dce,extraCSS:B("",{"!text-foreground !bg-subtle":e})})})});Fje.displayName="TaskWidgetMenu";const EHt=e=>({id:e.id,title:e.title,prompt:e.prompt,schedule:XE(e.scheduleInfo),searchModel:e.searchModel,sources:e.sources||["web"]}),Joe=(e={})=>e.prefill?e.prefill:e.initial?EHt(e.initial):{...ift(),searchModel:le.PRO},h0=({text:e,onClick:t,variant:n="secondary",disabled:r=!1})=>o.jsx(me,{text:e,onClick:t,disabled:r,testId:`task-modal-${e.toLowerCase()}-button`,variant:n==="secondary"?"common":"inverted",extraCSS:B("min-w-[100px]")}),MHt=(e,t)=>e.schedule.kind==="ONCE"&&new Date(e.schedule.year,e.schedule.month,e.schedule.day,e.schedule.hour,e.schedule.minute)<=new Date(Date.now())?{ok:!1,message:t({defaultMessage:"Please schedule this task for a future time.",id:"loBg9tvLRE"})}:{ok:!0};function UH({open:e,onClose:t,onSuccess:n,initial:r,prefill:s,errorMessage:a,source:i}){const l="task-modal",{formatMessage:c}=Z(),{trackEvent:u}=Te(),{configuredModel:f}=ir();d.useEffect(()=>{e&&u("task modal opened",{source:i})},[e,i,u]);const[m,p]=d.useState(a),{createMutation:h,updateMutation:g,deleteMutation:y,isMutationLoading:x,invalidateAndClose:v}=Pje({reason:l,source:i,onSuccess:d.useCallback(A=>{n?.(A),t?.()},[n,t]),onError:p}),b=d.useRef(r?nG(r):void 0);d.useEffect(()=>{e&&(b.current=r?nG(r):void 0)},[e,r]);const[_,w]=d.useState(()=>Joe({initial:r,prefill:s})),C=d.useMemo(()=>vo[_.searchModel]??ue.SEARCH,[_.searchModel]);d.useEffect(()=>{p(e?a:void 0)},[e,a]),d.useEffect(()=>{e&&w(Joe({initial:r,prefill:s}))},[e,r,s,f]),d.useEffect(()=>{const A=su(C);w(T=>({...T,searchModel:A}))},[C]);const S=!!b.current,E=b.current?.status==="PAUSED",k=b.current?.status==="COMPLETED",M=A=>w(T=>({...T,...A})),j=A=>w(T=>({...T,schedule:{...T.schedule,...A}})),R=()=>{p(void 0);const A=MHt(_,c);if(!A.ok){p(A.message);return}S?g.mutate({id:b.current.id,payload:{task_name:_.title,prompt:_.prompt,schedule:O0(_.schedule),status:"ACTIVE",model_preference:_.searchModel,sources:_.sources}},{onSuccess:()=>{u("task modal action",{source:i,action:"updated"}),v("updated",b.current.id)}}):h.mutate({task_id:_.id,task_name:_.title,prompt:_.prompt,schedule:O0(_.schedule),model_preference:_.searchModel,sources:_.sources},{onSuccess:()=>{u("task modal action",{source:i,action:"created"})}})},O=d.useMemo(()=>{if(!S)return!0;const A=_.prompt!==b.current?.prompt,T=b.current.scheduleInfo,N=O0(_.schedule),L=!cs(N.rrule,T.rrule)||!cs(N.tzid,T.tzid),U=_.schedule.kind==="ONCE"&&N.start_at!==T.start_at,$=_.searchModel!==b.current?.searchModel,V=!cs(_.sources||["web"],b.current?.sources||["web"]);return A||(L||U||$)||V},[S,_,b]),{variation:D,loading:P}=Fp(!1);return P?null:o.jsx(qt,{isOpen:e,onClose:t,title:c(D?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),titleTextVariant:"base",modalContentClassname:"!pb-4 md:!pb-4",children:o.jsxs("div",{className:"flex flex-col gap-4",children:[o.jsx(j4,{trigger:{type:lt.SCHEDULED,schedule:_.schedule},prompt:_.prompt,onPromptChange:A=>M({prompt:A}),error:m}),o.jsx(DH,{schedule:_.schedule,onScheduleChange:j}),o.jsx(E4,{searchModel:_.searchModel,onSearchModelChange:A=>M({searchModel:A}),sources:_.sources||["web"],onSourcesChange:A=>M({sources:A})}),o.jsxs(z,{variant:"background",className:"mt-md pt-md -mx-md px-md flex items-center justify-between border-t",children:[S&&o.jsxs("div",{className:"flex gap-4",children:[!k&&o.jsx(h0,{text:c(E?{defaultMessage:"Resume",id:"3y9DGgura7"}:{defaultMessage:"Pause",id:"tFFMkFDBMO"}),onClick:()=>g.mutate({id:b.current.id,payload:{status:E?"ACTIVE":"PAUSED"}},{onSuccess:()=>{const A=E?"resumed":"paused";u("task modal action",{source:i,action:A}),v(A,b.current.id)}}),disabled:x}),o.jsx(h0,{text:c({defaultMessage:"Delete",id:"K3r6DQW7h+"}),onClick:()=>y.mutate(b.current.id),disabled:x})]}),o.jsxs("div",{className:"ml-auto flex gap-4",children:[o.jsx(h0,{text:c({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:()=>t?.()}),o.jsx(h0,{text:c({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",disabled:x||!_.prompt||!O,onClick:R})]})]})]})})}const kHt=Object.freeze(Object.defineProperty({__proto__:null,FormButton:h0,default:UH},Symbol.toStringTag,{value:"Module"}));var eie={};const THt=()=>o.jsxs(un,{className:"flex w-full items-center justify-between gap-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"bg-subtle size-4 shrink-0 rounded"}),o.jsx("div",{className:"bg-subtle h-4 w-32 rounded"})]}),o.jsx("div",{className:"bg-subtle h-4 w-20 rounded"})]}),Uje=I.memo(({data:e})=>{const{$t:t}=Z(),{suggested_prompt:n,suggested_schedule:r,widget_uuid:s}=e,a=d.useMemo(()=>({id:s,title:"",prompt:n,schedule:r?XE(r):Bs(),searchModel:le.PRO}),[n,r,s]),i=Nn(),l=d.useCallback(()=>{if(!eie.NEXT_PUBLIC_IS_SIDECAR_BUILD)throw new Error("handleOpenTaskFromSidecar can only be called in sidecar mode");i.openTab({url:`${window.location.origin}${tn.Tasks.href}`})},[i]),[c,u]=d.useState(!1),[f,m]=d.useState(!1),[p,h]=d.useState(!1),[g,y]=d.useState(null),[x,v]=d.useState(!1);d.useEffect(()=>{if(!g)return;const $=setTimeout(()=>{y(null)},2e3);return()=>clearTimeout($)},[g]);const b=Z(),{data:_,isLoading:w}=Ue({queryKey:EF(s),queryFn:()=>q3({taskId:s,reason:"task-widget"})}),C=d.useCallback(()=>{_?.type==="ALERT"&&_?.subscription?h(!0):m(!0)},[_]),S=d.useMemo(()=>{if(!_)return null;if(_.type==="ALERT"&&_.subscription)return cct({..._.subscription,event_type:_.subscription.event_type},b);const $=XE(_.scheduleInfo);return{kind:lft($.kind,b),friendly:aft($,b),isRecurring:$.kind!=="ONCE"}},[_,b]),E=d.useMemo(()=>{if(!_)return"";if(_.type==="ALERT"&&_.subscription){const{subscription:$}=_,V=$.event_entity||"",W=$.event_type==="STOCK_PRICE_TARGET",Q=$.event_type==="STOCK_PRICE_MOVEMENT";if(W){const q=$.value_upper_bound||$.value_lower_bound;if(q)return`${V} reaches $${q}`}else if(Q){const q=$.value_upper_bound||0,H=$.value_lower_bound||0,K=q>0,G=H<0;if(K&&G)return`${V} moves ${q}%`;if(K)return`${V} rises ${q}%`;if(G)return`${V} falls ${Math.abs(H)}%`}return`Price alert for ${V}`}return _.prompt},[_]),k=d.useMemo(()=>{if(!g)return null;const $=g==="created"?o.jsx(ie,{defaultMessage:"Task created",id:"991WgJt61N"}):g==="updated"?o.jsx(ie,{defaultMessage:"Task updated",id:"sQGGdcVjgL"}):g==="deleted"?o.jsx(ie,{defaultMessage:"Task deleted",id:"kGP3l1jr/4"}):g==="paused"?o.jsx(ie,{defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}):o.jsx(ie,{defaultMessage:"Task resumed",id:"fqAqWnF85q"});return o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Fa,{className:"text-super",size:16}),o.jsx(F,{variant:"small",color:"super",className:"truncate",children:$})]})},"confirmed")},[g]),{variation:M,loading:j}=Fp(!1),R=d.useCallback(()=>{v(!1)},[]),O=d.useCallback(()=>v(!0),[]),D=d.useMemo(()=>t(M?{defaultMessage:"Automation",id:"Fn4YKyl4lm"}:{defaultMessage:"Task",id:"0wJ7N+noSq"}),[t,M]),P=d.useMemo(()=>o.jsx(ar,{size:12}),[]),A=d.useCallback(()=>{m(!1),v(!1)},[]),T=d.useCallback(()=>{h(!1),v(!1)},[]),N=d.useCallback($=>{m(!1),v(!1),y($)},[]),L=d.useCallback(()=>{u(!0)},[]),U=d.useCallback(()=>{u(!1)},[]);return j?null:o.jsx(Fi,{widgetType:"task",widgetName:"task",widgetSize:"mini",children:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"bg-subtler border-subtlest p-md group relative flex h-14 items-center justify-between gap-2 rounded-xl border transition-transform duration-200 hover:scale-[1.01] hover:transform",onMouseEnter:O,onMouseLeave:R,children:o.jsx(Ye,{mode:"wait",children:w?o.jsx(THt,{}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"flex min-w-0 shrink items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:_?.type==="ALERT"&&_?.subscription?o.jsx(Rce,{size:16,className:"text-quiet shrink-0"}):o.jsx(mp,{size:16,className:"text-quiet shrink-0"})}),o.jsx("div",{className:"flex w-full min-w-0 flex-col items-start",children:_?o.jsx(F,{variant:"small",color:"default",className:"w-full truncate",children:E}):o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"small",color:"default",className:"w-full truncate",children:n}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"truncate",children:o.jsx(ie,{defaultMessage:"Create a task to get this sent automatically.",id:"1AmBIpC9N9"})})]})})]}),eie.NEXT_PUBLIC_IS_SIDECAR_BUILD?o.jsx(Me,{size:"tiny",icon:Ru,onClick:l}):o.jsx(Ye,{mode:"wait",children:k||(S?o.jsx("div",{className:"flex min-w-0 shrink-0 items-center gap-1.5",children:(x||c)&&_?o.jsx(Fje,{isOpened:c,onOpen:L,onClose:U,onEdit:C}):o.jsxs(o.Fragment,{children:[S.isRecurring&&o.jsx(QLe,{size:16,className:"shrink-0"}),o.jsx(F,{className:"truncate",variant:"small",children:S.kind}),o.jsx(F,{className:"truncate",variant:"small",color:"light",children:S.friendly})]})}):o.jsx(ve.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},transition:{duration:.2,ease:an},children:o.jsx(me,{text:D,leadingComponent:P,size:"small",onClick:C})},"default"))})]})})}),o.jsx(gc,{children:o.jsx(UH,{source:"task_widget",open:f,prefill:_?void 0:a,initial:_??void 0,onClose:A,onSuccess:N})}),_&&o.jsx(P4,{isOpen:p,onClose:T,task:_,symbol:_.subscription?.event_entity})]})})});Uje.displayName="TaskWidget";const Bje=I.memo(e=>{const{data:t}=e,{menuItems:n}=$x();return o.jsx(Fi,{widgetType:"time",widgetName:"time",widgetSize:"full",children:o.jsxs(z,{className:"flex w-full",children:[o.jsx(F,{children:o.jsx(z,{className:"mr-md pr-md border-r font-mono text-4xl",children:t.time})}),o.jsxs("div",{children:[o.jsx(F,{variant:"smallBold",children:t.date}),o.jsx(F,{variant:"small",color:"light",children:t.location?`${t.location}`:null})]}),n&&n.length>0&&o.jsx("div",{className:"-mr-sm -mt-sm flex grow justify-end",children:o.jsx("div",{children:o.jsx(yr.Menu,{menuItems:n})})})]})})});Bje.displayName="TimeWidget";const $je=I.memo(e=>{const{data:t}=e,{duration_seconds:n}=t,{menuItems:r}=$x(),{result:s}=pn(),a=s?.uuid,i=d.useMemo(()=>`timer_widget_state_${a}_${n}`,[a,n]),[l,c]=d.useState(!1),[u,f]=d.useState(!1),[m,p]=d.useState(null),[h,g]=d.useState(n*1e3),[y,x]=d.useState(!0),[v,b]=d.useState(!1),_=d.useRef(void 0),w=d.useRef(void 0),C=d.useRef(!1),S=d.useRef(null);d.useEffect(()=>{if(!a)return;const P=De.getItem(i);if(P)try{const A=JSON.parse(P),T=Date.now();if(A.status==="expired"){f(!0),g(0),p(null);return}if(A.pausedAt&&A.remainingMillis!==void 0)c(!0),g(A.remainingMillis),p(null);else if(A.endTime){const N=A.endTime-T;if(N>0)p(A.endTime),g(N),c(!1);else{g(0),p(null),f(!0);const L={status:"expired",endTime:0,remainingMillis:0};De.setItem(i,JSON.stringify(L))}}}catch{De.removeItem(i)}else{const A=Date.now()+n*1e3;p(A),c(!1)}},[i,n,a]),d.useEffect(()=>{if(!a||u)return;const P=l?{status:"paused",endTime:0,pausedAt:Date.now(),remainingMillis:h}:{status:"running",endTime:m||Date.now()+h};De.setItem(i,JSON.stringify(P))},[h,l,m,i,u,a]);const E=d.useCallback(()=>{if(C.current||u)return;C.current=!0,g(0),p(null),f(!0),b(!0);const P={status:"expired",endTime:0,remainingMillis:0};De.setItem(i,JSON.stringify(P)),!y&&S.current&&S.current.play().catch(()=>{})},[i,u,y]),k=d.useCallback(()=>{if(!l&&m){const P=Date.now(),A=m-P;A>0?(g(A),_.current=requestAnimationFrame(k)):E()}},[l,m,E]);d.useEffect(()=>{if(!l&&m&&h>0&&!u){_.current=requestAnimationFrame(k);const P=m-Date.now();P>0&&(w.current=window.setTimeout(E,P))}return()=>{_.current&&cancelAnimationFrame(_.current),w.current&&clearTimeout(w.current)}},[l,m,h,u,k,E]),d.useEffect(()=>{const P=()=>{if(!document.hidden&&!l&&m){const A=Date.now(),T=m-A;T>0?g(T):E()}};return document.addEventListener("visibilitychange",P),()=>{document.removeEventListener("visibilitychange",P)}},[l,m,E]);const M=d.useCallback(()=>{if(!u)if(l){const P=Date.now()+h;p(P),c(!1)}else c(!0),p(null)},[u,l,h]),j=d.useCallback(()=>{_.current&&(cancelAnimationFrame(_.current),_.current=void 0),w.current&&(clearTimeout(w.current),w.current=void 0),C.current=!1;const P=Date.now()+n*1e3;f(!1),c(!1),g(n*1e3),p(P)},[n]),R=d.useCallback(()=>{x(P=>!P)},[]),O=d.useCallback(()=>{b(!1),S.current&&(S.current.pause(),S.current.currentTime=0)},[]),D=d.useMemo(()=>{const P=Math.ceil(h/1e3),A=Math.floor(P/3600),T=Math.floor(P%3600/60),N=Math.floor(P%60),L=T.toString().padStart(2,"0"),U=N.toString().padStart(2,"0");return A>0?`${A}:${L}:${U}`:`${L}:${U}`},[h]);return o.jsx(Fi,{widgetType:"timer",widgetName:"timer",widgetSize:"full",children:o.jsxs(z,{className:B("relative flex transition-all duration-200",{"hover:scale-[1.01]":v}),children:[v&&o.jsxs(o.Fragment,{children:[o.jsx("button",{className:"-m-md absolute inset-0 z-20 cursor-pointer rounded-xl",onClick:O,title:"Click anywhere to stop alarm","aria-label":"Stop alarm"}),o.jsx("div",{className:"-m-md to-attention/20 from-negative/20 absolute inset-0 animate-pulse rounded-xl bg-gradient-to-br"})]}),o.jsxs("div",{className:"relative z-10 flex w-full items-center",children:[o.jsxs(z,{className:"gap-sm flex items-center",children:[o.jsx(me,{variant:"primaryGhost",size:"small",onClick:M,icon:l?lce:ice,disabled:u,pill:!0}),o.jsx(me,{variant:"primaryGhost",size:"small",onClick:j,icon:XLe,"aria-label":"Restart timer",disabled:v,pill:!0})]}),o.jsx(F,{className:"flex-1",children:o.jsx(z,{className:`pl-lg font-mono text-2xl ${v?"text-negative":""}`,children:D})}),o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(VT,{cueKey:`timer-unmute-${a}`,title:"Tap to unmute",enabled:y&&!u,placement:"top",sideOffset:8,variant:"common",size:"xs",children:o.jsx(me,{variant:"primaryGhost",size:"small",onClick:R,icon:y?cce:uce,disabled:u,pill:!0})}),r&&r.length>0&&o.jsx(yr.Menu,{menuItems:r})]})]}),o.jsx("audio",{ref:S,src:"https://r2cdn.perplexity.ai/Hole_In_One.wav?v=1",preload:"auto",style:{display:"none"},loop:!0})]})})});$je.displayName="TimerWidget";function Vje(){const[e,t]=d.useState(!1),n=Bu(),r=d.useCallback(s=>{sn(iY,s.toString()),t(s)},[t]);return d.useEffect(()=>{const s=Sn(iY);t(s==="true"||s===void 0&&n!=="US")},[n]),d.useMemo(()=>({prefersMetric:e,setPrefersMetric:r}),[e,r])}const Wje=I.memo(({day:e,icon:t,high:n,low:r,selected:s})=>o.jsxs("div",{className:"relative col-span-1",children:[s&&o.jsx(ve.div,{layoutId:"selected-forecast-item",className:"-inset-sm absolute right-0",transition:Is,children:o.jsx("div",{className:"absolute inset-0 rounded-md bg-white opacity-10"})}),o.jsxs("div",{className:"relative flex flex-col items-start",children:[o.jsx(F,{color:"white",children:o.jsx(de,{icon:t,size:"xl",className:"mb-xs -ml-two"})}),o.jsx(F,{variant:"smallBold",color:"white",children:e}),o.jsxs("div",{className:"mt-xs gap-x-xs flex",children:[o.jsx(F,{variant:"smallCaps",color:"white",className:"gap-x-two flex",children:o.jsxs("span",{children:[n,""]})}),o.jsx(F,{variant:"smallCaps",color:"white",className:"gap-x-two flex opacity-75",children:o.jsxs("span",{children:[r,""]})})]})]})]}));Wje.displayName="ForecastItem";const tie=e=>e.time,nie=e=>e.temp,NHt="white",rie="white",bR="rgba(255, 255, 255, 0.5)",sie="rgba(255, 255, 255, 0.3)",aie="font-mono text-[11px]",Bv={top:30,right:0,bottom:5,left:0},jHt=100,AHt=35,IHt=40,BH=130,Hje=I.memo(({forecast:e,activeDay:t,isMetric:n})=>{const r=zy(),[s,a]=d.useState(!1),{locale:i}=Z(),l=d.useMemo(()=>e.map(j=>j?.hour?.map(R=>({time:new Date(R.time),temp:n?R.temp_c:R.temp_f}))),[e,n]),c=d.useMemo(()=>co(l.flat(),nie),[l]),u=d.useMemo(()=>l[t]??[],[t,l]),f=d.useRef(null),{width:m,height:p}=uH(f),h=m/jHt,{xRange:g,yRange:y}=ww({width:m,height:p,margin:Bv,maxYLabelWidth:AHt}),x=d.useMemo(()=>Tp({range:g,domain:co(u,tie),round:!0}),[u,g]),v=p/IHt,b=d.useMemo(()=>Qd({range:y,domain:c,nice:!0,round:!0}),[y,c]),_=d.useMemo(()=>Hu().x(j=>x(tie(j))).y(j=>b(nie(j))).curve(TSt),[x,b]),w=d.useMemo(()=>_(u),[_,u]),C=d.useCallback(j=>`${j}`,[]),S=d.useCallback(j=>typeof j=="number"?j.toString():j.toLocaleString(i,{hour:"numeric",minute:"numeric",hour12:!0}).replace(":00",""),[i]),E=d.useCallback((j,R,O)=>({className:aie,fill:rie,dx:R===0?"-0.3em":R===O.length-1?"0.3em":"0",dy:"0.3em",textAnchor:R===0?"start":R===O.length-1?"end":"middle"}),[]),k=d.useMemo(()=>({className:aie,textAnchor:"start",dx:"0.75em",dy:"-0.5em",fill:rie}),[]);d.useEffect(()=>{requestAnimationFrame(()=>{a(!0)})},[]);const M=fH(w,!0,!r&&s?200:0);return o.jsx("div",{className:"relative",ref:f,style:{height:BH},children:o.jsxs(zx,{width:m,height:p,children:[o.jsx(Jd,{orientation:Pa.bottom,scale:x,top:p,stroke:bR,hideAxisLine:!0,numTicks:h,tickStroke:sie,tickLabelProps:E,tickFormat:S}),o.jsx(Jd,{orientation:Pa.left,left:Bv.left,hideAxisLine:!0,tickFormat:C,scale:b,stroke:bR,tickStroke:sie,hideTicks:!0,tickLabelProps:k,numTicks:v}),o.jsx(Lp,{left:Bv.left,scale:b,width:m-Bv.right-Bv.left*2,strokeDasharray:"2,2",stroke:bR,pointerEvents:"none",numTicks:v}),o.jsx(yu.path,{d:M,stroke:NHt,strokeWidth:2,fill:"none",strokeLinecap:"round",shapeRendering:"geometricPrecision",transition:Is})]})})});Hje.displayName="HourlyTemperature";const RHt=Object.freeze(Object.defineProperty({__proto__:null,HOURLY_TEMPERATURE_HEIGHT:BH,HourlyTemperature:Hje},Symbol.toStringTag,{value:"Module"})),PHt=he(async()=>{const{HourlyTemperature:e}=await X(async()=>{const{HourlyTemperature:t}=await Promise.resolve().then(()=>RHt);return{HourlyTemperature:t}},void 0);return{default:e}},{loading:()=>o.jsx("div",{style:{height:BH}})}),zje=I.memo(e=>{const{$t:t}=Z(),{prefersMetric:n,setPrefersMetric:r}=Vje(),s=n,[a,i]=d.useState(0),[l,c]=d.useState(!1),u=e,{menuItems:f}=$x(),{openModal:m}=xt(),{permissionStatus:p}=fx(),{submitQuery:h}=Sa(),{trackEvent:g}=Te(),{locale:y}=Z(),{value:x}=BF({flag:"weather-provider",defaultValue:"weatherapi",subjectType:"visitor_id"}),v=d.useCallback(()=>{g("precise location modal opened",{origin:"weather_widget"}),m("locationPermissionModal",{onPermissionGranted:R=>{c(!1);const O=bo();h({rawQuery:"weather",copilotOverride:!1,attachments:[],collection:null,newFrontendContextUUID:O,promptSource:"device_location_request",querySource:"device_location_request",deviceLocation:{latitude:R.coords.latitude,longitude:R.coords.longitude},shouldRedirectToBackendUUID:!0})},origin:"weather_widget"})},[g,m,h]);d.useEffect(()=>{p!==void 0&&p!=="granted"&&c(!0)},[p]);const b=d.useCallback(()=>{window.open(u.url||"https://www.accuweather.com/","_blank")},[u.url]);if(!u||!u.current||!u.location)return null;const{current:_,location:w,forecast:C}=u,S=C[0],E=_.condition?.icon,k=Dk(vT,E)?ib[E]:zb,M="col-span-1",j=a===0?_.condition?.icon||"clear-day":C[a]?.icon||"clear-day";return o.jsx(Fi,{widgetType:"weather",widgetName:"weather_forecast",widgetSize:"full",children:o.jsxs(z,{className:"p-md relative select-none",children:[o.jsx(Ye,{initial:!1,mode:"popLayout",children:o.jsx(ve.div,{className:"absolute inset-0",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0,transition:{duration:.3,delay:.3,ease:ha}},transition:{opacity:{duration:.2,ease:ha}},children:o.jsx(jM,{variant:j})},j)}),o.jsxs(z,{className:"gap-md relative flex flex-col drop-shadow-sm",children:[o.jsxs("div",{className:"gap-x-xl flex",children:[o.jsx(z,{className:M,children:o.jsx("div",{className:"flex h-full items-center",children:o.jsxs(F,{className:"gap-x-md flex items-center",color:"white",children:[o.jsx(de,{icon:k,size:40,className:"-mt-xs -ml-two"}),o.jsxs("div",{className:"flex items-baseline",children:[o.jsx("div",{className:"font-mono text-4xl",children:o.jsx(ec,{value:s?_.temp_c??0:_.temp_f??0,suffix:""})}),o.jsxs("div",{className:"ml-xs mt-two flex gap-px",children:[o.jsx("button",{onClick:()=>r(!1),className:"cursor-pointer appearance-none",children:o.jsx(F,{color:"white",className:s?"opacity-60":void 0,children:o.jsx("div",{className:"font-mono",children:"F"})})}),o.jsx("button",{onClick:()=>r(!0),className:"ml-xs cursor-pointer appearance-none",children:o.jsx(F,{color:"white",className:s?void 0:"opacity-60",children:o.jsx("div",{className:"font-mono",children:"C"})})})]})]})]})})}),o.jsxs(z,{className:M,children:[_.condition&&o.jsx(F,{variant:"section-title",className:"mb-1 leading-tight",color:"white",children:_.condition.text}),o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(F,{variant:"smallCaps",color:"white",children:o.jsx(ec,{value:s?S?.maxtemp_c??0:S?.maxtemp_f??0,suffix:""})}),o.jsx(F,{variant:"smallCaps",className:"flex opacity-70",color:"white",children:o.jsx(ec,{value:s?S?.mintemp_c??0:S?.mintemp_f??0,suffix:""})})]})]})]}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsxs(z,{className:"flex flex-col items-start justify-center",children:[o.jsx("div",{className:"gap-sm relative flex items-center",children:o.jsxs(Vo,{className:"gap-xs text-xs text-white",children:[o.jsx(An,{id:"location-name",children:o.jsxs(F,{variant:"smallBold",className:"text-right",color:"white",children:[w.name,w.is_usa?w.region?`, ${w.region}`:"":`, ${w.country}`]})}),l&&o.jsx(An,{id:"precise",children:o.jsx(Me,{onClick:v,size:"small",extraCSS:"!text-white hover:underline hover:opacity-100 !p-0 !h-0 decoration-white/50 decoration-offset-[4px] opacity-70 !font-normal",pill:!0,variant:"noBackground",text:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})})]})}),w.localtime&&o.jsx(F,{variant:"tinyRegular",color:"white",className:"opacity-75",children:Dtt(w.localtime,y)})]}),f&&f?.length>0&&o.jsx("div",{className:"absolute right-0 top-0",children:o.jsx(yr.Menu,{buttonClass:"!text-white opacity-40 hover:opacity-100 hover:!bg-white/10",menuItems:f})})]})]}),o.jsx(z,{className:"mt-xl relative grid grid-cols-3 gap-x-4 gap-y-6 drop-shadow-sm md:grid-cols-6",children:C.map((R,O)=>o.jsx("button",{onClick:()=>i(O),className:O!==a?"duration-150 hover:opacity-70 active:scale-[0.98]":"",children:o.jsx(Wje,{day:Kge(R.dow??"",y),high:(s?R.maxtemp_c:R.maxtemp_f)??0,low:(s?R.mintemp_c:R.mintemp_f)??0,icon:ib[R.icon],selected:a===O})},O))}),o.jsx(z,{className:"mt-sm",children:o.jsx(PHt,{forecast:C,activeDay:a,isMetric:s})}),x==="accuweather"&&o.jsx(z,{className:"mt-lg flex cursor-pointer justify-end",onClick:b,children:o.jsxs(F,{variant:"micro",color:"white",className:"mt-xs gap-xs -mb-sm -mr-xs flex items-center opacity-65 hover:opacity-40",children:["The AccuWeather",o.jsx("sup",{className:"-ml-xs",children:""})," Forecast",o.jsx(de,{icon:ba,size:"xs"})]})})]})})});zje.displayName="WeatherWidget";const Gje=()=>null,LHt=he(()=>X(()=>import("./index-uyfhB3Dg.js"),__vite__mapDeps([118,1,2,5,7,6])),{loading:()=>o.jsx(Gje,{})}),OHt=he(async()=>{const{CharityWidget:e}=await X(async()=>{const{CharityWidget:t}=await import("./CharityWidget-DEvVc70K.js");return{CharityWidget:t}},__vite__mapDeps([119,1,2,5,42,43,44,45,6,7]));return{default:e}},{loading:()=>o.jsx(Gje,{})}),qje=I.memo(({widgetData:e,menuItems:t,tableCitationOffset:n})=>{const r=hw(e);return r?Qr(r).with({object:"CalculatorWidget"},s=>o.jsx(yr,{menuItems:t,children:o.jsx(q5e,{...s})})).with({object:"FinanceWidget"},()=>null).with({object:"CrunchbaseWidget"},s=>o.jsx(yr,{menuItems:t,variant:"noChrome",children:o.jsx(LHt,{...s})})).with({object:"PlaceWidget"},()=>null).with({object:"ShopifyWidget"},()=>null).with({object:"JobsWidget"},()=>null).with({object:"TimeWidget"},s=>o.jsx(yr,{menuItems:t,children:o.jsx(Bje,{...s})})).with({object:"TimerWidget"},s=>o.jsx(yr,{menuItems:t,children:o.jsx($je,{...s})})).with({object:"CurrencyExchangeWidget"},s=>o.jsx(yr,{menuItems:t,className:"overflow-hidden !p-0",variant:"noChrome",children:o.jsx(WTe,{...s})})).with({object:"WeatherWidget"},s=>o.jsx(yr,{menuItems:t,variant:"noChrome",children:o.jsx(zje,{...s})})).with({object:"TableWidget"},s=>o.jsx(yr,{menuItems:t,variant:"noChrome",children:o.jsx(GNe,{tableData:s,citationOffset:n??0})})).with({object:"SportsEventsWidget"},s=>o.jsx(m0,{data:s})).with({object:"SportsIndvScheduleWidget"},s=>o.jsx(m0,{data:s})).with({object:"SportsStandingsWidget"},s=>o.jsx(m0,{data:s})).with({object:"SportsIndvEventsWidget"},s=>o.jsx(m0,{data:s})).with({object:"FlightStatusWidget"},s=>o.jsx(YTe,{data:s})).with({object:"CharityWidget"},s=>o.jsx(yr,{menuItems:t,variant:"noChrome",children:o.jsx(OHt,{...s})})).with({object:"TaskWidget"},s=>o.jsx(Uje,{data:s})).with({object:"GenericFallbackWidget"},s=>o.jsx(QTe,{...s})).otherwise(()=>(ne.warn(new Error(`No PanelComponent found for livePanelType: ${r.object}`),{widgetData:e}),null)):null});qje.displayName="LivePanel";const Kje=I.memo(({name:e,title:t,values:n,onEntityClick:r})=>{const{inFlight:s}=Ft(),a=d.useCallback(c=>{s||r(c)},[s,r]),i=B("underline-offset-2 cursor-pointer decoration-subtler hover:text-super hover:decoration-super group transition-colors duration-200 ease-in-out",{underline:!s}),l=d.useCallback(({content:c,href:u})=>{const f=u||(c.startsWith("http://")||c.startsWith("https://")?c:`https://${c}`);return o.jsxs(qe,{href:f,target:"_blank",rel:"noopener",className:i,children:[c,o.jsx(F,{className:"ml-xs inline",color:"light",variant:"tiny",children:o.jsx(de,{icon:p1,size:"xs"})})]})},[i]);return o.jsx(yr.Item,{name:e,title:t,value:n.map((c,u)=>o.jsx(Yje,{attributeValue:c,index:u,totalValues:n.length,entityStyling:i,handleEntityClick:a,renderLink:l},`${c.id}-${u}`))},e)});Kje.displayName="WikiPanelItem";const Yje=I.memo(({attributeValue:e,index:t,totalValues:n,entityStyling:r,handleEntityClick:s,renderLink:a})=>{const i=d.useMemo(()=>()=>o.jsx("div",{children:e.value}),[e.value]),l=d.useCallback(()=>s(e.value),[e.value,s]),c=d.useMemo(()=>o.jsxs(Nr,{fallback:i,children:[e.value&&o.jsx(o.Fragment,{children:e.clickable_entity?o.jsx("span",{className:r,onClick:l,children:e.value}):e.value}),e.detail&&o.jsxs("span",{className:"text-quiet ml-1",children:["(",e.source?a({content:e.detail,href:e.source}):e.detail,")"]})]}),[e.clickable_entity,e.detail,e.source,e.value,r,i,l,a]);return o.jsxs("span",{children:[c,t<n-1&&", "]})});Yje.displayName="RenderedValueFactory";const oie=0,Qje=I.memo(({data:e,isReadonly:t,submit:n,entryUUID:r})=>{const{$t:s}=Z(),{title:a,subtitle:i,attributes:l,image_url:c,source_url:u}=e,{trackEvent:f}=Te(),{firstResult:{frontend_context_uuid:m}={}}=Ft(),p=vt(),h=l.length,[g,y]=d.useState(h),x=g===h,v=l.length>2,{menuItems:b}=$x(),_=d.useCallback(()=>{f("click toggle on knowledge card",{newState:x?"collapsed":"expanded",entryUUID:r??"",type:e.type,id:e.source_url,name:e.title}),y(M=>M===oie?h:oie)},[f,x,h,r,e]),[w,{height:C}]=Ho(),S=t,E=bo(),k=d.useCallback(M=>{if(f("knowledge card link clicked",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title,label:"attributes",value:M}),n({fork:S,rawQuery:M,collection:null,newFrontendContextUUID:S?E:null,existingFrontendContextUUID:S?void 0:m,promptSource:"user",querySource:"entity_link"}),S){const j=new URLSearchParams({q:M,newFrontendContextUUID:E}),R=new URL(window.location.href);R.pathname="search/new",R.search=j.toString();const O=R.toString();p.push(O)}},[n,S,E,m,p,r,e,f]);return d.useEffect(()=>{f("knowledge card shown",{entryUUID:r??"",type:e.type,id:e.source_url,name:e.title})},[]),o.jsx("div",{className:"relative",children:o.jsx(ve.div,{animate:C>0?{height:C}:{},transition:{type:"spring",bounce:.2,duration:.2},className:"overflow-hidden",children:o.jsxs("div",{ref:w,className:"gap-md relative flex flex-col",children:[o.jsx("div",{className:"flex items-end justify-between",children:o.jsx(yr.Title,{title:a,subtitle:i,image_url:c,href:u,links:e.links,entryUUID:r??"",data:e,children:o.jsx("div",{className:"flex items-start",children:o.jsx("div",{className:"gap-sm flex items-center",children:b&&b?.length>0&&o.jsx(yr.Menu,{menuItems:b,buttonClass:"opacity-0 pointer-events-none"})})})})}),x&&o.jsx("div",{className:"gap-sm border-subtlest pt-md md:gap-x-md grid grid-cols-[auto,1fr] border-t",children:l.slice(0,g).map(M=>o.jsx(Kje,{name:M.key,title:M.title,values:M.values,onEntityClick:k},M.key))}),o.jsx("div",{children:v&&o.jsx("div",{className:"flex justify-end",children:o.jsx(me,{variant:"border",fullWidth:!0,text:s(x?{defaultMessage:"Less",id:"mFYgAXM/x4"}:{defaultMessage:"More",id:"I5NMJ8llIi"}),size:"tiny",pill:!0,onClick:_,icon:x?$y:Wn,extraCSS:"pl-xs w-[76px]"})})})]})})})});Qje.displayName="WikiPanel";function DHt(e){if(!e||!e.card_type)return null;const{primaryLink:t,otherLinks:n}=e.links.reduce((s,a)=>(a.type==="PRIMARY"&&!s.primaryLink?s.primaryLink=a:s.otherLinks.push(a),s),{primaryLink:null,otherLinks:[]}),r=e?.media_items?.[0]?.image??e?.image_urls?.[0]??"";return{source_url:t?.url??"",image_url:r,title:e?.title??"",subtitle:e.description??"",attributes:e.attributes??[],type:e.card_type,links:n}}const Xje=I.memo(({knowledgePanelData:e,isReadonly:t,submit:n,menuItems:r,entryUUID:s,className:a})=>{const i=d.useMemo(()=>e?DHt(e):null,[e]);return i?o.jsx(yr,{menuItems:r,className:a,children:o.jsx(Qje,{data:i,submit:n,isReadonly:t,entryUUID:s??""})}):null});Xje.displayName="StaticPanel";function DL(e){return e&&"is_widget"in e&&e.is_widget===!0}function FHt(e){return e&&"card_type"in e}function iie(e){return"is_code_interpreter"in e&&e.is_code_interpreter===!0&&e.is_image}const Zje=I.memo(({data:e,submit:t,isReadonly:n=!1,menuItems:r,tableCitationOffset:s,entryUUID:a})=>o.jsxs(o.Fragment,{children:[!iie(e)&&DL(e)&&o.jsx(qje,{widgetData:e,menuItems:r??ce,tableCitationOffset:s}),FHt(e)&&o.jsx(Xje,{knowledgePanelData:e,summaryData:null,submit:t,isReadonly:n,menuItems:r??ce,entryUUID:a??""}),iie(e)&&o.jsx(mke,{graphData:e})]}));Zje.displayName="ThreadEntryPanel";const Uw=({reason:e})=>{const t=ot(),{searchTerm:n}=yU(),r=[Bm,{search_term:n??""}],s=Qvt(),a=wge(),i=ji(),{mutate:l}=dt({mutationKey:["removeWidget"],mutationFn:async({entryUUID:m,data:p})=>DL(p)?uJe({backendUUID:m,url:p.url,rwToken:i,reason:e}):Promise.resolve(),onMutate:async({entryUUID:m,data:p})=>{await t.cancelQueries({queryKey:["results"]}),a(m,h=>DL(p)?{...h,widget_data:h.widget_data?.filter(g=>g.url!==p.url)}:h)}}),{mutate:c}=dt({mutationFn:async m=>{try{await re.DELETE("/rest/thread/delete_all_threads",e,{body:{delete_all:m==="all"},timeoutMs:0})}catch(p){ne.error(p)}},onMutate:async m=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:gn});const p=t.getQueryData(r),h=t.getQueryData(gn);return m==="all"?(t.setQueryData(gn,g=>{const y=g.pages.map(x=>x.map(v=>({...v,thread_count:0})));return{...g,pages:y}}),t.setQueryData(r,g=>({...g,pages:[]}))):m==="standalone"&&t.setQueryData(r,g=>({...g,pages:g.pages.map(y=>y.filter(x=>x.collection?.uuid))})),{previousThreads:p,previousCollections:h}},onSettled:(m,p,h,g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(gn,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:gn}),t.invalidateQueries({queryKey:[lu]}),t.invalidateQueries({queryKey:[R2]}),s())}}),{mutate:u}=dt({mutationFn:async({entryUUID:m,callback:p})=>{p?.(),await cJe({entryUUID:m,rwToken:i,callback:p,reason:e})},onMutate:async({entryUUID:m,collectionSlug:p})=>{await t.cancelQueries({queryKey:r}),await t.cancelQueries({queryKey:gn});const h=t.getQueryData(r),g=t.getQueryData(gn);return t.setQueryData(r,y=>{y=y||{pages:[],pageParams:[]};const x=y.pages.map(v=>v.filter(b=>b.uuid!==m));return{...y,pages:x}}),p&&(t.setQueryData(gn,y=>{y=y||{pages:[],pageParams:[]};const x=y.pages.map(v=>v.map(b=>b.slug===p?{...b,thread_count:b.thread_count-1}:b));return{...y,pages:x}}),t.setQueryData([lu,{collection_slug:p.slice(-22)}],y=>{y=y||{pages:[],pageParams:[]};const x=y.pages.map(v=>v.filter(b=>b.uuid!==m));return{...y,pages:x}})),{previousThreads:h,previousCollections:g}},onSettled:(m,p,{entryUUID:h},g)=>{p?(t.setQueryData(r,g?.previousThreads),t.setQueryData(gn,g?.previousCollections)):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:gn}),t.invalidateQueries({queryKey:[lu]}),t.invalidateQueries({queryKey:[R2]}),s(h))}}),{mutate:f}=dt({mutationFn:async({entryUUIDs:m,callback:p})=>{p?.(),await lJe({entryUUIDs:m,rwToken:i,reason:e})},onMutate:async({entryUUIDs:m})=>{await t.cancelQueries({queryKey:r});const p=t.getQueryData(r),h=t.getQueryData(gn);return t.setQueryData(r,g=>{g=g||{pages:[],pageParams:[]};const y=g.pages.map(x=>x.filter(v=>!m.includes(v.uuid)));return{...g,pages:y}}),{previousThreads:p,previousCollections:h}},onSettled:(m,p,{entryUUIDs:h},g)=>{p?t.setQueryData(r,g?.previousThreads):(t.invalidateQueries({queryKey:r}),t.invalidateQueries({queryKey:[R2]}),h.forEach(y=>s(y)))}});return d.useMemo(()=>({removeWidgetFromEntry:l,deleteAllThreads:c,deleteThread:u,deleteThreads:f}),[c,u,f,l])};function UHt({queryKey:e,pageSize:t,fetchFn:n,autoFetch:r,nextPageAccessor:s,initialData:a,args:i}){const l=d.useMemo(()=>i||[],[i]),c=d.useCallback(async({pageParam:u=1})=>{(!u||u<1)&&(u=1);const m={offset:(u-1)*t,...l};return n(m)},[l,n,t]);return Lu({enabled:r,queryKey:e,queryFn:c,placeholderData:Pu,refetchOnReconnect:"always",networkMode:"offlineFirst",initialData:a,initialPageParam:1,getNextPageParam:(u,f)=>s(u,f)})}const BHt=(e,t)=>e&&e[0]?.has_next_page?t.length+1:void 0,$H=(e,t,n,r,s)=>{const a=ot(),{searchTerm:i}=yU(),l=d.useMemo(()=>({search_term:i,with_temporary_threads:t,ascending:r,query_source_filter:n,thread_type_filter:s}),[i,t,r,n,s]),c=d.useCallback(async x=>l0e({timeoutMs:5e3,paginationParams:x,ascending:r,reason:e}),[r,e]),u=UHt({queryKey:[Bm,l],pageSize:Ige,fetchFn:c,autoFetch:!0,nextPageAccessor:BHt,args:l}),f=d.useCallback(()=>{a.invalidateQueries({queryKey:[Bm,l]})},[a,l]),m=u.data?.pageParams?.length??1,p=u.data?.pages??[],h=p.flat(),g=p[p.length-1]?.[0]?.has_next_page,y=d.useMemo(()=>({currentPage:m,hasNextPage:!!g,hasPreviousPage:m>1,getNextPage:()=>u.fetchNextPage(),getPreviousPage:()=>u.fetchPreviousPage()}),[g,m,u]);return d.useMemo(()=>({...u,data:h,paginationInfo:y,invalidateThreadsQuery:f}),[y,u,h,f])};function $Ht({reason:e}){const t=ot();return d.useCallback(()=>{t.prefetchInfiniteQuery({queryKey:[Bm,{search_term:""}],initialPageParam:0,queryFn:()=>l0e({timeoutMs:5e3,paginationParams:{offset:0},reason:e})})},[t,e])}const Jje="fetch_bookmarks";async function VHt({reason:e}){try{const{data:t,error:n}=await re.GET("/rest/collections/list_bookmarks",e);if(n)throw new we("API_CLIENTS_ERROR",{cause:n,details:{reason:e}});return t}catch(t){return ne.error("Failed to get bookmarks.",t),null}}const WHt=({reason:e,enabled:t=!0})=>{const{isIncognito:n}=Ga({reason:e}),{session:r}=mt(),s=r?.user?.email,{data:a,refetch:i,isLoading:l}=Ue({queryKey:[Jje,s],queryFn:async()=>s?await VHt({reason:e}):null,enabled:t&&!n&&!!s,refetchOnMount:!1,refetchOnWindowFocus:!0,placeholderData:null});return d.useMemo(()=>!s||n?{data:null,isLoading:!1,refetch:vn}:{data:a,isLoading:l,refetch:i},[a,s,n,l,i])},HHt=()=>{const e=ot();return d.useCallback(()=>{e.invalidateQueries({queryKey:[Jje]})},[e])};function zHt({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const i=a.threadId,c=n.find(u=>u.id===i)?.entryIds?.[0];if(c&&i){const u=r[c];return u?{id:i,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at,streamId:a.id,frontendContextUUID:u.frontend_context_uuid}:void 0}else return{id:"",slug:void 0,title:a.placeholderChunk?.query_str??"",rwToken:null,lastUpdated:null,contextUUID:null,collectionInfo:null,displayModel:null,entryUUID:null,socialInfo:null,focus:null,mode:null,source:null,streamCreatedAt:new Date().toISOString(),streamId:a.id,frontendContextUUID:a.placeholderChunk?.frontend_context_uuid}}).filter(s=>s!=null)}function GHt({activeStreams:e,streams:t,threads:n,entries:r}){return Array.from(e).reverse().map(s=>{const a=t[s];if(!a)return;const i=a.threadId;if(!i)return;const c=n.find(f=>f.id===i)?.entryIds?.[0];if(!c)return;const u=r[c];if(u)return{id:i,slug:u.thread_url_slug,title:u.thread_title??u.query_str??a.placeholderChunk?.query_str??"",rwToken:u.read_write_token,lastUpdated:u.updated_datetime,contextUUID:u.context_uuid,collectionInfo:u.collection_info,displayModel:u.display_model,entryUUID:u.uuid,socialInfo:u.social_info,focus:u.search_focus,mode:u.mode,source:u.source,streamCreatedAt:u.stream_created_at}}).filter(s=>s!=null)}function qHt(){const e=Co(),{activeStreams:t,streams:n,threads:r,entries:s}=e.getState();return d.useMemo(()=>{const a=GHt({activeStreams:t,streams:n,threads:r,entries:s}),i=new Set;return a.filter(l=>!l.slug||i.has(l.slug)?!1:(i.add(l.slug),!0))},[t,n,r,s])}function e6e({reason:e}){const{data:t,isLoading:n}=aIt({reason:e}),r=qHt();return d.useMemo(()=>({isLoading:n,data:[...r.filter(s=>!t.some(a=>a.link.split("/").pop()===s.slug)).filter(s=>!t.some(a=>a.uuid===s.id)).filter(s=>s.slug!==null).map(s=>({uuid:s.id,variant:"thread",link:`/search/${s.slug}`,title:s.title??"",isStreaming:!0,unread:!1})),...t]}),[t,r,n])}const KHt="fetch_sidebar_hubs",FL=["SIDEBAR_FINANCE","SIDEBAR_SHOPPING","SIDEBAR_TRAVEL","SIDEBAR_ACADEMIC","SIDEBAR_SPORTS"],lie=(e,t)=>t?.sidebar_hubs.includes(e)??!1,UL=[KHt];async function YHt({reason:e}){try{return(await re.GET("/rest/user/get_user_sidebar_hubs",e)).data||{sidebar_hubs:ce}}catch(t){return ne.error("Failed to get sidebar hubs.",t),{sidebar_hubs:ce}}}const t6e=({reason:e})=>{const{data:t,refetch:n,isLoading:r}=Ue({queryKey:UL,queryFn:()=>YHt({reason:e})});return d.useMemo(()=>({data:t,isLoading:r,refetch:n}),[t,r,n])},QHt=({reason:e})=>{const{actions:t}=In(),{data:n}=t6e({reason:e});d.useEffect(()=>{if(!n)return;const r=FL.filter(s=>!n.sidebar_hubs.includes(s));t.setSidebarHiddenHubs(r)},[n,t])},n6e=({reason:e})=>{const t=ot(),{actions:n,sidebarHiddenHubs:r}=In(),s=d.useCallback(async i=>{try{return await re.POST("/rest/user/subscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:i}}}),t.invalidateQueries({queryKey:UL}),n.setSidebarHiddenHubs(r.filter(l=>l!==i)),!0}catch{return!1}},[t,n,r,e]),a=d.useCallback(async i=>{try{return await re.POST("/rest/user/unsubscribe_user_sidebar_hub/{hub_type}",e,{params:{path:{hub_type:i}}}),t.invalidateQueries({queryKey:UL}),n.setSidebarHiddenHubs([...r,i]),!0}catch{return!1}},[t,n,r,e]);return d.useMemo(()=>({subscribeToHub:s,unsubscribeFromHub:a}),[s,a])},$v=e=>{const t=e?.split("/").slice(1);return Js(t)?["finance"].includes(t[0])?"finance":["travel"].includes(t[0])?"travel":["shopping"].includes(t[0])?"shopping":["academic"].includes(t[0])?"academic":["sports"].includes(t[0])?"sports":null:null},XHt=()=>{const{$t:e}=Z();return[{id:"SIDEBAR_FINANCE",name:e({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:Wb},{id:"SIDEBAR_TRAVEL",name:e({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:Pce},{id:"SIDEBAR_SHOPPING",name:e({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:Lce},{id:"SIDEBAR_ACADEMIC",name:e({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:TO},{id:"SIDEBAR_SPORTS",name:e({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:Oce}]},ZHt=({isOpen:e,onClose:t,availableHubs:n})=>{const r="home-sidebar-configure-overlay",s=XHt(),{data:a}=t6e({reason:r}),{subscribeToHub:i,unsubscribeFromHub:l}=n6e({reason:r}),{$t:c}=Z(),u=d.useMemo(()=>s.filter(f=>n.includes(f.id)),[n,s]);return o.jsxs(qt,{title:c({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),isOpen:e,onClose:t,variant:"default",children:[o.jsx(F,{variant:"base",color:"light",className:"mb-sm",children:c({defaultMessage:"Select the items that appear in your sidebar.",id:"I+JwmwJnZQ"})}),o.jsx(z,{className:"mb-[-24px] flex flex-col divide-y",children:u.map(f=>o.jsx(JHt,{hub:f,enabled:lie(f.id,a),onToggle:()=>{lie(f.id,a)?l(f.id):i(f.id)}},f.id))})]})},JHt=({hub:e,enabled:t,onToggle:n})=>o.jsxs("div",{className:"flex h-12 items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(de,{icon:e.icon,size:"base"}),o.jsx(F,{variant:"baseSemi",children:e.name})]}),o.jsx(_o,{active:t,onChange:n})]}),r6e=I.memo(({item:{title:e,link:t},position:n})=>{const{trackEvent:r}=Te(),{setMobileSidebarOpen:s}=Wu(),a=d.useCallback(()=>{s(!1),r("click recent collection",{title:e,link:t,position:n})},[t,n,s,e,r]);return o.jsx(qe,{href:t,className:"group block cursor-pointer",onClick:a,children:o.jsx(z,{className:"p-xs rounded",bgHover:"subtle",children:o.jsx(F,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:o.jsx("div",{className:"flex w-full items-center",children:o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:e})})})})})});r6e.displayName="CollectionHistoryItem";const s6e=({show:e,data:t,type:n,HistoryComponent:r,wrapperClassName:s,id:a})=>{const i="recent-items",{isIncognito:l}=Ga({reason:i}),c=(u,f="")=>"link"in u?u.link+f:"uuid"in u?u.uuid+f:"slug"in u?u.slug+f:f;return!e||!t?.length?null:o.jsx("div",{className:"group/history",children:o.jsx(Ye,{initial:!1,mode:"wait",children:l?o.jsx(BL,{className:"px-sm",direction:"in",children:o.jsx(z,{className:"mx-md mb-lg mt-sm p-md rounded-md border border-dashed",children:o.jsx(F,{color:"ultraLight",variant:"tiny",className:"gap-sm flex flex-col items-start text-left",children:o.jsx("span",{children:n==="thread"?o.jsx(ie,{defaultMessage:"Library disabled while incognito",id:"OUt8F76OaH"}):o.jsx(ie,{defaultMessage:"Spaces disabled while incognito",id:"kdu3grXdAD"})})})})},"empty"):o.jsx(BL,{direction:"out",children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,className:B("mb-md mt-xs space-y-xs border-subtlest pr-sm dark:border-subtle relative ml-[26px] border-l pl-[14px] duration-200",s),children:o.jsx(Ec,{children:o.jsx(Ye,{initial:!1,mode:"popLayout",children:t.map((u,f)=>o.jsx(ve.div,{layout:"position",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},exit:{opacity:0,x:0},transition:{ease:an,duration:.3},children:o.jsx(r,{item:u,position:f})},c(u,a)))})})})},"history")})})},Ib=d.memo(s6e);s6e.displayName="RecentItems";const BL=d.memo(({children:e,className:t,direction:n})=>o.jsx(ve.div,{initial:{x:n==="in"?20:-20,opacity:0},animate:{x:0,opacity:1},exit:{x:n==="in"?20:-20,opacity:0,transition:{ease:xo(.7,0,.84,0),duration:.1}},transition:{x:{ease:xo(.16,1,.3,1),duration:.2},opacity:{ease:_a,duration:.15}},className:t,children:e}));BL.displayName="SlideItem";const a6e=I.memo(({item:{variant:e,title:t,link:n},position:r})=>{const{trackEvent:s}=Te(),{setMobileSidebarOpen:a}=Wu(),{actualQuery:i}=qd(t),l=i||t,c=d.useCallback(()=>{a(!1),s("click recent thread",{title:t,link:n,variant:e,position:r})},[n,r,a,t,s,e]);return o.jsx(qe,{href:n,className:"group block cursor-pointer",onClick:c,children:o.jsx(z,{className:"p-xs rounded",bgHover:"subtle",children:o.jsx(F,{variant:"tiny",className:"gap-x-xs flex items-center justify-between",color:"light",children:o.jsxs("div",{className:"flex w-full items-center",children:[o.jsx("span",{className:"w-full overflow-hidden whitespace-nowrap",style:{maskImage:"linear-gradient(to right, black 85%, transparent 97%)"},children:l}),o.jsx(de,{icon:e==="article"?Dce:FO,size:"sm",className:"min-w-0 shrink basis-0 scale-90 opacity-0 duration-300 ease-out group-hover:block group-hover:shrink-0 group-hover:basis-auto group-hover:scale-100 group-hover:opacity-100"})]})})})})});a6e.displayName="ThreadHistoryItem";const L4=I.memo(({vertical:e=!0,size:t,collapsed:n,actionList:r,...s})=>o.jsx(Iw,{layout:n?"center":"left",size:t,iconOnly:n,vertical:e,actionList:r??ce,indicatorPos:n?"right":"none",fillSpace:!0,...s}));L4.displayName="SiteTabs";const o6e=d.memo(({vertical:e=!0,size:t,collapsed:n,incognito:r,animationId:s})=>{const a="ask-site-tabs",{$t:i}=Z(),l=et(),{isMobileStyle:c}=xe(),{trackEvent:u}=Te(),{allowArticleCreation:f}=wo({reason:a}),m=Lt(),{openVisitorLoginUpsell:p}=or({enabled:!l}),{shouldShowLossAversionModal:h,handleOpenLossAversion:g}=Sx(),{data:y}=Nge({reason:a}),{data:x}=e6e({reason:a}),{setMobileSidebarOpen:v}=Wu(),b=d.useCallback(k=>{v(!1),h&&(k.preventDefault(),g({args:{origin:Le.DISCOVER_BUTTON}}))},[h,g,v]),_=d.useCallback(()=>{u("spaces click",{}),v(!1),l||p({title:i({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Le.SPACES_PAGE})},[u,l,p,i,v]),w=d.useCallback(()=>{u("library click",{}),v(!1),l||p({title:i({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Le.LIBRARY_PAGE})},[u,l,p,i,v]),C=d.useCallback(()=>{u("finance click",{}),v(!1)},[v,u]),S=d.useCallback(()=>{v(!1)},[v]),E=d.useMemo(()=>{const k=[{icon:Fce,text:i({defaultMessage:"Home",id:"ejEGdxSUGs"}),href:"/",show:!0,active:m==="/",ariaLabel:i({defaultMessage:"Home",id:"ejEGdxSUGs"}),testId:"home-tab",onClick:S,tooltip:n?i({defaultMessage:"Home",id:"ejEGdxSUGs"}):void 0},{icon:Uce,text:i({defaultMessage:"Discover",id:"cE4HfwyEyr"}),show:!0,active:m?.startsWith("/discover"),ariaLabel:i({defaultMessage:"Discover",id:"cE4HfwyEyr"}),testId:"discover-tab",href:h?void 0:"/discover",onClick:b,tooltip:n?i({defaultMessage:"Discover",id:"cE4HfwyEyr"}):void 0},{icon:uo,text:i({defaultMessage:"Spaces",id:"ZMoczsYew9"}),href:l?"/spaces":void 0,onClick:_,show:!0,active:m?.startsWith("/spaces"),ariaLabel:i({defaultMessage:"Spaces",id:"ZMoczsYew9"}),testId:"spaces-tab",tooltip:n?i({defaultMessage:"Spaces",id:"ZMoczsYew9"}):void 0,children:!n&&l&&o.jsx(Ib,{show:!0,data:y,type:"collection",HistoryComponent:r6e})},{icon:ZLe,text:i({defaultMessage:"Library",id:"StcK672jB9"}),href:l?"/library":void 0,onClick:w,show:!0,testId:"library-tab",trailingComponent:!r&&f&&!n?o.jsx(VH,{}):void 0,active:m?.startsWith("/library"),ariaLabel:i({defaultMessage:"Library",id:"StcK672jB9"}),tooltip:n?i({defaultMessage:"Library",id:"StcK672jB9"}):void 0,children:!n&&l&&o.jsx(Ib,{show:!0,data:x,type:"thread",HistoryComponent:a6e})},{icon:Wb,text:i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),show:!0,active:m?.startsWith("/finance"),ariaLabel:i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),testId:"finance-tab",href:"/finance",onClick:C,tooltip:n?i({defaultMessage:"Finance",id:"Fm3M+yFIbr"}):void 0}];return n&&k.push({icon:bu,text:i({defaultMessage:"Sign in",id:"SQJto27U8S"}),onClick:()=>{u("login click",{}),p({origin:Le.LOGIN_BUTTON})},show:!l,active:m?.startsWith("/login"),testId:"sign-in-tab",ariaLabel:"Sign in",tooltip:n?i({defaultMessage:"Sign In",id:"Ub+AGcdPg6"}):void 0}),k},[m,n,i,l,r,f,b,C,_,w,u,p,y,x,h,S]);return o.jsx(L4,{isMobileStyle:c,size:t,vertical:e,collapsed:n,actionList:E,layoutGroupId:s})});o6e.displayName="AskSiteTabs";const VH=d.memo(({defaultHidden:e=!0,buttonClassName:t})=>{const{$t:n}=Z(),[r,s]=d.useState(!1),{openModal:a}=xt(),{trackEvent:i}=Te(),l=vt(),c=et(),u=x=>{x.preventDefault(),x.stopPropagation(),s(!r)},f=()=>{s(!1)},m=()=>{s(!0)},p=d.useCallback(x=>{x.stopPropagation(),c?l.push("/page/new"):a("loginModal",{pitchMessage:{title:n({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Le.ARTICLE_NEW}),x.preventDefault()},[l,c,n,a]),h=d.useCallback(x=>{x.preventDefault(),x.stopPropagation(),i("new thread click on threads page",{}),l.push("/",void 0,"New thread (library)")},[i,l]),g=d.useMemo(()=>[{type:"default",text:n({defaultMessage:"Thread",id:"6dmn4mbc3j"}),icon:FO,onClick:h,testId:"library-dropdown-new-thread"},{type:"default",text:n({defaultMessage:"Page",id:"wFmAFCPAci"}),icon:Dce,onClick:p,testId:"library-dropdown-new-page"}],[h,p,n]),y=wx();return o.jsx("div",{className:"ltr:-mr-sm rtl:-ml-sm flex w-full flex-1 justify-end",children:o.jsx(nn,{placement:y?"left":"right",items:g,isMobileStyle:!1,onClose:f,onOpen:m,isOpen:r,children:o.jsx(z,{onClick:u,"data-testid":"library-add-button",className:B("text-foreground flex h-[24px] w-[27px] items-center justify-center rounded-md duration-150 hover:bg-black/5 dark:hover:bg-white/5",{"opacity-0 group-hover/button:opacity-100":e,"!text-foreground !bg-black/5 !opacity-100 dark:!bg-white/5":r},t),children:o.jsx(de,{icon:ar,size:14})})})})});VH.displayName="LibraryDropdown";const cie=(e,t)=>t?t===e.link:!1,i6e=I.memo(({item:e,position:t,onDeleteClick:n,sidebarOpen:r})=>{const{trackEvent:s}=Te(),a=Lt(),{title:i,link:l,variant:c,isStreaming:u,unread:f}=e,m=c==="thread",{actualQuery:p}=qd(i),h=p||i,{$t:g}=Z(),y=d.useCallback(()=>{s("click recent thread",{title:i,link:l,variant:c,position:t})},[l,t,i,s,c]),x=d.useMemo(()=>[{text:g({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:m?"Thread":"Page"}),icon:Fd,onClick:v=>{v.stopPropagation(),n(e)},type:"default"}],[g,m,e,n]);return o.jsx(zs,{id:`SIDEBAR_THREAD_${e.uuid}`,href:l,text:h,fadeOut:!0,onClick:y,sidebarOpen:r,selected:cie(e,a),menuItems:x,testId:`thread-title-${h}`,loading:u,accessory:f&&!cie(e,a)?o.jsx("div",{className:"bg-super size-1.5 rounded-full"}):null})});i6e.displayName="ThreadHistoryItemV2";const ezt=(e,t)=>{const{value:n,loading:r}=jt({flag:"sports-landing-page",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},uie=10,tzt=({isOpen:e,onCreateClick:t,onDeleteThreadOrBookmark:n,isConfiguring:r,setIsConfiguring:s})=>{const a="home-sidebar",{data:i,isLoading:l}=e6e({reason:a}),{data:c,refetch:u}=WHt({reason:a,enabled:e}),{sidebarHiddenHubs:f}=In(),{unsubscribeFromHub:m}=n6e({reason:a}),{bookmarks:p,bookmarks_collection_slug:h,bookmarks_collection_uuid:g}=c||{},x=Bu()==="US",{variation:v}=ezt(!1),b=$Ht({reason:a}),{deleteThread:_}=Uw({reason:a}),{trackEvent:w}=Te(),{$t:C}=Z(),S=et(),{openVisitorLoginUpsell:E}=or({enabled:!S}),k=vt(),M=Lt(),{removeThreadFromCollection:j}=nx({reason:a});QHt({reason:a});const[R,O]=d.useState([]),[D,P]=d.useState([]),A=d.useMemo(()=>p?.filter(Y=>!R.includes(Y))??[],[p,R]),T=d.useMemo(()=>i?.filter(Y=>!D.includes(Y))??[],[i,D]),N=d.useCallback(Y=>{const te=g;n(),w("unbookmark item from sidebar",{collectionUUID:te??void 0}),O(se=>[...se,Y]),j({entryUUID:Y.uuid,oldCollectionUUID:te??void 0,callback:()=>{u()}})},[j,u,n,g,w]),L=d.useCallback(Y=>{n(),w("delete thread from sidebar",{entryUUID:Y.uuid}),P(te=>[...te,Y]),O(te=>[...te,{uuid:Y.uuid,mode:Y.variant==="article"?"article":"thread",title:Y.title,slug:Y.link}]),_({entryUUID:Y.uuid,callback:()=>{Y.link===M&&k.push("/")}})},[M,k,_,n,w]),U=d.useCallback(Y=>{n(),O(te=>[...te,Y]),P(te=>[...te,{uuid:Y.uuid,link:Y.slug,variant:Y.mode==="article"?"article":"thread",title:Y.title}]),w("delete bookmark from sidebar",{entryUUID:Y.uuid}),_({entryUUID:Y.uuid,callback:()=>{Y.slug===M?.replace("/search/","").replace("/page/","")&&k.push("/")}})},[n,w,M,k,_]),$=d.useCallback(Y=>{m(Y)},[m]),V=d.useMemo(()=>({text:C({defaultMessage:"Hide from sidebar",id:"bt2xOtkULy"}),icon:kt,type:"default",size:Yt.small,show:!0}),[C]),W=d.useMemo(()=>[{...V,onClick:Y=>{Y.stopPropagation(),$("SIDEBAR_FINANCE")}}],[$,V]),Q=d.useMemo(()=>[{...V,onClick:Y=>{Y.stopPropagation(),$("SIDEBAR_TRAVEL")}}],[$,V]),q=d.useMemo(()=>[{...V,onClick:Y=>{Y.stopPropagation(),$("SIDEBAR_SHOPPING")}}],[$,V]),H=d.useMemo(()=>[{...V,onClick:Y=>{Y.stopPropagation(),$("SIDEBAR_ACADEMIC")}}],[$,V]),K=d.useMemo(()=>[{...V,onClick:Y=>{Y.stopPropagation(),$("SIDEBAR_SPORTS")}}],[$,V]),G=d.useMemo(()=>x?FL:FL.filter(Y=>Y!=="SIDEBAR_SHOPPING"),[x]),ee=d.useMemo(()=>S?G.filter(Y=>!f.includes(Y)):G,[f,S,G]);return o.jsxs("div",{className:"flex flex-col gap-[12px]",children:[ee.length>0&&o.jsxs(o.Fragment,{children:[o.jsxs(yb,{children:[ee.includes("SIDEBAR_FINANCE")&&o.jsx(zs,{id:"SIDEBAR_FINANCE",href:"/finance",text:C({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),icon:Wb,selected:$v(M)==="finance",menuItems:S?W:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"finance"})}}),ee.includes("SIDEBAR_TRAVEL")&&o.jsx(zs,{id:"SIDEBAR_TRAVEL",href:"/travel",text:C({defaultMessage:"Travel",id:"z1QN2qSnI/"}),icon:Pce,selected:$v(M)==="travel",menuItems:S?Q:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"travel"})}}),ee.includes("SIDEBAR_SHOPPING")&&o.jsx(zs,{id:"SIDEBAR_SHOPPING",href:"/shopping",text:C({defaultMessage:"Shopping",id:"my1MLnIMoS"}),icon:Lce,selected:$v(M)==="shopping",menuItems:S?q:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"shopping"})}}),ee.includes("SIDEBAR_ACADEMIC")&&o.jsx(zs,{id:"SIDEBAR_ACADEMIC",href:"/academic",text:C({defaultMessage:"Academic",id:"mbxIJyT8C5"}),icon:TO,selected:$v(M)==="academic",menuItems:S?H:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"academic"})}}),ee.includes("SIDEBAR_SPORTS")&&v&&o.jsx(zs,{id:"SIDEBAR_SPORTS",href:"/sports",text:C({defaultMessage:"Sports",id:"qEuXjx1B4z"}),icon:Oce,selected:$v(M)==="sports",menuItems:S?K:void 0,sidebarOpen:e,onClick:()=>{w("sidebar hub clicked",{hub_type:"sports"})}})]}),o.jsx(xb,{})]}),o.jsx(by,{href:"/library",onClick:Y=>{S||(Y.preventDefault(),E({title:C({defaultMessage:"Organize your search history by signing up",id:"PMTP+jTgx8"}),origin:Le.LIBRARY_PAGE}))},onMouseOver:b,text:C({defaultMessage:"Library",id:"StcK672jB9"}),className:"-mb-xs",testId:"library-button",accessory:i&&e&&T.length>0?o.jsx(VH,{defaultHidden:!1,buttonClassName:"text-quiet hover:text-foreground duration-150"}):o.jsx("div",{className:"size-[24px]"})}),l?null:T.length===0?o.jsx(zs,{id:"SIDEBAR_CREATE_THREAD",icon:ar,href:"/",text:C({defaultMessage:"Create a Thread",id:"6naN9kZFw2"}),deemphasized:!0,onClick:()=>{const Y=document.getElementById("ask-input");Y&&(Y.focus(),t())},sidebarOpen:e}):o.jsx(Ib,{show:!0,data:T,type:"thread",HistoryComponent:({item:Y,position:te})=>o.jsx(i6e,{item:Y,position:te,onDeleteClick:L,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-threads"}),T?.length>=uie&&o.jsx(F7,{href:"/library",text:C({defaultMessage:"View All",id:"wbcwKddwLa"}),onMouseOver:b}),S&&c!==null&&o.jsx(o.Fragment,{children:A.length>0&&o.jsxs(o.Fragment,{children:[o.jsx(xb,{}),o.jsx(by,{href:h?`/spaces/${h}`:void 0,text:C({defaultMessage:"Bookmarks",id:"nGBrvwYczX"}),className:"-mb-xs",testId:"bookmarks-button"}),o.jsx(Ib,{show:!0,data:A,type:"thread",HistoryComponent:({item:Y})=>o.jsx(nzt,{item:Y,onRemoveClick:N,onDeleteClick:U,sidebarOpen:e}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5 space-y-0 !-mt-[2px]",id:"recent-bookmarks"}),A.length>=uie&&h&&o.jsx(F7,{href:`/spaces/${h}`,text:C({defaultMessage:"View All",id:"wbcwKddwLa"})})]})}),o.jsx(ZHt,{isOpen:r,onClose:()=>s(!1),availableHubs:G})]})},nzt=({item:e,onRemoveClick:t,onDeleteClick:n,sidebarOpen:r})=>{const s=e.mode==="article",i=`/${s?"page":"search"}/${e.slug}`,l=Lt(),{$t:c}=Z();return o.jsx(zs,{id:`SIDEBAR_BOOKMARK_${e.uuid}`,href:i,text:e.title||e.slug,fadeOut:!0,selected:i===l,sidebarOpen:r,testId:`thread-title-${e.title||e.slug}`,menuItems:[{text:c({defaultMessage:"Remove Bookmark",id:"RokVj/Gv4U"}),icon:JLe,onClick:u=>{u.stopPropagation(),t(e)},type:"default"},{text:c({defaultMessage:"Delete {item}",id:"rdK9AWns19"},{item:s?"Page":"Thread"}),icon:Fd,onClick:u=>{u.stopPropagation(),n(e)},type:"default"}]})},WH=I.memo(({showAvatar:e,showCreatorLabel:t,showEdit:n,isCurrentUser:r=!0,textClassName:s="",textColor:a,textVariant:i="smallBold",username:l,image:c,anon:u,avatarSize:f="small",isAlwaysEditing:m=!1,onButtonClick:p=vn,className:h})=>{const{$t:g}=Z(),{update:y}=mt(),{session:x}=mt(),[v,b]=I.useState(m),[_,w]=I.useState(l??(r?x?.user?.username:"Anonymous")),[C,S]=I.useState(),{isMobileUserAgent:E}=xe(),k=async()=>fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:_})}),{mutate:M,isPending:j}=dt({mutationFn:k,onSuccess:A=>{A.json().then(T=>{if(A.status!==200){S(T.message);return}b(!1),S(void 0),y(),p()})}});d.useEffect(()=>{w(l??(r?x?.user?.username:"Anonymous"))},[l,r,x?.user?.username]);const R=d.useCallback(()=>b(!0),[]),O=d.useCallback(()=>M(),[M]),D=d.useCallback(()=>{w(x?.user?.username??""),m||b(!1),p()},[m,p,x?.user?.username]),P=d.useMemo(()=>x?o.jsxs("div",{className:"ml-sm mt-sm gap-x-sm flex items-center",children:[o.jsx(me,{text:g({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:_===x.user.username||_===""||j?"common":"primary",size:"small",disabled:_===x.user.username||_===""||j,onClick:O}),o.jsx(me,{text:g({defaultMessage:"Cancel",id:"47FYwba+bI"}),size:"small",disabled:j,onClick:D})]}):null,[g,D,O,j,x,_]);return o.jsxs("div",{className:B("gap-x-xs relative flex items-center",h),children:[e&&o.jsx(Un,{size:f,anon:u,user:c??(r?x?.user.image??void 0:void 0)}),v?o.jsx(Xr,{isMobileUserAgent:E,value:_,disabled:j,errorText:C??(_===""?g({id:"ekGO8lFf3J",defaultMessage:"Username cannot be empty"}):""),onChange:w,className:"md:min-w-[300px]",inlineEditBlock:P,errorPlacement:Md.LABEL,wrapperClassName:"w-full",pill:!1}):o.jsx(F,{variant:i,color:a,className:B("line-clamp-1 break-all",s),children:u?"Anonymous":_}),t&&o.jsx(z,{variant:"subtler",className:"px-sm py-xs rounded-full",children:o.jsx(F,{variant:"tiny",color:"light",className:s,children:g({id:"tWkQ2JF/jQ",defaultMessage:"Author"})})}),n&&!v&&o.jsx(Me,{pill:!0,size:"small",icon:Ru,onClick:R})]})});WH.displayName="Username";const l6e=({session:e,onClick:t})=>{const n="sidebar-incognito-menu",{$t:r}=Z(),{isIncognito:s,incognitoType:a}=Ga({reason:n}),{actions:i}=In(),{hasAccessToProFeatures:l,isPro:c,isMax:u}=St(),f=d.useCallback(()=>{i.setIsIncognito(!1),t()},[i,t]),m=d.useCallback(()=>{i.setIsIncognito(!0),t()},[i,t]);return o.jsxs("div",{className:"flex flex-col items-stretch",children:[o.jsx(die,{onClick:f,icon:o.jsx("div",{className:`relative inline-flex ${l?"-top-two":""}`,children:o.jsx(Un,{size:"medium",user:e?.user?.image,showProBadge:c,showMaxBadge:u,className:"!text-inverse",showBackground:!1})}),label:o.jsx("div",{className:"gap-sm flex items-center",children:o.jsx(WH,{username:e?.user?.username})}),selected:!s},"user"),o.jsx(die,{onClick:m,icon:o.jsx(_f,{inverse:!0,incognitoType:a}),label:a===Hd.GOVERNMENT?o.jsxs("div",{className:"flex flex-col items-start",children:[o.jsx(F,{variant:"smallBold",children:r({defaultMessage:"Government",id:"bh4rlKfcgE"})}),o.jsx(F,{variant:"micro",color:"light",children:r({defaultMessage:"Zero Data Usage",id:"JHS3rmaYsL"})})]}):r({defaultMessage:"Incognito",id:"Sp8UUpZ0at"}),selected:s,showTooltip:!0,incognitoType:a},"incognito")]})},die=({onClick:e,label:t,selected:n,icon:r,showTooltip:s,incognitoType:a})=>{const{$t:i}=Z(),{isGovernmentRequestOrigin:l}=ts(),{device:{isMacOS:c}}=Pt();return o.jsxs(z,{as:"button",bgHover:"subtler",className:"gap-sm p-sm pr-md flex items-center rounded-md active:scale-[.98]",onClick:e,children:[r,typeof t=="string"?o.jsx(F,{variant:"smallBold",children:t}):t,o.jsx("div",{className:"flex-1"}),n?o.jsx("span",{className:"text-super",children:o.jsx(de,{icon:dr,size:"sm"})}):s&&o.jsx(bn,{className:"max-w-[280px]",tooltipText:a===Hd.GOVERNMENT?i({defaultMessage:"Zero Data Usage active",id:"9i8r+oh3pt"}):i({defaultMessage:"Create anonymous threads that don't appear in your library and expire after 24 hours.",id:"BBjMWPmxC0"}),keyboardShortcut:l?void 0:c?["",";"]:["ctrl",";"],tooltipLayout:"right",asChild:!0,children:o.jsx(F,{color:"light",className:"opacity-50 duration-150 hover:opacity-100",children:o.jsx(de,{icon:hce,size:"sm"})})})]})},li="default",c6e=({trigger:e,popoverPlacement:t="top-start"})=>{const[n,r]=d.useState(!1),s=et(),a=rw(),{isMaxUpsellEnabled:i}=Uu(),l=$1e({reason:"sidebar-bottom-popover"}),c=Jo(),u=d.useRef(kF().sidebar),{openVisitorLoginUpsell:f}=or({enabled:!s}),{device:{isWindowsApp:m}}=Pt(),{isGovernmentRequestOrigin:p}=ts(),h=Mve(),{isEnterpriseMax:g}=St(),{$t:y}=Z(),x=y8(),[v,b]=d.useState(m),[_,w]=d.useState(!1),{keysRequiringRerender:C,removeKeyRequiringRerender:S}=df(),E=l&&!u.current&&ipe(),k=Oqe(),{variation:M,loading:j}=Fp(!1);d.useEffect(()=>{!u.current&&n&&Lqe("sidebar",!0)},[n]);const R=d.useMemo(()=>[{icon:WR,show:!0,text:y({defaultMessage:"Account",id:"TwyMauNL3r"}),type:li,href:tn.Account.href,target:"_self",testId:"sidebar-my-account"},{icon:Z2,show:!0,text:y({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),type:li,href:tn.Preferences.href,target:"_self",testId:"sidebar-preferences"},{icon:Qle,show:!0,text:y({defaultMessage:"Personalization",id:"FAejG+JVWn"}),type:li,href:tn.Personalize.href,target:"_self",testId:"sidebar-personalize",...E&&{rightElement:o.jsx(de,{icon:cG,color:"currentColor",className:"text-super"})}},{icon:up,show:!0,text:y({defaultMessage:"Assistant",id:"wSAvhubuX6"}),type:li,href:tn.Assistant.href,target:"_self",testId:"sidebar-assistant"},{icon:Wk,show:a,text:y({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),type:li,href:tn.Shortcuts.href,target:"_self",testId:"sidebar-shortcuts"},{icon:Im,text:y(M?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),type:li,href:tn.Tasks.href,target:"_self",testId:"sidebar-tasks",...!k&&{rightElement:o.jsx(de,{icon:cG,color:"currentColor",className:"text-super"})}},{icon:dp,show:!0,text:y({defaultMessage:"Notifications",id:"NAidKbB0vi"}),type:li,href:tn.Notifications.href,target:"_self",testId:"sidebar-notifications"},{icon:Gb,show:!0,text:y({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),type:li,href:tn.Connectors.href,target:"_self",testId:"sidebar-connectors"},{icon:tce,show:!0,text:y({defaultMessage:"API",id:"xwEc8KM8zK"}),type:li,href:tn.API.href,target:"_self",testId:"sidebar-api"},{icon:Zle,show:!0,text:y({defaultMessage:"Pro Perks",id:"x69637XBwS"}),type:li,href:tn.ProPerks.href,target:"_self",testId:"sidebar-pro-perks"},{icon:Bce,show:!0,text:y({defaultMessage:"All settings",id:"IzEySeOy5/"}),type:li,href:tn.Account.href,target:"_self",testId:"sidebar-settings"},{type:"separator",show:i&&!g,className:"!border-b-subtlest !border-b !-mx-1 mb-1"},{icon:eOe,show:i&&!g,text:y({defaultMessage:"View plans",id:"EaucLAoHiC"}),type:li,onClick:()=>{c({origin:Le.SIDEBAR_BOTTOM_POPOVER,pitchMessage:{title:y({defaultMessage:"Select your plan",id:"kujKpiV0z4"})}})},testId:"sidebar-view-plans"}],[y,E,a,M,k,i,c,g]);d.useEffect(()=>{C.includes("sidebar-sign-in-button")&&b(!0),S("sidebar-sign-in-button")},[S,C]),d.useEffect(()=>{x||b(!0)},[x]),d.useEffect(()=>{!h&&p&&b(!0)},[h,p]),d.useEffect(()=>{requestAnimationFrame(()=>{w(!0)})},[]);const{trackEvent:O}=Te();return!s&&!v||j?null:s?o.jsx(nn,{placement:t,items:R,footer:o.jsx(rzt,{handleClick:()=>r(!1)}),isMobileStyle:!1,isOpen:n,onOpen:()=>r(!0),onClose:()=>r(!1),wrapperClassName:"inline-flex",children:o.jsx("div",{onClick:()=>r(!n),className:"inline-flex w-full","data-testid":"sidebar-popover-trigger-signed-in",children:e(n)})}):o.jsx("div",{className:"relative inline-flex justify-center duration-150 hover:opacity-80",children:o.jsxs(ve.button,{initial:_?{opacity:0,scale:.5}:void 0,animate:_?{opacity:1,scale:1}:void 0,className:"inline-flex appearance-none flex-col items-center justify-center",onClick:()=>{O("sidebar sign in button clicked"),f({origin:Le.SIGNUP_BUTTON})},children:[o.jsx("div",{className:"p-1",children:o.jsx(z,{variant:"super",className:"flex size-8 items-center justify-center rounded-full",children:o.jsx(WR,{className:"text-inverse size-5"})})}),o.jsx(F,{variant:"tinyRegular",className:"text-center",color:"super",children:y({defaultMessage:"Sign In",id:"Ub+AGcdPg6"})})]})})},rzt=({handleClick:e})=>{const{session:t}=mt();return o.jsx("div",{className:"border-subtlest w-full border-t pt-1",children:t&&o.jsx(l6e,{session:t,onClick:e})})},u6e=({showBottomLabels:e})=>{const t="sidebar-v2-account-menu",{$t:n}=Z(),{isIncognito:r,incognitoType:s}=Ga({reason:t}),{session:a}=mt(),{isPro:i,isMax:l,hasAccessToProFeatures:c}=St(),u=$1e({reason:t}),f=kF().sidebar,m=u&&!f&&ipe(),p=d.useCallback(h=>o.jsx(bn,{showTooltip:!!a?.user?.username&&!e,tooltipText:n({defaultMessage:"Account & Settings",id:"zWaEuojd3m"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:o.jsxs("div",{className:"gap-xs group flex w-full cursor-pointer flex-col items-center",children:[o.jsxs("div",{className:"duration-quick relative select-none group-hover:opacity-80",children:[r?o.jsx(_f,{inverse:!0,incognitoType:s}):o.jsx(Un,{size:"medium",showProBadge:i,showMaxBadge:l,badgeProps:{show:m,className:"bg-super border-subtlest"},user:a?.user?.image}),o.jsx(Wn,{className:B("text-quietest group-hover:text-quiet duration-quick absolute right-0 top-1/2 size-3 -translate-y-1/2 translate-x-[calc(100%+2px)]",{"!text-quiet -translate-y-[calc(50%-2px)]":h})})]}),e&&o.jsx(F,{variant:"micro",color:"light",className:B("px-xs w-full truncate text-center",{"mt-two":c}),children:n({defaultMessage:"Account",id:"TwyMauNL3r"})})]})}),[e,a?.user?.username,n,r,i,l,a?.user?.image,m,c,s]);return o.jsx(c6e,{trigger:p})};u6e.displayName="SidebarAccountMenu";const fie="#FF3B30",O4=I.memo(({variant:e})=>e==="iconOnly"?o.jsx("div",{className:"bg-base from-subtler to-subtler p-two absolute -right-2.5 -top-2.5 rounded-full bg-gradient-to-r",children:o.jsx("div",{className:"size-2 rounded-full",style:{backgroundColor:fie}})}):o.jsx("div",{className:"absolute -right-1 -top-1 size-2 rounded-full",style:{backgroundColor:fie}}));O4.displayName="NotificationBadge";const d6e=I.memo(({text:e,variant:t})=>{const{openModal:n}=xt(),{trackEvent:r}=Te(),[s,a]=d.useState(!1),i=wO();d.useEffect(()=>{a(i>5&&!Mg())},[i]);const l=d.useCallback(()=>{Ok(),r("homepage footer download menu opened",{}),n("platformOptionsModal")},[n,r]),c=d.useMemo(()=>o.jsxs("div",{className:"relative ml-auto",children:[o.jsx(de,{icon:Uy,className:"size-4"}),s&&o.jsx(O4,{variant:t})]}),[s,t]);return o.jsx(me,{size:"small",text:t==="iconOnly"?void 0:e,trailingComponent:c,pill:t==="iconOnly",fullWidth:t!=="iconOnly",onClick:l})});d6e.displayName="SideDownloadPrompt";const szt=()=>{const{$t:e}=Z();return o.jsx(bn,{tooltipText:e({defaultMessage:"Download",id:"5q3qC0sC3r"}),className:"inline-flex",tooltipLayout:"right",asChild:!0,children:o.jsxs("div",{className:"gap-xs flex flex-col items-center [@media(max-height:680px)]:hidden",children:[o.jsx(d6e,{variant:"iconOnly"}),o.jsx(F,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Install",id:"ubmFc8rrea"})})]})})},f6e=()=>{const e="sidebar-v2-enterprise-menu",{$t:t}=Z(),{organization:n}=Hn({reason:e}),r=gx();return o.jsx(bn,{tooltipText:n?.display_name,tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:-2,asChild:!0,children:o.jsx(qe,{href:`${r}/org`,className:"duration-quick flex select-none justify-center hover:opacity-80",children:n?.logo?o.jsx(Un,{size:"medium",user:n?.logo,altText:"Logo"}):o.jsx(me,{ariaLabel:t({defaultMessage:"Organization settings",id:"8JjaslSBQx"}),icon:Ti,pill:!0,size:"small",variant:"inverted"})})})};f6e.displayName="SidebarV2EnterpriseMenu";const azt="gov_free_year",_R="gov",ozt=()=>{const e="sidebar-gov-badge",{isGovernmentRequestOrigin:t}=ts(),{$t:n}=Z(),r=et(),{hasAccessToProFeatures:s}=St(),a=xbe({reason:e}),i=vt(),[l,c]=d.useState(!1),[u,f]=d.useState(!1),{shouldShow:m}=wW({cueKey:"gov-badge",impressionsLimit:3,enabled:!0}),h=a.campaignId===azt&&!s,g=r&&h,y=m&&!l?!0:void 0,x=d.useCallback(()=>{c(!0)},[]),v=d.useCallback(async()=>{if(!u){f(!0);try{const b=await ppe({reason:"sidebar-gov-badge-activation"});if(b?.status==="success")i.push(`/join/p/${_R}/welcome`);else{const _=b?.error_code||"UNKNOWN_ERROR";i.push(`/join/p/${_R}?error=${_}`)}}catch{i.push(`/join/p/${_R}?error=UNKNOWN_ERROR`)}finally{f(!1)}}},[i,u]);return t?o.jsx(ei,{hoverOpen:y?void 0:!0,isOpen:y,onClose:x,sideOffset:5,forceDarkMode:!0,content:o.jsxs("div",{className:"gap-md p-sm max-w-sideBarWidthXL flex flex-col",children:[o.jsx("img",{src:"/static/images/us-gov.png",alt:"GOV",className:"h-14 w-full rounded-md object-cover"}),o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",className:"mb-1 leading-tight",children:n({defaultMessage:"Thank you for your service!",id:"VZuM94AjHT"})}),o.jsx(F,{variant:"small",className:"leading-snug",color:"light",children:n(g?{defaultMessage:"Government users get Pro, premium models, and zero data usage.",id:"RgHwMywuQP"}:r?{defaultMessage:"Government users get premium models and zero data usage.",id:"FacxoKMcak"}:{defaultMessage:"Government visitors get premium models and zero data usage.",id:"gG23ZhCcKn"})})]}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[g&&o.jsx(me,{variant:"primary",size:"small",text:n(u?{defaultMessage:"Activating...",id:"Hg2ZHpJ5KZ"}:{defaultMessage:"Activate Pro",id:"MCY2gI+lUl"}),onClick:v,disabled:u}),o.jsx(me,{variant:"common",size:"small",text:n({defaultMessage:"Learn more",id:"TdTXXf940t"}),onClick:()=>window.open("https://www.perplexity.ai/hub/blog/introducing-perplexity-for-government","_blank")})]})]}),arrowClassName:"!fill-inverse [&>path:last-of-type]:stroke-borderMain/50",placement:"right",childrenClassName:"inline-flex mt-sm items-center justify-center",children:o.jsxs(z,{variant:"textColor",className:"px-sm gap-xs ring-subtlest relative flex cursor-pointer items-center justify-center rounded py-1 ring-1",children:[o.jsx(iy,{countryCode:"US",className:"relative w-3.5"}),o.jsx(F,{variant:"tiny",color:"defaultInverted",className:"-translate-y-half relative !font-mono",children:"GOV"})]})}):null},m6e=d.memo(({isOpen:e,children:t,title:n,onPin:r,pinned:s,canPin:a,onMouseEnter:i,onMouseLeave:l,accessory:c,actions:u,appContentWrapperRef:f})=>{const{$t:m}=Z(),p=d.useMemo(()=>Fy(g=>{f.current?.contains(g.target)&&(window.removeEventListener("mousemove",p),e&&l())},100,{leading:!0,trailing:!0}),[l,f,e]);d.useEffect(()=>{e&&!s?window.addEventListener("mousemove",p):window.removeEventListener("mousemove",p)},[e,s,p]),vp(()=>{window.removeEventListener("mousemove",p)});const h=wx();return o.jsx("div",{className:"group/sidebar-menu pointer-events-none absolute inset-y-0 start-0 overflow-hidden ltr:-translate-x-px rtl:translate-x-px",style:{width:sM+(s?0:16)+Vh},children:o.jsxs(z,{className:B("inset-y-0 border-transparent duration-100 dark:border-transparent","end-md absolute start-0 flex flex-col border-e pe-[20px]",{"erp-tab:pt-two pt-[10px]":s,"ease-inCubic pointer-events-none opacity-0 ltr:-translate-x-[4%] rtl:translate-x-[4%]":!e&&!s,"!border-subtlest ease-outCubic shadow-xl":e&&!s,"pointer-events-auto":e||s}),variant:"underlay",onMouseEnter:i,onMouseLeave:l,style:{paddingLeft:h?void 0:Vh+12,paddingRight:h?Vh+12:void 0,width:sM+Vh},children:[!s&&e&&o.jsx("div",{className:"absolute inset-y-0 -end-[24px] start-0"}),o.jsxs(z,{className:"group/sidebar-menu-header relative mb-[12px] flex min-h-0 items-center justify-between border-b py-[12px]",children:[u&&e?o.jsx(nn,{items:u,isMobileStyle:!1,placement:"bottom-start",children:o.jsxs(F,{variant:"smallBold",className:"group relative cursor-pointer select-none",children:[o.jsx("span",{className:"bg-subtle -inset-x-sm -inset-y-xs absolute rounded-md opacity-0 duration-100 group-hover:opacity-100"}),o.jsxs("span",{className:"gap-xs relative flex items-center",children:[n,o.jsx(Wn,{className:"text-quietest group-hover:text-quiet size-4 opacity-0 duration-100 group-hover/sidebar-menu-header:opacity-100"})]})]})}):o.jsx(F,{variant:"smallBold",children:n}),o.jsxs("div",{className:"flex min-h-[24px] items-center",children:[o.jsx(Ye,{initial:!1,children:c&&o.jsx(ve.div,{initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},className:"inline-flex",children:c})}),a&&o.jsx(Me,{size:"tiny",icon:s?tOe:nOe,onClick:r,extraCSS:"!-me-sm",toolTip:m(s?{defaultMessage:"Unpin Sidebar",id:"0ms2vDE7D8"}:{defaultMessage:"Pin Sidebar",id:"rPlnyNxMsY"}),tooltipLayout:"bottom",testId:"sidebar-pin-sidebar"})]})]}),o.jsx(Ye,{initial:!1,mode:"popLayout",children:o.jsx(ve.div,{initial:{opacity:0,x:h?10:-10},animate:{opacity:1,x:0},exit:{opacity:0},transition:{duration:.1,ease:an},className:"relative flex min-h-0 flex-1 flex-col",children:o.jsx("div",{className:"scrollbar-subtle mx-[-12px] mt-[-12px] flex min-h-0 flex-1 overflow-y-auto overflow-x-hidden p-[12px]",children:o.jsx("div",{className:"w-full",children:t})})},n)})]})})});m6e.displayName="SidebarMenu";const izt=(e,t)=>{const{value:n,loading:r}=jt({flag:"app-notifications-polling",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},lzt=rdt(5),p6e=({reason:e})=>{const{variation:t}=izt(!1),n=Ue({queryKey:oqe(),queryFn:async()=>(await re.GET("/rest/notifications/in-app/unread-count",e)).data.unread_count,staleTime:1e3*60*5,refetchInterval:()=>t?lzt:!1});return d.useMemo(()=>{const{data:r,...s}=n;return{count:r??0,...s}},[n])},czt=e=>typeof e=="object"&&e!==null&&"pages"in e&&Array.isArray(e.pages)&&e.pages.every(t=>"has_more"in t&&typeof t.has_more=="boolean"&&"next_cursor"in t&&(typeof t.next_cursor=="string"||t.next_cursor===null)&&"notifications"in t&&Array.isArray(t.notifications)&&t.notifications.every(n=>typeof n=="object"&&n!==null&&"notification_id"in n&&typeof n.notification_id=="string"&&"type"in n&&typeof n.type=="string"&&"is_read"in n&&typeof n.is_read=="boolean")),uzt=({enabled:e=!0,reason:t})=>{const n=Lu({enabled:e,queryKey:dd(),queryFn:async({pageParam:h})=>(await re.GET("/rest/notifications/in-app",t,{params:{query:{cursor:h}}})).data,getNextPageParam:h=>!h||h.notifications.length===0?null:h.next_cursor,initialPageParam:""}),{data:r,error:s,isError:a,refetch:i,isLoading:l,isFetching:c,hasNextPage:u,fetchNextPage:f,isFetchingNextPage:m}=n,p=d.useMemo(()=>r?.pages.flatMap(h=>h?.notifications??[])??[],[r]);return d.useMemo(()=>({refetch:i,error:s,isError:a,isLoading:l,isFetching:c,fetchNextPage:f,isFetchingNextPage:m,hasNextPage:u,notifications:p}),[i,s,a,p,u,f,m,l,c])};function D4({reason:e}){const t=ot(),n=dt({mutationFn:i=>re.POST("/rest/notifications/in-app/bulk-read",e,{body:{notification_ids:i?.notificationIds}}),onMutate:()=>{t.setQueryData(dd(),i=>czt(i)?{...i,pages:i?.pages.map(l=>({...l,notifications:l.notifications.map(c=>({...c,is_read:!0}))}))}:i)},onSuccess:()=>{t.invalidateQueries({queryKey:dd()})}}),r=dt({mutationFn:i=>re.POST("/rest/notifications/in-app/{notification_id}/read",e,{params:{path:{notification_id:i.notificationId}}}),onSuccess:()=>{t.invalidateQueries({queryKey:dd()})}}),s=dt({mutationFn:i=>re.DELETE("/rest/notifications/in-app/bulk-delete",e,{body:{notification_ids:[i.notificationId]}}),onSuccess:()=>{t.invalidateQueries({queryKey:dd()})}}),a=dt({mutationFn:()=>re.DELETE("/rest/notifications/in-app/read",e),onSuccess:()=>{t.invalidateQueries({queryKey:dd()})}});return d.useMemo(()=>({markAllAsRead:n,markAsRead:r,markAsDeleted:s,markAllReadAsDeleted:a}),[n,r,s,a])}const h6e=Dt("SidebarNotificationsContext",null),dzt=({children:e})=>{const t="sidebar-notifications-provider",{openModal:n}=xt(),[r,s]=d.useState(!1),[a,i]=d.useState(null),[l,c]=d.useState(null),{markAllAsRead:u}=D4({reason:t}),f=d.useMemo(()=>a===null&&l===null,[a,l]),m=d.useCallback(x=>l===x,[l]),p=d.useCallback(()=>{s(!0)},[]),h=d.useCallback(()=>{f&&(s(!1),u.mutate())},[f,u]),g=d.useCallback(()=>{s(!r)},[r]),y=d.useCallback((x,v)=>{i(x),n(x,{...v,onClose:(...b)=>{v?.onClose?.(...b),i(null)}})},[n]);return o.jsx(h6e.Provider,{value:{isOpen:r,isMenuOpen:m,setOpenMenu:c,open:p,close:h,toggle:g,openModal:y},children:e})},qu=()=>{const e=d.useContext(h6e);if(!e)throw new Error("useSidebarNotifications must be used within a SidebarNotificationsProvider");return e},g6e=({visible:e})=>e?o.jsx(z,{variant:"underlay",className:"p-two rounded-full",children:o.jsx(z,{variant:"super",className:B("group-hover:ring-subtlest pointer-events-none size-2 rounded-full opacity-0 ring-2 ring-transparent transition-opacity duration-300",{"opacity-100":e})})}):null,y6e=()=>{const{$t:e}=Z(),{trackEvent:t}=Te(),{toggle:n,isOpen:r}=qu(),{count:s}=p6e({reason:"SidebarNotificationsButton"}),a=d.useCallback(()=>{r||t("inbox opened",{unreadCount:s}),n()},[r,t,s,n]);return o.jsx("div",{className:"-mb-xs flex w-full flex-col items-center justify-center",children:o.jsx("div",{className:"flex flex-col items-center justify-center",children:o.jsx(bn,{tooltipText:e({defaultMessage:"Notifications",id:"NAidKbB0vi"}),tooltipLayout:"right",arrowClassName:" ",delayDuration:0,offset:16,asChild:!0,children:o.jsxs("div",{className:"group relative size-9 rounded-full",children:[o.jsx(Me,{icon:dp,onClick:a,pill:!0,extraCSS:"!size-full",testId:"sidebar-new-thread",size:"large"}),o.jsx(x6e,{})]})})})})};y6e.displayName="SidebarNotificationsButton";const x6e=()=>{const{count:e,refetch:t}=p6e({reason:"SidebarNotificationsButtonCounter"}),{isOpen:n}=qu(),r=d.useRef(null),[s,a]=d.useState(null);return d.useEffect(()=>{if(n){a(!1),r.current&&clearTimeout(r.current);return}return a(i=>i===null?e>0:(r.current=setTimeout(()=>{a(e>0)},1e3),i)),()=>{r.current&&clearTimeout(r.current)}},[e,n]),d.useEffect(()=>{n&&t()},[n,t]),o.jsx("div",{className:"right-xs top-xs pointer-events-none absolute -translate-x-px translate-y-px",children:o.jsx(g6e,{visible:!!s})})};x6e.displayName="SidebarNotificationsButtonCounter";function $L({menuId:e,items:t,menu:n,children:r,onClose:s,onOpen:a}){const i=Ha(),{isMenuOpen:l,setOpenMenu:c}=qu(),u=d.useCallback(()=>{c(e),a?.()},[e,c,a]),f=d.useCallback(()=>{l(e)&&c(null)},[e,c,l]);return d.useEffect(()=>{l(e)||s?.()},[l,e,s]),n?n({onOpen:u,onClose:f}):o.jsx(nn,{isOpen:l(e),items:t??[],isMobileStyle:i,boxProps:{className:"shrink-0"},onOpen:u,onClose:f,children:r??o.jsx(Me,{size:"tiny",icon:Ud})})}const fzt=e=>[e.deleteNotification],v6e=({notification:e,focused:t,onOpen:n,onClose:r,getMenuItems:s=fzt})=>{const{$t:a}=Z(),{markAsDeleted:i}=D4({reason:"SidebarNotificationsListItemMenu"}),l=d.useMemo(()=>({type:"default",text:a({defaultMessage:"Delete notification",id:"+Nk8iq3V1o"}),icon:Fd,onClick:()=>{i.mutate({notificationId:e.notification_id})}}),[i,a,e.notification_id]),c=d.useMemo(()=>s({deleteNotification:l}),[s,l]);return o.jsx("div",{className:B("pointer-events-auto col-start-1 row-start-1 flex items-center justify-center justify-self-end opacity-0 group-hover/notification-list-item:opacity-100",{"opacity-100":t}),children:o.jsx($L,{menuId:e.notification_id,items:c,onOpen:n,onClose:r})})};v6e.displayName="SidebarNotificationsListItemMenu";const mzt=(e,t)=>{const r=Date.now()-t,s=Math.floor(r/6e4),a=Math.floor(s/60);return s<1?e.formatNumber(1,{style:"unit",unit:"minute",unitDisplay:"narrow"}):s<60?e.formatNumber(s,{style:"unit",unit:"minute",unitDisplay:"narrow"}):pB(new Date(t))?e.formatNumber(a,{style:"unit",unit:"hour"}):edt(new Date(t))?e.formatDate(new Date(t),{month:"short",day:"numeric"}):e.formatDate(new Date(t),{year:"numeric",month:"short",day:"numeric"})},pzt=({notification:e,className:t,focused:n})=>{const r=Z(),s=d.useMemo(()=>mzt(r,e.created_at_ms),[r,e.created_at_ms]);return o.jsxs("div",{className:B("col-start-1 row-start-1 flex items-center justify-end gap-1 text-nowrap group-hover/notification-list-item:opacity-0",t,{"opacity-0":n}),children:[o.jsx(F,{variant:"tinyRegular",color:"light",children:s}),o.jsx(g6e,{visible:!e.is_read})]})},qx=({notification:e,getMenuItems:t,children:n})=>{const[r,s]=d.useState(!1),[a,i]=d.useState(!1),l=d.useCallback(()=>{s(!0)},[]),c=d.useCallback(()=>{s(!1)},[]);return o.jsxs(z,{variant:r||a?"subtler":"transparent",className:"group/notification-list-item grid grid-cols-[1fr_max-content] grid-rows-1 gap-2 rounded-lg p-2",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[o.jsx(b6e,{notification:e,className:"col-span-full row-start-1",children:n}),o.jsxs("div",{className:"col-start-2 row-start-1 grid grid-cols-1 grid-rows-1 items-center",children:[o.jsx(pzt,{notification:e,focused:r}),o.jsx(v6e,{notification:e,focused:r,getMenuItems:t,onOpen:l,onClose:c})]})]})};qx.displayName="SidebarNotificationsListItemContainer";const b6e=({notification:e,className:t,children:n})=>{const{close:r}=qu(),{trackEvent:s}=Te(),{markAsRead:a}=D4({reason:"SidebarNotificationsListItemContainer"}),i=d.useCallback(c=>{s("inbox notification clicked",{notificationId:e.notification_id,notificationType:e.type,wasUnread:!e.is_read,deeplinkPath:e.deeplink_path||void 0}),!(c.metaKey||c.ctrlKey)&&e.deeplink_path&&r(),!e.is_read&&a.mutate({notificationId:e.notification_id})},[s,e.notification_id,e.type,e.is_read,e.deeplink_path,r,a]),l=d.useMemo(()=>B("grid gap-2 text-left grid-cols-subgrid",t),[t]);return e.deeplink_path?o.jsx(qe,{href:e.deeplink_path,className:l,onClick:i,children:o.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})}):o.jsx("button",{type:"button",className:l,onClick:i,children:o.jsx("div",{className:"col-start-1 row-start-1 flex min-w-0 gap-2",children:n})})};b6e.displayName="SidebarNotificationsListItemAction";const Kx=({title:e})=>o.jsx(F,{variant:"small",className:"line-clamp-1 text-left",children:e});Kx.displayName="SidebarNotificationsListItemTitle";const Yx=({primaryIcon:e,secondaryIcon:t})=>o.jsxs("div",{className:"relative flex size-9 shrink-0 items-center",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-full",children:o.jsx(de,{icon:e,size:"md"})}),o.jsx("div",{className:"bg-base absolute bottom-0 right-0 flex size-4 items-center justify-center rounded-full",children:o.jsx(de,{icon:t,size:"xs"})})]});Yx.displayName="SidebarNotificationsListItemIcon";const Bw=({items:e})=>{const t=o.jsx("span",{className:"mx-1 inline-block size-0.5 shrink-0 -translate-y-0.5 bg-current"});return o.jsx(F,{variant:"tinyRegular",color:"light",className:"min-w-0 truncate",children:e.map((n,r)=>o.jsxs(d.Fragment,{children:[r>0&&t,n]},r))})};Bw.displayName="SidebarNotificationsListItemMeta";const hzt=({notification:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=fn(),{openModal:r}=qu(),s=d.useCallback(a=>[{type:"default",text:t({defaultMessage:"Edit alert",id:"84mzvWHJ9O"}),icon:Ru,onClick:async()=>{const l=await q3({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});if(!l){n(t({defaultMessage:"Can not edit alert. Alert has been deleted.",id:"ZXF6i2Ca2v"}),"error");return}r("financeAlertModal",{task:l})}},a.deleteNotification],[t,e.metadata.task_id,r,n]);return o.jsxs(qx,{notification:e,getMenuItems:s,children:[o.jsx(Yx,{primaryIcon:Wb,secondaryIcon:dp}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Kx,{title:e.title}),o.jsx(Bw,{items:[t({defaultMessage:"Finance",id:"Fm3M+yFIbr"}),e.body]})]})]})},gzt=({notification:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=fn(),{openModal:r}=qu(),s=vt(),{variation:a,loading:i}=R4(!1),l=d.useMemo(()=>rU(e.metadata.model_preference)??le.DEFAULT,[e.metadata.model_preference]),c=qhe(l),u=d.useCallback(async h=>{const g=await q3({taskId:e.metadata.task_id,reason:"SidebarNotificationsListItemFinanceAlert"});return g||(n(h,"error"),null)},[e.metadata.task_id,n]),f=d.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not edit task. Task has been deleted.",id:"AsFehDyYGj"}));if(!h)return;const g=y=>{y==="updated"&&n(t({defaultMessage:"Task edited",id:"18F/N84T3b"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))};!i&&a?r("automationModal",{initial:h,source:"notifications_panel",initialConfiguration:o0e({selectedTask:h}),onSuccess:g}):r("scheduledTaskModal",{initial:h,source:"notifications_panel",onSuccess:g})},[u,r,a,i,n,t,s]),m=d.useCallback(async()=>{const h=await u(t({defaultMessage:"Can not turn off task. Task has been deleted.",id:"GqnRiHY3AK"}));if(h)try{await Y8({taskId:h.id,payload:{status:"PAUSED"},reason:"SidebarNotificationsListItemScheduledTaskComplete"}),n(t({defaultMessage:"Task paused",id:"Ryhxeg2OIZ"}),"success",5,void 0,t({defaultMessage:"View Tasks",id:"L3nFsHqlqm"}),()=>s.push("/account/tasks"))}catch(g){ne.error(g),n(t({defaultMessage:"Failed to turn off task",id:"0sPa5XFHCj"}),"error")}},[u,n,t,s]),p=d.useCallback(h=>{const g={type:"default",text:t({defaultMessage:"Turn off task",id:"+H7RughJHn"}),icon:rOe,onClick:m},y={type:"default",text:t({defaultMessage:"Edit task",id:"dsTLW1Kx6B"}),icon:Ru,onClick:f};return[g,y,h.deleteNotification]},[t,m,f]);return o.jsxs(qx,{notification:e,getMenuItems:p,children:[o.jsx(Yx,{primaryIcon:c,secondaryIcon:Vb}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Kx,{title:e.title}),o.jsx(Bw,{items:[t(ls[nU(l)].name),e.body]})]})]})},yzt=({notification:e})=>{const{$t:t}=Z(),n=d.useMemo(()=>rU(e.metadata.model_preference)??le.DEFAULT,[e.metadata.model_preference]),r=d.useMemo(()=>nU(n),[n]),s=qhe(n);return o.jsxs(qx,{notification:e,children:[o.jsx(Yx,{primaryIcon:s,secondaryIcon:dr}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Kx,{title:e.title}),o.jsx(Bw,{items:[t(ls[r].name),e.body]})]})]})},_6e=({notification:e})=>{switch(e.type){case"SCHEDULED_TASK_COMPLETE":return o.jsx(gzt,{notification:e});case"THREAD_COMPLETE":return o.jsx(yzt,{notification:e});case"FINANCE_ALERT":return o.jsx(hzt,{notification:e});case"ORG_INVITATION":return o.jsx(w6e,{notification:e});default:return o.jsx(xzt,{notification:e})}},xzt=({notification:e})=>o.jsxs(qx,{notification:e,children:[o.jsx(Yx,{primaryIcon:dp,secondaryIcon:dr}),o.jsxs("div",{className:"flex flex-1 flex-col",children:[o.jsx(Kx,{title:e.title}),o.jsx(F,{variant:"tiny",color:"light",className:"line-clamp-1",children:e.body})]})]});_6e.displayName="SidebarNotificationsListItem";const w6e=d.memo(({notification:e})=>{const{$t:t}=Z(),n=d.useCallback(s=>[{type:"default",text:t({defaultMessage:"View invite",id:"TDWT6zhMKG"}),icon:up,onClick:()=>{e.deeplink_path&&(window.location.href=e.deeplink_path)}},s.deleteNotification],[t,e.deeplink_path]),r=d.useMemo(()=>[e.body],[e.body]);return o.jsxs(qx,{notification:e,getMenuItems:n,children:[o.jsx(Yx,{primaryIcon:Ti,secondaryIcon:bu}),o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[o.jsx(Kx,{title:e.title}),o.jsx(Bw,{items:r})]})]})});w6e.displayName="SidebarNotificationsListItemOrgInvitation";const C6e=()=>{const{isOpen:e}=qu(),{notifications:t,refetch:n,isError:r,isLoading:s,isFetching:a,hasNextPage:i,fetchNextPage:l,isFetchingNextPage:c}=uzt({enabled:e,reason:"SidebarNotificationsList"}),u=ot(),{ref:f,isIntersecting:m}=bxe({threshold:.5});d.useEffect(()=>{m&&i&&!c&&l()},[m,i,c,l]);const p=d.useCallback(()=>{u.setQueryData(dd(),h=>{if(!(!h||h.pages.length===0))return{pages:[h.pages[0]],pageParams:[h.pageParams[0]]}})},[u]);return d.useEffect(()=>{e&&(p(),n())},[e,p,n]),s||r&&a?o.jsx("div",{className:"flex items-center justify-center p-4",children:o.jsx(Fr,{size:16})}):r?o.jsx(bzt,{refetch:n}):t.length===0?o.jsx(vzt,{}):o.jsxs("div",{className:"scrollbar-subtle pt-xs overflow-y-auto",children:[o.jsxs("div",{className:"flex flex-col gap-1",children:[t.map(h=>o.jsx(_6e,{notification:h},h.notification_id)),c&&o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(Fr,{size:16})})]}),o.jsx("div",{ref:f})]})};C6e.displayName="SidebarNotificationsList";const vzt=()=>{const{$t:e}=Z();return o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 p-4 opacity-70",children:[o.jsx(de,{icon:sOe,size:"2xl"}),o.jsx("span",{className:"w-36 text-center",children:e({defaultMessage:"Your notifications will appear here",id:"byRgJ1ceG3"})})]})},bzt=({refetch:e})=>{const{$t:t}=Z();return o.jsxs(F,{variant:"tinyRegular",color:"light",className:"flex flex-col items-center justify-center gap-2 pb-4",children:[o.jsx(de,{icon:J2,size:"2xl",className:"opacity-70"}),o.jsx("span",{className:"mb-2 w-40 text-center opacity-70",children:t({defaultMessage:"There was an error loading your notifications",id:"CSvXfEOB3Y"})}),o.jsx(me,{size:"small",variant:"border",text:t({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:()=>{e()}})]})};function _zt({source:e,onOpen:t,onClose:n,openModal:r,children:s}){const{$t:a}=Z(),i=Ha(),{openModal:l}=xt(),{hasActiveSubscription:c}=St(),{variation:u,loading:f}=R4(!1),{variation:m,loading:p}=Oje(!1),h=r??l,g=[{type:"default",text:a({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:Im,onClick:()=>{!f&&u?h("automationModal",{source:e,initialConfiguration:S3(c)}):h("scheduledTaskModal",{source:e})}},{type:"default",text:a({defaultMessage:"Price alert",id:"XMapyUiPpV"}),icon:dp,onClick:()=>{!p&&m?h("automationModal",{source:e,initialConfiguration:i0e()}):h("financeAlertModal",{})}}];return o.jsx(nn,{items:g,isMobileStyle:i,boxProps:{className:"shrink-0"},onOpen:t,onClose:n,children:s??o.jsx(me,{variant:"border",size:"small",icon:ar})})}const wzt="notifications-panel-header-menu",Czt="notifications-panel-header-create-task-menu",S6e=()=>{const{$t:e}=Z(),{openModal:t}=qu(),{markAllReadAsDeleted:n}=D4({reason:"SidebarNotificationsPanelHeader"}),r=[{type:"default",text:e({defaultMessage:"Delete all read",id:"CpNQrgahgD"}),icon:Fd,onClick:()=>{n.mutate()}}];return o.jsxs(z,{className:"gap-md px-sm pt-xs pb-sm -mx-xs flex items-center justify-between border-b",children:[o.jsx("div",{className:"ml-xs flex items-center gap-1",children:o.jsx(F,{variant:"smallBold",children:e({defaultMessage:"Notifications",id:"NAidKbB0vi"})})}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx($L,{menuId:wzt,items:r}),o.jsx($L,{menuId:Czt,menu:({onOpen:s,onClose:a})=>o.jsx(_zt,{source:"notifications_panel",onOpen:s,onClose:a,openModal:t,children:o.jsx(Me,{size:"tiny",icon:Im,toolTip:e({defaultMessage:"Schedule a notification",id:"7Zbhtucuv7"})})})})]})]})};S6e.displayName="SidebarNotificationsPanelHeader";const E6e=({ref:e})=>o.jsx("div",{ref:e,className:"group/sidebar-notifications max-h-[50vh] w-[400px]",children:o.jsxs("div",{className:"grid h-full grid-cols-1 grid-rows-[min-content_1fr]",children:[o.jsx(S6e,{}),o.jsx(C6e,{})]})});E6e.displayName="SidebarNotifications";const M6e=({ref:e})=>{const{variation:t,loading:n}=bje(!1),r=et(),{isOpen:s,close:a}=qu(),i=wx();return n||!t||!r?null:o.jsx("div",{className:"relative flex flex-col items-center justify-center",children:o.jsx(ei,{isOpen:s,onClose:a,placement:i?"top-end":"top-start",content:o.jsx(E6e,{ref:e}),contentClassName:"inline-flex",childrenClassName:"inline-flex w-full",sideOffset:5,children:o.jsx(y6e,{})})})};M6e.displayName="SidebarNotifications";const k6e=d.memo(({icon:e,selected:t,hovered:n,iconSize:r=24,showBadge:s=!1,className:a})=>o.jsxs(z,{className:"grid size-[40px] place-items-center",children:[o.jsx(z,{variant:"subtle",className:B("size-[90%] rounded-md duration-100 [grid-area:1/-1] group-hover:opacity-100",{"opacity-0":!t&&!n},a)}),o.jsxs("div",{className:"relative [grid-area:1/-1]",children:[o.jsx(de,{icon:e,size:r,className:B("duration-100 group-hover:scale-110",{"text-foreground":t,"text-quiet":!t,"scale-110":t||n})}),s&&o.jsx(O4,{variant:"iconOnly"})]})]}));k6e.displayName="SidebarTabButton";const T6e=d.memo(({icon:e,title:t,selected:n,hovered:r,href:s,onHover:a,onLeave:i,onClick:l,showBadge:c=!1})=>o.jsxs(qe,{href:s,"data-testid":`sidebar-${t.toLowerCase()}`,className:"p-sm group flex w-full flex-col items-center justify-center gap-0.5",onMouseEnter:a,onMouseLeave:i,onClick:l,children:[o.jsx(k6e,{icon:e,selected:n,hovered:r,showBadge:c}),o.jsx(F,{variant:"micro",color:n?"default":"light",className:B("line-clamp-2 w-full text-ellipsis text-center leading-[1.1]",{"font-medium":n}),children:t})]}));T6e.displayName="SidebarTab";const N6e=()=>{const{$t:e}=Z(),{trackEvent:t}=Te(),n=Jo(),{shouldShow:r,setReachedImpressions:s}=wW({cueKey:"sidebar-upgrade-badge",impressionsLimit:10,enabled:!0}),a=d.useCallback(()=>{t("sidebar pro upsell clicked"),s(),n({origin:Le.SIDEBAR_PRO_UPSELL})},[t,s,n]);return o.jsxs("button",{className:"gap-xs group inline-flex appearance-none flex-col items-center [@media(max-height:680px)]:hidden",onClick:a,"data-testid":"sidebar-upgrade-button",children:[o.jsx(z,{variant:"subtle",className:"flex size-8 items-center justify-center rounded-full duration-100 group-hover:opacity-80",children:o.jsxs("div",{className:"relative",children:[o.jsx(ba,{className:"size-4"}),r&&o.jsx(O4,{variant:"iconOnly"})]})}),o.jsx(F,{variant:"micro",color:"light",className:"px-xs w-full truncate text-center",children:e({defaultMessage:"Upgrade",id:"0h/lPMeYkq"})})]})};N6e.displayName="SidebarUpgradeButton";const Szt=({category:e})=>{const{$t:t}=Z();let n="/spaces";return e==="invited"?n="/spaces#invites":e==="organization"?n="/spaces#organization":(e==="private"||e==="saved"||e==="shared")&&(n="/spaces#my-spaces"),o.jsx(qe,{href:n,className:"m-0 w-full border-none bg-transparent p-0 text-left no-underline",children:o.jsx(F,{variant:"tinyRegular",color:"light",className:"duration-200 hover:opacity-60",children:t({defaultMessage:"View All",id:"wbcwKddwLa"})})})},j6e=I.memo(({item:{title:e,slug:t,emoji:n},sidebarOpen:r})=>{const{setMobileSidebarOpen:s}=Wu(),a=Lt(),i=`/spaces/${t}`,l=d.useCallback(()=>{s(!1)},[s]);return o.jsx(zs,{id:`SIDEBAR_SPACE_${t}`,href:i,text:e,fadeOut:!0,selected:a===i,sidebarOpen:r,onClick:l,icon:n?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(gf,{unified:n,size:"tiny"})}):o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(de,{icon:uo,className:"text-quiet size-4 shrink-0"})})})});j6e.displayName="SpaceHistoryItem";const mie={organization:{defaultMessage:"Organization",id:"K56Dims7Up"},private:{defaultMessage:"Private",id:"viXE3205/2"},shared:{defaultMessage:"Shared",id:"kWI6zXRaHY"},saved:{defaultMessage:"Saved",id:"fsB/4pdUqN"},invited:{defaultMessage:"Invites",id:"Wy+IdbkBFc"}},Ezt={organization:"/spaces#organization",private:"/spaces#my-spaces",shared:"/spaces#my-spaces",saved:"/spaces#my-spaces",invited:"/spaces#invites"};function Mzt({category:e,accessory:t,sidebarOpen:n,isLastCategory:r}){const s="spaces-sidebar-section",{$t:a}=Z(),{data:i,isLoading:l}=Xet({category:e,reason:s}),c=d.useMemo(()=>i?.pages.flatMap(u=>u).filter(u=>u!==void 0)??ce,[i?.pages]);return l||c.length===0?null:o.jsxs(o.Fragment,{children:[o.jsx(by,{href:Ezt[e]||"/spaces",text:a(mie[e]||mie.private),accessory:t}),o.jsx(Ib,{show:!0,data:c,type:"space_navbar_item",HistoryComponent:({item:u,position:f})=>o.jsx(j6e,{item:u,position:f,sidebarOpen:n}),wrapperClassName:"!m-0 !px-0 !border-0 flex flex-col gap-1.5"}),c[c.length-1]?.has_next_page&&o.jsx(Szt,{category:e}),!r&&o.jsx(xb,{})]})}const A6e=I.memo(({item:{title:e,slug:t,emoji:n,user_permission:r},sidebarOpen:s})=>{const{setMobileSidebarOpen:a}=Wu(),i=`/spaces/${t}`,l=d.useCallback(()=>{a(!1)},[a]),c=Hg(r),u=Lt();return o.jsx(zs,{id:`SIDEBAR_COLLECTION_${t}`,href:i,text:e,fadeOut:!0,selected:u===i,sidebarOpen:s,onClick:l,icon:c?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(de,{icon:UO,className:"text-quiet size-4 shrink-0"})}):n?o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(gf,{unified:n,size:"tiny"})}):o.jsx("div",{className:"flex size-[12px] items-center justify-center",children:o.jsx(de,{icon:uo,className:"text-quiet size-4 shrink-0"})})})});A6e.displayName="CollectionHistoryItemV2";const pie="pb-lg flex flex-col gap-[12px]",I6e=d.memo(({sidebarOpen:e})=>{const t="spaces-sidebar",{data:n,isLoading:r}=Qet({reason:t}),s=et(),{$t:a}=Z(),i=ml(),{openModal:l}=xt(),c=vU(),u=Array.isArray(i?.slug)?i.slug[0]:i?.slug,{collection:f}=Ac({collectionSlug:u,reason:t}),{handleCreateNewSpace:m}=xU(),{templateSpace:p}=Y0e({collectionSlug:u??"",reason:t}),h=d.useCallback(()=>{l("spaceCreate",{existingCollection:null,onCreate:null})},[l]),g=d.useCallback(()=>{c?m():h()},[c,m,h]),{openVisitorLoginUpsell:y}=or({enabled:!s}),v=!(n!==void 0&&((n.organization_spaces?.length??0)>0||(n.saved_spaces?.length??0)>0||(n.private_spaces?.length??0)>0||(n.invited_spaces?.length??0)>0||(n.shared_spaces?.length??0)>0)),b=TX.filter(_=>{const w=(()=>{switch(_){case"private":return n?.private_spaces;case"shared":return n?.shared_spaces;case"saved":return n?.saved_spaces;case"organization":return n?.organization_spaces;case"invited":return n?.invited_spaces;default:return[]}})();return w&&w.length>0});return v?o.jsxs("div",{className:pie,children:[o.jsx(zs,{id:"SIDEBAR_WELCOME",href:"/spaces/templates",text:a({defaultMessage:"Welcome",id:"PwaN2oE2pC"}),icon:o.jsx(de,{icon:uo,size:"sm"}),sidebarOpen:e}),r?o.jsx(YM,{}):o.jsx(zs,{id:"SIDEBAR_CREATE_SPACE",icon:ar,onClick:_=>{s?(_.preventDefault(),g()):(_.preventDefault(),y({title:a({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Le.SPACES_PAGE}))},text:a({defaultMessage:"Create a Space",id:"SqVNRzqwJz"}),deemphasized:!0,testId:"create-space-button",sidebarOpen:e})]}):o.jsxs("div",{className:pie,children:[o.jsxs(yb,{children:[o.jsx(zs,{id:"SIDEBAR_TEMPLATES",href:"/spaces/templates",text:a({defaultMessage:"Templates",id:"A3ptulOTB3"}),icon:o.jsx(de,{icon:aOe}),sidebarOpen:e}),!!p&&f&&o.jsx(A6e,{item:f,position:0,sidebarOpen:e}),o.jsx(zs,{id:"SIDEBAR_CREATE_SPACE",onClick:g,text:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:ar,sidebarOpen:e,testId:"create-space-button"})]}),o.jsx(xb,{}),r?o.jsx(YM,{}):TX.map(_=>o.jsx(Mzt,{category:_,sidebarOpen:e,accessory:_==="private"?o.jsx(Me,{toolTip:a({defaultMessage:"Create new Space",id:"ZyNYnZRkPz"}),icon:ar,size:"tiny",extraCSS:"-mr-sm",onClick:g,testId:"create-space-button"}):void 0,isLastCategory:_===b[b.length-1]},_))]})});I6e.displayName="SpacesSidebar";const R6e=()=>{const[e,t]=d.useState(!1),[n,r]=d.useState(!1),[s,a]=d.useState(""),i=d.useCallback(()=>{r(!0),setTimeout(()=>{r(!1)},2e3)},[]),l=d.useCallback(()=>{a("Brandmark copied to clipboard"),t(!1),i()},[i]),c=d.useCallback(()=>{a("Logo copied to clipboard"),t(!1),i()},[i]),u=d.useCallback(()=>{a("Brand kit downloading..."),t(!1),i()},[i]),f=d.useCallback(()=>{t(!1)},[]);return d.useMemo(()=>({toastCopy:s,toastVisible:n,isBrandDropdownOpen:e,setBrandDropdownOpen:t,handleBrandCopy:l,handleLogoCopy:c,handleDownload:u,handlePopoverClose:f}),[l,u,c,f,e,s,n])},kzt=he(()=>X(()=>import("./BrandPopoverContent-C7qqz9mq.js"),__vite__mapDeps([120,1,2,6,7,5])),{loading:()=>o.jsx("div",{className:"w-[200px]",children:o.jsxs(z,{className:"gap-sm p-sm flex flex-col",children:[o.jsx(Si,{noLines:!0,size:"tiny"}),o.jsx(Si,{noLines:!0,size:"tiny"}),o.jsx(Si,{noLines:!0,size:"tiny"})]})})}),Tzt=I.memo(()=>o.jsx("svg",{className:"h-auto w-[14px]",width:"278",height:"330",viewBox:"0 0 278 330",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M126.99 83.0617L37.008 0.156738V98.524H0V240.866H37.11V329.64L126.99 250.476V325.948H150.506V249.154L241.005 328.664V240.866H278V98.524H240.891V0.156755L150.506 83.4328V4.1913H126.99V83.0617ZM109.019 121.826L37.088 187.144V217.564H23.5159V121.826H109.019ZM151.01 137.113L217.396 197.396V240.866H217.489V276.862L151.01 218.454V137.113ZM241.005 186.421L169.711 121.826H254.484V217.564H241.005V186.421ZM60.625 197.477L126.99 137.199V219.3L60.625 277.752V197.477ZM168.661 98.524L217.375 53.6415V98.524H168.661ZM60.524 53.6416L109.238 98.524H60.524V53.6416Z",fill:"currentColor"})}));Tzt.displayName="Brandmark";const HH=I.memo(({children:e,onLogoCopy:t,onBrandmarkCopy:n,onDownload:r,...s})=>{const a=d.useMemo(()=>o.jsx(kzt,{onLogoCopy:t,onBrandmarkCopy:n,onDownload:r}),[n,r,t]);return o.jsx(ei,{content:a,placement:"right-start",...s,children:e})});HH.displayName="BrandPopover";const Nzt=()=>{const{isMax:e}=St(),{isEnterprise:t,isFetching:n}=J5({reason:"sidebar-v2"}),s=et()&&!n&&!t;return d.useMemo(()=>s&&!e,[e,s])},jzt=e=>{switch(e?.split("/").slice(1)?.[0]??""){case"":case"search":case"page":return"home";case"spaces":case"collections":return"spaces";case"discover":return"discover";default:return"home"}},P6e=d.memo(({appContentWrapperRef:e,minimalMode:t})=>{const n="sidebar-v2",[r,s]=d.useState(null),a=Lt(),i=d.useRef(null),l=d.useRef(null),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),m=d.useRef(null),{isSidebarPinned:p,actions:h}=In(),{isIncognito:g}=Ga({reason:n}),y=d.useRef(null),[x,v]=d.useState(null),[b,_]=d.useState(!1),w=vt(),C=et(),{openVisitorLoginUpsell:S}=or({enabled:!C}),E=ZAt({reason:n}),M=Ot()?.get("spaces_created")==="true",j=d.useRef(null),R=d.useRef(null),[O,D]=d.useState(!1),[P,A]=d.useState(!1),T=p&&!t,{setBrandDropdownOpen:N,handleBrandCopy:L,handleDownload:U,handleLogoCopy:$,isBrandDropdownOpen:V,handlePopoverClose:W,toastCopy:Q,toastVisible:q}=R6e(),H=dn(),{device:{isWindowsApp:K}}=Pt(),{handleShowPanel:G}=wp(),{shouldShowLossAversionModal:ee,handleOpenLossAversion:Y}=Sx(),{isEnterprise:te}=J5({reason:"sidebar-v2"}),se=He=>{He.button===2&&(He.preventDefault(),N(!0))},ae=He=>{l.current=setTimeout(()=>{s(He)},100),i.current&&clearTimeout(i.current),f.current&&clearTimeout(f.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},pe=x||jzt(a),{$t:fe}=Z(),ge=()=>{l.current&&clearTimeout(l.current),i.current=setTimeout(()=>{s(null)},500)},Se=()=>{h.setIsSidebarPinned(!p)},je=d.useCallback(()=>{s(null),_(!1)},[s,_]),ye=()=>{i.current&&clearTimeout(i.current),f.current&&clearTimeout(f.current),c.current&&clearTimeout(c.current),m.current&&clearTimeout(m.current)},be=()=>{l.current&&clearTimeout(l.current),c.current=setTimeout(()=>{s(null)},150),f.current=setTimeout(()=>{_(!1)},150)},Ne=d.useMemo(()=>{if(r||b){const He=r??pe;return y.current=He,He}return y.current&&!T?(setTimeout(()=>{y.current=null},500),y.current):T||b?pe:"home"},[r,pe,T,b]),ke=d.useCallback(()=>{if(je(),K)G();else if(ee)Y({args:{callback:()=>{w.push("/")},origin:Le.NEW_THREAD_BUTTON}});else{w.push("/");const He=document.getElementById("ask-input");He&&He.focus()}},[ee,Y,w,K,G,je]);d.useEffect(()=>{v(null)},[a]);const Ie=r!==null||T||b,Ce=d.useCallback(()=>{m.current&&clearTimeout(m.current),m.current=setTimeout(()=>{je()},1e3)},[je]),Ge=d.useMemo(()=>[{id:"home",title:fe({defaultMessage:"Home",id:"ejEGdxSUGs"}),icon:Fce,menuComponent:o.jsx(tzt,{isOpen:Ie,onCreateClick:je,onDeleteThreadOrBookmark:Ce,isConfiguring:P,setIsConfiguring:A}),href:"/",actions:[{text:fe({defaultMessage:"Customize Sidebar",id:"/4kt7TXcZf"}),onClick:()=>{A(!0)},show:!0,type:"default",size:Yt.small,icon:Z2}]},{id:"discover",title:fe({defaultMessage:"Discover",id:"cE4HfwyEyr"}),icon:Uce,accessoryIcon:Z2,accessoryClick:He=>{C?D(!0):(He.preventDefault(),S({title:fe({defaultMessage:"Sign in to customize your Discover Feed",id:"tlclIdp++4"}),origin:Le.DISCOVER_TOPICS}))},accessoryTooltip:fe({defaultMessage:"Personalize Discover",id:"d0oRgWBA8Q"}),href:"/discover",menuComponent:o.jsx(lke,{isConfiguring:O,setConfiguring:D,sidebarOpen:Ie})},{id:"spaces",title:fe({defaultMessage:"Spaces",id:"ZMoczsYew9"}),icon:uo,menuComponent:o.jsx(I6e,{sidebarOpen:Ie}),href:E,requireLogin:!0,showBadge:M}],[O,D,fe,C,S,Ie,je,Ce,P,A,E,M]),tt=d.useMemo(()=>Ge.find(He=>He.id===Ne),[Ne,Ge]),gt=He=>{const Tt=j.current&&j.current.contains(He.target);if(Tt){Re();return}R.current&&R.current.contains(He.target)&&!Tt&&Ee(He)},Ee=He=>{f.current&&clearTimeout(f.current),!(j.current&&j.current.contains(He.target))&&(u.current=setTimeout(()=>{_(!0)},100),m.current&&clearTimeout(m.current))},Re=()=>{u.current&&clearTimeout(u.current),f.current=setTimeout(()=>{_(!1)},100)},Vt=d.useCallback(He=>{(He.metaKey||He.ctrlKey)&&He.key===";"&&(He.preventDefault(),h.setIsIncognito(!g))},[h,g]);d.useEffect(()=>(document.addEventListener("keydown",Vt),()=>{document.removeEventListener("keydown",Vt)}),[Vt]);const pt=Nzt(),Nt=!t&&!K&&!H&&C,Ke=wx();return o.jsx(Azt,{isOpen:Ie,children:o.jsxs(z,{variant:"transparent",className:B("group/sidebar relative z-10 hidden min-h-0 flex-none flex-row-reverse md:flex",{"duration-100":t}),children:[t&&o.jsx(z,{variant:"background",className:"absolute inset-y-0 -right-px left-0"}),o.jsx(m6e,{isOpen:Ie,title:tt?.title??"closed",onPin:Se,pinned:T,onMouseEnter:ye,onMouseLeave:be,appContentWrapperRef:e,actions:tt?.actions,canPin:!t,accessory:tt?.accessoryIcon&&o.jsx(Me,{icon:tt.accessoryIcon,onClick:tt.accessoryClick,size:"tiny",toolTip:tt.accessoryTooltip,tooltipLayout:"bottom"}),children:tt?.menuComponent}),o.jsxs(z,{ref:R,variant:"transparent",style:{width:Vh},className:"py-md scrollbar-none relative flex h-full flex-col items-center overflow-y-auto overflow-x-hidden",children:[o.jsx(HH,{onLogoCopy:$,onBrandmarkCopy:L,onDownload:U,onClose:W,isOpen:V,children:o.jsx(qe,{href:"/",className:B("mt-xs active:ease-outExpo block duration-100 ease-out active:scale-[0.97]",{"opacity-50 duration-100":t,"!opacity-100":t&&Ie}),onContextMenu:se,children:o.jsx($a,{variant:"mark",size:"small",includeEffects:!0})})}),o.jsxs("div",{onMouseEnter:t?Ee:void 0,onMouseOver:t?gt:void 0,onMouseLeave:t?Re:void 0,className:B("pt-sm relative flex w-full flex-1 flex-col items-center",{"opacity-0 transition-opacity duration-100":t,"opacity-100":t&&Ie}),children:[o.jsx(me,{icon:ar,onClick:ke,pill:!0,extraCSS:"my-lg hover:scale-105",toolTip:fe({defaultMessage:"New Thread",id:"76XSxT3hV8"}),tooltipLayout:Ke?"left":"right",testId:"sidebar-new-thread"}),o.jsx("div",{className:"pb-xl w-full",onMouseEnter:t?void 0:Ee,onMouseOver:t?void 0:gt,onMouseLeave:t?void 0:Re,children:Ge.map(He=>o.jsx(T6e,{icon:He.icon,title:He.title,selected:pe===He.id,hovered:r===He.id,href:He.href,onHover:()=>ae(He.id),onLeave:ge,showBadge:He.showBadge,onClick:Tt=>{He.requireLogin&&!C?(Tt.preventDefault(),S({title:fe({defaultMessage:"Focus your Perplexity experience in Spaces",id:"spZP/TobF9"}),origin:Le.SPACES_PAGE})):v(He.id)}},He.id))})]}),o.jsxs("div",{className:"pb-sm gap-md mt-auto flex w-full min-w-0 flex-col items-center justify-center [&>*]:w-full",children:[o.jsx(M6e,{ref:j}),o.jsx(ozt,{}),o.jsx(u6e,{showBottomLabels:pt}),te&&o.jsx(f6e,{}),pt&&o.jsx(N6e,{}),pt&&Nt&&o.jsx(ho,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx(szt,{})})]})]}),o.jsx(hc,{message:Q,variant:"success",isVisible:q,timeout:2})]})})});P6e.displayName="SidebarV2";const L6e=Dt("SidebarDesktopContext",void 0),Azt=({children:e,isOpen:t})=>{const[n,r]=d.useState(null),s=d.useCallback(a=>{r(a)},[]);return d.useEffect(()=>{t||r(null)},[t]),o.jsx(L6e.Provider,{value:{openDropdownId:n,setOpenDropdownId:s},children:e})},Izt=()=>{const e=d.useContext(L6e);if(!e)throw new Error("useSidebarDesktop must be used within a SidebarDesktopProvider");return e},O6e=I.memo(({collapsed:e})=>{const{$t:t}=Z(),{device:{isMacOS:n,isWindowsApp:r}}=Pt(),{handleShowPanel:s}=wp(),{shouldShowLossAversionModal:a,handleOpenLossAversion:i}=Sx(),l=vt(),c=W8(h=>h.globalShortcuts[Sr.NEW_THREAD]),u=n?Kn.MACOS:Kn.WINDOWS,f=d.useMemo(()=>c[u],[u,c]),m=d.useMemo(()=>f.map(h=>Kft(h)),[f]),p=d.useCallback(()=>{r?s():a?i({args:{callback:()=>{l.push("/",void 0,"New thread loss aversion")},origin:Le.NEW_THREAD_BUTTON}}):l.push("/",void 0,"New thread button")},[r,a,s,i,l]);return o.jsx("div",{onClick:p,className:e?"-mb-sm py-lg":"pt-sm",children:e?o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(me,{tooltipLayout:"right",icon:ar,pill:!0,toolTip:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})})}):o.jsx("div",{className:"ml-xs",children:o.jsxs(z,{variant:"background",className:"mx-md py-sm pl-md pr-sm hover:ring-super group flex flex-none cursor-pointer select-none items-center justify-between rounded-full border ring-1 ring-transparent transition duration-200",children:[o.jsx(F,{variant:"smallBold",color:"light",className:"line-clamp-1 overflow-hidden text-clip",children:t({defaultMessage:"New Thread",id:"76XSxT3hV8"})}),o.jsx(F,{variant:"tiny",color:"light",className:"flex items-center gap-0 whitespace-nowrap",children:m.map(h=>o.jsx(z,{className:B("flex items-center justify-center rounded border font-mono",{"text-xs":h!=="","px-xs h-4 min-w-4":m.length<=2,"px-xs h-3.5 min-w-3.5":m.length===3}),children:h},h))})]})})})});O6e.displayName="NewThreadButton";const Rzt=({children:e})=>{const[t,n]=d.useState(!1),{session:r}=mt(),s=()=>{n(!1)};return o.jsx(ei,{childrenClassName:"inline-flex min-w-0",placement:"top-start",isOpen:t,onOpen:()=>{n(!0)},onClose:()=>{n(!1)},content:o.jsx(l6e,{session:r,onClick:s}),children:e})},Pzt="pplx.first-purchase-tooltip",Lzt=()=>{const e="collapsed-bottom-items",t=et(),{organization:n,isEnterprise:r}=Hn({reason:e}),{isIncognito:s,incognitoType:a}=Ga({reason:e}),i=gx();return o.jsx(o.Fragment,{children:t&&o.jsxs(z,{className:"mb-md gap-sm pt-sm flex flex-col items-center justify-center border-t",children:[o.jsx(c6e,{trigger:()=>o.jsx(Ozt,{isIncognito:s,incognitoType:a})}),r&&o.jsx(z,{className:"px-two pb-sm pt-md flex justify-center border-t",children:o.jsx(qe,{href:`${i}/org`,children:n?.logo?o.jsx(Un,{size:"medium",user:n?.logo,altText:"Logo"}):o.jsx(me,{ariaLabel:"Organization settings",pill:!0,size:"small",variant:"inverted",icon:VR})})})]})})},Ozt=({isIncognito:e,incognitoType:t})=>{const{session:n}=mt(),{isMax:r,isPro:s,hasAccessToProFeatures:a}=St();return o.jsx(z,{as:"button",bgHover:"subtle",className:"my-xs gap-x-sm relative flex items-center justify-between rounded-full",children:o.jsx("div",{className:"flex items-center gap-px",children:o.jsxs("div",{className:"p-xs relative flex",children:[e?o.jsx("div",{className:"w-[32px]",children:o.jsx(_f,{inverse:!0,incognitoType:t})}):o.jsx(Un,{size:"medium",user:n?.user?.image,showProBadge:s,showMaxBadge:r}),!a&&o.jsx(F,{color:"ultraLight",className:"bg-subtler -translate-y-two p-two absolute bottom-0 right-20 inline-flex translate-x-[4px] rounded-full",children:o.jsx(de,{icon:Wn,size:"xs"})})]})})})},Dzt=()=>{const e="uncollapsed-bottom-items",{$t:t}=Z(),{isPro:n,isMax:r}=St(),s=et(),{session:a,status:i}=mt(),{isIncognito:l,incognitoType:c}=Ga({reason:e}),u=vt(),[f,,m]=qU(Pzt,null);d.useEffect(()=>{f&&setTimeout(()=>{m()},5e3)},[m,f]);const p=bmt(),h=()=>{f&&m(),u.push(p)};return i==="loading"&&o.jsx("div",{className:"p-5",children:o.jsx(z,{variant:"background",className:"h-[20px] w-full rounded-full"})}),o.jsx("div",{children:s&&o.jsx("div",{children:o.jsx(z,{className:"py-sm w-full border-t md:mb-0",children:o.jsxs(z,{className:"mx-sm gap-xs flex items-center justify-between",children:[o.jsx(Rzt,{children:o.jsxs(z,{variant:"subtler",bgHover:"subtle",className:B("gap-sm pr-sm inline-flex w-full cursor-pointer select-none items-center justify-start rounded-full p-1 transition !duration-150",{"!bg-inverse":l}),children:[l?o.jsxs(o.Fragment,{children:[o.jsx(_f,{incognitoType:c}),o.jsx(F,{variant:"smallBold",className:"!text-inverse truncate",children:t({defaultMessage:"Incognito",id:"Sp8UUpZ0at"})})]}):o.jsxs(o.Fragment,{children:[o.jsx(Un,{size:"medium",showProBadge:n,showMaxBadge:r,user:a?.user?.image}),o.jsx(WH,{username:a?.user?.username})]}),o.jsx("span",{className:B("text-inverse relative top-px opacity-50",{"!text-quiet !opacity-100":!l}),children:o.jsx(de,{icon:Wn,size:"sm"})})]})}),o.jsx(Fzt,{text:t({defaultMessage:"Track purchase status in settings",id:"dt0t5ILzKX"}),open:!!f,children:o.jsx(Me,{ariaLabel:t({defaultMessage:"Settings",id:"D3idYvSLF9"}),pill:!0,icon:Bce,onClick:h,size:"small",extraCSS:"aspect-square min-h-[unset] shrink-0 h-[32px] -mr-xs"})})]})})})})},Fzt=({children:e,text:t,open:n})=>o.jsx(bn,{bodyClassName:"!bg-super !p-md",bodyTextClassName:"!text-base !text-white",tooltipText:t,arrowClassName:"!fill-super !w-4 translate-x-[1px] !h-auto",open:n,asChild:!0,children:e}),Uzt=()=>{const e="sidebar-bottom",{$t:t}=Z(),{isIncognito:n}=Ga({reason:e}),{isCollapsed:r,actions:s}=In(),{isMobileStyle:a}=xe(),i=r&&!a,l=d.useCallback(c=>{(c.metaKey||c.ctrlKey)&&c.key===";"&&(c.preventDefault(),s.setIsIncognito(!n))},[s,n]);return d.useEffect(()=>(document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}),[l]),o.jsxs("div",{className:B("flex flex-col",{"items-center justify-center":i}),children:[i&&o.jsx("div",{className:"pb-md flex items-center justify-center",children:o.jsx(me,{pill:!0,ariaLabel:"Expand sidebar",icon:oOe,onClick:()=>s.setIsCollapsed(!1),toolTip:t({defaultMessage:"Expand",id:"0oLj/toqZk"}),tooltipLayout:"right"})}),i?o.jsx(Lzt,{}):o.jsx(Dzt,{})]})},Bzt=()=>{const{$t:e}=Z(),{setBrandDropdownOpen:t,handleBrandCopy:n,handleDownload:r,handleLogoCopy:s,isBrandDropdownOpen:a,handlePopoverClose:i,toastCopy:l,toastVisible:c}=R6e(),{isCollapsed:u,actions:f}=In(),{isMobileUserAgent:m}=xe(),{setMobileSidebarOpen:p}=Wu(),{isMobileStyle:h}=xe(),g=_=>{_.button===2&&(_.preventDefault(),t(!0))},y=()=>{p(!1),b.push("/")},x=()=>{p(!1)},v=u&&!h,b=vt();return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:`my-sm md:my-md flex items-center ${v?"justify-center":"justify-between"}`,children:[o.jsx(HH,{onBrandmarkCopy:n,onLogoCopy:s,onDownload:r,isOpen:a,onClose:i,children:o.jsx(qe,{"aria-label":"Perplexity",href:"/",className:"block",onContextMenu:g,onClick:x,children:v?o.jsx($a,{includeEffects:!0,size:"md",variant:"mark"}):o.jsx("div",{className:"ml-xs pl-md pr-sm pt-xs",children:o.jsx($a,{includeEffects:!0,color:"mixed",isPro:!0,size:"small"})})})}),!v&&!m&&o.jsx("div",{className:"mr-xs pt-two",children:o.jsx(Me,{ariaLabel:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),icon:iOe,size:"small",pill:!0,onClick:()=>{p(!1),f.setIsCollapsed(!0)},toolTip:e({defaultMessage:"Collapse",id:"W/V6+Y+Vy2"}),tooltipLayout:"bottom"})}),m&&o.jsx("div",{className:"mr-xs pt-two",children:o.jsx(Me,{icon:ar,pill:!0,onClick:y})})]}),o.jsx(hc,{message:l,variant:"success",isVisible:c,timeout:2})]})},$zt=(e,t)=>e&&!t?"w-collapsedSideBarWidth":"w-sideBarWidth",D6e=d.memo(()=>{const e="sidebar",{$t:t}=Z(),n=et(),{trackEvent:r}=Te(),{isCollapsed:s}=In(),{isIncognito:a}=Ga({reason:e}),{openVisitorLoginUpsell:i}=or({enabled:!n}),{setMobileSidebarOpen:l}=Wu(),{isMobileStyle:c}=xe(),u=$zt(s,c),f=s&&!c;return o.jsx("div",{"data-testid":dxe.SIDEBAR,className:B("group/bar isolate h-full shrink-0 transition-all duration-300 ease-in-out md:hidden md:h-auto",u),children:o.jsx(z,{className:B("h-full transition-all duration-300 ease-in-out",u),children:o.jsxs("div",{className:B("flex h-full min-h-0 flex-1 flex-col"),children:[o.jsx(Bzt,{}),!c&&o.jsx(O6e,{collapsed:s}),o.jsx("div",{className:"pt-md scrollbar min-h-0 flex-1 overflow-y-auto overflow-x-hidden",children:o.jsx(o6e,{collapsed:f,incognito:a,animationId:"sidebar-tabs"})}),!n&&!f&&o.jsx("div",{className:"m-md md:mb-lg",children:o.jsxs("div",{className:"flex flex-col gap-2",children:[o.jsx(me,{variant:"primary",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Sign Up",id:"39AHJmowNE"}),onClick:()=>{l(!1),r("signup click",{}),i({origin:Le.SIGNUP_BUTTON})}}),o.jsx(me,{variant:"common",size:"small",extraCSS:"h-[44px]",fullWidth:!0,text:t({defaultMessage:"Log in",id:"odXlk858Gb"}),onClick:()=>{l(!1),r("login click",{}),i({origin:Le.LOGIN_BUTTON})}})]})}),n||f?o.jsx(Uzt,{}):null]})})})});D6e.displayName="SidebarMobile";const Vzt=({appContentWrapperRef:e,minimalMode:t})=>{const{isMobileStyle:n}=xe({evaluateOnInit:!0});return n?o.jsx(D6e,{}):o.jsx(dzt,{children:o.jsx(P6e,{minimalMode:t,appContentWrapperRef:e})})};function hie({children:e}){const t=d.useRef(null),n=Lt(),r=d.useMemo(()=>n?.startsWith("/b/"),[n]),s=d.useMemo(()=>n?.startsWith("/b/zen")||n?.startsWith("/b/try-assistant"),[n]);return o.jsx(Yyt,{children:o.jsx(ske,{children:o.jsxs(Ec,{children:[!s&&o.jsx(Qyt,{children:o.jsx(Vzt,{minimalMode:r,appContentWrapperRef:t})}),o.jsxs(Xyt,{hasSidebar:!s,ref:t,children:[e,o.jsx(nke,{})]})]})})})}const Wzt=["header","ask-input","mini-graphs","watchlist","market-summary","financial-profile"],Nun=["ask-input","mini-graphs","watchlist","financial-profile"],Hzt=["header","schedule","standings"],zzt=["header","bracket"],gie=["ask-input"],F6e=["thread-title"],Gzt=["ask-input","article-list"],yie=["topic-list"],zH=I.memo(function(){const t="stripe-wrapper",n=Ot(),r=n?.get("stripe_checkout"),s=n?.get("referral_status");return d.useLayoutEffect(()=>{(r||s)&&z5({reason:t})},[r,s]),null});zH.displayName="StripeStatusRefresher";const U6e=I.memo(e=>{const t=e.metadata?.title||"Perplexity";return d.useEffect(()=>{const n=document.head?document.head.getElementsByTagName("title"):document.getElementsByTagName("title");for(const r of n)r.textContent=t},[t]),null});U6e.displayName="DocumentTitle";function B6e({href:e=Kyt()}){const{isMobileStyle:t}=xe();return t?o.jsx(Me,{icon:NO,href:e,extraCSS:"mt-sm -ml-sm",pill:!0}):o.jsxs(qe,{href:e,className:"gap-xs hover:bg-subtle px-sm py-xs pl-xs -ml-xs -mt-xs group flex items-center rounded-md duration-150",children:[o.jsx(de,{icon:cp,size:"sm",className:"text-quiet group-hover:text-foreground duration-150"}),o.jsx(F,{variant:"small",color:"light",className:"group-hover:!text-foreground duration-150",children:o.jsx(ie,{defaultMessage:"Back",id:"cyR7KhiuaU"})})]})}const qzt=()=>{const{isMobileStyle:e}=xe(),t=Lt();return e&&t!==jn?o.jsx(B6e,{href:jn}):null},wR="selectedApiGroupId",US=["selected-api-group"],Mk=()=>["api-groups"],Kzt=async({reason:e})=>await fpe({reason:e}),Yzt=async({name:e,address:t,description:n,contactInfo:r,reason:s})=>dpe({displayName:e,address:t,description:n,contactInfo:r,reason:s}),$6e=({reason:e})=>{const t=ot(),{data:n,isLoading:r,isFetching:s,isFetched:a,error:i,refetch:l}=Ue({queryKey:Mk(),queryFn:()=>Kzt({reason:e})}),{mutateAsync:c,isPending:u,error:f}=dt({mutationFn:Yzt,onSuccess:()=>{t.invalidateQueries({queryKey:Mk()})}});return d.useMemo(()=>({groups:n??ce,isLoading:r,isFetching:s,isFetched:a,error:i,refetch:l,createGroup:c,isCreating:u,createError:f}),[f,c,i,n,u,a,s,r,l])},V6e=({reason:e})=>{const t=ot(),{data:n,isFetched:r,isLoading:s,isFetching:a,error:i,refetch:l}=Ue({queryKey:Mk(),queryFn:async()=>{const{getAPIGroupsV2:h}=await X(async()=>{const{getAPIGroupsV2:g}=await Promise.resolve().then(()=>lY);return{getAPIGroupsV2:g}},void 0);return h({reason:e})}}),{mutateAsync:c,isPending:u,error:f}=dt({mutationFn:async({name:h,address:g,description:y,contactInfo:x,reason:v})=>{const{createApiGroupV2:b}=await X(async()=>{const{createApiGroupV2:_}=await Promise.resolve().then(()=>lY);return{createApiGroupV2:_}},void 0);return b({displayName:h,address:g,description:y,contactInfo:x,reason:v})},onSuccess:()=>{t.invalidateQueries({queryKey:Mk()})}}),{data:m}=Ue({queryKey:US,queryFn:async()=>null,enabled:!0,staleTime:1/0,gcTime:1/0});d.useEffect(()=>{const h=n??[];if(!(!r||h.length===0)&&m==null){const g=De.getItem(wR),y=h.find(x=>x.api_org_id===g);if(y)t.setQueryData(US,y);else if(Js(h)){const x=h[0];De.setItem(wR,x?.api_org_id),t.setQueryData(US,x)}}},[n,r,t,m]);const p=d.useCallback(h=>{h&&(De.setItem(wR,h.api_org_id),t.setQueryData(US,h),t.invalidateQueries({predicate:g=>g.queryKey.includes(h.api_org_id)}))},[t]);return d.useMemo(()=>({group:m??null,isFetched:r,isLoading:s,isFetching:a,error:i,refetch:l,createGroup:c,isCreating:u,createError:f,setSelectedGroup:p}),[f,c,i,r,a,s,u,l,m,p])},Qzt=async({orgId:e,reason:t})=>await mpe({orgId:e,reason:t}),Xzt=e=>["selected-api-groups","customer-info",e??"no-group-id"],Zzt=({reason:e})=>{const t=ot(),{group:n}=V6e({reason:e}),r=Xzt(n?.api_org_id),s=Ue({queryKey:r,queryFn:()=>Qzt({orgId:n?.api_org_id,reason:e})}),a=d.useCallback(i=>{const l=()=>{t.invalidateQueries({queryKey:r})};i&&i>0?setTimeout(l,i):l()},[t,r]);return d.useMemo(()=>({...s,apiOrganization:s?.data?.apiOrganization,customerInfo:s?.data?.customerInfo,hasDefaultPaymentMethod:s?.data?.hasDefaultPaymentMethod??!1,taxInfo:s?.data?.taxInfo,invalidateCustomerInfo:a,isMember:s?.data?.apiOrganization?.user_role==="MEMBER",isAdmin:s?.data?.apiOrganization?.user_role==="ADMIN"}),[a,s])},nr=(e,t)=>t===e,Jzt=(e,t)=>{const{value:n,loading:r}=jt({flag:"account-settings-api-playground",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])};function eGt(){const{value:e}=BF({flag:"sonar-file-search-gate",defaultValue:"disabled",subjectType:"visitor_id"});return e==="enabled"}const W6e=()=>{const e="api-settings",{groups:t}=$6e({reason:e}),{customerInfo:n,isAdmin:r,isLoading:s}=Zzt({reason:e}),a=n?.customer_portal_url||"",{group:i,setSelectedGroup:l,isLoading:c}=V6e({reason:e}),u=Z(),f=Lt(),m=vt(),[p,h]=d.useState(!1),{isMobileStyle:g}=xe(),y=eGt(),{variation:x}=Jzt(!1),v=d.useMemo(()=>({title:u.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),tabs:{isMobileStyle:!1,actionList:[{text:u.formatMessage({defaultMessage:"API group",id:"vzhpEeLnGg"}),...ra.APIGroup,active:nr(ra.APIGroup.href,f)},{text:u.formatMessage({defaultMessage:"API members",id:"9T3yfgfdEe"}),...ra.APIMembers,active:nr(ra.APIMembers.href,f)},{text:u.formatMessage({defaultMessage:"API billing",id:"kq1Eo7ekVC"}),...ra.APIBilling,active:nr(ra.APIBilling.href,f),show:r},{text:u.formatMessage({defaultMessage:"Usage metrics",id:"rmhlHSzjT6"}),...ra.UsageMetrics,trailingComponent:ra.UsageMetrics.trailingComponent,show:!!a&&r,onClick:()=>{window.open(a,"_blank","noopener,noreferrer")}},{text:u.formatMessage({defaultMessage:"Account limits",id:"4Krk/t2RZ4"}),...ra.AccountLimits,active:nr(ra.AccountLimits.href,f),show:!1},{text:u.formatMessage({defaultMessage:"API keys",id:"yOFPA6eD9X"}),...ra.APIKeys,active:nr(ra.APIKeys.href,f)},{text:u.formatMessage({defaultMessage:"API files",id:"B/bk1JrYzU"}),...ra.APIFiles,active:!!f?.startsWith(ra.APIFiles.href),show:y},{text:u.formatMessage({defaultMessage:"API playground",id:"GWFtC6WH+w"}),...ra.APIPlayground,active:nr(ra.APIPlayground.href,f),show:x}]}}),[u,f,r,a,y,x]),b=t.map(k=>({type:"default",text:k.display_name||k.api_org_id,onClick:()=>{m.push("/account/api/group"),l(k),h(!1)},selected:i?.api_org_id===k.api_org_id,active:i?.api_org_id===k.api_org_id})),_={type:"default",text:"New API Group",leftElement:o.jsx(ar,{size:16}),onClick:()=>{m.push("/account/api/group?create=true"),h(!1)}},w={type:"separator",show:t.length>0},C=[...b,w,_],S=()=>{h(!p)},E=!c&&(!!i||t.length===0);return t&&t.length>0?o.jsxs("div",{className:"flex flex-col",children:[o.jsxs(z,{className:"flex items-center justify-between gap-3 px-3 py-2",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:g?"small":"tinyRegular",color:"light",children:v.title}),o.jsx("div",{className:"size-2.5",children:s&&o.jsx(Fr,{size:10})})]}),E&&o.jsx(nn,{items:C,isMobileStyle:!1,isOpen:p,onOpen:S,onClose:()=>h(!1),wrapperClassName:"min-w-0",children:o.jsx(me,{size:"tiny",text:i?.display_name||i?.api_org_id||"Select API Group",variant:"border",chevron:!0,extraCSS:"max-w-full min-w-0"})})]}),!s&&o.jsx(L4,{fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${v.title}`,collapsed:!1,size:g?"regular":"small",isNewRedesign:!0,...v.tabs})]}):null},GH=()=>{const{session:e}=mt();return Qs({flag:"api-groups-and-settings-enabled",defaultValue:!0,extraAttributes:{organizationUUID:e?.user?.org_uuid??"none"}})},H6e=({reason:e})=>{const{groups:t}=$6e({reason:e}),n=Z(),r=Lt(),{value:s}=GH();return d.useMemo(()=>({text:n.formatMessage({defaultMessage:"API",id:"xwEc8KM8zK"}),...tn.API,show:s&&t.length<1,href:`${jn}/api/group?create=true`,active:nr(tn.API.href,r)}),[n,r,t.length,s])},$w=({title:e,tabs:t,shouldRenderInMobile:n})=>{const{isMobileStyle:r}=xe();return o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{className:"px-3 py-2",variant:r?"small":"tinyRegular",color:"light",children:e}),o.jsx(L4,{isMobileStyle:n,fillSpace:!0,vertical:!0,layoutGroupId:`settings-sidebar-${e}`,collapsed:!1,size:r?"regular":"small",isNewRedesign:!0,...t})]},e)},tGt=()=>{const e="consumer-workspace-settings",t=Z(),n=H6e({reason:e}),{handleSettingsHeaderAdClick:r}=vbe(),s=d.useMemo(()=>({title:t.formatMessage({defaultMessage:"Workspace",id:"rOZptgrtp0"}),tabs:{isMobileStyle:!1,actionList:[n,{text:t.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),...tn.Enterprise,onClick:r,href:void 0,active:!1}]}}),[t,n,r]);return s?.tabs?.actionList?.some(i=>i.show)??!1?o.jsx($w,{title:s.title,tabs:s.tabs,shouldRenderInMobile:!1}):null},nGt=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const s=Z(),a=Lt(),i=Ha(),l=d.useMemo(()=>({title:s.formatMessage({defaultMessage:"Enterprise",id:"CDLJ0Wjq0x"}),tabs:{isMobileStyle:!1,actionList:[{text:s.formatMessage({defaultMessage:"Organization",id:"K56Dims7Up"}),active:nr(eo.Organization.href,a),...eo.Organization},{text:s.formatMessage({defaultMessage:"Members",id:"+a+2ugZ5sB"}),active:nr(eo.Members.href,a),...eo.Members,show:t},{text:s.formatMessage({defaultMessage:"User access",id:"a0UwG9o6Tr"}),active:nr(eo["User access"].href,a),...eo["User access"],show:e},{text:s.formatMessage({defaultMessage:"Permissions",id:"SFuk1vRI4X"}),active:nr(eo.Permissions.href,a),...eo.Permissions,show:e},{text:s.formatMessage({defaultMessage:"Insights",id:"xK7rmdSjmz"}),active:nr(eo.Insights.href,a),...eo.Insights,show:r},{text:s.formatMessage({defaultMessage:"Org Connectors",id:"FVJIMTlwBP"}),active:nr(eo["Org Connectors"].href,a),...eo["Org Connectors"],show:e},{text:s.formatMessage({defaultMessage:"Org files",id:"iWDsD738/m"}),active:nr(eo["Org Imports"].href,a),...eo["Org Imports"],show:n&&!i}]}}),[s,a,e,t,n,i,r]);return o.jsx($w,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1})},rGt=()=>{const e="enterprise-workspace-settings",t=Z(),n=H6e({reason:e}),r=d.useMemo(()=>({title:t.formatMessage({defaultMessage:"Developers",id:"aMWgjX56nj"}),tabs:{isMobileStyle:!1,actionList:[n]}}),[t,n]);return r?.tabs?.actionList?.some(a=>a.show)??!1?o.jsx($w,{title:r.title,tabs:r.tabs,shouldRenderInMobile:!1}):null},sGt=()=>{const{session:e}=mt(),{value:t,loading:n}=Qs({flag:"shopping-enabled",defaultValue:!1,extraAttributes:{orgUUID:e?.user?.org_uuid??""}});return d.useMemo(()=>!n&&t,[n,t])},z6e=()=>{const e="purchase-settings",t=Z(),n=Lt(),{value:r,initialized:s}=Uke({reason:e}),a=r&&s,i=sGt(),l=d.useMemo(()=>({title:t.formatMessage({defaultMessage:"Transactions",id:"/jJLYymnae"}),tabs:{isMobileStyle:!1,actionList:[{text:t.formatMessage({defaultMessage:"Purchases",id:"abfoNg9A1k"}),active:nr(tn.Products.href,n),...tn.Products,show:i},{text:t.formatMessage({defaultMessage:"Reservations",id:"PnzGcgLznk"}),...tn.Reservations,active:nr(tn.Reservations.href,n),show:a}]}}),[t,n,i,a]);return d.useMemo(()=>l.tabs.actionList.some(u=>u.show),[l.tabs.actionList])?o.jsx($w,{title:l.title,tabs:l.tabs,shouldRenderInMobile:!1}):null},aGt=(e,t)=>{const{value:n,loading:r}=jt({flag:"site-specific-prompt-teachers",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},G6e=()=>{const e="base-user-settings",{$t:t}=Z(),n=Lt(),{isEnterprise:r,organization:s}=Hn({reason:e}),a=Ha(),{value:i}=jt({flag:"pro-perks-settings-flag",defaultValue:!1,subjectType:"user_nextauth_id",extraAttributes:{isEnterprise:r??!1,orgUUID:s?.uuid??""}}),{variation:l,loading:c}=Fp(!1),{variation:u}=aGt(!1),f=rw(),m=d.useMemo(()=>({title:t({defaultMessage:"Account",id:"TwyMauNL3r"}),tabs:{isMobileStyle:!1,actionList:[{text:t({defaultMessage:"Account",id:"TwyMauNL3r"}),active:nr(tn.Account.href,n),...tn.Account},{text:t({defaultMessage:"Preferences",id:"PCSt5TwTnx"}),...tn.Preferences,active:nr(tn.Preferences.href,n)},{text:t({defaultMessage:"Personalization",id:"FAejG+JVWn"}),...tn.Personalize,active:nr(tn.Personalize.href,n)},{text:t({defaultMessage:"Assistant",id:"wSAvhubuX6"}),...tn.Assistant,active:nr(tn.Assistant.href,n)},{text:t({defaultMessage:"Shortcuts",id:"7FAwwkYilD"}),...tn.Shortcuts,active:nr(tn.Shortcuts.href,n),show:f},{text:t({defaultMessage:"Site-Specific Instructions",id:"yhS5llp8gM"}),...tn.SiteInstructions,active:nr(tn.SiteInstructions.href,n),show:u},{text:t(l?{defaultMessage:"Automations",id:"ORNSnD2XJb"}:{defaultMessage:"Tasks",id:"yhU1etXT1A"}),...tn.Tasks,href:tn.Tasks.href,active:nr(tn.Tasks.href,n)},{text:t({defaultMessage:"Notifications",id:"NAidKbB0vi"}),...tn.Notifications,active:nr(tn.Notifications.href,n)},{text:t({defaultMessage:"Connectors",id:"2mMJRvsAg1"}),...tn.Connectors,active:nr(tn.Connectors.href,n)},{text:t({defaultMessage:"Files",id:"m4vqJl0/FT"}),...tn.Imports,active:nr(tn.Imports.href,n),show:r&&!a},...i?[{text:t({defaultMessage:"Pro Perks",id:"x69637XBwS"}),active:nr(tn.ProPerks.href,n),...tn.ProPerks}]:[]]}}),[t,n,f,u,l,r,a,i]);return c?null:o.jsx($w,{title:m.title,tabs:m.tabs,shouldRenderInMobile:!1})},oGt=()=>{const{value:e}=GH();return o.jsxs(o.Fragment,{children:[o.jsx(G6e,{}),o.jsx(z6e,{}),o.jsx(tGt,{}),e&&o.jsx(W6e,{})]})},iGt=({isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})=>{const{value:s}=GH();return o.jsxs(o.Fragment,{children:[o.jsx(G6e,{}),o.jsx(z6e,{}),o.jsx(rGt,{}),s&&o.jsx(W6e,{}),o.jsx(nGt,{isEnterpriseAdmin:e,showMembersTab:t,showOrgFilesTab:n,showInsightsTab:r})]})},q6e=I.memo(function({shouldRenderInMobile:t=!1,isMobileStyle:n=!1}){const{isEnterprisePro:r,isEnterpriseMax:s}=St(),a=Hn({reason:"settings-sidebar"}),i=a.isEnterprise??!1,l=a.orgUser?.role==="ADMIN",c=l||(a?.organization?.settings?.member_invites_allowed??!1),u=l||(a?.organization?.settings?.members_can_modify_org_files??!1),{value:f}=jt({flag:"enterprise-insights",subjectType:"user_nextauth_id",defaultValue:!1}),{value:m}=jt({flag:"enterprise-premium-secure",subjectType:"user_nextauth_id",defaultValue:!1}),{value:p}=jt({flag:"enterprise-insights-special-access",subjectType:"user_nextauth_id",defaultValue:!1}),h=(r||s)&&l&&(f&&m||p),g=B("flex flex-col gap-2 -mx-sm md:mx-0",{"border-r py-4 w-sideBarWidth":!t});return n&&!t?null:o.jsxs(z,{className:g,children:[o.jsx("div",{className:"mb-3 ml-2 flex md:px-2",children:o.jsx(B6e,{})}),o.jsx("div",{className:"scrollbar-subtle overflow-y-auto md:px-2",children:i?o.jsx(iGt,{isEnterpriseAdmin:l,showMembersTab:c,showOrgFilesTab:u,showInsightsTab:h}):o.jsx(oGt,{})})]})});q6e.displayName="SettingsSidebar";const CR={apiPlaygroundTitle:J({id:"qqVf+xnImI",defaultMessage:"Sign in to manage to see the API playground"}),proPerksTitle:J({id:"UfIxhPDVtn",defaultMessage:"Sign in to Perplexity to see available Perks"}),defaultAccountTitle:J({id:"ZEOKCVFSgA",defaultMessage:"Sign in to manage your account"})},lGt=(e,t)=>t(e==="/account/api/playground/search"?CR.apiPlaygroundTitle:e==="/account/pro-perks"?CR.proPerksTitle:CR.defaultAccountTitle),cGt=()=>{const e=vt(),t=Lt(),{$t:n}=Z(),{openVisitorLoginUpsell:r}=or({enabled:!0});return d.useEffect(()=>{const s=lGt(t,n);r({title:s,origin:Le.SETTINGS,closeCallback:()=>{e.push("/")}})},[r,e,t,n]),null};function uGt(){return o.jsx("div",{children:o.jsx(z,{className:"mx-auto size-full max-w-screen-md",variant:"background",children:o.jsxs(un,{className:"mt-lg gap-lg flex flex-col",children:[o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs(F,{variant:"baseSemi",className:"ml-sm relative",children:["",o.jsx(BS,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),o.jsx(BS,{className:"h-[170px] rounded-md"})]}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs(F,{variant:"baseSemi",className:"ml-sm relative",children:["",o.jsx(BS,{className:"absolute left-0 top-1/2 h-4 w-[100px] -translate-y-1/2"})]}),o.jsx(BS,{className:"h-[170px] rounded-md"})]})]})})})}const BS=({className:e})=>o.jsx("div",{className:B("bg-subtler rounded-full",e)}),K6e=I.memo(({children:e,childrenWidth:t})=>{const{session:n,status:r}=mt(),{isMobileStyle:s}=xe();return r==="loading"?o.jsx(uGt,{}):n?.user?o.jsxs(o.Fragment,{children:[o.jsx(zH,{}),o.jsxs("div",{className:"grid h-screen grid-cols-1 grid-rows-[min-content_1fr] gap-2 p-2",children:[o.jsx("div",{className:"flex w-full flex-col",children:o.jsx(wbe,{})}),o.jsxs(z,{variant:"background",className:"flex min-h-0 rounded-md border",children:[o.jsx(q6e,{shouldRenderInMobile:!1,isMobileStyle:s}),o.jsxs(Cx,{childrenWidth:t,children:[o.jsx(qzt,{}),o.jsx("div",{className:"md:p-md md:pt-xl",children:e})]})]})]})]}):o.jsx(cGt,{})});K6e.displayName="SettingsDevLayout";const F4=I.memo(()=>o.jsxs(o.Fragment,{children:[o.jsx("script",{id:"reddit-pixel-script",src:"/pixel/reddit.js",async:!0}),o.jsx("script",{id:"facebook-pixel-script",src:"/pixel/meta.js",async:!0}),o.jsx("script",{id:"podscribe-pixel-script",src:"/pixel/podscribe.js",async:!0}),o.jsx("script",{id:"amazon-twitch-pixel-script",src:"/pixel/amazon.js",async:!0})]}));F4.displayName="AfterInteractivePixels";const qH=hp("HomepageComponentsContext",e=>Yo(t=>({homepageTitle:e?.homepageTitle||"",actions:{onHomepageTitleChange:n=>{t({homepageTitle:n})}}}))),dGt=qH.Provider,fGt=qH.useSelector,mGt=qH.useTrackedState,pGt=()=>fGt(e=>e.actions),hGt=mGt,gGt={hidden:{},visible:{transition:{staggerChildren:.025}}},yGt={hidden:{opacity:0},visible:{opacity:1,transition:{type:"tween",duration:.3}},exit:{opacity:0,transition:{duration:.05}}},Y6e=I.memo(()=>{const{homepageTitle:e}=hGt(),t=d.useRef(!0),[n,r]=d.useState(!0),{hasAccessToProFeatures:s,isPro:a,isMax:i,isEnterprise:l}=St(),c=Os(),{isMobileStyle:u}=xe(),f=d.useMemo(()=>{const m=e.split(" ");return m.map((p,h)=>h===m.length-1?p:`${p} `)},[e]);return d.useEffect(()=>{if(c){if(t.current){t.current=!1;return}r(!1)}},[e,c]),o.jsx("div",{className:"mb-lg bottom-0 flex w-full items-center justify-center pb-3 text-center md:absolute",children:o.jsx(Ye,{mode:"wait",children:n&&!u?o.jsx(ve.div,{initial:{opacity:1},exit:{opacity:0,transition:{duration:.2}},children:o.jsx($a,{variant:"text",isPro:a,isMax:i,isEnterprise:l,size:s?"xl":"large"})}):o.jsx(ve.span,{variants:gGt,initial:n?!1:"hidden",animate:"visible",exit:"hidden","aria-hidden":"true",className:"inline-block",children:o.jsx(F,{children:o.jsx("span",{className:"font-display inline-block text-3xl md:text-4xl","aria-label":e,children:f.map((m,p)=>o.jsx(ve.span,{variants:yGt,className:"inline-block",style:{whiteSpace:"pre"},children:m},`${m}-${p}`))})})},e)})})});Y6e.displayName="HomepageTitle";const gh=["SMALL","MEDIUM","LARGE"],Q6e=I.memo(({widget:e,size:t})=>{const n=gh.includes(t)?"linear-gradient(to bottom, black, transparent)":"linear-gradient(to right, transparent, black 50%)",r="absolute inset-0 size-full object-cover object-center",s=d.useMemo(()=>o.jsxs("div",{className:"relative h-full",children:[o.jsx("img",{src:e.image_url_light,className:B(r,"block dark:hidden"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}}),o.jsx("img",{src:e.image_url_dark,className:B(r,"hidden dark:block"),alt:e.title,style:{maskImage:n,WebkitMaskImage:n}})]}),[r,e.image_url_dark,e.image_url_light,e.title,n]),a=d.useMemo(()=>o.jsx("div",{className:"p-sm flex h-full flex-col justify-center",children:o.jsxs("div",{className:"gap-2xs p-xs flex flex-col items-start",children:[o.jsx(F,{className:"line-clamp-2 text-ellipsis leading-tight",variant:gh.includes(t)?"tinyRegular":"small",color:gh.includes(t)?"white":void 0,children:e.title}),o.jsx(F,{className:B("line-clamp-2 text-ellipsis leading-tight",{"text-white/70":gh.includes(t)}),variant:"tiny",color:"light",children:o.jsx("span",{className:"font-normal",children:e.text})})]})}),[t,e.title,e.text]);return o.jsx("div",{className:B("relative size-full",{"bg-inverse dark:bg-subtler":gh.includes(t)}),children:gh.includes(t)?o.jsxs(o.Fragment,{children:[s,o.jsx("div",{className:"absolute inset-x-0 bottom-0",children:a})]}):o.jsxs("div",{className:"grid h-full grid-cols-3 grid-rows-1",children:[o.jsx("div",{className:"col-span-2",children:o.jsx("div",{className:"flex h-full flex-row items-center",children:a})}),o.jsx("div",{className:"col-span-1",children:s})]})})});Q6e.displayName="AnnouncementHomepageWidget";const X6e=I.memo(({widget:e,size:t})=>{const{colorScheme:n}=jr(),r=t=="LARGE"?"grid grid-rows-3":"flex flex-row items-center",s=t=="LARGE"?"row-span-1":"",a=t=="LARGE"?"row-span-3":"",i=d.useMemo(()=>o.jsx("div",{className:B("relative",a),children:o.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,className:"size-full object-cover",alt:e.title,style:{maskImage:"linear-gradient(to bottom, black 75%, transparent)"}})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),l=d.useMemo(()=>o.jsx("div",{className:B(a,"pl-[12px]"),children:o.jsx("div",{className:"relative size-[40px] overflow-hidden rounded-md",children:o.jsx("img",{src:n==="light"?e.image_url_light:e.image_url_dark,alt:e.title,className:"size-full object-cover"})})}),[a,n,e.image_url_light,e.image_url_dark,e.title]),c=d.useMemo(()=>o.jsx("div",{className:B("p-sm flex h-full flex-col justify-center",s,t!=="LARGE"&&"pt-sm"),children:o.jsx(F,{className:"px-xs line-clamp-2 text-ellipsis leading-tight",variant:"tinyRegular",children:e.title})}),[t,s,e.title]);return o.jsx("div",{className:B("size-full",r),children:t=="LARGE"?o.jsxs(o.Fragment,{children:[i,c]}):o.jsxs(o.Fragment,{children:[l,c]})})});X6e.displayName="DiscoverHomepageWidget";const U4=({onRequest:e,onSuccess:t,onError:n,origin:r})=>{const{$t:s}=Z(),{trackEvent:a}=Te();return d.useCallback(()=>{e?.(),navigator.geolocation?navigator.geolocation.getCurrentPosition(i=>{t(i),a("precise location granted",{origin:r})},i=>{let l;switch(i.code){case i.PERMISSION_DENIED:n(s({defaultMessage:"Looks like permission was denied. Please allow location access in your browser site settings.",id:"9P7nG1a2Cl"})),l="permission_denied";break;case i.POSITION_UNAVAILABLE:n(s({defaultMessage:"Unable to determine your location. Please try again.",id:"VLgkyqQ5LO"})),l="position_unavailable";break;case i.TIMEOUT:n(s({defaultMessage:"Request timed out. Please try again.",id:"VIQi5rKvh3"})),l="timeout";break;default:n(s({defaultMessage:"An error occurred while getting your location. Please try again.",id:"oOu0W+N9Re"})),l="unsupported"}a("precise location modal denied",{origin:r,reason:l})},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):(n(s({defaultMessage:"Location services are not supported by your browser.",id:"1eN9TO+Fjt"})),a("precise location modal denied",{origin:r,reason:"unsupported"}))},[s,n,t,e,r,a])},Z6e=I.memo(({isOpen:e,onClose:t,onPermissionGranted:n,origin:r})=>{const{$t:s}=Z(),[a,i]=d.useState(!1),[l,c]=d.useState(null),u=U4({onSuccess:g=>{n(g),i(!1),c(null),t()},onError:g=>{i(!1),c(g)},origin:r}),f=d.useCallback(()=>{i(!0),c(null),u()},[u]),{colorScheme:m}=jr(),{isMobileStyle:p}=xe(),h=d.useMemo(()=>[{text:s({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:t,disabled:a},{text:s({defaultMessage:"Allow",id:"y/bmsG8rnv"}),onClick:f,isLoading:a,variant:"primary",disabled:a}],[s,f,a,t]);return o.jsx(qt,{isOpen:e,onClose:t,variant:p?"bottom-sheet":"small",actionList:h,children:o.jsxs(z,{className:"flex flex-col",children:[o.jsx("div",{className:"-mt-md mb-md bg-subtler flex h-24 w-full items-center justify-center overflow-hidden rounded-md bg-cover bg-center",style:{backgroundImage:m==="dark"?"url('/static/images/location-share-dialog-map-dark.jpg')":"url('/static/images/location-share-dialog-map.jpg')"},children:o.jsxs(z,{className:"size-xl relative flex items-center justify-center rounded-full border",children:[o.jsx(z,{className:"absolute left-1/2 top-1/2 size-full -translate-x-1/2 -translate-y-1/2 rounded-full",variant:"super"}),o.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[140%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-20"}),o.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[180%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-10"}),o.jsx(z,{variant:"super",className:"!border-super absolute left-1/2 top-1/2 size-[220%] -translate-x-1/2 -translate-y-1/2 rounded-full border opacity-5"}),o.jsx(de,{icon:$ce,size:"lg",className:"text-inverse relative"})]})}),o.jsx(F,{variant:"section-title",className:"text-center",children:s({defaultMessage:"Enable Precise Location",id:"/JAfaukfkx"})}),o.jsx(F,{variant:"small",color:"light",className:"text-center",children:s({defaultMessage:"To provide you with accurate local weather information, Perplexity needs access to your device location.",id:"0A/wGwJkVw"})}),l&&o.jsx(z,{className:"mt-md",children:o.jsx(F,{variant:"smallBold",color:"red",className:"text-center",children:l})})]})})});Z6e.displayName="LocationPermissionModal";const xGt=Object.freeze(Object.defineProperty({__proto__:null,LocationPermissionModal:Z6e,useRequestLocation:U4},Symbol.toStringTag,{value:"Module"})),J6e=I.memo(({setShowCTA:e})=>{const{$t:t}=Z(),{deprecatedOpenToast:n}=fn(),r=ot(),s=d.useCallback(()=>{r.invalidateQueries({queryKey:[JB]}),e(!1)},[r,e]),i=U4({onSuccess:s,onError:c=>{n(c,"error",5)},origin:"homepage_weather"}),l=d.useCallback(()=>{i()},[i]);return o.jsxs(ve.div,{whileTap:{scale:.98,transition:{ease:an,duration:.15}},className:"bg-subtle flex w-full cursor-pointer flex-row items-center justify-center rounded-full p-3",onClick:l,children:[o.jsx(de,{icon:$ce,size:"sm",className:"text-foreground relative"}),o.jsx(F,{variant:"smallBold",color:"default",className:"ml-2",children:t({defaultMessage:"Use precise location",id:"Si49wMl5CP"})})]})});J6e.displayName="EnableLocationCTA";const eAe=I.memo(({widget:e,size:t})=>{const n="leading-none",r=e.profiles[0]?.image,s=e.profiles[0]?.displayName??e.profiles[0]?.symbol,a=e.profiles[0]?.companyName,i=e.quotes[0]?.price,l=e.profiles[0]?.currency,c=e.quotes[0]?.changesPercentage,u=(c??0)>0,{locale:f}=Z(),m=d.useMemo(()=>B({"!text-[#20808D] dark:!text-[#1FB8CD]":u,"!text-[#A84B2F] dark:!text-[#9C4153]":!u}),[u]),p=d.useMemo(()=>i?i>=1e5?(i/1e3).toLocaleString(f,{minimumFractionDigits:2,maximumFractionDigits:2})+"k":i.toLocaleString(f,{minimumFractionDigits:2,maximumFractionDigits:2}):"",[i,f]),h=d.useMemo(()=>c?`${u?"+":""}${c?.toFixed(2)}%`:"",[c,u]),g=d.useMemo(()=>t==="MEDIUM"?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-xs flex items-center",children:[r&&o.jsx("img",{src:r??"",alt:a??"",className:"-mt-two size-[16px] rounded-sm"}),o.jsx(F,{variant:"tinyRegular",color:"light",className:n,children:s})]}),o.jsxs("div",{className:"gap-sm flex flex-row items-baseline",children:[o.jsxs(F,{variant:"tinyRegular",className:n,children:[l==="USD"?"$":"",p,l!=="USD"&&o.jsxs("span",{className:"text-quiet text-[11px]",children:[" ",l]})]}),o.jsx(F,{variant:"tinyRegular",className:B(n,m,"ml-auto"),children:h})]})]}):o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"tinyRegular",className:n,children:s}),o.jsx(F,{variant:"tinyRegular",className:n,children:p}),o.jsx(F,{variant:"tinyRegular",className:m,children:h})]}),[h,m,a,l,r,p,t,s]),y=d.useMemo(()=>o.jsx("div",{className:B("bg-subtle flex items-center justify-center rounded-full",{"size-[18px]":t==="SMALL","size-[20px]":t!=="SMALL"}),children:o.jsx(de,{icon:u?IO:Vce,className:m,size:"xs"})}),[u,t,m]);return o.jsxs("div",{className:B("p-sm flex h-full flex-row items-center",{"py-sm":t==="SMALL"}),children:[o.jsx("div",{className:B("pl-xs flex flex-col",t==="MEDIUM"?"gap-sm":"gap-xs"),children:g}),o.jsx("div",{className:B("ml-auto",{"mr-sm":t==="MEDIUM"}),children:y})]})});eAe.displayName="FinanceHomepageWidget";const vGt={SMALL:"col-span-1 row-span-1",MEDIUM:"col-span-2 row-span-1",LARGE:"col-span-2 row-span-2",ROW:"col-span-6 row-span-1"},bGt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="comet"),_Gt=e=>e.some(t=>t.type==="QUERY"&&t.educational_type==="project"),VL=e=>e.type==="QUERY"&&e.educational_type==="primer",tAe={Ask:Br,"Email & Communication Management":up,"Finance & Budgeting":Jle,"Work & Research":xce,"Shopping & Deals":qR,"Social & Personal Life":yce,"Time Management & Productivity":Vb,"Travel & Events":qk,Research:Br,"Current Events":of,Recommend:GR,Travel:cOe,Shopping:qR,Finance:lOe,Sports:qS,Local:Hce,"Make a plan":vOe,Analyze:xOe,Summarize:yOe,"Fact Check":zle,Learn:gOe,Health:YR,"What is Perplexity":qle,Troubleshoot:Wce,Compare:uG,Parenting:hOe,Create:Bb,Study:d1,"Get a job":pOe,Flashcards:mOe,"Practice test":Bk,Law:uG,Technology:fOe,Science:dOe,Humanities:uOe},KH=I.memo(({widget:e,showPadding:t=!0,restrictTwoRows:n=!0,tooltipText:r,icon:s})=>{const a=t?"px-sm py-xs":"",i=t?"p-xs":"",l=d.useMemo(()=>({lineHeight:1.3}),[]);return o.jsx("div",{className:`relative h-full ${a}`,children:o.jsx("div",{className:`flex h-full flex-col ${i}`,children:o.jsxs("div",{className:"flex grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-6 shrink-0 items-center justify-center rounded-md",children:o.jsx(de,{icon:(s||tAe[e.prompt])??Br,color:"#8D9191",size:"sm"})}),r?o.jsx(bn,{tooltipText:r,asChild:!0,children:o.jsx(F,{className:B("text-ellipsis",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})}):o.jsx(F,{className:B("text-ellipsis text-pretty",{"line-clamp-2":n}),variant:"tinyRegular",style:l,children:e.query})]})})})});KH.displayName="QueryHomepageWidget";const nAe=ve.create(qe),wGt={suggested:of,trending:zce},rAe=I.memo(({prompt:e})=>{switch(e){case"suggested":return o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(ie,{defaultMessage:"Suggested",id:"a0lFbMbzyl"})});case"trending":return o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(ie,{defaultMessage:"Trending",id:"ll/ufR0/ED"})});default:return o.jsx(F,{variant:"tinyRegular",color:"light",children:"Ask"})}});rAe.displayName="WidgetTitle";const sAe=I.memo(({widget:e,onQueryClick:t,onQueryHover:n})=>{const{queries:r}=e,s=Fk(r),a=B("px-[12px] pt-[12px]"),i=e.prompt.toLowerCase(),l=wGt[i];return o.jsxs("div",{className:a,children:[o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(de,{icon:l,color:"#8D9191",size:"sm"}),o.jsx(F,{variant:"tinyRegular",color:"light",children:o.jsx(rAe,{prompt:i})})]}),o.jsx("div",{children:s?o.jsx(WL,{query:r[0],restrictTwoRows:!1,onQueryClick:t,onQueryHover:n,widget:e},r[0]):o.jsx("div",{children:r.map(c=>o.jsx(WL,{query:c,onQueryClick:t,onQueryHover:n,widget:e},c))})})]})});sAe.displayName="MultiQueryHomepageWidget";const WL=I.memo(({query:e,restrictTwoRows:t,onQueryClick:n,onQueryHover:r,widget:s})=>{const a=d.useMemo(()=>({query:e,prompt:s.prompt}),[e,s]),i=d.useMemo(()=>({opacity:.5}),[]),l=d.useMemo(()=>({opacity:1}),[]),c=d.useMemo(()=>({opacity:.75,transition:{duration:.15,ease:_a}}),[]);return o.jsx(nAe,{href:`/search/new?q=${e}&source=homepage_widget`,initial:i,animate:l,whileHover:c,children:o.jsx("div",{className:"mt-4",onClick:u=>{u.preventDefault(),n(e)},onMouseEnter:()=>r(e),children:o.jsx(KH,{widget:a,size:"MEDIUM",showPadding:!1,restrictTwoRows:t})})})});WL.displayName="MotionLinkFactory";const aAe=I.memo(({widget:e,onClick:t,onMouseEnter:n,index:r=0,buttonClassName:s})=>o.jsx("div",{onMouseEnter:n,children:o.jsx(Ye,{children:o.jsx(ve.div,{initial:{opacity:0,scale:.7,y:14},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.7},transition:{delay:r*.025,duration:.3,type:"spring",stiffness:400,damping:30},children:o.jsx(me,{variant:"border",size:"small",text:e.query,icon:tAe[e.prompt]??Br,onClick:t,extraCSS:s},e.query)},e.uuid)})}));aAe.displayName="QueryPrimerHomepageWidget";const oAe=I.memo(({widget:e})=>{const t=d.useMemo(()=>({lineHeight:1.3}),[]);return o.jsxs("div",{className:"flex size-full grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle ml-3 flex size-[40px] shrink-0 items-center justify-center rounded-md",children:e.icon_url?o.jsx(ns,{src:e.icon_url,alt:e.prompt,includeLightBoxModal:!1}):o.jsx(de,{icon:Br,color:"#8D9191",size:"sm"})}),o.jsxs("div",{className:"my-auto mr-1 flex flex-col overflow-hidden",children:[o.jsx(F,{variant:"tiny",children:e.prompt}),o.jsx(F,{className:B("line-clamp-2 text-ellipsis text-pretty"),variant:"tinyRegular",style:t,children:e.query})]})]})});oAe.displayName="QueryProjectHomepageWidget";const iAe=I.memo(({widget:e})=>{const t=d.useMemo(()=>({lineHeight:1.3}),[]);return o.jsx("div",{className:"px-sm py-xs relative h-full",children:o.jsx("div",{className:"p-xs flex h-full flex-col",children:o.jsxs("div",{className:"flex grow items-center gap-2",children:[o.jsx("div",{className:"bg-subtle flex size-8 shrink-0 items-center justify-center rounded-md",children:o.jsx(gf,{unified:e.emoji,size:"small"})}),o.jsx(F,{className:"line-clamp-2 text-ellipsis text-pretty",variant:"tinyRegular",style:t,children:e.title})]})})})});iAe.displayName="SpaceHomepageWidget";const jun=({event:e})=>{const[t,n]=d.useState("scoring"),{$t:r}=Z(),s=Ew(e.event.teams),a=e.event.pbp,i=Gx(e.event),l=d.useMemo(()=>a.reduce((c,u)=>(c[u.period]||(c[u.period]=[]),c[u.period]?.push(u),c),{}),[a]);return o.jsx(z,{variant:"subtler",className:"rounded-md",children:o.jsx(y4,{title:t==="all"?"Play-by-Play":"Scoring Plays",titleClassName:"!py-0",trailing:o.jsx(Iw,{size:"small",actionList:[{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),show:!0,onClick:()=>n("scoring"),active:t==="scoring"},{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),show:!0,onClick:()=>n("all"),active:t==="all"}],layoutGroupId:"nfl-play-summary-tab-bar",layout:"right"}),children:o.jsx("div",{className:"-my-md",children:o.jsx(CGt,{plays:l,teams:s,brands:e.brands,drives:e.event.driveChart,mode:t,isLive:i})})})})},CGt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a})=>{const i=a?[...Object.keys(e)].reverse():Object.keys(e);return o.jsx("div",{children:i.map(l=>o.jsx("div",{children:o.jsx(SGt,{plays:e[parseInt(l)]??ce,teams:t,brands:n,drives:r,mode:s,isLive:a,period:parseInt(l)})},l+s))})},SGt=({plays:e,teams:t,brands:n,drives:r,mode:s,isLive:a,period:i})=>{const[l,c]=d.useState(!1),u=d.useMemo(()=>Object.values(e).flat().reduce((p,h)=>(p[h.driveId]||(p[h.driveId]=[]),p[h.driveId]?.push(h),p),{}),[e]),f=()=>{c(!0)};return!Object.keys(u).some(p=>r.find(h=>h.driveId===parseInt(p))?.driveStats.isScoringDrive==="true")&&s==="scoring"?null:o.jsxs(o.Fragment,{children:[o.jsx(F,{variant:"smallCaps",color:"light",className:"-mx-md bg-subtle p-xs px-md",children:YH(i,{asOrdinal:!0})}),o.jsx("div",{className:B("group/plays flex flex-col",{"flex-col-reverse":a}),children:Object.keys(u).map(p=>{const h=r.find(g=>g.driveId===parseInt(p));return s==="scoring"&&h?.driveStats.isScoringDrive==="false"?null:o.jsx(TGt,{brands:n,teams:t,plays:u[parseInt(p)]??ce,drives:r,isLive:a,period:i,onExpand:f,hasExpanded:l},p)})})]})},EGt=e=>{if(!e)return;const t=+e.driveStats.timeOfPossession.seconds;return t<10?`${e.driveStats.timeOfPossession.minutes}:0${t}`:`${e.driveStats.timeOfPossession.minutes}:${t}`},MGt=e=>e?e.driveEnd.playType.playTypeId===20:!1,kGt=e=>e?e.driveEnd.gameClock.minutes!==null:!1,TGt=({brands:e,teams:t,plays:n,drives:r,isLive:s,period:a,onExpand:i,hasExpanded:l})=>{const{$t:c}=Z(),u=r.find(v=>v.driveId===n[0]?.driveId),f=kGt(u),[m,p]=d.useState(!1),h=Sy(u?.teamId??n[0]?.endPossession.teamId??"",e,"nfl"),g=d.useMemo(()=>{const v=EGt(u);return c({defaultMessage:"{count, plural, one {# Play} other {# Plays}}, {yards, plural, one {# Yard} other {# Yards}}, {duration}",id:"segO/liubc"},{count:u?.driveStats.plays,yards:u?.driveStats.yards,duration:v})},[c,u]),y=d.useMemo(()=>u?.driveEnd.period&&u.driveEnd.period!==a?c({defaultMessage:"End of Quarter",id:"tY+g5ifXSh"}):u?.driveEnd.driveChartPlayName??c({defaultMessage:"Active Drive",id:"9WRCeRXYnG"}),[c,u,a]),x=MGt(u)?Sy(t.find(v=>v.teamId!==h.teamId)?.teamId??h.teamId,e,"nfl"):h;return d.useEffect(()=>{s&&!f&&!l&&!m&&p(!0)},[]),d.useEffect(()=>{f&&!l&&p(!1)},[f,l]),o.jsxs(z,{className:B("py-sm relative border-b",{"!border-transparent":m},{"first:border-b-0":s},{"last:border-b-0":!s}),children:[o.jsx("div",{className:B("-inset-x-md bg-subtler absolute inset-y-0 duration-200",{"opacity-0":!m})}),u&&u.driveEnd.period>a&&o.jsx("div",{className:B("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"top-lg bottom-0":!s,"h-lg top-0":s})}),u&&u.driveStart.period<a&&o.jsx("div",{className:B("bg-inverse/25 w-two absolute left-[calc(12px-1px)]",{"h-lg top-0":!s,"top-lg bottom-0":s})}),o.jsxs("div",{className:"gap-md relative flex cursor-pointer items-center",onClick:()=>{p(!m),i()},children:[o.jsx(Ls,{size:"small",logo:x.logo,color:x.color,className:"!border-subtlest relative"}),o.jsxs("div",{className:"flex-1",children:[o.jsx(F,{variant:"smallBold",children:o.jsx("span",{className:"uppercase",children:y})}),o.jsx(F,{variant:"tiny",color:"light",children:g})]}),o.jsxs("div",{className:"gap-lg grid grid-cols-2",children:[t[0]&&o.jsx(xie,{team:t[0],score:n[n.length-1]?.awayScoreAfter??0,didScore:(n[n.length-1]?.awayScoreAfter??0)>(n[0]?.awayScoreBefore??0)}),t[1]&&o.jsx(xie,{team:t[1],score:n[n.length-1]?.homeScoreAfter??0,didScore:(n[n.length-1]?.homeScoreAfter??0)>(n[0]?.homeScoreBefore??0)})]}),o.jsx(F,{variant:"small",className:"flex items-center",children:o.jsx(de,{icon:m?$y:Wn,size:"sm",className:"text-quiet"})})]}),o.jsx(na,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:an},children:m&&o.jsx(Zr,{className:"w-full",initial:{opacity:0,y:-5},animate:{opacity:1,y:0,transition:{duration:.2,ease:an,delay:.05}},exit:{opacity:0,y:-5,transition:{duration:.2,ease:an}},children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:(s?[...n].reverse():n).map(v=>o.jsx(jGt,{play:v},v.playId))})})})]})},xie=({team:e,score:t,didScore:n})=>o.jsxs("div",{children:[o.jsx(F,{variant:"small",color:"light",className:"text-right uppercase",children:e.abbreviation}),o.jsxs(F,{variant:"small",className:"text-right align-baseline",color:n?"super":void 0,children:[n&&o.jsx(de,{icon:Gce,className:"mr-xs inline-block size-2"}),o.jsx("span",{className:"font-mono",children:t})]})]}),NGt=e=>{const t=e.match(/([A-Za-z]+)(\d+)/);if(!t)return e;const[n,r,s]=t;return`${r} ${s}`},YH=(e,t)=>[1,2,3,4].includes(e)?t?.asOrdinal?E4e(e):`Q${e}`:"OT",jGt=({play:e})=>o.jsxs(ve.div,{layout:"position",initial:{opacity:0},animate:{opacity:1},className:"gap-md group flex w-full",children:[o.jsx("div",{className:"w-[24px] shrink-0"}),o.jsx(z,{className:"gap-md py-sm group-last:-mb-sm flex flex-1 border-b group-last:border-b-0",children:o.jsxs("div",{children:[o.jsxs(F,{variant:"small",children:[e.down&&e.distance&&`${E4e(e.down)} & ${e.distance} at `,o.jsx("span",{className:"uppercase",children:NGt(e.yardLine)})]}),o.jsxs(F,{variant:"small",color:"light",children:["(",e.time," - ",YH(e.period),") ",e.playText]})]})})]});function Aun({event:e,brands:t,isLive:n}){const{$t:r}=Z(),[s,a]=d.useState(!1),[i,l]=d.useState("all"),c=d.useMemo(()=>e.pbp.filter(f=>i==="all"?vie(f):vie(f)&&IGt(f)).reduce((f,m)=>(f[m.period]=f[m.period]||[],f[m.period]?.push(m),f),{}),[e?.pbp,i]),u=d.useMemo(()=>[{text:r({defaultMessage:"All Plays",id:"lVQ27GyPmi"}),onClick:()=>l("all"),show:!0,active:i==="all"},{text:r({defaultMessage:"Scoring Plays",id:"DpgdMYgrGb"}),onClick:()=>l("scoring"),show:!0,active:i==="scoring"}],[i,r]);return o.jsxs(o.Fragment,{children:[o.jsx(z,{variant:"subtler",className:"rounded-md",children:o.jsx(y4,{title:r(n?{defaultMessage:"Play by Play",id:"g2y6uMg3RU"}:{defaultMessage:"Play Summary",id:"HtqDGZkC7q"}),trailing:o.jsx("div",{className:"-mb-sm",children:o.jsx(Iw,{actionList:u,layoutGroupId:"nba-play-summary-tab-bar",layout:"right",size:"tiny"})}),children:o.jsx("div",{className:"-my-md",children:o.jsx(QH,{plays:c,event:e,onViewAll:()=>a(!0),playsToRender:6,reverse:n,brands:t,inModal:!1})})})}),s&&o.jsx(RGt,{plays:c,isOpen:s,onClose:()=>a(!1),event:e,brands:t,reverse:n})]})}const QH=d.memo(({plays:e,event:t,onViewAll:n,playsToRender:r=1/0,reverse:s=!1,brands:a,inModal:i=!1})=>{const{$t:l}=Z(),c=Ew(t.teams),u=s?[...Object.keys(e)].reverse():Object.keys(e),f=d.useMemo(()=>{let m=r;return o.jsxs(z,{children:[u.map(p=>{let h=0;const g=e[p]?.length??0;return m<=0?null:(m<g?(h=m,m=0):(h=g,m-=g),o.jsx(AGt,{plays:e[p]??ce,playsToRender:h,teamsSorted:c,period:p,reverse:s,brands:a},p))}),!i&&n&&o.jsx("div",{className:"-mx-sm py-sm flex items-center justify-center",children:o.jsx(Me,{variant:"super",chevron:!0,chevronIcon:Xn,text:l({defaultMessage:"View All",id:"wbcwKddwLa"}),fullWidth:!0,size:"small",onClick:n})})]})},[e,r,c,s,i,n,l,u,a]);return i?f:o.jsx(na,{className:"relative",mode:"popLayout",transition:{duration:.2,ease:an},children:o.jsx(Zr,{children:f})})});QH.displayName="PlaysByPeriod";function AGt({plays:e,playsToRender:t,teamsSorted:n,period:r,reverse:s,brands:a}){const i=d.useMemo(()=>s?[...e].reverse():e,[e,s]),l=Os();return o.jsxs(z,{children:[t>0&&o.jsx("div",{children:o.jsxs(z,{variant:"subtle",className:B("-mx-md px-md py-sm flex items-center justify-between"),children:[o.jsx(F,{variant:"smallCaps",color:"light",children:YH(parseInt(r))}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(_ie,{team:n[0]?.abbreviation??""}),o.jsx(_ie,{team:n[1]?.abbreviation??""})]})]})}),o.jsx(Ec,{children:o.jsx(ve.div,{layout:!0,layoutRoot:!0,children:i.slice(0,t).map((c,u)=>{const f=i[u-(s?-1:1)]?.visitorScore??0,m=i[u-(s?-1:1)]?.homeScore??0;return o.jsx(cAe,{play:c,previousHomeScore:m,previousVisitorScore:f,brands:a,parentHasMounted:l},c.playId)})})})]})}function lAe(e){const t=e?.minutes||0,n=Math.ceil(e.seconds??0)?.toString().padStart(2,"0")||"00";return`${`${t}:`}${n}`}const vie=e=>e.playText!=="Starting Lineup",IGt=e=>e.playEvent.playEventId===3||e.playEvent.playEventId===1,cAe=d.memo(({play:e,previousHomeScore:t,previousVisitorScore:n,brands:r,parentHasMounted:s})=>{const a=d.useRef(!s),i=t!==void 0&&t!==e.homeScore,l=n!==void 0&&n!==e.visitorScore,c=i||l,u=Sy(e.teamId,r,"nba"),{colorScheme:f}=jr(),m=yk(u.color,f);return o.jsxs(ve.div,{className:"-mx-md border-subtlest p-md relative border-b",initial:a.current?void 0:{opacity:0},animate:a.current?void 0:{opacity:1},transition:{layout:{duration:.2,ease:an},opacity:{duration:.2,ease:_a}},layout:"position",children:[c&&o.jsx("div",{className:"w-xs absolute inset-y-1 left-1 rounded-full opacity-50",style:{backgroundColor:m}}),!a.current&&o.jsx(ve.div,{className:"bg-super/15 absolute inset-0",initial:{opacity:1},animate:{opacity:0},transition:{duration:1,ease:_a,delay:.2}}),o.jsxs("div",{className:"gap-md relative flex items-center",children:[o.jsx(Ls,{logo:u.logo,color:u.color,size:"small",includeStripe:!1}),o.jsxs("div",{className:"gap-xs flex flex-1 flex-col items-start",children:[o.jsx(F,{variant:"smallCaps",color:"light",children:lAe(e.time)}),o.jsx(F,{variant:"small",children:e.playText})]}),o.jsxs("div",{className:"gap-md flex items-center",children:[o.jsx(bie,{score:e.visitorScore,didScore:l}),o.jsx(bie,{score:e.homeScore,didScore:i})]})]})]})});cAe.displayName="Play";const bie=({score:e,didScore:t})=>o.jsxs(F,{variant:"small",className:"relative w-[40px] text-right align-baseline",color:t?"super":void 0,children:[t&&o.jsx(de,{icon:Gce,className:"mr-xs inline-block size-2"}),o.jsx("span",{className:"font-mono",children:e})]}),_ie=({team:e})=>o.jsx(F,{variant:"smallCaps",className:"w-[40px] shrink-0 text-right",children:e}),RGt=({plays:e,isOpen:t,onClose:n,event:r,brands:s,reverse:a})=>{const{isMobileStyle:i}=xe();return o.jsx(qt,{isOpen:t,onClose:n,variant:i?"bottom-sheet":"side-sheet",children:o.jsx("div",{className:"min-h-full",children:o.jsx(QH,{plays:e,event:r,brands:s,inModal:!0,reverse:a})})})},uAe=I.memo(({widget:e})=>{const{data:t}=e;return t.event_status.eventStatusId===2||t.event_status.eventStatusId===4?o.jsx(fAe,{widget:e}):o.jsx(dAe,{widget:e})});uAe.displayName="SportsHomepageWidget";const dAe=I.memo(({widget:e})=>{const{$t:t}=Z(),{data:n}=e,{away_team:r,home_team:s}=n,{locale:a}=Z(),i=d.useMemo(()=>{const l=new Date(n.start_date);return W5(l)?`${l.toLocaleString(a,{hour:"numeric",minute:"2-digit"})}, ${t({defaultMessage:"Today",id:"zWgbGgjUUg"})}`:l.toLocaleString(a,{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"})},[n,a,t]);return o.jsxs("div",{className:B("py-sm flex h-full flex-col items-center justify-center px-[12px]"),children:[o.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[o.jsx("div",{className:"flex items-center justify-start",children:o.jsx(Ls,{logo:r.logo,color:r.color,size:"small"})}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(F,{variant:"tinyRegular",className:"truncate",children:i})}),o.jsx("div",{className:"flex items-center justify-end",children:o.jsx(Ls,{logo:s.logo,color:s.color,size:"small"})})]}),o.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),o.jsx("div",{className:"px-2",children:o.jsx(F,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:"vs"})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});dAe.displayName="PreviewContent";const fAe=I.memo(({widget:e})=>{const{$t:t}=Z(),{data:n}=e,{away_team:r,home_team:s,event_status:a,league:i}=n,{minutes:l,seconds:c}=a,u=a.eventStatusId===2,f=a.eventStatusId===4,m=MNe(t,i.toLowerCase()),p=f?t({defaultMessage:"Final",id:"6/JzkWi0di"}):l!=null&&c!=null?lAe({minutes:l,seconds:c}):null,h=f||!a.period?null:`Q${a.period}`,y=ENe(a)?t({defaultMessage:"Halftime",id:"iC0AL294Dr"}):f?t({defaultMessage:"Final",id:"6/JzkWi0di"}):h&&p?`${h} ${p}`:"";return o.jsxs("div",{className:B("p-sm flex h-full flex-col items-center justify-center"),children:[o.jsxs("div",{className:"grid w-full grid-cols-[1fr_auto_1fr] items-center",children:[o.jsxs("div",{className:"flex items-center justify-start",children:[o.jsx(Ls,{logo:r.logo,color:r.color,size:"small"}),r.score!==void 0&&o.jsxs("div",{className:"ml-sm flex flex-col items-center justify-center",children:[o.jsx(F,{variant:r.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:r.score}),r.sub_score&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"truncate",children:r.sub_score})]})]}),o.jsx("div",{className:"flex items-center justify-center",children:o.jsx(F,{variant:"tinyRegular",className:"truncate",children:y})}),o.jsxs("div",{className:"flex items-center justify-end",children:[s.score!==void 0&&o.jsxs("div",{className:"mr-sm flex flex-col items-center",children:[o.jsx(F,{variant:s.sub_score?"tinyRegular":"base",className:"truncate leading-tight",color:"default",children:s.score}),s.sub_score&&o.jsx(F,{variant:"tinyRegular",color:"light",className:"truncate",children:s.sub_score})]}),o.jsx(Ls,{logo:s.logo,color:s.color,size:"small"})]})]}),o.jsxs("div",{className:"mt-xs flex w-full items-center justify-between",children:[o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-start leading-tight",color:"light",children:r.nickname})}),o.jsx("div",{className:"px-2",children:u?o.jsx(mAe,{}):f&&o.jsx(F,{variant:"tinyRegular",className:"truncate leading-tight",color:"light",children:m})}),o.jsx("div",{className:"min-w-0 flex-1",children:o.jsx(F,{variant:"tinyRegular",className:"truncate text-end leading-tight",color:"light",children:s.nickname})})]})]})});fAe.displayName="SummaryContent";const mAe=I.memo(()=>o.jsx(F,{variant:"tinyRegular",color:"super",className:"bg-super/10 truncate rounded-full px-2 py-0.5 leading-tight",children:"Live"}));mAe.displayName="LiveIndicator";const PGt={SPORTS:_Oe,FINANCE:bOe},LGt="#8D9191",OGt=({watchlistType:e})=>{const t=PGt[e];return o.jsx(de,{icon:t,color:LGt})},pAe=I.memo(({widget:e})=>{const{$t:t}=Z(),n=e.watchlist_type.toLowerCase(),r=t(D0[n].title),s=t(D0[n].widgetDescription);return o.jsxs("div",{className:"flex h-full flex-col items-start justify-between p-[12px]",children:[o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(OGt,{watchlistType:e.watchlist_type}),o.jsx(F,{variant:"tinyRegular",color:"light",children:r})]}),o.jsx("div",{children:o.jsx(F,{variant:"tinyRegular",children:s})})]})});pAe.displayName="WatchlistWidget";const hAe=I.memo(({location:e,forecast:t,prefersMetric:n})=>{const r="leading-none line-clamp-1",{$t:s}=Z(),a=n?t?.[0]?.maxtemp_c:t?.[0]?.maxtemp_f,i=n?t?.[0]?.mintemp_c:t?.[0]?.mintemp_f,l=s({defaultMessage:"H: {high} L: {low}",id:"JyTe6EoY40"},{high:a,low:i});return d.useMemo(()=>o.jsxs("div",{className:"mt-sm gap-sm flex flex-row items-baseline justify-between",children:[o.jsx(F,{variant:"tinyRegular",className:r,color:"light",children:e?.name}),o.jsx(F,{variant:"tinyRegular",className:B(r,"min-w-max"),color:"ultraLight",children:l})]}),[l,e?.name,r])});hAe.displayName="WeatherBottomSection";const DGt=({icon:e})=>{const t=Dk(vT,e)?ib[e]:zb;return o.jsx(de,{icon:t,size:"md",className:"self-start"})},gAe=I.memo(({forecast:e,prefersMetric:t})=>{const{locale:n}=Z(),r="row-span-3",s="leading-none line-clamp-1";return o.jsx("div",{className:B(r,"mt-sm flex flex-grow justify-between"),children:e?.slice(0,5).map((a,i)=>{const l=t?a.maxtemp_c:a.maxtemp_f;return o.jsxs(ve.div,{className:"gap-xs flex flex-col items-start",initial:{opacity:0,y:6},animate:{opacity:1,y:0},transition:{delay:.025*i,ease:ha},children:[o.jsx(F,{className:"leading-none",children:o.jsx(DGt,{icon:a.icon})}),o.jsxs(F,{variant:"tinyRegular",className:B(s,"mt-xs"),children:[l,""]}),o.jsx(F,{variant:"tinyRegular",className:s,color:"light",children:Kge(a.dow??"",n)})]},a.dow)})})});gAe.displayName="WeatherForecast";const FGt=({icon:e})=>{const t=Dk(vT,e)?ib[e]:zb;return o.jsx(de,{icon:t,size:"md",className:"-mt-two mr-xs self-start"})},yAe=I.memo(({current:e,prefersMetric:t,setPrefersMetric:n})=>{const r="leading-none line-clamp-1",s=t?e?.temp_c:e?.temp_f,a=e?.condition?.text??"Sunny";return o.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[o.jsx(F,{variant:"base",className:B(r,"min-w-max"),children:o.jsxs("div",{className:"gap-xs flex flex-row items-center justify-center",children:[o.jsx("div",{children:o.jsx(FGt,{icon:e?.condition?.icon})}),o.jsx(F,{variant:"base",className:"tabular-nums",children:o.jsx(ec,{value:s??0,suffix:""})}),o.jsxs("div",{className:"flex",children:[o.jsx("button",{onClick:()=>n(!1),className:"cursor-pointer appearance-none",children:o.jsx(F,{variant:"tiny",color:t?"light":"default",className:B("transition-opacity",t?"opacity-50 hover:opacity-70":"opacity-100"),children:"F"})}),o.jsx(F,{variant:"tiny",color:"light",className:"opacity-50",children:"/"}),o.jsx("button",{onClick:()=>n(!0),className:"cursor-pointer appearance-none",children:o.jsx(F,{variant:"tiny",color:t?"default":"light",className:B("transition-opacity",t?"opacity-100":"opacity-50 hover:opacity-70"),children:"C"})})]})]})}),o.jsx(F,{variant:"tinyRegular",color:"light",className:r,children:a})]})});yAe.displayName="WeatherTopSection";const xAe=I.memo(({data:e,isLoading:t,error:n,size:r="LARGE"})=>{const{prefersMetric:s,setPrefersMetric:a}=Vje();return t?o.jsx(vAe,{size:r}):n||!e?o.jsx(bAe,{}):o.jsx(XH,{data:e,size:r,prefersMetric:s,setPrefersMetric:a})});xAe.displayName="WeatherDisplay";const XH=I.memo(({data:e,prefersMetric:t,setPrefersMetric:n,size:r="LARGE"})=>{const{current:s,location:a,forecast:i}=e;return o.jsxs(ve.div,{initial:{opacity:0,filter:"blur(4px)"},animate:{opacity:1,filter:"blur(0px)",transition:{opacity:{ease:ha,duration:.4},filter:{ease:ha,duration:.4}}},exit:{opacity:0,filter:"blur(2px)",transition:{opacity:{ease:ha,duration:.3},filter:{ease:ha,duration:.3}}},className:B("gap-sm grid size-full",r==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[o.jsx(yAe,{current:s,prefersMetric:t,setPrefersMetric:n}),o.jsx(hAe,{location:a,forecast:i,prefersMetric:t}),r==="LARGE"&&o.jsx(gAe,{forecast:i,prefersMetric:t})]},"success")});XH.displayName="WeatherInner";const UGt={action:{type:"CREATE_THREAD",query:"weather",prefer_pro:!1},uuid:"123",type:"WEATHER",current:{temp_c:20,temp_f:68,condition:{text:"Sunny",icon:"sun",code:"sun"}},location:{name:"San Francisco",region:"California",country:"USA"},forecast:[],is_metric_preferred:!1},vAe=I.memo(({size:e="LARGE"})=>{const t=d.useCallback(()=>{},[]);return o.jsxs(un,{className:B("relative"),children:[o.jsx("div",{className:"invisible",children:o.jsx(XH,{data:UGt,size:e,prefersMetric:!0,setPrefersMetric:t})}),o.jsxs("div",{className:B("gap-sm absolute inset-0 grid size-full",e==="LARGE"?"grid-rows-4":"grid-rows-2"),children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle size-4 rounded-full"}),o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-5 w-12 rounded"})]}),o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-4 w-20 rounded"})]}),o.jsxs("div",{className:"gap-sm flex flex-row items-baseline justify-between",children:[o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-16 rounded"}),o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-14 rounded"})]}),e==="LARGE"&&o.jsx("div",{className:B("row-span-3 flex flex-grow justify-between"),children:[1,2,3,4,5].map(n=>o.jsxs("div",{className:"gap-xs flex flex-col items-start",children:[o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle size-4 rounded-full"}),o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle mt-xs h-3 w-6 rounded"}),o.jsx(z,{variant:"subtler",className:"shimmer dark:bg-subtle h-3 w-8 rounded"})]},n))})]})]})});vAe.displayName="WeatherSkeleton";const bAe=I.memo(()=>o.jsx("div",{className:"gap-sm py-md flex size-full flex-col items-center justify-center",children:o.jsxs("div",{className:"gap-xs flex flex-col items-center text-center",children:[o.jsx(de,{icon:vce,size:"lg",className:"opacity-50"}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"mt-sm leading-tight",children:o.jsx(ie,{defaultMessage:"Unable to load weather",id:"uwWuSjxDbt"})}),o.jsx(F,{variant:"tinyRegular",color:"ultraLight",className:"leading-tight",children:o.jsx(ie,{defaultMessage:"Please try again later",id:"aoWE202GwV"})})]})}));bAe.displayName="WeatherError";const _Ae=I.memo(({widget:e,setShowCTA:t,size:n})=>{const{location:r,permissionStatus:s}=fx(),a=r?.latitude??null,i=r?.longitude??null,{locale:l}=Z(),{data:c,isLoading:u,error:f}=Ue({queryKey:[JB,a,i].map(String),queryFn:()=>nbe({locale:l,location:r,reason:"weather-homepage-widget"})??e,initialData:e,refetchInterval:1e3*60*5,staleTime:0,refetchOnMount:!0,refetchOnWindowFocus:!0,refetchOnReconnect:!0});return d.useEffect(()=>{s!==void 0&&s!=="granted"&&t(!0)},[s,t]),o.jsx("div",{className:"px-sm pt-xs",children:o.jsx(xAe,{data:c,isLoading:u,error:f,size:n})})});_Ae.displayName="WeatherHomepageWidget";const wie=e=>Qr(e).with({type:"ANNOUNCEMENT"},()=>"announcement").with({type:"DISCOVER"},()=>"discover_single_page").with({type:"QUERY"},t=>t.prompt.toLowerCase()).with({type:"WEATHER"},()=>"weather_current").with({type:"FINANCE"},()=>"finance_ticker").with({type:"SPORTS"},()=>"sports_game").with({type:"WATCHLIST"},()=>"watchlist").with({type:"MULTIQUERY"},t=>(t.prompt??"Ask").toLowerCase()).with({type:"SPACE"},t=>t.title.toLowerCase()).exhaustive(),BGt=(e,t,n,r="home")=>{const{trackEvent:s}=Te(),[a,i]=d.useState(!1),l=d.useMemo(()=>{const x=Qr(e).with({type:"ANNOUNCEMENT"},b=>({title:b.title,text:b.text,variant:b.variant})).with({type:"DISCOVER"},b=>({title:b.title})).with({type:"QUERY"},b=>({prompt:b.prompt,query:b.query,uuid:b.uuid,educational_type:b.educational_type})).with({type:"WEATHER"},b=>({location:b.location.name})).with({type:"FINANCE"},b=>({ticker:b.quotes[0]?.symbol,is_implicit:b.is_implicit??!1})).with({type:"WATCHLIST"},b=>({type:b.watchlist_type})).with({type:"SPACE"},b=>({title:b.title})).otherwise(()=>({})),v=e.action.type==="MULTIQUERY"?e.action.actions.map(b=>({...b,type:b.type.toLowerCase()})):{...e.action,type:e.action.type.toLowerCase()};return{widgetType:e.type.toLowerCase(),widgetName:wie(e),widgetCTA:v,widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontendUUID:n,metadata:x,uuid:e.uuid}},[e,t,n,r]),c=d.useCallback(()=>{a||(s("widget viewed",l),i(!0))},[l,s,a]),u=d.useCallback(()=>{s("widget selected",l)},[l,s]),f=d.useCallback(()=>{s("widget dismissed",l)},[l,s]),m=d.useCallback(()=>{s("widget hovered",l)},[l,s]),p=d.useCallback(x=>{if(e.type!=="MULTIQUERY")return;const v=e.action.actions.find(b=>b.query===x);if(v)return{widgetType:e.type.toLowerCase(),widgetName:wie(e),widgetLocation:r,widgetSize:`grid_${(e.size??"MEDIUM").toLowerCase()}`,position:t,frontentUUID:n,metadata:{prompt:e.prompt,query:v.query,uuid:v.uuid??null}}},[e,t,n,r]),h=d.useCallback(x=>{const v=p(x);v&&s("widget selected",v)},[p,s]),g=d.useCallback(x=>{const v=p(x);v&&s("widget hovered",v)},[p,s]),y=d.useCallback(x=>{const v=p(x);v&&s("widget viewed",v)},[p,s]);return d.useMemo(()=>({trackView:c,trackClick:u,trackDismiss:f,trackHover:m,trackMultiQueryClick:h,trackMultiQueryHover:g,trackMultiQueryView:y}),[u,f,m,h,g,y,c])},$Gt=()=>{const{submitQuery:e}=Sa(),t=vt(),{openModal:n}=xt(),r=RSe(),{device:{isWindowsApp:s}}=Pt(),{setUserInput:a,setShouldTriggerFocus:i}=V_(),{blankStateSuggestions:l}=ea(),{setSuggestions:c}=zo(),u=qa(),{onHomepageTitleChange:f}=pGt(),{setFileUploadUpsellTooltipOpen:m}=zo(),{deprecatedOpenToast:p}=fn(),h=et(),{hasAccessToProFeatures:g}=St(),{session:y}=mt(),x=y?.user?.email??"",{isStudent:v}=V5({email:x,reason:"study-mode-access"}),_=U4({onSuccess:vn,onError:T=>{p(T,"error",5)},origin:"homepage_primer"}),w=d.useCallback(T=>{const N=bo();e({rawQuery:T.query,copilotOverride:T.prefer_pro,attachments:T.attachments,collection:null,newFrontendContextUUID:N,promptSource:"homepage_widget",querySource:"homepage_widget",sourcesOverride:["web"],modelPreferenceOverride:T.prefer_pro?"pplx_pro":"turbo",shouldRedirectToBackendUUID:!0})},[e]),C=d.useCallback(T=>{a(T.input_prefix),i(!0),T.suggestions&&T.suggestions.length>0?c(T.suggestions.map(({query:N,submission_query:L})=>({query:N,submission_query:L??void 0}))):T.suggestions&&T.suggestions.length===0&&l[u]&&c(l[u]),T.homepage_tagline&&f(T.homepage_tagline),T.trigger_location_prompt&&_(),T.trigger_file_tooltip&&m(!0),T.trigger_deep_research&&h&&r(le.ALPHA,ue.RESEARCH),T.trigger_labs&&h&&g&&r(le.BETA,ue.STUDIO),T.trigger_study_mode&&h&&v&&r(le.STUDY,ue.STUDY)},[a,i,h,c,l,f,_,m,r,u,g,v]),S=d.useCallback((T,N)=>{const L=T.find(U=>U.query===N);L&&w(L)},[w]),E=d.useCallback(T=>{t.push(`/page/${T.page_slug}`)},[t]),k=d.useCallback(T=>{s?AE(T):window.open(T,"_blank")},[s]),M=d.useCallback((T,N)=>{const L=T.should_interpolate_template&&N?Vge(T.permalink,N):T.permalink;k(L)},[k]),j=d.useCallback(T=>{s?AE(T.permalink):t.push(T.permalink)},[t,s]),R=d.useCallback(()=>{t.push("/pro")},[t]),O=d.useCallback(T=>{T.deep_research?r(le.ALPHA):r(le.PRO)},[r]),D=d.useCallback(T=>{n("watchlistModal",{origin:"home",watchlistType:T.watchlist_type})},[n]),P=d.useCallback(T=>{n("spaceCreate",{existingCollection:null,onCreate:null,content:{title:T.space_title??void 0,description:T.space_description??void 0,instructions:T.space_instructions??void 0,emoji:T.space_emoji??void 0}})},[n]),A=d.useCallback(T=>{T.modal_name&&n(T.modal_name)},[n]);return d.useMemo(()=>({createThreadAction:w,populateInputAction:C,multiQueryCreateThreadAction:S,openPageAction:E,openExternalUrlAction:M,openInternalUrlAction:j,openPaywallAction:R,enableProAction:O,openWatchlistModalAction:D,createSpaceAction:P,openModalAction:A}),[P,w,O,S,M,j,A,E,R,D,C])},VGt=e=>["ANNOUNCEMENT","QUERY"].includes(e.type),wAe=I.memo(({onClick:e,onMouseEnter:t,href:n,className:r,children:s,disableHoverAnimation:a=!1})=>{const i=n?nAe:ve.div,l=d.useMemo(()=>({opacity:.5}),[]),c=d.useMemo(()=>({opacity:1}),[]),u=d.useMemo(()=>({scale:.98,transition:{ease:an,duration:.15}}),[]),f=d.useMemo(()=>({scale:{ease:an,duration:.3},opacity:{ease:ha,duration:.3}}),[]);return o.jsx(i,{initial:l,animate:c,whileHover:a?void 0:{opacity:.75,transition:{duration:.15,ease:_a}},whileTap:u,transition:f,className:B(r,a?"":"cursor-pointer"),href:n,onClick:e,onMouseEnter:t,children:o.jsx(z,{variant:"subtler",className:"relative size-full select-none overflow-hidden rounded-lg",children:s})})});wAe.displayName="AnimatedWidgetContainer";const CAe=I.memo(({widget:e,size:t,position:n,frontendSessionUUID:r,widgetLocation:s="home"})=>{const a="homepage-widget-base",[i,l]=d.useState(!1),[c,u]=d.useState(!1),f=et(),{showSuggestDropdown:m}=ea(),{trackView:p,trackHover:h,trackClick:g,trackDismiss:y,trackMultiQueryClick:x,trackMultiQueryHover:v,trackMultiQueryView:b}=BGt(e,n,r,s),{createThreadAction:_,openPageAction:w,openExternalUrlAction:C,openInternalUrlAction:S,openPaywallAction:E,enableProAction:k,openWatchlistModalAction:M,multiQueryCreateThreadAction:j,populateInputAction:R,createSpaceAction:O,openModalAction:D}=$Gt(),{mutate:P}=Tgt({widget:e,reason:a}),A=Zo(),{session:T}=mt(),N=d.useMemo(()=>({email:T?.user?.email??"",deviceId:A?.device_id??"",browserVersion:A?.browser_version??"",osName:void 0??""}),[T?.user?.email,A?.device_id,A?.browser_version]),U=(K=>Qr(K).with({type:"CREATE_THREAD"},G=>`/search/new?q=${G.query}&source=homepage_widget`).with({type:"OPEN_PAGE"},G=>`/page/${G.page_slug}`).with({type:"EXTERNAL_URL"},G=>G.should_interpolate_template?Vge(G.permalink,N):G.permalink).with({type:"INTERNAL_URL"},G=>G.permalink).otherwise(()=>{}))(e.action),$=d.useRef(!1);d.useEffect(()=>{if(!$.current){if(e.type!=="MULTIQUERY")p();else for(const K of e.queries)b(K);$.current=!0}},[p,e,b]);const V=VL(e),W=d.useCallback(K=>{U&&K.preventDefault(),Qr(e.action).with({type:"CREATE_THREAD"},G=>{_(G)}).with({type:"OPEN_PAGE"},G=>w(G)).with({type:"EXTERNAL_URL"},G=>C(G,N)).with({type:"PAYWALL"},E).with({type:"INTERNAL_URL"},G=>S(G)).with({type:"ENABLE_PRO"},G=>k(G)).with({type:"OPEN_WATCHLIST_MODAL"},G=>M(G)).with({type:"MULTIQUERY"},()=>{}).with({type:"POPULATE_INPUT"},G=>{R(G)}).with({type:"CREATE_SPACE"},G=>{O(G)}).with({type:"OPEN_MODAL"},G=>{D(G)}).exhaustive(),VGt(e)&&e.dismissable&&f&&(P(),y()),e.type!=="MULTIQUERY"&&g()},[U,e,E,f,_,w,C,N,S,k,M,O,R,P,y,g,D]),Q=d.useCallback(()=>{e.type!=="MULTIQUERY"&&h()},[e.type,h]),q=d.useMemo(()=>Qr(e).with({type:"ANNOUNCEMENT"},K=>o.jsx(Q6e,{widget:K,size:t})).with({type:"DISCOVER"},K=>o.jsx(X6e,{widget:K,size:t})).with({type:"QUERY",educational_type:"primer"},K=>o.jsx(aAe,{widget:K,onClick:W,onMouseEnter:Q,index:n})).with({type:"QUERY",educational_type:"project"},K=>o.jsx(oAe,{widget:K})).with({type:"QUERY"},K=>o.jsx(KH,{widget:K,size:t})).with({type:"WEATHER"},K=>o.jsx(_Ae,{widget:K,setShowCTA:u,size:t})).with({type:"FINANCE"},K=>o.jsx(eAe,{widget:K,size:t})).with({type:"SPORTS"},K=>o.jsx(uAe,{widget:K,size:t})).with({type:"WATCHLIST"},K=>o.jsx(pAe,{widget:K,size:t})).with({type:"SPACE"},K=>o.jsx(iAe,{widget:K,size:t})).with({type:"MULTIQUERY"},K=>o.jsx(sAe,{widget:K,onQueryClick:G=>{j(K.action.actions,G),x(G)},onQueryHover:G=>v(G)})).otherwise(()=>(ne.error(new Error(`No HomepageWidget found for type: ${e.type}`)),null)),[e,t,W,Q,n,j,x,v]),H=d.useMemo(()=>Qr(e.type).with("WEATHER",()=>o.jsx(J6e,{setShowCTA:u})).otherwise(()=>null),[e.type]);return!q||m?null:o.jsxs("div",{className:B("relative",vGt[t]),onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:[V?q:o.jsx(wAe,{href:U,onClick:W,onMouseEnter:Q,className:"size-full",disableHoverAnimation:e.type==="MULTIQUERY",children:q}),o.jsx(Ye,{children:c&&i&&o.jsx(ve.div,{initial:{opacity:.5},animate:{opacity:1},exit:{opacity:0},transition:{scale:{ease:an,duration:.2},opacity:{ease:ha,duration:.2}},className:B("bg-subtler absolute inset-0 flex justify-center rounded-lg p-[12px]",t==="LARGE"?"items-end":"items-center"),children:H})})]})});CAe.displayName="HomepageWidgetBase";let Cie=1234567;function WGt(e){e!==void 0&&(Cie=e);let t=Cie+=1831565813;return t=Math.imul(t^t>>>15,t|1),t^=t+Math.imul(t^t>>>7,t|61),((t^t>>>14)>>>0)/4294967296}const HGt=5,SAe=d.memo(({children:e})=>o.jsx("div",{className:"gap-sm grid grid-cols-6",style:{gridTemplateRows:"repeat(auto-fit, 64px)",gridAutoRows:"64px"},children:e}));SAe.displayName="GridContainer";const zGt=({children:e})=>o.jsx("div",{className:"gap-sm flex h-[32px] flex-row flex-wrap justify-center overflow-hidden",children:e});var nf;(function(e){e[e.Comet=0]="Comet",e[e.Project=1]="Project"})(nf||(nf={}));const GGt=e=>{switch(e){case nf.Comet:return o.jsx(ie,{defaultMessage:"See what Comet can do",id:"TO5vylizup"});case nf.Project:return o.jsx(ie,{defaultMessage:"Projects created with Perplexity",id:"6XX3tVQOXy"})}},qGt=e=>{switch(e){case nf.Comet:return o.jsx(Sc,{size:16});case nf.Project:return o.jsx(Fb,{size:16})}},KGt=({variant:e,children:t})=>{const n=ot(),{$t:r}=Z(),s=d.useCallback(()=>{n.invalidateQueries({queryKey:[Zg]})},[n]);return e?o.jsxs("div",{children:[o.jsxs("div",{className:"gap-sm pb-sm flex items-center justify-between",children:[o.jsxs("div",{className:"gap-xs flex flex-row items-center",children:[o.jsx(F,{variant:"smallBold",color:"super",children:qGt(e)}),o.jsx(F,{variant:"smallBold",color:"light",children:GGt(e)})]}),o.jsx("div",{children:o.jsx(Me,{size:"tiny",onClick:s,text:r({defaultMessage:"See more",id:"yoLwRWw99S"}),icon:Ub})})]}),t]}):t},EAe=d.memo(({widgets:e,widgetLocation:t="home"})=>{const n=d.useMemo(()=>bo(),[]),r=Aat(),s=e.length>0;d.useEffect(()=>{s&&r("web.frontend.homepage_widgets_ttv")},[r,s]);const{flexWidgets:a,gridWidgets:i,headingVariant:l}=d.useMemo(()=>{const f=e.filter(VL).sort((h,g)=>WGt(h.seed)-.5).slice(0,HGt),m=e.filter(h=>!VL(h)),p=bGt(e)?nf.Comet:_Gt(e)?nf.Project:void 0;return{flexWidgets:f,gridWidgets:m,headingVariant:p}},[e]),c=d.useCallback(u=>u.map((f,m)=>o.jsx(CAe,{widget:f,size:f.size??"MEDIUM",position:m,frontendSessionUUID:n,widgetLocation:t},f.uuid)),[n,t]);return o.jsx(Ye,{initial:!1,children:o.jsx(KGt,{variant:l,children:o.jsxs("div",{className:"gap-md grid grid-cols-1",children:[a.length>0&&o.jsx(zGt,{children:c(a)}),i.length>0&&o.jsx(SAe,{children:c(i)})]})})})});EAe.displayName="WidgetsClient";const MAe=d.memo(()=>{const e="homepage-widgets-wrapper",{locale:t}=Z(),n=et(),r=qa(),s=d.useMemo(()=>r!==ue.STUDIO?{}:{searchMode:ue.STUDIO},[r]),{data:a}=Ue({queryKey:[Zg],queryFn:()=>n?Egt({searchMode:r,reason:e}):Mgt({params:{isComet:dn(),lang:t,lifecycle:Sgt(wO())},reason:e}),gcTime:1/0}),i=ot(),l=d.useRef(!1);return d.useEffect(()=>{if(!l.current){l.current=!0;return}i.invalidateQueries({queryKey:[Zg]})},[i,s]),a?o.jsx(EAe,{widgets:a}):null});MAe.displayName="HomepageWidgetsWrapper";const kAe=d.memo(()=>{const{isHomepageWidgetsDisabled:e}=In();return e?null:o.jsx(Nr,{children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(MAe,{})})})});kAe.displayName="HomepageWidgets";const YGt=()=>{const e=d.useRef(!1),t=Os(),n=et(),{openVisitorLoginUpsell:r}=or({enabled:!n}),{data:s}=sU({enabled:t&&!e.current}),a=k_(s??void 0);d.useEffect(()=>{e.current||t&&s&&s.app_location===Zc.MODAL&&(a(),e.current=!0)},[t,n,r,s,a])},SR=Qe({[cGe]:{id:"Sj7bs8Ti07",defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro"},[uGe]:{id:"8MOEZchxNH",defaultMessage:"Sign in with your USC email to unlock one month free of Perplexity Pro"},[dGe]:{id:"4d/Zn7HZQx",defaultMessage:"Sign in with your UC Berkeley email to unlock one month free of Perplexity Pro"},[fGe]:{id:"DXeXI7X4DZ",defaultMessage:"Sign in with your IITM email to unlock one year free of Perplexity Pro"},[mGe]:{id:"sBfq8LkRp0",defaultMessage:"Sign in with your ac.kr email to unlock one year free of Perplexity Pro"}}),QGt=()=>{const e=Ot(),{$t:t}=Z(),{openModal:n}=xt(),r=Jo(),{device:{userAgent:s}}=Pt(),[a,i]=d.useState(!1),l=et(),{trackEvent:c}=Te(),{openVisitorLoginImageUpsell:u}=or({enabled:!0});d.useEffect(()=>{if(typeof window>"u")return;const f=e?.get(lGe),m=[];if(e?.get(YK)&&(m.push(YK),n("onboardingModal",{userAgent:s})),e?.get(QK)&&(m.push(QK),c("default search extension uninstalled",{isBrowserExtension:!0})),e?.get(XK)&&(m.push(XK),r({origin:Le.MAX_URL_PAYWALL,pitchMessage:{title:t({defaultMessage:"Introducing Perplexity Max",id:"v1bpoVO4Rq"}),description:t({defaultMessage:"Maximize your curiosity with unlimited access to Perplexity Labs",id:"AX3/N9NedQ"})}})),f&&Bqe(f),!a&&(e?.get(iGe)||f&&SR[f])){if(l)return;i(!0);const p=f&&SR[f]?t(SR[f]):t({defaultMessage:"Sign in with your school email to unlock one month free of Perplexity Pro",id:"Sj7bs8Ti07"});u({origin:Le.BACK_TO_SCHOOL,title:p,image:hGe,imageAlt:gGe,loginButtonsStyle:"highlightBackToSchool"})}if(m.length>0){const p=Array.from(e?.entries()??[]).filter(([g])=>!m.includes(g)),h=new URLSearchParams;p.forEach(([g,y])=>{h.set(g,y)}),_x(Object.fromEntries(p))}},[e,n,r,s,a,l,t,c,u])},XGt=()=>{const e=et(),{openModal:t}=xt(),{$t:n}=Z(),{openVisitorLoginUpsell:r}=or({enabled:!0}),s=d.useCallback(a=>{if(ne.info("Thread access not allowed",{uuidOrSlug:a,isUserLoggedIn:e}),e)t("requestAccessModal",{uuidOrSlug:a});else{const i=`${window.location.origin}/search/${a}`;r({origin:Le.REQUEST_ACCESS_LOGIN_GATE,title:n({defaultMessage:"This thread is private",id:"PX12OU86rT"}),description:n({defaultMessage:"Sign in if you are the owner of this thread, or to request access",id:"/A9MF2B0ub"}),sheetModalVariant:"centered-sheet",overrideRedirectUrl:i})}},[n,e,t,r]);return d.useMemo(()=>({handleRequestAccess:s}),[s])};function TAe(){const{isSplashPageDismissed:e}=In(),t=Tqe(),{isMobileUserAgent:n}=xe(),r=et(),s=Lt(),a=Ot(),i=$F(),l=s==="/"&&(a===null||a.size===0);return!(!n||r||e||!l||t||i||Mg())}const ZGt="https://services.sheerid.com/verify",JGt="681d40e03e7a8077098cb1b6",eqt="685b438c24925a24c23ef56f",tqt="68a6465511f17709c2395bc2",nqt="68a6466f11f17709c2395d7c",Sie={prod:{student:JGt,educator:tqt},test:{student:eqt,educator:nqt}},rqt="referral_code",NAe="externalUserId",sqt="sheerid_url",aqt="country",oqt="locale",iqt="verificationId",Eie="https://services.sheerid.com",lqt={en:"en-US",es:"es-ES",bn:"bn-IN",hi:"hi-IN"};function cqt(e){const t=e?new Intl.Locale(e).language:null;return t?lqt[t]||t:null}function Iun(e){const{verificationType:t,userId:n,referralCode:r,hostname:s,countryCode:a,locale:i}=e,l=i?cqt(i):null,f=(!s||h_e(s)||c_e(s)?Sie.prod:Sie.test)[t],m=new URL(`${ZGt}/${f}/`);return m.searchParams.set(NAe,n),a&&m.searchParams.set(aqt,a),l&&m.searchParams.set(oqt,l),r&&m.searchParams.set(rqt,r),m}const uqt=e=>{if(e==="pro"||e==="max")return e},ZH=({confirmationRedirectsToHomepage:e}={})=>{const t=Ot(),n=t?.get("stripe_checkout"),r=t?.get("upsell"),s=t?.get("flow_type"),a=t?.get("upgrade_max"),i=t?.get("subscription_tier"),l=Jo(),{openModal:c}=xt(),{formatMessage:u}=Z(),{session:f}=mt(),m=f?.user?.id,p=t?.get(NAe),h=t?.get(iqt),g=t?.get(sqt),y=d.useCallback(()=>{const E=s??"unknown",k=a==="success",M=uqt(i);c("subSuccessModal",{flowType:E,upgradeMax:k,subscriptionTier:M,confirmationRedirectsToHomepage:e})},[s,c,a,i,e]),x=d.useCallback(({isTasksAutomationsRenameEnabled:E})=>{Dqe(!0),l({origin:Le.TASKS_PAGE,pitchMessage:E?{title:u({defaultMessage:"Want to use Perplexity Automations?",id:"uujTvYgZRp"}),description:u({defaultMessage:"Upgrade to Pro to create and manage automations.",id:"9vQrVenMdj"})}:{title:u({defaultMessage:"Want to use Perplexity Tasks?",id:"u3CPeNV09q"}),description:u({defaultMessage:"Upgrade to Pro to create and manage tasks.",id:"oUsys+n/zQ"})}})},[u,l]),v=d.useCallback(E=>{c("referralSuccessModal",{monthsAwarded:E})},[c]),b=d.useCallback(async()=>{const E=await SQe({verificationId:h,reason:"referral-success-modal"});v(E.months_awarded)},[h,v]),_=d.useCallback(()=>{const E=setTimeout(()=>{c("referralErrorModal",null)},1e3);return()=>clearTimeout(E)},[c]),w=d.useCallback(()=>{if(g)try{const E=new URL(g.toString());E.hostname===new URL(Eie).hostname&&E.protocol===new URL(Eie).protocol&&c("sheerIdRedirectModal",{sheerIdUrl:E.toString()})}catch{ne.warn("Invalid SheerId redirect URL",{sheerIdRedirectParam:g})}},[c,g]),{variation:C,loading:S}=Fp(!1);d.useEffect(()=>{(n==="success"||a==="success")&&y(),r==="tasks"&&(S||x({isTasksAutomationsRenameEnabled:C})),g&&w(),h&&(!!p&&!!h&&p===m?b():_())},[m,n,r,p,h,g,a,y,x,v,_,w,b,C,S])},jAe=I.memo(({dismiss:e})=>{const t=U_({origin:"mweb-splash"}),n=d.useMemo(()=>o.jsx(ie,{id:"Wpt2mdD04V",defaultMessage:"Chat now"}),[]);return o.jsxs("div",{className:B("p-lg fixed inset-0 mb-auto flex h-full flex-col items-center justify-between overflow-y-auto"),children:[o.jsx("div",{className:"right-sm top-sm absolute",children:o.jsx(Me,{pill:!0,variant:"noBackground",size:"small",icon:kt,extraCSS:"text-foreground md:hover:text-quiet ",onClick:e})}),o.jsx(P3,{}),o.jsxs("div",{className:"flex flex-col items-center gap-4",children:[o.jsx("div",{className:"aspect-square size-20 overflow-hidden rounded-full shadow-lg",children:o.jsx("img",{src:"https://r2cdn.perplexity.ai/whatsapp.jpg",alt:"WhatsApp"})}),o.jsxs("div",{className:B("flex flex-col items-center"),children:[o.jsx(F,{variant:"entry-title",color:"default",textCenter:!0,children:o.jsx(ie,{id:"2WQt3MyLfa",defaultMessage:"Ask anything, anywhere"})}),o.jsx(F,{variant:"base",color:"light",textCenter:!0,className:"mt-4 max-w-[400px]",children:o.jsx(ie,{id:"ZTpOAItHHA",defaultMessage:"We're on WhatsApp"})}),o.jsx(F,{variant:"smallMono",color:"super",textCenter:!0,className:"mt-4",children:o.jsx(ie,{id:"b0JEE9uTQq",defaultMessage:"+1 (833) 436-3285"})})]})]}),o.jsx("div",{className:"flex w-full flex-col items-center",children:o.jsx(me,{variant:"inverted",size:"large",onClick:t,icon:OO,text:n})})]})});jAe.displayName="WhatsAppInterstitial";const dqt=1;function fqt({}){const[e,t]=d.useState(!1),{actions:n}=In(),{trackEvent:r}=Te(),{$t:s}=Z(),a=()=>{t(!1),n.setIsSplashPageDismissed(!0,dqt),r("mweb splash page dismissed",{}),document.head.querySelector("[name='theme-color']")?.remove()},{mwebUpsellWhatsApp:i,loadingMwebUpsellWhatsApp:l}=B_();d.useEffect(()=>{l||t(!0)},[l]);const c=d.useMemo(()=>({title_1:s({defaultMessage:"Start searching with AI",id:"xADWoMp8Ck"}),subtext_1:s({defaultMessage:"It's better in the app.",id:"E7ck+HTwLo"}),button_text:s({defaultMessage:"Download now",id:"OmsvLbYdpQ"}),button_link:"http://perplexity.ai/download"}),[s]);return o.jsx("div",{className:B("bg-base fixed inset-0 flex size-full flex-grow flex-col md:hidden"),children:o.jsx(v_,{open:e,children:o.jsx(b_,{children:o.jsxs(tx,{children:[o.jsxs(PD,{children:[o.jsx(X5,{children:s({defaultMessage:"Know it all",id:"F6NJO530sQ"})}),o.jsx(tU,{children:s({defaultMessage:"Search and discover with AI",id:"ydYv4/6Poi"})})]}),o.jsx("div",{className:B("bg-base fixed inset-0 flex size-full flex-grow flex-col","z-10"),children:i?o.jsx(jAe,{dismiss:a}):o.jsx(lbe,{dismiss:a,campaignData:c,translated:!0})})]})})})})}function mqt({}){return TAe()?o.jsx(fqt,{}):null}const pqt=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"org-invite-flow-v2",defaultValue:e,extraAttributes:t,subjectType:"visitor_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])},Vv=Qe({heroImageAlt:{defaultMessage:"Organization conflict",id:"VkRKg1lMQw"},title:{defaultMessage:"You are already in an organization",id:"d1YUacKLRN"},descriptionWithOrgName:{defaultMessage:"To accept this invitation, you must leave your current organization {currentOrgName} and switch to a new one. You'll also need to sign in using this account, or switch to a new one.",id:"b4btSTrug0"},descriptionGeneric:{defaultMessage:"To accept this invitation, you must leave your current organization and switch to a new one.",id:"e/QrVuc/wL"},okButton:{defaultMessage:"OK",id:"kAEQyVFWDv"}}),hqt=({currentOrgName:e,onClose:t})=>{const{$t:n}=Z();return o.jsxs(z,{variant:"background",className:"relative w-full max-w-md overflow-hidden rounded-xl shadow-xl",children:[o.jsxs("div",{className:"relative h-48",children:[o.jsx("img",{src:"/static/images/organization/invite-already-in-org.webp",alt:n(Vv.heroImageAlt),className:"size-full object-cover"}),o.jsx("div",{className:"absolute right-4 top-4",children:o.jsx(hs,{onClick:t,"aria-label":"Close",variant:"text",size:"small",children:o.jsx("div",{className:"text-white",children:o.jsx(Oa,{icon:kt,size:"small"})})})})]}),o.jsxs("div",{className:"space-y-md p-lg",children:[o.jsxs("div",{className:"space-y-sm",children:[o.jsx(yw,{level:2,size:"small",weight:"medium",children:n(Vv.title)}),o.jsx(F,{variant:"base",color:"light",className:"break-words",children:e?n(Vv.descriptionWithOrgName,{currentOrgName:e}):n(Vv.descriptionGeneric)})]}),o.jsx("div",{className:"flex justify-center",children:o.jsx(hs,{variant:"primary",size:"default",fullWidth:!0,onClick:t,children:n(Vv.okButton)})})]})]})},Ml=Qe({enterprise:{defaultMessage:"I have read and accept Perplexity's { termsAndConditions }",id:"MeXIgPiWW/"},nonEnterprise:{defaultMessage:"I have read and accept Perplexity's { privacyPolicy } and { termsAndConditions }",id:"YEY7IkyI/G"},termsAndConditions:J({defaultMessage:"Terms and Conditions",id:"6qF/vNk/DX"}),privacyPolicy:J({defaultMessage:"Privacy Policy",id:"vx0nkZ8xpy"})}),AAe=({isEnterprise:e=!1,checked:t,setChecked:n})=>{const r=Z(),{locale:s}=Z();return o.jsx("div",{className:"gap-md pt-md flex flex-wrap items-center justify-between",children:o.jsxs("div",{className:"gap-x-xs flex",children:[o.jsx(xve,{"aria-label":e?r.formatMessage(Ml.enterprise,{termsAndConditions:r.formatMessage(Ml.termsAndConditions)}):r.formatMessage(Ml.nonEnterprise,{privacyPolicy:r.formatMessage(Ml.privacyPolicy),termsAndConditions:r.formatMessage(Ml.termsAndConditions)}),checked:t,onCheckedChange:()=>n(!t)}),o.jsx(F,{variant:"smallBold",className:"top-three relative",children:e?r.formatMessage(Ml.enterprise,{termsAndConditions:o.jsx(P0,{href:Ol.default.enterpriseTermsOfService,target:"_blank",rel:"noopener",muted:!0,children:o.jsx(ie,{...Ml.termsAndConditions})})}):r.formatMessage(Ml.nonEnterprise,{privacyPolicy:o.jsx(P0,{href:Ol[s]?.privacyPolicy||Ol.default.privacyPolicy,target:"_blank",rel:"noopener",muted:!0,children:o.jsx(ie,{...Ml.privacyPolicy})}),termsAndConditions:o.jsx(P0,{href:Ol[s]?.termsOfService||Ol.default.termsOfService,target:"_blank",rel:"noopener",muted:!0,children:o.jsx(ie,{...Ml.termsAndConditions})})})})]})})},gqt=Qe({unknown:{defaultMessage:"Perplexity",id:"KCWNcPqV2E"},pro:{defaultMessage:"Perplexity Pro",id:"t6Jx74BkvO"},max:{defaultMessage:"Perplexity Max",id:"oV2G3cgTk6"}}),Kf=Qe({heroImageAlt:{defaultMessage:"Perplexity Enterprise",id:"COhC1GEYcx"},title:{defaultMessage:"{orgName} is inviting you to join their organization",id:"a1lCiKINo/"},description:{defaultMessage:"Click Accept to join your organization and gain access to Perplexity's most powerful AI features on {tier}.",id:"E2Y5mlOpJu"},declineButton:{defaultMessage:"Decline",id:"pvtgR26QWY"},acceptButton:{defaultMessage:"Accept",id:"sjzLbXqRP8"},errorMessage:{defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"}}),yqt=({orgInviteUUID:e,orgDisplayName:t,subscriptionTier:n,tncAcceptanceMethod:r,tncAccepted:s,onClose:a})=>{const{$t:i}=Z(),{update:l}=mt(),c=ot(),[u,f]=d.useState(""),[m,p]=d.useState(!1),h=i(gqt[n??"unknown"]),{mutate:g,isPending:y}=dt({mutationFn:async()=>Jhe({orgInviteUUID:e,reason:"org-invite-email-link-card-accept"}),onSuccess:async()=>{await l(),a()},onError:C=>{ne.warn(C),f(i(Kf.errorMessage))},onSettled:()=>{c.invalidateQueries({queryKey:yE()})}}),{mutate:x,isPending:v}=dt({mutationFn:async()=>dZe({orgInviteUUID:e,reason:"org-invite-email-link-card-decline"}),onSuccess:async()=>{await l(),a()},onError:C=>{ne.warn(C),f(i(Kf.errorMessage))},onSettled:()=>{c.invalidateQueries({queryKey:yE()})}}),b=()=>{f(""),g()},_=()=>{f(""),x()},w=y||v;return o.jsxs(z,{variant:"background",className:"relative w-full max-w-md overflow-hidden rounded-xl shadow-xl",children:[o.jsxs("div",{className:"relative h-48",children:[o.jsx("img",{src:"/static/images/organization/invite-email-link.webp",alt:i(Kf.heroImageAlt),className:"size-full object-cover"}),o.jsx("div",{className:"absolute right-4 top-4",children:o.jsx(hs,{onClick:a,"aria-label":"Close",variant:"text",size:"small",children:o.jsx("div",{className:"text-white",children:o.jsx(Oa,{icon:kt,size:"small"})})})})]}),o.jsxs("div",{className:"space-y-md p-lg",children:[o.jsxs("div",{className:"space-y-sm",children:[o.jsx(yw,{level:2,size:"small",weight:"medium",children:i(Kf.title,{orgName:t})}),o.jsx(F,{variant:"base",color:"light",className:"break-words",children:i(Kf.description,{tier:h})})]}),r===R1.ON_PLATFORM&&!s&&o.jsx(AAe,{isEnterprise:!0,checked:m,setChecked:p}),o.jsxs("div",{className:"gap-sm pr-md pt-md flex justify-between",children:[o.jsx(hs,{variant:"text",size:"default",onClick:_,disabled:w,children:i(Kf.declineButton)}),o.jsx(hs,{variant:"primary",size:"default",onClick:b,disabled:w||!s&&!m,children:i(Kf.acceptButton)})]}),u&&o.jsx(F,{variant:"baseSemi",color:"red",className:"py-sm",children:u})]})]})},Yf=Qe({heroImageAlt:{defaultMessage:"Organization invite",id:"K9Dzh8gQng"},title:{defaultMessage:"{orgName} is inviting you to join their organization",id:"a1lCiKINo/"},emailNotice:{defaultMessage:"You are signed in as {currentEmail}. Click Accept to join using this account, or switch to a new one.",id:"WW+F8lNLFl"},description:{defaultMessage:"Click Accept to join your organization and gain access to Perplexity's most powerful AI features.",id:"N9RPhDV26I"},acceptButton:{defaultMessage:"Accept",id:"sjzLbXqRP8"},switchAccountsButton:{defaultMessage:"Switch accounts",id:"6xNr8cc1oD"},errorMessage:{defaultMessage:"Something went wrong. Please try again.",id:"W/5hwrn09m"}}),xqt=({orgInviteUUID:e,orgDisplayName:t,tncAcceptanceMethod:n,tncAccepted:r,currentUserEmail:s,onClose:a})=>{const{$t:i}=Z(),{update:l}=mt(),c=ot(),[u,f]=d.useState(""),[m,p]=d.useState(!1),{mutate:h,isPending:g}=dt({mutationFn:async()=>Jhe({orgInviteUUID:e,reason:"org-invite-open-link-card-accept"}),onSuccess:async()=>{await l(),a()},onError:v=>{ne.warn(v),f(i(Yf.errorMessage))},onSettled:()=>{c.invalidateQueries({queryKey:yE()})}}),y=()=>{f(""),h()},x=()=>{typeof window<"u"&&(window.location.href="/auth/signin")};return o.jsxs(z,{variant:"background",className:"relative w-full max-w-md overflow-hidden rounded-xl shadow-xl",children:[o.jsxs("div",{className:"relative h-48",children:[o.jsx("img",{src:"/static/images/organization/invite-open-link.webp",alt:i(Yf.heroImageAlt),className:"size-full object-cover"}),o.jsx("div",{className:"absolute right-4 top-4",children:o.jsx(hs,{onClick:a,"aria-label":"Close",variant:"text",size:"small",children:o.jsx("div",{className:"text-white",children:o.jsx(Oa,{icon:kt,size:"small"})})})})]}),o.jsxs("div",{className:"space-y-md p-lg",children:[o.jsxs("div",{className:"space-y-sm",children:[o.jsx(yw,{level:2,size:"small",weight:"medium",children:i(Yf.title,{orgName:t})}),o.jsx(F,{variant:"base",color:"light",className:"break-words",children:i(Yf.emailNotice,{currentEmail:s})}),o.jsx(F,{variant:"base",color:"light",className:"break-words",children:i(Yf.description)})]}),n===R1.ON_PLATFORM&&!r&&o.jsx(AAe,{isEnterprise:!0,checked:m,setChecked:p}),o.jsx("div",{className:"gap-sm flex flex-col",children:o.jsxs("div",{className:"gap-sm flex flex-row-reverse",children:[o.jsx(hs,{variant:"primary",size:"default",fullWidth:!0,onClick:y,disabled:g||!r&&!m,children:i(Yf.acceptButton)}),o.jsx(hs,{variant:"secondary",size:"default",fullWidth:!0,onClick:x,disabled:g,children:i(Yf.switchAccountsButton)})]})}),u&&o.jsx(F,{variant:"baseSemi",color:"red",className:"py-sm",children:u})]})]})},vqt=()=>{const{mutate:e,isPending:t}=dt({mutationFn:async({username:n,image:r})=>{const s=await fetch("/api/user",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:n,image:r})});if(s.status===413)throw new Error("Image too large");{const a=await s.json();if(s.status!==200)throw new Error(a.message);return r}}});return d.useMemo(()=>({submitOnboardingProfile:e,submitIsLoading:t}),[t,e])},Wv=Qe({title:{defaultMessage:"Welcome to Perplexity AI",id:"g6NBddyDDB"},avatarLabel:{defaultMessage:"Avatar",id:"VnXp8ZIfSy"},usernameLabel:{defaultMessage:"User name",id:"o7nzDs++Mi"},skipButton:{defaultMessage:"Skip",id:"/4tOwTiCH6"},saveButton:{defaultMessage:"Save",id:"jvo0vs3nF0"},errorMessage:{defaultMessage:"Failed to update profile. Please try again.",id:"ylQ481N+NA"}}),bqt=({onContinue:e})=>{const{$t:t}=Z(),{session:n,update:r}=mt(),[s,a]=d.useState(n?.user?.image??null),[i,l]=d.useState(n?.user?.username??n?.user?.name??""),[c,u]=d.useState(void 0),{isMobileUserAgent:f}=xe(),{submitOnboardingProfile:m,submitIsLoading:p}=vqt(),h=()=>{m({username:i,image:s??""},{onSuccess:()=>{u(void 0),r(),e()},onError:g=>{ne.error("Failed to update profile",{error:g}),u(t(Wv.errorMessage))}})};return o.jsx(z,{variant:"background",className:"relative w-full max-w-md overflow-hidden rounded-xl shadow-xl",children:o.jsxs("div",{className:"space-y-md p-lg",children:[o.jsx("div",{className:"flex flex-col items-center",children:o.jsx("div",{className:"relative inline-block",children:o.jsx(Un,{user:s??n?.user?.image??void 0,showEdit:!0,size:"xlarge",onChange:a})})}),o.jsx(yw,{level:2,size:"small",weight:"medium",children:t(Wv.title)}),o.jsxs("div",{className:"space-y-sm",children:[o.jsx(F,{variant:"small",color:"light",children:t(Wv.usernameLabel)}),o.jsx(Xr,{value:i,onChange:l,errorText:c,errorPlacement:Md.INLINE,disabled:p,isMobileUserAgent:f})]}),o.jsxs("div",{className:"pt-md gap-sm flex flex-row-reverse",children:[o.jsx(hs,{variant:"primary",size:"default",onClick:h,disabled:p,children:t(Wv.saveButton)}),o.jsx(hs,{variant:"text",size:"default",onClick:e,disabled:p,children:t(Wv.skipButton)})]})]})})},_qt=()=>{const e=vt(),t=Ot(),n=t?.get("org_invite"),r=t?.get("show_org_already_in_org")==="true",s=t?.get(pE)==="true",{session:a}=mt(),{organization:i,isLoading:l}=Hn({reason:"org-invite-modal"}),c=!!n&&!r,{data:u,isPending:f}=Ue({enabled:c,queryKey:["orgInvite",n],queryFn:()=>iZe({inviteUUID:n,headers:{},reason:"org-invite-modal"})});if(!n&&!r)return null;const m=()=>{const p=new URL(window.location.href);p.searchParams.delete("org_invite"),p.searchParams.delete("show_org_already_in_org"),p.searchParams.delete(pE),e.replace(p.pathname+p.search)};return o.jsx(qt,{isOpen:!0,onClose:m,variant:"hide-chrome",noPadding:!0,renderCloseButton:!1,canOutsideClickClose:!(f||l),children:o.jsx(wqt,{isPending:c&&f||l,showAlreadyInOrg:r,organization:i,inviteResponse:u,inviteUUID:n,showProfile:s,currentUserEmail:a?.user?.email??"",onClose:m})})};function wqt({isPending:e,showAlreadyInOrg:t,organization:n,inviteResponse:r,inviteUUID:s,showProfile:a,currentUserEmail:i,onClose:l}){if(e)return o.jsx("div",{className:"p-xl flex items-center justify-center",children:o.jsx(Fr,{})});const c=r&&"error_code"in r,u=c?r:null,f=c?null:r;if(t||u?.error_code==="USER_ALREADY_IN_ORG"||n)return o.jsx(hqt,{currentOrgName:u?.org_display_name??n?.display_name,onClose:l});if(u||!r)return null;if(f&&s){const m=i.toLowerCase().trim()===f.userEmail.toLowerCase().trim(),p=a?["profile","acceptance"]:["acceptance"];return o.jsx(IQe,{steps:p,experimentVariationsMeta:{},handleFinish:l,children:o.jsx(Cqt,{orgInviteUUID:s,inviteData:f,currentUserEmail:i,isEmailMatch:m,onClose:l})})}return null}function Cqt({orgInviteUUID:e,inviteData:t,currentUserEmail:n,isEmailMatch:r,onClose:s}){const{currentStep:a,handleNext:i}=mhe();return a==="profile"?o.jsx(bqt,{onContinue:i}):a==="acceptance"?r?o.jsx(yqt,{orgInviteUUID:e,orgDisplayName:t.orgDisplayName,subscriptionTier:t.subscriptionTier,tncAcceptanceMethod:t.tncAcceptanceMethod,tncAccepted:t.tncAccepted,onClose:s}):o.jsx(xqt,{orgInviteUUID:e,orgDisplayName:t.orgDisplayName,tncAcceptanceMethod:t.tncAcceptanceMethod,tncAccepted:t.tncAccepted,currentUserEmail:n,onClose:s}):null}const Sqt=({reason:e})=>{const t=ot(),n=Ot(),r=n?.get("stripe_checkout"),s=n?.get("is_enterprise")==="true",{trackEvent:a}=Te(),i=r!=null,l=r==="success";d.useEffect(()=>{i&&s&&(async()=>{try{const[u,f]=await Promise.all([l?t.fetchQuery({queryKey:["refresh-org-subscription-status"],queryFn:()=>Xhe({reason:e})}):null,t.fetchQuery({queryKey:["user-org-data"],queryFn:()=>Z5({reason:e})})]),m=f?.organization?.uuid;m!=null&&m!==void 0&&a("org payment portal returned",{stripeResult:r??"",orgUUID:m??"",source:n?.get("origin")??""})}catch(u){ne.log("Failed to refresh org subscription:",u)}})()},[])};var Hi={};const Eqt=Qe({threadAccessNotAllowed:{defaultMessage:"Cannot view this thread.",id:"PWzBFTUMYQ"},threadExpired:{defaultMessage:"This thread is expired and cannot be viewed.",id:"kxDY3MhDfI"},invalidThread:{defaultMessage:"This thread does not exist.",id:"mTtce3cuRp"},threadStreamError:{defaultMessage:"Unable to start thread.",id:"d3yfUXi5SD"},pageAccessNotAllowed:{defaultMessage:"Cannot view this page.",id:"2AsVl5rMny"},spaceAccessNotAllowed:{defaultMessage:"Cannot view this Space.",id:"kUZg0JvZI+"},subscriptionAlreadyActive:{defaultMessage:"Unable to apply discount code to an active subscription.",id:"o2MqqftZuL"},unableToGrantAccess:{defaultMessage:"Unable to make this thread shareable, ensure you are logged in as the owner of the thread.",id:"F8a+v/zyZO"},collectionAccessNotAllowed:{defaultMessage:"Cannot view this collection.",id:"miGPZEm/qm"},invalidCollection:{defaultMessage:"This collection does not exist.",id:"IKZz6s6MYd"}}),IAe=I.memo(function(){const t="home-ask-input",[n,r,s]=Y3({csrRedirect:!0}),{isMobileStyle:a}=xe(),{currentOpenedModal:i}=xt(),l=Ot(),c=TAe(),f=d.useMemo(()=>l?.get("openSearchModeSelector"),[l])==="true",{mentionTypeaheadOptions:m,inputPlaceholder:p,onTriggerTypeahead:h}=_T({reason:t,isLazy:!0});return o.jsx(pw,{...s,value:n,json:r,querySource:"home",autofocus:!a&&i===null&&!c&&!f,initialLayout:Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD?"compact":"expanded",minRows:Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD?1:2,hasShadow:!0,showFileUpload:!0,showIncognitoHint:!0,showSources:!Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD,autosuggestionsEnabled:!Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD,dropdownPlacement:Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"top":"bottom",dropdownClassName:Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD||a?"shadow-[0_-30px_30px_oklch(var(--background-base-color))]":void 0,useLexical:!0,mentionTypeaheadOptions:m,placeholder:p??s.placeholder,onTriggerTypeahead:h,layoutKey:"home-ask-input",disableModeSelector:!!Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD})});IAe.displayName="HomeAskInput";const RAe=I.memo(function(){const{$t:t}=Z(),{hasAccessToProFeatures:n}=St(),r=et(),{actions:{clearCurrentStreamId:s,clearCurrentThreadId:a}}=Ft(),{device:{isIOS:i},env:{isLocalhost:l}}=Pt(),{isMobileUserAgent:c,isMobileStyle:u}=xe(),[f,m]=d.useState(null),{openModal:p}=xt(),{handleRequestAccess:h}=XGt(),{trackEvent:g}=Te(),y=Ot(),{mwebUpsellWhatsApp:x,loadingMwebUpsellWhatsApp:v}=B_(),{handleAppDownloadClicked:b}=mf("mobile-header"),_=U_({origin:"mobile-header"});YGt();const w=dn(),{variation:C}=pqt(!1),{openVisitorLoginUpsell:S}=or({enabled:!0}),E=d.useRef(null),k=d.useMemo(()=>y?.get("error"),[y]),M=d.useMemo(()=>y?.get("id"),[y]),j=In(),R=d.useRef(!1),O=d.useMemo(()=>!!(y?.get(Ou)||y?.get(pGe)==="deep_research"),[y]);ZH({confirmationRedirectsToHomepage:!0}),Sqt({reason:"search-inner-home"}),QGt(),d.useEffect(()=>{s(),a()},[s,a]),d.useEffect(()=>{R.current||j.welcomeBackGateImpressions>=XD||w||r||c||l||CO()&&SO()&&(S({origin:Le.WELCOME_BACK,title:t({defaultMessage:"Welcome back!",id:"0MXX5Bf7Ca"}),description:t({defaultMessage:"Log in to continue your journey.",id:"lSkVbenSxm"}),sheetModalVariant:"centered-sheet"}),R.current=!0,j.actions.setWelcomeBackGateImpressions(j.welcomeBackGateImpressions+1))},[w,l,c,r,p,t,j.welcomeBackGateImpressions,j.actions,S]),d.useEffect(()=>{if(k){const T=k,N=M;T===_m.ThreadAccessNotAllowed&&N?h(N):(ne.info("Error redirect",{errorQueryParam:k}),m(t(Eqt[T]))),qgt()}},[k,h,M,p,t]);const D=d.useCallback(()=>{if(x){_();return}g("app download button clicked",{origin:"mobile-header"}),b()},[b,_,x,g]),P=d.useMemo(()=>({homepageTitle:t({defaultMessage:"What do you want to know?",id:"CMjGvpa5Fr"})}),[t]),A=d.useMemo(()=>x?OO:i?Hb:LO,[x,i]);return o.jsxs(o.Fragment,{children:[o.jsx(Cx,{childrenWidth:Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD?"none":"default",mobileHeader:!1,children:o.jsxs("div",{className:"erp-sidecar:px-md sm:px-md md:px-lg isolate mx-auto size-full sm:max-w-screen-md",children:[o.jsxs("div",{className:"relative flex h-full flex-col",children:[o.jsxs(z,{className:"py-md h-headerHeight flex items-center justify-between border-b md:hidden",children:[o.jsxs("div",{className:"gap-x-xs -ml-sm flex items-center",children:[o.jsx(n$,{}),o.jsx($a,{color:"mixed",isPro:n,size:"small"})]}),o.jsx("div",{className:"gap-x-sm flex items-center",children:c&&!v&&o.jsx(ho,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(me,{size:"small",icon:A,text:t(x?{defaultMessage:"Chat in WhatsApp",id:"jXqSBQcpKC"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),pill:!0,variant:"primary",onClick:D})})})})]}),o.jsx(dGt,{initialValue:P,children:o.jsxs(z,{className:B("static w-full grow flex-col items-center justify-center md:mt-0 md:flex","z-10"),ref:E,children:[o.jsx("div",{className:"px-md relative flex size-full flex-col justify-center md:h-auto md:px-0",children:o.jsx(Y6e,{})}),o.jsxs(gc,{children:[o.jsx("div",{className:B("w-full",{"bottom-md absolute":!!Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD||u,"bottom-md mb-md animate-in fade-in fill-mode-both slide-in-from-bottom absolute delay-200 duration-300 ease-in-out":!!Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD}),children:o.jsx(IAe,{})}),c?null:o.jsx("div",{className:"relative w-full",children:o.jsx("div",{className:"mt-lg absolute w-full",children:o.jsx(kAe,{})})})]})]})})]}),o.jsx(hc,{isVisible:f!=null,variant:"error",message:f,timeout:7})]})}),O&&o.jsx(F4,{}),!Hi.NEXT_PUBLIC_IS_SIDECAR_BUILD&&o.jsx(ho,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,isPartnershipCampaign:!0,children:o.jsx(mqt,{})}),C&&o.jsx(_qt,{})]})});RAe.displayName="Home";const Mqt={activeStreamingThreads:[],entries:{},refreshState:()=>{},queuedThreadParams:[],enqueueThreadParams:()=>{},cancelQueuedThread:()=>{},recentlyBlockedEntries:[],recentlyCompletedEntries:[],handleStreamCompletion:()=>{},removeRecentlyBlockedEntry:()=>{},isDragging:!1,setIsDragging:()=>{}},PAe=Dt("MissionControlContext",Mqt),kqt=({children:e})=>{const{session:t}=mt(),n=d.useMemo(()=>{switch(t?.user.subscription_tier){case"max":return 10;case"pro":return 5;default:return 3}},[t?.user.subscription_tier]),r=Co(),{trackEvent:s}=Te(),{submitQuery:a}=Sa(),{data:i=[]}=$H("mission_control_active",void 0,void 0,!1,void 0),[l,c]=d.useState([]),[u,f]=d.useState([]),[m,p]=d.useState([]),[h,g]=d.useState(!1),y=D=>{D?.status===Qn.BLOCKED?f(P=>P.some(T=>T.message.backend_uuid===D.backend_uuid)?P:[...P,{message:D}]):D?.status===Qn.COMPLETED&&(f(P=>P.filter(A=>A.message.backend_uuid!==D.backend_uuid&&!i.some(T=>T.context_uuid===A.message.context_uuid))),p(P=>{const A=P.some(N=>N.message.backend_uuid===D.backend_uuid),T=P.filter(N=>!i.some(L=>L.context_uuid===N.message.context_uuid));return A?T:[...T,{message:D}]}))},x=D=>{f(P=>P.filter(A=>A.message.backend_uuid!==D))},[v,b]=d.useState(()=>r.getState()),_=d.useCallback(()=>{b(r.getState())},[r]);d.useEffect(()=>r.subscribe(P=>{b(P)}),[r]);const{activeStreams:w,streams:C,threads:S,entries:E}=v,k=d.useMemo(()=>zHt({activeStreams:w,streams:C,threads:S,entries:E}),[w,C,S,E]),M=d.useCallback(D=>{const P=D.newFrontendContextUUID||crypto.randomUUID();a({newFrontendContextUUID:P,rawQuery:D.query,attachments:D.attachments,promptSource:"user",querySource:"mission-control",mentions:D.mentions,collection:null,cometIsMissionControl:!0,maxAssistantEnabled:D.maxAssistantEnabled}),s("mission control query submitted",{frontendContextUUID:P,numberOfActiveThreads:k.length+1})},[a,s,k.length]);d.useEffect(()=>{if(k.length<n&&Js(l)){const D=l[0];c(P=>P.slice(1)),M(D)}},[k.length,M,l,n]);const j=d.useCallback(D=>{if(k.length<n)M(D);else{const P=crypto.randomUUID();c(A=>(s("mission control query enqueued",{frontendContextUUID:P,numberOfActiveThreads:k.length,numberOfQueuedThreads:A.length+1}),A.concat([{...D,newFrontendContextUUID:P}])))}},[k.length,M,s,n]),O={activeStreamingThreads:k,entries:E,refreshState:_,queuedThreadParams:l,enqueueThreadParams:j,cancelQueuedThread:D=>{c(P=>P.filter(A=>A.newFrontendContextUUID!==D))},recentlyBlockedEntries:u,recentlyCompletedEntries:m,handleStreamCompletion:y,removeRecentlyBlockedEntry:x,isDragging:h,setIsDragging:g};return o.jsx(PAe.Provider,{value:O,children:e})},B4=()=>{const e=d.useContext(PAe);if(!e)throw new Error("useUserInput must be used within UserInputProvider");return e},LAe=I.memo(({needsAttentionFilter:e=!1,onNeedsAttentionFilterChange:t,needsAttentionCount:n=0})=>{const{$t:r}=Z(),s=r({defaultMessage:"Background Assistants",id:"UmjY7aC43f"}),a=r({defaultMessage:"Monitor and collaborate with your active assistants",id:"AGtMyJq7fo"}),i=r({defaultMessage:"Unread",id:"jabB4CFkPh"});return o.jsxs("div",{className:"px-md md:px-lg gap-sm flex flex-col justify-between sm:flex-row md:flex md:items-center",children:[o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(de,{icon:kce,size:"xl"}),o.jsxs("div",{children:[o.jsx(F,{variant:"page-title",children:s}),o.jsx(F,{variant:"base",color:"light",children:a})]})]}),t&&n>0&&o.jsx(_o,{text:`${i} (${n})`,active:e,onChange:t})]})});LAe.displayName="MissionControlHeader";const Tqt="mission-control-reconnect",Nqt=20,OAe=[{query:"Check Amazon wishlist book price, using my browser, add to cart if under $15"},{query:"Book 4.5+ star Austin restaurant for 2 using my browser at 7pm tomorrow"},{query:"Find weekend Airbnbs under $200/night using my browser within 3 hours drive"},{query:"Compare Tokyo flights next month using my browser, email me best options"}],DAe=d.memo(({placeholder:e,suggestions:t})=>{const{enqueueThreadParams:n}=B4(),[r,s,{onChange:a,onSubmit:i}]=M$({onSubmit:n}),l="mission-control-input",{setSuggestions:c,setBlankStateSuggestions:u}=zo(),f=qa(),[m,p]=d.useState(f),{mentionTypeaheadOptions:h,onTriggerTypeahead:g}=_T({reason:l,isLazy:!0});d.useEffect(()=>{u(t,ue.SEARCH)},[u,t]),d.useEffect(()=>{m!==f&&(p(f),r.length===0&&f===ue.SEARCH&&c(t))},[r,f,m,c,t]);const y=d.useCallback(()=>{r.length===0&&f===ue.SEARCH&&c(t)},[r,c,f,t]),x=d.useCallback(v=>{i({...v,maxAssistantEnabled:!0}),c([])},[i,c]);return o.jsx(pw,{value:r,json:s,onChange:a,onSubmit:x,onClick:y,placeholder:e,disableInput:!1,className:"relative w-full transition-none",hasShadow:!0,autosuggestionsEnabled:!0,querySource:"mission-control",isMissionControl:!0,showFileUpload:!0,useLexical:!0,showSearchModeSelector:!1,showModelSelector:!1,mentionTypeaheadOptions:h,onTriggerTypeahead:g,layoutKey:"mission-control-input",minRows:2})});DAe.displayName="MissionControlInput";const jqt=({suggestion:e,onClick:t})=>o.jsx(Wt,{shadow:!0,className:"aspect-square w-full cursor-pointer select-none overflow-hidden !rounded-2xl",onClick:()=>t(e),children:o.jsx(un,{hoverOnly:!0,className:"size-full",children:o.jsx(z,{variant:"raised",className:"hover:bg-subtler dark:hover:bg-subtle size-full transition duration-300",children:o.jsxs("div",{className:"flex size-full flex-col p-3",children:[o.jsx(F,{color:"super",children:o.jsx(de,{icon:Sc,size:"lg"})}),o.jsx(F,{variant:"smallBold",color:"default",className:"mt-auto line-clamp-5 text-balance",children:e})]})})})}),FAe=()=>{const{$t:e}=Z(),{enqueueThreadParams:t}=B4(),n=r=>{t({query:r,maxAssistantEnabled:!0})};return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"gap-sm grid w-full grid-cols-4",children:OAe.map((r,s)=>o.jsx(jqt,{suggestion:r.query,onClick:n},s))}),o.jsx(z,{className:"gap-md relative divide-y overflow-hidden rounded-xl border",variant:"raised",children:o.jsx("div",{className:"space-y-md flex w-full flex-col items-center justify-center p-10",children:o.jsxs("div",{className:"space-y-xs text-center",children:[o.jsx(F,{variant:"section-title",children:e({id:"aojEGT2eHI",defaultMessage:"No activity yet"})}),o.jsx(F,{variant:"small",color:"light",children:e({id:"524FDhfuRR",defaultMessage:"Ask your Assistant to handle any taskor several at once. Check here for updates or your input is needed."})})]})})})]})};FAe.displayName="MissionControlEmpty";const UAe=I.memo(({items:e})=>e.length===0?o.jsx(FAe,{}):o.jsx("div",{className:"flex flex-col divide-y",children:e.map(t=>t.item)}));UAe.displayName="MissionControlItemList";const Aqt=e=>e?e.filter(t=>t.image_mode_block).flatMap(t=>t.image_mode_block.media_items??ce):ce,Iqt=e=>e?e.filter(t=>t.video_mode_block).flatMap(t=>t.video_mode_block.media_items??ce):ce,Rqt=e=>e?e.filter(t=>t.shopping_mode_block).flatMap(t=>t.shopping_mode_block.shopping_widgets??ce):ce,Pqt=e=>e?e.filter(t=>t.jobs_mode_block).flatMap(t=>t.jobs_mode_block.jobs_blocks??ce):ce,Lqt=e=>e?e.filter(t=>t.maps_mode_block).flatMap(t=>t.maps_mode_block.places??ce):ce,Oqt=e=>{const t=(e??ce).filter(i=>i.sources_mode_block).flatMap(i=>i.sources_mode_block),n=t.at(-1),r=new Set,s=[];for(const i of t)for(const l of i.web_results)r.has(l.url)||(s.push(l),r.add(l.url));const a=n?.result_count??0;return{count:Math.max(s.length,a),progress:n?.progress,results:s,rows:n?.rows}},BAe=(e,{orderedByPriority:t=!1}={})=>{if(!e)return ce;const n=e.filter(a=>a.assets_mode_block).flatMap(a=>a.assets_mode_block.assets??ce),r=e.filter(a=>a.canvas_block?.asset).map(a=>a.canvas_block.asset),s=[...n,...r];return t?[...s].sort((a,i)=>a.is_primary_asset===i.is_primary_asset?0:a.is_primary_asset?-1:1):s},Run=(e,t)=>{if(e){for(const n of e)if(n.assets_mode_block?.assets){const r=n.assets_mode_block.assets.find(s=>s.uuid===t);if(r)return r}for(const n of e)if(n.canvas_block?.asset?.uuid===t)return n.canvas_block.asset}},Dqt=(e,t)=>{if(e)for(const n of e){if(n.assets_mode_block?.assets){const r=n.assets_mode_block.assets.find(s=>s.version_info?.artifact_id===t);if(r)return r}if(n.canvas_block?.asset?.version_info?.artifact_id===t)return n.canvas_block.asset}},Ta={default:"d",shopping:"s",jobs:"j",hotels:"h",places:"p",images:"i",videos:"v",sources:"r",assets:"a",apps:"c",tasks:"t",search:"se",chat:"ch"},Mie=e=>Object.entries(Ta).find(([t,n])=>n===e)?.[0],$4=(e,t)=>{const r=new URLSearchParams(t?.toString()).get(e.toString());if(r)return typeof r=="string"?Mie(r):Array.isArray(r)?Mie(r[0]):void 0},Fqt=e=>e==="default"||e==="sources",Uqt=e=>Qr(e).with("default",()=>"default").with("shopping",()=>"wide").with("jobs",()=>"wide").with("hotels",()=>"full").with("places",()=>"full").with("images",()=>"full").with("videos",()=>"full").with("sources",()=>"default").with("assets",()=>"full").with("apps",()=>"full").with("tasks",()=>"default").with("search",()=>"default").otherwise(()=>"default"),ER=e=>({mode:e,width:Uqt(e)}),Bqt=()=>{const e=Ot();return d.useCallback(t=>$4(t,e),[e])},$qt=()=>{const e=Ot(),t=Lt(),n=vt();return d.useCallback((r,s)=>{if($4(r,e)===s)return;const a=new URLSearchParams(e?.toString());a.set(r.toString(),Ta[s]),n.replace(`${t}?${a.toString()}`)},[t,n,e])},Vqt=({items:e,inFlight:t,inFlightLatest:n,rwToken:r,contentHasMounted:s,hasHeader:a=!0})=>{const{scrollContainerRef:i}=ti(),l=Os(),c=d.useMemo(()=>{if(typeof window>"u")return 0;const b=a?getComputedStyle(document.documentElement).getPropertyValue("--header-height"):"0";return parseInt(b)},[a]),u=d.useRef(!0),f=d.useMemo(()=>!r&&e.every(b=>!cn.isStatusPending(b)),[e,r]),m=d.useMemo(()=>e.some(b=>cn.isStatusPending(b)),[e]),p=d.useRef({}),h=d.useRef({});d.useEffect(()=>()=>{p.current={},h.current={}},[]);const g=d.useCallback((b,{smooth:_=!0,anchor:w=!1}={smooth:!0,anchor:!1})=>{const C=typeof b=="number"?p.current?.[b]?.current:h.current?.[b]?.current;if(C){const S=C.getBoundingClientRect().top,E=i?.current?.scrollTop??0,k=S+E-c;if(k+E>document.body.scrollHeight&&w){const M=i?.current?.scrollHeight??0,j=i?.current?.clientHeight??0,R=M-j-.1;requestAnimationFrame(()=>i?.current?.scrollTo({top:R,behavior:_?"smooth":"auto"}))}else i?.current?.scrollTo({top:k,behavior:_?"smooth":"auto"})}},[i,c]),y=d.useCallback(()=>{g(e.length-1)},[g,e.length]);d.useEffect(()=>{const b={...p.current},_={};e.forEach((C,S)=>{const E=S,k=C.backend_uuid;if(k)if(!b[E]||!b[E].current){const M=I.createRef();b[E]=M,_[k]=M}else _[k]=b[E]});const w=e.length;Object.keys(b).forEach(C=>{Number(C)>=w&&delete b[Number(C)]}),h.current=_,p.current=b},[e.length,m]);const x=e.at(-1)?.query_source==="edit";d.useEffect(()=>{if(e.length<=1||!l||!s)return;const b=window.location.hash;if(b&&!t&&u.current){try{const _=b.slice(1);_.length>3?g(_,{smooth:!1}):g(Number(_),{smooth:!1})}catch(_){ne.error(_)}return}n&&!x&&g(e.length-1,{anchor:!0})},[t,n,f,e.length,l,g,s,x]);const v=p.current;return d.useMemo(()=>({refs:v,scrollToLatestItem:y,scrollToListItem:g}),[v,y,g])},$Ae=Dt("ScrollToEntityContext",{refs:{},scrollToListItem:()=>{},setContentHasMounted:()=>{},contentHasMounted:!1}),JH=I.memo(({children:e})=>{const t=ji(),{results:n=[],inFlight:r,inFlightLatest:s}=Ft(),[a,i]=d.useState(!1),{isMobileStyle:l}=xe(),c=d.useMemo(()=>Kbe(n).map(p=>p.length?p[0]:void 0).filter(p=>p!==void 0),[n]),{refs:u,scrollToListItem:f}=Vqt({items:c,inFlight:r,inFlightLatest:s,rwToken:t,contentHasMounted:a,hasHeader:l});return o.jsx($Ae.Provider,{value:{scrollToListItem:f,refs:u,setContentHasMounted:i,contentHasMounted:a},children:e})});JH.displayName="ScrollToThreadEntryProvider";const V4=()=>{const e=d.useContext($Ae);if(!e)throw new Error("useScrollToEntity must be used within ScrollToEntityContext");return e},VAe=Dt("SearchPageContext",{activeMode:"default",setActiveMode:()=>{},activeEntryIdx:0,pinnedEntryIdx:-1,viewTitle:null,setViewTitle:()=>{}}),Vw=()=>{const e=d.useContext(VAe);if(!e)throw new Error("useSearchPage must be used within an SearchPageProvider");return e},ez=I.memo(({children:e})=>{const t=Bqt(),[n,r]=d.useState(t(0)??"default"),[s,a]=d.useState(0),[i,l]=d.useState(-1),[c,u]=d.useState(null),{refs:f}=V4(),m=vt(),{scrollContainerRef:p}=ti(),h=d.useCallback(()=>{if(Object.keys(f).length===0||!p.current)return;const g=p.current.clientHeight,y=p.current.scrollTop;if(y===0){a(0),l(-1);return}const x=y+g/2;let v=s,b=-1,_=1/0;Object.entries(f).forEach(([w,C])=>{if(C.current){const S=C.current.getBoundingClientRect(),E=S.top+y+S.height/2,k=Math.abs(E-x);S.top<-100&&S.bottom>100&&(b=parseInt(w)),k<_&&(_=k,v=parseInt(w))}}),a(v),l(b)},[f,a,p,s,l]);return d.useEffect(()=>{if(!p?.current)return;const g=p.current,y=Fy(h,50,{leading:!1,trailing:!0});return g.addEventListener("scroll",y),h(),()=>{g.removeEventListener("scroll",y),y.cancel()}},[h,p]),d.useEffect(()=>{u(null)},[m]),o.jsx(VAe.Provider,{value:{activeMode:n,setActiveMode:r,activeEntryIdx:s,pinnedEntryIdx:i,viewTitle:c,setViewTitle:u},children:e})});ez.displayName="SearchPageProvider";const Wqt=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"always-show-brand-in-thread-tabs",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])},Hqt=({idx:e,searchParams:t,blocks:n})=>Yo()((r,s)=>({answerModeActionList:[],currentModeData:ER($4(e,t)??"default"),...HAe(n),actions:{updateCurrentMode:a=>{const i=s(),l=i.defaultModeOverride&&a==="default"?i.defaultModeOverride:a;r({currentModeData:ER(l)})},setOverrideMode:a=>{const i=a;r({defaultModeOverride:i,currentModeData:ER(i??"default")})}}})),{Context:zqt,useTrackedState:Gqt}=g_("AnswerModeContext"),WAe=Dt("AnswerModeApiContext",void 0),qqt=({children:e,scrollToListItem:t})=>{const n=Ot(),{setActiveMode:r,activeEntryIdx:s}=Vw(),{idx:a,result:{backend_uuid:i,context_uuid:l}}=pn(),{actions:{updateCurrentMode:c,setOverrideMode:u},currentModeData:f}=Ww(),m=$qt(),{trackEvent:p}=Te(),h=d.useCallback(y=>{y!==f.mode&&(m(a,y),c(y),s===a&&r(y),requestAnimationFrame(()=>{t(a,{smooth:!0})}),p("answer mode tab selected",{answerMode:y,entryUUID:i,contextUUID:l}))},[f.mode,m,a,c,s,p,i,l,r,t]);d.useEffect(()=>{s===a&&r(f.mode)},[s,a,r,f.mode]),d.useEffect(()=>{const y=$4(a,n);y&&h(y)},[a,h,n]);const g=d.useMemo(()=>({updateCurrentMode:x=>{h(x)},setOverrideMode:u}),[h,u]);return o.jsx(WAe.Provider,{value:g,children:e})};function HAe(e){const t=Aqt(e),n=Iqt(e),r=Rqt(e),s=Pqt(e),a=Lqt(e),i=Oqt(e),l=BAe(e,{orderedByPriority:!0});return{images:t,videos:n,shopping:r,jobs:s,places:a,sources:i,assets:l}}const tz=I.memo(({children:e,scrollToListItem:t})=>{const{$t:n}=Z(),r=Ot(),{idx:s,searchMode:a,hasAnswer:i,researchPlan:l,reasoningPlan:c,showAgentWorkflow:u,result:{answer_modes:f,blocks:m,attachments:p,read_write_token:h},isLastResult:g,hasSources:y}=pn(),x=dn(),[v]=d.useState(()=>Hqt({idx:s,searchParams:r,blocks:m}));d.useEffect(()=>{m||ne.error("No blocks found for entry",m)},[m]),d.useEffect(()=>{const E=v.getState(),{images:k,videos:M,shopping:j,jobs:R,places:O,sources:D,assets:P}=HAe(m),A=cs(E.images,k)?E.images:k,T=cs(E.videos,M)?E.videos:M,N=cs(E.shopping,j)?E.shopping:j,L=cs(E.jobs,R)?E.jobs:R,U=cs(E.places,O)?E.places:O,$=cs(E.sources,D)?E.sources:D,V=cs(E.assets,P)?E.assets:P;(A!==E.images||T!==E.videos||N!==E.shopping||L!==E.jobs||U!==E.places||$!==E.sources||V!==E.assets)&&v.setState({images:A,videos:T,shopping:N,jobs:L,places:U,sources:$,assets:V})},[m,v]);const b=v.getState().sources,_=d.useMemo(()=>({[hn.SHOPPING]:{text:n({defaultMessage:"Shopping",id:"my1MLnIMoS"}),show:!0,icon:SOe,id:Ta.shopping,mode:"shopping",testId:Ma.ANSWER_MODE_TABS.SHOPPING},[hn.JOBS]:{text:n({defaultMessage:"Jobs",id:"9AcATFXaoo"}),show:!0,icon:COe,id:Ta.jobs,mode:"jobs",testId:Ma.ANSWER_MODE_TABS.JOBS},[hn.HOTELS]:{text:n({defaultMessage:"Hotels",id:"+dqK4hw0if"}),show:!0,icon:Ti,id:Ta.hotels,mode:"hotels",testId:Ma.ANSWER_MODE_TABS.HOTELS},[hn.MAPS]:{text:n({defaultMessage:"Places",id:"QQInFSbbwr"}),show:!0,icon:qb,id:Ta.places,mode:"places",testId:Ma.ANSWER_MODE_TABS.PLACES},[hn.IMAGE]:{text:n({defaultMessage:"Images",id:"Fip4H8CuWD"}),show:!0,icon:Bb,id:Ta.images,mode:"images",testId:Ma.ANSWER_MODE_TABS.IMAGES},[hn.VIDEO]:{text:n({defaultMessage:"Videos",id:"4XfMuxy3FO"}),show:!0,icon:Ace,id:Ta.videos,mode:"videos",testId:Ma.ANSWER_MODE_TABS.VIDEOS},[hn.SOURCES]:{text:n({defaultMessage:"Sources",id:"fhwTpAcBLC"}),show:!0,icon:f1,id:Ta.sources,mode:"sources",testId:Ma.ANSWER_MODE_TABS.SOURCES,count:b.count||p?.length||0,disabled:b.progress!==kl.DONE&&!p?.length},[hn.ASSETS]:{text:n({defaultMessage:"Assets",id:"d1uESJO+TH"}),show:!0,icon:wOe,id:Ta.assets,mode:"assets",testId:Ma.ANSWER_MODE_TABS.ASSETS},[hn.APPS]:{text:n({defaultMessage:"App",id:"2rUVsUf259"}),show:!1,icon:qce,id:Ta.apps,mode:"apps",testId:Ma.ANSWER_MODE_TABS.APPS},[hn.TASKS]:{text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),show:!0,icon:dG,id:Ta.tasks,mode:"tasks",testId:Ma.ANSWER_MODE_TABS.TASKS},[hn.SEARCH]:{text:n({defaultMessage:"Search",id:"xmcVZ0BU63"}),show:!!h&&g&&!y,icon:Br,id:Ta.search,mode:"search",testId:Ma.ANSWER_MODE_TABS.SEARCH},[hn.CHAT]:{text:n({defaultMessage:"Chat",id:"WTrOy36sdu"}),show:!!h&&g,icon:PO,id:Ta.chat,mode:"chat",testId:Ma.ANSWER_MODE_TABS.CHAT}}),[n,p?.length,b.count,b.progress,h,g,y]),{variation:w}=Wqt(!1),C=d.useMemo(()=>n(x?{defaultMessage:"Assistant",id:"wSAvhubuX6"}:w?{defaultMessage:"Perplexity",id:"KCWNcPqV2E"}:{defaultMessage:"Answer",id:"DwjT1HpUgU"}),[n,w,x]),S=d.useMemo(()=>{switch(a){case ue.SEARCH:return x?Sc:void 0;case ue.STUDIO:case ue.RESEARCH:return;default:return Wg[a]}},[x,a]);return d.useEffect(()=>{const E=f?.map(O=>Qr(O.answer_mode_type).with(hn.SHOPPING,()=>_[hn.SHOPPING]).with(hn.JOBS,()=>_[hn.JOBS]).with(hn.HOTELS,()=>_[hn.HOTELS]).with(hn.MAPS,()=>_[hn.MAPS]).with(hn.IMAGE,()=>_[hn.IMAGE]).with(hn.VIDEO,()=>_[hn.VIDEO]).with(hn.SOURCES,()=>_[hn.SOURCES]).with(hn.ASSETS,()=>_[hn.ASSETS]).with(hn.APPS,()=>_[hn.APPS]).with(hn.TASKS,()=>_[hn.TASKS]).with(hn.SEARCH,()=>_[hn.SEARCH]).with(hn.CHAT,()=>_[hn.CHAT]).otherwise(D=>(ne.warn("Unsupported Answer Mode",{mode:D.valueOf()}),null))).filter(O=>!!O),k=[{text:a===ue.SEARCH?C:n(ls[a].name),icon:S,id:"d",mode:"default",testId:Ma.ANSWER_MODE_TABS.ANSWER(a)},...(E??[]).filter(O=>(O.mode!=="tasks"||i)&&(O.show===void 0||O.show===!0))],M=k.some(O=>O.mode==="tasks"),j=(l?.goals?.length??0)+(c?.goals?.length?c.goals.length-1:0);!M&&j>0&&!u&&i&&k.push({text:n({defaultMessage:"Steps",id:"huCHmkVjex"}),icon:dG,id:Ta.tasks,mode:"tasks",testId:Ma.ANSWER_MODE_TABS.TASKS});const R=v.getState();cs(R.answerModeActionList,k)||v.setState({answerModeActionList:k})},[n,f,i,_,c?.goals?.length,l?.goals?.length,a,x,C,S,u,v]),o.jsx(zqt.Provider,{value:v,children:o.jsx(qqt,{scrollToListItem:t,children:e})})});tz.displayName="AnswerModeProvider";const Ww=Gqt,W4=()=>{const e=d.useContext(WAe);if(!e)throw new Error("useAnswerModeApi must be used within an AnswerModeProvider");return e},g0=I.memo(({title:e,footer:t,onClick:n,state:r,isSelected:s=!1,entryUUID:a,invalidateThreadsQuery:i,queuedId:l,onCancelQueued:c,firstAnswer:u,customIcon:f,customDescription:m,customActions:p})=>{const h=d.useMemo(()=>{if(m)return m;switch(r){case"queued":return"Queued";case"in-progress":return"In progress";case"action-required":return"Action required";case"completed-unread":case"completed-read":{if(!u)return"";const x=vhe(u);return x||""}default:return""}},[r,m,u]),g=d.useMemo(()=>{if(f)return f;switch(r){case"queued":return o.jsx(Fr,{size:16,className:"text-quietest"});case"in-progress":return o.jsx(Fr,{size:16,className:"text-super"});case"action-required":return o.jsx(EOe,{size:20,className:"text-attention"});case"completed-unread":return o.jsx(Fa,{size:20,className:"text-positive"});case"completed-read":return o.jsx(Hk,{size:20,className:"text-quietest"});default:return null}},[r,f]),y=d.useMemo(()=>{if(p)return p;switch(r){case"queued":return!l||!c?[]:[{icon:Ng,label:"Cancel",onClick:x=>{x.stopPropagation(),c(l)}}];case"in-progress":case"action-required":return a?[{icon:Ng,label:"Stop",onClick:async x=>{x.stopPropagation();try{await Su({entryUUID:a,reason:"mission-control-terminate"}),i?.()}catch(v){ne.error("Failed to terminate entry:",v)}}}]:[];default:return[]}},[r,a,i,p,l,c]);return o.jsx(z,{onClick:n,className:`gap-md group relative cursor-pointer overflow-hidden transition-all duration-300 ease-in-out ${s?"ring-subtler !bg-raised -mx-md px-md my-4 !border-transparent shadow-lg ring-1 first:mt-0 last:mb-0 md:rounded-2xl":""}`,children:o.jsxs("div",{className:"gap-md py-md group relative flex",children:[g&&o.jsx("div",{className:"mt-[13px] flex size-5 flex-shrink-0 items-center justify-center",children:g}),o.jsxs("div",{className:"flex-1",children:[o.jsxs("div",{className:"gap-md flex",children:[o.jsxs("div",{className:"space-y-2xs flex-1",children:[o.jsx(F,{variant:"baseSemi",className:"group-hover:text-super line-clamp-2 overflow-hidden text-pretty",children:e}),o.jsx("div",{className:`overflow-hidden transition-all duration-300 ease-in-out ${s&&(r==="completed-unread"||r==="completed-read")?"max-h-20":"max-h-5"}`,children:o.jsx(F,{variant:"small",color:"light",className:`${s&&(r==="completed-unread"||r==="completed-read")?"line-clamp-4":"line-clamp-1"}`,children:h||"Answer skipped."})})]}),y.length>0&&o.jsx("div",{className:"gap-xs flex items-center",children:y.map((x,v)=>o.jsx(me,{variant:"common",size:"small",pill:!0,icon:x.icon,onClick:b=>{b.stopPropagation(),x.onClick(b)},toolTip:x.label,tooltipLayout:"top"},v))})]}),o.jsx("div",{className:`grid transition-all duration-300 ease-in-out ${t&&s?"grid-rows-[1fr] opacity-100":"grid-rows-[0fr] opacity-0"}`,children:o.jsx("div",{className:"overflow-hidden",children:o.jsx("div",{onClick:x=>x.stopPropagation(),className:"mt-md",children:t})})})]})]})})});g0.displayName="MissionControlItem";const kie="/static/images/agent-favicons/gmail.svg",Kqt="/static/images/data-connectors/microsoft/outlook-avatar.svg",_d={click:{message:J({defaultMessage:"Clicking",id:"n43/KMHgLD"}),icon:Gp},paused:{message:J({defaultMessage:"Paused",id:"C2iTEHtK//"}),icon:NOe},fill:{message:J({defaultMessage:"Filling out a form",id:"5i0X5DesMM"}),icon:mG},search:{message:J({defaultMessage:"Searching",id:"IfE0if3ytt"}),icon:Br},search_images:{message:J({defaultMessage:"Searching for images",id:"NaBAkNUPuD"}),icon:Br},navigate:{message:J({defaultMessage:"Navigating",id:"3O6LMNhb0M"}),icon:Hce},press_key:{message:J({defaultMessage:"Pressing key",id:"R6bmgzv6Xs"}),icon:Jh},key:{message:J({defaultMessage:"Pressing key",id:"R6bmgzv6Xs"}),icon:Jh},scroll_page:{message:J({defaultMessage:"Scrolling",id:"/UUUqdefcb"}),icon:gG},scroll:{message:J({defaultMessage:"Scrolling",id:"/UUUqdefcb"}),icon:gG},reasoning:{message:J({defaultMessage:"Reasoning",id:"Aw3qRf7hyO"}),icon:Kl},considering_clarification:{message:J({defaultMessage:"Considering your clarification",id:"xvwGmM2LU3"}),icon:Kl},working:{message:J({defaultMessage:"Working",id:"gAR0atqpRn"}),icon:fG},finished:{message:J({defaultMessage:"Done",id:"JXdbo8Vnlw"}),icon:dr},reading:{message:J({defaultMessage:"Reading",id:"MOK/yKIpYX"}),icon:ia},reading_browser:{message:J({defaultMessage:"Reviewing your tabs and browser history",id:"P+tFAY9IRT"}),icon:ia},getting_source:{message:J({defaultMessage:"Getting source",id:"Z1eFpRpq7v"}),icon:ia},getting_sources:{message:J({defaultMessage:"Getting sources",id:"Jv/OJ6AjyO"}),icon:ia},reviewing_source:{message:J({defaultMessage:"Reviewing source",id:"ymFEF2YHhs"}),icon:ia},reviewing_sources:{message:J({defaultMessage:"Reviewing sources",id:"/NZJDBzKok"}),icon:ia},reviewing_memory:{message:J({defaultMessage:"Reviewing memory",id:"piUVOodSmM"}),icon:ia},reviewing_memories:{message:J({defaultMessage:"Reviewing memories",id:"VgUfUXIIey"}),icon:ia},reviewing_conversation_history:{message:J({defaultMessage:"Reviewing past queries",id:"RfG7EQT3IO"}),icon:ia},reading_tabs:{message:J({defaultMessage:"Reviewing your tabs",id:"cE3TzCT3eK"}),icon:ia},building_app:{message:J({defaultMessage:"Building application",id:"qK6gEQyvil"}),icon:aN},creating_chart:{message:J({defaultMessage:"Creating chart",id:"yc5YxtS5VS"}),icon:pG},creating_pdf:{message:J({defaultMessage:"Creating PDF",id:"NcD2ia4Hrn"}),icon:Tg},creating_docx:{message:J({defaultMessage:"Creating DOCX",id:"GIUtasyzkA"}),icon:Qk},creating_xlsx:{message:J({defaultMessage:"Creating XLSX",id:"ZyT2MB8/KD"}),icon:$b},thinking:{message:J({defaultMessage:"Thinking",id:"AHQWDTo4+e"}),icon:Kl},reading_history:{message:J({defaultMessage:"Reviewing your browser history",id:"7cZkJ7qeNW"}),icon:oN},searching_browser:{message:J({defaultMessage:"Searching your browser",id:"i91D1hXua6"}),icon:oN},searching_open_tabs:{message:J({defaultMessage:"Searching open tabs",id:"xHbSQOjdLq"}),icon:TOe},opening_tab:{message:J({defaultMessage:"Opening tab",id:"ySnoI+lduZ"}),icon:YS},closing_tabs:{message:J({defaultMessage:"Closing your tabs",id:"2KnXtfjRKV"}),icon:QR},searching_gmail:{message:J({defaultMessage:"Searching your email",id:"X1ami4cm1T"}),icon:iN},emailing:{message:J({defaultMessage:"Emailing",id:"QRygokyD+u"}),icon:iN},searching_calendar:{message:J({defaultMessage:"Searching your calendar",id:"nH9G8cL0Ys"}),icon:lN},conclusion:{message:J({defaultMessage:"Wrapping up",id:"DN3hjkyzeT"}),icon:null},generating_images:{message:J({defaultMessage:"Generating",id:"NAZfqr2apb"}),icon:Kce},presenting_images:{message:J({defaultMessage:"Presenting",id:"BlxYo7+tmK"}),icon:sce},grouping_tabs:{message:J({defaultMessage:"Grouping tabs",id:"Fg6l7eg2HV"}),icon:kOe},ungrouping_tabs:{message:J({defaultMessage:"Ungrouping tab groups",id:"dbpFCBu2NQ"}),icon:MOe},searching_tab_groups:{message:J({defaultMessage:"Searching tab groups",id:"V+4/ioYMPd"}),icon:Br},getting_freebusy:{message:J({defaultMessage:"Checking availability",id:"ZamRNp2QgI"}),icon:lN},getting_user_info:{message:J({defaultMessage:"Searching your contacts",id:"gPpZJKZdnL"}),icon:rm},found_contacts:{message:J({defaultMessage:"Found contacts",id:"2zmZgbYnmk"}),icon:rm},no_contacts_found:{message:J({defaultMessage:"No contacts found",id:"JhY7bAH15Y"}),icon:rm},selecting_contacts:{message:J({defaultMessage:"Selecting contacts",id:"OQhQc1Jomc"}),icon:rm},getting_contact_details:{message:J({defaultMessage:"Getting contact details",id:"p391mWkGfv"}),icon:rm},scheduling:{message:J({defaultMessage:"Scheduling",id:"5lQx5rgTEW"}),icon:hG},scheduled:{message:J({defaultMessage:"Scheduled",id:"cXAlMRerxW"}),icon:hG},reading_events:{message:J({defaultMessage:"Getting event details",id:"0QgD+ftRet"}),icon:lN},reading_emails:{message:J({defaultMessage:"Reviewing emails",id:"f/yAuwo+Vl"}),icon:iN},OPEN_TAB:{message:J({defaultMessage:"Open tabs",id:"KO2pxljl8b"}),icon:YS},RECENTLY_CLOSED_TAB:{message:J({defaultMessage:"Recently closed tabs",id:"GrcBtKIzPh"}),icon:QR},BROWSER_HISTORY:{message:J({defaultMessage:"Browser history",id:"DtBSny6kw5"}),icon:oN},MCP_TOOL:{message:J({defaultMessage:"Connecting to {appName}",id:"w+iLkzBJV0"}),icon:aN},searching_flights:{message:J({defaultMessage:"Searching flights",id:"9+i0zI94jg"}),icon:Br},reviewing_booking_options:{message:J({defaultMessage:"Reviewing options",id:"hEF13crkAK"}),icon:Br},looking_for_booking_options:{message:J({defaultMessage:"Looking for booking options",id:"KIKXHtHJvz"}),icon:Br},redirecting_to_booking:{message:J({defaultMessage:"Redirecting to booking site",id:"y/a1lYMfGW"}),icon:Br},setting_up_price_alert_automation:{message:J({defaultMessage:"Setting up PriceAlertAutomation",id:"+7IqVk27BT"}),icon:pG},read_page:{message:J({defaultMessage:"Reading page",id:"eEZaxWqt5u"}),icon:ia},get_page_text:{message:J({defaultMessage:"Getting page text",id:"rZqPh2Mfgi"}),icon:ia},tabs_context:{message:J({defaultMessage:"Getting tab context",id:"kcCvqWgrPU"}),icon:ia},tabs_create:{message:J({defaultMessage:"Creating tab",id:"NprxDW5RAN"}),icon:YS},form_input:{message:J({defaultMessage:"Filling form",id:"+gn8Qfhxa/"}),icon:mG},find:{message:J({defaultMessage:"Finding elements",id:"PicRTL+DUk"}),icon:Br},find_elements:{message:J({defaultMessage:"Finding elements",id:"PicRTL+DUk"}),icon:Br},search_web:{message:J({defaultMessage:"Searching",id:"IfE0if3ytt"}),icon:Br},todo_write:{message:J({defaultMessage:"Writing to todo",id:"2A+vYg4H2N"}),icon:aN},left_click:{message:J({defaultMessage:"Clicking",id:"n43/KMHgLD"}),icon:Gp},right_click:{message:J({defaultMessage:"Right clicking",id:"YAxezKzj4p"}),icon:Gp},double_click:{message:J({defaultMessage:"Double clicking",id:"anyjKtRL4p"}),icon:Gp},triple_click:{message:J({defaultMessage:"Triple clicking",id:"aqH53Ke8R4"}),icon:Gp},left_click_drag:{message:J({defaultMessage:"Dragging",id:"A/Bht8akH/"}),icon:Gp},type:{message:J({defaultMessage:"Typing",id:"N2bqd9kL1X"}),icon:Jh},screenshot:{message:J({defaultMessage:"Taking screenshot",id:"IwRaId+4hv"}),icon:Gk},wait:{message:J({defaultMessage:"Waiting",id:"dZd8H/KE0T"}),icon:fG}},Ay={initial:{opacity:0,position:"absolute",width:"100%"},animate:{opacity:1,position:"relative",transition:{opacity:{duration:.3}}},exit:{opacity:0,position:"absolute",width:"100%",transition:{opacity:{duration:.3}}}},eu=I.memo(e=>{const{isFinished:t,className:n,count:r,showAnimation:s,isPaused:a,...i}=e,l=Z(),c=e.action?_d[e.action]?l.formatMessage(_d[e.action].message):"":e.title,u=e.action?_d[e.action]?.icon:e.icon,f=t||a;return o.jsx(Ye,{mode:"popLayout",children:o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:s?0:.2,ease:"easeInOut"},className:B("gap-sm group flex cursor-pointer flex-col",n),children:o.jsxs(F,{variant:"tinyRegular",color:t?"light":"super",className:"flex items-center gap-1 py-1.5",children:[u&&o.jsx(de,{icon:u,size:"2xs",className:"-mt-px opacity-80"}),o.jsxs(un,{variant:"super",active:!f,as:"span",speed:"slow",children:[c,r!==void 0&&r>0&&`  ${r}`]})]})},i.key)})});eu.displayName="StepActionLabel";const Vs=I.memo(({icon:e,text:t,favicon:n,className:r,iconClassName:s,url:a})=>{const i=o.jsx(z,{variant:"subtler",className:B("py-xs inline-block rounded-lg px-2",{"hover:bg-super group cursor-pointer":a},r),children:o.jsxs(F,{variant:"tinyMono",className:B("gap-x-xs flex pb-px !text-[0.68rem] leading-4",{"group-hover:text-inverse dark:group-hover:text-inverse":a}),children:[(n||e)&&o.jsx("div",{className:"h-4 pt-px",children:n?o.jsx("img",{src:n,alt:t,className:"size-[14px]"}):e?o.jsx(de,{icon:e,size:"xs",className:s}):null}),o.jsx("p",{className:"px-two",children:t})]})});return a?o.jsx(qe,{href:a,target:"_blank",rel:"noopener",children:i}):i});Vs.displayName="BotLabel";const Yqt=()=>{const e=ot(),t=A5(),n=d.useMemo(()=>e.getQueryData(t),[e,t]),{connectors:r}=wo({reason:"useHasUnauthenticatedGmailGcal"});return d.useMemo(()=>{const s=!!r?.connectors.find(a=>a.name==="gcal"&&(!a.connected||a.has_required_scopes===!1));return!(!n||!s)},[n,r])},Qqt=1e4,Xqt=1e3*60,Zqt=["comet-default-browser-status"],Jqt=()=>{const e=Nn(),{data:t=null,isLoading:n}=Ue({queryKey:Zqt,queryFn:async()=>{try{return await e.getIsCometDefaultBrowser("check_default_browser")}catch{return null}},refetchInterval:r=>r?.state?.data?Xqt:Qqt,refetchIntervalInBackground:!0,staleTime:0});return{isDefaultBrowser:t,isDefaultBrowserLoading:n}},zAe=()=>{const{session:e}=mt(),{firstResult:{author_username:t}={},inFlight:n}=Ft();return e?.user?.username===t||n};var eKt={};const tKt=({position:e,inFlight:t,isLastResult:n,upsellInformation:r,backendUuid:s})=>{const[a,i]=d.useState(!1),[l,c]=d.useState(null),u=dn(),f=eKt.NEXT_PUBLIC_IS_SIDECAR_BUILD?"sidecar_thread":u?"search_results_page":void 0,{trackEventOnce:m,trackEvent:p}=Te(),h=zAe(),g=Yqt(),{subscriptionTier:y}=St(),{isDefaultBrowser:x}=Jqt(),v=d.useMemo(()=>{if(a||!r||e==="top"&&r.app_location!=="IN_THREAD"||e==="bottom"&&r.app_location!=="IN_THREAD_BOTTOM"||e==="input"&&r.app_location!=="IN_THREAD_INPUT"||e==="connector_auth"&&r.app_location!=="UPSELL_APP_LOCATION_UNSPECIFIED")return!1;const w=s;return!(!w||w===l||!n&&(!r.is_persistent||e==="input"||e==="router_steps"||e==="connector_auth")||e==="bottom"&&t||r.is_persistent&&(!h||r.name==="gmail_gcal_connector"&&!g||r.name==="comet_set_default_browser"&&x!==!1))},[a,r,e,s,l,n,t,h,g,x]);d.useEffect(()=>{if(!v||!r)return;const w=s;c(w),i(!0),m("thread upsell banner viewed",{entryUUID:w,upsellType:r.upsell_type,upsellName:r.name,cometSurface:f,subscriptionTier:y})},[s,v,m,r,f,y]);const b=d.useCallback(({hideBanner:w=!0}={})=>{w&&i(!1);const C=r,S=s;if(S&&C?.upsell_type){p("thread upsell banner dismissed",{entryUUID:S,upsellType:C.upsell_type,upsellName:C.name,cometSurface:f,subscriptionTier:y});const E=C.cta==="SHORTCUT_MODAL"?C.cta_information?.recommended_shortcut?.name:void 0;g3(C.name,E)}},[s,p,r,f,y]),_=d.useCallback(()=>{i(!1)},[]);return d.useMemo(()=>({show:a,handleDismiss:b,handleHide:_}),[b,a,_])},nKt=({icon_reference:e,icon_image:t})=>{if(t)return o.jsx(z,{variant:"subtle",className:"p-xs rounded-md border",children:o.jsx("img",{src:t.url,alt:t.alt,width:40,height:40,className:"rounded"})});const n={pro:o.jsx(de,{icon:tu.pro,size:"lg"}),collection:o.jsx(de,{icon:tu.collection,size:"lg"}),gmail_gcal:o.jsx(z,{variant:"subtle",className:"p-xs rounded-md border",children:o.jsx("img",{src:S5,alt:"Gmail Gcal Upsell Banner",width:40,height:40})}),research:o.jsx(de,{icon:tu.research,size:"lg"}),labs:o.jsx(de,{icon:tu.labs,size:"lg"}),max:o.jsx(UB,{width:"w-8"}),shortcut:o.jsx(de,{icon:Wk,size:"lg"}),comet_login:o.jsx(z,{variant:"super",className:"p-xs rounded-md border",children:o.jsx(F,{color:"defaultInverted",children:o.jsx(Sc,{size:24})})})};return e==="comet_download"?null:n[e||""]||o.jsx(de,{icon:tu.pro,size:"lg"})},Qx=I.memo(({position:e,upsellInformation:t,inFlight:n,isLastResult:r,backendUuid:s,animateExpand:a=!0,hideOnAccept:i=!0,hideOnReject:l=!0,isSkipping:c=!1,onAccept:u,onReject:f,className:m})=>{const{$t:p}=Z(),{show:h,handleDismiss:g,handleHide:y}=tKt({position:e,inFlight:n,isLastResult:r,upsellInformation:t,backendUuid:s}),x=d.useCallback(()=>{g({hideBanner:l}),f?.()},[g,f,l]),v=d.useCallback(()=>{g({hideBanner:i}),u?.()},[g,u,i]),_=Ot()?.get("handle_upsell");d.useEffect(()=>{if(h&&_){const E=new URLSearchParams(window.location.search);E.delete("handle_upsell");const k=Object.fromEntries(E.entries());_x(k),v()}},[v,h,_]);const w=et();if(!h||!t||w&&t.upsell_type===wE.LOGIN)return null;const C=nKt(t),S=e==="router_steps"||e==="connector_auth";return o.jsx(Ye,{children:o.jsx(ve.div,{initial:a?{height:0}:{opacity:0},animate:a?{height:"auto"}:{opacity:1},exit:a?{height:0}:{opacity:0},transition:{duration:.2},children:o.jsx("div",{className:"bg-base",children:o.jsxs(z,{variant:t.background_super?"superLight":"subtler",className:B("gap-sm mb-md p-md md:gap-md relative flex w-full flex-col items-center rounded-md md:flex-row",{"rounded-xl shadow-xl ring-1":e==="input"||e==="router_steps"},m),children:[o.jsx("div",{className:"right-md top-md absolute z-10 md:hidden",children:o.jsx(Me,{icon:kt,size:"small",onClick:x,noPadding:!0})}),C&&o.jsx(F,{color:"default",className:"mr-sm hidden md:block",children:C}),o.jsxs("div",{className:"md:mr-sm relative flex w-full flex-col",children:[o.jsx(F,{variant:"smallBold",className:B("mr-lg md:mr-0",{"line-clamp-2":t.upsell_type===wE.CREATE_SHORTCUT}),children:t.title}),o.jsx(F,{variant:"small",color:"light",className:"mb-0 font-normal leading-[1.3]",children:t.description})]}),o.jsxs("div",{className:"md:gap-sm flex size-full items-end justify-end md:w-auto md:flex-row md:items-center",children:[S&&o.jsx(Me,{text:p({defaultMessage:"Skip",id:"/4tOwTiCH6"}),size:"small",onClick:x,variant:"common",isLoading:c}),t.button_text&&o.jsx(y3,{upsellInformation:t,inFlight:n,position:e,hideUpsell:y}),!S&&o.jsx("div",{className:"mt-sm hidden md:block",children:o.jsx(Me,{icon:kt,size:"small",onClick:x,noPadding:!0})})]})]})})})})});Qx.displayName="ThreadUpsell";const rKt=()=>{const{$t:e}=Z();return d.useMemo(()=>({success:e({defaultMessage:"Success",id:"xrKHS6mnOh"}),couldNotFinish:e({defaultMessage:"Could not finish",id:"Sz8oY2B0GK"}),allEmail:e({defaultMessage:"All Emails",id:"xe3SFk3aV+"}),allTabs:e({defaultMessage:"All tabs",id:"vYBCIf+wNz"}),failedClosedTabs:e({defaultMessage:"Could not close tabs",id:"hjoQ7gU34V"}),results:e({defaultMessage:"Results",id:"yaMHMBMsQ7"}),continue:e({defaultMessage:"Continue",id:"acrOozm08x"}),skip:e({defaultMessage:"Skip",id:"/4tOwTiCH6"}),foundInfo:e({defaultMessage:"Details retrieved",id:"YCMMMHEIKw"}),allTabGroups:e({defaultMessage:"All tab groups",id:"YL1jEopcqf"}),gmailNotAuthenticated:e({defaultMessage:"Gmail not connected",id:"Zj8MiXlulR"}),googleCalendarNotAuthenticated:e({defaultMessage:"Google Calendar not connected",id:"PH33AilmeW"}),matchesFound:t=>t===0?e({defaultMessage:"No matches found",id:"KeJh7yZCu8"}):e({defaultMessage:"{count, plural, one {One match found} other {# matches found}}",id:"ji6QO7fi7u"},{count:t}),emailsFound:t=>t===0?e({defaultMessage:"No emails found",id:"suW4stNi19"}):e({defaultMessage:"{count, plural, one {# email} other {# emails}}",id:"Rh0ulH+p+5"},{count:t}),eventsFound:t=>t===0?e({defaultMessage:"No events found",id:"GDgEmCHaVM"}):e({defaultMessage:"{count, plural, one {# event} other {# events}}",id:"HhJ8RP7qsx"},{count:t}),availableTimesFound:t=>t===0?e({defaultMessage:"No available times found",id:"2jnY2Ky2Nv"}):e({defaultMessage:"{count, plural, one {# available time} other {# available times}}",id:"5yH+BVFO1f"},{count:t}),selectedContacts:t=>e({defaultMessage:"Selected {count, plural, one {# contact} other {# contacts}}",id:"4kDAeuSFTs"},{count:t}),skippedContacts:e({defaultMessage:"Skipped selecting contacts",id:"IXqYGlHPpF"}),noAvailabilityFound:e({defaultMessage:"No availability",id:"x2vleFRn/L"})}),[e])},sKt=async(e,t)=>{try{return await re.POST("/rest/sse/handle_perplexity_blocking_clarifying_answers","blocking-clarifying-questions",{body:{result:{tool_uuid:t,answers:e}}})}catch(n){ne.log(n);return}},aKt=()=>dt({mutationFn:({answers:e,toolUuid:t})=>sKt(e,t)}),oKt=async(e,t,n)=>{const r=await re.POST("/rest/sse/handle_tool_user_approval_response","mcp-tool-user-approval",{body:{result:{uuid:e,allow_tool_call:t,user_revision:n}}});if(r.error)throw r.error;return r},iKt=()=>dt({mutationFn:({uuid:e,allowToolCall:t,userRevision:n})=>oKt(e,t,n)}),GAe=I.memo(e=>{const{questions:t,answers:n,toolUuid:r,isFinished:s}=e,{$t:a}=Z(),{isMobileStyle:i,isMobileUserAgent:l}=xe(),{mutate:c,isSuccess:u}=aKt(),[f,m]=d.useState(()=>n.length===0||n.length!==t.length?t.map(()=>""):[...n]),p=d.useCallback((g,y)=>{m(x=>{const v=[...x];return v[g]=y,v})},[]),h=d.useCallback(()=>{c({answers:f,toolUuid:r})},[f,r,c]);return t.length===0?null:o.jsxs(z,{variant:"subtler",className:"p-md rounded-md",children:[t.map((g,y)=>o.jsx(qAe,{question:g,index:y,value:f[y]??"",onChange:p,isMobileStyle:i,isMobileUserAgent:l,isDisabled:u||s},y)),o.jsx(me,{extraCSS:"!px-lg mt-md",variant:"primary",text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),onClick:h,disabled:s||u,type:"submit"})]})});GAe.displayName="BlockingClarifyingQuestions";const qAe=I.memo(({question:e,index:t,value:n,onChange:r,isMobileStyle:s,isMobileUserAgent:a,isDisabled:i})=>{const l=d.useCallback(c=>{r(t,c)},[t,r]);return o.jsxs(z,{className:"gap-sm mt-md flex flex-col",children:[o.jsx(F,{variant:"small",children:e}),o.jsx(Wa,{value:n,onChange:l,isMobileStyle:s,isMobileUserAgent:a,disabled:i})]},t)});qAe.displayName="QuestionInput";const KAe=I.memo(({mediaItems:e,className:t})=>{const n=e?.[e?.length-1],r=n?.media_item,s=r?.image||r?.thumbnail,a=d.useMemo(()=>({url:r?.url,name:r?.name}),[r?.name,r?.url]);return n?o.jsxs("div",{className:B("@xs:px-md @xs:pb-md px-sm pb-sm relative flex flex-col gap-1.5",t),children:[o.jsx(Ye,{mode:"wait",children:o.jsx(ve.div,{className:"after:ring-subtler @xs:w-20 md:@xs:w-60 relative overflow-hidden rounded after:pointer-events-none after:absolute after:inset-0 after:rounded-md after:ring-1 after:ring-inset after:ring-opacity-50 md:w-full dark:after:ring-0",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.1,ease:"easeOut"},children:o.jsx(ns,{src:r?.thumbnail,lightboxSrc:s,alt:r?.name,origin:a,includeLightBoxModal:!0,rounded:!0,imageClassName:"object-cover w-full text-[0] dark:mix-blend-normal",containerClassName:"h-full w-full",maskClassName:"bg-subtler"})},r?.thumbnail)}),r?.url&&o.jsx("div",{children:o.jsx(qe,{href:r?.url,target:"_blank",children:o.jsx(Me,{icon:ba,variant:"common",size:"tiny",text:"Open page",extraCSS:"group",iconClassName:"group-hover:text-super",textClassName:"group-hover:text-super font-normal",noPadding:!0})})})]}):null});KAe.displayName="StepCardMedia";const nz=d.memo(({count:e,className:t})=>o.jsx(z,{className:B("flex select-none items-center pt-px text-center font-mono text-xs tabular-nums leading-none",t),as:"span",children:o.jsx(ec,{value:e})}));nz.displayName="AnimatedCounter";const Xx=I.memo(({favicon:e,description:t,descriptionClassName:n,title:r,descriptionFooter:s,count:a,url:i,media:l,children:c,className:u,showMedia:f=!0,onClick:m,isMissionControlSummary:p,accessory:h})=>{const g=f&&l&&l.length>0;return o.jsxs(z,{variant:"raised",className:B("@container group/step-card relative isolate flex flex-col gap-1.5 overflow-hidden rounded-xl border shadow-sm",u),onClick:m,children:[h&&o.jsx("div",{className:"absolute right-2 top-2",children:h}),(r||e)&&o.jsxs("div",{className:B("@xs:px-md px-sm @xs:pt-3 @xs:gap-3 gap-sm flex min-w-0 items-center pt-2"),children:[i&&e?o.jsx(qe,{href:i,target:"_blank",rel:"noopener",className:"@xs:size-4 inline-flex size-3 shrink-0 items-center justify-center overflow-hidden rounded",children:e}):e,o.jsxs("div",{className:"@xs:text-sm flex min-w-0 flex-1 items-baseline text-xs",children:[r&&o.jsx("div",{className:"relative flex min-w-0 flex-1",children:o.jsx(F,{variant:"tiny",className:"@xs:text-sm min-w-0 flex-1 truncate",children:r})}),a&&o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),o.jsx(nz,{count:a,className:"opacity-65"})]})]})]}),o.jsxs("div",{className:"@xs:gap-sm @xs:flex-row flex flex-col gap-0",children:[o.jsxs("div",{className:"flex min-w-0 grow flex-col gap-1.5",children:[t&&o.jsx(o.Fragment,{children:p?o.jsx(YAe,{description:t}):o.jsx(F,{variant:"tinyRegular",className:B("px-md @xs:text-sm text-pretty",e?"@xs:ml-7 ml-4":void 0,n),children:t})}),s&&o.jsx("div",{className:"px-md @xs:ml-7 ml-4",children:s}),c]}),g&&o.jsx(KAe,{mediaItems:l})]})]})});Xx.displayName="StepCard";const YAe=I.memo(({description:e})=>{const[t,n]=d.useState(!1),{$t:r}=Z(),s=d.useCallback(a=>{a.stopPropagation(),n(!t)},[t]);return o.jsxs(F,{variant:"tinyRegular",className:B("px-md mb-sm @xs:text-sm @xs:ml-7 relative ml-4 line-clamp-2 text-pretty",t&&"line-clamp-none"),children:[o.jsxs("span",{className:B("relative",{"select-none":!t}),children:[e,t&&o.jsxs(F,{inline:!0,variant:"tinyRegular",color:"light",className:"hover:text-super inline-flex select-none items-center opacity-0 group-hover/step-card:opacity-100",onClick:s,children:["",r({id:"mFYgAXM/x4",defaultMessage:"Less"}),o.jsx(de,{icon:$y,size:"xs"})]})]}),!t&&o.jsxs(o.Fragment,{children:[o.jsx(z,{className:"absolute inset-0",variant:"raised",style:{maskImage:"linear-gradient(to bottom, transparent 0%, black 100%)"}}),o.jsxs(F,{variant:"tinyRegular",color:"light",className:"right-md hover:text-super bg-raised pl-xs absolute bottom-0 hidden translate-x-2 select-none items-center group-hover/step-card:inline-flex",onClick:s,children:[r({id:"I5NMJ8llIi",defaultMessage:"More"}),o.jsx(de,{icon:Wn,size:"xs"})]})]})]})});YAe.displayName="ExpandableDescription";function lKt({scrollContainerRef:e,autoScroll:t=!1,children:n}){const[r,s]=d.useState(!1),[a,i]=d.useState(!1),l=d.useCallback(()=>{const c=e.current;if(!c)return;const u=Math.abs(c.scrollTop),f=Math.max(0,c.scrollHeight-c.clientHeight),m=f>0;t?(s(m&&u<f),i(m&&u>0)):(s(m&&u>0),i(m&&u<f))},[t,e]);return d.useEffect(()=>{l()},[l]),d.useEffect(()=>{const c=e.current;if(c)return c.addEventListener("scroll",l),()=>c.removeEventListener("scroll",l)},[l,e]),d.useEffect(()=>{l();const c=e.current;if(!c)return;const u=new MutationObserver(l);return u.observe(c,{childList:!0,subtree:!0,characterData:!0}),()=>u.disconnect()},[n,l,e]),d.useMemo(()=>({canScrollUp:r,canScrollDown:a}),[r,a])}const cKt=220,Tie=24,Nie=16,Hw=I.memo(({children:e,className:t,scrollContainerClassName:n,maxHeight:r=cKt,showTopGradient:s=!0,showBottomGradient:a=!0,autoScroll:i=!0,topGradientOffset:l=0})=>{const c=d.useRef(null),{canScrollUp:u,canScrollDown:f}=lKt({scrollContainerRef:c,autoScroll:i,children:e}),m=d.useMemo(()=>{if(l>0){const h=s&&u,g=a&&f;if(!h&&!g)return{};let y;if(h&&g){const x=l+Tie,v=`calc(100% - ${Nie}px)`;y=`linear-gradient(180deg, black 0, black ${l}px, transparent ${l}px, black ${x}px, black ${v}, transparent 100%)`}else if(h){const x=l+Tie;y=`linear-gradient(180deg, black 0, black ${l}px, transparent ${l}px, black ${x}px, black 100%)`}else y=`linear-gradient(180deg, black 0, black calc(100% - ${Nie}px), transparent 100%)`;return{maskImage:y}}return{}},[u,f,l,s,a]),p=d.useMemo(()=>{if(l>0)return"";const h=s&&u,g=a&&f;return h&&g?"mask-fade-v-6":h?"mask-fade-t-6":g?"mask-fade-b-4":""},[u,f,l,s,a]);return o.jsx(z,{className:B("relative",t),children:o.jsx("div",{ref:c,className:B(i?"flex-col-reverse":"flex-col","scrollbar-subtle pb-sm relative flex overflow-y-auto pl-3 pr-1 [scrollbar-gutter:stable]",n,p),style:{maxHeight:r,...m},children:e})})});Hw.displayName="StepCardScrollableContent";const QAe=I.memo(({form_items:e,taskUuid:t})=>{const n=e?.[0]?.text_area_item,r=n?.placeholder,s=n?.text,[a,i]=d.useState(r||""),l="agent-form",c=d.useCallback(async h=>{try{await re.POST("/rest/browser/agent_confirmation",l,{body:{task_uuid:t,status:h,message:a},backOffTime:100,numRetries:2,headers:{"Content-Type":"application/json"}})}catch(g){ne.error("Error sending agent confirmation",g)}},[t,a,l]),{$t:u}=Z(),f=d.useCallback(h=>{ga.isEnterKeyWithoutShift(h)&&c("accept")},[c]),m=d.useCallback(h=>{h.stopPropagation(),c("accept")},[c]),p=d.useCallback(h=>{h.stopPropagation(),c("reject")},[c]);return o.jsxs(z,{className:"flex flex-col gap-3",children:[o.jsx(F,{color:"light",variant:"small",children:s}),o.jsx(Wa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:r,value:a,onChange:i,onKeyDown:f}),o.jsxs("div",{className:"gap-sm py-sm flex items-center",children:[o.jsx(me,{size:"small",variant:"inverted",text:u({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit",disabled:!1,onClick:m}),o.jsx(Me,{size:"small",text:u({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:p})]})]})});QAe.displayName="AgentForm";const uKt=1e3,XAe=I.memo(({message:e,isFinished:t,isPaused:n,isPendingClarification:r})=>{const[s,a]=d.useState(!1),i=d.useRef(e.thought||""),[l,c]=d.useState("working");d.useEffect(()=>{if(t){a(!1);return}e.thought!==i.current&&(i.current=e.thought,a(!1));const m=setTimeout(()=>{!t&&!e.action&&a(!0)},uKt);return()=>clearTimeout(m)},[e.thought,e.action,t]);const u=!e.action&&!e.thought&&e.url;return d.useEffect(()=>{let m="working";t?m="finished":n?m="paused":r?m="considering_clarification":u?m="reasoning":s&&!e.action?m="working":e.action&&e.action in _d&&(m=e.action),c(m)},[t,u,s,e.action,n,r]),!t&&(r||e.action||u||s&&!e.action)&&o.jsx(eu,{action:l,isFinished:t,isPaused:n,className:"pl-8"})});XAe.displayName="AgentStatusManager";var dKt={};const ZAe=I.memo(({citationUrl:e})=>{const t=d.useCallback(()=>{window.open(e,"_blank","noopener,noreferrer")},[e]);return o.jsx(lc,{icon:ba,iconClassName:"-ml-px",className:"animate-in fade-in duration-150",size:"extraSmall",textColor:"light",iconOnly:!0,tooltip:"Open page",onClick:t})});ZAe.displayName="ExternalCitationBubble";const JAe=I.memo(({message:e,task:t})=>{const n=e.url||t.start_url,r=e.url?o.jsx(ZAe,{citationUrl:n}):null;return o.jsx(Zr,{children:e.thought&&o.jsxs("div",{className:"pl-xs flex gap-3",children:[o.jsx(F,{color:"light",variant:"small",className:"size-4 py-1.5",children:r}),o.jsx(F,{color:"light",variant:"small",className:"py-1.5",children:e.thought})]})})});JAe.displayName="MessageItem";const eIe=I.memo(({task:e,isFinished:t,isPaused:n})=>{const r=e.agent_messages[e.agent_messages.length-1];return o.jsx(Hw,{children:o.jsxs(na,{mode:"sync",initial:!1,children:[e.agent_messages.length>0&&e.agent_messages.map((s,a)=>o.jsx(Zr,{children:o.jsx(JAe,{message:s,task:e})},a)),o.jsx(Zr,{children:o.jsx("div",{children:o.jsx(XAe,{message:e.agent_messages.length>0?r:{action:"working",thought:"",url:"",answer:"",uuid:"",value:""},isFinished:t||e.clarification_status==="STOPPED_TASK",isPaused:n,isPendingClarification:e.clarification_status==="PENDING"})})})]})})});eIe.displayName="ScrollableContent";const tIe=I.memo(({lastMessage:e,taskUuid:t})=>e.form?o.jsx("div",{className:"px-md py-sm ml-7",children:o.jsx(QAe,{form_items:e.form.form_items,taskUuid:t})}):null);tIe.displayName="FormContent";const HL=I.memo(({task:e,isFinished:t,index:n,isMissionControl:r})=>{const s=e.agent_messages[e.agent_messages.length-1],a=s?.form,i=e.uuid,{taskScreenshots:{[i]:l},tasksState:{[i]:{is_paused:c=!1}={}},taskTabs:u}=Hr(),{$t:f}=Z(),m=Nn(),{result:p}=pn(),h=d.useMemo(()=>u?.some(E=>E.taskUuid===i)??!1,[u,i]),g=d.useMemo(()=>l?[{media_item:{thumbnail:l,image:l,name:f({defaultMessage:"Screenshot",id:"9a+SKtXKhe"})},task_uuid:i,message_uuid:""}]:ce,[f,l,i]),y=d.useMemo(()=>o.jsx(ol,{domain:e.start_url}),[e.start_url]),x=d.useMemo(()=>e.agent_messages.filter(k=>k.screenshot).map(k=>({media_item:{thumbnail:k.screenshot,image:k.screenshot,name:f({defaultMessage:"Screenshot",id:"9a+SKtXKhe"})},task_uuid:e.uuid,message_uuid:""})),[f,e.uuid,e.agent_messages]),v=d.useMemo(()=>a?ce:e.media&&e.media.length?e.media:x.length?x:g,[a,x,g,e.media]),b=d.useCallback(async E=>{if(!(t&&r&&!h)){if(E.stopPropagation(),t)if(r){if(!h)return}else return;dKt.NEXT_PUBLIC_IS_SIDECAR_BUILD?await m.makeTaskVisible(i):await m.moveThreadToSidecar({activeTaskUuid:i,isMissionControl:r,entryId:p?.backend_uuid,reason:"move-browser-step"})}},[m,i,t,r,h,p?.backend_uuid]),_=r&&t,w=e.clarification_status,C=E=>{switch(E){case"UPDATED_TASK":return f({defaultMessage:"Updated per your clarification",id:"UmUpwNXXy9"});case"STOPPED_TASK":return f({defaultMessage:"Stopped per your clarification",id:"Uura7/Ftc2"});default:return""}},S=w&&w!=="PENDING"?o.jsxs(F,{variant:"tinyRegular",className:"gap-xs py-xs text-super flex",children:[o.jsx(de,{icon:Yce,size:"xs"}),o.jsx("span",{className:"text-pretty",children:C(w)})]}):null;return o.jsx(Xx,{favicon:y,title:wU(e.start_url),accessory:h&&_?o.jsx(de,{icon:ba,size:"xs",className:"group-hover/step-card:text-super opacity-60 group-hover/step-card:opacity-100"}):void 0,media:v,description:e.task,descriptionFooter:S,showMedia:!a,onClick:b,className:B("border transition-colors duration-150 hover:!transition-none",h&&"hover:border-super/75 group/step-card cursor-pointer"),isMissionControlSummary:_,children:_?null:a&&s&&!t?o.jsx(tIe,{lastMessage:s,taskUuid:e.uuid}):o.jsx(eIe,{task:e,isFinished:t,isPaused:c})},n)});HL.displayName="TaskStep";const nIe=I.memo(({step:e,isFinished:t,isMissionControl:n})=>o.jsx(fKt,{tasks:e.content.tasks,isMissionControl:n,isFinished:t})),fKt=({tasks:e,isMissionControl:t,isFinished:n})=>t&&n&&e.length>1?o.jsx("div",{className:"-mx-sm",children:o.jsx(sl,{orientation:"horizontal",viewportClassName:"px-sm",showScrollIndicator:!1,children:o.jsxs(z,{className:"gap-sm flex flex-row",children:[e.map((s,a)=>o.jsx("div",{className:"w-3/4 shrink-0",children:o.jsx(HL,{task:s,isFinished:n,index:a,isMissionControl:t})},a)),o.jsx("div",{className:"w-px shrink-0"})]})})}):o.jsx(z,{className:"gap-y-md flex flex-col",children:e.map((s,a)=>o.jsx(HL,{task:s,isFinished:n,index:a,isMissionControl:t},a))});nIe.displayName="BrowserStep";const rIe=I.memo(({disabled:e,onClick:t})=>o.jsx(me,{disabled:e,onClick:t,icon:cp,variant:"common",size:"small"}));rIe.displayName="CardPaginationPrevious";const sIe=I.memo(({disabled:e,onClick:t})=>o.jsx(me,{disabled:e,onClick:t,icon:Xn,variant:"common",size:"small"}));sIe.displayName="CardPaginationNext";const Pun=e=>[...e].sort((t,n)=>{const r=new Date(t.start_date_time||"").getTime(),s=new Date(n.start_date_time||"").getTime();return r-s}),Lun=e=>{if(e.length<=1)return!1;const t=new Date(e[0]?.start_date_time||""),n=new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime();return e.some(r=>{const s=new Date(r.start_date_time||"");return new Date(s.getFullYear(),s.getMonth(),s.getDate()).getTime()!==n})},mKt={"#AC725E":"#79554B","#D06B64":"#E67399","#F83A22":"#D50000","#FA573C":"#F4511E","#FF7537":"#EF6C00","#FFAD46":"#F09300","#42D692":"#009688","#16A765":"#0B8043","#7BD148":"#7CB342","#B3DC6C":"#C0CA33","#FBE983":"#E4C441","#FAD165":"#F6BF26","#92E1C0":"#039BE5","#9FE1E7":"#4285F4","#9FC6E7":"#3F51B5","#4986E7":"#7986CB","#9A9CFF":"#B39DDB","#C2C2C2":"#616161","#CABDBF":"#A79B8E","#CCA6AC":"#AD1457","#F691B2":"#D81B60","#CD74E6":"#8E24AA","#A47AE2":"#7B1FA2"},pKt="#039BE5",aIe=e=>mKt[e.toUpperCase()]??pKt,oIe=e=>{const t=e.replace("#",""),n=parseInt(t.substring(0,2),16),r=parseInt(t.substring(2,4),16),s=parseInt(t.substring(4,6),16),a=m=>{const p=m/255;return p<=.03928?p/12.92:Math.pow((p+.055)/1.055,2.4)},i=a(n),l=a(r),c=a(s),u=.2126*i+.7152*l+.0722*c,f=(Math.max(u,1)+.05)/(Math.min(u,1)+.05);return f>=7?"AAA":f>=4.5?"AA":f>=3?"A":"Fail"},hKt=e=>typeof e=="string"?{email:e,response_status:void 0,photo_url:void 0,display_name:void 0}:{email:e.email,response_status:e.response_status,photo_url:e.photo_url,display_name:e.display_name},jie=e=>e?e.map(hKt):[],gKt=e=>{if(!e||e.trim()==="")return"";const t=e.trim().split(/\s+/);return Fk(t)?t[0].charAt(0).toUpperCase():((t[0]?.charAt(0)??"")+(t[t.length-1]?.charAt(0)??"")).toUpperCase()},rz=(e,t)=>t.formatDate(e,{timeZoneName:"short"}).split(", ").pop()||"",yKt=()=>Intl.DateTimeFormat().resolvedOptions().timeZone.split("/").pop()?.replace(/_/g," ")||"",xKt=(e,t)=>t.formatDate(e,{timeZoneName:"shortOffset"}).split(", ").pop()||"",vKt=()=>{const{formatDate:e}=Z(),t=d.useCallback((s,a=!0)=>e(s,{month:"long",day:"numeric",...a&&{year:"numeric"}}),[e]),n=d.useCallback(s=>e(s,{weekday:"long",month:"long",day:"numeric"}),[e]),r=d.useCallback(s=>e(s,{weekday:"short",month:"long",day:"numeric"}),[e]);return d.useMemo(()=>({formatEventDate:t,formatEventDay:n,formatEventDayShort:r}),[t,n,r])},o1=I.memo(({startDate:e,endDate:t,isAllDay:n,showDate:r=!1,includeYear:s=!0})=>{const{$t:a}=Z();if(n){const i=a({defaultMessage:"All day",id:"Vob6h4Xsl3"});return r?o.jsxs(o.Fragment,{children:[o.jsx(cN,{from:e,to:e,...s&&{year:"numeric"},month:"long",day:"numeric"}),", ",i]}):o.jsx(o.Fragment,{children:i})}return r?o.jsx(cN,{from:e,to:t,...s&&{year:"numeric"},month:"long",day:"numeric",hour:"numeric",minute:"2-digit",timeZoneName:"short"}):o.jsx(cN,{from:e,to:t,hour:"numeric",minute:"2-digit",timeZoneName:"short"})});o1.displayName="EventTimeRange";const rf=I.memo(({oldText:e,newText:t,isDeletion:n=!1})=>!e&&!t?null:n&&(e||t)?o.jsx(F,{as:"span",color:"ultraLight",className:"line-through",children:e||t}):!e&&t?o.jsx(F,{as:"span",color:"default",className:"bg-[#facc15]/25",children:t}):!t&&e?e:e&&t&&e===t?o.jsx(F,{as:"span",color:"default",children:e}):e&&t&&e!==t?o.jsxs(o.Fragment,{children:[o.jsx(F,{as:"span",color:"ultraLight",className:"line-through",children:e}),"",o.jsx(F,{as:"span",color:"default",className:"bg-[#facc15]/25",children:t})]}):null);rf.displayName="DiffedText";const Po=I.memo(({children:e,icon:t,alignCenter:n=!1,iconSize:r="sm"})=>o.jsxs("div",{className:B("flex flex-row items-start gap-3",{"items-center":n}),children:[o.jsx(de,{icon:t,size:r,className:"mt-px shrink-0"}),o.jsx("div",{className:"min-w-0 flex-1",children:e})]}));Po.displayName="EventAttribute";const iIe=I.memo(({attendee:e,showRsvp:t=!1})=>o.jsxs("div",{className:"relative w-5",children:[e.photo_url?o.jsx(Wt,{fullBleed:!0,className:"absolute inset-0 mt-px size-5 overflow-hidden !rounded-full",children:o.jsx("img",{src:e.photo_url,className:"size-full object-cover",alt:e.display_name||e.email||""})}):o.jsx(z,{variant:"subtle",className:"absolute inset-0 mt-px flex size-5 items-center justify-center rounded-full",children:o.jsx(F,{variant:"tinyMono",color:"light",className:"translate-y-half",children:gKt(e.display_name||e.email||"")})}),t&&(e.response_status==="accepted"||e.response_status==="declined")&&o.jsx(z,{variant:"background",className:"p-two absolute bottom-[-4px] right-[-4px] z-10 rounded-full",children:o.jsx(F,{color:e.response_status==="accepted"?"super":e.response_status==="declined"?"red":"light",className:B("bg-base border-subtlest flex size-3 items-center justify-center rounded-full border",{"!bg-super/20 !border-super/10 border":e.response_status==="accepted","!bg-negative/20 !border-negative/10":e.response_status==="declined"}),children:o.jsx(de,{icon:e.response_status==="accepted"?dr:e.response_status==="declined"?kt:Kle,size:"2xs",stroke:2.125})})})]}));iIe.displayName="AttendeeAvatar";const lIe=I.memo(({attendees:e,newAttendees:t,truncateAttendees:n,showRsvp:r=!1,isDeletion:s=!1})=>{const[a,i]=d.useState(!1),c=jie(e).filter(g=>!g.email?.includes("@resource.calendar.google"));let u;t&&(u=jie(t).filter(y=>!y.email?.includes("@resource.calendar.google")));const f=(g,y)=>{const x=g?.map(v=>{let b;return y?b=y?.find(_=>_.email===v.email)??{email:" ",response_status:void 0,photo_url:void 0,display_name:" "}:b=v,{oldValue:v,newValue:b}})??[];return y&&(g?y.filter(b=>!g.some(_=>_.email===b.email)):y).forEach(b=>{x.push({oldValue:void 0,newValue:b})}),x},m=u||c,p=f(c,u),h=d.useCallback(()=>i(!a),[a]);return o.jsxs("div",{className:"min-w-0",children:[(()=>{const g=m?.length??0;return o.jsx(F,{variant:"small",color:g>0?"default":"light",className:s?"line-through":"",children:g>0?`${g} ${g===1?"Guest":"Guests"}`:"No Guests"})})(),p&&p.length>0&&o.jsxs("div",{className:"gap-sm my-sm flex flex-col",children:[p.slice(0,n&&!a?n:void 0).map(g=>o.jsxs("div",{className:"gap-sm flex flex-row",children:[o.jsx(iIe,{attendee:g.newValue,showRsvp:r}),o.jsx(F,{variant:"small",color:"default",className:"line-clamp-1 text-ellipsis break-all",children:o.jsx(rf,{oldText:g.oldValue?.display_name||g.oldValue?.email,newText:g.newValue?.display_name||g.newValue?.email,isDeletion:s})})]},g.oldValue?.email??g.newValue?.email)),n&&p.length>n&&o.jsx(F,{as:"button",variant:"small",color:"default",className:"w-fit text-left hover:underline",onClick:h,children:a?"Show less":"Show all"})]})]})});lIe.displayName="AttendeeList";const cIe=I.memo(({videoEntryPoint:e,isDeletion:t})=>{const{$t:n}=Z(),r=d.useCallback(()=>window.open(e?.uri,"_blank","noopener,noreferrer"),[e?.uri]);return!e||t?null:o.jsx(Po,{icon:BO,alignCenter:!0,children:o.jsx(me,{variant:"primary",pill:!0,text:n({defaultMessage:"Join Meeting",id:"HK25u5mIfw"}),onClick:r,size:"small"})})});cIe.displayName="EventVideoEntry";const uIe=I.memo(({location:e,newLocation:t,isDeletion:n=!1})=>e?o.jsx(Po,{icon:qb,children:o.jsx(F,{variant:"small",color:"light",className:"line-clamp-1",children:o.jsx(rf,{oldText:e,newText:t,isDeletion:n})})}):null);uIe.displayName="EventLocation";const dIe=I.memo(({description:e,newDescription:t,isDeletion:n=!1})=>{const[r,s]=d.useState(!1),a=d.useCallback(()=>s(!r),[r]);return e?o.jsx(Po,{icon:Qce,children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"small",className:B("break-words",{"line-clamp-2":!r}),children:o.jsx(rf,{oldText:e,newText:t,isDeletion:n})}),e.length>150&&o.jsx(F,{as:"button",variant:"small",color:"default",className:"mt-1 w-fit text-left hover:underline",onClick:a,children:r?"Show less":"Show more"})]})}):null});dIe.displayName="EventDescription";const fIe=I.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l=!1})=>{const c=Z(),u=s&&n?n:e,f=s&&r?r:t,m=s?s.is_all_day||!1:a;return o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(F,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(rf,{oldText:i(e),newText:s&&n?i(n):void 0,isDeletion:l})}),o.jsx(F,{variant:"small",color:"light",children:o.jsxs("span",{className:l?"line-through":"",children:[o.jsx(o1,{startDate:u,endDate:f,isAllDay:m}),!m&&` (${rz(u,c)})`]})})]})});fIe.displayName="SingleDayDisplay";const mIe=I.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,formatEventDayShort:a,isDeletion:i=!1})=>{const l=Z(),c=s&&r?r:t,u=s&&s.is_all_day||!1;return o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(F,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(rf,{oldText:a(e),newText:s&&n?a(n):void 0,isDeletion:i})}),o.jsx(F,{variant:"small",color:"light",children:o.jsx("span",{className:i?"line-through":"",children:!s?.is_all_day&&o.jsx(XR,{value:s&&n?n:e,hour:"numeric",minute:"2-digit"})})})]}),o.jsx(F,{color:"light",className:"pt-two flex justify-center",children:o.jsx(de,{icon:Kk,size:"sm"})}),o.jsxs("div",{className:"gap-two flex flex-col",children:[o.jsx(F,{variant:"smallBold",color:"default",className:"line-clamp-1",children:o.jsx(rf,{oldText:a(t),newText:s&&r?a(r):void 0,isDeletion:i})}),o.jsx(F,{variant:"small",color:"light",children:o.jsx("span",{className:i?"line-through":"",children:!u&&o.jsxs(o.Fragment,{children:[o.jsx(XR,{value:c,hour:"numeric",minute:"2-digit"}),` (${rz(c,l)})`]})})})]})]})});mIe.displayName="MultiDayDisplay";const pIe=I.memo(({startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l=!1})=>{const c=FQe(e,t);return o.jsx(Po,{icon:mp,children:o.jsxs("div",{className:"gap-sm flex",children:[c&&o.jsx(fIe,{startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,is_all_day:a,formatEventDayShort:i,isDeletion:l}),!c&&o.jsx(mIe,{startDate:e,endDate:t,newStartDateObj:n,newEndDateObj:r,newEvent:s,formatEventDayShort:i,isDeletion:l})]})})});pIe.displayName="EventDateDisplay";const bKt=I.memo(({startDate:e,newStartDate:t})=>{const n=Z();if(!e)return null;const r=t||e,s=xKt(r,n),a=yKt(),i=rz(r,n);return o.jsx(Po,{icon:of,alignCenter:!0,children:o.jsxs("div",{children:[o.jsxs(F,{as:"span",variant:"small",color:"light",children:[s," "]}),o.jsx(F,{as:"span",variant:"small",children:a}),o.jsxs(F,{as:"span",variant:"small",color:"light",children:[" ","(",i,")"]})]})})});bKt.displayName="EventTimezone";const hIe=I.memo(({event:e,newEvent:t,className:n,truncateAttendees:r,showRsvp:s=!1,action:a})=>{const{start_date_time:i,end_date_time:l,attendees:c,description:u,location:f,conference_data:m,is_all_day:p}=e,h=a==="DELETE",{formatEventDayShort:g}=vKt(),y=d.useMemo(()=>new Date(i||""),[i]),x=d.useMemo(()=>new Date(l||""),[l]),v=d.useMemo(()=>{if(t&&t.start_date_time)return new Date(t.start_date_time||"")},[t]),b=d.useMemo(()=>{if(t&&t.end_date_time)return new Date(t.end_date_time||"")},[t]),_=m?.entry_points?.find(w=>w.entry_point_type==="video");return o.jsxs("div",{className:B("gap-md flex h-full flex-col",n),children:[o.jsx(pIe,{startDate:y,endDate:x,newStartDateObj:v,newEndDateObj:b,newEvent:t,is_all_day:p??!1,formatEventDayShort:g,isDeletion:h}),o.jsx(cIe,{videoEntryPoint:_,isDeletion:h}),o.jsx(uIe,{location:f,newLocation:t?.location,isDeletion:h}),o.jsx(dIe,{description:u,newDescription:t?.description,isDeletion:h}),o.jsx(Po,{icon:bu,children:o.jsx(lIe,{attendees:c,newAttendees:t?.attendees,truncateAttendees:r,showRsvp:s,isDeletion:h})})]})});hIe.displayName="EventDetails";const Aie=e=>e?e.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):"",Iie="border-subtler bg-subtler text-foreground focus:border-super !h-9 rounded-lg border px-3 py-1 text-sm focus:outline-none [&::-webkit-calendar-picker-indicator]:hidden [&::-webkit-inner-spin-button]:hidden [&::-webkit-outer-spin-button]:hidden bg-transparent",Rie="data-[state=closed]:border-subtler data-[state=open]:border-super data-[state=open]:hover:border-super !px-3 !h-9 bg-transparent",gIe=d.memo(({startDateTime:e,endDateTime:t,onStartDateChange:n,onEndDateChange:r,onStartTimeChange:s,onEndTimeChange:a})=>{const{$t:i}=Z(),l=d.useMemo(()=>e?new Date(e):void 0,[e]),c=d.useMemo(()=>t?new Date(t):void 0,[t]),u=d.useCallback(x=>{if(!x)return;const v=new Date(l||"");if(!isNaN(v.getTime())){if(v.setDate(x.getDate()),v.setMonth(x.getMonth()),v.setFullYear(x.getFullYear()),c&&c.getTime()<v.getTime()){const b=new Date(v.getTime());b.setHours(c.getHours()),b.setMinutes(c.getMinutes()),b.setSeconds(c.getSeconds()),r(b)}n(v)}},[l,c,n,r]),f=d.useCallback(x=>{if(!x)return;const v=new Date(c||"");isNaN(v.getTime())||(v.setDate(x.getDate()),v.setMonth(x.getMonth()),v.setFullYear(x.getFullYear()),l&&v<l&&n(v),r(v))},[l,c,n,r]),m=d.useCallback(x=>{s(x)},[s]),p=d.useCallback(x=>{if(!l)return;const[v,b]=x.split(":").map(Number);if(v===void 0||b===void 0)return;const _=new Date(l);isNaN(_.getTime())||(_.setHours(v),_.setMinutes(b),!isNaN(_.getTime())&&(c&&_.getTime()>c.getTime()&&r(_),n(_)))},[l,c,n,r]),h=d.useCallback(x=>{a(x)},[a]),g=d.useCallback(x=>{if(!c)return;const[v,b]=x.split(":").map(Number);if(v===void 0||b===void 0)return;const _=new Date(c);isNaN(_.getTime())||(_.setHours(v),_.setMinutes(b),!isNaN(_.getTime())&&(l&&_.getTime()<l.getTime()&&n(_),r(_)))},[l,c,n,r]),y=d.useCallback(x=>x.toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),[]);return o.jsxs("div",{className:"flex flex-col items-center gap-2 md:flex-row",children:[o.jsxs("div",{className:"flex w-full items-center gap-2",children:[o.jsx(Ek,{buttonClassName:Rie,value:l,onChange:u,placeholder:i({defaultMessage:"Select start date",id:"oUUhTXC2Mx"}),formatDate:y,showIcon:!1}),o.jsx("input",{type:"time",value:Aie(l),onChange:x=>m(x.target.value),onBlur:x=>p(x.target.value),className:Iie})]}),o.jsx("span",{className:"text-quieter mx-1 text-sm",children:i({defaultMessage:"to",id:"NLeFGnA9M4"})}),o.jsxs("div",{className:"flex w-full items-center gap-2",children:[o.jsx("input",{type:"time",value:Aie(c),onChange:x=>h(x.target.value),onBlur:x=>g(x.target.value),className:Iie}),o.jsx(Ek,{buttonClassName:Rie,value:c,onChange:f,placeholder:i({defaultMessage:"Select end date",id:"0A4/NpHFx/"}),formatDate:y,showIcon:!1})]})]})});gIe.displayName="CalendarTimeEditable";const kk=I.memo(({id:e,label:t,extraCSS:n,options:r,activeKey:s,onOptionChange:a,isDisabled:i=!1,testId:l,defaultOption:c,icon:u,...f})=>{c&&(r=[{label:c,value:""}].concat(r||[]));const m=r||[],p=h=>{a(c&&h===""?null:h)};return o.jsxs("div",{children:[o.jsx(y_,{withMargin:!1,label:t}),o.jsx(F,{variant:"small",className:t&&"mt-sm",children:o.jsxs("div",{className:"relative flex items-center",children:[o.jsx("select",{"data-testid":l,id:e,onChange:h=>p(h.target.value),value:s??"",className:B("border-subtler bg-base p-sm pr-lg outline-super ring-subtler dark:border-subtle dark:bg-subtler dark:ring-subtle w-full appearance-none rounded border transition duration-300 focus:outline-none",{"cursor-pointer hover:ring-1":!i,"pl-lg":u},n),disabled:i,...f,children:m.map(h=>o.jsx("option",{value:h.value,className:"pl-sm",children:h.label},h.value))}),u&&o.jsx("div",{className:"left-sm absolute",children:u}),o.jsx(F,{color:"light",variant:"small",className:"right-sm pointer-events-none absolute",children:o.jsx(de,{icon:Wn,size:"md"})})]})})]})});kk.displayName="Select";const W2={frequency:"WEEKLY",endType:"never",interval:"1"},_Kt=["DAILY","WEEKLY","MONTHLY","YEARLY"],$S=Qe({day:{id:"ruG8dNqKt0",defaultMessage:"{count, plural, one {Day} other {Days}}"},week:{id:"cR0w/cReH+",defaultMessage:"{count, plural, one {Week} other {Weeks}}"},month:{id:"svowrjAWNi",defaultMessage:"{count, plural, one {Month} other {Months}}"},year:{id:"OPfd4WaWUE",defaultMessage:"{count, plural, one {Year} other {Years}}"}}),wKt=e=>[{label:e({defaultMessage:"Daily",id:"zxvhnETmn2"}),value:"DAILY"},{label:e({defaultMessage:"Weekly",id:"/clOBUs/wZ"}),value:"WEEKLY"},{label:e({defaultMessage:"Monthly",id:"wYsv4ZHu+B"}),value:"MONTHLY"},{label:e({defaultMessage:"Yearly",id:"dqD39hnoA/"}),value:"YEARLY"}],CKt=e=>[{label:e({defaultMessage:"Never",id:"du1laW45Py"}),value:"never"},{label:e({defaultMessage:"After",id:"4X+U8o+ztO"}),value:"after"}],SKt=e=>[{label:e({defaultMessage:"Mo",id:"EIk6EqFZZN"}),value:"MO"},{label:e({defaultMessage:"Tu",id:"dswupo3WZd"}),value:"TU"},{label:e({defaultMessage:"We",id:"p02wWlGXK3"}),value:"WE"},{label:e({defaultMessage:"Th",id:"Ee4Ne0CnpN"}),value:"TH"},{label:e({defaultMessage:"Fr",id:"pCVXo8kVuW"}),value:"FR"},{label:e({defaultMessage:"Sa",id:"QJaSgEWRy1"}),value:"SA"},{label:e({defaultMessage:"Su",id:"n4xx4rvq9+"}),value:"SU"}],EKt=e=>{try{let t=`RRULE:FREQ=${e.frequency}`;return e.interval&&e.interval!=="1"&&(t+=`;INTERVAL=${e.interval}`),e.byDay&&e.byDay.length>0&&(t+=`;BYDAY=${e.byDay.join(",")}`),e.endType==="after"&&e.count&&(t+=`;COUNT=${e.count}`),t}catch{return null}},MKt=e=>{try{if(!e.startsWith("RRULE:"))return null;const n=e.substring(6).split(";"),r=W2;for(const s of n){const[a,i]=s.split("=");switch(a){case"FREQ":_Kt.includes(i)&&(r.frequency=i);break;case"INTERVAL":r.interval=i;break;case"BYDAY":r.byDay=i?.split(",");break;case"COUNT":r.count=i,r.endType="after";break}}return r}catch{return null}},kKt=e=>{if(!e.frequency||e.frequency==="WEEKLY"&&(!e.byDay||e.byDay.length===0))return!1;if(e.interval){const t=parseInt(e.interval,10);if(isNaN(t)||t<1)return!1}if(e.endType==="after"){if(!e.count)return!1;const t=parseInt(e.count,10);if(isNaN(t)||t<1)return!1}return!0},TKt=(e,t)=>({MO:t({defaultMessage:"Mon",id:"T8JZHei06V"}),TU:t({defaultMessage:"Tue",id:"C4ENlvYIEr"}),WE:t({defaultMessage:"Wed",id:"2NqUghZFW1"}),TH:t({defaultMessage:"Thu",id:"FC0AP4JIua"}),FR:t({defaultMessage:"Fri",id:"hFYE2MSlqH"}),SA:t({defaultMessage:"Sat",id:"3Hv4FbI9Kl"}),SU:t({defaultMessage:"Sun",id:"1Aday2s3it"})})[e]||e,yIe=d.memo(({value:e,onChange:t})=>{const{$t:n}=Z(),[r,s]=d.useState(!1),[a,i]=d.useState(W2);d.useEffect(()=>{if(Js(e)&&!r){const x=MKt(e[0]);x&&(i(x),s(!0))}},[e,r]);const l=d.useMemo(()=>wKt(n),[n]),c=d.useMemo(()=>CKt(n),[n]),u=d.useMemo(()=>SKt(n),[n]),f=parseInt(a.interval||"1",10),m={DAILY:n($S.day,{count:f}),WEEKLY:n($S.week,{count:f}),MONTHLY:n($S.month,{count:f}),YEARLY:n($S.year,{count:f})},p=x=>{if(kKt(x)){const v=EKt(x);v&&t([v])}},h=x=>{const v={...a,...x};i(v),p(v)},g=x=>{const v=a.byDay||[],b=v.includes(x)?v.filter(w=>w!==x):[...v,x],_={...a,byDay:b};i(_),p(_)},y=()=>{s(!1),i(W2),t([])};return o.jsxs(z,{className:"space-y-1 pl-1",children:[!r&&e.length===0&&o.jsx(z,{className:"flex items-center justify-between pl-1",children:o.jsx(Me,{onClick:()=>{s(!0),i(W2)},noPadding:!0,variant:"noBackground",text:n({defaultMessage:"Repeat",id:"tw5j2+ZRIB"}),leadingComponent:o.jsx(ar,{size:16}),size:"tiny"})}),r&&o.jsxs(z,{className:"flex flex-col gap-2 rounded",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("span",{className:"text-quieter whitespace-nowrap pr-1 text-xs",children:n({defaultMessage:"Every",id:"JE2YVbgaBx"})}),o.jsx(Xr,{pill:!1,isMobileUserAgent:!1,min:1,max:99,type:"number",value:a.interval?.toString()||"1",onChange:x=>h({interval:x}),className:"focus:!border-super !w-16 rounded-lg !px-3 focus:!ring-transparent"}),o.jsx(kk,{id:"frequency-select",activeKey:a.frequency||"WEEKLY",options:l.map(x=>({...x,label:m[x.value]})),onOptionChange:x=>h({frequency:x}),extraCSS:"rounded-lg"}),o.jsx("span",{className:"text-quieter whitespace-nowrap pl-2 pr-1 text-xs",children:n({defaultMessage:"Ends",id:"04xGLEkMMo"})}),o.jsx(kk,{id:"end-type-select",activeKey:a.endType||"never",options:c,onOptionChange:x=>h({endType:x,count:x==="after"?"1":void 0}),extraCSS:"rounded-lg w-full"}),a.endType==="after"&&o.jsxs(o.Fragment,{children:[o.jsx(Xr,{pill:!1,isMobileUserAgent:!1,min:1,max:99,type:"number",value:a.count||"1",onChange:x=>h({count:x}),className:"focus:!border-super !w-16 rounded-lg !px-3 focus:!ring-transparent"}),o.jsx("span",{className:"text-quieter pr-sm whitespace-nowrap text-xs",children:a.count==="1"?n({defaultMessage:"time",id:"nTBG1bRQLC"}):n({defaultMessage:"times",id:"KSQJ7UVwln"})})]}),o.jsx(me,{onClick:y,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),variant:"common",extraCSS:"px-3 py-1 text-xs ml-auto"})]}),a.frequency==="WEEKLY"&&o.jsxs(z,{className:"flex items-center gap-2",children:[o.jsx("label",{className:"text-quieter w-9 whitespace-nowrap text-xs",children:n({defaultMessage:"On",id:"Zh+5A6yahu"})}),o.jsx("div",{className:"flex gap-2",children:u.map(x=>o.jsx(me,{onClick:()=>g(x.value),text:x.label,size:"tiny",pill:!0,variant:a.byDay?.includes(x.value)?"inverted":"common",ariaLabel:n({defaultMessage:"Toggle {day}",id:"i/JqE0BlGw"},{day:TKt(x.value,n)}),noPadding:!0,extraCSS:"w-8 h-8 !p-0 !text-2xs"},x.value))})]})]})]})});yIe.displayName="RecurrenceEditor";const xIe=({contact:e})=>o.jsxs("div",{className:"flex items-center gap-2",children:[e.image&&o.jsx("img",{src:e.image,alt:e.name,className:"size-4 rounded-full",referrerPolicy:"no-referrer"}),o.jsx("span",{className:"text-sm",children:e.name}),e.email&&o.jsx("span",{className:"text-quieter text-sm",children:e.email})]}),NKt=async({query:e,limit:t=10,reason:n})=>{try{const r=await re.GET("/rest/autosuggest/contacts/list-autosuggest",n,{timeoutMs:Pe(),params:{query:{query:e,limit:t}}});if(r.error)throw new we("API_CLIENTS_ERROR",{message:"Failed to get contacts autosuggestions",cause:r.error});return r.data?.results??[]}catch(r){return ne.error(r),[]}},jKt=({query:e,limit:t=10,reason:n})=>Ue({queryKey:["contacts",e,t],queryFn:()=>NKt({query:e,limit:t,reason:n}),enabled:e?.trim().length>0,staleTime:2*60*1e3,gcTime:10*60*1e3,placeholderData:r=>r});function vIe({reason:e,limit:t=10}){const[n,r]=d.useState(""),{data:s}=jKt({query:n,limit:t,reason:e}),a=d.useMemo(()=>gs(c=>r(c),300),[]);d.useEffect(()=>()=>{a.cancel()},[a]);const i=d.useCallback(c=>{c.trim()===""?(a.cancel(),r("")):a(c)},[a]);return{suggestions:d.useMemo(()=>s?.filter(c=>c.email!==null).map(c=>({key:c.email,value:c.email,item:c})),[s]),handleDraftChange:i}}const bIe=I.memo(({label:e,onDelete:t,onClick:n,testId:r,selected:s=!1,disabled:a=!1,title:i,shouldAvoidFocusShift:l=!1,deleteIcon:c=kt})=>{const{$t:u}=Z(),f=d.useCallback(g=>{g.stopPropagation(),t?.()},[t]),m=d.useCallback(g=>{g.stopPropagation(),n?.({shiftKey:g.shiftKey,metaKey:g.metaKey,ctrlKey:g.ctrlKey})},[n]),p=t&&!a,h=d.useCallback(g=>{g.stopPropagation(),l&&g.preventDefault()},[l]);return o.jsxs("span",{className:"relative flex h-6 max-w-full",children:[o.jsx(z,{className:B("h-full min-w-0 flex-1 rounded-lg border px-2 text-sm",{"pr-[24px]":p},{"cursor-default":a}),variant:s?"superBorder":"subtler","data-test-id":r,onClick:a?void 0:m,onMouseDown:h,as:"button",bgHover:a?void 0:"subtle",title:i,children:o.jsx(F,{variant:"small",className:"block truncate",children:e})}),p&&o.jsx(z,{variant:"transparent",onClick:f,tabIndex:0,"aria-label":u({defaultMessage:"Remove",id:"G/yZLul6P1"}),as:"button",bgHover:"subtle",className:"top-three right-three absolute rounded-md p-0.5",children:o.jsx(de,{icon:c,size:"xs"})})]})});bIe.displayName="Chip";var Pie=1,AKt=.9,IKt=.8,RKt=.17,MR=.1,kR=.999,PKt=.9999,LKt=.99,OKt=/[\\\/_+.#"@\[\(\{&]/,DKt=/[\\\/_+.#"@\[\(\{&]/g,FKt=/[\s-]/,_Ie=/[\s-]/g;function zL(e,t,n,r,s,a,i){if(a===t.length)return s===e.length?Pie:LKt;var l=`${s},${a}`;if(i[l]!==void 0)return i[l];for(var c=r.charAt(a),u=n.indexOf(c,s),f=0,m,p,h,g;u>=0;)m=zL(e,t,n,r,u+1,a+1,i),m>f&&(u===s?m*=Pie:OKt.test(e.charAt(u-1))?(m*=IKt,h=e.slice(s,u-1).match(DKt),h&&s>0&&(m*=Math.pow(kR,h.length))):FKt.test(e.charAt(u-1))?(m*=AKt,g=e.slice(s,u-1).match(_Ie),g&&s>0&&(m*=Math.pow(kR,g.length))):(m*=RKt,s>0&&(m*=Math.pow(kR,u-s))),e.charAt(u)!==t.charAt(a)&&(m*=PKt)),(m<MR&&n.charAt(u-1)===r.charAt(a+1)||r.charAt(a+1)===r.charAt(a)&&n.charAt(u-1)!==r.charAt(a))&&(p=zL(e,t,n,r,u+1,a+2,i),p*MR>m&&(m=p*MR)),m>f&&(f=m),u=n.indexOf(c,u+1);return i[l]=f,f}function Lie(e){return e.toLowerCase().replace(_Ie," ")}function UKt(e,t,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,zL(e,t,Lie(e),Lie(t),0,0,{})}function BKt(e){const t=$Kt(e),n=d.forwardRef((r,s)=>{const{children:a,...i}=r,l=d.Children.toArray(a),c=l.find(WKt);if(c){const u=c.props.children,f=l.map(m=>m===c?d.Children.count(u)>1?d.Children.only(null):d.isValidElement(u)?u.props.children:null:m);return o.jsx(t,{...i,ref:s,children:d.isValidElement(u)?d.cloneElement(u,void 0,f):null})}return o.jsx(t,{...i,ref:s,children:a})});return n.displayName=`${e}.Slot`,n}function $Kt(e){const t=d.forwardRef((n,r)=>{const{children:s,...a}=n;if(d.isValidElement(s)){const i=zKt(s),l=HKt(a,s.props);return s.type!==d.Fragment&&(l.ref=r?uc(r,i):i),d.cloneElement(s,l)}return d.Children.count(s)>1?d.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var VKt=Symbol("radix.slottable");function WKt(e){return d.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===VKt}function HKt(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...l)=>{a(...l),s(...l)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function zKt(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var GKt=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],Ef=GKt.reduce((e,t)=>{const n=BKt(`Primitive.${t}`),r=d.forwardRef((s,a)=>{const{asChild:i,...l}=s,c=i?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),o.jsx(c,{...l,ref:a})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),Hv='[cmdk-group=""]',TR='[cmdk-group-items=""]',qKt='[cmdk-group-heading=""]',wIe='[cmdk-item=""]',Oie=`${wIe}:not([aria-disabled="true"])`,GL="cmdk-item-select",jh="data-value",KKt=(e,t,n)=>UKt(e,t,n),CIe=d.createContext(void 0),zw=()=>d.useContext(CIe),SIe=d.createContext(void 0),sz=()=>d.useContext(SIe),EIe=d.createContext(void 0),MIe=d.forwardRef((e,t)=>{let n=Ah(()=>{var W,Q;return{search:"",value:(Q=(W=e.value)!=null?W:e.defaultValue)!=null?Q:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=Ah(()=>new Set),s=Ah(()=>new Map),a=Ah(()=>new Map),i=Ah(()=>new Set),l=kIe(e),{label:c,children:u,value:f,onValueChange:m,filter:p,shouldFilter:h,loop:g,disablePointerSelection:y=!1,vimBindings:x=!0,...v}=e,b=fo(),_=fo(),w=fo(),C=d.useRef(null),S=aYt();ip(()=>{if(f!==void 0){let W=f.trim();n.current.value=W,E.emit()}},[f]),ip(()=>{S(6,D)},[]);let E=d.useMemo(()=>({subscribe:W=>(i.current.add(W),()=>i.current.delete(W)),snapshot:()=>n.current,setState:(W,Q,q)=>{var H,K,G,ee;if(!Object.is(n.current[W],Q)){if(n.current[W]=Q,W==="search")O(),j(),S(1,R);else if(W==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let Y=document.getElementById(w);Y?Y.focus():(H=document.getElementById(b))==null||H.focus()}if(S(7,()=>{var Y;n.current.selectedItemId=(Y=P())==null?void 0:Y.id,E.emit()}),q||S(5,D),((K=l.current)==null?void 0:K.value)!==void 0){let Y=Q??"";(ee=(G=l.current).onValueChange)==null||ee.call(G,Y);return}}E.emit()}},emit:()=>{i.current.forEach(W=>W())}}),[]),k=d.useMemo(()=>({value:(W,Q,q)=>{var H;Q!==((H=a.current.get(W))==null?void 0:H.value)&&(a.current.set(W,{value:Q,keywords:q}),n.current.filtered.items.set(W,M(Q,q)),S(2,()=>{j(),E.emit()}))},item:(W,Q)=>(r.current.add(W),Q&&(s.current.has(Q)?s.current.get(Q).add(W):s.current.set(Q,new Set([W]))),S(3,()=>{O(),j(),n.current.value||R(),E.emit()}),()=>{a.current.delete(W),r.current.delete(W),n.current.filtered.items.delete(W);let q=P();S(4,()=>{O(),q?.getAttribute("id")===W&&R(),E.emit()})}),group:W=>(s.current.has(W)||s.current.set(W,new Set),()=>{a.current.delete(W),s.current.delete(W)}),filter:()=>l.current.shouldFilter,label:c||e["aria-label"],getDisablePointerSelection:()=>l.current.disablePointerSelection,listId:b,inputId:w,labelId:_,listInnerRef:C}),[]);function M(W,Q){var q,H;let K=(H=(q=l.current)==null?void 0:q.filter)!=null?H:KKt;return W?K(W,n.current.search,Q):0}function j(){if(!n.current.search||l.current.shouldFilter===!1)return;let W=n.current.filtered.items,Q=[];n.current.filtered.groups.forEach(H=>{let K=s.current.get(H),G=0;K.forEach(ee=>{let Y=W.get(ee);G=Math.max(Y,G)}),Q.push([H,G])});let q=C.current;A().sort((H,K)=>{var G,ee;let Y=H.getAttribute("id"),te=K.getAttribute("id");return((G=W.get(te))!=null?G:0)-((ee=W.get(Y))!=null?ee:0)}).forEach(H=>{let K=H.closest(TR);K?K.appendChild(H.parentElement===K?H:H.closest(`${TR} > *`)):q.appendChild(H.parentElement===q?H:H.closest(`${TR} > *`))}),Q.sort((H,K)=>K[1]-H[1]).forEach(H=>{var K;let G=(K=C.current)==null?void 0:K.querySelector(`${Hv}[${jh}="${encodeURIComponent(H[0])}"]`);G?.parentElement.appendChild(G)})}function R(){let W=A().find(q=>q.getAttribute("aria-disabled")!=="true"),Q=W?.getAttribute(jh);E.setState("value",Q||void 0)}function O(){var W,Q,q,H;if(!n.current.search||l.current.shouldFilter===!1){n.current.filtered.count=r.current.size;return}n.current.filtered.groups=new Set;let K=0;for(let G of r.current){let ee=(Q=(W=a.current.get(G))==null?void 0:W.value)!=null?Q:"",Y=(H=(q=a.current.get(G))==null?void 0:q.keywords)!=null?H:[],te=M(ee,Y);n.current.filtered.items.set(G,te),te>0&&K++}for(let[G,ee]of s.current)for(let Y of ee)if(n.current.filtered.items.get(Y)>0){n.current.filtered.groups.add(G);break}n.current.filtered.count=K}function D(){var W,Q,q;let H=P();H&&(((W=H.parentElement)==null?void 0:W.firstChild)===H&&((q=(Q=H.closest(Hv))==null?void 0:Q.querySelector(qKt))==null||q.scrollIntoView({block:"nearest"})),H.scrollIntoView({block:"nearest"}))}function P(){var W;return(W=C.current)==null?void 0:W.querySelector(`${wIe}[aria-selected="true"]`)}function A(){var W;return Array.from(((W=C.current)==null?void 0:W.querySelectorAll(Oie))||[])}function T(W){let Q=A()[W];Q&&E.setState("value",Q.getAttribute(jh))}function N(W){var Q;let q=P(),H=A(),K=H.findIndex(ee=>ee===q),G=H[K+W];(Q=l.current)!=null&&Q.loop&&(G=K+W<0?H[H.length-1]:K+W===H.length?H[0]:H[K+W]),G&&E.setState("value",G.getAttribute(jh))}function L(W){let Q=P(),q=Q?.closest(Hv),H;for(;q&&!H;)q=W>0?rYt(q,Hv):sYt(q,Hv),H=q?.querySelector(Oie);H?E.setState("value",H.getAttribute(jh)):N(W)}let U=()=>T(A().length-1),$=W=>{W.preventDefault(),W.metaKey?U():W.altKey?L(1):N(1)},V=W=>{W.preventDefault(),W.metaKey?T(0):W.altKey?L(-1):N(-1)};return d.createElement(Ef.div,{ref:t,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:W=>{var Q;(Q=v.onKeyDown)==null||Q.call(v,W);let q=W.nativeEvent.isComposing||W.keyCode===229;if(!(W.defaultPrevented||q))switch(W.key){case"n":case"j":{x&&W.ctrlKey&&$(W);break}case"ArrowDown":{$(W);break}case"p":case"k":{x&&W.ctrlKey&&V(W);break}case"ArrowUp":{V(W);break}case"Home":{W.preventDefault(),T(0);break}case"End":{W.preventDefault(),U();break}case"Enter":{W.preventDefault();let H=P();if(H){let K=new Event(GL);H.dispatchEvent(K)}}}}},d.createElement("label",{"cmdk-label":"",htmlFor:k.inputId,id:k.labelId,style:iYt},c),H4(e,W=>d.createElement(SIe.Provider,{value:E},d.createElement(CIe.Provider,{value:k},W))))}),YKt=d.forwardRef((e,t)=>{var n,r;let s=fo(),a=d.useRef(null),i=d.useContext(EIe),l=zw(),c=kIe(e),u=(r=(n=c.current)==null?void 0:n.forceMount)!=null?r:i?.forceMount;ip(()=>{if(!u)return l.item(s,i?.id)},[u]);let f=TIe(s,a,[e.value,e.children,a],e.keywords),m=sz(),p=sf(S=>S.value&&S.value===f.current),h=sf(S=>u||l.filter()===!1?!0:S.search?S.filtered.items.get(s)>0:!0);d.useEffect(()=>{let S=a.current;if(!(!S||e.disabled))return S.addEventListener(GL,g),()=>S.removeEventListener(GL,g)},[h,e.onSelect,e.disabled]);function g(){var S,E;y(),(E=(S=c.current).onSelect)==null||E.call(S,f.current)}function y(){m.setState("value",f.current,!0)}if(!h)return null;let{disabled:x,value:v,onSelect:b,forceMount:_,keywords:w,...C}=e;return d.createElement(Ef.div,{ref:uc(a,t),...C,id:s,"cmdk-item":"",role:"option","aria-disabled":!!x,"aria-selected":!!p,"data-disabled":!!x,"data-selected":!!p,onPointerMove:x||l.getDisablePointerSelection()?void 0:y,onClick:x?void 0:g},e.children)}),QKt=d.forwardRef((e,t)=>{let{heading:n,children:r,forceMount:s,...a}=e,i=fo(),l=d.useRef(null),c=d.useRef(null),u=fo(),f=zw(),m=sf(h=>s||f.filter()===!1?!0:h.search?h.filtered.groups.has(i):!0);ip(()=>f.group(i),[]),TIe(i,l,[e.value,e.heading,c]);let p=d.useMemo(()=>({id:i,forceMount:s}),[s]);return d.createElement(Ef.div,{ref:uc(l,t),...a,"cmdk-group":"",role:"presentation",hidden:m?void 0:!0},n&&d.createElement("div",{ref:c,"cmdk-group-heading":"","aria-hidden":!0,id:u},n),H4(e,h=>d.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?u:void 0},d.createElement(EIe.Provider,{value:p},h))))}),XKt=d.forwardRef((e,t)=>{let{alwaysRender:n,...r}=e,s=d.useRef(null),a=sf(i=>!i.search);return!n&&!a?null:d.createElement(Ef.div,{ref:uc(s,t),...r,"cmdk-separator":"",role:"separator"})}),ZKt=d.forwardRef((e,t)=>{let{onValueChange:n,...r}=e,s=e.value!=null,a=sz(),i=sf(u=>u.search),l=sf(u=>u.selectedItemId),c=zw();return d.useEffect(()=>{e.value!=null&&a.setState("search",e.value)},[e.value]),d.createElement(Ef.input,{ref:t,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":c.listId,"aria-labelledby":c.labelId,"aria-activedescendant":l,id:c.inputId,type:"text",value:s?e.value:i,onChange:u=>{s||a.setState("search",u.target.value),n?.(u.target.value)}})}),JKt=d.forwardRef((e,t)=>{let{children:n,label:r="Suggestions",...s}=e,a=d.useRef(null),i=d.useRef(null),l=sf(u=>u.selectedItemId),c=zw();return d.useEffect(()=>{if(i.current&&a.current){let u=i.current,f=a.current,m,p=new ResizeObserver(()=>{m=requestAnimationFrame(()=>{let h=u.offsetHeight;f.style.setProperty("--cmdk-list-height",h.toFixed(1)+"px")})});return p.observe(u),()=>{cancelAnimationFrame(m),p.unobserve(u)}}},[]),d.createElement(Ef.div,{ref:uc(a,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":l,"aria-label":r,id:c.listId},H4(e,u=>d.createElement("div",{ref:uc(i,c.listInnerRef),"cmdk-list-sizer":""},u)))}),eYt=d.forwardRef((e,t)=>{let{open:n,onOpenChange:r,overlayClassName:s,contentClassName:a,container:i,...l}=e;return d.createElement(v_,{open:n,onOpenChange:r},d.createElement(b_,{container:i},d.createElement(Q5,{"cmdk-overlay":"",className:s}),d.createElement(tx,{"aria-label":e.label,"cmdk-dialog":"",className:a},d.createElement(MIe,{ref:t,...l}))))}),tYt=d.forwardRef((e,t)=>sf(n=>n.filtered.count===0)?d.createElement(Ef.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),nYt=d.forwardRef((e,t)=>{let{progress:n,children:r,label:s="Loading...",...a}=e;return d.createElement(Ef.div,{ref:t,...a,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},H4(e,i=>d.createElement("div",{"aria-hidden":!0},i)))}),Gw=Object.assign(MIe,{List:JKt,Item:YKt,Input:ZKt,Group:QKt,Separator:XKt,Dialog:eYt,Empty:tYt,Loading:nYt});function rYt(e,t){let n=e.nextElementSibling;for(;n;){if(n.matches(t))return n;n=n.nextElementSibling}}function sYt(e,t){let n=e.previousElementSibling;for(;n;){if(n.matches(t))return n;n=n.previousElementSibling}}function kIe(e){let t=d.useRef(e);return ip(()=>{t.current=e}),t}var ip=typeof window>"u"?d.useEffect:d.useLayoutEffect;function Ah(e){let t=d.useRef();return t.current===void 0&&(t.current=e()),t}function sf(e){let t=sz(),n=()=>e(t.snapshot());return d.useSyncExternalStore(t.subscribe,n,n)}function TIe(e,t,n,r=[]){let s=d.useRef(),a=zw();return ip(()=>{var i;let l=(()=>{var u;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(u=f.current.textContent)==null?void 0:u.trim():s.current}})(),c=r.map(u=>u.trim());a.value(e,l,c),(i=t.current)==null||i.setAttribute(jh,l),s.current=l}),s}var aYt=()=>{let[e,t]=d.useState(),n=Ah(()=>new Map);return ip(()=>{n.current.forEach(r=>r()),n.current=new Map},[e]),(r,s)=>{n.current.set(r,s),t({})}};function oYt(e){let t=e.type;return typeof t=="function"?t(e.props):"render"in t?t.render(e.props):e}function H4({asChild:e,children:t},n){return e&&d.isValidElement(t)?d.cloneElement(oYt(t),{ref:t.ref},n(t.props.children)):n(t)}var iYt={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function NIe({options:e,value:t,onValueChange:n,placement:r="bottom-start",keepDraftValue:s=!1}){const[a,i]=d.useState(!1),[l,c]=d.useState(void 0),[u,f]=d.useState(!1),m=d.useRef(null),p=l===void 0,{refs:h,floatingStyles:g}=uxe({open:a,placement:r,strategy:"fixed",middleware:[WU(4),nxe({padding:8,fallbackAxisSideDirection:"start"}),txe({padding:8}),rxe({padding:8,apply({availableHeight:M,rects:j,elements:R}){R.floating.style.maxHeight=`${Math.min(M,300)}px`,R.floating.style.width=`${j.reference.width}px`}})],whileElementsMounted:Jye}),y=d.useCallback(()=>{const M=e.find(j=>j.value===t);return M?M.label:""},[t,e]),x=d.useCallback(()=>{i(!1),s||c(void 0),m.current?.blur()},[s]);d.useEffect(()=>{if(!a)return;const M=j=>{const R=h.reference.current,O=h.floating.current,D=j.target,P=R&&"contains"in R&&!R.contains(D),A=O&&"contains"in O&&!O.contains(D);P&&A&&x()};return document.addEventListener("mousedown",M),()=>{document.removeEventListener("mousedown",M)}},[a,h,x]);const v=d.useCallback(M=>{c(M),M===""&&n?.(""),a||i(!0)},[a,n]),b=d.useCallback(()=>{i(!0),f(!0),s||(c(void 0),queueMicrotask(()=>{m.current?.select()}))},[s]),_=d.useCallback(M=>{f(!1)},[]),w=d.useCallback(M=>{n?.(M),c(void 0),i(!1),m.current?.blur()},[n]),C=y(),S=d.useMemo(()=>u?l===void 0?C:l:l??C,[u,C,l]),E=d.useMemo(()=>({...g,position:g.position,zIndex:50}),[g]),k=d.useMemo(()=>({width:"100%"}),[]);return d.useMemo(()=>({isOpen:a,draft:l,isPristine:p,isFocused:u,displayValue:S,inputRef:m,refs:h,listWrapperStyles:k,floatingListStyles:E,onInputChange:v,onFocus:b,onBlur:_,onSelect:w}),[a,l,p,u,S,m,h,k,E,v,b,_,w])}const jIe=d.memo(function({children:t,loop:n=!0,filter:r,shouldFilter:s=!0}){return o.jsx(Gw,{loop:n,filter:r,shouldFilter:s,children:t})}),AIe=d.memo(function({value:t,onValueChange:n,onFocus:r,onBlur:s,onPaste:a,onKeyDown:i,placeholder:l,size:c="md",colorVariant:u="default",noRounded:f=!1,disabled:m,autoFocus:p,ref:h,horizontalSpacing:g,verticalSpacing:y}){const x={subtle:"bg-subtle",default:"bg-base dark:bg-subtler",borderless:"bg-transparent focus:!ring-0!border-0 !bg-transparent !px-0 focus:!ring-0 !border-0"},v={xs:"text-xs placeholder:text-xs",sm:"text-sm placeholder:text-sm",md:"text-sm placeholder:text-sm",lg:"text-lg placeholder:text-base"},b={none:"",xs:"px-xs",sm:"px-sm",md:"px-md",lg:"px-lg",xl:"px-xl"},_={none:"",xs:"py-xs",sm:"py-sm",md:"py-md",lg:"py-lg",xl:"py-xl"},w={xs:"sm",sm:"sm",md:"md",lg:"xl"},C={xs:"xs",sm:"sm",md:"sm",lg:"lg"},S=b[g??w[c]],E=_[y??C[c]];return o.jsx(Gw.Input,{ref:h,value:t,onValueChange:n,onFocus:r,onBlur:s,onPaste:a,onKeyDown:i,placeholder:l,disabled:m,autoFocus:p,className:B("focus:ring-subtler w-full font-sans outline-none focus:outline-none","text-foreground caret-super selection:bg-super/50","border-subtler placeholder-quieter border focus:ring-1","transition-all duration-200",!f&&"rounded-lg",x[u],v[c],S,E,m&&"cursor-not-allowed opacity-50")})}),IIe=d.memo(function({children:t,style:n}){return o.jsx(Gw.List,{className:B("z-50","max-h-[300px] overflow-y-auto","border-subtler shadow-overlay rounded-xl border","bg-base p-xs","flex flex-col gap-px"),style:n,children:t})}),RIe=d.memo(function({value:t,onSelect:n,selected:r,disabled:s,children:a,size:i="md",ref:l}){const c={xs:"text-xs py-1 px-xs",sm:"text-sm py-1 px-sm",md:"text-sm py-1.5 px-sm",lg:"text-base py-2 px-md"};return o.jsx(Gw.Item,{value:t,onSelect:n,disabled:s,ref:l,className:B("relative select-none rounded-lg transition-all duration-300",c[i],{"hover:bg-subtler cursor-pointer":!s,"cursor-not-allowed":s,"aria-selected:bg-subtler":!0},s&&"opacity-50"),children:o.jsx("span",{className:B({"text-super":r}),children:a})})}),PIe=d.memo(function({children:t,size:n="md"}){const r={xs:"text-xs py-2",sm:"text-sm py-2.5",md:"text-sm py-3",lg:"text-base py-3.5"};return o.jsx(Gw.Empty,{className:B("text-quieter text-center",r[n]),children:t})}),lYt=d.memo(function({option:t,value:n,disabled:r,size:s="md",onSelect:a}){const i=d.useCallback(()=>{a(t.value)},[a,t.value]);return o.jsx(RIe,{value:t.label,onSelect:i,selected:n===t.value,disabled:r,size:s,children:t.label})}),Oun=d.memo(function({options:t,placeholder:n,value:r,onValueChange:s,filter:a,emptyMessage:i,placement:l="bottom-start",referenceRef:c,keepDraftValue:u=!1,size:f="md",colorVariant:m="default",noRounded:p=!1,horizontalSpacing:h,verticalSpacing:g,disabled:y=!1,autoFocus:x=!1}){const v=NIe({options:t,value:r,onValueChange:s,placement:l,keepDraftValue:u}),{isOpen:b,displayValue:_,inputRef:w,refs:C,onInputChange:S,onFocus:E,onSelect:k,listWrapperStyles:M,floatingListStyles:j}=v;d.useEffect(()=>{c?.current&&v.refs.setReference(c.current)},[c,v.refs]);const R=d.useCallback(O=>{c||v.refs.setReference(O)},[c,v.refs]);return o.jsx("div",{ref:R,className:"relative",children:o.jsxs(jIe,{filter:a,shouldFilter:!v.isFocused||!v.isPristine||(v.draft?.length??0)>0,children:[o.jsx(AIe,{ref:w,value:_,onValueChange:S,onFocus:E,onBlur:v.onBlur,placeholder:n,size:f,horizontalSpacing:h,verticalSpacing:g,colorVariant:m,noRounded:p,disabled:y,autoFocus:x}),b&&o.jsx("div",{ref:C.setFloating,style:j,children:o.jsxs(IIe,{style:M,children:[o.jsx(PIe,{size:f,children:i}),t.map(O=>o.jsx(lYt,{option:O,value:r,disabled:y,size:f,onSelect:k},O.value))]})})]})})});function cYt(e,t=!0){const n=d.useRef(null);return d.useEffect(()=>{if(!t)return;const r=s=>{n.current&&!n.current.contains(s.target)&&e()};return document.addEventListener("mousedown",r),()=>{document.removeEventListener("mousedown",r)}},[t,e]),n}const Dun=async(e,t)=>{if(!t){await qL(e);return}try{const n=new Blob([t],{type:"text/html"}),r=new Blob([e],{type:"text/plain"});await navigator.clipboard.write([new ClipboardItem({"text/html":n,"text/plain":r})])}catch{await qL(e)}},qL=async e=>{try{await navigator.clipboard.writeText(e)}catch{const t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}},LIe=I.memo(({chip:e,selected:t,disabled:n,onDelete:r,onClick:s})=>{const a=d.useCallback(()=>{r(e.value)},[r,e.value]),i=d.useCallback(l=>{s(e.value,l)},[s,e.value]);return o.jsx(bIe,{label:e.label,selected:t,title:e.value,onDelete:a,onClick:i,disabled:n,shouldAvoidFocusShift:!0})});LIe.displayName="ChipItem";function uYt({option:e,draft:t,onSelect:n,renderSuggestion:r}){const s=d.useCallback(()=>{n(e.value)},[n,e.value]);return o.jsx(RIe,{value:e.value,onSelect:s,selected:t===e.value,children:r?.(e.item)})}function dYt({suggestions:e,draft:t,onSelect:n,renderSuggestion:r,referenceElement:s,onValueChange:a}){const i=e?.map(c=>({value:c.value,label:c.key}))||[],l=NIe({options:i,value:t,onValueChange:a});return d.useEffect(()=>{s&&l.refs.setReference(s)},[s,l.refs]),o.jsx(eat,{children:o.jsx("div",{ref:l.refs.setFloating,style:l.floatingListStyles,children:o.jsxs(IIe,{style:l.listWrapperStyles,children:[o.jsx(PIe,{children:"No results found"}),e.map(c=>o.jsx(uYt,{option:c,draft:t,onSelect:n,renderSuggestion:r},c.key))]})})})}function fYt({chips:e,limit:t=1/0,onAdd:n,onDelete:r,validator:s,placeholder:a,disabled:i=!1,testId:l,children:c,className:u,placeholderOnFocusOnly:f=!1,onDraftChange:m,suggestions:p,renderSuggestion:h}){const[g,y]=d.useState(""),[x,v]=d.useState(!1),[b,_]=d.useState([]),w=d.useRef(null),C=cYt(()=>{_([])}),S=d.useCallback(T=>{y(T),m?.(T)},[m]),E=d.useCallback(T=>{const N=(T??g).trim();if(N===""||e.find(U=>U.value===N))return!1;if(s){const U=s(N);if(typeof U=="string"||!U)return!1}const L=p?.find(U=>U.value===N);return y(""),n([N],L?[L.item]:void 0),!0},[g,n,e,s,p]);d.useEffect(()=>{b.length>0&&C.current&&C.current.focus()},[b,C]);const k=d.useCallback(T=>{if((T.metaKey||T.ctrlKey)&&T.key==="a"&&g){T.stopPropagation();return}if(T.key==="Enter"||T.key==="Tab"||T.key===" "||T.key===","||T.key===";"){if(!E())return;T.preventDefault(),v(!0);return}if(T.key==="Escape"){y(""),v(!1);return}if(T.key==="Backspace"){if(b.length>0)return;if(!g&&!b.length){T.stopPropagation(),T.preventDefault();const N=e[e.length-1];N&&_([N.value]),v(!1)}return}if((T.key==="ArrowLeft"||T.key==="ArrowRight")&&!g){if(T.preventDefault(),T.stopPropagation(),T.key==="ArrowLeft"&&e.length>0){const N=e[e.length-1];N&&(_([N.value]),v(!1))}return}},[E,b,g,e]),M=d.useCallback(T=>{r([T]),_(N=>N.filter(L=>L!==T)),v(!0)},[r]),j=d.useCallback((T,N)=>{_(L=>{const U=N.shiftKey,$=N.metaKey,V=N.ctrlKey;return $||V?L.includes(T)?L.filter(W=>W!==T):[...L,T]:U?L.includes(T)?L:[...L,T]:L.includes(T)?L.filter(W=>W!==T):[T]})},[]),R=d.useCallback(()=>{g.trim()!==""&&!E()||v(!1)},[g,E]),O=d.useCallback(()=>{qL(b.join(","))},[b]),D=d.useCallback(T=>{const{metaKey:N,ctrlKey:L,key:U}=T;if((N||L)&&U==="a"){if(x&&g)return;T.preventDefault(),_(e.map($=>$.value)),x&&v(!1);return}if((N||L)&&U==="c"&&b.length>0){T.preventDefault(),O();return}if((N||L)&&U==="x"&&b.length>0){T.preventDefault(),O();const $=[...b];_([]),r($),v(!0);return}if(U==="Backspace"&&b.length>0&&!g){T.preventDefault();const $=[...b];_([]),r($),v(!0);return}if(U==="ArrowLeft"||U==="ArrowRight"){if(document.activeElement===w.current?.element())return;T.preventDefault();const V=U==="ArrowLeft",W=U==="ArrowRight",Q=q=>{const H=e[q];H&&_([H.value])};if(b.length===0)e.length>0&&Q(V?e.length-1:0);else{const q=b.map(H=>e.findIndex(K=>K.value===H)).filter(H=>H!==-1).sort((H,K)=>H-K);if(q.length>0){const H=V?q[0]:q[q.length-1];if(H!==void 0)if(W&&H===e.length-1)_([]),v(!0);else{const K=V?Math.max(0,H-1):Math.min(e.length-1,H+1);Q(K)}}}return}},[b,r,e,x,g,O]),P=d.useCallback(T=>{const L=T.clipboardData.getData("text").split(/[,;\n\t]+/).map(U=>U.trim()).filter(Boolean);if(L.length>1){const U=[],$=[];if(L.forEach(V=>{if(s){if(s(V)===!0){U.push(V);const Q=p?.find(q=>q.value===V);Q&&$.push(Q.item)}}else{U.push(V);const W=p?.find(Q=>Q.value===V);W&&$.push(W.item)}}),U.length>0)T.preventDefault(),T.stopPropagation(),n(U,$.length>0?$:void 0);else return}},[s,n,p]),A=d.useCallback(T=>{E(T)||y(""),queueMicrotask(()=>{w.current?.focus()})},[E]);return o.jsxs("div",{ref:C,tabIndex:0,className:B("flex min-h-10 w-full flex-row flex-wrap items-center gap-1 py-2 focus:outline-none",u),"data-test-id":l,onKeyDown:D,onPointerDown:T=>{x&&T.target===C.current&&T.preventDefault()},onClick:T=>{x||(T.stopPropagation(),T.preventDefault(),!i&&e.length<t&&(_([]),v(!0)))},children:[e.map(T=>o.jsx(LIe,{chip:T,selected:b.includes(T.value),disabled:i,onDelete:M,onClick:j},T.value)),!i&&e.length<t&&(f?x:x||e.length===0)&&o.jsx("div",{className:"min-w-40 flex-1",children:o.jsxs(jIe,{shouldFilter:!1,children:[o.jsx(AIe,{autoFocus:!0,noRounded:!0,colorVariant:"borderless",verticalSpacing:"none",ref:w,value:g,onValueChange:S,placeholder:a,onBlur:R,onKeyDown:k,onPaste:P}),p&&p.length>0&&g.trim()&&o.jsx(dYt,{suggestions:p,draft:g,onSelect:A,renderSuggestion:h,referenceElement:C.current,onValueChange:S})]})}),c]})}const az=I.memo(fYt);az.displayName="ChipInput";function mYt(e){const t=e.display_name?.trim(),n=e.email;return t||n}function pYt(e){return e.filter(t=>t.email).map(t=>({label:mYt(t),value:t.email}))}const KL=d.memo(({event:e,newEvent:t,onEventChange:n,isEditable:r=!0,truncateAttendees:s,noWrapper:a=!1,action:i})=>{const{$t:l}=Z(),[c,u]=d.useState({event_id:e.event_id,title:e.title,start_date_time:e.start_date_time,end_date_time:e.end_date_time,attendees:e.attendees?.map(O=>({email:O.email,optional:O.optional,display_name:O.display_name,photo_url:O.photo_url})),organizer:e.organizer,description:e.description,location:e.location,link:e.link,calendar_color:e.calendar_color,event_color:e.event_color,conference_data:e.conference_data,creator:e.creator,html_description:e.html_description,is_all_day:e.is_all_day,recurrence:e.recurrence?.map(O=>O.toString())}),f=d.useRef(null),{suggestions:m,handleDraftChange:p}=vIe({reason:"calendar_event"});d.useEffect(()=>{n?.(c)},[c,n]);const h=d.useCallback(O=>{O&&u(D=>({...D,start_date_time:O.toISOString()}))},[]),g=d.useCallback(O=>{O&&u(D=>({...D,end_date_time:O.toISOString()}))},[]),y=d.useCallback(O=>{u(D=>{const P=new Date(D.start_date_time||""),[A,T]=O.split(":").map(Number);return A===void 0||T===void 0||(P.setHours(A),P.setMinutes(T),isNaN(P.getTime()))?D:{...D,start_date_time:P.toISOString()}})},[]),x=d.useCallback(O=>{u(D=>{const P=new Date(D.end_date_time||""),[A,T]=O.split(":").map(Number);return A===void 0||T===void 0||(P.setHours(A),P.setMinutes(T),isNaN(P.getTime()))?D:{...D,end_date_time:P.toISOString()}})},[]),v=({action:O,email:D,newEmail:P,displayName:A,photoUrl:T})=>{u(N=>{const L=[...N.attendees||[]];switch(O){case"add":L.some(U=>U.email===D)||L.push({email:D,display_name:A,photo_url:T});break;case"delete":return{...N,attendees:L.filter(U=>U.email!==D)};case"edit":return{...N,attendees:L.map(U=>U.email===D?{...U,email:P}:U)}}return{...N,attendees:L}})},b=aIe(e?.calendar_color?.background??"#AC725E"),_=oIe(b),w=d.useCallback(O=>u(D=>({...D,title:O})),[]),C=d.useCallback((O,D)=>{const P=l7e(D,"email");O.forEach(A=>{const T=P[A];v({action:"add",email:A,displayName:T?.name,photoUrl:T?.image||void 0})})},[]),S=d.useCallback(O=>{O.forEach(D=>v({action:"delete",email:D}))},[]),E=d.useCallback(O=>u(D=>({...D,location:O})),[]),k=d.useCallback(O=>{u(D=>({...D,recurrence:O}))},[]),M=d.useCallback(O=>{const D=O==="google_meet";u(P=>({...P,conference_data:D?{conference_id:crypto.randomUUID(),entry_points:[],solution:{name:"Google Meet",icon_uri:"",key_type:"hangoutsMeet"}}:void 0}))},[]),j=d.useCallback(O=>o.jsx(xIe,{contact:O}),[]),R=d.useMemo(()=>[{label:l({defaultMessage:"Google Meet",id:"crZ+Bimh7N"}),value:"google_meet"},{label:l({defaultMessage:"No video conferencing",id:"PYY40S2Jrm"}),value:"none"}],[l]);if(!r){const{title:O}=e;if((!e.attendees||e.attendees.length==0)&&!e.start_date_time&&!e.end_date_time&&!e.title)return null;const D=o.jsxs("div",{className:"gap-md relative flex",children:[o.jsx("div",{className:B("inset-y-xs absolute left-0 w-1 shrink-0 self-stretch rounded-full",{"brightness-[0.8]":_==="Fail"}),style:{backgroundColor:b}}),o.jsxs("div",{className:"gap-md flex flex-col pl-5",children:[o.jsx(rf,{oldText:O,newText:t?.title??void 0,isDeletion:i==="DELETE"}),o.jsx(hIe,{event:e,newEvent:t,action:i,truncateAttendees:s})]})]});return a?o.jsx("div",{className:"p-md relative overflow-hidden",children:D}):o.jsx(Wt,{fullBleed:!0,className:"p-md relative overflow-hidden",roundedClass:"rounded-md",children:D})}return o.jsxs(Wt,{fullBleed:!0,className:"relative flex flex-col gap-4 overflow-hidden px-8 py-2",roundedClass:"rounded-md",fullBleedBorderClassname:"border-none",children:[o.jsx("div",{className:"shrink-none left-xs absolute bottom-2 top-2 w-1.5 self-stretch rounded-full"+(_==="Fail"?" brightness-[0.8]":""),style:{backgroundColor:b}}),o.jsx(Xr,{size:"md",type:"text",value:c.title||"",pill:!1,onChange:w,className:"border-subtler text-foreground w-full rounded-none rounded-t-md border-x-0 border-b border-t-0 pb-2 pl-0 pr-4 font-medium shadow-none focus:!outline-none focus:!ring-0",placeholder:l({defaultMessage:"Add title",id:"k09nVJqic1"}),isMobileUserAgent:!1}),o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(Po,{icon:mp,alignCenter:!0,iconSize:"sm",children:o.jsx(gIe,{startDateTime:c.start_date_time,endDateTime:c.end_date_time,onStartDateChange:h,onEndDateChange:g,onStartTimeChange:y,onEndTimeChange:x})}),o.jsx(Po,{icon:jOe,iconSize:"sm",children:o.jsx(yIe,{value:c.recurrence||[],onChange:k})}),o.jsx(Po,{icon:bu,iconSize:"sm",alignCenter:!0,children:o.jsx("div",{className:B("border-subtler text-foreground focus-within:border-super w-full rounded-lg border px-2",{"!px-3":!c.attendees?.length}),children:o.jsx(az,{chips:pYt(c.attendees??[]),onAdd:C,onDelete:S,validator:LQe,placeholder:l({defaultMessage:"Add guests",id:"pP5ifNp+MS"}),suggestions:m,renderSuggestion:j,onDraftChange:p})})}),o.jsx(Po,{icon:qb,iconSize:"sm",alignCenter:!0,children:o.jsx(Xr,{pill:!1,type:"text",value:c.location||"",onChange:E,placeholder:l({defaultMessage:"Add rooms or location",id:"bb7ELr4Sk+"}),className:"focus:!border-super rounded-lg !px-3 focus:!ring-transparent",isMobileUserAgent:!1})}),o.jsx(Po,{icon:BO,iconSize:"sm",alignCenter:!0,children:o.jsx(kk,{id:"video-conferencing-select",activeKey:c.conference_data?"google_meet":"none",options:R,onOptionChange:M,extraCSS:"rounded-lg pl-3 [&+div]:right-3"})}),o.jsx(Po,{icon:Qce,iconSize:"sm",children:o.jsx(OT,{wrapperClass:"bg-transparent focus-within:!border-super rounded-md px-3 py-2 text-sm focus-within:!ring-transparent",inputRef:f,isMobileUserAgent:!1,children:o.jsx(DT,{value:c.description||"",onChange:O=>u(D=>({...D,description:O})),placeholder:l({defaultMessage:"Add a description",id:"bocXKEDBwm"}),minRows:4,isMobileStyle:!1,isMobileUserAgent:!1,ref:f})})})]})]})});KL.displayName="CalendarEventLarge";var Kh;(function(e){e.CREATED="CREATED",e.UPDATED="UPDATED",e.DELETED="DELETED",e.REJECTED="REJECTED"})(Kh||(Kh={}));const OIe=I.memo(({operation:e,isShowEditableComponentsEnabled:t,buttonVariant:n,buttonText:r,onConfirm:s,onSkip:a})=>{const{$t:i}=Z(),[l,c]=d.useState();d.useEffect(()=>{c(void 0)},[e]);const u=d.useMemo(()=>{if(e?.update){const y=e.update.event,x=e.update.new_event;return y&&x?{...y,...Object.fromEntries(Object.entries(x).filter(([b,_])=>_!==null))}:x||y}return e?.add?.event||e?.delete?.event},[e]),f=d.useCallback(y=>{c(y)},[]),m=d.useCallback(y=>[{...e,...y&&{...e.add&&{add:{event:y}},...e.update&&{update:{event:y}},...e.delete&&{delete:{event:y,delete_scope:e.delete?.delete_scope}}},status:y.status.toUpperCase()}],[e]),p=d.useCallback((y,x)=>{const v=x||{...l||u,status:y};return{confirmed:!0,operations:v?m(v):[]}},[l,u,m]),h=d.useCallback(()=>{let y=Kh.CREATED;e.update?y=Kh.UPDATED:e.delete&&(y=Kh.DELETED),s(p(y))},[p,s,e]),g=d.useCallback(()=>{a(p(Kh.REJECTED))},[p,a]);return o.jsxs(o.Fragment,{children:[u&&e.delete&&o.jsx(z,{className:"px-sm mb-sm",children:o.jsx(KL,{event:u,newEvent:e.update?.new_event,isEditable:!1})}),u&&!e.delete&&o.jsx(z,{className:"px-md py-sm",children:o.jsx(KL,{event:u,newEvent:e.update?.new_event,onEventChange:f,isEditable:t})}),o.jsx("form",{onSubmit:y=>{y.preventDefault(),h()},children:o.jsx(z,{className:"px-md py-sm gap-4 border-t pt-4",children:o.jsx("div",{className:"gap-sm flex items-center justify-between",children:o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(me,{size:"small",variant:n,text:r,type:"submit"}),o.jsx(Me,{size:"small",text:i({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:g})]})})})})]})});OIe.displayName="CalendarOperationItem";function hYt(){const{value:e}=Qs({flag:"show-editable-calendar-components",defaultValue:!1});return e}const gYt=({result:e,isDeleteOperation:t})=>{const{$t:n}=Z();return e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Fa,{size:14,className:"shrink-0 text-[#16a34a]",title:"Confirmed"}),o.jsx("span",{className:"text-xs font-medium leading-none text-[#16a34a]",children:n(t?{defaultMessage:"Deleted",id:"KQvWvDRI1B"}:{defaultMessage:"Accepted",id:"aFyFm0PsCy"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(kt,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:n({defaultMessage:"Skipped",id:"djZCU5enGS"})})]}):null},DIe=I.memo(({calendarOperations:e,sendStepResult:t,isFinished:n})=>{const r="calendar-operation-step",[s,a]=d.useState(n??!1),{$t:i}=Z(),l=hYt(),[c,u]=d.useState(0),[f,m]=d.useState(()=>Array(e.length).fill(null)),p=d.useRef(!1),h=d.useMemo(()=>e[c],[e,c]),g=d.useMemo(()=>h?.delete?.event?"rejected":"inverted",[h?.delete?.event]),y=d.useMemo(()=>h?h.delete?.event?i({defaultMessage:"Delete",id:"K3r6DQW7h+"}):i({defaultMessage:"Schedule",id:"hGQqkWwmJD"}):i({defaultMessage:"Schedule",id:"hGQqkWwmJD"}),[h,i]),x=e.length>1,v=d.useMemo(()=>({position:"absolute",bottom:16,right:16,zIndex:10}),[]),b=d.useCallback(()=>{u(S=>Math.max(S-1,0))},[]),_=d.useCallback(()=>{u(S=>Math.min(S+1,e.length-1))},[e.length]),w=d.useCallback(S=>{m(E=>{const k=[...E];k[c]=S;const M=k.findIndex(R=>R===null);if(k.every(R=>R!==null)&&!p.current){p.current=!0;const R=k.map(O=>O?.operations).filter(O=>Array.isArray(O)).flat();R.length>0?t({confirmed:!0,operations:R},r,!1):t({confirmed:!1},r,!1),a(!0)}else M!==-1&&u(M);return k})},[c,t,r]),C=d.useCallback(S=>{w(S)},[w]);return s?o.jsx(Vs,{icon:Fa,iconClassName:"text-super",text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):h?o.jsxs(z,{variant:"raised",className:"py-sm relative rounded-lg border",children:[o.jsx(OIe,{operation:JSON.parse(JSON.stringify(h)),isShowEditableComponentsEnabled:l,buttonVariant:g,buttonText:y,onConfirm:w,onSkip:C},`operation-${c}`),x&&o.jsxs(z,{style:v,className:"flex items-center gap-4",children:[o.jsx(gYt,{result:f[c]??null,isDeleteOperation:!!h?.delete?.event}),o.jsxs("span",{className:"text-xs font-medium",children:[o.jsx("span",{className:"text-foreground",children:c+1}),o.jsxs("span",{children:[" of ",e.length]})]}),o.jsxs(z,{className:"flex gap-2",children:[o.jsx(rIe,{disabled:c===0,onClick:b}),o.jsx(sIe,{disabled:c===e.length-1,onClick:_})]})]})]}):o.jsx(z,{variant:"raised",className:"py-sm relative rounded-lg border",children:o.jsx("div",{className:"p-4 text-center",children:i({defaultMessage:"No calendar operation available",id:"Hm6yv1Uz2P"})})})});DIe.displayName="CalendarOperationStep";const zv=.03,yYt=3,Up=I.memo(({items:e,initialDisplayCount:t=yYt,stepDelay:n=zv,isFinished:r=!1,vertical:s=!1,truncate:a=!0,onCountChange:i})=>{const[l,c]=d.useState([]),[u,f]=d.useState(!1),m=d.useRef(null),p=d.useRef(!0),h=d.useRef(r),g=d.useRef(0);d.useEffect(()=>()=>{m.current&&clearTimeout(m.current)},[]),d.useEffect(()=>{if(i){const S=a&&(n!==zv?r&&l.length<e.length:l.length<e.length)?e.length:l.length;i(S)}},[l.length,e.length,r,n,a,i]),d.useEffect(()=>{const w=a?t:e.length;if(p.current)if(p.current=!1,e.length>0)if(r){const S=Math.min(w,e.length);c(e.slice(0,S)),g.current=S}else c([e[0]]),g.current=1;else c([]),g.current=0;if(u){c(e),g.current=e.length;return}if(r&&!h.current&&(m.current&&(clearTimeout(m.current),m.current=null),c(()=>{const S=Math.min(w,e.length),E=e.slice(0,S);return g.current=E.length,E})),h.current=r,m.current&&(clearTimeout(m.current),m.current=null),g.current>=w||g.current>=e.length)return;const C=()=>{let S=0;if(c(E=>E.length<e.length&&E.length<w?(S=E.length+1,g.current=S,[...E,e[E.length]]):(S=E.length,g.current=S,E)),S<e.length&&S<w){const E=r?zv:n;m.current=setTimeout(C,E*1e3)}};if(g.current>0){const S=r?zv:n;m.current=setTimeout(C,S*1e3)}else e.length>0&&(c([e[0]]),g.current=1)},[e,t,n,r,u,a]);const y={initial:{opacity:0,x:-3},animate:{opacity:1,x:0}},x=()=>{f(!0)},b=a&&(n!==zv?r&&l.length<e.length:l.length<e.length),_=d.useCallback(w=>{w.stopPropagation(),x()},[]);return o.jsxs("div",{className:`flex items-center ${s?"flex-col items-start gap-px":"gap-sm flex-wrap"}`,children:[l.map((w,C)=>o.jsx(ve.div,{className:s?"w-full":"inline-flex",variants:y,initial:"initial",animate:"animate",transition:{duration:.1,ease:_a},children:w},C)),b&&o.jsx(z,{variant:"subtler",bgHover:"subtle",className:"py-xs cursor-pointer rounded-lg px-2.5",onClick:_,children:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:o.jsx(ie,{defaultMessage:"+{count} more",id:"/zFGgPmQSV",values:{count:e.length-l.length}})})})]})});Up.displayName="ResultsRenderer";const Na=I.memo(({queries:e,icon:t=Br,stepDelay:n,isFinished:r,initialDisplayCount:s=12,enableQueryLinks:a=!1})=>{const i=e.map((l,c)=>o.jsx(Vs,{icon:t,text:l,url:a?`/search/new?q=${encodeURIComponent(l)}`:void 0},c));return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Up,{items:i,initialDisplayCount:s,stepDelay:n,isFinished:r})})});Na.displayName="SearchWebStep";const FIe=I.memo(({operations:e})=>{const{$t:t,formatMessage:n}=Z(),r=d.useMemo(()=>{const i={created:0,updated:0,deleted:0,rejected:0};return e.forEach(l=>{switch(l.status?.toUpperCase()){case"CREATED":i.created++;break;case"UPDATED":i.updated++;break;case"DELETED":i.deleted++;break;case"REJECTED":i.rejected++;break}}),i},[e]),s=d.useMemo(()=>{const i=[];return r.created>0&&i.push({count:r.created,label:t({defaultMessage:"Created",id:"ORGv1Q6rL/"})}),r.updated>0&&i.push({count:r.updated,label:t({defaultMessage:"Updated",id:"xrk6zgu9jU"})}),r.deleted>0&&i.push({count:r.deleted,label:t({defaultMessage:"Deleted",id:"KQvWvDRI1B"})}),r.rejected>0&&i.push({count:r.rejected,label:t({defaultMessage:"Rejected",id:"5qaD7sDVxu"})}),i},[r,t]),a=d.useMemo(()=>s.length===0?[]:[s.map(i=>n({defaultMessage:"{count} {status}",id:"e6QlErEcyz"},{count:i.count,status:i.label})).join(", ")],[s,n]);return a.length===0?null:o.jsx(Na,{icon:Vb,queries:a})});FIe.displayName="CalendarStatusSummary";const xYt=()=>o.jsxs(z,{variant:u_.subtler,className:"p-sm gap-sm flex h-[52px] w-fit min-w-[200px] items-center rounded-lg",children:[o.jsx(z,{variant:"subtler",className:"aspect-square h-full rounded-md"}),o.jsxs("div",{className:"gap-xs flex flex-col",children:[o.jsx(z,{variant:"subtler",className:"h-1.5 w-24 rounded-full"}),o.jsx(z,{variant:"subtler",className:"h-1.5 w-16 rounded-full"})]})]}),UIe=I.memo(({assetTypes:e,assetTypeLabels:t,isFinished:n})=>{const{$t:r}=Z();if(e.length===0)return o.jsxs("div",{className:"my-sm gap-sm flex flex-col",children:[o.jsx(F,{variant:"tinyRegular",color:n?"light":"super",className:"flex items-center gap-1",children:o.jsx(un,{variant:"super",active:!n,as:"span",speed:"slow",children:r({defaultMessage:"Creating an asset",id:"/gKNbCoSJB"})})}),o.jsx(xYt,{})]});const s=e[e.length-1],a=s?t[s]||s.toLowerCase():r({defaultMessage:"an asset",id:"+rur3MSgJV"});return o.jsx(Ye,{mode:"wait",children:o.jsx(ve.div,{initial:{opacity:0,y:4},animate:{opacity:1,y:0},exit:{opacity:0,y:-4},transition:{duration:.25,ease:[.4,0,.2,1]},children:o.jsx(F,{variant:"tinyRegular",color:n?"light":"super",className:"flex items-center gap-1 py-1.5",children:o.jsx(un,{variant:"super",active:!n,as:"span",speed:"slow",children:r({defaultMessage:"Creating {assetLabel}",id:"irVMYqmEjR"},{assetLabel:a})})})},s)})});UIe.displayName="CanvasAgentStep";const BIe=I.memo(({step:e})=>{const t=e.content.clarification;return t?o.jsx("div",{className:"gap-sm flex flex-row",children:o.jsx(Vs,{icon:AOe,text:t})}):null});BIe.displayName="ClarificationStep";const oz=e=>{const{$t:t}=Z();return Qr(e?.asset_type).with(yn.CODE_ASSET,()=>({description:t({defaultMessage:"Programming",id:"4MsdoHG9QN"}),title:t({defaultMessage:"Python",id:"/Z1NW3qKj6"}),Icon:u1})).with(yn.CHART,()=>({description:t({defaultMessage:"Code Interpreter Graph",id:"F3E5l9GC7U"}),title:t({defaultMessage:"Chart",id:"nFVuBOECC+"}),Icon:IOe})).with(yn.CODE_FILE,()=>({description:t({defaultMessage:"Generated File",id:"x6KEQZ7oaM"}),title:e?.code_file?.filename??"",Icon:vu})).with(yn.APP,()=>({description:t({defaultMessage:"Generated App",id:"t7mMyC1O7+"}),title:e?.app?.name??"",Icon:qce})).with(yn.SLIDES,()=>({description:t({defaultMessage:"Presentation",id:"7zHbpiyvPE"}),title:e?.app?.description??"",Icon:ROe})).with(yn.GENERATED_IMAGE,()=>({description:"",title:t({defaultMessage:"Generated Image",id:"Kt4lbw5KkH"}),Icon:POe})).with(yn.GENERATED_VIDEO,()=>({description:"",title:t({defaultMessage:"Generated Video",id:"Gh4spqP8w0"}),Icon:BO})).with(yn.PDF_FILE,()=>({description:t({defaultMessage:"PDF Document",id:"Idloyb3SW4"}),title:e?.pdf_file?.name??t({defaultMessage:"PDF Document",id:"Idloyb3SW4"}),Icon:Tg})).with(yn.DOCX_FILE,()=>({description:t({defaultMessage:"Word Document",id:"q+bgjo7qbJ"}),title:e?.docx_file?.name??"",Icon:Qk})).with(yn.XLSX_FILE,()=>({description:t({defaultMessage:"Excel Spreadsheet",id:"eMPZOuxga0"}),title:e?.xlsx_file?.name??"",Icon:$b})).otherwise(()=>({description:"",title:t({defaultMessage:"Generated Asset",id:"Kc1J25+bKt"}),Icon:vu}))};var wd;(function(e){e.Preview="preview",e.Assets="assets",e.Source="source"})(wd||(wd={}));function Fun(){return{loading:!1,activeTab:wd.Preview,title:void 0,icon:void 0}}const Uun=(e,t)=>Qr(t).with({type:"setLoading"},({loading:n,assetType:r})=>({...e,loading:n,loadingAssetType:r})).with({type:"setAsset"},({assetUuid:n,title:r,backendUuid:s})=>({...e,assetUuid:n,title:r,backendUuid:s})).with({type:"setTitle"},({title:n,icon:r})=>({...e,title:n,icon:r})).with({type:"setTab"},({tab:n})=>({...e,activeTab:n})).exhaustive();function vYt(e,t,n){const r=new Blob([n],{type:"text/plain"});$Ie(e,t,r)}function $Ie(e,t,n){const r=document.createElement("a"),s=URL.createObjectURL(n);r.href=s,r.download=t,e.appendChild(r),r.click(),URL.revokeObjectURL(s),e.removeChild(r)}function Bun(e){return!!(e?.asset_type===yn.SLIDES&&e.app?.url&&e.app.name)}function $un(e){return e?.asset_type?[yn.GENERATED_IMAGE,yn.CHART,yn.CODE_FILE,yn.CODE_ASSET].includes(e.asset_type):!1}function bYt(e){return e?.asset_type?[yn.CHART,yn.GENERATED_IMAGE,yn.GENERATED_VIDEO,yn.PDF_FILE].includes(e.asset_type):!1}function _Yt({reason:e,entryUUID:t}){const[n,r]=d.useState(!1),s=d.useCallback(async a=>{r(!0);try{const i=await vpt({request:{entry_uuid:t},reason:e});$Ie(a||document.body,"exported-assets.zip",i)}finally{r(!1)}},[t,e]);return d.useMemo(()=>({exportAllAssets:s,isExporting:n}),[s,n])}function Vun({asset:e,reason:t,answerMode:n,context:r,entryUUID:s}){const{downloadS3Asset:a,downloadImageAsset:i,downloadMediaAsset:l}=c1e({reason:t}),{trackEvent:c}=Te(),u=d.useCallback(async f=>{if(e)if(r==="canvas"?c("canvas content downloaded",{contentType:e.asset_type,entryUUID:s,assetUUID:e.uuid}):n&&c("generated asset downloaded",{assetType:e.asset_type,answerMode:n,entryUUID:s,reason:t}),e.asset_type===yn.GENERATED_IMAGE)e.generated_image?.url&&await i(e.generated_image.url,"generated-image.png",f||document.body);else if(e.asset_type===yn.GENERATED_VIDEO)e.generated_video?.url&&await l(e.generated_video.url,"generated-video.mp4",f||document.body);else for(const m of e.download_info)m.url?await a({url:m.url,filename:m.filename}):m.text_content&&vYt(f||document.body,m.filename,m.text_content)},[e,r,n,c,s,t,i,l,a]);return d.useMemo(()=>({downloadAsset:u}),[u])}var om;(function(e){e[e.UNCOPIED=0]="UNCOPIED",e[e.COPYING=1]="COPYING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(om||(om={}));var im;(function(e){e[e.UNLINKED=0]="UNLINKED",e[e.LINKING=1]="LINKING",e[e.FAILED=2]="FAILED",e[e.SUCCEEDED=3]="SUCCEEDED"})(im||(im={}));function Wun({asset:e,reason:t}){const[n,r]=d.useState(om.UNCOPIED),{$t:s}=Z(),{deprecatedOpenToast:a}=fn(),i=d.useCallback(async()=>{if(e){r(om.COPYING);try{await wYt({asset:e,reason:t}),a(s({defaultMessage:"Copied to the clipboard!",id:"WWy0tPuRW8"}),"success",3),r(om.SUCCEEDED)}catch{a(s({defaultMessage:"Failed to copy the asset",id:"HHPhgIZj9h"}),"error",3),r(om.FAILED)}setTimeout(()=>r(om.UNCOPIED),2e3)}},[s,a,r,e,t]);return d.useMemo(()=>({copyStatus:n,copyAsset:i}),[n,i])}function Hun({asset:e}){const[t,n]=d.useState(im.UNLINKED),{$t:r}=Z(),{deprecatedOpenToast:s}=fn(),a=d.useCallback(async()=>{if(!(!e||!bYt(e))){n(im.LINKING);try{let i;if(e.asset_type===yn.CHART&&e.chart?.url)i=e.chart.url;else if(e.asset_type===yn.GENERATED_IMAGE&&e.generated_image?.url)i=e.generated_image.url;else if(e.asset_type===yn.GENERATED_VIDEO&&e.generated_video?.url)i=e.generated_video.url;else if(e.asset_type===yn.PDF_FILE&&e.pdf_file?.url)i=e.pdf_file.url;else throw new Error("Asset is not linkable or URL not found");await navigator.clipboard.writeText(i),s(r({defaultMessage:"Link copied to clipboard!",id:"PsDXPeXpVG"}),"success",3),n(im.SUCCEEDED)}catch{s(r({defaultMessage:"Failed to copy link",id:"ruCwQMVFzJ"}),"error",3),n(im.FAILED)}setTimeout(()=>n(im.UNLINKED),2e3)}},[e,r,s]);return d.useMemo(()=>({linkStatus:t,linkAsset:a}),[t,a])}async function wYt({asset:e,reason:t}){let n;if(e.asset_type==yn.CODE_ASSET)n={"text/plain":e.code?.script??""};else if(e.asset_type==yn.CHART&&e.chart?.url){const s=await Sh({request:{url:e.chart.url,filename:"chart.png"},reason:t});n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==yn.CODE_FILE&&e.code_file?.url){const s=await Sh({request:{url:e.code_file.url,filename:e.code_file.name},reason:t});n={"text/plain":await(await fetch(s)).text()}}else if(e.asset_type==yn.GENERATED_IMAGE&&e.generated_image?.url){const s=e.generated_image.url;n={"image/png":await(await fetch(s)).blob()}}else if(e.asset_type==yn.GENERATED_VIDEO&&e.generated_video?.url){const s=e.generated_video.url;n={"video/mp4":await(await fetch(s,{mode:"cors",cache:"no-cache"})).blob()}}else if(e.asset_type==yn.PDF_FILE&&e.pdf_file?.url){const s=await Sh({request:{url:e.pdf_file.url,filename:e.pdf_file.name},reason:t});n={"application/pdf":await(await fetch(s)).blob()}}else if(e.asset_type==yn.DOCX_FILE&&e.docx_file?.url){const s=await Sh({request:{url:e.docx_file.url,filename:e.docx_file.name},reason:t});n={"application/vnd.openxmlformats-officedocument.wordprocessingml.document":await(await fetch(s)).blob()}}else if(e.asset_type==yn.XLSX_FILE&&e.xlsx_file?.url){const s=await Sh({request:{url:e.xlsx_file.url,filename:e.xlsx_file.name},reason:t});n={"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":await(await fetch(s)).blob()}}if(!n)throw new Error("Failed to find anything to copy");const r=new ClipboardItem(n);await navigator.clipboard.write([r])}const CYt=({asset:e})=>{const{openCanvas:t,closeCanvas:n,doCanvasAction:r,canvasState:s,isCanvasOpen:a}=Pp(),{title:i}=oz(e),{result:{context_uuid:l,backend_uuid:c}}=pn(),{trackEvent:u}=Te(),f=d.useCallback(()=>{a&&e.uuid===s?.assetUuid?n():(t(),r({type:"setAsset",assetUuid:e.uuid,title:i,backendUuid:c}),r({type:"setTab",tab:wd.Preview}),u("canvas opened",{source:"click",contextUUID:l,entryUUID:c,contentType:e.asset_type,assetUUID:e.uuid}))},[t,n,r,e.uuid,e.asset_type,i,c,a,s?.assetUuid,u,l]);return d.useMemo(()=>f,[f])};var pr="-ms-",i1="-moz-",$n="-webkit-",VIe="comm",z4="rule",iz="decl",SYt="@import",WIe="@keyframes",EYt="@layer",HIe=Math.abs,lz=String.fromCharCode,YL=Object.assign;function MYt(e,t){return _s(e,0)^45?(((t<<2^_s(e,0))<<2^_s(e,1))<<2^_s(e,2))<<2^_s(e,3):0}function zIe(e){return e.trim()}function Xc(e,t){return(e=t.exec(e))?e[0]:e}function on(e,t,n){return e.replace(t,n)}function H2(e,t,n){return e.indexOf(t,n)}function _s(e,t){return e.charCodeAt(t)|0}function Iy(e,t,n){return e.slice(t,n)}function Ll(e){return e.length}function GIe(e){return e.length}function y0(e,t){return t.push(e),e}function kYt(e,t){return e.map(t).join("")}function Die(e,t){return e.filter(function(n){return!Xc(n,t)})}var G4=1,Ry=1,qIe=0,ki=0,Yr=0,Zx="";function q4(e,t,n,r,s,a,i,l){return{value:e,root:t,parent:n,type:r,props:s,children:a,line:G4,column:Ry,length:i,return:"",siblings:l}}function od(e,t){return YL(q4("",null,null,"",null,null,0,e.siblings),e,{length:-e.length},t)}function yh(e){for(;e.root;)e=od(e.root,{children:[e]});y0(e,e.siblings)}function TYt(){return Yr}function NYt(){return Yr=ki>0?_s(Zx,--ki):0,Ry--,Yr===10&&(Ry=1,G4--),Yr}function tl(){return Yr=ki<qIe?_s(Zx,ki++):0,Ry++,Yr===10&&(Ry=1,G4++),Yr}function Tm(){return _s(Zx,ki)}function z2(){return ki}function K4(e,t){return Iy(Zx,e,t)}function QL(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function jYt(e){return G4=Ry=1,qIe=Ll(Zx=e),ki=0,[]}function AYt(e){return Zx="",e}function NR(e){return zIe(K4(ki-1,XL(e===91?e+2:e===40?e+1:e)))}function IYt(e){for(;(Yr=Tm())&&Yr<33;)tl();return QL(e)>2||QL(Yr)>3?"":" "}function RYt(e,t){for(;--t&&tl()&&!(Yr<48||Yr>102||Yr>57&&Yr<65||Yr>70&&Yr<97););return K4(e,z2()+(t<6&&Tm()==32&&tl()==32))}function XL(e){for(;tl();)switch(Yr){case e:return ki;case 34:case 39:e!==34&&e!==39&&XL(Yr);break;case 40:e===41&&XL(e);break;case 92:tl();break}return ki}function PYt(e,t){for(;tl()&&e+Yr!==57;)if(e+Yr===84&&Tm()===47)break;return"/*"+K4(t,ki-1)+"*"+lz(e===47?e:tl())}function LYt(e){for(;!QL(Tm());)tl();return K4(e,ki)}function OYt(e){return AYt(G2("",null,null,null,[""],e=jYt(e),0,[0],e))}function G2(e,t,n,r,s,a,i,l,c){for(var u=0,f=0,m=i,p=0,h=0,g=0,y=1,x=1,v=1,b=0,_="",w=s,C=a,S=r,E=_;x;)switch(g=b,b=tl()){case 40:if(g!=108&&_s(E,m-1)==58){H2(E+=on(NR(b),"&","&\f"),"&\f",HIe(u?l[u-1]:0))!=-1&&(v=-1);break}case 34:case 39:case 91:E+=NR(b);break;case 9:case 10:case 13:case 32:E+=IYt(g);break;case 92:E+=RYt(z2()-1,7);continue;case 47:switch(Tm()){case 42:case 47:y0(DYt(PYt(tl(),z2()),t,n,c),c);break;default:E+="/"}break;case 123*y:l[u++]=Ll(E)*v;case 125*y:case 59:case 0:switch(b){case 0:case 125:x=0;case 59+f:v==-1&&(E=on(E,/\f/g,"")),h>0&&Ll(E)-m&&y0(h>32?Uie(E+";",r,n,m-1,c):Uie(on(E," ","")+";",r,n,m-2,c),c);break;case 59:E+=";";default:if(y0(S=Fie(E,t,n,u,f,s,l,_,w=[],C=[],m,a),a),b===123)if(f===0)G2(E,t,S,S,w,a,m,l,C);else switch(p===99&&_s(E,3)===110?100:p){case 100:case 108:case 109:case 115:G2(e,S,S,r&&y0(Fie(e,S,S,0,0,s,l,_,s,w=[],m,C),C),s,C,m,l,r?w:C);break;default:G2(E,S,S,S,[""],C,0,l,C)}}u=f=h=0,y=v=1,_=E="",m=i;break;case 58:m=1+Ll(E),h=g;default:if(y<1){if(b==123)--y;else if(b==125&&y++==0&&NYt()==125)continue}switch(E+=lz(b),b*y){case 38:v=f>0?1:(E+="\f",-1);break;case 44:l[u++]=(Ll(E)-1)*v,v=1;break;case 64:Tm()===45&&(E+=NR(tl())),p=Tm(),f=m=Ll(_=E+=LYt(z2())),b++;break;case 45:g===45&&Ll(E)==2&&(y=0)}}return a}function Fie(e,t,n,r,s,a,i,l,c,u,f,m){for(var p=s-1,h=s===0?a:[""],g=GIe(h),y=0,x=0,v=0;y<r;++y)for(var b=0,_=Iy(e,p+1,p=HIe(x=i[y])),w=e;b<g;++b)(w=zIe(x>0?h[b]+" "+_:on(_,/&\f/g,h[b])))&&(c[v++]=w);return q4(e,t,n,s===0?z4:l,c,u,f,m)}function DYt(e,t,n,r){return q4(e,t,n,VIe,lz(TYt()),Iy(e,2,-2),0,r)}function Uie(e,t,n,r,s){return q4(e,t,n,iz,Iy(e,0,r),Iy(e,r+1,-1),r,s)}function KIe(e,t,n){switch(MYt(e,t)){case 5103:return $n+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return $n+e+e;case 4789:return i1+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return $n+e+i1+e+pr+e+e;case 5936:switch(_s(e,t+11)){case 114:return $n+e+pr+on(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return $n+e+pr+on(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return $n+e+pr+on(e,/[svh]\w+-[tblr]{2}/,"lr")+e}case 6828:case 4268:case 2903:return $n+e+pr+e+e;case 6165:return $n+e+pr+"flex-"+e+e;case 5187:return $n+e+on(e,/(\w+).+(:[^]+)/,$n+"box-$1$2"+pr+"flex-$1$2")+e;case 5443:return $n+e+pr+"flex-item-"+on(e,/flex-|-self/g,"")+(Xc(e,/flex-|baseline/)?"":pr+"grid-row-"+on(e,/flex-|-self/g,""))+e;case 4675:return $n+e+pr+"flex-line-pack"+on(e,/align-content|flex-|-self/g,"")+e;case 5548:return $n+e+pr+on(e,"shrink","negative")+e;case 5292:return $n+e+pr+on(e,"basis","preferred-size")+e;case 6060:return $n+"box-"+on(e,"-grow","")+$n+e+pr+on(e,"grow","positive")+e;case 4554:return $n+on(e,/([^-])(transform)/g,"$1"+$n+"$2")+e;case 6187:return on(on(on(e,/(zoom-|grab)/,$n+"$1"),/(image-set)/,$n+"$1"),e,"")+e;case 5495:case 3959:return on(e,/(image-set\([^]*)/,$n+"$1$`$1");case 4968:return on(on(e,/(.+:)(flex-)?(.*)/,$n+"box-pack:$3"+pr+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+$n+e+e;case 4200:if(!Xc(e,/flex-|baseline/))return pr+"grid-column-align"+Iy(e,t)+e;break;case 2592:case 3360:return pr+on(e,"template-","")+e;case 4384:case 3616:return n&&n.some(function(r,s){return t=s,Xc(r.props,/grid-\w+-end/)})?~H2(e+(n=n[t].value),"span",0)?e:pr+on(e,"-start","")+e+pr+"grid-row-span:"+(~H2(n,"span",0)?Xc(n,/\d+/):+Xc(n,/\d+/)-+Xc(e,/\d+/))+";":pr+on(e,"-start","")+e;case 4896:case 4128:return n&&n.some(function(r){return Xc(r.props,/grid-\w+-start/)})?e:pr+on(on(e,"-end","-span"),"span ","")+e;case 4095:case 3583:case 4068:case 2532:return on(e,/(.+)-inline(.+)/,$n+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ll(e)-1-t>6)switch(_s(e,t+1)){case 109:if(_s(e,t+4)!==45)break;case 102:return on(e,/(.+:)(.+)-([^]+)/,"$1"+$n+"$2-$3$1"+i1+(_s(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~H2(e,"stretch",0)?KIe(on(e,"stretch","fill-available"),t,n)+e:e}break;case 5152:case 5920:return on(e,/(.+?):(\d+)(\s*\/\s*(span)?\s*(\d+))?(.*)/,function(r,s,a,i,l,c,u){return pr+s+":"+a+u+(i?pr+s+"-span:"+(l?c:+c-+a)+u:"")+e});case 4949:if(_s(e,t+6)===121)return on(e,":",":"+$n)+e;break;case 6444:switch(_s(e,_s(e,14)===45?18:11)){case 120:return on(e,/(.+:)([^;\s!]+)(;|(\s+)?!.+)?/,"$1"+$n+(_s(e,14)===45?"inline-":"")+"box$3$1"+$n+"$2$3$1"+pr+"$2box$3")+e;case 100:return on(e,":",":"+pr)+e}break;case 5719:case 2647:case 2135:case 3927:case 2391:return on(e,"scroll-","scroll-snap-")+e}return e}function Tk(e,t){for(var n="",r=0;r<e.length;r++)n+=t(e[r],r,e,t)||"";return n}function FYt(e,t,n,r){switch(e.type){case EYt:if(e.children.length)break;case SYt:case iz:return e.return=e.return||e.value;case VIe:return"";case WIe:return e.return=e.value+"{"+Tk(e.children,r)+"}";case z4:if(!Ll(e.value=e.props.join(",")))return""}return Ll(n=Tk(e.children,r))?e.return=e.value+"{"+n+"}":""}function UYt(e){var t=GIe(e);return function(n,r,s,a){for(var i="",l=0;l<t;l++)i+=e[l](n,r,s,a)||"";return i}}function BYt(e){return function(t){t.root||(t=t.return)&&e(t)}}function $Yt(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case iz:e.return=KIe(e.value,e.length,n);return;case WIe:return Tk([od(e,{value:on(e.value,"@","@"+$n)})],r);case z4:if(e.length)return kYt(n=e.props,function(s){switch(Xc(s,r=/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":yh(od(e,{props:[on(s,/:(read-\w+)/,":"+i1+"$1")]})),yh(od(e,{props:[s]})),YL(e,{props:Die(n,r)});break;case"::placeholder":yh(od(e,{props:[on(s,/:(plac\w+)/,":"+$n+"input-$1")]})),yh(od(e,{props:[on(s,/:(plac\w+)/,":"+i1+"$1")]})),yh(od(e,{props:[on(s,/:(plac\w+)/,pr+"input-$1")]})),yh(od(e,{props:[s]})),YL(e,{props:Die(n,r)});break}return""})}}var VYt={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},jo={},Py=typeof process<"u"&&jo!==void 0&&(jo.REACT_APP_SC_ATTR||jo.SC_ATTR)||"data-styled",YIe="active",QIe="data-styled-version",Y4="6.1.15",cz=`/*!sc*/
`,Nk=typeof window<"u"&&"HTMLElement"in window,WYt=!!(typeof SC_DISABLE_SPEEDY=="boolean"?SC_DISABLE_SPEEDY:typeof process<"u"&&jo!==void 0&&jo.REACT_APP_SC_DISABLE_SPEEDY!==void 0&&jo.REACT_APP_SC_DISABLE_SPEEDY!==""?jo.REACT_APP_SC_DISABLE_SPEEDY!=="false"&&jo.REACT_APP_SC_DISABLE_SPEEDY:typeof process<"u"&&jo!==void 0&&jo.SC_DISABLE_SPEEDY!==void 0&&jo.SC_DISABLE_SPEEDY!==""&&jo.SC_DISABLE_SPEEDY!=="false"&&jo.SC_DISABLE_SPEEDY),Q4=Object.freeze([]),Ly=Object.freeze({});function XIe(e,t,n){return n===void 0&&(n=Ly),e.theme!==n.theme&&e.theme||t||n.theme}var ZIe=new Set(["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","tr","track","u","ul","use","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","marker","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"]),HYt=/[!"#$%&'()*+,./:;<=>?@[\\\]^`{|}~-]+/g,zYt=/(^-|-$)/g;function Bie(e){return e.replace(HYt,"-").replace(zYt,"")}var GYt=/(a)(d)/gi,VS=52,$ie=function(e){return String.fromCharCode(e+(e>25?39:97))};function ZL(e){var t,n="";for(t=Math.abs(e);t>VS;t=t/VS|0)n=$ie(t%VS)+n;return($ie(t%VS)+n).replace(GYt,"$1-$2")}var jR,JIe=5381,Yh=function(e,t){for(var n=t.length;n;)e=33*e^t.charCodeAt(--n);return e},eRe=function(e){return Yh(JIe,e)};function qYt(e){return ZL(eRe(e)>>>0)}function tRe(e){return e.displayName||e.name||"Component"}function AR(e){return typeof e=="string"&&!0}var nRe=typeof Symbol=="function"&&Symbol.for,rRe=nRe?Symbol.for("react.memo"):60115,KYt=nRe?Symbol.for("react.forward_ref"):60112,YYt={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},QYt={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},sRe={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},XYt=((jR={})[KYt]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},jR[rRe]=sRe,jR);function Vie(e){return("type"in(t=e)&&t.type.$$typeof)===rRe?sRe:"$$typeof"in e?XYt[e.$$typeof]:YYt;var t}var ZYt=Object.defineProperty,JYt=Object.getOwnPropertyNames,Wie=Object.getOwnPropertySymbols,eQt=Object.getOwnPropertyDescriptor,tQt=Object.getPrototypeOf,Hie=Object.prototype;function uz(e,t,n){if(typeof t!="string"){if(Hie){var r=tQt(t);r&&r!==Hie&&uz(e,r,n)}var s=JYt(t);Wie&&(s=s.concat(Wie(t)));for(var a=Vie(e),i=Vie(t),l=0;l<s.length;++l){var c=s[l];if(!(c in QYt||n&&n[c]||i&&c in i||a&&c in a)){var u=eQt(t,c);try{ZYt(e,c,u)}catch{}}}}return e}function Oy(e){return typeof e=="function"}function dz(e){return typeof e=="object"&&"styledComponentId"in e}function gm(e,t){return e&&t?"".concat(e," ").concat(t):e||t||""}function zie(e,t){if(e.length===0)return"";for(var n=e[0],r=1;r<e.length;r++)n+=e[r];return n}function Rb(e){return e!==null&&typeof e=="object"&&e.constructor.name===Object.name&&!("props"in e&&e.$$typeof)}function JL(e,t,n){if(n===void 0&&(n=!1),!n&&!Rb(e)&&!Array.isArray(e))return t;if(Array.isArray(t))for(var r=0;r<t.length;r++)e[r]=JL(e[r],t[r]);else if(Rb(t))for(var r in t)e[r]=JL(e[r],t[r]);return e}function fz(e,t){Object.defineProperty(e,"toString",{value:t})}function qw(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return new Error("An error occurred. See https://github.com/styled-components/styled-components/blob/main/packages/styled-components/src/utils/errors.md#".concat(e," for more information.").concat(t.length>0?" Args: ".concat(t.join(", ")):""))}var nQt=function(){function e(t){this.groupSizes=new Uint32Array(512),this.length=512,this.tag=t}return e.prototype.indexOfGroup=function(t){for(var n=0,r=0;r<t;r++)n+=this.groupSizes[r];return n},e.prototype.insertRules=function(t,n){if(t>=this.groupSizes.length){for(var r=this.groupSizes,s=r.length,a=s;t>=a;)if((a<<=1)<0)throw qw(16,"".concat(t));this.groupSizes=new Uint32Array(a),this.groupSizes.set(r),this.length=a;for(var i=s;i<a;i++)this.groupSizes[i]=0}for(var l=this.indexOfGroup(t+1),c=(i=0,n.length);i<c;i++)this.tag.insertRule(l,n[i])&&(this.groupSizes[t]++,l++)},e.prototype.clearGroup=function(t){if(t<this.length){var n=this.groupSizes[t],r=this.indexOfGroup(t),s=r+n;this.groupSizes[t]=0;for(var a=r;a<s;a++)this.tag.deleteRule(r)}},e.prototype.getGroup=function(t){var n="";if(t>=this.length||this.groupSizes[t]===0)return n;for(var r=this.groupSizes[t],s=this.indexOfGroup(t),a=s+r,i=s;i<a;i++)n+="".concat(this.tag.getRule(i)).concat(cz);return n},e}(),q2=new Map,jk=new Map,K2=1,WS=function(e){if(q2.has(e))return q2.get(e);for(;jk.has(K2);)K2++;var t=K2++;return q2.set(e,t),jk.set(t,e),t},rQt=function(e,t){K2=t+1,q2.set(e,t),jk.set(t,e)},sQt="style[".concat(Py,"][").concat(QIe,'="').concat(Y4,'"]'),aQt=new RegExp("^".concat(Py,'\\.g(\\d+)\\[id="([\\w\\d-]+)"\\].*?"([^"]*)')),oQt=function(e,t,n){for(var r,s=n.split(","),a=0,i=s.length;a<i;a++)(r=s[a])&&e.registerName(t,r)},iQt=function(e,t){for(var n,r=((n=t.textContent)!==null&&n!==void 0?n:"").split(cz),s=[],a=0,i=r.length;a<i;a++){var l=r[a].trim();if(l){var c=l.match(aQt);if(c){var u=0|parseInt(c[1],10),f=c[2];u!==0&&(rQt(f,u),oQt(e,f,c[3]),e.getTag().insertRules(u,s)),s.length=0}else s.push(l)}}},Gie=function(e){for(var t=document.querySelectorAll(sQt),n=0,r=t.length;n<r;n++){var s=t[n];s&&s.getAttribute(Py)!==YIe&&(iQt(e,s),s.parentNode&&s.parentNode.removeChild(s))}};function lQt(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:null}var aRe=function(e){var t=document.head,n=e||t,r=document.createElement("style"),s=function(l){var c=Array.from(l.querySelectorAll("style[".concat(Py,"]")));return c[c.length-1]}(n),a=s!==void 0?s.nextSibling:null;r.setAttribute(Py,YIe),r.setAttribute(QIe,Y4);var i=lQt();return i&&r.setAttribute("nonce",i),n.insertBefore(r,a),r},cQt=function(){function e(t){this.element=aRe(t),this.element.appendChild(document.createTextNode("")),this.sheet=function(n){if(n.sheet)return n.sheet;for(var r=document.styleSheets,s=0,a=r.length;s<a;s++){var i=r[s];if(i.ownerNode===n)return i}throw qw(17)}(this.element),this.length=0}return e.prototype.insertRule=function(t,n){try{return this.sheet.insertRule(n,t),this.length++,!0}catch{return!1}},e.prototype.deleteRule=function(t){this.sheet.deleteRule(t),this.length--},e.prototype.getRule=function(t){var n=this.sheet.cssRules[t];return n&&n.cssText?n.cssText:""},e}(),uQt=function(){function e(t){this.element=aRe(t),this.nodes=this.element.childNodes,this.length=0}return e.prototype.insertRule=function(t,n){if(t<=this.length&&t>=0){var r=document.createTextNode(n);return this.element.insertBefore(r,this.nodes[t]||null),this.length++,!0}return!1},e.prototype.deleteRule=function(t){this.element.removeChild(this.nodes[t]),this.length--},e.prototype.getRule=function(t){return t<this.length?this.nodes[t].textContent:""},e}(),dQt=function(){function e(t){this.rules=[],this.length=0}return e.prototype.insertRule=function(t,n){return t<=this.length&&(this.rules.splice(t,0,n),this.length++,!0)},e.prototype.deleteRule=function(t){this.rules.splice(t,1),this.length--},e.prototype.getRule=function(t){return t<this.length?this.rules[t]:""},e}(),qie=Nk,fQt={isServer:!Nk,useCSSOMInjection:!WYt},oRe=function(){function e(t,n,r){t===void 0&&(t=Ly),n===void 0&&(n={});var s=this;this.options=Oo(Oo({},fQt),t),this.gs=n,this.names=new Map(r),this.server=!!t.isServer,!this.server&&Nk&&qie&&(qie=!1,Gie(this)),fz(this,function(){return function(a){for(var i=a.getTag(),l=i.length,c="",u=function(m){var p=function(v){return jk.get(v)}(m);if(p===void 0)return"continue";var h=a.names.get(p),g=i.getGroup(m);if(h===void 0||!h.size||g.length===0)return"continue";var y="".concat(Py,".g").concat(m,'[id="').concat(p,'"]'),x="";h!==void 0&&h.forEach(function(v){v.length>0&&(x+="".concat(v,","))}),c+="".concat(g).concat(y,'{content:"').concat(x,'"}').concat(cz)},f=0;f<l;f++)u(f);return c}(s)})}return e.registerId=function(t){return WS(t)},e.prototype.rehydrate=function(){!this.server&&Nk&&Gie(this)},e.prototype.reconstructWithOptions=function(t,n){return n===void 0&&(n=!0),new e(Oo(Oo({},this.options),t),this.gs,n&&this.names||void 0)},e.prototype.allocateGSInstance=function(t){return this.gs[t]=(this.gs[t]||0)+1},e.prototype.getTag=function(){return this.tag||(this.tag=(t=function(n){var r=n.useCSSOMInjection,s=n.target;return n.isServer?new dQt(s):r?new cQt(s):new uQt(s)}(this.options),new nQt(t)));var t},e.prototype.hasNameForId=function(t,n){return this.names.has(t)&&this.names.get(t).has(n)},e.prototype.registerName=function(t,n){if(WS(t),this.names.has(t))this.names.get(t).add(n);else{var r=new Set;r.add(n),this.names.set(t,r)}},e.prototype.insertRules=function(t,n,r){this.registerName(t,n),this.getTag().insertRules(WS(t),r)},e.prototype.clearNames=function(t){this.names.has(t)&&this.names.get(t).clear()},e.prototype.clearRules=function(t){this.getTag().clearGroup(WS(t)),this.clearNames(t)},e.prototype.clearTag=function(){this.tag=void 0},e}(),mQt=/&/g,pQt=/^\s*\/\/.*$/gm;function iRe(e,t){return e.map(function(n){return n.type==="rule"&&(n.value="".concat(t," ").concat(n.value),n.value=n.value.replaceAll(",",",".concat(t," ")),n.props=n.props.map(function(r){return"".concat(t," ").concat(r)})),Array.isArray(n.children)&&n.type!=="@keyframes"&&(n.children=iRe(n.children,t)),n})}function hQt(e){var t,n,r,s=Ly,a=s.options,i=a===void 0?Ly:a,l=s.plugins,c=l===void 0?Q4:l,u=function(p,h,g){return g.startsWith(n)&&g.endsWith(n)&&g.replaceAll(n,"").length>0?".".concat(t):p},f=c.slice();f.push(function(p){p.type===z4&&p.value.includes("&")&&(p.props[0]=p.props[0].replace(mQt,n).replace(r,u))}),i.prefix&&f.push($Yt),f.push(FYt);var m=function(p,h,g,y){h===void 0&&(h=""),g===void 0&&(g=""),y===void 0&&(y="&"),t=y,n=h,r=new RegExp("\\".concat(n,"\\b"),"g");var x=p.replace(pQt,""),v=OYt(g||h?"".concat(g," ").concat(h," { ").concat(x," }"):x);i.namespace&&(v=iRe(v,i.namespace));var b=[];return Tk(v,UYt(f.concat(BYt(function(_){return b.push(_)})))),b};return m.hash=c.length?c.reduce(function(p,h){return h.name||qw(15),Yh(p,h.name)},JIe).toString():"",m}var gQt=new oRe,eO=hQt(),lRe=I.createContext({shouldForwardProp:void 0,styleSheet:gQt,stylis:eO});lRe.Consumer;I.createContext(void 0);function Kie(){return d.useContext(lRe)}var yQt=function(){function e(t,n){var r=this;this.inject=function(s,a){a===void 0&&(a=eO);var i=r.name+a.hash;s.hasNameForId(r.id,i)||s.insertRules(r.id,i,a(r.rules,i,"@keyframes"))},this.name=t,this.id="sc-keyframes-".concat(t),this.rules=n,fz(this,function(){throw qw(12,String(r.name))})}return e.prototype.getName=function(t){return t===void 0&&(t=eO),this.name+t.hash},e}(),xQt=function(e){return e>="A"&&e<="Z"};function Yie(e){for(var t="",n=0;n<e.length;n++){var r=e[n];if(n===1&&r==="-"&&e[0]==="-")return e;xQt(r)?t+="-"+r.toLowerCase():t+=r}return t.startsWith("ms-")?"-"+t:t}var cRe=function(e){return e==null||e===!1||e===""},uRe=function(e){var t,n,r=[];for(var s in e){var a=e[s];e.hasOwnProperty(s)&&!cRe(a)&&(Array.isArray(a)&&a.isCss||Oy(a)?r.push("".concat(Yie(s),":"),a,";"):Rb(a)?r.push.apply(r,X2(X2(["".concat(s," {")],uRe(a),!1),["}"],!1)):r.push("".concat(Yie(s),": ").concat((t=s,(n=a)==null||typeof n=="boolean"||n===""?"":typeof n!="number"||n===0||t in VYt||t.startsWith("--")?String(n).trim():"".concat(n,"px")),";")))}return r};function Nm(e,t,n,r){if(cRe(e))return[];if(dz(e))return[".".concat(e.styledComponentId)];if(Oy(e)){if(!Oy(a=e)||a.prototype&&a.prototype.isReactComponent||!t)return[e];var s=e(t);return Nm(s,t,n,r)}var a;return e instanceof yQt?n?(e.inject(n,r),[e.getName(r)]):[e]:Rb(e)?uRe(e):Array.isArray(e)?Array.prototype.concat.apply(Q4,e.map(function(i){return Nm(i,t,n,r)})):[e.toString()]}function vQt(e){for(var t=0;t<e.length;t+=1){var n=e[t];if(Oy(n)&&!dz(n))return!1}return!0}var bQt=eRe(Y4),_Qt=function(){function e(t,n,r){this.rules=t,this.staticRulesId="",this.isStatic=(r===void 0||r.isStatic)&&vQt(t),this.componentId=n,this.baseHash=Yh(bQt,n),this.baseStyle=r,oRe.registerId(n)}return e.prototype.generateAndInjectStyles=function(t,n,r){var s=this.baseStyle?this.baseStyle.generateAndInjectStyles(t,n,r):"";if(this.isStatic&&!r.hash)if(this.staticRulesId&&n.hasNameForId(this.componentId,this.staticRulesId))s=gm(s,this.staticRulesId);else{var a=zie(Nm(this.rules,t,n,r)),i=ZL(Yh(this.baseHash,a)>>>0);if(!n.hasNameForId(this.componentId,i)){var l=r(a,".".concat(i),void 0,this.componentId);n.insertRules(this.componentId,i,l)}s=gm(s,i),this.staticRulesId=i}else{for(var c=Yh(this.baseHash,r.hash),u="",f=0;f<this.rules.length;f++){var m=this.rules[f];if(typeof m=="string")u+=m;else if(m){var p=zie(Nm(m,t,n,r));c=Yh(c,p+f),u+=p}}if(u){var h=ZL(c>>>0);n.hasNameForId(this.componentId,h)||n.insertRules(this.componentId,h,r(u,".".concat(h),void 0,this.componentId)),s=gm(s,h)}}return s},e}(),mz=I.createContext(void 0);mz.Consumer;var IR={};function wQt(e,t,n){var r=dz(e),s=e,a=!AR(e),i=t.attrs,l=i===void 0?Q4:i,c=t.componentId,u=c===void 0?function(w,C){var S=typeof w!="string"?"sc":Bie(w);IR[S]=(IR[S]||0)+1;var E="".concat(S,"-").concat(qYt(Y4+S+IR[S]));return C?"".concat(C,"-").concat(E):E}(t.displayName,t.parentComponentId):c,f=t.displayName,m=f===void 0?function(w){return AR(w)?"styled.".concat(w):"Styled(".concat(tRe(w),")")}(e):f,p=t.displayName&&t.componentId?"".concat(Bie(t.displayName),"-").concat(t.componentId):t.componentId||u,h=r&&s.attrs?s.attrs.concat(l).filter(Boolean):l,g=t.shouldForwardProp;if(r&&s.shouldForwardProp){var y=s.shouldForwardProp;if(t.shouldForwardProp){var x=t.shouldForwardProp;g=function(w,C){return y(w,C)&&x(w,C)}}else g=y}var v=new _Qt(n,p,r?s.componentStyle:void 0);function b(w,C){return function(S,E,k){var M=S.attrs,j=S.componentStyle,R=S.defaultProps,O=S.foldedComponentIds,D=S.styledComponentId,P=S.target,A=I.useContext(mz),T=Kie(),N=S.shouldForwardProp||T.shouldForwardProp,L=XIe(E,A,R)||Ly,U=function(H,K,G){for(var ee,Y=Oo(Oo({},K),{className:void 0,theme:G}),te=0;te<H.length;te+=1){var se=Oy(ee=H[te])?ee(Y):ee;for(var ae in se)Y[ae]=ae==="className"?gm(Y[ae],se[ae]):ae==="style"?Oo(Oo({},Y[ae]),se[ae]):se[ae]}return K.className&&(Y.className=gm(Y.className,K.className)),Y}(M,E,L),$=U.as||P,V={};for(var W in U)U[W]===void 0||W[0]==="$"||W==="as"||W==="theme"&&U.theme===L||(W==="forwardedAs"?V.as=U.forwardedAs:N&&!N(W,$)||(V[W]=U[W]));var Q=function(H,K){var G=Kie(),ee=H.generateAndInjectStyles(K,G.styleSheet,G.stylis);return ee}(j,U),q=gm(O,D);return Q&&(q+=" "+Q),U.className&&(q+=" "+U.className),V[AR($)&&!ZIe.has($)?"class":"className"]=q,k&&(V.ref=k),d.createElement($,V)}(_,w,C)}b.displayName=m;var _=I.forwardRef(b);return _.attrs=h,_.componentStyle=v,_.displayName=m,_.shouldForwardProp=g,_.foldedComponentIds=r?gm(s.foldedComponentIds,s.styledComponentId):"",_.styledComponentId=p,_.target=r?s.target:e,Object.defineProperty(_,"defaultProps",{get:function(){return this._foldedDefaultProps},set:function(w){this._foldedDefaultProps=r?function(C){for(var S=[],E=1;E<arguments.length;E++)S[E-1]=arguments[E];for(var k=0,M=S;k<M.length;k++)JL(C,M[k],!0);return C}({},s.defaultProps,w):w}}),fz(_,function(){return".".concat(_.styledComponentId)}),a&&uz(_,e,{attrs:!0,componentStyle:!0,displayName:!0,foldedComponentIds:!0,shouldForwardProp:!0,styledComponentId:!0,target:!0}),_}function Qie(e,t){for(var n=[e[0]],r=0,s=t.length;r<s;r+=1)n.push(t[r],e[r+1]);return n}var Xie=function(e){return Object.assign(e,{isCss:!0})};function CQt(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(Oy(e)||Rb(e))return Xie(Nm(Qie(Q4,X2([e],t,!0))));var r=e;return t.length===0&&r.length===1&&typeof r[0]=="string"?Nm(r):Xie(Nm(Qie(r,t)))}function tO(e,t,n){if(n===void 0&&(n=Ly),!t)throw qw(1,t);var r=function(s){for(var a=[],i=1;i<arguments.length;i++)a[i-1]=arguments[i];return e(t,n,CQt.apply(void 0,X2([s],a,!1)))};return r.attrs=function(s){return tO(e,t,Oo(Oo({},n),{attrs:Array.prototype.concat(n.attrs,s).filter(Boolean)}))},r.withConfig=function(s){return tO(e,t,Oo(Oo({},n),s))},r}var dRe=function(e){return tO(wQt,e)},X4=dRe;ZIe.forEach(function(e){X4[e]=dRe(e)});function SQt(e){var t=I.forwardRef(function(n,r){var s=XIe(n,I.useContext(mz),e.defaultProps);return I.createElement(e,Oo({},n,{theme:s,ref:r}))});return t.displayName="WithTheme(".concat(tRe(e),")"),uz(t,e)}function EQt(e,t){if(e==null)return{};var n,r,s=f0e(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)===-1&&{}.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function MQt(e){if(Array.isArray(e))return w8(e)}function kQt(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function TQt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nO(e){return MQt(e)||kQt(e)||qut(e)||TQt()}function Zie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Qh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Zie(Object(n),!0).forEach(function(r){Kc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zie(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function NQt(e){var t=e.length;if(t===0||t===1)return e;if(t===2)return[e[0],e[1],"".concat(e[0],".").concat(e[1]),"".concat(e[1],".").concat(e[0])];if(t===3)return[e[0],e[1],e[2],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0])];if(t>=4)return[e[0],e[1],e[2],e[3],"".concat(e[0],".").concat(e[1]),"".concat(e[0],".").concat(e[2]),"".concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[0]),"".concat(e[1],".").concat(e[2]),"".concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[1]),"".concat(e[2],".").concat(e[3]),"".concat(e[3],".").concat(e[0]),"".concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[0]),"".concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[0],".").concat(e[1],".").concat(e[2],".").concat(e[3]),"".concat(e[0],".").concat(e[1],".").concat(e[3],".").concat(e[2]),"".concat(e[0],".").concat(e[2],".").concat(e[1],".").concat(e[3]),"".concat(e[0],".").concat(e[2],".").concat(e[3],".").concat(e[1]),"".concat(e[0],".").concat(e[3],".").concat(e[1],".").concat(e[2]),"".concat(e[0],".").concat(e[3],".").concat(e[2],".").concat(e[1]),"".concat(e[1],".").concat(e[0],".").concat(e[2],".").concat(e[3]),"".concat(e[1],".").concat(e[0],".").concat(e[3],".").concat(e[2]),"".concat(e[1],".").concat(e[2],".").concat(e[0],".").concat(e[3]),"".concat(e[1],".").concat(e[2],".").concat(e[3],".").concat(e[0]),"".concat(e[1],".").concat(e[3],".").concat(e[0],".").concat(e[2]),"".concat(e[1],".").concat(e[3],".").concat(e[2],".").concat(e[0]),"".concat(e[2],".").concat(e[0],".").concat(e[1],".").concat(e[3]),"".concat(e[2],".").concat(e[0],".").concat(e[3],".").concat(e[1]),"".concat(e[2],".").concat(e[1],".").concat(e[0],".").concat(e[3]),"".concat(e[2],".").concat(e[1],".").concat(e[3],".").concat(e[0]),"".concat(e[2],".").concat(e[3],".").concat(e[0],".").concat(e[1]),"".concat(e[2],".").concat(e[3],".").concat(e[1],".").concat(e[0]),"".concat(e[3],".").concat(e[0],".").concat(e[1],".").concat(e[2]),"".concat(e[3],".").concat(e[0],".").concat(e[2],".").concat(e[1]),"".concat(e[3],".").concat(e[1],".").concat(e[0],".").concat(e[2]),"".concat(e[3],".").concat(e[1],".").concat(e[2],".").concat(e[0]),"".concat(e[3],".").concat(e[2],".").concat(e[0],".").concat(e[1]),"".concat(e[3],".").concat(e[2],".").concat(e[1],".").concat(e[0])]}var RR={};function jQt(e){if(e.length===0||e.length===1)return e;var t=e.join(".");return RR[t]||(RR[t]=NQt(e)),RR[t]}function AQt(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=e.filter(function(a){return a!=="token"}),s=jQt(r);return s.reduce(function(a,i){return Qh(Qh({},a),n[i])},t)}function Jie(e){return e.join(" ")}function IQt(e,t){var n=0;return function(r){return n+=1,r.map(function(s,a){return fRe({node:s,stylesheet:e,useInlineStyles:t,key:"code-segment-".concat(n,"-").concat(a)})})}}function fRe(e){var t=e.node,n=e.stylesheet,r=e.style,s=r===void 0?{}:r,a=e.useInlineStyles,i=e.key,l=t.properties,c=t.type,u=t.tagName,f=t.value;if(c==="text")return f;if(u){var m=IQt(n,a),p;if(!a)p=Qh(Qh({},l),{},{className:Jie(l.className)});else{var h=Object.keys(n).reduce(function(v,b){return b.split(".").forEach(function(_){v.includes(_)||v.push(_)}),v},[]),g=l.className&&l.className.includes("token")?["token"]:[],y=l.className&&g.concat(l.className.filter(function(v){return!h.includes(v)}));p=Qh(Qh({},l),{},{className:Jie(y)||void 0,style:AQt(l.className,Object.assign({},l.style,s),n)})}var x=m(t.children);return I.createElement(u,q1({key:i},p),x)}}const RQt=function(e,t){var n=e.listLanguages();return n.indexOf(t)!==-1};var PQt=["language","children","style","customStyle","codeTagProps","useInlineStyles","showLineNumbers","showInlineLineNumbers","startingLineNumber","lineNumberContainerStyle","lineNumberStyle","wrapLines","wrapLongLines","lineProps","renderer","PreTag","CodeTag","code","astGenerator"];function ele(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Cd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ele(Object(n),!0).forEach(function(r){Kc(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ele(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}var LQt=/\n/g;function OQt(e){return e.match(LQt)}function DQt(e){var t=e.lines,n=e.startingLineNumber,r=e.style;return t.map(function(s,a){var i=a+n;return I.createElement("span",{key:"line-".concat(a),className:"react-syntax-highlighter-line-number",style:typeof r=="function"?r(i):r},"".concat(i,`
`))})}function FQt(e){var t=e.codeString,n=e.codeStyle,r=e.containerStyle,s=r===void 0?{float:"left",paddingRight:"10px"}:r,a=e.numberStyle,i=a===void 0?{}:a,l=e.startingLineNumber;return I.createElement("code",{style:Object.assign({},n,s)},DQt({lines:t.replace(/\n$/,"").split(`
`),style:i,startingLineNumber:l}))}function UQt(e){return"".concat(e.toString().length,".25em")}function mRe(e,t){return{type:"element",tagName:"span",properties:{key:"line-number--".concat(e),className:["comment","linenumber","react-syntax-highlighter-line-number"],style:t},children:[{type:"text",value:e}]}}function pRe(e,t,n){var r={display:"inline-block",minWidth:UQt(n),paddingRight:"1em",textAlign:"right",userSelect:"none"},s=typeof e=="function"?e(t):e,a=Cd(Cd({},r),s);return a}function Y2(e){var t=e.children,n=e.lineNumber,r=e.lineNumberStyle,s=e.largestLineNumber,a=e.showInlineLineNumbers,i=e.lineProps,l=i===void 0?{}:i,c=e.className,u=c===void 0?[]:c,f=e.showLineNumbers,m=e.wrapLongLines,p=e.wrapLines,h=p===void 0?!1:p,g=h?Cd({},typeof l=="function"?l(n):l):{};if(g.className=g.className?[].concat(nO(g.className.trim().split(/\s+/)),nO(u)):u,n&&a){var y=pRe(r,n,s);t.unshift(mRe(n,y))}return m&f&&(g.style=Cd({display:"flex"},g.style)),{type:"element",tagName:"span",properties:g,children:t}}function hRe(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],r=0;r<e.length;r++){var s=e[r];if(s.type==="text")n.push(Y2({children:[s],className:nO(new Set(t))}));else if(s.children){var a=t.concat(s.properties.className);hRe(s.children,a).forEach(function(i){return n.push(i)})}}return n}function BQt(e,t,n,r,s,a,i,l,c){var u,f=hRe(e.value),m=[],p=-1,h=0;function g(C,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return Y2({children:C,lineNumber:S,lineNumberStyle:l,largestLineNumber:i,showInlineLineNumbers:s,lineProps:n,className:E,showLineNumbers:r,wrapLongLines:c,wrapLines:t})}function y(C,S){if(r&&S&&s){var E=pRe(l,S,i);C.unshift(mRe(S,E))}return C}function x(C,S){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];return t||E.length>0?g(C,S,E):y(C,S)}for(var v=function(){var S=f[h],E=S.children[0].value,k=OQt(E);if(k){var M=E.split(`
`);M.forEach(function(j,R){var O=r&&m.length+a,D={type:"text",value:"".concat(j,`
`)};if(R===0){var P=f.slice(p+1,h).concat(Y2({children:[D],className:S.properties.className})),A=x(P,O);m.push(A)}else if(R===M.length-1){var T=f[h+1]&&f[h+1].children&&f[h+1].children[0],N={type:"text",value:"".concat(j)};if(T){var L=Y2({children:[N],className:S.properties.className});f.splice(h+1,0,L)}else{var U=[N],$=x(U,O,S.properties.className);m.push($)}}else{var V=[D],W=x(V,O,S.properties.className);m.push(W)}}),p=h}h++};h<f.length;)v();if(p!==f.length-1){var b=f.slice(p+1,f.length);if(b&&b.length){var _=r&&m.length+a,w=x(b,_);m.push(w)}}return t?m:(u=[]).concat.apply(u,m)}function $Qt(e){var t=e.rows,n=e.stylesheet,r=e.useInlineStyles;return t.map(function(s,a){return fRe({node:s,stylesheet:n,useInlineStyles:r,key:"code-segement".concat(a)})})}function gRe(e){return e&&typeof e.highlightAuto<"u"}function VQt(e){var t=e.astGenerator,n=e.language,r=e.code,s=e.defaultCodeValue;if(gRe(t)){var a=RQt(t,n);return n==="text"?{value:s,language:"text"}:a?t.highlight(n,r):t.highlightAuto(r)}try{return n&&n!=="text"?{value:t.highlight(r,n)}:{value:s}}catch{return{value:s}}}function WQt(e,t){return function(r){var s=r.language,a=r.children,i=r.style,l=i===void 0?t:i,c=r.customStyle,u=c===void 0?{}:c,f=r.codeTagProps,m=f===void 0?{className:s?"language-".concat(s):void 0,style:Cd(Cd({},l['code[class*="language-"]']),l['code[class*="language-'.concat(s,'"]')])}:f,p=r.useInlineStyles,h=p===void 0?!0:p,g=r.showLineNumbers,y=g===void 0?!1:g,x=r.showInlineLineNumbers,v=x===void 0?!0:x,b=r.startingLineNumber,_=b===void 0?1:b,w=r.lineNumberContainerStyle,C=r.lineNumberStyle,S=C===void 0?{}:C,E=r.wrapLines,k=r.wrapLongLines,M=k===void 0?!1:k,j=r.lineProps,R=j===void 0?{}:j,O=r.renderer,D=r.PreTag,P=D===void 0?"pre":D,A=r.CodeTag,T=A===void 0?"code":A,N=r.code,L=N===void 0?(Array.isArray(a)?a[0]:a)||"":N,U=r.astGenerator,$=EQt(r,PQt);U=U||e;var V=y?I.createElement(FQt,{containerStyle:w,codeStyle:m.style||{},numberStyle:S,startingLineNumber:_,codeString:L}):null,W=l.hljs||l['pre[class*="language-"]']||{backgroundColor:"#fff"},Q=gRe(U)?"hljs":"prismjs",q=h?Object.assign({},$,{style:Object.assign({},W,u)}):Object.assign({},$,{className:$.className?"".concat(Q," ").concat($.className):Q,style:Object.assign({},u)});if(M?m.style=Cd({whiteSpace:"pre-wrap"},m.style):m.style=Cd({whiteSpace:"pre"},m.style),!U)return I.createElement(P,q,V,I.createElement(T,m,L));(E===void 0&&O||M)&&(E=!0),O=O||$Qt;var H=[{type:"text",value:L}],K=VQt({astGenerator:U,language:s,code:L,defaultCodeValue:H});K.language===null&&(K.value=H);var G=K.value.length;G===1&&K.value[0].type==="text"&&(G=K.value[0].value.split(`
`).length);var ee=G+_,Y=BQt(K,E,R,y,v,_,ee,S,M);return I.createElement(P,q,I.createElement(T,m,!v&&V,O({rows:Y,stylesheet:l,useInlineStyles:h})))}}function tle(e,t,n,r,s,a,i){try{var l=e[a](i),c=l.value}catch(u){return void n(u)}l.done?t(c):Promise.resolve(c).then(r,s)}function yRe(e){return function(){var t=this,n=arguments;return new Promise(function(r,s){var a=e.apply(t,n);function i(c){tle(a,r,s,i,l,"next",c)}function l(c){tle(a,r,s,i,l,"throw",c)}i(void 0)})}}function rO(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */rO=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(T,N,L){T[N]=L.value},a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(T,N,L){return Object.defineProperty(T,N,{value:L,enumerable:!0,configurable:!0,writable:!0}),T[N]}try{u({},"")}catch{u=function(L,U,$){return L[U]=$}}function f(T,N,L,U){var $=N&&N.prototype instanceof v?N:v,V=Object.create($.prototype),W=new P(U||[]);return s(V,"_invoke",{value:j(T,L,W)}),V}function m(T,N,L){try{return{type:"normal",arg:T.call(N,L)}}catch(U){return{type:"throw",arg:U}}}t.wrap=f;var p="suspendedStart",h="suspendedYield",g="executing",y="completed",x={};function v(){}function b(){}function _(){}var w={};u(w,i,function(){return this});var C=Object.getPrototypeOf,S=C&&C(C(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var E=_.prototype=v.prototype=Object.create(w);function k(T){["next","throw","return"].forEach(function(N){u(T,N,function(L){return this._invoke(N,L)})})}function M(T,N){function L($,V,W,Q){var q=m(T[$],T,V);if(q.type!=="throw"){var H=q.arg,K=H.value;return K&&Va(K)=="object"&&r.call(K,"__await")?N.resolve(K.__await).then(function(G){L("next",G,W,Q)},function(G){L("throw",G,W,Q)}):N.resolve(K).then(function(G){H.value=G,W(H)},function(G){return L("throw",G,W,Q)})}Q(q.arg)}var U;s(this,"_invoke",{value:function(V,W){function Q(){return new N(function(q,H){L(V,W,q,H)})}return U=U?U.then(Q,Q):Q()}})}function j(T,N,L){var U=p;return function($,V){if(U===g)throw Error("Generator is already running");if(U===y){if($==="throw")throw V;return{value:e,done:!0}}for(L.method=$,L.arg=V;;){var W=L.delegate;if(W){var Q=R(W,L);if(Q){if(Q===x)continue;return Q}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(U===p)throw U=y,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);U=g;var q=m(T,N,L);if(q.type==="normal"){if(U=L.done?y:h,q.arg===x)continue;return{value:q.arg,done:L.done}}q.type==="throw"&&(U=y,L.method="throw",L.arg=q.arg)}}}function R(T,N){var L=N.method,U=T.iterator[L];if(U===e)return N.delegate=null,L==="throw"&&T.iterator.return&&(N.method="return",N.arg=e,R(T,N),N.method==="throw")||L!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+L+"' method")),x;var $=m(U,T.iterator,N.arg);if($.type==="throw")return N.method="throw",N.arg=$.arg,N.delegate=null,x;var V=$.arg;return V?V.done?(N[T.resultName]=V.value,N.next=T.nextLoc,N.method!=="return"&&(N.method="next",N.arg=e),N.delegate=null,x):V:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,x)}function O(T){var N={tryLoc:T[0]};1 in T&&(N.catchLoc=T[1]),2 in T&&(N.finallyLoc=T[2],N.afterLoc=T[3]),this.tryEntries.push(N)}function D(T){var N=T.completion||{};N.type="normal",delete N.arg,T.completion=N}function P(T){this.tryEntries=[{tryLoc:"root"}],T.forEach(O,this),this.reset(!0)}function A(T){if(T||T===""){var N=T[i];if(N)return N.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var L=-1,U=function $(){for(;++L<T.length;)if(r.call(T,L))return $.value=T[L],$.done=!1,$;return $.value=e,$.done=!0,$};return U.next=U}}throw new TypeError(Va(T)+" is not iterable")}return b.prototype=_,s(E,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(T){var N=typeof T=="function"&&T.constructor;return!!N&&(N===b||(N.displayName||N.name)==="GeneratorFunction")},t.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,_):(T.__proto__=_,u(T,c,"GeneratorFunction")),T.prototype=Object.create(E),T},t.awrap=function(T){return{__await:T}},k(M.prototype),u(M.prototype,l,function(){return this}),t.AsyncIterator=M,t.async=function(T,N,L,U,$){$===void 0&&($=Promise);var V=new M(f(T,N,L,U),$);return t.isGeneratorFunction(N)?V:V.next().then(function(W){return W.done?W.value:V.next()})},k(E),u(E,c,"Generator"),u(E,i,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(T){var N=Object(T),L=[];for(var U in N)L.push(U);return L.reverse(),function $(){for(;L.length;){var V=L.pop();if(V in N)return $.value=V,$.done=!1,$}return $.done=!0,$}},t.values=A,P.prototype={constructor:P,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!N)for(var L in this)L.charAt(0)==="t"&&r.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=e)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var L=this;function U(H,K){return W.type="throw",W.arg=N,L.next=H,K&&(L.method="next",L.arg=e),!!K}for(var $=this.tryEntries.length-1;$>=0;--$){var V=this.tryEntries[$],W=V.completion;if(V.tryLoc==="root")return U("end");if(V.tryLoc<=this.prev){var Q=r.call(V,"catchLoc"),q=r.call(V,"finallyLoc");if(Q&&q){if(this.prev<V.catchLoc)return U(V.catchLoc,!0);if(this.prev<V.finallyLoc)return U(V.finallyLoc)}else if(Q){if(this.prev<V.catchLoc)return U(V.catchLoc,!0)}else{if(!q)throw Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return U(V.finallyLoc)}}}},abrupt:function(N,L){for(var U=this.tryEntries.length-1;U>=0;--U){var $=this.tryEntries[U];if($.tryLoc<=this.prev&&r.call($,"finallyLoc")&&this.prev<$.finallyLoc){var V=$;break}}V&&(N==="break"||N==="continue")&&V.tryLoc<=L&&L<=V.finallyLoc&&(V=null);var W=V?V.completion:{};return W.type=N,W.arg=L,V?(this.method="next",this.next=V.finallyLoc,x):this.complete(W)},complete:function(N,L){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&L&&(this.next=L),x},finish:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var U=this.tryEntries[L];if(U.finallyLoc===N)return this.complete(U.completion,U.afterLoc),D(U),x}},catch:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var U=this.tryEntries[L];if(U.tryLoc===N){var $=U.completion;if($.type==="throw"){var V=$.arg;D(U)}return V}}throw Error("illegal catch attempt")},delegateYield:function(N,L,U){return this.delegate={iterator:A(N),resultName:L,nextLoc:U},this.method==="next"&&(this.arg=e),x}},t}function HQt(e,t,n){return t=GE(t),Qut(e,xRe()?Reflect.construct(t,n||[],GE(e).constructor):t.apply(e,n))}function xRe(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xRe=function(){return!!e})()}const zQt=function(e){var t,n=e.loader,r=e.isLanguageRegistered,s=e.registerLanguage,a=e.languageLoaders,i=e.noAsyncLoadingLanguages,l=function(c){function u(){return Xut(this,u),HQt(this,u,arguments)}return Yut(u,c),Jut(u,[{key:"componentDidUpdate",value:function(){!u.isRegistered(this.props.language)&&a&&this.loadLanguage()}},{key:"componentDidMount",value:function(){var m=this;u.astGeneratorPromise||u.loadAstGenerator(),u.astGenerator||u.astGeneratorPromise.then(function(){m.forceUpdate()}),!u.isRegistered(this.props.language)&&a&&this.loadLanguage()}},{key:"loadLanguage",value:function(){var m=this,p=this.props.language;p!=="text"&&u.loadLanguage(p).then(function(){return m.forceUpdate()}).catch(function(){})}},{key:"normalizeLanguage",value:function(m){return u.isSupportedLanguage(m)?m:"text"}},{key:"render",value:function(){return I.createElement(u.highlightInstance,q1({},this.props,{language:this.normalizeLanguage(this.props.language),astGenerator:u.astGenerator}))}}],[{key:"preload",value:function(){return u.loadAstGenerator()}},{key:"loadLanguage",value:function(){var f=yRe(rO().mark(function p(h){var g;return rO().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:if(g=a[h],typeof g!="function"){x.next=5;break}return x.abrupt("return",g(u.registerLanguage));case 5:throw new Error("Language ".concat(h," not supported"));case 6:case"end":return x.stop()}},p)}));function m(p){return f.apply(this,arguments)}return m}()},{key:"isSupportedLanguage",value:function(m){return u.isRegistered(m)||typeof a[m]=="function"}},{key:"loadAstGenerator",value:function(){return u.astGeneratorPromise=n().then(function(m){u.astGenerator=m,s&&u.languages.forEach(function(p,h){return s(m,h,p)})}),u.astGeneratorPromise}}])}(I.PureComponent);return t=l,Kc(l,"astGenerator",null),Kc(l,"highlightInstance",WQt(null,{})),Kc(l,"astGeneratorPromise",null),Kc(l,"languages",new Map),Kc(l,"supportedLanguages",e.supportedLanguages||Object.keys(a||{})),Kc(l,"isRegistered",function(c){if(i)return!0;if(!s)throw new Error("Current syntax highlighter doesn't support registration of languages");return t.astGenerator?r(t.astGenerator,c):t.languages.has(c)}),Kc(l,"registerLanguage",function(c,u){if(!s)throw new Error("Current syntax highlighter doesn't support registration of languages");if(t.astGenerator)return s(t.astGenerator,c,u);t.languages.set(c,u)}),l};function sO(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/facebook/regenerator/blob/main/LICENSE */sO=function(){return t};var e,t={},n=Object.prototype,r=n.hasOwnProperty,s=Object.defineProperty||function(T,N,L){T[N]=L.value},a=typeof Symbol=="function"?Symbol:{},i=a.iterator||"@@iterator",l=a.asyncIterator||"@@asyncIterator",c=a.toStringTag||"@@toStringTag";function u(T,N,L){return Object.defineProperty(T,N,{value:L,enumerable:!0,configurable:!0,writable:!0}),T[N]}try{u({},"")}catch{u=function(L,U,$){return L[U]=$}}function f(T,N,L,U){var $=N&&N.prototype instanceof v?N:v,V=Object.create($.prototype),W=new P(U||[]);return s(V,"_invoke",{value:j(T,L,W)}),V}function m(T,N,L){try{return{type:"normal",arg:T.call(N,L)}}catch(U){return{type:"throw",arg:U}}}t.wrap=f;var p="suspendedStart",h="suspendedYield",g="executing",y="completed",x={};function v(){}function b(){}function _(){}var w={};u(w,i,function(){return this});var C=Object.getPrototypeOf,S=C&&C(C(A([])));S&&S!==n&&r.call(S,i)&&(w=S);var E=_.prototype=v.prototype=Object.create(w);function k(T){["next","throw","return"].forEach(function(N){u(T,N,function(L){return this._invoke(N,L)})})}function M(T,N){function L($,V,W,Q){var q=m(T[$],T,V);if(q.type!=="throw"){var H=q.arg,K=H.value;return K&&Va(K)=="object"&&r.call(K,"__await")?N.resolve(K.__await).then(function(G){L("next",G,W,Q)},function(G){L("throw",G,W,Q)}):N.resolve(K).then(function(G){H.value=G,W(H)},function(G){return L("throw",G,W,Q)})}Q(q.arg)}var U;s(this,"_invoke",{value:function(V,W){function Q(){return new N(function(q,H){L(V,W,q,H)})}return U=U?U.then(Q,Q):Q()}})}function j(T,N,L){var U=p;return function($,V){if(U===g)throw Error("Generator is already running");if(U===y){if($==="throw")throw V;return{value:e,done:!0}}for(L.method=$,L.arg=V;;){var W=L.delegate;if(W){var Q=R(W,L);if(Q){if(Q===x)continue;return Q}}if(L.method==="next")L.sent=L._sent=L.arg;else if(L.method==="throw"){if(U===p)throw U=y,L.arg;L.dispatchException(L.arg)}else L.method==="return"&&L.abrupt("return",L.arg);U=g;var q=m(T,N,L);if(q.type==="normal"){if(U=L.done?y:h,q.arg===x)continue;return{value:q.arg,done:L.done}}q.type==="throw"&&(U=y,L.method="throw",L.arg=q.arg)}}}function R(T,N){var L=N.method,U=T.iterator[L];if(U===e)return N.delegate=null,L==="throw"&&T.iterator.return&&(N.method="return",N.arg=e,R(T,N),N.method==="throw")||L!=="return"&&(N.method="throw",N.arg=new TypeError("The iterator does not provide a '"+L+"' method")),x;var $=m(U,T.iterator,N.arg);if($.type==="throw")return N.method="throw",N.arg=$.arg,N.delegate=null,x;var V=$.arg;return V?V.done?(N[T.resultName]=V.value,N.next=T.nextLoc,N.method!=="return"&&(N.method="next",N.arg=e),N.delegate=null,x):V:(N.method="throw",N.arg=new TypeError("iterator result is not an object"),N.delegate=null,x)}function O(T){var N={tryLoc:T[0]};1 in T&&(N.catchLoc=T[1]),2 in T&&(N.finallyLoc=T[2],N.afterLoc=T[3]),this.tryEntries.push(N)}function D(T){var N=T.completion||{};N.type="normal",delete N.arg,T.completion=N}function P(T){this.tryEntries=[{tryLoc:"root"}],T.forEach(O,this),this.reset(!0)}function A(T){if(T||T===""){var N=T[i];if(N)return N.call(T);if(typeof T.next=="function")return T;if(!isNaN(T.length)){var L=-1,U=function $(){for(;++L<T.length;)if(r.call(T,L))return $.value=T[L],$.done=!1,$;return $.value=e,$.done=!0,$};return U.next=U}}throw new TypeError(Va(T)+" is not iterable")}return b.prototype=_,s(E,"constructor",{value:_,configurable:!0}),s(_,"constructor",{value:b,configurable:!0}),b.displayName=u(_,c,"GeneratorFunction"),t.isGeneratorFunction=function(T){var N=typeof T=="function"&&T.constructor;return!!N&&(N===b||(N.displayName||N.name)==="GeneratorFunction")},t.mark=function(T){return Object.setPrototypeOf?Object.setPrototypeOf(T,_):(T.__proto__=_,u(T,c,"GeneratorFunction")),T.prototype=Object.create(E),T},t.awrap=function(T){return{__await:T}},k(M.prototype),u(M.prototype,l,function(){return this}),t.AsyncIterator=M,t.async=function(T,N,L,U,$){$===void 0&&($=Promise);var V=new M(f(T,N,L,U),$);return t.isGeneratorFunction(N)?V:V.next().then(function(W){return W.done?W.value:V.next()})},k(E),u(E,c,"Generator"),u(E,i,function(){return this}),u(E,"toString",function(){return"[object Generator]"}),t.keys=function(T){var N=Object(T),L=[];for(var U in N)L.push(U);return L.reverse(),function $(){for(;L.length;){var V=L.pop();if(V in N)return $.value=V,$.done=!1,$}return $.done=!0,$}},t.values=A,P.prototype={constructor:P,reset:function(N){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(D),!N)for(var L in this)L.charAt(0)==="t"&&r.call(this,L)&&!isNaN(+L.slice(1))&&(this[L]=e)},stop:function(){this.done=!0;var N=this.tryEntries[0].completion;if(N.type==="throw")throw N.arg;return this.rval},dispatchException:function(N){if(this.done)throw N;var L=this;function U(H,K){return W.type="throw",W.arg=N,L.next=H,K&&(L.method="next",L.arg=e),!!K}for(var $=this.tryEntries.length-1;$>=0;--$){var V=this.tryEntries[$],W=V.completion;if(V.tryLoc==="root")return U("end");if(V.tryLoc<=this.prev){var Q=r.call(V,"catchLoc"),q=r.call(V,"finallyLoc");if(Q&&q){if(this.prev<V.catchLoc)return U(V.catchLoc,!0);if(this.prev<V.finallyLoc)return U(V.finallyLoc)}else if(Q){if(this.prev<V.catchLoc)return U(V.catchLoc,!0)}else{if(!q)throw Error("try statement without catch or finally");if(this.prev<V.finallyLoc)return U(V.finallyLoc)}}}},abrupt:function(N,L){for(var U=this.tryEntries.length-1;U>=0;--U){var $=this.tryEntries[U];if($.tryLoc<=this.prev&&r.call($,"finallyLoc")&&this.prev<$.finallyLoc){var V=$;break}}V&&(N==="break"||N==="continue")&&V.tryLoc<=L&&L<=V.finallyLoc&&(V=null);var W=V?V.completion:{};return W.type=N,W.arg=L,V?(this.method="next",this.next=V.finallyLoc,x):this.complete(W)},complete:function(N,L){if(N.type==="throw")throw N.arg;return N.type==="break"||N.type==="continue"?this.next=N.arg:N.type==="return"?(this.rval=this.arg=N.arg,this.method="return",this.next="end"):N.type==="normal"&&L&&(this.next=L),x},finish:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var U=this.tryEntries[L];if(U.finallyLoc===N)return this.complete(U.completion,U.afterLoc),D(U),x}},catch:function(N){for(var L=this.tryEntries.length-1;L>=0;--L){var U=this.tryEntries[L];if(U.tryLoc===N){var $=U.completion;if($.type==="throw"){var V=$.arg;D(U)}return V}}throw Error("illegal catch attempt")},delegateYield:function(N,L,U){return this.delegate={iterator:A(N),resultName:L,nextLoc:U},this.method==="next"&&(this.arg=e),x}},t}const oe=function(e,t){return function(){var n=yRe(sO().mark(function r(s){var a;return sO().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,t();case 2:a=l.sent,s(e,a.default||a);case 4:case"end":return l.stop()}},r)}));return function(r){return n.apply(this,arguments)}}()},GQt={abap:oe("abap",function(){return X(()=>import("./abap-xXO2ZNBr.js").then(e=>e.a),__vite__mapDeps([121,2]))}),abnf:oe("abnf",function(){return X(()=>import("./abnf-Cpr-RfZc.js").then(e=>e.a),__vite__mapDeps([122,2]))}),actionscript:oe("actionscript",function(){return X(()=>import("./actionscript-7IoedjRX.js").then(e=>e.a),__vite__mapDeps([123,2]))}),ada:oe("ada",function(){return X(()=>import("./ada-DvJpapMr.js").then(e=>e.a),__vite__mapDeps([124,2]))}),agda:oe("agda",function(){return X(()=>import("./agda-CXQhj6q_.js").then(e=>e.a),__vite__mapDeps([125,2]))}),al:oe("al",function(){return X(()=>import("./al-Dn94UNn4.js").then(e=>e.a),__vite__mapDeps([126,2]))}),antlr4:oe("antlr4",function(){return X(()=>import("./antlr4-D_WJe1oO.js").then(e=>e.a),__vite__mapDeps([127,2]))}),apacheconf:oe("apacheconf",function(){return X(()=>import("./apacheconf-BxdI37fF.js").then(e=>e.a),__vite__mapDeps([128,2]))}),apex:oe("apex",function(){return X(()=>import("./apex-DSxd3UGl.js").then(e=>e.a),__vite__mapDeps([129,2,130]))}),apl:oe("apl",function(){return X(()=>import("./apl-BhX0_fkh.js").then(e=>e.a),__vite__mapDeps([131,2]))}),applescript:oe("applescript",function(){return X(()=>import("./applescript-mDtPbSw7.js").then(e=>e.a),__vite__mapDeps([132,2]))}),aql:oe("aql",function(){return X(()=>import("./aql-CCmuoNOQ.js").then(e=>e.a),__vite__mapDeps([133,2]))}),arduino:oe("arduino",function(){return X(()=>import("./arduino-BOTCtVXt.js").then(e=>e.a),__vite__mapDeps([134,2,135,136]))}),arff:oe("arff",function(){return X(()=>import("./arff-LHIGEhob.js").then(e=>e.a),__vite__mapDeps([137,2]))}),asciidoc:oe("asciidoc",function(){return X(()=>import("./asciidoc-DUL3t6uM.js").then(e=>e.a),__vite__mapDeps([138,2]))}),asm6502:oe("asm6502",function(){return X(()=>import("./asm6502-B_69y3yN.js").then(e=>e.a),__vite__mapDeps([139,2]))}),asmatmel:oe("asmatmel",function(){return X(()=>import("./asmatmel-LW8Eoafy.js").then(e=>e.a),__vite__mapDeps([140,2]))}),aspnet:oe("aspnet",function(){return X(()=>import("./aspnet-3TSffHQD.js").then(e=>e.a),__vite__mapDeps([141,2,142]))}),autohotkey:oe("autohotkey",function(){return X(()=>import("./autohotkey-DDP9Pz17.js").then(e=>e.a),__vite__mapDeps([143,2]))}),autoit:oe("autoit",function(){return X(()=>import("./autoit-B6rX58wf.js").then(e=>e.a),__vite__mapDeps([144,2]))}),avisynth:oe("avisynth",function(){return X(()=>import("./avisynth-Dm_4mu0N.js").then(e=>e.a),__vite__mapDeps([145,2]))}),avroIdl:oe("avroIdl",function(){return X(()=>import("./avro-idl-UlEGCRi0.js").then(e=>e.a),__vite__mapDeps([146,2]))}),bash:oe("bash",function(){return X(()=>import("./bash-BDr8_71o.js").then(e=>e.b),__vite__mapDeps([147,2,148]))}),basic:oe("basic",function(){return X(()=>import("./basic-BBt5kyDw.js").then(e=>e.b),__vite__mapDeps([149,2,150]))}),batch:oe("batch",function(){return X(()=>import("./batch-Cj3BSbMY.js").then(e=>e.b),__vite__mapDeps([151,2]))}),bbcode:oe("bbcode",function(){return X(()=>import("./bbcode-DpxtQw0_.js").then(e=>e.b),__vite__mapDeps([152,2]))}),bicep:oe("bicep",function(){return X(()=>import("./bicep-CmgEE0U9.js").then(e=>e.b),__vite__mapDeps([153,2]))}),birb:oe("birb",function(){return X(()=>import("./birb-Dars3CuK.js").then(e=>e.b),__vite__mapDeps([154,2]))}),bison:oe("bison",function(){return X(()=>import("./bison-DX1VDlfk.js").then(e=>e.b),__vite__mapDeps([155,2,136]))}),bnf:oe("bnf",function(){return X(()=>import("./bnf-B6-zmMw4.js").then(e=>e.b),__vite__mapDeps([156,2]))}),brainfuck:oe("brainfuck",function(){return X(()=>import("./brainfuck-EZxQTWZ8.js").then(e=>e.b),__vite__mapDeps([157,2]))}),brightscript:oe("brightscript",function(){return X(()=>import("./brightscript-MwC7Espe.js").then(e=>e.b),__vite__mapDeps([158,2]))}),bro:oe("bro",function(){return X(()=>import("./bro-JV1z53-B.js").then(e=>e.b),__vite__mapDeps([159,2]))}),bsl:oe("bsl",function(){return X(()=>import("./bsl-Cd53xDCy.js").then(e=>e.b),__vite__mapDeps([160,2]))}),c:oe("c",function(){return X(()=>import("./c-CxGDiPNH.js").then(e=>e.c),__vite__mapDeps([161,2,136]))}),cfscript:oe("cfscript",function(){return X(()=>import("./cfscript-B9mkrBpQ.js").then(e=>e.c),__vite__mapDeps([162,2]))}),chaiscript:oe("chaiscript",function(){return X(()=>import("./chaiscript-Dof1nfTW.js").then(e=>e.c),__vite__mapDeps([163,2,135,136]))}),cil:oe("cil",function(){return X(()=>import("./cil-Bn3Q2E1W.js").then(e=>e.c),__vite__mapDeps([164,2]))}),clike:oe("clike",function(){return X(()=>import("./clike-DDqLwGhR.js").then(e=>e.c),__vite__mapDeps([165,2,166]))}),clojure:oe("clojure",function(){return X(()=>import("./clojure-C8Cgr9xq.js").then(e=>e.c),__vite__mapDeps([167,2]))}),cmake:oe("cmake",function(){return X(()=>import("./cmake-BO229LM_.js").then(e=>e.c),__vite__mapDeps([168,2]))}),cobol:oe("cobol",function(){return X(()=>import("./cobol-ncmGEesi.js").then(e=>e.c),__vite__mapDeps([169,2]))}),coffeescript:oe("coffeescript",function(){return X(()=>import("./coffeescript-D_XUmKs0.js").then(e=>e.c),__vite__mapDeps([170,2]))}),concurnas:oe("concurnas",function(){return X(()=>import("./concurnas-TfeVZMOZ.js").then(e=>e.c),__vite__mapDeps([171,2]))}),coq:oe("coq",function(){return X(()=>import("./coq-B5z9RsQ6.js").then(e=>e.c),__vite__mapDeps([172,2]))}),cpp:oe("cpp",function(){return X(()=>import("./cpp-Chcfrze0.js").then(e=>e.c),__vite__mapDeps([173,2,135,136]))}),crystal:oe("crystal",function(){return X(()=>import("./crystal-Dynhbd61.js").then(e=>e.c),__vite__mapDeps([174,2,175]))}),csharp:oe("csharp",function(){return X(()=>import("./csharp-BhqpJkpq.js").then(e=>e.c),__vite__mapDeps([176,2,142]))}),cshtml:oe("cshtml",function(){return X(()=>import("./cshtml-BWGfxKn4.js").then(e=>e.c),__vite__mapDeps([177,2,142]))}),csp:oe("csp",function(){return X(()=>import("./csp-BoPMW3Ei.js").then(e=>e.c),__vite__mapDeps([178,2]))}),cssExtras:oe("cssExtras",function(){return X(()=>import("./css-extras-Hsmrym8x.js").then(e=>e.c),__vite__mapDeps([179,2]))}),css:oe("css",function(){return X(()=>import("./css-DY8FYVYE.js").then(e=>e.c),__vite__mapDeps([180,2,181]))}),csv:oe("csv",function(){return X(()=>import("./csv-C7m4DnSA.js").then(e=>e.c),__vite__mapDeps([182,2]))}),cypher:oe("cypher",function(){return X(()=>import("./cypher-l75AB8hd.js").then(e=>e.c),__vite__mapDeps([183,2]))}),d:oe("d",function(){return X(()=>import("./d-CDO8utOJ.js").then(e=>e.d),__vite__mapDeps([184,2]))}),dart:oe("dart",function(){return X(()=>import("./dart-PPmz7K9W.js").then(e=>e.d),__vite__mapDeps([185,2]))}),dataweave:oe("dataweave",function(){return X(()=>import("./dataweave-DSq9Bs2g.js").then(e=>e.d),__vite__mapDeps([186,2]))}),dax:oe("dax",function(){return X(()=>import("./dax-Ql7iF31E.js").then(e=>e.d),__vite__mapDeps([187,2]))}),dhall:oe("dhall",function(){return X(()=>import("./dhall-D8AlcFmH.js").then(e=>e.d),__vite__mapDeps([188,2]))}),diff:oe("diff",function(){return X(()=>import("./diff-DxjKD27r.js").then(e=>e.d),__vite__mapDeps([189,2]))}),django:oe("django",function(){return X(()=>import("./django-DdNzo2Lw.js").then(e=>e.d),__vite__mapDeps([190,2,191]))}),dnsZoneFile:oe("dnsZoneFile",function(){return X(()=>import("./dns-zone-file-CPg1_KvB.js").then(e=>e.d),__vite__mapDeps([192,2]))}),docker:oe("docker",function(){return X(()=>import("./docker-CVuCFm8y.js").then(e=>e.d),__vite__mapDeps([193,2]))}),dot:oe("dot",function(){return X(()=>import("./dot-Cv30q0-0.js").then(e=>e.d),__vite__mapDeps([194,2]))}),ebnf:oe("ebnf",function(){return X(()=>import("./ebnf-D4d3p3sx.js").then(e=>e.e),__vite__mapDeps([195,2]))}),editorconfig:oe("editorconfig",function(){return X(()=>import("./editorconfig-svCLfWhT.js").then(e=>e.e),__vite__mapDeps([196,2]))}),eiffel:oe("eiffel",function(){return X(()=>import("./eiffel-DhOhlUP9.js").then(e=>e.e),__vite__mapDeps([197,2]))}),ejs:oe("ejs",function(){return X(()=>import("./ejs-CuszUXEo.js").then(e=>e.e),__vite__mapDeps([198,2,191]))}),elixir:oe("elixir",function(){return X(()=>import("./elixir-CZtOXY6s.js").then(e=>e.e),__vite__mapDeps([199,2]))}),elm:oe("elm",function(){return X(()=>import("./elm-BcYqZUmH.js").then(e=>e.e),__vite__mapDeps([200,2]))}),erb:oe("erb",function(){return X(()=>import("./erb-D4Jx3m2Q.js").then(e=>e.e),__vite__mapDeps([201,2,175,191]))}),erlang:oe("erlang",function(){return X(()=>import("./erlang-Bs9TEZ3l.js").then(e=>e.e),__vite__mapDeps([202,2]))}),etlua:oe("etlua",function(){return X(()=>import("./etlua-C0lc7-1S.js").then(e=>e.e),__vite__mapDeps([203,2,204,191]))}),excelFormula:oe("excelFormula",function(){return X(()=>import("./excel-formula-CzIhBLjN.js").then(e=>e.e),__vite__mapDeps([205,2]))}),factor:oe("factor",function(){return X(()=>import("./factor-WaebLdn4.js").then(e=>e.f),__vite__mapDeps([206,2]))}),falselang:oe("falselang",function(){return X(()=>import("./false-ShlVddT_.js").then(e=>e._),__vite__mapDeps([207,2]))}),firestoreSecurityRules:oe("firestoreSecurityRules",function(){return X(()=>import("./firestore-security-rules-4moqVYWI.js").then(e=>e.f),__vite__mapDeps([208,2]))}),flow:oe("flow",function(){return X(()=>import("./flow-CXLXbYk5.js").then(e=>e.f),__vite__mapDeps([209,2]))}),fortran:oe("fortran",function(){return X(()=>import("./fortran-BND3_knE.js").then(e=>e.f),__vite__mapDeps([210,2]))}),fsharp:oe("fsharp",function(){return X(()=>import("./fsharp-BFha84XY.js").then(e=>e.f),__vite__mapDeps([211,2]))}),ftl:oe("ftl",function(){return X(()=>import("./ftl-GB7jbcGS.js").then(e=>e.f),__vite__mapDeps([212,2,191]))}),gap:oe("gap",function(){return X(()=>import("./gap-Dpz_lRLC.js").then(e=>e.g),__vite__mapDeps([213,2]))}),gcode:oe("gcode",function(){return X(()=>import("./gcode-C7ldqsmu.js").then(e=>e.g),__vite__mapDeps([214,2]))}),gdscript:oe("gdscript",function(){return X(()=>import("./gdscript-B9Bfhib1.js").then(e=>e.g),__vite__mapDeps([215,2]))}),gedcom:oe("gedcom",function(){return X(()=>import("./gedcom-btzlAVde.js").then(e=>e.g),__vite__mapDeps([216,2]))}),gherkin:oe("gherkin",function(){return X(()=>import("./gherkin-DXkOYSMV.js").then(e=>e.g),__vite__mapDeps([217,2]))}),git:oe("git",function(){return X(()=>import("./git-Bi1kQND6.js").then(e=>e.g),__vite__mapDeps([218,2]))}),glsl:oe("glsl",function(){return X(()=>import("./glsl-BYO0fWe4.js").then(e=>e.g),__vite__mapDeps([219,2,136]))}),gml:oe("gml",function(){return X(()=>import("./gml-Dcj75dEM.js").then(e=>e.g),__vite__mapDeps([220,2]))}),gn:oe("gn",function(){return X(()=>import("./gn-C5jCMEGg.js").then(e=>e.g),__vite__mapDeps([221,2]))}),goModule:oe("goModule",function(){return X(()=>import("./go-module-DS88Hgar.js").then(e=>e.g),__vite__mapDeps([222,2]))}),go:oe("go",function(){return X(()=>import("./go-Bb8GlO4U.js").then(e=>e.g),__vite__mapDeps([223,2]))}),graphql:oe("graphql",function(){return X(()=>import("./graphql-BqELzFSN.js").then(e=>e.g),__vite__mapDeps([224,2]))}),groovy:oe("groovy",function(){return X(()=>import("./groovy-CZHQRD2T.js").then(e=>e.g),__vite__mapDeps([225,2]))}),haml:oe("haml",function(){return X(()=>import("./haml-D4Cu9GWy.js").then(e=>e.h),__vite__mapDeps([226,2,175]))}),handlebars:oe("handlebars",function(){return X(()=>import("./handlebars-C4Zm0IB3.js").then(e=>e.h),__vite__mapDeps([227,2,191]))}),haskell:oe("haskell",function(){return X(()=>import("./haskell-qrj8ifSK.js").then(e=>e.h),__vite__mapDeps([228,2,229]))}),haxe:oe("haxe",function(){return X(()=>import("./haxe-ChRoPNLt.js").then(e=>e.h),__vite__mapDeps([230,2]))}),hcl:oe("hcl",function(){return X(()=>import("./hcl-DW5WNCe3.js").then(e=>e.h),__vite__mapDeps([231,2]))}),hlsl:oe("hlsl",function(){return X(()=>import("./hlsl-BedTSN1F.js").then(e=>e.h),__vite__mapDeps([232,2,136]))}),hoon:oe("hoon",function(){return X(()=>import("./hoon-BwAkIC7V.js").then(e=>e.h),__vite__mapDeps([233,2]))}),hpkp:oe("hpkp",function(){return X(()=>import("./hpkp-KfxxGNng.js").then(e=>e.h),__vite__mapDeps([234,2]))}),hsts:oe("hsts",function(){return X(()=>import("./hsts-BSN3uVd1.js").then(e=>e.h),__vite__mapDeps([235,2]))}),http:oe("http",function(){return X(()=>import("./http-FRE2So_Y.js").then(e=>e.h),__vite__mapDeps([236,2]))}),ichigojam:oe("ichigojam",function(){return X(()=>import("./ichigojam-68yjR9qP.js").then(e=>e.i),__vite__mapDeps([237,2]))}),icon:oe("icon",function(){return X(()=>import("./icon-DMVM2VVb.js").then(e=>e.i),__vite__mapDeps([238,2]))}),icuMessageFormat:oe("icuMessageFormat",function(){return X(()=>import("./icu-message-format-D6wK9nFS.js").then(e=>e.i),__vite__mapDeps([239,2]))}),idris:oe("idris",function(){return X(()=>import("./idris-DVPeRJob.js").then(e=>e.i),__vite__mapDeps([240,2,229]))}),iecst:oe("iecst",function(){return X(()=>import("./iecst-CVU0L1v2.js").then(e=>e.i),__vite__mapDeps([241,2]))}),ignore:oe("ignore",function(){return X(()=>import("./ignore-CWbAeMHy.js").then(e=>e.i),__vite__mapDeps([242,2]))}),inform7:oe("inform7",function(){return X(()=>import("./inform7-D7YCc5AS.js").then(e=>e.i),__vite__mapDeps([243,2]))}),ini:oe("ini",function(){return X(()=>import("./ini-DTjpb4oT.js").then(e=>e.i),__vite__mapDeps([244,2]))}),io:oe("io",function(){return X(()=>import("./io-DyJVvRKM.js").then(e=>e.i),__vite__mapDeps([245,2]))}),j:oe("j",function(){return X(()=>import("./j-B1KsJ8Lh.js").then(e=>e.j),__vite__mapDeps([246,2]))}),java:oe("java",function(){return X(()=>import("./java-C8KDVoMm.js").then(e=>e.j),__vite__mapDeps([247,2,248]))}),javadoc:oe("javadoc",function(){return X(()=>import("./javadoc-Be5z3uxJ.js").then(e=>e.j),__vite__mapDeps([249,2,248,250]))}),javadoclike:oe("javadoclike",function(){return X(()=>import("./javadoclike-AcPh5e5A.js").then(e=>e.j),__vite__mapDeps([251,2,250]))}),javascript:oe("javascript",function(){return X(()=>import("./javascript-C1hWj-gL.js").then(e=>e.j),__vite__mapDeps([252,2,253]))}),javastacktrace:oe("javastacktrace",function(){return X(()=>import("./javastacktrace-l5DDWqnd.js").then(e=>e.j),__vite__mapDeps([254,2]))}),jexl:oe("jexl",function(){return X(()=>import("./jexl-CPewgw8R.js").then(e=>e.j),__vite__mapDeps([255,2]))}),jolie:oe("jolie",function(){return X(()=>import("./jolie-oDW4xHAj.js").then(e=>e.j),__vite__mapDeps([256,2]))}),jq:oe("jq",function(){return X(()=>import("./jq-DCybKO55.js").then(e=>e.j),__vite__mapDeps([257,2]))}),jsExtras:oe("jsExtras",function(){return X(()=>import("./js-extras-Dt3p3jFp.js").then(e=>e.j),__vite__mapDeps([258,2]))}),jsTemplates:oe("jsTemplates",function(){return X(()=>import("./js-templates-C36cwUgG.js").then(e=>e.j),__vite__mapDeps([259,2]))}),jsdoc:oe("jsdoc",function(){return X(()=>import("./jsdoc-D9b2eQCX.js").then(e=>e.j),__vite__mapDeps([260,2,250,261]))}),json:oe("json",function(){return X(()=>import("./json-DxuiKECE.js").then(e=>e.j),__vite__mapDeps([262,2,263]))}),json5:oe("json5",function(){return X(()=>import("./json5-xjq_y-Ab.js").then(e=>e.j),__vite__mapDeps([264,2,263]))}),jsonp:oe("jsonp",function(){return X(()=>import("./jsonp-O-R2QEUD.js").then(e=>e.j),__vite__mapDeps([265,2,263]))}),jsstacktrace:oe("jsstacktrace",function(){return X(()=>import("./jsstacktrace-AwxS9N4y.js").then(e=>e.j),__vite__mapDeps([266,2]))}),jsx:oe("jsx",function(){return X(()=>import("./jsx-oDQJXXbV.js").then(e=>e.j),__vite__mapDeps([267,2,268]))}),julia:oe("julia",function(){return X(()=>import("./julia-CSbapaXD.js").then(e=>e.j),__vite__mapDeps([269,2]))}),keepalived:oe("keepalived",function(){return X(()=>import("./keepalived-QNLh4sKY.js").then(e=>e.k),__vite__mapDeps([270,2]))}),keyman:oe("keyman",function(){return X(()=>import("./keyman-Dekq-H3g.js").then(e=>e.k),__vite__mapDeps([271,2]))}),kotlin:oe("kotlin",function(){return X(()=>import("./kotlin-luLWldVW.js").then(e=>e.k),__vite__mapDeps([272,2]))}),kumir:oe("kumir",function(){return X(()=>import("./kumir-gJ2eR1Bt.js").then(e=>e.k),__vite__mapDeps([273,2]))}),kusto:oe("kusto",function(){return X(()=>import("./kusto-B8-0f2WS.js").then(e=>e.k),__vite__mapDeps([274,2]))}),latex:oe("latex",function(){return X(()=>import("./latex-naZEwrIf.js").then(e=>e.l),__vite__mapDeps([275,2]))}),latte:oe("latte",function(){return X(()=>import("./latte-CuYvwG6d.js").then(e=>e.l),__vite__mapDeps([276,2,191,277]))}),less:oe("less",function(){return X(()=>import("./less-IPZUooSX.js").then(e=>e.l),__vite__mapDeps([278,2]))}),lilypond:oe("lilypond",function(){return X(()=>import("./lilypond-Ca27w2l1.js").then(e=>e.l),__vite__mapDeps([279,2,280]))}),liquid:oe("liquid",function(){return X(()=>import("./liquid-CqfwnlE8.js").then(e=>e.l),__vite__mapDeps([281,2,191]))}),lisp:oe("lisp",function(){return X(()=>import("./lisp-DS6a9sOI.js").then(e=>e.l),__vite__mapDeps([282,2]))}),livescript:oe("livescript",function(){return X(()=>import("./livescript-BtvwBPLA.js").then(e=>e.l),__vite__mapDeps([283,2]))}),llvm:oe("llvm",function(){return X(()=>import("./llvm-DJuz_f_4.js").then(e=>e.l),__vite__mapDeps([284,2]))}),log:oe("log",function(){return X(()=>import("./log-vpDuJ6s7.js").then(e=>e.l),__vite__mapDeps([285,2]))}),lolcode:oe("lolcode",function(){return X(()=>import("./lolcode-D7zlseNY.js").then(e=>e.l),__vite__mapDeps([286,2]))}),lua:oe("lua",function(){return X(()=>import("./lua-CrdnDpZs.js").then(e=>e.l),__vite__mapDeps([287,2,204]))}),magma:oe("magma",function(){return X(()=>import("./magma-CXc54FID.js").then(e=>e.m),__vite__mapDeps([288,2]))}),makefile:oe("makefile",function(){return X(()=>import("./makefile-TgER5D3-.js").then(e=>e.m),__vite__mapDeps([289,2]))}),markdown:oe("markdown",function(){return X(()=>import("./markdown-BBUfvsG3.js").then(e=>e.m),__vite__mapDeps([290,2]))}),markupTemplating:oe("markupTemplating",function(){return X(()=>import("./markup-templating-DkjQpHey.js").then(e=>e.m),__vite__mapDeps([291,2,191]))}),markup:oe("markup",function(){return X(()=>import("./markup-DvUfpNsN.js").then(e=>e.m),__vite__mapDeps([292,2,293]))}),matlab:oe("matlab",function(){return X(()=>import("./matlab-D8KyOrZZ.js").then(e=>e.m),__vite__mapDeps([294,2]))}),maxscript:oe("maxscript",function(){return X(()=>import("./maxscript-BLMZLNdj.js").then(e=>e.m),__vite__mapDeps([295,2]))}),mel:oe("mel",function(){return X(()=>import("./mel-Ck2zZU6-.js").then(e=>e.m),__vite__mapDeps([296,2]))}),mermaid:oe("mermaid",function(){return X(()=>import("./mermaid-BbVwv4sI.js").then(e=>e.m),__vite__mapDeps([297,2]))}),mizar:oe("mizar",function(){return X(()=>import("./mizar-C5pIb6PU.js").then(e=>e.m),__vite__mapDeps([298,2]))}),mongodb:oe("mongodb",function(){return X(()=>import("./mongodb-BP-_FLZQ.js").then(e=>e.m),__vite__mapDeps([299,2]))}),monkey:oe("monkey",function(){return X(()=>import("./monkey-CJMClX9N.js").then(e=>e.m),__vite__mapDeps([300,2]))}),moonscript:oe("moonscript",function(){return X(()=>import("./moonscript-B3F4_gd_.js").then(e=>e.m),__vite__mapDeps([301,2]))}),n1ql:oe("n1ql",function(){return X(()=>import("./n1ql-DEwy8oY_.js").then(e=>e.n),__vite__mapDeps([302,2]))}),n4js:oe("n4js",function(){return X(()=>import("./n4js-DosTxUWO.js").then(e=>e.n),__vite__mapDeps([303,2]))}),nand2tetrisHdl:oe("nand2tetrisHdl",function(){return X(()=>import("./nand2tetris-hdl-BaEjoK_-.js").then(e=>e.n),__vite__mapDeps([304,2]))}),naniscript:oe("naniscript",function(){return X(()=>import("./naniscript-CwUM2gJ6.js").then(e=>e.n),__vite__mapDeps([305,2]))}),nasm:oe("nasm",function(){return X(()=>import("./nasm-BBm4hQNa.js").then(e=>e.n),__vite__mapDeps([306,2]))}),neon:oe("neon",function(){return X(()=>import("./neon-D7ky2QYE.js").then(e=>e.n),__vite__mapDeps([307,2]))}),nevod:oe("nevod",function(){return X(()=>import("./nevod-ytlw2XDY.js").then(e=>e.n),__vite__mapDeps([308,2]))}),nginx:oe("nginx",function(){return X(()=>import("./nginx-BAoSqL21.js").then(e=>e.n),__vite__mapDeps([309,2]))}),nim:oe("nim",function(){return X(()=>import("./nim-vhNCNa0d.js").then(e=>e.n),__vite__mapDeps([310,2]))}),nix:oe("nix",function(){return X(()=>import("./nix-UkDV490L.js").then(e=>e.n),__vite__mapDeps([311,2]))}),nsis:oe("nsis",function(){return X(()=>import("./nsis-CB_gSgbd.js").then(e=>e.n),__vite__mapDeps([312,2]))}),objectivec:oe("objectivec",function(){return X(()=>import("./objectivec-COnIeXKs.js").then(e=>e.o),__vite__mapDeps([313,2,136]))}),ocaml:oe("ocaml",function(){return X(()=>import("./ocaml-p7XlZdCt.js").then(e=>e.o),__vite__mapDeps([314,2]))}),opencl:oe("opencl",function(){return X(()=>import("./opencl-DpkpHOKT.js").then(e=>e.o),__vite__mapDeps([315,2,136]))}),openqasm:oe("openqasm",function(){return X(()=>import("./openqasm-BUO-RrFI.js").then(e=>e.o),__vite__mapDeps([316,2]))}),oz:oe("oz",function(){return X(()=>import("./oz-BKi7Vu9u.js").then(e=>e.o),__vite__mapDeps([317,2]))}),parigp:oe("parigp",function(){return X(()=>import("./parigp-Q2v1bPZv.js").then(e=>e.p),__vite__mapDeps([318,2]))}),parser:oe("parser",function(){return X(()=>import("./parser-CuIfV_M8.js").then(e=>e.p),__vite__mapDeps([319,2]))}),pascal:oe("pascal",function(){return X(()=>import("./pascal-BiB8a1yc.js").then(e=>e.p),__vite__mapDeps([320,2]))}),pascaligo:oe("pascaligo",function(){return X(()=>import("./pascaligo-Bbe6k1sN.js").then(e=>e.p),__vite__mapDeps([321,2]))}),pcaxis:oe("pcaxis",function(){return X(()=>import("./pcaxis-Cjwjh94y.js").then(e=>e.p),__vite__mapDeps([322,2]))}),peoplecode:oe("peoplecode",function(){return X(()=>import("./peoplecode-hzUErX2R.js").then(e=>e.p),__vite__mapDeps([323,2]))}),perl:oe("perl",function(){return X(()=>import("./perl-B1D9cLJK.js").then(e=>e.p),__vite__mapDeps([324,2]))}),phpExtras:oe("phpExtras",function(){return X(()=>import("./php-extras-CZ7KxjqE.js").then(e=>e.p),__vite__mapDeps([325,2,277,191]))}),php:oe("php",function(){return X(()=>import("./php-Dk7MEIvs.js").then(e=>e.p),__vite__mapDeps([326,2,277,191]))}),phpdoc:oe("phpdoc",function(){return X(()=>import("./phpdoc-FxciP3cA.js").then(e=>e.p),__vite__mapDeps([327,2,277,191,250]))}),plsql:oe("plsql",function(){return X(()=>import("./plsql-DvVXY7wu.js").then(e=>e.p),__vite__mapDeps([328,2,130]))}),powerquery:oe("powerquery",function(){return X(()=>import("./powerquery-Btcc8rhQ.js").then(e=>e.p),__vite__mapDeps([329,2]))}),powershell:oe("powershell",function(){return X(()=>import("./powershell-AWIxkKNB.js").then(e=>e.p),__vite__mapDeps([330,2]))}),processing:oe("processing",function(){return X(()=>import("./processing-B76ABtt6.js").then(e=>e.p),__vite__mapDeps([331,2]))}),prolog:oe("prolog",function(){return X(()=>import("./prolog-BkajrflI.js").then(e=>e.p),__vite__mapDeps([332,2]))}),promql:oe("promql",function(){return X(()=>import("./promql-NkmAc1R6.js").then(e=>e.p),__vite__mapDeps([333,2]))}),properties:oe("properties",function(){return X(()=>import("./properties-Xjh-xSf6.js").then(e=>e.p),__vite__mapDeps([334,2]))}),protobuf:oe("protobuf",function(){return X(()=>import("./protobuf-BI4CAp9r.js").then(e=>e.p),__vite__mapDeps([335,2]))}),psl:oe("psl",function(){return X(()=>import("./psl-aZe3ORrd.js").then(e=>e.p),__vite__mapDeps([336,2]))}),pug:oe("pug",function(){return X(()=>import("./pug-CoMAP1Jj.js").then(e=>e.p),__vite__mapDeps([337,2]))}),puppet:oe("puppet",function(){return X(()=>import("./puppet-D22HavK3.js").then(e=>e.p),__vite__mapDeps([338,2]))}),pure:oe("pure",function(){return X(()=>import("./pure-BCQxrhr5.js").then(e=>e.p),__vite__mapDeps([339,2]))}),purebasic:oe("purebasic",function(){return X(()=>import("./purebasic-CS3SBoo5.js").then(e=>e.p),__vite__mapDeps([340,2]))}),purescript:oe("purescript",function(){return X(()=>import("./purescript-kPZQhZXw.js").then(e=>e.p),__vite__mapDeps([341,2,229]))}),python:oe("python",function(){return X(()=>import("./python-dI9O2OOO.js").then(e=>e.p),__vite__mapDeps([342,2]))}),q:oe("q",function(){return X(()=>import("./q-BM_OsTRZ.js").then(e=>e.q),__vite__mapDeps([343,2]))}),qml:oe("qml",function(){return X(()=>import("./qml-6uNzUUZ_.js").then(e=>e.q),__vite__mapDeps([344,2]))}),qore:oe("qore",function(){return X(()=>import("./qore-CT2dtVvu.js").then(e=>e.q),__vite__mapDeps([345,2]))}),qsharp:oe("qsharp",function(){return X(()=>import("./qsharp-CUW6Vzvu.js").then(e=>e.q),__vite__mapDeps([346,2]))}),r:oe("r",function(){return X(()=>import("./r-CxoAQyfy.js").then(e=>e.r),__vite__mapDeps([347,2]))}),racket:oe("racket",function(){return X(()=>import("./racket-Ce6iEwSg.js").then(e=>e.r),__vite__mapDeps([348,2,280]))}),reason:oe("reason",function(){return X(()=>import("./reason-C3OtRNQn.js").then(e=>e.r),__vite__mapDeps([349,2]))}),regex:oe("regex",function(){return X(()=>import("./regex-24inC6Mm.js").then(e=>e.r),__vite__mapDeps([350,2]))}),rego:oe("rego",function(){return X(()=>import("./rego-DIGNi3rm.js").then(e=>e.r),__vite__mapDeps([351,2]))}),renpy:oe("renpy",function(){return X(()=>import("./renpy-2_7A_zWP.js").then(e=>e.r),__vite__mapDeps([352,2]))}),rest:oe("rest",function(){return X(()=>import("./rest-DhkPHUyy.js").then(e=>e.r),__vite__mapDeps([353,2]))}),rip:oe("rip",function(){return X(()=>import("./rip-NrUmeF-B.js").then(e=>e.r),__vite__mapDeps([354,2]))}),roboconf:oe("roboconf",function(){return X(()=>import("./roboconf-BemhCpww.js").then(e=>e.r),__vite__mapDeps([355,2]))}),robotframework:oe("robotframework",function(){return X(()=>import("./robotframework-53wxIqzy.js").then(e=>e.r),__vite__mapDeps([356,2]))}),ruby:oe("ruby",function(){return X(()=>import("./ruby-C6pGL11I.js").then(e=>e.r),__vite__mapDeps([357,2,175]))}),rust:oe("rust",function(){return X(()=>import("./rust-BHPZBpz7.js").then(e=>e.r),__vite__mapDeps([358,2]))}),sas:oe("sas",function(){return X(()=>import("./sas-yB8mv_pf.js").then(e=>e.s),__vite__mapDeps([359,2]))}),sass:oe("sass",function(){return X(()=>import("./sass-DgOtzGEh.js").then(e=>e.s),__vite__mapDeps([360,2]))}),scala:oe("scala",function(){return X(()=>import("./scala-c85IbDKx.js").then(e=>e.s),__vite__mapDeps([361,2,248]))}),scheme:oe("scheme",function(){return X(()=>import("./scheme-DujsssZ_.js").then(e=>e.s),__vite__mapDeps([362,2,280]))}),scss:oe("scss",function(){return X(()=>import("./scss-N9CyGJ1A.js").then(e=>e.s),__vite__mapDeps([363,2]))}),shellSession:oe("shellSession",function(){return X(()=>import("./shell-session-CfJU-2jh.js").then(e=>e.s),__vite__mapDeps([364,2,148]))}),smali:oe("smali",function(){return X(()=>import("./smali-7KK8MopY.js").then(e=>e.s),__vite__mapDeps([365,2]))}),smalltalk:oe("smalltalk",function(){return X(()=>import("./smalltalk-DJTW1rgy.js").then(e=>e.s),__vite__mapDeps([366,2]))}),smarty:oe("smarty",function(){return X(()=>import("./smarty-CswuHGTf.js").then(e=>e.s),__vite__mapDeps([367,2,191]))}),sml:oe("sml",function(){return X(()=>import("./sml-4a7AgiKJ.js").then(e=>e.s),__vite__mapDeps([368,2]))}),solidity:oe("solidity",function(){return X(()=>import("./solidity-DEN_xXGX.js").then(e=>e.s),__vite__mapDeps([369,2]))}),solutionFile:oe("solutionFile",function(){return X(()=>import("./solution-file-DWy8oS52.js").then(e=>e.s),__vite__mapDeps([370,2]))}),soy:oe("soy",function(){return X(()=>import("./soy-BX0S4Ybl.js").then(e=>e.s),__vite__mapDeps([371,2,191]))}),sparql:oe("sparql",function(){return X(()=>import("./sparql-B-dncyn2.js").then(e=>e.s),__vite__mapDeps([372,2,373]))}),splunkSpl:oe("splunkSpl",function(){return X(()=>import("./splunk-spl-BL9M6RFD.js").then(e=>e.s),__vite__mapDeps([374,2]))}),sqf:oe("sqf",function(){return X(()=>import("./sqf-B-w3EaXj.js").then(e=>e.s),__vite__mapDeps([375,2]))}),sql:oe("sql",function(){return X(()=>import("./sql-CSwhl0T2.js").then(e=>e.s),__vite__mapDeps([376,2,130]))}),squirrel:oe("squirrel",function(){return X(()=>import("./squirrel-C5_0fEts.js").then(e=>e.s),__vite__mapDeps([377,2]))}),stan:oe("stan",function(){return X(()=>import("./stan-BkKsrDj5.js").then(e=>e.s),__vite__mapDeps([378,2]))}),stylus:oe("stylus",function(){return X(()=>import("./stylus-2Q_1bI5O.js").then(e=>e.s),__vite__mapDeps([379,2]))}),swift:oe("swift",function(){return X(()=>import("./swift-d0VCk99T.js").then(e=>e.s),__vite__mapDeps([380,2]))}),systemd:oe("systemd",function(){return X(()=>import("./systemd-B69haCtV.js").then(e=>e.s),__vite__mapDeps([381,2]))}),t4Cs:oe("t4Cs",function(){return X(()=>import("./t4-cs-CLTzhrWu.js").then(e=>e.t),__vite__mapDeps([382,2,383,142]))}),t4Templating:oe("t4Templating",function(){return X(()=>import("./t4-templating-CInlPI0-.js").then(e=>e.t),__vite__mapDeps([384,2,383]))}),t4Vb:oe("t4Vb",function(){return X(()=>import("./t4-vb-CEKPTSWr.js").then(e=>e.t),__vite__mapDeps([385,2,383,386,150]))}),tap:oe("tap",function(){return X(()=>import("./tap-3j2EobdJ.js").then(e=>e.t),__vite__mapDeps([387,2,388]))}),tcl:oe("tcl",function(){return X(()=>import("./tcl-zimK4Rb-.js").then(e=>e.t),__vite__mapDeps([389,2]))}),textile:oe("textile",function(){return X(()=>import("./textile-7onSDWIs.js").then(e=>e.t),__vite__mapDeps([390,2]))}),toml:oe("toml",function(){return X(()=>import("./toml-B0WKHIUt.js").then(e=>e.t),__vite__mapDeps([391,2]))}),tremor:oe("tremor",function(){return X(()=>import("./tremor-DTcir1gV.js").then(e=>e.t),__vite__mapDeps([392,2]))}),tsx:oe("tsx",function(){return X(()=>import("./tsx-C2pKQQQ0.js").then(e=>e.t),__vite__mapDeps([393,2,268,261]))}),tt2:oe("tt2",function(){return X(()=>import("./tt2-C4s6UOud.js").then(e=>e.t),__vite__mapDeps([394,2,191]))}),turtle:oe("turtle",function(){return X(()=>import("./turtle-BYwbX2lo.js").then(e=>e.t),__vite__mapDeps([395,2,373]))}),twig:oe("twig",function(){return X(()=>import("./twig-DALNrbqc.js").then(e=>e.t),__vite__mapDeps([396,2,191]))}),typescript:oe("typescript",function(){return X(()=>import("./typescript-hEHsyI9-.js").then(e=>e.t),__vite__mapDeps([397,2,261]))}),typoscript:oe("typoscript",function(){return X(()=>import("./typoscript-C_RZnLUi.js").then(e=>e.t),__vite__mapDeps([398,2]))}),unrealscript:oe("unrealscript",function(){return X(()=>import("./unrealscript-DO0UKSEs.js").then(e=>e.u),__vite__mapDeps([399,2]))}),uorazor:oe("uorazor",function(){return X(()=>import("./uorazor-Cw2oyUim.js").then(e=>e.u),__vite__mapDeps([400,2]))}),uri:oe("uri",function(){return X(()=>import("./uri-Cla3Mizl.js").then(e=>e.u),__vite__mapDeps([401,2]))}),v:oe("v",function(){return X(()=>import("./v-BsukdtQB.js").then(e=>e.v),__vite__mapDeps([402,2]))}),vala:oe("vala",function(){return X(()=>import("./vala-C185s0T4.js").then(e=>e.v),__vite__mapDeps([403,2]))}),vbnet:oe("vbnet",function(){return X(()=>import("./vbnet-CJSJpYVN.js").then(e=>e.v),__vite__mapDeps([404,2,386,150]))}),velocity:oe("velocity",function(){return X(()=>import("./velocity-CyQirldx.js").then(e=>e.v),__vite__mapDeps([405,2]))}),verilog:oe("verilog",function(){return X(()=>import("./verilog-DM4rVBaH.js").then(e=>e.v),__vite__mapDeps([406,2]))}),vhdl:oe("vhdl",function(){return X(()=>import("./vhdl-B2ul-nke.js").then(e=>e.v),__vite__mapDeps([407,2]))}),vim:oe("vim",function(){return X(()=>import("./vim-D2bsD5Qn.js").then(e=>e.v),__vite__mapDeps([408,2]))}),visualBasic:oe("visualBasic",function(){return X(()=>import("./visual-basic-DNYvyv_b.js").then(e=>e.v),__vite__mapDeps([409,2]))}),warpscript:oe("warpscript",function(){return X(()=>import("./warpscript-DjoJn5rp.js").then(e=>e.w),__vite__mapDeps([410,2]))}),wasm:oe("wasm",function(){return X(()=>import("./wasm-BbdpnjqR.js").then(e=>e.w),__vite__mapDeps([411,2]))}),webIdl:oe("webIdl",function(){return X(()=>import("./web-idl-BniNXYF8.js").then(e=>e.w),__vite__mapDeps([412,2]))}),wiki:oe("wiki",function(){return X(()=>import("./wiki-mlk-5nnD.js").then(e=>e.w),__vite__mapDeps([413,2]))}),wolfram:oe("wolfram",function(){return X(()=>import("./wolfram-qZAo5rwv.js").then(e=>e.w),__vite__mapDeps([414,2]))}),wren:oe("wren",function(){return X(()=>import("./wren-BqEZDn1c.js").then(e=>e.w),__vite__mapDeps([415,2]))}),xeora:oe("xeora",function(){return X(()=>import("./xeora-Cnf6lXKg.js").then(e=>e.x),__vite__mapDeps([416,2]))}),xmlDoc:oe("xmlDoc",function(){return X(()=>import("./xml-doc-Bt7GfDs3.js").then(e=>e.x),__vite__mapDeps([417,2]))}),xojo:oe("xojo",function(){return X(()=>import("./xojo-DJ-XOrAn.js").then(e=>e.x),__vite__mapDeps([418,2]))}),xquery:oe("xquery",function(){return X(()=>import("./xquery-DijxsTGH.js").then(e=>e.x),__vite__mapDeps([419,2]))}),yaml:oe("yaml",function(){return X(()=>import("./yaml-uyIc--AI.js").then(e=>e.y),__vite__mapDeps([420,2,388]))}),yang:oe("yang",function(){return X(()=>import("./yang-BSK0EYb5.js").then(e=>e.y),__vite__mapDeps([421,2]))}),zig:oe("zig",function(){return X(()=>import("./zig-C5U7OOzb.js").then(e=>e.z),__vite__mapDeps([422,2]))})},qQt=zQt({loader:function(){return X(()=>import("./core-Ce8M0wN-.js").then(t=>t.c),__vite__mapDeps([423,2,293,181,166,253])).then(function(t){return t.default||t})},isLanguageRegistered:function(t,n){return t.registered(n)},languageLoaders:GQt,registerLanguage:function(t,n,r){return t.register(r)}}),KQt="light";function YQt(e){return{mode:KQt,...e?.theme}}function kn(e){var t=e;return function(n){var r=YQt(n);let s=r.mode;return t[s]}}const QQt=e=>{const t={theme:e};return{lineNumberColor:kn({light:"#383a42",dark:"#abb2bf"})(t),lineNumberBgColor:kn({light:"#fafafa",dark:"#282c34"})(t),backgroundColor:kn({light:"#fafafa",dark:"#282c34"})(t),textColor:kn({light:"#383a42",dark:"#abb2bf"})(t),substringColor:kn({light:"#e45649",dark:"#e06c75"})(t),keywordColor:kn({light:"#a626a4",dark:"#c678dd"})(t),attributeColor:kn({light:"#50a14f",dark:"#98c379"})(t),selectorAttributeColor:kn({light:"#e45649",dark:"#e06c75"})(t),docTagColor:kn({light:"#a626a4",dark:"#c678dd"})(t),nameColor:kn({light:"#e45649",dark:"#e06c75"})(t),builtInColor:kn({light:"#c18401",dark:"#e6c07b"})(t),literalColor:kn({light:"#0184bb",dark:"#56b6c2"})(t),bulletColor:kn({light:"#4078f2",dark:"#61aeee"})(t),codeColor:kn({light:"#383a42",dark:"#abb2bf"})(t),additionColor:kn({light:"#50a14f",dark:"#98c379"})(t),regexpColor:kn({light:"#50a14f",dark:"#98c379"})(t),symbolColor:kn({light:"#4078f2",dark:"#61aeee"})(t),variableColor:kn({light:"#986801",dark:"#d19a66"})(t),templateVariableColor:kn({light:"#986801",dark:"#d19a66"})(t),linkColor:kn({light:"#4078f2",dark:"#61aeee"})(t),selectorClassColor:kn({light:"#986801",dark:"#d19a66"})(t),typeColor:kn({light:"#986801",dark:"#d19a66"})(t),stringColor:kn({light:"#50a14f",dark:"#98c379"})(t),selectorIdColor:kn({light:"#4078f2",dark:"#61aeee"})(t),quoteColor:kn({light:"#a0a1a7",dark:"#5c6370"})(t),templateTagColor:kn({light:"#383a42",dark:"#abb2bf"})(t),deletionColor:kn({light:"#e45649",dark:"#e06c75"})(t),titleColor:kn({light:"#4078f2",dark:"#61aeee"})(t),sectionColor:kn({light:"#e45649",dark:"#e06c75"})(t),commentColor:kn({light:"#a0a1a7",dark:"#5c6370"})(t),metaKeywordColor:kn({light:"#383a42",dark:"#abb2bf"})(t),metaColor:kn({light:"#4078f2",dark:"#61aeee"})(t),functionColor:kn({light:"#383a42",dark:"#abb2bf"})(t),numberColor:kn({light:"#986801",dark:"#d19a66"})(t)}},Ak="inherit",pz="inherit",XQt={fontSize:pz,fontFamily:Ak,lineHeight:20/12,padding:8},ZQt=e=>({fontSize:pz,lineHeight:20/14,color:e.lineNumberColor,backgroundColor:e.lineNumberBgColor,flexShrink:0,padding:8,textAlign:"right",userSelect:"none"}),vRe=e=>({key:{color:e.keywordColor,fontWeight:"bolder"},keyword:{color:e.keywordColor,fontWeight:"bolder"},"attr-name":{color:e.attributeColor},selector:{color:e.selectorTagColor},comment:{color:e.commentColor,fontFamily:Ak,fontStyle:"italic"},"block-comment":{color:e.commentColor,fontFamily:Ak,fontStyle:"italic"},"function-name":{color:e.sectionColor},"class-name":{color:e.sectionColor},doctype:{color:e.docTagColor},substr:{color:e.substringColor},namespace:{color:e.nameColor},builtin:{color:e.builtInColor},entity:{color:e.literalColor},bullet:{color:e.bulletColor},code:{color:e.codeColor},addition:{color:e.additionColor},regex:{color:e.regexpColor},symbol:{color:e.symbolColor},variable:{color:e.variableColor},url:{color:e.linkColor},"selector-attr":{color:e.selectorAttributeColor},"selector-pseudo":{color:e.selectorPseudoColor},type:{color:e.typeColor},string:{color:e.stringColor},quote:{color:e.quoteColor},tag:{color:e.templateTagColor},deletion:{color:e.deletionColor},title:{color:e.titleColor},section:{color:e.sectionColor},"meta-keyword":{color:e.metaKeywordColor},meta:{color:e.metaColor},italic:{fontStyle:"italic"},bold:{fontWeight:"bolder"},function:{color:e.functionColor},number:{color:e.numberColor}}),bRe=e=>({fontSize:pz,fontFamily:Ak,background:e.backgroundColor,color:e.textColor,borderRadius:3,display:"flex",lineHeight:20/14,overflowX:"auto",whiteSpace:"pre"}),JQt=e=>({'pre[class*="language-"]':bRe(e),...vRe(e)}),eXt=e=>({'pre[class*="language-"]':{...bRe(e),padding:"2px 4px",display:"inline",whiteSpace:"pre-wrap"},...vRe(e)});function _Re(e={mode:"light"}){const t={...QQt(e),...e};return{lineNumberContainerStyle:ZQt(t),codeBlockStyle:JQt(t),inlineCodeStyle:eXt(t),codeContainerStyle:XQt}}const tXt=Object.freeze([{name:"PHP",alias:["php","php3","php4","php5"],value:"php"},{name:"Java",alias:["java"],value:"java"},{name:"CSharp",alias:["csharp","c#","cs"],value:"csharp"},{name:"Python",alias:["python","py"],value:"python"},{name:"JavaScript",alias:["javascript","js"],value:"javascript"},{name:"XML",alias:["xml"],value:"xml"},{name:"HTML",alias:["html","htm"],value:"markup"},{name:"C++",alias:["c++","cpp","clike"],value:"cpp"},{name:"Ruby",alias:["ruby","rb","duby"],value:"ruby"},{name:"Objective-C",alias:["objective-c","objectivec","obj-c","objc"],value:"objectivec"},{name:"C",alias:["c"],value:"cpp"},{name:"Swift",alias:["swift"],value:"swift"},{name:"TeX",alias:["tex","latex"],value:"tex"},{name:"Shell",alias:["shell","sh","ksh","zsh"],value:"bash"},{name:"Scala",alias:["scala"],value:"scala"},{name:"Go",alias:["go"],value:"go"},{name:"ActionScript",alias:["actionscript","actionscript3","as"],value:"actionscript"},{name:"ColdFusion",alias:["coldfusion"],value:"xml"},{name:"JavaFX",alias:["javafx","jfx"],value:"java"},{name:"VbNet",alias:["vbnet","vb.net"],value:"vbnet"},{name:"JSON",alias:["json"],value:"json"},{name:"MATLAB",alias:["matlab"],value:"matlab"},{name:"Groovy",alias:["groovy"],value:"groovy"},{name:"SQL",alias:["sql","postgresql","postgres","plpgsql","psql","postgresql-console","postgres-console","tsql","t-sql","mysql","sqlite"],value:"sql"},{name:"R",alias:["r"],value:"r"},{name:"Perl",alias:["perl","pl"],value:"perl"},{name:"Lua",alias:["lua"],value:"lua"},{name:"Delphi",alias:["delphi","pas","pascal","objectpascal"],value:"delphi"},{name:"XML",alias:["xml"],value:"xml"},{name:"TypeScript",alias:["typescript","ts","tsx"],value:"typescript"},{name:"CoffeeScript",alias:["coffeescript","coffee-script","coffee"],value:"coffeescript"},{name:"Haskell",alias:["haskell","hs"],value:"haskell"},{name:"Puppet",alias:["puppet"],value:"puppet"},{name:"Arduino",alias:["arduino"],value:"arduino"},{name:"Fortran",alias:["fortran"],value:"fortran"},{name:"Erlang",alias:["erlang","erl"],value:"erlang"},{name:"PowerShell",alias:["powershell","posh","ps1","psm1"],value:"powershell"},{name:"Haxe",alias:["haxe","hx","hxsl"],value:"haxe"},{name:"Elixir",alias:["elixir","ex","exs"],value:"elixir"},{name:"Verilog",alias:["verilog","v"],value:"verilog"},{name:"Rust",alias:["rust"],value:"rust"},{name:"VHDL",alias:["vhdl"],value:"vhdl"},{name:"Sass",alias:["sass"],value:"less"},{name:"OCaml",alias:["ocaml"],value:"ocaml"},{name:"Dart",alias:["dart"],value:"dart"},{name:"CSS",alias:["css"],value:"css"},{name:"reStructuredText",alias:["restructuredtext","rst","rest"],value:"rest"},{name:"ObjectPascal",alias:["objectpascal"],value:"delphi"},{name:"Kotlin",alias:["kotlin"],value:"kotlin"},{name:"D",alias:["d"],value:"d"},{name:"Octave",alias:["octave"],value:"matlab"},{name:"QML",alias:["qbs","qml"],value:"qml"},{name:"Prolog",alias:["prolog"],value:"prolog"},{name:"FoxPro",alias:["foxpro","vfp","clipper","xbase"],value:"vbnet"},{name:"Scheme",alias:["scheme","scm"],value:"scheme"},{name:"CUDA",alias:["cuda","cu"],value:"cpp"},{name:"Julia",alias:["julia","jl"],value:"julia"},{name:"Racket",alias:["racket","rkt"],value:"lisp"},{name:"Ada",alias:["ada","ada95","ada2005"],value:"ada"},{name:"Tcl",alias:["tcl"],value:"tcl"},{name:"Mathematica",alias:["mathematica","mma","nb"],value:"mathematica"},{name:"Autoit",alias:["autoit"],value:"autoit"},{name:"StandardML",alias:["standardmL","sml","standardml"],value:"sml"},{name:"Objective-J",alias:["objective-j","objectivej","obj-j","objj"],value:"objectivec"},{name:"Smalltalk",alias:["smalltalk","squeak","st"],value:"smalltalk"},{name:"Vala",alias:["vala","vapi"],value:"vala"},{name:"ABAP",alias:["abap"],value:"sql"},{name:"LiveScript",alias:["livescript","live-script"],value:"livescript"},{name:"XQuery",alias:["xquery","xqy","xq","xql","xqm"],value:"xquery"},{name:"PlainText",alias:["text","plaintext"],value:"text"},{name:"Yaml",alias:["yaml","yml"],value:"yaml"},{name:"GraphQL",alias:["graphql","gql"],value:"graphql"}]),nXt=e=>{if(!e)return"";const t=tXt.find(n=>n.name===e||n.alias.includes(e));return t?t.value:e||"text"};class wRe extends d.PureComponent{constructor(){super(...arguments),this._isMounted=!1}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}getLineOpacity(t){if(!this.props.highlight)return 1;const n=this.props.highlight.split(",").map(r=>{if(r.indexOf("-")>0){const[s,a]=r.split("-").map(Number).sort();return Array(a+1).fill(void 0).map((i,l)=>l).slice(s,a+1)}return Number(r)}).reduce((r,s)=>r.concat(s),[]);return n.length===0||n.includes(t)?1:.3}render(){const{inlineCodeStyle:t}=_Re(this.props.theme),r={language:nXt(this.props.language),PreTag:this.props.preTag,style:this.props.codeStyle||t,showLineNumbers:this.props.showLineNumbers,startingLineNumber:this.props.startingLineNumber,codeTagProps:this.props.codeTagProps,wrapLongLines:this.props.wrapLongLines};return I.createElement(qQt,Object.assign({},r,{wrapLines:!!this.props.highlight,customStyle:this.props.customStyle,lineProps:s=>({style:{opacity:this.getLineOpacity(s),...this.props.lineNumberContainerStyle}})}),this.props.text)}}wRe.defaultProps={theme:{},showLineNumbers:!1,wrapLongLines:!1,startingLineNumber:1,lineNumberContainerStyle:{},codeTagProps:{},preTag:"span",highlight:"",customStyle:{}};const CRe="text";let hz=class extends d.PureComponent{constructor(){super(...arguments),this._isMounted=!1,this.handleCopy=t=>{const n=t.nativeEvent.clipboardData;if(n){t.preventDefault();const r=window.getSelection();if(r===null)return;const s=r.toString(),a=`<!doctype html><html><head></head><body><pre>${s}</pre></body></html>`;n.clearData(),n.setData("text/html",a),n.setData("text/plain",s)}}}componentDidMount(){this._isMounted=!0}componentWillUnmount(){this._isMounted=!1}render(){var t,n,r,s;const{lineNumberContainerStyle:a,codeBlockStyle:i,codeContainerStyle:l}=_Re(this.props.theme),c={language:this.props.language||CRe,codeStyle:{...i,...(t=this.props)===null||t===void 0?void 0:t.codeBlockStyle},customStyle:(n=this.props)===null||n===void 0?void 0:n.customStyle,showLineNumbers:this.props.showLineNumbers,startingLineNumber:this.props.startingLineNumber,codeTagProps:{style:{...l,...(r=this.props)===null||r===void 0?void 0:r.codeContainerStyle}},lineNumberContainerStyle:{...a,...(s=this.props)===null||s===void 0?void 0:s.lineNumberContainerStyle},text:this.props.text.toString(),highlight:this.props.highlight,wrapLongLines:this.props.wrapLongLines};return I.createElement(wRe,Object.assign({},c))}};hz.displayName="CodeBlock";hz.defaultProps={text:"",showLineNumbers:!0,wrapLongLines:!1,startingLineNumber:1,language:CRe,theme:{},highlight:"",lineNumberContainerStyle:{},customStyle:{},codeBlockStyle:{}};var rXt=SQt(hz);X4.button`
  position: absolute;
  top: 0.5em;
  right: 0.75em;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  align-items: center;
  background: ${e=>e.theme.backgroundColor};
  margin-top: 0.15rem;
  border-radius: 0.25rem;
  max-height: 2rem;
  max-width: 2rem;
  padding: 0.25rem;
  &:hover {
    opacity: ${e=>e.copied?1:.5};
  }
  &:focus {
    outline: none;
    opacity: 1;
  }
  .icon {
    width: 1rem;
    height: 1rem;
  }
`;X4.div`
  position: relative;
  background: ${e=>e.theme.backgroundColor};
  border-radius: 0.25rem;
  padding: ${e=>e.codeBlock?"0.25rem 0.5rem 0.25rem 0.25rem":"0.25rem"};
`;X4.div`
    position: relative;
    width: ${({width:e})=>e||"auto"};
    max-width: 100%;
    padding: 8pt;
    padding-right: calc(2 * 16pt);
    color: ${({style:e})=>e.color};
    background-color: ${({style:e})=>e.bgColor};
    border: 1px solid ${({style:e})=>e.border};
    border-radius: 5px;
  pre {
    margin: 0;
    padding: 0;
    border: none;
    background-color: transparent;
    color: ${({style:e})=>e.color};
    font-size: 0.8125rem;
  }
  pre::before {
    content: '$ ';
    user-select: none;
  }
  pre :global(*) {
    margin: 0;
    padding: 0;
    font-size: inherit;
    color: inherit;
  }
  .copy {
    position: absolute;
    right: 0;
    top: -2px;
    transform: translateY(50%);
    background-color: ${({style:e})=>e.bgColor};
    display: inline-flex;
    justify-content: center;
    align-items: center;
    width: calc(2 * 16pt);
    color: inherit;
    transition: opacity 0.2s ease 0s;
    border-radius: 5px;
    cursor: pointer;
    user-select: none;
  }
  .copy:hover {
    opacity: 0.7;
  }
`;var sXt={lineNumberColor:"#c5c8c6",lineNumberBgColor:"#1d1f21",backgroundColor:"#1d1f21",textColor:"#c5c8c6",substringColor:"#c5c8c6",keywordColor:"#b294bb",attributeColor:"#f0c674",selectorAttributeColor:"#b294bb",docTagColor:"#c5c8c6",nameColor:"#cc6666",builtInColor:"#de935f",literalColor:"#de935f",bulletColor:"#b5bd68",codeColor:"#c5c8c6",additionColor:"#b5bd68",regexpColor:"#cc6666",symbolColor:"#b5bd68",variableColor:"#cc6666",templateVariableColor:"#cc6666",linkColor:"#de935f",selectorClassColor:"#cc6666",typeColor:"#de935f",stringColor:"#b5bd68",selectorIdColor:"#cc6666",quoteColor:"#969896",templateTagColor:"#c5c8c6",deletionColor:"#cc6666",titleColor:"#81a2be",sectionColor:"#81a2be",commentColor:"#969896",metaKeywordColor:"#c5c8c6",metaColor:"#de935f",functionColor:"#c5c8c6",numberColor:"#de935f"},aXt={lineNumberColor:"#4d4d4c",lineNumberBgColor:"white",backgroundColor:"white",textColor:"#4d4d4c",substringColor:"#4d4d4c",keywordColor:"#8959a8",attributeColor:"#eab700",selectorAttributeColor:"#8959a8",docTagColor:"#4d4d4c",nameColor:"#c82829",builtInColor:"#f5871f",literalColor:"#f5871f",bulletColor:"#718c00",codeColor:"#4d4d4c",additionColor:"#718c00",regexpColor:"#c82829",symbolColor:"#718c00",variableColor:"#c82829",templateVariableColor:"#c82829",linkColor:"#f5871f",selectorClassColor:"#c82829",typeColor:"#f5871f",stringColor:"#718c00",selectorIdColor:"#c82829",quoteColor:"#8e908c",templateTagColor:"#4d4d4c",deletionColor:"#c82829",titleColor:"#4271ae",sectionColor:"#4271ae",commentColor:"#8e908c",metaKeywordColor:"#4d4d4c",metaColor:"#f5871f",functionColor:"#4d4d4c",numberColor:"#f5871f"};const Pb=I.memo(e=>{const{children:t,className:n,codeBlockProps:r,hideTools:s,trackEvent:a,stickTools:i,translations:l,codeBlockStyles:c,...u}=e,{language:f="text",showLineNumbers:m,text:p,theme:h,wrapLongLines:g,...y}=r,{colorScheme:x}=jr({addSecondPass:!0}),v=d.useMemo(()=>{let M;return h?M=h:(M=x==="dark"?sXt:aXt,M.backgroundColor="transparent",M.lineNumberBgColor="transparent"),M},[x,h]),b=B("codeWrapper text-light selection:text-super selection:bg-super/10 my-md relative flex flex-col rounded font-mono text-sm font-normal",n),_=d.useCallback(()=>{navigator.clipboard.writeText(String(t)),a?.("click code block copy",{language:f??"text"})},[t,f,a]),[w,C]=d.useState(!!(g??f==="text")),S=d.useCallback(()=>{C(M=>{const j=!M;return a?.("click code block wrap toggle",{wrap:j}),j})},[a]),E=d.useMemo(()=>({"--scrollbar-thumb":"oklch(var(--foreground-color) / 0.15)","--scrollbar-track":"transparent",scrollbarWidth:"thin",scrollbarColor:"var(--scrollbar-thumb) var(--scrollbar-track)",...c}),[c]);return o.jsxs("div",{className:b,...u,children:[o.jsx("div",{className:B("translate-y-xs -translate-x-xs bottom-xl mb-xl flex h-0 items-start justify-end",{["md:sticky md:top-[100px]"]:i}),children:!s&&o.jsx(z,{variant:"background",className:"overflow-hidden rounded-full",children:o.jsxs(z,{variant:"subtler",children:[o.jsx(Me,{icon:w?LOe:OOe,size:"small",pill:!0,onClick:S,testId:"toggle-wrap-code-button",ariaLabel:w?l?.noWrap:l?.wrap,toolTip:w?l?.noWrap:l?.wrap}),o.jsx(Me,{icon:Xce,size:"small",pill:!0,clickFeedback:!0,onClick:_,testId:"copy-code-button",ariaLabel:l?.copy,toolTip:l?.copy})]})})}),o.jsxs("div",{className:"-mt-xl",children:[f&&!s&&o.jsx("div",{children:o.jsx("div",{"data-testid":"code-language-indicator",className:"text-quiet bg-subtle py-xs px-sm inline-block rounded-br rounded-tl-[3px] font-thin",children:f})}),o.jsx("div",{children:o.jsx(rXt,{as:void 0,forwardedAs:void 0,language:f,showLineNumbers:!1,text:String(t),theme:v,wrapLongLines:w,customStyle:E,...y})})]})]})});Pb.displayName="CodeBlock";const SRe=I.memo(({step:e,action:t})=>{const{$t:n}=Z(),[r,s]=d.useState(!1),{final:a,status:i,script:l,output:c,stdout:u}=e.content,f=!a,m=i==="generating"||i==="executing",p=d.useCallback(()=>{s(x=>!x)},[]),h=u&&c?u+`
`+c:u||c||"",g=d.useMemo(()=>({language:"python"}),[]),y=!!l;return o.jsxs("div",{children:[o.jsx(me,{onClick:p,text:t,icon:DOe,isLoading:f,size:"tiny",pill:!0,chevron:y,chevronIcon:r?$y:Wn}),o.jsx(Ye,{children:r&&y&&o.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1,transition:{ease:"easeIn",duration:.15}},className:"mb-sm space-y-sm",children:[o.jsx(Pb,{className:"text-xs",codeBlockProps:g,children:l}),!m&&o.jsxs(ve.div,{initial:{opacity:0},animate:{opacity:1,transition:{ease:"easeIn",duration:.15}},children:[o.jsx(F,{variant:"tiny",color:"light",children:n(h?{defaultMessage:"Output",id:"fio5opLcOZ"}:{defaultMessage:"This code did not produce an output",id:"UgqMuAXFKs"})}),i!=="error"&&h&&o.jsx(Pb,{className:B("scrollbar-subtle max-h-[220px] overflow-y-auto text-xs",i==="success"),codeBlockProps:g,children:h})]})]})})]})});SRe.displayName="CodeStep";const ERe=I.memo(({asset:e})=>{const{isCanvasOpen:t,canvasState:n}=Pp(),r=d.useMemo(()=>t&&e.uuid===n?.assetUuid,[e.uuid,n?.assetUuid,t]),{title:s,description:a,Icon:i}=oz(e),l=CYt({asset:e}),c=d.useCallback(async()=>{l()},[l]);return o.jsxs(z,{onClick:c,role:"button",tabIndex:0,variant:u_.subtler,className:B("flex w-fit items-center rounded-lg p-1.5",r&&"ring-super !ring-1"),children:[o.jsx(z,{variant:"super",className:"m-1 flex size-8 items-center justify-center rounded-md p-2",children:o.jsx(i,{color:"background",size:16})}),o.jsxs("div",{className:"flex flex-col gap-0.5 px-2",children:[o.jsx(F,{variant:"small",color:"default",className:"!font-display !text-[0.8125rem] font-medium",children:s}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"!font-display !text-[0.6875rem] leading-none",children:a})]})]})},({asset:e,...t},{asset:n,...r})=>zg(t,r)&&cs(e,n));ERe.displayName="AssetToken";const MRe=I.memo(({screenshot_uuid:e})=>{const{taskScreenshots:t}=Hr(),n=t?.[e??""];return o.jsx("div",{className:"bg-subtle border-subtlest relative -mt-1.5 aspect-[4/3] w-[160px] rounded border",children:o.jsx(ns,{src:n,lightboxSrc:n,alt:"Browser screenshot",includeLightBoxModal:!0,rounded:!0,imageClassName:"object-cover w-full text-[0] dark:mix-blend-normal",containerClassName:"h-full w-full",maskClassName:"bg-subtler"})})});MRe.displayName="ComputerStep";const kRe=I.memo(({step:e,action:t})=>{const{final:n,file_name:r,page_count:s,word_count:a}=e.content,i=!n;let l=t;return r&&n&&(l=r,s!=null?(l+=` (${s} pages`,a!=null&&(l+=`, ${a} words`),l+=")"):a!=null&&(l+=` (${a} words)`)),o.jsx(me,{text:t,icon:Qk,isLoading:i,size:"tiny",pill:!0,toolTip:l,tooltipLayout:"top"})});kRe.displayName="DocxStep";const TRe=I.memo(({status:e})=>{const{$t:t}=Z();let n=Fa,r=t({defaultMessage:"Done",id:"JXdbo8Vnlw"});switch(e){case"SENT":n=Fa,r=t({defaultMessage:"Email sent",id:"as7ksh6tP3"});break;case"FORWARDED":n=FOe,r=t({defaultMessage:"Email forwarded",id:"QUWo2L2sfE"});break;case"REJECTED":n=kt,r=t({defaultMessage:"Email rejected",id:"+469cQAaqI"});break;default:n=Fa,r=t({defaultMessage:"Done",id:"JXdbo8Vnlw"});break}return o.jsx(Vs,{icon:n,iconClassName:"text-super",text:r})});TRe.displayName="EmailStatusStep";const NRe=I.memo(({onClick:e,urls:t})=>{const n=d.useMemo(()=>t.map(r=>o.jsx(jRe,{url:r,onClick:e},r)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Up,{items:n,initialDisplayCount:1})})});NRe.displayName="GeneratedImageResultsStep";const jRe=I.memo(({url:e,onClick:t})=>{const n=d.useCallback(()=>{t?.(e)},[e,t]);return o.jsx(qe,{className:"block",href:e,target:"_blank",rel:"noopener nofollow",onClick:n,children:o.jsx(z,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(Wo,{variant:"tinyMono",className:"!text-[0.7rem]",url:e,isAttachment:!1,connectionType:Cn.GENERATED_IMAGE,source:"Generated Image"})})},e)});jRe.displayName="LinkFactory";const ARe=I.memo(({onClick:e,urls:t})=>{const n=d.useMemo(()=>t.map(r=>o.jsx(IRe,{url:r,onClick:e},r)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Up,{items:n,initialDisplayCount:1})})});ARe.displayName="GeneratedVideoResultsStep";const IRe=I.memo(({url:e,onClick:t})=>{const n=d.useCallback(()=>{t?.(e)},[e,t]);return o.jsx(qe,{className:"block",href:e,target:"_blank",rel:"noopener nofollow",onClick:n,children:o.jsx(z,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(Wo,{variant:"tinyMono",className:"!text-[0.7rem]",url:e,isAttachment:!1,connectionType:Cn.GENERATED_VIDEO,source:"Generated Video"})})},e)});IRe.displayName="LinkFactory";const aO=I.memo(({color:e,title:t})=>{const n="bg-[#13343B] dark:bg-[#F5F5F5]",s=(a=>a?{red:"bg-[#C0152F] dark:bg-[#FF5459]",maroon:"bg-[#944454] dark:bg-[#B3C901]",orange:"bg-[#DB7100] dark:bg-[#FFAB44]",teal:"bg-[#21808D] dark:bg-[#32B8C6]",grey:n,brown:"bg-[#A84B2F] dark:bg-[#E68161]",green:"bg-[#848456] dark:bg-[#B4B662]",gold:"bg-[#D39900] dark:bg-[#F0B435]",purple:"bg-[#865D95] dark:bg-[#C48ED8]",blue:"bg-[#19789E] dark:bg-[#54B4E3]"}[a]??n:n)(e);return o.jsx("div",{className:B("py-xs w-fit rounded-md px-2.5",s),children:o.jsx(F,{className:"translate-y-half",variant:"tiny",color:"defaultInverted",children:t})})});aO.displayName="GroupingTabsStep";const HS=(e,t)=>{if(typeof e=="object"&&e!==null&&t in e){const n=e[t];return typeof n=="string"?n:void 0}},oXt=(e,t)=>{if(e.step_type!=="MCP_TOOL_INPUT"||t.step_type!=="MCP_TOOL_OUTPUT")return!1;const n=HS(e.content,"goal_id"),r=HS(t.content,"goal_id");if(n&&r)return n===r;const s=HS(e.content,"tool_name"),a=HS(t.content,"tool_name");return!!(s&&a&&s===a)},Gun=e=>{if(!e?.length)return[];if(!e.some(s=>s.step_type==="MCP_TOOL_INPUT"||s.step_type==="MCP_TOOL_OUTPUT"))return e;let n=-1;return e.reduce((s,a,i)=>{if(i<=n||a.step_type==="MCP_TOOL_OUTPUT")return s;const l=e[i+1];return a.step_type==="MCP_TOOL_INPUT"&&l&&oXt(a,l)?(s.push({...a,mcp_tool_output_content:l.content}),n=i+1,s):(s.push({...a}),s)},[])},iXt=e=>{switch(e){case"Notion":return T5;case"Linear":return iF;case"GitHub":return fF;case"Asana":return pF;case"Atlassian":return hF;case"Slack":return cF;case"Wiley":return Om;case"CB Insights":return nF;case"PitchBook":return rF;case"Statista":return sF;default:return null}};function RRe(e){return JSON.stringify(e,null,2)}const lXt=(e,t=1e4,{showTruncationIndicator:n=!0,format:r=!1}={})=>{if(e.length<=t)return r?PRe(e):e;let s=t;const a=Math.max(0,t-100);for(let c=t-1;c>=a;c--){const u=e[c];if(u===","||u===`
`||u===" "||u==="	"){s=c;break}}const i=e.substring(0,s).trim(),l=r?cXt(e,i):i;if(n){const c=`

// Content truncated at ${s} characters (original: ${e.length} chars)`;return l+c}return l};function PRe(e){try{return RRe(JSON.parse(e))}catch{return e}}function cXt(e,t){const n=PRe(e),r=t.replace(/\s/g,"").length;let s=0,a=n;for(let l=0;l<n.length;l++)/\s/.test(n[l]??"")||(s++,s===r&&(a=n.substring(0,l+1)));const i=t.at(-1);for(let l=a.length-1;l>=0;l--)if(a[l]===i){a=a.substring(0,l+1);break}return a}const uXt={language:"json"},dXt=2e3,oO=({content:e,title:t,maxContentLength:n=dXt,truncationOptions:r={showTruncationIndicator:!1,format:!0},className:s,isError:a=!1,showTruncationMessage:i=!0})=>{const{formatNumber:l}=Z(),{processedContent:c,originalLength:u}=d.useMemo(()=>{if(typeof e=="string")return{processedContent:lXt(e,n,r),originalLength:e.length};if(e&&typeof e=="object"){const p=RRe(e);return{processedContent:p,originalLength:p.length}}const m=String(e);return{processedContent:m,originalLength:m.length}},[e,n,r]),f=u>n;return o.jsxs(z,{className:B("rounded-lg",s),variant:"subtler",children:[o.jsx(F,{variant:"tiny",className:B("p-md pb-0",a&&"text-negative"),children:t}),o.jsx(Pb,{className:"p-sm !my-0 pt-0 text-xs",codeBlockProps:uXt,hideTools:!0,children:c||"No content"}),i&&f&&o.jsx("div",{className:"bg-subtler flex items-center justify-center rounded-b p-2",children:o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(ie,{defaultMessage:"Content truncated at {truncatedSize} (original size: {originalSize})",id:"ipA00V5aGw",values:{truncatedSize:l(n/1024,{maximumFractionDigits:0,style:"unit",unit:"kilobyte",unitDisplay:"narrow"}),originalSize:l(u/1024,{maximumFractionDigits:0,style:"unit",unit:"kilobyte",unitDisplay:"narrow"})}})})})]})},LRe=I.memo(({appName:e,appLogo:t,step:n,isFinished:r,onApprove:s})=>{const{$t:a}=Z(),[i,l]=d.useState(!1),{isMobileStyle:c,isMobileUserAgent:u}=xe(),[f,m]=d.useState(!1),[p,h]=d.useState(""),[g,y]=d.useState(null),x=iKt(),v=n.content.tool_input_summary||a({defaultMessage:"This tool will perform an action",id:"m3EA/HeMzd"}),b=n.content,_=n.mcp_tool_output_content,w=b.request_user_approval?.uuid,C=x.isPending,S=C||r||!!g,E=d.useCallback(()=>{y(null)},[]),k=d.useCallback(D=>{if(w){if(D==="MODIFY"){m(!0);return}y(D),x.mutate({uuid:w,allowToolCall:D},{onSuccess:()=>{s?.()},onError:()=>{E()}})}},[w,x,E,s]),M=d.useCallback(()=>{!w||!p.trim()||(y("MODIFY"),x.mutate({uuid:w,allowToolCall:"MODIFY",userRevision:p},{onError:()=>{E()}}))},[w,p,x,E]),j=d.useCallback(()=>{m(!1),h(""),y(null)},[]),R=b.data_is_redacted===!0||_?.data_is_redacted===!0,O=d.useCallback(()=>{R||l(D=>!D)},[R]);return o.jsxs(z,{className:"p-sm group-hover:bg-background grid grid-cols-[max-content_1fr] gap-x-2 gap-y-1 rounded-lg border pb-7 pl-4",variant:"raised",children:[o.jsxs("div",{className:B("col-span-full grid grid-cols-subgrid items-center",{"cursor-pointer":!R}),onClick:O,children:[t&&o.jsx("img",{src:t,alt:`${b.app} Logo`,className:"size-4 rounded object-cover"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:"smallBold",children:e}),!R&&o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx(Me,{size:"small",pill:!0,icon:i?Wn:Xn})})]})]}),o.jsxs("div",{className:"col-start-2 col-end-3 flex min-w-0 flex-col",children:[o.jsx(F,{variant:"small",className:"text-pretty sm:pr-8",children:v}),o.jsx($Re,{isExpanded:i,mcpContent:b,mcpOutputContent:_}),o.jsx(na,{mode:"popLayout",initial:!1,transition:{duration:.2,ease:an},children:f&&o.jsx(Zr,{children:o.jsx(Wa,{value:p,onChange:h,placeholder:a({defaultMessage:"What would you like to change?",id:"VkWAi878bt"}),isMobileStyle:c,isMobileUserAgent:u,disabled:C,minRows:3,className:"mt-4"})})}),o.jsx(z,{className:"mt-4 flex items-center gap-2",children:f?o.jsxs(o.Fragment,{children:[o.jsx(me,{variant:"inverted",size:"small",text:a({defaultMessage:"Continue",id:"acrOozm08x"}),onClick:M,disabled:S||!p.trim()}),o.jsx(me,{variant:"border",size:"small",text:a({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:j,disabled:C,extraCSS:"bg-transparent"})]}):o.jsxs(o.Fragment,{children:[o.jsx(me,{variant:"inverted",size:"small",text:a({defaultMessage:"Approve",id:"WCaf5CZSTt"}),onClick:()=>k("ALLOW"),disabled:S}),o.jsx(me,{variant:"common",size:"small",text:a({defaultMessage:"Refine",id:"EBZvikr2Av"}),onClick:()=>k("MODIFY"),disabled:S}),o.jsx(me,{variant:"border",size:"small",text:a({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:()=>k("DENY"),disabled:S,extraCSS:"ml-auto border-none bg-transparent mr-2"})]})})]})]})});LRe.displayName="McpToolApprovalStep";const fXt=e=>e?e.toLowerCase().replace(/[\s-]/g,"_").replace(/([a-z])([A-Z])/g,"$1_$2").replace(/^_+|_+$/g,"").replace(/_+/g,"_"):"",qun=e=>e.replace(/_/g," ").replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),ORe=I.memo(({tool_logo_url:e,app:t,merge_extra_args:n,step_uuid:r,backend_uuid:s})=>{const{$t:a}=Z(),i=fXt(t||""),l=d.useCallback(async()=>{await Zhe({uuid:r,success:!1,reason:"User skipped authentication"})},[r]),c=d.useMemo(()=>({name:"mcp_connector_auth",upsell_type:"CONNECT_TO_CONNECTOR",app_location:"UPSELL_APP_LOCATION_UNSPECIFIED",title:a({defaultMessage:"Connect your {appName} account",id:"YPjv1DRLLL"},{appName:i}),description:a({defaultMessage:"Connect your {appName} account to get started",id:"MtMLxu8Eaj"},{appName:i}),cta:"MERGE_AUTH_CONNECTOR",icon_reference:i,...e&&{icon_image:{url:e,alt:i}},button_color:"INVERTED",button_text:"Connect",cta_information:{merge_auth_token:n?.auth_info?.auth_token,merge_auth_callback_uuid:r},show_in_comet:!0,is_persistent:!0,backend_uuid:s,image_asset:"",image_asset_low_res:"",image_asset_dark:"",image_asset_low_res_dark:"",background_super:!1}),[i,s,e,a,n?.auth_info?.auth_token,r]);return o.jsx(Qx,{position:"router_steps",upsellInformation:c,backendUuid:s,isLastResult:!0,hideOnAccept:!1,hideOnReject:!1,onReject:l})});ORe.displayName="UnauthenticatedMcpToolInput";const mXt={language:"json"},DRe=I.memo(e=>{const{tool_args:t,tool_name:n}=e,[r,s]=d.useState(!1),a=d.useCallback(()=>s(i=>!i),[]);return o.jsx(z,{className:"border-subtlest p-sm rounded-lg border",children:!!(t&&typeof t=="object"&&t!==null)&&o.jsxs(z,{className:"border-subtlest p-sm rounded-lg border",children:[o.jsxs(z,{className:"flex items-center justify-between",children:[o.jsx(F,{variant:"smallMono",children:n}),o.jsx(Me,{size:"small",icon:r?Wn:Xn,onClick:a})]}),o.jsx(na,{mode:"popLayout",transition:{duration:.2,ease:an},children:r&&o.jsx(Zr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:an},children:o.jsxs(z,{className:"mt-sm rounded-lg",variant:"subtler",children:[o.jsx(F,{variant:"tiny",className:"p-md pb-0",children:o.jsx(ie,{defaultMessage:"Request",id:"p1P+hQq6tY"})}),o.jsx(Pb,{className:"scrollbar-subtle my-0 max-h-[200px] overflow-y-auto text-xs",codeBlockProps:mXt,hideTools:!0,children:t&&typeof t=="object"?JSON.stringify(t):"No instructions"})]})})})]})})});DRe.displayName="AuthenticatedMcpToolInput";const FRe=I.memo(e=>{const{authenticated:t}=e;return t?o.jsx(DRe,{...e}):o.jsx(ORe,{...e})});FRe.displayName="McpToolInput";const pXt=()=>{const{variation:e}=tge(!1),{mcpStdioServers:t}=Hr(),r=tJe()?.local_mcp.call===!0;return(Ks()?e:r)&&t!==void 0},URe=e=>{const{permission:t,connectorName:n,onDismiss:r}=e,s=Nn(),{$t:a}=Z(),{renderData:i,isRequestingPermission:l,requestPermission:c}=Gge({permission:t,connectorName:n,cometAdapter:s});return i?o.jsxs(z,{variant:"subtler",className:"border-subtler flex justify-between gap-6 rounded-lg border p-6",children:[o.jsxs("div",{className:"flex flex-1 flex-col justify-center",children:[o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",as:"h3",className:"mb-1",children:i.title}),o.jsx(F,{variant:"small",color:"light",children:i.description})]}),o.jsxs("div",{className:"mt-5 flex gap-2",children:[o.jsx(hs,{variant:"primary",onClick:c,disabled:l,children:i.buttonText}),r&&o.jsx(hs,{variant:"secondary",onClick:r,children:a({defaultMessage:"Dismiss",id:"TDaF6JVgG6"})})]})]}),o.jsx("div",{className:"flex-1",children:o.jsx("video",{src:i.videoUrl,autoPlay:!0,loop:!0,muted:!0,playsInline:!0,height:160,width:302,className:"rounded-lg"})})]}):null},hXt=e=>{const{permissions:t,className:n,connectorName:r,onDismiss:s}=e,a=Nn(),i=Yge({cometAdapter:a,permissions:t});return i?o.jsx("div",{className:n,children:o.jsx(URe,{permission:i,connectorName:r,onDismiss:s})}):null},gXt=e=>{const{permissions:t,className:n,connectorName:r,onDismiss:s}=e;return o.jsx("div",{className:B("space-y-4",n),children:t.map(a=>o.jsx(URe,{permission:a,connectorName:r,onDismiss:s},a))})},yXt=e=>{const{variant:t,...n}=e;return t==="first-required"?o.jsx(hXt,{...n}):o.jsx(gXt,{...n})},xXt=({cometAdapter:e,permissions:t})=>{const n=qD({queries:(t??[]).map(a=>({queryKey:["comet/permission",a],queryFn:()=>e.hasPermission(a)}))}).map(a=>({isFetching:a.isFetching,data:a.data})),s=d.useMemo(()=>{let a;return i=>(zg(a,i,zg)||(a=i),a)},[])(n);return d.useMemo(()=>!t||s.some(a=>a.isFetching)?null:s.every(a=>a.data!==!1),[s,t])},nle=[],vXt=({server:e,cometState:t,toolName:n})=>d.useMemo(()=>{if(!e)return null;if(!t.installedDxts)return nle;const r=T0(t.installedDxts,e);return r?Object.entries(oye(r)).filter(([,{for_tools:s}])=>!s||n&&s.includes(n)).map(([s])=>s):nle},[e,t.installedDxts,n]),BRe=I.memo(({step:e,isFinished:t})=>{const{lastResult:n}=Ft(),{submitQuery:r}=Sa(),[s,a]=d.useState(!1),i=e.content,l=e.mcp_tool_output_content,c=!s&&i.request_user_approval?.request_user_approval,u=!t&&c===!1&&!l,f=_Xt({stepId:e.uuid,shouldExecuteLocalTool:u,mcpContent:i}),m=d.useMemo(()=>!!l?.should_rerun_query,[l]),p=d.useCallback(async()=>{n?.query_str&&(await Su({entryUUID:n.backend_uuid,reason:"mcp-tool-output-merge-api"}),r({rawQuery:n.query_str,existingEntryUUID:n.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:n.frontend_context_uuid,promptSource:"user",querySource:"mcp-tool-input",attachments:[],modelPreferenceOverride:"pplx_pro",sourcesOverride:CE(n.sources?.sources)}))},[r,n]);d.useEffect(()=>{m&&p()},[p,m]);const h=f?.name||i.app||"",g=f?.iconUrl||i.logo_url||iXt(i.app||"")||void 0;if(c&&f?.allPermissionsAreGranted!==!1)return o.jsx(LRe,{appName:h,appLogo:g,step:e,isFinished:t,onApprove:()=>a(!0)});const y=(!!f||i.authenticated)??null;return y===null?null:y?o.jsxs(o.Fragment,{children:[f?.askPermissionsBanner,o.jsx(bXt,{appLogo:g,appName:h,mcpContent:i,mcpOutputContent:l})]}):o.jsx(FRe,{...i,step_uuid:e.uuid??"",backend_uuid:n?.backend_uuid??"",authenticated:y,tool_args:i.tool_args,tool_logo_url:g??void 0})}),bXt=e=>{const{appLogo:t,appName:n,mcpContent:r,mcpOutputContent:s}=e,[a,i]=d.useState(!1),l=r.data_is_redacted===!0||s?.data_is_redacted===!0,c=d.useCallback(()=>{l||i(u=>!u)},[l]);return o.jsxs(z,{className:"p-sm hover:bg-raised grid grid-cols-[max-content_1fr] gap-x-2 rounded-lg border pl-4",variant:a?"raised":void 0,children:[o.jsxs("div",{className:B("col-span-full grid grid-cols-subgrid items-center",{"cursor-pointer":!l}),onClick:c,children:[o.jsx(_U,{serverName:n,iconUrl:t,size:"sm"}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(F,{variant:"smallBold",children:n}),!l&&o.jsx("div",{className:"ml-auto flex items-center gap-2",children:o.jsx(Me,{size:"small",pill:!0,icon:a?Wn:Xn})})]})]}),o.jsx("div",{className:"col-start-2 col-end-3 min-w-0",children:o.jsx($Re,{isExpanded:a,mcpContent:r,mcpOutputContent:s})})]})},$Re=({isExpanded:e,mcpContent:t,mcpOutputContent:n})=>o.jsx(na,{mode:"popLayout",initial:!1,transition:{duration:.2,ease:an},children:e&&o.jsx(Zr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:an},children:o.jsx("div",{className:"mt-sm",children:o.jsx(Hw,{maxHeight:400,autoScroll:!1,scrollContainerClassName:"scrollbar-subtle !pl-0",showTopGradient:!1,showBottomGradient:!1,children:o.jsxs("div",{className:"flex flex-col gap-2 pt-1",children:[o.jsx(F,{variant:"tinyMono",children:t.tool_name}),!!(t.tool_args&&typeof t.tool_args=="object"&&t.tool_args!==null)&&o.jsx(oO,{title:o.jsx(ie,{defaultMessage:"Request",id:"J+m4xH5bwC",description:"Request"}),content:t.tool_args,showTruncationMessage:!1}),n&&o.jsx(oO,{title:o.jsx(ie,{defaultMessage:"Response",id:"UC/2Eq4W+h",description:"Response"}),content:n.content})]})})})})}),_Xt=({stepId:e,shouldExecuteLocalTool:t,mcpContent:{app:n,mcp_server_type:r,tool_name:s,tool_args:a}})=>{const i=Hr(),l=pXt(),c=Nn(),u=aJe(),f=d.useMemo(()=>{if(!(!l||r!=="MCP_SERVER_TYPE_LOCAL"||!n))return i.mcpStdioServers?.find(w=>w.name===n)},[l,r,n,i.mcpStdioServers]),m=vXt({server:f,cometState:i,toolName:s}),p=xXt({cometAdapter:c,permissions:m}),{mutateAsync:h}=dt({mutationKey:["comet/execute-local-tool",e],mutationFn:async({content:w,isError:C=!1})=>{if(!e)throw new Error("StepID is not set");return re.POST("/rest/sse/perplexity_mcp_response","local-mcp-step",{body:{result:{content:w,is_error:C,uuid:e}}})}}),g=d.useCallback(()=>{h({content:'The MCP tool call was rejected by the user because he dismissed the permission request (refer to them as "you" or use the appropriate equivalent in their language when mentioning this)'})},[h]);Ue({queryKey:["comet/auto-execute-local-tool",e],enabled:!!(t&&n&&s&&e&&p),queryFn:async()=>{if(!n||!s||!e)throw new Error("Missing required parameters");try{const w=await u.callMcpTool({mcpServerName:n,toolName:s,toolArgs:a},{step_uuid:e});return await h({content:w.content.map(C=>C.text).filter(Boolean).join(`

`)}),!0}catch(w){return await h({content:`The MCP tool call failed: ${w instanceof Error?w.message:"Unknown error"}`,isError:!0}),!1}}});const x=d.useMemo(()=>f?T0(i.installedDxts,f):null,[i.installedDxts,f]),v=x?.display_name??x?.name??n,{data:b}=EU(),_=d.useMemo(()=>f?Hge(b,f):null,[b,f]);return d.useMemo(()=>v?{name:v,iconUrl:_??null,allPermissionsAreGranted:p,askPermissionsBanner:t&&!p&&m?o.jsx(yXt,{variant:"all",connectorName:v,permissions:m,className:"mb-4",onDismiss:g}):null}:null,[p,v,g,_,m,t])};BRe.displayName="McpInputOutputStep";const VRe=I.memo(e=>{const{content:t,shouldRerunQuery:n=!1}=e,{lastResult:r}=Ft(),{submitQuery:s}=Sa(),a=d.useCallback(async()=>{r?.query_str&&(await Su({entryUUID:r.backend_uuid,reason:"mcp-tool-output-merge-api"}),s({rawQuery:r.query_str,existingEntryUUID:r.backend_uuid,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:r.frontend_context_uuid,promptSource:"user",querySource:"mcp-tool-input",attachments:[],modelPreferenceOverride:"pplx_pro"}))},[s,r]);return d.useEffect(()=>{n&&a()},[a,n]),o.jsx(z,{className:"border-subtlest p-sm rounded-lg border",children:o.jsx(oO,{title:o.jsx(ie,{defaultMessage:"Response",id:"MgdnPiJHcj"}),content:t})})});VRe.displayName="McpToolOutput";const WRe=I.memo(({step:e,action:t})=>{const{final:n}=e.content,r=!n;return o.jsx(me,{text:t,icon:Tg,isLoading:r,size:"tiny",pill:!0})});WRe.displayName="PdfStep";const rle=["start","end"],HRe=I.memo(({attachments:e,attachmentProcessingProgress:t})=>{const{$t:n}=Z(),s=e.filter(m=>wm(m)).length+t.length,a=e.length+rle.length,i=Math.min(s/a*100,100),l=t.filter(m=>!m.success),c=d.useMemo(()=>!!t.filter(m=>m.file_url==="end").length,[t]),u=d.useCallback(m=>{const p=s3(m.file_url??"");let h;switch(m.error_code){case"token_limit_exceeded":h=n({defaultMessage:"{filename} exceeds the model's token limit.",id:"60iyTByOrX"},{filename:p});break;case"file_type_not_supported":h=n({defaultMessage:"{filename} is of an unsupported file type. It will not be included in the results.",id:"sB9AI6thAL"},{filename:p});break;case"no_data_received":h=n({defaultMessage:"{filename} has timed out.",id:"/wyRgEWdz7"},{filename:p});break;default:h=n({defaultMessage:"{filename} could not be read. It will not be included in the results.",id:"7w0MjjvHs3"},{filename:p});break}return h},[n]),f=d.useMemo(()=>{const m=l.map((h,g)=>o.jsx(iO,{icon:af,text:u(h)},g)),p=o.jsx(iO,{icon:dr,text:n({defaultMessage:"Successfully read {numAttachments} attached files.",id:"5VxFwE1ux3"},{numAttachments:s-l.length-rle.length})});return[...m,...c?[p]:[]]},[l,n,s,c,u]);return o.jsx(Xx,{className:"pt-md pb-xs px-xs !border-[#32B8C6]",children:o.jsx(Hw,{maxHeight:250,autoScroll:!1,children:o.jsxs("div",{className:"pr-md gap-x-md flex w-full",children:[o.jsx(F,{className:"bg-super flex size-8 flex-none items-center justify-center rounded-md border-[0.75px] border-[#05FFFF]/20 shadow-[0px_1px_4px_0px_rgba(0,0,0,0.24)]",children:o.jsx(de,{icon:zk,size:"md",className:"text-inverse"})}),o.jsxs("div",{className:"gap-y-xs flex grow flex-col",children:[o.jsx(F,{variant:"smallBold",children:n({defaultMessage:"Reading {numAttachments} attached {numAttachments, plural, one {file} other {files}}",id:"BqiTCbmvgp"},{numAttachments:e.length})}),o.jsx("div",{className:"h-2 w-full rounded-[37px] bg-[#60584D]/[0.06]",children:o.jsx("div",{className:"h-2 rounded-[37px] bg-[#32B8C6] transition-all duration-300",style:{width:`${i}%`}})}),o.jsxs("div",{className:"pt-xs",children:[o.jsx(Up,{items:f,vertical:!0,truncate:!1}),!c&&o.jsx(un,{variant:"super",active:!c,as:"span",className:"pt-xs",children:o.jsx(F,{variant:"small",color:"super",children:n({defaultMessage:"Reading...",id:"IvE1kfOWAz"})})})]})]})]})})})});HRe.displayName="PendingFilesStep";const iO=I.memo(({icon:e,text:t})=>o.jsxs("div",{className:"py-xs gap-x-sm flex",children:[o.jsx(F,{className:"flex items-center justify-center",children:o.jsx(de,{icon:e,size:"sm"})}),o.jsx(F,{variant:"small",color:"light",children:t})]}));iO.displayName="PendingFilesItem";const zRe=I.memo(({user:e,onRemove:t})=>{const n=d.useCallback(()=>{t(e)},[t,e]);return o.jsxs("div",{className:"border-subtlest gap-two pr-three flex h-8 items-center justify-between rounded-lg border pl-1.5 font-sans shadow-sm",children:[o.jsxs("div",{className:"gap-xs px-xs flex min-w-0 flex-row text-left",children:[o.jsx(F,{variant:"small",as:"span",children:e.display_name}),o.jsx(F,{variant:"small",color:"light",className:"truncate",as:"span",children:e.email_address})]}),o.jsx(Me,{variant:"common",size:"tiny",onClick:n,icon:kt,extraCSS:"rounded-md","aria-label":`Remove ${e.display_name}`})]})});zRe.displayName="UserPill";const GRe=I.memo(({goalId:e,foundUsers:t,names:n,sendStepResult:r})=>{const{$t:s}=Z(),[a,i]=d.useState([]),l=d.useRef(null);d.useEffect(()=>{l.current&&l.current.focus()},[]);const c=d.useCallback(y=>{const x=y.map(v=>({...v,selected:!0}));i(x)},[]),u=d.useCallback(async()=>{await r({goal_id:e,selected_users:a,submitted:!0},"User selected contacts and clicked continue",!1)},[e,a,r]),f=d.useCallback(y=>{ga.isEnterKeyWithoutShift(y.nativeEvent)&&a.length>0&&(y.preventDefault(),u())},[a.length,u]),m=d.useMemo(()=>({chooseContacts:s({defaultMessage:"Confirm or change contacts",id:"j4L7Bt/R+D"}),moreContacts:s({defaultMessage:"More contacts...",id:"XqmjEIgTyk"}),pickContacts:s({defaultMessage:"Pick contacts...",id:"dAWwl8XInO"}),continue:s({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),skip:s({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[s]),p=d.useMemo(()=>(t??[]).map(y=>({type:"default",text:y.display_name??"",description:y.email_address??"",active:a.some(x=>x.email_address===y.email_address),preserveRightElementSpace:!0,onClick:()=>{const x=a.some(v=>v.email_address===y.email_address);c(x?a.filter(v=>v.email_address!==y.email_address):[...a,y])}})),[t,a,c]);d.useEffect(()=>{if(t&&t.length>0&&a.length===0){const y=t.filter(x=>x.selected);if(y.length>0)c(y);else{const x=Math.min(n?.length||1,t.length);c(t.slice(0,x))}}},[t]);const h=d.useCallback(y=>{c(a.filter(x=>x.email_address!==y.email_address))},[a,c]),g=d.useCallback(async()=>{await r({goal_id:e,selected_users:t,submitted:!1},"User clicked skip",!1)},[t,e,r]);return o.jsxs(Wt,{ref:l,className:"py-2 pt-4 outline-none",onKeyDown:f,tabIndex:0,children:[o.jsxs("div",{className:"gap-md flex flex-col px-4",children:[o.jsx(F,{variant:"smallBold",children:m.chooseContacts}),o.jsxs("div",{className:"gap-sm flex flex-wrap items-stretch",children:[a.map(y=>o.jsx(zRe,{user:y,onRemove:h},y.email_address)),a.length<(t?.length??0)&&o.jsx(nn,{items:p,isMobileStyle:!1,placement:"bottom-start",children:o.jsx(me,{variant:"border",size:"small",icon:ar,"aria-label":a.length===0?m.moreContacts:m.pickContacts})})]})]}),o.jsxs("div",{className:"gap-sm mt-4 flex items-center px-4 py-2",children:[o.jsx(me,{size:"small",variant:"inverted",text:m.continue,disabled:a.length===0,onClick:u}),o.jsx(Me,{size:"small",text:m.skip,onClick:g})]})]})});GRe.displayName="PickContactsStep";const qRe=I.memo(({stepUUID:e,goalId:t,foundBookingOptions:n,isSubmitted:r})=>{const{$t:s}=Z(),[a,i]=d.useState(n?.[0]),[l,c]=d.useState(0),u=d.useRef(null),f=d.useRef([]),m=d.useMemo(()=>({title:s({defaultMessage:"Choose booking options",id:"5yyo9+Yhan"}),description:s({defaultMessage:"Select your preferred booking provider",id:"gnnwIHEPAG"}),continue:s({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),confirmed:s({defaultMessage:"Confirmed",id:"dX7+RvbH/9"}),skip:s({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[s]),p=d.useCallback(async()=>{await L1({stepUUID:e,result:{goal_id:t,selected_booking_options:a,submitted:!0},reason:"User selected booking and clicked continue"})},[e,t,a]),h=d.useCallback(async()=>{await L1({stepUUID:e,result:{goal_id:t,selected_booking_options:void 0,submitted:!1},reason:"User clicked skip"})},[t,e]),g=d.useCallback(v=>{i(v)},[]),y=d.useCallback(v=>{c(v)},[]),x=d.useCallback((v,b)=>{f.current[b]=v},[]);return d.useEffect(()=>{if(!n?.length||r)return;const v=_=>{const w=C=>{_.preventDefault(),c(S=>{const E=C==="down"?Math.min(S+1,n.length-1):Math.max(S-1,0);return f.current[E]?.focus(),E})};switch(_.key){case"ArrowDown":w("down");break;case"ArrowUp":w("up");break;case"Enter":case" ":_.preventDefault(),l>=0&&l<n.length&&i(n[l]);break}},b=u.current;if(b)return b.addEventListener("keydown",v),()=>b.removeEventListener("keydown",v)},[n,l,r]),o.jsxs(Xx,{className:"pb-2 outline-none",title:m.title,description:m.description,descriptionClassName:"text-quiet",children:[o.jsx("div",{className:"gap-md mt-md flex flex-col px-4",children:o.jsx("div",{ref:u,className:"gap-xs flex flex-col",tabIndex:-1,role:"listbox","aria-label":"Booking options",children:(n??[]).map((v,b)=>{const _=a===v,w=B("group flex w-full items-center rounded-none border outline-none transition-[border-color,border-radius,box-shadow] duration-200 hover:transition-none",!r&&"cursor-pointer","border-t-subtlest border-x-transparent","last:border-b-subtlest [&:not(:last-child)]:border-b-transparent",_&&["!border-super/75 dark:bg-black bg-gradient-to-r from-super/25 to-super/25 !rounded-lg shadow-sm"],!_&&!r&&["hover:!border-subtlest hover:bg-subtler hover:rounded-lg","focus-visible:!border-subtlest focus-visible:bg-subtler focus-visible:rounded-lg"],!r&&'[&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:border-t-transparent [&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:transition-none');return o.jsx("div",{ref:C=>x(C,b),tabIndex:r?-1:0,role:"option","aria-selected":_,"data-selected":_,className:w,onClick:()=>!r&&g(v),onFocus:()=>!r&&y(b),children:o.jsxs("div",{className:"flex w-full items-center justify-between px-5 py-4",children:[o.jsxs("div",{className:"flex items-center gap-6",children:[v?.together?.airline_logos?.[0]&&o.jsx("img",{src:v.together.airline_logos[0],alt:"airline logo",className:"-mt-two size-6 rounded object-contain"}),o.jsx("div",{className:"flex flex-col items-start gap-px",children:o.jsxs(F,{variant:"baseSemi",children:[v?.together?.book_with||"Flight",v?.together?.option_title?` (${v.together.option_title})`:""]})})]}),v?.together?.price&&o.jsxs(F,{variant:"baseSemi",className:"font-bold",children:["$",v.together.price]})]})},b)})})}),o.jsxs("div",{className:"gap-sm mt-sm flex items-center px-4 py-2",children:[o.jsx(me,{size:"small",variant:"inverted",text:r?m.confirmed:m.continue,icon:r?dr:void 0,disabled:!a||r,onClick:p}),o.jsx(Me,{size:"small",text:m.skip,disabled:r,onClick:h})]})]})});qRe.displayName="PickFlightsBookingStep";const sle={weekday:"short",month:"short",day:"numeric",year:"numeric"},wXt={hour:"numeric",minute:"2-digit",hour12:!0},lO="en-US",ale=e=>{if(!e)return"00:00 AM";try{return new Date(e).toLocaleTimeString(lO,wXt).toUpperCase()}catch{return"00:00 AM"}},CXt=e=>{if(!e)return"";const t=Math.floor(e/60),n=e%60;return`${t}h ${n}m`},SXt=e=>{if(!e||e.length===0)return"Nonstop";const t=e.length;return`${t} Stop${t>1?"s":""}`},ole=e=>{if(!e||e.length===0)return null;if(e.length===1){const t=e[0]?.duration||0,n=Math.floor(t/60),r=t%60;return`${n}h ${r}m ${e[0]?.id}`}return e.map(t=>t.id).join(", ")},EXt=(e,t,n)=>{if(!e)return"";const s=new Date(e).toLocaleDateString(lO,sle);if(n==="ROUND_TRIP"&&t){const l=new Date(t).toLocaleDateString(lO,sle);return`  ${s}  ${l}`}return`  ${s}`},KRe=I.memo(({flight:e,index:t,isSelected:n,isSubmitted:r,onSelect:s,onFocus:a,setRef:i})=>{const l=e.flights?.[0]?.departure_airport?.time,c=e.flights?.[e.flights.length-1]?.arrival_airport?.time,u=e.flights?.[0]?.departure_airport?.id||"XXX",f=e.flights?.[e.flights.length-1]?.arrival_airport?.id||"XXX",m=e.flights?.[0]?.airline,p=B("group flex w-full items-center rounded-none border outline-none transition-[border-color,border-radius,box-shadow] duration-200 hover:transition-none",!r&&"cursor-pointer","border-t-subtlest border-x-transparent","last:border-b-subtlest [&:not(:last-child)]:border-b-transparent",n&&["!border-super/75 dark:bg-black bg-gradient-to-r from-super/25 to-super/25 !rounded-lg shadow-sm"],!n&&!r&&["hover:!border-subtlest hover:bg-subtler hover:rounded-lg","focus-visible:!border-subtlest focus-visible:bg-subtler focus-visible:rounded-lg"],!r&&'[&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:border-t-transparent [&:is(:hover,:focus-visible,[data-selected="true"])+div:not(:hover):not(:focus-visible):not([data-selected="true"])]:transition-none');return o.jsx("div",{ref:h=>i(h,t),tabIndex:r?-1:0,role:"option","aria-selected":n,"data-selected":n,className:p,onClick:()=>!r&&s(e),onFocus:()=>!r&&a(t),children:o.jsxs("div",{className:"grid w-full grid-cols-[auto_1fr_88px_88px_88px] items-start gap-6 px-5 py-4",children:[o.jsx("div",{className:"pt-two flex self-stretch",children:e.airline_logo&&o.jsx("img",{src:e.airline_logo,alt:"airline logo",className:"size-10 rounded object-contain"})}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsxs("div",{className:"flex items-center",children:[o.jsx(F,{variant:"baseSemi",children:ale(l)}),o.jsx("span",{className:"text-quieter px-1",children:""}),o.jsx(F,{variant:"baseSemi",children:ale(c)})]}),m&&o.jsx(F,{variant:"tinyMono",color:"light",children:m})]}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsx(F,{variant:"baseSemi",children:CXt(e.total_duration)}),o.jsxs(F,{variant:"tinyMono",color:"light",children:[u,"",f]})]}),o.jsxs("div",{className:"flex flex-col items-start gap-px",children:[o.jsx(F,{variant:"baseSemi",children:SXt(e.layovers)}),ole(e.layovers)&&o.jsx(F,{variant:"tinyMono",color:"light",children:ole(e.layovers)})]}),o.jsxs("div",{className:"flex flex-col items-end justify-end gap-px",children:[e.price&&o.jsxs(F,{variant:"baseSemi",className:"font-bold",children:["$",e.price]}),o.jsx(F,{variant:"tinyMono",color:"light",children:e.type})]})]})},`flight-${t}`)});KRe.displayName="FlightCard";const YRe=I.memo(({stepUUID:e,goalId:t,foundFlights:n,isSubmitted:r,outboundDate:s,returnDate:a,flightType:i})=>{const{$t:l}=Z(),[c,u]=d.useState(n?.length>0?0:-1),[f,m]=d.useState(0),p=d.useRef(null),h=d.useRef([]),g=d.useMemo(()=>EXt(s,a,i),[s,a,i]),y=d.useMemo(()=>({title:l({defaultMessage:"Top departing flights",id:"tHwLRV4b68"})+g,description:l({defaultMessage:"Ranked by price and convenience. Prices include taxes and fees for one adult.",id:"cAxRMXuRMO"}),continue:l({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),confirmed:l({defaultMessage:"Confirmed",id:"dX7+RvbH/9"}),skip:l({defaultMessage:"Skip",id:"/4tOwTiCH6"})}),[l,g]),x=d.useCallback(async()=>{const C=c>=0&&n?n[c]:void 0;await L1({stepUUID:e,result:{goal_id:t,selected_flight:C,submitted:!0},reason:"User selected flight and clicked continue"})},[e,t,c,n]),v=d.useCallback(async()=>{await L1({stepUUID:e,result:{goal_id:t,selected_flight:void 0,submitted:!1},reason:"User clicked skip"})},[t,e]),b=d.useCallback(C=>{const S=n?.findIndex(E=>E===C)??-1;u(S)},[n]),_=d.useCallback(C=>{m(C)},[]),w=d.useCallback((C,S)=>{h.current[S]=C},[]);return d.useEffect(()=>{if(!n?.length||r)return;const C=E=>{const k=M=>{E.preventDefault(),m(j=>{const R=M==="down"?Math.min(j+1,n.length-1):Math.max(j-1,0);return h.current[R]?.focus(),R})};switch(E.key){case"ArrowDown":k("down");break;case"ArrowUp":k("up");break;case"Enter":case" ":E.preventDefault(),f>=0&&f<n.length&&u(f);break}},S=p.current;if(S)return S.addEventListener("keydown",C),()=>S.removeEventListener("keydown",C)},[n,f,r]),o.jsxs(Xx,{className:"pb-2 outline-none",title:y.title,description:y.description,descriptionClassName:"text-quiet",children:[o.jsx("div",{className:"gap-md mt-md flex flex-col px-4",children:o.jsx("div",{ref:p,className:"gap-xs flex flex-col",tabIndex:-1,role:"listbox","aria-label":"Flight options",children:(n??[]).map((C,S)=>o.jsx(KRe,{flight:C,index:S,isSelected:c===S,isSubmitted:r,onSelect:b,onFocus:_,setRef:w},S))})}),o.jsxs("div",{className:"gap-sm mt-sm flex items-center px-4 py-2",children:[o.jsx(me,{size:"small",variant:"inverted",text:r?y.confirmed:y.continue,icon:r?dr:void 0,disabled:c<0||r,onClick:x}),o.jsx(Me,{size:"small",text:y.skip,disabled:r,onClick:v})]})]})});YRe.displayName="PickFlightsSearchStep";const QRe=({onSkip:e,onConfirm:t,disabled:n=!1,isLoading:r=!1,result:s=null,buttonText:a,loadingText:i})=>{const{$t:l}=Z();return s!==null?o.jsx(z,{className:"bg-base border-t pt-4",children:o.jsx("div",{className:"text-quiet text-sm",children:s?.confirmed===!0?l({defaultMessage:"Task will be created",id:"+A0SHGFNa7"}):l({defaultMessage:"Task was skipped",id:"uRAWVsTn39"})})}):o.jsx(z,{className:"bg-base border-t pt-4",children:o.jsx("div",{className:"flex items-center justify-between gap-4",children:o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(me,{size:"small",variant:"primary",text:r?i||l({defaultMessage:"Creating...",id:"mRL9Vh/e/Z"}):a||l({defaultMessage:"Create Task",id:"4+iiEILSrA"}),onClick:t,disabled:n||r}),o.jsx(Me,{size:"small",text:l({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:e,disabled:n||r})]})})})},ile="usd";function zS(e){return e!=null&&e!==ef&&e!==tf&&e!==_8&&e!==-1&&Math.abs(e)!==_8}function MXt(e,t){const n=t.target_price!=null,r=t.movement_percent!=null,s=t.target_price?.toString(),a={query:{prompt:e.prompt||"",searchModel:e.model_preference||le.DEFAULT},status:"ACTIVE",notificationSettings:hf,defaultTargetPriceValue:s};if(n)return{...a,trigger:{type:lt.PRICE_ALERT,alertType:Wr.TARGET_PRICE,price:t.target_price,currency:ile,symbol:t.ticker_symbol}};if(r){const i=t.movement_percent/100;return{...a,trigger:{type:lt.PRICE_ALERT,alertType:Wr.MOVEMENT_AMOUNT,percentageDecimalLowerBound:t.negative_direction?-i:0,percentageDecimalUpperBound:t.positive_direction?i:0,symbol:t.ticker_symbol}}}else return{...a,trigger:{type:lt.PRICE_ALERT,alertType:Wr.TARGET_PRICE,price:0,currency:ile,symbol:t.ticker_symbol}}}const kXt=({result:e})=>e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Fa,{size:14,className:"text-super shrink-0",title:"Confirmed"}),o.jsx("span",{className:"text-super text-xs font-medium leading-none",children:o.jsx(ie,{defaultMessage:"Alert confirmed",id:"0wByyMUPxz"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(kt,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:o.jsx(ie,{defaultMessage:"Alert skipped",id:"AYQONqG1U3"})})]}):null,XRe=I.memo(({sendStepResult:e,taskAction:t,priceAlertData:n,stepUUID:r,isFinished:s=!1})=>{const{$t:a}=Z(),{trackEvent:i}=Te(),l="settings_create",[c,u]=d.useState(()=>MXt(t,n)),[f,m]=d.useState(null),[p,h]=d.useState(null),[g,y]=d.useState(null),x=d.useRef(!1),v="price_alert_operation";d.useEffect(()=>{(async()=>{if(!n.ticker_symbol||s){h(!0);return}try{await Yd({symbol:n.ticker_symbol})===null?(h(!1),e({confirmed:!1,user_input:a({defaultMessage:'The stock symbol "{symbol}" could not be found. Please verify the ticker symbol is correct.',id:"yWihQJNDOI"},{symbol:n.ticker_symbol})},v,!1)):h(!0)}catch(k){ne.error("Failed to validate ticker",{ticker:n.ticker_symbol,error:k}),h(!1),e({confirmed:!1,user_input:a({defaultMessage:'Unable to validate the stock symbol "{symbol}" due to a network error. Please try again.',id:"C0nM7QfjoN"},{symbol:n.ticker_symbol})},v,!1)}})()},[n.ticker_symbol]),d.useEffect(()=>{t&&!s&&p===!0&&!x.current&&(i("price alert modal opened",{source:l}),x.current=!0)},[p]),d.useEffect(()=>{(async()=>{if(n.ticker_symbol&&p===!0&&c.trigger.type===lt.PRICE_ALERT)try{const k=await ACt(n.ticker_symbol);u(M=>({...M,trigger:{...M.trigger,currency:k}}))}catch(k){ne.warn("Failed to fetch currency for ticker",{ticker:n.ticker_symbol,error:k})}})()},[n.ticker_symbol,p,c.trigger.type]);const b=d.useMemo(()=>a({defaultMessage:"Create Price Alert",id:"WY6/zFtq4x"}),[a]),_=d.useCallback(E=>{m(E),E.confirmed?(i("price alert modal action",{source:l,action:"created"}),e({confirmed:!0,task_action:E.task_action},v,!1)):(i("price alert modal action",{source:l,action:"deleted"}),e({confirmed:!1},v,!1))},[e,v,i,l]),w=d.useCallback(()=>{m({confirmed:!1}),i("price alert modal action",{source:l,action:"skipped"}),e({confirmed:!1},v,!1)},[i,l,e,v]),C=d.useCallback(()=>{const E=c.trigger;let k={task_name:`Price Alert: ${n.ticker_symbol}`,prompt:c.query?.prompt,model_preference:c.query?.searchModel||le.DEFAULT,schedule:void 0,expiry_date:void 0,event_entity:n.ticker_symbol};switch(E.alertType){case Wr.TARGET_PRICE:{k={...k,event_type:"STOCK_PRICE_TARGET",target_price:E.price,current_price:n.current_price};break}case Wr.MOVEMENT_AMOUNT:{const M=E.percentageDecimalUpperBound,j=E.percentageDecimalLowerBound;k={...k,event_type:"STOCK_PRICE_MOVEMENT",upper_bound:M&&M>0?M*100:void 0,lower_bound:j&&j<0?j*100:void 0};break}default:Qt(E)}_({confirmed:!0,task_action:k})},[c,_,n]),S=d.useMemo(()=>s?!0:Lje({isLoading:!1,currentConfiguration:c}),[c,s]);return!t||!n?null:s?o.jsx(Vs,{icon:Fa,iconClassName:"text-super",text:a({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):p===null||p===!1?null:o.jsxs("div",{className:"bg-subtler border-subtlest transform rounded-xl border transition-transform duration-200",children:[o.jsxs("div",{className:"flex items-center justify-between rounded-t-lg px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:o.jsx(zce,{size:16,className:"text-quiet"})}),o.jsx("h3",{className:"text-foreground text-sm font-medium",children:b})]}),o.jsx(kXt,{result:f})]}),o.jsx("div",{className:"p-4",children:o.jsx(gc,{children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(A4,{configuration:c,onConfigurationChange:u,errorMessage:g??void 0,onError:y}),g&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(af,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:g})]}),o.jsx(QRe,{onSkip:w,onConfirm:C,disabled:S,result:f,buttonText:b})]})})})]})});XRe.displayName="PriceAlertOperationStep";const TXt=e=>{const[t,n]=d.useState([]),r=d.useRef(e);d.useEffect(()=>{r.current=e},[e]);const s=d.useCallback((l,c)=>{n(u=>{const f=[...u];return f[l]=c,f})},[]),a=d.useMemo(()=>new Map,[]);d.useEffect(()=>{const l=t.reduce((c,u)=>c+u,0);l>0&&r.current?.(l)},[t]);const i=d.useCallback(l=>(a.has(l)||a.set(l,c=>{s(l,c)}),a.get(l)),[a,s]);return d.useMemo(()=>({groupCounts:t,handleGroupCountChange:s,getGroupHandler:i}),[t,s,i])},ZRe=I.memo(({result:e,textClassName:t})=>{const n=d.useMemo(()=>e.start?new Date(e.start):null,[e.start]),r=d.useMemo(()=>e.end?new Date(e.end):null,[e.end]),s=e.is_all_day===!0,a=aIe(e.calendar_color?.background||"oklch(var(--super-color))"),i=oIe(a),l=d.useMemo(()=>r?new Date(r.getTime()-24*60*60*1e3):null,[r]),c=()=>n?s?(r?Math.round((r.getTime()-n.getTime())/864e5):1)<=1?o.jsx(o1,{startDate:n,endDate:n,isAllDay:!0,showDate:!0,includeYear:!1}):o.jsx(o1,{startDate:n,endDate:l,isAllDay:!0,showDate:!0,includeYear:!1}):o.jsx(o1,{startDate:n,endDate:r||n,isAllDay:!1,showDate:!0,includeYear:!1}):null;return o.jsx("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer gap-3 rounded-lg px-2 py-1.5",children:o.jsxs("div",{className:"flex gap-2",children:[o.jsx("div",{className:"py-xs relative w-1",children:o.jsx("div",{className:B("inset-y-two absolute w-1 shrink-0 self-stretch rounded-full",{"brightness-[0.8]":i==="Fail"}),style:{backgroundColor:a}})}),o.jsxs("div",{className:"gap-two flex min-w-0 flex-1 flex-col",children:[o.jsx("div",{className:"flex min-w-0 items-center justify-between gap-2",children:e.title&&o.jsx(F,{variant:"smallBold",className:"shrink-0",as:"span",children:e.title})}),o.jsx("div",{className:"flex min-w-0 items-center gap-2",children:n&&o.jsx(F,{className:B("min-w-0 shrink text-ellipsis",t),variant:"tinyMono",color:"light",as:"span",children:c()})})]})]})})});ZRe.displayName="CalendarResult";const NXt=e=>{const t=e.match(/^(.+?)\s*<(.+)>$/);return t?t[1]?.trim().replace(/^["']|["']$/g,"")||t[2]?.trim()||"":e.trim().replace(/^["']|["']$/g,"")},jXt=e=>e==="GCAL"?{src:kie,alt:"Gmail"}:e==="OUTLOOK"?{src:Kqt,alt:"Outlook"}:{src:kie,alt:"Gmail"},AXt=e=>{const t=Date.now(),n=new Date(e),r=t-n.getTime();if(r<0)return"";const s=1e3*60,a=s*60,i=a*24,l=i*7,c=i*30,u=i*365;return r<s?"1m":r<a?`${Math.floor(r/s)}m`:r<i?`${Math.floor(r/a)}h`:r<l?`${Math.floor(r/i)}d`:r<c?`${Math.floor(r/l)}w`:r<u?`${Math.floor(r/c)}mo`:`${Math.floor(r/u)}y`},JRe=I.memo(({result:e,textClassName:t,icon:n})=>{const r=jXt(e.connection_type),s=n?o.jsx(de,{icon:n,size:"xs"}):o.jsx("img",{src:r.src,alt:r.alt,className:"size-[16px]"}),a=e.date?AXt(e.date):null;return o.jsxs("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("span",{className:"mt-two shrink-0",children:s}),o.jsxs("div",{className:"gap-two flex min-w-0 flex-1 flex-col",children:[o.jsx("div",{className:"flex min-w-0 items-center justify-between gap-2",children:e.sender&&o.jsx(F,{variant:"smallBold",className:"shrink-0",as:"span",children:NXt(e.sender)})}),o.jsx("div",{className:"flex min-w-0 items-center gap-2",children:e.subject&&o.jsx(F,{className:B("min-w-0 shrink text-ellipsis font-medium",t),variant:"small",as:"span",children:e.subject})}),o.jsxs("div",{className:"flex min-w-0 items-center gap-2",children:[e.snippet&&o.jsx(F,{variant:"tinyMono",className:"min-w-0 shrink truncate",color:"light",as:"span",children:e.snippet}),a&&o.jsx(F,{variant:"tinyMono",className:"shrink-0 text-right",color:"light",as:"span",children:a})]})]})]})});JRe.displayName="EmailSearchResult";const ePe=I.memo(({result:e,textClassName:t,icon:n})=>{const r=n?o.jsx(de,{icon:n,size:"xs"}):o.jsx(de,{icon:bu,size:"xs"}),s=("display_name"in e?e.display_name:void 0)||("name"in e?e.name:void 0)||"",a=("email_address"in e?e.email_address:void 0)||("url"in e?e.url:void 0)||"";return o.jsxs("div",{className:"hover:bg-subtler dark:hover:bg-subtle relative flex min-w-0 cursor-pointer items-center gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("span",{className:"shrink-0",children:r}),o.jsxs("span",{className:"gap-xs flex min-w-0 items-center",children:[s&&o.jsx(F,{className:B("min-w-0 shrink text-ellipsis",t),variant:"small",as:"span",children:s||(a?a.split("@")[0]:"")}),a&&o.jsx(F,{variant:"tinyMono",className:"mt-px min-w-0 shrink truncate",color:"light",as:"span",children:a})]})]})});ePe.displayName="UserInfoSearchResult";const tPe=I.memo(({result:e,textClassName:t,icon:n})=>{const r=r3(e.url),s=y0e(e,r),a=n?o.jsx(de,{icon:n,size:"xs"}):o.jsx(Wo.Icon,{url:e.url,isAttachment:e.is_attachment||!1,connectionType:r,isMemory:e.is_memory||!1,isConversationHistory:e.is_conversation_history||!1,isClientContext:e.is_client_context||!1,isInlineAttachment:!1}),i=e.url?o.jsx(Wo.Source,{url:e.url,source:s,isAttachment:e.is_attachment||!1,connectionType:r,isMemory:e.is_memory||!1,isConversationHistory:e.is_conversation_history||!1,snippet:e.snippet}):null,l=e.is_memory?e.snippet:e.name;return o.jsxs("div",{className:"hover:bg-subtler relative flex min-w-0 cursor-pointer items-start gap-3 rounded-lg px-2 py-1.5",children:[o.jsx("div",{className:"mt-two shrink-0",children:a}),o.jsxs("div",{className:"gap-sm flex min-w-0 flex-1 items-start",children:[o.jsxs("div",{className:"flex min-w-0 flex-1 flex-col",children:[l&&o.jsx(F,{className:B("min-w-0 shrink truncate break-words",t),variant:"small",as:"span",children:l}),e.is_conversation_history&&o.jsx(F,{variant:"tinyMono",color:"light",className:"pt-two line-clamp-1",children:e.snippet})]}),!e.is_conversation_history&&o.jsx(F,{variant:"tinyMono",className:"overflow-wrap-anywhere mt-px break-words text-right lowercase",color:"light",as:"span",children:i})]})]})});tPe.displayName="WebSearchResult";const gz=()=>{const{openModal:e}=xt(),{trackEvent:t}=Te();return d.useCallback(r=>{if(O_(r))return;const s=R1e(r);e("memorySearchHistoryModal",s);const a=s.type,i=s.memoryKey,l=s.entryUuid;t("viewed memory search history modal",{type:a,...a==="memory"&&{memory_key:i},...a==="conversation_history"&&{entry_uuid:l}})},[e,t])},IXt=(e,t)=>{const{value:n,loading:r}=jt({flag:"comet-open-citations-in-sidecar",defaultValue:e,extraAttributes:t,subjectType:"comet_device_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},yz=()=>{const e=Ks(),t=uf(),{variation:n}=IXt(!1);return e&&n&&!t},RXt=({heading:e,groupIndex:t})=>o.jsxs(o.Fragment,{children:[t>0&&o.jsx("div",{className:"border-subtlest border-b"}),o.jsx(z,{variant:"raised",className:"-mx-xs pl-sm pb-sm sticky top-0 z-30 flex items-center gap-3 pt-3",children:o.jsx(F,{variant:"tinyMono",children:e})})]}),id=I.memo(({onClick:e,stepDelay:t,isFinished:n,results:r,textClassName:s,groupBy:a,onCountChange:i,icon:l,resultType:c="web",maxHeight:u=250})=>{const{getGroupHandler:f}=TXt(i),m=Nn(),p=gz(),h=yz(),g=d.useRef(h);g.current=h;const y=d.useCallback(b=>{(b.is_memory||b.is_conversation_history)&&p(b)},[p]),x=d.useCallback(b=>_=>{if("is_conversation_history"in b){if(b.is_conversation_history||b.is_memory){_.preventDefault(),y(b);return}if(b.is_attachment||b.is_memory)return _.preventDefault();if(g.current){DF({adapter:m,event:_,reason:"citation-regular-list",url:b.url,tabId:b.tab_id});return}$5(_)&&(_.preventDefault(),m.openTab({url:b.url,tabId:b.tab_id}))}if(c==="email"||c==="calendar"){if(e){_.preventDefault();const C="url"in b?b.url:"";e(C||"")}return}const w="url"in b?b.url:"";e?.(w||"")},[m,e,c,y]);if(!r||r.length===0)return null;let v=[];if(a){const b=r,_=new Map;b.forEach(S=>{const E=S.category;_.has(E)||_.set(E,[]),_.get(E).push(S)});const w={open_tab:{heading:"Opened tabs",icon:o.jsx(de,{icon:YS})},closed_tab:{heading:"Recently closed tabs",icon:o.jsx(de,{icon:QR})},history:{heading:"Browser history",icon:o.jsx(de,{icon:UOe})}},C=_.size>1;v=Array.from(_.entries()).map(([S,E])=>{const k=w[S];return{heading:C?k?.heading||S:void 0,icon:C?k?.icon:void 0,results:E}})}else r.length>0&&r[0]&&"results"in r[0]?v=r.map(w=>({heading:w.heading,results:w.results})):v=[{results:[...r]}];return o.jsx(Xx,{children:o.jsx(Hw,{maxHeight:u,autoScroll:!1,topGradientOffset:v.length>1?36:0,scrollContainerClassName:v.length===1?"pt-sm":void 0,children:o.jsx("div",{className:"flex flex-col gap-px",children:v.map((b,_)=>{const w=b.results.map((S,E)=>{const k="url"in S?S.url:"",M=()=>{const j={result:S,textClassName:typeof s=="function"?s(S):s,icon:l};switch(c){case"web":return o.jsx(tPe,{...j});case"userinfo":return o.jsx(ePe,{...j});case"email":return o.jsx(JRe,{...j});case"calendar":return o.jsx(ZRe,{...j});default:return null}};return o.jsx(qe,{className:"-ml-xs block",href:k||"#",target:"_blank",rel:"noopener nofollow",onClick:x(S),children:M()},`${_}-${k||E}-${E}`)}),C=f(_);return o.jsxs("div",{className:"mb-sm last:mb-0",children:[b.heading&&v.length>1&&o.jsx(RXt,{heading:b.heading,groupIndex:_}),o.jsx(Up,{items:w,stepDelay:t,isFinished:n,vertical:!0,truncate:!1,onCountChange:C})]},_)})})})})});id.displayName="SearchResultsListStep";const Xh=I.memo(({result:e,onClick:t,visualStyle:n,showName:r,className:s})=>{const a=Nn(),i=r3(e.url),l=y0e(e,i),c=gz(),u=yz(),f=d.useCallback(()=>{(e.is_memory||e.is_conversation_history)&&c(e)},[c,e]),m=d.useCallback(p=>{if(e.is_conversation_history||e.is_memory){p.preventDefault(),f();return}if(e.is_attachment||e.is_memory)return p.preventDefault();if(u){DF({adapter:a,event:p,reason:"search-result-step",url:e.url,tabId:e.tab_id});return}$5(p)&&(p.preventDefault(),a.openTab({url:e.url,tabId:e.tab_id})),t?.(e.url)},[a,t,e.is_attachment,e.is_memory,e.tab_id,e.url,f,e.is_conversation_history,u]);return o.jsx(qe,{className:B("inline-block max-w-full",s),href:e.url,target:"_blank",rel:"noopener nofollow",onClick:m,children:o.jsx(z,{variant:"subtler",bgHover:"subtle",className:"py-xs rounded-lg pl-1.5 pr-2.5",children:o.jsx(Wo,{variant:"tinyMono",className:B("!text-[0.7rem]",{"!line-through":n==="closedTab"}),url:e.url,name:r?e.name:void 0,isAttachment:e.is_attachment,connectionType:i,source:l,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history})})})});Xh.displayName="SearchResultBubble";const PXt=I.memo(({onClick:e,webResults:t,initialDisplayCount:n=12,stepDelay:r,isFinished:s=!1})=>{const a=d.useMemo(()=>t.map(i=>o.jsx(nPe,{result:i,onClick:e},i.url)),[e,t]);return o.jsx("div",{className:"gap-sm flex flex-wrap",children:o.jsx(Up,{items:a,initialDisplayCount:n,stepDelay:r,isFinished:s})})});PXt.displayName="SearchResultsStep";const nPe=I.memo(({result:e,onClick:t})=>{const n=Nn(),r=d.useMemo(()=>({onClick(s){$5(s)&&(s.preventDefault(),n.openTab({url:e.url,tabId:e.tab_id}))}}),[n,e.tab_id,e.url]);return o.jsx(Ty,{result:e,linkProps:r,children:o.jsx(Xh,{result:e,onClick:t})},e.url)});nPe.displayName="CitationHoverCardFactory";const LXt=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9-]*\.)+[A-Z]{2,}$/i;function rPe(e){return typeof e!="string"?!1:LXt.test(e)}function PR({label:e,chips:t,onAdd:n,onDelete:r,children:s,placeholder:a,onDraftChange:i,contactSuggestions:l,renderContactSuggestion:c}){return o.jsxs("div",{className:"border-subtlest pl-md pr-sm flex min-h-10 flex-1 items-center border-b p-0",children:[o.jsx(F,{variant:"small",color:"light",className:"w-10 min-w-[32px] select-none",children:e}),o.jsx("div",{className:"flex-1",children:o.jsx(az,{chips:t,onAdd:n,onDelete:r,placeholder:a,validator:rPe,placeholderOnFocusOnly:!0,onDraftChange:i,suggestions:l,renderSuggestion:c})}),s]})}function OXt(e,t){const r=t.get(e)?.display_name?.trim();return r||e}function LR(e,t){return e.map(n=>({label:OXt(n,t),value:n}))}const DXt=I.memo(function({email:t,onChange:n,onSend:r,onDraftChange:s,contactSuggestions:a,renderContactSuggestion:i}){const l=d.useMemo(()=>t?.to??[],[t?.to]),c=d.useMemo(()=>t?.cc??[],[t?.cc]),u=d.useMemo(()=>t?.bcc??[],[t?.bcc]),[f,m]=d.useState(c.length>0),[p,h]=d.useState(u.length>0),{isMobileUserAgent:g}=xe(),y=()=>{(!c||c.length===0)&&(!u||u.length===0)&&(m(!1),h(!1))},{$t:x}=Z(),v={to:x({defaultMessage:"To",id:"9j3hXO4Ojb"}),cc:x({defaultMessage:"Cc",id:"J1CYkLdqdy"}),bcc:x({defaultMessage:"Bcc",id:"qLl3P2UOlZ"}),addRecipient:x({defaultMessage:"Add recipient",id:"o2g2HQVmtC"}),subject:x({defaultMessage:"Subject",id:"LLtKhppiyE"}),writeMessage:x({defaultMessage:"Write your message...",id:"yoP6t+NY/q"})},b=d.useCallback(O=>({onAdd:(A,T)=>{const N=t?.[O]??[],L=A.filter(U=>rPe(U)&&!N.includes(U));if(L.length>0){const U=t?.contacts?[...t.contacts]:[];if(T&&T.length>0){const $=T.filter(V=>!U.some(W=>W.email===V.email)).map(V=>({email:V.email,display_name:V.name,photo_url:V.image||void 0}));U.push(...$)}n({...t,[O]:[...N,...L],contacts:U})}},onDelete:A=>{const T=t?.[O]??[];n({...t,[O]:T.filter(N=>!A.includes(N))})}}),[t,n]),_=d.useMemo(()=>new Map((t?.contacts??[]).filter(O=>O.email).map(O=>[O.email,O])),[t?.contacts]),w=d.useMemo(()=>LR(l,_),[l,_]),C=d.useMemo(()=>LR(c,_),[c,_]),S=d.useMemo(()=>LR(u,_),[u,_]),E=b("to"),k=b("cc"),M=b("bcc"),j=d.useCallback(O=>n({...t,subject:O}),[t,n]),R=d.useCallback(O=>n({...t,body:O.target.value}),[t,n]);return o.jsxs("div",{className:"dark:bg-subtler flex w-full flex-col",children:[o.jsx(PR,{label:v.to,chips:w,onAdd:E.onAdd,onDelete:E.onDelete,placeholder:v.addRecipient,onDraftChange:s,contactSuggestions:a,renderContactSuggestion:i,children:o.jsxs("div",{className:"gap-two ml-2 flex",children:[!f&&o.jsx("button",{type:"button",className:"hover:bg-subtler text-quiet rounded-lg px-2 py-1 font-sans text-sm",onClick:()=>m(!0),children:v.cc}),!p&&o.jsx("button",{type:"button",className:"hover:bg-subtler text-quiet rounded-lg px-2 py-1 font-sans text-sm",onClick:()=>h(!0),children:v.bcc})]})}),f&&o.jsx(PR,{label:v.cc,chips:C,onAdd:k.onAdd,onDelete:k.onDelete,placeholder:v.addRecipient,onDraftChange:s,contactSuggestions:a,renderContactSuggestion:i}),p&&o.jsx(PR,{label:v.bcc,chips:S,onAdd:M.onAdd,onDelete:M.onDelete,placeholder:v.addRecipient,onDraftChange:s,contactSuggestions:a,renderContactSuggestion:i}),o.jsx(Xr,{isMobileUserAgent:g,name:"subject-input",type:"text",value:t?.subject,onChange:j,placeholder:v.subject,className:"border-subtlest text-foreground !px-md !py-sm min-h-10 w-full !rounded-none border-0 border-b !bg-transparent focus:outline-none focus:!ring-0","aria-label":v.subject}),o.jsx("textarea",{name:"body",value:t?.body,onChange:R,placeholder:v.writeMessage,rows:8,className:"text-foreground placeholder:text-quieter p-md min-h-[180px] w-full resize-none border-0 bg-transparent font-sans text-sm shadow-none focus:outline-none focus:ring-0","aria-label":v.writeMessage,onFocus:y})]})}),sPe=I.memo(({emailAction:e,sendStepResult:t,isFinished:n})=>{const r="send-email-step",[s,a]=d.useState(n??!1),{suggestions:i,handleDraftChange:l}=vIe({reason:"email_compose"}),c=d.useMemo(()=>{if(e?.send)return e.send.email;if(e?.forward)return e.forward.email},[e]),[u,f]=d.useState(c),{$t:m}=Z(),p=d.useMemo(()=>!!(u?.to&&u.to.length===0),[u]),h=d.useMemo(()=>m({defaultMessage:"Send",id:"9WRlF4R2gm"}),[m]),[g,y]=d.useState(""),[x,v]=d.useState(!1),b=d.useCallback(()=>{a(!0),t({confirmed:!1},r,!1)},[t,r]),_=d.useCallback((j,R)=>{!j&&(!R||!R.trim())||(a(!0),t({confirmed:j,...R&&{user_input:R.trim()},...u&&{email:u}},r,!1),!j&&R&&(v(!1),y("")))},[t,r,u]),w=d.useCallback(()=>_(!0),[_]),C=d.useCallback(()=>_(!1,g),[_,g]),S=d.useCallback(j=>{ga.isEnterKeyWithoutShift(j)&&(j.preventDefault(),C())},[C]),E=d.useCallback(()=>{v(!1),y("")},[]),k=d.useCallback(j=>{j.preventDefault(),v(!0)},[]),M=d.useCallback(j=>o.jsx(xIe,{contact:j}),[]);return s?o.jsx(Vs,{icon:Fa,iconClassName:"text-super",text:m({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsxs(z,{variant:"raised",className:"rounded-lg border",children:[u&&o.jsx(z,{children:o.jsx(DXt,{email:u,onChange:f,onDraftChange:l,contactSuggestions:i,renderContactSuggestion:M})}),x&&o.jsxs("form",{onSubmit:C,children:[o.jsx(z,{className:"px-md py-sm gap-4 border-t",children:o.jsx(Wa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:m({defaultMessage:"What would you like to change about this email?",id:"lrZrku1OFD"}),value:g,onChange:y,onKeyDown:S,minRows:3,className:"mt-sm !pl-3",autoFocus:!0})}),o.jsxs("div",{className:"gap-sm p-md pt-sm flex items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(me,{size:"small",variant:"inverted",text:m({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit"}),o.jsx(Me,{variant:"negative",size:"small",text:m({defaultMessage:"Cancel",id:"47FYwba+bI"}),onClick:E})]}),o.jsx(Me,{size:"small",text:m({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:b})]})]}),!x&&o.jsx("form",{onSubmit:w,children:o.jsxs("div",{className:"gap-sm p-md flex items-center justify-between border-t",children:[o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(me,{size:"small",variant:"inverted",text:h,type:"submit",disabled:p}),o.jsx(me,{size:"small",variant:"common",text:m({defaultMessage:"Refine email",id:"xTUBb7cWyO"}),onClick:k})]}),o.jsx(Me,{size:"small",text:m({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:b})]})})]})});sPe.displayName="SendEmailStep";const FXt=({result:e})=>{const{$t:t}=Z();return e?.confirmed===!0?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(Fa,{size:14,className:"shrink-0 text-[#16a34a]",title:"Confirmed"}),o.jsx("span",{className:"text-xs font-medium leading-none text-[#16a34a] dark:text-[#4ade80]",children:t({defaultMessage:"Task confirmed",id:"oLLCmoruP6"})})]}):e?.confirmed===!1?o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(kt,{size:14,className:"text-negative shrink-0",title:"Skipped"}),o.jsx("span",{className:"text-negative text-xs font-medium leading-none",children:t({defaultMessage:"Task skipped",id:"uMaJWuUUvD"})})]}):null},aPe=I.memo(({sendStepResult:e,taskAction:t,stepUUID:n,isFinished:r=!1})=>{const{$t:s}=Z(),{trackEvent:a}=Te(),i="router",l=d.useMemo(()=>{const w=t.expiry_date?new Date(t.expiry_date):void 0;return{trigger:{type:lt.SCHEDULED,schedule:BXt(t.schedule),expiryDate:w},query:{prompt:t.prompt||"",searchModel:t.model_preference||le.DEFAULT},status:"ACTIVE",notificationSettings:hf}},[t]),[c,u]=d.useState(bB(l??S3())),[f,m]=d.useState(null),[p,h]=d.useState(null),g="task_operation";d.useEffect(()=>{t&&!r&&a("task modal opened",{source:i})},[t,r,a,i]),ne.error("TaskOperationStep rendered",{stepUUID:n,hasTaskAction:!!t,isFinished:r,taskAction:t,taskActionType:typeof t,taskActionKeys:t?Object.keys(t):[],source:i});const y=d.useMemo(()=>s({defaultMessage:"Create Task",id:"4+iiEILSrA"}),[s]),x=d.useCallback(w=>{m(w),w.confirmed?(a("task modal action",{source:i,action:"created"}),e({confirmed:!0,task_action:w.task_action},g,!1)):(a("task modal action",{source:i,action:"deleted"}),e({confirmed:!1},g,!1))},[e,g,a]),v=d.useCallback(()=>{x({confirmed:!1})},[x]),b=d.useCallback(()=>{const w={task_name:c.query?.prompt||"Untitled Task",prompt:c.query?.prompt,model_preference:c.query?.searchModel||le.DEFAULT,schedule:c.trigger.type===lt.SCHEDULED?UXt(c.trigger.schedule):void 0,expiry_date:t.expiry_date};x({confirmed:!0,task_action:w})},[c,x,t.expiry_date]),_=d.useCallback(w=>{u(w)},[]);return t?r?o.jsx(Vs,{icon:Fa,iconClassName:"text-super",text:s({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsxs("div",{className:"bg-subtler border-subtlest transform overflow-hidden rounded-xl border transition-transform duration-200",children:[o.jsxs("div",{className:"bg-subtler border-subtler flex items-center justify-between border-b px-4 py-3",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-subtle flex size-8 items-center justify-center rounded-lg",children:o.jsx(mp,{size:16,className:"text-quiet"})}),o.jsx("h3",{className:"text-foreground text-sm font-medium",children:y})]}),o.jsx(FXt,{result:f})]}),o.jsx("div",{className:"bg-base p-4",children:o.jsx(gc,{children:o.jsxs("div",{className:"flex flex-col gap-3",children:[o.jsx(A4,{configuration:c,onConfigurationChange:_}),p&&o.jsxs("div",{className:"gap-xs flex items-center",children:[o.jsx(af,{size:12,className:"text-caution"}),o.jsx(F,{variant:"tinyRegular",color:"red",className:"mt-0.5",children:p})]}),o.jsx(QRe,{onSkip:v,onConfirm:b,disabled:r,result:f})]})})})]}):(ne.error("TaskOperationStep received null/undefined taskAction - will not render",{stepUUID:n,taskAction:t,isFinished:r,source:i}),null)});aPe.displayName="TaskOperationStep";function UXt(e){const t=`${e.hour.toString().padStart(2,"0")}:${e.minute.toString().padStart(2,"0")}`;switch(e.kind){case"ONCE":return{one_time:{datetime:new Date(e.year,e.month,e.day,e.hour,e.minute).toISOString()}};case"DAILY":return{daily:{time:t}};case"WEEKLY":return{weekly:{time:t,day_of_week:(e.dayOfWeek+6)%7}};case"MONTHLY":return{monthly:{time:t,day_of_month:e.day}};case"YEARLY":return{yearly:{time:t,day_of_month:e.day,month_of_year:e.month+1}};case"WEEKDAYS":return{weekdays:{time:t}};default:return{daily:{time:t}}}}function BXt(e){if(!e)return Bs();if(e.one_time){const t=e.one_time.datetime;if(!t)return Bs();const n=new Date(t);return{kind:"ONCE",minute:n.getMinutes(),hour:n.getHours(),day:n.getDate(),month:n.getMonth(),year:n.getFullYear(),dayOfWeek:n.getDay()}}else if(e.daily){const t=e.daily.time;if(!t)return Bs();const[n="",r=""]=t.split(":"),s=parseInt(n,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a))return Bs();const i=new Date;return{kind:"DAILY",minute:a,hour:s,day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),dayOfWeek:i.getDay()}}else if(e.weekly){const t=e.weekly.time,n=e.weekly.day_of_week;if(!t||n==null)return Bs();const[r="",s=""]=t.split(":"),a=parseInt(r,10),i=parseInt(s,10);if(isNaN(a)||isNaN(i))return Bs();const l=(n+1)%7,c=new Date;return{kind:"WEEKLY",minute:i,hour:a,day:c.getDate(),month:c.getMonth(),year:c.getFullYear(),dayOfWeek:l}}else if(e.monthly){const t=e.monthly.time,n=e.monthly.day_of_month;if(!t||n==null)return Bs();const[r="",s=""]=t.split(":"),a=parseInt(r,10),i=parseInt(s,10);if(isNaN(a)||isNaN(i))return Bs();const l=new Date;return{kind:"MONTHLY",minute:i,hour:a,day:n,month:l.getMonth(),year:l.getFullYear(),dayOfWeek:l.getDay()}}else if(e.yearly){const t=e.yearly.time,n=e.yearly.month_of_year,r=e.yearly.day_of_month;if(!t||n==null||r==null)return Bs();const[s="",a=""]=t.split(":"),i=parseInt(s,10),l=parseInt(a,10);if(isNaN(i)||isNaN(l))return Bs();const c=new Date;return{kind:"YEARLY",minute:l,hour:i,day:r,month:n-1,year:c.getFullYear(),dayOfWeek:c.getDay()}}else if(e.weekdays){const t=e.weekdays.time;if(!t)return Bs();const[n="",r=""]=t.split(":"),s=parseInt(n,10),a=parseInt(r,10);if(isNaN(s)||isNaN(a))return Bs();const i=new Date;return{kind:"WEEKDAYS",minute:a,hour:s,day:i.getDate(),month:i.getMonth(),year:i.getFullYear(),dayOfWeek:i.getDay()}}return Bs()}const cO=I.memo(({question:e,sendStepResult:t,isFinished:n})=>{const r="user-clarification-step",[s,a]=d.useState(n??!1),[i,l]=d.useState(""),{$t:c}=Z(),u=d.useCallback(()=>{a(!0),t({confirmed:!1,user_input:i.length>0?i:"The user chose to confirm with the information provided"},r,!1)},[i,t]),f=d.useCallback(()=>{a(!0),t({confirmed:!1},r,!1)},[t]),m=d.useCallback(p=>{ga.isEnterKeyWithoutShift(p)&&(p.preventDefault(),u())},[u]);return s?o.jsx(Vs,{icon:Fa,iconClassName:"text-super",text:c({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsx(z,{variant:"raised",className:"py-sm rounded-lg border",children:o.jsxs("form",{onSubmit:u,children:[e&&o.jsxs("div",{className:"px-md pt-sm",children:[o.jsx(F,{variant:"small",children:e}),o.jsx("div",{className:"gap-sm mt-3 flex items-center",children:o.jsx("div",{className:"grow",children:o.jsx(Wa,{isMobileStyle:!1,isMobileUserAgent:!1,placeholder:c({defaultMessage:"Add details",id:"GTIJ9uAEMf"}),value:i,onChange:l,onKeyDown:m,minRows:3,className:"!pl-3",autoFocus:!0})})})]}),o.jsxs("div",{className:"gap-sm px-md py-sm mt-4 flex items-center",children:[o.jsx(me,{size:"small",variant:"inverted",text:c({defaultMessage:"Continue",id:"acrOozm08x"}),type:"submit"}),o.jsx(Me,{size:"small",text:c({defaultMessage:"Skip",id:"/4tOwTiCH6"}),onClick:f})]})]})})});cO.displayName="UserClarificationStep";const oPe=I.memo(({step:e,action:t})=>{const{final:n,file_name:r,sheet_count:s,row_count:a}=e.content,i=!n;let l=t;return r&&n&&(l=r,s!=null?(l+=` (${s} sheets`,a!=null&&(l+=`, ${a} rows`),l+=")"):a!=null&&(l+=` (${a} rows)`)),o.jsx(me,{text:t,icon:$b,isLoading:i,size:"tiny",pill:!0,toolTip:l,tooltipLayout:"top"})});oPe.displayName="XlsxStep";const $Xt=e=>e.toLowerCase().replace(/_/g," ").replace(/^\w/,t=>t.toUpperCase()),VXt={FINANCE:"FINANCE"},WXt={STOCK_PRICE_MOVEMENT:"STOCK_PRICE_MOVEMENT"},Ik=e=>{const{searchMode:t,hasAnswer:n,result:r}=pn(),{submitQuery:s}=Sa(),a=t===ue.STUDIO,{$t:i}=Z(),{step:l,onStepClick:c,isFinished:u,stepDelay:f,motionProps:m,isNested:p=!1,showAllNestedSteps:h=!0,isMissionControl:g=!1}=e,[y,x]=d.useState(void 0),v=`resuming-step:${e.step.uuid??""}`,[b,_]=d.useState(()=>{try{return De.getItem(v)==="1"}catch{return!1}});d.useEffect(()=>{try{_(De.getItem(v)==="1")}catch{_(!1)}},[v]);const w=d.useCallback(async(G,ee,Y=!1)=>{l.uuid&&await L1({contextUUID:r?.context_uuid,stepUUID:l.uuid,result:G,reason:ee}).then(te=>{if(te&&!Y){De.setItem(v,"1"),_(!0);const se=r?{...r,status:"RESUMING"}:void 0;s({rawQuery:r?.query_str??"",existingEntryUUID:r?.backend_uuid,existingFrontendContextUUID:r?.context_uuid,frontendUUID:r?.frontend_uuid,promptSource:"user",resumingQuery:!0,resumeFromUuid:l.uuid,resumeFromPlaceholder:se,collection:null,newFrontendContextUUID:null})}})},[l.uuid,s,r,v]),C=d.useCallback(async()=>{await w({confirmed:!0},"thread-upsell-accepted",!0)},[w]),S=d.useCallback(async()=>{await w({confirmed:!1},"thread-upsell-dismissed",!0)},[w]),E=(G,ee)=>{const Y=_d[G]?.message;return Y?ee?i(Y,ee):i(Y):""},k=G=>{const ee=[];let Y=0;for(;Y<G.length;){const te=G[Y],se=G[Y+1];te?.step_type==="GET_FREEBUSY_RESPONSE"?Y+=1:te?.step_type==="GET_FREEBUSY"&&se?.step_type==="GET_FREEBUSY_RESPONSE"?(ee.push({...te,get_free_busy_response_content:se.get_free_busy_response_content,originalEndIndex:Y+1}),Y+=2):(ee.push({...te,originalEndIndex:Y}),Y+=1)}return ee},M=G=>G.map((ee,Y)=>({...ee,originalEndIndex:Y})),j=rKt(),R=l.assets&&l.assets.length>0?o.jsx("div",{className:"gap-sm my-sm flex flex-row flex-wrap",children:l.assets.map(G=>o.jsx(ERe,{asset:G},G.uuid))}):null,O=l.step_type,D=l.content.should_show_upsell??!1,P=l.content.upsell_information,A=o.jsx(Qx,{position:"router_steps",upsellInformation:P,inFlight:!u,stepUUID:l.uuid,backendUuid:P?.backend_uuid,isLastResult:!0,onAccept:C,onReject:S}),N=(()=>{switch(O){case"SEARCH_WEB":{const G=l.content.queries??[],ee=G.length>0&&G.every(te=>te.engine==="image");return{title:E(ee?"search_images":"search"),content:o.jsx(Na,{queries:G.map(te=>te.query),stepDelay:a?2:void 0,isFinished:u})}}case"SEARCH_RESULTS":{let ee=function(te){return te.length===0?"reviewing_sources":te.every(se=>se.is_memory)?G.length===1?"reviewing_memory":"reviewing_memories":te.every(se=>se.is_conversation_history)?"reviewing_conversation_history":G.length===1?"reviewing_source":"reviewing_sources"};const G=l.content.web_results;return{title:E(ee(G)),count:G.length>1?y:void 0,content:G.length===0?o.jsx(Vs,{icon:yG,text:i({defaultMessage:"No sources found",id:"yWSiuEkfbY"})}):Fk(G)?o.jsx(Xh,{result:G[0],showName:!0,onClick:c}):o.jsx(id,{onClick:c,results:G,stepDelay:a?2:void 0,isFinished:u,onCountChange:x})}}case"ENTROPY_REQUEST":return{content:o.jsx(nIe,{step:l,isFinished:u??!1,isMissionControl:g})};case"CODE":return{content:!R&&o.jsx(SRe,{action:E("working"),step:l})};case"PDF":return{content:!R&&o.jsx(WRe,{action:E("creating_pdf"),step:l})};case"DOCX":return{content:!R&&o.jsx(kRe,{action:E("creating_docx"),step:l})};case"XLSX":return{content:!R&&o.jsx(oPe,{action:E("creating_xlsx"),step:l})};case"CREATE_APP_RESULT":return{content:null};case"CREATE_CLIENT_APP":return{title:E("building_app"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.caption})};case"CREATE_CHART":return{title:E("creating_chart"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.caption})};case"GET_URL_CONTENT":{const G=l.content.pages;return{title:E(G.length>1?"getting_sources":"getting_source"),count:G.length>1?y:void 0,content:G.length===0?o.jsx(Vs,{icon:WOe,text:i({defaultMessage:"No content found",id:"JlMgLJz0nd"})}):o.jsx("div",{className:"flex flex-wrap gap-2",children:G.map((ee,Y)=>o.jsx(Xh,{result:{name:"",snippet:"",is_attachment:!1,url:ee.url},showName:!1,onClick:c},ee.url||Y))})}}case"CLARIFYING_QUESTIONS_OUTPUT":return l.content.clarification?{content:o.jsx(BIe,{step:l})}:null;case"THOUGHT":return{title:E("thinking"),content:o.jsx(z,{variant:"subtler",className:"py-xs inline-block rounded-lg px-2.5",children:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.thought})})};case"URL_NAVIGATE":return{title:E("navigate"),content:o.jsx(Na,{queries:l.content.urls})};case"BROWSER_OPEN_TAB_RESULTS":return{title:E("opening_tab"),content:o.jsx(Xh,{result:{name:l.content.tab.title,url:l.content.tab.url,snippet:"",is_attachment:!1,is_client_context:!0,tab_id:l.content.tab.id},showName:!0,onClick:c})};case"BROWSER_CLOSE_TABS_RESULTS":{const G=l.content.tabs;return{title:E("closing_tabs"),content:G.length===0?o.jsx(Na,{queries:[j.failedClosedTabs],icon:vG}):o.jsx(id,{results:G.map(ee=>({name:ee.title,url:ee.url,snippet:"",is_attachment:!1})),textClassName:ee=>{const Y="url"in ee&&ee.url,te="name"in ee&&ee.name;return Y||te?"opacity-65 line-through":""}})}}case"READ_GMAIL":case"READ_EMAIL":{const G=l.content.queries?.length?l.content.queries:[j.allEmail];return{title:E("searching_gmail"),content:o.jsx(Na,{queries:G,icon:_0})}}case"READ_GMAIL_RESPONSE":case"READ_EMAIL_RESPONSE":{const G=l.content;return{title:G?.authenticated?G?.count===0?j.emailsFound(0):E("reading_emails"):j.gmailNotAuthenticated,content:G.authenticated&&G.count>0&&G.results?o.jsx(id,{results:G.results,resultType:"email",onClick:c,stepDelay:f,isFinished:u,maxHeight:400}):null}}case"READ_CALENDAR":return{title:E("searching_calendar"),content:o.jsx(Na,{queries:l.content.queries??[],icon:_0})};case"READ_CALENDAR_RESPONSE":return{title:l.content.authenticated?l.content.count===0?j.eventsFound(0):E("reading_events"):j.googleCalendarNotAuthenticated,content:l.content.authenticated&&(l.content.count??0)>0&&l.content.results?o.jsx(id,{results:l.content.results,resultType:"calendar",onClick:c,stepDelay:f,isFinished:u,maxHeight:400}):null};case"UPDATE_CALENDAR":return{title:E("scheduling"),isFinished:!0,content:l.content?.clarification?o.jsx(cO,{isFinished:b,question:l.content.clarification,sendStepResult:w}):l.content?.operations?o.jsx(DIe,{isFinished:b,calendarOperations:l.content.operations,sendStepResult:w}):null};case"UPDATE_CALENDAR_RESPONSE":return{title:E("scheduling"),isFinished:!0,content:(()=>{const G=l.content?.operations;return!G||G.length===0?o.jsx(Vs,{icon:Fa,iconClassName:"text-super",text:i({defaultMessage:"Done",id:"JXdbo8Vnlw"})}):o.jsx(FIe,{operations:G})})()};case"CREATE_TASKS":{const ee=l.content?.task_action;if(!ee)return null;if(ee.event_group===VXt.FINANCE&&ee.event_type&&ee.event_entity){const Y={ticker_symbol:ee.event_entity,target_price:ee.target_price,current_price:ee.current_price,...ee.event_type===WXt.STOCK_PRICE_MOVEMENT&&{movement_percent:zS(ee.upper_bound)?ee.upper_bound:zS(ee.lower_bound)?Math.abs(ee.lower_bound):void 0,positive_direction:zS(ee.upper_bound),negative_direction:zS(ee.lower_bound)}};return{title:i({defaultMessage:"Setting up price alert",id:"JGiR4/dpaV"}),isFinished:!0,content:o.jsx(XRe,{taskAction:ee,priceAlertData:Y,stepUUID:l.uuid??"",isFinished:u||b,sendStepResult:w})}}return{title:E("scheduling"),isFinished:!0,content:o.jsx(aPe,{taskAction:ee,stepUUID:l.uuid??"",isFinished:u||b,sendStepResult:w})}}case"CREATE_TASKS_RESPONSE":return{title:E("scheduled"),isFinished:!0,content:o.jsx(Vs,{icon:Fa,iconClassName:"text-super",text:"Done"})};case"SEND_GMAIL":case"SEND_EMAIL":return n?null:{title:E("emailing"),content:l.content?.clarification?o.jsx(cO,{isFinished:b,question:l.content.clarification,sendStepResult:w}):l.content?o.jsx(sPe,{isFinished:b,emailAction:l.content.action,sendStepResult:w}):null};case"SEND_GMAIL_RESPONSE":case"SEND_EMAIL_RESPONSE":return{title:E("emailing"),isFinished:!0,content:o.jsx(TRe,{status:l.content?.status})};case"EMAIL_CALENDAR_AGENT_RESPONSE":case"GMAIL_GCAL_AGENT_RESPONSE":return{title:l.content.authenticated?void 0:j.gmailNotAuthenticated,content:null};case"EMAIL_CALENDAR_AGENT":case"GMAIL_GCAL_AGENT":{const G=k(l.content.steps??[]),ee=h?G:G.slice(-1);return{content:o.jsx(o.Fragment,{children:ee.map(Y=>{const te={step_type:Y.step_type||"EMAIL_CALENDAR_AGENT",content:Y.step_type==="GET_FREEBUSY"&&Y.get_free_busy_response_content?{...Y.get_free_busy_content,...Y.get_free_busy_response_content}:Y.get_free_busy_content??Y.get_user_info_content??Y.get_user_info_response_content??Y.send_email_content??Y.update_calendar_content??Y.update_calendar_response_content??Y.send_email_response_content??Y.get_free_busy_response_content??Y.read_calendar_content??Y.read_calendar_response_content??Y.read_email_content??Y.read_email_response_content??{},uuid:Y.uuid||"",assets:void 0},se=h?u||Y.originalEndIndex<(l.content.steps?.length??0)-1:u;return o.jsx(Ik,{step:te,isFinished:se,isNested:p,onStepClick:c,showAllNestedSteps:h},Y.uuid)})}),skipWrapper:!0}}case"FLIGHTS_SEARCH":{const G=l.content;if(!G)return null;const ee=G.found_flights,Y=ee&&ee.length>0,te=G.submitted;return{title:E("searching_flights"),isFinished:Y,content:Y&&!te?o.jsx(YRe,{stepUUID:l.uuid??"",goalId:G.goal_id??"",foundFlights:G.found_flights,isSubmitted:te??!1,outboundDate:G.outbound_date,returnDate:G.return_date,flightType:G.flight_type}):null}}case"FLIGHTS_SEARCH_RESPONSE":{const{selected_flight:G,submitted:ee}=l.content??{},Y=E("looking_for_booking_options"),te=G?.flights?.map(be=>be.airline).filter(Boolean).join(", ")||"",se=G?.flights?.[0]?.departure_airport?.id||"",ae=G?.flights?.[G.flights.length-1]?.arrival_airport?.id||"",pe=G?.total_duration||0,fe=Math.floor(pe/60),ge=pe%60,Se=fe>0?`${fe}h ${ge}min`:`${ge}min`;let je=se;if(G?.flights&&G.flights.length>1)for(let be=1;be<G.flights.length;be++){const Ne=G.flights[be]?.departure_airport?.id;Ne&&Ne!==je.split(" -> ").pop()&&(je+=` -> ${Ne}`)}je+=` -> ${ae}`;const ye=`${te} (${je}): ${Se}`;return ee&&G?{title:Y,isFinished:u||n,content:o.jsx(Na,{queries:[ye],icon:VOe})}:null}case"FLIGHTS_BOOKING":{const G=l.content;if(!G)return null;const ee=G.found_booking_options,Y=ee&&ee.length>0,te=G.submitted;return{title:E("reviewing_booking_options"),isFinished:Y,content:Y?o.jsx(qRe,{stepUUID:l.uuid??"",goalId:G.goal_id??"",foundBookingOptions:G.found_booking_options,isSubmitted:te??!1}):null}}case"FLIGHTS_BOOKING_RESPONSE":{const{selected_booking_options:G,submitted:ee}=l.content??{},Y=E("redirecting_to_booking");return ee&&G?{title:Y,isFinished:u||n,content:(()=>{const te=se=>{const ae=[];return se.together?.book_with?ae.push(se.together.book_with):(se.departing?.book_with&&ae.push(`Departing: ${se.departing.book_with}`),se.returning?.book_with&&ae.push(`Returning: ${se.returning.book_with}`)),ae.join(" | ")||"Booking options"};return o.jsx(Na,{queries:[te(G)],icon:$Oe})})()}:null}case"FLIGHTS_AGENT":{const G=M(l.content.steps??[]),ee=h?G:G.slice(-1);return{content:o.jsx(o.Fragment,{children:ee.map(Y=>{const te={step_type:Y.step_type||"FLIGHTS_AGENT",content:Y.browser_open_tab_content??Y.browser_open_tab_results_content??Y.flights_search_content??Y.flights_booking_content??Y.flights_search_response_content??Y.flights_booking_response_content??{},uuid:Y.uuid||"",assets:void 0},se=h?u||Y.originalEndIndex<(l.content.steps?.length??0)-1:u;return o.jsx(Ik,{step:te,isFinished:se,isNested:p,onStepClick:c,showAllNestedSteps:h},Y.uuid)})}),skipWrapper:!0}}case"TERMINATE":return{title:E("conclusion"),content:l.content.reason?o.jsx(z,{variant:"subtler",className:"py-xs inline-block rounded-lg px-2.5",children:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.reason})}):null};case"CANVAS_AGENT":{const G=l.content.asset_types??[],ee={CODE_FILE:"a file",PDF_FILE:"a PDF",DOCX_FILE:"a document",XLSX_FILE:"a spreadsheet",APP:"an app",SLIDES:"slides"};return{title:void 0,content:o.jsx(UIe,{assetTypes:G,assetTypeLabels:ee,isFinished:u})}}case"GENERATE_IMAGE":return{title:E("generating_images"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.prompt})};case"GENERATE_IMAGE_RESULTS":return{title:E("presenting_images"),content:!R&&o.jsx(NRe,{urls:l.content.image_results.map(G=>G.url)})};case"GENERATE_VIDEO":return{title:E("generating_images"),content:o.jsx(F,{variant:"tinyMono",className:"!text-[0.68rem]",children:l.content.prompt})};case"GENERATE_VIDEO_RESULTS":return{title:E("presenting_images"),content:!R&&o.jsx(ARe,{urls:l.content.video_results.map(G=>G.url??""),onClick:c})};case"BROWSER_GROUP_TABS":return{title:E("grouping_tabs"),content:l.content.payloads?.length>0?o.jsx("div",{className:"gap-sm flex flex-row flex-wrap",children:l.content.payloads.map((G,ee)=>o.jsx(aO,{color:G.color,title:G.title??""},ee))}):null};case"BROWSER_GROUP_TABS_RESULTS":return{content:l.content.success?null:o.jsx(Vs,{icon:vG,text:j.couldNotFinish})};case"BROWSER_UNGROUP":return{title:E("ungrouping_tabs"),content:l.content.payload?.groups_metadata&&l.content.payload.groups_metadata.length>0?(()=>{const G=l.content.payload.groups_metadata.map((ee,Y)=>({name:ee.title||`Group ${Y+1}`,url:"",source:ee.title||`Group ${Y+1}`}));return G.length===1?o.jsx(Na,{queries:l.content.payload.groups_metadata.map(ee=>ee.title||"Unnamed Group"),initialDisplayCount:3,icon:xG}):o.jsx(id,{results:G,icon:xG,textClassName:"opacity-65 line-through decoration-subtle"})})():null};case"BROWSER_SEARCH_TAB_GROUPS":return{title:E("searching_tab_groups"),content:o.jsx(Na,{queries:l.content.payload?.queries?.length?l.content.payload.queries:[j.allTabGroups],icon:_0})};case"BROWSER_SEARCH_TAB_GROUPS_RESULT":return{title:E("reading"),content:l.content.results.length>0?o.jsx("div",{className:"gap-sm flex flex-row flex-wrap",children:l.content.results.map((G,ee)=>o.jsx(aO,{color:G.color,title:G.title??""},ee))}):null};case"GET_USER_INFO":{const G=l.content;if(!G||!G.names)return null;const ee=G.found_users,Y=ee&&ee.length>0,te=G.submitted;return{title:Y&&!te?void 0:E("getting_user_info"),content:Y&&!te?o.jsx(GRe,{goalId:G.goal_id??"",foundUsers:G.found_users,names:G.names,sendStepResult:w}):o.jsx(Na,{queries:G.names,icon:m1})}}case"GET_USER_INFO_RESPONSE":{const{submitted:G,selected_users:ee}=l.content??{},Y=ee?.some(te=>te.selected===!0);return G&&ee?{title:ee?.some(te=>te.selected===!0)?E("selecting_contacts"):E("getting_contact_details"),content:ee.length===0?o.jsx(Na,{queries:[E("no_contacts_found")],icon:BOe}):ee.length===1?o.jsx(Na,{queries:ee.map(te=>`${te.display_name||""} ${te.email_address?`(${te.email_address})`:""}`.trim()),icon:rm}):o.jsx(id,{results:ee.map(te=>({...te,url:te.email_address?`mailto:${te.email_address}`:void 0})),icon:rm,resultType:"userinfo",textClassName:te=>{const se="email_address"in te?te.email_address:void 0,ae=ee?.find(pe=>pe.email_address===se);return Y&&ae?.selected===!1?"opacity-65 line-through decoration-subtle":""}})}:null}case"GET_FREEBUSY":{const G=l.content;return{title:E("getting_freebusy"),content:(()=>{const ee=G.free_busy_response?.available_periods?.length??0;let Y,te;return!G.authenticated&&u?(Y=j.googleCalendarNotAuthenticated,te=tC):ee===0&&u?(Y=j.noAvailabilityFound,te=tC):ee>0&&(Y=j.availableTimesFound(ee),te=bG),Y?o.jsx(Vs,{text:Y,icon:te}):null})()}}case"GET_FREEBUSY_RESPONSE":return{title:E("getting_freebusy"),content:(()=>{const G=l.content.free_busy_response?.available_periods?.length??0;let ee,Y;return!l.content.authenticated&&u?(ee=j.googleCalendarNotAuthenticated,Y=tC):G===0&&u?(ee=j.noAvailabilityFound,Y=tC):G>0&&(ee=j.availableTimesFound(G),Y=bG),ee?o.jsx(Vs,{text:ee,icon:Y}):null})()};case"PENDING_FILES":return{content:o.jsx(HRe,{attachments:l.content.attachments,attachmentProcessingProgress:l.content.attachmentProcessingProgress})};case"SEARCH_BROWSER":{const G=l.content.queries?.filter(Y=>Y!=null&&Y.trim()!=="")||[],ee=G.length>0?G:l.content.browser_content_sources?.map(Y=>Y in _d?E(Y):$Xt(Y))||[];return{title:E("searching_browser"),content:o.jsx(Na,{queries:ee,isFinished:u})}}case"SEARCH_BROWSER_RESULTS":return{title:E("reading_browser"),count:y,content:(()=>{const{open_tabs:G,recently_closed_tabs:ee,history:Y}=l.content,te=(G?.length||0)+(ee?.length||0)+(Y?.length||0);if(te===0)return o.jsx(Vs,{icon:yG,text:i({defaultMessage:"No sources found",id:"yWSiuEkfbY"})});if(te===1){const ae=G?.[0]||ee?.[0]||Y?.[0];return o.jsx(Xh,{result:{...ae},showName:!0,onClick:c})}const se=[];return G&&G.length>0&&se.push(...G.map(ae=>({...ae,category:"open_tab"}))),ee&&ee.length>0&&se.push(...ee.map(ae=>({...ae,category:"closed_tab"}))),Y&&Y.length>0&&se.push(...Y.map(ae=>({...ae,category:"history"}))),o.jsx(id,{onClick:c,results:se,groupBy:"category",stepDelay:a?2:void 0,isFinished:u,onCountChange:x})})()};case"MCP_TOOL_INPUT":{const G=l.content;if("authenticated"in G&&(G.authenticated===void 0||G.authenticated===null))return null;let ee=i({id:"bTDpQ+Tk24",defaultMessage:"external service"});return G.mcp_server_type==="MCP_SERVER_TYPE_LOCAL"?ee=i({id:"0asQ8snMnq",defaultMessage:"local MCP"}):G?.app&&(ee=G.app),{title:E("MCP_TOOL",{appName:ee}),content:o.jsx(BRe,{step:l,isFinished:u})}}case"MCP_TOOL_OUTPUT":{const G=l.content;return{title:E("MCP_TOOL"),content:o.jsx(VRe,{content:G.content||"",shouldRerunQuery:!!G.should_rerun_query})}}case"BLOCKING_CLARIFYING_QUESTIONS":{const G=l.content.clarifying_questions||[],ee=l.content.clarifying_answers||[];return{title:"Additional Information Needed",content:o.jsx(GAe,{questions:G,toolUuid:l.uuid,isFinished:u,answers:ee})}}case"COMET_AGENT_ACTIONS":{if(u)return null;const G=l.content.actions;if(!G||G.length===0)return null;const ee=G[G.length-1],Y=ee&&ee in _d?ee:"working";return{content:o.jsx(eu,{action:Y,isFinished:u,className:"-my-1.5"})}}case"COMET_AGENT_TOOL_INPUT":{const G=l.content.tool_input;if(G?.todo_write)return null;const ee=G?.computer?G.computer.action:Object.keys(G??{})[0],Y=ee&&ee in _d?ee:"working";return ee?{content:o.jsx(eu,{action:Y,isFinished:u,className:"-my-1.5"})}:null}case"COMET_AGENT_TOOL_OUTPUT":{const G=l.content.tool_output;return G?.computer&&!G.computer.error?{content:o.jsx(MRe,{...G.computer})}:null}default:return null}})();if(!N)return g?o.jsx(eu,{title:E("working"),showAnimation:!0,className:"mt-sm"}):null;if(N.skipWrapper)return D&&P?o.jsxs(o.Fragment,{children:[A,N.content]}):O==="GMAIL_GCAL_AGENT"&&l.content.steps?.length===0&&g?o.jsx(eu,{title:E("working"),showAnimation:!0,className:"mt-sm"}):N.content;const{title:L,content:U,count:$,isFinished:V}=N,W=D&&P?!0:V??(u||b)??!1,Q={key:l.uuid,initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"mt-1.5 empty:hidden"},q={...Q,...m,className:m?.className?`${Q.className} ${m.className}`:Q.className},{key:H,...K}=q;return o.jsxs(ve.div,{...b?{}:K,children:[L&&o.jsx(eu,{title:L,isFinished:W,className:"mb-two",count:$,showAnimation:b}),!L&&g&&!W&&O!=="ENTROPY_REQUEST"&&o.jsx(eu,{title:E("working"),showAnimation:!0,className:"mb-two"}),D&&P?A:U,R]},H)};Ik.displayName="StepRenderer";function HXt({step:e,isFinished:t=!1}){const{$t:n}=Z();switch(e.step_type){case"INITIAL_QUERY":return o.jsx(eu,{title:n({id:"8ZN5O/Kt3k",defaultMessage:"Starting up"}),showAnimation:!0,className:"mt-sm"});default:return o.jsx(Ik,{step:e,isFinished:t,isMissionControl:!0})}}function zXt(e){return e&&typeof e=="object"&&"entryUUID"in e&&"displayModel"in e}var GXt={};const qXt=({activeStreamingThreads:e,blockedThreads:t,entries:n,initiallyLoadedBlockedEntries:r,recentlyBlockedEntries:s,recentlyCompletedEntries:a,queuedThreadParams:i,selectedItemId:l,onItemSelect:c})=>{const u=Z(),{$t:f}=u,{cancelQueuedThread:m}=B4(),p=f({id:"I90sbWU03C",defaultMessage:"just now"}),[h,g]=d.useState(void 0),{taskTabs:y}=Hr(),x=Nn(),{trackEvent:v}=Te(),b=d.useCallback(({thread:A,taskUUID:T,entryBackendUUID:N,threadUUID:L,threadActive:U,date:$})=>{const V=$?x_(u,$,{style:"narrow"}):p,W=y?.some(K=>K.taskUuid===T)??!1,Q="context_uuid"in A?A.context_uuid:A.contextUUID||"",q="frontend_context_uuid"in A?A.frontend_context_uuid||"":"frontendContextUUID"in A&&A.frontendContextUUID||"",H=N||L;return o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx("div",{className:"text-quiet text-xs",children:V}),o.jsxs("div",{children:[o.jsx(Me,{text:"Open full thread",icon:p1,size:"small",onClick:K=>{K.stopPropagation(),window.open(`/search/${A.slug}`,"_blank"),v("mission control open full thread clicked",{contextUUID:Q,frontendContextUUID:q})}}),T&&H&&o.jsx(Me,{text:"Switch to tab",icon:p1,size:"small",variant:"super",disabled:!W&&!U,toolTip:!W&&!U?"Tab no longer available":void 0,onClick:async K=>{K.stopPropagation(),GXt.NEXT_PUBLIC_IS_SIDECAR_BUILD?await x.makeTaskVisible(T):await x.moveThreadToSidecar({activeTaskUuid:T,isMissionControl:!0,entryId:H,reason:"move-browser-step"}),v("mission control switch to tab clicked",{contextUUID:Q,frontendContextUUID:q})}})]})]})},[u,p,y,x,v]),_=d.useCallback(({stepRenderer:A,thread:T,taskUUID:N,entryBackendUUID:L,date:U})=>{const $="contextUUID"in T?T.contextUUID:"context_uuid"in T?T.context_uuid:void 0;return o.jsxs("div",{className:"space-y-md",children:[A,o.jsx(b,{thread:T,threadUUID:$,entryBackendUUID:L,taskUUID:N,threadActive:!0,date:U})]})},[b]),{data:w=[],invalidateThreadsQuery:C}=$H("mission_control_active",void 0,void 0,!1,void 0),S=w.filter(A=>A.is_mission_control||A.is_personal_intent),E=d.useCallback(A=>{if(A)return!A.endsWith("Z")&&!A.includes("+")?A+"Z":A},[]),k=A=>{const T=c0(A?.blocks||[]),N=T.length>0?T[T.length-1]:null;let L=!1;return N?.step_type==="ENTROPY_REQUEST"&&N.content.tasks.forEach(U=>{U.agent_messages.length>0&&(L=U.agent_messages[U.agent_messages.length-1]?.form!==void 0)}),L},M=d.useCallback(async(A,T,N)=>{if(A===N)return;const U=await P1({slugOrUUID:T,reason:"mission-control-completed-thread-entry"});if(!U?.entries||U.entries.length==0)return;const $=U.entries[U.entries.length-1];if(!$)return;const W=($&&$.blocks?c0($.blocks):[]).filter(H=>H.step_type==="ENTROPY_REQUEST");if(W.length==0)return;const Q=W[W.length-1]?.content.tasks;if(!Q||Q.length==0)return;const q=Q[Q.length-1]?.uuid;q&&g({frontendContextUUID:N,taskUUID:q})},[]),[j,R]=d.useState([]),O=d.useCallback(async A=>{if(A){R(T=>[...T,A]);try{await ige({contextUUID:A,reason:"mark thread as viewed in mission control on expand"}),C()}catch(T){ne.error("Failed to mark thread as viewed (via selection click):",{contextUUID:A,error:T}),R(N=>N.filter(L=>L!==A))}}},[C]),D=d.useCallback((A,T,N=!1,L)=>{const U=c0(A?.blocks||[]),$=U.length>0?U[U.length-1]:null,V=A?.status==="COMPLETED",W=zXt(T)?T.streamCreatedAt||(T.lastUpdated?T.lastUpdated:null):T.stream_created_at?T.stream_created_at:T.last_query_datetime,Q=T.title||A?.query_str||"New task";if(!A)return o.jsx(g0,{title:Q,state:N?"action-required":"in-progress",footer:o.jsx(_,{thread:T,date:W}),isSelected:l===L,onClick:()=>c?.(L)},L);const H=(A.blocks?c0(A.blocks):[]).filter(K=>K.step_type==="ENTROPY_REQUEST").flatMap(K=>K.content?.tasks||[]).map(K=>K.uuid).filter(K=>K)[0];return o.jsx($W,{idx:0,result:A,inFlight:!V,isLastResult:!0,isFirstResult:!0,submitQuery:vn,children:o.jsx(tz,{scrollToListItem:vn,children:o.jsx(g0,{title:Q,state:N?"action-required":"in-progress",entryUUID:A?.backend_uuid,invalidateThreadsQuery:C,footer:o.jsx(_,{thread:T,date:W,entryBackendUUID:A?.backend_uuid,taskUUID:H,stepRenderer:$&&A?o.jsx(HXt,{step:$,isFinished:V}):null}),isSelected:l===L,onClick:()=>c?.(L)})})},L)},[C,l,c,_]);return{allItems:d.useMemo(()=>{const A=[];return i.forEach((N,L)=>{const U=N.query||"New task",$=N.newFrontendContextUUID||`queued-${L}`;A.push({id:$,timestamp:void 0,frontendContextUUID:void 0,item:o.jsx(g0,{title:U,state:"queued",queuedId:$,onCancelQueued:m,isSelected:l===$,onClick:()=>c?.($)},$),type:"queued"})}),e.forEach(N=>{if(N.frontendContextUUID){const L=Object.values(n).find($=>$.uuid===N.entryUUID),U=L?k(L):!1;A.push({id:N.id,frontendContextUUID:N.frontendContextUUID,timestamp:E(N.streamCreatedAt||N.lastUpdated),item:D(L||null,N,U,N.frontendContextUUID||""),type:"active"})}}),t.forEach(N=>{if(e.find($=>$.contextUUID===N.context_uuid))return;const U=Object.values(n).find($=>$.context_uuid===N.context_uuid)||r.find($=>$.context_uuid===N.context_uuid);!U||U.status!==Qn.BLOCKED||A.push({id:N.context_uuid,frontendContextUUID:N.frontend_context_uuid,timestamp:E(N.stream_created_at||N.last_query_datetime),item:D(U,N,!0,N.frontend_context_uuid||""),type:"blocked"})}),s.forEach(N=>{const{message:L}=N,U=!t.find(W=>W.context_uuid===L.context_uuid),$=!e.find(W=>W.contextUUID===L.context_uuid),V=!S.find(W=>W.context_uuid===L.context_uuid);if(U&&$&&V&&L.status===Qn.BLOCKED){const W={context_uuid:L.context_uuid,uuid:L.backend_uuid,title:L.query_str||"New task",last_query_datetime:L.updated_datetime||new Date().toISOString(),slug:L.thread_url_slug,display_model:L.display_model,stream_created_at:L.stream_created_at};A.push({id:L.context_uuid,frontendContextUUID:L.frontend_context_uuid,timestamp:E(W.stream_created_at||W.last_query_datetime),item:D(L,W,!0,L.frontend_context_uuid),type:"recently_blocked"})}}),S.forEach(N=>{if(N.status==="PENDING"||N.status==="BLOCKED")return;const L=j.filter(U=>N.context_uuid===U).length>0||!N.unread?"completed-read":"completed-unread";A.push({id:N.uuid,frontendContextUUID:N.frontend_context_uuid,timestamp:E(N.last_query_datetime),item:o.jsx(g0,{title:N.title||f({id:"2hlqlNseec",defaultMessage:"Completed task"}),state:L,firstAnswer:N.first_answer,footer:o.jsx(b,{thread:N,taskUUID:h?.frontendContextUUID===N.frontend_context_uuid?h?.taskUUID:void 0,threadUUID:N.uuid,date:E(N.last_query_datetime)}),isSelected:l===N.frontend_context_uuid,onClick:async()=>{c?.(N.frontend_context_uuid||""),await Promise.all([M(l,N.uuid,N.frontend_context_uuid),O(N.unread&&N.context_uuid?N.context_uuid:void 0)])}},N.uuid),type:L})}),a.forEach(N=>{const{message:L}=N,U=!S.find(V=>V.context_uuid===L.context_uuid),$=!e.find(V=>V.contextUUID===L.context_uuid);if(U&&$&&L.status===Qn.COMPLETED){const V={context_uuid:L.context_uuid,uuid:L.backend_uuid,title:L.query_str||"New task",last_query_datetime:L.updated_datetime||new Date().toISOString(),slug:L.thread_url_slug,display_model:L.display_model,stream_created_at:L.stream_created_at};A.push({id:L.context_uuid,frontendContextUUID:V.frontend_context_uuid,timestamp:E(V.stream_created_at||V.last_query_datetime),item:D(L,V,!1,L.frontend_context_uuid),type:"completed_unread"})}}),{items:A.sort((N,L)=>N.timestamp===null&&L.timestamp===null?0:N.timestamp===null?-1:L.timestamp===null?1:new Date(L.timestamp||"").getTime()-new Date(N.timestamp||"").getTime()).slice(0,Nqt)}},[i,e,t,n,r,s,a,S,E,D,m,f,l,c,b,j,O,M,h]).items,markThreadAsViewed:O,invalidateThreadsQuery:C}},KXt=()=>{const e=hU();return{reconnectInProgressStreams:d.useCallback(async(n,r)=>{if(!n||n.length===0)return;const s=n.filter(i=>i.status==="PENDING"),a=[];for(const i of s)try{const l=await P1({slugOrUUID:i.uuid,reason:"mission-control-get-thread-details"});if(l?.entries?.length&&l.entries.length>0){const c=l.entries[l.entries.length-1];c?.reconnectable&&(e(c.backend_uuid),a.push(c))}}catch(l){ne.debug(l)}r(a)},[e])}},YXt=5e3,iPe=({needsAttentionFilter:e=!1,setNeedsAttentionFilter:t,onNeedsAttentionCountChange:n})=>{const r=Nn(),[s,a]=d.useState(null),i=d.useCallback(async()=>{r.getTaskTabs()},[r]),l=d.useCallback(W=>{r.sendMissionControlStatus({num_threads_active:W.numThreadsActive,num_threads_blocked:W.numThreadsBlocked,num_threads_for_review:W.numThreadsForReview})},[r]),c=_ge(),{activeStreamingThreads:u,entries:f,refreshState:m,recentlyBlockedEntries:p,recentlyCompletedEntries:h,handleStreamCompletion:g,queuedThreadParams:y}=B4(),{data:x=[],isLoading:v}=$H(Tqt,void 0,void 0,!1,void 0),b=d.useMemo(()=>x.filter(W=>W.is_mission_control||W.is_personal_intent),[x]),_=d.useCallback(W=>{a(q=>q===W?null:W);const Q=b.filter(q=>(q.status==="COMPLETED"||q.status==="BLOCKED")&&q.unread&&q.frontend_context_uuid!==W).length>0;t(q=>!Q&&q?!1:q)},[b,t]),w=d.useMemo(()=>b.filter(W=>W.status===Qn.BLOCKED),[b]),C=d.useMemo(()=>b?.filter(W=>W.unread&&W.status!=="PENDING"&&W.status!=="BLOCKED"),[b]),{reconnectInProgressStreams:S}=KXt(),E=hU(),k=d.useRef(!1),[M,j]=d.useState([]),R=d.useRef(null),{sendNotification:O}=l$({windowsAppOnly:!1}),{$t:D}=Z();d.useEffect(()=>bZe({callback:async Q=>{for(const q of Q)if(!q.cometIsMissionControl&&q.isPersonalIntent){const H=await P1({slugOrUUID:q.entryUUID,reason:"mission-control-get-thread-details"});if(H?.entries?.length&&H.entries.length>0){const K=H.entries[H.entries.length-1];K?.reconnectable&&(E(q.entryUUID),c([K]))}}},reason:"stream thread creation events"}),[E,c]),b.length>0&&!k.current&&(k.current=!0,S(b,c).then(()=>{m()}),(async()=>(await Promise.all(w.map(async q=>{try{const H=await P1({slugOrUUID:q.uuid,reason:"mission-control-get-blocked-thread-details"});return H?.entries?.length&&H.entries.length>0?H?.entries[H.entries.length-1]:void 0}catch(H){ne.debug(`Failed to fetch blocked thread details for ${q.uuid}:`,H);return}}))).filter(q=>q!==void 0))().then(Q=>j(Q))),d.useEffect(()=>{const W=()=>{document.hidden||i()};return document.addEventListener("visibilitychange",W),()=>{document.removeEventListener("visibilitychange",W)}},[i]),d.useEffect(()=>(R.current&&clearInterval(R.current),i(),R.current=setInterval(i,1e4),()=>{R.current&&(clearInterval(R.current),R.current=null)}),[i]),d.useEffect(()=>{v||l({numThreadsActive:u.length,numThreadsBlocked:w.length,numThreadsForReview:C.length})},[l,v,u.length,w.length,C.length]);const[P,A]=d.useState(!1);d.useEffect(()=>{const W=setTimeout(()=>{A(!0)},YXt);return()=>clearTimeout(W)},[]);const T=d.useMemo(()=>{const W=b.filter(q=>q.status===Qn.PENDING);return P?!1:W.length>0&&u.length===0||u.filter(q=>!q.frontendContextUUID?.length).length>0},[b,u,P]),{allItems:N,markThreadAsViewed:L}=qXt({activeStreamingThreads:u,blockedThreads:w,entries:f,initiallyLoadedBlockedEntries:M,recentlyBlockedEntries:p,recentlyCompletedEntries:h,queuedThreadParams:y,selectedItemId:s,onItemSelect:_});d.useLayoutEffect(()=>is.on("completed",({message:Q})=>{document.visibilityState!=="visible"&&O({title:"Your background task is completed",body:Q?.thread_title,onClick:async()=>{window.focus(),Q?.frontend_context_uuid&&(a(Q.frontend_context_uuid),L(Q.context_uuid))}}),Q&&(g(Q),Q.frontend_context_uuid===s&&L(Q.context_uuid))}),[g,O,L,s]);const U=d.useMemo(()=>N.filter(W=>W.type==="blocked"||W.type==="recently-blocked"||W.type==="completed-unread"),[N]),$=d.useMemo(()=>N.filter(W=>W.type==="blocked"||W.type==="recently-blocked"||W.type==="completed-unread"||s&&W.frontendContextUUID===s),[N,s]),V=e&&U.length>0?$:N;return d.useEffect(()=>{n?.(U.length)},[U.length,n]),o.jsx(gc,{children:o.jsxs("div",{className:"px-md md:px-lg py-ml space-y-ml",children:[o.jsx(DAe,{placeholder:D({defaultMessage:"Give Comet a task",id:"nNfJMC9ZgK"}),suggestions:N.length===0?[]:OAe}),(P||!v&&!T)&&o.jsx(UAe,{items:V}),!P&&(v||T)&&o.jsx("div",{className:"py-lg text-center",children:o.jsx(F,{variant:"small",color:"light",children:"Loading tasks..."})}),o.jsx("div",{className:"py-md flex w-full items-center justify-center",children:o.jsx(me,{variant:"border",size:"small",text:"View past threads in Library",extraCSS:"!bg-transparent",href:"/library"})})]})})};iPe.displayName="MissionControlMain";const lPe=I.memo(()=>{const[e,t]=d.useState(!1),[n,r]=d.useState(0);return o.jsx("div",{className:"py-lg min-h-0 overflow-auto",children:o.jsxs("div",{className:"m-auto max-w-screen-md",children:[o.jsx(LAe,{needsAttentionFilter:e,onNeedsAttentionFilterChange:t,needsAttentionCount:n}),o.jsx(iPe,{needsAttentionFilter:e,setNeedsAttentionFilter:t,onNeedsAttentionCountChange:r})]})})});lPe.displayName="MissionControlPage";const cPe=I.memo(()=>o.jsx(Zet,{children:o.jsx(kqt,{children:o.jsx(lPe,{})})}));cPe.displayName="MissionControlPageComponent";const QXt=(e,t,n)=>{const r=d.useRef(!1),{submitQuery:s}=Sa(),a=vt(),i=xxe(),{env:{isLocalhost:l}}=Pt();d.useLayoutEffect(()=>{l||(r.current=!1)},[t,l]),d.useLayoutEffect(()=>{const u=new URL(window.location.href).searchParams,f=u.get("copilot"),m=u.get("pro"),p=u.get("q"),h=u.get("utm_source"),g=u.get("in_page"),y=u.get("attachments"),x=u.get("tabs"),v=u.get("nav_suggestions"),b=u.get("sources"),_=u.get("pc"),w=u.get("pt");_&&Fqe(_),w&&Wqe(w);const C=u.get("qabi")??void 0,S=y?.replace(/[[\]]/g,"").split(","),E=u.get("newFrontendContextUUID"),k=[];if(x)try{const M=JSON.parse(x);if(Array.isArray(M))for(const j of M)k.push({type:"tab",id:j,url:""})}catch(M){ne.error("Failed to parse tabsParam:",M)}if(e&&p&&!E&&!r.current){const M=Array.isArray(p)?p[0]:p,j=u.get("source");if(M==="pending")return;s({rawQuery:M,copilotOverride:f==="true"||m==="true"||lye(h??void 0),collection:null,newFrontendContextUUID:crypto.randomUUID(),frontendUUID:t,attachments:S,inPage:g??void 0,promptSource:RYe(j)?j:"user",querySource:"default_search",utmSource:h??void 0,quickActionButtonId:C,isNavSuggestionsDisabled:v==="false",modelPreferenceOverride:le.DEFAULT,shouldRedirectToBackendUUID:!1,mentions:k,sourcesOverride:b?Ivt(b?.split(",")):void 0,shouldUsePageStartTime:!0,onThreadSlugReceived:R=>{a.replace(`/search/${R}`,"Omni search query")}}),r.current=!0,n7e()}},[e,s,t,i,a,n])},xz=I.memo(({children:e})=>{const{results:t}=Ft(),n=d.useMemo(()=>{const r=[];return t.map(s=>{s.widget_data?.map(a=>{vRt(a)&&r.push(a)})}),r},[t]);return o.jsx(bke,{entities:n,children:e})});xz.displayName="ScrollToWidgetWrapper";const XXt=he(async()=>{const{SidePDFViewer:e}=await X(async()=>{const{SidePDFViewer:t}=await import("./SidePDFViewer-CapHtCh8.js");return{SidePDFViewer:t}},__vite__mapDeps([424,1,2,109,5,7,6]));return{default:e}}),ZXt=Dt("FileViewerContext",{openFile:()=>{},closeViewer:()=>{},doViewerAction:()=>{},isViewerOpen:!1,setViewerDispatch:()=>{}}),vz=I.memo(({children:e})=>{const[t,n]=d.useState(),[r,s]=d.useState(),a=d.useRef(void 0),i=d.useCallback(p=>{n(p)},[n]),l=d.useCallback(()=>{n(void 0),s(void 0),a.current=void 0},[n,s]),c=d.useRef([]),u=d.useCallback(p=>{a.current?a.current(p):c.current.push(p)},[]),f=d.useCallback(p=>{s(()=>p),a.current=p,c.current.length>0&&p&&(c.current.forEach(h=>p(h)),c.current=[])},[s]),m=d.useMemo(()=>({openFile:i,closeViewer:l,doViewerAction:u,isViewerOpen:!!r,setViewerDispatch:f}),[i,l,u,r,f]);return o.jsxs(ZXt.Provider,{value:m,children:[e,t&&o.jsx(XXt,{file:t})]})});vz.displayName="FileViewerStateProvider";const JXt=(e,t)=>{const{value:n,loading:r}=jt({flag:"enable-comet-clarifying-commands",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},eZt=(e,t,n)=>{const r=WMe(),{variation:s}=JXt(!1),{addClarification:a}=AW(),{trackEventOnce:i}=Te(),l=n?.length??0,c=n?.filter(g=>g.markdown_block).length??0,u=d.useMemo(()=>{if(!n)return!1;if(t?.display_model==="comet_browser_agent")return!0;const g=n.find(v=>v.intended_usage==="pro_search_steps");if(!g?.plan_block?.steps)return!1;const y=g.plan_block.steps;return y[y.length-1]?.step_type==="ENTROPY_REQUEST"},[n,t?.display_model]),f=d.useMemo(()=>u?s:r?Dr(t?.display_model)===ue.RESEARCH||Dr(t?.display_model)===ue.STUDIO:!1,[r,u,s,t?.display_model]),m=d.useMemo(()=>f&&!t?.reasoning_plan&&l>0&&c===0,[t?.reasoning_plan,l,c,f]),p=d.useMemo(()=>!m||!f||!n?null:{clarificationQuestion:"Add details or clarifications",isDefaultClarification:!0,clarificationCount:0},[m,f,n]),h=d.useCallback((g,y,x)=>{const b={uuid:crypto.randomUUID(),clarification_type:"FREEFORM_CLARIFICATION",freeform_clarification:{text:x.query,question:"Add details or clarifications",attachments:x.attachments??[]}};CZe({entryUUID:g,clarification:b,reason:e}),a({content:b.freeform_clarification?.text??x.query,UUID:b.uuid,entryUUID:g,question:p?.clarificationQuestion??void 0}),p&&i("clarifying query submitted",{entry_uuid:g,context_uuid:y,query:x.query,attachments:x.attachments})},[a,p,e,i]);return{shouldAcceptClarification:m,handleSubmitClarification:h,clarificationData:p}},tZt=({scrollbarSize:e})=>{const[t,n]=d.useState({height:void 0,width:void 0}),r=d.useRef(null);return d.useEffect(()=>{const s=()=>(r.current==null&&(r.current=document.createElement("div"),r.current.classList.add("scrollbar-thin"),r.current.style.width="99px",r.current.style.height="99px",r.current.style.overflow="scroll",r.current.style.position="absolute",r.current.style.top="-9999px",r.current.setAttribute("aria-hidden","true"),r.current.setAttribute("role","presentation")),r.current),a=()=>{const{offsetHeight:c,clientHeight:u,offsetWidth:f,clientWidth:m}=s(),p=c-u,h=f-m;n(g=>{const{height:y,width:x}=g;return y!==p||x!==h?{height:p,width:h}:g})},i=gs(a,100);window.addEventListener("resize",i),document.body.appendChild(s()),a();const l=s();return()=>{i.cancel(),window.removeEventListener("resize",i),document.body.removeChild(l)}},[e]),t},nZt=()=>{const[e,t]=d.useState(!1),[n,r]=d.useState(!1),{scrollContainerRef:s}=ti(),{scrollToListItem:a}=V4(),{resultsLength:i}=Ft(),l=d.useRef(!1),c=d.useCallback(()=>{a(i-1)},[a,i]),u=d.useCallback(()=>{if(!s.current)return;const f=s.current,m=f.scrollHeight>f.clientHeight,p=NM(f),h=i>1;p?l.current=!0:l.current&&(r(!1),l.current=!1),t(m&&!p&&h)},[s,i]);return d.useEffect(()=>{const f=s.current;if(!f)return;const m=gs(u,100);u();const p=setTimeout(u,200);return f.addEventListener("scroll",m),window.addEventListener("resize",m),()=>{f.removeEventListener("scroll",m),window.removeEventListener("resize",m),m.cancel(),clearTimeout(p)}},[s,u]),d.useEffect(()=>{if(i<=1)return;u();const f=setTimeout(u,300);return r(!1),l.current=!1,()=>clearTimeout(f)},[i,u]),d.useMemo(()=>({showScrollButton:e,hasScrolled:n,setHasScrolled:r,scrollToLatestItem:c}),[n,c,e])};function uPe({reason:e}){const t=Co();return d.useCallback(n=>{if(!n)return;const r=t.getState().entries,a=r[n]?.side_by_side_metadata?.sibling_uuid;a?Object.values(r).forEach(i=>{i.side_by_side_metadata?.sibling_uuid===a&&i.status==="PENDING"&&i.backend_uuid&&Su({entryUUID:i.backend_uuid,reason:e})}):Su({entryUUID:n,reason:e})},[t,e])}const rZt=90,dPe=I.memo(({submitWillFork:e})=>{const{$t:t}=Z(),n=vt(),[r,s]=d.useState(!1),{resultsLength:a}=Ft(),{isMobileStyle:i}=xe(),{shouldShowLossAversionModal:l,handleOpenLossAversion:c}=Sx(),u=d.useCallback(()=>{n.push("/")},[n]),f=d.useCallback(h=>{h.preventDefault(),l?c({args:{callback:u,origin:Le.NEW_THREAD_BUTTON}}):u()},[l,c,u]),m=d.useCallback(()=>{s(!0)},[]),p=d.useMemo(()=>a>=rZt&&!r&&!e,[a,r,e]);return o.jsx(Ye,{children:p&&o.jsxs(ve.div,{className:"bg-subtler gap-sm py-sm relative z-0 mx-4 flex items-center justify-between rounded-t-lg px-3 shadow-md",role:"alert",initial:{y:"110%"},animate:{y:0},exit:{y:"110%"},transition:{duration:.4,ease:[.16,1,.3,1]},children:[o.jsxs(F,{color:"light",className:"flex items-center gap-2",children:[o.jsx(de,{icon:af,className:"text-caution shrink-0"}),o.jsx("span",{className:"font-sans text-xs",children:i?o.jsx(ie,{defaultMessage:"Thread too long. Start new one.",id:"wzstV6j0EL"}):o.jsx(ie,{defaultMessage:"Thread is getting long. Start a new one for better answers.",id:"X7d6hUix4z"})})]}),o.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[o.jsx(Me,{variant:"primary",size:"tiny",onClick:f,text:t({defaultMessage:"Start new thread",id:"jsMJO4IUTY"})}),o.jsx(Me,{size:"tiny",onClick:m,pill:!0,icon:kt})]})]},"thread-capacity-warning")})});dPe.displayName="ThreadCapacityWarning";const fPe=I.memo(({showStopButton:e,onStopButtonClick:t,clarificationData:n,upsellInformation:r,idx:s,inFlightEntryUUID:a,inFlight:i,isLastResult:l,initialLayout:c,ref:u,...f})=>{const{currentOpenedModal:m}=xt(),{isMobileUserAgent:p}=xe(),h=!!n?.clarificationQuestion,[g,y]=d.useState(a);return d.useEffect(()=>{a&&y(a)},[a]),o.jsx("div",{className:"w-full",children:o.jsxs(gc,{children:[o.jsx(Qx,{position:"input",idx:s,upsellInformation:r,inFlight:i,isLastResult:l,backendUuid:g,animateExpand:!1}),o.jsx(pw,{hasShadow:!0,isHighlighted:h,showFileUpload:!0,autofocus:m===null&&!p,querySource:f.submitWillFork?"fork":"followup",showStopButton:e,onStopButtonClick:t,initialLayout:c??(p?"compact":"expanded"),minRows:1,className:"bg-base shadow-[0_1px_8px_2px_oklch(var(--foreground-color)/0.1),0_36px_16px_36px_oklch(var(--background-base-color))] dark:shadow-[0_4px_12px_rgba(0,0,0,0.12),0_32px_16px_36px_oklch(var(--dark-background-base-color))]",ref:u,...f})]})})});fPe.displayName="ThreadInput";var lle={};const sZt=({shouldAcceptClarification:e,isMobileUserAgent:t,$t:n})=>n(e?t?{defaultMessage:"Add clarifications...",id:"soiYBiyVWw"}:{defaultMessage:"Add details or clarifications...",id:"RkaMsxpXoz"}:{defaultMessage:"Ask a follow-up",id:"cp9TCskwZG"}),aZt="text-sm !p-0 !pl-sm items-center flex overflow-hidden whitespace-nowrap",Z4=I.memo(({measureRef:e,initialLayout:t,inputRef:n,onSubmitQuery:r,showSources:s=!0,showFileUpload:a=!0,isFixedPosition:i=!1})=>{const l="thread-floating-footer",{$t:c}=Z(),u=uPe({reason:l}),m=Ot()?.get("q"),{inApp:p}=Xo(),h=et(),{inFlightEntry:{backend_uuid:g,blocks:y,context_uuid:x}={},inFlight:v,lastResult:b,resultsLength:_,firstResult:{frontend_context_uuid:w,collection_info:C,parent_info:S}={}}=Ft(),E=y?.length??0,k=Op(),M=w,{activeMode:j}=Vw(),{width:R}=tZt({scrollbarSize:"thin"}),O=!!lle.NEXT_PUBLIC_IS_SIDECAR_BUILD,{mentionTypeaheadOptions:D,onTriggerTypeahead:P}=_T({reason:l,variants:["tab","shortcut"]}),{submitQuery:A}=Sa(),{specialCapabilities:T}=ts(),{showScrollButton:N,hasScrolled:L,setHasScrolled:U,scrollToLatestItem:$}=nZt(),{isMobileUserAgent:V}=xe(),{shouldAcceptClarification:W,handleSubmitClarification:Q,clarificationData:q}=eZt(l,b,y),H=d.useMemo(()=>{try{return v&&E>0}catch(Se){throw ne.error("Unable to parse non-Pro search inFlightEntry.",Se),Se}},[v,E]),K=d.useMemo(()=>b?.upsell_information,[b?.upsell_information]),G=d.useCallback(Se=>{const je=k,ye=bo();g&&W&&(Q(g,x,Se),pe.setUserInput("")),!v&&(A({fork:je,rawQuery:Se.query,copilotOverride:h||T.unlimitedProSearch?void 0:!1,attachments:Se.attachments,collection:C??null,newFrontendContextUUID:je?ye:null,existingFrontendContextUUID:je?void 0:M,promptSource:"user",querySource:"followup",timeFromFirstType:Se.timeFromFirstType,shouldRedirectToBackendUUID:je,...Se.side_by_side_metadata&&{side_by_side_metadata:Se.side_by_side_metadata},mentions:Se.mentions}),r?.())},[k,g,W,v,A,h,C,M,S,r]),ee=iwe({handleSubmitQuery:G,isHomepage:!1,contextUuid:M||"",disableSideBySide:!!S}),Y=d.useRef(!1),te=d.useCallback(Se=>{Y.current||(Y.current=!0,setTimeout(()=>Y.current=!1,E$),ee(Se))},[ee]);d.useEffect(()=>{W&&(Y.current=!1)},[W]);const[se,ae,pe]=M$({onSubmit:te}),fe=d.useCallback(()=>{u(g)},[g,u]);d.useEffect(()=>{m!==null&&m!==""&&pe.setUserInput("")},[m]);const ge=d.useCallback(()=>{$(),U(!0)},[$,U]);return p?null:o.jsx(z,{className:B("erp-sidecar:fixed erp-sidecar:w-full bottom-safeAreaInsetBottom p-md pointer-events-none z-10",i?"fixed":"absolute"),style:O?void 0:{width:`calc(100% - ${R??0}px)`},ref:e,children:o.jsx("div",{className:"max-w-threadContentWidth mx-auto",children:o.jsx("div",{className:"pointer-events-auto",children:Fqt(j)&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"pointer-events-none h-0",children:o.jsx(Ye,{initial:!1,children:N&&!L&&o.jsx(ve.div,{className:"flex justify-center",layout:"position",initial:{opacity:0,y:"0%"},animate:{opacity:1,y:"-100%"},exit:{opacity:0,y:"0%"},transition:{opacity:{duration:.2,ease:"easeInOut"},y:{duration:.2,ease:"easeInOut"}},children:o.jsx(me,{size:"small",variant:"border",icon:Vce,layout:"center",pill:!0,onClick:ge,toolTip:c({defaultMessage:"Scroll to latest",id:"E6r0bc1I6z"}),extraCSS:"!bg-base shadow-subtle mb-2 pointer-events-auto"})},"scroll-button")})}),o.jsx(dPe,{submitWillFork:k}),o.jsx("div",{children:d.createElement(fPe,{...pe,key:"ask-input",value:se,json:ae,isFollowUp:!0,disableSubmission:v&&!W,placeholder:sZt({shouldAcceptClarification:W,isMobileUserAgent:V,$t:c}),placeholderClassName:V&&t!=="expanded"?aZt:void 0,showSources:s,useThreadSources:!0,submitWillFork:k,showStopButton:H,inFlightEntryUUID:g,contextUUID:x,onStopButtonClick:fe,useLexical:!0,mentionTypeaheadOptions:D,onTriggerTypeahead:P,dropdownPlacement:lle.NEXT_PUBLIC_IS_SIDECAR_BUILD?"top":void 0,clarificationData:q??void 0,showSearchModeSelector:!W&&b?.display_model!=="comet_browser_agent",showModelSelector:!W&&!V&&b?.display_model!=="comet_browser_agent",showFileUpload:a&&(!H||W),upsellInformation:K,idx:_-1,inFlight:v,isLastResult:!0,initialLayout:t,ref:n})})]})})})})});Z4.displayName="ThreadFloatingFooter";const oZt=()=>{const e=d.useRef(!1),{results:t,lastResult:n}=Ft(),r=Os(),s=et(),{openVisitorLoginUpsell:a}=or({enabled:!s}),i=k_(n?.upsell_information);d.useEffect(()=>{e.current||r&&t.length>=1&&n&&n.upsell_information?.app_location===Zc.MODAL&&(i(),e.current=!0)},[r,s,a,t.length,n,i])},iZt=()=>{const e=et(),{isMobileUserAgent:t}=xe(),{firstResult:{author_username:n}={}}=Ft(),{openInstallUpsell:r}=che(),{shareGateImpressions:s,actions:a}=In(),i=d.useRef(!1),l=Ot(),c=l?.get("installGate"),u=l?.get("q");d.useEffect(()=>{i.current||e||t&&(!n&&!u||Mg()||CO()||SO()||c==="true"&&(s>=XD||(r({origin:Le.SHARED_THREAD_INSTALL_GATE,sheetModalVariant:"inset-centered-sheet"}),a.setShareGateImpressions(s+1),i.current=!0)))},[a,n,t,u,c,e,r,s])},lZt=()=>{const{device:{isMetaBrowser:e,isIOS:t,isAndroid:n}}=Pt();return d.useCallback(()=>{if(!e||typeof window>"u")return;const s=window.location.href;let a;t?a=s.replace(/^https?:\/\//,"x-safari-https://"):n&&(a=`intent://${s.replace(/^https?:\/\//,"")}#Intent;scheme=https;package=com.android.chrome;end`),a&&pa(a,"Redirecting to native browser")},[e,t,n])},cZt=(e,t)=>e?"full-sheet-blurred":t==="delayed"?"bottom-sheet-gradient":"centered-sheet",uZt=()=>{const{$t:e}=Z(),t=et(),{isMobileUserAgent:n}=xe(),{firstResult:{author_username:r}={}}=Ft(),{openVisitorLoginUpsell:s}=or({enabled:!0}),{shareGateImpressions:a,actions:i}=In(),l=d.useRef(!1),c=Ot(),{scrollContainerRef:u}=ti(),[f,m]=d.useState(!1),p=lZt(),h=c?.get("visitorGate"),g=c?.get("q");d.useEffect(()=>{const y=u.current;if(y)return y.addEventListener("scroll",()=>{m(NM(y))}),()=>{y.removeEventListener("scroll",()=>{m(NM(y))})}},[u]),d.useEffect(()=>{l.current||t||!r&&!g||CO()||SO()||a>=XD||h==="false"||h==="delayed"&&!f||!h&&!(!n&&!g)||(p(),s({origin:Le.SHARED_THREAD_LOGIN_GATE,description:"",title:e({defaultMessage:"Instant answers at your fingertips",id:"NFjQpck2Ql"}),sheetModalVariant:cZt(n,h),overrideMobileVariant:!0}),i.setShareGateImpressions(a+1),l.current=!0)},[n,t,s,e,a,i,f,h,c,r,p,g])};function dZt({entropyBrowser:e,isSidecar:t,scrollContainerRef:n}){const r=Lt(),s=d.useCallback(a=>{n.current&&n.current.scrollTo({top:n.current.scrollHeight,behavior:a})},[n]);d.useEffect(()=>{if(!(!e||!t))return e.subscribeQuickActionButtonFired(()=>{s("smooth")})},[e,t,s]),d.useEffect(()=>{t&&setTimeout(s,0,"instant")},[r,t,s])}var fZt={};const mZt=({reason:e})=>{const{DEFAULT_SOURCES:t}=$_({reason:e}),{setSources:n,setIsCopilot:r,gpt4Limit:s}=ir(),a=Os(),{trackEvent:i}=Te(),{lossAversionStatus:l,setLossAversionStatus:c,unsetLossAversion:u}=o$(),f=et(),{results:m,lastResult:p,firstResult:{author_id:h,author_username:g,context_uuid:y,query_source:x,sources:{sources:v}={}}={}}=Ft(),b=ji(),_=Ot(),w=d.useRef(!1),{pinnedEntryIdx:C,setViewTitle:S}=Vw(),{formatMessage:E}=Z(),{openVisitorLoginUpsell:k}=or({enabled:!f}),{scrollContainerRef:M}=ti(),j=Nn();return uZt(),iZt(),oZt(),dZt({scrollContainerRef:M,isSidecar:!!fZt.NEXT_PUBLIC_IS_SIDECAR_BUILD,entropyBrowser:j}),d.useEffect(()=>{const R=cn.isSourceListType(v)?v:[...t];n(R);const O=m.some(D=>cn.isCopilotMode(D))&&!!s&&s>0;r(O)},[]),d.useEffect(()=>{if(!w.current&&a&&m.length>=1&&p&&cn.isStatusCompleted(p)&&h&&g){const R=_?.get("utm_source")??void 0;i("thread viewed",{authorId:h,authorUsername:g,isThreadCreator:!!b,contextUUID:y,viewSource:R}),y&&ige({contextUUID:y,reason:e}),x==="perplexity_tasks"&&i("task thread viewed",{contextUUID:y}),w.current=!0}},[i,a,h,g,y,p,m.length,_,b,f,k,E,e,x]),d.useEffect(()=>{l!=="cooldown"&&(!f&&!l&&b?c("allowed"):b||u())},[f,l,b,c,u]),d.useEffect(()=>{S(C===-1?null:xW(m[C]?.query_str)??"")},[C,S,m]),vp(()=>{l==="allowed"&&u()}),null},Kun=async({request:e,reason:t})=>{const n=await re.POST("/rest/media/search-videos-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:Ht.MEDIUM}),{media_items:r=[]}=n.data??{};return{media_items:r}},Yun=async({request:e,reason:t})=>{const n=await re.POST("/rest/media/search-images-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,limit:e.limit,page:e.page},timeoutMs:Ht.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},Qun=async({request:e,reason:t})=>{const n=await re.POST("/rest/media/search-images-and-videos",t,{body:{query:e.query,entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:Ht.HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},pZt=async({request:e,reason:t})=>{const n=await re.POST("/rest/media/create-image-for-entry",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token,image_style:e.image_style,custom_instructions:e.custom_instructions},timeoutMs:Ht.EXTREMELY_HIGH}),{media_items:r=[]}=n.data??{};return{media_items:r}},hZt=async({request:e,reason:t})=>{const n=await re.POST("/rest/media/get-image-gen-subject",t,{body:{entry_uuid:e.entry_uuid,read_write_token:e.read_write_token},timeoutMs:Ht.HIGH}),{subject:r=""}=n.data??{};return{subject:r}},gZt=(e,t,n)=>{if(e.backend_uuid!==t)return e;const r=e.blocks??[],s=r.findIndex(u=>u.image_mode_block);if(s===-1)return e;const a=r[s]?.image_mode_block;if(!a)return e;const i=[...r],l=[...n,...a.media_items],c={...a,media_items:l};return i[s]&&(i[s]={...i[s],image_mode_block:c}),{...e,blocks:i}},mPe=({reason:e})=>{const{decrementCreateLimit:t}=ir(),{trackEvent:n}=Te(),{$t:r}=Z(),s=ji(),a=Jo(),i=wge(),{mutate:l}=dt({mutationFn:async u=>{try{return await hZt({request:u,reason:e})}catch(f){return ne.error("Failed to get image generation subject",f),{subject:""}}}}),c=d.useCallback(async({entryUUID:u,imageStyle:f,customInstructions:m=null,setIsLoadingGeneratedImage:p,onSuccessCallback:h,onFailureCallback:g})=>{n("generate image button clicked",{entryUUID:u,queryStr:m??""}),p(!0);try{const y=await pZt({request:{entry_uuid:u,read_write_token:s??null,image_style:f,custom_instructions:m},reason:e}),{media_items:x}=y;i(u,v=>gZt(v,u,x)),t(),h()}catch(y){y instanceof Error&&y.message==="Pro feature"?a({redirectUrl:"",pitchMessage:{title:"Generate DALL-E images with Pro",description:"Upgrade to Pro to generate DALL-E images"},origin:Le.GENERATE_IMAGE}):y instanceof Error&&y.message==="Moderation"?g(r({defaultMessage:"Failed due to moderation. Please try a different query",id:"ChRyieNjo/"})):g(r({defaultMessage:"Failed to generate image",id:"mVJ5f5LkYT"}))}finally{p(!1)}},[n,s,i,t,a,r,e]);return d.useMemo(()=>({onGenerateImageClick:c,getImageGenSubjectMutation:l}),[l,c])},cle=150,ule=500,pPe=I.memo(({entry:e,imageGenSubject:t,setImageGenSubject:n,onSubmit:r})=>{const s="generate-image-custom-input",{$t:a}=Z(),{isMobileStyle:i,isMobileUserAgent:l}=xe(),[c,u]=d.useState(!1),[f,m]=d.useState(""),[p,h]=d.useState(t),{getImageGenSubjectMutation:g}=mPe({reason:s}),y=f.length>0?f+`. The subject is:
`+p:p,x=f.length===0&&p.length===0||f.length>cle||p.length>ule;d.useEffect(()=>{t===""&&(async()=>(u(!0),await g({entry_uuid:e.entryUUID,read_write_token:null},{onSuccess:_=>{n(_.subject),h(_.subject)},onSettled:()=>{u(!1)}})))()},[t,g,e.entryUUID,n]);const v=d.useCallback(()=>r(y),[y,r]);return c?o.jsx(Si,{}):o.jsxs("div",{children:[o.jsx(Wa,{className:"mb-sm",isMobileUserAgent:l,isMobileStyle:i,onChange:m,value:f,label:a({defaultMessage:"Style",id:"7mL9QEUFav"}),placeholder:a({defaultMessage:"Use detailed brush strokes.",id:"FqRwHGXuKd"}),maxLength:cle}),o.jsx(Wa,{isMobileUserAgent:l,isMobileStyle:i,onChange:h,label:a({defaultMessage:"Subject",id:"LLtKhppiyE"}),value:p,maxLength:ule}),o.jsx("div",{className:"mt-md flex",children:o.jsx(me,{text:a({defaultMessage:"Submit",id:"wSZR47Y5kj"}),disabled:x,variant:"primary",onClick:v})})]})});pPe.displayName="GenerateImageCustomInput";var Zh;(function(e){e.PAINTING="PAINTING",e.PHOTOGRAPH="PHOTOGRAPH",e.ILLUSTRATION="ILLUSTRATION",e.DIAGRAM="DIAGRAM"})(Zh||(Zh={}));const x0=I.memo(({icon:e,text:t,onClick:n})=>o.jsxs(z,{variant:"subtler",bgHover:"subtle",className:"flex aspect-video cursor-pointer flex-col items-center justify-center rounded-lg border",onClick:n,children:[o.jsx(de,{icon:e,size:"lg",className:"mb-sm"}),o.jsx(F,{variant:"smallBold",children:t})]}));x0.displayName="StyleChoice";const hPe=I.memo(({onStyleChoiceClick:e})=>{const t=d.useCallback(()=>e(Zh.PAINTING),[e]),n=d.useCallback(()=>e(Zh.PHOTOGRAPH),[e]),r=d.useCallback(()=>e(Zh.ILLUSTRATION),[e]),s=d.useCallback(()=>e(Zh.DIAGRAM),[e]);return o.jsxs(z,{className:"gap-sm grid grid-cols-2",children:[o.jsx(x0,{icon:Tce,onClick:t,text:"Painting"}),o.jsx(x0,{icon:Gk,onClick:n,text:"Photograph"}),o.jsx(x0,{icon:Bk,onClick:r,text:"Illustration"}),o.jsx(x0,{icon:HOe,onClick:s,text:"Diagram"})]})});hPe.displayName="GenerateImageTemplates";const gPe=I.memo(({icon:e,text:t,subtitle:n,onClick:r,hideOnClick:s=!0,disabled:a=!1,...i})=>{const[l,c]=d.useState(!0),u=d.useCallback(()=>{!a&&r&&r(),!a&&s&&c(!1)},[a,s,r]);return l?o.jsx(z,{bgHover:a?void 0:"subtler",className:B("mb-sm px-md py-sm w-full select-none rounded-md border border-dashed",{"cursor-pointer":!a,"opacity-75":a}),onClick:u,...i,children:o.jsxs("div",{className:"gap-sm flex items-center justify-between",children:[o.jsxs(F,{variant:"smallBold",className:"gap-x-sm flex items-center",children:[o.jsx(de,{icon:e,size:"md"}),o.jsxs("div",{children:[o.jsx("div",{children:t}),n&&o.jsx(F,{variant:"tiny",color:"light",children:n})]})]}),o.jsx(F,{color:"super",children:o.jsx(de,{icon:ar})})]})}):null});gPe.displayName="ThreadEntryAccessoryButton";const yPe=I.memo(({icon:e,message:t,variant:n="good",actionList:r,title:s,dismissable:a,onDismiss:i,size:l="regular",pointerVariant:c="none",testId:u,isMobileStyle:f,className:m})=>{const p=r&&r.length>0&&o.jsx("div",{className:"gap-x-sm flex",children:r?.map((y,x)=>y.visible?y.items&&y.items.length>0?o.jsx(nn,{isMobileStyle:f,items:y.items,children:o.jsx(me,{size:Yt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,debounce:y.debounce})},y.text??x):o.jsx("div",{className:"relative flex h-full items-center",children:o.jsx(me,{size:Yt.small,text:y.text,variant:y.variant,icon:y.icon,onClick:y.onClick,toolTip:y.tooltip,tooltipLayout:"bottom",disabled:y.disabled,isLoading:y.isLoading,debounce:y.debounce})},y.text??x):o.jsx(I.Fragment,{},x))}),h=d.useMemo(()=>B({"text-foreground":n==="good","text-caution":n==="warning"}),[n]),g=d.useMemo(()=>{if(n==="good")return"super";if(n==="warning")return"red";if(n==="info")return"textColor"},[n]);return t==null?null:o.jsxs("div",{"data-testid":u,children:[c!=="none"&&o.jsx("div",{className:B("mt-sm px-md flex",{"justify-start":c==="left","justify-end":c==="right"||c==="landing-page-right","pr-[75px]":c==="landing-page-right"}),children:o.jsx("div",{className:"relative h-4 w-6 overflow-hidden",children:o.jsx("div",{className:"bg-subtler size-4 origin-bottom-left rotate-45"})})}),o.jsxs(z,{variant:"subtler",className:B("gap-sm relative flex flex-col items-center justify-between rounded-lg md:flex-row",{"p-sm":l==="small","p-md":l==="regular"},m),children:[a&&o.jsx("div",{className:"right-xs top-xs absolute",children:o.jsx(Me,{"aria-label":"Dismiss",icon:kt,size:"small",onClick:i})}),o.jsx("div",{children:o.jsxs("div",{className:"gap-x-md flex items-center",children:[o.jsx(z,{variant:g,className:"flex size-11 shrink-0 items-center justify-center rounded-full",children:o.jsx(F,{variant:l==="regular"?"baseSemi":"smallBold",color:n==="warning"?"white":"defaultInverted",children:e&&o.jsx(de,{icon:e})})}),o.jsxs("div",{children:[o.jsx(F,{variant:s&&l==="regular"?"baseSemi":"smallBold",className:h,children:s||t}),s&&t&&o.jsx(F,{variant:l==="regular"?"base":"small",children:t})]})]})}),p]})]})});yPe.displayName="Banner";const dle={page:"page-title",section:"section-title",subsection:"baseSemi"},yZt={page:"lg",section:"base",subsection:"md"},xZt=({icon:e,variant:t})=>o.jsx(de,{icon:e,size:yZt[t]}),xPe=I.memo(({title:e,icon:t,subtitle:n,actionList:r,search:s,variant:a="page",noBorder:i=!1,center:l="md",testId:c,isMobileStyle:u,leadingComponent:f,trailingComponent:m})=>{const p=r&&r.length>0&&o.jsx("div",{className:"gap-x-sm flex",children:r?.map((g,y)=>g.visible?g.items&&g.items.length>0?o.jsx(nn,{isMobileStyle:u,items:g.items,children:o.jsx(me,{testId:c,size:g.size??Yt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,debounce:g.debounce})},g.text??y):o.jsx("div",{className:"relative flex h-full items-center",children:o.jsx(Me,{testId:c,size:g.size??Yt.small,text:g.text,variant:g.variant,icon:g.icon,onClick:g.onClick,toolTip:g.tooltip,tooltipLayout:"bottom",disabled:g.disabled,debounce:g.debounce,isLoading:g.isLoading})},g.text??y):o.jsx(I.Fragment,{},y))}),h=o.jsxs("div",{children:[o.jsxs("div",{className:"gap-x-sm flex items-center",children:[t&&o.jsx(F,{variant:dle[a]??"section-title",children:o.jsx(xZt,{icon:t,variant:a})}),o.jsx(F,{variant:dle[a]??"section-title",children:e})]}),n&&o.jsx(F,{variant:a==="page"?"base":"small",color:"light",className:"mt-sm",children:n})]});return o.jsx(z,{variant:"background",className:B({"sticky top-0 z-[5] flex items-center rounded-t-xl":a==="page","border-b":!i,"h-headerHeight":a==="page"&&!s,"pt-md md:pb-md":a==="page"&&s}),children:o.jsx(z,{className:B("w-full",{"px-sm md:px-lg mx-auto max-w-screen-md":a==="page"&&l==="md","max-w-threadWidth px-md md:px-lg mx-auto":a==="page"&&l==="lg"}),children:o.jsxs(z,{variant:"background",className:B("gap-md flex flex-col md:flex-row md:items-center md:justify-between",{"h-14":!s&&a==="section"}),children:[o.jsxs("div",{className:"md:hidden",children:[o.jsxs("div",{className:"gap-xs flex w-full shrink-0 items-center",children:[f,o.jsxs("div",{className:"gap-sm flex w-full justify-between",children:[h,p]})]}),s&&o.jsx("div",{className:"mt-md w-full max-w-md",children:s})]}),o.jsxs("div",{className:"gap-sm hidden grow items-center justify-between md:flex",children:[h,o.jsxs("div",{className:"gap-sm flex grow items-center justify-end",children:[p,s&&o.jsx("div",{className:"max-w-md grow",children:s})]}),m]})]})})})});xPe.displayName="Header";const vPe=I.memo(({userCreateLimit:e,onGenerateClick:t,isDisabled:n,entry:r,btnText:s,buttonComponent:a})=>{const{$t:i}=Z(),[l,c]=d.useState(!1),[u,f]=d.useState(!1),[m,p]=d.useState(""),[h,g]=d.useState(""),y=et(),{hasAccessToProFeatures:x}=St(),{isMobileStyle:v}=xe(),{openVisitorLoginUpsell:b}=or({enabled:!y}),{trackEvent:_}=Te(),w=Jo(),C=x&&e===0,S=x&&e<10;let E=Kce;x?C&&(E=kg):E=jO;const k=d.useCallback(A=>{f(!1),_("generate image style clicked",{entryUUID:r.entryUUID,style:A}),t({style:A,customInstructions:null,onFailure:T=>p(T)})},[r.entryUUID,t,_]),M=d.useCallback(A=>{f(!1),c(!1),t({style:"custom",customInstructions:A,onFailure:T=>p(T)}),_("click image gen custom prompt submit",{prompt:A})},[t,_]),j=d.useCallback(()=>{y?x?f(!0):w({redirectUrl:"",pitchMessage:{title:i({defaultMessage:"Generate images with {pro}",id:"lRrjmenIbD"},{pro:"Pro"}),description:i({defaultMessage:"Visualize your answers with images",id:"mmH7FzyH04"})},origin:Le.GENERATE_IMAGE}):b({title:i({defaultMessage:"Sign in to generate images",id:"rH/ZsL5HtP"}),origin:Le.GENERATE_IMAGE}),_("generate image button clicked",{entryUUID:r.entryUUID,queryStr:r.entryTitle})},[r.entryTitle,r.entryUUID,y,x,b,w,i,_]),R=d.useCallback(()=>c(A=>!A),[]),O=d.useMemo(()=>[{icon:Wce,tooltipLayout:"right",tooltip:i({defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}),pill:!0,visible:!0,variant:l?"primary":"common",onClick:R}],[i,l,R]),D=d.useMemo(()=>o.jsxs("div",{className:"space-y-md p-sm pt-0",children:[o.jsx(xPe,{title:i(l?{defaultMessage:"Custom prompt",id:"zp4jaBPFMA"}:{defaultMessage:"Choose a style",id:"AU4HcqqKpC"}),variant:"section",isMobileStyle:v,actionList:O}),!l&&o.jsx(hPe,{onStyleChoiceClick:k}),l&&o.jsx(pPe,{entry:r,imageGenSubject:h,setImageGenSubject:g,onSubmit:M})]}),[i,k,M,O,r,h,v,l]),P=d.useCallback(()=>{f(!1),c(!1)},[]);return m!==""?o.jsx(yPe,{isMobileStyle:v,message:m,icon:zOe}):o.jsx(HT,{isMobileStyle:v,isOpen:u,onClose:P,content:D,children:o.jsx(bn,{tooltipText:i({defaultMessage:"{remaining} left today",id:"V9HtlcGCOC"},{remaining:e}),tooltipLayout:"bottom",showTooltip:S,asChild:!0,children:a?a({onClick:j,isRateLimitReached:C,isDisabled:n,buttonIcon:E,text:s}):o.jsx(gPe,{text:s,subtitle:C?i({defaultMessage:"Limit reached. Come back soon.",id:"LPlQBHfRcL"}):void 0,disabled:C||n,icon:E,hideOnClick:!1,onClick:j},"imageGenerate")})})});vPe.displayName="GenerateImageButton";const Bi=d.memo(({children:e,id:t})=>{const n={hidden:{opacity:0},visible:{opacity:1}};return o.jsx(ve.div,{className:"relative",variants:n,initial:"hidden",animate:"visible",exit:"hidden",transition:{duration:.1,ease:"easeInOut"},children:e},t)});Bi.displayName="AnswerModeContainer";const vZt=({durationMinutes:e,enabled:t=!0,maxProgress:n=95})=>{const[r,s]=d.useState(2),[a,i]=d.useState(e*60),l=d.useRef(void 0),c=d.useRef(void 0),u=d.useCallback(()=>{if(!t)return;l.current&&clearTimeout(l.current);const f=Math.random()*1500+500;l.current=setTimeout(()=>{const m=Date.now(),p=(m-(c.current??m))/1e3,h=e*60,g=Math.min(p/h*100,n),y=1+Math.random()*2,x=Math.random()*4-2;let v=r+y+x;const b=Math.min(g+10,n);v=Math.min(v,b),v=Math.max(r,Math.min(v,n)),s(v);const _=v/p,C=(n-v)/_,S=Math.max(0,Math.min(C,h-p));i(Math.round(S)),v<n&&u()},f)},[t,e,n,r]);return d.useEffect(()=>{if(!t){s(2),i(e*60);return}return c.current=Date.now(),u(),()=>{l.current&&clearTimeout(l.current)}},[t,e,u]),d.useEffect(()=>{t&&(s(2),i(e*60),c.current=Date.now())},[t,e]),d.useMemo(()=>({percentCompleted:Math.round(r),percentRemaining:Math.round(100-r),estimatedSecondsRemaining:a}),[r,a])},bPe=({researchPlan:e,reasoningPlan:t,blocks:n,hasAnswer:r,isProReasoningMode:s,displayModel:a})=>{const i=t?.goals?.slice(1)??ce,l=a===le.O3_PRO,c=a===le.GPT5_PRO,u=l||c,f=vZt({durationMinutes:5,enabled:u&&!r,maxProgress:95}),m=d.useMemo(()=>!e||r||s&&i.length>0,[e,r,s,i.length]),p=d.useMemo(()=>!t&&!s||!!t?.final,[t,s]),h=r&&p&&m,g=d.useMemo(()=>p?null:t?.goals[t.goals.length-1],[t,p]),y=d.useMemo(()=>{if(u&&!r)return f;let x=0,v=0;if(Array.isArray(n)){for(const _ of n)if(_.intended_usage==="plan"&&_.plan_block){const w=_.plan_block;w.eta_seconds_remaining!==void 0&&(x=w.eta_seconds_remaining),w.pct_complete!==void 0&&(v=w.pct_complete)}}const b=v||2;return{estimatedSecondsRemaining:x,percentCompleted:b,percentRemaining:100-b}},[n,u,r,f]);return d.useMemo(()=>({reasoningGoals:i,isResearchPlanFinished:m,isReasoningPlanFinished:p,isAllPlansFinished:h,activeReasoningGoal:g,...y}),[i,m,p,h,g,y])},uO=I.memo(({onClick:e})=>{const[t,n]=d.useState(!1),r=d.useCallback(()=>{n(!0),e()},[e]),{searchMode:s}=pn(),a=d.useMemo(()=>o.jsx(ie,{defaultMessage:"Skip remaining steps",id:"nWmXYwgk8a"}),[]);return o.jsx(F,{color:"light",variant:"small",className:"text-pretty",children:o.jsx("div",{className:"relative min-h-[20px] w-full",children:t?o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:Ay,children:o.jsx(un,{variant:"super",as:"div",className:"px-sm flex h-6 items-center",children:s===ue.STUDIO?o.jsx(ie,{defaultMessage:"Creating",id:"rQUSqe6JcA"}):o.jsx(ie,{defaultMessage:"Answer",id:"4hkQO/op5u"})})},"skipping-message"):o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:Ay,children:o.jsx(me,{size:"tiny",onClick:r,variant:"common",icon:GOe,extraCSS:B("rounded-lg"),text:a,"data-testid":"labs-skip-remaining-steps-button"})},"skip-button")})})});uO.displayName="FastAnswerButton";const _Pe=I.memo(()=>{const{trackEvent:e}=Te(),{$t:t}=Z(),{permission:n,requestPermission:r}=l$({windowsAppOnly:!1}),s=d.useCallback(async()=>{try{e("permission notifications requested",{origin:"pro_reasoning_status_updater"}),await r()?e("permission notifications granted",{origin:"pro_reasoning_status_updater"}):e("permission notifications not granted",{origin:"pro_reasoning_status_updater"})}catch(i){ne.error("Error requesting notification permission:",i)}},[e,r]),a=Qr(n).with("default",()=>({variant:"primaryGhost",text:t({id:"ipGe+BIJx7",defaultMessage:"Notify me"}),icon:dp})).with("granted",()=>({variant:"border",text:t({id:"V52jNnY+6M",defaultMessage:"Enabled"}),icon:qOe,toolTip:t({id:"ktmy4MhbQv",defaultMessage:"We'll notify you when done."}),extraCSS:"!pointer-events-none border-none !bg-transparent"})).otherwise(()=>({variant:"border",icon:KOe,toolTip:t({id:"D0ozicKDgX",defaultMessage:"Notifications blocked. Please check browser settings."}),extraCSS:"!pointer-events-none border-none !bg-transparent"}));return o.jsx(me,{size:"tiny",onClick:s,...a,extraCSS:B("rounded-lg",a.extraCSS)})});_Pe.displayName="NotificationButton";const wPe=I.memo(({estimatedSecsRemaining:e,placeholderMessage:t="Creating a plan",resultType:n="project"})=>{const{formatNumber:r,formatMessage:s}=Z();return o.jsx(F,{variant:"small",color:"light",className:"text-pretty",children:o.jsx("div",{className:"relative min-h-[20px] w-full",children:o.jsx(Ye,{mode:"sync",initial:!1,children:e?o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:Ay,children:o.jsx(ie,{defaultMessage:"{time} left to gather sources and create your {resultType}.",id:"AhSqF1URDZ",values:{time:o.jsx(F,{inline:!0,variant:"smallBold",as:"span",children:Math.round(e/60)===1?s({defaultMessage:"A minute",id:"X4ic2xRHa2"}):r(Math.round(e/60),{style:"unit",unit:"minute",unitDisplay:"long"})}),resultType:s(n==="project"?{defaultMessage:"project",id:"RbFAl7UGmp"}:{defaultMessage:"report",id:"TmfXGUz23p"})}})},"time-remaining"):o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:Ay,children:o.jsx(un,{variant:"super",as:"span",children:t})},"creating-plan")})})})});wPe.displayName="TimeRemaining";const J4=I.memo(({estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:n,resultType:r,showAnimatePresence:s=!0,wrapperClassName:a="relative min-h-[20px] w-full"})=>{const i=!t||t<95?o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:Ay,children:o.jsx(wPe,{estimatedSecsRemaining:e,placeholderMessage:n,resultType:r})},"time-remaining"):o.jsx(ve.div,{initial:"initial",animate:"animate",exit:"exit",variants:Ay,children:o.jsx(F,{color:"light",variant:"small",className:"text-pretty",children:o.jsx(un,{variant:"super",as:"span",children:o.jsx(ie,{defaultMessage:"Finishing up...",id:"JUr8ErKBCt"})})})},"finishing-message");return s?o.jsx("div",{className:a,children:o.jsx(Ye,{mode:"sync",initial:!1,children:i})}):i});J4.displayName="ProgressMessage";const dO=I.memo(({percentCompleted:e,modelString:t})=>o.jsx("div",{className:"gap-two relative flex w-full flex-col",children:o.jsx(J4,{percentCompleted:e,placeholderMessage:`Reasoning with ${t}`})}));dO.displayName="O3Message";const CPe=I.memo(({percentCompleted:e=1,className:t,showPlayHead:n=!0})=>o.jsx("div",{className:B("pb-xs relative w-full flex-col",t),children:o.jsxs("div",{className:"bg-subtle h-xs relative left-0 top-0 flex w-full rounded-full",children:[o.jsx("div",{className:"bg-super shadow-super/15 left-0 top-0 h-full rounded-full shadow-[0_0_2px_1px] transition-[width] duration-200 ease-in-out",style:{width:`${e}%`}}),n&&o.jsx("div",{className:"bg-super -ml-two -mt-two shadow-super/50 size-sm rounded-full shadow-[0_0_5px_1px,-4px_0_3px_-2px]"})]})}));CPe.displayName="ProgressBar";const SPe=I.memo(({searchMode:e,estimatedSecondsRemaining:t,percentCompleted:n})=>o.jsx("div",{className:"gap-two relative flex w-full flex-col",children:o.jsx(F,{color:"light",variant:"small",className:"text-pretty",children:e===ue.RESEARCH&&o.jsx(J4,{estimatedSecsRemaining:t,percentCompleted:n,placeholderMessage:"It takes a few minutes to gather sources and create your report.",resultType:"report",showAnimatePresence:!1,wrapperClassName:""})})}));SPe.displayName="ResearchMessage";const EPe=I.memo(({estimatedSecsRemaining:e,percentCompleted:t})=>o.jsx("div",{className:"gap-two pb-xs relative flex w-full flex-col",children:o.jsx(J4,{estimatedSecsRemaining:e,percentCompleted:t,placeholderMessage:"Creating a plan"})}));EPe.displayName="StudioMessage";const bz=I.memo(({className:e,style:t,skipSearchEnabled:n,onSkipSearch:r})=>{const{searchMode:s,researchPlan:a,reasoningPlan:i,steps:l,hasAnswer:c,isProReasoningMode:u,result:{backend_uuid:f,blocks:m,display_model:p}}=pn(),{estimatedSecondsRemaining:h,percentCompleted:g,percentRemaining:y}=bPe({researchPlan:a,reasoningPlan:i,blocks:m,hasAnswer:c,isProReasoningMode:u??!1,displayModel:p}),x=Math.min(g,95),v=p===le.O3_PRO,b=p===le.GPT5_PRO,_=v||b,w=s===ue.RESEARCH||s===ue.STUDIO||_,C=l.some(S=>S.step_type==="ENTROPY_REQUEST");return w?o.jsxs(ve.div,{initial:{opacity:0,y:-4},className:e,style:t,animate:{opacity:1,y:0,transition:{ease:Zd,duration:.2,delay:.05}},exit:{opacity:0,y:-4,transition:{ease:Zd,duration:.5}},children:[o.jsxs(z,{variant:"subtler",className:B(_?"py-md rounded-xl border px-6 shadow-sm":"pb-md rounded-xl border px-6 pt-5 shadow-sm","flex flex-col gap-3"),"data-testid":"labs-progress-container",children:[o.jsxs(z,{className:B("gap-sm flex flex-row items-start"),children:[o.jsx("div",{className:"gap-sm pt-two relative flex grow",children:s===ue.RESEARCH?o.jsx(SPe,{searchMode:s,estimatedSecondsRemaining:h,percentCompleted:x}):v?o.jsx(dO,{percentCompleted:x,modelString:"o3-pro"}):b?o.jsx(dO,{percentCompleted:x,modelString:"GPT-5 Pro"}):o.jsx(EPe,{estimatedSecsRemaining:h,percentRemaining:y,percentCompleted:x,backendUuid:f})}),o.jsxs("div",{className:"gap-sm flex items-start","data-testid":"labs-skip-button-container",children:[n&&r&&!_&&o.jsx(uO,{onClick:r}),!_&&o.jsx(_Pe,{})]})]}),o.jsx(CPe,{percentCompleted:x,className:"my-1.5"})]}),o.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]},"progress-banner"):C&&n&&r?o.jsxs("div",{className:e,children:[o.jsx(uO,{onClick:r}),o.jsx("div",{className:"from-base via-base absolute top-full h-5 w-full bg-gradient-to-b from-0% via-[calc(100%_-_12px)] to-transparent to-100% backdrop-blur-[0.25px]"})]}):null});bz.displayName="ProgressBanner";const MPe=d.memo(()=>o.jsxs(un,{className:"gap-md flex flex-col",children:[o.jsx(Q2,{}),o.jsx(Q2,{}),o.jsx(Q2,{})]}));MPe.displayName="AnswerModeLoader";const Q2=d.memo(()=>o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(z,{variant:"subtler",className:"size-32 shrink-0 rounded-md"}),o.jsxs("div",{className:"gap-sm flex w-full flex-col",children:[o.jsx(z,{variant:"subtler",className:"h-4 w-full rounded-full"}),o.jsx(z,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}));Q2.displayName="Item";const kPe=d.memo(()=>{const{searchMode:e,inFlight:t}=pn(),n=e==ue.STUDIO;return o.jsxs("div",{children:[n&&t&&o.jsx(bz,{}),o.jsxs(un,{className:B("gap-md flex",{"max-w-threadContentWidth mx-auto":!n}),children:[n&&o.jsxs("div",{className:"gap-md flex w-[30%] flex-col",children:[o.jsx(z,{variant:"subtler",className:"h-4 w-1/2 rounded-full"}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(z,{variant:"subtler",className:"size-3.5 rounded-full"}),o.jsx(z,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]}),o.jsxs("div",{className:"gap-sm flex",children:[o.jsx(z,{variant:"subtler",className:"size-3.5 rounded-full"}),o.jsx(z,{variant:"subtler",className:"h-4 w-2/3 rounded-full"})]})]}),o.jsxs("div",{className:"gap-sm flex w-[70%] flex-col",children:[o.jsx(z,{variant:"subtler",className:"h-4 w-[70%] rounded-full"}),o.jsx(z,{variant:"subtler",className:"h-4 w-4/5 rounded-full"}),o.jsx(z,{variant:"subtler",className:"h-4 w-1/2 rounded-full"})]})]})]})});kPe.displayName="TasksModeLoader";const _z=I.memo(({...e})=>o.jsx(ve.div,{className:"ml-auto flex items-center",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:o.jsx(Me,{...e,extraCSS:"!py-md [&_*]:!font-regular hover:!bg-subtler shrink-0 whitespace-nowrap rounded-md",size:"tiny"})}));_z.displayName="AnswerModeTabsAccessory";function bZt(){const e=bT(),t=Px(),n=d.useRef(!1);let r,s="",a=!1;try{const i=pn();s=i.result?.uuid??"",r=i.result?.classifier_results,a=i.isEntryInFlight??!1}catch{}d.useEffect(()=>{s&&n.current&&(n.current=!1)},[s]),d.useEffect(()=>{const i=r?.mhe_predictions?.study_intent===!0,l=e(le.STUDY);i&&l&&a&&!n.current&&s&&(n.current=!0,t(le.STUDY,ue.STUDY))},[r,e,t,s,a])}const _Zt=({trackEvent:e,entryUUID:t,frontendContextUUID:n,contextUUID:r})=>d.useCallback((s,a)=>{e(s,{entryUUID:t,frontendContextUUID:n,contextUUID:r,...a})},[t,n,r,e]),wZt=({webResults:e})=>Yo(t=>({isShowing:!1,webResults:e,actions:{hide:()=>t({isShowing:!1}),show:n=>t({...n,isShowing:!0})}})),{Context:CZt,useTrackedState:SZt}=g_("SourcesListContext"),TPe=d.memo(({children:e,webResults:t})=>{const[n]=I.useState(()=>wZt({webResults:t}));return d.useEffect(()=>{n.setState({webResults:t})},[t,n]),o.jsx(CZt.Provider,{value:n,children:e})});TPe.displayName="SourcesListProvider";const EZt=SZt,NPe=({webResults:e,navigationResults:t=[],isStudyMode:n=!1})=>{if(!e)return{dedupedWebResults:[],hasSufficientTrendingRatio:!1,trendingResults:[],trendingResultsWithImages:[]};const r=j3.dedupWebResults(e,t,n),s=r.filter(u=>u.meta_data?.client==="trending"),i=r.slice(0,10).filter(u=>u.meta_data?.client==="trending"),l=i.length>=3,c=i.filter(u=>u.meta_data?.images?.[0]);return{dedupedWebResults:r,hasSufficientTrendingRatio:l,trendingResults:s,trendingResultsWithImages:c}},MZt=({webResults:e,navigationResults:t=[],isStudyMode:n=!1,isMobileStyle:r})=>{if(!r||!e)return!1;const{hasSufficientTrendingRatio:s,trendingResultsWithImages:a}=NPe({webResults:e,navigationResults:t,isStudyMode:n});return s&&a.length>=3},jPe=I.memo(({urlData:e,handleClick:t,showBottomBorder:n=!0,...r})=>{const s=d.useMemo(()=>{const{url:h,snippet:g}=e;if("title"in e){const x=e;return{url:h,title:x.title,snippet:g,domain:x.domain||Xs(h)}}return{url:h,title:e.name,snippet:g,domain:Xs(h)}},[e]),{url:a,title:i,snippet:l,domain:c}=s,u=d.useMemo(()=>c.replace(/^www\./,"").split(".")[0],[c]),f=d.useMemo(()=>__(a),[a]),m=d.useMemo(()=>h=>()=>{},[]),p=t||m;return o.jsx("div",{className:B("p-md border-t-subtlest -mx-4 flex grow flex-col border-t px-4 [&:only-child]:border-0",n&&"last:border-b-subtlest last:border-b"),children:o.jsxs(qe,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:a,target:"_self",onClick:p(a,"primaryLink"),rel:"noopener",...r,children:[o.jsxs("div",{className:"flex h-7 items-center gap-2",children:[o.jsx(ol,{size:28,domain:f,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex w-full min-w-0 flex-col",children:[o.jsx(F,{variant:"small",className:"line-clamp-1",children:u}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1 truncate break-words",children:a})]})]}),o.jsxs("div",{children:[o.jsx(F,{className:"line-clamp-1",variant:"baseSemi",color:"super",children:i}),o.jsx(F,{variant:"small",color:"light",className:"line-clamp-2",children:l})]})]},a)})});jPe.displayName="MobileUrlCard";const Qf={lastEntryUUID:null,loggedUrls:new Set,seenEntries:new Set};function kZt(e){if(e)return[{...e,url:e?.url,title:e?.name,snippet:e?.snippet,sitelinks:e?.sitelinks?.slice(),site_name:e?.meta_data?.domain_name||e?.meta_data?.citation_domain_name}]}const eN=I.memo(({navigationResult:e,trackEvent:t,queryString:n,entryUUID:r,frontendUUID:s,onClick:a,showSiteLinks:i=!1,showNewMobileCard:l=!1,renderPosition:c,clampSnippet:u=!1,showBottomBorder:f=!0,...m})=>{const{url:p,title:h,snippet:g,sitelinks:y,position:x,source:v,client_request_timestamp:b,unstable_server_request_timestamp:_,is_cached:w,is_comet_navigation:C,site_name:S}=e,{isMobileStyle:E}=xe(),k=d.useMemo(()=>__(p),[p]),M=d.useMemo(()=>i8(p),[p]);d.useEffect(()=>{if(!r||!p)return;const R=Qf.seenEntries.has(r);Qf.lastEntryUUID!==r&&(Qf.lastEntryUUID=r,Qf.loggedUrls.clear()),Qf.loggedUrls.has(p)||(Qf.loggedUrls.add(p),Qf.seenEntries.add(r),t("navigational source viewed",{query:n,url:p,title:h,...i&&{subLinks:y},position:x,source:v,is_comet_navigation:C,frontendUUID:s,...typeof b=="number"&&!R&&{renderTimeMs:performance.now()-b},...typeof _=="number"&&!R&&{unstableRenderTimeMs:performance.now()-_},subLinks:y,isCached:w}))},[r,p,n]);const j=d.useCallback((R,O)=>D=>{t("click citation",{source:"navigationalCard",render_position:c,navigationalLinkType:O,citation_url:R,is_comet_navigation:C,frontendUUID:s}),a?.(D)},[C,t,a,s,c]);return E&&l?o.jsx(jPe,{urlData:e,handleClick:j,showBottomBorder:f,...m}):o.jsx("div",{className:"gap-sm flex",children:o.jsx("div",{className:"grow",children:o.jsxs(z,{variant:"transparent",className:"flex grow flex-col rounded-lg",children:[o.jsx(qe,{className:"group flex cursor-pointer items-stretch",href:p,target:"_self",onClick:j(p,"primaryLink"),rel:"noopener",...m,children:o.jsxs(z,{className:"pr-md group",children:[o.jsxs("div",{className:"mb-xs gap-sm flex items-center",children:[o.jsx(ol,{size:28,domain:k,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex flex-col",children:[S&&o.jsx(F,{variant:"tiny",className:"line-clamp-1 break-all leading-[0.875rem]",children:S}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1 break-all leading-[0.875rem]",children:M})]})]}),o.jsxs("div",{className:"flex flex-col",children:[o.jsx(F,{variant:"baseSemi",color:"super",className:"decoration-1 underline-offset-1 group-hover:underline",children:h}),o.jsx(F,{variant:"small",color:"light",className:B("mb-two",`line-clamp-${u?"1":"2"}`),children:g})]})]})},p),y&&y.length>0&&i&&o.jsx(F,{variant:"small",color:"light",className:"pt-two pb-sm",children:o.jsx(Vo,{className:"flex-wrap",children:y.map(R=>o.jsx(An,{id:R.url,children:o.jsx(qe,{className:"group flex cursor-pointer items-stretch",href:R.url,onClick:j(R.url,"siteLink"),rel:"noopener",...m,children:o.jsx(F,{variant:"small",color:"super",className:B("decoration-1 underline-offset-1 group-hover:underline"),children:R.title})})},R.url))})})]})})})});eN.displayName="CitationNavigationalCard";const TZt=({entry:e,webResults:t,showSourcesSidebar:n,submit:r,allowedNavResultsCount:s,isFirstResult:a,enableMobileCalculations:i=!1,...l})=>{const{trackEvent:c}=Te(),{trackEvent:u}=vx(),{openModal:f}=xt(),m=ji(),p=EZt(),{isMobileStyle:h}=xe(),g=d.useMemo(()=>"searchMode"in l&&l.searchMode===ue.SEARCH,[l]),y=d.useMemo(()=>t?.filter(T=>T.is_navigational)?.flatMap(T=>kZt(T)||[]),[t]),{data:x}=Fet(e?.query_str??""),v=d.useMemo(()=>x?.navigation_results?.map(T=>({...T,is_cached:!0}))??y?.map(T=>({...T,is_cached:!1})),[x,y]),b=d.useMemo(()=>v?.slice(0,s),[v,s]),_=b?.length&&a&&!g,w=d.useMemo(()=>cn.isPerplexityMessage(e)?e?.display_model==="pplx_study"||e?.classifier_results?.mhe_predictions?.study_intent:!1,[e]),C=d.useMemo(()=>NPe({webResults:t,navigationResults:b,isStudyMode:w}),[t,b,w]),{dedupedWebResults:S,hasSufficientTrendingRatio:E,trendingResults:k,trendingResultsWithImages:M}=C,j=d.useMemo(()=>!i||!h?[]:M,[i,h,M]),R=d.useMemo(()=>i?h&&E&&M.length>=3:!1,[i,h,E,M.length]),O=d.useMemo(()=>cn.isPerplexityMessage(e)?e?.blocks?.some(T=>T.intended_usage==="answer_media_items"):!1,[e]),D=d.useMemo(()=>!_&&!O&&E,[_,O,E]),P=d.useCallback(()=>{if(e?.backend_uuid){const T=n?"sidebar":"modal";u("click view sources button",{entryUUID:e.backend_uuid,type:p.isShowing?void 0:T})}n?p.actions.show({webResults:t}):f("citationListModal",{webResults:t,entry:e,submit:m?r:void 0})},[e?.backend_uuid,f,m,n,p.isShowing,p.actions.hide,r,u,t?.length]),A=_Zt({trackEvent:c,entryUUID:e?.backend_uuid,frontendContextUUID:e?.uuid,contextUUID:e?.context_uuid});return d.useMemo(()=>({isNavigationalLayout:_,navigationResults:b,trackCitationClickEvent:A,handleViewAllClick:P,dedupedWebResults:S,isTrendingLayout:D,trendingResults:k,trendingResultsWithImages:j,showTrendingInMobile:R}),[S,P,_,D,b,R,A,k,j])},APe=({target:e,entryUUID:t,frontendContextUUID:n,targetVisibilityPortionThreshold:r=.5,hasLLMToken:s})=>{const a=d.useRef(null),i=d.useRef(null),l=d.useRef(!1),{trackEvent:c}=Te(),{result:u}=pn(),f=d.useRef(u);d.useEffect(()=>{f.current=u},[u]);const m=d.useCallback(()=>{if(a.current){const h=Math.round(performance.now()-a.current);c("thread entry exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:h}),a.current=null}if(i.current){const h=f.current;h&&Dr(h.display_model)==ue.STUDIO&&cn.isStatusPending(h)&&c("answer processing exited",{entryUUID:t,frontendContextUUID:n,timeOnEntryMs:Math.round(performance.now()-i.current)}),i.current=null}},[c,t,n]),p=d.useCallback(()=>{s&&(a.current=performance.now()),i.current||(i.current=performance.now())},[s]);return d.useEffect(()=>{const h=new IntersectionObserver(y=>{y.forEach(x=>{l.current=x.isIntersecting,x.isIntersecting&&document.visibilityState==="visible"?p():m()})},{threshold:r}),g=e.current;return g&&h.observe(g),()=>{g&&h.unobserve(g),m()}},[e,r,p,m]),d.useEffect(()=>{const h=()=>{document.visibilityState==="hidden"?m():document.visibilityState==="visible"&&l.current&&p()};return document.addEventListener("visibilitychange",h),()=>{document.removeEventListener("visibilitychange",h)}},[p,m]),d.useEffect(()=>{const h=()=>{l.current&&a.current&&m()};return window.addEventListener("beforeunload",h),()=>{window.removeEventListener("beforeunload",h)}},[m]),null},NZt=(e,t)=>{const{value:n,loading:r}=jt({flag:"show-site-link-snippets",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},IPe=I.memo(({navigationResult:e,trackEvent:t})=>{const{url:n,title:r,snippet:s,domain:a,sitelinks:i=[],site_name:l}=e,c=d.useMemo(()=>(a||Xs(n)).replace(/\.[^.]*$/,""),[a,n]),u=d.useMemo(()=>__(n),[n]),{$t:f}=Z(),m=d.useCallback(p=>{t("click citation",{type:"primaryLink",...e})},[t,e]);return o.jsxs(z,{className:"p-md border-subtler mb-md rounded-xl border",variant:"subtler",children:[o.jsxs(qe,{className:"gap-sm border-t-subtlest group flex cursor-pointer flex-col items-stretch",href:n,target:"_self",onClick:m,rel:"noopener",children:[o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx(ol,{size:28,domain:u,className:"flex-shrink-0 rounded-full"}),o.jsxs("div",{className:"flex w-full min-w-0 flex-col leading-[0.875rem]",children:[o.jsx(F,{variant:"smallBold",className:"line-clamp-1 break-words",children:l??c}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1 truncate break-words leading-[0.875rem]",children:n})]})]}),o.jsx(F,{className:"pt-xs line-clamp-2 break-words",color:"super",variant:"baseSemi",children:r})]}),o.jsx("div",{children:o.jsx(F,{variant:"small",color:"light",className:"line-clamp-2 break-words",children:s})})]},n),o.jsx("div",{className:"mt-sm",children:i.map(p=>o.jsx("div",{className:"border-subtler px-two py-md flex items-center border-t",children:o.jsxs(qe,{href:p.url,className:"flex w-full items-center justify-between",children:[o.jsx(F,{variant:"small",className:"line-clamp-2 leading-none",children:p.title}),o.jsx(F,{variant:"small",color:"light",children:o.jsx(de,{icon:Xn})})]})},p.url))}),o.jsx("div",{className:"mt-sm",children:o.jsx(qe,{href:n,target:"_blank",rel:"noopener",children:o.jsx(me,{variant:"common",fullWidthMobile:!0,text:f({id:"hqHEPnjKO/",defaultMessage:"Visit {domain}"},{domain:$ge(n)})})})})]})});IPe.displayName="MobilePrimaryNavResultCard";const wz=I.memo(({navigationResult:e,trackEvent:t,queryString:n,entryUUID:r,frontendUUID:s})=>{const{isMobileStyle:a}=xe();return a?o.jsx(IPe,{navigationResult:e,trackEvent:t,entryUUID:r,frontendUUID:s}):o.jsx(PPe,{navigationResult:e,trackEvent:t,entryUUID:r,frontendUUID:s,queryString:n})}),RPe=I.memo(({sitelink:e,showSnippet:t,onSiteLinkClick:n})=>{const r=d.useCallback(()=>{n(e.url)},[n,e.url]);return o.jsxs(qe,{href:e.url,target:"_self",className:"py-xs flex h-full flex-col justify-start",onClick:r,children:[o.jsx(F,{variant:"smallBold",className:B("break-words hover:underline",t?"line-clamp-2":"line-clamp-1"),color:"super",children:e.title}),t&&o.jsx(F,{variant:"small",className:"line-clamp-1 break-words",color:"light",children:e?.snippet??""})]})});RPe.displayName="SitelinkItem";const PPe=I.memo(({navigationResult:e,trackEvent:t,entryUUID:n,frontendUUID:r,queryString:s})=>{const{sitelinks:a=ce}=e,{variation:i}=NZt(!1),l=d.useMemo(()=>{if(i)return a;const u=a.length&-2;return a.slice(0,u)},[a,i]),c=d.useCallback(u=>{t("click citation",{source:"navigationalCard",navigationalLinkType:"subLink",citation_url:u,is_comet_navigation:e.is_comet_navigation??!1,frontendUUID:r})},[t,e.is_comet_navigation,r]);return o.jsxs("div",{children:[o.jsx(eN,{navigationResult:e,trackEvent:t,queryString:s,entryUUID:n,frontendUUID:r}),l.length>0&&o.jsx("div",{className:B("gap-x-lg border-subtler pl-md my-sm grid items-stretch border-l",i?"grid-cols-2":"grid-cols-[0.5fr_1fr]"),children:l.map(u=>o.jsx(RPe,{sitelink:u,showSnippet:i,onSiteLinkClick:c},u.url))})]})});PPe.displayName="DesktopPrimaryNavResultCard";wz.displayName="PrimaryNavResultCard";const LPe=(e,t,n)=>{const r=e?.sitelinks??ce;return t===0&&r.length>0},OPe=d.memo(({navResult:e,index:t,isPrimaryCardEnabled:n,trackCitationClickEvent:r,queryStr:s,entryUUID:a,frontendUUID:i,showSiteLinks:l,renderPosition:c,clampSnippet:u,showBottomBorder:f=!0})=>{const{isMobileStyle:m}=xe();return n&&LPe(e,t)?o.jsx(wz,{navigationResult:e,trackEvent:r,queryString:s,entryUUID:a,frontendUUID:i}):o.jsx(eN,{navigationResult:e,trackEvent:r,queryString:s,entryUUID:a,frontendUUID:i,showSiteLinks:l,showNewMobileCard:m,renderPosition:c,clampSnippet:u,showBottomBorder:f})});OPe.displayName="RedesignedNavResultListItem";const DPe=(e,t)=>{const{value:n,loading:r}=jt({flag:"web-site-links-ui",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},jZt=(e,t)=>{const{value:n,loading:r}=Fu({flag:"web-navigation-ui-redesign",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},AZt={"nav-card":!1,"nav-links-bottom-position":!1,"news-carousel":!1,"primary-card":!1},Cz=()=>{const{variation:e,loading:t}=jZt(AZt,{isCometMobile:uf()});return{variation:e,loading:t}},fO=d.memo(({navResults:e,queryStr:t,querySource:n,backendUUID:r,frontendUUID:s,trackCitationClickEvent:a,onMount:i,shouldRenderPrimaryCard:l=!0,renderPosition:c})=>{const{isMobileStyle:u}=xe(),{variation:f,loading:m}=Cz(),p=f["nav-card"],h=typeof f["primary-card"]=="boolean"?f["primary-card"]&&l:!1,{variation:g}=DPe(!1);d.useEffect(()=>{i?.()},[i]);const y=d.useCallback((x,v)=>{a(x,v);const b=n==="default_search",_=v.is_comet_navigation;!(x==="click citation")||!b||!_||cc("web.frontend.omnisearch_nav_results_clicked")},[a,n]);return m?null:p?o.jsx(FPe,{navResults:e,queryStr:t,backendUUID:r,frontendUUID:s,trackCitationClickEvent:y,isPrimaryCardEnabled:h,renderPosition:c}):o.jsx(z,{"data-testid":"old-navigation-list",className:"flex flex-col gap-4",children:e.map((x,v)=>h&&LPe(x,v)?o.jsx(wz,{navigationResult:x,trackEvent:y,queryString:t,entryUUID:r??"",frontendUUID:s},x.url):o.jsx(eN,{navigationResult:x,trackEvent:y,queryString:t,entryUUID:r??"",frontendUUID:s,showSiteLinks:g,showNewMobileCard:!1,renderPosition:c},x.url))})});fO.displayName="NavigationResultList";const IZt=7,FPe=d.memo(({navResults:e,queryStr:t,backendUUID:n,frontendUUID:r,trackCitationClickEvent:s,isPrimaryCardEnabled:a,renderPosition:i})=>{const{trackEvent:l}=Te(),{webResults:c,isEntryInFlight:u}=pn(),{isMobileStyle:f}=xe(),{variation:m}=DPe(!1),{$t:p}=Z(),{updateCurrentMode:h}=W4(),[g,y]=d.useState("none"),x=d.useMemo(()=>j3.dedupWebResults(c,e,!1),[c,e]),v=d.useMemo(()=>e.length<3?[]:x.slice(0,IZt).map((j,R)=>({url:j.url,title:j.name,snippet:j.snippet||"",domain:j.url?new URL(j.url).hostname:void 0,position:e.length+R,source:"default_search",site_name:j.meta_data?.domain_name||j.meta_data?.citation_domain_name||Xs(j.url),is_comet_navigation:!1})),[x,e]),b=d.useMemo(()=>g==="none"?"collapsed":!u&&v.length>0?"expanded":"loading",[g,u,v.length]),_=d.useMemo(()=>b==="collapsed"?e:[...e,...v],[e,v,b]),w=_.length>e.length,C=u?e.length>=3:w?v.length<x.length:v.length>0,S=p(w?{defaultMessage:"See all results",id:"DQlyy2kiD5"}:{defaultMessage:"See more results",id:"N/NQ07tu+u"}),E=d.useCallback(()=>{if(w){l("clicked navigation results see all"),h("sources");return}l("clicked navigation results see more"),y("clicked")},[w,h,l]),k=d.useMemo(()=>o.jsx(de,{icon:Kk,size:"xs"}),[]),M=b==="loading"&&!w;return o.jsxs(z,{"data-testid":"redesigned-navigation-list",className:"relative flex flex-col",children:[o.jsx("div",{className:"flex flex-col sm:gap-4",children:_.map((j,R)=>{const D=R===_.length-1&&e.length===3&&C&&!w;return o.jsx(OPe,{navResult:j,index:R,isPrimaryCardEnabled:a,trackCitationClickEvent:s,queryStr:t,entryUUID:n??"",frontendUUID:r??"",showSiteLinks:m,renderPosition:i,clampSnippet:D,showBottomBorder:!D},j.url)})}),C&&o.jsxs("div",{className:B("pointer-events-none relative",w?"mt-md":f?"mt-[-4.5rem] pt-[36px]":"-mt-9 pt-8"),children:[!w&&o.jsx("div",{className:"via-base/80 to-base pointer-events-none absolute inset-0 bg-gradient-to-b from-transparent"}),o.jsx("div",{className:"relative",children:f?o.jsx("div",{className:"bg-base pointer-events-auto w-full rounded-lg",children:o.jsx(me,{fullWidth:!0,variant:"common",onClick:E,text:S,isLoading:M,testId:"view-more-button",size:"small"})}):o.jsxs("div",{className:"bg-base pointer-events-auto flex items-center",children:[o.jsx(me,{size:"small",variant:"border",onClick:E,text:S,trailingComponent:w?k:void 0,isLoading:M,testId:"view-more-button"}),o.jsx("div",{className:"bg-subtle h-px flex-1"})]})})]})]})});FPe.displayName="RedesignedNavigationResultList";const UPe=()=>{const{results:e}=Ft(),t=d.useMemo(()=>!e||e.length===0?[]:e.map(s=>({result:s,assets:BAe(s?.blocks??[],{orderedByPriority:!0})})),[e]),n=d.useMemo(()=>t.flatMap(({assets:s})=>s),[t]),r=n.length>0;return{resultAssets:t,allAssets:n,hasAssets:r}};function Xun(e,t){let n=e;for(const r of t)n=n.replaceAll(r.old_str,r.new_str);return n}function BPe(e){return!!(e?.asset_type===yn.APP&&e?.app?.transforms&&e.app.transforms.length>0)}function fle(e){return!!(e?.version_info?.parent_artifact_id&&BPe(e)&&!e?.app?.final)}function RZt(e){return!!(e?.version_info?.parent_artifact_id&&BPe(e)&&!e?.app?.final)}function PZt(e,t,n){const{allAssets:r}=UPe();d.useEffect(()=>{if(e?.asset_type!==yn.APP||!e.app)return;const{final:s,source_content:a}=e.app,i=!!a,l=fle(e),c=r.find(m=>m.version_info?.parent_artifact_id===e.version_info?.artifact_id&&fle(m)),u=c&&c.app?.final;let f=null;l||c&&!u?f=wd.Source:s||u?f=wd.Preview:!s&&i&&(f=wd.Source),f&&t!==f&&n({type:"setTab",tab:f})},[e,t,n,r])}function LZt({data:e,inFlight:t,contextUuid:n,backendUuid:r}){const{doCanvasAction:s}=Pp(),{trackEvent:a}=Te(),{results:i}=Ft(),{allAssets:l}=UPe(),c=d.useRef(void 0),u=d.useRef(void 0),f=e.asset,{title:m}=oz(f);d.useEffect(()=>{if(!e.asset||!t)return;const p=e.asset,h=c.current!==p.uuid,g=!u.current&&p.app?.final===!0;if(h||g){const y=e.asset;let x=y,v=r;if(RZt(y)){const b=y.version_info.parent_artifact_id;if(i)for(const _ of i){const w=Dqt(_.blocks,b);if(w){x=w,v=_.backend_uuid;break}}if(x===y){const _=l.find(w=>w.version_info?.artifact_id===b);_&&(x=_)}}s({type:"setAsset",assetUuid:x.uuid,title:m,backendUuid:v}),h&&a("canvas opened",{source:"auto",contextUUID:n,entryUUID:r,contentType:y.asset_type,assetUUID:y.uuid}),c.current=y.uuid,u.current=y.app?.final}},[e.asset,s,t,a,n,r,m,i,l])}function OZt({data:e,inFlight:t}){const{openCanvas:n}=Pp();d.useEffect(()=>{t&&e.should_auto_open&&n()},[t,e.should_auto_open,n])}function DZt({data:e,inFlight:t}){const{doCanvasAction:n}=Pp(),r=d.useRef(void 0);d.useEffect(()=>{if(!t)return;const s={progress:e.progress,assetType:e.expected_asset_type};(r.current?.progress!==s.progress||r.current?.assetType!==s.assetType)&&(n({type:"setLoading",loading:e.progress===kl.IN_PROGRESS,assetType:e.expected_asset_type}),r.current=s)},[e.progress,e.expected_asset_type,n,t])}const FZt=({data:e})=>{const{inFlight:t,result:{context_uuid:n,backend_uuid:r}}=pn(),{doCanvasAction:s,canvasState:a}=Pp();return OZt({data:e,inFlight:t}),DZt({data:e,inFlight:t}),LZt({data:e,inFlight:t,contextUuid:n,backendUuid:r}),PZt(e.asset,a?.activeTab,s),null},UZt=()=>{const{blocksByIntendedUsage:{canvas_mode:e}}=pn();return e?.canvas_block};var BZt={};const $Zt=({hasSources:e,hasFastWidget:t,showAgentWorkflow:n,shouldShowNavResults:r,hasMediaOnlyLayout:s,isMobileStyle:a,isEntryInFlight:i,isMobileTrendingLayout:l})=>d.useMemo(()=>{const c=!!BZt.NEXT_PUBLIC_IS_SIDECAR_BUILD,u=a&&!c,f=e&&!t&&!n&&!r&&!s;return c?{showSourcesAtTop:f,showSourcesAtBottom:!1}:{showSourcesAtTop:f&&!u||f&&l&&u,showSourcesAtBottom:f&&u&&!i&&!l}},[e,t,n,r,s,a,i,l]),$Pe=I.memo(({onClick:e,didSelectAnswer:t,onDismiss:n})=>{const{isMobileStyle:r}=xe(),[s,a]=d.useState(!1),{$t:i}=Z(),l=d.useCallback(()=>{a(!0),n()},[n]);return r||s?null:o.jsx("div",{children:o.jsx(z,{variant:"superLight",className:"p-md gap-sm flex items-center justify-between rounded-md",children:t?o.jsxs("div",{className:"gap-sm flex w-full items-center justify-between",children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[o.jsx(de,{icon:YOe,size:"lg",className:"text-super"}),o.jsx(F,{color:"super",variant:"smallBold",children:i({defaultMessage:"Thank you! Your feedback helps improve answers for everyone.",id:"jfIf25t1OU"})})]}),o.jsx(Me,{variant:"noHover",icon:kt,pill:!0,size:"small",extraCSS:"!text-super",onClick:l})]}):o.jsxs(o.Fragment,{children:[o.jsxs("div",{children:[o.jsx(F,{color:"super",variant:"smallBold",children:i({defaultMessage:"Help improve our product",id:"A7lIeL4dUS"})}),o.jsx(F,{color:"super",variant:"small",children:i({defaultMessage:"We made two versions of this answer. Which do you prefer?",id:"GT2t8+NleA"})})]}),o.jsx(me,{variant:"primary",size:"small",text:i({defaultMessage:"Compare",id:"493J7RI1tF"}),onClick:e})]})})})});$Pe.displayName="AnswerComparisonBanner";const VZt=he(async()=>{const{MarkSpinner:e}=await X(async()=>{const{MarkSpinner:t}=await Promise.resolve().then(()=>jTe);return{MarkSpinner:t}},void 0);return{default:e}}),WZt=I.memo(({title:e,titleIcon:t,titleAccessory:n,titleUrl:r,showPplxMark:s,queryStr:a,loading:i,className:l="mb-sm"})=>{const{trackEvent:c}=Te(),[u,f]=d.useState(!1),m=d.useCallback(()=>{r!=null&&(c("click result entry header",{query:a}),window.open(r,"_blank")?.focus())},[c,a,r]);return o.jsxs("div",{className:B("flex w-full items-center justify-between",l),children:[o.jsx("div",{onClick:m,className:B({"cursor-pointer":r!=null}),children:o.jsxs("div",{color:"super",className:"space-x-sm flex items-center",children:[(s||t)&&o.jsx(F,{variant:"section-title",as:"div",children:s?o.jsx("div",{className:"relative -top-px flex w-[24px] transform-gpu items-center justify-center",onClick:()=>{f(!0),setTimeout(()=>{f(!1)},0)},children:o.jsx(VZt,{size:24,shouldAnimate:i||u})}):t&&o.jsx("div",{className:"w-[24px]",children:o.jsx(de,{icon:t,size:"lg"})})}),o.jsx(F,{variant:"section-title",as:"div",children:e})]})}),n]})});WZt.displayName="ThreadEntryHeader";const VPe=I.memo(({header:e,children:t})=>o.jsxs(z,{children:[e&&o.jsx(z,{variant:"background",className:B("flex","items-center","justify-between"),children:e}),t]}));VPe.displayName="ThreadEntrySection";const HZt=e=>{try{return JSON.parse(e)}catch{return null}},WPe=I.memo(({title:e,description:t,className:n="",role:r,retryFn:s,...a})=>{const{$t:i}=Z(),l=i({defaultMessage:"Please try again later.",id:"EjH+J3uOTD"}),c=d.useMemo(()=>HZt(t??""),[t]);return c&&(console.warn("Tried to pass a JSON error description"),console.warn(c)),o.jsxs("div",{className:`gap-md bg-caution py-sm px-md mt-4 flex items-center rounded-lg text-left font-sans text-white ${n}`,role:"alert",...a,children:[o.jsx(de,{icon:J2}),o.jsxs("div",{className:"flex grow flex-col",children:[o.jsx("p",{className:"font-medium",children:e||i({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}),o.jsx("p",{children:c?l:t})]}),s&&o.jsx(Me,{noXPadding:!0,text:i({defaultMessage:"Try again",id:"FazwRldA7z"}),onClick:s,textClassName:"text-white"})]})});WPe.displayName="QueryError";const Kw=I.memo(({fullWidth:e,retryFn:t,className:n,errorCode:r})=>{const{$t:s}=Z(),a=d.useCallback(()=>{g5("error retry")},[]),i=(()=>{switch(r){case"FETCHER_SSE_OFFLINE_ERROR":return s({defaultMessage:"Unstable internet, check your connection",id:"vbFcV2WAsH"});default:return s({defaultMessage:"Sorry, something went wrong",id:"E2YPKR25ob"})}})();return o.jsx("div",{className:B("max-w-threadContentWidth mx-auto",{"w-full":e},n),children:o.jsx(WPe,{className:B("mx-md md:mx-0",{"bg-super":r==="FETCHER_SSE_OFFLINE_ERROR"}),title:i,retryFn:t??a})})});Kw.displayName="QueryErrorFallback";const Sz=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"chatify-threads",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])};var zZt={};const GZt=he(async()=>{const{ConnectorAuthorizationPrompt:e}=await X(async()=>{const{ConnectorAuthorizationPrompt:t}=await import("./ConnectorAuthorizationPrompt-y2Ew-Dfv.js");return{ConnectorAuthorizationPrompt:t}},__vite__mapDeps([425,1,2,5,7,6]));return{default:e}}),qZt=he(async()=>{const{AgentWorkflow:e}=await X(async()=>{const{AgentWorkflow:t}=await import("./AgentWorkflow-CCAIMyPW.js");return{AgentWorkflow:t}},__vite__mapDeps([426,1,2,5,6,427,17,7,18,19]));return{default:e}}),KZt=he(async()=>{const{ThreadEntryFooter:e}=await X(async()=>{const{ThreadEntryFooter:t}=await import("./ThreadEntryFooter-DyM9ek3q.js");return{ThreadEntryFooter:t}},__vite__mapDeps([428,1,2,5,429,6,7,430,110,427,17,18,19,431,39,432,433,434,435,436,23,437,438,439,440,441,442]));return{default:e}}),YZt=he(async()=>{const{RelatedContent:e}=await X(async()=>{const{RelatedContent:t}=await import("./Related-d2Q-3iyw.js");return{RelatedContent:t}},__vite__mapDeps([443,1,2,5,444,445,44,45,6,446,442,7]));return{default:e}}),QZt=he(async()=>{const{StudyModeRelated:e}=await X(async()=>{const{StudyModeRelated:t}=await import("./StudyModeRelated-BD_Pfrad.js");return{StudyModeRelated:t}},__vite__mapDeps([447,1,2,5,445,44,45,6,7]));return{default:e}}),XZt=he(async()=>{const{MapsPreview:e}=await X(async()=>{const{MapsPreview:t}=await import("./MapsPreview-B90YdoaX.js");return{MapsPreview:t}},__vite__mapDeps([448,1,2,5,32,7,6]));return{default:e}}),ZZt=he(async()=>{const{ThreadContentResponse:e}=await X(async()=>{const{ThreadContentResponse:t}=await import("./ThreadContentResponse-X168Xfmg.js");return{ThreadContentResponse:t}},__vite__mapDeps([449,1,2,5,47,430,110,6,7,427,17,18,19,431,39,432,433,434,435,436,23,437,438,439,440,441,450]));return{default:e}}),JZt=he(async()=>{const{SourcesModePreviewRow:e}=await X(async()=>{const{SourcesModePreviewRow:t}=await import("./SourcesModePreview-Cw2C7Dff.js");return{SourcesModePreviewRow:t}},__vite__mapDeps([451,1,2,46,5,47,6,7]));return{default:e}}),eJt=he(async()=>X(()=>import("./AnswerComparisonModal-CijcNFFL.js"),__vite__mapDeps([452,1,2,5,449,47,430,110,6,7,427,17,18,19,431,39,432,433,434,435,436,23,437,438,439,440,441,450,116]))),tJt=he(async()=>{const{MobileCitationList:e}=await X(async()=>{const{MobileCitationList:t}=await import("./MobileCitationList-Dibo4DHF.js");return{MobileCitationList:t}},__vite__mapDeps([453,1,2,7,6,5]));return{default:e}}),HPe=I.memo(({submitQuery:e,shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,deleteLastResult:s,setQuote:a,shouldShowNavResults:i,shouldShowRelatedContent:l=!0,sbsEntriesGroup:c,bottomNavResults:u,autoScroll:f=!0})=>{const m="thread-content",{$t:p}=Z(),{isMobileStyle:h}=xe(),{trackEvent:g}=Te(),{session:y}=mt(),{removeWidgetFromEntry:x}=Uw({reason:m}),{result:v,widgetData:b,isEntryInFlight:_,response:w,hasLLMToken:C,isAnswerSkipped:S,steps:E,isPending:k,hasMediaOnlyLayout:M,showAgentWorkflow:j,isFinalStep:R,sportsWidgetData:O,weatherWidgetData:D,timeWidgetData:P,timerWidgetData:A,calculatorWidgetData:T,currencyExchangeWidgetData:N,flightStatusWidgetData:L,genericFallbackWidgetData:U,highPriorityWidgets:$,lowPriorityWidgets:V,taskWidgetData:W,hasFastWidget:Q,isLastResult:q,idx:H,hasAnswer:K,hasSources:G,hasWebResults:ee,mapsPreviewData:Y,isFirstResult:te}=pn(),{variation:se}=Sz(!1),{variation:ae,loading:pe}=Cz(),fe=d.useMemo(()=>zZt.NEXT_PUBLIC_IS_SIDECAR_BUILD||!ae["news-carousel"]||_?!1:MZt({webResults:w?.web_results,navigationResults:void 0,isStudyMode:v?.display_model==="pplx_study"||v?.classifier_results?.mhe_predictions?.study_intent,isMobileStyle:h}),[_,w?.web_results,v?.display_model,v?.classifier_results?.mhe_predictions?.study_intent,h,ae]),ge=Op(),Se=Eet(),je=n3(),ye=zAe(),be=d.useRef(null),Ne=d.useMemo(()=>{const ht=v?.side_by_side_metadata?.selection_status;return ht===Ki.SELECTED||ht===Ki.TIE},[v?.side_by_side_metadata?.selection_status]),ke=d.useMemo(()=>c.length<1?[]:[...c].sort((ht,Ur)=>ht.backend_uuid.slice(-8).localeCompare(Ur.backend_uuid.slice(-8),void 0,{sensitivity:"base"})),[c]),{trackJudgment:Ie,trackBannerExposure:Ce,trackSBSExposure:Ge}=a0t({results:ke,session:y,trackEvent:g}),tt=d.useMemo(()=>{const ht=v?.side_by_side_metadata?.sibling_uuid;return ht?De.getItem(`sbs-banner-dismissed-${ht}`)==="true":!1},[v?.side_by_side_metadata?.sibling_uuid]),gt=d.useMemo(()=>c.length>1,[c]),Ee=d.useMemo(()=>v?.side_by_side_metadata?.sibling_uuid,[v]),Re=d.useMemo(()=>v?.display_model==="pplx_study"||v?.classifier_results?.mhe_predictions?.study_intent,[v?.display_model,v?.classifier_results?.mhe_predictions?.study_intent]),Vt=d.useMemo(()=>ye?!tt&&(Ne||gt&&K):!1,[tt,ye,gt,Ne,K]),pt=d.useCallback(()=>{Ee&&De.setItem(`sbs-banner-dismissed-${Ee}`,"true")},[Ee]);d.useEffect(()=>{Vt&&Ce()},[Vt,Ce]);const[Nt,Ke]=d.useState(!1),He=d.useMemo(()=>ke.map(ht=>cn.parseAskTextField(ht)??void 0).filter(ht=>ht!==void 0),[ke]),Tt=d.useCallback(async ht=>{try{Ie(ht);const Ur=ke[0]?.side_by_side_metadata?.sibling_uuid;await x0t(ht,ke,Ur,je),Ke(!1)}catch(Ur){ne.error("Failed to process answer selection:",Ur)}},[ke,je,Ie]),We=d.useCallback(()=>{Ke(!0),Ge()},[Ge]),_t=d.useMemo(()=>c.some(ht=>cn.isStatusPending(ht)),[c]),Kt=d.useMemo(()=>{if(!v?.query_str)return"";const{actualQuery:ht}=qd(v.query_str);return ht||""},[v?.query_str]),en=d.useCallback(()=>Ke(!1),[]),{standardWidgetData:Rt,codeInterpreterImages:Ut}=b.reduce((ht,Ur)=>(Ur.is_code_interpreter&&Ur.is_image?ht.codeInterpreterImages.push(Ur):ht.standardWidgetData.push(Ur),ht),{standardWidgetData:[],codeInterpreterImages:[]}),Rn=d.useMemo(()=>Ut.length>0,[Ut]),rn=d.useMemo(()=>!Rn&&Rt.length>0,[Rn,Rt]),at=d.useMemo(()=>!h,[h]),yt=d.useCallback(ht=>{v?.frontend_context_uuid&&v?.backend_uuid&&(x({entryUUID:v.backend_uuid,data:ht}),g("remove widget",{url:"url"in ht?ht.url:ht?.links?.[0]?.url??"",entryUUID:v.backend_uuid,source:"thread"}))},[x,v.backend_uuid,g,v.frontend_context_uuid]),wt=d.useCallback((ht,Ur,_l,Zu,Fs)=>{const Pc=Fs||("url"in ht?ht.url:ht?.links?.[0]?.url??"");return o.jsx(Zje,{data:ht,submit:e,isReadonly:Ur,menuItems:Ur||_?[]:[{type:"default",text:p({defaultMessage:"Report",id:"x5Tz6MZH82"}),icon:eE,onClick:()=>_l&&_l(ht)}],inFlight:_,entryUUID:v?.backend_uuid??null,tableCitationOffset:Zu},Pc)},[_,e,p,v?.backend_uuid]),Mt=d.useCallback((ht,Ur,_l)=>{const Zu={name:`${Ur}-widget`,snippet:"",timestamp:"",url:"",meta_data:ht,is_attachment:!1,is_image:!1,is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!0,sitelinks:[],inline_entity_id:""};return wt(Zu,ge,yt,w?.web_results?.length,_l)},[yt,ge,w?.web_results?.length,wt]),bt=d.useCallback(ht=>wt(ht,ge,yt,w?.web_results?.length),[yt,ge,w?.web_results?.length,wt]),_e=d.useCallback(ht=>Mt(ht,"sports"),[Mt]),ze=d.useCallback(ht=>Mt(ht,"weather"),[Mt]),Oe=d.useCallback(ht=>Mt(ht,"time"),[Mt]),nt=d.useCallback(ht=>Mt(ht,"timer"),[Mt]),Xe=d.useCallback(ht=>Mt(ht,"currency_exchange"),[Mt]),It=d.useCallback(ht=>Mt(ht,"calculator"),[Mt]),_n=d.useCallback(ht=>Mt(ht,"flight-status"),[Mt]),zn=d.useCallback(ht=>Mt(ht,"task","task"),[Mt]),Mn=d.useCallback(ht=>Mt(ht,"generic-fallback"),[Mt]),Cr=d.useRef(null),{hasAccessToProFeatures:Xa}=St();APe({entryUUID:v?.backend_uuid??"",target:Cr,targetVisibilityPortionThreshold:.3,frontendContextUUID:v?.frontend_context_uuid??"",hasLLMToken:C});const ri=Nn(),{showSourcesAtTop:Yu,showSourcesAtBottom:Bp}=$Zt({hasSources:G,hasFastWidget:Q,showAgentWorkflow:j,shouldShowNavResults:i,hasMediaOnlyLayout:M,isMobileStyle:h,isEntryInFlight:_,isMobileTrendingLayout:fe}),Qu=UZt(),$p=bge(v?.frontend_uuid),Mf=Tet(v?.backend_uuid),kf=cn.isStatusFailed(v),Jx=kf&&v.reconnectable&&$p;d.useEffect(()=>{ri.maybeSendSearchResult(w,E,k)},[k,ee,w,ri,E]);const Za=d.useCallback(()=>{Se(v.backend_uuid??"")},[v.backend_uuid,Se]),Xu=d.useMemo(()=>I.memo(()=>{throw new KU("STREAM_FAILED_CHUNK_ERROR")}),[]),si=d.useMemo(()=>()=>o.jsx(Kw,{retryFn:Za,errorCode:Mf?.code}),[Za,Mf?.code]),ev=l&&!Re&&(!se||q);return o.jsxs(o.Fragment,{children:[Vt&&o.jsx($Pe,{onClick:We,didSelectAnswer:Ne,onDismiss:pt}),v?.connector_auth_info&&o.jsx(GZt,{connectorAuthInfo:v.connector_auth_info,isLastResult:q,backendUuid:v?.backend_uuid,inFlight:_}),Yu&&!pe&&(!se||te)&&o.jsx(JZt,{}),j&&!S&&o.jsx(qZt,{autoScroll:q&&f}),Qu&&_&&o.jsx(FZt,{data:Qu}),o.jsxs("div",{className:"gap-y-lg mt-3 flex flex-col first:mt-0",children:[(M||S||!j&&(R||Q))&&o.jsx(VPe,{children:o.jsxs("div",{className:"gap-y-sm md:gap-y-md flex flex-col",children:[Rn&&Ut.map(ht=>o.jsx("div",{children:wt(ht,ge)},ht.url)),rn&&$.map(bt),U&&Mn(U),D&&ze(D),P&&Oe(P),A&&nt(A),N&&Xe(N),T&&It(T),L&&_n(L),O&&_e(O),rn&&V.map(bt),Y&&Y.place_widgets.length>0&&o.jsx(XZt,{placeWidgets:Y.place_widgets}),o.jsx(ZZt,{submitQuery:e,setQuote:a,markdownRef:be}),Xa&&ye&&W&&zn(W),Bp&&!pe&&(!se||te)&&o.jsx(tJt,{webResults:w?.web_results??jfe}),o.jsx(KZt,{submitQuery:e,deleteLastResult:s,showSourcesSidebar:at,markdownRef:be}),u&&o.jsxs(o.Fragment,{children:[!h&&o.jsx("div",{className:"pb-sm border-b",children:o.jsx(F,{variant:"section-title",as:"div",children:p({defaultMessage:"Results",id:"yaMHMBMsQ7"})})}),u]}),o.jsx(ho,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:o.jsx(Qx,{position:"bottom",idx:H,upsellInformation:v?.upsell_information,backendUuid:v?.backend_uuid,isLastResult:q,inFlight:_})})]})}),kf&&!Jx&&o.jsx(Nr,{fallback:si,children:o.jsx(Xu,{})}),ev&&o.jsx(YZt,{shouldShowProductFeedback:t,feedbackEntryUUID:n,shouldShowRecruitmentBanner:r,submitQuery:e}),Re&&o.jsx(QZt,{onClick:e})]}),gt&&o.jsx(eJt,{isOpen:Nt,onClose:en,responses:He,queryStr:Kt,onSelectAnswer:Tt,isAnyEntryPending:_t})]})});HPe.displayName="LowerPriorityThreadContent";const nJt=e=>{const{result:{classifier_results:t,query_source:n}}=pn(),r=G5e(),{classifierResults:s}=Hr(),a=t,i=typeof a<"u",l=s[e],c=typeof l<"u",u=n==="default_search";return d.useEffect(()=>{u&&(i&&r("web.frontend.browser.mhe_loaded_ms"),c&&r("web.frontend.browser.mhe_extension_loaded_ms"))},[i,c,u,r]),l??a},rJt=e=>{if(!e)return"hidden";const t=e.mhe_predictions;return t?.nav_intent?"top":e.personal_search||e.image_generation||t?.personal_search||t?.skip_search||t?.image_generation_intent||t?.time_widget||t?.weather_widget||t?.calculator_widget?"hidden":t?.sports_intent||t?.places_search_intent||t?.shopping_intent||t?.movie_lists_intent||t?.finance_widget_gating||e.widget_type==="FINANCE"?"bottom":"top"},sJt=({classifierResults:e,resultStatus:t})=>{const n=typeof e>"u",{variation:r,loading:s}=Cz(),a=dn()&&!!r["nav-links-bottom-position"],i=a?rJt(e):"top",l=d.useMemo(()=>n||Object.keys(e??{}).length===0&&t==="COMPLETED"||s?!0:a?i==="hidden":!!(e?.personal_search||e?.skip_search||e?.hide_nav||e?.image_generation||e?.time_widget),[a,i,n,e,t,s]),c=d.useMemo(()=>!n,[n]),u=d.useMemo(()=>a?i:"top",[a,i]);return d.useMemo(()=>({shouldHideNavResults:l,classificationsLoaded:c,navResultsPosition:u}),[l,c,u])};var aJt={};const mle=3,oJt=he(async()=>{const{ThreadEntryDebugTiming:e}=await X(async()=>{const{ThreadEntryDebugTiming:t}=await import("./ThreadEntryDebugTiming-CMNNst1X.js");return{ThreadEntryDebugTiming:t}},__vite__mapDeps([454,1,2,5,96,6,7,97]));return{default:e}},{restricted:!0}),zPe=I.memo(({sbsEntriesGroup:e,submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:i})=>{const{isMobileStyle:l}=xe(),c=ot(),u=G5e(),{isEntryInFlight:f,result:m,response:p,hasLLMToken:h,searchMode:g,isFirstResult:y,webResults:x,steps:v,isPending:b,actions:{handleSourcesCuration:_}}=pn();bZt();const w=xxe(),C=d.useMemo(()=>{if(!m?.query_str)return"";const{actualQuery:pe}=qd(m.query_str);return pe||""},[m?.query_str]),S=d.useMemo(()=>!l,[l]),E=d.useRef(null);APe({entryUUID:m?.backend_uuid??"",target:E,targetVisibilityPortionThreshold:.3,frontendContextUUID:m?.frontend_context_uuid??"",hasLLMToken:h});const{trackCitationClickEvent:k,navigationResults:M}=TZt({allowedNavResultsCount:mle,entry:m,webResults:x,showSourcesSidebar:S,submit:_,searchMode:g,isFirstResult:y}),j=dn(),{openModal:R}=xt(),O=Nn(),{navigationResults:D}=Hr(),P=m?.frontend_uuid,A=D[P??""]??ce,T=bge(P),N=nJt(P??""),L=d.useMemo(()=>A.length>0,[A]),U=d.useMemo(()=>j&&(A.length||T)?A:M||ce,[j,A,M,T]),$=d.useMemo(()=>U?{serverRequestTimestamp:c.getQueryData(["serverRequestTimestamp",m?.query_str??void 0,m?.uuid??void 0])}:{serverRequestTimestamp:void 0},[c,m?.query_str,U,m?.uuid]),V=d.useMemo(()=>U?.slice(0,Math.max(mle,A?.length??0))?.map((pe,fe)=>({...pe,position:fe,source:$.serverRequestTimestamp?"default_search":"client_search",client_request_timestamp:w(),unstable_server_request_timestamp:$.serverRequestTimestamp||void 0,sitelinks:pe.sitelinks?.map((ge,Se)=>({url:ge.url,title:ge.title,position:Se,snippet:ge?.snippet??""})),is_comet_navigation:L})),[w,U,A?.length,$.serverRequestTimestamp,L]),W=d.useMemo(()=>!!x&&x.length>0,[x]),Q=d.useMemo(()=>m?.search_focus==="writing",[m?.search_focus]),q=d.useMemo(()=>m?.display_model==="pplx_study"||N?.mhe_predictions?.study_intent,[m?.display_model,N?.mhe_predictions?.study_intent]),{shouldHideNavResults:H,navResultsPosition:K}=sJt({classifierResults:N,resultStatus:m?.status??""}),G=d.useMemo(()=>!aJt.NEXT_PUBLIC_IS_SIDECAR_BUILD&&!H&&V&&V.length>0&&m.attachments?.length===0&&!Q&&g===ue.SEARCH&&!q,[H,V,m.attachments?.length,Q,g,q]),ee=d.useMemo(()=>G&&K==="top",[G,K]),Y=d.useMemo(()=>G&&K==="bottom"&&!f,[G,K,f]);d.useEffect(()=>{O.maybeSendSearchResult(p,v,b)},[b,W,p,O,v]);const te=d.useCallback(()=>{L&&(m?.query_source==="default_search"?u("web.frontend.omnisearch_nav_results_shown",{omnisearch:w()!==0}):u("web.frontend.nav_results_shown"))},[L,m?.query_source,u,w]),se=d.useMemo(()=>Y?o.jsx(fO,{shouldRenderPrimaryCard:!1,navResults:V,queryStr:C,querySource:m?.query_source,backendUUID:m?.backend_uuid,frontendUUID:m?.frontend_uuid,trackCitationClickEvent:k,onMount:te,renderPosition:"bottom"}):null,[Y,V,C,m?.query_source,m?.backend_uuid,m?.frontend_uuid,k,te]),ae=d.useCallback(()=>{R("bugReportModal",null)},[R]);return o.jsxs("div",{className:"gap-y-sm flex flex-col",ref:E,children:[o.jsx(oJt,{backend_uuid:m?.backend_uuid,onBugReportClick:ae}),ee&&o.jsx(fO,{navResults:V,queryStr:C,querySource:m?.query_source,backendUUID:m?.backend_uuid,frontendUUID:m?.frontend_uuid,trackCitationClickEvent:k,onMount:te}),o.jsx(HPe,{submitQuery:t,shouldShowProductFeedback:n,feedbackEntryUUID:r,shouldShowRecruitmentBanner:s,deleteLastResult:a,setQuote:i,shouldShowNavResults:G,sbsEntriesGroup:e,bottomNavResults:se,autoScroll:!ee})]})});zPe.displayName="ThreadContent";const iJt=({hasPendingFiles:e,attachments:t=ce,attachment_processing_progress:n=ce})=>{const{$t:r}=Z(),s=d.useMemo(()=>e?[{description:r({defaultMessage:"Processing attachments...",id:"nCVqMMwJ07"}),final:!1,id:"pending-files-goal",steps:[{step_type:"PENDING_FILES",content:{attachments:t,attachmentProcessingProgress:n},uuid:"pending-files-step"}]}]:[],[r,n,t,e]),a=d.useMemo(()=>!e||n.some(l=>l.file_url==="end"),[n,e]),i=d.useMemo(()=>a?null:s.length>0?s[0]:null,[a,s]);return d.useMemo(()=>({pendingFilesGoals:s,activePendingFileGoal:i,isFileProcessingDone:a}),[s,i,a])},lJt=({isAllPlansFinished:e,researchPlan:t,reasoningGoals:n,isStudio:r,hasPendingFiles:s,displayModel:a})=>{const i=d.useMemo(()=>a===le.O3_PRO||a===le.GPT5_PRO||r?!1:!(e||t||n.length>0||s),[a,r,e,t,n.length,s]);return d.useMemo(()=>({shouldShowPlaceholderGoal:i}),[i])},cJt=e=>{if(e.step_type!=="COMET_AGENT_TOOL_INPUT")return"";const t=e.content.tool_input;return t?.todo_write?"":t?.computer?.action?t.computer.action:Object.keys(t??{})[0]??""},ple=e=>{const t=[];let n=[],r="";for(const s of e)if(s.step_type==="COMET_AGENT_TOOL_INPUT"){const a=cJt(s);n.length===0&&a&&(r=s.uuid),a&&n.push(a)}else n.length>0&&(t.push({step_type:"COMET_AGENT_ACTIONS",content:{actions:n},uuid:r}),n=[],r=""),t.push(s);return n.length>0&&t.push({step_type:"COMET_AGENT_ACTIONS",content:{actions:n},uuid:r}),t},uJt=({researchPlan:e,steps:t,searchMode:n,isResearchPlanFinished:r,backendUUID:s})=>{const a=n===ue.RESEARCH,i=n===ue.STUDIO,l=dJt({backendUUID:s,steps:t,isResearchPlanFinished:r}),c=d.useMemo(()=>{if(!e)return{};if(e.goals.length===1){const m=e.goals[0];if(!m)return{};const p=t.filter(h=>h.step_type!=="INITIAL_QUERY"&&h.step_type!=="TERMINATE");return{[m.id]:{...m,steps:ple(p)}}}return e.goals.reduce((m,p)=>{const h=t.filter(y=>"goal_id"in y.content?y.content.goal_id===p.id&&y.step_type!=="INITIAL_QUERY"&&y.step_type!=="TERMINATE":!1),g={...p,steps:ple(h)};return m[g.id]=g,m},{})},[e,t]),u=d.useMemo(()=>{const m=Object.keys(c);if(m.length===0)return null;const p=t.at(-1),h=m.at(-1);return h?((a||i)&&p?.step_type!=="TERMINATE",c[h]):null},[c,t,a,i]),f=d.useMemo(()=>[...Object.values(c),...l],[c,l]);return d.useMemo(()=>({activeResearchGoal:u,researchGoals:f}),[u,f])},dJt=({backendUUID:e,steps:t,isResearchPlanFinished:n})=>{const r=Z(),{pendingClarifications:s,clearClarifications:a}=AW(),i=d.useMemo(()=>{if(n||!e)return[];const l=new Set(t.map(f=>f.uuid)),c=new Set;return t.forEach(f=>{f.step_type==="CLARIFYING_QUESTIONS_OUTPUT"&&f.content?.clarification&&c.add(f.content.clarification)}),s.filter(f=>f.entryUUID===e&&!l.has(f.UUID)&&!c.has(f.content)).map((f,m)=>({description:f.question??r.formatMessage({defaultMessage:"I'll consider the details you added.",id:"46H8Trfeps"}),final:!1,id:`c-${m}`,steps:[{content:{goal_id:`c-${m}`,clarification:f.content,question:f.question},step_type:"CLARIFYING_QUESTIONS_OUTPUT",uuid:f.UUID}]}))},[r,s,e,n,t]);return d.useEffect(()=>{n&&s.length&&a()},[a,n,s]),i},fJt=93,mJt=(e,t,n=!1)=>{const[r,s]=d.useState(!1),[a,i]=d.useState(!1),l=d.useContext(r$),c=d.useRef(l?.scrollContainerRef?.current??null),u=d.useCallback(()=>{if(!n)return;const f=e?.current;f&&(r||(i(!0),f.scrollTo({top:f.scrollHeight,behavior:"smooth"}),setTimeout(()=>{i(!1)},500)))},[n,e,r]);return d.useEffect(()=>{const f=m=>{const p=c?.current;m&&p&&setTimeout(function h(g=0,y=0){const x=m.getBoundingClientRect().top;if(g!==x&&y<100){setTimeout(()=>h(x,++y),20);return}const v=p.scrollTop??0,b=x+v-fJt;requestAnimationFrame(()=>p.scrollTo({top:b,behavior:"smooth"}))},20)};t&&setTimeout(()=>{const m=document.getElementById(t);if(m){const p=m.closest(".group\\/goal");p&&f(p)}},150)},[t]),d.useEffect(()=>{const f=()=>{const p=e?.current;if(!p||a)return;const h=p.scrollHeight-p.scrollTop<=p.clientHeight+10;s(!h)},m=e?.current;if(m)return m.addEventListener("scroll",f),()=>m.removeEventListener("scroll",f)},[e,a]),d.useMemo(()=>({handleAnimationComplete:u}),[u])},Zun=(e,t,n,r,s)=>e.map((a,i)=>{const l=t?.id===a.id,c=t&&e.indexOf(t)>e.indexOf(a)||n;let u="planned";return c?u="finished":l&&(u="loading"),{...a,key:`${r}-${a.id?a.id+"-":""}${i}`,id:a.id??`${r}-${i}`,status:u,planType:r,animateEntry:!(i===0&&s.skipFirstAnimation)&&!c,web_results:s.web_results,isFinalGoal:!1,title:a?.description??s.$t({defaultMessage:"Thinking",id:"P1QHV0AhYD"})}}),pJt=({researchPlan:e,steps:t,reasoningPlan:n,isProReasoningMode:r,hasAnswer:s,searchMode:a,focusStepUUID:i,autoScroll:l=!1})=>{const{askInputReasoningMode:c}=ir(),{scrollContainerRef:u}=ti(),{result:{backend_uuid:f,blocks:m,attachments:p,attachment_processing_progress:h,display_model:g},isAnswerSkipped:y,hasPendingFiles:x}=pn(),v=typeof r=="boolean"?r:c,b=bPe({researchPlan:e,reasoningPlan:n,blocks:m??[],hasAnswer:s,isProReasoningMode:v,displayModel:g}),_=uJt({researchPlan:e,steps:t??[],searchMode:a,isResearchPlanFinished:b.isResearchPlanFinished,backendUUID:f??""}),w=iJt({hasPendingFiles:x,attachments:p,attachment_processing_progress:h}),C=lJt({isAllPlansFinished:b.isAllPlansFinished,researchPlan:e,reasoningGoals:b.reasoningGoals,isStudio:a===ue.STUDIO,hasPendingFiles:x,displayModel:g}),S=mJt(u,i,l);return d.useMemo(()=>({...b,..._,...C,...S,...w,isProReasoningMode:v,searchMode:a,isAnswerSkipped:y}),[b,_,C,S,w,v,a,y])},hJt=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"generative-refinement",defaultValue:e,extraAttributes:t,subjectType:"user_nextauth_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])},hle=["hotels","places","shopping"];function gJt(){const{result:e,refinementFiltersData:t,selectedRefinementQuery:n,selectedFilterIds:r,actions:{setSelectedRefinementQuery:s,setSelectedFilterIds:a},submitQuery:i,result:{query_str:l}}=pn(),{updateCurrentMode:c}=W4(),{trackEvent:u}=Te(),{currentModeData:{mode:f}}=Ww(),{variation:m,loading:p}=hJt(!1),h=t?.refinement_filters,g=d.useMemo(()=>t?.original_query??l??"",[t?.original_query,l]),y=d.useMemo(()=>r.map(O=>h?.find(D=>D.id===O)?.label).filter(O=>!!O),[r,h]),x=d.useCallback(O=>{u("refinement filter clicked",{filters:h?.filter(D=>D.id===O),answerMode:f})},[h,f,u]),v=d.useCallback(()=>{u("refinement filters reset",{answerMode:f})},[f,u]),b=d.useCallback(()=>{u("refinement filters applied",{answerMode:f,filters:h?.filter(O=>r.includes(O.id))})},[f,u,h,r]),[_,w]=d.useState(!1),C=d.useCallback(O=>{const D=r.includes(O);let P;D?P=r.filter(A=>A!==O):P=[...r,O],a(P),x(O)},[r,a,x]),S=d.useCallback(()=>{s(g),a([]),v()},[a,s,g,v]),E=d.useCallback(()=>{c("default"),i({rawQuery:g,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill",refinementFiltersMetadata:{refinement_filters:h,selected_filter_ids:[],original_query:g}}),v()},[c,e.backend_uuid,h,g,i,v]),k=d.useCallback(()=>{s(null),a([...t?.selected_filter_ids??[]])},[s,a,t]),M=d.useCallback(async()=>{if(y.length===0)return g;w(!0);try{const O=await kAt({query:g,keywords:y,reason:"refinement-query"});return O||y.join(" ")+" "+g}catch{return y.join(" ")+" "+g}finally{w(!1)}},[y,g]),j=d.useCallback(async()=>{const O=await M();s(O),c("default"),i({rawQuery:O,existingEntryUUID:e.backend_uuid,newFrontendContextUUID:null,collection:null,promptSource:"user",querySource:"refinement-pill",refinementFiltersMetadata:{refinement_filters:h,selected_filter_ids:r,original_query:g}}),b()},[M,s,i,e.backend_uuid,h,r,g,b,c]),R=d.useCallback(async()=>{const O=await M();s(O),b()},[M,s,b]);return{refinementFilters:m&&!p?h:null,selectedRefinementQuery:n,selectedFilterIds:r,handleFilterClickAnswerMode:C,handleResetClickAnswerMode:S,handleResetClickDefaultMode:E,handleApplyClickDefaultMode:j,handleApplyClickAnswerMode:R,isRefinementLoading:_,handleResetToOriginalState:k,originalQuery:g}}const mO=d.memo(({title:e,filters:t,selectedFilterIds:n,onFilterClick:r,isOpen:s,onToggle:a,useCheckboxes:i=!1})=>o.jsxs(z,{className:"cursor-pointer border-b",children:[o.jsxs(z,{onClick:a,className:"p-md group flex w-full cursor-pointer items-center",children:[o.jsx("div",{className:"flex-1",children:o.jsx(F,{variant:"smallBold",children:e})}),o.jsx("div",{className:"pl-md",children:o.jsx(ve.div,{animate:{rotate:s?180:0},transition:{duration:.2,ease:an},className:"text-quiet group-hover:text-foreground",style:{transformOrigin:"center"},children:o.jsx(Wn,{size:18,strokeWidth:2.5})})})]}),o.jsx(na,{transition:{duration:.2,ease:an},children:s&&o.jsx(Zr,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15,ease:an},children:o.jsx("div",{className:"px-md pb-md",children:i?o.jsx("div",{className:"gap-xs flex flex-col",children:t.map(l=>o.jsxs("div",{className:"py-xs flex cursor-pointer items-center justify-between",onClick:()=>r(l.id),children:[o.jsx(F,{variant:"small",children:l.label}),o.jsx(F_,{checked:n?.includes(l.id)??!1,toggleChecked:()=>r(l.id),variant:"small"})]},l.id))}):o.jsx("div",{className:"gap-sm flex flex-wrap",children:t.map(l=>o.jsx(me,{text:l.label,size:"small",variant:n?.includes(l.id)?"common":"border",onClick:()=>r(l.id),extraCSS:"flex-shrink-0"},l.id))})})})})]}));mO.displayName="FilterSection";const GPe=d.memo(({refinementFilters:e,handleFilterClick:t,selectedFilterIds:n,isOpen:r,setIsOpen:s,handleResetClick:a,handleApplyClick:i,isLoading:l=!1})=>{const{isMobileStyle:c}=xe(),{$t:u}=Z(),f=d.useMemo(()=>e?.filter(b=>b.refinement_filter_type==="DYNAMIC")??[],[e]),m=d.useMemo(()=>{const b={};return e?.filter(_=>_.refinement_filter_type==="STATIC").forEach(_=>{const w=_.category||"Other";b[w]||(b[w]=[]),b[w].push(_)}),b},[e]),[p,h]=d.useState(()=>{const b={"Quick filters":!0};return f.some(w=>n?.includes(w.id))&&(b["Quick filters"]=!0),Object.entries(m).forEach(([w,C])=>{const S=C.some(E=>n?.includes(E.id));b[w]=S}),b}),g=d.useCallback(b=>{h(_=>({..._,[b]:!_[b]}))},[]),y=d.useCallback(()=>{s(!1)},[s]),x=d.useCallback(()=>g("Quick filters"),[g]);return d.useMemo(()=>f.length>0||Object.keys(m).length>0,[f,m])?o.jsx(qt,{modalContentClassname:"!py-0 mb-0 min-h-0 px-0",modalClassname:B("[&_>div]:min-h-0",!c&&"!w-[300px] !min-w-[300px]"),isOpen:r,onClose:y,variant:c?"bottom-sheet":"side-sheet",includeBlur:!1,removeScroll:!1,transparent:!0,renderCloseButton:!1,headerClassname:"hidden",children:o.jsxs("div",{className:"-mx-md flex min-h-0 flex-1 flex-col",children:[o.jsxs(z,{className:"p-md flex items-center justify-between border-b",children:[o.jsx(F,{variant:"smallBold",children:u({defaultMessage:"Filters",id:"zSOvI0LO0n"})}),o.jsx("button",{onClick:y,className:"text-quiet hover:text-foreground cursor-pointer",children:o.jsx(de,{icon:kt,size:"md"})})]}),o.jsxs("div",{className:"scrollbar-subtle flex min-h-0 flex-1 flex-col overflow-y-auto overflow-x-hidden",children:[f.length>0&&o.jsx(mO,{title:"Recommended",filters:f,selectedFilterIds:n,onFilterClick:t,isOpen:p["Quick filters"]??!0,onToggle:x}),Object.entries(m).map(([b,_])=>o.jsx(mO,{title:b,filters:_,selectedFilterIds:n,onFilterClick:t,isOpen:p[b]??!1,onToggle:()=>g(b),useCheckboxes:!0},b))]}),o.jsxs("div",{className:"gap-md p-md flex pb-0",children:[o.jsx(me,{text:u({defaultMessage:"Reset",id:"jm/spnRSn+"}),size:"regular",variant:"common",onClick:a,extraCSS:"flex-1"}),o.jsx(me,{text:u({defaultMessage:"Apply",id:"EWw/tKINJT"}),size:"regular",variant:"primary",onClick:i,extraCSS:"flex-1",disabled:l,isLoading:l})]})]})}):null});GPe.displayName="RefinementSidePanel";const yJt=10,xJt=async({request:e,reason:t})=>{if(e.page&&e.page>yJt)throw new Error("Max search results page number is too large");return(await re.POST("/rest/sources/search",t,{body:{entry_uuid:e.entry_uuid,limit:e.limit,page:e.page??null},timeoutMs:Ht.MEDIUM})).data},vJt=({reason:e})=>{const{mutate:t,data:n,isPending:r}=dt({mutationFn:async s=>(await xJt({request:s,reason:e})).results});return d.useMemo(()=>({isSearchResultsLoading:r,searchResults:n,fetchSearch:t}),[t,r,n])};function qPe(){const{value:e}=jt({flag:"move-citations-to-paragraph-end",subjectType:"visitor_id",defaultValue:!0});return e}typeof globalThis<"u"&&(globalThis.__useMoveCitationsToParagraphEnd=qPe);const Gv="line-clamp-1 leading-[0.875rem]",KPe=I.memo(({webResult:e,citationIndex:t,isRelatedResult:n,linkOnClick:r,imageToShow:s})=>{const{$t:a,formatDate:i}=Z(),l=d.useMemo(()=>Xs(e.url),[e.url]),c=d.useMemo(()=>__(e.url),[e.url]),u=e.is_client_context,f=dn(),m=d.useMemo(()=>e.meta_data?.domain_name??l.replace(/\.[^.]*$/,""),[l,e.meta_data?.domain_name]),p=lo(e.url),h=Uge(e),g=e.meta_data?.connection_type,y=qPe(),x=e.file_metadata?.file_repository_type,v=!u||f,b=T3(e),_=Apt(e),w=O_(e),C=()=>x=="COLLECTION"?a({defaultMessage:"Space Context",id:"wGTk8CFt1g"}):x=="USER"?a({defaultMessage:"My Files",id:"AjhJXSvkRs"}):x=="ORG"?a({defaultMessage:"Org Files",id:"DaFSYzpM1Q"}):a({defaultMessage:"Attachment",id:"eLCAEP8LHj"}),S=()=>e.file_metadata?.file_repository_type=="COLLECTION"?a({defaultMessage:"File",id:"gyrIElu9qY"}):e.meta_data?.connection_type?amt(e.meta_data.connection_type):a({defaultMessage:"Local upload",id:"fscjAJoLwa"}),E=d.useMemo(()=>o.jsx(Un,{size:"tiny",showBackground:!1,rounded:!1,user:dm(g)??void 0}),[g]);let k=null,M="",j=null;if(p||h||g&&g!==Cn.WILEY)k=o.jsx("div",{className:"bg-subtler flex size-7 items-center justify-center rounded-full",children:g?o.jsx(de,{icon:rce,size:"xl",badge:E}):o.jsx(de,{icon:vu,className:"size-md",size:"xl"})}),j=o.jsx(F,{variant:"tinyRegular",color:"light",className:Gv,children:S()}),M=C();else if(b&&!w)k=o.jsx("div",{className:"bg-subtle flex size-7 items-center justify-center rounded-full",children:o.jsx(de,{size:"xl",icon:e.is_memory?Kl:fp})}),j=o.jsx(F,{variant:"tinyRegular",color:"light",className:Gv,children:e.timestamp&&i(e.timestamp,{dateStyle:"long"})}),M=e?.is_memory?a({defaultMessage:"Memory",id:"dVx3yznM2C"}):a({defaultMessage:"Library",id:"StcK672jB9"});else{const R=g===Cn.WILEY?Om:void 0;k=o.jsx(ol,{size:28,domain:c,className:"size-full rounded-full",overrideIconUrl:R}),M=m,j=w?o.jsxs("div",{className:"gap-xs -ml-two flex flex-row items-center",children:[o.jsx(F,{variant:"tiny",color:"super",className:"-translate-y-px",children:o.jsx(de,{size:"xs",icon:m1})}),o.jsx(F,{variant:"tinyRegular",color:"super",className:Gv,children:o.jsx(ie,{defaultMessage:"Personal Search",id:"TZougEncQH",description:"subtitle"})})]}):o.jsx(F,{variant:"tinyRegular",color:"light",className:Gv,children:Stt($ge(e.url))})}return o.jsx("div",{className:"gap-md relative items-start",children:o.jsxs("div",{className:"gap-lg relative flex w-full flex-row items-center lg:pl-0",children:[o.jsxs("div",{className:"grow",children:[o.jsxs(qe,{href:e.url,className:B("group/source flex flex-1 flex-col gap-1",{"cursor-pointer":!p&&v}),onClick:r,children:[o.jsxs("div",{className:"gap-sm flex flex-row items-center",children:[o.jsx("div",{className:"size-7 shrink-0",children:k}),o.jsxs("div",{className:"flex flex-1 flex-col",children:[o.jsx("div",{className:"flex flex-row items-center gap-1.5",children:o.jsxs(F,{variant:"tiny",className:Gv,children:[!n&&t&&!y?t+". ":null,M]})}),j]}),b&&o.jsx(F,{variant:"tiny",color:"light",children:o.jsx(de,{size:"xs",icon:m1})})]}),_?null:o.jsx(F,{variant:"baseSemi",color:"super",className:B("line-clamp-1 transition-colors duration-300",{"group-hover/source:text-super":!p&&v}),children:e.name})]}),o.jsx(F,{variant:"small",color:"light",className:B("line-clamp-3 whitespace-pre-wrap",{"pt-2":_}),children:e.meta_data?.generated_file_description??e.meta_data?.description??e.snippet})]}),s&&o.jsxs(qe,{href:e.url,className:"relative ml-auto hidden aspect-square h-fit w-20 shrink-0 cursor-pointer overflow-hidden rounded-md sm:block",onClick:r,children:[o.jsx(ns,{src:s,alt:"image",containerClassName:"absolute inset-0",imageClassName:"absolute inset-0 object-cover object-center w-full h-full",includeLightBoxModal:!1}),o.jsx("div",{className:"rounded-inherit absolute inset-0 border border-[black]/10 dark:border-transparent"})]})]})})});KPe.displayName="PrimitiveSourcesRow";const Ez=I.memo(({webResult:e,citationIndex:t,isRelatedResult:n})=>{const r="sources-row",{result:{backend_uuid:s,context_uuid:a,frontend_context_uuid:i}}=pn(),l=Nn(),c=dn(),u=lo(e.url),{trackEvent:f}=Te(),m=d.useCallback((S,E)=>{c&&l.openTab({url:S,tabId:E})},[c,l]),{mutate:p}=Q0e({reason:r,onSuccess:c?m:void 0}),h=gz(),g=T3(e),y=O_(e),x=yz(),{getImageDownloadUrl:v}=yV({reason:r}),[b,_]=d.useState(null);d.useEffect(()=>{b===null&&(async()=>{if(!u){_(e.url);return}if(SU(e.url)){_(e.url);return}try{const E=await v({url:e.url,thread_id:s});_(E)}catch(E){ne.error(`Failed to fetch image source ${E}`),_(e.url)}})()},[v,s,e,u,b]),d.useEffect(()=>{f("source card viewed",{citation_url:e.url,position:t,title:e.name,contextUUID:a,frontendContextUUID:i,entryUUID:s,source:n?"sourcesTabViewMore":"sourcesTab"})},[e,f,t,n,a,i,s]);const w=d.useCallback(S=>{try{const k=e.meta_data?.file_uuid?"fileRepositoryFile":e.is_attachment?"fileAttachment":n?"sourcesTabViewMore":"sourcesTab",M=R1e(e),{type:j,memoryKey:R}=M;f("click citation",{citation_url:e.url,contextUUID:a,frontendContextUUID:i,entryUUID:s,isMemory:e.is_memory,isConversationHistory:e.is_conversation_history,source:k,...j==="memory"&&{memory_key:R}})}catch(k){ne.error("Failed to send click citation event:",k)}if(g&&!y){S.preventDefault(),h(e);return}if(rx(e)){S.preventDefault(),p({file_url:e.url});return}if(x){DF({adapter:l,reason:"sources-row",url:e.url,event:S,tabId:e.tab_id});return}if($5(S)){S.preventDefault(),l.openTab({url:e.url,tabId:e.tab_id});return}},[g,e,n,f,a,i,s,h,l,p,y,x]),C=d.useMemo(()=>{if(u)return b;if(typeof e.meta_data?.image_url=="string")return e.meta_data.image_url;if(typeof e.meta_data?.images?.[0]=="string")return e.meta_data.images[0];if(typeof e.meta_data?.images?.[0]?.src=="string")return e.meta_data.images[0].src},[u,e,b]);return o.jsx(KPe,{webResult:e,citationIndex:t,isRelatedResult:n,linkOnClick:w,imageToShow:C})});Ez.displayName="SourcesRow";var bJt={};const _Jt=10,wJt=dn(),YPe=I.memo(()=>{const e="sources-mode",{$t:t}=Z(),n=QPe({dedupeAttachments:!0}),{isEntryInFlight:r,result:s}=pn(),{fetchSearch:a,isSearchResultsLoading:i}=vJt({reason:e}),[l,c]=d.useState(1),[u,f]=d.useState([]),m=et(),{openModal:p}=xt(),h=d.useCallback(()=>{const x=l+1;a({entry_uuid:s.backend_uuid??"",limit:_Jt,page:x},{onSuccess:v=>{f([...u,...v]),c(x)}})},[l,a,u,s.backend_uuid]),g=d.useCallback(()=>{if(!m){p("loginModal",{origin:Le.SOURCES_VIEW_MORE});return}h()},[h,m,p]),y=!wJt&&!bJt.NEXT_PUBLIC_IS_SIDECAR_BUILD;return o.jsxs("div",{children:[o.jsx(Ih,{heading:n.selectedSources?.length>0?t({defaultMessage:"Attached",id:"2IacYt8NB7"}):void 0,sources:n.attachedSources}),o.jsx(Ih,{heading:n.attachedSources?.length>0?t({defaultMessage:"Sourced",id:"P5KqlvUgRC"}):void 0,sources:n.selectedSources}),o.jsx(Ih,{heading:t({defaultMessage:"Reviewed",id:"wiy+GNv+BV"}),sources:n.reviewedSources}),o.jsx(Ih,{heading:t({defaultMessage:"Reviewing",id:"L+ISAVX7+d"}),sources:n.reviewingSources,shimmer:!0}),o.jsx(Ih,{sources:n.unsortedSources}),y&&o.jsxs(Ye,{mode:"wait",children:[l===1&&o.jsx(ve.div,{animate:{opacity:1,y:0},exit:{opacity:0,y:-6},transition:Is,className:"mt-md flex w-full items-center justify-center",children:o.jsx(me,{variant:"common",isLoading:i||r,disabled:i||r,size:"small",text:t({defaultMessage:"View More",id:"QQSdHPJWXu"}),onClick:g,pill:!0})},"masher"),u.length>0?o.jsxs(o.Fragment,{children:[o.jsxs("div",{className:"my-md md:mt-lg relative md:ml-0",children:[o.jsx("hr",{className:"bg-subtle absolute top-1/2 h-px w-full border-0"}),o.jsx(F,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:t({defaultMessage:"More Results",id:"7S7CM3eEfJ"})})]}),o.jsx(z,{className:"py-sm flex flex-col gap-4",children:u.map((x,v)=>o.jsx(Ez,{webResult:x,citationIndex:v,isRelatedResult:!0},x.url))})]}):null]})]})});YPe.displayName="SourcesMode";const Ih=I.memo(({sources:e,heading:t,shimmer:n=!1})=>e.length===0?null:o.jsxs("div",{className:"my-md md:mt-lg group first:mt-0",children:[t?o.jsxs("div",{className:"mb-md relative",children:[o.jsx("hr",{className:"bg-subtle absolute top-1/2 h-px w-full border-0 group-first:hidden"}),o.jsx("div",{className:"bg-base",children:o.jsx(F,{variant:"tiny",color:"light",className:"mb-md bg-base pr-sm relative z-[1] w-fit",children:o.jsx(un,{variant:"super",active:n,as:"span",children:t})})})]}):null,o.jsx(z,{className:"flex flex-col gap-4",children:e.map(r=>o.jsx(Ez,{webResult:r.web_result,citationIndex:r.citation},r.web_result?.url))})]}));Ih.displayName="SourcesModeSection";const QPe=({dedupeAttachments:e=!1})=>{const{result:t,blocksByIntendedUsage:{sources_answer_mode:n}}=pn(),r=CJt({attachments:t.attachments??ce});return d.useMemo(()=>{const s=new Map,a=[];for(const m of n?.sources_mode_block?.rows??[]){const p=m.web_result?.is_attachment&&!Bge(m.web_result);if(p&&a.push(m),!p||!e){const h=s.get(m.status)??[];h.push(m),s.set(m.status,h)}}const i=s.get(bC.SELECTED)??ce,l=s.get(bC.REVIEWED)??ce,c=s.get(bC.REVIEWING)??ce,u=s.get(bC.UNSORTED)??ce;a.length===0&&r.length>0&&a.push(...r);const f=[...i,...l,...c,...u].slice(0,3)?.map(m=>m.web_result?.url??"");return{attachedSources:a,selectedSources:i,reviewedSources:l,reviewingSources:c,unsortedSources:u,topSources:f}},[e,r,n?.sources_mode_block?.rows])},CJt=({attachments:e})=>e.map(t=>({web_result:{name:s3(t),url:t,is_attachment:!0,is_image:lo(t),is_code_interpreter:!1,is_knowledge_card:!1,is_navigational:!1,is_widget:!1,sitelinks:[],snippet:"",timestamp:"",meta_data:{},inline_entity_id:""},status:"UNKNOWN",citation:0})),XPe=d.memo(({...e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:1152,height:24,viewBox:"0 0 1152 24",fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:1.75,...e,children:[o.jsx("path",{strokeOpacity:.2,d:"M9.056 19.122c-1.794.845-3.353 1.105-4.315.598-2.092-1.105-.533-5.471 3.47-9.734.39-.416.793-.82 1.196-1.21m5.563-3.911c1.781-.845 3.34-1.105 4.289-.598 2.092 1.105.533 5.47-3.47 9.734-.386.411-.784.81-1.196 1.196m4.536-.247c.845 1.794 1.105 3.353.598 4.315-1.105 2.092-5.471.533-9.734-3.47-.416-.39-.819-.793-1.209-1.196M4.871 9.024c-.845-1.781-1.105-3.34-.598-4.29 1.105-2.091 5.471-.532 9.734 3.47.412.386.81.785 1.196 1.197"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M13.306 12a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M33.057 19.12c-1.793.846-3.352 1.106-4.314.599-2.092-1.105-.533-5.471 3.469-9.733.388-.412.787-.815 1.195-1.208m5.562-3.912c1.78-.845 3.339-1.104 4.288-.598 2.092 1.104.533 5.47-3.469 9.733-.385.411-.784.81-1.195 1.195m4.534-.246c.845 1.793 1.105 3.352.598 4.314-1.104 2.092-5.47.533-9.733-3.47a35.174 35.174 0 0 1-1.208-1.194m-3.911-5.576c-.845-1.78-1.105-3.34-.598-4.288 1.104-2.092 5.471-.533 9.733 3.469.416.39.819.793 1.195 1.195"}),o.jsx("path",{strokeLinejoin:"round",d:"M28.873 9.024c-.404-.852-.674-1.653-.791-2.361"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M37.31 12a1.303 1.303 0 1 0-2.605-.001 1.303 1.303 0 0 0 2.605 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M57.058 19.117c-1.792.844-3.351 1.104-4.312.597-2.091-1.104-.532-5.468 3.468-9.727.389-.412.787-.815 1.195-1.208m5.559-3.909c1.779-.844 3.338-1.104 4.286-.597 2.091 1.104.532 5.468-3.468 9.727-.39.416-.792.818-1.195 1.195m4.532-.247c.844 1.792 1.104 3.351.597 4.312-1.104 2.091-5.468.532-9.727-3.468a34.994 34.994 0 0 1-1.208-1.195m-3.908-5.57c-.844-1.78-1.104-3.339-.597-4.287 1.104-2.09 5.468-.532 9.727 3.468.416.39.818.792 1.195 1.195"}),o.jsx("path",{strokeLinejoin:"round",d:"M52.877 9.026c-.844-1.779-1.104-3.338-.597-4.286.084-.16.188-.298.308-.416"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M61.32 12a1.313 1.313 0 1 0-2.626 0 1.313 1.313 0 0 0 2.626 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M81.061 19.111c-1.791.843-3.348 1.103-4.308.597-2.089-1.103-.532-5.463 3.465-9.719.388-.412.786-.814 1.194-1.207m5.553-3.906c1.778-.843 3.335-1.103 4.282-.597 2.089 1.103.532 5.463-3.465 9.72-.389.414-.791.817-1.194 1.193m4.529-.246c.843 1.791 1.103 3.348.597 4.308-1.103 2.09-5.463.532-9.719-3.465a35.026 35.026 0 0 1-1.207-1.194M76.883 9.03c-.843-1.778-1.103-3.335-.597-4.282 1.103-2.089 5.463-.532 9.719 3.465.41.385.81.783 1.194 1.194"}),o.jsx("path",{strokeLinejoin:"round",d:"M76.883 9.029c-.843-1.778-1.103-3.335-.597-4.282.44-.833 1.398-1.086 2.661-.836"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M85.337 12a1.33 1.33 0 1 0-2.661 0 1.33 1.33 0 0 0 2.661 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M105.064 19.102c-1.789.842-3.344 1.102-4.303.596-2.087-1.102-.531-5.456 3.46-9.707.387-.411.785-.813 1.192-1.205m5.548-3.901c1.776-.842 3.331-1.102 4.277-.596 2.087 1.102.531 5.456-3.461 9.707-.389.415-.791.817-1.192 1.192m4.524-.246c.842 1.789 1.102 3.344.596 4.303-1.102 2.087-5.456.531-9.707-3.461a34.803 34.803 0 0 1-1.205-1.192m-3.902-5.56c-.842-1.776-1.102-3.331-.596-4.277 1.102-2.087 5.456-.531 9.707 3.46.41.384.808.782 1.192 1.192"}),o.jsx("path",{strokeLinejoin:"round",d:"M100.891 9.032c-.842-1.776-1.102-3.331-.596-4.277.684-1.296 2.624-1.187 5.014.038"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M109.36 12a1.354 1.354 0 1 0-2.707 0 1.354 1.354 0 0 0 2.707 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M129.069 19.092c-1.786.841-3.339 1.1-4.296.595-2.083-1.1-.531-5.448 3.455-9.693.388-.414.789-.815 1.191-1.204m5.538-3.895c1.773-.841 3.326-1.1 4.271-.595 2.083 1.1.531 5.448-3.455 9.693-.388.414-.789.815-1.191 1.191m4.516-.246c.841 1.786 1.1 3.339.595 4.296-1.1 2.083-5.448.531-9.693-3.455a34.726 34.726 0 0 1-1.204-1.191m-3.894-5.551c-.841-1.773-1.1-3.326-.595-4.271 1.1-2.084 5.448-.531 9.693 3.455.41.384.807.781 1.191 1.191"}),o.jsx("path",{strokeLinejoin:"round",d:"M124.902 9.037c-.841-1.773-1.1-3.326-.595-4.271.871-1.651 3.781-1.02 7.063 1.296"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M133.389 12a1.383 1.383 0 1 0-2.766 0 1.383 1.383 0 0 0 2.766 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M153.074 19.079c-1.783.84-3.333 1.098-4.289.594-2.08-1.098-.53-5.438 3.449-9.676.388-.413.788-.814 1.188-1.201m5.53-3.888c1.77-.84 3.32-1.098 4.263-.594 2.08 1.098.53 5.438-3.449 9.676-.383.409-.779.805-1.188 1.188m4.508-.246c.84 1.783 1.098 3.333.594 4.289-1.098 2.08-5.438.53-9.676-3.45a35.478 35.478 0 0 1-1.201-1.187m-3.888-5.542c-.84-1.77-1.098-3.32-.594-4.263 1.098-2.08 5.438-.53 9.676 3.449.413.388.814.788 1.188 1.188"}),o.jsx("path",{strokeLinejoin:"round",d:"M148.915 9.042c-.84-1.77-1.098-3.32-.594-4.263 1.043-1.976 5.013-.675 9.04 2.87"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M157.424 12a1.42 1.42 0 0 0-2.419-1.001 1.42 1.42 0 0 0-.416 1.001 1.42 1.42 0 0 0 2.419 1.002 1.42 1.42 0 0 0 .416-1.002Z"}),o.jsx("path",{strokeOpacity:.2,d:"M177.08 19.065c-1.779.838-3.326 1.096-4.28.593-2.076-1.096-.529-5.427 3.442-9.656.387-.413.786-.812 1.186-1.199m5.518-3.88c1.766-.839 3.313-1.097 4.254-.594 2.076 1.096.529 5.427-3.442 9.656-.382.408-.778.804-1.186 1.186m4.499-.245c.838 1.78 1.096 3.326.593 4.28-1.096 2.076-5.427.53-9.656-3.442a35.011 35.011 0 0 1-1.199-1.186"}),o.jsx("path",{strokeOpacity:.2,d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),o.jsx("path",{strokeLinejoin:"round",d:"M172.929 9.048c-.838-1.766-1.096-3.313-.593-4.254 1.096-2.076 5.427-.529 9.656 3.442.408.382.804.778 1.186 1.186"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M181.463 12a1.457 1.457 0 1 0-2.913 0 1.457 1.457 0 0 0 2.913 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M201.087 19.049c-1.775.836-3.319 1.093-4.27.592-2.071-1.093-.527-5.415 3.434-9.634.385-.408.779-.807 1.183-1.196m5.505-3.873c1.762-.836 3.306-1.093 4.245-.592 2.071 1.093.527 5.415-3.434 9.634-.381.407-.776.802-1.183 1.183m4.488-.243c.836 1.775 1.093 3.319.592 4.27-1.093 2.071-5.415.527-9.634-3.434-.408-.385-.807-.78-1.196-1.183"}),o.jsx("path",{d:"M211.055 14.92c.615 1.305.916 2.484.834 3.396"}),o.jsx("path",{strokeOpacity:.2,d:"M196.945 9.054c-.836-1.762-1.093-3.306-.592-4.245 1.093-2.071 5.415-.527 9.634 3.434.412.386.81.785 1.183 1.183"}),o.jsx("path",{strokeLinejoin:"round",d:"M197.355 3.996c1.797-.552 5.248 1.07 8.632 4.248l1.183 1.183"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M205.507 12a1.507 1.507 0 0 0-.439-1.06 1.51 1.51 0 0 0-1.061-.44 1.5 1.5 0 1 0 1.5 1.5Z"}),o.jsx("path",{strokeOpacity:.2,d:"M225.094 19.032c-1.771.834-3.311 1.091-4.26.59-2.066-1.09-.526-5.402 3.426-9.61.385-.412.783-.809 1.18-1.194m5.492-3.863c1.758-.834 3.298-1.09 4.234-.59 2.066 1.091.526 5.402-3.426 9.611-.381.406-.774.8-1.18 1.181m4.478-.244c.834 1.771 1.091 3.31.59 4.26-1.091 2.066-5.402.526-9.611-3.426a34.75 34.75 0 0 1-1.193-1.18"}),o.jsx("path",{d:"M235.038 14.913c.834 1.771 1.091 3.31.59 4.26-.385.73-1.173 1.01-2.216.892"}),o.jsx("path",{strokeOpacity:.2,d:"M220.962 9.062c-.834-1.758-1.091-3.298-.59-4.234 1.091-2.066 5.402-.526 9.611 3.426.406.38.8.774 1.181 1.18"}),o.jsx("path",{strokeLinejoin:"round",d:"M226.732 5.678a23.344 23.344 0 0 1 3.25 2.576l1.181 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M229.554 12a1.547 1.547 0 1 0-3.095.001 1.547 1.547 0 0 0 3.095 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M249.101 19.013c-1.766.832-3.302 1.088-4.249.59-2.061-1.089-.525-5.389 3.417-9.587.384-.41.781-.806 1.177-1.19"}),o.jsx("path",{d:"m247.027 11.438 1.242-1.422 1.177-1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M254.925 4.973c1.753-.832 3.289-1.088 4.224-.589 2.061 1.088.525 5.388-3.417 9.586-.379.405-.772.798-1.177 1.177m4.465-.242c.832 1.766 1.088 3.302.589 4.25-1.088 2.06-5.388.524-9.586-3.418a34.575 34.575 0 0 1-1.19-1.177"}),o.jsx("path",{d:"M259.02 14.905c.832 1.766 1.088 3.302.589 4.25-.724 1.37-2.869 1.15-5.46-.313"}),o.jsx("path",{strokeOpacity:.2,d:"M244.98 9.07c-.832-1.754-1.088-3.29-.589-4.225 1.088-2.06 5.388-.525 9.586 3.417.41.384.806.781 1.177 1.177"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M253.603 12a1.596 1.596 0 1 0-3.192 0 1.596 1.596 0 0 0 3.192 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M273.109 18.995c-1.762.83-3.293 1.085-4.238.587-2.055-1.085-.523-5.374 3.408-9.561.383-.408.779-.804 1.174-1.187"}),o.jsx("path",{d:"M269.182 14.137c.734-1.301 1.781-2.714 3.097-4.115l1.174-1.187"}),o.jsx("path",{strokeOpacity:.2,d:"M278.917 4.992c1.749-.83 3.28-1.085 4.212-.587 2.055 1.085.523 5.374-3.408 9.56-.383.409-.779.805-1.174 1.175m4.454-.242c.83 1.762 1.085 3.293.587 4.238-1.085 2.055-5.374.523-9.561-3.408a34.4 34.4 0 0 1-1.187-1.174"}),o.jsx("path",{d:"M283.001 14.898c.83 1.762 1.085 3.293.587 4.238-.962 1.823-4.446.824-8.143-2.17"}),o.jsx("path",{strokeOpacity:.2,d:"M268.999 9.077c-.83-1.75-1.085-3.281-.587-4.212 1.085-2.055 5.374-.523 9.561 3.408.404.378.795.77 1.174 1.174"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M277.654 12a1.654 1.654 0 0 0-1.647-1.647A1.65 1.65 0 0 0 274.359 12a1.654 1.654 0 0 0 1.647 1.647A1.649 1.649 0 0 0 277.654 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M297.117 18.976c-1.757.828-3.284 1.082-4.226.586-2.05-1.082-.522-5.359 3.399-9.535.38-.404.771-.799 1.17-1.184"}),o.jsx("path",{d:"M292.005 17.363c.214-1.894 1.749-4.636 4.284-7.336l1.171-1.184"}),o.jsx("path",{strokeOpacity:.2,d:"M302.909 5.01c1.744-.826 3.272-1.081 4.201-.585 2.05 1.082.522 5.359-3.399 9.535-.382.407-.776.802-1.171 1.17"}),o.jsx("path",{strokeOpacity:.2,d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),o.jsx("path",{d:"M306.982 14.89c.828 1.757 1.082 3.284.586 4.226-1.082 2.05-5.359.522-9.535-3.4a35.405 35.405 0 0 1-1.184-1.17"}),o.jsx("path",{strokeOpacity:.2,d:"M293.017 9.085c-.827-1.744-1.082-3.272-.586-4.2 1.082-2.05 5.359-.523 9.535 3.398.403.378.794.768 1.171 1.171"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M301.705 12a1.697 1.697 0 1 0-3.395 0 1.697 1.697 0 0 0 3.395 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M321.124 18.957c-1.752.825-3.276 1.08-4.215.584-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),o.jsx("path",{d:"M317.773 19.781a2.28 2.28 0 0 1-.863-.239c-2.044-1.079-.521-5.345 3.39-9.509.381-.406.774-.8 1.168-1.18"}),o.jsx("path",{strokeOpacity:.2,d:"M326.901 5.03c1.739-.825 3.263-1.079 4.19-.584 2.044 1.079.52 5.345-3.39 9.509-.381.406-.774.8-1.168 1.168m4.431-.241c.825 1.752 1.079 3.276.584 4.215-1.079 2.044-5.345.52-9.509-3.39-.403-.38-.797-.77-1.181-1.168"}),o.jsx("path",{d:"M330.572 19.896c-1.77.557-5.185-1.044-8.534-4.189l-1.181-1.168"}),o.jsx("path",{strokeOpacity:.2,d:"M317.036 9.093c-.825-1.739-1.079-3.263-.584-4.19 1.079-2.044 5.345-.521 9.509 3.39.402.377.791.766 1.168 1.168"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M325.757 12a1.747 1.747 0 0 0-1.75-1.75 1.749 1.749 0 1 0 1.75 1.75Z"}),o.jsx("path",{strokeOpacity:.2,d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),o.jsx("path",{d:"M345.132 18.94c-1.747.822-3.267 1.075-4.204.582-2.039-1.076-.519-5.33 3.381-9.484a34.14 34.14 0 0 1 1.165-1.178"}),o.jsx("path",{strokeOpacity:.2,d:"M350.894 5.048c1.735-.823 3.254-1.076 4.179-.582 2.039 1.076.519 5.331-3.381 9.484-.376.401-.764.79-1.165 1.165m4.419-.24c.823 1.746 1.076 3.266.582 4.203-1.076 2.04-5.331.52-9.484-3.38-.405-.38-.798-.773-1.178-1.166"}),o.jsx("path",{d:"M349.253 18.24a23.063 23.063 0 0 1-3.209-2.543l-1.178-1.165"}),o.jsx("path",{strokeOpacity:.2,d:"M341.054 9.1c-.823-1.735-1.076-3.254-.582-4.179 1.076-2.039 5.331-.519 9.484 3.381.405.38.798.772 1.165 1.165"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M349.807 12a1.802 1.802 0 0 0-1.8-1.8 1.802 1.802 0 0 0-1.273 3.073A1.802 1.802 0 0 0 349.807 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-2.034-1.074-.518-5.318 3.372-9.46.378-.402.765-.794 1.162-1.176"}),o.jsx("path",{d:"M369.139 18.922c-1.743.821-3.259 1.074-4.193.581-1.504-.794-1.067-3.32.836-6.259"}),o.jsx("path",{strokeOpacity:.2,d:"M374.886 5.065c1.73-.82 3.246-1.074 4.168-.58 2.034 1.073.518 5.317-3.373 9.46-.379.403-.77.795-1.162 1.161"}),o.jsx("path",{d:"m376.909 12.54-1.227 1.405-1.162 1.162"}),o.jsx("path",{strokeOpacity:.2,d:"M378.928 14.867c.821 1.743 1.074 3.259.581 4.193-1.074 2.034-5.318.518-9.46-3.373a34.866 34.866 0 0 1-1.175-1.162m-3.802-5.417c-.821-1.73-1.074-3.246-.581-4.168 1.074-2.034 5.318-.518 9.46 3.372.4.375.787.762 1.162 1.162"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M373.854 12a1.849 1.849 0 0 0-1.848-1.848A1.847 1.847 0 1 0 373.854 12Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M393.146 18.905c-1.739.819-3.251 1.071-4.184.58-2.029-1.071-.517-5.305 3.364-9.438.377-.4.763-.79 1.159-1.172"}),o.jsx("path",{strokeWidth:1.697,d:"M393.146 18.905c-1.739.82-3.251 1.071-4.184.58a1.594 1.594 0 0 1-.793-.969"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M398.879 5.082c1.726-.819 3.238-1.07 4.158-.58 2.029 1.071.517 5.305-3.365 9.438-.378.403-.769.794-1.159 1.16"}),o.jsx("path",{strokeWidth:1.697,d:"M402.728 9.883c-.724 1.283-1.757 2.676-3.055 4.058l-1.159 1.159"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.697,d:"M402.912 14.86c.819 1.739 1.071 3.25.58 4.184-1.071 2.029-5.305.517-9.438-3.365a34.687 34.687 0 0 1-1.172-1.16m-3.794-5.405c-.819-1.726-1.071-3.238-.58-4.158 1.071-2.03 5.305-.517 9.438 3.364.399.374.785.76 1.159 1.159"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M397.899 12a1.893 1.893 0 1 0-3.786 0 1.893 1.893 0 0 0 3.786 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M417.152 18.89c-1.735.817-3.244 1.069-4.174.578-2.024-1.07-.516-5.293 3.357-9.417l1.157-1.17m5.381-3.784c1.723-.817 3.231-1.07 4.149-.578 2.024 1.069.515 5.293-3.357 9.417l-1.157 1.157"}),o.jsx("path",{strokeWidth:1.693,d:"M427.895 6.699c-.215 1.87-1.73 4.574-4.23 7.237l-1.157 1.157"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.693,d:"M426.897 14.854c.817 1.735 1.069 3.244.578 4.174-1.069 2.024-5.293.515-9.417-3.357l-1.169-1.157m-3.785-5.393c-.817-1.723-1.069-3.231-.578-4.15 1.069-2.023 5.293-.515 9.417 3.358l1.157 1.157"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M421.941 12a1.934 1.934 0 1 0-3.868 0 1.934 1.934 0 0 0 3.868 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M441.158 18.876c-1.732.816-3.238 1.067-4.166.577-2.02-1.067-.514-5.283 3.351-9.399l1.154-1.167m5.37-3.776c1.719-.816 3.225-1.067 4.141-.577 2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),o.jsx("path",{strokeWidth:1.69,d:"M450.174 4.298a2.2 2.2 0 0 1 .834.235c2.02 1.067.514 5.283-3.351 9.399l-1.154 1.154"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.69,d:"M450.883 14.849c.816 1.732 1.067 3.237.577 4.166-1.067 2.02-5.283.514-9.399-3.351l-1.167-1.154m-3.777-5.384c-.816-1.72-1.067-3.225-.577-4.141 1.067-2.02 5.283-.514 9.399 3.35l1.154 1.155"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M445.978 12a1.973 1.973 0 0 0-1.971-1.971 1.972 1.972 0 1 0 1.971 1.97Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M465.163 18.865c-1.729.814-3.232 1.065-4.159.576-2.017-1.065-.514-5.274 3.345-9.383l1.153-1.165M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),o.jsx("path",{strokeWidth:1.687,d:"M470.863 5.122c1.716-.814 3.219-1.065 4.134-.576 2.017 1.065.514 5.274-3.345 9.383l-1.152 1.153"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M474.871 14.844c.814 1.729 1.065 3.232.576 4.159-1.065 2.017-5.274.514-9.383-3.345l-1.164-1.153m-3.771-5.374c-.814-1.716-1.065-3.22-.576-4.134 1.065-2.017 5.274-.514 9.383 3.345l1.153 1.152"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M470.01 12a2.003 2.003 0 1 0-4.007 0 2.003 2.003 0 0 0 4.007 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M489.167 18.855c-1.726.813-3.227 1.063-4.153.575-2.014-1.063-.513-5.266 3.34-9.37l1.151-1.162m5.353-3.766c1.714-.813 3.215-1.063 4.128-.575 2.014 1.063.513 5.266-3.34 9.369l-1.151 1.15"}),o.jsx("path",{strokeWidth:1.684,d:"M494.858 5.132c1.714-.813 3.215-1.063 4.128-.575 1.49.786 1.056 3.29-.829 6.2"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.684,d:"M498.861 14.84c.813 1.726 1.063 3.227.575 4.153-1.063 2.014-5.266.513-9.369-3.34l-1.163-1.151m-3.765-5.367c-.813-1.714-1.063-3.215-.575-4.128 1.063-2.014 5.266-.513 9.369 3.34l1.151 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M494.037 12a2.03 2.03 0 1 0-4.06 0 2.03 2.03 0 0 0 4.06 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M513.17 18.847c-1.724.812-3.224 1.062-4.148.575-2.012-1.062-.512-5.26 3.336-9.359l1.15-1.162m5.347-3.761c1.712-.812 3.211-1.062 4.123-.575 2.012 1.062.512 5.26-3.336 9.359l-1.149 1.15"}),o.jsx("path",{strokeWidth:1.682,d:"M518.855 5.14c1.712-.812 3.211-1.062 4.123-.575.398.21.659.543.791.974"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.682,d:"M522.854 14.836c.812 1.724 1.062 3.224.575 4.148-1.062 2.012-5.26.512-9.359-3.336l-1.162-1.149m-3.762-5.36c-.812-1.712-1.062-3.21-.575-4.123 1.062-2.012 5.26-.512 9.359 3.336l1.15 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M518.058 12a2.05 2.05 0 1 0-4.1 0 2.05 2.05 0 0 0 4.1 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M537.172 18.841c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.256 3.333-9.35l1.149-1.162m5.344-3.757c1.71-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.351l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.351-3.334l-1.161-1.148m-3.758-5.356c-.812-1.71-1.061-3.209-.574-4.12 1.061-2.01 5.256-.512 9.351 3.333l1.149 1.15"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M542.074 12a2.066 2.066 0 1 0-4.135 0 2.066 2.066 0 1 0 4.134 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M561.174 18.838c-1.722.811-3.219 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.148-1.16m5.34-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.253-3.332 9.346l-1.148 1.148m4.356-.236c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.253.512-9.346-3.332l-1.161-1.148m-3.757-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.253-.512 9.346 3.332l1.148 1.148"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M566.083 12a2.075 2.075 0 1 0-4.153 0 2.076 2.076 0 0 0 4.152 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M585.174 18.837c-1.722.811-3.219 1.061-4.142.574-2.009-1.06-.512-5.253 3.331-9.345l1.148-1.16m5.34-3.756c1.709-.81 3.206-1.06 4.117-.574 2.009 1.061.511 5.253-3.331 9.345l-1.148 1.148m4.354-.237c.811 1.722 1.061 3.22.574 4.142-1.06 2.01-5.253.511-9.345-3.33l-1.16-1.149m-3.755-5.352c-.811-1.709-1.061-3.206-.574-4.117 1.061-2.009 5.253-.512 9.345 3.331l1.148 1.148"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M590.086 12a2.08 2.08 0 1 0-4.159 0 2.08 2.08 0 0 0 4.159 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.68,d:"M609.174 18.838c-1.722.811-3.22 1.061-4.143.574-2.009-1.06-.512-5.254 3.332-9.347l1.147-1.16m5.341-3.756c1.71-.81 3.207-1.06 4.118-.574 2.009 1.061.512 5.254-3.332 9.347l-1.147 1.148m4.355-.237c.811 1.722 1.061 3.22.574 4.143-1.061 2.01-5.254.512-9.347-3.332l-1.161-1.148m-3.756-5.354c-.811-1.71-1.061-3.207-.574-4.118 1.061-2.009 5.254-.512 9.347 3.332l1.148 1.148"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.68,d:"M605.155 9.142c-.599-1.262-.891-2.408-.808-3.288"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M614.082 12a2.075 2.075 0 1 0-4.153-.001 2.075 2.075 0 0 0 4.154 0h-.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.681,d:"M633.172 18.842c-1.723.812-3.221 1.061-4.145.574-2.01-1.06-.512-5.257 3.334-9.352l1.149-1.16m5.343-3.759c1.711-.812 3.209-1.06 4.12-.574 2.01 1.061.512 5.256-3.334 9.352l-1.149 1.15m4.358-.239c.812 1.723 1.061 3.221.574 4.145-1.061 2.01-5.256.512-9.352-3.334l-1.16-1.148m-3.758-5.356c-.812-1.71-1.062-3.209-.575-4.12 1.061-2.01 5.256-.513 9.352 3.333l1.149 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.681,d:"M629.152 9.141c-.812-1.71-1.062-3.209-.575-4.12.376-.713 1.146-.985 2.165-.868"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M638.072 12a2.066 2.066 0 1 0-4.134 0 2.066 2.066 0 0 0 4.135 0h-.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.683,d:"M657.169 18.848c-1.725.812-3.224 1.062-4.149.575-2.012-1.062-.512-5.26 3.337-9.36l1.15-1.163m5.349-3.76c1.712-.813 3.212-1.063 4.124-.576 2.012 1.062.512 5.261-3.337 9.36l-1.15 1.15m4.362-.237c.812 1.725 1.062 3.224.575 4.15-1.062 2.011-5.261.511-9.36-3.338l-1.162-1.15m-3.763-5.36c-.812-1.713-1.062-3.213-.575-4.125 1.062-2.012 5.261-.512 9.36 3.337l1.15 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.683,d:"M653.145 9.138c-.812-1.712-1.062-3.212-.575-4.124.707-1.339 2.804-1.123 5.336.307"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M662.055 12a2.05 2.05 0 1 0-4.099 0 2.05 2.05 0 0 0 4.099 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.685,d:"M681.166 18.857c-1.727.813-3.228 1.064-4.154.576-2.014-1.064-.513-5.268 3.341-9.372l1.151-1.164m5.355-3.767c1.714-.813 3.216-1.064 4.129-.576 2.014 1.064.513 5.268-3.341 9.372l-1.151 1.15m4.367-.236c.813 1.727 1.064 3.228.576 4.154-1.063 2.014-5.268.513-9.372-3.341l-1.164-1.151m-3.766-5.367c-.813-1.714-1.064-3.216-.576-4.13 1.064-2.014 5.268-.512 9.372 3.342l1.151 1.15"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.685,d:"M677.137 9.135c-.813-1.714-1.064-3.216-.576-4.13.943-1.786 4.357-.807 7.98 2.126"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M686.032 12a2.026 2.026 0 1 0-4.051 0 2.026 2.026 0 0 0 4.051 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M705.162 18.867c-1.729.815-3.233 1.065-4.161.577-2.018-1.065-.514-5.276 3.346-9.386l1.153-1.166m5.364-3.772c1.717-.815 3.221-1.065 4.136-.576 2.018 1.065.514 5.276-3.346 9.386l-1.154 1.153m4.374-.238c.815 1.729 1.065 3.233.576 4.16-1.065 2.019-5.276.515-9.386-3.345l-1.165-1.153"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.687,d:"M701.126 9.13c-.815-1.717-1.065-3.221-.576-4.136 1.065-2.018 5.276-.514 9.386 3.346l1.153 1.153"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M710.003 12a1.996 1.996 0 1 0-3.99 0 1.996 1.996 0 0 0 3.989 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M729.156 18.88c-1.733.816-3.239 1.067-4.168.578-2.021-1.067-.515-5.286 3.352-9.404l1.155-1.168m5.374-3.779c1.72-.816 3.227-1.067 4.143-.578 2.021 1.067.515 5.286-3.352 9.404l-1.155 1.155m4.381-.238c.816 1.733 1.067 3.24.577 4.168-1.067 2.021-5.286.515-9.404-3.352l-1.168-1.155"}),o.jsx("path",{strokeWidth:1.691,d:"M738.886 14.85c.6 1.273.894 2.425.814 3.314"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.691,d:"M725.114 9.125c-.816-1.72-1.067-3.227-.578-4.143 1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.691,d:"m724.498 5.058.038-.076c1.067-2.02 5.286-.515 9.404 3.352l1.155 1.155"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M733.968 12a1.962 1.962 0 1 0-3.925 0 1.962 1.962 0 0 0 3.925 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M753.15 18.894c-1.736.818-3.246 1.07-4.177.58-2.026-1.07-.516-5.298 3.359-9.424.377-.399.763-.79 1.158-1.17m5.385-3.787c1.724-.818 3.233-1.069 4.152-.579 2.026 1.07.516 5.297-3.359 9.423-.377.403-.767.793-1.157 1.157m4.39-.238c.818 1.736 1.069 3.246.579 4.177-1.069 2.026-5.297.516-9.423-3.359a32.793 32.793 0 0 1-1.17-1.157"}),o.jsx("path",{strokeWidth:1.694,d:"M762.901 14.856c.818 1.736 1.069 3.246.579 4.177-.378.716-1.15.99-2.173.875"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.694,d:"M749.099 9.12c-.818-1.725-1.069-3.234-.579-4.153 1.069-2.026 5.297-.516 9.423 3.36.403.376.793.766 1.158 1.156"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.694,d:"M752.189 4.471c1.687.625 3.733 1.956 5.755 3.855l1.158 1.157"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M757.929 12a1.922 1.922 0 1 0-3.844 0 1.922 1.922 0 0 0 3.844 0Z"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M777.144 18.91c-1.74.82-3.253 1.072-4.187.58-2.03-1.072-.517-5.31 3.367-9.445a33.81 33.81 0 0 1 1.16-1.173m5.397-3.795c1.728-.82 3.241-1.072 4.161-.58 2.03 1.072.517 5.309-3.367 9.445-.374.4-.761.786-1.16 1.16m4.402-.24c.82 1.74 1.072 3.254.58 4.188-1.072 2.03-5.309.517-9.445-3.367-.4-.377-.791-.764-1.173-1.16"}),o.jsx("path",{strokeWidth:1.698,d:"M786.917 14.863c.82 1.74 1.072 3.253.58 4.187-.713 1.35-2.827 1.133-5.38-.307"}),o.jsx("path",{strokeOpacity:.2,strokeWidth:1.698,d:"M773.083 9.112c-.82-1.728-1.072-3.241-.58-4.161 1.072-2.03 5.309-.517 9.445 3.367.399.374.786.76 1.16 1.16"}),o.jsx("path",{strokeLinejoin:"round",strokeWidth:1.698,d:"M779.866 6.564a24.528 24.528 0 0 1 2.082 1.754l1.16 1.16"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M781.885 12a1.877 1.877 0 0 0-1.879-1.879 1.88 1.88 0 0 0-1.878 1.88 1.877 1.877 0 0 0 1.879 1.878A1.88 1.88 0 0 0 781.885 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M801.137 18.927c-1.745.822-3.262 1.075-4.197.582-2.035-1.075-.518-5.322 3.375-9.468.378-.401.766-.793 1.163-1.176m5.411-3.805c1.732-.822 3.249-1.075 4.172-.582 2.035 1.075.518 5.322-3.375 9.468-.375.4-.763.788-1.163 1.163m4.411-.239c.822 1.745 1.075 3.261.581 4.197-1.074 2.035-5.322.518-9.468-3.375a33.941 33.941 0 0 1-1.176-1.163"}),o.jsx("path",{d:"M810.934 14.87c.822 1.745 1.075 3.261.581 4.197-.953 1.805-4.403.816-8.064-2.149"}),o.jsx("path",{strokeOpacity:.2,d:"M797.066 9.105c-.822-1.732-1.075-3.249-.582-4.172 1.075-2.035 5.322-.518 9.468 3.375.405.379.796.771 1.163 1.163"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M805.839 12a1.834 1.834 0 0 0-1.131-1.693A1.832 1.832 0 1 0 805.839 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M825.129 18.945c-1.749.824-3.27 1.077-4.208.583-2.041-1.077-.52-5.336 3.384-9.493a34.18 34.18 0 0 1 1.166-1.179"}),o.jsx("path",{d:"m823.076 11.443 1.23-1.408 1.166-1.179"}),o.jsx("path",{strokeOpacity:.2,d:"M830.896 5.042c1.736-.824 3.257-1.077 4.183-.583 2.041 1.077.52 5.336-3.384 9.493-.38.406-.773.799-1.166 1.166"}),o.jsx("path",{strokeOpacity:.2,d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),o.jsx("path",{d:"M834.952 14.877c.824 1.749 1.077 3.27.583 4.208-1.077 2.04-5.336.52-9.493-3.384-.406-.38-.798-.773-1.179-1.166"}),o.jsx("path",{strokeOpacity:.2,d:"M821.048 9.098c-.824-1.736-1.077-3.257-.583-4.183 1.077-2.041 5.336-.52 9.493 3.384.401.376.79.765 1.166 1.166"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M829.789 12a1.783 1.783 0 1 0-3.565 0 1.783 1.783 0 0 0 3.565 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M849.122 18.964c-1.754.826-3.279 1.08-4.219.585-2.046-1.08-.521-5.35 3.393-9.519.38-.403.77-.797 1.169-1.182"}),o.jsx("path",{d:"M845.212 14.127c.73-1.295 1.773-2.702 3.083-4.097l1.169-1.182"}),o.jsx("path",{strokeOpacity:.2,d:"M854.904 5.023c1.741-.826 3.266-1.08 4.194-.585 2.046 1.08.521 5.35-3.393 9.518a25.57 25.57 0 0 1-1.169 1.17m4.434-.24c.826 1.753 1.08 3.278.585 4.218-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),o.jsx("path",{d:"m859.6 19.014-.045.09c-1.08 2.046-5.35.521-9.518-3.393a33.472 33.472 0 0 1-1.182-1.169"}),o.jsx("path",{strokeOpacity:.2,d:"M845.03 9.09c-.826-1.741-1.08-3.266-.585-4.194 1.08-2.046 5.35-.521 9.518 3.393.407.381.801.775 1.169 1.169"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M853.738 12a1.735 1.735 0 0 0-1.732-1.732 1.733 1.733 0 0 0-1.225 2.957A1.734 1.734 0 0 0 853.738 12Z"}),o.jsx("path",{strokeOpacity:.2,d:"M873.114 18.983c-1.758.828-3.288 1.083-4.231.586-2.052-1.083-.522-5.365 3.402-9.544.382-.408.777-.803 1.172-1.185"}),o.jsx("path",{d:"M867.997 17.368c.214-1.896 1.75-4.64 4.288-7.343l1.173-1.185"}),o.jsx("path",{strokeOpacity:.2,d:"M878.912 5.004c1.746-.828 3.275-1.083 4.205-.586 2.052 1.083.522 5.365-3.402 9.544-.378.404-.769.794-1.172 1.172m4.446-.24c.828 1.757 1.083 3.287.586 4.23-1.083 2.052-5.365.522-9.544-3.402-.404-.38-.8-.772-1.185-1.172"}),o.jsx("path",{d:"M879.868 19.628c-1.71-.632-3.786-1.98-5.836-3.907l-1.185-1.172"}),o.jsx("path",{strokeOpacity:.2,d:"M869.011 9.082c-.828-1.746-1.083-3.275-.586-4.205 1.083-2.052 5.365-.522 9.544 3.402.408.382.803.777 1.172 1.172"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M877.687 12a1.681 1.681 0 1 0-3.362 0 1.681 1.681 0 0 0 3.362 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M897.106 19.002c-1.763.831-3.296 1.086-4.242.588-2.057-1.086-.524-5.379 3.411-9.57a33.84 33.84 0 0 1 1.175-1.188"}),o.jsx("path",{d:"M893.733 19.83a2.31 2.31 0 0 1-.869-.24c-2.057-1.087-.524-5.38 3.411-9.57.383-.41.779-.806 1.175-1.189"}),o.jsx("path",{strokeOpacity:.2,d:"M902.92 4.985c1.75-.83 3.284-1.086 4.216-.588 2.057 1.086.524 5.38-3.411 9.57-.383.41-.779.805-1.175 1.175m4.458-.242c.831 1.763 1.086 3.296.588 4.242-1.086 2.057-5.379.524-9.57-3.41a35.38 35.38 0 0 1-1.188-1.176"}),o.jsx("path",{d:"M900.135 17.508a25.007 25.007 0 0 1-2.109-1.777l-1.188-1.175"}),o.jsx("path",{strokeOpacity:.2,d:"M892.992 9.074c-.83-1.75-1.086-3.284-.588-4.216 1.086-2.057 5.379-.524 9.57 3.411.409.383.805.779 1.175 1.175"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M901.636 12a1.63 1.63 0 1 0-3.26.001 1.63 1.63 0 0 0 3.26 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M921.099 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),o.jsx("path",{d:"M921.098 19.02c-1.768.833-3.305 1.09-4.253.59-2.062-1.09-.525-5.394 3.42-9.596.384-.41.781-.807 1.179-1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M926.927 4.967c1.755-.833 3.292-1.089 4.227-.589 2.062 1.09.525 5.393-3.42 9.595-.384.41-.781.807-1.178 1.18m4.47-.245c.833 1.768 1.089 3.305.589 4.253-1.089 2.062-5.393.525-9.595-3.42a34.634 34.634 0 0 1-1.191-1.178m-3.855-5.497c-.833-1.755-1.089-3.292-.589-4.227 1.089-2.062 5.393-.525 9.595 3.42.406.38.799.773 1.179 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M925.586 12a1.58 1.58 0 1 0-3.158.002 1.58 1.58 0 0 0 3.158-.002Z"}),o.jsx("path",{strokeOpacity:.2,d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-2.068-1.091-.527-5.406 3.429-9.618a34.92 34.92 0 0 1 1.181-1.194"}),o.jsx("path",{d:"M945.091 19.037c-1.772.835-3.313 1.092-4.264.59-1.529-.806-1.085-3.376.85-6.363"}),o.jsx("path",{strokeOpacity:.2,d:"M950.934 4.95c1.759-.835 3.3-1.092 4.238-.591 2.068 1.092.526 5.407-3.429 9.619-.385.41-.783.809-1.181 1.18"}),o.jsx("path",{d:"m952.991 12.549-1.248 1.428-1.181 1.18"}),o.jsx("path",{strokeOpacity:.2,d:"M955.044 14.915c.835 1.772 1.092 3.313.591 4.264-1.091 2.068-5.406.526-9.619-3.43a33.582 33.582 0 0 1-1.194-1.18m-3.866-5.51c-.835-1.76-1.092-3.3-.591-4.238 1.092-2.068 5.407-.527 9.619 3.429.411.385.809.783 1.181 1.18"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M949.538 12a1.531 1.531 0 1 0-3.062 0 1.531 1.531 0 0 0 3.062 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592-2.072-1.094-.528-5.419 3.437-9.64.385-.41.78-.809 1.184-1.198"}),o.jsx("path",{d:"M969.084 19.054c-1.776.837-3.321 1.094-4.274.592a1.625 1.625 0 0 1-.81-.989"}),o.jsx("path",{strokeOpacity:.2,d:"M974.941 4.933c1.763-.837 3.308-1.094 4.248-.592 2.072 1.094.528 5.419-3.437 9.64-.386.413-.785.812-1.184 1.185"}),o.jsx("path",{d:"M978.873 9.837c-.74 1.31-1.795 2.733-3.12 4.145l-1.184 1.184"}),o.jsx("path",{strokeOpacity:.2,d:"M979.06 14.922c.837 1.776 1.094 3.321.592 4.274-1.094 2.072-5.419.528-9.641-3.437-.409-.385-.808-.78-1.197-1.184m-3.874-5.523c-.837-1.763-1.094-3.308-.592-4.248 1.094-2.072 5.419-.528 9.641 3.437.408.382.802.777 1.184 1.184"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M973.493 12a1.486 1.486 0 1 0-2.97 0 1.486 1.486 0 0 0 2.969 0h.001Z"}),o.jsx("path",{strokeOpacity:.2,d:"M993.078 19.07c-1.78.838-3.328 1.095-4.283.592-2.077-1.096-.529-5.43 3.444-9.662.387-.413.787-.813 1.187-1.2m5.522-3.882c1.772-.838 3.312-1.096 4.262-.593 2.07 1.096.52 5.431-3.449 9.662-.383.409-.778.804-1.187 1.187"}),o.jsx("path",{d:"M1004.1 6.562c-.22 1.919-1.78 4.693-4.34 7.424l-1.187 1.187"}),o.jsx("path",{strokeOpacity:.2,d:"M1003.07 14.928c.84 1.78 1.1 3.328.6 4.283-1.1 2.077-5.433.53-9.664-3.444a34.504 34.504 0 0 1-1.2-1.187m-3.881-5.534c-.838-1.767-1.096-3.315-.593-4.257 1.096-2.077 5.431-.529 9.662 3.444.408.383.804.779 1.186 1.187"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M997.451 12a1.445 1.445 0 1 0-2.89 0 1.445 1.445 0 0 0 2.89 0Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1017.07 19.082c-1.78.84-3.33 1.099-4.29.595-2.08-1.1-.53-5.441 3.45-9.68.39-.41.79-.811 1.19-1.202m5.53-3.89c1.77-.84 3.32-1.1 4.27-.595 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),o.jsx("path",{d:"M1026.36 4.068c.32.03.61.11.86.242 2.08 1.099.53 5.44-3.45 9.68-.39.409-.78.806-1.19 1.189"}),o.jsx("path",{strokeOpacity:.2,d:"M1027.09 14.934c.84 1.784 1.1 3.334.59 4.29-1.1 2.082-5.44.53-9.68-3.45-.41-.387-.81-.783-1.2-1.19m-3.89-5.544c-.84-1.771-1.1-3.322-.59-4.265 1.09-2.081 5.44-.53 9.68 3.45.41.389.81.789 1.18 1.19"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1021.41 12c0-.373-.14-.731-.41-.995a1.397 1.397 0 0 0-.99-.413c-.38 0-.73.15-1 .413-.26.264-.41.622-.41.995s.15.73.41.995c.27.264.62.412 1 .413.37-.001.73-.15.99-.413.27-.264.41-.622.41-.995Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1041.07 19.094c-1.79.842-3.34 1.1-4.3.596-2.08-1.1-.53-5.45 3.46-9.696.38-.41.78-.812 1.19-1.204M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),o.jsx("path",{d:"M1046.96 4.893c1.77-.841 3.33-1.1 4.27-.595 2.08 1.1.53 5.45-3.46 9.696-.38.414-.79.816-1.19 1.19"}),o.jsx("path",{strokeOpacity:.2,d:"M1051.1 14.939c.84 1.787 1.1 3.34.6 4.298-1.1 2.084-5.45.531-9.7-3.457-.41-.388-.82-.79-1.2-1.191m-3.9-5.554c-.84-1.774-1.1-3.327-.6-4.272 1.1-2.084 5.45-.531 9.7 3.457.41.384.81.781 1.19 1.191"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1045.38 12c0-.76-.61-1.376-1.37-1.376-.76 0-1.38.616-1.38 1.376 0 .76.62 1.376 1.38 1.376.76 0 1.37-.616 1.37-1.376Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1065.06 19.104c-1.78.843-3.34 1.102-4.3.596-2.09-1.102-.53-5.458 3.46-9.71.39-.411.79-.813 1.19-1.206m5.55-3.9c1.78-.844 3.33-1.103 4.28-.597 2.09 1.102.53 5.458-3.46 9.71-.39.41-.78.809-1.19 1.193"}),o.jsx("path",{d:"M1070.96 4.883c1.78-.843 3.33-1.102 4.28-.596 1.54.815 1.09 3.41-.86 6.426"}),o.jsx("path",{strokeOpacity:.2,d:"M1075.11 14.943c.84 1.79 1.1 3.345.6 4.304-1.11 2.087-5.46.531-9.71-3.46a34.38 34.38 0 0 1-1.21-1.194m-3.9-5.562c-.84-1.776-1.1-3.33-.6-4.278 1.1-2.087 5.46-.532 9.71 3.461.41.385.81.783 1.2 1.193"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1069.35 12c0-.358-.14-.7-.39-.954a1.35 1.35 0 0 0-1.91 0c-.25.254-.39.596-.39.954s.14.7.39.954c.26.252.6.395.96.395.35 0 .7-.143.95-.396s.39-.596.39-.953Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1089.06 19.112c-1.79.844-3.35 1.103-4.31.597-2.09-1.103-.53-5.464 3.47-9.72.39-.412.78-.814 1.19-1.207m5.55-3.907c1.78-.844 3.34-1.103 4.29-.597 2.09 1.103.53 5.464-3.47 9.72-.38.41-.78.809-1.19 1.194"}),o.jsx("path",{d:"M1094.97 4.875c1.77-.844 3.33-1.103 4.28-.597.41.218.68.564.82 1.011"}),o.jsx("path",{strokeOpacity:.2,d:"M1099.12 14.946c.84 1.791 1.1 3.348.6 4.31-1.11 2.088-5.47.531-9.72-3.466-.42-.388-.82-.786-1.21-1.194m-3.91-5.568c-.84-1.778-1.1-3.335-.59-4.283 1.1-2.089 5.46-.532 9.72 3.465.41.39.81.792 1.19 1.194"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1093.33 12c0-.352-.14-.69-.39-.938a1.3 1.3 0 0 0-.93-.39c-.36 0-.69.14-.94.39a1.324 1.324 0 0 0 0 1.876c.25.248.59.388.94.389.35 0 .69-.141.93-.39.25-.248.39-.585.39-.937Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1113.06 19.117c-1.79.844-3.35 1.104-4.31.598-2.1-1.104-.54-5.468 3.46-9.728.39-.416.8-.818 1.2-1.208m5.56-3.91c1.78-.843 3.34-1.103 4.28-.596 2.09 1.104.54 5.468-3.46 9.728-.39.411-.79.81-1.2 1.195m4.53-.248c.85 1.792 1.11 3.35.6 4.312-1.1 2.09-5.47.532-9.73-3.468-.41-.389-.81-.787-1.21-1.195m-3.9-5.571c-.85-1.78-1.11-3.338-.6-4.286 1.1-2.091 5.47-.533 9.73 3.468.41.39.81.792 1.19 1.195"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1117.32 12a1.3 1.3 0 0 0-.39-.928 1.28 1.28 0 0 0-.92-.384c-.35 0-.68.138-.93.384s-.38.58-.38.928c0 .348.13.682.38.928s.58.384.93.384c.35 0 .68-.138.92-.384a1.3 1.3 0 0 0 .39-.928Z"}),o.jsx("path",{strokeOpacity:.2,d:"M1137.06 19.12c-1.8.846-3.36 1.106-4.32.599-2.09-1.105-.53-5.471 3.47-9.733.39-.412.79-.815 1.2-1.208m5.56-3.912c1.78-.845 3.34-1.105 4.29-.598 2.09 1.105.53 5.47-3.47 9.733-.39.411-.79.81-1.2 1.196m4.54-.247c.84 1.793 1.1 3.352.59 4.314-1.1 2.092-5.47.533-9.73-3.47-.41-.389-.81-.787-1.21-1.195m-3.91-5.575c-.84-1.78-1.1-3.34-.6-4.288 1.11-2.092 5.48-.533 9.74 3.469.41.385.81.784 1.19 1.195"}),o.jsx("path",{fill:"currentColor",stroke:"none",d:"M1141.31 12a1.3 1.3 0 0 0-1.3-1.303c-.72 0-1.31.583-1.31 1.303s.59 1.303 1.31 1.303a1.3 1.3 0 0 0 1.3-1.303Z"})]}));XPe.displayName="Sequence";const ZPe=d.memo(({...e})=>o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(6.02816 14.5018)",d:"M3.02816 4.6202C1.23465 5.465 -0.32491 5.7249 -1.28665 5.2181C-3.37906 4.1134 -1.8195 -0.2534 2.18339 -4.51623C2.57328 -4.93212 2.97617 -5.33501 3.37906 -5.7249"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(17.9719 9.47869)",d:"M-3.00215 -4.61371C-1.22165 -5.45848 0.33785 -5.7184 1.28665 -5.21154C3.37905 -4.10685 1.81945 0.259935 -2.18345 4.52271C-2.57335 4.93861 -2.97615 5.3415 -3.37905 5.7184"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(14.5083 17.9783)",d:"M4.6202 -3.02815C5.465 -1.23465 5.72491 0.32485 5.21801 1.28665C4.11341 3.37905 -0.253395 1.81945 -4.51624 -2.18345C-4.93213 -2.57335 -5.33501 -2.97625 -5.72491 -3.37905"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeWidth:"1.75",strokeLinecap:"round",strokeMiterlimit:"4",transform:"translate(9.4852 6.02166)",d:"M-4.61371 3.00217C-5.45848 1.22166 -5.71841 -0.3379 -5.21154 -1.28664C-4.10685 -3.37906 0.259935 -1.81949 4.52271 2.1834C4.93861 2.57329 5.3415 2.97618 5.7184 3.37906"}),o.jsx("path",{fill:"currentColor",transform:"translate(12.0065 12)",d:"M1.29965 5e-05C1.29965 -0.71775 0.71785 -1.29965 5e-05 -1.29965C-0.71775 -1.29965 -1.29965 -0.71775 -1.29965 5e-05C-1.29965 0.71785 -0.71775 1.29965 5e-05 1.29965C0.71785 1.29965 1.29965 0.71785 1.29965 5e-05Z"})]}));ZPe.displayName="DeepResearchStatic";const JPe=d.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=yH({shouldAnimate:t,animationDuration:3,animationName:"animate-deepResearchIndicator"});return o.jsx(d4,{size:e,className:n,children:r?o.jsx(XPe,{...s}):o.jsx(ZPe,{...a})})});JPe.displayName="DeepResearchLoader";const e8e=d.memo(e=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",width:936,height:24,viewBox:"0 0 936 24",...e,children:[o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M9.537 14.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 12 2.77a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597H9.537v3.066h4.926"}),o.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M13.312 8.927a1.3 1.3 0 1 0-2.6 0 1.3 1.3 0 0 0 2.6 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M33.538 14.567a6.16 6.16 0 0 1-3.694-5.639A6.158 6.158 0 0 1 36 2.772a6.158 6.158 0 0 1 6.156 6.156 6.16 6.16 0 0 1-3.694 5.64v3.594h-4.924v3.066h4.924"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.75,d:"M35.874 21.227h2.59"}),o.jsx("path",{fill:"currentColor",fillOpacity:.204,d:"M37.317 8.928a1.305 1.305 0 1 0-2.61 0 1.305 1.305 0 0 0 2.61 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M57.54 14.565a6.156 6.156 0 0 1-3.69-5.634A6.153 6.153 0 0 1 60 2.78a6.153 6.153 0 0 1 6.15 6.15 6.156 6.156 0 0 1-3.69 5.635v3.592h-4.92v3.063h4.92"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.748,d:"M57.54 20.968v.252h4.92"}),o.jsx("path",{fill:"currentColor",fillOpacity:.22,d:"M61.332 8.93a1.32 1.32 0 1 0-2.64 0 1.32 1.32 0 0 0 2.64 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.746,d:"M81.543 14.561a6.147 6.147 0 0 1-3.686-5.626A6.145 6.145 0 0 1 84 2.792a6.145 6.145 0 0 1 6.143 6.143 6.147 6.147 0 0 1-3.686 5.626v3.587h-4.914v3.06h4.914"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.746,d:"M81.543 18.373v2.835h4.914"}),o.jsx("path",{fill:"currentColor",fillOpacity:.247,d:"M85.357 8.935a1.344 1.344 0 1 0-2.689 0 1.344 1.344 0 0 0 2.689 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.743,d:"M105.547 14.556a6.136 6.136 0 0 1-3.678-5.616A6.134 6.134 0 0 1 108 2.809a6.133 6.133 0 0 1 6.131 6.131 6.136 6.136 0 0 1-3.678 5.616v3.581h-4.906v3.053h4.906"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.743,d:"M107.901 18.137h-2.354v3.054h4.906"}),o.jsx("path",{fill:"currentColor",fillOpacity:.282,d:"M109.39 8.94a1.378 1.378 0 1 0-2.755.001 1.378 1.378 0 0 0 2.755 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.739,d:"M129.553 14.55a6.122 6.122 0 0 1-3.67-5.603A6.12 6.12 0 0 1 132 2.83a6.12 6.12 0 0 1 6.118 6.117 6.123 6.123 0 0 1-3.671 5.604v3.572h-4.894v3.047h4.894"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.739,d:"m134.447 18.122-4.894.001v3.047h4.894"}),o.jsx("path",{fill:"currentColor",fillOpacity:.325,d:"M133.43 8.947a1.418 1.418 0 1 0-2.836 0 1.418 1.418 0 0 0 2.836 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.734,d:"M153.56 14.544a6.106 6.106 0 0 1-3.661-5.59 6.103 6.103 0 0 1 6.101-6.1 6.103 6.103 0 0 1 6.101 6.1 6.106 6.106 0 0 1-3.66 5.59v3.563h-4.881v3.038h4.881"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.734,d:"M158.441 15.511v2.596h-4.881v3.038h4.881"}),o.jsx("path",{fill:"currentColor",fillOpacity:.376,d:"M157.477 8.955a1.465 1.465 0 1 0-2.93 0 1.465 1.465 0 0 0 2.93 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.729,d:"M177.567 14.536a6.088 6.088 0 0 1-3.65-5.572A6.085 6.085 0 0 1 180 2.88a6.085 6.085 0 0 1 6.083 6.084 6.087 6.087 0 0 1-3.65 5.572v3.553h-4.866v3.029h4.866"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.729,d:"M183.809 13.7a6.066 6.066 0 0 1-1.376.836v3.552h-4.866v3.03h4.866"}),o.jsx("path",{fill:"currentColor",fillOpacity:.435,d:"M181.529 8.964a1.517 1.517 0 1 0-3.034 0 1.517 1.517 0 0 0 3.034 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M201.575 14.528a6.068 6.068 0 0 1-3.639-5.555A6.066 6.066 0 0 1 204 2.91a6.066 6.066 0 0 1 6.064 6.064 6.069 6.069 0 0 1-3.638 5.555v3.54h-4.851v3.02h4.851"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M209.405 11.72a6.103 6.103 0 0 1-2.979 2.807v3.542h-4.851v3.02h4.851"}),o.jsx("path",{fill:"currentColor",fillOpacity:.494,d:"M205.585 8.973a1.573 1.573 0 1 0-3.145 0 1.573 1.573 0 0 0 3.145 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.718,d:"M225.583 14.519a6.048 6.048 0 0 1-3.627-5.536A6.046 6.046 0 0 1 228 2.939a6.046 6.046 0 0 1 6.044 6.044 6.049 6.049 0 0 1-3.626 5.536v3.53h-4.835v3.01h4.835"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.718,d:"M234.039 9.24a6.052 6.052 0 0 1-3.621 5.279v3.53h-4.835v3.01h4.835"}),o.jsx("path",{fill:"currentColor",fillOpacity:.561,d:"M229.642 8.983a1.63 1.63 0 1 0-3.259-.001 1.63 1.63 0 0 0 3.259 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.712,d:"M249.591 14.51a6.028 6.028 0 0 1-3.614-5.517A6.025 6.025 0 0 1 252 2.969a6.026 6.026 0 0 1 6.024 6.024c0 2.47-1.494 4.59-3.614 5.517v3.518h-4.819v3h4.819"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.712,d:"M257.578 6.715a6.028 6.028 0 0 1-3.168 7.795v3.518h-4.819v3h4.819"}),o.jsx("path",{fill:"currentColor",fillOpacity:.627,d:"M253.7 8.993a1.688 1.688 0 1 0-3.376 0 1.688 1.688 0 0 0 3.376 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M273.599 14.502a6.008 6.008 0 0 1-3.602-5.5A6.005 6.005 0 0 1 276 3a6.006 6.006 0 0 1 6.004 6.003 6.008 6.008 0 0 1-3.602 5.5v3.506h-4.803v2.99h4.803"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M280.14 4.656a5.987 5.987 0 0 1 1.864 4.346 6.008 6.008 0 0 1-3.602 5.5v3.505h-4.803v2.99h4.803"}),o.jsx("path",{fill:"currentColor",fillOpacity:.69,d:"M277.756 9.003a1.744 1.744 0 1 0-3.488 0 1.744 1.744 0 0 0 3.488 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.701,d:"M297.607 14.494a5.989 5.989 0 0 1-3.591-5.482A5.987 5.987 0 0 1 300 3.027a5.987 5.987 0 0 1 5.985 5.985 5.989 5.989 0 0 1-3.591 5.482v3.494h-4.787v2.98h4.787"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.701,d:"M301.994 3.368a5.99 5.99 0 0 1 3.991 5.644 5.988 5.988 0 0 1-3.591 5.482v3.495h-4.787v2.98h4.787"}),o.jsx("path",{fill:"currentColor",fillOpacity:.753,d:"M301.809 9.012a1.797 1.797 0 1 0-3.594 0 1.797 1.797 0 0 0 3.594 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.696,d:"M321.614 14.486a5.97 5.97 0 0 1-3.58-5.465A5.969 5.969 0 0 1 324 3.054a5.969 5.969 0 0 1 5.967 5.967 5.97 5.97 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.696,d:"M323.448 3.079a5.969 5.969 0 0 1 6.519 5.942 5.972 5.972 0 0 1-3.58 5.465v3.485h-4.773v2.971h4.773"}),o.jsx("path",{fill:"currentColor",fillOpacity:.812,d:"M325.857 9.02a1.845 1.845 0 1 0-3.69 0 1.845 1.845 0 0 0 3.69 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M345.62 14.48a5.956 5.956 0 0 1-3.571-5.452A5.953 5.953 0 0 1 348 3.077a5.954 5.954 0 0 1 5.952 5.95 5.956 5.956 0 0 1-3.571 5.452v3.476h-4.761v2.963h4.761"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M345.067 3.85a5.954 5.954 0 0 1 8.885 5.178 5.956 5.956 0 0 1-3.571 5.451v3.476h-4.761v2.963h4.761"}),o.jsx("path",{fill:"currentColor",fillOpacity:.867,d:"M349.901 9.028a1.889 1.889 0 1 0-3.778.001 1.889 1.889 0 0 0 3.778-.001Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.688,d:"M369.625 14.473a5.942 5.942 0 0 1-3.562-5.439A5.94 5.94 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.941 5.941 0 0 1-3.563 5.44v3.467h-4.75v2.957h4.75"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.688,d:"M367.206 5.532A5.93 5.93 0 0 1 372 3.097a5.94 5.94 0 0 1 5.938 5.937 5.942 5.942 0 0 1-3.562 5.44v3.467h-4.751v2.957h4.751"}),o.jsx("path",{fill:"currentColor",fillOpacity:.91,d:"M373.937 9.034a1.924 1.924 0 1 0-3.849 0 1.924 1.924 0 0 0 3.849 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M393.63 14.469a5.93 5.93 0 0 1-3.556-5.43A5.929 5.929 0 0 1 396 3.114a5.929 5.929 0 0 1 5.927 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M390.203 7.805a5.93 5.93 0 0 1 5.798-4.692 5.929 5.929 0 0 1 5.926 5.927c0 2.43-1.47 4.516-3.556 5.429v3.46h-4.741v2.952h4.741"}),o.jsx("path",{fill:"currentColor",fillOpacity:.949,d:"M397.967 9.04a1.955 1.955 0 1 0-3.91 0 1.955 1.955 0 0 0 3.91 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M417.633 14.465a5.924 5.924 0 0 1-3.551-5.421 5.92 5.92 0 0 1 5.919-5.919 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M414.232 10.37a5.92 5.92 0 0 1 5.769-7.245 5.92 5.92 0 0 1 5.918 5.919 5.924 5.924 0 0 1-3.551 5.421v3.457h-4.735v2.947h4.735"}),o.jsx("path",{fill:"currentColor",fillOpacity:.976,d:"M421.989 9.044a1.977 1.977 0 1 0-3.954 0 1.977 1.977 0 0 0 3.954 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.681,d:"M441.635 14.463a5.917 5.917 0 0 1-3.548-5.417A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.681,d:"M439.286 12.61a5.874 5.874 0 0 1-1.199-3.564A5.915 5.915 0 0 1 444 3.133a5.916 5.916 0 0 1 5.914 5.913 5.919 5.919 0 0 1-3.548 5.417v3.454h-4.731v2.945h4.731"}),o.jsx("path",{fill:"currentColor",fillOpacity:.992,d:"M446.003 9.046a1.99 1.99 0 1 0-3.981 0 1.99 1.99 0 0 0 3.981 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M465.636 14.463a5.916 5.916 0 0 1-3.547-5.415 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M465.181 14.24a5.913 5.913 0 0 1-3.092-5.192 5.913 5.913 0 0 1 5.912-5.912 5.913 5.913 0 0 1 5.911 5.912 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.729v2.944h4.729"}),o.jsx("path",{fill:"currentColor",d:"M470.009 9.047a1.997 1.997 0 1 0-3.994 0 1.997 1.997 0 0 0 3.994 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h4.73"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M489.636 14.463a5.916 5.916 0 0 1-3.548-5.416 5.915 5.915 0 0 1 5.913-5.913 5.915 5.915 0 0 1 5.912 5.913 5.917 5.917 0 0 1-3.547 5.415v3.453h-4.73v2.945h2.078"}),o.jsx("path",{fill:"currentColor",fillOpacity:.996,d:"M494.006 9.047a1.994 1.994 0 1 0-3.988 0 1.994 1.994 0 0 0 3.988 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v2.946h4.733"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.682,d:"M513.634 14.465a5.92 5.92 0 0 1-3.55-5.42 5.919 5.919 0 0 1 5.917-5.917 5.918 5.918 0 0 1 5.916 5.917 5.92 5.92 0 0 1-3.55 5.42v3.455h-4.733v1.71"}),o.jsx("path",{fill:"currentColor",fillOpacity:.984,d:"M517.994 9.045a1.982 1.982 0 1 0-3.963 0 1.982 1.982 0 0 0 3.963 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-4.739v2.95h4.739"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.684,d:"M537.631 14.468a5.928 5.928 0 0 1-3.555-5.427 5.927 5.927 0 0 1 5.925-5.924 5.926 5.926 0 0 1 5.924 5.924 5.928 5.928 0 0 1-3.555 5.427v3.46h-3.129"}),o.jsx("path",{fill:"currentColor",fillOpacity:.961,d:"M541.974 9.04a1.961 1.961 0 1 0-3.923.001 1.961 1.961 0 0 0 3.923 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.466h-4.748v2.956h4.748"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.687,d:"M561.626 14.472a5.94 5.94 0 0 1-3.561-5.436A5.937 5.937 0 0 1 564 3.1a5.937 5.937 0 0 1 5.936 5.935 5.94 5.94 0 0 1-3.562 5.436v3.416"}),o.jsx("path",{fill:"currentColor",fillOpacity:.925,d:"M565.945 9.036a1.932 1.932 0 1 0-3.865 0 1.932 1.932 0 0 0 3.865 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.953 5.953 0 0 1-3.569 5.448v3.474h-4.759v2.963h4.759"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.691,d:"M585.621 14.478a5.953 5.953 0 0 1-3.569-5.448A5.95 5.95 0 0 1 588 3.08a5.95 5.95 0 0 1 5.949 5.949 5.952 5.952 0 0 1-3.519 5.426"}),o.jsx("path",{fill:"currentColor",fillOpacity:.882,d:"M589.908 9.03a1.896 1.896 0 1 0-3.792 0 1.896 1.896 0 0 0 3.792 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964 5.968 5.968 0 0 1-3.579 5.463v3.483h-4.771v2.97h4.771"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.695,d:"M609.615 14.485a5.968 5.968 0 0 1-3.579-5.463A5.966 5.966 0 0 1 612 3.058a5.967 5.967 0 0 1 5.965 5.964c0 1.21-.363 2.335-.983 3.275"}),o.jsx("path",{fill:"currentColor",fillOpacity:.835,d:"M613.865 9.022a1.853 1.853 0 1 0-3.706 0 1.853 1.853 0 0 0 3.706 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982 5.986 5.986 0 0 1-3.589 5.48v3.493h-4.785v2.98h4.785"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.7,d:"M633.608 14.493a5.987 5.987 0 0 1-3.59-5.48A5.984 5.984 0 0 1 636 3.031a5.984 5.984 0 0 1 5.982 5.982v.078"}),o.jsx("path",{fill:"currentColor",fillOpacity:.776,d:"M637.816 9.013a1.804 1.804 0 1 0-3.608 0 1.804 1.804 0 0 0 3.608 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a6.003 6.003 0 0 1 6.001 6.002 6.006 6.006 0 0 1-3.6 5.497v3.504H657.6v2.989h4.801"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.706,d:"M657.6 14.5a6.005 6.005 0 0 1-3.601-5.496A6.004 6.004 0 0 1 660 3.002a5.999 5.999 0 0 1 5.101 2.84"}),o.jsx("path",{fill:"currentColor",fillOpacity:.718,d:"M661.762 9.003a1.75 1.75 0 1 0-3.5 0 1.75 1.75 0 0 0 3.5 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516A6.024 6.024 0 0 1 684 2.973a6.023 6.023 0 0 1 6.021 6.02 6.026 6.026 0 0 1-3.612 5.516v3.517h-4.817v2.998h4.817"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.711,d:"M681.592 14.51a6.025 6.025 0 0 1-3.613-5.516 6.024 6.024 0 0 1 8.647-5.42"}),o.jsx("path",{fill:"currentColor",fillOpacity:.651,d:"M685.706 8.994a1.694 1.694 0 1 0-3.387 0 1.694 1.694 0 0 0 3.387 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534A6.043 6.043 0 0 1 708 2.942a6.044 6.044 0 0 1 6.042 6.042 6.047 6.047 0 0 1-3.625 5.534v3.528h-4.833v3.009h4.833"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.717,d:"M705.584 14.518a6.045 6.045 0 0 1-3.625-5.534 6.045 6.045 0 0 1 5.308-5.997"}),o.jsx("path",{fill:"currentColor",fillOpacity:.588,d:"M709.649 8.984a1.637 1.637 0 1 0-3.273 0 1.637 1.637 0 0 0 3.273 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553A6.063 6.063 0 0 1 732 2.913a6.064 6.064 0 0 1 6.062 6.061 6.067 6.067 0 0 1-3.637 5.553v3.54h-4.849v3.018h4.849"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.723,d:"M729.576 14.527a6.066 6.066 0 0 1-3.637-5.553c0-1.89.867-3.58 2.225-4.692"}),o.jsx("path",{fill:"currentColor",fillOpacity:.522,d:"M733.592 8.974a1.58 1.58 0 1 0-3.159 0 1.58 1.58 0 0 0 3.159 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.649-5.57A6.084 6.084 0 0 1 756 2.884a6.083 6.083 0 0 1 6.081 6.08 6.086 6.086 0 0 1-3.648 5.57v3.552h-4.865v3.028h4.865"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.728,d:"M753.568 14.535a6.085 6.085 0 0 1-3.336-7.5"}),o.jsx("path",{fill:"currentColor",fillOpacity:.459,d:"M757.536 8.965a1.524 1.524 0 1 0-3.048 0 1.524 1.524 0 0 0 3.048 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.733,d:"M777.561 14.543a6.104 6.104 0 0 1-3.66-5.587A6.101 6.101 0 0 1 780 2.857a6.1 6.1 0 0 1 6.099 6.1c0 2.5-1.513 4.646-3.659 5.586v3.561h-4.879v3.037h4.879"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.733,d:"M777.561 14.543a6.12 6.12 0 0 1-3.464-4.052"}),o.jsx("path",{fill:"currentColor",fillOpacity:.4,d:"M781.485 8.956a1.472 1.472 0 1 0-2.945 0 1.472 1.472 0 0 0 2.945 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.738,d:"M801.554 14.55a6.12 6.12 0 0 1-3.669-5.602A6.117 6.117 0 0 1 804 2.833a6.117 6.117 0 0 1 6.115 6.115 6.12 6.12 0 0 1-3.669 5.601v3.572h-4.892v3.045h4.892"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.738,d:"M801.554 14.55a6.124 6.124 0 0 1-1.733-1.144"}),o.jsx("path",{fill:"currentColor",fillOpacity:.345,d:"M805.438 8.948a1.426 1.426 0 1 0-2.851 0 1.426 1.426 0 0 0 2.851 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.742,d:"M825.549 14.555a6.133 6.133 0 0 1-3.678-5.614A6.131 6.131 0 0 1 828 2.812a6.131 6.131 0 0 1 6.129 6.13c0 2.512-1.52 4.67-3.677 5.613v3.58h-4.903v3.051h4.903"}),o.jsx("path",{fill:"currentColor",fillOpacity:.298,d:"M829.397 8.942a1.385 1.385 0 1 0-2.77 0 1.385 1.385 0 0 0 2.77 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.745,d:"M849.544 14.56a6.145 6.145 0 0 1-3.684-5.624c0-3.39 2.751-6.14 6.14-6.14s6.14 2.75 6.14 6.14a6.145 6.145 0 0 1-3.684 5.624v3.586h-4.912v3.058h4.912"}),o.jsx("path",{fill:"currentColor",fillOpacity:.259,d:"M853.364 8.936a1.352 1.352 0 1 0-2.703 0 1.352 1.352 0 0 0 2.703 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.748,d:"M873.541 14.564a6.153 6.153 0 0 1-3.69-5.632A6.151 6.151 0 0 1 876 2.782a6.151 6.151 0 0 1 6.149 6.15 6.154 6.154 0 0 1-3.689 5.632v3.59h-4.919v3.063h4.919"}),o.jsx("path",{fill:"currentColor",fillOpacity:.231,d:"M877.338 8.931a1.326 1.326 0 1 0-2.651 0 1.326 1.326 0 0 0 2.651 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.749,d:"M897.538 14.567a6.16 6.16 0 0 1-3.693-5.638A6.157 6.157 0 0 1 900 2.774a6.157 6.157 0 0 1 6.155 6.155 6.16 6.16 0 0 1-3.693 5.638v3.594h-4.924v3.065h4.924"}),o.jsx("path",{fill:"currentColor",fillOpacity:.212,d:"M901.321 8.929a1.309 1.309 0 1 0-2.618 0 1.309 1.309 0 0 0 2.618 0Z"}),o.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2,strokeWidth:1.75,d:"M921.537 14.568a6.162 6.162 0 0 1-3.694-5.64A6.16 6.16 0 0 1 924 2.77a6.16 6.16 0 0 1 6.157 6.157 6.162 6.162 0 0 1-3.694 5.64v3.596h-4.926v3.067h4.926"}),o.jsx("path",{fill:"currentColor",fillOpacity:.2,d:"M925.313 8.928a1.3 1.3 0 1 0-2.601 0 1.3 1.3 0 0 0 2.601 0Z"})]}));e8e.displayName="Sequence";const t8e=d.memo(({...e})=>o.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",...e,children:[o.jsx("path",{d:"M-2.463 2.568a6.162 6.162 0 0 1-3.695-5.64A6.16 6.16 0 0 1 0-9.23a6.16 6.16 0 0 1 6.158 6.157 6.162 6.162 0 0 1-3.695 5.64v3.597h-4.926V9.23h4.926",style:{fill:"none",stroke:"currentColor",strokeWidth:1.75,strokeLinecap:"round",strokeLinejoin:"round",strokeOpacity:.2},transform:"translate(12 11.997) scale(.96001)"}),o.jsx("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.68,d:"M9.18 14.24a5.912 5.912 0 0 1-3.09-5.193A5.914 5.914 0 0 1 12 3.136a5.914 5.914 0 0 1 5.912 5.911 5.916 5.916 0 0 1-3.547 5.415v3.452h-4.73v2.944h4.73"}),o.jsx("path",{fill:"currentColor",d:"M14.009 9.047a1.997 1.997 0 1 0-3.993 0 1.997 1.997 0 0 0 3.993 0z"})]}));t8e.displayName="LabsStatic";const n8e=d.memo(({size:e=32,shouldAnimate:t=!0,className:n})=>{const{_shouldAnimate:r,sequenceProps:s,staticProps:a}=yH({shouldAnimate:t,animationDuration:1.5,animationName:"animate-labsIndicator"});return o.jsx(d4,{size:e,className:n,children:r?o.jsx(e8e,{...s}):o.jsx(t8e,{...a})})});n8e.displayName="LabsLoader";const pO=d.memo(({type:e,size:t,shouldAnimate:n,className:r})=>d.useMemo(()=>{switch(e){case"research":return o.jsx(JPe,{size:t,shouldAnimate:n,className:r});case"labs":return o.jsx(n8e,{size:t,shouldAnimate:n,className:r});default:return o.jsx(Hx,{size:t,shouldAnimate:n,className:r})}},[e,t,n,r]));pO.displayName="SearchModeLoader";const Mz=I.memo(({children:e,className:t,as:n="div",active:r=!0,speed:s="normal",hoverOnly:a=!1,variant:i="default"})=>{const[l,c]=d.useState(!1),u=a?l:r;return I.createElement(n,{style:{animationDuration:s==="normal"?"1200ms":"1800ms"},className:B({shimmer:u&&i==="default","animate-gradient bg-clip-text text-transparent shimmer-super":u&&i==="super"},t),onMouseEnter:()=>c(!0),onMouseLeave:()=>c(!1)},e)});Mz.displayName="Shimmer";const r8e=I.memo(({count:e=3,variant:t="default",className:n})=>{const r="clip-path-small-shimmer",s="clip-path-default-shimmer",a=t==="small"?12:14;return o.jsxs(o.Fragment,{children:[o.jsx("svg",{width:14,height:14,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:s,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.0635 0.704214C9.13824 0.253115 8.09868 0 7 0C3.13401 0 0 3.13401 0 7C0 10.866 3.13401 14 7 14C8.09868 14 9.13824 13.7469 10.0635 13.2958C8.19825 11.8312 7 9.55552 7 7C7 4.44448 8.19825 2.16882 10.0635 0.704214Z",fill:"#D9D9D9"})})})}),o.jsx("svg",{width:12,height:12,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"absolute opacity-0",children:o.jsx("defs",{children:o.jsx("clipPath",{id:r,children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M8.57242 0.57787C7.7928 0.20734 6.92062 0 6 0C2.68629 0 0 2.68629 0 6C0 9.31371 2.68629 12 6 12C6.92062 12 7.7928 11.7927 8.57242 11.4221C7.00228 10.1385 6 8.18628 6 6C6 3.81372 7.00228 1.86154 8.57242 0.57787Z",fill:"#D9D9D9"})})})}),o.jsx("div",{className:B("gap-xs relative flex shrink-0 items-center",n),children:o.jsx("div",{className:"ml-xs flex",children:Array.from({length:e}).map((i,l)=>o.jsx("div",{className:B("relative z-0 shrink-0",{"-ml-[5px]":t==="default"},{"-ml-xs":t==="small"}),style:{width:a,height:a,...l!==e-1?{clipPath:`url(#${t==="small"?r:s})`}:{}},children:o.jsx(Mz,{as:"div",className:"bg-subtle size-full rounded-full"})},l))})})]})});r8e.displayName="CitationPileShimmer";const kz=(e,t)=>B("relative flex items-center gap-1.5",{"border-subtlest bg-subtler border rounded-full px-3 py-2":t,"border border-super/20 bg-super/10 dark:bg-super/10 focus:bg-super/20 focus:border-super/30 text-super":e&&t}),s8e=()=>{const{isMobileUserAgent:e}=xe();return e?16:18},a8e=d.memo(({modeList:e,inFlight:t,accessoryProps:n,accessory:r,defaultModeOverride:s,tabsPlaceholder:a})=>{const{result:{uuid:i,display_model:l},selectedFilterIds:c}=pn(),{topSources:u}=QPe({dedupeAttachments:!1}),{isMobileStyle:f}=xe(),{trackEvent:m}=Te(),{variation:p}=Sz(!1),{refinementFilters:h,handleResetClickAnswerMode:g,handleResetClickDefaultMode:y,handleApplyClickDefaultMode:x,handleApplyClickAnswerMode:v,handleFilterClickAnswerMode:b,isRefinementLoading:_,handleResetToOriginalState:w}=gJt(),[C,S]=d.useState(!1),{updateCurrentMode:E}=W4(),{currentModeData:{mode:k}}=Ww(),[M,j]=d.useState(!1),{isMax:R}=St(),O=dn(),{variation:D}=VMe(!1),P=R&&l==="comet_max_assistant"&&O&&D,A=d.useCallback(V=>{w(),E(V.mode),V.mode!=="default"&&n?.isOpen&&n.onClick()},[E,n,w]),T=d.useMemo(()=>e.find(W=>W.mode==="default"),[e]),N=d.useMemo(()=>e.filter(V=>V.mode!=="default"&&V.mode!=="search"&&V.mode!==s&&!(p&&V.mode==="sources")),[e,s,p]),L=d.useCallback(()=>{T&&A(T)},[A,T]),U=d.useCallback(V=>{k!==V.mode&&A(V)},[A,k]);d.useEffect(()=>{let V=null;const W=q=>{q.metaKey&&q.shiftKey&&!V&&(V=setTimeout(()=>{j(!0)},500))},Q=q=>{(!q.metaKey||!q.shiftKey)&&(V&&(clearTimeout(V),V=null),j(!1))};return document.addEventListener("keydown",W),document.addEventListener("keyup",Q),()=>{V&&clearTimeout(V),document.removeEventListener("keydown",W),document.removeEventListener("keyup",Q)}},[]);const $=d.useCallback(()=>{S(!0),m("refinement filters tab clicked",{answerMode:k})},[k,m]);return o.jsxs(ve.div,{layout:!0,layoutRoot:!0,"data-testid":Ma.ANSWER_MODE_TABS_ROOT,children:[o.jsx(z,{className:B("relative",{"border-b":!f,"pt-sm":f}),children:o.jsx("div",{className:"-mx-md px-md scrollbar-none -my-px overflow-x-auto overflow-y-hidden py-px",children:o.jsx("div",{className:"table w-full",children:o.jsx(z,{variant:"background",className:"gap-xs relative",children:o.jsxs("div",{className:"relative flex gap-1.5",children:[o.jsx("div",{className:"md:max-w-threadContentWidth md:mx-auto md:w-full",children:o.jsxs("div",{className:B("grid grid-cols-1 grid-rows-1",{"-mx-0":f,"-mx-sm":!f}),children:[!T&&o.jsx(l8e,{}),o.jsxs("div",{className:"gap-xs relative col-start-1 row-start-1 flex",children:[T&&o.jsx(i8e,{tab:T,active:k===T.mode||!!s&&k==s,onClick:L,id:i??"",inFlight:t,testId:T.testId,isScreenshotting:M,isCometMaxAssistantAnswer:P}),o.jsxs(Ye,{initial:!1,children:[N.map(V=>o.jsx(Tz,{text:V.text,active:k===V.mode,onClick:U,mode:V,icon:V.icon,id:i??"",count:V.count,inFlight:t,disabled:V.disabled,testId:V.testId,loading:V.loading,...V.mode==="sources"&&{sources:u}},V.text)),o.jsx("div",{className:"ml-auto",children:h&&h.length>0&&o.jsx(o8e,{onClick:$})})]})]}),N.length===0&&a]})}),o.jsx("div",{className:"right-0 flex items-center gap-2 md:absolute md:top-1/2 md:-translate-y-1/2",children:r})]})})})})}),h&&h.length>0&&o.jsx(GPe,{refinementFilters:h,handleFilterClick:b,selectedFilterIds:c,isOpen:C,setIsOpen:S,handleResetClick:k==="default"||!hle.includes(k)?y:g,handleApplyClick:k==="default"||!hle.includes(k)?x:v,isLoading:_})]})});a8e.displayName="AnswerModeTabs";const o8e=d.memo(({onClick:e})=>{const{isMobileUserAgent:t}=xe(),{$t:n}=Z(),{trackEventOnce:r}=Te();return d.useEffect(()=>{r("refinement filters tab viewed")},[r]),o.jsxs("button",{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":t,"py-md pl-sm pr-2.5":!t}),onClick:e,type:"button","aria-label":"Filters",children:[o.jsx(z,{variant:"subtler",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),o.jsxs("div",{className:kz(!1,t),children:[o.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:o.jsx("div",{className:"flex size-[16px] items-center justify-center",children:o.jsx(de,{icon:Ece,size:t?"sm":"xs",className:B("text-foreground opacity-80 duration-100 sm:block",{"group-hover:opacity-100":!t})})})}),o.jsx("div",{className:B("flex items-center",{"h-4":t}),children:o.jsx(F,{className:B("text-foreground whitespace-nowrap font-medium opacity-80 duration-150",{"text-xs":t,"text-sm":!t},!t&&"group-hover:opacity-100"),children:n({defaultMessage:"Filters",id:"zSOvI0LO0n"})})})]})]})});o8e.displayName="FiltersTab";const i8e=d.memo(({tab:e,active:t,onClick:n,id:r,inFlight:s,testId:a,isCometMaxAssistantAnswer:i,isScreenshotting:l})=>{const{hasAnswer:c,isAnswerSkipped:u}=pn(),{isMobileUserAgent:f}=xe(),m=d.useCallback(y=>l?"Perplexity":i?o.jsxs("div",{className:"flex items-center gap-2",children:[y,o.jsx(fw,{className:"text-max h-2.5"})]}):y,[l,i]),p=d.useMemo(()=>{switch(e.text.toLowerCase()){case"research":return"research";case"labs":return"labs";default:return"default"}},[e.text]),h=s8e(),g=B("text-foreground duration-100 group-hover:opacity-100",{"opacity-80":!t,"text-super":t&&f});return o.jsxs(ve.button,{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1":f,"py-md pl-sm pr-2.5":!f}),onClick:n,type:"button","aria-label":e.text,"data-testid":a,children:[o.jsx(z,{variant:"subtler",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t})}),o.jsxs("div",{className:kz(t,f),children:[o.jsx("div",{className:"relative flex size-4 items-center justify-center",children:o.jsx(Ye,{mode:"wait",initial:!1,children:!c&&!u?o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:e.icon?{opacity:0}:void 0,transition:{duration:.15},children:o.jsx(pO,{type:p,size:h,shouldAnimate:!0,className:g})},"spinner"):e.icon?o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.15},children:o.jsx(de,{icon:e.icon,size:f?"sm":"xs",className:g})},`icon-${e.text}`):o.jsx(ve.div,{children:o.jsx(pO,{type:p,size:h,shouldAnimate:!1,className:g})},"empty-spinner")})}),o.jsxs("div",{className:"relative",children:[o.jsx(Ye,{initial:!1,mode:"wait",children:o.jsx(ve.div,{className:"absolute whitespace-nowrap",initial:c?{opacity:1,y:0}:{opacity:0,y:20},animate:{opacity:1,y:0},exit:c?{opacity:0}:{opacity:0,y:-20},transition:{duration:l?0:c?.15:.3},children:o.jsx(F,{className:B("text-foreground whitespace-nowrap font-medium duration-150 group-hover:opacity-100",{"text-xs":f,"text-sm":!f,"opacity-80":!t,"text-super":t&&f}),children:m(e.text)})},`text-${e.text}`)}),o.jsx("div",{className:"invisible",children:o.jsx(F,{className:B("text-foreground whitespace-nowrap",{"text-xs font-medium":f,"text-sm font-[475]":!f}),children:m(e.text)})})]})]}),t&&o.jsx(Nz,{id:r,inFlight:s,isScreenshotting:l})]})});i8e.displayName="StaticTabWithAnimatedContent";const l8e=d.memo(()=>{const e=d.useMemo(()=>({mode:"default",text:"placeholder",count:0,disabled:!1,icon:void 0,loading:!1,testId:"placeholder",id:"d"}),[]);return o.jsx("div",{className:"pointer-events-none invisible col-start-1 row-start-1 opacity-0",role:"none",children:o.jsx(Tz,{text:"placeholder",active:!1,onClick:vn,mode:e,icon:void 0,id:"placeholder",count:0,inFlight:!1,disabled:!1,testId:"placeholder",loading:!1},"placeholder")})});l8e.displayName="PlaceholderTab";const Tz=d.memo(({text:e,active:t,mode:n,onClick:r,icon:s,id:a,count:i,inFlight:l,disabled:c,testId:u,loading:f,sources:m})=>{const{isMobileUserAgent:p}=xe(),h=d.useCallback(()=>{r(n)},[r,n]),g=!p&&i!==void 0&&i>0;return o.jsxs("button",{className:B("focus-visible:ring-offset-inverse focus-visible:ring-super group pointer-events-auto relative select-none rounded-md focus-visible:outline-none focus-visible:ring-1",{"p-0 pr-1 last:pr-4":p,"py-md pl-sm pr-2.5":!p}),onClick:h,type:"button","aria-label":e,disabled:c,"data-testid":u,children:[o.jsx(z,{variant:"subtler",className:B("absolute inset-x-0 inset-y-2.5 rounded-md opacity-0 transition-opacity duration-150",{"group-hover:opacity-100":!t&&!c&&!p})}),o.jsxs("div",{className:kz(t,p),children:[o.jsx("div",{className:"relative flex h-[16px] w-auto items-center",children:o.jsx(c8e,{icon:s,loading:f,active:t,disabled:c,mode:n,sources:m})}),o.jsxs("div",{className:B("flex items-center",{"h-4":p}),children:[o.jsx(F,{className:B("text-foreground whitespace-nowrap font-medium duration-150",{"text-xs":p,"text-sm":!p,"text-super":t&&p},!c&&!p&&"group-hover:opacity-100",c?"opacity-50":!t&&"opacity-80"),children:e}),g&&o.jsxs(o.Fragment,{children:[o.jsx("span",{className:"px-xs ml-px leading-none opacity-35",children:""}),o.jsx(nz,{count:i,className:B(c?"opacity-40":"opacity-65")})]})]})]}),t&&o.jsx(Nz,{id:a,inFlight:l})]})});Tz.displayName="AnswerModeTab";const Nz=d.memo(({id:e,inFlight:t,isScreenshotting:n})=>{const{isMobileUserAgent:r}=xe();return o.jsx(ve.div,{className:B("bg-inverse inset-x-sm absolute -bottom-px h-[2.5px]",{hidden:r}),transition:{duration:n?0:.1,ease:"easeOut"},layoutId:t?void 0:`answer-mode-tab-underline-${e}`})});Nz.displayName="Underline";const SJt=({sources:e})=>{const{isEntryInFlight:t}=pn();return e?.length?o.jsx(EH,{sources:e,count:3,variant:"small"}):t?o.jsx(r8e,{count:3,variant:"small"}):null},c8e=({icon:e,loading:t,active:n,disabled:r,mode:s,sources:a})=>{const{isMobileUserAgent:i}=xe(),l=s8e();return s.mode==="sources"?o.jsx("div",{className:"w-max flex-none",children:o.jsx(SJt,{sources:a})}):o.jsx("div",{className:"flex size-[16px] items-center justify-center",children:e?t?o.jsx(Fr,{size:l}):o.jsx(de,{icon:e,size:i?"sm":"xs",className:B("text-foreground duration-100 sm:block",{"group-hover:opacity-100":!r&&!i,"text-super":n&&i},r?"opacity-50":!n&&"opacity-80")}):o.jsx(Hx,{size:l,shouldAnimate:!1,className:B("text-foreground duration-100",{"group-hover:opacity-100":!r&&!i,"opacity-80":!n,"text-super":n&&i})})})};c8e.displayName="AnswerModeIcon";function EJt({entryUUID:e,reason:t,callback:n}){const[r,s]=d.useState(!1),a=d.useRef(!1),{inFlight:i}=Ft();return d.useEffect(()=>{!i&&a.current&&(a.current=!1,s(!1),n())},[i,n]),{terminateEntry:()=>{a.current=!0,s(!0),Su({entryUUID:e,reason:t})},isTerminating:r}}const MJt=({maxHeightPx:e})=>{const[t,n]=d.useState(null),[r,s]=d.useState(!1),a=d.useRef(null),i=d.useCallback(l=>{l&&a.current&&a.current!==l&&s(!1),a.current=l,n(l)},[]);return d.useLayoutEffect(()=>{if(!t||typeof window>"u")return;const l=new ResizeObserver(c=>{for(const u of c)u.target.scrollHeight>e&&(console.log("[useTruncation] Setting isTruncated to true"),s(!0),l.disconnect())});return l.observe(t),()=>{l.disconnect()}},[t,e]),d.useMemo(()=>({ref:i,isTruncated:r}),[r,i])},u8e=d.memo(({submitQuery:e,isFirstResult:t})=>{const{$t:n}=Z(),{inFlight:r,editQueryValue:s,isEditingQuery:a,isFailed:i,userClarifications:l,selectedRefinementQuery:c,result:{uuid:u,query_str:f,backend_uuid:m,frontend_context_uuid:p,display_model:h,attachments:g,side_by_side_metadata:y,user_selected_model:x,sources:v},actions:{setEditQueryValue:b,setIsEditingQuery:_}}=pn(),{results:w}=Ft(),C=Op(),S=ji(),{trackEvent:E}=vx(),{isMobileStyle:k}=xe(),{openModal:M}=xt(),j=c??f,R=d.useCallback(()=>{b(j??""),_(!1),m&&E("cancel edit query click",{entryUUID:m})},[m,j,b,_,E]),O=d.useRef(null),D="editable-thread-title",{updateCurrentMode:P}=W4();yp("thread-title",{skip:!t}),d.useEffect(()=>{r&&_(!1)},[_,r]);const A=d.useCallback(()=>{p?(s!==j&&e({rawQuery:s,existingEntryUUID:m,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:C?void 0:p,promptSource:"user",querySource:"edit",attachments:g,modelPreferenceOverride:h,sourcesOverride:CE(v?.sources)}),_(!1),P("default")):ne.warn(new Error(`No frontend UUID for thread backendUUID=${m}`))},[m,p,C,s,j,g,v,h,e,_,P]),{terminateEntry:T,isTerminating:N}=EJt({entryUUID:m,reason:D,callback:A}),L=d.useCallback(()=>{S&&T()},[S,T]),U=d.useCallback(()=>{S&&(E("confirm edit query click",{entryUUID:m??"",newQuery:s}),p?A():ne.warn(new Error(`No frontend UUID for thread backendUUID=${m}`)))},[S,m,p,A,E,s]),$=rw(),V=d.useCallback(()=>{r?L():U()},[r,L,U]),W=d.useCallback(ae=>{ga.isEnterKeyWithoutShift(ae)?(ae.preventDefault(),V()):ga.isEscapeKey(ae)&&R()},[V,R]),{quote:Q,actualQuery:q}=qd(j,l),H=d.useCallback(()=>{b(q??""),_(!0)},[b,q,_]),K=d.useCallback(ae=>{ae.preventDefault(),navigator.clipboard.writeText(j??"")},[j]),G=s==="",ee=!!S,Y=cn.hasUnspecifiedSelectionStatus(y)&&cn.hasMultipleSiblingEntries(w,y?.sibling_uuid),te=d.useMemo(()=>({maskImage:"linear-gradient(to bottom, black 50%, transparent)"}),[]),se=d.useCallback(()=>{M("taskShortcutModal",{source:"thread_create",shortcut:{prompt:j??"",searchModel:x??k$,sources:CE(v?.sources)}})},[M,j,x,v]);return o.jsxs("div",{className:"md:mt-xs relative z-10",children:[o.jsxs("div",{className:"mb-xs group relative flex items-end gap-0.5 pt-6 md:pt-0",children:[o.jsx("div",{className:"-inset-md absolute select-none"}),o.jsx("div",{className:"md:mr-xl min-w-0 flex-1",children:a?o.jsx(TJt,{onKeyDown:W,editQueryValue:s,setEditQueryValue:b,isEmptyQuery:G,inputRef:O}):o.jsx(f8e,{queryString:q??"",isFirstResult:t,isFailed:i,quote:Q},u)}),ee&&o.jsx("div",{className:"absolute bottom-0 right-0 flex shrink-0",children:o.jsx("div",{"data-testid":"edit-query-button-group",className:B("bg-base mb-xs shadow-subtle border-subtlest relative flex shrink-0 flex-row rounded-[10px] border p-[1.5px] duration-150 group-hover:pointer-events-auto group-hover:opacity-100",{"pointer-events-none opacity-0":!a,"pointer-events-auto opacity-100":a||N}),children:a?k?null:o.jsxs(o.Fragment,{children:[o.jsx(me,{toolTip:n({defaultMessage:"Save and rewrite answer",id:"J0SzInCu9R"}),icon:dr,size:"tiny",variant:"primary",onClick:V,extraCSS:"shrink-0",testId:"confirm-edit-query-button",disabled:N,isLoading:N}),o.jsx("div",{className:"m-[1.5px] w-px border-r border-transparent"}),o.jsx(me,{icon:kt,size:"tiny",variant:"common",extraCSS:"!bg-base !text-quiet hover:!bg-subtler shrink-0",onClick:R,testId:"cancel-edit-query-button",disabled:N})]}):o.jsxs(o.Fragment,{children:[o.jsx(me,{icon:Ru,size:"tiny",variant:"common",onClick:H,disabled:Y,extraCSS:B("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-r-[2px]"),testId:"edit-query-button",toolTip:n({defaultMessage:"Edit Query",id:"b3OoXBV5TQ"})}),o.jsx(z,{className:"m-[1.5px] w-px border-r"}),o.jsx(me,{icon:Xce,size:"tiny",variant:"common",extraCSS:B("!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",{"!rounded-r-[2px]":$}),onClick:K,testId:"copy-query-button",toolTip:n({defaultMessage:"Copy Query",id:"pLS6m4WFYK"}),clickFeedback:!0}),$&&o.jsxs(o.Fragment,{children:[o.jsx(z,{className:"m-[1.5px] w-px border-r"}),o.jsx(me,{icon:Wk,size:"tiny",variant:"common",extraCSS:"!bg-base hover:!bg-subtler shrink-0 !text-quiet !rounded-l-[2px]",onClick:se,testId:"save-as-shortcut-button",toolTip:n({defaultMessage:"Save query as shortcut",id:"iOwvGHWuK/"}),clickFeedback:!0})]})]})})})]}),a&&k&&o.jsxs("div",{className:"gap-x-sm mb-sm pb-sm -inset-x-xs absolute top-full mt-[12px] flex justify-end",children:[o.jsx(z,{className:"-inset-lg -top-sm absolute",variant:"background",style:te}),o.jsx(me,{size:"small",variant:"border",onClick:R,text:n({defaultMessage:"Cancel",id:"47FYwba+bI"}),extraCSS:"!bg-base",disabled:N}),o.jsx(me,{size:"small",variant:"primary",onClick:V,text:n({defaultMessage:"Done",id:"JXdbo8Vnlw"}),disabled:N,isLoading:N})]})]})});u8e.displayName="EditableThreadTitle";const hO=144,d8e=I.memo(({queryString:e="",className:t="",quote:n,isFirstResult:r,isFailed:s})=>{const{$t:a}=Z(),[i,l]=d.useState(!1),{ref:c,isTruncated:u}=MJt({maxHeightPx:hO}),f=d.useMemo(()=>{const p=xW(e);return p.length<75?"entry-title-100":p.length<200?"entry-title-200":"entry-title-300"},[e]),m=d.useCallback(()=>{l(!i)},[i]);return o.jsxs("div",{className:"group/title relative inline-flex flex-col",children:[n&&o.jsxs(F,{variant:"small",color:"light",className:"border-super bg-subtlest px-sm mb-2 flex items-center border-l-2 py-1.5",children:[o.jsx(QOe,{size:18,className:"text-super mr-sm shrink-0 -translate-y-px rotate-180"}),o.jsx("span",{className:"line-clamp-1",children:n})]}),o.jsx("div",{className:"overflow-hidden",children:o.jsxs(kJt,{isTruncated:u,isExpanded:i,children:[o.jsx(F,{variant:f,as:r?"h1":"div",ref:c,className:B("group/query relative whitespace-pre-line !text-wrap break-words [word-break:break-word]",t),children:s?o.jsx("div",{className:"gap-x-sm flex items-center",children:o.jsx("span",{children:e?o.jsx(Rk,{editQueryValue:e,disabled:!0}):a({defaultMessage:"Something went wrong.",id:"iuY8kxCDQT"})})}):o.jsx(Rk,{editQueryValue:e,disabled:!0})}),o.jsx("div",{className:B("text-inverse pointer-events-none absolute inset-x-0 bottom-0 h-1/4 transition-opacity duration-100",{"opacity-0":i}),style:{background:!i&&u?"linear-gradient(transparent, currentColor)":void 0}})]})}),u&&o.jsx("div",{className:"top-xs relative flex",children:o.jsx(Me,{size:"tiny","data-testid":"toggle-query-expand-button",extraCSS:"-mt-0.5 -ml-sm",chevron:!0,chevronIcon:i?$y:Wn,onClick:m,text:i?a({defaultMessage:"Show less",id:"qyJtWyZ0yt"}):o.jsx(ie,{defaultMessage:"Show more",id:"kgNFsmh2uY",description:"Show more of the query."})})})]})});d8e.displayName="DisplayQueryBase";const f8e=d.memo(d8e);f8e.displayName="DisplayQuery";const kJt=({children:e,isTruncated:t,isExpanded:n})=>t?o.jsx(na,{transition:{duration:.2,ease:an},initial:!1,mode:"popLayout",supportZeroHeight:!1,children:o.jsx(Zr,{className:"overflow-hidden",style:{maxHeight:n?void 0:hO},children:e})}):o.jsx("div",{style:{maxHeight:hO},children:e}),m8e=(e,t)=>{const n=xW(e);return n.length<75?B("font-display text-2xl md:text-3xl font-semimedium",{"translate-y-[1px]":!t}):n.length<200?"font-display text-xl font-medium":"font-sans font-medium"},TJt=({onKeyDown:e,editQueryValue:t,setEditQueryValue:n,isEmptyQuery:r,inputRef:s})=>{const a=d.useCallback(i=>{n(i)},[n]);return o.jsxs("div",{className:"relative w-full min-w-0",children:[o.jsx("div",{className:"-inset-y-xs -left-sm border-subtlest bg-subtlest -right-sm md:-right-md absolute rounded-md border"}),o.jsxs("div",{className:"relative grid",children:[o.jsx(Rk,{onKeyDown:e,editQueryValue:t,onChange:a,inputRef:s}),o.jsx("div",{className:B("pointer-events-none col-start-1 row-start-1 opacity-0",m8e(t)),children:r?o.jsx(o.Fragment,{children:""}):o.jsx(Rk,{editQueryValue:t,disabled:!0})})]})]})},Rk=({onKeyDown:e=vn,editQueryValue:t,disabled:n,onChange:r=vn,inputRef:s})=>{const{$t:a}=Z(),{isMobileUserAgent:i}=xe();return o.jsx("div",{className:B("text-foreground block h-auto w-full resize-none appearance-none overflow-hidden bg-transparent focus:outline-none","caret-super selection:bg-super/50 selection:text-foreground dark:selection:bg-super/10 dark:selection:text-super",m8e(t,n),"[&_[contenteditable]]:!font-display [&_[contenteditable]]:!bg-transparent","[&_[contenteditable]]:max-h-none [&_[contenteditable]]:!overflow-hidden [&_[contenteditable]]:sm:max-h-none [&_[contenteditable]]:lg:max-h-none","[&_[contenteditable]+*>*]:opacity-50","[&>*]:p-0"),style:{gridArea:"1/-1"},children:o.jsx(DT,{onKeyDown:e,placeholder:a({defaultMessage:"Ask anything",id:"AUouhaZgFv"}),value:t,onChange:r,minRows:0,isMobileStyle:!1,isMobileUserAgent:i,useLexical:!0,autoFocus:!0,disableInput:n,ref:s})})},NJt=({isFirstResult:e,isLastResult:t,submitQuery:n,idx:r,accessory:s})=>{const a=pn(),{result:{backend_uuid:i,upsell_information:l,classifier_results:c},isEntryInFlight:u,showAgentWorkflow:f,isAnswerSkipped:m}=a,{isAllPlansFinished:p}=pJt(a),h=d.useCallback(()=>{wZe({entryUUID:i,reason:"skip-search"})},[i]),{value:g}=jt({flag:"skip-search-button",subjectType:"visitor_id",defaultValue:!1}),{variation:y}=Sz(!1),x=c!==void 0&&Object.keys(c).length>0,v=c?.skip_search||c?.mhe_predictions?.skip_search,b=!y||e&&x&&!v,{answerModeActionList:_,currentModeData:w,defaultModeOverride:C}=Ww();return o.jsxs(o.Fragment,{children:[o.jsx(ho,{isSamsungBrowser:!0,isFirefoxDefaultSearch:!0,children:o.jsx(Qx,{position:"top",idx:r,upsellInformation:l,backendUuid:i,isLastResult:t,inFlight:u,className:"max-w-threadContentWidth mt-md relative z-20 mx-auto"})}),o.jsx("div",{className:B("bg-base erp-sidecar:pt-0 erp-mobile-sidecar:pt-0",{"md:pt-headerHeight":!e},{"pt-headerHeight":e}),children:o.jsxs("div",{className:B("mx-auto",{"max-w-threadContentWidth":w.width==="default","max-w-none":w.width==="full","max-w-threadWidth":w.width==="wide"}),children:[o.jsx("div",{className:"max-w-threadContentWidth relative isolate z-20 mx-auto",children:o.jsx(u8e,{isFirstResult:e,submitQuery:n})}),o.jsxs("div",{className:"relative",children:[b&&o.jsx(a8e,{modeList:_,defaultModeOverride:C,inFlight:u,accessory:s}),!p&&f&&!m&&o.jsx(bz,{className:"bg-base pt-md",skipSearchEnabled:g,onSkipSearch:h})]})]})})]})},jJt=I.memo(NJt),p8e=I.memo(({submitQuery:e})=>{const t="trigger-entry-rewrite",n=Ot(),{result:{backend_uuid:r,frontend_context_uuid:s,attachments:a,display_model:i},idx:l,editQueryValue:c}=pn(),u=Op(),f=window.location.hash.slice(1),m=parseInt(f,10),p=n?.get("rw")==="true";return d.useEffect(()=>{if(!(isNaN(m)||l!==m)&&p){Jg({rw:void 0});const h=()=>e({rawQuery:c,existingEntryUUID:r,redoSearch:!0,collection:null,newFrontendContextUUID:null,existingFrontendContextUUID:u?void 0:s,promptSource:"user",querySource:"rewrite-url-param",attachments:a,modelPreferenceOverride:i});r?Su({entryUUID:r,reason:t}).catch(g=>{ne.error("Error terminating entry",g)}).finally(h):h()}},[p,u,e,m,l,r,c,s,a,i]),null});p8e.displayName="TriggerEntryRewrite";const h8e=I.memo(()=>o.jsx(un,{children:o.jsx("div",{className:"gap-sm flex flex-wrap",children:Array.from({length:8}).map((e,t)=>o.jsx(g8e,{index:t},t))})}));h8e.displayName="ImagesModeLoader";const g8e=I.memo(({index:e})=>{const{isMobileStyle:t}=xe(),{isLargeScreen:n,isXLargeScreen:r}=Np(),s=d.useMemo(()=>t?120:r?240:n?200:180,[t,n,r]);return o.jsx("div",{className:B("bg-subtler grow basis-1/3 rounded-xl md:basis-1/4",{"w-1/2 !max-w-none":e===1}),style:{height:s}})});g8e.displayName="Item";const y8e=I.memo(()=>o.jsx(un,{children:o.jsx(z,{variant:"subtler",className:"h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));y8e.displayName="JobsModeLoader";const jz=I.memo(()=>o.jsxs("div",{className:"gap-md @container flex w-full flex-row",children:[o.jsx("div",{className:"md:@[1458px]:w-[874px] md:@[1458px]:shrink-0 w-full md:w-3/5",children:o.jsx(v8e,{})}),o.jsx("div",{className:"@md:w-[570px] @md:@[1458px]:w-full hidden md:block",children:o.jsx(x8e,{})})]}));jz.displayName="PlacesModeLoader";const x8e=I.memo(()=>o.jsx(un,{children:o.jsx(z,{variant:"subtler",className:"sticky h-[180px] w-full overflow-hidden rounded-xl [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]"})}));x8e.displayName="PlacesModeMapLoader";const v8e=I.memo(()=>o.jsx(un,{children:o.jsx("div",{className:"gap-md grid h-[180px] grid-cols-[repeat(auto-fill,minmax(220px,1fr))] overflow-hidden [mask-image:linear-gradient(to_bottom,#000_0%,transparent_160px)]",children:Array.from({length:8}).map((e,t)=>o.jsx(b8e,{},t))})}));v8e.displayName="PlacesModeGridLoader";const b8e=I.memo(()=>o.jsx("div",{className:B("bg-subtler aspect-[4/3] w-full rounded-xl")}));b8e.displayName="Item";const _8e=d.memo(()=>{const{isMobileStyle:e}=xe();return o.jsxs(un,{className:"-mx-md pl-md md:mx-auto",children:[o.jsx("div",{className:"gap-md md:mb-lg mb-md flex auto-rows-fr grid-cols-2 overflow-hidden md:grid md:grid-cols-3",children:Array.from({length:3}).map((t,n)=>o.jsx(w8e,{},n))}),o.jsxs("div",{className:"gap-sm flex flex-col",children:[o.jsxs("div",{className:"grid grid-cols-1 grid-rows-1 items-center",children:[o.jsx(F,{variant:e?"base":"section-title",className:"col-start-1 row-start-1",children:""}),o.jsx("div",{className:"bg-subtler col-start-1 row-start-1 h-3 w-32 grow rounded-full md:h-4"})]}),o.jsx("div",{className:"gap-md pr-md flex auto-rows-fr grid-cols-2 flex-col md:grid md:pr-0",children:Array.from({length:2}).map((t,n)=>o.jsx(C8e,{},n))})]})]})});_8e.displayName="ShoppingModeLoader";const w8e=d.memo(()=>o.jsx("div",{className:B("bg-subtler aspect-video h-[327px] w-[70vw] grow rounded-xl md:h-[413px] md:w-full")}));w8e.displayName="Item";const C8e=d.memo(()=>o.jsx("div",{className:"bg-subtler aspect-video h-[144px] w-full grow rounded-md"}));C8e.displayName="SmallItem";const S8e=I.memo(()=>o.jsx(un,{children:o.jsx("div",{className:"gap-xs grid auto-cols-fr auto-rows-fr grid-cols-2 sm:grid-cols-3 xl:grid-cols-4",children:Array.from({length:8}).map((e,t)=>o.jsx(E8e,{},t))})}));S8e.displayName="VideoModeLoader";const E8e=I.memo(()=>o.jsx("div",{className:B("bg-subtler aspect-video w-full grow rounded-md")}));E8e.displayName="Item";const AJt=he(async()=>{const{ShoppingMode:e}=await X(async()=>{const{ShoppingMode:t}=await import("./ShoppingMode-CeJuPJvA.js");return{ShoppingMode:t}},__vite__mapDeps([455,1,2,5,114,432,456,457,7,6]));return{default:e}},{loading:()=>o.jsx(_8e,{})}),IJt=he(async()=>{const{HotelsMode:e}=await X(async()=>{const{HotelsMode:t}=await import("./HotelsMode-h67ZB1Eu.js");return{HotelsMode:t}},__vite__mapDeps([458,1,2,459,7,6,5,32,460,457]));return{default:e}},{loading:()=>o.jsx(jz,{})}),RJt=he(async()=>{const{JobsMode:e}=await X(async()=>{const{JobsMode:t}=await import("./JobsMode-DV1q_iVX.js");return{JobsMode:t}},__vite__mapDeps([461,1,2,5,6,441,7]));return{default:e}},{loading:()=>o.jsx(y8e,{})}),PJt=he(async()=>{const{VideosMode:e}=await X(async()=>{const{VideosMode:t}=await import("./VideosMode-BP8Sds7L.js");return{VideosMode:t}},__vite__mapDeps([462,1,2,5,463,43,44,45,6,457,7]));return{default:e}},{loading:()=>o.jsx(S8e,{})}),LJt=he(async()=>{const{ImagesMode:e}=await X(async()=>{const{ImagesMode:t}=await import("./ImagesMode-CihnzpWf.js");return{ImagesMode:t}},__vite__mapDeps([464,1,2,5,463,433,6,465,457,7]));return{default:e}},{loading:()=>o.jsx(h8e,{})}),OJt=he(async()=>{const{MapsMode:e}=await X(async()=>{const{MapsMode:t}=await import("./MapsMode-CdcRki6O.js");return{MapsMode:t}},__vite__mapDeps([466,1,2,7,32,5,6,460,457]));return{default:e}},{loading:()=>o.jsx(jz,{})}),DJt=he(async()=>{const{AssetsMode:e}=await X(async()=>{const{AssetsMode:t}=await import("./AssetsMode-BmFzpc52.js").then(n=>n.b);return{AssetsMode:t}},__vite__mapDeps([108,1,2,5,6,17,7,18]));return{default:e}},{loading:()=>o.jsx(MPe,{})}),FJt=he(async()=>{const{TasksMode:e}=await X(async()=>{const{TasksMode:t}=await import("./TasksMode-DnvVWzkA.js");return{TasksMode:t}},__vite__mapDeps([467,1,2,426,5,6,427,17,7,18,19,468]));return{default:e}},{loading:()=>o.jsx(kPe,{})}),M8e=I.memo(({isLastResult:e,isFirstResult:t,sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:i,deleteLastResult:l,setQuote:c,scrollToListItem:u,lastResultBuffer:f,idx:m})=>{const{answerModeActionList:p,currentModeData:h}=Ww(),{result:{backend_uuid:g,context_uuid:y,attachments:x,status:v,frontend_context_uuid:b,query_str:_,parent_info:{mode:w,url_slug:C}={}},isEntryInFlight:S,webResults:E}=pn(),k=Op(),M=w&&C,[j,R]=d.useState(!1),O=d.useRef(new Set),{trackEvent:D}=Te();d.useEffect(()=>{if(!(g?.length===0||g===uU||y?.length===0))for(const U of p)O.current.has(U.mode)||(O.current.add(U.mode),D("answer mode tab viewed",{answerMode:U.mode,entryUUID:g,contextUUID:y}))},[p,D,g,y]);const P=d.useCallback(()=>{u(m,{smooth:!0})},[u,m]);d.useEffect(()=>{typeof window>"u"||v!=="PENDING"||P()},[S,v,P]);const A=d.useMemo(()=>({backend_uuid:g,frontend_context_uuid:b,query_str:_}),[g,b,_]),T=d.useMemo(()=>{if(h.mode!=="default")return h.mode==="images"?k?void 0:o.jsx(T8e,{result:A,setIsGeneratingImage:R,isGeneratingImage:j}):h.mode==="assets"?o.jsx(k8e,{}):null},[h.mode,k,A,j]),N=x&&x.length>0,L=d.useMemo(()=>{if(e&&f)return{paddingBottom:`${f+(N?52:0)}px`}},[e,f,N]);return o.jsxs(z,{className:B({"erp-sidecar:pt-0 erp-mobile-sidecar:pt-0":t&&!M,"erp-sidecar:min-h-[var(--sidecar-content-height)] min-h-[var(--page-content-height)] md:min-h-[var(--page-content-height-without-header)]":e}),style:L,children:[o.jsx(p8e,{submitQuery:r}),o.jsx(TPe,{webResults:E,children:o.jsxs("div",{className:B("isolate mx-auto",{"px-md max-w-none":h.width==="full","max-w-threadWidth px-md md:px-lg":h.width==="wide","px-md":h.width==="default"}),children:[o.jsx(jJt,{isFirstResult:t,submitQuery:r,isLastResult:e,idx:m,accessory:T}),o.jsx("div",{className:B("py-md md:pb-headerHeight mx-auto",{"max-w-threadWidth":h.width==="wide","max-w-none":h.width==="full","max-w-threadContentWidth":h.width==="default","border-subtlest border-b":!e}),children:o.jsxs(Ye,{initial:!1,children:[h.mode==="default"&&o.jsx(Bi,{id:`default-mode-${b}`,children:o.jsx(zPe,{sbsEntriesGroup:n,submitQuery:r,shouldShowProductFeedback:s,feedbackEntryUUID:a,shouldShowRecruitmentBanner:i,deleteLastResult:l,setQuote:c})}),h.mode==="shopping"&&o.jsx(Bi,{id:`shopping-mode-${b}`,children:o.jsx(AJt,{})}),h.mode==="hotels"&&o.jsx(Bi,{id:`hotels-mode-${b}`,children:o.jsx(IJt,{})}),h.mode==="places"&&o.jsx(Bi,{id:`maps-mode-${b}`,children:o.jsx(OJt,{})}),h.mode==="jobs"&&o.jsx(Bi,{id:`jobs-mode-${b}`,children:o.jsx(RJt,{})}),h.mode==="videos"&&o.jsx(Bi,{id:`videos-mode-${b}`,children:o.jsx(PJt,{})}),h.mode==="images"&&o.jsx(Bi,{id:`images-mode-${b}`,children:o.jsx(LJt,{isGeneratingImage:j})}),h.mode==="sources"&&o.jsx(Bi,{id:`sources-mode-${b}`,children:o.jsx(YPe,{})}),h.mode==="assets"&&o.jsx(Bi,{id:`assets-mode-${b}`,children:o.jsx(DJt,{})}),h.mode==="tasks"&&o.jsx(Bi,{id:`tasks-mode-${b}`,children:o.jsx(FJt,{})})]})})]})})]})});M8e.displayName="ThreadEntryInner";const k8e=I.memo(()=>{const e="assets-accessory",{$t:t}=Z(),{inFlight:n,result:{backend_uuid:r}}=pn(),{exportAllAssets:s,isExporting:a}=_Yt({reason:e,entryUUID:r}),{isMobileStyle:i}=xe(),l=d.useCallback(()=>s(),[s]);return n||i?null:o.jsx(_z,{text:t({defaultMessage:"Download all",id:"V1UrPNM96z"}),size:"tiny",icon:XOe,onClick:l,isLoading:a,disabled:a})});k8e.displayName="AssetsAccessory";const T8e=I.memo(({result:e,setIsGeneratingImage:t,isGeneratingImage:n})=>{const r="generate-image-accessory",{createLimit:s}=wo({reason:r}),{onGenerateImageClick:a}=mPe({reason:r}),{$t:i}=Z(),{isMobileStyle:l}=xe(),c=d.useMemo(()=>({entryUUID:e.backend_uuid,entryTitle:e.query_str??"",frontendContextUUID:e.frontend_context_uuid??""}),[e.backend_uuid,e.frontend_context_uuid,e.query_str]),u=d.useCallback(({style:m,customInstructions:p,onFailure:h})=>a({entryUUID:e.backend_uuid,imageStyle:m,customInstructions:p,setIsLoadingGeneratedImage:t,onSuccessCallback:()=>t(!1),onFailureCallback:g=>h(g)}),[a,e.backend_uuid,t]),f=d.useCallback(({onClick:m,isRateLimitReached:p,isDisabled:h,buttonIcon:g,text:y})=>o.jsx(_z,{text:y,size:"tiny",icon:g,onClick:m,disabled:h||p||n,extraCSS:"!py-md"}),[n]);return o.jsx(ve.div,{className:"py-sm pl-sm ml-auto",children:!l&&o.jsx(vPe,{entry:c,btnText:i(n?{defaultMessage:"Generating...",id:"A/lLjOnjl0"}:{defaultMessage:"Generate Image",id:"DjAvWI2RyU"}),userCreateLimit:s,isDisabled:!1,onGenerateClick:u,buttonComponent:f})})});T8e.displayName="GenerateImageAccessory";const N8e=d.memo(({idx:e,result:t,sbsEntriesGroup:n,isLastResult:r,isFirstResult:s,lastResultBuffer:a})=>{const{inFlight:i}=Ft(),{scrollToListItem:l}=V4(),{submitQuery:c,shouldShowProductFeedback:u,feedbackEntryUUID:f,shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h}=Sa(),g=d.useCallback(async y=>{i||c(y)},[c,i]);return o.jsx($W,{idx:e,result:t,inFlight:i,isLastResult:r,isFirstResult:s,scrollToListItem:l,submitQuery:g,children:o.jsx(tz,{scrollToListItem:l,children:o.jsx(xke,{children:o.jsx(M8e,{isLastResult:r,isFirstResult:s,sbsEntriesGroup:n,shouldShowProductFeedback:u,feedbackEntryUUID:f??"",shouldShowRecruitmentBanner:m,deleteLastResult:p,setQuote:h,submitQuery:g,scrollToListItem:l,lastResultBuffer:a,idx:e})})})})});N8e.displayName="ThreadEntry";const j8e=I.memo(({children:e,forceVisible:t=!1,unmeasuredHeight:n,rootMargin:r,threshold:s,root:a,ref:i})=>{const[l,c]=d.useState(0),[u,f]=d.useState(t),[m,p]=d.useTransition(),[h,g]=d.useState(1),y=d.useRef(0),x=d.useRef(null),v=d.useRef(null),b=d.useRef(null),_=d.useRef(null);d.useEffect(()=>{const C=x.current,S=v.current;if(!(!C||!S||t))return b.current=new ResizeObserver(([E])=>{if(!E)return;const k=E.contentRect.height,M=E.contentRect.width;p(()=>{c(j=>k||j),y.current||(y.current=M),y.current!==M&&(y.current=M,g(j=>j+1))})}),_.current=new IntersectionObserver(([E])=>{E&&p(()=>f(E.isIntersecting))},{rootMargin:r,threshold:s,root:a}),b.current?.observe(C),_.current?.observe(S),()=>{b.current?.disconnect(),_.current?.disconnect()}},[t,n,r,s,a]),d.useEffect(()=>{const C=v.current;return!C||!h||t?void 0:UJt(()=>{_.current?.unobserve(C),f(!0),requestAnimationFrame(()=>_.current?.observe(C))})},[h,t]);const w=d.useCallback(C=>{x.current=C,i instanceof Function?i(C):i&&(i.current=C)},[i]);return o.jsx("div",{style:t?void 0:{minHeight:`${l||n}px`},ref:v,children:o.jsx("div",{ref:w,children:t||u?e:null})})});j8e.displayName="LazyContainer";let gle=Promise.resolve();const UJt=e=>{if("requestIdleCallback"in window){const t=requestIdleCallback(e);return()=>cancelIdleCallback(t)}else{let t=!1;return gle=gle.then(async()=>{t||(e(),await new Promise(n=>setTimeout(n,100)))}).catch(vn),()=>t=!0}},yle=1e3,BJt=1,Az=I.memo(e=>{const t="thread",{deprecatedOpenToast:n}=fn(),{results:r}=Ft(),{setQuote:s}=Sa(),{scrollContainerRef:a}=ti(),{refs:i}=V4(),l=Lt(),[c,u]=d.useState(!1),f=Z();mZt({reason:t});const m=d.useMemo(()=>Kbe(r?.length?r:e.placeholderResults||[]),[r,e.placeholderResults]);d.useEffect(()=>{m.some(v=>v[0]?.has_expired_attachments)&&n(f.formatMessage({id:"zR3dvwKUWo",defaultMessage:"Some files have expired. Please reupload files to continue."}),"error",3)},[m,n,f]);const p=d.useMemo(()=>{if(typeof window>"u")return-1;const x=window.location.hash.slice(1);return x?Number.isNaN(Number(x))?m?.findIndex(v=>v[0]?.backend_uuid===x):Number(x):-1},[m]),h=d.useCallback((x,v)=>{v?i[x]={current:v}:delete i[x]},[i]),g=d.useCallback((x,v)=>x===0||x===v-1||!c&&x<=p,[p,c]);d.useEffect(()=>{if(~p){const x=setTimeout(()=>{u(!0)},1e4);return()=>{clearTimeout(x)}}},[p]),d.useEffect(()=>{const x=a.current;return x&&(x.scrollTop=0),()=>{u(!1)}},[l,a]),d.useEffect(()=>()=>{s(null)},[]);const y=d.useMemo(()=>m.map((x,v)=>{const b=x[0],_=v===0,w=v===m.length-1;return b?o.jsx(A8e,{result:b,resultsGroup:x.length>1?x:ce,isLastResult:w,isFirstResult:_,lastResultBuffer:w?e.lastResultBuffer:void 0,forceVisible:g(v,m.length),idx:v,scrollContainerRef:a,setRef:h},b.uuid||b.backend_uuid):null}),[m,e.lastResultBuffer,g,a,h]);return o.jsx("div",{children:y})});Az.displayName="Thread";const A8e=I.memo(({result:e,resultsGroup:t,isLastResult:n,isFirstResult:r,forceVisible:s,idx:a,scrollContainerRef:i,lastResultBuffer:l,setRef:c})=>{const u=e.attachments?.length>0,f=d.useMemo(()=>()=>o.jsx(Kw,{className:B({"pb-threadInputHeightWithPadding":n&&!u,"pb-threadAttachmentsHeightWithPadding":n&&u})}),[u,n]),m=d.useCallback(p=>c(a,p),[a,c]);return o.jsx(Nr,{fallback:f,code:"SOMETHING_WENT_WRONG_ERROR",children:o.jsx(j8e,{forceVisible:s,unmeasuredHeight:yle,rootMargin:`${yle*BJt}px 0px`,threshold:0,root:i.current,ref:m,children:o.jsx(N8e,{idx:a,result:e,sbsEntriesGroup:t,isLastResult:n,isFirstResult:r,lastResultBuffer:l})})},e.uuid||e.backend_uuid)});A8e.displayName="LazyContainerFactory";const Iz=I.memo(()=>{const{$t:e}=Z(),{firstResult:{parent_info:t}={}}=Ft();if(!t?.mode||!t?.url_slug)return null;const n=t?.mode===ag.ARTICLE?"page":"search",r=!!t?.preview_image_url;return o.jsx(qe,{href:`/${n}/${t?.url_slug}`,children:o.jsxs(z,{variant:"background",bgHover:"subtler",className:"p-md shadow-subtle mb-sm relative mx-auto mt-[calc(var(--header-height)+var(--size-md))] flex justify-between rounded-lg border pb-[12px]",children:[o.jsxs("div",{className:"flex-1",children:[o.jsxs(F,{color:"light",variant:"tiny",className:"mb-xs gap-x-xs flex items-center",children:[o.jsx(de,{icon:Gb,size:"xs"}),o.jsx("div",{children:e({defaultMessage:"Follow up to",id:"D3eCB2NeGQ"})})]}),o.jsx(F,{variant:"baseSemi",color:"light",className:"line-clamp-1 break-all",children:t?.title})]}),r&&o.jsx("div",{className:"ml-md shrink-0",children:o.jsx(ns,{src:t?.preview_image_url,alt:t?.title||"Preview",imageClassName:"h-16 w-16 rounded object-cover",rounded:"sm",fadeIn:!1})})]})})});Iz.displayName="ParentThreadLink";const I8e=({entryUUID:e,frontendContextUUID:t,existingCollection:n,existingFirstThreadQuery:r,filterOnSearchTerm:s,reason:a})=>{const{openModal:i}=xt(),{collections:l}=WT({autoFetch:!0,reason:a}),c=d.useCallback(async()=>{!e||!t||(l?.length?i("collectionSelectModal",{entryUUID:e,currentCollection:n??null,searchTerm:s?r??"":void 0,frontendContextUUID:t}):i("spaceCreateForThread",{frontendContextUUID:t,entryUUID:e}))},[l?.length,e,t,n,r,i,s]);return d.useMemo(()=>({openAddToCollectionModal:c}),[c])};async function $Jt({contextUUID:e,title:t,rwToken:n,callback:r,reason:s}){try{const a=await re.POST("/rest/thread/set_thread_title",s,{body:{context_uuid:e,title:t,read_write_token:n},headers:{"Content-Type":"application/json"}});r?.(a)}catch(a){r?.(a)}}function VJt(e){return Khe(e)?e:le.PRO}function WJt(e){const t=e?.filter(gp)??ce;return t.length>0?t:[Dl.web]}function HJt(){if(typeof window>"u")throw new Error("useCreateTaskFromThread should only be used on the client");const[e,t]=d.useState(!1),[n,r]=d.useState(!1),{hasAccessToProFeatures:s}=St(),a=vt(),{firstResult:i}=Ft(),l=Oet(),c=i?.query_str||l.first_query,u=d.useMemo(()=>VJt(i?.display_model),[i?.display_model]),f=d.useMemo(()=>i?.sources?.sources?WJt(i.sources.sources):[Dl.web],[i?.sources?.sources]),m=d.useMemo(()=>s&&!!c,[s,c]),p=d.useCallback(()=>{m&&t(!0)},[m]),h=d.useCallback(()=>{t(!1)},[]),g=d.useCallback(()=>{t(!1),r(!0)},[]),y=d.useCallback(()=>{r(!1),a.push("/account/tasks")},[a]),x=d.useCallback(()=>{r(!1)},[]),v=d.useMemo(()=>{if(!c)return;const b=new Date;return{title:"",prompt:c,schedule:{kind:"DAILY",hour:b.getHours(),minute:b.getMinutes(),day:b.getDate(),month:b.getMonth(),year:b.getFullYear(),dayOfWeek:b.getDay()},searchModel:u,sources:f}},[c,u,f]);return d.useMemo(()=>({canCreateTask:m,isTaskModalOpen:e,handleCreateTask:p,handleTaskModalClose:h,handleTaskModalSuccess:g,taskPrefillData:v,showConfirmationToast:n,handleConfirmationToastSettings:y,handleConfirmationToastDismiss:x}),[m,p,h,g,e,v,n,y,x])}const zJt=e=>{const{deprecatedOpenToast:t}=fn(),[n,r]=d.useState(!1),s=d.useCallback(async(a,i)=>{try{r(!0),t("Exporting thread...","refresh",10);const l=await i(),c=atob(l.file_content_64),u=new Array(c.length);for(let g=0;g<c.length;g++)u[g]=c.charCodeAt(g);const f=new Uint8Array(u),m=new Blob([f],{type:`application/${a}`}),p=window.URL.createObjectURL(m),h=document.createElement("a");h.href=p,h.download=l.filename,h.style.display="none",document.body.appendChild(h),h.click(),setTimeout(()=>{document.body.removeChild(h),window.URL.revokeObjectURL(p)},1e3),t("Export succeeded","success",3)}catch{t(e,"error")}finally{r(!1)}},[t,e]);return d.useMemo(()=>({handleExport:s,isExporting:n}),[s,n])},GJt=({reason:e})=>{const n=Z().formatMessage({defaultMessage:"Failed to export answer",id:"UiPrX3hXY8"}),{handleExport:r,isExporting:s}=zJt(n),a=d.useCallback(async(i,l)=>{await r(l,()=>c0e({thread_uuid:i,format:l,reason:e}))},[r,e]);return d.useMemo(()=>({convertContent:a,isExporting:s}),[a,s])},Rz=I.memo(({choices:e,...t})=>o.jsx(z,{className:"mt-sm divide-y rounded md:border",...t,children:e.map((n,r)=>n.subMenu?o.jsxs("div",{children:[d.createElement(hu,{type:"default",...n,rounded:!1,key:r}),n.active&&n.subMenu&&o.jsx(R8e,{choices:n.subMenu})]}):d.createElement(hu,{type:"default",...n,rounded:!1,key:r}))}));Rz.displayName="RadioCard";const R8e=I.memo(({choices:e})=>o.jsx(z,{children:e.map((t,n)=>d.createElement(hu,{type:"radio",showIconLeft:!0,selected:t.active??!1,...t,rounded:!1,key:n}))}));R8e.displayName="RadioCardSubMenu";const P8e=I.memo(({onClose:e,isOpen:t,onDelete:n,...r})=>{const{$t:s}=Z(),[a,i]=d.useState(!1),[l,c]=d.useState("all");d.useEffect(()=>{t||(i(!1),c("all"))},[t]);const u=d.useMemo(()=>[{text:s({defaultMessage:"All Threads",id:"2DJ/HRvVaR"}),label:s({defaultMessage:"All your threads will be deleted",id:"YDOzv2WOkx"}),active:l==="all",onClick:()=>{c("all")}},{text:s({defaultMessage:"Standalone Threads",id:"6HJEHjz/aG"}),label:s({defaultMessage:"Only your threads which are not part of a space will be deleted",id:"lFOvDZ2Tnp"}),active:l==="standalone",onClick:()=>{c("standalone")}}],[s,l]),f=d.useMemo(()=>[{text:"Cancel",onClick:e},{text:s(a?{defaultMessage:"Yes, Delete",id:"QEmYhzreEW"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),variant:"rejected",onClick:()=>{a?n(l):i(!0)}}],[s,l,a,e,n]);return o.jsx(qt,{...r,isOpen:t,onClose:e,title:s(a?l==="all"?{defaultMessage:"Delete all threads?",id:"Kju4ObJhbP"}:{defaultMessage:"Delete standalone threads?",id:"kiKGdmk4lu"}:{defaultMessage:"Delete Threads",id:"+waPO7td+u"}),actionList:f,children:o.jsx("div",{children:a?o.jsx("div",{children:o.jsx(F,{children:s(l==="all"?{defaultMessage:"All your threads will be deleted. This cannot be undone.",id:"U1IQ/Dlkge"}:{defaultMessage:"Your threads which are not part of a space will be deleted. This cannot be undone.",id:"Ko7lNjweFq"})})}):o.jsx(Rz,{className:"-mx-sm -my-sm border-none",choices:u})})})});P8e.displayName="DeleteThreadsModal";const qJt=(e,t)=>{const{value:n,loading:r}=jt({flag:"discover-early-fetch",defaultValue:e,extraAttributes:t,subjectType:"visitor_id"});return d.useMemo(()=>({variation:n,loading:r}),[n,r])},L8e=I.memo(({children:e,fetchNextPage:t,hasNextPage:n,showLoadingState:r,itemsLength:s,loadingPlaceholder:a})=>{const i=d.useRef(t);i.current=t;const l=d.useRef(gs(()=>i.current(),300,{leading:!0,trailing:!1})),c=d.useRef(null),u=d.useRef(!1),f=d.useRef(null),{variation:m}=qJt(!1);d.useEffect(()=>{if(!m||!n||s===0)return;const h=()=>{if(!c.current)return;const y=c.current.getBoundingClientRect(),x=window.innerHeight;f.current===null&&(f.current=y.top);const v=window.scrollY||window.pageYOffset,b=document.documentElement.scrollTop,_=document.body.scrollTop,w=v||b||_,C=f.current!==null&&y.top<f.current*.9;(w>100||C)&&!u.current&&(u.current=!0);const S=u.current?Math.min(x*3,1200):0;y.top<=x+S&&l.current()},g=gs(h,100);return window.addEventListener("scroll",g,!0),document.addEventListener("scroll",g,!0),h(),()=>{window.removeEventListener("scroll",g,!0),document.removeEventListener("scroll",g,!0),g.cancel()}},[n,s,m]),M3(c,l.current,{rootMargin:"50px",threshold:0});const p=a||(s===0?o.jsx(z,{className:"py-sm",children:o.jsx(Si,{animateLines:!1,blockCount:12,divider:!0})}):o.jsx(z,{className:"py-md",children:o.jsx(Si,{animateLines:!1,blockCount:1})}));return o.jsxs(o.Fragment,{children:[e,r&&p,s>0&&n&&o.jsx("div",{ref:c,className:"border border-transparent"})]})});L8e.displayName="LibraryItemList";const KJt=({collectionUUID:e,reason:t})=>{const{collections:n}=WT({autoFetch:!0,reason:t});return!e||!n?null:n.find(s=>s.uuid===e)??null},gO=I.memo(({text:e,searchTerm:t})=>{const n=d.useMemo(()=>{if(!t||!t.trim())return null;try{const r=t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),s=new RegExp(`(${r})`,"gi");return e.split(s)}catch{return null}},[e,t]);return n?o.jsx(o.Fragment,{children:n.map((r,s)=>s%2===1?o.jsx("span",{className:"bg-super/30",children:r},s):o.jsx("span",{children:r},s))}):o.jsx(o.Fragment,{children:e})});gO.displayName="HighlightedText";const O8e=I.memo(({type:e,featuredImage:t,title:n,className:r,href:s})=>{if(!t||e!==Ko.DISCOVER)return null;const a=o.jsx("div",{className:B("relative size-24 flex-none overflow-hidden rounded-md",r),children:t.includes("images.unsplash.com")?o.jsx("img",{src:t,alt:n,className:"size-full object-cover object-center"}):o.jsx("img",{src:t,alt:n,sizes:"33vw",className:"object-cover object-center"})});return s?o.jsx(qe,{href:s,children:a}):a});O8e.displayName="ThreadImage";const YJt=()=>{const{$t:e}=Z();return d.useMemo(()=>({yearAgo:e({defaultMessage:"year ago",id:"FzcTXH29w0"}),yearsAgo:e({defaultMessage:"years ago",id:"zJmD8CS6cm"}),monthAgo:e({defaultMessage:"month ago",id:"bZWV9MmB/N"}),monthsAgo:e({defaultMessage:"months ago",id:"Lui0j+6Np9"}),dayAgo:e({defaultMessage:"day ago",id:"G4Y/+2FJhb"}),daysAgo:e({defaultMessage:"days ago",id:"vEpDmSBrwP"}),hourAgo:e({defaultMessage:"hour ago",id:"7v28g+bbYy"}),hoursAgo:e({defaultMessage:"hours ago",id:"2GaNTzDbM2"}),minutesAgo:e({defaultMessage:"minutes ago",id:"9aNLtXrhB8"}),minuteAgo:e({defaultMessage:"minute ago",id:"G8L9c8oAYi"}),justNow:e({defaultMessage:"Just now",id:"bxv59Vvssz"}),justNowShort:e({defaultMessage:"Now",id:"tgvES0v2HS"})}),[e])},D8e=I.memo(({className:e})=>{const t=vt(),n=d.useCallback(()=>{t.push("/account/tasks")},[t]),{variation:r,loading:s}=Fp(!1);return s?null:o.jsxs(F,{variant:"tiny",color:"super",className:B("gap-x-xs flex flex-row items-center hover:cursor-pointer",e),onClick:n,children:[o.jsx(de,{icon:Im,size:"xs",className:"-translate-y-px"}),r?o.jsx(ie,{defaultMessage:"Automation",id:"Fn4YKyl4lm"}):o.jsx(ie,{defaultMessage:"Task",id:"0wJ7N+noSq"})]})});D8e.displayName="TaskIndicator";const yO=I.memo(({icon:e,count:t,textVariant:n="tiny",textColor:r="light",className:s})=>o.jsxs("div",{className:"gap-x-xs flex items-center",children:[o.jsx(F,{variant:n,color:r,className:s,children:o.jsx(de,{icon:e,size:"sm"})}),o.jsx(F,{variant:n,color:r,className:s,children:l8(t)})]}),(e,t)=>e.count===t.count&&e.icon===t.icon&&e.className===t.className),F8e=I.memo(({threadAccess:e,socialInfo:t,textVariant:n,textColor:r,className:s})=>{if(!e||!t||Sft(e))return null;const a=t.view_count??0,i=t.fork_count??0;return o.jsxs(o.Fragment,{children:[a>0&&o.jsx(yO,{icon:Vk,count:a,textColor:r,textVariant:n,className:s}),i>0&&o.jsx(yO,{icon:Gb,count:i,textColor:r,textVariant:n,className:s})]})});F8e.displayName="ThreadSocial";const QJt=he(async()=>X(()=>import("./TimeAgoTooltip-DsPNvfRE.js"),__vite__mapDeps([441,1,2,5,6,7]))),U8e=()=>{const{$t:e}=Z(),{isEnterprise:t}=Hn({reason:"temporary-thread-tooltip"});return e(t?{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, data retention policies, or organizational requirements.",id:"BJL0VPkJd3"}:{defaultMessage:"Temporary threads expire due to personal context access, navigational queries, or data retention policies.",id:"mxG1FiTDFj"})},B8e=I.memo(({type:e,threadCount:t,threadAccess:n,lastUpdated:r,socialInfo:s,expiry:a,source:i,displayModel:l})=>{const c=YJt(),{locale:u,$t:f}=Z(),m=n?Mft(n):null,p=Z(),h=d.useMemo(()=>{if(!a)return null;const x=a.endsWith("Z")?a:`${a}Z`,v=new Date(x);return x_(p,v,{style:"short"},1e3*60*60*24)},[a,p]),g=d.useMemo(()=>{if(!a)return null;const x=a.endsWith("Z")?a:`${a}Z`;return new Date(x).toLocaleString(u,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"})},[a,u]),y=U8e();return o.jsxs("div",{className:"gap-x-md flex items-center",children:[l?o.jsx(ZJt,{displayModel:l}):null,h&&o.jsx(bn,{tooltipText:y,tooltipLayout:"right",asChild:!0,children:o.jsxs(F,{variant:"tiny",color:"light",className:"pr-sm pl-xs border-subtler flex cursor-default items-center gap-x-0.5 rounded-full border border-dashed py-0.5",children:[o.jsx(de,{icon:Zce,size:"xs"}),f({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"})]})}),h?o.jsx(bn,{tooltipText:g,tooltipLayout:"right",children:o.jsx(F,{variant:"tiny",color:"light",className:"cursor-default",children:f({defaultMessage:"Expires {expiry}",id:"KhQvNJGIsK"},{expiry:h})})}):r&&o.jsx(QJt,{timestamp:r,translations:c,locale:u}),i&&i==="perplexity_tasks"&&o.jsx(D8e,{}),o.jsx(F8e,{socialInfo:s,threadAccess:n}),!!t&&t>1&&o.jsx(yO,{icon:FO,count:t}),e===Ko.COLLECTION&&d0e(n)&&o.jsxs(F,{className:"gap-x-xs ml-xs flex items-center",variant:"tiny",color:"light",testId:"thread-shared-indicator",children:[m&&o.jsx(de,{icon:m,size:"xs",className:"-mt-px"}),o.jsx("span",{children:f({defaultMessage:"Shared",id:"kWI6zXRaHY"})})]})]})});B8e.displayName="ThreadMetadata";const XJt=["pplx_alpha","pplx_beta"],ZJt=({displayModel:e})=>{const{$t:t}=Z();if(!e||!XJt.includes(e))return null;const n=e==="pplx_alpha"?t({defaultMessage:"Research",id:"JEe7dVso7F"}):e==="pplx_beta"?t({defaultMessage:"Labs",id:"ylFNoY79wa"}):null,r=e==="pplx_alpha"?Uk:e==="pplx_beta"?Fb:null;return o.jsxs(F,{variant:"tiny",color:"light",className:"pr-sm border-subtlest flex items-center gap-x-0.5 rounded-full border py-0.5 pl-1.5",children:[r&&o.jsx(de,{icon:r,size:"xs"}),n]})},$8e=d.memo(({title:e,preview:t,threadCount:n,lastUpdated:r,href:s="/",rwToken:a,socialInfo:i,showActionMenu:l=!0,authorImage:c,threadAccess:u,type:f,featuredImage:m,entryUUID:p,contextUUID:h,collection:g,expiry:y,onRemoveExpiration:x,source:v,isIncognitoThread:b,displayModel:_,isSelectable:w,isSelected:C,onSelect:S,isStreaming:E,searchTerm:k})=>{const M="thread-item",j=KJt({collectionUUID:g?.uuid,reason:M}),{deleteThread:R}=Uw({reason:M}),{removeThreadFromCollection:O}=nx({reason:M}),{trackEvent:D}=Te(),[P,A]=d.useState(!1),T=d.useCallback(async q=>{R({entryUUID:q,collectionSlug:j?.slug}),D("delete thread from history click",{entryUUID:q})},[j?.slug,R,D]),{openAddToCollectionModal:N}=I8e({entryUUID:p,existingCollection:j,reason:M,frontendContextUUID:h}),L=d.useCallback(q=>{q==="add"?D("click add thread to space",{contextUUID:h,isBookmark:!1}):D("click swap thread space",{contextUUID:h,isFromBookmark:!1,collectionUUID:j?.uuid||""}),N()},[j,h,D,N]),U=d.useCallback(()=>{D("click remove thread from space",{contextUUID:h,collectionUUID:j?.uuid||"",isBookmark:!1}),O({entryUUID:p,oldCollectionUUID:j?.uuid,frontendContextUUID:h,collectionSlug:j?.slug})},[j?.uuid,j?.slug,h,p,O,D]),$=d.useCallback(()=>L("add"),[L]),V=d.useCallback(()=>L("swap"),[L]),W=d.useCallback(()=>{A(!0),E3(p,()=>{x()})},[p,x]),Q=d.useCallback(()=>S?.(!C),[C,S]);return o.jsxs(z,{className:"relative",children:[o.jsx(Ye,{initial:!1,children:w&&!E&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"-translate-x-sm top-md mt-three absolute right-full",children:o.jsx(F_,{checked:C??!1,toggleChecked:Q})})}),o.jsxs("div",{className:"gap-x-md py-md group relative flex items-center",children:[o.jsx(O8e,{featuredImage:m,type:f,title:e,href:s}),o.jsxs("div",{className:"gap-y-sm flex w-full grow flex-col",children:[o.jsxs(z,{className:"flex justify-between",children:[o.jsx(qe,{href:s,className:"group block overflow-x-hidden",children:o.jsxs(z,{children:[o.jsxs(ve.div,{className:"gap-x-sm flex items-center",layout:!0,layoutRoot:!0,children:[(!!c||f===Ko.COLLECTION)&&o.jsx(Un,{size:"small",user:c??void 0}),o.jsx(F,{className:"gap-sm flex grow items-center",variant:"baseSemi",children:o.jsxs(Ec,{children:[o.jsx(Ye,{initial:!1,children:E&&o.jsx(ve.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.1},className:"text-super",children:o.jsx(Fr,{size:14})},"spinner")}),o.jsx(ve.div,{layout:"position",transition:{duration:.15,ease:Zd},"data-testid":`thread-title-${e}`,className:"md:group-hover:text-super line-clamp-1 w-full break-all",children:o.jsx(Mz,{speed:"slow",active:!!E,children:o.jsx(gO,{text:e,searchTerm:k})})},e)]})})]}),o.jsx(F,{color:"light",className:"mt-two line-clamp-2 text-balance",variant:"small",children:o.jsx(gO,{text:t,searchTerm:k})})]})}),o.jsx(z,{className:B("duration-150",{"opacity-0":w,"pointer-events-none group-hover:opacity-0":w}),children:o.jsx(tN,{show:l,currentSpace:j,showConvertThreadToArticle:!1,onDelete:T,onAddToSpace:$,onSwapSpace:V,onRemoveFromSpace:U,rwToken:a,contextUUID:h,threadAccess:u,collectionSlug:g?.slug,type:f,showSaveAsFileToSpace:!1,expiry:P?void 0:y,onRemoveExpiration:P?void 0:W,buttonSize:"tiny",threadId:p,isIncognitoThread:b})})]}),o.jsx("div",{className:l?"mt-xs":"mt-sm",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsx(B8e,{type:f,threadCount:n,threadAccess:u,lastUpdated:r,socialInfo:i??null,expiry:y,source:v,displayModel:_}),o.jsx("div",{className:"gap-x-xs flex items-center",children:g?.title&&f===Ko.LIBRARY&&o.jsx(qe,{href:`/spaces/${g?.slug}`,className:"block",children:o.jsx(z,{className:"px-xs rounded-full border",children:o.jsxs(F,{variant:"tiny",className:"gap-x-xs px-sm py-xs flex cursor-pointer select-none items-center transition duration-300 hover:opacity-70",testId:"thread-collection-pill",children:[o.jsx(gf,{unified:g.emoji,size:"tiny"}),o.jsx("div",{className:"line-clamp-1",children:g.title})]})})})})]})})]})]})]})});$8e.displayName="ThreadItem";var Ko;(function(e){e.LIBRARY="library",e.COLLECTION="collection",e.DISCOVER="discover",e.SEARCH="search",e.INCOGNITO_SEARCH="incognitoSearch"})(Ko||(Ko={}));const JJt="temporary-threads",xle=e=>{sn(JJt,String(e),{expires:$r})};function een(e){let t;switch(e.mode){case"CONCISE":t="concise";break;case"COPILOT":t="copilot";break;case"ARTICLE":t="article";break}return{title:e.title??"",preview:"",threadCount:1,lastUpdated:e.lastUpdated??"",href:`/search/${e.slug}`,rwToken:e.rwToken??"",focus:e.focus,entryUUID:e.entryUUID??"",contextUUID:e.contextUUID??"",copilot:!1,socialInfo:e.socialInfo??null,collectionUUID:e.collectionInfo?.uuid??null,authorImage:null,featuredImage:null,thumbnailImage:null,threadAccess:null,collection:e.collectionInfo?{uuid:e.collectionInfo?.uuid??"",title:e.collectionInfo?.title??"",slug:e.collectionInfo?.slug??"",emoji:e.collectionInfo?.emoji??""}:void 0,mode:t,expiry:null,source:e.source??null,displayModel:e.displayModel,slug:e.slug??""}}const ten=I.memo(({threads:e,fetchNextPage:t,hasNextPage:n=!1,showLoadingState:r=!1,showEmptyState:s=!1,type:a,showTemporaryThreads:i,setShowTemporaryThreads:l,searchTerm:c,invalidateThreadsQuery:u,ascending:f,setAscending:m,isFetchingNextPage:p,source:h,setSource:g,threadType:y,setThreadType:x,setDeleteModalOpen:v,deleteModalOpen:b,streamingThreads:_})=>{const{$t:w}=Z(),C=d.useMemo(()=>(e??[]).map(qQe),[e]),S=et(),[E,k]=d.useState(!1),[M,j]=d.useState([]),{isMobileStyle:R}=xe(),O=d.useRef(c),{deleteAllThreads:D,deleteThreads:P}=Uw({reason:"threads-list"}),[A,T]=d.useState(null),N=d.useCallback(se=>{D(se),v(!1)},[D,v]),L=d.useCallback(se=>{j(ae=>ae.includes(se)?ae.filter(pe=>pe!==se):[...ae,se])},[]),U=d.useCallback(()=>{k(!1),j([])},[]);d.useEffect(()=>{O.current!==c&&(U(),O.current=c)},[c,U]);const $=d.useMemo(()=>[{type:"default",text:w({defaultMessage:"Newest First",id:"dZYazP4QWO"}),onClick:()=>{m(!1),U()},show:!0,active:!f},{type:"default",text:w({defaultMessage:"Oldest First",id:"FqI37DU6LJ"}),onClick:()=>{m(!0),U()},show:!0,active:f}],[f,w,m,U]),V=d.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{g("all"),U()},active:h==="all"},{type:"default",text:w({defaultMessage:"Comet",id:"9WmFFQw7ns"}),onClick:()=>{g("comet"),U()},active:h==="comet"}],[h,w,g,U]),W=d.useMemo(()=>[{type:"default",text:w({defaultMessage:"All",id:"zQvVDJ+j59"}),onClick:()=>{x("all"),U()},active:y==="all"},{type:"default",text:w({defaultMessage:"Research",id:"JEe7dVso7F"}),onClick:()=>{x("research"),U()},active:y==="research"},{type:"default",text:w({defaultMessage:"Labs",id:"ylFNoY79wa"}),onClick:()=>{x("labs"),U()},active:y==="labs"}],[y,w,x,U]),Q=d.useMemo(()=>[{type:"default",text:w({defaultMessage:"Show",id:"K7AkdLoAj6"}),onClick:()=>{l(!0),xle(!0),U()},active:i},{type:"default",text:w({defaultMessage:"Hide",id:"VA/Z1SW3vH"}),onClick:()=>{l(!1),xle(!1),U()},active:!i}],[i,w,l,U]),q=dn(),H=d.useMemo(()=>o.jsx(H8e,{}),[]),K=d.useCallback(()=>v(!1),[v]),G=d.useCallback(()=>{P({entryUUIDs:M,callback:U})},[P,M,U]),{isIncognito:ee,incognitoType:Y}=Ga({reason:"threads-list"}),te=d.useMemo(()=>h!=="all"||y!=="all",[h,y]);return o.jsxs(o.Fragment,{children:[o.jsxs(L8e,{fetchNextPage:t,hasNextPage:n,showLoadingState:p||r,itemsLength:C.length,loadingPlaceholder:H,children:[ee&&o.jsx("div",{"data-color-scheme":"dark",children:o.jsxs(z,{className:"mt-md p-md gap-sm flex items-center justify-start rounded-md",variant:"subtler",children:[o.jsx(_f,{inverse:!0,incognitoType:Y}),o.jsxs("div",{children:[o.jsx(F,{variant:"smallBold",color:"white",children:w({defaultMessage:"You are incognito",id:"pBm4msoyyh"})}),Y===Hd.GOVERNMENT?o.jsx(F,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads will have Zero Data Usage active",id:"Yq0Q7xmZMb"})}):o.jsx(F,{variant:"small",color:"white",className:"text-pretty opacity-75",children:w({defaultMessage:"New Threads are anonymous, won't appear in your library, and expire after 24 hours.",id:"/FQ4Dx5TpY"})})]})]})}),o.jsx(z,{className:B("gap-sm pt-md flex items-center justify-between",{"bg-base pb-md -mb-md sticky top-0 z-10":!R}),variant:"background",children:o.jsxs(W8e,{children:[o.jsxs("div",{className:"gap-sm flex items-center",children:[!R&&o.jsxs(z,{className:"pr-sm relative flex-1 shrink-0",children:[o.jsx(V8e,{selectEnabled:E,resetSelect:U,setSelectEnabled:k}),o.jsx(z,{className:"absolute right-0 top-1/2 h-5 -translate-y-1/2 border-r"})]}),q&&o.jsx(nn,{placement:"bottom-start",isMobileStyle:R,items:V,wrapperClassName:"inline-flex",onOpen:()=>T("source"),onClose:()=>T(null),isOpen:A==="source",children:o.jsx(Sd,{variant:h==="all"?"border":"primary",text:h==="all"?w({defaultMessage:"Source",id:"aH4De2Y20k"}):w({defaultMessage:"Source: {comet}",id:"pAvXy3TmGv"},{comet:"Comet"})})}),o.jsx(nn,{placement:"bottom-start",isMobileStyle:R,items:W,wrapperClassName:"inline-flex",onOpen:()=>T("type"),onClose:()=>T(null),isOpen:A==="type",children:o.jsx(Sd,{variant:y==="all"?"border":"primary",text:w(y==="all"?{defaultMessage:"Type",id:"+U6ozcnv4r"}:y==="research"?{defaultMessage:"Type: Research",id:"NeGk8fwf1M"}:{defaultMessage:"Type: Labs",id:"yLIVi0dTj2"})})}),o.jsx(nn,{placement:"bottom-start",isMobileStyle:R,items:Q,wrapperClassName:"inline-flex",onOpen:()=>T("temporary"),onClose:()=>T(null),isOpen:A==="temporary",children:o.jsx(Sd,{variant:"border",text:w(i?{defaultMessage:"Temporary Threads: Show",id:"j0VHwshtHd"}:{defaultMessage:"Temporary Threads: Hide",id:"X8Kc6bnTnf"})})})]}),o.jsx("div",{className:B("gap-sm flex items-center",{}),children:o.jsx(nn,{placement:q?"bottom-start":"bottom-end",isMobileStyle:R,wrapperClassName:"inline-flex",items:$,onOpen:()=>T("sort"),onClose:()=>T(null),isOpen:A==="sort",children:o.jsx(Sd,{text:w(f?{defaultMessage:"Sort: Oldest",id:"K8y5AUAIdW"}:{defaultMessage:"Sort: Newest",id:"ouRV0Q2JpB"})})})})]})}),s&&C.length===0?o.jsxs(z,{className:"mt-xl p-xl flex flex-col items-center justify-center rounded-md",children:[o.jsx(F,{variant:"baseSemi",children:te||c?w({defaultMessage:"Nothing turned up",id:"Rn55YzpVb0"}):w({defaultMessage:"No {threads} yet",id:"5zP56HMUgk"},{threads:"Threads"})}),te||c?o.jsx(F,{variant:"small",color:"light",children:w({defaultMessage:"Try different keywords, check for typos, or adjust your filters.",id:"3DJFcRxvex"})}):o.jsx(F,{variant:"small",color:"light",children:o.jsx(ie,{defaultMessage:"Try creating a <link>new Thread</link>",id:"18hNnPSiwJ",values:{link:se=>o.jsx(qe,{className:"text-super",href:"/",children:se})}})})]}):o.jsxs("div",{className:"relative",children:[o.jsxs(z,{className:"relative divide-y",children:[_.filter(se=>!C.find(ae=>ae.slug===se.slug)).filter(se=>!C.find(ae=>ae.entryUUID===se.id)).filter(se=>se.slug!==null).map(se=>o.jsx(xO,{thread:een(se),invalidateThreadsQuery:u,selectEnabled:!1,selectedThreads:M,showActionMenu:!1,handleSelect:L,type:a,isStreaming:!0,searchTerm:c},se.slug||se.entryUUID)),C.map(se=>o.jsx(xO,{thread:se,invalidateThreadsQuery:u,selectEnabled:E,selectedThreads:M,showActionMenu:a!==Ko.DISCOVER&&S,handleSelect:L,type:a,searchTerm:c},se.slug))]}),r&&o.jsx("div",{className:"bg-base absolute inset-0 opacity-50"})]})]}),o.jsx(P8e,{isOpen:b,onClose:K,onDelete:N}),o.jsx(Ye,{initial:!1,children:E&&o.jsx(ve.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},transition:{duration:.2,bounce:.2,type:"spring"},className:"bottom-md fixed inset-x-0 flex items-center justify-center",children:o.jsxs(z,{variant:"raised",className:"p-sm pl-md shadow-subtle bottom-md flex w-[400px] items-center justify-between rounded-xl border",children:[o.jsx(F,{variant:"small",color:"light",children:w({defaultMessage:"{count, plural, =0 {No Threads} one {# Thread} other {# Threads}} Selected",id:"MqdlBPNiqL"},{count:M.length})}),o.jsx(me,{text:w({defaultMessage:"Delete {count, plural, =0 {Threads} one {# Thread} other {# Threads}}",id:"nBPaP34ufb"},{count:M.length}),variant:"rejected",size:"small",disabled:M.length===0,onClick:G})]})})})]})}),xO=I.memo(({thread:e,invalidateThreadsQuery:t,selectEnabled:n,selectedThreads:r,handleSelect:s,type:a,showActionMenu:i,isStreaming:l,searchTerm:c})=>{const u=d.useCallback(f=>{s(e.entryUUID)},[s,e.entryUUID]);return o.jsx($8e,{href:e.href,rwToken:e.rwToken,title:e.title,preview:e.preview??"",threadCount:e.threadCount,lastUpdated:e.lastUpdated,copilot:e.copilot,socialInfo:e.socialInfo,threadAccess:e.threadAccess??null,authorImage:e.authorImage,featuredImage:e.featuredImage??null,showActionMenu:i,type:a,entryUUID:e.entryUUID,contextUUID:e.contextUUID,collection:e.collection??null,expiry:e.expiry,onRemoveExpiration:t,source:e.source,isIncognitoThread:!1,displayModel:e.displayModel,isSelectable:n,isSelected:r.includes(e.entryUUID),onSelect:u,isStreaming:l,searchTerm:c},e.entryUUID)});xO.displayName="ThreadItemWrapper";ten.displayName="ThreadsList";const Sd=I.memo(({text:e,variant:t="border",onClick:n,chevron:r=!0,icon:s,disabled:a,className:i})=>{const{isMobileStyle:l}=xe();return o.jsx(me,{variant:t,size:l?"small":"tiny",text:e,chevron:r,onClick:n,icon:s,extraCSS:B(a?"opacity-50 pointer-events-none":"",i)})});Sd.displayName="FilterButton";const V8e=I.memo(({selectEnabled:e,resetSelect:t,setSelectEnabled:n})=>{const{$t:r}=Z(),s=d.useCallback(()=>{n(!e),e&&t()},[e,t,n]);return o.jsxs("div",{className:"inline-grid w-max grid-cols-1 grid-rows-1",children:[o.jsx(Sd,{text:r(e?{defaultMessage:"Done",id:"JXdbo8Vnlw"}:{defaultMessage:"Select",id:"kQAf2d9u+x"}),onClick:s,chevron:!1,variant:e?"primary":"border",className:"col-start-1 row-start-1"}),o.jsx(Sd,{text:r({defaultMessage:"Select",id:"kQAf2d9u+x"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1}),o.jsx(Sd,{text:r({defaultMessage:"Done",id:"JXdbo8Vnlw"}),className:"pointer-events-none col-start-1 row-start-1 opacity-0",chevron:!1})]})});V8e.displayName="SelectButton";const W8e=I.memo(({children:e})=>{const{isMobileStyle:t}=xe();return t?o.jsx("div",{className:"w-full",children:o.jsx("div",{className:"-mx-md",children:o.jsx(sl,{showScrollIndicator:!1,orientation:"horizontal",children:o.jsx("div",{className:"gap-sm px-md flex items-center",children:e})})})}):o.jsx(sl,{showScrollIndicator:!1,orientation:"horizontal",children:o.jsx("div",{className:"gap-sm flex w-full items-center justify-between",children:e})})});W8e.displayName="FiltersWrapper";const H8e=I.memo(()=>o.jsxs(z,{className:"gap-x-md py-md gap-sm group relative flex flex-col items-start",children:[o.jsxs("div",{className:"gap-two flex w-full flex-col",children:[o.jsxs("div",{className:"grid items-center",children:[o.jsx(F,{variant:"baseSemi",className:"col-start-1 row-start-1",children:""}),o.jsx(z,{variant:"subtler",className:"col-start-1 row-start-1 h-4 w-[120px] rounded-full"})]}),o.jsxs("div",{className:"grid w-full items-center",children:[o.jsxs(F,{variant:"small",className:"col-start-1 row-start-1",children:["",o.jsx("br",{}),""]}),o.jsxs("div",{className:"col-start-1 row-start-1 flex w-full flex-col gap-2",children:[o.jsx(z,{variant:"subtler",className:"h-2 w-2/3 rounded-full"}),o.jsx(z,{variant:"subtler",className:"h-2 w-2/3 rounded-full"})]})]})]}),o.jsxs("div",{className:"grid items-center",children:[o.jsx(F,{variant:"tiny",className:"col-start-1 row-start-1",children:""}),o.jsx(z,{variant:"subtler",className:"col-start-1 row-start-1 h-2 w-[80px] rounded-full"})]})]}));H8e.displayName="ThreadItemSkeleton";const z8e=I.memo(({message:e,isVisible:t=!1,timeout:n,onSettingsClick:r,onTimeout:s=vn,icon:a,...i})=>{const[l,c]=d.useState(t),u=d.useRef(null),{$t:f}=Z();d.useEffect(()=>{c(t)},[t]);const m=d.useCallback(()=>{u.current&&clearTimeout(u.current)},[]),p=d.useCallback(()=>{c(!1),s(),m()},[s,m]);return d.useEffect(()=>(t&&n&&(u.current=setTimeout(()=>{p()},n*1e3)),()=>{m()}),[l,n,t,s,p,m]),o.jsx(ff,{children:o.jsx(Ye,{children:l&&o.jsx(ve.div,{className:"right-toastHMargin top-toastVMargin fixed z-30 flex items-center justify-center",initial:{opacity:0,x:6},animate:{opacity:1,x:0},exit:{opacity:0,x:6},transition:Is,...i,children:o.jsxs(z,{variant:"raised",className:B("shadow-subtle gap-sm flex items-stretch rounded-xl border pl-[12px] dark:shadow-[0_4px_12px_rgba(0,0,0,0.5)]"),children:[a&&o.jsx("div",{className:"p-sm bg-subtler dark:bg-subtle my-[12px] flex aspect-square items-center justify-center rounded-md",children:o.jsx(de,{icon:a,className:"text-quiet",size:"md"})}),o.jsxs("div",{className:"flex flex-1 flex-row items-center justify-between",children:[o.jsx(F,{variant:"tiny",color:"default",className:"pl-sm max-w-[200px] shrink-0 pr-[12px]",children:e}),o.jsxs(z,{className:"flex h-full flex-col items-stretch justify-center border-l",children:[o.jsx(Me,{size:"tiny",variant:"noHover",text:f({defaultMessage:"Settings",id:"D3idYvSLF9"}),onClick:r,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-settings-button"}),o.jsx(z,{className:"border-t"}),o.jsx(Me,{size:"tiny",variant:"noHover",text:f({defaultMessage:"Dismiss",id:"TDaF6JVgG6"}),onClick:p,extraCSS:"!px-[12px] flex-1 hover:opacity-60",testId:"task-confirmation-dismiss-button"})]})]})]})},"task-creation-toast")})})});z8e.displayName="TaskCreationConfirmationToast";const tN=I.memo(({show:e,isBookmarked:t,currentSpace:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,onConvertToArticle:l,onRename:c,threadAccess:u,contextUUID:f,rwToken:m,collectionSlug:p,type:h,isConverting:g,showConvertThreadToArticle:y,className:x,firstResultBackendUUID:v,showSaveAsFileToSpace:b=!0,onBookmark:_,showBookmarkButton:w=!1,title:C,expiry:S,onRemoveExpiration:E,onOpen:k,onClose:M,buttonSize:j="small",threadId:R,isIncognitoThread:O,isNativeMobileVariant:D=!1})=>{const P="thread-overflow-dropdown",A=Z(),[T,N]=d.useState(!1),{trackEvent:L}=Te(),{isMobileStyle:U}=xe(),$=A.formatMessage({defaultMessage:"Export as PDF",id:"syduyBQ0eU"}),V=A.formatMessage({defaultMessage:"Export as Markdown",id:"d3prfCUwCt"}),W=A.formatMessage({defaultMessage:"Export as DOCX",id:"yQ3Z7H5E8P"}),[Q,q]=d.useState(!1),{session:H}=mt(),{convertContent:K,isExporting:G}=GJt({reason:P}),{fileRepoInfo:ee}=Ic({reason:P}),Y=n!==null,te=!!m,se=d.useMemo(()=>({pdf:"export thread PDF clicked",md:"export thread MD clicked",docx:"export thread DOCX clicked"}),[]),{collection:ae}=Ac({collectionSlug:p,reason:P}),{data:pe}=i$({fileRepoInfo:ee,fileName:R??"",reason:P,enabled:T&&Y}),{saveThreadToSpace:fe,removeThreadFromSpace:ge}=Vbe({fileRepoInfo:ee,fileExists:pe??!1,reason:P}),Se=d.useCallback(async Xe=>{v&&(L(se[Xe],{}),await K(v,Xe))},[v,se,L,K]),je=w&&U&&!!_,ye=!Y&&(h===Ko.LIBRARY||h===Ko.SEARCH)&&!!s,be=Y&&te&&!!a,Ne=Y&&!!i,{isUserAtLeastWriter:ke}=xx({reason:P}),{onShareThreadToSpace:Ie,onMakeThreadPrivate:Ce,isShareable:Ge}=_B({threadAccess:u,contextUUID:f,rwToken:m,collectionSlug:p,reason:P}),tt=Y&&ke&&!Ge&&!!Ie,gt=Y&&ke&&Ge&&!!Ce,Ee=te&&!!r,Re=Y&&b&&!pe&&!Q&&!!ae&&ae?.user_permission>=2,Vt=te&&!!E&&!!S&&!O,pt=Y&&b&&(pe||Q),[Nt,Ke]=d.useState(!1),{canCreateTask:He,isTaskModalOpen:Tt,handleCreateTask:We,handleTaskModalClose:_t,handleTaskModalSuccess:Kt,taskPrefillData:en,showConfirmationToast:Rt,handleConfirmationToastSettings:Ut,handleConfirmationToastDismiss:Rn}=HJt(),{variation:rn,loading:at}=R4(!1),yt=d.useMemo(()=>[{type:"default",icon:t?Jce:UO,text:t?A.formatMessage({defaultMessage:"Bookmarked",id:"k0fraU5NBY"}):A.formatMessage({defaultMessage:"Add Bookmark",id:"Y4GyA+IDCn"}),show:je,onClick:_},{type:"default",icon:ar,text:A.formatMessage({defaultMessage:"Add to Space",id:"nB+VQ2svMZ"}),show:ye,onClick:s,testId:"thread-add-to-space"},{type:"default",icon:ZOe,text:A.formatMessage({defaultMessage:"Swap Space",id:"y3tRs6Jpig"}),show:be,onClick:a,testId:"thread-swap-space"},{type:"default",icon:kt,text:A.formatMessage({defaultMessage:"Remove from Space",id:"2B71WoR6Sk"}),show:Ne,onClick:i,testId:"thread-remove-from-space"},{type:"default",icon:uo,text:A.formatMessage({defaultMessage:"Share thread with Space",id:"kynn3b03Sq"}),show:tt,onClick:Xe=>{Xe.preventDefault(),Ie()},testId:"thread-share-to-space"},{type:"default",icon:kg,text:A.formatMessage({defaultMessage:"Make thread private",id:"AIUSJMqN6C"}),show:gt,onClick:Xe=>{Xe.preventDefault(),Ce()},testId:"thread-make-private"},{type:"default",icon:JOe,text:A.formatMessage({defaultMessage:"Convert to Page",id:"IcFSSFTdA7"}),show:y,onClick:l,testId:"thread-article-create",disabled:g},{type:"default",icon:eue,text:A.formatMessage({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),show:Vt,onClick:E},{type:"default",icon:uo,text:A.formatMessage({defaultMessage:"Save as file to Space",id:"L8nSm8m8qs"}),show:Re,onClick:()=>{!v||!R||(q(!0),L("save thread to space clicked",{}),fe(v,R))},testId:"thread-save-to-space"},{type:"default",icon:Fd,text:A.formatMessage({defaultMessage:"Remove file from Space",id:"TjcTDl4lU+"}),show:pt,onClick:async()=>{await ge(R??""),q(!1)},testId:"remove-file-from-space"},{type:"default",icon:Im,text:A.formatMessage({defaultMessage:"Create task",id:"7X1tNR2pav"}),show:He,onClick:We,testId:"thread-create-task"},{type:"separator",show:(tt||gt||y)&&!!v},{type:"default",icon:Tg,text:$,show:!!v,onClick:()=>Se("pdf"),disabled:G,testId:"thread-export-pdf"},{type:"default",icon:eDe,text:V,show:!!v,onClick:()=>Se("md"),disabled:G,testId:"thread-export-md"},{type:"default",icon:Qk,text:W,show:!!v,onClick:()=>Se("docx"),disabled:G,testId:"thread-export-docx"},{type:"separator",show:Ee&&(ye||y)},{type:"default",icon:Fd,text:A.formatMessage({defaultMessage:"Delete",id:"K3r6DQW7h+"}),show:Ee,onClick:()=>Ke(!0),testId:"thread-delete"}],[ye,Ne,be,Ee,g,G,y,l,v,A,$,V,W,Se,tt,Ie,gt,Ce,fe,R,Re,ge,pt,L,je,_,t,s,i,a,Vt,E,He,We]),wt=f&&m&&H,Mt=d.useCallback(()=>{N(!0),k?.()},[k]),bt=d.useCallback(()=>{N(!1),M?.()},[M]),_e=ae?.user_permission&&Hg(ae.user_permission),ze=d.useMemo(()=>o.jsxs("div",{className:"flex min-h-10 flex-col justify-center",children:[o.jsxs("div",{className:"gap-x-sm group relative flex items-center justify-between py-0.5",children:[wt&&o.jsx(z,{className:"-inset-x-sm absolute -inset-y-0 rounded-lg opacity-0 transition-opacity duration-150 group-hover:opacity-100",variant:"subtler"}),o.jsx(F,{variant:"small",className:"relative line-clamp-1",color:"light",children:C}),wt&&c&&o.jsx(Me,{size:"tiny",icon:Bk,onClick:c,testId:"thread-rename",toolTip:A.formatMessage({defaultMessage:"Rename Thread",id:"4cT2c/aQya"}),extraCSS:"-mr-sm opacity-0 group-hover:opacity-100 transition-opacity duration-150"})]}),n&&!_e&&o.jsxs("div",{className:"gap-x-xs -mt-xs flex h-8 items-center",children:[o.jsx(tDe,{className:"text-quietest size-4 shrink-0 -translate-y-0.5"}),o.jsx("div",{className:"shrink-0 scale-90",children:n.emoji?o.jsx(gf,{unified:n.emoji,size:"small"}):o.jsx(uo,{size:16,className:"text-quietest shrink-0 -translate-y-0.5"})}),o.jsx(F,{variant:"tinyRegular",color:"light",className:"line-clamp-1",children:n.title})]})]}),[wt,C,c,A,n,_e]),Oe=d.useMemo(()=>[{text:A.formatMessage({defaultMessage:"Nevermind",id:"64sfSNetr+"}),onClick:()=>Ke(!1),testId:"thread-delete-nevermind"},{text:A.formatMessage({defaultMessage:"Confirm",id:"N2IrpMDHDB"}),variant:"rejected",onClick:()=>{Ke(!1),r?.(R??"")},testId:"thread-delete-confirm"}],[A,r,R]),nt=d.useCallback(()=>Ke(!1),[]);return!e||yt?.every(Xe=>!Xe.show)?null:o.jsxs(o.Fragment,{children:[o.jsx("div",{className:x,children:o.jsx(nn,{items:yt,isMobileStyle:U,onOpen:Mt,onClose:bt,placement:"bottom-end",header:C?ze:void 0,children:D&&U?o.jsx(me,{testId:"thread-dropdown-menu",size:j,icon:Ud,variant:"common",pill:!0,extraCSS:B("",{"!text-foreground !bg-subtle":T})}):o.jsx(Me,{testId:"thread-dropdown-menu",size:j,icon:Ud,extraCSS:B("",{"!text-foreground !bg-subtle":T})})})}),o.jsx(e$,{isOpen:Nt,onClose:nt,message:A.formatMessage({defaultMessage:"Delete thread",id:"2WxP2iMtPx"}),subtitle:A.formatMessage({defaultMessage:"Are you sure you want to delete this thread?",id:"9JVHvYsJ0s"}),actionList:Oe}),o.jsx(gc,{children:!at&&rn?o.jsx(I4,{open:Tt,onClose:_t,onSave:Kt,initialConfiguration:en?a0e(en):null,source:"thread_dropdown",trackEvent:L}):o.jsx(UH,{open:Tt,onClose:_t,onSuccess:Kt,prefill:en,source:"thread_dropdown"})}),o.jsx(z8e,{message:A.formatMessage({defaultMessage:"Created task",id:"sYXsMoH4Bc"}),isVisible:Rt,onSettingsClick:Ut,onTimeout:Rn,timeout:5,icon:Im})]})});tN.displayName="ThreadOverflowDropdown";const nen=({reason:e})=>{const{$t:t}=Z(),n=et(),{firstResult:{context_uuid:r,thread_access:s=bme,collection_info:{slug:a}={}}={}}=Ft(),{isEnterprise:i}=Hn({reason:e}),{openVisitorLoginUpsell:l}=or({enabled:!n}),c=ji(),{handleAccessChange:u,isShareable:f}=_B({threadAccess:s,contextUUID:r,rwToken:c,collectionSlug:a,reason:e}),m=d.useCallback(y=>{y!==s&&(n?r&&c&&u(y):l({title:t({defaultMessage:"Sign in to save private {threads}",id:"Rf9T7Whe3t"},{threads:"Threads"}),origin:Le.SHARE_DROPDOWN,sheetModalVariant:"bottom-sheet-gradient"}))},[s,n,r,c,l,t,u]),p=d.useCallback(()=>{i||s===Ct.PRIVATE_READ&&n&&m(Ct.PUBLIC_READ)},[i,s,n,m]),{accessLevelMenuItems:h,selectedAccessMenuItem:g}=u0e({currentAccessLevel:s,onClick:m,isCollection:!1,isPage:!1,reason:e});return d.useMemo(()=>({rwToken:c,thread_access:s,handleShareDropdownClick:p,accessLevelMenuItems:h,selectedAccessMenuItem:g,isThreadSharable:f,context_uuid:r}),[h,r,p,f,c,g,s])},G8e=()=>{try{return Vw().activeEntryIdx}catch{return}},q8e=I.memo(({shareHref:e,shareSource:t,hasMounted:n,maybeContextUUID:r,onClick:s,...a})=>{const{$t:i}=Z(),{trackEvent:l}=vx(),{openToast:c}=fn(),u=G8e(),f=d.useCallback(()=>{s?.(),c({message:i({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"}),variant:"success",timeout:3}),navigator.clipboard.writeText(n?jE(decodeURIComponent(e),u?.toString()):""),l("click copy link button",{contextUUID:r,source:t||"copyLinkButton"})},[s,c,i,n,e,u,l,r,t]);return o.jsx(me,{clickFeedback:!0,size:"small",onClick:f,toolTip:i({defaultMessage:"Copy link",id:"lbr3Lq2Lnm"}),tooltipLayout:"bottom",icon:Am,variant:"primary",testId:"copy-link-button",...a})});q8e.displayName="CopyLinkButton";const ren=({onClick:e,size:t="small",isMobileStyle:n,isNativeMobileVariant:r,variant:s="primary",testId:a="share-button"})=>{const{$t:i}=Z();return r?o.jsx(me,{pill:!0,onClick:e,variant:"common",size:t,icon:b0,extraCSS:"-mr-sm",testId:a}):n?o.jsx(Me,{onClick:e,icon:b0,variant:"common",size:t,testId:a}):o.jsx(me,{onClick:e,variant:s,size:t,text:i({defaultMessage:"Share",id:"OKhRC6eWRw"}),icon:b0,testId:a})},K8e=I.memo(({hasMounted:e,shareHref:t,EditorDropDownContent:n,onClick:r,maybeContextUUID:s,size:a="small",showCopyLinkButton:i=!0,contentWidth:l,variant:c="primary",isOpen:u,onClose:f,isNativeMobileVariant:m=!1})=>{const{isMobileStyle:p}=xe(),{device:{isMacOS:h}}=Pt(),y=Ot()?.get("open-share"),[x,v]=d.useState(!1),b=u!==void 0,_=b?u:x;d.useEffect(()=>{y&&(r?.(),v(!0),_x({}))},[y,r]);const w=d.useCallback(()=>{r?.(),b||v(E=>!E)},[r,b]),C=d.useCallback(()=>{f?.(),b||v(!1)},[b,f]),S=d.useCallback(E=>{(h?E.metaKey&&E.shiftKey&&E.key==="c":E.ctrlKey&&E.shiftKey&&E.key==="c")&&(E.preventDefault(),w())},[h,w]);return d.useEffect(()=>(document.addEventListener("keydown",S),()=>{document.removeEventListener("keydown",S)}),[S]),e?o.jsxs("div",{className:"gap-x-sm flex items-center",children:[!p&&i&&o.jsx(q8e,{shareHref:t,hasMounted:e,maybeContextUUID:s,onClick:r}),o.jsx(HT,{content:n,placement:"bottom-end",contentWidth:l,isMobileStyle:p,isOpen:_,onClose:C,children:o.jsx(ren,{onClick:w,size:a,isMobileStyle:p,isNativeMobileVariant:m,variant:c,testId:"share-button"})})]}):null});K8e.displayName="ShareDropdown";const Y8e=I.memo(({descriptionText:e,shareHref:t,isShareable:n,onlyOrgSharable:r,onlySpaceSharable:s,maybeContextUUID:a,hasMounted:i,icon:l})=>{const{$t:c}=Z(),u="hidden md:block",f="block md:hidden",{trackEvent:m}=vx(),h=Ot()?.get("open-share"),g=d.useCallback(()=>{document.hasFocus&&(navigator.clipboard.writeText(i?jE(decodeURIComponent(t)):""),m("click copy link button",{contextUUID:a,source:"shareThread"}))},[i,t,m,a]),y=d.useCallback(()=>{navigator.share({text:`${e} ${i?jE(decodeURIComponent(t)):""}`,title:"Perplexity AI"}),m("click mobile native share button",{})},[t,e,i,m]);return d.useEffect(()=>{i&&n&&!h&&g()},[i,n,g,h]),!i||!n?null:o.jsxs("div",{children:[o.jsx("div",{className:"mt-sm",children:o.jsxs(F,{variant:"tiny",color:"super",className:"flex",children:[o.jsx(de,{icon:Hle,className:"mr-xs",size:"xs"}),o.jsx("span",{children:c({defaultMessage:"Link copied. Paste to share",id:"pFRfr79EJO"})})]})}),o.jsxs("div",{className:u,children:[o.jsx(F,{variant:"baseSemi",className:"mb-sm mt-md",children:c(r?{defaultMessage:"Share this link within your Organization",id:"kjiOOzdX3d"}:s?{defaultMessage:"Share this link within your Space",id:"zAEbvlplsJ"}:{defaultMessage:"Share",id:"OKhRC6eWRw"})}),o.jsx(me,{size:"small",fullWidth:!0,onClick:g,text:c({defaultMessage:"Copy Link",id:"u5aHb4gcxX"}),icon:Am,clickFeedback:!0,testId:"copy-link-button"})]}),o.jsx("div",{className:f,children:o.jsx("div",{className:"mt-md",children:o.jsx(me,{variant:"primary",fullWidth:!0,text:c({defaultMessage:"Share",id:"OKhRC6eWRw"}),target:"_blank",icon:l,onClick:y})})})]})});Y8e.displayName="SocialShareLinks";const Q8e=I.memo(({descriptionText:e,sharableURL:t,isNativeMobileVariant:n=!1,variant:r="primary"})=>{const s="share-thread-dropdown",{$t:a}=Z(),i=Os(),{rwToken:l,thread_access:c,handleShareDropdownClick:u,accessLevelMenuItems:f,selectedAccessMenuItem:m,isThreadSharable:p,context_uuid:h}=nen({reason:s}),g=o.jsxs("div",{className:"p-sm gap-sm flex flex-col",children:[l!=null&&o.jsxs("div",{children:[o.jsx(F,{variant:"baseSemi",children:a({defaultMessage:"Share this Thread",id:"WMdsw58EMp"})}),o.jsx(Rz,{choices:f})]}),o.jsx(Y8e,{descriptionText:e,shareHref:t,isShareable:p,onlyOrgSharable:c===Ct.ORG_READ,onlySpaceSharable:c===Ct.COLLECTION_READ,maybeContextUUID:h,hasMounted:i,icon:m?.icon})]});return o.jsx(K8e,{hasMounted:i,shareHref:t,EditorDropDownContent:g,icon:m?.icon,onClick:u,maybeContextUUID:h,showCopyLinkButton:!1,isNativeMobileVariant:n,variant:r})});Q8e.displayName="ShareThreadDropdown";const Pz=d.memo(({visible:e,tweetDescriptionText:t,threadSharedSlug:n,urlSearchParams:r,isNativeMobileVariant:s=!1,variant:a="primary"})=>{const i=Os(),l=G8e(),[c,u]=d.useState("");d.useEffect(()=>{if(typeof window>"u")return;const{protocol:h,host:g}=window.location,y=`${h}//${g}/search/${n}?${r?.toString()}`;u(y)},[n,r]);const f=d.useMemo(()=>encodeURIComponent(i?jE(decodeURIComponent(c),l?.toString()):""),[i,c,l]),m=d.useMemo(()=>t!=null?`Perplexity AI: ${t}`:"Perplexity AI",[t]),p=d.useMemo(()=>B("transition-all duration-300 flex items-center gap-x-xs md:gap-x-0",{"opacity-0":!e,"opacity-100":e}),[e]);return o.jsx("div",{className:p,children:e&&o.jsx(Q8e,{descriptionText:m,sharableURL:f,isNativeMobileVariant:s,variant:a})})});Pz.displayName="ThreadShareButtons";const Lz=I.memo(({isBookmarked:e,handleAddBookmark:t,handleRemoveBookmark:n,size:r="small",isNativeMobileVariant:s=!1})=>{const{$t:a}=Z(),{isMobileStyle:i}=xe(),l={icon:e?Jce:UO,size:r,testId:"article-bookmark-button",toolTip:a(e?{defaultMessage:"Bookmarked",id:"k0fraU5NBY"}:{defaultMessage:"Bookmark",id:"Rs4kCECwJ8"}),onClick:e?n:t};return s&&i?o.jsx(me,{...l,variant:"common",pill:!0}):o.jsx(Me,{...l,variant:"common"})});Lz.displayName="BookmarkButton";const X8e=I.memo(({currentTitle:e,isBookmarked:t,effectiveCollection:n,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:f,rwToken:m,onBookmark:p,onRemoveBookmark:h,showBookmarkButton:g,onRemoveExpiration:y,showExportButton:x})=>{const v=Os(),b=et(),{session:_}=mt(),w=Ot(),{firstResult:{backend_uuid:C,status:S,context_uuid:E,privacy_state:k,thread_access:M,thread_title:j,author_image:R,thread_url_slug:O,expiry_time:D,query_str:P}={},inFlight:A}=Ft(),{isMax:T,isPro:N}=St(),L=S===Qn.PENDING,U=k===$g.INCOGNITO;return o.jsxs("div",{className:"px-md py-sm flex h-full items-center justify-between",children:[o.jsx("div",{className:"pointer-events-auto flex min-w-0 flex-1 items-center",children:o.jsx(Un,{user:R??(b&&A?_?.user?.image??void 0:void 0),showProBadge:N,showMaxBadge:T,size:"medium"})}),o.jsxs("div",{className:"gap-sm pointer-events-auto flex items-center",children:[g&&o.jsx(Lz,{isBookmarked:t,handleAddBookmark:p,handleRemoveBookmark:h,isNativeMobileVariant:!0}),!U&&!L&&o.jsx(Pz,{visible:!!O,tweetDescriptionText:j||P,threadSharedSlug:O??void 0,urlSearchParams:w,isNativeMobileVariant:!0}),o.jsx(tN,{className:"ml-sm",isNativeMobileVariant:!0,title:e,show:v&&!L,isBookmarked:t,onDelete:r,onAddToSpace:s,onSwapSpace:a,onRemoveFromSpace:i,currentSpace:n,onConvertToArticle:l,onRename:c,isConverting:u,showConvertThreadToArticle:f,rwToken:m??void 0,contextUUID:E,threadAccess:M,collectionSlug:n?.slug,type:U?Ko.INCOGNITO_SEARCH:Ko.SEARCH,firstResultBackendUUID:x?C:void 0,onBookmark:t?h:p,showBookmarkButton:!1,onRemoveExpiration:y,expiry:D,threadId:O??"",isIncognitoThread:U})]})]})});X8e.displayName="CometMobileHeader";const sen=e=>e&&(e.viewCount>0||e.forkCount>0),Z8e=I.memo(({textVariant:e="small"})=>{const{socialStats:t,firstResult:n}=Ft(),{$t:r}=Z(),s=t&&t.viewCount>0,a=t&&t.forkCount>0;return!n?.backend_uuid||!s&&!a?null:o.jsxs(z,{className:"gap-x-sm flex items-center",children:[s&&o.jsx(bn,{tooltipText:r({defaultMessage:"Views",id:"akF0LyBDxT"}),tooltipLayout:"bottom",asChild:!0,children:o.jsxs(F,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[o.jsx(Vk,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),o.jsx("span",{children:l8(t.viewCount)})]})}),a&&o.jsx(bn,{tooltipText:r({defaultMessage:"Follow-ups Asked",id:"DDyRtVl03r"}),tooltipLayout:"bottom",asChild:!0,children:o.jsxs(F,{variant:e,color:"light",className:"gap-x-xs flex items-center",children:[o.jsx(Gb,{width:"1.1em",height:"1.1em",className:"-translate-y-px"}),o.jsx("span",{children:l8(t.forkCount)})]})})]})});Z8e.displayName="ThreadSocialData";const aen=()=>{const{$t:e}=Z();return[{name:"google_drive",title:C5,avatarSrc:w5},{name:"onedrive",title:Dg,avatarSrc:E5},{name:"sharepoint",title:Fg,avatarSrc:M5},{name:"web",title:"Web",icon:of},{name:"scholar",title:e({defaultMessage:"Scholar",id:"vzzehe/j6l"}),icon:tE},{name:"social",title:e({defaultMessage:"Social",id:"qOLogguG/7"}),icon:Sce},{name:"edgar",title:_me,icon:Cce},{name:"wiley",title:tF,avatarSrc:Om},{name:"crunchbase",title:eF,avatarSrc:JD},{name:"notion",title:N5,avatarSrc:T5},{name:"org",title:e({defaultMessage:"Org files",id:"iWDsD738/m"}),icon:wce},{name:"box",title:Ug,avatarSrc:k5},{name:"factset",title:_5,avatarSrc:ZD},{name:"gcal",title:aF,avatarSrc:S5},{name:"my_files",title:e({defaultMessage:"My files",id:"bYbrKKlKgS"}),icon:_ce},{name:"dropbox",title:Dm,avatarSrc:oF}]},J8e=I.memo(({sources:e})=>{const t=aen(),n=3,r=e.slice(n).map(s=>t.find(i=>i.name===s)?.title).join(", ");return o.jsxs("div",{className:"flex items-center",children:[e.slice(0,n).map(s=>{const a=t.find(i=>i.name===s);return a?o.jsx(e9e,{imgSrc:a.avatarSrc,icon:a.icon,title:a.title},s):null}),e.length>n&&o.jsx(Oz,{tooltipText:r,children:o.jsxs(F,{variant:"micro",color:"light",className:"flex size-4 cursor-default items-center justify-center",children:["+",e.length-n]})})]})});J8e.displayName="ThreadSourcesList";const Oz=I.memo(({children:e,tooltipText:t})=>o.jsx(bn,{tooltipText:t,asChild:!0,tooltipLayout:"bottom",children:o.jsx(z,{variant:"subtler",className:"-ml-xs !ring-inverse relative aspect-square shrink-0 rounded-full p-0.5 ring-[1.5px] first:ml-0",children:e})}));Oz.displayName="SourceIconWrapper";const e9e=I.memo(({imgSrc:e,icon:t,title:n})=>o.jsx(Oz,{tooltipText:n,children:t?o.jsx(de,{icon:t,className:"text-quiet size-4"}):o.jsx("img",{src:e,alt:n,className:"size-4 rounded-full object-cover"})}));e9e.displayName="SourceIcon";const t9e=I.memo(({authorUsername:e,threadAccess:t,authorImage:n,authorId:r,isIncognitoThread:s,collection:a})=>{const i=et(),l=!e&&!i&&!s,[c,u]=d.useState(!1),{isIncognito:f}=Ga({reason:"thread-context"}),[m,p]=d.useState(!1),{inFlight:h,firstResult:{expiry_time:g,updated_datetime:y}={}}=Ft(),x=!l,v=a?.user_permission&&Hg(a.user_permission),b=g&&i2(g)&&!s&&!a&&!m,{$t:_}=Z(),w=f&&status===Qn.PENDING?void 0:n,C=d.useCallback(()=>{u(!0)},[]),S=d.useMemo(()=>o.jsx(n9e,{authorUsername:e,authorId:r,updatedTimestamp:y??"",expiryTimestamp:g??"",threadAccess:t,isAnon:l,isIncognitoThread:s,isInFlight:h,setHasRemovedExpiration:p,hasRemovedExpiration:m}),[r,e,g,h,l,s,t,y,m]),E=d.useCallback(()=>{u(!1)},[]);return o.jsxs("div",{className:"gap-sm flex min-w-0 items-center",children:[x&&o.jsx(ei,{onOpen:C,onClose:E,content:S,placement:"bottom-start",childrenClassName:"inline-flex pb-xs -mb-xs",children:o.jsxs("div",{className:"group relative flex cursor-pointer items-center gap-0.5",children:[o.jsx(z,{variant:"transparent",className:B("group-hover:!bg-subtle -inset-three absolute rounded-full duration-150",{"!bg-subtle":c})}),o.jsxs("div",{className:"relative isolate flex items-center gap-0",children:[o.jsx(Un,{user:w??void 0,size:"small",className:"relative z-10 select-none [&>*]:size-6"}),b&&o.jsx(z,{variant:"background",className:"p-half absolute bottom-1.5 right-0 z-20 shrink-0 translate-x-1/2 translate-y-1/2 rounded-full",children:o.jsx(z,{variant:c?"subtle":"background",className:B("group-hover:bg-subtle flex items-center justify-center rounded-full duration-150"),children:o.jsx(Zce,{size:16,className:"text-quiet relative"})})})]}),!b&&o.jsx(Wn,{className:B("group-hover:text-quiet relative size-3 transition-all duration-150",{"text-quiet":c,"text-quietest":!c})})]})}),a&&!v&&o.jsx(bn,{tooltipText:_({defaultMessage:"Part of the {collectionTitle} Space",id:"eNL1YKIijb"},{collectionTitle:a.title}),asChild:!0,children:o.jsx(qe,{href:`/spaces/${a.slug}`,className:"inline-flex",children:o.jsxs(z,{variant:"background",bgHover:"subtler",className:B("pr-sm hover:ring-subtle ring-subtlest gap-xs @[1100px]/main:max-w-[80px] @[1200px]/main:max-w-[160px] py-two relative z-20 flex max-w-[80px] shrink-0 items-center justify-center rounded-full ring-1",{"pl-xs":a.emoji,"pl-two":!a.emoji}),children:[o.jsx(z,{className:"flex size-5 items-center justify-center rounded-full",variant:a.emoji?"transparent":"subtler",children:a.emoji?o.jsx(gf,{unified:a.emoji,size:"tiny"}):o.jsx(uo,{size:12,className:"text-quiet relative"})}),o.jsx(F,{variant:"tiny",color:"light",className:"min-w-0 flex-1 truncate",children:a.title})]})})})]})});t9e.displayName="ThreadAuthorInfo";const n9e=I.memo(({authorUsername:e,authorId:t,updatedTimestamp:n,expiryTimestamp:r,threadAccess:s,isAnon:a,isIncognitoThread:i,isInFlight:l,setHasRemovedExpiration:c,hasRemovedExpiration:u})=>{const{locale:f}=Z(),{session:m}=mt(),{socialStats:p,firstResult:{sources:h,backend_uuid:g}={sources:[],backend_uuid:""}}=Ft(),y=Op(),x=n.endsWith("Z")?n:`${n}Z`,v=r.endsWith("Z")?r:`${r}Z`,b=new Date(x),_=b.toLocaleDateString(f,{year:"numeric",month:"long",day:"numeric"}),w=b.toLocaleString(f,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}),C=v?new Date(v).toLocaleString(f,{year:"numeric",month:"long",day:"numeric",hour:"numeric",minute:"numeric"}):"",S=Z(),E=new Date(v),k=x_(S,E,{style:"short",numeric:"auto"}),M=W5(b),j=t===m?.user?.id,{$t:R}=Z(),O=h?.sources,D=O&&O.length>0&&!(O.length===1&&O[0]==="web"),P=d.useMemo(()=>o.jsx(bn,{tooltipText:C,tooltipLayout:"bottom",children:k}),[C,k]),A=d.useCallback(()=>{g&&(E3(g),c(!0))},[g,c]),T=d.useMemo(()=>({delayDuration:0,offset:4}),[]),N=U8e();return o.jsxs("div",{className:"group flex flex-col divide-y",children:[i&&o.jsx(ld,{children:o.jsxs(F,{variant:"tinyRegular",color:"light",className:"gap-xs flex items-center",children:[o.jsx("div",{className:"inline-flex opacity-70",children:o.jsx(_f,{size:"tiny",inverse:!0})}),R({defaultMessage:"Incognito Thread",id:"0iMI59SVV3"})]})}),r&&i2(r)&&!u&&!i&&o.jsxs(ld,{children:[o.jsxs(F,{variant:"tiny",className:"flex items-center gap-0.5",children:[R({defaultMessage:"Temporary Thread",id:"YuuBvz04y+"}),o.jsx(bn,{tooltipText:N,tooltipLayout:"right",asChild:!0,delayDuration:0,children:o.jsx("span",{children:o.jsx(de,{icon:Yce,size:"2xs",className:"text-quiet opacity-0 duration-150 hover:opacity-100 group-hover:opacity-60"})})})]}),!y&&o.jsx(Me,{size:"tiny",onClick:A,icon:eue,pill:!0,extraCSS:"-mr-xs",toolTip:R({defaultMessage:"Remove Expiration",id:"N4qHoBsI8d"}),tooltipLayout:"right",tooltipProps:T})]}),!i&&e&&o.jsx(ld,{leading:R({defaultMessage:"Created by",id:"p4mBmLaKhc"}),trailing:j?R({defaultMessage:"{author} (You)",id:"QbgjmmII2s"},{author:e}):e}),r&&i2(r)?o.jsx(ld,{leading:R({defaultMessage:"Expires",id:"xhQMeQjkbK"}),trailing:P}):o.jsx(ld,{leading:R({defaultMessage:"Last Updated",id:"EeRwjEG9ge"}),trailing:i2(n)?o.jsx(bn,{tooltipText:w,tooltipLayout:"bottom",children:M?R({defaultMessage:"Today",id:"zWgbGgjUUg"}):_}):l?R({defaultMessage:"Just now",id:"bxv59Vvssz"}):"-"}),D&&o.jsx(ld,{leading:R({defaultMessage:"{n, plural, one {Source} other {Sources}}",id:"Qe5RCQLzVg"},{n:O.length}),children:o.jsx(F,{variant:"tinyRegular",children:o.jsx(J8e,{sources:O})})}),!a&&Eft(s??0)&&!i&&sen(p)&&o.jsx(ld,{children:o.jsx(Z8e,{textVariant:"tiny"})})]})});n9e.displayName="InfoMenu";const ld=I.memo(({leading:e,trailing:t,children:n})=>o.jsxs(z,{className:"mx-sm group/row flex h-8 items-center justify-between gap-[12px]",children:[e&&o.jsx(F,{variant:"tinyRegular",color:"light",children:e}),n,t&&o.jsx(F,{variant:"tiny",className:"text-right",children:t})]}));ld.displayName="InfoMenuRow";const oen="",r9e=I.memo(({isOpen:e,onClose:t,onSave:n,defaultTitle:r})=>{const{$t:s}=Z(),[a,i]=d.useState(r??""),l=d.useCallback(()=>{n(a),t()},[a,t,n]),c=d.useRef(null),u=g=>{i(g)},f=g=>{g.key==="Enter"&&l()},m=d.useMemo(()=>[{text:s({defaultMessage:"Save",id:"jvo0vs3nF0"}),variant:"primary",onClick:l,testId:"thread-rename-save"}],[s,l]),{isMobileUserAgent:p,isMobileStyle:h}=xe();return o.jsx(qt,{isOpen:e,title:s({defaultMessage:"Edit Thread Title",id:"lv9nkrxVPt"}),onClose:t,actionList:m,children:o.jsx(OT,{size:"large",inputRef:c,isMobileUserAgent:p,children:o.jsx(DT,{isMobileUserAgent:p,isMobileStyle:h,placeholder:s({defaultMessage:"What's your Thread about?",id:"bq3jzjDvHH"}),value:a,onChange:u,autoFocus:!0,onKeyDown:f,ref:c,testId:"thread-rename-input"})})})});r9e.displayName="ThreadTitleEditModal";const s9e=I.memo(({className:e=""})=>{const{device:{isWindowsOS:t,isMacOS:n}}=Pt(),r=n||t,s=Fle(),{trackEventOnce:a}=Te(),{handleDownloadClick:i}=Dge({isUnsupportedDevice:!r,isWindows:t});return d.useEffect(()=>{r&&!s&&a("comet download button thread tooltip viewed",{})},[r,s,a]),!r||s?null:o.jsx("div",{className:e,children:o.jsx(hs,{variant:"primary",size:"small",leadingIcon:Uy,onClick:()=>i({upsellName:"thread_header_tooltip"}),children:o.jsx(ie,{defaultMessage:"Download Comet",id:"4UzK+jLqkI"})})})});s9e.displayName="CometDownloadButtonUpsell";const Dz=I.memo(({isFixedPosition:e=!1})=>{const t="thread-header-v2",{$t:n}=Z(),[r,s]=d.useState(!1),a=d.useRef(void 0),i=vt(),l=Os(),c=et(),{firstResult:{backend_uuid:u,status:f,frontend_context_uuid:m,collection_info:p,query_str:h,context_uuid:g,privacy_state:y,bookmark_state:x,thread_access:v,thread_title:b,author_username:_,author_image:w,author_id:C,thread_url_slug:S,expiry_time:E}={},inFlight:k}=Ft(),M=f===Qn.PENDING,{session:j}=mt(),{collections:R}=WT({autoFetch:!M,reason:t}),O=ji(),{deleteThread:D}=Uw({reason:t}),{openModal:P,closeModal:A}=xt(),{openVisitorLoginUpsell:T}=or({enabled:!c}),{removeThreadFromCollection:N,swapThreadCollection:L,firstTimeBookmark:U}=nx({reason:t}),$=HHt(),{openAddToCollectionModal:V}=I8e({entryUUID:u,frontendContextUUID:m,existingCollection:p,existingFirstThreadQuery:h,filterOnSearchTerm:!0,reason:t}),W=vU(),{handleCreateNewSpaceForThread:Q}=xU(),{trackEvent:q}=Te(),{allowArticleCreation:H}=wo({reason:t}),{isMobileStyle:K}=xe(),G=y===$g.INCOGNITO,ee=x==="BOOKMARKED",{handleAppDownloadClicked:Y}=mf("mobile-header"),{mwebUpsellWhatsApp:te,loadingMwebUpsellWhatsApp:se}=B_(),ae=U_({origin:"mobile-header"}),pe=Ot(),[fe,ge]=d.useState(b??h??""),Se=Fle(),je=dn(),ye=!Se&&!je?"common":"primary",be=!M&&!G&&u!=null;u0e({currentAccessLevel:v??bme,onClick:vn,isCollection:!1,isPage:!1,reason:t}),!M&&p!==void 0&&(a.current=p);const Ne=M?a.current:p;d.useEffect(()=>{fe===""&&ge(b??h??"")},[b,h,fe]);const ke=d.useCallback(()=>{u&&(q("delete thread from search result page click",{entryUUID:u}),D({entryUUID:u,callback:()=>i.push("/",void 0,"Delete thread")}))},[D,u,i,q]),Ie=d.useCallback(()=>{if(!c){T({title:n({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Le.THREAD_BOOKMARK_BUTTON,sheetModalVariant:"bottom-sheet-gradient"});return}if(ee||!u)return;g&&q("click add thread to space",{contextUUID:g,isBookmark:!0});const bt=R.find(_e=>Hg(_e.user_permission));bt===void 0?U({entryUUID:u,frontendContextUUID:m}):L({entryUUID:u,newCollectionTitle:bt.title,newCollectionUUID:bt.uuid,newCollectionSlug:bt.slug,newCollectionAccess:bt.access,frontendContextUUID:m,newCollectionEmoji:bt.emoji??null,currentCollectionUUID:null,existingCollectionSlug:null,closeModal:vn,callback:()=>{$()},newCollectionUserPermission:bt.user_permission})},[c,ee,u,q,g,R,T,n,U,m,L,$]),Ce=d.useCallback(bt=>{if(bt==="add"&&g)q("click add thread to space",{contextUUID:g,isBookmark:!1});else{if(!m){ne.error("[ThreadHeader] frontendContextUUID is undefined");return}if(!u){ne.warn("[ThreadHeader] backend_uuid is undefined");return}W?Q(u,m):P("collectionSelectModal",{entryUUID:u,currentCollection:Ne??null,searchTerm:h,frontendContextUUID:m})}g&&q("click swap thread space",{contextUUID:g,isFromBookmark:Ne?Hg(Ne.user_permission):!1,collectionUUID:Ne?.uuid}),c?V():T({title:n({defaultMessage:"Sign in to bookmark your answers for later",id:"17vuOGPSKO"}),origin:Le.COLLECTIONS,sheetModalVariant:"bottom-sheet-gradient"})},[q,u,Ne,c,P,n,V,T,g,h,m,W,Q]),Ge=d.useCallback(()=>{if(!c)P("loginModal",{pitchMessage:{title:n({defaultMessage:"Sign in to create a {page}",id:"MsQ6yWbdOY"},{page:"Page"})},origin:Le.THREAD_TO_ARTICLE});else{s(!0);const bt=bo();g&&q("click convert thread to page",{oldContextUUID:g,newFrontendContextUUID:bt});const _e=new URLSearchParams({newFrontendContextUUID:bt,existingResultsCacheUUID:m??"",existingContextBackendUUID:g??"",existingBackendUUID:u??"",...Ne&&{collectionSlug:Ne.slug}}),ze=new URL(window.location.href);ze.pathname="page/new",ze.search=_e.toString();const Oe=ze.toString();i.push(Oe)}},[c,P,n,g,m,u,Ne,i,q]),[tt,gt]=d.useState(!1),Ee=d.useCallback(bt=>{const _e=Ne?.uuid;if(!g||!u){ne.error("[ThreadHeader] missing frontendContextUUID or entryUUID");return}if(!_e){ne.warn("[ThreadHeader] oldCollectionUUID is undefined");return}if(!p?.uuid){ne.warn("[ThreadHeader] collectionUUID is undefined");return}q("click remove thread from space",{contextUUID:g,collectionUUID:_e,isBookmark:bt==="remove bookmark"}),N({entryUUID:u,oldCollectionUUID:_e,callback:()=>{A(),$()},frontendContextUUID:m})},[u,A,p?.uuid,g,Ne?.uuid,m,$,N,q]),Re=$Jt,Vt=d.useCallback((bt,_e)=>{if(!bt||bt===oen){ne.warn("Empty title callback.");return}if(!g){ne.warn("No thread UUID found.");return}if(!O){ne.warn("No write token found.");return}Re({contextUUID:g,title:bt,rwToken:O,callback:_e,reason:t})},[g,O,Re]),pt=H&&!K&&!M&&!G,Nt=!M&&!G&&l,Ke=K&&!M,He=d.useCallback(bt=>{Vt(bt,()=>{gt(!1),ge(bt)})},[Vt]),Tt=d.useCallback(()=>{window.document.body.click(),gt(!0)},[]),We=d.useCallback(()=>{i.push("/",void 0,"New thread button")},[i]),_t=d.useCallback(()=>Ce("add"),[Ce]),Kt=d.useCallback(()=>Ce("swap"),[Ce]),en=d.useCallback(()=>Ee("remove"),[Ee]),Rt=d.useCallback(()=>Ee("remove bookmark"),[Ee]),{viewTitle:Ut}=Vw(),{isSidebarPinned:Rn}=In(),rn=11,at=d.useCallback(()=>{if(te){ae();return}q("clicked open in app button in mweb thread header",{}),Y()},[Y,ae,te,q]),yt=d.useCallback(()=>{u&&E3(u)},[u]),wt=d.useCallback(()=>gt(!1),[]),Mt=uf();return o.jsxs(o.Fragment,{children:[o.jsx("div",{className:B("h-headerHeight bg-base/95 pointer-events-none left-0 top-0 z-10 backdrop-blur-md duration-150 md:mb-0",e?"fixed":"absolute",e?"z-[1]":"z-10",{"max-[1224px]:md:bg-base":Rn,"max-[970px]:md:bg-base":!Rn}),style:{right:K?0:rn},children:Mt?o.jsx(X8e,{currentTitle:fe,isBookmarked:ee,effectiveCollection:Ne??null,onDelete:ke,onAddToSpace:_t,onSwapSpace:Kt,onRemoveFromSpace:en,onConvertToArticle:Ge,onRename:Tt,isConverting:r,showConvertThreadToArticle:pt,rwToken:O??null,onBookmark:Ie,onRemoveBookmark:Rt,showBookmarkButton:Nt,onRemoveExpiration:yt,showExportButton:be}):o.jsxs("div",{className:"gap-x-md px-md py-sm flex h-full items-center justify-between",children:[o.jsx("div",{className:"pointer-events-auto relative flex items-center",children:K?o.jsxs("div",{className:"gap-x-sm flex items-center",children:[o.jsx(n$,{className:"-ml-sm"}),o.jsx(me,{variant:"common",size:"small",icon:ar,text:n({defaultMessage:"New",id:"bW7B87wFFp"}),onClick:We})]}):o.jsx(t9e,{authorUsername:_??null,threadAccess:v??0,authorImage:w??(c&&k?j?.user?.image??null:null),authorId:C??"",isIncognitoThread:G,collection:Ne??null,privacyState:y})}),Ut&&o.jsx("div",{className:"fade-in animate-in duration-quick hidden min-w-0 flex-1 md:block",children:o.jsx(F,{className:"pointer-events-auto max-w-[400px] truncate whitespace-nowrap",variant:"baseSemi",children:Ut})}),o.jsxs("div",{className:"gap-x-sm pointer-events-auto relative flex items-center",style:{marginRight:K?0:-11},children:[o.jsxs("div",{className:"relative flex items-center",onClick:bt=>bt.stopPropagation(),children:[o.jsx(tN,{title:fe,show:l&&!M,isBookmarked:ee,onDelete:ke,onAddToSpace:_t,onSwapSpace:Kt,onRemoveFromSpace:en,currentSpace:Ne??null,onConvertToArticle:Ge,onRename:Tt,isConverting:r,showConvertThreadToArticle:pt,rwToken:O,contextUUID:g,threadAccess:v,collectionSlug:Ne?.slug,type:G?Ko.INCOGNITO_SEARCH:Ko.SEARCH,firstResultBackendUUID:be?u:void 0,onBookmark:ee?Rt:Ie,showBookmarkButton:Nt,onRemoveExpiration:yt,expiry:E,threadId:S??"",isIncognitoThread:G}),Nt&&!K&&o.jsx(Lz,{isBookmarked:ee,handleAddBookmark:Ie,handleRemoveBookmark:Rt})]}),!G&&!M&&o.jsx(Pz,{visible:!!S,tweetDescriptionText:b||h,threadSharedSlug:S??void 0,urlSearchParams:pe,variant:ye}),!K&&o.jsx(ho,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx(s9e,{})}),Ke&&!se&&o.jsx(ho,{isSamsungBrowser:!0,isComet:!0,isFirefoxDefaultSearch:!0,children:o.jsx("div",{className:"animate-in fade-in duration-300",children:o.jsx(me,{size:"small",variant:"primary",text:n(te?{defaultMessage:"Ask in WhatsApp",id:"8QxwIbOYLa"}:{defaultMessage:"Open in App",id:"fo3x6hDxdZ"}),onClick:at})})})]})]})}),tt&&o.jsx(r9e,{isOpen:tt,onClose:wt,onSave:He,defaultTitle:fe})]})});Dz.displayName="ThreadHeaderV2";const Fz=I.memo(({children:e,className:t,innerClassName:n})=>o.jsx("div",{className:B("px-md md:px-lg",t),children:o.jsx("div",{className:B("max-w-threadContentWidth mx-auto",n),children:e})}));Fz.displayName="ThreadSectionWrapper";var vle={};const ien=he(async()=>{const{SearchLoadingComponent:e}=await X(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-6pr8Dwqm.js");return{SearchLoadingComponent:t}},__vite__mapDeps([469,1,2,7,6,5]));return{default:e}}),a9e=I.memo(()=>o.jsx(Kw,{}));a9e.displayName="SearchErrorFallback";const vO=I.memo(e=>{const t=Lt(),[n,{height:r}]=Ho();return o.jsx(Nr,{fallback:a9e,code:"SOMETHING_WENT_WRONG_ERROR",children:o.jsx(hke,{children:o.jsx(JH,{children:o.jsx(ez,{children:o.jsxs(jW,{children:[o.jsxs(xz,{children:[o.jsx(Dz,{}),o.jsx("div",{className:"erp-sidecar:h-fit erp-sidecar:pb-0 mx-auto h-full",children:o.jsxs(z,{variant:"background",className:"relative",children:[o.jsx(Fz,{children:o.jsx(Iz,{})}),o.jsx(Az,{...e,lastResultBuffer:r})]})})]}),o.jsx(Z4,{measureRef:n},t)]})})})})})});vO.displayName="SearchContent";function o9e(e){const t=_ge(),{actions:{setCurrentThreadId:n}}=Ft(),r=hU(),s=Met(),{data:a}=Ue({queryKey:["storedResults"],queryFn:()=>U3(),refetchOnMount:!0});d.useEffect(()=>{if(e.entries){e.entries.forEach(c=>{c.reconnectable&&!s(c.backend_uuid)&&r(c.backend_uuid)});const l=e.entries[0]?.context_uuid??crypto.randomUUID();n(l),t(e.entries)}},[r,e.entries,t,n,s]);const i=d.useMemo(()=>{if(e.entries?.length)return e.entries;if(e.placeholderResults?.length)return e.placeholderResults;if(e.slugOrUUID){const l=a?.find(F3(e.slugOrUUID));if(l)return[l]}return ce},[e.placeholderResults,e.slugOrUUID,e.entries,a]);return d.useMemo(()=>({placeholderResults:i}),[i])}const i9e=I.memo(e=>{const{placeholderResults:t}=o9e(e);return ZH({confirmationRedirectsToHomepage:!1}),!t?.length&&e.skipLoadingUI!==!0?vle.NEXT_PUBLIC_IS_SIDECAR_BUILD?null:o.jsx(ien,{slugOrUUID:e.slugOrUUID}):vle.NEXT_PUBLIC_IS_SIDECAR_BUILD?o.jsx(vO,{...e,placeholderResults:t}):o.jsxs(o.Fragment,{children:[o.jsx(Cx,{childrenWidth:"none",children:o.jsx(vz,{children:o.jsx(vO,{...e,placeholderResults:t})})}),o.jsx(F4,{})]})});i9e.displayName="SearchPage";const len="streamId",cen=he(async()=>{const{SearchLoadingComponent:e}=await X(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-6pr8Dwqm.js");return{SearchLoadingComponent:t}},__vite__mapDeps([469,1,2,7,6,5]));return{default:e}});function uen({active:e,query:t,copilot:n,source:r,streamId:s}){const a=d.useMemo(()=>t&&e?[YJe({query_str:t,frontend_uuid:s,query_source:r??"default_search",mode:n==="true"?"COPILOT":"CONCISE"})]:ce,[t,e,s,r,n]);return d.useMemo(()=>e?{hasFrontendUUID:!!s,placeholderResults:a}:void 0,[e,a,s])}function den({active:e,frontendUUID:t}){const r=Co().getState().streams,a=(e?r[t]:void 0)?.placeholderChunk,i=d.useMemo(()=>a?[a]:void 0,[a]);return d.useMemo(()=>e?{skipLoadingUI:!0,placeholderResults:i}:void 0,[e,i])}function fen({active:e,slugOrUUID:t}){const n="search-components",r=vt(),s=d.useMemo(()=>F3(t),[t]),i=Co().getState().entries,l=e?Object.values(i).find(m=>m?.thread_url_slug===t||m?.backend_uuid===t):void 0,{data:c,error:u}=Kvt({slugOrUUID:t,enabled:!l&&e,reason:n});d.useEffect(()=>{c?.[0]&&Wbe(c[0])},[c]);const f=d.useMemo(()=>c?.length?c:l?[l]:ce,[c,l]);return d.useEffect(()=>{if(u){const m=U3();if(m.find(s)){const h=m.filter(g=>!s(g));Y1(h)}let p=null;u?.cause&&typeof u?.cause=="object"&&"error_code"in u.cause&&(u.cause.error_code===NX?(p=_m.ThreadAccessNotAllowed,ne.error(NX,{error:u,slugOrUUID:t})):u.cause.error_code===stt?(p=_m.ThreadExpired,ne.error(u?.message,{error:u,slugOrUUID:t})):(p=_m.InvalidThread,ne.error(u?.message,{error:u,slugOrUUID:t})),r.replace(`/?error=${p}&id=${t}`,"Search error"))}},[u,t,s,r]),d.useMemo(()=>e?{entries:f,slugOrUUID:t,hasError:!!u}:void 0,[e,f,u,t])}function l9e(){const{actions:{clearCurrentStreamId:e,clearCurrentThreadId:t}}=Ft(),n=typeof window<"u",r=ml(),s=!!(r?.new&&r?.uuid&&n),a=!!(r?.new&&!r?.uuid&&n),i=!!(!r?.new&&r?.uuid&&n),l=n?new URLSearchParams(window.location.search):null,c=l?.get("q")??void 0,u=l?.get("copilot")??void 0,f=l?.get("source")??void 0,m=l?.get(len),p=d.useMemo(()=>m??crypto.randomUUID(),[m]),h=den({active:s,frontendUUID:r?.uuid??""}),g=uen({active:a,query:c,copilot:u,streamId:p,source:f}),y=fen({active:i,slugOrUUID:r?.uuid??""});return d.useEffect(()=>()=>{e(),t()},[e,t]),d.useLayoutEffect(()=>{g?.hasFrontendUUID&&(e(),t())},[e,t,g?.hasFrontendUUID]),QXt(a,p,"new-query-search-components"),d.useMemo(()=>{if(s){const x=r?.uuid;if(!x||!Dle(x))return{component:o.jsx(iu,{to:"/"})}}else if(a){if(!c||c==="pending")return{component:o.jsx(iu,{to:"/"})}}else if(i){const x=r?.uuid;if(!x||x==="undefined")return{component:o.jsx(iu,{to:"/"})};if(y?.hasError)return null}else return n?{component:o.jsx(iu,{to:c?`/search/new${window.location.search}`:"/"})}:{component:o.jsx(cen,{})};return{props:{...h,...g,...y}}},[n,y,i,g,a,h,s,r?.uuid,c])}const c9e=I.memo(()=>{const e=l9e();return e?"component"in e?e.component:o.jsx(i9e,{...e.props}):null});c9e.displayName="SearchComponents";const men=(e,t,n)=>{const{value:r,loading:s}=jt({flag:"mweb-followup-input",defaultValue:e,extraAttributes:t,subjectType:"visitor_id",shortCircuitCases:n});return d.useMemo(()=>({variation:r,loading:s}),[r,s])};function pen({resultsLength:e,delayMs:t=500}){const[n,r]=d.useState(!1);return d.useEffect(()=>{if(e>0){const s=setTimeout(()=>{r(!0)},t);return()=>{clearTimeout(s)}}r(!1)},[e,t]),n}function hen({scrollContainerRef:e}){const[t,n]=d.useState(!1);return d.useEffect(()=>{const r=e.current;if(!r)return;const s=r===document.documentElement,a=()=>{if(!r)return;const f=s?document.body.scrollHeight>window.innerHeight:r.scrollHeight>r.clientHeight;n(f)};a();const i=gs(a,150),l=s?document.body:r,c=new ResizeObserver(i);c.observe(l);const u=new MutationObserver(i);return u.observe(l,{childList:!0,subtree:!0}),s&&window.addEventListener("resize",i),()=>{i.cancel(),c.disconnect(),u.disconnect(),s&&window.removeEventListener("resize",i)}},[e]),t}function gen({scrollContainerRef:e,threshold:t=50,debounceDelay:n=50}){const[r,s]=d.useState("idle"),a=d.useRef(0),i=d.useCallback(()=>{const l=e.current;if(!l)return;const c=l.scrollTop,u=c-a.current;Math.abs(u)<t||(u>0&&s("down"),u<0&&s("up"),a.current=c)},[e,t]);return d.useEffect(()=>{const l=e.current;if(!l)return;a.current=l.scrollTop;const c=gs(i,n),u=l===document.documentElement?window:l;return u.addEventListener("scroll",c),()=>{u.removeEventListener("scroll",c),c.cancel()}},[e,i,n]),r}const yen=({measureRef:e,pathname:t})=>{const[n,r]=d.useState(!1),[s,a]=d.useState(!0),{scrollContainerRef:i}=ti(),l=hen({scrollContainerRef:i}),c=d.useRef(null),{inFlight:u,resultsLength:f,inFlightEntry:{blocks:m,backend_uuid:p}={}}=Ft(),h=gen({scrollContainerRef:i}),g=pen({resultsLength:f}),y=uPe({reason:"follow-up"}),x=()=>{r(!0),c.current?.focusInput()},v=d.useCallback(()=>{r(!1),a(!1),setTimeout(()=>{a(!0)},0)},[]),b=d.useCallback(C=>{C.stopPropagation(),p&&y(p)},[y,p]),_=g&&(h!=="idle"||!l),w=d.useMemo(()=>!!(u&&m?.length),[u,m]);return o.jsxs("div",{className:"bottom-safeAreaInsetBottom p-md pointer-events-none absolute z-10 flex w-full justify-center",children:[s&&o.jsx("div",{className:B("absolute inset-0 flex w-full justify-center",n?"pointer-events-auto h-auto overflow-visible":"pointer-events-none h-0 overflow-hidden"),style:{clipPath:n?"none":"inset(50%)"},children:o.jsx(Z4,{measureRef:e,inputRef:c,initialLayout:"expanded",onSubmitQuery:v,showSources:!1,showFileUpload:!1},t)},"floating-footer"),_&&!n&&o.jsx("div",{className:"bg-base rounded-[52px] opacity-95 backdrop-blur-lg",children:o.jsxs("button",{type:"button",className:"px-md border-dynamic bg-offset-special pointer-events-auto flex h-[44px] shrink-0 cursor-pointer items-center gap-3 rounded-[52px] border-[0.5px] py-[6px] opacity-100 shadow-[0_12px_16px_0_rgba(0,0,0,0.10)] backdrop-blur-[25px] transition-opacity duration-200 ease-in-out hover:opacity-90 active:opacity-75",onClick:x,children:[o.jsx(Hx,{shouldAnimate:u,size:16}),o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx(F,{children:o.jsx(ie,{defaultMessage:"Ask a follow-up...",id:"YU8pTjQqgX"})}),w&&o.jsx(me,{"aria-label":"Stop Query",onClick:b,icon:Ng,size:"small",variant:"inverted",pill:!0})]})]},"follow-up-button")})]})},xen=({pathname:e,measureRef:t})=>{const n=uf(),{variation:r,loading:s}=men(!1,{isCometMobile:n});return s?null:r?o.jsx(yen,{pathname:e,measureRef:t}):o.jsx(Z4,{measureRef:t},e)},ven=he(async()=>{const{SearchLoadingComponent:e}=await X(async()=>{const{SearchLoadingComponent:t}=await import("./search-loading-component-6pr8Dwqm.js");return{SearchLoadingComponent:t}},__vite__mapDeps([469,1,2,7,6,5]));return{default:e}}),u9e=I.memo(()=>o.jsx(Kw,{}));u9e.displayName="SearchErrorFallback";const d9e=I.memo(e=>{const t=Lt(),[n,{height:r}]=Ho();return o.jsx(Nr,{fallback:u9e,code:"SOMETHING_WENT_WRONG_ERROR",children:o.jsx(hke,{children:o.jsx(JH,{children:o.jsx(ez,{children:o.jsxs(jW,{children:[o.jsxs(xz,{children:[o.jsx(Dz,{}),o.jsx("div",{className:"mx-auto h-full",children:o.jsxs(z,{variant:"background",className:"relative",children:[o.jsx(Fz,{children:o.jsx(Iz,{})}),o.jsx(Az,{...e,lastResultBuffer:r})]})})]}),o.jsx(xen,{pathname:t,measureRef:n})]})})})})})});d9e.displayName="SearchContent";const f9e=I.memo(e=>{const{placeholderResults:t}=o9e(e);return ZH({confirmationRedirectsToHomepage:!1}),!t?.length&&e.skipLoadingUI!==!0?o.jsx(ven,{slugOrUUID:e.slugOrUUID}):o.jsxs(o.Fragment,{children:[o.jsx(Cx,{childrenWidth:"none",children:o.jsx(vz,{children:o.jsx(d9e,{...e,placeholderResults:t})})}),o.jsx(F4,{})]})});f9e.displayName="SearchPageMobile";const m9e=I.memo(()=>{const e=l9e();return e?"component"in e?e.component:o.jsx(f9e,{...e.props}):null});m9e.displayName="SearchComponentsMobile";const p9e=e=>{if(!e)return{base:void 0,symbol:void 0,tab:void 0};const t=new RegExp(D0t),n=e?.match(t);return{base:n?.[1]?.replace("app",""),symbol:n?.[2],tab:n?.[3]}};async function ben({eventId:e,league:t,reason:n}){const{error:r,data:s}=await re.GET("/rest/sports/tennis/{league}/events/{event_id}",n,{params:{path:{event_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}async function _en({seasonId:e,league:t,reason:n}){const{error:r,data:s}=await re.GET("/rest/sports/tennis/{league}/tournaments/{season_id}",n,{params:{path:{season_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{seasonId:e}});return s?.data}const wen=async({eventId:e,league:t,headers:n,reason:r})=>{if(t==="nfl")throw new we("API_CLIENTS_ERROR",{cause:new Error("TODO: NFL events are currently not supported"),details:{league:t,eventId:e}});const{error:s,data:a}=await re.GET(`/rest/sports/${t}/events/{event_id}`,r,{headers:n,timeoutMs:15e3,params:{path:{event_id:decodeURIComponent(e)}}});if(s)throw new we("API_CLIENTS_ERROR",{cause:s,details:{league:t,eventId:e}});try{a?.data.pplx_event&&(a.data.apns=a.data.pplx_event.apns)}catch{}return a?.data},Cen=(e,t)=>[`sports/${t}/event/`,e];async function Jun({eventId:e,league:t,locale:n,reason:r}){const s={};n&&(s["accept-language"]=n);try{const{error:a,data:i}=await re.GET("/rest/sports/{league}/events/{event_id}/hype",r,{headers:s,timeoutMs:0,params:{path:{league:t,event_id:decodeURIComponent(e)}}});if(a)throw new we("API_CLIENTS_ERROR",{cause:a,details:{league:t,eventId:e}});return i?.data}catch(a){return ne.error(a),null}}async function edn({eventId:e,headers:t,reason:n}){try{const{error:r,data:s}=await re.GET("/rest/sports/f1/live_racer",n,{headers:t,timeoutMs:0});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data}catch(r){return ne.error(r),null}}async function Sen({eventId:e,league:t,reason:n}){const{error:r,data:s}=await re.GET("/rest/sports/soccer/{league}/events/{event_id}",n,{params:{path:{event_id:decodeURIComponent(e),league:t}},timeoutMs:15e3});if(r)throw new we("API_CLIENTS_ERROR",{cause:r,details:{eventId:e}});return s?.data??null}async function Een({playerId:e,reason:t}){const{error:n,data:r}=await re.GET("/rest/sports/nba/players/{player_id}",t,{params:{path:{player_id:e}},timeoutMs:15e3});if(n)throw new we("API_CLIENTS_ERROR",{cause:n,details:{playerId:e}});return r?.data??null}const Men=e=>["/rest/sports/nba/players/",e];async function tdn(e){const{error:t,data:n}=await re.GET("/rest/sports/nba/players/{player_id}/bio","nba-players-player-id-bio-client-page",{params:{path:{player_id:e}},timeoutMs:15e3});if(t)throw new we("API_CLIENTS_ERROR",{cause:t,details:{playerId:e}});return n?.data??null}const ken=async({teamId:e,reason:t})=>{throw new Error("Not implemented")},Ten=e=>["/sports/nfl/teams/",e],Nen=async({teamId:e,reason:t})=>{const{error:n,data:r}=await re.GET("/rest/sports/nba/teams/{team_id}",t,{timeoutMs:0,params:{path:{team_id:Number(decodeURIComponent(e))}}});if(n)throw new we("API_CLIENTS_ERROR",{cause:n,details:{teamId:e}});return r.data},jen=e=>["/sports/nba/teams/",e],Aen=({teamId:e,reason:t,enabled:n})=>Ue({queryFn:()=>Nen({teamId:e,reason:t}),queryKey:jen(e),enabled:n}),Ien=({teamId:e,reason:t,enabled:n})=>Ue({queryFn:()=>ken({teamId:e,reason:t}),queryKey:Ten(e),enabled:n}),Ren=({playerId:e,reason:t,enabled:n})=>Ue({queryFn:()=>Een({playerId:e,reason:t}),queryKey:Men(e),enabled:n}),ble=({seasonId:e,league:t,reason:n,enabled:r})=>Ue({queryFn:()=>_en({seasonId:e,league:t,reason:n}),queryKey:[`${t}/tournaments`,e],enabled:r}),Ku=({eventId:e,league:t,reason:n,staleTime:r,refetchInterval:s,enabled:a})=>Ue({...ky,queryFn:()=>wen({eventId:e,league:t,reason:n}),queryKey:Cen(e,t),staleTime:r,refetchInterval:s,enabled:a}),_le=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?op(s.state.data.event)?!1:Gx(s.state.data.event)?1e3*10:1e3*30:1e3*60}),Pen=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,enabled:r}),ndn=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,enabled:r}),Len=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,enabled:r,refetchInterval:s=>s?.state?.data?.event?op(s.state.data.event)?!1:Gx(s.state.data.event)?1e3*10:1e3*30:1e3*60}),Oen=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:decodeURIComponent(e),league:t,reason:n,refetchInterval:s=>s?.state?.data?.event&&s.state.data.event.status==="live"?1e3*10:1e3*60,enabled:r}),Den=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,refetchInterval:s=>s?.state?.data?.event?op(s.state.data.event)?!1:Gx(s.state.data.event)?1e3*10:1e3*30:1e3*60,enabled:r}),Fen=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,enabled:r}),Uen=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:r}),wle=({eventId:e,league:t,enabled:n,reason:r})=>Ue({...ky,queryKey:[`${t}/events`,e],queryFn:()=>ben({eventId:e,league:t,reason:r}),refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:n}),Ben=({eventId:e,league:t,reason:n,enabled:r})=>Ku({eventId:e,league:t,reason:n,refetchInterval:s=>{const a=s.state?.data?.event?.refetch_url?.replace("/widget",""),i=s.state?.data?.event?.refetch_interval_secs;return a&&i?1e3*i:!1},staleTime:0,enabled:r}),qv=({eventId:e,league:t,enabled:n,reason:r})=>Ue({...ky,queryKey:[`${t}/events`,e],queryFn:()=>Sen({eventId:e,league:t,reason:r}),refetchInterval:s=>{const a=s.state?.data?.event?.refetch_interval_secs;return a?1e3*a:!1},staleTime:0,enabled:n}),$en=({reason:e})=>{const t=Ot(),n=typeof t?.get("c")=="string"?t.get("c"):Array.isArray(t?.get("c"))?t.get("c")?.[0]:void 0,r=Ue({queryKey:aqe(n??""),queryFn:()=>G_t({copyToken:n??"",reason:e}),enabled:!!n}),s=r.isLoading?null:r.data?.shortcut??null;return{...r,shortcut:s,copyToken:n}},Ven=({slug:e,reason:t,enabled:n=!!e})=>Ue({enabled:n,queryKey:["hotels",e],queryFn:()=>OIt({hotelSlug:e,reason:t})});async function rdn({league:e,reason:t}){let n;switch(e){case"championsleague":case"laliga":case"ligue1":case"epl":case"bundesliga":n=await re.GET("/rest/sports/soccer/{league}/tournament",t,{params:{path:{league:e}}});break;case"ncaam":n=await re.GET("/rest/sports/ncaam/tournament/",t);break;case"ncaaw":n=await re.GET("/rest/sports/ncaaw/tournament/",t);break;default:Qt(e)}const{error:r,data:s}=n;if(r)throw new we("API_CLIENTS_ERROR",{details:{league:e},cause:r});return s}const sdn=e=>["sports/",e,"tournament"];async function adn({league:e,reason:t}){const{error:n,data:r}=await re.GET("/rest/sports/soccer/{league}/tournament",t,{params:{path:{league:e}}});if(n)throw new we("API_CLIENTS_ERROR",{details:{league:e},cause:n});return r}async function odn({league:e,reason:t}){const{error:n,data:r}=await re.GET("/rest/sports/soccer/{league}/schedule",t,{params:{path:{league:e}}});if(n)throw new we("API_CLIENTS_ERROR",{details:{league:e,endpoint:"schedule"},cause:n});return r}async function idn({league:e,reason:t}){const{error:n,data:r}=await re.GET("/rest/sports/soccer/{league}/standings",t,{params:{path:{league:e}}});if(n)throw new we("API_CLIENTS_ERROR",{details:{league:e,endpoint:"standings"},cause:n});return r}const h9e={championsleague:"Champions League",laliga:"La Liga",ligue1:"Ligue 1",epl:"Premier League",bundesliga:"Bundesliga"},Wen=e=>{const t=/\[([^\]]+)\]\(pplx:\/\/action\/[^)]+\)/g;return e.replace(t,"$1")};var Pk={};const l1="Perplexity",Hen="",g9e=80,y9e=160,bO="Perplexity is a free AI-powered answer engine that provides accurate, trusted, and real-time answers to any question.";function zen(e){if(!e)return null;try{return new Date(e).toISOString().slice(0,10)}catch{return null}}new URL("https://www.perplexity.ai");const _O=({firstEntity:e,query:t,slug:n,userAgent:r})=>{if(r?M_(r):!1)return vr({title:l1,index:!1,userAgent:r});if(!e)return OR({result:"no_result",slug:n,userAgent:r}),vr({index:!1,title:t?qd(t).actualQuery||t:void 0,userAgent:r});const a=cn.parseAskTextField(e);if(!a)return OR({result:"bad_parse",slug:n,userAgent:r}),vr({index:!1,userAgent:r});const i=Gen(e);OR({result:"url_served",slug:n,userAgent:r,imageURL:i});let l=l1,c;if(k1e(e)&&e.article_info?.title?(l=e.article_info.title,e?.article_info?.read_time,c=e?.author_username):e.thread_title&&e.thread_title!==Hen?l=e.thread_title:e.query_str&&(l=e.query_str),l){const{actualQuery:p}=qd(l);l=p||l,l=Gg(l,g9e)}const u=a.answer?Gg(a.answer,y9e):bO,f=e?.thread_url_slug?e?.mode?.toLowerCase()=="article"?`https://www.perplexity.ai/page/${e.thread_url_slug}`:`https://www.perplexity.ai/search/${e.thread_url_slug}`:void 0,m=Wen(u);return vr({imageURL:i,title:l,description:m,author:c,datePublished:e?.updated_datetime,canonicalURL:f,index:e?.should_index??!1,userAgent:r})},OR=({result:e,slug:t,userAgent:n,imageURL:r})=>{const s="[trackThreadOGImageServing]";try{t!=="new"&&R5(`${s} [${t}] [${n}] ${e}: ${r}`)}catch(a){ope("[trackThreadOGImageServing] error:",{result:e,slug:t,userAgent:n,imageURL:r,err:a})}},Gen=e=>{let t=rg;const n=`[getThreadOGImageURL] [${e?.thread_url_slug}]`;if(e.s3_social_preview_url&&e.s3_social_preview_url!==rg)return e.s3_social_preview_url;try{t=rg;const r=cn.isArticleMode(e);return e.thread_url_slug?r?`${Pk.NEXTAUTH_URL}/api/og/page/${e.thread_url_slug}`:`${Pk.NEXTAUTH_URL}/api/og/thread/${e.thread_url_slug}`:t}catch(r){R5(`${n} error getting thread og image url: `,r)}return t},qen=e=>{let t=rg;const n=`[getSpaceOGImageURL] [${e?.slug}]`;try{return t=e?.s3_social_preview_url??rg,e?.slug?`${Pk.NEXTAUTH_URL}/api/og/space/${e?.slug}`:t}catch(r){R5(`${n} error getting space og image url: `,r)}return t},vr=({title:e=l1,description:t=bO,imageURL:n=rg,canonicalURL:r,author:s,datePublished:a,index:i,userAgent:l})=>{try{let c=!1;typeof window>"u"&&(c=l?M_(l):!1),c&&(e=l1);const u=zen(a);return r=r??"./",{metadataBase:new URL("https://www.perplexity.ai"),title:e,description:t,author:s??void 0,alternates:{canonical:r},openGraph:{url:r,images:[n],locale:"en_US",type:"website",siteName:"Perplexity AI"},twitter:{card:t?"summary_large_image":"summary",images:[n],site:"@perplexity_ai",creator:s?`@${s}`:void 0},other:{datePublished:u??""},robots:{index:i}}}catch(c){return ope("[generatePageMetadata] Error generating metadata:",c),{title:l1,description:bO,metadataBase:new URL("https://www.perplexity.ai"),robots:{index:!1}}}};function Ken({collection:e,slug:t,userAgent:n}){return!t||!e||e?.status==="failed"?vr({index:!1,userAgent:n}):vr({index:!1,title:e?.title??"Perplexity AI",description:"A Space on Perplexity AI by "+e?.owner_user?.username+"  "+e?.description,imageURL:qen(e),canonicalURL:`https://www.perplexity.ai/spaces/${t}`,author:e?.owner_user?.username,datePublished:e?.updated_datetime,userAgent:n})}function Cle({articleSection:e,slug:t,userAgent:n}){return _O(!t||!e?{slug:t,userAgent:n}:{firstEntity:e,slug:t,userAgent:n})}function Yen({userAgent:e}){return vr({imageURL:"https://r2cdn.perplexity.ai/pplx-academic-og.png",title:"Perplexity Academic",description:"The free, AI-powered academic search engine for scholars, students, and educators. Get instant answers from research papers, peer-reviewed journal articles, theses, conference papers, technical reports, and more.",index:!0,userAgent:e})}function Qen({userAgent:e}){return vr({title:"Perplexity Shopping",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-shopping-og.png",description:"Discover trending products, best deals, and trusted reviews with Perplexity Shopping  your smart companion for finding what to buy.",userAgent:e})}function Xen({hotelData:e,userAgent:t}){return vr(e?{title:`${e?.hotel.name} - Perplexity Travel`,imageURL:e?.hotel?.photos[0]?.image_url,description:e?.hotel.description??void 0,index:!0,userAgent:t}:{index:!1,userAgent:t})}function Zen({userAgent:e}){return vr({title:"Perplexify Me",index:!0,imageURL:"https://r2cdn.perplexity.ai/poster-lab-og-image.png",description:"Generate a personalized Perplexity poster.",userAgent:e})}function Jen({userAgent:e}){return vr({title:"Perplexity Discover",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-discover-og.png",description:"Stay informed on the biggest stories happening around the world across tech, finance, sports, entertainment and more with Perplexity Discover.",userAgent:e})}function etn({userAgent:e}){return vr({title:"Perplexity Travel",index:!0,imageURL:"https://r2cdn.perplexity.ai/pplx-travel-og.png",description:"Explore top destinations, hidden gems, and travel tips all in one place with Perplexity Travel  your go-to for smarter, faster trip planning.",userAgent:e})}function ttn({$t:e}){return{title:e({defaultMessage:"Formula 1  Perplexity Sports",id:"Ktk9GJrnKB"})}}function ntn({eventData:e,$t:t}){const n=e?.event?.title[0],r=e?.event?.subtitle;return n?{title:t({defaultMessage:"{description}  {competition} | Perplexity Sports",id:"WH2sXJYfqC"},{description:n,competition:r})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function rtn({$t:e}){return{title:e({defaultMessage:"NBA  Perplexity Sports",id:"OygSHzfDGc"})}}function stn({$t:e}){return{title:e({defaultMessage:"Perplexity Finance",id:"DhdcmgxwQc"}),description:e({defaultMessage:"Get the latest stock price, historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.",id:"NcFbXdi/CA"}),imageURL:"https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg"}}function atn({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function otn({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NBA | Perplexity Sports",id:"AIPY9QcrzT"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NBA | Perplexity Sports",id:"C6OMW0nwOa"})}}function itn({playerData:e,$t:t}){return e?{title:t({defaultMessage:"{firstName} {lastName} | NBA | Perplexity Sports",id:"cMhXouxymy"},{firstName:e.player.firstName,lastName:e.player.lastName})}:{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function ltn({$t:e}){return{title:e({defaultMessage:"NFL  Perplexity Sports",id:"El6nRJUzwb"})}}function ctn({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function utn({teamData:e,$t:t}){return e?{title:t({defaultMessage:"{location} {nickname} | NFL | Perplexity Sports",id:"Hk4RXLiB59"},{location:e.team.location,nickname:e.team.nickname})}:{title:t({defaultMessage:"NFL | Perplexity Sports",id:"7QAbUNnW6e"})}}function dtn({playerData:e,$t:t}){return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})}}function ftn({$t:e}){return{title:e({defaultMessage:"MLB  Perplexity Sports",id:"CU0tFjpqFn"})}}function mtn({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:n};const r=e.event.team_1?.title||"",s=e.event.team_2?.title||"";return{title:`${r} vs ${s}  MLB | Perplexity Sports`}}function Sle({$t:e,league:t}){const n=e(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:n})}}function Ele({eventData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:r};const s=e.event.team_1.title,a=e.event.team_2.title,i=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{team1} vs {team2}  {league} | Perplexity Sports",id:"d7RYhrB+bM"},{team1:s,team2:a,league:i})}}function Mle({tournamentData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),s=e?.tournamentInfo?.season?.name;if(!s)return{title:r};const a=n(t==="atp"?{defaultMessage:"ATP",id:"S/1bpj9bkw"}:{defaultMessage:"WTA",id:"iz2JNgjC/c"});return{title:n({defaultMessage:"{title}  {league} | Perplexity Sports",id:"+pm49/sORt"},{title:s,league:a})}}function ptn({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.matchStats?.matchInfo?.description,s=e?.matchStats?.matchInfo?.competition?.name;return r?{title:`${r}  ${s}`}:{title:n}}function kle({league:e,$t:t}){return{title:t({defaultMessage:"{title}  Perplexity Sports",id:"wrVvZZ22yC"},{title:e==="ncaam"?"NCAA Men's Basketball":"NCAA Women's Basketball"})}}function Tle({eventData:e,$t:t}){const n=t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),r=e?.event?.teams;if(r?.length!==2)return{title:n};const s=r.map(a=>a.location);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:s[0],team2:s[1]})}}function htn({$t:e}){return{title:e({defaultMessage:"IPL  Perplexity Sports",id:"YUrNinGa6l"})}}function gtn({$t:e}){return{title:e({defaultMessage:"ICC Cricket  Perplexity Sports",id:"t+zWRM/EBt"})}}function ytn({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"PGA"})}}function xtn({eventData:e}){return{title:`${e?.event?.name||"Event"}  Perplexity Sports`}}function vtn({$t:e}){return{title:e({defaultMessage:"{league}  Perplexity Sports",id:"SlzezQtEQb"},{league:"DP World Tour"})}}function btn({eventData:e}){return{title:"Event  Perplexity Sports"}}function _tn({$t:e}){return{title:e({defaultMessage:"WNBA  Perplexity Sports",id:"xp6AiOFIGz"})}}function wtn({eventData:e,$t:t}){const n=e?.event?.teams;if(n?.length!==2)return{title:t({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"})};const r=n.map(s=>s.nickname);return{title:t({defaultMessage:"{team1} vs {team2}  Perplexity Sports",id:"MNhNBm/XUU"},{team1:r[0],team2:r[1]})}}function Kv({$t:e,league:t}){const n=h9e[t];return{title:e({defaultMessage:"{leagueName}  Perplexity Sports",id:"3LNJhsXVzA"},{leagueName:n})}}function Yv({eventData:e,league:t,$t:n}){const r=n({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"});if(!e?.event)return{title:r};const s=e.event.team_1.title,a=e.event.team_2.title,i=h9e[t];return{title:n({defaultMessage:"{team1} vs {team2}  {league} | Perplexity Sports",id:"d7RYhrB+bM"},{team1:s,team2:a,league:i})}}const Ctn=({$t:e,userAgent:t})=>vr({title:e({defaultMessage:"Perplexity Sports",id:"4WNzNs+Wao"}),index:!0,description:"Stay updated with the latest sports news, scores, and highlights from your favorite leagues and teams.",userAgent:t}),Stn="https://r2cdn.perplexity.ai/finance/images/og-finance-generic.jpg",Etn=e=>({title:`${e.name} Stock Price: Quote, Forecast, Splits & News (${e.symbol})`,description:`Get the latest ${e.name} stock price (${e.symbol}), historical data, earnings reports, stock split stock split history, analyst ratings, and forecasts from Perplexity Finance.`}),Mtn=e=>({title:`${e.name} Price: Quote, Market Cap, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, real-time quotes, market cap, historical data, charts, price predictions, and news from Perplexity Finance.`}),ktn=e=>({title:`${e.name} Exchange Rate: Live Price, Chart, Forecast & News`,description:`Get the latest ${e.name} exchange rate, live price, interactive chart, historical data, and expert forecast from Perplexity Finance.`}),Ttn=e=>({title:`${e.name} Price: Live Chart, Forecast & News (${e.symbol})`,description:`Get the latest ${e.name} price (${e.symbol}), live charts, market trends, expert forecasts, and breaking news from Perplexity Finance.`}),Ntn=e=>({title:`${e.name} Price: Quote, Forecast, Charts & News (${e.symbol})`,description:`Get the latest ${e.name} price ${e.symbol}, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`}),jtn=e=>e.exchange==="NASDAQ"||e.exchange==="NYSE"||e.exchange==="AMEX"?Etn(e):e.exchange==="CRYPTO"?Mtn(e):e.exchange==="FOREX"?ktn(e):e.exchange==="COMMODITY"?Ttn(e):Ntn(e);function Atn({pathname:e,tickerSearchData:t,userAgent:n,$t:r}){const{symbol:s,tab:a}=p9e(e);if(!s&&!a)return stn({$t:r});if(!s)return vr({index:!1,userAgent:n});const i={title:`${s} Price: Quote, Forecast, Charts & News`,description:`Get the latest ${s} price, historical data, charts, analyst ratings, and forecasts from Perplexity Finance.`,imageURL:Stn,index:!0},l=t?jtn(t):{};return vr({...i,...l,userAgent:n})}function Itn({shortcut:e}){return vr(e?{index:!1,title:Gg(`/${e.task_name}`,g9e),description:Gg(e.prompt,y9e),imageURL:`${Pk.NEXTAUTH_URL}/api/og/shortcut/${e.task_name}`}:{index:!1,title:"Perplexity Account"})}const Rtn=e=>{const t="home-metadata",{$t:n}=Z(),{device:{userAgent:r}}=Pt(),s=Lt(),a=s?.split("/").pop()??"",i=BR(e,s??""),{route:l,params:c}=i??{},u=l,{firstResult:f}=Ft(),{collection:m}=Ac({collectionSlug:a,reason:t,enabled:u==="/spaces/:slug"}),{article:p}=Tge(),{data:h}=Ven({slug:a,reason:t,enabled:u==="/hotels/:slug"}),{symbol:g}=p9e(s),{data:y}=Fw({symbol:g}),{data:x}=Oen({eventId:a,league:"f1",reason:t,enabled:u==="/sports/f1/events/:eventId"}),{data:v}=Den({eventId:a,league:"nba",reason:t,enabled:u==="/sports/nba/events/:eventId"}),{data:b}=Fen({eventId:a,league:"nfl",reason:t,enabled:u==="/sports/nfl/events/:eventId"}),{data:_}=qv({eventId:a,league:"championsleague",reason:t,enabled:u==="/sports/championsleague/events/:eventId"}),{data:w}=qv({eventId:a,league:"laliga",reason:t,enabled:u==="/sports/laliga/events/:eventId"}),{data:C}=qv({eventId:a,league:"ligue1",reason:t,enabled:u==="/sports/ligue1/events/:eventId"}),{data:S}=qv({eventId:a,league:"bundesliga",reason:t,enabled:u==="/sports/bundesliga/events/:eventId"}),{data:E}=qv({eventId:a,league:"epl",reason:t,enabled:u==="/sports/epl/events/:eventId"}),{data:k}=Uen({eventId:a,league:"mlb",reason:t,enabled:u==="/sports/mlb/events/:eventId"}),{data:M}=Ben({eventId:a,league:"cricket",reason:t,enabled:u==="/sports/cricket/events/:eventId"}),{data:j}=Pen({eventId:a,league:"pga",reason:t,enabled:u==="/sports/pga/events/:eventId"}),{data:R}=Len({eventId:a,league:"wnba",reason:t,enabled:u==="/sports/wnba/events/:eventId"}),{data:O}=wle({eventId:a,league:"atp",reason:t,enabled:u==="/sports/atp/events/:eventId"}),{data:D}=wle({eventId:a,league:"wta",reason:t,enabled:u==="/sports/wta/events/:eventId"}),{data:P}=_le({eventId:a,league:"ncaam",reason:t,enabled:u==="/sports/ncaam/events/:eventId"}),{data:A}=_le({eventId:a,league:"ncaaw",reason:t,enabled:u==="/sports/ncaaw/events/:eventId"}),{data:T}=Aen({teamId:a,reason:t,enabled:u==="/sports/nba/teams/:teamId"}),{data:N}=Ien({teamId:a,reason:t,enabled:u==="/sports/nfl/teams/:teamId"}),{data:L}=Ren({playerId:Number(a),reason:t,enabled:u==="/sports/nba/players/:playerId"}),{data:U}=ble({seasonId:a,league:"atp",reason:t,enabled:u==="/sports/atp/tournaments/:seasonId"}),{data:$}=ble({seasonId:a,league:"wta",reason:t,enabled:u==="/sports/wta/tournaments/:seasonId"}),{data:V}=$en({reason:t});if(!s||!u||!c)return vr({index:!0,userAgent:r});switch(u){case"/spaces/:slug":return Ken({slug:c.slug,userAgent:r,collection:m});case"/page/:slug":return Cle({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/academic":return Yen({userAgent:r});case"/discover":case"/discover/:topic":return Jen({userAgent:r});case"/shopping":return Qen({userAgent:r});case"/hotels/:slug":return Xen({slug:c.slug??"",userAgent:r,hotelData:h});case"/perplexify_me":return Zen({userAgent:r});case d$:return Atn({userAgent:r,pathname:s,tickerSearchData:y,$t:n});case"/sports/f1":return ttn({$t:n});case"/sports/f1/events/:eventId":return ntn({eventId:c.eventId??"",eventData:x,$t:n});case"/sports/nba":return rtn({$t:n});case"/sports/nba/events/:eventId":return atn({eventId:c.eventId??"",eventData:v,$t:n});case"/sports/nba/teams/:teamId":return otn({teamId:c.teamId??"",teamData:T,$t:n});case"/sports/nba/players/:playerId":return itn({playerId:c.playerId??"",playerData:L,$t:n});case"/sports/nfl":return ltn({$t:n});case"/sports/nfl/events/:eventId":return ctn({eventId:c.eventId??"",eventData:b,$t:n});case"/sports/nfl/teams/:teamId":return utn({teamId:c.teamId??"",teamData:N,$t:n});case"/sports/nfl/players/:playerId":return dtn({playerId:c.playerId??"",playerData:void 0,$t:n});case"/sports/championsleague":return Kv({$t:n,league:"championsleague"});case"/sports/championsleague/events/:eventId":return Yv({eventId:c.eventId??"",eventData:_,league:"championsleague",$t:n});case"/sports/laliga":return Kv({$t:n,league:"laliga"});case"/sports/laliga/events/:eventId":return Yv({eventId:c.eventId??"",eventData:w,league:"laliga",$t:n});case"/sports/ligue1":return Kv({$t:n,league:"ligue1"});case"/sports/ligue1/events/:eventId":return Yv({eventId:c.eventId??"",eventData:C,league:"ligue1",$t:n});case"/sports/bundesliga":return Kv({$t:n,league:"bundesliga"});case"/sports/bundesliga/events/:eventId":return Yv({eventId:c.eventId??"",eventData:S,league:"bundesliga",$t:n});case"/sports/epl":return Kv({$t:n,league:"epl"});case"/sports/epl/events/:eventId":return Yv({eventId:c.eventId??"",eventData:E,league:"epl",$t:n});case"/sports/mlb":return ftn({$t:n});case"/sports/mlb/events/:eventId":return mtn({eventId:c.eventId??"",eventData:k,$t:n});case"/sports/ipl":return htn({$t:n});case"/sports/icc":return gtn({$t:n});case"/sports/cricket/events/:eventId":case"/sports/ipl/events/:eventId":case"/sports/icc/events/:eventId":return ptn({eventId:c.eventId??"",eventData:M,$t:n});case"/sports/pga":return ytn({$t:n});case"/sports/pga/events/:eventId":return xtn({eventId:c.eventId??"",eventData:j});case"/sports/dpworldtour":return vtn({$t:n});case"/sports/dpworldtour/events/:eventId":return btn({eventId:c.eventId??"",eventData:null});case"/sports/wnba":return _tn({$t:n});case"/sports/wnba/events/:eventId":return wtn({eventId:c.eventId??"",eventData:R,$t:n});case"/sports/ncaam":return kle({league:"ncaam",$t:n});case"/sports/ncaaw":return kle({league:"ncaaw",$t:n});case"/sports/ncaam/events/:eventId":return Tle({eventId:c.eventId??"",eventData:P,$t:n});case"/sports/ncaaw/events/:eventId":return Tle({eventId:c.eventId??"",eventData:A,$t:n});case B3:return _O({slug:c.uuid,userAgent:r,firstEntity:f});case"/discover/:topic/:slug":return Cle({slug:c.slug,userAgent:r,articleSection:p?.[0]});case"/travel":return etn({userAgent:r});case"/sports":return Ctn({$t:n,userAgent:r});case"/sports/atp":return Sle({league:"atp",$t:n});case"/sports/wta":return Sle({league:"wta",$t:n});case"/sports/atp/events/:eventId":return Ele({eventId:c.eventId??"",league:"atp",eventData:O,$t:n});case"/sports/wta/events/:eventId":return Ele({eventId:c.eventId??"",league:"wta",eventData:D,$t:n});case"/sports/atp/tournaments/:seasonId":return Mle({seasonId:c.seasonId??"",league:"atp",tournamentData:U,$t:n});case"/sports/wta/tournaments/:seasonId":return Mle({seasonId:c.seasonId??"",league:"wta",tournamentData:$,$t:n});case"/b/home":return vr({title:"New Tab",index:!0,userAgent:r});case"/account":case"/account/details":case"/account/org/details":case"/account/org/user-access":case"/account/org/permissions":case"/account/org/insights":case"/account/org/files":case"/account/org/connectors":case"/account/org":case"/account/api/group":case"/account/api/members":case"/account/api/billing":case"/account/api/keys":case"/account/api/playground/search":case"/account/api/limits":case"/account/api/files":case"/account/api/files/:repositoryUuid":case"/account/api":case"/account/pro-perks":case"/account/pro-perks/:name":case"/account/tasks/:taskId":case"/account/tasks":case"/account/org/members":case"/account/preferences":case"/account/personalize/memories":case"/account/personalize":case"/account/assistant":case"/account/site-instructions":case"/account/notifications":case"/account/files":case"/account/connectors":return vr({title:"Perplexity Account",index:!0,userAgent:r});case"/account/shortcuts":return Itn({shortcut:V?.shortcut??void 0});case"/account/reservations":return vr({title:"Perplexity Reservations",index:!0,userAgent:r});case"/account/purchases":return vr({title:"Perplexity Purchases",index:!0,userAgent:r});case"/b/assistants":return vr({title:"Background Assistants",index:!0,userAgent:r});case"/":case"/library":case"/b/speak":case"/b/zen":case"/b/try-assistant":case"/spaces":case"/b/mission-control":case"/spaces/templates":case"/classroom/:school/:classCode":case"/windows-app/ask/input":case void 0:return vr({index:!0,userAgent:r});default:Qt(u)}};function Ptn(){return dn()?o.jsx(Cx,{childrenWidth:"none",mobileHeader:!1,children:o.jsx(XMe,{})}):o.jsx(iu,{to:"/"})}const Ltn=he(async()=>{const{CometZenMode:e}=await X(async()=>{const{CometZenMode:t}=await import("./CometZenMode-sVhn1U4x.js");return{CometZenMode:t}},__vite__mapDeps([470,1,2,64,471,6,7,5]));return{default:e,critical:!0}},{loading:()=>o.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:o.jsx(Fr,{})})}),Otn=he(async()=>{const{TryAssistantPage:e}=await X(async()=>{const{TryAssistantPage:t}=await import("./TryAssistantPage-B5NqaTyh.js");return{TryAssistantPage:t}},__vite__mapDeps([472,1,2,5,7,6]));return{default:e,critical:!0}},{loading:()=>o.jsx("div",{className:"flex size-full items-center justify-center opacity-10",children:o.jsx(Fr,{})})}),Dtn=he(async()=>{const{VoiceToVoiceModal:e}=await X(async()=>{const{VoiceToVoiceModal:t}=await import("./VoiceToVoiceModal-ht83EKur.js");return{VoiceToVoiceModal:t}},__vite__mapDeps([63,1,2,64,5,7,6]));return{default:e,critical:!0}},{loading:()=>o.jsx(GB,{})}),Ftn=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await import("./library-3jdAAAxr.js");return{default:t}},__vite__mapDeps([473,1,2,5,6,7,474,475]));return{default:e,critical:!0}}),Utn=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await import("./index-BhgbGDyt.js");return{default:t}},__vite__mapDeps([476,1,2,5,14,7,6,477]));return{default:e,critical:!0}}),Btn=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await import("./templates-B2yX1cjP.js");return{default:t}},__vite__mapDeps([478,1,2,5,6,7]));return{default:e,critical:!0}}),$tn=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await import("./slug--Q15X1qe.js");return{default:t}},__vite__mapDeps([479,1,2,5,7,480,6,477]));return{default:e,critical:!0}}),Vtn=he(async()=>{const{default:e}=await X(async()=>{const{default:t}=await import("./slug-Yc9Crlz5.js");return{default:t}},__vite__mapDeps([481,1,2,5,435,6,7,437]));return{default:e,critical:!1}}),Nle=he(async()=>{const{ArticlePageLayout:e}=await X(async()=>{const{ArticlePageLayout:t}=await import("./slug-CQApcoy1.js").then(n=>n.s);return{ArticlePageLayout:t}},__vite__mapDeps([482,1,2,5,7,6,483,45,441,442,14,484,46,47,471,465,429,427,17,18,19,115,475,38,39,444,445,44,440,468]));return{default:e,critical:!0}}),Wtn=he(async()=>{const{AcademicLandingPage:e}=await X(async()=>{const{AcademicLandingPage:t}=await import("./academic-Zlgo4PFO.js");return{AcademicLandingPage:t}},__vite__mapDeps([485,1,2,5,486,438,6,7,431,39,487,435,436,23]));return{default:e,critical:!0}}),Htn=he(async()=>{const{ShoppingLandingPage:e}=await X(async()=>{const{ShoppingLandingPage:t}=await import("./shopping-Y08zNr09.js");return{ShoppingLandingPage:t}},__vite__mapDeps([488,1,2,5,435,6,7,436,23,432,431,39,456,487,486,438]));return{default:e,critical:!0}}),ztn=he(async()=>{const{HotelsSlugPage:e}=await X(async()=>{const{HotelsSlugPage:t}=await import("./hotels-DO56c2Ex.js").then(n=>n.h);return{HotelsSlugPage:t}},__vite__mapDeps([489,2,1,5,435,6,7,459,69,38,39,490]));return{default:e,critical:!0}}),Gtn=he(async()=>{const{PerplexifyMeLandingPage:e}=await X(async()=>{const{PerplexifyMeLandingPage:t}=await import("./perplexify_me-DQpsid6v.js");return{PerplexifyMeLandingPage:t}},__vite__mapDeps([491,1,2,5,435,6,7]));return{default:e,critical:!0}}),qtn=he(async()=>{const{TravelIndexPage:e}=await X(async()=>{const{TravelIndexPage:t}=await import("./travel-C5i4Rt17.js");return{TravelIndexPage:t}},__vite__mapDeps([492,1,2,5,435,6,7,436,23,487,486,438,431,39]));return{default:e,critical:!0}}),jle=he(async()=>{const{DiscoverPage:e}=await X(async()=>{const{DiscoverPage:t}=await import("./discover-CeXLP7xh.js");return{DiscoverPage:t}},__vite__mapDeps([493,1,2,5,435,6,7,436,23,437,483,45,441,442,474,494]));return{default:e,critical:!0}}),Ktn=he(async()=>{const{F1MainPage:e}=await X(async()=>{const{F1MainPage:t}=await import("./index-C3lNpHOh.js");return{F1MainPage:t}},__vite__mapDeps([495,1,2,5,496,497,6,7,498,450,499,435]));return{default:e,critical:!0}}),Ytn=he(async()=>{const{F1EventMainPage:e}=await X(async()=>{const{F1EventMainPage:t}=await import("./events-CMGMPQ_b.js");return{F1EventMainPage:t}},__vite__mapDeps([500,1,2,5,6,7,496,490,499,435]));return{default:e,critical:!0}}),Qtn=he(async()=>{const{NBAMainPage:e}=await X(async()=>{const{NBAMainPage:t}=await import("./index-BSlH6CbK.js");return{NBAMainPage:t}},__vite__mapDeps([501,1,2,5,502,6,503,504,505,506,507,508,7,509,498,450,510,499,435]));return{default:e,critical:!0}}),Xtn=he(async()=>{const{NBAEventMainPage:e}=await X(async()=>{const{NBAEventMainPage:t}=await import("./events-Bkugt6Zs.js");return{NBAEventMainPage:t}},__vite__mapDeps([511,1,2,5,512,7,513,514,515,516,517,510,518,519,520,521,450,522,490,499,435,6]));return{default:e,critical:!0}}),Ztn=he(async()=>{const{NBATeamMainPage:e}=await X(async()=>{const{NBATeamMainPage:t}=await import("./teams-Dtu_NCuq.js");return{NBATeamMainPage:t}},__vite__mapDeps([523,1,2,5,510,524,513,516,517,519,520,521,450,504,505,502,6,490,499,435,7]));return{default:e,critical:!0}}),Jtn=he(async()=>{const{NBAPlayerMainPage:e}=await X(async()=>{const{NBAPlayerMainPage:t}=await import("./players-B05J8EfN.js");return{NBAPlayerMainPage:t}},__vite__mapDeps([525,1,2,5,526,6,517,490,499,435,7]));return{default:e,critical:!0}}),enn=he(async()=>{const{NFLMainPage:e}=await X(async()=>{const{NFLMainPage:t}=await import("./index-KDMBlRW7.js");return{NFLMainPage:t}},__vite__mapDeps([527,1,2,5,513,508,7,6,509,435]));return{default:e,critical:!0}}),tnn=he(async()=>{const{NFLEventMainPage:e}=await X(async()=>{const{NFLEventMainPage:t}=await import("./events-yB5FlBEn.js");return{NFLEventMainPage:t}},__vite__mapDeps([528,1,2,5,513,515,516,517,510,518,520,521,450,522,490,435,6,7]));return{default:e,critical:!0}}),nnn=he(async()=>{const{NFLTeamMainPage:e}=await X(async()=>{const{NFLTeamMainPage:t}=await import("./teams-znFGlqR1.js");return{NFLTeamMainPage:t}},__vite__mapDeps([529,1,2,5,513,6,7,490,435]));return{default:e,critical:!0}}),rnn=he(async()=>{const{NFLPlayerMainPage:e}=await X(async()=>{const{NFLPlayerMainPage:t}=await import("./players-vgLVMuws.js");return{NFLPlayerMainPage:t}},__vite__mapDeps([530,1,2,5,524,513,526,6,517,490,499,435,7]));return{default:e,critical:!0}}),snn=he(async()=>{const{ChampionsLeagueMainPage:e}=await X(async()=>{const{ChampionsLeagueMainPage:t}=await import("./index-DjQec2iL.js");return{ChampionsLeagueMainPage:t}},__vite__mapDeps([531,1,2,5,497,7,507,508,6,498,450,532,499,435]));return{default:e,critical:!0}}),ann=he(async()=>{const{ChampionsLeagueEventMainPage:e}=await X(async()=>{const{ChampionsLeagueEventMainPage:t}=await import("./events-lDrZbD9e.js");return{ChampionsLeagueEventMainPage:t}},__vite__mapDeps([533,1,2,5,534,7,522,521,450,532,490,499,435,6]));return{default:e,critical:!0}}),onn=he(async()=>{const{LaLigaMainPage:e}=await X(async()=>{const{LaLigaMainPage:t}=await import("./index-DjQec2iL.js");return{LaLigaMainPage:t}},__vite__mapDeps([531,1,2,5,497,7,507,508,6,498,450,532,499,435]));return{default:e,critical:!0}}),inn=he(async()=>{const{LaLigaEventMainPage:e}=await X(async()=>{const{LaLigaEventMainPage:t}=await import("./events-lDrZbD9e.js");return{LaLigaEventMainPage:t}},__vite__mapDeps([533,1,2,5,534,7,522,521,450,532,490,499,435,6]));return{default:e,critical:!0}}),lnn=he(async()=>{const{Ligue1MainPage:e}=await X(async()=>{const{Ligue1MainPage:t}=await import("./index-DjQec2iL.js");return{Ligue1MainPage:t}},__vite__mapDeps([531,1,2,5,497,7,507,508,6,498,450,532,499,435]));return{default:e,critical:!0}}),cnn=he(async()=>{const{Ligue1EventMainPage:e}=await X(async()=>{const{Ligue1EventMainPage:t}=await import("./events-lDrZbD9e.js");return{Ligue1EventMainPage:t}},__vite__mapDeps([533,1,2,5,534,7,522,521,450,532,490,499,435,6]));return{default:e,critical:!0}}),unn=he(async()=>{const{BundesligaMainPage:e}=await X(async()=>{const{BundesligaMainPage:t}=await import("./index-DjQec2iL.js");return{BundesligaMainPage:t}},__vite__mapDeps([531,1,2,5,497,7,507,508,6,498,450,532,499,435]));return{default:e,critical:!0}}),dnn=he(async()=>{const{BundesligaEventMainPage:e}=await X(async()=>{const{BundesligaEventMainPage:t}=await import("./events-lDrZbD9e.js");return{BundesligaEventMainPage:t}},__vite__mapDeps([533,1,2,5,534,7,522,521,450,532,490,499,435,6]));return{default:e,critical:!0}}),fnn=he(async()=>{const{EPLMainPage:e}=await X(async()=>{const{EPLMainPage:t}=await import("./index-DjQec2iL.js");return{EPLMainPage:t}},__vite__mapDeps([531,1,2,5,497,7,507,508,6,498,450,532,499,435]));return{default:e,critical:!0}}),mnn=he(async()=>{const{EPLEventMainPage:e}=await X(async()=>{const{EPLEventMainPage:t}=await import("./events-lDrZbD9e.js");return{EPLEventMainPage:t}},__vite__mapDeps([533,1,2,5,534,7,522,521,450,532,490,499,435,6]));return{default:e,critical:!0}}),pnn=he(async()=>{const{MLBMainPage:e}=await X(async()=>{const{MLBMainPage:t}=await import("./index-RjcD49um.js");return{MLBMainPage:t}},__vite__mapDeps([535,2,1,5,536,537,502,6,506,503,538,505,7,509,498,450,510,499,435]));return{default:e,critical:!0}}),hnn=he(async()=>{const{MLBEventMainPage:e}=await X(async()=>{const{MLBEventMainPage:t}=await import("./events-Dx8veoMP.js");return{MLBEventMainPage:t}},__vite__mapDeps([539,1,2,5,534,7,540,6,536,537,502,506,503,538,505,490,499,435]));return{default:e,critical:!0}}),DR=he(async()=>{const{CricketEventMainPage:e}=await X(async()=>{const{CricketEventMainPage:t}=await import("./events-Dh1pYEAZ.js");return{CricketEventMainPage:t}},__vite__mapDeps([541,1,2,5,7,6,540,542,490,499,435]));return{default:e,critical:!0}}),gnn=he(async()=>{const{ICCMainPage:e}=await X(async()=>{const{ICCMainPage:t}=await import("./index-D0_XkK2U.js");return{ICCMainPage:t}},__vite__mapDeps([543,1,2,5,502,6,537,506,542,490,499,435,7]));return{default:e,critical:!0}}),ynn=he(async()=>{const{IPLMainPage:e}=await X(async()=>{const{IPLMainPage:t}=await import("./index-DLAG_ek1.js");return{IPLMainPage:t}},__vite__mapDeps([544,1,2,5,502,6,506,507,508,7,509,498,450,510,499,435]));return{default:e,critical:!0}}),xnn=he(async()=>{const{PGAMainPage:e}=await X(async()=>{const{PGAMainPage:t}=await import("./index-Cu-JmS1D.js");return{PGAMainPage:t}},__vite__mapDeps([545,1,2,5,546,7,547,497,6,490,499,435]));return{default:e,critical:!0}}),vnn=he(async()=>{const{PGAEventMainPage:e}=await X(async()=>{const{PGAEventMainPage:t}=await import("./events-CLGYyUK_.js");return{PGAEventMainPage:t}},__vite__mapDeps([548,1,2,5,546,7,490,499,435,6]));return{default:e,critical:!0}}),bnn=he(async()=>{const{EuropeanTourMainPage:e}=await X(async()=>{const{EuropeanTourMainPage:t}=await import("./index-Cu-JmS1D.js");return{EuropeanTourMainPage:t}},__vite__mapDeps([545,1,2,5,546,7,547,497,6,490,499,435]));return{default:e,critical:!0}}),_nn=he(async()=>{const{EuropeanTourEventMainPage:e}=await X(async()=>{const{EuropeanTourEventMainPage:t}=await import("./events-CLGYyUK_.js");return{EuropeanTourEventMainPage:t}},__vite__mapDeps([548,1,2,5,546,7,490,499,435,6]));return{default:e,critical:!0}}),wnn=he(async()=>{const{WNBAMainPage:e}=await X(async()=>{const{WNBAMainPage:t}=await import("./index-DCVweGaE.js");return{WNBAMainPage:t}},__vite__mapDeps([549,1,2,5,509,7,6,498,450,510,502,503,538,505,506,499,435]));return{default:e,critical:!0}}),Cnn=he(async()=>{const{WNBAEventMainPage:e}=await X(async()=>{const{WNBAEventMainPage:t}=await import("./events-3XB9kS9a.js");return{WNBAEventMainPage:t}},__vite__mapDeps([550,1,2,5,512,7,513,515,516,517,510,6,521,450,490,499,435]));return{default:e,critical:!0}}),Snn=he(async()=>{const{NCAAMEventMainPage:e}=await X(async()=>{const{NCAAMEventMainPage:t}=await import("./events-DgxTS12G.js");return{NCAAMEventMainPage:t}},__vite__mapDeps([551,1,2,5,512,7,513,514,515,516,517,510,518,519,520,521,450,522,490,499,435,6]));return{default:e,critical:!0}}),Enn=he(async()=>{const{NCAAWEventMainPage:e}=await X(async()=>{const{NCAAWEventMainPage:t}=await import("./events-DgxTS12G.js");return{NCAAWEventMainPage:t}},__vite__mapDeps([551,1,2,5,512,7,513,514,515,516,517,510,518,519,520,521,450,522,490,499,435,6]));return{default:e,critical:!0}}),Mnn=he(async()=>{const{NCAAMMainPage:e}=await X(async()=>{const{NCAAMMainPage:t}=await import("./index-DdWRldqg.js");return{NCAAMMainPage:t}},__vite__mapDeps([552,1,2,5,507,508,7,6,498,450,490,499,435]));return{default:e,critical:!0}}),knn=he(async()=>{const{NCAAWMainPage:e}=await X(async()=>{const{NCAAWMainPage:t}=await import("./index-DdWRldqg.js");return{NCAAWMainPage:t}},__vite__mapDeps([552,1,2,5,507,508,7,6,498,450,490,499,435]));return{default:e,critical:!0}}),Tnn=he(async()=>{const{WTAMainPage:e}=await X(async()=>{const{WTAMainPage:t}=await import("./index-CCsAD03G.js");return{WTAMainPage:t}},__vite__mapDeps([553,1,2,5,554,547,497,6,7,555,490,499,435]));return{default:e,critical:!0}}),Nnn=he(async()=>{const{ATPMainPage:e}=await X(async()=>{const{ATPMainPage:t}=await import("./index-CCsAD03G.js");return{ATPMainPage:t}},__vite__mapDeps([553,1,2,5,554,547,497,6,7,555,490,499,435]));return{default:e,critical:!0}}),jnn=he(async()=>{const{WTAEventMainPage:e}=await X(async()=>{const{WTAEventMainPage:t}=await import("./events-BkZQiPEU.js");return{WTAEventMainPage:t}},__vite__mapDeps([556,1,2,5,534,7,6,557,507,508,521,450,555,490,499,435]));return{default:e,critical:!0}}),Ann=he(async()=>{const{ATPEventMainPage:e}=await X(async()=>{const{ATPEventMainPage:t}=await import("./events-BkZQiPEU.js");return{ATPEventMainPage:t}},__vite__mapDeps([556,1,2,5,534,7,6,557,507,508,521,450,555,490,499,435]));return{default:e,critical:!0}}),Inn=he(async()=>{const{ATPTournamentMainPage:e}=await X(async()=>{const{ATPTournamentMainPage:t}=await import("./tournaments-qrHYH-DY.js");return{ATPTournamentMainPage:t}},__vite__mapDeps([558,1,2,5,498,7,450,554,557,507,508,6,555,490,499,435]));return{default:e,critical:!0}}),Rnn=he(async()=>{const{WTATournamentMainPage:e}=await X(async()=>{const{WTATournamentMainPage:t}=await import("./tournaments-qrHYH-DY.js");return{WTATournamentMainPage:t}},__vite__mapDeps([558,1,2,5,498,7,450,554,557,507,508,6,555,490,499,435]));return{default:e,critical:!0}}),Pnn=he(async()=>{const{FinanceRouter:e}=await X(async()=>{const{FinanceRouter:t}=await import("./sub-router-Drlqvnd8.js");return{FinanceRouter:t}},__vite__mapDeps([559,1,2,5,6,434,435,7,436,23,437,438,439,560,17,18,427,19,490]));return{default:e}}),Lnn=he(async()=>{const{AccountPage:e}=await X(async()=>{const{AccountPage:t}=await import("./index-BqauwM8x.js");return{AccountPage:t}},__vite__mapDeps([561,1,2,7,6,5]));return{default:e,critical:!0}}),Onn=he(async()=>{const{AccountDetailsPage:e}=await X(async()=>{const{AccountDetailsPage:t}=await import("./details-CnJVoSEg.js");return{AccountDetailsPage:t}},__vite__mapDeps([562,1,2,5,7,6,18]));return{default:e,critical:!0}}),Dnn=he(async()=>{const{AccountApiGroupPage:e}=await X(async()=>{const{AccountApiGroupPage:t}=await import("./group-qZ0OFbuU.js");return{AccountApiGroupPage:t}},__vite__mapDeps([563,1,2,564,565,484,7,566,567,5,568,6,569,570,34]));return{default:e,critical:!0}}),Fnn=he(async()=>{const{AccountApiMembersPage:e}=await X(async()=>{const{AccountApiMembersPage:t}=await import("./members-AOphpHi4.js");return{AccountApiMembersPage:t}},__vite__mapDeps([571,1,2,564,565,484,7,5,566,567,568,6,572]));return{default:e,critical:!0}}),Unn=he(async()=>{const{AccountApiBillingPage:e}=await X(async()=>{const{AccountApiBillingPage:t}=await import("./billing-fh_HnJ52.js");return{AccountApiBillingPage:t}},__vite__mapDeps([573,1,2,564,565,484,7,5,439,568,6,570,34,569,567]));return{default:e,critical:!0}}),Bnn=he(async()=>{const{AccountApiKeysPage:e}=await X(async()=>{const{AccountApiKeysPage:t}=await import("./keys-CkQ12rnF.js");return{AccountApiKeysPage:t}},__vite__mapDeps([574,1,2,564,565,484,7,5,568,6,566,567]));return{default:e,critical:!0}}),$nn=he(async()=>{const{AccountApiLimitsPage:e}=await X(async()=>{const{AccountApiLimitsPage:t}=await import("./limits-BS1MNPry.js");return{AccountApiLimitsPage:t}},__vite__mapDeps([575,1,2,564,565,484,7,5,6]));return{default:e,critical:!0}}),Vnn=he(async()=>{const{AccountApiFilesPage:e}=await X(async()=>{const{AccountApiFilesPage:t}=await import("./files-16jTOkCP.js");return{AccountApiFilesPage:t}},__vite__mapDeps([576,1,2,564,565,484,7,5,566,567,6]));return{default:e,critical:!0}}),Wnn=he(async()=>{const{AccountApiFilesRepoPage:e}=await X(async()=>{const{AccountApiFilesRepoPage:t}=await import("./files-repo-B3b7_Bnh.js");return{AccountApiFilesRepoPage:t}},__vite__mapDeps([577,1,2,564,565,484,7,5,567,11,6]));return{default:e,critical:!0}}),Hnn=he(async()=>{const{ApiIndexPage:e}=await X(async()=>{const{ApiIndexPage:t}=await import("./index-DhQUxRUr.js");return{ApiIndexPage:t}},__vite__mapDeps([578,1,2,564,565,484,7,6,5]));return{default:e,critical:!0}}),znn=he(async()=>{const{AccountProPerksPage:e}=await X(async()=>{const{AccountProPerksPage:t}=await import("./pro-perks-Cadazzyl.js");return{AccountProPerksPage:t}},__vite__mapDeps([579,1,2,580,7,565,484,5,6]));return{default:e,critical:!0}}),Gnn=he(async()=>{const{AccountProPerksDetailPage:e}=await X(async()=>{const{AccountProPerksDetailPage:t}=await import("./pro-perks-detail-C0soH-TR.js");return{AccountProPerksDetailPage:t}},__vite__mapDeps([581,1,2,580,7,565,484,5,17,6,18]));return{default:e,critical:!0}}),qnn=he(async()=>{const{OrgIndexPage:e}=await X(async()=>{const{OrgIndexPage:t}=await import("./index-kz3DL8XS.js");return{OrgIndexPage:t}},__vite__mapDeps([582,1,2,565,484,7,583,6,5]));return{default:e,critical:!0}}),Knn=he(async()=>{const{OrgDetailsPage:e}=await X(async()=>{const{OrgDetailsPage:t}=await import("./index-BOUhy9-x.js");return{OrgDetailsPage:t}},__vite__mapDeps([584,1,2,5,480,7,6,18,585,586,88,587,565,484,583]));return{default:e,critical:!0}}),Ynn=he(async()=>{const{OrgMembersPage:e}=await X(()=>import("./members-C6iKUXDp.js"),__vite__mapDeps([588,1,2,5,6,7,480,572,565,484,583]));return{default:e,critical:!0}}),Qnn=he(async()=>{const{OrgInsightsPage:e}=await X(()=>import("./insights-B5LkrVsN.js"),__vite__mapDeps([589,1,2,5,6,88,7,565,484,583]));return{default:e,critical:!0}}),Xnn=he(async()=>{const{OrgUserAccessPage:e}=await X(()=>import("./user-access-1QqolDsk.js"),__vite__mapDeps([590,1,2,5,7,6,88,586,565,484,583]));return{default:e,critical:!0}}),Znn=he(async()=>{const{OrgPermissionsPage:e}=await X(()=>import("./permissions-BN0e7kpL.js"),__vite__mapDeps([591,1,2,5,585,7,587,6,565,484,583]));return{default:e,critical:!0}}),Jnn=he(async()=>{const{OrgFilesPage:e}=await X(()=>import("./files-DHF87jVn.js"),__vite__mapDeps([592,1,2,5,10,11,6,7,565,484,593,583]));return{default:e,critical:!0}}),ern=he(async()=>{const{OrgConnectorsPage:e}=await X(()=>import("./connectors-C1zDgzEK.js"),__vite__mapDeps([594,1,2,565,484,7,5,6,583]));return{default:e,critical:!0}}),trn=he(async()=>{const{AccountPurchasesPage:e}=await X(async()=>{const{AccountPurchasesPage:t}=await import("./purchases-DYzBjOB8.js");return{AccountPurchasesPage:t}},__vite__mapDeps([595,1,2,5,596,55,6,7]));return{default:e,critical:!0}}),nrn=he(async()=>{const{AccountReservationsPage:e}=await X(async()=>{const{AccountReservationsPage:t}=await import("./reservations-BG0bXsM5.js");return{AccountReservationsPage:t}},__vite__mapDeps([597,1,2,5,596,57,6,58,7]));return{default:e,critical:!0}}),rrn=he(async()=>{const{AccountTasksPage:e}=await X(async()=>{const{AccountTasksPage:t}=await import("./index-Bm4IQcpI.js");return{AccountTasksPage:t}},__vite__mapDeps([598,1,2,5,599,7,6,494]));return{default:e,critical:!0}}),srn=he(async()=>{const{AccountTaskDetailsPage:e}=await X(async()=>{const{AccountTaskDetailsPage:t}=await import("./task-CLjdGrHA.js");return{AccountTaskDetailsPage:t}},__vite__mapDeps([600,1,2,5,6,7]));return{default:e,critical:!0}}),arn=he(async()=>{const{AccountShortcutsPage:e}=await X(async()=>{const{AccountShortcutsPage:t}=await import("./shortcuts-C7LBNl4g.js");return{AccountShortcutsPage:t}},__vite__mapDeps([601,1,2,5,599,6,7]));return{default:e,critical:!0}}),orn=he(async()=>{const{AccountSiteInstructionsPage:e}=await X(async()=>{const{AccountSiteInstructionsPage:t}=await import("./site-instructions-DGxnkmcz.js");return{AccountSiteInstructionsPage:t}},__vite__mapDeps([602,1,2,5,6,7]));return{default:e,critical:!0}}),irn=he(async()=>{const{AccountPreferencesPage:e}=await X(async()=>{const{AccountPreferencesPage:t}=await import("./preferences-6Q_K2dTQ.js");return{AccountPreferencesPage:t}},__vite__mapDeps([603,1,2,5,6,7]));return{default:e,critical:!0}}),lrn=he(async()=>{const{AccountPersonalizePage:e}=await X(async()=>{const{AccountPersonalizePage:t}=await import("./personalize-DNlekNyN.js");return{AccountPersonalizePage:t}},__vite__mapDeps([604,1,2,5,6,7,48]));return{default:e,critical:!0}}),crn=he(async()=>{const{AccountAssistantPage:e}=await X(async()=>{const{AccountAssistantPage:t}=await import("./assistant-BhLQg7Wq.js");return{AccountAssistantPage:t}},__vite__mapDeps([605,1,2,5,606,7,6]));return{default:e,critical:!0}}),urn=he(async()=>{const{AccountPersonalizeMemoriesPage:e}=await X(async()=>{const{AccountPersonalizeMemoriesPage:t}=await import("./memories-Bbm0mPRr.js");return{AccountPersonalizeMemoriesPage:t}},__vite__mapDeps([607,1,2,5,66,6,7]));return{default:e,critical:!0}}),drn=he(async()=>{const{AccountNotificationsPage:e}=await X(async()=>{const{AccountNotificationsPage:t}=await import("./notifications-BM42L-sn.js");return{AccountNotificationsPage:t}},__vite__mapDeps([608,1,2,5,7,6]));return{default:e,critical:!0}}),frn=he(async()=>{const{AccountFilesPage:e}=await X(async()=>{const{AccountFilesPage:t}=await import("./files-DTC3YRZD.js");return{AccountFilesPage:t}},__vite__mapDeps([609,1,2,5,593,10,11,6,7]));return{default:e,critical:!0}}),mrn=he(async()=>{const{AccountConnectorsPage:e}=await X(async()=>{const{AccountConnectorsPage:t}=await import("./connectors-Bcc9EeH9.js");return{AccountConnectorsPage:t}},__vite__mapDeps([610,2,1,7,6,5]));return{default:e,critical:!0}}),prn=he(async()=>{const{SportsLandingPage:e}=await X(async()=>{const{SportsLandingPage:t}=await import("./index-CW1hJffI.js");return{SportsLandingPage:t}},__vite__mapDeps([611,1,2,5,435,6,7,436,23,560,486,438,490]));return{default:e,critical:!0}}),hrn=he(async()=>{const{InputPage:e}=await X(async()=>{const{InputPage:t}=await import("./ask-input-DvYrcMkJ.js");return{InputPage:t}},__vite__mapDeps([612,1,2,490,5,7,6]));return{default:e,critical:!0}}),grn=he(async()=>{const{AccountApiPlaygroundPage:e}=await X(async()=>{const{AccountApiPlaygroundPage:t}=await import("./playground-CB6ADMTP.js");return{AccountApiPlaygroundPage:t}},__vite__mapDeps([613,1,2,5,6,569,7]));return{default:e,critical:!0}});function yrn(){const e=vt(),t=d.useCallback(()=>{e.push("/b/home",void 0,"voice to ntp")},[e]);return dn()?o.jsx(Cx,{childrenWidth:"none",mobileHeader:!1,children:o.jsx(Dtn,{isOpen:!0,onClose:t})}):o.jsx(iu,{to:"/"})}function xrn(){return dn()?o.jsx(Ltn,{}):o.jsx(iu,{to:"/"})}function Ale(){const{session:e}=mt(),{value:t,loading:n}=Qs({flag:"mission-control-enabled",defaultValue:!1,extraAttributes:{userEmail:e?.user?.email??"unknown-user",subscriptionTier:e?.user.subscription_tier||""}});return n?o.jsx("div",{}):!dn()||!t?o.jsx(iu,{to:"/"}):o.jsx(cPe,{})}function vrn(){return dn()?o.jsx(Otn,{}):o.jsx(iu,{to:"/"})}const Ile={[B3]:{Component:m9e,modules:F6e}},GS={"/library":{Component:Ftn,modules:ce},[B3]:{Component:c9e,modules:F6e},"/b/home":{Component:Ptn,modules:gie},"/b/speak":{Component:yrn,modules:ce},"/b/zen":{Component:xrn,modules:ce},"/b/mission-control":{Component:Ale,modules:ce},"/b/assistants":{Component:Ale,modules:ce},"/b/try-assistant":{Component:vrn,modules:ce},"/spaces/templates":{Component:Btn,modules:ce},"/spaces/:slug":{Component:$tn,modules:Gzt},"/spaces":{Component:Utn,modules:ce},"/classroom/:school/:classCode":{Component:Vtn,modules:ce},"/page/:slug":{Component:Nle,modules:ce},"/discover/:topic/:slug":{Component:Nle,modules:ce},"/discover/:topic":{Component:jle,modules:yie},"/discover":{Component:jle,modules:yie},"/academic":{Component:Wtn,modules:ce},"/shopping":{Component:Htn,modules:ce},"/hotels/:slug":{Component:ztn,modules:ce},"/perplexify_me":{Component:Gtn,modules:ce},"/sports":{Component:prn,modules:ce},"/sports/f1/events/:eventId":{Component:Ytn,modules:ce},"/sports/f1":{Component:Ktn,modules:Hzt},"/sports/nba/events/:eventId":{Component:Xtn,modules:ce},"/sports/nba/teams/:teamId":{Component:Ztn,modules:ce},"/sports/nba/players/:playerId":{Component:Jtn,modules:ce},"/sports/nba":{Component:Qtn,modules:zzt},"/sports/nfl/events/:eventId":{Component:tnn,modules:ce},"/sports/nfl/teams/:teamId":{Component:nnn,modules:ce},"/sports/nfl/players/:playerId":{Component:rnn,modules:ce},"/sports/nfl":{Component:enn,modules:ce},"/sports/championsleague/events/:eventId":{Component:ann,modules:ce},"/sports/championsleague":{Component:snn,modules:ce},"/sports/laliga/events/:eventId":{Component:inn,modules:ce},"/sports/laliga":{Component:onn,modules:ce},"/sports/ligue1/events/:eventId":{Component:cnn,modules:ce},"/sports/ligue1":{Component:lnn,modules:ce},"/sports/bundesliga/events/:eventId":{Component:dnn,modules:ce},"/sports/bundesliga":{Component:unn,modules:ce},"/sports/epl/events/:eventId":{Component:mnn,modules:ce},"/sports/epl":{Component:fnn,modules:ce},"/sports/mlb/events/:eventId":{Component:hnn,modules:ce},"/sports/mlb":{Component:pnn,modules:ce},"/sports/cricket/events/:eventId":{Component:DR,modules:ce},"/sports/ipl/events/:eventId":{Component:DR,modules:ce},"/sports/icc/events/:eventId":{Component:DR,modules:ce},"/sports/ipl":{Component:ynn,modules:ce},"/sports/icc":{Component:gnn,modules:ce},"/sports/pga/events/:eventId":{Component:vnn,modules:ce},"/sports/pga":{Component:xnn,modules:ce},"/sports/dpworldtour/events/:eventId":{Component:_nn,modules:ce},"/sports/dpworldtour":{Component:bnn,modules:ce},"/sports/wnba/events/:eventId":{Component:Cnn,modules:ce},"/sports/wnba":{Component:wnn,modules:ce},"/sports/wta":{Component:Tnn,modules:ce},"/sports/atp":{Component:Nnn,modules:ce},"/sports/wta/events/:eventId":{Component:jnn,modules:ce},"/sports/atp/events/:eventId":{Component:Ann,modules:ce},"/sports/atp/tournaments/:seasonId":{Component:Inn,modules:ce},"/sports/wta/tournaments/:seasonId":{Component:Rnn,modules:ce},"/sports/ncaam/events/:eventId":{Component:Snn,modules:ce},"/sports/ncaam":{Component:Mnn,modules:ce},"/sports/ncaaw/events/:eventId":{Component:Enn,modules:ce},"/sports/ncaaw":{Component:knn,modules:ce},"/travel":{Component:qtn,modules:ce},[d$]:{Component:Pnn,modules:Wzt},"/account/details":{Component:Onn,modules:ce},"/account/org/details":{Component:Knn,modules:ce},"/account/org/members":{Component:Ynn,modules:ce},"/account/org/insights":{Component:Qnn,modules:ce},"/account/org/user-access":{Component:Xnn,modules:ce},"/account/org/permissions":{Component:Znn,modules:ce},"/account/org/files":{Component:Jnn,modules:ce},"/account/org/connectors":{Component:ern,modules:ce},"/account/api/group":{Component:Dnn,modules:ce},"/account/api/members":{Component:Fnn,modules:ce},"/account/api/billing":{Component:Unn,modules:ce},"/account/api/keys":{Component:Bnn,modules:ce},"/account/api/playground/search":{Component:grn,modules:ce},"/account/api/limits":{Component:$nn,modules:ce},"/account/api/files":{Component:Vnn,modules:ce},"/account/api/files/:repositoryUuid":{Component:Wnn,modules:ce},"/account/api":{Component:Hnn,modules:ce},"/account/pro-perks":{Component:znn,modules:ce},"/account/pro-perks/:name":{Component:Gnn,modules:ce},"/account/org":{Component:qnn,modules:ce},"/account/purchases":{Component:trn,modules:ce},"/account/reservations":{Component:nrn,modules:ce},"/account/tasks/:taskId":{Component:srn,modules:ce},"/account/tasks":{Component:rrn,modules:ce},"/account/shortcuts":{Component:arn,modules:ce},"/account/site-instructions":{Component:orn,modules:ce},"/account/preferences":{Component:irn,modules:ce},"/account/personalize":{Component:lrn,modules:ce},"/account/assistant":{Component:crn,modules:ce},"/account/personalize/memories":{Component:urn,modules:ce},"/account/notifications":{Component:drn,modules:ce},"/account/files":{Component:frn,modules:ce},"/account/connectors":{Component:mrn,modules:ce},"/account":{Component:Lnn,modules:ce},"/windows-app/ask/input":{Component:hrn,modules:ce},"/":{Component:RAe,modules:gie}},brn=/^\/account/,_rn=/^\/windows-app/,x9e=I.memo(function(){const{isMobileUserAgent:t}=xe(),n=d.useMemo(()=>Object.keys(GS),[]),r=Rtn(n),s=d.useMemo(()=>Object.entries(GS).filter(([c])=>c.startsWith("/account")),[]),a=d.useMemo(()=>Object.entries(GS).filter(([c])=>c.startsWith("/windows-app")),[]),i=d.useMemo(()=>{const c=new Set(Object.keys(Ile));return Object.entries(GS).filter(([u])=>{const f=u.startsWith("/account"),m=t&&c.has(u);return!f&&!m})},[t]),l=d.useMemo(()=>t?Object.entries(Ile):[],[t]);return o.jsxs(b_e,{children:[o.jsx(zH,{}),o.jsxs(sN,{children:[o.jsx(jf,{path:_rn,children:a.map(([c,{Component:u,modules:f}])=>o.jsx(jf,{path:c,children:o.jsx(IC,{modules:f,children:o.jsx(u,{})})},c))}),o.jsx(jf,{path:brn,children:o.jsx(K6e,{children:o.jsx(sN,{children:s.map(([c,{Component:u,modules:f}])=>o.jsx(jf,{path:c,children:o.jsx(IC,{modules:f,children:o.jsx(u,{})})},c))})})}),l.length>0&&l.map(([c,{Component:u,modules:f}])=>o.jsx(jf,{path:c.startsWith("^")?new RegExp(c):c,children:o.jsx(hie,{children:o.jsx(D7,{children:o.jsx(IC,{modules:f,children:o.jsx(u,{})})})})},c)),o.jsx(jf,{children:o.jsx(D7,{children:o.jsx(hie,{children:o.jsx(sN,{children:i.map(([c,{Component:u,modules:f}])=>o.jsx(jf,{path:c.startsWith("^")?new RegExp(c):c,children:o.jsx(IC,{modules:f,children:o.jsx(u,{})})},c))})})})})]}),o.jsx(U6e,{metadata:r})]})});x9e.displayName="SpaEntryPoint";const Uz="/",wrn=document.getElementById("root"),Crn=c7e.createRoot(wrn),Srn=$0t(Uz),Ern=navigator.userAgent;function v9e(e,t){Crn.render(o.jsx(I.StrictMode,{children:o.jsx(Nr,{fallback:Srn,children:o.jsx(v_e,{host:window.location.hostname,userAgent:Ern,session:t??void 0,children:o.jsxs(O0t,{isMobileUserAgent:krn,hostname:Trn??"",version:e.version,minVersion:e.minVersion??0,spaRoutes:f$,strictSpa:!0,idleRefresh:!1,minVersionRefresh:!0,children:[o.jsx(x9e,{}),o.jsx(Ult,{})]})})})}))}const{config:Lb,cachedSession:Lk,sessionFetchPromise:Mrn}=o1t();window.__PPL_CONFIG__=Lb;const krn=fxe(navigator.userAgent),Trn=window.location.host;Lk&&o_e({bootstrapConfig:Lb,user:Lk.user,routes:f$,base:Uz});v9e(Lb,Lk);Mrn.then(e=>{Lk||o_e({bootstrapConfig:Lb,user:e?.user,routes:f$,base:Uz}),v9e(Lb,e)});export{Grn as $,Ye as A,me as B,jsn as C,k$ as D,ce as E,Zln as F,Vlt as G,Pt as H,Xr as I,dn as J,xnt as K,dne as L,Jo as M,tcn as N,Hr as O,Fe as P,Jln as Q,une as R,Fr as S,F as T,xTt as U,KD as V,Vpe as W,Le as X,b5 as Y,zrn as Z,q1 as _,jr as a,hon as a$,Hrn as a0,gme as a1,Me as a2,$lt as a3,uf as a4,fn as a5,vp as a6,un as a7,Yt as a8,ol as a9,u1e as aA,JJt as aB,$H as aC,qHt as aD,ten as aE,Ko as aF,Iw as aG,din as aH,Cx as aI,Zet as aJ,eon as aK,Hg as aL,gf as aM,wNe as aN,Un as aO,YJt as aP,Ct as aQ,Gan as aR,ya as aS,nx as aT,ot as aU,mE as aV,kan as aW,vU as aX,xU as aY,WT as aZ,M3 as a_,__ as aa,qt as ab,Ho as ac,et as ad,wo as ae,n$ as af,xPe as ag,Ht as ah,UHt as ai,ir as aj,le as ak,x_ as al,nn as am,yU as an,Ige as ao,Vsn as ap,L8e as aq,Y3 as ar,gc as as,pw as at,tZt as au,Ks as av,In as aw,f2 as ax,mpt as ay,ns as az,jt as b,Ga as b$,Si as b0,or as b1,pa as b2,Pe as b3,Ron as b4,V5 as b5,Hn as b6,Jg as b7,Xmt as b8,dt as b9,k0 as bA,_o as bB,q8e as bC,Nan as bD,jan as bE,Jan as bF,d0e as bG,ett as bH,ntt as bI,e$ as bJ,Lfe as bK,B0e as bL,Ymt as bM,Cn as bN,tpt as bO,_T as bP,zo as bQ,qa as bR,ei as bS,bo as bT,EAe as bU,B8e as bV,qQe as bW,$8e as bX,yp as bY,$_ as bZ,Y0e as b_,gn as ba,Xv as bb,wh as bc,qan as bd,Han as be,Ac as bf,YMe as bg,hc as bh,bx as bi,Vx as bj,Os as bk,jE as bl,Non as bm,u0e as bn,Rz as bo,Y8e as bp,Eft as bq,K8e as br,zan as bs,lu as bt,ton as bu,xx as bv,LQe as bw,Md as bx,Cft as by,Pge as bz,mt as c,uon as c$,A0e as c0,Ic as c1,Pon as c2,emt as c3,dm as c4,tM as c5,k3 as c6,hDe as c7,_f as c8,HK as c9,cJe as cA,gan as cB,yan as cC,$on as cD,Von as cE,xan as cF,van as cG,_an as cH,ban as cI,wan as cJ,Qun as cK,ain as cL,San as cM,uJe as cN,Ean as cO,I8e as cP,Dan as cQ,GQe as cR,$a as cS,Lz as cT,tde as cU,Pan as cV,Uon as cW,Lan as cX,cn as cY,dsn as cZ,fsn as c_,Wa as ca,zK as cb,dGt as cc,Xan as cd,we as ce,Zan as cf,Yan as cg,Qan as ch,Pu as ci,Wan as cj,pl as ck,qun as cl,TOt as cm,RTe as cn,NOt as co,Hx as cp,Kan as cq,j0e as cr,OB as cs,zDe as ct,Tge as cu,pan as cv,han as cw,R2 as cx,Yun as cy,pZt as cz,Nn as d,vhe as d$,d_ as d0,Zl as d1,RGe as d2,aY as d3,Can as d4,c2 as d5,Ft as d6,TZt as d7,Ian as d8,l8 as d9,ZIt as dA,Ec as dB,wm as dC,Gg as dD,D_ as dE,Bon as dF,na as dG,Zr as dH,qPe as dI,hw as dJ,B7 as dK,zT as dL,vRt as dM,Sa as dN,xke as dO,Zje as dP,yRt as dQ,r1e as dR,TPe as dS,VPe as dT,WZt as dU,Oon as dV,E$ as dW,M$ as dX,fPe as dY,IW as dZ,AUt as d_,q4e as da,iHe as db,AK as dc,Orn as dd,tHe as de,rHe as df,nHe as dg,aHe as dh,oHe as di,eHe as dj,ga as dk,Kae as dl,OT as dm,DT as dn,F_ as dp,WH as dq,vx as dr,yPe as ds,gPe as dt,vPe as du,LW as dv,Vo as dw,An as dx,son as dy,Kke as dz,Ue as e,Rin as e$,Don as e0,Fon as e1,Q3 as e2,lc as e3,Yd as e4,qQ as e5,$sn as e6,H5 as e7,an as e8,ti as e9,sin as eA,y5 as eB,Bu as eC,HT as eD,DW as eE,Acn as eF,PIt as eG,Soe as eH,Q4e as eI,uR as eJ,Mtt as eK,nRt as eL,s5e as eM,q0e as eN,Ven as eO,z5 as eP,HB as eQ,o8 as eR,$Ie as eS,f1e as eT,n1e as eU,Qs as eV,$ge as eW,Esn as eX,EH as eY,Ain as eZ,Iin as e_,i3t as ea,l3t as eb,o3 as ec,Vqt as ed,UVe as ee,Oan as ef,bke as eg,bb as eh,Uan as ei,_m as ej,Ha as ek,wF as el,Ran as em,$et as en,Uet as eo,vsn as ep,Van as eq,hsn as er,Usn as es,V_ as et,aAe as eu,tNe as ev,Wt as ew,Fsn as ex,rin as ey,Lu as ez,Xs as f,dun as f$,Pin as f0,qc as f1,Tl as f2,cr as f3,ake as f4,Zwt as f5,JAt as f6,x3t as f7,jOt as f8,wSe as f9,IUt as fA,BUt as fB,ky as fC,eNe as fD,eTe as fE,lH as fF,y4 as fG,_a as fH,t4e as fI,Jcn as fJ,Dp as fK,Aw as fL,iH as fM,X3e as fN,sl as fO,t$ as fP,Oen as fQ,nun as fR,xun as fS,ANe as fT,Jun as fU,edn as fV,tun as fW,RUt as fX,Den as fY,Ew as fZ,yun as f_,St as fa,Fp as fb,UH as fc,fx as fd,JB as fe,Cgt as ff,ha as fg,xAe as fh,J6e as fi,IOt as fj,Vln as fk,Xpe as fl,oke as fm,Gwt as fn,tIt as fo,rIt as fp,nIt as fq,BF as fr,Xo as fs,aV as ft,zu as fu,B4e as fv,CUt as fw,cBt as fx,w4e as fy,X4e as fz,Jwt as g,S$t as g$,Gx as g0,Cun as g1,Aun as g2,_un as g3,Sy as g4,dk as g5,Hcn as g6,lun as g7,bun as g8,MNe as g9,Yy as gA,xsn as gB,nan as gC,Hyt as gD,Prn as gE,hu as gF,KUe as gG,gD as gH,WO as gI,Wen as gJ,Dun as gK,zg as gL,wU as gM,zy as gN,L_ as gO,lNe as gP,cNe as gQ,uNe as gR,dNe as gS,Pb as gT,kun as gU,b$t as gV,Voe as gW,Qi as gX,F$t as gY,D$t as gZ,Eun as g_,TBt as ga,uun as gb,vun as gc,fun as gd,NBt as ge,Aen as gf,EFt as gg,eun as gh,i$t as gi,Ls as gj,Ren as gk,Men as gl,tdn as gm,vDt as gn,jun as go,$Bt as gp,Vje as gq,adn as gr,odn as gs,idn as gt,h9e as gu,QFt as gv,FFt as gw,sun as gx,Sen as gy,ysn as gz,z as h,Ma as h$,Uoe as h0,sx as h1,ghe as h2,$Qe as h3,HNe as h4,U$t as h5,Boe as h6,Mun as h7,Nr as h8,A$t as h9,iRt as hA,d5e as hB,pn as hC,$7 as hD,RIt as hE,ea as hF,Vr as hG,ZEe as hH,kW as hI,MMe as hJ,UAt as hK,um as hL,FAt as hM,uTt as hN,tTt as hO,nTt as hP,hTt as hQ,GMe as hR,SMe as hS,QMe as hT,JEe as hU,Ym as hV,I3 as hW,wge as hX,y5e as hY,mRt as hZ,pRt as h_,ex as ha,Np as hb,yV as hc,yz as hd,Q0e as he,gz as hf,ZXt as hg,Lon as hh,lo as hi,SU as hj,T3 as hk,ktt as hl,lon as hm,DF as hn,$5 as ho,rx as hp,_Zt as hq,R1e as hr,Ty as hs,QB as ht,j3 as hu,N3 as hv,EZt as hw,Op as hx,QA as hy,sGt as hz,bn as i,ONe as i$,RW as i0,l5e as i1,u5e as i2,f5e as i3,vb as i4,QM as i5,_y as i6,_x as i7,Icn as i8,Pcn as i9,FUt as iA,_ie as iB,yk as iC,bie as iD,mR as iE,pR as iF,Uen as iG,_Ft as iH,Ben as iI,I4e as iJ,FQe as iK,UUt as iL,LUt as iM,OUt as iN,uBt as iO,dBt as iP,mBt as iQ,ndn as iR,PUt as iS,Len as iT,_le as iU,rdn as iV,sdn as iW,DUt as iX,u$t as iY,Poe as iZ,f$t as i_,sje as ia,PFe as ib,Xcn as ic,gun as id,Zcn as ie,Kcn as ig,pun as ih,op as ii,mun as ij,hun as ik,Qcn as il,Ycn as im,Gcn as io,bDt as ip,qcn as iq,zcn as ir,ec as is,pDt as it,lAe as iu,ENe as iv,W5 as iw,wun as ix,Wcn as iy,vue as iz,ff as j,Bln as j$,wle as j0,Sun as j1,iun as j2,GFt as j3,run as j4,cun as j5,ble as j6,_Bt as j7,XB as j8,fln as j9,dln as jA,aln as jB,sln as jC,Qin as jD,n9 as jE,qin as jF,tln as jG,_ln as jH,zJt as jI,F1e as jJ,ly as jK,f4 as jL,Kin as jM,Yin as jN,rze as jO,V5t as jP,oV as jQ,Dln as jR,Oln as jS,nSe as jT,mT as jU,iy as jV,Gln as jW,gT as jX,Uln as jY,Fln as jZ,$ln as j_,UQe as ja,Z8 as jb,FNe as jc,mln as jd,Rln as je,Iln as jf,Vcn as jg,qOt as jh,i2 as ji,AU as jj,Cln as jk,wln as jl,zln as jm,pln as jn,gln as jo,hln as jp,xln as jq,yln as jr,Gin as js,pon as jt,v8t as ju,uln as jv,cln as jw,lln as jx,oln as jy,iln as jz,Is as k,mLt as k$,TCt as k0,kCt as k1,kln as k2,Tln as k3,Lln as k4,qln as k5,Nln as k6,ySe as k7,vve as k8,jln as k9,ECt as kA,eln as kB,Jin as kC,zin as kD,Hin as kE,r$t as kF,jL as kG,INe as kH,ZB as kI,Eln as kJ,qD as kK,Rgt as kL,Mln as kM,$at as kN,ox as kO,igt as kP,lgt as kQ,cgt as kR,O8 as kS,aue as kT,t9 as kU,nte as kV,ue as kW,VDe as kX,WDe as kY,Dje as kZ,ICt as k_,Aln as ka,Pln as kb,HMe as kc,Hln as kd,Wln as ke,Sln as kf,Yln as kg,IC as kh,Nun as ki,mTe as kj,v3t as kk,R4 as kl,Oje as km,I4 as kn,i0e as ko,P4 as kp,Kln as kq,p9e as kr,eb as ks,Zin as kt,Xin as ku,bln as kv,vln as kw,rln as kx,nln as ky,MCt as kz,xt as l,Yqe as l$,Cy as l0,uH as l1,Bcn as l2,xSe as l3,vSe as l4,bSe as l5,_Se as l6,b4e as l7,Lp as l8,IIt as l9,kk as lA,uin as lB,$6e as lC,Zzt as lD,GH as lE,Qt as lF,zqe as lG,oxt as lH,pin as lI,fin as lJ,hin as lK,Cp as lL,Du as lM,Jd as lN,Pa as lO,i4 as lP,tV as lQ,Qd as lR,rV as lS,zx as lT,Hkt as lU,aH as lV,Tw as lW,c4e as lX,qqe as lY,Kqe as lZ,uGt as l_,q6e as la,l3 as lb,Fan as lc,spe as ld,BDe as le,Xb as lf,Aan as lg,gx as lh,hs as li,zC as lj,BQe as lk,vQe as ll,P0 as lm,Cxe as ln,$an as lo,qsn as lp,zht as lq,Uu as lr,_xt as ls,gxt as lt,ZH as lu,phe as lv,Flt as lw,V6e as lx,Mk as ly,Xzt as lz,ve as m,kon as m$,Ksn as m0,Ysn as m1,ra as m2,eGt as m3,Smt as m4,Aon as m5,cmt as m6,Xze as m7,umt as m8,Tmt as m9,ron as mA,Wrn as mB,non as mC,RB as mD,Nd as mE,Qmt as mF,A5 as mG,Man as mH,_me as mI,tF as mJ,eF as mK,asn as mL,Om as mM,JD as mN,CJe as mO,yx as mP,Kon as mQ,gsn as mR,Ipt as mS,c5e as mT,HD as mU,Or as mV,Ocn as mW,_sn as mX,sse as mY,Uke as mZ,Mon as m_,jn as ma,Csn as mb,wsn as mc,bmt as md,Ayt as me,rM as mf,tan as mg,$rn as mh,Ji as mi,ian as mj,oan as mk,lan as ml,oin as mm,Nsn as mn,vbe as mo,uZe as mp,cZe as mq,ran as mr,Gon as ms,Ait as mt,y_ as mu,san as mv,aan as mw,ege as mx,can as my,ZE as mz,K3 as n,NB as n$,Ton as n0,N4 as n1,XE as n2,aft as n3,lft as n4,lt as n5,XEe as n6,EW as n7,Dl as n8,LMe as n9,zsn as nA,KP as nB,Qit as nC,Gsn as nD,Wsn as nE,ts as nF,zit as nG,J5 as nH,Wet as nI,FYe as nJ,Zit as nK,OGt as nL,D0 as nM,U4 as nN,Vrn as nO,Brn as nP,$1e as nQ,qon as nR,Oun as nS,O1e as nT,_5 as nU,ja as nV,Vl as nW,e3 as nX,yon as nY,tot as nZ,U0e as n_,rw as na,hft as nb,n2 as nc,Cin as nd,Sin as ne,Dqe as nf,HWt as ng,ift as nh,a0e as ni,o0e as nj,S3 as nk,bHt as nl,A4 as nm,gft as nn,q3 as no,EF as np,$en as nq,lwe as nr,Xsn as ns,psn as nt,Zsn as nu,Qsn as nv,m0e as nw,B1e as nx,qrn as ny,UP as nz,Te as o,tAe as o$,T0e as o0,vmt as o1,_mt as o2,IB as o3,TB as o4,rsn as o5,ssn as o6,Won as o7,Hon as o8,Hht as o9,U3 as oA,F3 as oB,Dz as oC,Fz as oD,Iz as oE,f8e as oF,nsn as oG,tsn as oH,Dge as oI,$B as oJ,cbe as oK,WK as oL,Yrn as oM,Krn as oN,mhe as oO,myt as oP,xbe as oQ,mf as oR,slt as oS,Alt as oT,tlt as oU,iB as oV,Lsn as oW,pbe as oX,nyt as oY,Ou as oZ,dhe as o_,Msn as oa,_on as ob,won as oc,WUt as od,HUt as oe,iBt as of,$Ut as og,VUt as oh,ezt as oi,D3 as oj,wp as ok,Fnt as ol,Eme as om,g5 as on,KPe as oo,Iat as op,is as oq,GUe as or,rde as os,CBe as ot,hVe as ou,n$e as ov,ABe as ow,S5 as ox,jB as oy,A1t as oz,xe as p,W8 as p$,lin as p0,IQe as p1,Bsn as p2,Qrn as p3,csn as p4,Xrn as p5,Zrn as p6,cin as p7,PQe as p8,SW as p9,xin as pA,Lgt as pB,aRt as pC,oRt as pD,zr as pE,xo as pF,Ecn as pG,Jon as pH,Mke as pI,b1e as pJ,Ncn as pK,Mcn as pL,Fgt as pM,Lf as pN,xE as pO,Eke as pP,Scn as pQ,kcn as pR,Tcn as pS,SIt as pT,Gqe as pU,P2 as pV,Zon as pW,jcn as pX,Dcn as pY,fbe as pZ,Dvt as p_,CW as pa,Rsn as pb,eX as pc,Dsn as pd,SQe as pe,OVe as pf,qU as pg,Pzt as ph,Fu as pi,Bl as pj,Dke as pk,don as pl,XM as pm,ji as pn,Gke as po,Stt as pp,Hqe as pq,Yon as pr,Xon as ps,Qon as pt,nin as pu,ein as pv,Hsn as pw,h3 as px,tin as py,sj as pz,AAt as q,$u as q$,Kn as q0,p0e as q1,Sr as q2,jon as q3,Kft as q4,sJ as q5,zon as q6,V7 as q7,L2 as q8,ryt as q9,At as qA,qut as qB,GE as qC,Qut as qD,Yut as qE,Jut as qF,Xut as qG,Kc as qH,Kut as qI,xct as qJ,Dve as qK,vct as qL,Bve as qM,zE as qN,HE as qO,Wct as qP,Bct as qQ,pf as qR,Vve as qS,Gct as qT,Qct as qU,AZ as qV,Yct as qW,Va as qX,Lct as qY,z1 as qZ,Gs as q_,Ol as qa,_E as qb,dxt as qc,min as qd,gin as qe,U8 as qf,_yt as qg,cpe as qh,msn as qi,tee as qj,Osn as qk,rX as ql,wQe as qm,bU as qn,syt as qo,Psn as qp,rqt as qq,Iun as qr,Eie as qs,rKe as qt,Tsn as qu,sKe as qv,nKe as qw,ct as qx,uct as qy,xr as qz,zAt as r,sze as r$,pB as r0,tdt as r1,hct as r2,Ek as r3,$Wt as r4,Tct as r5,$It as r6,ZM as r7,qke as r8,dHt as r9,$W as rA,_Yt as rB,yn as rC,cYt as rD,fle as rE,Xun as rF,c1e as rG,Bun as rH,Pp as rI,Uun as rJ,Fun as rK,Run as rL,wd as rM,XAt as rN,con as rO,oz as rP,Sh as rQ,Vun as rR,CYt as rS,bYt as rT,$un as rU,bpt as rV,Wun as rW,Hun as rX,om as rY,im as rZ,Ww as r_,jin as ra,Min as rb,Bat as rc,vo as rd,sqe as re,Ein as rf,tn as rg,kin as rh,twe as ri,Tin as rj,ksn as rk,jy as rl,WWt as rm,zWt as rn,h0 as ro,Zd as rp,Nin as rq,R0e as rr,aJe as rs,gV as rt,iin as ru,EU as rv,Hge as rw,T0 as rx,_U as ry,UPe as rz,re as s,hn as s$,LAt as s0,bxe as s1,w_t as s2,q1t as s3,G1t as s4,w$ as s5,Gbt as s6,J1 as s7,vin as s8,h_t as s9,pNt as sA,Nu as sB,sW as sC,xcn as sD,ycn as sE,R7 as sF,Ux as sG,gcn as sH,rt as sI,gu as sJ,v2e as sK,ta as sL,Es as sM,iEe as sN,Di as sO,YTt as sP,mb as sQ,_c as sR,nW as sS,wcn as sT,GEe as sU,hcn as sV,Tzt as sW,lRt as sX,Asn as sY,m5e as sZ,gJt as s_,_in as sa,bin as sb,win as sc,L_e as sd,b$ as se,Bx as sf,bc as sg,ocn as sh,icn as si,acn as sj,vs as sk,scn as sl,QSe as sm,b4t as sn,YSe as so,lcn as sp,K0 as sq,Be as sr,Je as ss,ps as st,ccn as su,ucn as sv,pcn as sw,E7 as sx,fcn as sy,dcn as sz,ncn as t,Xje as t$,_8e as t0,x5e as t1,W4 as t2,kl as t3,Rcn as t4,FIt as t5,O2 as t6,Ett as t7,XIt as t8,v8e as t9,ls as tA,Sz as tB,Tan as tC,rU as tD,Vke as tE,aon as tF,ion as tG,oon as tH,sRt as tI,ch as tJ,QIt as tK,Wke as tL,nY as tM,aIe as tN,oIe as tO,hIe as tP,o1 as tQ,Pun as tR,Lun as tS,Uw as tT,hSe as tU,u3t as tV,d3t as tW,g8t as tX,KT as tY,xxe as tZ,PW as t_,x8e as ta,bsn as tb,Kun as tc,qd as td,Eon as te,Son as tf,kPe as tg,C$t as th,Gun as ti,Ik as tj,pJt as tk,Zun as tl,mge as tm,pNe as tn,Fi as to,amt as tp,Zhe as tq,Qx as tr,fan as ts,man as tt,CE as tu,TMe as tv,a3 as tw,AMe as tx,Khe as ty,RMe as tz,xp as u,Qn as u0,KL as u1,ERe as u2,Isn as u3,dan as u4,Ag as u5,zO as u6,_r as u7,Bd as u8,yq as u9,Gge as uA,gon as uB,osn as uC,dZ as uD,Jat as uE,cnt as uF,yXt as uG,vqt as uH,dqe as uI,AAe as uJ,ayt as uK,mbe as uL,Eye as uM,wGe as uN,Ln as uO,Sve as uP,Con as uQ,jTe as uR,aun as uS,i$ as ua,rcn as ub,xK as uc,V4 as ud,uan as ue,vJe as uf,Bge as ug,Wo as uh,G5e as ui,Ban as uj,QPe as uk,usn as ul,jPe as um,Fcn as un,Ucn as uo,Ssn as up,esn as uq,Jrn as ur,lsn as us,isn as ut,LIt as uu,yin as uv,Lcn as uw,pXt as ux,vXt as uy,Yge as uz,Qln as v,ecn as w,Xln as x,Uut as y,u6 as z};
//# sourceMappingURL=index-DG9AhOVI.js.map
