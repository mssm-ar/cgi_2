/*! For license information please see bundle-2019.js.LICENSE.txt */
(self.webpackChunks2=self.webpackChunks2||[]).push([[2019,2504],{40936:(e,t,r)=>{"use strict";r.d(t,{Z:()=>u});var i=r(5835),a=r(18243),n=r(94184),s=r.n(n),o=r(67294),l=r.n(o);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},c.apply(this,arguments)}function p(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class u extends l().PureComponent{constructor(...e){super(...e),p(this,"onClick",(()=>{this.state.showMenu||this.setState({showMenu:!this.state.showMenu})})),p(this,"_handleBlurDropdownMenu",(e=>{if(this.state.showMenu){let t=e.target,r=!1;for(;t&&t instanceof Element&&t!==document.body&&!r;)r=t===this.refs.dropdown,r||(t=t.parentElement);r||this.setState({showMenu:!1})}})),p(this,"_onClickKeyDownProps",(0,i.B6)({onClick:this.onClick})),this.state={showMenu:!!this.props.showMenu}}componentWillReceiveProps(e){(!1===e.showMenu||!0===e.showMenu)&&this.setState({showMenu:!1})}componentDidMount(){document.body.addEventListener("click",this._handleBlurDropdownMenu),document.body.addEventListener("keyup",this._handleBlurDropdownMenu)}componentWillUnmount(){document.body.removeEventListener("click",this._handleBlurDropdownMenu),document.body.removeEventListener("keyup",this._handleBlurDropdownMenu)}componentDidUpdate(e,t){t.showMenu!==this.state.showMenu&&(this.state.showMenu&&this.props.onShow?this.props.onShow():this.props.onHide&&this.props.onHide())}render(){const{children:e,content:t,className:r,testId:i}=this.props,{showMenu:n}=this.state,o=e?l().cloneElement(e,{onClick:(0,a.Z)(e.props.onClick,(()=>this.setState({showMenu:!n}))),className:s()(e.props.className,"dropdown-menu-trigger")}):null,p=n?l().createElement("div",{className:"dropdown-menu-content"},t):null,u=s()("dropdown-menu",{"dropdown-is-visible":n},r);return l().createElement("div",c({className:u,ref:"dropdown",tabIndex:0,role:"button","aria-label":this.props.ariaLabel,"aria-expanded":this.state.showMenu},this._onClickKeyDownProps,i?{"data-test-id":i}:{}),o,p)}}try{u.displayName="DropdownMenu"}catch(e){}},72504:(e,t,r)=>{"use strict";r.r(t),r.d(t,{EXCERPT:()=>D,HIGHLY_INFLUENCED:()=>k,INTENT:()=>I,TRUNCATE_TITLE_LENGTH:()=>j,default:()=>A,exampleConfig:()=>L});var i=r(28483),a=r(46515),n=r(84567),s=r(743),o=r(96560),l=r(74420),c=r(45793),p=r(94184),u=r.n(p),d=r(35369),h=r(67294),m=r.n(h);function f(){return f=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},f.apply(this,arguments)}const y=d.ZP.List([l.C.RESULT,l.C.METHODOLOGY,l.C.BACKGROUND,null]);class b extends m().PureComponent{renderReferencesExcerptIntentTitle(e){return(0,o.KF)((t=>t.references.excerptIntentLabel[e]))}renderCitationsExcerptIntentTitle(e){const{citedPaperTitle:t}=this.props;return m().createElement(m().Fragment,null,(0,o.KF)((t=>t.citations.excerptIntentLabel[e])),'"',m().createElement(c.ZP,{field:t,limit:50,expandable:!1}),'"')}render(){const{citationType:e,citationContexts:t,className:r,heapProps:i}=this.props,a=function(e){const t=(e,t,r)=>{const i=e.get(t)||d.ZP.List();return e.set(t,i.push(r))};return e.reduce(((e,r)=>r.intents.length>0?r.intents.reduce(((e,i)=>t(e,i,r.context)),e):t(e,null,r.context)),d.ZP.Map())}(t).sortBy(((e,t)=>y.indexOf(t)));return m().createElement("div",f({className:u()("cl-citation__excerpts",r)},i?(0,s.ON)(i):{}),[...a.keys()].map((t=>m().createElement(n.Z,{key:t||"null",title:t?e===l.Z.CITED_PAPERS?this.renderReferencesExcerptIntentTitle(t):this.renderCitationsExcerptIntentTitle(t):(0,o.KF)((e=>e.citations.excerptIntentLabel.none))},a.get(t).take(10).map(((e,r)=>m().createElement("div",{key:`${t||"null"}.${r}`,className:"cl-citation__excerpts__citation"},m().createElement(c.ZP,{field:e}))))))))}}try{b.displayName="CLCitationExcerpts"}catch(e){}var g=r(51454),v=r(52170),P=r(29212),E=r(99124),S=r(52254),_=r(98213),w=r(6837),O=r(12309),C=r(45697),T=r.n(C);function N(){return N=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},N.apply(this,arguments)}function x(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const I="intent",D="excerpt",k="highlyInfluenced",j=50;class A extends m().PureComponent{constructor(...e){super(...e),x(this,"_onClickFlagAnalytics",null),x(this,"_setControlsExpandedContent",null),x(this,"setAnalyticsCallbacks",(({onClickFlag:e})=>{this._onClickFlagAnalytics=e})),x(this,"onClickExcerptAndIntents",(()=>{this.onClickBox(D)})),x(this,"clearBoxes",(()=>{this.setState({shownBoxType:null})})),this.state={shownBoxType:null}}onClickBox(e){this._onClickFlagAnalytics&&this._onClickFlagAnalytics({citationType:e});const{onClick:t}=this.props;"function"==typeof t&&t();const{shownBoxType:r}=this.state;if(this._setControlsExpandedContent){const t=e===r?null:this.renderExcerptContext();this._setControlsExpandedContent(t)}this.setState({shownBoxType:e===r?null:e})}getExcerptsLabel(){const{citation:e}=this.props,t=e.citationContexts.size;if(t>0)return(0,S._6)(t,(0,o.KF)((e=>e.citations.excerpts.singular),t),(0,o.KF)((e=>e.citations.excerpts.plural),t),!0)}getExcerptAndIntentsFlag(){const{citation:e,citationType:t}=this.props,{shownBoxType:r}=this.state,i=this.getExcerptsLabel();if(!i)return null;const a={"aria-expanded":r===D||r===I};return m().createElement(g.Z,{ariaProps:a,onClick:this.onClickExcerptAndIntents,label:i,heapProps:{id:E.xF,"paper-id":e.id,type:D,"citation-type":t}})}renderFlags(){const{excerpts:e}=this.props,{shownBoxType:t}=this.state,{envInfo:r}=this.context,i=!!e&&(!0===e?this.getExcerptAndIntentsFlag():e);if(!i)return null;const a=t===D||t===I;return r.isMobile?m().createElement("div",{className:"cl-paper-flags__paper-card"},i&&m().createElement("div",{className:"cl-paper-flags__paper-card__flag"},i)):m().createElement("ul",{className:"cl-paper__bulleted-row"},i&&m().createElement("li",{className:"cl-paper__bulleted-row__item cl-paper-flag__popover-button"},i&&m().createElement(m().Fragment,null,i,a&&m().createElement("div",{className:"cl-paper-flag__popover__arrow"}))))}renderBoxContext(e){return e?e===D?this.renderExcerptContext():((0,O.default)("paper-flags",`render method for ${e} is missing`),null):null}renderExcerptContext(){const{citation:e,citationType:t,citedPaperTitle:r}=this.props;return m().createElement(b,{citationType:t,citationContexts:e.citationContexts,citedPaperTitle:r,className:"cl-paper-flags__context__content"})}render(){const{heapProps:e,className:t}=this.props,{shownBoxType:r}=this.state,{envInfo:{isMobile:n}}=this.context,o=this.renderFlags();if(!o)return null;const l=m().createElement(i.DW,{onUpdate:this.setAnalyticsCallbacks},m().createElement("div",N({className:u()("cl-paper-flags",t),"data-test-id":"citation"},e?(0,s.ON)(e):{}),m().createElement("div",{className:"citation__body"},o),m().createElement(w.Z,null,m().createElement("div",{className:u()({"cl-paper-flags__context":!0,"cl-paper-flags__context__is-visible":!!r})},this.renderBoxContext(r)))));return n?l:m().createElement(a.z.Consumer,null,(({setExpandedContent:e})=>(this._setControlsExpandedContent=e,l)))}}try{A.displayName="CLPaperFlags"}catch(e){}x(A,"defaultProps",{excerpts:!0,shouldRenderIntents:!1}),x(A,"contextTypes",{envInfo:T().instanceOf(_.Z).isRequired});const R=(0,v.oy)({id:"id",title:{text:"title"},slug:"slug",authors:[],venue:{text:"venue"},year:2018,citationContexts:[{intents:["methodology"],context:(0,P.Pz)({text:"Yo, this paper was super good."})},{intents:["background"],context:(0,P.Pz)({text:"Yo, this paper was super good."})},{intents:["result"],context:(0,P.Pz)({text:"Yo, this paper was super good."})}],isKey:!0,badges:[]}),L={getComponent:async()=>A,fields:[{name:"className",desc:"HTML classes to be added to the component",value:{type:"text",default:""}}],examples:[{title:"Citation flags",desc:"Flags for a citation with all 3 types of excerpt/intents",props:{shouldRenderIntents:!0,citation:R,citationType:l.Z.CITING_PAPERS,citedPaperTitle:(0,P.Pz)({text:"A Paper with Highlight",fragments:[{start:2,end:7}]})},render:e=>m().createElement("div",{style:{width:"600px",padding:"16px"}},e)},{title:"Reference flags",desc:"Flags for a reference with all 3 types of excerpt/intents",props:{shouldRenderIntents:!0,citation:R,citationType:l.Z.CITED_PAPERS,citedPaperTitle:(0,P.Pz)({text:"A Paper with Highlight",fragments:[{start:2,end:7}]})},render:e=>m().createElement("div",{style:{width:"600px",padding:"16px"}},e)}],events:{}}},84567:(e,t,r)=>{"use strict";r.d(t,{Z:()=>p});var i=r(743),a=r(5835),n=r(94184),s=r.n(n),o=r(67294),l=r.n(o);function c(){return c=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},c.apply(this,arguments)}function p({title:e,children:t,onClick:r,className:n,heapProps:o}){const p=l().useMemo((()=>r?(0,a.B6)({onClick:r}):{}),[r]);return l().createElement("div",c({className:s()("cl-paper-flags__content",n)},p,o?(0,i.ON)(o):{}),e&&l().createElement("div",{className:"cl-paper-flags__content-title"},e),t&&l().createElement("div",{className:"cl-paper-flags__content-body"},t))}try{p.displayName="CLPaperFlagContentContainer"}catch(e){}},86500:(e,t,r)=>{"use strict";r.d(t,{Z:()=>h});var i=r(75292),a=r(87802),n=r(36347),s=r(78502),o=r(45697),l=r.n(o),c=r(67294),p=r.n(c);function u(){return u=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},u.apply(this,arguments)}function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends p().PureComponent{constructor(...e){super(...e),d(this,"onClick",(e=>{e.preventDefault();const{navId:t,query:r,onClick:s}=this.props,o=document.querySelector(`#${t}`);if(!o)return void n.Z.warn(`Could not find navId "${t}" in the dom`);const{offsetTop:l}=o;if(l>=0){const e=l-100;a.ZP.hasNativeSmoothScrollSupport()?window.scrollTo({top:e,behavior:"smooth"}):window.scrollTo(0,e),o.focus()}const{history:c}=this.context;c.replace((0,i.gY)({path:"",query:r||{},hash:t})),s&&s()}))}render(){const e=this.props,{navId:t,children:r,query:i}=e,a=function(e,t){if(null==e)return{};var r,i,a=function(e,t){if(null==e)return{};var r,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["navId","children","query"]);return p().createElement("a",u({},a,{href:`#${t}`,onClick:this.onClick}),r)}}try{h.displayName="PaperDeepLink"}catch(e){}d(h,"contextTypes",{history:l().instanceOf(s.ZP).isRequired})},76369:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Nn});var i=r(96560),a=r(70042),n=r(87802),s=r(38953),o=r(10194),l=r(94184),c=r.n(l),p=r(67294),u=r.n(p);function d(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class h extends u().Component{constructor(...e){super(...e),d(this,"state",{isVisible:!!(0,a.jU)()&&0!==window.scrollY}),d(this,"onScroll",(()=>{this.setState({isVisible:0!==window.scrollY})}))}componentDidMount(){n.ZP.listenForScroll(this.onScroll)}componentWillUnmount(){n.ZP.stopListeningForScroll(this.onScroll)}render(){const{isVisible:e}=this.state;return u().createElement(s.default,{className:c()(["button__scroll-top",{"button__scroll-top--hidden":!e}]),type:"secondary",icon:u().createElement(o.Z,{icon:"arrow-up",width:"16",height:"24"}),iconPosition:"up",onClick:()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},ariaProps:{"aria-label":(0,i.KF)((e=>e.general.scrollToTop))}})}}try{h.displayName="ScrollToTopButton"}catch(e){}var m,f,y,b=r(98668),g=r(98213),v=r(20673),P=r(95512),E=r(45697),S=r.n(E);function _(){return _=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},_.apply(this,arguments)}class w extends u().PureComponent{constructor(...e){super(...e);const{dispatcher:t}=this.context,r={actionType:v.default.actions.PAPER_NAV_TARGET_ADDED,navId:this.props.id,navLabel:this.props.navLabel};t.isDispatching()?t.dispatchEventually(r):t.dispatch(r)}componentWillUnmount(){this.context.dispatcher.dispatchEventually({actionType:v.default.actions.PAPER_NAV_TARGET_REMOVED,navId:this.props.id})}render(){const e=this.props,{navLabel:t,children:r}=e,i=function(e,t){if(null==e)return{};var r,i,a=function(e,t){if(null==e)return{};var r,i,a={},n=Object.keys(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(i=0;i<n.length;i++)r=n[i],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,["navLabel","children"]);return u().createElement("div",_({},i,{tabIndex:0}),r)}}try{w.displayName="PaperNavTarget"}catch(e){}function O(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}m=w,f="contextTypes",y={dispatcher:S().instanceOf(P.Z).isRequired},(f=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(f))in m?Object.defineProperty(m,f,{value:y,enumerable:!0,configurable:!0,writable:!0}):m[f]=y;let C=function(e){return e.DEFAULT="default",e.EXPERIMENTAL="experimental",e}({});class T extends u().PureComponent{render(){const{cardId:e,testId:t,children:r,navLabel:i,className:a,cardType:n}=this.props,s=this.context.envInfo.isMobile;return u().createElement(w,{id:e,"data-test-id":t,navLabel:i,className:c()({card:!0,card__mobile:s,[`card--type-${n}`]:!0},a)},r)}}try{T.displayName="Card"}catch(e){}function N(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}O(T,"contextTypes",{envInfo:S().instanceOf(g.Z).isRequired}),O(T,"defaultProps",{cardType:C.DEFAULT});class x extends u().PureComponent{render(){const{children:e,willChildrenOwnLayout:t=!1}=this.props,r=this.context.envInfo.isMobile;return u().createElement("div",{className:c()({"card-content":!0,"card-content__mobile":r,"card-content__children-own-layout":t})},e)}}try{x.displayName="CardContent"}catch(e){}N(x,"defaultProps",{willChildrenOwnLayout:!1}),N(x,"contextTypes",{envInfo:S().instanceOf(g.Z).isRequired});class I extends u().PureComponent{render(){const{children:e,className:t}=this.props;return u().createElement("div",{className:c()("card-content-main",t)},e)}}try{I.displayName="CardContentMain"}catch(e){}class D extends u().PureComponent{render(){return u().createElement("div",{className:"card-header-aside"},this.props.children)}}try{D.displayName="CardHeaderAside"}catch(e){}class k extends u().PureComponent{render(){const{title:e,subtitle:t}=this.props;return e?u().createElement("div",{className:"card-header-title"},u().createElement("h2",{className:"card-header-title__title"},e),t&&u().createElement("h5",{className:"card-header-title__subtitle"},t)):null}}try{k.displayName="CardHeaderTitle"}catch(e){}function j(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class A extends u().PureComponent{renderChildren(){const{title:e,subtitle:t,children:r}=this.props;return e?u().createElement(k,{title:e,subtitle:t}):!!r&&r}render(){const e=this.context.envInfo.isMobile,t=this.renderChildren(),r=!!u().Children.toArray(t).find((e=>e.type===D));return u().createElement("div",{className:c()({"card-header":!0,"card-header__mobile":e,"card-header__has-aside":r,"card-header--hidden-border":this.props.shouldHideHeaderBorder})},t)}}try{A.displayName="CardHeader"}catch(e){}j(A,"contextTypes",{envInfo:S().instanceOf(g.Z).isRequired}),j(A,"defaultProps",{shouldHideHeaderBorder:!1});var R=r(54505),L=r(76800),F=r(88598),Z=r(14805);const M=["250","500"];function B({figure:e}){const t=u().useRef(),[r,i]=u().useState(function(e){if(!e||e.endsWith("/"))return e;const t=e.lastIndexOf("/"),r=`${e.slice(0,t)}/`,i=e.slice(t);return M.map(((e,t)=>`${r}${e}px${i} ${t+1}x`)).join(",")}(e.cdnUri)),a=u().useCallback((()=>{i(null)}),[]);return u().useEffect((()=>{const e=t.current;e&&e.complete&&0===e.naturalWidth&&i(null)}),[t]),u().createElement("img",{className:"figure-list__figure-image",srcSet:r,src:e.cdnUri,onError:a,ref:t,alt:e.displayName,"data-test-id":"figure-thumbnail-img",loading:"lazy"})}try{B.displayName="FigureThumbnail"}catch(e){}var Q=r(59044),K=r(25864);const q="undefined"!=typeof ResizeObserver;function H({figures:e,paperId:t,slug:r}){const{envInfo:{isMobile:n}}=(0,F.bp)(),o=n?1:4,[l,p]=u().useState(!1),[d,h]=u().useState((0,a.jU)()&&!q||e.size>o),m=u().useCallback((()=>{h(!1),p(!0)}),[]),f=u().useRef();return u().useLayoutEffect((()=>{if(!q||!f.current)return;const e=new ResizeObserver((0,L.D)((()=>{if(l)return void e.disconnect();const t=!![...f.current.children].find((e=>0===e.clientHeight));t!==d&&h(t)}),100,{maxWait:100,leading:!0,trailing:!0}));return e.observe(f.current),[...f.current.querySelectorAll(".figure-list__figure_link")||[]].forEach((e=>{if(d){const t=e.parentElement.style.overflow;t&&"visible"!==t||(e.style.overflow="hidden");const r=e.parentElement.clientWidth<e.parentElement.scrollWidth||e.parentElement.clientHeight<e.parentElement.scrollHeight;e.parentElement.style.overflow=t,r&&(e.tabIndex=-1)}else e.tabIndex=0})),()=>{e.disconnect()}}),[f.current,l,d]),e.isEmpty()?null:u().createElement("div",{className:"figure-list"},u().createElement("ul",{ref:f,className:c()({"figure-list__list":!0,"figure-list__list--is-capped":!l}),"data-test-id":"figure-list"},e.map(((e,i)=>u().createElement("li",{key:e.uri,className:"figure-list__figure","data-test-id":"figure-list-item"},u().createElement(Q.Z,{to:"PAPER_DETAIL_FIGURE",className:"figure-list__figure_link",onClick:()=>function({paperId:e,figureIndex:t}){(0,K.Z)(Z.Z.create(R.default.FIGURE,{paperId:e,index:t}))}({paperId:t,figureIndex:i}),params:{paperId:t,slug:r,figureIndex:i},tabIndex:0},u().createElement("figure",null,u().createElement("div",{className:"figure-list__figure-thumb"},u().createElement(B,{figure:e})),u().createElement("figcaption",{className:"figure-list__figure-caption"},e.displayName))))))),d&&u().createElement("div",{className:"figure-list__pagination"},u().createElement(s.default,{onClick:m,label:(0,i.KF)((e=>e.paperDetail.figureShowMoreLabel),e.size.toLocaleString())})))}try{H.displayName="FigureList"}catch(e){}var V=r(51313),z=r(53699),U=r(75687),Y=r(41695),G=r(1981),W=r.n(G);class $ extends U.Z{constructor(e,t){super(Y.Z.SCROLL,W().recursive({target:e},t))}static create(e,t){return new $(e,t)}}var J=r(52223);function X(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ee(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const te=250;class re extends u().PureComponent{constructor(...e){super(...e),ee(this,"setLandmarkRef",(e=>{this.landmarkRef=e})),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?X(Object(r),!0).forEach((function(t){ee(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):X(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({wasSeen:!1,top:0,bottom:0},this.getStateFromWeblabStore()),this.context.weblabStore.registerComponent(this,(()=>{this.setState(this.getStateFromWeblabStore())})),this.onScroll=(0,L.D)(this.onScroll.bind(this),te,{leading:!0,maxWait:te,trailing:!0}),this.onResize=(0,L.D)(this.onResize.bind(this),te,{leading:!0,maxWait:te,trailing:!0})}getStateFromWeblabStore(){const{weblabStore:e}=this.context;return{isLoggingEnabled:e.isFeatureEnabled(z.ZP.LogHeapLandmarks)}}onScroll(){this.updateOffsets(this.trackLandmark)}onResize(){this.updateOffsets(this.trackLandmark)}isInViewport(e){const{top:t,bottom:r}=this.state;return r>=e.top&&t<=e.top+e.height}trackLandmark(){const{wasSeen:e,isLoggingEnabled:t}=this.state;if(e)return;if(!t)return;const{target:r,section:i}=this.props,a=(0,V.y9)(document);if(this.isInViewport(a)&&!e){const e=+(100*(a.top/(a.top+a.height+a.bottom)||0)).toFixed(2);(0,K.Z)($.create(r,{section:i,percent:e})),this.setState({wasSeen:!0})}}updateOffsets(e){var t;const r=n.ZP.offsetFromBody(this.landmarkRef)||0,i=(null!=(t=this)&&null!=(t=t.landmarkRef)?t.scrollHeight:t)||0;this.setState({top:r,bottom:r+i},e)}componentDidMount(){this.updateOffsets(this.trackLandmark),n.ZP.listenForScroll(this.onScroll),n.ZP.listenForResize(this.onResize)}componentWillUnmount(){n.ZP.stopListeningForResize(this.onResize),n.ZP.stopListeningForScroll(this.onScroll)}render(){const{isLoggingEnabled:e}=this.state;return u().createElement(u().Fragment,null,e&&u().createElement("span",{key:"landmark",className:"heap-landmark",ref:this.setLandmarkRef}),u().createElement(u().Fragment,{key:"children"},this.props.children))}}try{re.displayName="HeapLandmark"}catch(e){}ee(re,"contextTypes",{weblabStore:S().instanceOf(J.ZP).isRequired});class ie extends u().PureComponent{renderFiguresSection(e,t){return u().createElement(H,{paperId:e.id,slug:e.slug,figures:t})}renderCardContent(e,t){if(!e.isEmpty()){const r=u().createElement(u().Fragment,null,!e.isEmpty()&&this.renderFiguresSection(t,e));return u().createElement(x,{willChildrenOwnLayout:!0},u().createElement(I,null,r))}return null}hasFigures(e){return e.some((e=>"figure"===e.figureType))}hasTables(e){return e.some((e=>"table"===e.figureType))}render(){const{paperDetail:{figures:e,paper:t}}=this.props,r=[],a=[];this.hasFigures(e)&&(r.push((0,i.KF)((e=>e.paperDetail.sectionSubtitles.figures))),a.push((0,i.KF)((e=>e.paperDetail.sectionSubtitles.figures)))),this.hasTables(e)&&(r.push((0,i.KF)((e=>e.paperDetail.sectionSubtitles.tables))),a.push((0,i.KF)((e=>e.paperDetail.sectionSubtitles.tables))));const n=b.jN(r),s=(0,i.KF)((e=>e.paperDetail.sectionSubtitles.extractedContent),n);if(!e.isEmpty()){const r=this.renderCardContent(e,t);return u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:(0,i.KF)((e=>e.paperDetail.tabLabels.extractedContent))},u().createElement(T,{cardId:ie.CARD_ID,navLabel:n},u().createElement(A,{title:s}),r&&r))}return null}}try{ie.displayName="ExtractedContentCard"}catch(e){}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ie,"CARD_ID","extracted");var ae=r(74420),ne=r(32548),se=r(83990),oe=r(59570),le=r(73154),ce=r(74507),pe=r(52254),ue=r(3380),de=r(6883);class he extends u().PureComponent{render(){const{onChangeSelected:e,scorecardStats:t,title:r,value:a}=this.props,n=ae.C.getIntents().filter((({id:e})=>function(e,t){return t.some((t=>{var r;const i=null!=(r=t)&&null!=(r=r.citationIntentCount)?r[e]:r;return t.typeKey===le.F1&&(i&&i>0||e===ae.C.INTENTS.ALL_INTENTS.id)}))}(e,t)));return u().createElement("div",{className:"citation-intent-select"},r&&u().createElement("div",{className:"facet-toggle"},u().createElement("h4",{className:"search-fos-menu__dropdown__title"},r)),u().createElement("ul",{role:"radiogroup",className:"search-fos-menu__dropdown__link-list"},n.map((({id:t})=>u().createElement("li",{className:"search-cite-menu__dropdown__link-list-line",key:t},u().createElement("input",{type:"radio",name:"citeFilter",id:"citeFilter"+t,className:"legacy__input search-cite-menu__dropdown__link-list-line__radio",value:t,onChange:e,checked:t==a,"aria-checked":t===a}),u().createElement("label",{className:"search-cite-menu__dropdown__link-list-line__label",htmlFor:"citeFilter"+t},(0,i.KF)((e=>e.filter[t].label))))))))}}try{he.displayName="CitationIntentSelector"}catch(e){}var me=r(40228),fe=r(5835),ye=r(66929);function be(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ge extends u().PureComponent{constructor(e,...t){super(e,...t),be(this,"onClickCapture",(e=>{e.preventDefault(),this.setState({isDropdownVisible:!1})})),be(this,"_onClickKeyDownCaptureProps",(0,fe.B6)({onClick:this.onClickCapture,overrideKeys:[me.Oy]})),be(this,"onClickDropdown",(()=>{const{disabled:e}=this.props;e||this.setState({isDropdownVisible:!0})})),be(this,"_onClickKeyDownDropdownProps",(0,fe.B6)({onClick:this.onClickDropdown})),be(this,"onChangeSelected",(e=>{const{onChange:t}=this.props;this.setState({isDropdownVisible:!1}),t(e)})),this.state={isDropdownVisible:!1}}render(){const{disabled:e,styleAsFacet:t,title:r,useTitleForAll:a,value:n,scorecardStats:o}=this.props,l=ae.C.getIntents().find((e=>e.id==n)),c=l?(0,i.KF)((e=>e.filter[l.id].label)):"",p=r&&a&&"all"===n?r:c;return u().createElement(ye.default,{disabled:e||!l,className:"search-cite-menu__dropdown",label:p,type:t?s.TYPE.DEFAULT:s.TYPE.PRIMARY,contents:()=>u().createElement(he,{scorecardStats:o,onChangeSelected:this.onChangeSelected,title:r,value:n})})}}try{ge.displayName="CitationIntentDropdown"}catch(e){}be(ge,"defaultProps",{value:ae.C.INTENTS.ALL_INTENTS.id});var ve=r(36898),Pe=r(55181),Ee=r(46962),Se=r(79049),_e=r(58077),we=r(214),Oe=r(97351),Ce=r(78502),Te=r(91517);class Ne extends u().PureComponent{getCitationQueryStore(){return this.props.citationType===ae.Z.CITED_PAPERS?this.context.referenceQueryStore:this.context.citationQueryStore}render(){const{allFilters:e,filters:t,query:r,scorecardStats:a,stats:n,onChangeCitationIntent:o,onChangeYearFilter:l,onHideClick:p}=this.props,d=this.getCitationQueryStore(),h=this.context.envInfo.isMobile,m=n.get("authors"),f=n.get("venues"),y=(0,Pe.Q9)(n.get("fieldsOfStudy"));return u().createElement(Ee.Z,{modalId:null,className:c()({"dropdown-filter-modal":!0,"dropdown-filter-modal__mobile":h}),onHideClick:p},u().createElement("div",{className:"dropdown-filter-modal__container"},u().createElement("div",{className:"dropdown-filter-modal__filters"},u().createElement("div",{className:"dropdown-filter-modal__header"},e||h?(0,i.KF)((e=>e.filterBar.dropdownLabels.allFilters)):(0,i.KF)((e=>e.filterBar.dropdownLabels.moreFilters))),t.contains(ue.kQ.QUERY_TEXT)&&u().createElement(Te.Z,{formId:"citation-search-text-form-modal",suggestionType:de.s.PAPER_CITATION,containerClass:"search-within",placeholder:(0,i.KF)((e=>e.filterCitationBar.searchPlaceholder)),injectQueryStore:d}),t.contains(ue.kQ.DATE)&&u().createElement(Se.Z,{analyticsEvent:R.default.Serp.YEAR_SLIDER,centerBucketPopover:!0,filterCallback:l,filters:n,histogramWidth:200,yearFilter:r.yearFilter,yearBuckets:null,showPresetButtons:!0}),t.contains(ue.kQ.HAS_PDF)&&u().createElement(we.Z,{injectQueryStore:d,forCitations:!0}),t.contains(ue.kQ.CITATION_INTENT)&&u().createElement(he,{title:"Citation Type",value:r.citationIntent||ae.C.INTENTS.ALL_INTENTS.id,onChangeSelected:o,scorecardStats:a}),t.contains(ue.kQ.AUTHOR)&&!!m&&!m.isEmpty()&&u().createElement(_e.Z,{title:(0,i.KF)((e=>e.filterBar.dropdownTitles.author)),filterType:"author",filters:m,injectQueryStore:d,collapsible:!1}),t.contains(ue.kQ.VENUE)&&!!f&&!f.isEmpty()&&u().createElement(_e.Z,{title:(0,i.KF)((e=>e.filterBar.dropdownTitles.venue)),filterType:"venue",filters:f,injectQueryStore:d,collapsible:!1,maxLabelLength:v.default.data.MAX_VENUE_LENGTH}),t.contains(ue.kQ.FIELD_OF_STUDY)&&!!y&&!y.isEmpty()&&u().createElement(_e.Z,{title:(0,i.KF)((e=>e.filterBar.dropdownTitles.fieldOfStudy)),filterType:"fieldsOfStudy",filters:y,collapsible:!1,injectQueryStore:d})),u().createElement("div",{className:"dropdown-filter-modal__footer"},u().createElement(ve.default,{label:(0,i.KF)((e=>e.filterBar.dropdownLabels.clearFilters)),onClick:this.props.onClearFilters}),u().createElement(s.default,{type:"primary",label:(0,i.KF)((e=>e.filterBar.dropdownLabels.applyFilters)),onClick:p}))))}}try{Ne.displayName="DropdownCitationsModal"}catch(e){}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Ne,"contextTypes",{dispatcher:S().instanceOf(P.Z).isRequired,envInfo:S().instanceOf(g.Z).isRequired,history:S().instanceOf(Ce.ZP).isRequired,router:S().object.isRequired,citationQueryStore:S().instanceOf(se.Z),referenceQueryStore:S().instanceOf(Oe.Z)});var xe=r(40059),Ie=r(64826),De=r(63833),ke=r(86532),je=r(13443);function Ae(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Re(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Le extends u().Component{constructor(...e){super(...e),Re(this,"showAllFilters",(()=>{this.setState({isAllFiltersVisible:!0})})),Re(this,"showMoreFilters",(()=>{this.setState({isMoreFiltersVisible:!0})})),Re(this,"showSomeFilters",(()=>{this.setState({isSomeFiltersVisible:!0})})),Re(this,"hideModals",(()=>{this.setState({isAllFiltersVisible:!1,isMoreFiltersVisible:!1,isSomeFiltersVisible:!1})})),Re(this,"onSearchbarFocus",(()=>{this.setState({isSearchbarFocused:!0})})),Re(this,"onSearchbarCondense",(()=>{const e=document.getElementById("search-within-input");e&&e.blur(),this.setState({isSearchbarFocused:!1})})),Re(this,"onChangeYearFilter",((e,t)=>{const{router:r}=this.context;this.getCitationQueryStore().routeToYearRange(e,t,r)})),Re(this,"onClearYearFilter",(()=>{const{router:e}=this.context;this.getCitationQueryStore().routeToYearRangeReset(e)})),Re(this,"onChangeCitationIntent",(e=>{const t=this.getCitationQueryStore();De.Z.changeRouteForPartialQuery(t.getIndependentQuery(),this.state.query.set("citationIntent",e.currentTarget.value),this.context.history,this.context.router)})),Re(this,"onChangeSort",(e=>{if("string"==typeof e){const{router:t}=this.context;this.getCitationQueryStore().routeToSort(e,t)}})),Re(this,"onClearFilters",(()=>{const e=this.getCitationQueryStore();this.onSearchbarCondense(),De.Z.changeRouteForPartialQuery(e.getIndependentQuery(),(0,oe.eM)(this.state.query),this.context.history,this.context.router)})),Re(this,"isDatesSelected",(()=>{const{query:e}=this.state,t=e.yearFilter;return!!t&&!!t.get("min")&&!!t.get("max")})),Re(this,"dateRangeString",(()=>{const{query:e}=this.state,t=e.yearFilter;if(!t)return"";const r=t.get("min"),a=t.get("max");return r?r===a?r.toString():(0,i.KF)((e=>e.filterCitationBar.dateRange),r,a||""):""})),Re(this,"renderDateClearBox",(()=>u().createElement("div",{className:"flex-row-vcenter flex-space-between dropdown-filters__clear-date-container"},u().createElement(ve.default,{label:(0,i.KF)((e=>e.filterCitationBar.clearDate)),onClick:this.onClearYearFilter})))),Re(this,"closeDateDropdown",(()=>{this.setState({isDatePopoverVisible:!1})})),Re(this,"openDateDropdown",(()=>{this.setState({isDatePopoverVisible:!0})})),Re(this,"getCitationCount",((e,t,r)=>r?e.totalResults:this.props.citationType===ae.Z.CITED_PAPERS?t.citedPapers.totalCitations:t.paper.citationStats?t.paper.citationStats.numCitations:0)),Re(this,"getLabel",((e,t)=>e>9999&&t?this.props.citationType===ae.Z.CITED_PAPERS?(0,i.KF)((e=>e.filterReferenceBar.moreThanTenThousand)):(0,i.KF)((e=>e.filterCitationBar.moreThanTenThousand)):e>1?this.props.citationType===ae.Z.CITED_PAPERS?(0,i.KF)((e=>e.filterReferenceBar.exactResultCount),(0,pe.WU)(e)):(0,i.KF)((e=>e.filterCitationBar.exactResultCount),(0,pe.WU)(e)):1===e?this.props.citationType===ae.Z.CITED_PAPERS?(0,i.KF)((e=>e.filterReferenceBar.singleResultCount)):(0,i.KF)((e=>e.filterCitationBar.singleResultCount)):this.props.citationType===ae.Z.CITED_PAPERS?(0,i.KF)((e=>e.filterReferenceBar.noResultCount)):(0,i.KF)((e=>e.filterCitationBar.noResultCount)))),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(r),!0).forEach((function(t){Re(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCitationQueryStore(),{isDatePopoverVisible:!1,isAllFiltersVisible:!1,isMoreFiltersVisible:!1,isSomeFiltersVisible:!1,isSearchbarFocused:!1}),this.getCitationQueryStore().registerComponent(this,(()=>{this.setState(this.getStateFromCitationQueryStore())}))}getCitationQueryStore(){return this.props.citationType===ae.Z.CITED_PAPERS?this.context.referenceQueryStore:this.context.citationQueryStore}getStateFromCitationQueryStore(){const e=this.getCitationQueryStore();return{query:e.getQuery(),queryText:e.getQuery().queryString||"",queryResponse:e.getQueryResponse(),statsResponse:e.getAggregationResponse(),isLoading:e.isLoading(),isFiltering:e.isFiltering(),isAggsLoading:e.isAggsLoading()}}render(){const{paperDetail:e,paperDetail:{citationSortAvailability:t,paper:{scorecardStats:r}}}=this.props,{query:a,queryText:n,queryResponse:o,statsResponse:{stats:l},isDatePopoverVisible:p,isLoading:d,isSearchbarFocused:h,isFiltering:m,isAggsLoading:f}=this.state,y=this.getCitationQueryStore(),b=l.get(ce.Q.AUTHOR.pluralId),g=a.authors.size>0,v=a.venues.size>0,P=a.fieldsOfStudy.size>0,E=a.requireViewablePdf,S=this.isDatesSelected(),_=a.citationIntent,w=P||v,O=w||_||E||S||P||g,C=O||n,T=l.get(ce.Q.AUTHOR.pluralId)&&l.get(ce.Q.AUTHOR.pluralId).size>0,N=l.get(ce.Q.VENUE.pluralId)&&l.get(ce.Q.VENUE.pluralId).size>0,x=l.get("years")&&l.get("years").size>1,I=T||N,D=this.getCitationCount(o,e,!!C),k=this.getLabel(D,!!C),j=S?this.dateRangeString():(0,i.KF)((e=>e.filterBar.dropdownLabels.date)),A=!this.context.envInfo.isMobile,L=x||S,F=m||f||d,Z=(null==t?void 0:t.citingPapers)&&t.citingPapers.includes(je.ZP.RELEVANCE.id)?je.ZP.citationsFilteredWithRelevance():je.ZP.citationsFiltered(),M=function(e){return e.some((e=>{var t,r,i;const a=null==e||null===(t=e.citationIntentCount)||void 0===t?void 0:t.methodology,n=null==e||null===(r=e.citationIntentCount)||void 0===r?void 0:r.background,s=null==e||null===(i=e.citationIntentCount)||void 0===i?void 0:i.result;return e.typeKey===le.F1&&(a&&a>0||n&&n>0||s&&s>0)}))}(r),B=F||0===o.totalResults&&!_||!M;return u().createElement("div",{className:"dropdown-filters__header dropdown-filters-breakpoints__pdp_cite"},u().createElement("div",{className:"dropdown-filters__controls"},d&&C?u().createElement("div",{className:"dropdown-filters__result-count__header"},u().createElement("div",{className:"loading-count flex-row-vcenter",role:"main",id:"main-content"},u().createElement(Ie.Z,{testId:"citation-count-loading"}))):u().createElement("h2",{className:"dropdown-filters__result-count__header dropdown-filters__result-count__citations"},k),u().createElement(xe.Z,{className:c()("flex-row-vcenter","dropdown-filters__header__outer-flex-container",{"dropdown-filters__header__outer-flex-container--mobile":this.context.envInfo.isMobile})},u().createElement(xe.Z,{className:"flex-row-vcenter dropdown-filters__filter-flex-container"},u().createElement(Te.Z,{formId:"citation-search-text-form",containerClass:"search-within",placeholder:(0,i.KF)((e=>e.filterCitationBar.searchPlaceholder)),isSearchbarFocused:h,onSearchbarCondense:this.onSearchbarCondense,onSearchbarFocus:this.onSearchbarFocus,suggestionType:this.props.citationType===ae.Z.CITED_PAPERS?de.s.PAPER_REFERENCE:de.s.PAPER_CITATION,injectQueryStore:y}),h&&u().createElement("div",{className:"dropdown-filters__modal-button"},u().createElement(s.default,{disabled:d,type:s.TYPE.SECONDARY,label:(0,i.KF)((e=>e.filterBar.dropdownLabels.showFilters)),onClick:this.onSearchbarCondense})),!h&&u().createElement(u().Fragment,null,L&&A&&u().createElement(ye.default,{disabled:!S&&!x||F||B,isDropdownShown:p,onHideDropdown:this.closeDateDropdown,onShowDropdown:this.openDateDropdown,className:"dropdown-filters__dates",label:j,type:S?s.TYPE.PRIMARY:s.TYPE.DEFAULT,contents:()=>u().createElement("div",{className:c()({"dropdown-filters__content--disabled":d})},u().createElement(Se.Z,{analyticsEvent:R.default.Serp.YEAR_SLIDER,centerBucketPopover:!0,filterCallback:this.onChangeYearFilter,filters:l,yearFilter:a.yearFilter,yearBuckets:null,showPresetButtons:!0}),S&&this.renderDateClearBox())}),A&&u().createElement(ge,{scorecardStats:r,disabled:B,styleAsFacet:!_,useTitleForAll:!0,title:"Citation Type",dropdownPosition:"bottom-right",value:a.citationIntent,onChange:this.onChangeCitationIntent}),A&&u().createElement(we.Z,{isToggle:!0,disabled:F,injectQueryStore:y,forCitations:!0}),A&&u().createElement(ye.default,{disabled:F||!T,className:"dropdown-filters__author",label:(0,i.KF)((e=>e.filterBar.dropdownLabels.author)),type:g?s.TYPE.PRIMARY:s.TYPE.DEFAULT,contents:()=>u().createElement(_e.Z,{title:(0,i.KF)((e=>e.filterBar.dropdownTitles.author)),filterType:ce.Q.AUTHOR.id,filters:b,collapsible:!1,injectQueryStore:y,hasSelection:g})}),A&&u().createElement("div",{className:"dropdown-filters__modal-button flex-item"},u().createElement(s.default,{disabled:F||!I,className:"dropdown-filters__some_filters",type:w?s.TYPE.PRIMARY:s.TYPE.SECONDARY,label:(0,i.KF)((e=>e.filterBar.dropdownLabels.moreFilters)),onClick:this.showSomeFilters})),A&&u().createElement("div",{className:"dropdown-filters__modal-button flex-item"},u().createElement(s.default,{disabled:F,className:"dropdown-filters__more_filters",type:O?s.TYPE.PRIMARY:s.TYPE.SECONDARY,label:(0,i.KF)((e=>e.filterBar.dropdownLabels.moreFilters)),onClick:this.showMoreFilters})),u().createElement("div",{className:"dropdown-filters__modal-button"},u().createElement(s.default,{disabled:F,className:"dropdown-filters__mobile_filters",type:C?s.TYPE.PRIMARY:s.TYPE.SECONDARY,label:(0,i.KF)((e=>e.filterBar.dropdownLabels.allFilters)),onClick:this.showAllFilters}))),C&&u().createElement(ve.default,{label:"Clear",onClick:this.onClearFilters})),u().createElement(ke.Z,{className:"dropdown-filters__sort-control",onChangeSort:this.onChangeSort,options:Z,sort:a.sort}))),this.state.isSomeFiltersVisible&&!d&&u().createElement(Ne,{filters:ue.U3.startInModal,onChangeCitationIntent:this.onChangeCitationIntent,onChangeYearFilter:this.onChangeYearFilter,onHideClick:this.hideModals,onClearFilters:this.onClearFilters,query:a,scorecardStats:r,stats:l,citationType:this.props.citationType}),this.state.isMoreFiltersVisible&&!d&&u().createElement(Ne,{filters:ue.U3.startInModal.concat(ue.U3.collapseToModal),onChangeCitationIntent:this.onChangeCitationIntent,onChangeYearFilter:this.onChangeYearFilter,onHideClick:this.hideModals,onClearFilters:this.onClearFilters,query:a,scorecardStats:r,stats:l,citationType:this.props.citationType}),this.state.isAllFiltersVisible&&!d&&u().createElement(Ne,{filters:ue.U3.startInModal.concat(ue.U3.startVisible),onChangeCitationIntent:this.onChangeCitationIntent,onChangeYearFilter:this.onChangeYearFilter,onHideClick:this.hideModals,onClearFilters:this.onClearFilters,query:a,scorecardStats:r,stats:l,citationType:this.props.citationType}))}}try{Le.displayName="DropdownCitationsControls"}catch(e){}Re(Le,"contextTypes",{dispatcher:S().instanceOf(P.Z).isRequired,envInfo:S().instanceOf(g.Z).isRequired,history:S().instanceOf(Ce.ZP).isRequired,citationQueryStore:S().instanceOf(se.Z),referenceQueryStore:S().instanceOf(Oe.Z),router:S().object.isRequired});var Fe=r(743),Ze=r(54968),Me=r(99124),Be=r(75292),Qe=r(72504),Ke=r(84567),qe=r(89107),He=r(58109);function Ve(){return Ve=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ve.apply(this,arguments)}function ze(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ue extends u().PureComponent{constructor(...e){super(...e),ze(this,"showHighlyInfluencedPopover",(()=>{this.setState({isPopoverVisible:!0})})),ze(this,"hideHighlyInfluencedPopover",(()=>{this.setState({isPopoverVisible:!1})})),ze(this,"handleBlur",(e=>{e.currentTarget.contains(e.relatedTarget)||this.setState({isPopoverVisible:!1})})),this.state={isPopoverVisible:!1}}renderHighlyInfluencedContext(){const{citationType:e,citedPaperTitle:t}=this.props,r=(0,pe.aF)(t.text,Qe.TRUNCATE_TITLE_LENGTH);return u().createElement(Ke.Z,{title:(0,i.KF)((t=>t.citations.popup[e].title),r),className:"cl-paper-flags__context__content"},u().createElement(He.Z,{content:t=>t.citations.popup[e].content}))}renderHighlyInfluencedCitationBadge(){const{citationType:e,isCompact:t}=this.props;return u().createElement(u().Fragment,null,u().createElement(o.Z,{className:"cl-paper-stats__icon",icon:"scorecard-highly-influential",height:"12",width:"12"}),!t&&u().createElement("span",{className:"cl-paper-stats__hideable-text"},(0,i.KF)((t=>t.citations.highlyInfluenced[e]))))}render(){const{className:e,citation:t,citationType:r,isCompact:a}=this.props,{isPopoverVisible:n}=this.state,{isMobile:s}=this.context.envInfo,o=t.id&&(0,Be.gY)({routeName:"PAPER_DETAIL_BY_ID",params:{paperId:t.id},query:{sort:je.ZP.IS_INFLUENTIAL_CITATION.id},hash:"citing-papers"});return u().createElement("div",Ve({className:c()("cl-paper-stat","cl-paper-stat__collapsable",{"cl-paper-stat__icon-only":a},"cl-paper-flags__highly-influenced__container",e)},(0,Fe.ON)({id:Me.xF,"paper-id":t.id,type:"highlyInfluenced","citation-type":r}),{"data-test-id":"citingPapers"===r?"highlyInfluenced":"highlyInfluential",onFocus:()=>{!s&&this.showHighlyInfluencedPopover()},onBlur:e=>{!s&&this.handleBlur(e)},onMouseEnter:()=>{!s&&this.showHighlyInfluencedPopover()},onMouseLeave:()=>{!s&&this.hideHighlyInfluencedPopover()}}),o?u().createElement("a",{"aria-expanded":!0,"aria-label":(0,i.KF)((e=>e.citations.influential.linkAriaLabel)),href:o,className:"cl-paper-stats__citation-pdp-link"},this.renderHighlyInfluencedCitationBadge()):this.renderHighlyInfluencedCitationBadge(),n&&u().createElement(qe.default,{className:"cl-paper-flags__popover",arrow:Ze.tc.SIDE_TOP_POS_LEFT},this.renderHighlyInfluencedContext()))}}try{Ue.displayName="HighlyInfluencedCitationBadge"}catch(e){}ze(Ue,"contextTypes",{envInfo:E.instanceOf(g.Z).isRequired});var Ye=r(83325),Ge=r(76983),We=r(95130);function $e({citation:e,citationType:t,citedPaperTitle:r}){const{envInfo:a}=(0,F.bp)(),n=a.isMobile,s=e.isReaderAvailable&&!a.isMobile,o=Xe(e)||e.isKey,l=e.id?(0,Be.gY)({routeName:"PAPER_DETAIL_BY_ID",params:{paperId:e.id},hash:"citing-papers"}):null,p=u().createElement(Je,{citation:e}),d=u().createElement(Ue,{citation:e,citationType:t,citedPaperTitle:r,className:c()("cl-paper-stats__badge-hover",{"cl-paper-stats__mobile-badge":n,"cl-paper-stats__badge-with-border":e.isReaderAvailable})}),h=Xe(e)&&u().createElement("li",{"aria-label":(0,pe._6)(e.numCitedBy,(0,i.KF)((e=>e.citations.citation))),className:"cl-paper-stats__item"},l?u().createElement("a",{"aria-label":(0,i.KF)((e=>e.citations.citationLinkAriaLabel)),href:l,className:"cl-paper-stats__citation-pdp-link"},p):p),m=e.isKey&&u().createElement("li",{"aria-label":(0,i.KF)((e=>e.citations.influential.ariaLabel)),className:"cl-paper-stats__item"},d),f=!!e.badges&&e.badges.size>0;return h||m||f?u().createElement("ul",{className:"cl-paper-stats-list","data-test-id":"citation-stats"},h,m,s&&e.id&&u().createElement(We.Z,{paperId:e.id,className:c()({"cl-paper-action__reader-button--no-margin":!o})}),!!f&&!s&&u().createElement("li",{className:"cl-paper-stats__item"},u().createElement(Ge.ZP,{paper:(0,Ye.eU)(e),isCompact:!0}))):null}try{$e.displayName="CitationStats"}catch(e){}function Je({citation:e}){const{envInfo:t}=(0,F.bp)(),r=t.isMobile;return Xe(e)?u().createElement("div",{className:c()("cl-paper-stat",{"cl-paper-stats__mobile-badge":r,"cl-paper-stat__with-border":e.isReaderAvailable})},u().createElement(o.Z,{icon:"cited-by",width:"12",height:"12",className:"cl-paper-stats__icon"}),(0,b.OD)(e.numCitedBy),r&&(0,pe._6)(e.numCitedBy,(0,i.KF)((e=>e.citations.citation)),null,!0)):null}try{Je.displayName="CitationCitedByCountBadge"}catch(e){}function Xe(e){return e.numCitedBy>0}var et=r(69421),tt=r(12309),rt=r(50669),it=r(95738),at=r(28483),nt=r(45807),st=r(78765),ot=r(5622),lt=r(8917),ct=r(86408),pt=r(45130),ut=r(18194);class dt extends p.PureComponent{render(){let e=null;return"undefined"!=typeof window&&window.history&&window.history.length>0&&(e=u().createElement("button",{onClick:()=>window.history.back(),className:"link-button"},(0,i.KF)((e=>e.citations.emptySearchWithin.removeFacetsLabel)))),u().createElement("div",{className:"empty-pdp-box"},u().createElement("p",null,(0,i.KF)((e=>e.citations.emptySearchWithin.text))),e)}}try{dt.displayName="EmptyFilteredCitationsMessage"}catch(e){}var ht=r(3999),mt=r(55739),ft=r(6837),yt=r(5246),bt=r(58365),gt=r(49381),vt=r(78459),Pt=r(90505);function Et(e){const t={paperId:e.paperId,page:e.page,section:e.section,sortOrder:e.sortOrder,clickedPosition:e.paperList.findIndex((t=>t.id===e.clickedPaper.id)),listContext:e.paperList.map((e=>({paperId:e.id,authors:e.authors.map((e=>({name:e.alias.name,ids:e.alias.ids.toJS()}))).toJS()}))).toJS()};(0,Pt.Z)(R.default.PaperDetail.ORDERED_PAPER_LIST_RESULT,t)}var St=r(51261);function _t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function wt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Ot=(0,tt.taggedSoftError)("filteredCitationsList");class Ct extends u().PureComponent{constructor(...e){super(...e),wt(this,"getCitationQueryStore",(()=>this.props.citationType===ae.Z.CITED_PAPERS?this.context.referenceQueryStore:this.context.citationQueryStore)),wt(this,"getStateFromQueryStore",(()=>{const e=this.getCitationQueryStore();return{citationQueryResponse:e.getQueryResponse(),citationIsLoading:e.isLoading(),citationIsFiltering:e.isFiltering(),citationIsSorting:e.isSorting(),citationQueryState:e.getQueryState(),citationQuery:e.getQuery()}})),wt(this,"getStateFromWeblabStore",(()=>{const{weblabStore:e}=this.context;return{shouldDisplayCues:e.isVariationEnabled(ht.ZP.PDPCitationAndReferencePaperCues.KEY,ht.ZP.PDPCitationAndReferencePaperCues.Variation.ENABLE_CITATION_AND_REFERENCE_PAPER_CUES)}})),wt(this,"navigateToCitationPage",(e=>{this.getCitationQueryStore().routeToPage(e,this.context.router),this.props.shouldScrollOnPaginate&&this.scrollOnPaginate(this.props.cardId)})),wt(this,"trackClickCitationLink",(e=>{const{paper:t,citationType:r}=this.props,{citationQueryResponse:i}=this.state,{page:a,sort:n}=i.query,s=i.results;Et({paperId:t.id,section:r===ae.Z.CITING_PAPERS?"inboundCitations":"outboundCitations",sortOrder:n,page:a,paperList:s,clickedPaper:e,swapPosition:void 0})})),wt(this,"scrollOnPaginate",(e=>{const{paperNavStore:t}=this.context,r=t.getNavTarget(e);r?n.ZP.smoothScrollTo(r,(()=>{})):Ot(`Failed to scroll on paginate, getNavTarget did not find target for ${e}`)})),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_t(Object(r),!0).forEach((function(t){wt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_t(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({swapIndex:null},this.getStateFromQueryStore(),{},this.getStateFromWeblabStore()),this.getCitationQueryStore().registerComponent(this,(()=>{this.setState(this.getStateFromQueryStore())})),this.context.weblabStore.registerComponent(this,(()=>{this.setState(this.getStateFromWeblabStore())}))}componentDidMount(){const{citationQueryResponse:e,shouldDisplayCues:t}=this.state,r=e.results;t||r.map(((t,r)=>{const i=(0,et.eC)(t.cues);if(i){const a=(e.query.page-1)*(e.query.pageSize+r);(0,K.Z)(gt.Z.create(R.default.PaperDetail.CueBadge.HAD_CUE_BADGE_NO_DISPLAY,{cueType:i,paperId:t.id,index:a}))}}))}renderCitationsListWithIntents(){const{paper:e}=this.props,{citationQuery:t,citationQueryResponse:r,shouldDisplayCues:i}=this.state,a=r.results;if(a.isEmpty())return null;const n=this.props.citationType;return u().createElement("div",{className:"citation-list__citations"},a.map(((a,s)=>{var o;const l=(0,Ye.eU)(a),c=i?(0,et.eC)(a.cues):null,p=c?null===(o=a.cues.get(c))||void 0===o?void 0:o.get(0):null,d={viewCueBadgeEvent:R.default.PaperDetail.CueBadge.CUE_BADGE_VIEW,viewCuePaperShelfEvent:R.default.PaperDetail.CueBadge.CUE_PAPERS_SHELF_VIEW};return u().createElement(at.ZP,{key:a.id?a.id+s.toString():"",paper:l,eventData:{parentPaper:e,index:s},onClickTitle:!1},u().createElement(mt.Z,null,u().createElement(pt.default,{paper:l,className:"citation-list__paper-row",title:u().createElement(ut.default,{paper:l,onClick:this.trackClickCitationLink,testId:"citation-paper-title",heapProps:{id:Me.bd,"paper-id":a.id,"citation-type":n,"has-intents":a.citationContexts.size>0}}),meta:u().createElement(ct.default,{paper:l,authors:!l.authors.isEmpty()&&u().createElement(nt.default,{paper:l,heapProps:{id:Me.Qi}})}),controls:u().createElement(lt.default,{paper:l,actions:u().createElement(it.default,{paper:l,alert:!1}),cues:!!i&&!!c&&!!p&&u().createElement(bt.Z,{resultPaperId:l.id,cueBadgeData:p,paperIndex:(r.query.page-1)*r.query.pageSize+s,prioritizedCue:c,cueEventTargets:d}),stats:u().createElement($e,{citation:a,citationType:n,citedPaperTitle:e.title}),flags:u().createElement(Qe.default,{citation:a,citationType:n,citedPaperTitle:e.title,shouldRenderIntents:!0,className:"cl-paper-controls__flags"})}),abstract:u().createElement(vt.Z,{paper:l,query:t.queryString}),footer:u().createElement(ot.Z,{paper:l})})),u().createElement(ft.Z,null,u().createElement(st.default,{paper:l,title:u().createElement(ut.default,{paper:l,onClick:this.trackClickCitationLink,testId:"citation-paper-title",heapProps:{id:Me.bd,"paper-id":a.id,"citation-type":n,"has-intents":a.citationContexts.size>0}}),meta:u().createElement(ct.default,{paper:l,shouldStackMeta:!0,authors:!l.authors.isEmpty()&&u().createElement(nt.default,{paper:l,heapProps:{id:Me.Qi}})}),controls:a.numCitedBy>0&&u().createElement(lt.default,{paper:l,actions:!1,stats:u().createElement($e,{citation:a,citationType:n,citedPaperTitle:e.title})}),className:"citation-list__paper-card",header:u().createElement(Qe.default,{citation:a,citationType:n,citedPaperTitle:e.title,shouldRenderIntents:!0}),footer:u().createElement(ot.Z,{paper:l}),abstract:u().createElement(vt.Z,{paper:l,query:t.queryString,className:"tldr__paper-card"})})))})))}renderEmptyMessage(){return u().createElement(dt,null)}render(){const e=this.context.envInfo.isMobile,{citationQueryResponse:t,citationIsFiltering:r,citationIsSorting:i,citationIsLoading:a}=this.state,n=t.totalPages>1?u().createElement("div",{className:"citation-pagination flex-row-vcenter"},a?u().createElement("span",{className:"flex-row-vcenter citation-loading"},u().createElement(Ie.Z,null)," Loading"):null,u().createElement(rt.default,{size:e?rt.SIZE.LARGE:rt.SIZE.DEFAULT,maxVisiblePageButtons:e?4:5,pageNumber:t.query.page,onPaginate:this.navigateToCitationPage,totalPages:Math.min(ae.C.MAX_CITATION_PAGES,t.totalPages)})):null,s=this.state.citationQueryResponse.totalResults>0?this.renderCitationsListWithIntents():this.renderEmptyMessage(),o=c()("paper-detail-content-card","result-page",{"is-filtering":a||r||i});return u().createElement("div",{className:o,"data-test-id":this.props.citationType===ae.Z.CITING_PAPERS?"cited-by":"reference"},s,n)}}try{Ct.displayName="FilteredCitationsList"}catch(e){}wt(Ct,"contextTypes",{api:S().instanceOf(ne.Z).isRequired,citationQueryStore:S().instanceOf(se.Z),referenceQueryStore:S().instanceOf(Oe.Z),envInfo:S().instanceOf(g.Z).isRequired,paperNavStore:S().instanceOf(yt.ZP).isRequired,router:S().object.isRequired,weblabStore:S().instanceOf(J.ZP).isRequired});const Tt=(0,St.Z)(R.default.PaperDetail.Citations)(Ct);function Nt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function xt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class It extends u().PureComponent{constructor(...e){super(...e),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Nt(Object(r),!0).forEach((function(t){xt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Nt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCitationQueryStore(),{},this.getStateFromPaperNavStore()),this.getCitationQueryStore().registerComponent(this,(()=>{this.setState(this.getStateFromCitationQueryStore())})),this.context.paperNavStore.registerComponent(this,(()=>{this.setState(this.getStateFromPaperNavStore())}))}getCardId(){return this.props.citationType===ae.Z.CITED_PAPERS?"cited-papers":"citing-papers"}getCitationQueryStore(){return this.props.citationType===ae.Z.CITED_PAPERS?this.context.referenceQueryStore:this.context.citationQueryStore}getPaperCount(){const e=this.props.paperDetail,t=e.paper.citationStats?e.paper.citationStats.numCitations:0;return this.props.citationType===ae.Z.CITED_PAPERS?e.citedPapers.totalCitations:t}getNavLabel(){const e=this.getPaperCount();return this.props.citationType===ae.Z.CITED_PAPERS?(0,i.BT)((e=>e.paperDetail.tabLabels.referencedPapers),e):(0,i.BT)((e=>e.paperDetail.tabLabels.citingPapers),e)}getStateFromCitationQueryStore(){return{isAggregationsLoaded:this.getCitationQueryStore().isAggregationsLoaded()}}getStateFromPaperNavStore(){const e=this.context.paperNavStore,t=e.navItems.get(this.getCardId());return{isVisibleOrActive:t&&(e.isItemVisible(t)||e.isItemActive(t))}}componentDidUpdate(){const{isVisibleOrActive:e,isAggregationsLoaded:t}=this.state,{paperDetail:{paper:r}}=this.props;r.id&&e&&!t&&setTimeout((()=>{this.props.citationType===ae.Z.CITED_PAPERS?this.context.api.searchReferencePaperAggregations(r.id):this.context.api.searchCitationPaperAggregations(r.id)}),0)}render(){const{paper:e}=this.props.paperDetail,t=this.getNavLabel(),r=this.getCardId();return u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:(0,i.KF)((e=>e.paperDetail.sectionTitles.referencedPapers))},u().createElement(T,{cardId:r,navLabel:t,className:r},u().createElement(A,null,u().createElement(Le,{paperDetail:this.props.paperDetail,citationType:this.props.citationType})),u().createElement(x,null,u().createElement(Tt,{name:this.props.citationType,cardId:r,shouldScrollOnPaginate:!0,paper:e,citationType:this.props.citationType}))))}}try{It.displayName="FilteredCitationsCard"}catch(e){}xt(It,"contextTypes",{api:S().instanceOf(ne.Z).isRequired,weblabStore:S().instanceOf(J.ZP).isRequired,paperNavStore:S().instanceOf(yt.ZP).isRequired,citationQueryStore:S().instanceOf(se.Z),referenceQueryStore:S().instanceOf(Oe.Z)});var Dt=r(87493),kt=r(79691),jt=r(29389),At=r(73935),Rt=r.n(At);function Lt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ft extends u().PureComponent{constructor(...e){super(...e),Lt(this,"portalNode",void 0),this.portalNode=null}componentWillUnmount(){this.destroyPortalNode()}createPortalNode(){this.destroyPortalNode();const e=document.createElement("div");return e.className="preview-box__portal",document.body&&document.body.appendChild(e),this.portalNode=e,e}destroyPortalNode(){const e=this.portalNode;if(!e)return;const{parentNode:t}=e;t&&(t.removeChild(e),this.portalNode=null)}render(){const{topPx:e,heightPx:t,leftPx:r,position:i,widthPx:a,theme:n,children:s,className:o,isVisible:l,usePortal:p}=this.props,d=u().createElement("div",{className:c()({"preview-box__anchor-point":!0,"preview-box__is-visible":l}),style:{top:`${e}px`,left:`${r}px`}},u().createElement("div",{className:c()({"preview-box":!0,[`preview-box__theme-${n||""}`]:!!n,[`preview-box__position-${i}`]:!0,[o||""]:!!o}),style:{height:"number"==typeof t&&t>=0?`${t}px`:void 0,width:"number"==typeof a&&a>=0?`${a}px`:void 0}},u().createElement("div",{className:"preview-box__content"},s)));if(p){const e=this.portalNode||this.createPortalNode();return Rt().createPortal(d,e)}return d}}try{Ft.displayName="PreviewBox"}catch(e){}function Zt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Lt(Ft,"defaultProps",{isVisible:!0,usePortal:!0});class Mt extends p.PureComponent{constructor(...e){super(...e),Zt(this,"onMouseEnter",(()=>{clearTimeout(this.showTimer),clearTimeout(this.hideTimer),this.showTimer=setTimeout((()=>{this.showPreview()}),this.props.showDelayMs)})),Zt(this,"onMouseLeave",(()=>{clearTimeout(this.hideTimer),clearTimeout(this.showTimer),this.hideTimer=setTimeout((()=>{this.hidePreview()}),this.props.hideDelayMs)})),Zt(this,"getRef",(e=>{this.ref=e})),this.state={boxPosition:{},isPreviewShown:!1},this.ref=null,this.hideTimer=null,this.showTimer=null}showPreview(){"function"==typeof this.props.onShow&&this.props.onShow(),this.setState((()=>({boxPosition:this.calculateBoxPosition(),isPreviewShown:!0})))}hidePreview(){this.setState((()=>({isPreviewShown:!1})))}calculateBoxPosition(){const e=n.ZP.getViewportSize();if(!this.ref||!e||!window)return{position:"top-left",topPx:0,leftPx:0};const t=this.ref.getBoundingClientRect(),r=t.y+t.height/2+window.scrollY<window.scrollY+e.height/2?"bottom":"top",i=t.x+t.width/2+window.scrollX,a=window.scrollX+e.width/3,s=window.scrollX+e.width/3*2;return{position:`${r}-${i<a?"right":s<i?"left":"center"}`,topPx:("top"===r?t.top:t.top+t.height)+window.scrollY,leftPx:t.left+t.width/2+window.scrollX}}renderPreviewBox(){const{previewBox:e}=this.props,{boxPosition:t}=this.state;return u().Children.toArray(e).find((e=>e.type!==Ft))?u().createElement(Ft,t,e):u().cloneElement(e,t)}render(){const{isPreviewShown:e}=this.state;return u().createElement("span",{className:"preview-box__target",ref:this.getRef,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave},this.props.children,e&&this.renderPreviewBox())}}try{Mt.displayName="PreviewBoxTarget"}catch(e){}function Bt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Qt(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Zt(Mt,"propTypes",{previewBox:S().node.isRequired,children:S().node.isRequired,onShow:S().func,hideDelayMs:S().number}),Zt(Mt,"defaultProps",{hideDelayMs:200,showDelayMs:150});class Kt extends u().PureComponent{constructor(...e){super(...e),Qt(this,"handleHover",(()=>{const e=jt.Z.create(R.default.PaperDetail.Abstract.KEY_RESULT_HOVER,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Bt(Object(r),!0).forEach((function(t){Qt(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Bt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.context.heapPropsChain,{paperId:this.props.paperDetail.paper.id}));(0,K.Z)(e)})),Qt(this,"truncateContent",(e=>{const t=e.trim().split(" "),r=(0,i.KF)((e=>e.paperDetail.abstract.highlight.paragraphEllipsis));return r+t.slice(0,49).join(" ")+r})),Qt(this,"getPDFLink",(()=>{const{relatedPages:e,paperDetail:t}=this.props,r=t.paper.primaryPaperLink;return r&&Dt.S4(r.url)&&e&&e.length>0?`${r.url}#page=${e[0]}`:null}))}renderPreviewBox(){const{content:e}=this.props,t=this.getPDFLink();return u().createElement("div",{className:"entity-preview-box abstract-result__paragraph-preview","data-test-id":"entity-preview-box"},u().createElement("div",{className:"entity-preview-box-hover-text abstract-result__related-paragraph__box"},u().createElement("div",{className:"abstract-result__related-paragraph__title"},(0,i.KF)((e=>e.paperDetail.abstract.highlight.paragraphLabel))),u().createElement("div",{className:"abstract-result__related-paragraph__text"},this.truncateContent(e)),t&&u().createElement(kt.Z,{"data-heap-id":"paper-abstract-highlight-related-pdf-link-click",href:t,className:"abstract-result__related-paragraph__pdf-link"},u().createElement("div",{className:"abstract-result__related-paragraph__pdf-link__text"},(0,i.KF)((e=>e.paperDetail.abstract.highlight.pdfLinkLabel)),u().createElement(o.Z,{icon:"arrow-lite",className:"abstract-result__related-paragraph__pdf-link__arrow",height:"12",width:"12"})))))}render(){return u().createElement(Mt,{previewBox:this.renderPreviewBox(),onShow:this.handleHover,children:this.props.previewTarget})}}try{Kt.displayName="PaperAbstractHighlightHover"}catch(e){}const qt="result_label",Ht="method_label";var Vt=r(35369);const zt=Vt.ZP.Map({[qt]:"key-result__highlight",[Ht]:"key-method__highlight"});class Ut extends u().PureComponent{renderHighlightedAbstract(e){const{paperDetail:t,skipperAbstractData:r,sentenceTypes:i}=this.props;let a=0;const n=[],s=r.sentences.filter((e=>e.label&&i.has(e.label)));for(let r=0;r<s.length;++r){const i=s[r],o=i.startIndex;let l=i.endIndex;if(0==r&&l>e.length&&(l=e.length),0!=o&&(n.push(e.slice(a,o)),o>e.length))return n;if(!(o<e.length&&l<=e.length))return n;{const s=u().createElement("mark",{className:zt.get(i.label),key:r+.5},e.slice(o,l));n.push(i.paragraph?u().createElement(Kt,{key:r+.75,relatedPages:i.relatedPages,paperDetail:t,content:i.paragraph,previewTarget:s}):s),a=l}}return a<e.length&&n.push(e.slice(a,e.length)),n}render(){const{text:e}=this.props;return u().createElement(u().Fragment,null,u().createElement("div",{className:"tldr-abstract__pill"},u().createElement("span",{className:"tldr-abstract-replacement__pill"},(0,i.KF)((e=>e.tldr.abstractLabel)))),this.renderHighlightedAbstract(e))}}try{Ut.displayName="PaperAbstractHighlightExpanded"}catch(e){}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Ut,"defaultProps",{sentenceTypes:new Set});var Yt=r(41143),Gt=r.n(Yt);function Wt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function $t(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Jt extends u().PureComponent{constructor(e,...t){super(e,...t),$t(this,"trackAbstractHighlightEvent",(e=>{const t=Z.Z.create(e,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Wt(Object(r),!0).forEach((function(t){$t(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Wt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.context.heapPropsChain,{paperId:this.props.paperDetail.paper.id}));(0,K.Z)(t)})),$t(this,"onClickMethods",(()=>{const{isMethodsHighlighted:e,sentenceTypes:t}=this.state;e?t.delete(Ht):t.add(Ht),this.setState({isMethodsHighlighted:!e,sentenceTypes:new Set(t)},(()=>{this.state.isMethodsHighlighted?this.trackAbstractHighlightEvent(R.default.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_METHODS_ON):this.trackAbstractHighlightEvent(R.default.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_METHODS_OFF)}))})),$t(this,"onClickResults",(()=>{const{isResultsHighlighted:e,sentenceTypes:t}=this.state;e?t.delete(qt):t.add(qt),this.setState({isResultsHighlighted:!e,sentenceTypes:new Set(t)},(()=>{this.state.isResultsHighlighted?this.trackAbstractHighlightEvent(R.default.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_RESULTS_ON):this.trackAbstractHighlightEvent(R.default.PaperDetail.Abstract.HIGHLIGHT_TOGGLE_RESULTS_OFF)}))})),$t(this,"renderHighlightToggle",(e=>{const{isMethodsHighlighted:t,isResultsHighlighted:r}=this.state,a=e.find((e=>e.label===Ht)),n=e.find((e=>e.label===qt));return u().createElement("div",{className:"paper-detail__abstract__highlight__toggle"},u().createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons__label"},u().createElement(o.Z,{icon:"highlighter",width:"14",height:"14",className:"paper-detail__abstract__highlight__toggle__buttons__label__icon"}),u().createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons__label__text"},(0,i.KF)((e=>e.paperDetail.abstract.highlight.highlightToggleLabel)))),u().createElement("span",{className:"paper-detail__abstract__highlight__toggle__buttons"},a&&u().createElement(s.default,{className:c()({abstract__highlight__toggle__button:!0,abstract__highlight__toggle__button__method__on:t}),label:(0,i.KF)((e=>e.paperDetail.abstract.highlight.methodsToggleLabel)),onClick:this.onClickMethods}),n&&u().createElement(s.default,{className:c()({abstract__highlight__toggle__button:!0,abstract__highlight__toggle__button__result__on:r}),label:(0,i.KF)((e=>e.paperDetail.abstract.highlight.resultsToggleLabel)),onClick:this.onClickResults})))}));const{paperDetail:r}=this.props,a=r.skipperExperiments.dataFor("paper-abstract-highlight-v2");Gt()(a,"experiment data must be present");const n=a.sentences.find((e=>e.label===qt||e.label===Ht)),l=n&&n.label;this.state={skipperAbstractData:a,sentenceTypes:new Set([l]),isResultsHighlighted:l===qt,isMethodsHighlighted:l===Ht}}render(){const{skipperAbstractData:e,sentenceTypes:t}=this.state,{paperDetail:r}=this.props;return u().createElement("div",{"data-test-id":"abstract-text"},u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:"Abstract"}),this.renderHighlightToggle(e.sentences),u().createElement(Ut,{skipperAbstractData:e,text:e.abstract,paperDetail:r,sentenceTypes:t}))}}try{Jt.displayName="PaperAbstractHighlight"}catch(e){}var Xt=r(2567),er=r(45393),tr=r(62937);function rr({paperDetail:e}){const t=e.paper.authors.map((e=>e.alias)),{envInfo:r}=(0,F.bp)();return u().createElement("div",{className:c()({"pdp-author-claim":!0,"pdp-author-claim--is-mobile":r.isMobile})},u().createElement("div",{className:"pdp-author-claim__headline"},(0,i.KF)((e=>e.paperDetail.authorClaim.headline))),u().createElement("ul",{className:"pdp-author-claim__author-list"},t.map((e=>{const t=(0,Xt.M8)(e);return t?u().createElement("li",{id:t,className:"pdp-author-claim__author-list-item"},e.optIsClaimed?u().createElement(er.default,{className:"pdp-author-claim__claimed-author",icon:u().createElement(tr.Z,{sizePx:12}),label:e.name}):u().createElement(Q.Z,{to:"AUTHOR_CLAIM",params:{authorId:t,slug:e.slug},className:"pdp-author-claim__claim-link"},u().createElement(s.default,{className:"pdp-author-claim__author-button",label:e.name}))):null}))))}try{rr.displayName="PaperDetailAuthorClaim"}catch(e){}var ir=r(19244),ar=r(3724);function nr(){return u().createElement("div",{className:"ai-powered-tag"},u().createElement("div",{className:"ai-powered-tag__label"},(0,i.KF)((e=>e.aiPoweredTag.label))))}try{nr.displayName="AIPoweredTag"}catch(e){}function sr(){return sr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},sr.apply(this,arguments)}function or({display:e,openNewTab:t,className:r}){const a={};return t&&(a.target="_blank"),u().createElement("span",{className:c()("beta-tag",`beta-tag__display__${e}`,r)},u().createElement(Q.Z,sr({to:"FAQ_ROOT",hash:"beta"},a),u().createElement(u().Fragment,null,(0,i.KF)((e=>e.betaTag.label)))))}try{or.displayName="BetaTag"}catch(e){}var lr=r(90634),cr=r(30728);function pr({paperLab:e}){const t=u().useMemo((()=>e.shadowRootId?e.shadowRootId:e.html?"lab-content__"+(0,cr.crc32)(e.html):null),[e]),r=u().useMemo((()=>{var r;const i=t&&"undefined"!=typeof document&&(null===(r=document.getElementById(t))||void 0===r?void 0:r.innerHTML);return(0,lr.HD)(i)?i:e.html}),[t,e]);return u().useEffect((()=>{var e;const r=!!t&&(null===(e=document.getElementById(t))||void 0===e?void 0:e.querySelector("template[data-shadow-root-id]"));r instanceof window.HTMLTemplateElement&&function(e){const t=e.parentElement;if(!t)return;const r=e.getAttribute("shadowrootmode")||"open",i=t.attachShadow({mode:r,delegatesFocus:!0});e.remove(),i.appendChild(e.content.cloneNode(!0)),i.querySelectorAll("script").forEach((e=>{const t=document.createElement("script");t.textContent=e.textContent,e.replaceWith(t)}))}(r)}),[t]),(0,lr.HD)(r)?u().createElement("div",{id:t||void 0,className:"lab__content",dangerouslySetInnerHTML:{__html:r}}):null}try{pr.displayName="LabContent"}catch(e){}var ur=r(10242);function dr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function hr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const mr="paper-qa";class fr extends u().PureComponent{constructor(...e){super(...e),hr(this,"componentDidMount",(()=>{this.isQAEligibleToShowAndLoaded()&&(0,K.Z)(gt.Z.create(R.default.PaperDetail.QA.IMPRESSION))})),hr(this,"isQAEligibleToShowAndLoaded",(()=>{const{loadedPaperId:e,paperQALab:t}=this.state,{paperDetail:{paper:r}}=this.props;return Boolean(e)&&r.id===e&&!(null==t||!t.html)})),hr(this,"getStateFromPaperLabsStore",(()=>{var e;const t=this.context.paperLabsStore,r=null!==(e=t.getLabs().find((e=>e.key===mr)))&&void 0!==e?e:null;return{loadedPaperId:t.getPaperId(),paperQALab:r}})),hr(this,"onClickContact",(e=>{e.preventDefault(),this.context.dispatcher.dispatch((0,ar.K)({id:ir.Z.FEEDBACK}))})),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(r),!0).forEach((function(t){hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):dr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromPaperLabsStore()),this.context.paperLabsStore.registerComponent(this,(()=>{this.setState(this.getStateFromPaperLabsStore())}))}render(){if(!this.isQAEligibleToShowAndLoaded())return null;const e=this.state.paperQALab;return u().createElement(re,null,u().createElement(T,{cardId:fr.CARD_ID,navLabel:(0,i.KF)((e=>e.paperDetail.tabLabels.paperQA)),cardType:C.EXPERIMENTAL,className:"paper-qa"},u().createElement(A,{shouldHideHeaderBorder:!0},u().createElement(k,{title:u().createElement("div",{className:"paper-qa__title"},u().createElement("div",{className:"paper-qa__title__text"},(0,i.KF)((e=>e.paperDetail.sectionTitles.paperQA))),u().createElement("div",{className:"paper-qa__title__tag"},u().createElement(or,{display:"tag",openNewTab:!0})),u().createElement("div",{className:"paper-qa__title__tag"},u().createElement(nr,null)))})),u().createElement(x,null,u().createElement("div",{className:"paper-qa__content","data-test-id":"paper-qa"},u().createElement(pr,{paperLab:e}),u().createElement("div",{className:"paper-qa__content__footer"},u().createElement("div",{className:"paper-qa__content__footer__disclaimer"},u().createElement(He.Z,{content:e=>e.paperDetail.paperQA.disclaimerHtml})),u().createElement("div",{className:"paper-qa__content__footer__feedback"},u().createElement("span",null,(0,i.KF)((e=>e.paperDetail.paperQA.feedback))+" "),u().createElement(ve.default,{className:"paper-qa__content__footer__feedback__link",label:(0,i.KF)((e=>e.paperDetail.paperQA.contactUsLink)),onClick:this.onClickContact})))))))}}try{fr.displayName="PaperQACard"}catch(e){}hr(fr,"contextTypes",{dispatcher:S().instanceOf(P.Z).isRequired,paperLabsStore:S().instanceOf(ur.Z).isRequired,weblabStore:S().instanceOf(J.ZP).isRequired}),hr(fr,"CARD_ID","paper-qa");var yr=r(46332),br=r(67876),gr=r(5436),vr=r(86500);function Pr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Er(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Sr extends u().PureComponent{constructor(...e){super(...e),Er(this,"onClickDeepLink",(()=>{const{citationQueryStore:e,router:t,history:r}=this.context,{citationIntent:i}=this.props,{query:a}=this.state,n=i===ae.C.ALL?je.ZP.IS_INFLUENTIAL_CITATION.id:je.ZP.RELEVANCE.id;De.Z.changeRouteForPartialQuery(e.getIndependentQuery(),a.set("citationIntent",i).set("sort",n),r,t)})),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Pr(Object(r),!0).forEach((function(t){Er(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Pr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCitationQueryStore()),this.context.citationQueryStore.registerComponent(this,(()=>{this.setState(this.getStateFromCitationQueryStore())}))}getStateFromCitationQueryStore(){return{query:this.context.citationQueryStore.getQuery(),queryText:this.context.citationQueryStore.getQuery().queryString||"",queryResponse:this.context.citationQueryStore.getQueryResponse(),statsResponse:this.context.citationQueryStore.getAggregationResponse(),isLoading:this.context.citationQueryStore.isLoading(),isFiltering:this.context.citationQueryStore.isFiltering(),isAggsLoading:this.context.citationQueryStore.isAggsLoading()}}render(){const{title:e,intentCount:t,isKeyCitationType:r,navId:a}=this.props,n=r?"scorecard-citation__key-title":"scorecard-citation__title";return u().createElement("div",{className:"scorecard-citation__metadata"},u().createElement("div",{className:"scorecard-citation__metadata__stat"},u().createElement(vr.Z,{navId:a,onClick:this.onClickDeepLink},u().createElement("div",{className:n},e)),u().createElement("span",null,r&&u().createElement(Q.Z,{"aria-label":(0,i.KF)((e=>e.paperDetail.scorecard.highlyInfluential.faqAriaLabel)),to:"FAQ_ROOT",hash:"influential-citations"},u().createElement(o.Z,{icon:"information",className:"scorecard-citation__influential-citations-info"})))),u().createElement("div",{className:"scorecard-citation__metadata-item"},t.toLocaleString()))}}try{Sr.displayName="CitationIntentItem"}catch(e){}function _r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function wr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Er(Sr,"contextTypes",{citationQueryStore:S().instanceOf(se.Z).isRequired,history:S().instanceOf(Ce.ZP).isRequired,router:S().object.isRequired});class Or extends u().PureComponent{constructor(...e){super(...e),wr(this,"onClick",(()=>{const{onClick:e}=this.props;e&&e()}))}render(){const{headline:e,description:t,tooltip:r,background:i,type:a}=this.props,n=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(r),!0).forEach((function(t){wr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_r(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({className:c()({scorecard__stat:!0,[`scorecard__${a}`]:!0})},(0,Fe.ON)({id:Me.ff,type:a}),{"data-test-id":"scorecard-"+a,onClick:this.onClick});return u().createElement("div",n,i&&u().createElement("div",{className:"scorecard__background"},i),u().createElement("div",{className:"scorecard-stat__body","data-test-id":"scorecard-body"},e&&u().createElement("span",{className:"scorecard-stat__headline"},e),r&&u().createElement("div",{className:"scorecard-stat__tooltip"},r),t&&u().createElement("div",{className:"scorecard__description"},t)))}}try{Or.displayName="ScorecardStatBase"}catch(e){}var Cr=r(78198);function Tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Nr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class xr extends u().PureComponent{constructor(...e){super(...e),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Tr(Object(r),!0).forEach((function(t){Nr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Tr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromCitationQueryStore(),{},this.getStateFromPaperNavStore()),this.context.citationQueryStore.registerComponent(this,(()=>{this.setState(this.getStateFromCitationQueryStore())})),this.context.paperNavStore.registerComponent(this,(()=>{this.setState(this.getStateFromPaperNavStore())}))}getStateFromCitationQueryStore(){return{isAggregationsLoaded:this.context.citationQueryStore.isAggregationsLoaded()}}getStateFromPaperNavStore(){const e=this.context.paperNavStore,t=e.navItems.get(xr.CARD_ID);return{isVisibleOrActive:t&&(e.isItemVisible(t)||e.isItemActive(t))}}componentDidUpdate(){const{isVisibleOrActive:e,isAggregationsLoaded:t}=this.state,{paperDetail:{paper:r}}=this.props;r.id&&e&&!t&&setTimeout((()=>{this.context.api.searchCitationPaperAggregations(r.id)}),0)}render(){var e;const{paper:t}=this.props.paperDetail,r=(0,i.BT)((e=>e.paperDetail.tabLabels.citingPapers),(null===(e=t.citationStats)||void 0===e?void 0:e.numCitations)||0);return u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:(0,i.KF)((e=>e.paperDetail.sectionTitles.citingPapers))},u().createElement(T,{cardId:xr.CARD_ID,navLabel:r,className:"citing-papers"},u().createElement(A,null,u().createElement(Le,{paperDetail:this.props.paperDetail,citationType:ae.Z.CITING_PAPERS})),u().createElement(x,null,u().createElement(Tt,{name:ae.Z.CITING_PAPERS,cardId:xr.CARD_ID,shouldScrollOnPaginate:!0,paper:t,citationType:ae.Z.CITING_PAPERS}))))}}try{xr.displayName="CitingPapersCard"}catch(e){}function Ir(){return Ir=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ir.apply(this,arguments)}Nr(xr,"contextTypes",{api:S().instanceOf(ne.Z).isRequired,weblabStore:S().instanceOf(J.ZP).isRequired,paperNavStore:S().instanceOf(yt.ZP).isRequired,citationQueryStore:S().instanceOf(se.Z).isRequired}),Nr(xr,"CARD_ID","citing-papers");class Dr extends u().PureComponent{constructor(...e){super(...e),this.state={navId:xr.CARD_ID}}componentDidMount(){const{stat:{typeKey:e}}=this.props;(0,K.Z)(gt.Z.create(R.default.PaperDetail.SCORECARD_IMPRESSION,{scorecardType:e}))}renderHeadline(){var e;const{paperDetail:t}=this.props,r=(null===(e=t.paper.citationStats)||void 0===e?void 0:e.numCitations)||0;return u().createElement(u().Fragment,null,u().createElement("span",{className:"scorecard-stat__headline__dark"},(0,i.BT)((e=>e.paperDetail.scorecard.citedBy.headline),r)))}renderKeyCitation(){const e=this.props.stat.keyCitationCount,t=(0,i.KF)((e=>e.paperDetail.scorecard.highlyInfluential.title));return u().createElement(Sr,{title:t,intentCount:e,isKeyCitationType:!0,navId:this.state.navId,citationIntent:ae.C.ALL})}renderCitationIntents(){const e=this.props.stat.citationIntentCount,t=e=>e>0;return u().createElement("div",{className:"scorecard-citation"},t(e.background)&&u().createElement(Sr,{title:(0,i.KF)((e=>e.paperDetail.scorecard.citationIntent.background)),intentCount:e.background,navId:this.state.navId,citationIntent:ae.C.BACKGROUND}),t(e.methodology)&&u().createElement(Sr,{title:(0,i.KF)((e=>e.paperDetail.scorecard.citationIntent.methodology)),intentCount:e.methodology,navId:this.state.navId,citationIntent:ae.C.METHODOLOGY}),t(e.result)&&u().createElement(Sr,{title:(0,i.KF)((e=>e.paperDetail.scorecard.citationIntent.result)),intentCount:e.result,navId:this.state.navId,citationIntent:ae.C.RESULT}))}renderDescription(){const e=this.props.stat.keyCitationCount>0;return u().createElement(u().Fragment,null,e&&this.renderKeyCitation(),this.renderCitationIntents(),this.renderCitationPageButton())}renderCitationPageButton(){return u().createElement(vr.Z,{className:"scorecard-stat__headline__view-all",navId:"citing-papers"},u().createElement(s.default,Ir({className:"scorecard-stat__headline__view-all_btn",type:s.TYPE.SECONDARY,size:s.SIZE.DEFAULT,label:(0,i.KF)((e=>e.paperDetail.scorecard.highlyInfluential.viewAll))},(0,Cr.YC)({key:"view_all"}))))}render(){return u().createElement(Or,{type:"citation-intent",headline:this.renderHeadline(),description:this.renderDescription()})}}try{Dr.displayName="HighlyInfluentialScorecardStat"}catch(e){}function kr(){return kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},kr.apply(this,arguments)}function jr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Ar=function(e){return e.CLOSE="close",e.READY="ready",e.READY_ACK="ready-ack",e.PAPER="paper",e.PROMPT_SUBMIT="prompt-submit",e}(Ar||{});const Rr="paper-qa-pairwise";class Lr extends u().Component{constructor(...e){super(...e),jr(this,"_bc",void 0),jr(this,"_contentRef",null),jr(this,"state",{contentWidthPx:null,placeholderRect:null}),jr(this,"handleBCMessage",(e=>{var t;switch(null===(t=e.data)||void 0===t?void 0:t.type){case Ar.CLOSE:return this.handleCloseMessage();case Ar.READY:return this.handleReadyMessage();case Ar.READY_ACK:return this.handleReadyAckMessage();case Ar.PROMPT_SUBMIT:return this.handlePromptSubmitMessage()}})),jr(this,"setContentRef",(e=>{this._contentRef=e}))}componentDidMount(){const{paperQALab:e}=this.props;e&&this.trackPaperQAImpression(e),"BroadcastChannel"in window&&(this._bc=new BroadcastChannel(Rr),this._bc.addEventListener("message",this.handleBCMessage),this._bc.postMessage({type:Ar.READY}))}componentWillUnmount(){this._bc&&(this._bc.removeEventListener("message",this.handleBCMessage),this._bc.postMessage({type:Ar.CLOSE}),this._bc.close())}handleCloseMessage(){this.setState({placeholderRect:null})}handleReadyMessage(){this._bc.postMessage({type:Ar.READY_ACK})}handleReadyAckMessage(){const e=this.props.paperDetail.toJS();this._bc.postMessage({type:Ar.PAPER,paperDetail:e})}handlePromptSubmitMessage(){if(!this._contentRef)return;const e=this._contentRef.getBoundingClientRect();this.setState({placeholderRect:e,contentWidthPx:e.width}),(0,br.TU)().then((()=>{this.setState({contentWidthPx:null})}))}trackPaperQAImpression(e){const t=null==e?void 0:e.shadowRootId;t&&document.getElementById(t)&&(0,K.Z)(gt.Z.create(R.default.PaperDetail.QA.IMPRESSION))}renderScorecardStats(e){return!e||e.isEmpty()?null:u().createElement("div",{className:"scorecard"},u().createElement("div",{className:"scorecard_container"},e.map(((e,t)=>{const r=this.renderStat(e);return null===r?null:u().createElement(gr.Z,{key:`${e.typeKey}-${t}`,className:"scorecard__item"},r)}))))}renderStat(e){const{citationStats:t}=this.props.paperDetail.paper;if(!t)return null;const{numCitations:r}=t;return e.typeKey===le.F1&&r>0?u().createElement(Dr,kr({stat:e},this.props)):null}renderPaperQA(e){const{contentWidthPx:t,placeholderRect:r}=this.state;return u().createElement("div",{className:c()("scorecard","scorecard--paper-qa",{"scorecard--has-placeholder":!!r})},u().createElement("div",{ref:this.setContentRef,className:"scorecard__content",style:{width:t?t+"px":void 0}},u().createElement(pr,{paperLab:e})),r&&u().createElement("div",{className:"scorecard__placeholder",style:{height:`${r.height}px`,width:`${r.width}px`}}))}render(){const{paperDetail:{paper:{scorecardStats:e}},paperQALab:t}=this.props;return t?this.renderPaperQA(t):this.renderScorecardStats(e)}}try{Lr.displayName="Scorecard"}catch(e){}const Fr=(0,yr.s)(Lr,(({paperDetail:e})=>{const{paperLabsStore:t,weblabStore:r}=(0,F.bp)(),i=(0,F.zQ)(r,(e=>e.isFeatureEnabled(z.ZP.PaperQAPairwise))),a=(0,F.zQ)(t,(e=>{var t,r;return null!==(t=null===(r=e.getLabs())||void 0===r?void 0:r.find((e=>e.key===Rr)))&&void 0!==t?t:null}));return{paperDetail:e,paperQALab:i?a:null}}));function Zr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Mr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const Br=new Set([mr,Rr]);class Qr extends u().PureComponent{constructor(...e){super(...e),Mr(this,"onClickContact",(e=>{e.preventDefault(),this.context.dispatcher.dispatch((0,ar.K)({id:ir.Z.FEEDBACK}))})),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Zr(Object(r),!0).forEach((function(t){Mr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Zr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromPaperLabsStore())}getStateFromPaperLabsStore(){const e=this.context.paperLabsStore,t=e.getLabs();return{loadedPaperId:e.getPaperId(),labs:t}}render(){const{paperDetail:{paper:e}}=this.props,{loadedPaperId:t,labs:r}=this.state;if(!t||e.id!==t)return null;const a=r.filter((e=>!Br.has(e.key))).filter((e=>e.html));return 0===a.size?null:u().createElement(re,null,u().createElement(T,{cardId:Qr.CARD_ID,navLabel:(0,i.KF)((e=>e.paperDetail.tabLabels.paperLabs)),cardType:C.EXPERIMENTAL,className:"paper-labs"},u().createElement(A,null,u().createElement(k,{title:u().createElement(u().Fragment,null,u().createElement("span",{className:"paper-labs__header__icon"},u().createElement(o.Z,{icon:"beaker",height:16,width:14})),u().createElement("span",{className:"paper-labs__header__title"},(0,i.KF)((e=>e.paperDetail.sectionTitles.paperLabs))),u().createElement(or,{display:"tag",openNewTab:!0,className:"paper-labs__header__beta-tag"}))})),u().createElement(x,null,u().createElement("div",{className:"paper-labs__content","data-test-id":"labs"},a.map((e=>u().createElement("div",{className:"paper-labs__lab",key:e.key},u().createElement("h3",{className:"paper-labs__lab__title"},e.title),u().createElement("div",{className:"paper-labs__lab__content"},u().createElement(pr,{key:e.key,paperLab:e}))))),u().createElement("div",{className:"paper-labs__content__footer"},u().createElement("div",{className:"paper-labs__content__footer__disclaimer"},u().createElement(He.Z,{content:e=>e.paperDetail.paperLabs.disclaimerHtml})),u().createElement("div",{className:"paper-labs__content__footer__feedback"},u().createElement("span",null,(0,i.KF)((e=>e.paperDetail.paperLabs.feedback))+" "),u().createElement(ve.default,{className:"paper-labs__content__footer__feedback__link",label:(0,i.KF)((e=>e.paperDetail.paperLabs.contactUsLink)),onClick:this.onClickContact})))))))}}try{Qr.displayName="PaperLabsCard"}catch(e){}function Kr(){return Kr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Kr.apply(this,arguments)}function qr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Hr(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Mr(Qr,"contextTypes",{dispatcher:S().instanceOf(P.Z).isRequired,paperLabsStore:S().instanceOf(ur.Z).isRequired}),Mr(Qr,"CARD_ID","paper-labs");const Vr="--nav-ref-placeholder-height";class zr extends u().Component{constructor(...e){super(...e),Hr(this,"onResize",void 0),Hr(this,"onScroll",void 0),Hr(this,"navRef",void 0),Hr(this,"placeholderRef",void 0),Hr(this,"scrollRef",void 0),Hr(this,"setNavRef",(e=>{this.navRef=e})),Hr(this,"setPlaceholderRef",(e=>{this.placeholderRef=e})),Hr(this,"setScrollRef",(e=>{this.scrollRef=e})),Hr(this,"onViewportChange",(()=>{const e=(0,V.y9)(document);this.context.dispatcher.dispatchEventually({actionType:v.default.actions.PAPER_NAV_DOM_DIRTY,viewportRect:e});const t=this.shouldBeAttached(e);null!==t&&t!==this.state.isAttached?this.setState({isAttached:t},(()=>{t&&this.updateHorizontalScrollPos()})):this.state.isAttached&&this.updateHorizontalScrollPos()})),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?qr(Object(r),!0).forEach((function(t){Hr(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):qr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isAttached:!1,scrollLeftPx:0},this.getStateFromPaperNavStore()),this.context.paperNavStore.registerComponent(this,(()=>{this.setState(this.getStateFromPaperNavStore())})),this.onResize=(0,L.D)(this.onViewportChange,250,{trailing:!0}),this.onScroll=(0,L.D)(this.onViewportChange,100,{leading:!0,maxWait:100,trailing:!0})}getStateFromPaperNavStore(){const{paperNavStore:e}=this.context;return{isPending:e.isPending(),navItems:e.getSortedNavItems()}}componentDidMount(){n.ZP.listenForScroll(this.onScroll),window.addEventListener("resize",this.onResize),this.onViewportChange()}componentWillUnmount(){n.ZP.stopListeningForScroll(this.onScroll),window.removeEventListener("resize",this.onResize)}shouldComponentUpdate(e){if(this.state.isAttached!==e.isAttached||this.state.isPending!==e.isPending||this.state.navItems.size!==e.navItems.size)return!0;for(let t=0;t<e.navItems.size;t++){const r=this.state.navItems.get(t),i=e.navItems.get(t);if(r.isActive!==i.isActive||r.isSolitary!==i.isSolitary||r.isProminent!==i.isProminent||r.isContained!==i.isContained||r.isVisible!==i.isVisible||r.id!==i.id||r.label!==i.label)return!0}return!1}shouldBeAttached(e){const t=this.placeholderRef;return t?t.offsetTop<=e.top+64:null}updateHorizontalScrollPos(){const e=this.scrollRef;if(!e)return;const t=this.state.navItems.filter((e=>e.isProminent)).map((e=>e.id)).map((t=>e.querySelector(`[data-nav-id="${t}"]`))).map((e=>e&&e.offsetLeft)).first();"number"==typeof t&&(n.ZP.hasNativeSmoothScrollSupport()?e.scrollTo({left:t,behavior:"smooth"}):e.scrollLeft=t)}renderNav(){const{navItems:e,isPending:t,isAttached:r}=this.state;return e.isEmpty()?null:u().createElement("nav",{className:c()({"paper-nav__nav":!0,"paper-nav__is-attached":r}),ref:this.setNavRef},!t&&!e.isEmpty()&&u().createElement(u().Fragment,null,u().createElement("div",{className:"paper-nav__scrollable",ref:this.setScrollRef},u().createElement("ul",{className:"paper-nav__nav-list"},e.map((e=>u().createElement("li",{key:e.id,className:c()({"paper-nav__nav-item":!0,"paper-nav__is-active":e.isActive,"paper-nav__is-solitary":e.isSolitary,"paper-nav__is-prominent":e.isProminent,"paper-nav__is-contained":e.isContained,"paper-nav__is-visible":e.isVisible})},u().createElement(vr.Z,Kr({navId:e.id,className:"paper-nav__nav-link"},(0,Fe.ON)({id:Me.uj,nav:e.id})),u().createElement("span",{className:"paper-nav__nav-label"},e.label)))))))))}render(){const{isAttached:e}=this.state,t=this.navRef;if(t&&!this.state.isAttached){const e=t.clientHeight;if("undefined"!=typeof document){const t=document.documentElement.style;e!==+t.getPropertyValue(Vr)&&t.setProperty(Vr,`${e}px`)}}return u().createElement("div",{className:c()({"paper-nav":!0,"paper-nav__is-attached":e,"paper-nav__is-mobile":this.context.envInfo.isMobile})},u().createElement("div",{className:"paper-nav__placeholder",ref:this.setPlaceholderRef},this.renderNav()))}}try{zr.displayName="PaperNav"}catch(e){}Hr(zr,"contextTypes",{dispatcher:S().instanceOf(P.Z).isRequired,envInfo:S().instanceOf(g.Z).isRequired,paperNavStore:S().instanceOf(yt.ZP).isRequired});const Ur=()=>u().createElement(ye.default,{className:"paper-topics__ai-generated",contents:()=>u().createElement(Yr,null)},u().createElement(er.default,{icon:u().createElement(o.Z,{icon:"information"}),label:(0,i.KF)((e=>e.paperDetail.sectionTitles.topics.aiGenerated.buttonLabel)),type:er.TYPE.SECONDARY,className:"paper-topics__ai-generated__button"}));try{Ur.displayName="AIGenerated"}catch(e){}const Yr=()=>u().createElement("div",{className:"paper-topics__ai-generated__popover"},u().createElement("h2",{className:"paper-topics__ai-generated__popover-title"},(0,i.KF)((e=>e.paperDetail.sectionTitles.topics.aiGenerated.popoverTitle))),u().createElement("p",{className:"paper-topics__ai-generated__popover-description"},(0,i.KF)((e=>e.paperDetail.sectionTitles.topics.aiGenerated.popoverBody))));try{Yr.displayName="DropDownContents"}catch(e){}const Gr=Ur;var Wr=r(97548);function $r(){return $r=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},$r.apply(this,arguments)}const Jr=({corpusId:e,title:t,tid:r,position:i})=>{const a=new URL(`https://topics-beta.apps.semanticscholar.org/topic/${r}`);return a.searchParams.set("corpusId",e),u().createElement(kt.Z,$r({},(e=>(0,Wr.W)({id:"paper_topic_link",position:e}))(i),{className:c()("paper-topics__topic-link","cl-button","cl-button--no-arrow-divider","cl-button--not-icon-only","cl-button--no-icon","cl-button--has-label","cl-button--icon-pos-left","cl-button--shape-rectangle","cl-button--size-default","cl-button--type-default","cl-button--density-medium"),href:a.toString(),"data-test-id":`topic-${r}`}),t)};try{Jr.displayName="TopicLink"}catch(e){}const Xr=Jr;function ei(){const{corpusId:e,topics:t}=(()=>{const{paperStore:e}=(0,F.bp)(),t=(0,F.zQ)(e,(e=>e.getPaperDetail())).skipperExperiments.dataFor(ht.ZP.TopicsBeta3.KEY);return{corpusId:(null==t?void 0:t.corpus_id)||"",topics:(0,p.useMemo)((()=>{if(null==t)return[];const e=t.cited_for||[],r=t.mentions||[],i=e.sort(((e,t)=>t.score-e.score));if(i.length>=10)return i.slice(0,10);const a=new Map;i.forEach((e=>{a.set(e.term,e)}));const n=r.sort(((e,t)=>t.count-e.count));for(const e of n){if(a.size>=10)break;a.has(e.term)||a.set(e.term,e)}return Array.from(a.values())}),[t])}})(),r=t.length>0;if(u().useEffect((()=>{r&&(0,K.Z)(gt.Z.create(R.default.PaperDetail.Topics.IMPRESSION))}),[r]),!r)return null;const a=(0,i.BT)((e=>e.paperDetail.sectionTitles.topics),t.length);return u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:a},u().createElement(T,{cardId:"paper-topics",cardType:C.EXPERIMENTAL,navLabel:a,"data-test-id":"pdp-topics-card"},u().createElement(A,{shouldHideHeaderBorder:!0},u().createElement(k,{title:a}),u().createElement(mt.Z,null,u().createElement(Gr,null))),u().createElement(x,{willChildrenOwnLayout:!0},u().createElement(I,{className:"paper-topics__container"},t.map(((t,r)=>u().createElement(Xr,{title:t.title,tid:t.tid,corpusId:e,position:r,key:t.tid})))))))}try{ei.displayName="PaperTopicsCard"}catch(e){}class ti extends u().PureComponent{isActive(){const{indicatorIndex:e,offSet:t,paperCount:r,currentIndex:i}=this.props;return function({currentIndex:e,indicatorIndex:t,offSet:r,paperCount:i}){return e<=0?t>=0&&t<r:t>=e&&t<e+r||e>=i-r&&e<=i-1&&(t>=e||t>=i-r)}({indicatorIndex:e,offSet:t,paperCount:r,currentIndex:i})}render(){return u().createElement("li",{className:this.isActive()?"carousel-indicator carousel-indicator-active":"carousel-indicator"})}}try{ti.displayName="CarouselIndicator"}catch(e){}var ri=r(83647),ii=r(94789),ai=r(29212),ni=r(58348),si=r(5070),oi=r(88231),li=r(66497),ci=r(69130),pi=r(15402),ui=r(48270),di=r(44082),hi=r(64012),mi=r(73906),fi=r(81619),yi=r(36347),bi=r(1680);function gi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function vi(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Pi extends u().PureComponent{constructor(...e){super(...e),vi(this,"onClickOpenOrganizePapersShelf",(e=>{e.stopPropagation(),e.preventDefault(),this.openOrganizePapersShelf()})),vi(this,"openOrganizePapersShelf",(()=>{const{dispatcher:e}=this.context,{paper:t}=this.props,r=(0,di.Re)({paperId:t.id,paperTitle:(0,ci.Ap)(t)});e.dispatch(r)})),vi(this,"fetchLibraryFolders",(()=>{const{api:e,libraryFolderStore:t}=this.context;return t.isUninitialized()?e.getLibraryFolders():Promise.resolve()})),vi(this,"handleSaveToLibraryWithShelf",(()=>{const{paper:e}=this.props,{api:t,messageStore:r,dispatcher:a}=this.context;this.fetchLibraryFolders().then((()=>{const n=(0,li.hm)({paperId:e.id,paperTitle:(0,ci.Ap)(e),sourceType:pi.Zu});t.createLibraryEntryBulk(n).catch((e=>{r.addError((0,i.KF)((e=>e.library.saveToLibraryShelf.errorMessage))),yi.Z.error(e)})),a.dispatch((0,di.ON)({paper:e}))})).catch((t=>{(0,tt.default)("library",`failed to open Save To Library shelf for paperId="${e.id}"]`,t);const a=(0,i.KF)((e=>e.library.message.error.header)),n=(0,i.KF)((e=>e.library.message.error.body));r.addError(n,a)}))})),vi(this,"onClickSaveToLibrary",(()=>{const{onSaveClick:e,trackLibraryClick:t}=this.props,{authStore:r,dispatcher:i}=this.context;"function"==typeof e&&e(),r.ensureLogin({dispatcher:i,location:ui.NL.library}).then((async()=>{t&&t("READING_LIST",{action:"save"}),await this.fetchLibraryFolders(),this.getStateFromLibraryFolderStore().isInLibrary?this.openOrganizePapersShelf():this.handleSaveToLibraryWithShelf()}),(e=>{yi.Z.warn(e)}))})),vi(this,"buildGenericSaveButton",(()=>u().createElement(s.default,{className:this.props.className,label:this.props.buttonText||"Add to Library",onClick:this.onClickSaveToLibrary})));const{libraryFolderStore:t}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?gi(Object(r),!0).forEach((function(t){vi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):gi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromLibraryFolderStore()),t.registerComponent(this,(()=>{this.setState(this.getStateFromLibraryFolderStore())}))}componentWillUnmount(){const{messageStore:e}=this.context;e.clearMessages()}getStateFromLibraryFolderStore(){const{libraryFolderStore:e}=this.context,{paper:t}=this.props;return{isInLibrary:e.isPaperInLibrary(t.id)}}render(){const{isInLibrary:e}=this.state,t=e?(0,i.KF)((e=>e.paper.action.inLibraryResponsiveText)):(0,i.KF)((e=>e.paper.action.saveShort)),r=this.props.buttonText?this.props.buttonText:(0,i.KF)((e=>e.paper.action.saveShort)),a=this.props.saveButtonIcon?this.props.saveButtonIcon:"fa-bookmark",n=this.props.saveButtonIcon?"18":"11",s=u().createElement(mi.Z,{responsiveText:t,className:this.props.className,testId:"paper-action-save",onClick:this.onClickSaveToLibrary,iconProps:{icon:a,width:n,height:n},text:r}),o=u().createElement(Q.Z,{to:"LIBRARY_ALL_ENTRIES",shouldUnderline:!1},u().createElement(mi.Z,{responsiveText:t,onClick:this.onClickOpenOrganizePapersShelf,className:this.props.className,testId:"paper-action-view-library",iconProps:{icon:"fa-bookmark",width:n,height:n},text:(0,i.KF)((e=>e.paper.action.goToLibrary))})),l=this.props.generic?this.buildGenericSaveButton():s;return e?o:l}}try{Pi.displayName="LibraryLink"}catch(e){}vi(Pi,"contextTypes",{api:S().instanceOf(ne.Z).isRequired,authStore:S().instanceOf(hi.ZP).isRequired,dispatcher:S().instanceOf(P.Z).isRequired,libraryFolderStore:S().instanceOf(fi.Z).isRequired,messageStore:S().instanceOf(bi.Z).isRequired});var Ei=r(84157),Si=r(48034);function _i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function wi(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?_i(Object(r),!0).forEach((function(t){Oi(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Oi(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ci extends u().PureComponent{constructor(...e){super(...e),Oi(this,"trackClickSimilarPapersLink",(e=>{Et({paperId:this.props.paperDetail.paper.id,section:"similarPapers",paperList:this.props.paperDetail.relatedPapers,swapPosition:null,clickedPaper:e});const t={paperId:this.props.paperDetail.paper.id,clickedPaperId:e.id};this.props.paperDetail.relatedPapers.forEach((function(e,r){t[`paper${r}`]=e.id})),(0,Si.Z)([new Z.Z(R.default.PaperDetail.SIMILAR_PAPERS_LIST,t)])})),Oi(this,"trackActionClick",((e,t)=>{const r=this.context.analyticsLocation,i=Z.Z;if(r){const a=R.default.getIn(r,"Action",e),n=wi({},t);(0,K.Z)(i.create(a,n))}else yi.Z.warn("Unable to track ClickEvent from component <SimilarPapersCardBase /> because it doesn't have an analytics location")})),this.state=wi({papersHaveBeenRequested:!this.props.paperDetail.relatedPapers.isEmpty()},this.getStateFromStores()),this.context.paperNavStore.registerComponent(this,(()=>{this.setState(wi({},this.state,{},this.getStateFromStores()))}))}componentDidMount(){this.state.isVisibleOrActive&&this.loadRelatedPapers()}componentDidUpdate(){this.state.isVisibleOrActive&&this.loadRelatedPapers()}getStateFromStores(){const e=this.context.paperNavStore,t=e.navItems.get("related-papers");return{isVisibleOrActive:t&&(e.isItemVisible(t)||e.isItemActive(t))}}loadRelatedPapers(){const{paperDetail:{paper:e},paperFetchCount:t}=this.props,r=e.id,{graphQLApi:i}=this.context;e.id&&!this.state.papersHaveBeenRequested&&(setTimeout((()=>{!async function({paperId:e,count:t},{graphQLApi:r}){const i=ii.Ps`
    ${ri.nb}

    query GetRelatedPapersForPaper($paperId: PaperId, $count: Int) {
      paper(paperId: $paperId) {
        id
        relatedPapers(first: $count) {
          edges {
            node {
              ...${ri.xF}
              }
            }
          }
        }
      }
    `,a={paperId:e,count:t};await r.fetchQuery({requestType:v.default.requestTypes.GQL__RELATED_PAPERS,query:i,variables:a,operationName:"GetRelatedPapersForPaper"})}({paperId:r,count:t},{graphQLApi:i})}),0),this.setState({papersHaveBeenRequested:!0}))}renderMetaDataBottomFooter(e,t){return u().createElement("div",{className:"similar-papers__footer"},u().createElement("span",{className:"similar-papers__footer-left"},e.citationStats&&e.citationStats.numCitations>0&&u().createElement("span",{className:"similar-papers__footer-text"},u().createElement("span",{className:"similar-papers__footer-counts"},(0,pe.WU)(e.citationStats.numCitations)),(0,pe._6)(e.citationStats.numCitations,(0,i.KF)((e=>e.paperDetail.relatedPapers.citation.singular)),(0,i.KF)((e=>e.paperDetail.relatedPapers.citation.plural)),!0)),e.citationStats&&e.citationStats.numKeyCitations>0&&u().createElement("span",{className:"similar-papers__footer-text"},u().createElement("span",{className:"similar-papers__footer-counts"},(0,pe.WU)(e.citationStats.numKeyCitations)),(0,pe._6)(e.citationStats.numKeyCitations,(0,i.KF)((e=>e.paperDetail.relatedPapers.highlyInfluenced.singular)),(0,i.KF)((e=>e.paperDetail.relatedPapers.highlyInfluenced.plural)),!0))),u().createElement("div",{className:"similar-papers__footer-right"},u().createElement(Pi,{buttonText:(0,i.KF)((e=>e.paper.action.saveShort)),className:"similar-papers__metadata-save",paper:e,saveButtonIcon:"fa-bookmark-not-filled",trackLibraryClick:()=>this.trackActionClick("READING_LIST",{action:"save",paperId:e.id,index:t})})))}renderLoading(){const{offSet:e}=this.props;return u().createElement(xe.Z,{className:"similar-papers__body"},[...Array(e)].map(((e,t)=>u().createElement(gr.Z,{className:"similar-papers__card",key:t},u().createElement("div",{className:"similar-papers-card__fold"}),u().createElement("div",{className:"similar-papers__shimmer"})))))}getCurrentPaperSet(e){const{offSet:t,currentIndex:r,smallScreenOffSet:i,showMoreToggle:a,isNarrowScreen:n}=this.props,s=ki(e,t),o=s.size,l=r+t;let c;return c=r<=o-1&&r>o-t?s.slice(o-t,o):r<=0?s.slice(0,t):s.slice(r,l),a&&n?c=s.slice(0,i):n&&!a&&(c=s),c}getAbstractText(e){return e.tldr&&e.tldr.text.length<400?u().createElement(Ei.Z,{paper:e}):e.paperAbstractTruncated?u().createElement(ni.default,{abstract:(0,ai.Pz)({text:e.paperAbstractTruncated})}):null}renderRelatedPaperFooter(e){return this.context.envInfo.isMobile?u().createElement(ot.Z,{paper:e}):u().createElement("div",{className:"similar-papers__paper-card-footer"},u().createElement(si.default,{paper:e}),u().createElement(it.default,{paper:e,viewPaper:!1,cite:!1}))}renderRelatedPapers(e){const t=this.getCurrentPaperSet(e),r=this.context.envInfo.isMobile;return u().createElement(xe.Z,{testId:"related-papers-list",className:"similar-papers__body"},e.isEmpty()?u().createElement("div",{className:"empty"},(0,i.KF)((e=>e.paperDetail.relatedPapers.noPapers))):t.map(((e,t)=>u().createElement(at.ZP,{key:t,paper:e,eventData:{index:t},onClickTitle:()=>this.trackClickSimilarPapersLink(e)},u().createElement(st.default,{paper:e,className:"similar-papers__paper-card",hasDogEar:!0,controls:!!r&&u().createElement(si.default,{paper:e}),abstract:this.getAbstractText(e),footer:this.renderRelatedPaperFooter(e)})))))}render(){const{paperDetail:{isLoadingRelatedPapers:e,relatedPapers:t}}=this.props;return e?this.renderLoading():this.renderRelatedPapers(t)}}try{Ci.displayName="SimilarPapersCardBase"}catch(e){}Oi(Ci,"contextTypes",{analyticsLocation:S().object,graphQLApi:S().instanceOf(oi.Z).isRequired,paperNavStore:S().instanceOf(yt.ZP).isRequired,envInfo:S().instanceOf(g.Z).isRequired}),Oi(Ci,"defaultProps",{currentIndex:0,paperFetchCount:10,offSet:3});const Ti=(0,St.Z)(R.default.PaperDetail.RelatedPapers)(Ci);var Ni=r(1262),xi=r(64317);function Ii(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Di extends u().PureComponent{constructor(...e){super(...e),Ii(this,"_carouselContainerRef",void 0),Ii(this,"selectSizeRender",(()=>{const e=window.innerWidth;e<1300&&e>800?this.setState({offSet:2,isNarrowScreen:!1}):e<800?this.setState({isNarrowScreen:!0}):e>=1300&&this.setState({offSet:3,isNarrowScreen:!1})})),Ii(this,"getPreviousPaperSet",(()=>{const{offSet:e,currentIndex:t}=this.state;t<0&&this.setState({currentIndex:0}),0!==t&&this.setState({currentIndex:t-e}),this.setState({animationClassName:"carousel-left"})})),Ii(this,"getNextPaperSet",(()=>{const{offSet:e,currentIndex:t}=this.state,{paperDetail:{relatedPapers:r}}=this.props;t===r.size-1||t<0?this.setState({currentIndex:0}):this.setState({currentIndex:t+e}),this.setState({animationClassName:"carousel-right"})})),Ii(this,"renderIndicators",(()=>{const{paperDetail:{relatedPapers:e}}=this.props,{currentIndex:t,offSet:r}=this.state,i=ki(e,r),a=i.size;return u().createElement("ul",{className:"carousel-indicators"},i.map(((e,i)=>u().createElement(ti,{key:i,currentIndex:t,indicatorIndex:i,offSet:r,paperCount:a}))))})),Ii(this,"onShowMoreClick",(()=>{const{showMoreToggle:e}=this.state;this.setState({showMoreToggle:!e})})),Ii(this,"setCarouselContainer",(e=>{this._carouselContainerRef=e})),this.state={paperFetchCount:10,paperRecommendationType:"relatedPapers",currentIndex:0,offSet:3,screenWidth:null,animationClassName:"",isNarrowScreen:!1,smallScreenOffSet:2,showMoreToggle:!0,heightPx:null}}componentDidMount(){n.ZP.requestAnimationFrame((()=>{this.setState({screenWidth:window.innerWidth})})),window.matchMedia("(max-width: 800px)").onchange=this.selectSizeRender,window.matchMedia("(min-width: 800px) and (max-width: 1300px)").onchange=this.selectSizeRender,window.matchMedia("(min-width: 1300px)").onchange=this.selectSizeRender,this.selectSizeRender()}componentDidUpdate(){if(!this.props.paperDetail.isLoadingRelatedPapers&&!this.state.heightPx){const e=this._carouselContainerRef?this._carouselContainerRef.clientHeight:0;this.setState({heightPx:e})}}renderSimilarPapers(){const{offSet:e,currentIndex:t,paperFetchCount:r,paperRecommendationType:i,animationClassName:a,isNarrowScreen:n,smallScreenOffSet:s,showMoreToggle:o}=this.state;return u().createElement(xi.CSSTransitionGroup,{transitionName:a,transitionEnterTimeout:600,transitionLeaveTimeout:600},u().createElement(Ti,{key:t,paperDetail:this.props.paperDetail,currentIndex:t,paperFetchCount:r,paperRecommendationType:i,offSet:e,isNarrowScreen:n,smallScreenOffSet:s,showMoreToggle:o}))}showLeftArrow(){const{currentIndex:e}=this.state;return!(e<=0)}showRightArrow(){const{currentIndex:e,offSet:t}=this.state,{paperDetail:{relatedPapers:r}}=this.props,i=ki(r,t);return!(e+t>=i.size||e===i.size-1)}render(){const{showMoreToggle:e,smallScreenOffSet:t,isNarrowScreen:r,offSet:a,currentIndex:n,heightPx:s}=this.state,{paperDetail:{relatedPapers:o}}=this.props,l=o.size,c=s?s/2-20+"px":0,p={"aria-label":(0,i.KF)((e=>e.paperDetail.relatedPapers.prevPapers))},d={"aria-label":(0,i.KF)((e=>e.paperDetail.relatedPapers.nextPapers))},h=ki(o,a).size;return u().createElement("div",{ref:this.setCarouselContainer,className:"carousel-container"},!r&&u().createElement("p",{"aria-atomic":"true","aria-live":"polite",className:"screen-reader-only"},(0,i.KF)((e=>e.paperDetail.relatedPapers.papersShowing),n+1,n+a,h)),!r&&this.renderIndicators(),this.showLeftArrow()&&!r?u().createElement("div",{className:"carousal-arrow",style:{top:c,left:"-2%"}},u().createElement(Ni.Z,{ariaProps:p,direction:Ni.Z.Direction.LEFT,onClick:this.getPreviousPaperSet})):null,u().createElement("div",{className:"content-wrapper"},this.renderSimilarPapers()),this.showRightArrow()&&!r?u().createElement("div",{className:"carousal-arrow",style:{top:c,right:"-2%"}},u().createElement(Ni.Z,{ariaProps:d,direction:Ni.Z.Direction.RIGHT,onClick:this.getNextPaperSet})):null,r&&u().createElement("div",{className:"narrow-view-footer-container"},u().createElement("div",{className:"show-more"},u().createElement(Ni.Z,{direction:e?Ni.Z.Direction.DOWN:Ni.Z.Direction.UP,onClick:this.onShowMoreClick,"aria-label":e?(0,i.KF)((e=>e.paperDetail.relatedPapers.narrowViewToggle.showMoreAriaLabel)):(0,i.KF)((e=>e.paperDetail.relatedPapers.narrowViewToggle.showLessAriaLabel)),className:"carousal-arrow"}),u().createElement("p",{className:"toggle-text"},e?(0,i.KF)((e=>e.paperDetail.relatedPapers.narrowViewToggle.ShowMoreToggleText)):(0,i.KF)((e=>e.paperDetail.relatedPapers.narrowViewToggle.ShowLessToggleText)))),u().createElement("div",{"aria-live":"polite","aria-atomic":"true",className:"number-indicator"},e?t.toLocaleString():l.toLocaleString(),"/",l.toLocaleString(),u().createElement("span",{className:"screen-reader-only"},(0,i.KF)((e=>e.paperDetail.relatedPapers.narrowViewToggle.relatedPapers))))))}}try{Di.displayName="PapersCarousel"}catch(e){}function ki(e,t){const r=e.size%t;return e.slice(0,e.size-r)}Ii(Di,"contextTypes",{api:S().instanceOf(ne.Z).isRequired});class ji extends u().PureComponent{render(){const{isMobile:e}=this.context.envInfo,{paperDetail:t}=this.props;return u().createElement(w,{id:"related-papers",navLabel:(0,i.KF)((e=>e.paperDetail.tabLabels.similarPapers)),className:c()("similar-papers",{"similar-papers--mobile":e})},u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:(0,i.KF)((e=>e.paperDetail.sectionTitles.similarPapers))},u().createElement("h2",{className:"card-header-title__carousel"},(0,i.KF)((e=>e.paperDetail.sectionTitles.similarPapers))),u().createElement(Di,{paperDetail:t})))}}try{ji.displayName="SimilarPapersCard"}catch(e){}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(ji,"contextTypes",{envInfo:S().instanceOf(g.Z).isRequired});const Ai=(0,St.Z)(R.default.PaperDetail.RelatedPapers)(ji);var Ri=r(96454),Li=r(84921),Fi=r(67174);class Zi extends u().PureComponent{handleClick(e,t){const r=this.props.onClick;"function"==typeof r&&r(e,t,this.props.paper.id)}renderAuthorsListItem(){const{authors:e}=this.props.paper;return e.isEmpty()?null:u().createElement(Fi.Z,{authors:e,onAuthorClick:e=>{this.handleClick("AUTHOR",e)},max:this.props.maxAuthors,shouldLinkToAHP:!this.props.disableAuthorLinks})}render(){return u().createElement("span",{className:"paper-meta","data-test-id":"paper-meta-subhead"},this.renderAuthorsListItem())}}try{Zi.displayName="AuthorsPaperMeta"}catch(e){}!function(e,t,r){(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(Zi,"contextTypes",{weblabStore:S().instanceOf(J.ZP).isRequired});class Mi extends u().PureComponent{render(){return u().createElement("div",{className:"card-container"},this.props.children)}}try{Mi.displayName="CardContainer"}catch(e){}var Bi=r(72836),Qi=r(30381),Ki=r.n(Qi);function qi(e){const{paper:t,paper:{journal:r},skipperExperiments:i}=e,a=t.debugInfo;if(!a)return null;const n=a.sourceIds.map(((e,t)=>{let r;const i=e.source.id;"DBLP"===i?r="http://www.dblp.org/rec/bibtex/"+e.id:"CiteSeerX"===i?r="http://citeseerx.ist.psu.edu/viewdoc/summary?doi="+e.id:"MAG"===i?r="https://academic.microsoft.com/paper/"+e.id:"ArXiv"===i&&(r="https://arxiv.org/abs/"+e.id);const a=u().createElement("span",null,u().createElement("span",{className:"source"},i),": ",u().createElement("span",{className:"id"},e.id));let n;return n=void 0===r?a:u().createElement("a",{href:r},a),u().createElement("li",{key:`src-id-${t}`,className:"debug-info"},n)})),s=a.sourceUris.map(((e,t)=>u().createElement("li",{key:`src-uri-${t}`,className:"source-uri debug-info"},u().createElement("a",{href:e},e)))),o=a.duplicateIds.map(((e,t)=>u().createElement("li",{key:`dupe-${t}`},"Duplicate ID: ",e))),l=null!==r?u().createElement("li",{key:"journal-info",className:"debug-info"},"Journal: ",r.name||"No Journal Name",", ",r.volume||"Missing Volume",","," ",r.pages||"Missing Pages"):u().createElement("li",{key:"journal-info",className:"debug-info"},"No Journal Info"),c=null!=a.earliestAcquisitionDate?u().createElement("li",{key:"acquisition-date",className:"debug-info"},"Earliest Acquisition Date:"," ",Ki().unix(a.earliestAcquisitionDate).utc().format("MM-DD-YYYY HH:mm z")):u().createElement("li",{key:"acquisition-date",className:"debug-info"},"Earliest Acquisition Date: Unknown"),p=u().createElement("li",{key:"fields-of-study",className:"debug-info"},"Fields Of Study: ",(0,b.jN)(t.fieldsOfStudy)),d=u().createElement("li",{key:"corpusId",className:"debug-info"},"Corpus Id: ",a.corpusId||"Unknown"),h=i?i.all():Vt.ZP.List(),m=h.isEmpty()?null:u().createElement("li",{key:"skipperExperiments",className:"debug-info"},u().createElement("div",null,"Member of the following Skipper Experiments (",u().createElement("a",{href:`/api/1/skipper/experiments/paper/${t.id}`,target:"_blank"},"see raw data"),"):"),u().createElement("ul",{style:{paddingLeft:"20px"}},h.map((e=>u().createElement("li",{key:e.experimentName},e.experimentName)))));return u().createElement("ul",null,n,s,o,l,c,p,d,m)}try{qi.displayName="DebugInfo"}catch(e){}var Hi=r(88944),Vi=r(93717),zi=r(6737),Ui=r(99255),Yi=r(2838);function Gi({className:e,onClick:t}){const r=(0,i.KF)((e=>e.paper.action.cite)),a=c()("cite-button",e);return u().createElement(mi.Z,{iconProps:{icon:"fa-quote",width:"11",height:"11"},target:"_blank",onClick:t,className:a,testId:"cite-link",text:r})}try{Gi.displayName="CiteLink"}catch(e){}class Wi extends U.Z{constructor(e,t){super(Y.Z.CONTEXTMENUOPEN,W().recursive({target:e},t))}static create(e,t){return new Wi(e,t)}}var $i=r(37179),Ji=r(40760);function Xi(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ea(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Xi(Object(r),!0).forEach((function(t){ta(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Xi(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function ta(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ra(e){const t=Wi.create(R.default.PaperDetail.Header.Action.PAPER_LINK,ea({},e));(0,K.Z)(t)}function ia({link:e,paperId:t,isPrimary:r,onClick:a,entitlement:n,className:s}){const o=Dt.S4(e.url),l=e.linkType===Ji.Z.OPEN_ACCESS,p=e.linkType===Ji.Z.INSTITUTIONAL_ACCESS,d=(()=>{if("entitlement"===e.linkType.toString())return"getftr";if(n)switch(n.source){case $i.ZP.GETFTR:return"getftr";case $i.ZP.LIBKEY:default:return"fa-link-out"}else{if(l)return"open-access";if(o)return"fa-pdf";if(p)return"openathens-login"}return"fa-link-out"})(),h=n?(0,i.KF)((e=>e.paper.link[n.source])):r||p?Dt.Q(e):"entitlement"===e.linkType?(0,i.KF)((e=>e.paper.link.getftr)):Dt.Oj(e),m="fa-pdf"===d||"fa-link-out"===d?"11":"15",f={"link-type":e.linkType,"direct-pdf-link":o,"unpaywall-link":l,institutional:p,"primary-link":r,"paper-id":t},y=(()=>{if(n)return{entitlement:!0,"entitlement-source":n.source}})(),b=u().useCallback((t=>{a&&a(e,t)}),[e,a]);return u().createElement(Fe.ZP,{heapProps:ea({id:Me.xG},f,{},y)},u().createElement(mi.Z,{tagName:"a",link:e,onClick:b,onContextMenu:()=>ra(f),className:c()({"button--full-width":!0,"button--primary":r,"button--unpaywall":l,"button--institutional":p},s),iconProps:{icon:d,width:m,height:m},testId:"paper-link",text:h,target:"_blank",rel:"noopener",title:e.url,href:e.url}))}try{ia.displayName="PaperLinkButton"}catch(e){}function aa(e,t){var r;return!(null==e||null===(r=e.pdfUrl)||void 0===r||!r.url||t.isMobile)}function na(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function sa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oa({paper:e,readerVisible:t,envInfo:r}){const i=Dt.v4(e.alternatePaperLinks).first();if(!i)return null;const a=aa(t,r),n=Dt.FK(e,a),s=Dt.jk(n),o=Dt.aP(s),l=i.linkType===Ji.Z.OPEN_ACCESS,p=Dt.S4(i.url)&&!l,d=i.linkType===Ji.Z.INSTITUTIONAL_ACCESS,h=Dt.Oj(i),m=l?{icon:"open-access",width:"15",height:"15"}:p?{icon:"pdf",width:"24",height:"18"}:{icon:"fa-link-out",width:"11",height:"11"},f={"link-type":i.linkType,"direct-pdf-link":Dt.S4(i.url),"unpaywall-link":l,institutional:d,"primary-link":!1,"paper-id":e.id};return u().createElement(Fe.ZP,{heapProps:{id:Me.xG,"link-type":i.linkType,"direct-pdf-link":Dt.S4(i.url),"unpaywall-link":l,institutional:d,"primary-link":!1,"paper-id":e.id}},u().createElement(mi.Z,{tagName:"a",link:i.url,className:c()("flex-paper-actions__button","alternate-sources__dropdown-button",{"alternate-sources__dropdown-button--show-divider":!o}),iconProps:m,isAlternateSourceButtonLink:!0,isPdf:Dt.S4(i.url),onContextMenu:()=>ra(f),testId:"paper-link",text:h,target:"_blank",rel:"noopener",title:i.url,href:i.url}))}try{oa.displayName="AltPaperLinkButton"}catch(e){}const la=(0,F.Ai)(oa,(e=>{const t=(0,F.zQ)(e.readerVisibilityStore,(e=>({readerVisible:e.getVisibility()})));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?na(Object(r),!0).forEach((function(t){sa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):na(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{envInfo:e.envInfo},{},t)}));var ca=r(51336);function pa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ua(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function da({createNonBrandedPaperLink:e,paper:t,paperDetail:r,readerVisible:i,envInfo:a}){const n=aa(i,a),s=Dt.FK(t,n),o=Dt.jk(s),{primaryPaperLink:l}=t,{entitlement:c}=r,p=o.openAccess.isEmpty()?null:u().createElement("ul",{className:"unpaywall-links"},o.openAccess.map((e=>u().createElement("li",{key:e.url,className:"unpaywall"},u().createElement(ia,{link:e,paperId:t.id,isPrimary:!1}))))),d=o.pdf.isEmpty()?null:u().createElement("ul",{className:"pdf-links"},o.pdf.map((e=>u().createElement("li",{key:e.url,className:"pdf"},u().createElement(ia,{link:e,paperId:t.id,isPrimary:!1}))))),h=o.nonPdf.isEmpty()?null:u().createElement("ul",{className:"out-links"},o.nonPdf.map((e=>u().createElement("li",{key:e.url,className:"link-out"},u().createElement(ia,{link:e,paperId:t.id,isPrimary:!1}))))),m=(()=>{const e=o.institutional;return e?u().createElement(Vi.Z,{feature:z.ZP.OpenAthensRedirect},u().createElement(Hi.Z,null,u().createElement("ul",{className:"institutional-link"},u().createElement("li",{key:e.url,className:"institutional"},u().createElement(ia,{link:e,paperId:t.id,isPrimary:!1}))))):null})(),f=c?(0,ca.mr)({url:c.url,linkType:"entitlement",publisherName:"none"}):l;return n&&!Dt.tn(f)&&e&&"function"==typeof e?u().createElement(u().Fragment,null,e(),p,m,d,h):u().createElement(u().Fragment,null,p,m,d,h)}try{da.displayName="AltPaperLinkDropdown"}catch(e){}const ha=(0,F.Ai)(da,(e=>{const t=(0,F.zQ)(e.paperStore,(e=>({paperDetail:e.getPaperDetail()}))),r=(0,F.zQ)(e.readerVisibilityStore,(e=>({readerVisible:e.getVisibility()})));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(r),!0).forEach((function(t){ua(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},{envInfo:e.envInfo},{},t,{},r)}));var ma=r(75430);function fa({dropdownContent:e}){const t=u().createElement(qe.default,{arrow:qe.ARROW_POSITION.SIDE_TOP_POS_RIGHT,className:"reader__dropdown-content"},e),r={"aria-label":(0,i.KF)((e=>e.paperDetail.morePaperLinks))};return u().createElement(ye.default,{className:"reader__dropdown",type:s.TYPE.DEFAULT,children:u().createElement(ma.default,{ariaProps:r,label:null,className:"reader__dropdown-button"}),popover:()=>t,usePortal:!1})}try{fa.displayName="SemanticReaderDropdown"}catch(e){}var ya=r(40936);function ba(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function ga(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function va({createNonBrandedPaperLink:e,envInfo:t,isLoggedIn:r,paper:a,readerVisible:n}){const{weblabStore:s}=(0,F.bp)(),l=aa(n,t),c=Dt.jk(a.alternatePaperLinks),p=c.openAccess.isEmpty()&&c.pdf.isEmpty()&&c.nonPdf.isEmpty(),d=Dt.FK(a,l),h=Dt.jk(d),m={id:Me.ub,"paper-id":a.id,"has-open-links":!h.pdf.isEmpty(),"has-open-nonpdf":!h.nonPdf.isEmpty(),"has-unpaywall":!h.openAccess.isEmpty(),"has-institutional":void 0!==h.institutional,"num-alternates":h.pdf.size+h.nonPdf.size+h.openAccess.size};if(p){if(!s.isFeatureEnabled(z.ZP.OpenAthensRedirect))return null;const e=c.institutional;if(!e)return null;const t={id:Me.xG,"link-type":e.linkType,"direct-pdf-link":!1,"unpaywall-link":!1,institutional:!0,"primary-link":!1,"paper-id":a.id};return u().createElement(gr.Z,(0,Fe.ON)(t),u().createElement(ia,{link:e,paperId:a.id,isPrimary:!1,className:"flex-paper-actions__button flex-paper-actions__button--secondary"}))}const f=r&&c.institutional,y=Dt.aP(h);return l&&e&&"function"==typeof e?u().createElement("div",{className:"alternate-sources__dropdown-wrapper"},u().createElement(gr.Z,{className:"alternate-sources__dropdown"},y&&u().createElement(fa,{dropdownContent:u().createElement(ha,{createNonBrandedPaperLink:e,paper:a})})),u().createElement(Vi.Z,{feature:z.ZP.OpenAthensRedirect},u().createElement(Hi.Z,null,f?u().createElement("div",{className:"institutional-banner"},u().createElement("span",{className:"banner-new-label"},(0,i.KF)((e=>e.paper.institutionalAccessBanner.new))),(0,i.KF)((e=>e.paper.institutionalAccessBanner.institutionalAccess))):null))):u().createElement("div",{className:"alternate-sources__dropdown-wrapper"},u().createElement(gr.Z,{className:"alternate-sources__dropdown"},u().createElement(la,{paper:a}),y&&u().createElement(ya.Z,{ariaLabel:(0,i.KF)((e=>e.paperDetail.morePaperLinks)),className:"alternate-sources__dropdown-menu",content:u().createElement(ha,{createNonBrandedPaperLink:e,paper:a}),testId:"alt-paper-links"},u().createElement("span",(0,Fe.ON)(m),u().createElement(o.Z,{width:"10",height:"10",icon:"disclosure",className:"icon-down"})))),u().createElement(Vi.Z,{feature:z.ZP.OpenAthensRedirect},u().createElement(Hi.Z,null,f?u().createElement("div",{className:"institutional-banner"},u().createElement("span",{className:"banner-new-label"},(0,i.KF)((e=>e.paper.institutionalAccessBanner.new))),(0,i.KF)((e=>e.paper.institutionalAccessBanner.institutionalAccess))):null)))}try{va.displayName="AltPaperLinks"}catch(e){}const Pa=(0,F.Ai)(va,(e=>{const t=(0,F.zQ)(e.authStore,(e=>({isLoggedIn:e.hasAuthenticatedUser()}))),r=(0,F.zQ)(e.readerVisibilityStore,(e=>({readerVisible:e.getVisibility()})));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ba(Object(r),!0).forEach((function(t){ga(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ba(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{},{envInfo:e.envInfo},{},r)}));function Ea(){return u().createElement("div",{className:"flex-paper-actions__info flex-paper-actions__info--no-link","data-test-id":"no-paper-link"},u().createElement("div",{className:"flex-paper-actions__info__icon"},u().createElement(o.Z,{icon:"fa-link-broken",height:"19",width:"14"})),u().createElement("div",{className:"flex-paper-actions__info__label"},(0,i.KF)((e=>e.paper.noLinkLabel))))}try{Ea.displayName="NoPaperLink"}catch(e){}var Sa=r(59051),_a=r(95087),wa=r(62093);function Oa(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ca(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ta(){return Ta=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ta.apply(this,arguments)}class Na extends u().Component{componentDidMount(){(0,K.Z)(gt.Z.create(R.default.PaperDetail.Reader.Button.IMPRESSION))}render(){var e,t;const{paperId:r,readerVisible:a,isPrimary:n}=this.props;return null!=a&&null!==(e=a.pdfUrl)&&void 0!==e&&e.url?u().createElement(wa.default,{placement:wa.PLACEMENT.BOTTOM,id:"semantic-reader-tooltip",tooltipContent:(0,i.KF)((e=>e.paperDetail.readerTooltip))},u().createElement(Q.Z,{to:"READER",params:{paperId:r,pdfSha:(null==a||null===(t=a.pdfSha)||void 0===t?void 0:t.id)||""},shouldUnderline:!1,"aria-describedby":"semantic-reader-tooltip","data-test-id":"reader-button"},u().createElement(mi.Z,Ta({tagName:"a",className:c()("reader__button",{"reader__button--primary":!!n}),iconProps:{height:"100%",width:"100%",icon:"semantic-reader",className:"reader__button-icon"},testId:"reader-button",text:(0,i.KF)((e=>e.paperDetail.viewReaderButtonWithPDFPrefix)),onClick:()=>(0,_a.Xw)(r)},(0,Sa.my)())))):null}}try{Na.displayName="SemanticReaderButton"}catch(e){}const xa=(0,F.Ai)(Na,(e=>function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(r),!0).forEach((function(t){Ca(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oa(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},(0,F.zQ)(e.readerVisibilityStore,(e=>({readerVisible:e.getVisibility()}))))));function Ia(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Da(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class ka extends u().PureComponent{constructor(...e){super(...e),Da(this,"onClickPaperLink",((e,t)=>{if(e.linkType===Ji.Z.WILEY||e.linkType===Ji.Z.DOI){const r=Dt.kh(e.url);t.preventDefault(),window.open(r,"_blank")}})),Da(this,"prepareAlternateLinkGroups",(e=>Dt.jk(e)))}componentDidMount(){this.trackImpressionsDataToRico()}componentDidUpdate(e){const{paper:t}=this.props;t.id!==e.paper.id&&this.trackImpressionsDataToRico()}trackImpressionsDataToRico(){const{paper:e,showPrimaryOnly:t}=this.props,r=this.prepareAlternateLinkGroups(e.alternatePaperLinks),i=r.nonPdf.map((e=>e.url)).toArray().concat(r.pdf.map((e=>e.url)).toArray()),a=r.openAccess.map((e=>e.url)).toArray(),n={paper:e.id,primaryPaperLinkDisplayed:e.primaryPaperLink?e.primaryPaperLink.linkType:null,primaryPaperPublisher:e.primaryPaperLink?e.primaryPaperLink.publisherName:null,alternateSourcesDisplayed:!(t||e.alternatePaperLinks.isEmpty()),listOfAlternateSourcesDisplayed:i,openAccessDisplayed:!r.openAccess.isEmpty(),listofOpenAccessDisplayed:a};(0,Pt.Z)(R.default.PaperDetail.IMPRESSION,n)}getAlternate(){const{envInfo:e,paper:t,readerVisible:r,showPrimaryOnly:i}=this.props,a=aa(r,e);return i||t.alternatePaperLinks.isEmpty()?a?u().createElement("div",{className:"alternate-sources__dropdown-wrapper"},u().createElement(gr.Z,{className:"alternate-sources__dropdown"},u().createElement(fa,{dropdownContent:this.createNonBrandedPaperLink()}))):null:u().createElement(Pa,{createNonBrandedPaperLink:()=>this.createNonBrandedPaperLink(),paper:t})}createNonBrandedPaperLink(){const{entitlement:e,paper:t}=this.props,{primaryPaperLink:r}=this.props.paper,i=e?(0,ca.mr)({url:e.url,linkType:"entitlement",publisherName:"none"}):r;return i?Dt.tn(i)?null:u().createElement("ul",null,u().createElement("li",null,u().createElement(ia,{link:i,paperId:t.id,isPrimary:!1}))):null}renderViewPaperAsPrimary({hasPrimaryLink:e,showReaderButton:t,primaryButtonLink:r}){const{entitlement:i,paper:a}=this.props;return u().createElement(u().Fragment,null,e&&u().createElement(gr.Z,{className:"alternate-sources__paperlink-wrapper"},u().createElement(ia,{className:"flex-paper-actions__button flex-paper-actions__button--primary",link:r,paperId:a.id,isPrimary:!0,onClick:this.onClickPaperLink,entitlement:i})),t&&u().createElement(xa,{paperId:a.id,isPrimary:!0}))}renderReaderAsPrimary({hasPrimaryLink:e,isBranded:t,showReaderButton:r,primaryButtonLink:i}){const{entitlement:a,paper:n}=this.props;return u().createElement(u().Fragment,null,e&&t&&u().createElement(gr.Z,{className:"alternate-sources__paperlink-wrapper"},u().createElement(ia,{className:"flex-paper-actions__button flex-paper-actions__button--primary",link:i,paperId:n.id,isPrimary:!0,onClick:this.onClickPaperLink,entitlement:a})),r&&u().createElement(xa,{paperId:n.id,isPrimary:!0}))}render(){const{entitlement:e,envInfo:t,paper:{primaryPaperLink:r},readerVisible:i}=this.props,a=aa(i,t),n=e?(0,ca.mr)({url:e.url,linkType:"entitlement",publisherName:"none"}):r,s=Dt.tn(n),o=this.getAlternate(),l=!!n,p=l||!!o;return u().createElement(xe.Z,{className:c()("flex-paper-actions__item-container",{reader__container:a}),wrap:!1},!p&&u().createElement(gr.Z,{className:"alternate-sources__paperlink-wrapper"},u().createElement(Ea,null)),!!n&&(a&&!s?this.renderReaderAsPrimary({hasPrimaryLink:l,isBranded:s,showReaderButton:a,primaryButtonLink:n}):this.renderViewPaperAsPrimary({hasPrimaryLink:l,showReaderButton:a,primaryButtonLink:n})),o)}}try{ka.displayName="PaperLinks"}catch(e){}const ja=(0,F.Ai)(ka,(e=>{const t=(0,F.zQ)(e.authStore,(e=>({isLoggedIn:e.hasAuthenticatedUser()}))),r=(0,F.zQ)(e.readerVisibilityStore,(e=>({readerVisible:e.getVisibility()})));return function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ia(Object(r),!0).forEach((function(t){Da(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ia(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{},{envInfo:e.envInfo},{},r)}));function Aa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ra extends p.PureComponent{constructor(...e){super(...e),Aa(this,"showCiteModal",(()=>{(0,K.Z)(Z.Z.create(R.default.PaperDetail.Header.Action.CITE)),this.context.dispatcher.dispatch((0,ar.K)({id:ir.Z.CITE,data:this.props.paper}))}))}render(){const{paper:e,trackActionClick:t,entitlement:r}=this.props;return u().createElement(xe.Z,{wrap:!0,className:"flex-paper-actions__group"},u().createElement(gr.Z,{className:"alternate-sources"},u().createElement(ja,{paper:e,entitlement:r})),u().createElement(gr.Z,null,u().createElement(xe.Z,{className:"flex-paper-actions__item-container"},u().createElement(gr.Z,null,u().createElement(Fe.ZP,{heapProps:{id:Me._y}},u().createElement(Pi,{buttonText:(0,i.KF)((e=>e.paper.action.save)),className:"flex-paper-actions__button flex-paper-actions__button--responsive-secondary",paper:e,trackLibraryClick:t}))),u().createElement(gr.Z,null,u().createElement(Fe.ZP,{heapProps:{id:Me.Tm}},u().createElement(Ui.Z,{className:"flex-paper-actions__button flex-paper-actions__button--responsive-secondary",queryType:zi.OS.PAPER_CITATION,queryValue:e.id,displayValue:e.title.text,subLocation:ui.NL.pdpAlert}))),u().createElement(gr.Z,{className:"flex-paper-actions__item--hidden-when-narrow"},u().createElement(Fe.ZP,{heapProps:{id:Me.jB}},u().createElement(Gi,{className:"flex-paper-actions__button flex-paper-actions__button--responsive-secondary",paper:e,onClick:this.showCiteModal}))))))}}try{Ra.displayName="FlexPaperActions"}catch(e){}Aa(Ra,"propTypes",{paper:S().object.isRequired,trackActionClick:S().func.isRequired,isPdp:S().bool,entitlement:S().object}),Aa(Ra,"contextTypes",{alertsStore:S().instanceOf(Yi.Z).isRequired,envInfo:S().instanceOf(g.Z).isRequired,dispatcher:S().instanceOf(P.Z).isRequired,weblabStore:S().instanceOf(J.ZP).isRequired});var La=r(45793);function Fa(e){const{fieldsOfStudy:t}=e.paper;if(!t||!t.size)return null;const r=t.join(", ");return u().createElement(u().Fragment,null,r)}try{Fa.displayName="PaperFieldsOfStudy"}catch(e){}var Za=r(13096);function Ma({childList:e,heapId:t}){return u().createElement("ul",{className:"flex-row-vcenter paper-meta","data-heap-id":t},e&&e.map(((e,t)=>e&&u().createElement("li",{className:"paper-meta-item",key:t},e))))}try{Ma.displayName="PaperMetaBase"}catch(e){}var Ba=r(16107),Qa=r(35007);class Ka extends u().PureComponent{render(){return this.props.children}}try{Ka.displayName="Fallback"}catch(e){}var qa=r(38886),Ha=r(38684),Va=r(7550),za=r(18443);function Ua(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Ya(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Ga extends u().PureComponent{componentDidMount(){const e=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ua(Object(r),!0).forEach((function(t){Ya(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ua(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.context.heapPropsChain||{},{},{experiment:this.props.experiment.KEY,impressedAs:this.props.impressedAs}),t=gt.Z.create("experiment-impression",e);(0,Si.Z)([t])}render(){return u().createElement(za.ZP,{heapProps:{"research-experiment":this.props.experiment.KEY,"research-experiment-impressed-as":this.props.impressedAs}},this.props.children)}}try{Ga.displayName="ImpressExperiment"}catch(e){}Ya(Ga,"contextTypes",{heapPropsChain:S().object});var Wa=r(97762),$a=r.n(Wa);function Ja(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Xa(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const en=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ja(Object(r),!0).forEach((function(t){Xa(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ja(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},F.ZP.ChildContextTypes,{heapProps:S().object,heapPropsChain:S().object,private:S().object,router:S().object});class tn extends u().PureComponent{getChildContext(){return this.props.context}render(){return this.props.children}}try{tn.displayName="WithContext"}catch(e){}Xa(tn,"childContextTypes",en);class rn extends u().PureComponent{constructor(...e){super(...e),this.state={elementToRender:this.props.children}}componentWillReceiveProps(e){this.setState({elementToRender:e.children})}componentDidCatch(e,t){this.props.onCatch&&this.props.onCatch(e,t),this.setState({elementToRender:this.props.fallback})}render(){if((0,a.jU)())return u().createElement("div",{key:"ssr-boundary"},this.state.elementToRender);try{const e=$a().renderToStaticMarkup(u().createElement(tn,{context:this.context},u().createElement(F.hx.Provider,{value:this.context},this.props.children)));return u().createElement("div",{key:"ssr-boundary",dangerouslySetInnerHTML:{__html:e}})}catch(e){return(0,tt.default)("serversideerrorboundary.fallback",`Error during render, falling back. Cause: [message=${e.message}]`,e),u().createElement("div",{key:"ssr-boundary"},this.props.fallback)}}}try{rn.displayName="SSRCompatibleErrorBoundary"}catch(e){}Xa(rn,"contextTypes",en);var an=r(89900);function nn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function sn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const on="fallback";class ln extends u().PureComponent{constructor(...e){super(...e),sn(this,"onCatch",((e,t)=>{const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(r),!0).forEach((function(t){sn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):nn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{experimentKey:this.props.experiment.KEY,variationName:this.state.isEligible?this.context.weblabStore.getVariation(this.props.experiment.KEY):on});(0,qa.i4)().logNamedError("error.skipper.render",e,r)}));const t=!this.props.eligibilityTest||this.props.eligibilityTest();t&&this.context.weblabStore.expose(this.props.experiment.KEY),this.state={isEligible:t}}renderVariationWithImpression(e){const{children:t,variation:r}=e.props;return u().createElement(an.Z,{variation:r,key:r},u().createElement(Ga,{experiment:this.props.experiment,impressedAs:r},cn(t)))}renderFallbackWithImpression(e){var t;return u().createElement(Ka,null,u().createElement(Ga,{experiment:this.props.experiment,impressedAs:on},cn(null==e||null===(t=e.props)||void 0===t?void 0:t.children)))}renderIneligible(){var e;const t=u().Children.toArray(this.props.children).find((e=>u().isValidElement(e)&&e.type===Va.Z))||null;return u().createElement(Ga,{experiment:this.props.experiment,impressedAs:"ineligible"},cn(null==t||null===(e=t.props)||void 0===e?void 0:e.children))}getFallbackAndVariations(){const e=u().Children.toArray(this.props.children);let t=null;const r=[];return e.forEach((e=>{u().isValidElement(e)&&(e.type===Ka?t=e:(r.push(e),t||e.type!==Va.Z||(t=e)))})),{fallback:t,variations:r}}renderExperiment(){const{fallback:e,variations:t}=this.getFallbackAndVariations(),r=this.renderFallbackWithImpression(e);return u().createElement(rn,{fallback:r,onCatch:this.onCatch},u().createElement(Ha.Z,{experiment:this.props.experiment},t.map((e=>this.renderVariationWithImpression(e)))))}render(){return this.state.isEligible?this.renderExperiment():this.renderIneligible()}}try{ln.displayName="ResearchABTest"}catch(e){}function cn(e){return e?"function"==typeof e?e():e:null}sn(ln,"contextTypes",{weblabStore:S().instanceOf(J.ZP).isRequired});var pn=r(4244),un=r(41139),dn=r(80129),hn=r.n(dn);function mn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function fn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}const yn=(0,St.Z)(R.default.PaperDetail.Citations)(It),bn=(0,St.Z)(R.default.PaperDetail.References)(It);class gn extends u().PureComponent{constructor(...e){super(...e),fn(this,"trackMetadataClick",((e,t)=>{const r=this.props.paperDetail.paper.id,i=R.default.getIn(R.default.PaperDetail.Header,e);(0,K.Z)(Z.Z.create(i,{paperId:r,clickedEntityId:t}))})),fn(this,"trackActionClick",((e,t)=>{const r=this.props.paperDetail.paper.id,i=R.default.getIn(R.default.PaperDetail.Header,"Action",e),a=W().recursive(t,{paperId:r});(0,K.Z)(Z.Z.create(i,a))})),fn(this,"renderCards",(()=>{const{envInfo:{isMobile:e}}=this.context,{paperDetail:t,paperDetail:{paper:r}}=this.props,i=r.citationStats.numCitations>0,a=t.citedPapers.totalCitations>0;return u().createElement(u().Fragment,null,u().createElement("div",{className:c()("centered-max-width-content","paper-detail-page__cards",{"paper-detail-page__cards--mobile":e})},u().createElement(Mi,null,u().createElement(ie,{paperDetail:t}),u().createElement(u().Fragment,null,this.renderResearchPrototypes(),i&&u().createElement(yn,{paperDetail:t,citationType:ae.Z.CITING_PAPERS}),a&&u().createElement(bn,{paperDetail:t,citationType:ae.Z.CITED_PAPERS})),u().createElement(Vi.Z,{feature:z.ZP.SimilarPapersPdp},u().createElement(Hi.Z,null,u().createElement(Ai,{paperDetail:t}))))))})),fn(this,"renderTldrAndAbstract",(()=>{const{paperDetail:e,paperDetail:{paper:t}}=this.props,{envInfo:{isMobile:r}}=this.context,a=e.skipperExperiments.memberOf("paper-abstract-highlight-v2"),n=t.tldr?u().createElement(u().Fragment,null,u().createElement("div",{className:"tldr-abstract__pill"},u().createElement("span",{className:"tldr-abstract-replacement__pill"},(0,i.KF)((e=>e.tldr.abstractLabel)))),u().createElement(La.ZP,{field:t.paperAbstract,fullTextClassName:"full-abstract"})):u().createElement(un.Z,{"data-test-id":"truncated-abstract",className:"abstract__text text--preline",text:t.paperAbstract.text,limit:r?200:500}),s=t.paperAbstract.text?a?u().createElement(Jt,{paperDetail:e}):u().createElement("div",{className:"tldr-abstract-replacement paper-detail-page__tldr-abstract","data-test-id":"no-highlight-abstract-text"},u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:"Abstract"}),n):null;return t.tldr?u().createElement(vt.Z,{paper:t,abstract:s,className:"paper-detail-page__tldr-abstract"}):s})),this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?mn(Object(r),!0).forEach((function(t){fn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):mn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({isInitialRender:!0},this.getStateFromWeblabStore()),this.context.weblabStore.registerComponent(this,(()=>{this.setState(this.getStateFromWeblabStore())}))}componentDidMount(){this.setState({isInitialRender:!1})}getStateFromWeblabStore(){const e=this.context.weblabStore.getVariation(ht.ZP.ABTestMock.KEY);if(this.state&&e===this.state.mockVariation)return{heapGroup:this.state.heapGroup,mockVariation:this.state.mockVariation};let t=1;return/^test_\d+$/.test(e)&&(t=parseFloat(e.replace("test_",""))/100),{heapGroup:Math.random()<=t?e:null,mockVariation:e}}getRelatedPapersQuery(e){const{paper:{entities:t}}=e;return t.isEmpty()?null:t.first().name}renderAuthorList(){const{paper:e}=this.props.paperDetail,{authors:t}=e;return t.isEmpty()?null:u().createElement(Zi,{paper:e,onClick:this.trackMetadataClick,isFreshPDP:!0,maxAuthors:3})}renderVenueAndYearListItem(){const{paper:e}=this.props.paperDetail,{pubDate:t,year:r,venue:a}=e;let n;n=(0,ri.C4)(e)?a&&"string"==typeof a&&a.length>0:a.text&&"string"==typeof a.text&&a.text.length>0;const s=(0,pe.Rz)(r),o=(0,pe.JL)(t),l=s||o;let c;if(c=o?u().createElement(La.ZP,{field:t}):r&&"string"==typeof r.text?u().createElement(La.ZP,{field:r}):r,l||n)return u().createElement("span",{key:"year-and-venue","data-test-id":"year-and-venue"},(0,i.KF)((e=>e.paper.meta.published)),n?" in ":null,n?u().createElement("span",{"data-test-id":"venue-metadata"},u().createElement(Qa.Z,{paper:e,stripYear:l,maxVenueTextLength:30,className:"cl-paper-venue--paper-metadata"})):null,l?" ":null,l?u().createElement("span",{"data-test-id":"paper-year"},c):null)}renderFieldOfStudy(){const{paper:e}=this.props.paperDetail;return e.fieldsOfStudy&&e.fieldsOfStudy.size?u().createElement(Fa,{paper:e,"data-heap-id":"paper-meta-fos"}):null}renderJournal(){var e;const{paper:t}=this.props.paperDetail;return null!=t&&t.venueId||null==t||null===(e=t.journal)||void 0===e||!e.name?null:u().createElement("span",{"data-heap-id":"paper-meta-journal"},t.journal.name)}renderResearchPrototypes(){const{paperDetail:e}=this.props;return u().createElement(u().Fragment,null,u().createElement(ln,{experiment:ht.ZP.TopicsBeta3,eligibilityTest:()=>this.props.paperDetail.skipperExperiments.memberOf(ht.ZP.TopicsBeta3.KEY)},u().createElement(an.Z,{variation:ht.ZP.TopicsBeta3.Variation.TOPICS_BETA3},u().createElement(ei,null))),u().createElement(Vi.Z,{feature:z.ZP.PaperQACard},u().createElement(Hi.Z,null,(()=>u().createElement(fr,{paperDetail:e})))),u().createElement(Vi.Z,{feature:z.ZP.PaperLabsCard},u().createElement(Hi.Z,null,(()=>u().createElement(Qr,{paperDetail:e})))))}render(){const{paperDetail:e,paperDetail:{paper:t,entitlement:r,skipperExperiments:i}}=this.props,{cookieJar:a,envInfo:{isMobile:n},history:s}=this.context,{heapGroup:o,isInitialRender:l}=this.state,c=(()=>{if("claim"in hn().parse(s.location.search.replace(/^\?/,"")))return!0;const e=a.getCookie(Ri.hK);if(e){const[r,i]=e.split(",");if(i===t.id)return!0}return!1})(),p=this.renderCards();return u().createElement("div",{className:"fresh-paper-detail-page paper-detail-cards",role:"main",id:"main-content","data-heap-id":ht.ZP.ABTestMock.KEY,"data-heap-group":o},u().createElement("div",{className:"fresh-paper-detail-page__above-the-fold"},u().createElement("div",{className:"centered-max-width-content"},c&&u().createElement(Vi.Z,{feature:e=>e.AuthorClaimOnPDP},u().createElement(Hi.Z,null,u().createElement(rr,{paperDetail:e}))),u().createElement(xe.Z,{layout:"row",layoutMed:"column",position:"relative",className:"fresh-paper-detail-page__top-container"},u().createElement(gr.Z,{className:"flex-item__left-column",width:"66"},u().createElement("div",{className:n?"fresh-paper-detail-page__header__mobile":"fresh-paper-detail-page__header","data-test-id":"paper-detail-page-header"},u().createElement(Za.Z,{paper:t,onClick:this.trackMetadataClick,isFreshPDP:!0,maxAuthors:3,isPDPMeta:!0,className:"paper-detail__paper-meta-top"}),u().createElement("h1",{"data-test-id":"paper-detail-title"},t.title.text),u().createElement("pre",{className:"bibtex-citation","data-nosnippet":!0},(0,Li._7)(t)),u().createElement(Ma,{childList:[this.renderAuthorList(),this.renderVenueAndYearListItem(),this.renderFieldOfStudy(),this.renderJournal()]}),u().createElement(qi,{paper:t,skipperExperiments:i}),this.renderTldrAndAbstract(),u().createElement(Ra,{paper:t,entitlement:r,trackActionClick:this.trackActionClick,isPdp:!0}))),u().createElement(gr.Z,{className:"flex-item__right-column",width:"33"},u().createElement(pn.Z,{className:"paper-detail-page__share-social-options"}),u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:"Scorecard"}),u().createElement(Fr,{paperDetail:e}))))),!l&&u().createElement("div",{className:"paper-detail-page__paper-nav",key:"papernav"},u().createElement(zr,null)),p,l&&u().createElement("div",{className:"paper-detail-page__paper-nav",key:"papernav"},u().createElement(zr,null)),u().createElement(h,null))}}try{gn.displayName="PaperDetailLayout"}catch(e){}fn(gn,"contextTypes",{cookieJar:S().instanceOf(Bi.Z).isRequired,envInfo:S().instanceOf(g.Z).isRequired,history:S().instanceOf(Ce.ZP).isRequired,paperStore:S().instanceOf(Ba.Z).isRequired,weblabStore:S().instanceOf(J.ZP).isRequired});const vn=(0,St.Z)(R.default.PaperDetail)(gn);var Pn=r(58886),En=r(22457),Sn=r(23616),_n=r(43741),wn=r(5002),On=r(11978);function Cn(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function Tn(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class Nn extends u().Component{constructor(...e){super(...e),Tn(this,"onAuthStoreChange",(()=>{const{dispatcher:e}=this.context;setTimeout((async()=>{const t=await this.apiFetchPaperDetail(),r=(0,Pn.V)(t);r&&e.dispatch(r)}),5)})),Tn(this,"getStateFromPaperStore",(()=>({loading:this.context.paperStore.isLoading(),paperDetail:this.context.paperStore.getPaperDetail()}))),Tn(this,"apiFetchPaperDetail",(()=>{const{paperDetail:e}=this.state,t=e.paper.id;return this.context.api.fetchPaperDetail({paperId:t,requireSlug:!1})})),Tn(this,"fetchPaperLite",(async e=>{var t;const{api:r}=this.context,i=((null!=(t=await r.fetchPapersByIds({paperIds:[e],model:"PaperLite"}))&&null!=(t=t.resultData)?t.paperLites:t)||[]).map((e=>(0,Ye.wp)(e))),[a]=i;return Gt()(a,`API didn't return a paper to paperId="${e}"`),a})),Tn(this,"openOrganizePapersShelf",(async()=>{const{dispatcher:e}=this.context,{paperId:t}=this.props,r=await this.fetchPaperLite(t),i=(0,di.Re)({paperId:t,paperTitle:r.title});e.dispatch(i)})),Tn(this,"fetchLibraryFolders",(()=>{const{api:e,libraryFolderStore:t}=this.context;return t.isUninitialized()?e.getLibraryFolders():Promise.resolve()})),Tn(this,"handleSaveToLibraryWithShelf",(async()=>{const{api:e,messageStore:t,dispatcher:r}=this.context,{paperId:a}=this.props,n=await this.fetchPaperLite(a);this.fetchLibraryFolders().then((()=>{const s=(0,li.hm)({paperId:a,paperTitle:n.title,sourceType:pi.Zu});e.createLibraryEntryBulk(s).catch((e=>{t.addError((0,i.KF)((e=>e.library.saveToLibraryShelf.errorMessage))),yi.Z.error(e)})),r.dispatch((0,di.ON)({paper:n,selectedFolders:Vt.ZP.Set()}))})).catch((e=>{(0,tt.default)("library",`failed to open Save To Library shelf for paperId="${a}"]`,e);const r=(0,i.KF)((e=>e.library.message.error.header)),n=(0,i.KF)((e=>e.library.message.error.body));t.addError(n,r)}))})),Tn(this,"saveToLibraryNew",(()=>{const{authStore:e,dispatcher:t}=this.context;e.ensureLogin({dispatcher:t,location:ui.NL.pdpLibrary}).then((async()=>{await this.fetchLibraryFolders(),this.getStateFromLibraryFolderStore().isInLibrary?this.openOrganizePapersShelf():this.handleSaveToLibraryWithShelf()}),(e=>{yi.Z.warn(e)}))}));const{authStore:t,libraryFolderStore:r,paperStore:a}=this.context;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Cn(Object(r),!0).forEach((function(t){Tn(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Cn(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},this.getStateFromLibraryFolderStore(),{},this.getStateFromPaperStore()),t.registerComponent(this,this.onAuthStoreChange),r.registerComponent(this,(()=>{this.setState(this.getStateFromLibraryFolderStore())})),a.registerComponent(this,(()=>{this.setState(this.getStateFromPaperStore())}))}componentDidMount(){const{history:e}=this.context;(0,Sn.UF)(e.location.search).save_to_library&&this.saveToLibraryNew()}getStateFromLibraryFolderStore(){const{libraryFolderStore:e}=this.context,{paperId:t}=this.props;return{isInLibrary:e.isPaperInLibrary(t)}}render(){const{paperDetail:e,loading:t}=this.state,r=!t&&u().createElement(re,{target:R.default.PaperDetail.SCROLL_LANDMARKS,section:"Footer"},u().createElement(_n.Z,null));return u().createElement(za.ZP,{heapProps:{"page-type":En.W,"page-paper-id":e.paper.id}},u().createElement(On.Z,{key:e.paper.id,className:this.context.envInfo.isMobile?"detail":"paper",footer:r},t?u().createElement("div",{className:"container"},u().createElement("div",{className:"loading-controls flex-row-vcenter",role:"main",id:"main-content"},u().createElement(Ie.Z,{testId:"paper-details-loading"})," Loading")):u().createElement(u().Fragment,null,u().createElement(vn,{paperDetail:e}),u().createElement(wn.Z,{paperDetail:e}))))}}try{Nn.displayName="PaperDetailPage"}catch(e){}Tn(Nn,"contextTypes",{api:S().instanceOf(ne.Z).isRequired,authStore:S().instanceOf(hi.ZP).isRequired,dispatcher:S().instanceOf(P.Z).isRequired,envInfo:S().instanceOf(g.Z).isRequired,history:S().instanceOf(Ce.ZP).isRequired,libraryFolderStore:S().instanceOf(fi.Z).isRequired,messageStore:S().instanceOf(bi.Z).isRequired,paperStore:S().instanceOf(Ba.Z).isRequired,weblabStore:S().instanceOf(J.ZP).isRequired})},67174:(e,t,r)=>{"use strict";r.d(t,{Z:()=>C});var i=r(743),a=r(2567),n=r(5835),s=r(96560),o=r(99124),l=r(52254),c=r(38953),p=r(45793),u=r(59044),d=r(67294),h=r.n(d);function m(){return m=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},m.apply(this,arguments)}function f(e,t,r){!function(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,r)}function y(e,t){var r=function(e,t,r){if(!t.has(e))throw new TypeError("attempted to get private field on non-instance");return t.get(e)}(e,t);return function(e,t){return t.get?t.get.call(e):t.value}(e,r)}const b="more-authors-label",g="author-list__link",v=({author:e,onClick:t,children:r})=>h().createElement(u.Z,{to:"AUTHOR_PROFILE",params:{authorId:e.alias.ids.first(),slug:e.alias.slug},className:g+" author-list__author-name",onClick:()=>t(e.alias.ids.first())},r);try{v.displayName="AuthorLink"}catch(e){}v.defaultProps={onClick:()=>{}};const P=({amount:e,collapsed:t,onClick:r,ariaProps:i})=>h().createElement(c.default,{ariaProps:i,className:b,onClick:r,testId:t?"author-list-expand":"author-list-collapse",label:t?`+${(0,l._6)(e,"author","authors",!1)}`:"less"});try{P.displayName="AuthorListToggle"}catch(e){}var E,S,_,w=new WeakMap,O=new WeakMap;class C extends d.PureComponent{constructor(...e){super(...e),f(this,w,{writable:!0,value:h().createRef()}),f(this,O,{writable:!0,value:h().createRef()}),this.state={collapsed:!0}}componentDidUpdate(e,t){const{collapsed:r}=this.state;t.collapsed!==r&&(0,n.bG)({collapsed:r,listRef:y(this,O),newContentRef:y(this,w),defaultButtonClass:b,expandedTargetClass:g})}render(){const{max:e,authors:t,shouldLinkToAHP:r,onAuthorClick:n,heapId:o}=this.props,{collapsed:l}=this.state;if(t.isEmpty())return null;const c=t.size>e,u=c&&l?t.take(2).push(t.last()):t,d=t.size-3,f={"aria-expanded":!l,"aria-label":(0,s.KF)((e=>e.moreAuthors.expandAriaLabel),d)},b=c?h().createElement(P,{ariaProps:f,onClick:()=>this.setState((e=>({collapsed:!e.collapsed}))),collapsed:l,amount:d}):null,g=u.size-1;return h().createElement("span",{ref:y(this,O),className:"author-list"},u.map(((e,t)=>h().createElement("span",m({key:`${e.alias.ids.join("-")}-${t}`},(0,i.ON)({id:o,"author-id":e.alias.ids.first()}),{"data-test-id":"author-list",ref:2!==t||l?void 0:y(this,w)}),0===t?null:h().createElement("span",{"aria-hidden":"true"},", "),b&&l&&t===g?h().createElement("span",null,b," "):null,r&&(0,a.Lf)(e.alias)?h().createElement(v,{author:e,onClick:n},h().createElement(p.ZP,{field:e.highlightedField})):h().createElement(p.ZP,{field:e.highlightedField,className:"author-list__author-name"})))),b&&!l?h().createElement("span",null," ",b):null)}}try{C.displayName="AuthorList"}catch(e){}E=C,S="defaultProps",_={max:6,shouldLinkToAHP:!0,heapId:o.EN,onAuthorClick:()=>{}},(S=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(S))in E?Object.defineProperty(E,S,{value:_,enumerable:!0,configurable:!0,writable:!0}):E[S]=_},13096:(e,t,r)=>{"use strict";r.d(t,{Z:()=>P});var i=r(67174),a=r(96560),n=r(52254),s=r(45793),o=r(45697),l=r.n(o),c=r(67294),p=r.n(c);const u=({url:e,doi:t})=>p().createElement("section",{className:"doi"},p().createElement("span",{className:"doi__label"},(0,a.KF)((e=>e.paper.meta.doi))),p().createElement("a",{className:"doi__link",href:e},t));try{u.displayName="PaperDoi"}catch(e){}u.propTypes={url:l().string.isRequired,doi:l().string.isRequired};const d=u;var h,m,f,y=r(35007),b=r(52223),g=r(94184),v=r.n(g);class P extends p().PureComponent{handleClick(e,t){const r=this.props.onClick;"function"==typeof r&&r(e,t)}renderAuthorsListItem(){const{authors:e}=this.props.paper;return e.isEmpty()?null:p().createElement("li",{"data-test-id":"author-list"},p().createElement(i.Z,{authors:e,onAuthorClick:e=>{this.handleClick("AUTHOR",e)},max:this.props.maxAuthors,shouldLinkToAHP:!this.props.disableAuthorLinks,heapId:this.props.authorHeapId}))}renderVenueListItem(){const{paper:{venue:e}}=this.props;return e&&"string"==typeof e.text&&0!==e.text.length?p().createElement("li",{key:"venue","data-test-id":"venue-metadata"},p().createElement(y.Z,{paper:this.props.paper,stripYear:!0,className:"cl-paper-venue--paper-metadata"})):null}renderYearListItem(){const{year:e}=this.props.paper;return(0,n.Rz)(e)?p().createElement("li",{key:"year","data-test-id":"paper-year"},"string"==typeof e.text?p().createElement(s.ZP,{field:e}):e):null}renderDoiListItem(){const{doiInfo:e}=this.props.paper;return e?p().createElement("li",{key:"doi","data-test-id":"paper-doi"},p().createElement(d,{url:e.doiUrl,doi:e.doi})):null}renderCorpusId(){const{corpusId:e}=this.props.paper;return e?p().createElement("li",{key:"corpus-id","data-test-id":"corpus-id"},(0,a.KF)((e=>e.paper.meta.corpusId),e)):null}render(){const{className:e,isFreshPDP:t,isPDPMeta:r}=this.props;return p().createElement("ul",{className:v()("paper-meta",e),"data-test-id":"paper-meta-subhead"},!r&&this.renderAuthorsListItem(),t?this.renderDoiListItem():[this.renderVenueListItem(),this.renderYearListItem()],this.renderCorpusId())}}try{P.displayName="PaperMeta"}catch(e){}h=P,m="contextTypes",f={envInfo:l().object.isRequired,weblabStore:l().instanceOf(b.ZP).isRequired},(m=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(m))in h?Object.defineProperty(h,m,{value:f,enumerable:!0,configurable:!0,writable:!0}):h[m]=f},58365:(e,t,r)=>{"use strict";r.d(t,{Z:()=>L});var i=r(8914),a=r(71514),n=r(69421),s=r(35657),o=r(20673),l=r(94789),c=r(96560),p=r(52848),u=r(40228),d=r(46332),h=r(5835),m=r(44082),f=r(88598),y=r(32548),b=r(45393),g=r(89107),v=r(8392),P=r(98213),E=r(88231),S=r(10194),_=r(81619),w=r(59044),O=r(95512),C=r(49381),T=r(25864),N=r(45697),x=r.n(N),I=r(67294),D=r.n(I);function k(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function j(){return j=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},j.apply(this,arguments)}function A(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class R extends D().PureComponent{constructor(...e){super(...e),A(this,"showTimer",void 0),A(this,"closePopover",(()=>{this.setState({isPopoverVisible:!1})})),A(this,"getLibraryCueEntriesData",(async e=>{const{libraryEntriesMap:t}=this.props,{api:r}=this.context,i=e.filter((e=>!t.get(e)));i.isEmpty()||await r.fetchLibraryCueData(i)})),A(this,"getCuePaperData",(async e=>{const{cuePapersMap:t}=this.props,{graphQLApi:r}=this.context,i=e.filter((e=>!t.get(e)));i.isEmpty()||await async function(e,{graphQLApi:t}){const r=l.Ps`
      ${s.eL}

      query GetCuePapers($paperIds: [PaperId!]) {
        papers(paperIds: $paperIds) {
          id
          ...${s.P5}
        }
      }
    `,i={paperIds:e};return await t.fetchQuery({requestType:o.default.requestTypes.GQL__CUE_PAPERS,query:r,variables:i,operationName:"GetCuePapers"})}(i,{graphQLApi:r})})),A(this,"openPopoverOrShelf",((e,t)=>{const{prioritizedCue:r,cueEventTargets:{viewCuePaperShelfEvent:n}}=this.props,{envInfo:{isMobile:s},dispatcher:o}=this.context,l=t.take(i.tn);switch(r){case a.Q4:case a.xF:this.getLibraryCueEntriesData(l);break;case a.T3:this.getCuePaperData(l)}s?o.dispatch((0,m.YB)({paperIds:t,cueDescription:e.cueDescription,cueHeader:e.cueLabel,prioritizedCue:r,viewCuePaperShelfEvent:n})):this.setState({isPopoverVisible:!0})})),A(this,"handleBlur",(e=>{e.currentTarget.contains(e.relatedTarget)||this.setState({isPopoverVisible:!1})})),this.state={isPopoverVisible:!1}}componentDidMount(){const{resultPaperId:e,prioritizedCue:t,paperIndex:r,paperIds:i,cueEventTargets:{viewCueBadgeEvent:a}}=this.props;i.isEmpty()||(0,T.Z)(C.Z.create(a,{cueType:t,isCueDisplayed:!0,paperId:e,index:r}))}render(){const{isPopoverVisible:e}=this.state,{resultPaperId:t,prioritizedCue:r,paperIndex:a,paperIds:s}=this.props,{isMobile:o}=this.context.envInfo;if(s.isEmpty())return null;const l=(0,n.LT)(r,s.size);if(!l)return null;const d=(0,h.B6)({onClick:this.closePopover,overrideKeys:[u.Oy]}),{onKeyDown:m}=d,f={"aria-expanded":e};return D().createElement("div",{className:"personalized-cue-badge"},D().createElement(b.default,j({"data-test-id":"personalized-cue-badge-button",ariaProps:f,className:"personalized-cue-badge__button",onClick:e?this.closePopover:()=>this.openPopoverOrShelf(l,s),icon:D().createElement(S.Z,{icon:"personalization-small",width:"12",height:"12"}),label:l.cueLabel},(0,p.td)({"cue-type":r,"paper-id":t,index:a}))),e&&D().createElement(D().Fragment,null,D().createElement("div",j({className:"personalized-cue-badge__overlay"},d)),D().createElement(g.default,{"data-test-id":"personalized-cue-badge-popover",className:"personalized-cue-badge__popover",arrow:g.ARROW_POSITION.SIDE_TOP_POS_LEFT,onBlur:o?void 0:this.handleBlur,onKeyDown:m},D().createElement(i.ZP,{prioritizedCue:r,paperIds:s}),D().createElement("hr",{className:"personalized-cue-badge__footer-seperator"}),D().createElement("div",{className:"flex-row personalized-cue-badge__footer"},D().createElement("p",{className:"personalized-cue-badge__text"},l.cueDescription),D().createElement("span",{className:"personalized-cue-badge__bullet","aria-hidden":"true"}),D().createElement(w.Z,j({to:"FAQ_ROOT",hash:"why-are-some-papers-annotated-with-a-thumbprint-icon-how-do-these-work"},(0,p.Yt)({"cue-type":r})),D().createElement(D().Fragment,null,(0,c.KF)((e=>e.personalizedCue.learnMore)),D().createElement(S.Z,{icon:"arrow-lite",width:"12",height:"8",className:"personalized-cue-badge__arrow-icon"})))))))}}try{R.displayName="PersonalizedCueBadge"}catch(e){}A(R,"contextTypes",{api:x().instanceOf(y.Z).isRequired,cueStore:x().instanceOf(v.Z).isRequired,dispatcher:x().instanceOf(O.Z).isRequired,envInfo:x().instanceOf(P.Z).isRequired,graphQLApi:x().instanceOf(E.Z).isRequired,libraryFolderStore:x().instanceOf(_.Z).isRequired});const L=(0,d.s)(R,(e=>{const{cueStore:t,libraryFolderStore:r}=(0,f.bp)();let i=e.cueBadgeData.paperIds;return e.prioritizedCue!==a.T3&&(i=i.filter((e=>r.isPaperInLibrary(e)))),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?k(Object(r),!0).forEach((function(t){A(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):k(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{},(0,f.zQ)(t,(e=>({libraryEntriesMap:e.getEntries(),cuePapersMap:e.getCuePapers()}))),{paperIds:i})}))},91517:(e,t,r)=>{"use strict";r.d(t,{Z:()=>j});var i=r(76800),a=r(74507),n=r(55181),s=r(29212),o=r(96560),l=r(40228),c=r(5835),p=r(6883),u=r(32548),d=r(92545),h=r(77930),m=r(54505),f=r(40059),y=r(45793),b=r(10194),g=r(36347),v=r(16107),P=r(78502),E=r(40565),S=r(25864),_=r(94184),w=r.n(_),O=r(35369),C=r(45697),T=r.n(C),N=r(67294),x=r.n(N);function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function D(){return D=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},D.apply(this,arguments)}function k(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class j extends x().Component{constructor(...e){super(...e),k(this,"fetchSuggestions",void 0),k(this,"getStateFromQueryStore",(()=>({query:this.props.injectQueryStore.getQuery(),queryText:this.props.injectQueryStore.getQuery().queryString||""}))),k(this,"getStateFromPaperStore",(()=>({paperDetail:this.context.paperStore.getPaperDetail()}))),k(this,"getStateFromAuthorStore",(()=>({authorDetail:this.context.authorStore.getAuthorDetails()}))),k(this,"doFetchSuggestions",(()=>{const{queryText:e}=this.state,{suggestionType:t}=this.props;if(!(e.length<3))switch(t){case p.s.PAPER_CITATION:this.fetchPaperCitationCompletions();break;case p.s.PAPER_REFERENCE:this.fetchPaperReferenceCompletions();break;case p.s.AUTHOR_PAPER:this.fetchAuthorPaperCompletions();break;default:return void g.Z.warn(`Invalid: SuggestionType ${t} is not associated with a completion call.`)}})),k(this,"fetchPaperCitationCompletions",(()=>{const{paperDetail:e,queryText:t}=this.state,{api:r}=this.context;if(!e)return;const i=e.paper.id;r.fetchCitationCompletions({paperId:i,prefixQuery:t}).then((e=>this.setSuggestions(e,!1)))})),k(this,"fetchPaperReferenceCompletions",(()=>{const{paperDetail:e,queryText:t}=this.state,{api:r}=this.context,i=e.paper.id;r.fetchReferenceCompletions({paperId:i,prefixQuery:t}).then((e=>this.setSuggestions(e,!1)))})),k(this,"fetchAuthorPaperCompletions",(()=>{var e;const{authorDetail:t,queryText:r}=this.state,{api:i}=this.context;if(!t)return;const a=null===(e=t.author)||void 0===e?void 0:e.id;null!=a&&i.fetchAuthorPaperCompletions({authorId:a,prefixQuery:r}).then((e=>this.setSuggestions(e,!0)))})),k(this,"setSuggestions",((e,t)=>{const{queryText:r}=this.state,i=O.ZP.List(e.resultData.completions);t&&i.map((e=>{e.completionType===a.Q.AUTHOR.pluralId&&(e.completionType=a.Q.COAUTHOR.pluralId)})),this.setState((e=>{const t=e.queryText===r?r:e.suggestQueryText;return{suggestions:i,suggestQueryText:t}}))})),k(this,"onChangeQueryText",(e=>{const t=e.currentTarget.value;t.length>=3?this.setState({queryText:t,showSuggestions:!0,selectedSuggestionIndex:null},this.fetchSuggestions):this.setState({queryText:t,suggestQueryText:t,showSuggestions:!1,selectedSuggestionIndex:null})})),k(this,"clickSuggestion",(()=>{this.setState({showSuggestions:!1},(()=>this.toggleFacetToSelectedSuggestion())),this.props.onSearchbarCondense&&this.props.onSearchbarCondense()})),k(this,"toggleFacetToSelectedSuggestion",(()=>{const{selectedSuggestionIndex:e,suggestions:t}=this.state,{injectQueryStore:r}=this.props,{router:i}=this.context;if(null===e)return;const s=t.get(e);if(null==s)return;const o=s.completionType,l=s.completion.text;switch(o){case a.Q.AUTHOR.pluralId:r.routeToToggleFilter(a.Q.AUTHOR.id,l,i);break;case a.Q.COAUTHOR.pluralId:r.routeToToggleFilter(a.Q.COAUTHOR.id,l,i);break;case a.Q.VENUE.id:r.routeToToggleFilter(a.Q.VENUE.id,l,i);break;case a.Q.FIELDS_OF_STUDY.pluralId:{const e=(0,n.w8)(l);r.routeToToggleFilter(a.Q.FIELDS_OF_STUDY.pluralId,e.id,i);break}}})),k(this,"onSubmitQueryString",(e=>{e.preventDefault();const{router:t}=this.context,{injectQueryStore:r,suggestionType:i}=this.props,a=this.state.queryText.trim();if("routeToQueryString"in r){r.routeToQueryString(a,t);const e=this.getEventTarget(i);(0,S.Z)(E.Z.create(e,{queryString:a}))}})),k(this,"getEventTarget",(e=>{switch(e){case p.s.PAPER_CITATION:case p.s.PAPER_REFERENCE:return m.default.PaperDetail.Citations.SEARCH;case p.s.AUTHOR_PAPER:return m.default.AuthorHomePage.Publications.SEARCH;default:return g.Z.warn(`Invalid: SuggestionType ${e} is not associated with an event target.`),""}})),k(this,"onSuggestionMouseDown",(e=>{e.preventDefault()})),k(this,"onKeyDown",(e=>{const{selectedSuggestionIndex:t,suggestions:r}=this.state,i=t||0;switch(e.keyCode){case l.Uq:null!==t&&(e.preventDefault(),this.clickSuggestion());break;case l.Gs:null!==t&&(e.preventDefault(),this.clickSuggestion(),this.setState({showSuggestions:!1,selectedSuggestionIndex:null}));break;case l.Oy:this.setState({queryText:"",suggestQueryText:"",showSuggestions:!1,selectedSuggestionIndex:null});break;case l.Go:this.state.showSuggestions&&!r.isEmpty()&&(e.preventDefault(),null===t?this.selectSuggestion(r.size-1):0===t?this.selectNone():this.selectSuggestion(i-1));break;case l.Tk:this.state.showSuggestions&&!r.isEmpty()&&(e.preventDefault(),null===t?this.selectSuggestion(0):t===r.size-1?this.selectNone():this.selectSuggestion(i+1))}})),k(this,"onFocus",(()=>{this.props.onSearchbarFocus&&this.props.onSearchbarFocus(),this.setState({showSuggestions:!0},this.fetchSuggestions)})),k(this,"onBlur",(()=>{this.setState({showSuggestions:!1})})),k(this,"selectNone",(()=>{this&&this.setState({selectedSuggestionIndex:null})})),k(this,"shouldDisplaySuggestions",((e=this.state)=>e.showSuggestions&&!e.suggestions.isEmpty())),k(this,"renderSuggestions",(()=>{const{selectedSuggestionIndex:e,suggestions:t}=this.state;return x().createElement("ul",{className:"suggestion-dropdown-menu","data-test-id":"citations-autocomplete-suggestions",onMouseLeave:this.selectNone,role:"listbox"},t.map((({completionType:r,completion:i},a)=>{const n=w()("flex-row-vcenter suggestion truncate-line",{cursor:a===e,"border-bottom":a!==t.size-1}),l=r?(0,o.KF)((e=>e.filterBar.shortLabels[r])):"",p=(0,c.B6)({onClick:()=>{this.selectSuggestion(a,(()=>{this.clickSuggestion()}))}});return x().createElement("li",D({key:`${i.text} ${a}`,"data-test-id":`citations-${r}-suggestion`,className:n,role:"option","aria-selected":e===a,onMouseEnter:()=>this.selectSuggestion(a),onMouseDown:this.onSuggestionMouseDown},p),x().createElement(y.ZP,{className:"suggestion__text truncate-line",field:(0,s.Pz)(i)}),r&&x().createElement("span",{className:"suggestion-text-type"},"",l))})))})),k(this,"render",(()=>{const{formId:e,containerClass:t,placeholder:r,isSearchbarFocused:i,suggestionType:a}=this.props,{queryText:n}=this.state;return x().createElement("form",{id:e||"dropdown-filters__search-within-form",className:"dropdown-filters__search-within-form",role:"search",onSubmit:this.onSubmitQueryString},x().createElement(f.Z,{className:t||"search-within"},x().createElement(h.default,{type:"search",name:"cite_q",id:"search-within-input",className:w()("dropdown-filters__search-within-input",{expanded:i,"author-search":a===p.s.AUTHOR_PAPER}),autoComplete:"off",onChange:this.onChangeQueryText,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,placeholder:r,value:n,"data-test-id":"search-within-input"}),x().createElement("button",{"aria-label":(0,o.KF)((e=>e.appHeader.searchSubmitAriaLabel)),className:"form-submit form-submit__icon-text","data-test-id":"submit-search-within-input"},x().createElement("div",{className:"flex-row-vcenter"},x().createElement(b.Z,{width:"14",height:"14",icon:"search-small"})))),this.shouldDisplaySuggestions()?this.renderSuggestions():null)}));const t=this.getStateFromQueryStore(),{queryText:r}=t;this.state=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){k(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},t,{},this.getStateFromPaperStore(),{},this.getStateFromAuthorStore(),{suggestQueryText:r,showSuggestions:!1,suggestions:O.ZP.List(),selectedSuggestionIndex:null}),this.props.injectQueryStore.registerComponent(this,(()=>{const{queryText:e}=this.getStateFromQueryStore();this.setState({queryText:e,suggestQueryText:e,suggestions:O.ZP.List()})})),this.context.paperStore.registerComponent(this,(()=>{this.setState(this.getStateFromPaperStore())})),this.context.authorStore.registerComponent(this,(()=>{this.setState(this.getStateFromAuthorStore())}))}componentDidMount(){this.fetchSuggestions=(0,i.D)(this.doFetchSuggestions,400,{leading:!0,trailing:!0})}componentWillUnmount(){this.fetchSuggestions&&this.fetchSuggestions.cancel()}selectSuggestion(e,t){this.setState({selectedSuggestionIndex:e},t)}}try{j.displayName="SearchWithinTextSearch"}catch(e){}k(j,"contextTypes",{api:T().instanceOf(u.Z).isRequired,authorStore:T().instanceOf(d.Z).isRequired,history:T().instanceOf(P.ZP).isRequired,paperStore:T().instanceOf(v.Z).isRequired,router:T().object.isRequired})},4244:(e,t,r)=>{"use strict";r.d(t,{Z:()=>_});var i=r(82874),a=r(29902),n=r(96560),s=r(62722),o=r(78198),l=r(19244),c=r(26540),p=r(3724),u=r(88598),d=r(87802),h=r(45393),m=r(62093),f=r(10194),y=r(13894),b=r(94184),g=r.n(b),v=r(67294),P=r.n(v);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},E.apply(this,arguments)}const S=1e4;function _({folder:e,className:t}){const{dispatcher:r,envInfo:b,history:v}=(0,u.bp)(),[_,w]=P().useState(!1),O=(null==e?void 0:e.privacySetting)===c.Kj,C=e?(0,a.X)(e.id):(0,i.k)(v.location.search),T=!e||O?()=>{C&&(d.ZP.copyToClipboard(C),w(!0)),setTimeout((()=>{w(!1)}),S)}:()=>{r.dispatch((0,p.K)({id:l.Z.CONFIRM_PUBLIC_LIBRARY,data:{folder:e}}))},N=e?(0,s.HQ)({"is-public":O}):(0,o.by)(),x={"aria-label":(0,n.KF)((e=>e.library.shared.copyLink))};return b.isMobile&&_?P().createElement(h.default,E({label:(0,n.KF)((e=>e.library.shared.copiedLink)),icon:P().createElement(f.Z,{icon:"check"}),type:h.TYPE.TERTIARY,className:g()("share-link-button--mobile",t||""),onClick:T},N)):P().createElement(P().Fragment,null,P().createElement(m.default,{tooltipContent:_?(0,n.KF)((e=>e.library.shared.copiedLink)):(0,n.KF)((e=>e.library.shared.copyLink)),placement:m.PLACEMENT.BOTTOM},P().createElement(h.default,E({label:(0,n.KF)((e=>e.library.shared.shareLabel)),icon:P().createElement(f.Z,{icon:"fa-link"}),type:h.TYPE.TERTIARY,className:g()("share-link-button",t||""),onClick:T,ariaProps:x},N))),_&&P().createElement(y.Z,{message:(0,n.KF)((e=>e.library.shared.copiedLink)),durationMs:S}))}try{_.displayName="ShareLinkButton"}catch(e){}},18443:(e,t,r)=>{"use strict";r.d(t,{ZP:()=>p});var i=r(36347),a=r(45697),n=r.n(a),s=r(67294),o=r.n(s);function l(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,i)}return r}function c(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var i=r.call(e,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}class p extends o().PureComponent{getChildContext(){const{heapPropsChain:e={}}=this.context,{heapProps:t={}}=this.props,r="function"==typeof t?t(e):(function(e,t){if(u)return;const r=function(e,t){return Object.keys(e).filter((e=>e in t)).filter((r=>e[r]!==t[r]))}(e,t);r.length>0&&(i.Z.warn(`<HeapTracking/> props overwritten (see: ${r.join(", ")})`),u=!0)}(e,t),function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?l(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):l(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e,{},t));return{heapPropsChain:r}}render(){return this.props.children||null}}try{p.displayName="HeapContext"}catch(e){}c(p,"childContextTypes",{heapPropsChain:n().object.isRequired}),c(p,"contextTypes",{heapPropsChain:n().object});let u=!1},22457:(e,t,r)=>{"use strict";r.d(t,{S:()=>i,W:()=>a});const i="home",a="paper_detail"},6883:(e,t,r)=>{"use strict";r.d(t,{s:()=>i});const i={AUTHOR_PAPER:"authorPaper",PAPER_CITATION:"paperCitation",PAPER_REFERENCE:"paperReference"}},30728:(e,t,r)=>{var i;!function(){"use strict";var t="object"==typeof window?window:{};!t.JS_CRC_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node&&(t=r.g);var a,n,s,o,l=!t.JS_CRC_NO_COMMON_JS&&e.exports,c=r.amdO,p=!t.JS_CRC_NO_ARRAY_BUFFER&&"undefined"!=typeof ArrayBuffer,u="0123456789abcdef".split(""),d=[{name:"crc32",polynom:3988292384,initValue:-1,bytes:4},{name:"crc16",polynom:40961,initValue:0,bytes:2}];for(a=0;a<d.length;++a)for((f=d[a]).method=function(e){return function(t){return h(t,e)}}(f),f.table=[],n=0;n<256;++n){for(o=n,s=0;s<8;++s)o=1&o?f.polynom^o>>>1:o>>>1;f.table[n]=o>>>0}var h=function(e,t){var r="string"!=typeof e;r&&p&&e instanceof ArrayBuffer&&(e=new Uint8Array(e));var i,a,n=t.initValue,s=e.length,o=t.table;if(r)for(a=0;a<s;++a)n=o[255&(n^e[a])]^n>>>8;else for(a=0;a<s;++a)n=(i=e.charCodeAt(a))<128?o[255&(n^i)]^n>>>8:i<2048?o[255&((n=o[255&(n^(192|i>>6))]^n>>>8)^(128|63&i))]^n>>>8:i<55296||i>=57344?o[255&((n=o[255&((n=o[255&(n^(224|i>>12))]^n>>>8)^(128|i>>6&63))]^n>>>8)^(128|63&i))]^n>>>8:o[255&((n=o[255&((n=o[255&((n=o[255&(n^(240|(i=65536+((1023&i)<<10|1023&e.charCodeAt(++a)))>>18))]^n>>>8)^(128|i>>12&63))]^n>>>8)^(128|i>>6&63))]^n>>>8)^(128|63&i))]^n>>>8;n^=t.initValue;var l="";return t.bytes>2&&(l+=u[n>>28&15]+u[n>>24&15]+u[n>>20&15]+u[n>>16&15]),l+(u[n>>12&15]+u[n>>8&15]+u[n>>4&15]+u[15&n])},m={};for(a=0;a<d.length;++a)m[(f=d[a]).name]=f.method;if(l)e.exports=m;else{for(a=0;a<d.length;++a){var f;t[(f=d[a]).name]=f.method}c&&(void 0===(i=function(){return m}.call(m,r,m,e))||(e.exports=i))}}()}}]);
//# sourceMappingURL=bundle-2019.js.map